(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[179],{261:(hp,_,oe)=>{"use strict";function ae(t){return"function"==typeof t}function m(t){const n=t(S=>{Error.call(S),S.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const x=m(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((S,U)=>`${U+1}) ${S.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function T(t,r){if(t){const n=t.indexOf(r);0<=n&&t.splice(n,1)}}class b{constructor(r){this.initialTeardown=r,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let r;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const re of n)re.remove(this);else n.remove(this);const{initialTeardown:S}=this;if(ae(S))try{S()}catch(re){r=re instanceof x?re.errors:[re]}const{_teardowns:U}=this;if(U){this._teardowns=null;for(const re of U)try{a(re)}catch(ye){r=null!=r?r:[],ye instanceof x?r=[...r,...ye.errors]:r.push(ye)}}if(r)throw new x(r)}}add(r){var n;if(r&&r!==this)if(this.closed)a(r);else{if(r instanceof b){if(r.closed||r._hasParent(this))return;r._addParent(this)}(this._teardowns=null!==(n=this._teardowns)&&void 0!==n?n:[]).push(r)}}_hasParent(r){const{_parentage:n}=this;return n===r||Array.isArray(n)&&n.includes(r)}_addParent(r){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(r),n):n?[n,r]:r}_removeParent(r){const{_parentage:n}=this;n===r?this._parentage=null:Array.isArray(n)&&T(n,r)}remove(r){const{_teardowns:n}=this;n&&T(n,r),r instanceof b&&r._removeParent(this)}}b.EMPTY=(()=>{const t=new b;return t.closed=!0,t})();const e=b.EMPTY;function o(t){return t instanceof b||t&&"closed"in t&&ae(t.remove)&&ae(t.add)&&ae(t.unsubscribe)}function a(t){ae(t)?t():t.unsubscribe()}const l={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},i={setTimeout(...t){const{delegate:r}=i;return((null==r?void 0:r.setTimeout)||setTimeout)(...t)},clearTimeout(t){const{delegate:r}=i;return((null==r?void 0:r.clearTimeout)||clearTimeout)(t)},delegate:void 0};function d(t){i.setTimeout(()=>{const{onUnhandledError:r}=l;if(!r)throw t;r(t)})}function u(){}const s=p("C",void 0,void 0);function p(t,r,n){return{kind:t,value:r,error:n}}let v=null;function g(t){if(l.useDeprecatedSynchronousErrorHandling){const r=!v;if(r&&(v={errorThrown:!1,error:null}),t(),r){const{errorThrown:n,error:S}=v;if(v=null,n)throw S}}else t()}class w extends b{constructor(r){super(),this.isStopped=!1,r?(this.destination=r,o(r)&&r.add(this)):this.destination=F}static create(r,n,S){return new k(r,n,S)}next(r){this.isStopped?D(function h(t){return p("N",t,void 0)}(r),this):this._next(r)}error(r){this.isStopped?D(function c(t){return p("E",void 0,t)}(r),this):(this.isStopped=!0,this._error(r))}complete(){this.isStopped?D(s,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(r){this.destination.next(r)}_error(r){try{this.destination.error(r)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const y=Function.prototype.bind;function M(t,r){return y.call(t,r)}class A{constructor(r){this.partialObserver=r}next(r){const{partialObserver:n}=this;if(n.next)try{n.next(r)}catch(S){C(S)}}error(r){const{partialObserver:n}=this;if(n.error)try{n.error(r)}catch(S){C(S)}else C(r)}complete(){const{partialObserver:r}=this;if(r.complete)try{r.complete()}catch(n){C(n)}}}class k extends w{constructor(r,n,S){let U;if(super(),ae(r)||!r)U={next:null!=r?r:void 0,error:null!=n?n:void 0,complete:null!=S?S:void 0};else{let re;this&&l.useDeprecatedNextContext?(re=Object.create(r),re.unsubscribe=()=>this.unsubscribe(),U={next:r.next&&M(r.next,re),error:r.error&&M(r.error,re),complete:r.complete&&M(r.complete,re)}):U=r}this.destination=new A(U)}}function C(t){l.useDeprecatedSynchronousErrorHandling?function f(t){l.useDeprecatedSynchronousErrorHandling&&v&&(v.errorThrown=!0,v.error=t)}(t):d(t)}function D(t,r){const{onStoppedNotification:n}=l;n&&i.setTimeout(()=>n(t,r))}const F={closed:!0,next:u,error:function P(t){throw t},complete:u},R="function"==typeof Symbol&&Symbol.observable||"@@observable";function L(t){return t}let V=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const S=new t;return S.source=this,S.operator=n,S}subscribe(n,S,U){const re=function ee(t){return t&&t instanceof w||function Y(t){return t&&ae(t.next)&&ae(t.error)&&ae(t.complete)}(t)&&o(t)}(n)?n:new k(n,S,U);return g(()=>{const{operator:ye,source:Me}=this;re.add(ye?ye.call(re,Me):Me?this._subscribe(re):this._trySubscribe(re))}),re}_trySubscribe(n){try{return this._subscribe(n)}catch(S){n.error(S)}}forEach(n,S){return new(S=Z(S))((U,re)=>{const ye=new k({next:Me=>{try{n(Me)}catch(Ne){re(Ne),ye.unsubscribe()}},error:re,complete:U});this.subscribe(ye)})}_subscribe(n){var S;return null===(S=this.source)||void 0===S?void 0:S.subscribe(n)}[R](){return this}pipe(...n){return function B(t){return 0===t.length?L:1===t.length?t[0]:function(n){return t.reduce((S,U)=>U(S),n)}}(n)(this)}toPromise(n){return new(n=Z(n))((S,U)=>{let re;this.subscribe(ye=>re=ye,ye=>U(ye),()=>S(re))})}}return t.create=r=>new t(r),t})();function Z(t){var r;return null!==(r=null!=t?t:l.Promise)&&void 0!==r?r:Promise}const J=m(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let $=(()=>{class t extends V{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const S=new Q(this,this);return S.operator=n,S}_throwIfClosed(){if(this.closed)throw new J}next(n){g(()=>{if(this._throwIfClosed(),!this.isStopped){const S=this.observers.slice();for(const U of S)U.next(n)}})}error(n){g(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:S}=this;for(;S.length;)S.shift().error(n)}})}complete(){g(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:S,isStopped:U,observers:re}=this;return S||U?e:(re.push(n),new b(()=>T(re,n)))}_checkFinalizedStatuses(n){const{hasError:S,thrownError:U,isStopped:re}=this;S?n.error(U):re&&n.complete()}asObservable(){const n=new V;return n.source=this,n}}return t.create=(r,n)=>new Q(r,n),t})();class Q extends ${constructor(r,n){super(),this.destination=r,this.source=n}next(r){var n,S;null===(S=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===S||S.call(n,r)}error(r){var n,S;null===(S=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===S||S.call(n,r)}complete(){var r,n;null===(n=null===(r=this.destination)||void 0===r?void 0:r.complete)||void 0===n||n.call(r)}_subscribe(r){var n,S;return null!==(S=null===(n=this.source)||void 0===n?void 0:n.subscribe(r))&&void 0!==S?S:e}}function se(t){return ae(null==t?void 0:t.lift)}function j(t){return r=>{if(se(r))return r.lift(function(n){try{return t(n,this)}catch(S){this.error(S)}});throw new TypeError("Unable to lift unknown Observable type")}}function G(t,r,n,S,U){return new W(t,r,n,S,U)}class W extends w{constructor(r,n,S,U,re,ye){super(r),this.onFinalize=re,this.shouldUnsubscribe=ye,this._next=n?function(Me){try{n(Me)}catch(Ne){r.error(Ne)}}:super._next,this._error=U?function(Me){try{U(Me)}catch(Ne){r.error(Ne)}finally{this.unsubscribe()}}:super._error,this._complete=S?function(){try{S()}catch(Me){r.error(Me)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var r;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(r=this.onFinalize)||void 0===r||r.call(this))}}}function ie(t,r){return j((n,S)=>{let U=0;n.subscribe(G(S,re=>{S.next(t.call(r,re,U++))}))})}function be(t,r,n,S){return new(n||(n=Promise))(function(re,ye){function Me(Bt){try{ft(S.next(Bt))}catch(Qt){ye(Qt)}}function Ne(Bt){try{ft(S.throw(Bt))}catch(Qt){ye(Qt)}}function ft(Bt){Bt.done?re(Bt.value):function U(re){return re instanceof n?re:new n(function(ye){ye(re)})}(Bt.value).then(Me,Ne)}ft((S=S.apply(t,r||[])).next())})}function Le(t){return this instanceof Le?(this.v=t,this):new Le(t)}function Ee(t,r,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var U,S=n.apply(t,r||[]),re=[];return U={},ye("next"),ye("throw"),ye("return"),U[Symbol.asyncIterator]=function(){return this},U;function ye(Cn){S[Cn]&&(U[Cn]=function(Ln){return new Promise(function(dr,Gr){re.push([Cn,Ln,dr,Gr])>1||Me(Cn,Ln)})})}function Me(Cn,Ln){try{!function Ne(Cn){Cn.value instanceof Le?Promise.resolve(Cn.value.v).then(ft,Bt):Qt(re[0][2],Cn)}(S[Cn](Ln))}catch(dr){Qt(re[0][3],dr)}}function ft(Cn){Me("next",Cn)}function Bt(Cn){Me("throw",Cn)}function Qt(Cn,Ln){Cn(Ln),re.shift(),re.length&&Me(re[0][0],re[0][1])}}function je(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,r=t[Symbol.asyncIterator];return r?r.call(t):(t=function De(t){var r="function"==typeof Symbol&&Symbol.iterator,n=r&&t[r],S=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&S>=t.length&&(t=void 0),{value:t&&t[S++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},S("next"),S("throw"),S("return"),n[Symbol.asyncIterator]=function(){return this},n);function S(re){n[re]=t[re]&&function(ye){return new Promise(function(Me,Ne){!function U(re,ye,Me,Ne){Promise.resolve(Ne).then(function(ft){re({value:ft,done:Me})},ye)}(Me,Ne,(ye=t[re](ye)).done,ye.value)})}}}const tt=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function ct(t){return ae(null==t?void 0:t.then)}function xt(t){return ae(t[R])}function Ct(t){return Symbol.asyncIterator&&ae(null==t?void 0:t[Symbol.asyncIterator])}function Ht(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const ht=function zt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function ut(t){return ae(null==t?void 0:t[ht])}function Ot(t){return Ee(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:S,done:U}=yield Le(n.read());if(U)return yield Le(void 0);yield yield Le(S)}}finally{n.releaseLock()}})}function tn(t){return ae(null==t?void 0:t.getReader)}function un(t){if(t instanceof V)return t;if(null!=t){if(xt(t))return function Ze(t){return new V(r=>{const n=t[R]();if(ae(n.subscribe))return n.subscribe(r);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(tt(t))return function Qe(t){return new V(r=>{for(let n=0;n<t.length&&!r.closed;n++)r.next(t[n]);r.complete()})}(t);if(ct(t))return function qe(t){return new V(r=>{t.then(n=>{r.closed||(r.next(n),r.complete())},n=>r.error(n)).then(null,d)})}(t);if(Ct(t))return Ie(t);if(ut(t))return function it(t){return new V(r=>{for(const n of t)if(r.next(n),r.closed)return;r.complete()})}(t);if(tn(t))return function ze(t){return Ie(Ot(t))}(t)}throw Ht(t)}function Ie(t){return new V(r=>{(function Ve(t,r){var n,S,U,re;return be(this,void 0,void 0,function*(){try{for(n=je(t);!(S=yield n.next()).done;)if(r.next(S.value),r.closed)return}catch(ye){U={error:ye}}finally{try{S&&!S.done&&(re=n.return)&&(yield re.call(n))}finally{if(U)throw U.error}}r.complete()})})(t,r).catch(n=>r.error(n))})}function Be(t,r,n,S=0,U=!1){const re=r.schedule(function(){n(),U?t.add(this.schedule(null,S)):this.unsubscribe()},S);if(t.add(re),!U)return re}function gt(t,r,n=1/0){return ae(r)?gt((S,U)=>ie((re,ye)=>r(S,re,U,ye))(un(t(S,U))),n):("number"==typeof r&&(n=r),j((S,U)=>function at(t,r,n,S,U,re,ye,Me){const Ne=[];let ft=0,Bt=0,Qt=!1;const Cn=()=>{Qt&&!Ne.length&&!ft&&r.complete()},Ln=Gr=>ft<S?dr(Gr):Ne.push(Gr),dr=Gr=>{re&&r.next(Gr),ft++;let li=!1;un(n(Gr,Bt++)).subscribe(G(r,Xr=>{null==U||U(Xr),re?Ln(Xr):r.next(Xr)},()=>{li=!0},void 0,()=>{if(li)try{for(ft--;Ne.length&&ft<S;){const Xr=Ne.shift();ye?Be(r,ye,()=>dr(Xr)):dr(Xr)}Cn()}catch(Xr){r.error(Xr)}}))};return t.subscribe(G(r,Ln,()=>{Qt=!0,Cn()})),()=>{null==Me||Me()}}(S,U,t,n)))}function wt(t=1/0){return gt(L,t)}const _t=new V(t=>t.complete());function Nt(t){return t[t.length-1]}function rt(t){return ae(Nt(t))?t.pop():void 0}function Tt(t){return function Vt(t){return t&&ae(t.schedule)}(Nt(t))?t.pop():void 0}function Wt(t,r=0){return j((n,S)=>{n.subscribe(G(S,U=>Be(S,t,()=>S.next(U),r),()=>Be(S,t,()=>S.complete(),r),U=>Be(S,t,()=>S.error(U),r)))})}function sn(t,r=0){return j((n,S)=>{S.add(t.schedule(()=>n.subscribe(S),r))})}function Kt(t,r){if(!t)throw new Error("Iterable cannot be null");return new V(n=>{Be(n,r,()=>{const S=t[Symbol.asyncIterator]();Be(n,r,()=>{S.next().then(U=>{U.done?n.complete():n.next(U.value)})},0,!0)})})}function on(t,r){return r?function en(t,r){if(null!=t){if(xt(t))return function He(t,r){return un(t).pipe(sn(r),Wt(r))}(t,r);if(tt(t))return function Lt(t,r){return new V(n=>{let S=0;return r.schedule(function(){S===t.length?n.complete():(n.next(t[S++]),n.closed||this.schedule())})})}(t,r);if(ct(t))return function vt(t,r){return un(t).pipe(sn(r),Wt(r))}(t,r);if(Ct(t))return Kt(t,r);if(ut(t))return function Gt(t,r){return new V(n=>{let S;return Be(n,r,()=>{S=t[ht](),Be(n,r,()=>{let U,re;try{({value:U,done:re}=S.next())}catch(ye){return void n.error(ye)}re?n.complete():n.next(U)},0,!0)}),()=>ae(null==S?void 0:S.return)&&S.return()})}(t,r);if(tn(t))return function _n(t,r){return Kt(Ot(t),r)}(t,r)}throw Ht(t)}(t,r):un(t)}function wn(...t){const r=Tt(t),n=function Ut(t,r){return"number"==typeof Nt(t)?t.pop():r}(t,1/0),S=t;return S.length?1===S.length?un(S[0]):wt(n)(on(S,r)):_t}function On(t){return t<=0?()=>_t:j((r,n)=>{let S=0;r.subscribe(G(n,U=>{++S<=t&&(n.next(U),t<=S&&n.complete())}))})}function Tn(t,r,...n){return!0===r?(t(),null):!1===r?null:r(...n).pipe(On(1)).subscribe(()=>t())}function pn(t){for(let r in t)if(t[r]===pn)return r;throw Error("Could not find renamed property on target object.")}function En(t,r){for(const n in r)r.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=r[n])}function Un(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(Un).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const n=r.indexOf("\n");return-1===n?r:r.substring(0,n)}function In(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const sr=pn({__forward_ref__:pn});function fr(t){return t.__forward_ref__=fr,t.toString=function(){return Un(this())},t}function rr(t){return qr(t)?t():t}function qr(t){return"function"==typeof t&&t.hasOwnProperty(sr)&&t.__forward_ref__===fr}class Ar extends Error{constructor(r,n){super(function pr(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}(r,n)),this.code=r}}function Fn(t){return"string"==typeof t?t:null==t?"":String(t)}function Rn(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():Fn(t)}function Ur(t,r){const n=r?` in ${r}`:"";throw new Ar(-201,`No provider for ${Rn(t)} found${n}`)}function Wn(t,r){null==t&&function jn(t,r,n,S){throw new Error(`ASSERTION ERROR: ${t}`+(null==S?"":` [Expected=> ${n} ${S} ${r} <=Actual]`))}(r,t,null,"!=")}function qn(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function tr(t){return{providers:t.providers||[],imports:t.imports||[]}}function ur(t){return Cr(t,gi)||Cr(t,Ci)}function Cr(t,r){return t.hasOwnProperty(r)?t[r]:null}function Ii(t){return t&&(t.hasOwnProperty(zr)||t.hasOwnProperty(qi))?t[zr]:null}const gi=pn({\u0275prov:pn}),zr=pn({\u0275inj:pn}),Ci=pn({ngInjectableDef:pn}),qi=pn({ngInjectorDef:pn});var ki=(()=>((ki=ki||{})[ki.Default=0]="Default",ki[ki.Host=1]="Host",ki[ki.Self=2]="Self",ki[ki.SkipSelf=4]="SkipSelf",ki[ki.Optional=8]="Optional",ki))();let Do;function Ka(t){const r=Do;return Do=t,r}function ga(t,r,n){const S=ur(t);return S&&"root"==S.providedIn?void 0===S.value?S.value=S.factory():S.value:n&ki.Optional?null:void 0!==r?r:void Ur(Un(t),"Injector")}function zo(t){return{toString:t}.toString()}var Ho=(()=>((Ho=Ho||{})[Ho.OnPush=0]="OnPush",Ho[Ho.Default=1]="Default",Ho))(),yo=(()=>{return(t=yo||(yo={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",yo;var t})();const dl="undefined"!=typeof globalThis&&globalThis,Ba="undefined"!=typeof window&&window,Ws="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,sa=dl||"undefined"!=typeof global&&global||Ba||Ws,es={},pa=[],oo=pn({\u0275cmp:pn}),Zo=pn({\u0275dir:pn}),zl=pn({\u0275pipe:pn}),ru=pn({\u0275mod:pn}),wa=pn({\u0275fac:pn}),pl=pn({__NG_ELEMENT_ID__:pn});let El=0;function Go(t){return zo(()=>{const n={},S={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:n,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Ho.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||pa,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||yo.Emulated,id:"c",styles:t.styles||pa,_:null,setInput:null,schemas:t.schemas||null,tView:null},U=t.directives,re=t.features,ye=t.pipes;return S.id+=El++,S.inputs=el(t.inputs,n),S.outputs=el(t.outputs),re&&re.forEach(Me=>Me(S)),S.directiveDefs=U?()=>("function"==typeof U?U():U).map(Yl):null,S.pipeDefs=ye?()=>("function"==typeof ye?ye():ye).map(iu):null,S})}function Yl(t){return Ja(t)||function zs(t){return t[Zo]||null}(t)}function iu(t){return function Bo(t){return t[zl]||null}(t)}const Fs={};function Pa(t){return zo(()=>{const r={type:t.type,bootstrap:t.bootstrap||pa,declarations:t.declarations||pa,imports:t.imports||pa,exports:t.exports||pa,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(Fs[t.id]=t.type),r})}function el(t,r){if(null==t)return es;const n={};for(const S in t)if(t.hasOwnProperty(S)){let U=t[S],re=U;Array.isArray(U)&&(re=U[1],U=U[0]),n[U]=S,r&&(r[U]=re)}return n}const ai=Go;function Ja(t){return t[oo]||null}function jo(t,r){const n=t[ru]||null;if(!n&&!0===r)throw new Error(`Type ${Un(t)} does not have '\u0275mod' property.`);return n}function Ua(t){return Array.isArray(t)&&"object"==typeof t[1]}function Sa(t){return Array.isArray(t)&&!0===t[1]}function Wa(t){return 0!=(8&t.flags)}function fo(t){return 2==(2&t.flags)}function Io(t){return 1==(1&t.flags)}function ho(t){return null!==t.template}function us(t){return 0!=(512&t[2])}function Jr(t,r){return t.hasOwnProperty(wa)?t[wa]:null}class ci{constructor(r,n,S){this.previousValue=r,this.currentValue=n,this.firstChange=S}isFirstChange(){return this.firstChange}}function pi(){return ra}function ra(t){return t.type.prototype.ngOnChanges&&(t.setInput=$r),ma}function ma(){const t=da(this),r=null==t?void 0:t.current;if(r){const n=t.previous;if(n===es)t.previous=r;else for(let S in r)n[S]=r[S];t.current=null,this.ngOnChanges(r)}}function $r(t,r,n,S){const U=da(t)||function Wi(t,r){return t[Ta]=r}(t,{previous:es,current:null}),re=U.current||(U.current={}),ye=U.previous,Me=this.declaredInputs[n],Ne=ye[Me];re[Me]=new ci(Ne&&Ne.currentValue,r,ye===es),t[S]=r}pi.ngInherit=!0;const Ta="__ngSimpleChanges__";function da(t){return t[Ta]||null}let fs;function Qi(t){return!!t.listen}const Mo={createRenderer:(t,r)=>function po(){return void 0!==fs?fs:"undefined"!=typeof document?document:void 0}()};function la(t){for(;Array.isArray(t);)t=t[0];return t}function Xo(t,r){return la(r[t])}function ns(t,r){return la(r[t.index])}function au(t,r){return t.data[r]}function _s(t,r){const n=r[t];return Ua(n)?n:n[0]}function Uo(t){return 4==(4&t[2])}function yl(t){return 128==(128&t[2])}function Yi(t,r){return null==r?null:t[r]}function xu(t){t[18]=0}function ou(t,r){t[5]+=r;let n=t,S=t[3];for(;null!==S&&(1===r&&1===n[5]||-1===r&&0===n[5]);)S[5]+=r,n=S,S=S[3]}const ia={lFrame:It(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Fa(){return ia.bindingsEnabled}function ei(){return ia.lFrame.lView}function ea(){return ia.lFrame.tView}function Ys(t){return ia.lFrame.contextLView=t,t[8]}function Po(){let t=Xl();for(;null!==t&&64===t.type;)t=t.parent;return t}function Xl(){return ia.lFrame.currentTNode}function hs(t,r){const n=ia.lFrame;n.currentTNode=t,n.isParent=r}function ku(){return ia.lFrame.isParent}function Vu(){ia.lFrame.isParent=!1}function Nl(){return ia.isInCheckNoChangesMode}function $o(t){ia.isInCheckNoChangesMode=t}function Cs(){const t=ia.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}function O(){return ia.lFrame.bindingIndex++}function N(t){const r=ia.lFrame,n=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,n}function fe(t,r){const n=ia.lFrame;n.bindingIndex=n.bindingRootIndex=t,_e(r)}function _e(t){ia.lFrame.currentDirectiveIndex=t}function Oe(){return ia.lFrame.currentQueryIndex}function Xe(t){ia.lFrame.currentQueryIndex=t}function nt(t){const r=t[1];return 2===r.type?r.declTNode:1===r.type?t[6]:null}function dt(t,r,n){if(n&ki.SkipSelf){let U=r,re=t;for(;!(U=U.parent,null!==U||n&ki.Host||(U=nt(re),null===U||(re=re[15],10&U.type))););if(null===U)return!1;r=U,t=re}const S=ia.lFrame=Ft();return S.currentTNode=r,S.lView=t,!0}function Dt(t){const r=Ft(),n=t[1];ia.lFrame=r,r.currentTNode=n.firstChild,r.lView=t,r.tView=n,r.contextLView=t,r.bindingIndex=n.bindingStartIndex,r.inI18n=!1}function Ft(){const t=ia.lFrame,r=null===t?null:t.child;return null===r?It(t):r}function It(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function Pt(){const t=ia.lFrame;return ia.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Et=Pt;function Zt(){const t=Pt();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function yn(){return ia.lFrame.selectedIndex}function kn(t){ia.lFrame.selectedIndex=t}function Vn(){const t=ia.lFrame;return au(t.tView,t.selectedIndex)}function vi(t,r){for(let n=r.directiveStart,S=r.directiveEnd;n<S;n++){const re=t.data[n].type.prototype,{ngAfterContentInit:ye,ngAfterContentChecked:Me,ngAfterViewInit:Ne,ngAfterViewChecked:ft,ngOnDestroy:Bt}=re;ye&&(t.contentHooks||(t.contentHooks=[])).push(-n,ye),Me&&((t.contentHooks||(t.contentHooks=[])).push(n,Me),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,Me)),Ne&&(t.viewHooks||(t.viewHooks=[])).push(-n,Ne),ft&&((t.viewHooks||(t.viewHooks=[])).push(n,ft),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,ft)),null!=Bt&&(t.destroyHooks||(t.destroyHooks=[])).push(n,Bt)}}function Oi(t,r,n){bi(t,r,3,n)}function cr(t,r,n,S){(3&t[2])===n&&bi(t,r,n,S)}function Hr(t,r){let n=t[2];(3&n)===r&&(n&=2047,n+=1,t[2]=n)}function bi(t,r,n,S){const re=null!=S?S:-1,ye=r.length-1;let Me=0;for(let Ne=void 0!==S?65535&t[18]:0;Ne<ye;Ne++)if("number"==typeof r[Ne+1]){if(Me=r[Ne],null!=S&&Me>=S)break}else r[Ne]<0&&(t[18]+=65536),(Me<re||-1==re)&&(mi(t,n,r,Ne),t[18]=(4294901760&t[18])+Ne+2),Ne++}function mi(t,r,n,S){const U=n[S]<0,re=n[S+1],Me=t[U?-n[S]:n[S]];if(U){if(t[2]>>11<t[18]>>16&&(3&t[2])===r){t[2]+=2048;try{re.call(Me)}finally{}}}else try{re.call(Me)}finally{}}class Fi{constructor(r,n,S){this.factory=r,this.resolving=!1,this.canSeeViewProviders=n,this.injectImpl=S}}function ro(t,r,n){const S=Qi(t);let U=0;for(;U<n.length;){const re=n[U];if("number"==typeof re){if(0!==re)break;U++;const ye=n[U++],Me=n[U++],Ne=n[U++];S?t.setAttribute(r,Me,Ne,ye):r.setAttributeNS(ye,Me,Ne)}else{const ye=re,Me=n[++U];ko(ye)?S&&t.setProperty(r,ye,Me):S?t.setAttribute(r,ye,Me):r.setAttribute(ye,Me),U++}}return U}function Oo(t){return 3===t||4===t||6===t}function ko(t){return 64===t.charCodeAt(0)}function eo(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let n=-1;for(let S=0;S<r.length;S++){const U=r[S];"number"==typeof U?n=U:0===n||Co(t,n,U,null,-1===n||2===n?r[++S]:null)}}return t}function Co(t,r,n,S,U){let re=0,ye=t.length;if(-1===r)ye=-1;else for(;re<t.length;){const Me=t[re++];if("number"==typeof Me){if(Me===r){ye=-1;break}if(Me>r){ye=re-1;break}}}for(;re<t.length;){const Me=t[re];if("number"==typeof Me)break;if(Me===n){if(null===S)return void(null!==U&&(t[re+1]=U));if(S===t[re+1])return void(t[re+2]=U)}re++,null!==S&&re++,null!==U&&re++}-1!==ye&&(t.splice(ye,0,r),re=ye+1),t.splice(re++,0,n),null!==S&&t.splice(re++,0,S),null!==U&&t.splice(re++,0,U)}function xo(t){return-1!==t}function Ko(t){return 32767&t}function ds(t,r){let n=function rs(t){return t>>16}(t),S=r;for(;n>0;)S=S[15],n--;return S}let Bl=!0;function $l(t){const r=Bl;return Bl=t,r}let Ss=0;function _u(t,r){const n=qu(t,r);if(-1!==n)return n;const S=r[1];S.firstCreatePass&&(t.injectorIndex=r.length,xl(S.data,t),xl(r,null),xl(S.blueprint,null));const U=bo(t,r),re=t.injectorIndex;if(xo(U)){const ye=Ko(U),Me=ds(U,r),Ne=Me[1].data;for(let ft=0;ft<8;ft++)r[re+ft]=Me[ye+ft]|Ne[ye+ft]}return r[re+8]=U,re}function xl(t,r){t.push(0,0,0,0,0,0,0,0,r)}function qu(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function bo(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,S=null,U=r;for(;null!==U;){const re=U[1],ye=re.type;if(S=2===ye?re.declTNode:1===ye?U[6]:null,null===S)return-1;if(n++,U=U[15],-1!==S.injectorIndex)return S.injectorIndex|n<<16}return-1}function ws(t,r,n){!function Gu(t,r,n){let S;"string"==typeof n?S=n.charCodeAt(0)||0:n.hasOwnProperty(pl)&&(S=n[pl]),null==S&&(S=n[pl]=Ss++);const U=255&S;r.data[t+(U>>5)]|=1<<U}(t,r,n)}function Lc(t,r,n){if(n&ki.Optional)return t;Ur(r,"NodeInjector")}function jh(t,r,n,S){if(n&ki.Optional&&void 0===S&&(S=null),0==(n&(ki.Self|ki.Host))){const U=t[9],re=Ka(void 0);try{return U?U.get(r,S,n&ki.Optional):ga(r,S,n&ki.Optional)}finally{Ka(re)}}return Lc(S,r,n)}function bl(t,r,n,S=ki.Default,U){if(null!==t){const re=function pp(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(pl)?t[pl]:void 0;return"number"==typeof r?r>=0?255&r:Ic:r}(n);if("function"==typeof re){if(!dt(r,t,S))return S&ki.Host?Lc(U,n,S):jh(r,n,S,U);try{const ye=re(S);if(null!=ye||S&ki.Optional)return ye;Ur(n)}finally{Et()}}else if("number"==typeof re){let ye=null,Me=qu(t,r),Ne=-1,ft=S&ki.Host?r[16][6]:null;for((-1===Me||S&ki.SkipSelf)&&(Ne=-1===Me?bo(t,r):r[Me+8],-1!==Ne&&jg(S,!1)?(ye=r[1],Me=Ko(Ne),r=ds(Ne,r)):Me=-1);-1!==Me;){const Bt=r[1];if(Wu(re,Me,Bt.data)){const Qt=dp(Me,r,n,ye,S,ft);if(Qt!==_f)return Qt}Ne=r[Me+8],-1!==Ne&&jg(S,r[1].data[Me+8]===ft)&&Wu(re,Me,r)?(ye=Bt,Me=Ko(Ne),r=ds(Ne,r)):Me=-1}}}return jh(r,n,S,U)}const _f={};function Ic(){return new wf(Po(),ei())}function dp(t,r,n,S,U,re){const ye=r[1],Me=ye.data[t+8],Bt=Kl(Me,ye,n,null==S?fo(Me)&&Bl:S!=ye&&0!=(3&Me.type),U&ki.Host&&re===Me);return null!==Bt?Pc(r,ye,Bt,Me):_f}function Kl(t,r,n,S,U){const re=t.providerIndexes,ye=r.data,Me=1048575&re,Ne=t.directiveStart,Bt=re>>20,Cn=U?Me+Bt:t.directiveEnd;for(let Ln=S?Me:Me+Bt;Ln<Cn;Ln++){const dr=ye[Ln];if(Ln<Ne&&n===dr||Ln>=Ne&&dr.type===n)return Ln}if(U){const Ln=ye[Ne];if(Ln&&ho(Ln)&&Ln.type===n)return Ne}return null}function Pc(t,r,n,S){let U=t[n];const re=r.data;if(function ca(t){return t instanceof Fi}(U)){const ye=U;ye.resolving&&function hr(t,r){const n=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new Ar(-200,`Circular dependency in DI detected for ${t}${n}`)}(Rn(re[n]));const Me=$l(ye.canSeeViewProviders);ye.resolving=!0;const Ne=ye.injectImpl?Ka(ye.injectImpl):null;dt(t,S,ki.Default);try{U=t[n]=ye.factory(void 0,re,t,S),r.firstCreatePass&&n>=S.directiveStart&&function hi(t,r,n){const{ngOnChanges:S,ngOnInit:U,ngDoCheck:re}=r.type.prototype;if(S){const ye=ra(r);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,ye),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,ye)}U&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,U),re&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,re),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,re))}(n,re[n],r)}finally{null!==Ne&&Ka(Ne),$l(Me),ye.resolving=!1,Et()}}return U}function Wu(t,r,n){return!!(n[r+(t>>5)]&1<<t)}function jg(t,r){return!(t&ki.Self||t&ki.Host&&r)}class wf{constructor(r,n){this._tNode=r,this._lView=n}get(r,n,S){return bl(this._tNode,this._lView,r,S,n)}}function oa(t){return zo(()=>{const r=t.prototype.constructor,n=r[wa]||Vh(r),S=Object.prototype;let U=Object.getPrototypeOf(t.prototype).constructor;for(;U&&U!==S;){const re=U[wa]||Vh(U);if(re&&re!==n)return re;U=Object.getPrototypeOf(U)}return re=>new re})}function Vh(t){return qr(t)?()=>{const r=Vh(rr(t));return r&&r()}:Jr(t)}const dc="__parameters__";function Fc(t,r,n){return zo(()=>{const S=function gp(t){return function(...n){if(t){const S=t(...n);for(const U in S)this[U]=S[U]}}}(r);function U(...re){if(this instanceof U)return S.apply(this,re),this;const ye=new U(...re);return Me.annotation=ye,Me;function Me(Ne,ft,Bt){const Qt=Ne.hasOwnProperty(dc)?Ne[dc]:Object.defineProperty(Ne,dc,{value:[]})[dc];for(;Qt.length<=Bt;)Qt.push(null);return(Qt[Bt]=Qt[Bt]||[]).push(ye),Ne}}return n&&(U.prototype=Object.create(n.prototype)),U.prototype.ngMetadataName=t,U.annotationCls=U,U})}class Ea{constructor(r,n){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=qn({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Vg=new Ea("AnalyzeForEntryComponents");function jl(t,r){void 0===r&&(r=t);for(let n=0;n<t.length;n++){let S=t[n];Array.isArray(S)?(r===t&&(r=t.slice(0,n)),jl(S,r)):r!==t&&r.push(S)}return r}function Cu(t,r){t.forEach(n=>Array.isArray(n)?Cu(n,r):r(n))}function Nc(t,r,n){r>=t.length?t.push(n):t.splice(r,0,n)}function Hh(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function qo(t,r){const n=[];for(let S=0;S<t;S++)n.push(r);return n}function Vl(t,r,n){let S=pc(t,r);return S>=0?t[1|S]=n:(S=~S,function Gh(t,r,n,S){let U=t.length;if(U==r)t.push(n,S);else if(1===U)t.push(S,t[0]),t[0]=n;else{for(U--,t.push(t[U-1],t[U]);U>r;)t[U]=t[U-2],U--;t[r]=n,t[r+1]=S}}(t,S,r,n)),S}function Bc(t,r){const n=pc(t,r);if(n>=0)return t[1|n]}function pc(t,r){return function qg(t,r,n){let S=0,U=t.length>>n;for(;U!==S;){const re=S+(U-S>>1),ye=t[re<<n];if(r===ye)return re<<n;ye>r?U=re:S=re+1}return~(U<<n)}(t,r,1)}const rh={},Zh="__NG_DI_FLAG__",ih="ngTempTokenPath",my=/\n/gm,wp="__source",Wg=pn({provide:String,useValue:pn});let ah;function Yg(t){const r=ah;return ah=t,r}function Af(t,r=ki.Default){if(void 0===ah)throw new Ar(203,"");return null===ah?ga(t,void 0,r):ah.get(t,r&ki.Optional?null:void 0,r)}function Ti(t,r=ki.Default){return(function $a(){return Do}()||Af)(rr(t),r)}const jc=Ti;function Ql(t){const r=[];for(let n=0;n<t.length;n++){const S=rr(t[n]);if(Array.isArray(S)){if(0===S.length)throw new Ar(900,"");let U,re=ki.Default;for(let ye=0;ye<S.length;ye++){const Me=S[ye],Ne=vy(Me);"number"==typeof Ne?-1===Ne?U=Me.token:re|=Ne:U=Me}r.push(Ti(U,re))}else r.push(Ti(S))}return r}function oh(t,r){return t[Zh]=r,t.prototype[Zh]=r,t}function vy(t){return t[Zh]}const Yu=oh(Fc("Inject",t=>({token:t})),-1),wu=oh(Fc("Optional"),8),Mf=oh(Fc("SkipSelf"),4);class qc{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ul(t){return t instanceof qc?t.changingThisBreaksApplicationSecurity:t}function Su(t,r){const n=function e0(t){return t instanceof qc&&t.getTypeName()||null}(t);if(null!=n&&n!==r){if("ResourceURL"===n&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===r}const td=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,n0=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var _o=(()=>((_o=_o||{})[_o.NONE=0]="NONE",_o[_o.HTML=1]="HTML",_o[_o.STYLE=2]="STYLE",_o[_o.SCRIPT=3]="SCRIPT",_o[_o.URL=4]="URL",_o[_o.RESOURCE_URL=5]="RESOURCE_URL",_o))();function Lp(t){const r=function ph(){const t=ei();return t&&t[12]}();return r?r.sanitize(_o.URL,t)||"":Su(t,"URL")?Ul(t):function Ef(t){return(t=String(t)).match(td)||t.match(n0)?t:"unsafe:"+t}(Fn(t))}const Zc="__ngContext__";function Bs(t,r){t[Zc]=r}function Op(t){const r=function Ya(t){return t[Zc]||null}(t);return r?Array.isArray(r)?r:r.lView:null}function sd(t){return t.ngOriginalError}function Xc(t,...r){t.error(...r)}class gc{constructor(){this._console=console}handleError(r){const n=this._findOriginalError(r),S=function ld(t){return t&&t.ngErrorLogger||Xc}(r);S(this._console,"ERROR",r),n&&S(this._console,"ORIGINAL ERROR",n)}_findOriginalError(r){let n=r&&sd(r);for(;n&&sd(n);)n=sd(n);return n||null}}const mc=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(sa))();function ol(t){return t instanceof Function?t():t}var Es=(()=>((Es=Es||{})[Es.Important=1]="Important",Es[Es.DashCase=2]="DashCase",Es))();function fd(t,r){return undefined(t,r)}function uu(t){const r=t[3];return Sa(r)?r[3]:r}function z(t){return ce(t[13])}function K(t){return ce(t[4])}function ce(t){for(;null!==t&&!Sa(t);)t=t[4];return t}function Ae(t,r,n,S,U){if(null!=S){let re,ye=!1;Sa(S)?re=S:Ua(S)&&(ye=!0,S=S[0]);const Me=la(S);0===t&&null!==n?null==U?yi(r,n,Me):ni(r,n,Me,U||null,!0):1===t&&null!==n?ni(r,n,Me,U||null,!0):2===t?function So(t,r,n){const S=_i(t,r);S&&function Pi(t,r,n,S){Qi(t)?t.removeChild(r,n,S):r.removeChild(n)}(t,S,r,n)}(r,Me,ye):3===t&&r.destroyNode(Me),null!=re&&function Ds(t,r,n,S,U){const re=n[7];re!==la(n)&&Ae(r,t,S,re,U);for(let Me=10;Me<n.length;Me++){const Ne=n[Me];Wo(Ne[1],Ne,t,r,S,re)}}(r,t,re,n,U)}}function bt(t,r,n){if(Qi(t))return t.createElement(r,n);{const S=null!==n?function tl(t){const r=t.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(n):null;return null===S?t.createElement(r):t.createElementNS(S,r)}}function Xn(t,r){const n=t[9],S=n.indexOf(r),U=r[3];1024&r[2]&&(r[2]&=-1025,ou(U,-1)),n.splice(S,1)}function Yn(t,r){if(t.length<=10)return;const n=10+r,S=t[n];if(S){const U=S[17];null!==U&&U!==t&&Xn(U,S),r>0&&(t[n-1][4]=S[4]);const re=Hh(t,10+r);!function kt(t,r){Wo(t,r,r[11],2,null,null),r[0]=null,r[6]=null}(S[1],S);const ye=re[19];null!==ye&&ye.detachView(re[1]),S[3]=null,S[4]=null,S[2]&=-129}return S}function ar(t,r){if(!(256&r[2])){const n=r[11];Qi(n)&&n.destroyNode&&Wo(t,r,n,3,null,null),function nn(t){let r=t[13];if(!r)return lr(t[1],t);for(;r;){let n=null;if(Ua(r))n=r[13];else{const S=r[10];S&&(n=S)}if(!n){for(;r&&!r[4]&&r!==t;)Ua(r)&&lr(r[1],r),r=r[3];null===r&&(r=t),Ua(r)&&lr(r[1],r),n=r&&r[4]}r=n}}(r)}}function lr(t,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function Pr(t,r){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let S=0;S<n.length;S+=2){const U=r[n[S]];if(!(U instanceof Fi)){const re=n[S+1];if(Array.isArray(re))for(let ye=0;ye<re.length;ye+=2){const Me=U[re[ye]],Ne=re[ye+1];try{Ne.call(Me)}finally{}}else try{re.call(U)}finally{}}}}(t,r),function mr(t,r){const n=t.cleanup,S=r[7];let U=-1;if(null!==n)for(let re=0;re<n.length-1;re+=2)if("string"==typeof n[re]){const ye=n[re+1],Me="function"==typeof ye?ye(r):la(r[ye]),Ne=S[U=n[re+2]],ft=n[re+3];"boolean"==typeof ft?Me.removeEventListener(n[re],Ne,ft):ft>=0?S[U=ft]():S[U=-ft].unsubscribe(),re+=2}else{const ye=S[U=n[re+1]];n[re].call(ye)}if(null!==S){for(let re=U+1;re<S.length;re++)S[re]();r[7]=null}}(t,r),1===r[1].type&&Qi(r[11])&&r[11].destroy();const n=r[17];if(null!==n&&Sa(r[3])){n!==r[3]&&Xn(n,r);const S=r[19];null!==S&&S.detachView(t)}}}function Br(t,r,n){return function ui(t,r,n){let S=r;for(;null!==S&&40&S.type;)S=(r=S).parent;if(null===S)return n[0];if(2&S.flags){const U=t.data[S.directiveStart].encapsulation;if(U===yo.None||U===yo.Emulated)return null}return ns(S,n)}(t,r.parent,n)}function ni(t,r,n,S,U){Qi(t)?t.insertBefore(r,n,S,U):r.insertBefore(n,S,U)}function yi(t,r,n){Qi(t)?t.appendChild(r,n):r.appendChild(n)}function Ei(t,r,n,S,U){null!==S?ni(t,r,n,S,U):yi(t,r,n)}function _i(t,r){return Qi(t)?t.parentNode(r):r.parentNode}function zi(t,r,n){return za(t,r,n)}let za=function Li(t,r,n){return 40&t.type?ns(t,n):null};function $i(t,r,n,S){const U=Br(t,S,r),re=r[11],Me=zi(S.parent||r[6],S,r);if(null!=U)if(Array.isArray(n))for(let Ne=0;Ne<n.length;Ne++)Ei(re,U,n[Ne],Me,!1);else Ei(re,U,n,Me,!1)}function Ia(t,r){if(null!==r){const n=r.type;if(3&n)return ns(r,t);if(4&n)return so(-1,t[r.index]);if(8&n){const S=r.child;if(null!==S)return Ia(t,S);{const U=t[r.index];return Sa(U)?so(-1,U):la(U)}}if(32&n)return fd(r,t)()||la(t[r.index]);{const S=wo(t,r);return null!==S?Array.isArray(S)?S[0]:Ia(uu(t[16]),S):Ia(t,r.next)}}return null}function wo(t,r){return null!==r?t[16][6].projection[r.projection]:null}function so(t,r){const n=10+t+1;if(n<r.length){const S=r[n],U=S[1].firstChild;if(null!==U)return Ia(S,U)}return r[7]}function lo(t,r,n,S,U,re,ye){for(;null!=n;){const Me=S[n.index],Ne=n.type;if(ye&&0===r&&(Me&&Bs(la(Me),S),n.flags|=4),64!=(64&n.flags))if(8&Ne)lo(t,r,n.child,S,U,re,!1),Ae(r,t,U,Me,re);else if(32&Ne){const ft=fd(n,S);let Bt;for(;Bt=ft();)Ae(r,t,U,Bt,re);Ae(r,t,U,Me,re)}else 16&Ne?js(t,r,S,n,U,re):Ae(r,t,U,Me,re);n=ye?n.projectionNext:n.next}}function Wo(t,r,n,S,U,re){lo(n,S,t.firstChild,r,U,re,!1)}function js(t,r,n,S,U,re){const ye=n[16],Ne=ye[6].projection[S.projection];if(Array.isArray(Ne))for(let ft=0;ft<Ne.length;ft++)Ae(r,t,U,Ne[ft],re);else lo(t,r,Ne,ye[3],U,re,!0)}function sl(t,r,n){Qi(t)?t.setAttribute(r,"style",n):r.style.cssText=n}function Us(t,r,n){Qi(t)?""===n?t.removeAttribute(r,"class"):t.setAttribute(r,"class",n):r.className=n}function as(t,r,n){let S=t.length;for(;;){const U=t.indexOf(r,n);if(-1===U)return U;if(0===U||t.charCodeAt(U-1)<=32){const re=r.length;if(U+re===S||t.charCodeAt(U+re)<=32)return U}n=U+1}}const is="ng-template";function As(t,r,n){let S=0;for(;S<t.length;){let U=t[S++];if(n&&"class"===U){if(U=t[S],-1!==as(U.toLowerCase(),r,0))return!0}else if(1===U){for(;S<t.length&&"string"==typeof(U=t[S++]);)if(U.toLowerCase()===r)return!0;return!1}}return!1}function Aa(t){return 4===t.type&&t.value!==is}function Ga(t,r,n){return r===(4!==t.type||n?t.value:is)}function Jo(t,r,n){let S=4;const U=t.attrs||[],re=function Qo(t){for(let r=0;r<t.length;r++)if(Oo(t[r]))return r;return t.length}(U);let ye=!1;for(let Me=0;Me<r.length;Me++){const Ne=r[Me];if("number"!=typeof Ne){if(!ye)if(4&S){if(S=2|1&S,""!==Ne&&!Ga(t,Ne,n)||""===Ne&&1===r.length){if(to(S))return!1;ye=!0}}else{const ft=8&S?Ne:r[++Me];if(8&S&&null!==t.attrs){if(!As(t.attrs,ft,n)){if(to(S))return!1;ye=!0}continue}const Qt=Yo(8&S?"class":Ne,U,Aa(t),n);if(-1===Qt){if(to(S))return!1;ye=!0;continue}if(""!==ft){let Cn;Cn=Qt>re?"":U[Qt+1].toLowerCase();const Ln=8&S?Cn:null;if(Ln&&-1!==as(Ln,ft,0)||2&S&&ft!==Cn){if(to(S))return!1;ye=!0}}}}else{if(!ye&&!to(S)&&!to(Ne))return!1;if(ye&&to(Ne))continue;ye=!1,S=Ne|1&S}}return to(S)||ye}function to(t){return 0==(1&t)}function Yo(t,r,n,S){if(null===r)return-1;let U=0;if(S||!n){let re=!1;for(;U<r.length;){const ye=r[U];if(ye===t)return U;if(3===ye||6===ye)re=!0;else{if(1===ye||2===ye){let Me=r[++U];for(;"string"==typeof Me;)Me=r[++U];continue}if(4===ye)break;if(0===ye){U+=4;continue}}U+=re?1:2}return-1}return function wl(t,r){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const S=t[n];if("number"==typeof S)return-1;if(S===r)return n;n++}return-1}(r,t)}function Eo(t,r,n=!1){for(let S=0;S<r.length;S++)if(Jo(t,r[S],n))return!0;return!1}function Ol(t,r){e:for(let n=0;n<r.length;n++){const S=r[n];if(t.length===S.length){for(let U=0;U<t.length;U++)if(t[U]!==S[U])continue e;return!0}}return!1}function Ks(t,r){return t?":not("+r.trim()+")":r}function Au(t){let r=t[0],n=1,S=2,U="",re=!1;for(;n<t.length;){let ye=t[n];if("string"==typeof ye)if(2&S){const Me=t[++n];U+="["+ye+(Me.length>0?'="'+Me+'"':"")+"]"}else 8&S?U+="."+ye:4&S&&(U+=" "+ye);else""!==U&&!to(ye)&&(r+=Ks(re,U),U=""),S=ye,re=re||!to(S);n++}return""!==U&&(r+=Ks(re,U)),r}const ha={};function er(t){cu(ea(),ei(),yn()+t,Nl())}function cu(t,r,n,S){if(!S)if(3==(3&r[2])){const re=t.preOrderCheckHooks;null!==re&&Oi(r,re,n)}else{const re=t.preOrderHooks;null!==re&&cr(r,re,0,n)}kn(n)}function $u(t,r){return t<<17|r<<2}function Gl(t){return t>>17&32767}function Pf(t){return 2|t}function fu(t){return(131068&t)>>2}function Of(t,r){return-131069&t|r<<2}function vc(t){return 1|t}function jf(t,r){const n=t.contentQueries;if(null!==n)for(let S=0;S<n.length;S+=2){const U=n[S],re=n[S+1];if(-1!==re){const ye=t.data[re];Xe(U),ye.contentQueries(2,r[re],re)}}}function Vf(t,r,n,S,U,re,ye,Me,Ne,ft){const Bt=r.blueprint.slice();return Bt[0]=U,Bt[2]=140|S,xu(Bt),Bt[3]=Bt[15]=t,Bt[8]=n,Bt[10]=ye||t&&t[10],Bt[11]=Me||t&&t[11],Bt[12]=Ne||t&&t[12]||null,Bt[9]=ft||t&&t[9]||null,Bt[6]=re,Bt[16]=2==r.type?t[16]:Bt,Bt}function rf(t,r,n,S,U){let re=t.data[r];if(null===re)re=function wd(t,r,n,S,U){const re=Xl(),ye=ku(),Ne=t.data[r]=function Zp(t,r,n,S,U,re){return{type:n,index:S,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:U,attrs:re,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,ye?re:re&&re.parent,n,r,S,U);return null===t.firstChild&&(t.firstChild=Ne),null!==re&&(ye?null==re.child&&null!==Ne.parent&&(re.child=Ne):null===re.next&&(re.next=Ne)),Ne}(t,r,n,S,U),function H(){return ia.lFrame.inI18n}()&&(re.flags|=64);else if(64&re.type){re.type=n,re.value=S,re.attrs=U;const ye=function Ll(){const t=ia.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();re.injectorIndex=null===ye?-1:ye.injectorIndex}return hs(re,!0),re}function Js(t,r,n,S){if(0===n)return-1;const U=r.length;for(let re=0;re<n;re++)r.push(S),t.blueprint.push(S),t.data.push(null);return U}function _c(t,r,n){Dt(r);try{const S=t.viewQuery;null!==S&&tv(1,S,n);const U=t.template;null!==U&&L0(t,r,U,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&jf(t,r),t.staticViewQueries&&tv(2,t.viewQuery,n);const re=t.components;null!==re&&function D0(t,r){for(let n=0;n<r.length;n++)wA(t,r[n])}(r,re)}catch(S){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),S}finally{r[2]&=-5,Zt()}}function af(t,r,n,S){const U=r[2];if(256==(256&U))return;Dt(r);const re=Nl();try{xu(r),function pe(t){return ia.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&L0(t,r,n,2,S);const ye=3==(3&U);if(!re)if(ye){const ft=t.preOrderCheckHooks;null!==ft&&Oi(r,ft,null)}else{const ft=t.preOrderHooks;null!==ft&&cr(r,ft,0,null),Hr(r,0)}if(function bA(t){for(let r=z(t);null!==r;r=K(r)){if(!r[2])continue;const n=r[9];for(let S=0;S<n.length;S++){const U=n[S],re=U[3];0==(1024&U[2])&&ou(re,1),U[2]|=1024}}}(r),function xA(t){for(let r=z(t);null!==r;r=K(r))for(let n=10;n<r.length;n++){const S=r[n],U=S[1];yl(S)&&af(U,S,U.template,S[8])}}(r),null!==t.contentQueries&&jf(t,r),!re)if(ye){const ft=t.contentCheckHooks;null!==ft&&Oi(r,ft)}else{const ft=t.contentHooks;null!==ft&&cr(r,ft,1),Hr(r,1)}!function S0(t,r){const n=t.hostBindingOpCodes;if(null!==n)try{for(let S=0;S<n.length;S++){const U=n[S];if(U<0)kn(~U);else{const re=U,ye=n[++S],Me=n[++S];fe(ye,re),Me(2,r[re])}}}finally{kn(-1)}}(t,r);const Me=t.components;null!==Me&&function E0(t,r){for(let n=0;n<r.length;n++)_A(t,r[n])}(r,Me);const Ne=t.viewQuery;if(null!==Ne&&tv(2,Ne,S),!re)if(ye){const ft=t.viewCheckHooks;null!==ft&&Oi(r,ft)}else{const ft=t.viewHooks;null!==ft&&cr(r,ft,2),Hr(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),re||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,ou(r[3],-1))}finally{Zt()}}function Du(t,r,n,S){const U=r[10],re=!Nl(),ye=Uo(r);try{re&&!ye&&U.begin&&U.begin(),ye&&_c(t,r,S),af(t,r,n,S)}finally{re&&!ye&&U.end&&U.end()}}function L0(t,r,n,S,U){const re=yn(),ye=2&S;try{kn(-1),ye&&r.length>20&&cu(t,r,20,Nl()),n(S,U)}finally{kn(re)}}function Td(t,r,n){if(Wa(r)){const U=r.directiveEnd;for(let re=r.directiveStart;re<U;re++){const ye=t.data[re];ye.contentQueries&&ye.contentQueries(1,n[re],re)}}}function Ju(t,r,n){!Fa()||(function kd(t,r,n,S){const U=n.directiveStart,re=n.directiveEnd;t.firstCreatePass||_u(n,r),Bs(S,r);const ye=n.initialInputs;for(let Me=U;Me<re;Me++){const Ne=t.data[Me],ft=ho(Ne);ft&&$y(r,n,Ne);const Bt=Pc(r,t,Me,n);Bs(Bt,r),null!==ye&&Cd(0,Me-U,Bt,Ne,0,ye),ft&&(_s(n.index,r)[8]=Bt)}}(t,r,n,ns(n,r)),128==(128&n.flags)&&function Wy(t,r,n){const S=n.directiveStart,U=n.directiveEnd,ye=n.index,Me=function me(){return ia.lFrame.currentDirectiveIndex}();try{kn(ye);for(let Ne=S;Ne<U;Ne++){const ft=t.data[Ne],Bt=r[Ne];_e(Ne),(null!==ft.hostBindings||0!==ft.hostVars||null!==ft.hostAttrs)&&Jp(ft,Bt)}}finally{kn(-1),_e(Me)}}(t,r,n))}function wc(t,r,n=ns){const S=r.localNames;if(null!==S){let U=r.index+1;for(let re=0;re<S.length;re+=2){const ye=S[re+1],Me=-1===ye?n(r,t):t[ye];t[U++]=Me}}}function sf(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=Qu(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):r}function Qu(t,r,n,S,U,re,ye,Me,Ne,ft){const Bt=20+S,Qt=Bt+U,Cn=function Uf(t,r){const n=[];for(let S=0;S<r;S++)n.push(S<t?null:ha);return n}(Bt,Qt),Ln="function"==typeof ft?ft():ft;return Cn[1]={type:t,blueprint:Cn,template:n,queries:null,viewQuery:Me,declTNode:r,data:Cn.slice().fill(null,Bt),bindingStartIndex:Bt,expandoStartIndex:Qt,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof re?re():re,pipeRegistry:"function"==typeof ye?ye():ye,firstChild:null,schemas:Ne,consts:Ln,incompleteFirstPass:!1}}function Yp(t,r,n,S){const U=Qx(r);null===n?U.push(S):(U.push(n),t.firstCreatePass&&eb(t).push(S,U.length-1))}function Ad(t,r,n){for(let S in t)if(t.hasOwnProperty(S)){const U=t[S];(n=null===n?{}:n).hasOwnProperty(S)?n[S].push(r,U):n[S]=[r,U]}return n}function Rl(t,r,n,S,U,re,ye,Me){const Ne=ns(r,n);let Bt,ft=r.inputs;!Me&&null!=ft&&(Bt=ft[S])?(rb(t,n,Bt,S,U),fo(r)&&function Xp(t,r){const n=_s(r,t);16&n[2]||(n[2]|=64)}(n,r.index)):3&r.type&&(S=function I0(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(S),U=null!=ye?ye(U,r.value||"",S):U,Qi(re)?re.setProperty(Ne,S,U):ko(S)||(Ne.setProperty?Ne.setProperty(S,U):Ne[S]=U))}function Md(t,r,n,S){let U=!1;if(Fa()){const re=function Yy(t,r,n){const S=t.directiveRegistry;let U=null;if(S)for(let re=0;re<S.length;re++){const ye=S[re];Eo(n,ye.selectors,!1)&&(U||(U=[]),ws(_u(n,r),t,ye.type),ho(ye)?(F0(t,n),U.unshift(ye)):U.push(ye))}return U}(t,r,n),ye=null===S?null:{"":-1};if(null!==re){U=!0,z0(n,t.data.length,re.length);for(let Bt=0;Bt<re.length;Bt++){const Qt=re[Bt];Qt.providersResolver&&Qt.providersResolver(Qt)}let Me=!1,Ne=!1,ft=Js(t,r,re.length,null);for(let Bt=0;Bt<re.length;Bt++){const Qt=re[Bt];n.mergedAttrs=eo(n.mergedAttrs,Qt.hostAttrs),N0(t,n,r,ft,Qt),Xy(ft,Qt,ye),null!==Qt.contentQueries&&(n.flags|=8),(null!==Qt.hostBindings||null!==Qt.hostAttrs||0!==Qt.hostVars)&&(n.flags|=128);const Cn=Qt.type.prototype;!Me&&(Cn.ngOnChanges||Cn.ngOnInit||Cn.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),Me=!0),!Ne&&(Cn.ngOnChanges||Cn.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),Ne=!0),ft++}!function ec(t,r){const S=r.directiveEnd,U=t.data,re=r.attrs,ye=[];let Me=null,Ne=null;for(let ft=r.directiveStart;ft<S;ft++){const Bt=U[ft],Qt=Bt.inputs,Cn=null===re||Aa(r)?null:B0(Qt,re);ye.push(Cn),Me=Ad(Qt,ft,Me),Ne=Ad(Bt.outputs,ft,Ne)}null!==Me&&(Me.hasOwnProperty("class")&&(r.flags|=16),Me.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=ye,r.inputs=Me,r.outputs=Ne}(t,n)}ye&&function Zy(t,r,n){if(r){const S=t.localNames=[];for(let U=0;U<r.length;U+=2){const re=n[r[U+1]];if(null==re)throw new Ar(-301,!1);S.push(r[U],re)}}}(n,S,ye)}return n.mergedAttrs=eo(n.mergedAttrs,n.attrs),U}function Hf(t,r,n,S,U,re){const ye=re.hostBindings;if(ye){let Me=t.hostBindingOpCodes;null===Me&&(Me=t.hostBindingOpCodes=[]);const Ne=~r.index;(function R0(t){let r=t.length;for(;r>0;){const n=t[--r];if("number"==typeof n&&n<0)return n}return 0})(Me)!=Ne&&Me.push(Ne),Me.push(S,U,ye)}}function Jp(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function F0(t,r){r.flags|=2,(t.components||(t.components=[])).push(r.index)}function Xy(t,r,n){if(n){if(r.exportAs)for(let S=0;S<r.exportAs.length;S++)n[r.exportAs[S]]=t;ho(r)&&(n[""]=t)}}function z0(t,r,n){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+n,t.providerIndexes=r}function N0(t,r,n,S,U){t.data[S]=U;const re=U.factory||(U.factory=Jr(U.type)),ye=new Fi(re,ho(U),null);t.blueprint[S]=ye,n[S]=ye,Hf(t,r,0,S,Js(t,n,U.hostVars,ha),U)}function $y(t,r,n){const S=ns(r,t),U=sf(n),re=t[10],ye=j0(t,Vf(t,U,null,n.onPush?64:16,S,r,re,re.createRenderer(S,n),null,null));t[r.index]=ye}function Lu(t,r,n,S,U,re){const ye=ns(t,r);!function pu(t,r,n,S,U,re,ye){if(null==re)Qi(t)?t.removeAttribute(r,U,n):r.removeAttribute(U);else{const Me=null==ye?Fn(re):ye(re,S||"",U);Qi(t)?t.setAttribute(r,U,Me,n):n?r.setAttributeNS(n,U,Me):r.setAttribute(U,Me)}}(r[11],ye,re,t.value,n,S,U)}function Cd(t,r,n,S,U,re){const ye=re[r];if(null!==ye){const Me=S.setInput;for(let Ne=0;Ne<ye.length;){const ft=ye[Ne++],Bt=ye[Ne++],Qt=ye[Ne++];null!==Me?S.setInput(n,Qt,ft,Bt):n[Bt]=Qt}}}function B0(t,r){let n=null,S=0;for(;S<r.length;){const U=r[S];if(0!==U)if(5!==U){if("number"==typeof U)break;t.hasOwnProperty(U)&&(null===n&&(n=[]),n.push(U,t[U],r[S+1])),S+=2}else S+=2;else S+=4}return n}function Qp(t,r,n,S){return new Array(t,!0,!1,r,null,0,S,n,null,null)}function _A(t,r){const n=_s(r,t);if(yl(n)){const S=n[1];80&n[2]?af(S,n,S.template,n[8]):n[5]>0&&Ky(n)}}function Ky(t){for(let S=z(t);null!==S;S=K(S))for(let U=10;U<S.length;U++){const re=S[U];if(1024&re[2]){const ye=re[1];af(ye,re,ye.template,re[8])}else re[5]>0&&Ky(re)}const n=t[1].components;if(null!==n)for(let S=0;S<n.length;S++){const U=_s(n[S],t);yl(U)&&U[5]>0&&Ky(U)}}function wA(t,r){const n=_s(r,t),S=n[1];(function TA(t,r){for(let n=r.length;n<t.blueprint.length;n++)r.push(t.blueprint[n])})(S,n),_c(S,n,n[8])}function j0(t,r){return t[13]?t[14][4]=r:t[13]=r,t[14]=r,r}function Jy(t){for(;t;){t[2]|=64;const r=uu(t);if(us(t)&&!r)return t;t=r}return null}function ev(t,r,n){const S=r[10];S.begin&&S.begin();try{af(t,r,t.template,n)}catch(U){throw nb(r,U),U}finally{S.end&&S.end()}}function Jx(t){!function Qy(t){for(let r=0;r<t.components.length;r++){const n=t.components[r],S=Op(n),U=S[1];Du(U,S,U.template,n)}}(t[8])}function tv(t,r,n){Xe(0),r(t,n)}const CA=(()=>Promise.resolve(null))();function Qx(t){return t[7]||(t[7]=[])}function eb(t){return t.cleanup||(t.cleanup=[])}function nb(t,r){const n=t[9],S=n?n.get(gc,null):null;S&&S.handleError(r)}function rb(t,r,n,S,U){for(let re=0;re<n.length;){const ye=n[re++],Me=n[re++],Ne=r[ye],ft=t.data[ye];null!==ft.setInput?ft.setInput(Ne,U,S,Me):Ne[Me]=U}}function lf(t,r,n){const S=Xo(r,t);!function We(t,r,n){Qi(t)?t.setValue(r,n):r.textContent=n}(t[11],S,n)}function V0(t,r,n){let S=n?t.styles:null,U=n?t.classes:null,re=0;if(null!==r)for(let ye=0;ye<r.length;ye++){const Me=r[ye];"number"==typeof Me?re=Me:1==re?U=In(U,Me):2==re&&(S=In(S,Me+": "+r[++ye]+";"))}n?t.styles=S:t.stylesWithoutHost=S,n?t.classes=U:t.classesWithoutHost=U}const nv=new Ea("INJECTOR",-1);class ib{get(r,n=rh){if(n===rh){const S=new Error(`NullInjectorError: No provider for ${Un(r)}!`);throw S.name="NullInjectorError",S}return n}}const rv=new Ea("Set Injector scope."),eg={},DA={};let iv;function ab(){return void 0===iv&&(iv=new ib),iv}function ob(t,r=null,n=null,S){const U=sb(t,r,n,S);return U._resolveInjectorDefTypes(),U}function sb(t,r=null,n=null,S){return new LA(t,n,r||ab(),S)}class LA{constructor(r,n,S,U=null){this.parent=S,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const re=[];n&&Cu(n,Me=>this.processProvider(Me,r,n)),Cu([r],Me=>this.processInjectorType(Me,[],re)),this.records.set(nv,Ed(void 0,this));const ye=this.records.get(rv);this.scope=null!=ye?ye.value:null,this.source=U||("object"==typeof r?null:Un(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,n=rh,S=ki.Default){this.assertNotDestroyed();const U=Yg(this),re=Ka(void 0);try{if(!(S&ki.SkipSelf)){let Me=this.records.get(r);if(void 0===Me){const Ne=function BA(t){return"function"==typeof t||"object"==typeof t&&t instanceof Ea}(r)&&ur(r);Me=Ne&&this.injectableDefInScope(Ne)?Ed(av(r),eg):null,this.records.set(r,Me)}if(null!=Me)return this.hydrate(r,Me)}return(S&ki.Self?ab():this.parent).get(r,n=S&ki.Optional&&n===rh?null:n)}catch(ye){if("NullInjectorError"===ye.name){if((ye[ih]=ye[ih]||[]).unshift(Un(r)),U)throw ye;return function xy(t,r,n,S){const U=t[ih];throw r[wp]&&U.unshift(r[wp]),t.message=function by(t,r,n,S=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let U=Un(r);if(Array.isArray(r))U=r.map(Un).join(" -> ");else if("object"==typeof r){let re=[];for(let ye in r)if(r.hasOwnProperty(ye)){let Me=r[ye];re.push(ye+":"+("string"==typeof Me?JSON.stringify(Me):Un(Me)))}U=`{${re.join(", ")}}`}return`${n}${S?"("+S+")":""}[${U}]: ${t.replace(my,"\n  ")}`}("\n"+t.message,U,n,S),t.ngTokenPath=U,t[ih]=null,t}(ye,r,"R3InjectorError",this.source)}throw ye}finally{Ka(re),Yg(U)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((S,U)=>r.push(Un(U))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ar(205,!1)}processInjectorType(r,n,S){if(!(r=rr(r)))return!1;let U=Ii(r);const re=null==U&&r.ngModule||void 0,ye=void 0===re?r:re,Me=-1!==S.indexOf(ye);if(void 0!==re&&(U=Ii(re)),null==U)return!1;if(null!=U.imports&&!Me){let Bt;S.push(ye);try{Cu(U.imports,Qt=>{this.processInjectorType(Qt,n,S)&&(void 0===Bt&&(Bt=[]),Bt.push(Qt))})}finally{}if(void 0!==Bt)for(let Qt=0;Qt<Bt.length;Qt++){const{ngModule:Cn,providers:Ln}=Bt[Qt];Cu(Ln,dr=>this.processProvider(dr,Cn,Ln||pa))}}this.injectorDefTypes.add(ye);const Ne=Jr(ye)||(()=>new ye);this.records.set(ye,Ed(Ne,eg));const ft=U.providers;if(null!=ft&&!Me){const Bt=r;Cu(ft,Qt=>this.processProvider(Qt,Bt,ft))}return void 0!==re&&void 0!==r.providers}processProvider(r,n,S){let U=Dd(r=rr(r))?r:rr(r&&r.provide);const re=function PA(t,r,n){return ub(t)?Ed(void 0,t.useValue):Ed(lb(t),eg)}(r);if(Dd(r)||!0!==r.multi)this.records.get(U);else{let ye=this.records.get(U);ye||(ye=Ed(void 0,eg,!0),ye.factory=()=>Ql(ye.multi),this.records.set(U,ye)),U=r,ye.multi.push(r)}this.records.set(U,re)}hydrate(r,n){return n.value===eg&&(n.value=DA,n.value=n.factory()),"object"==typeof n.value&&n.value&&function NA(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this.onDestroy.add(n.value),n.value}injectableDefInScope(r){if(!r.providedIn)return!1;const n=rr(r.providedIn);return"string"==typeof n?"any"===n||n===this.scope:this.injectorDefTypes.has(n)}}function av(t){const r=ur(t),n=null!==r?r.factory:Jr(t);if(null!==n)return n;if(t instanceof Ea)throw new Ar(204,!1);if(t instanceof Function)return function IA(t){const r=t.length;if(r>0)throw qo(r,"?"),new Ar(204,!1);const n=function Fr(t){const r=t&&(t[gi]||t[Ci]);if(r){const n=function Zr(t){if(t.hasOwnProperty("name"))return t.name;const r=(""+t).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),r}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Ar(204,!1)}function lb(t,r,n){let S;if(Dd(t)){const U=rr(t);return Jr(U)||av(U)}if(ub(t))S=()=>rr(t.useValue);else if(function RA(t){return!(!t||!t.useFactory)}(t))S=()=>t.useFactory(...Ql(t.deps||[]));else if(function OA(t){return!(!t||!t.useExisting)}(t))S=()=>Ti(rr(t.useExisting));else{const U=rr(t&&(t.useClass||t.provide));if(!function zA(t){return!!t.deps}(t))return Jr(U)||av(U);S=()=>new U(...Ql(t.deps))}return S}function Ed(t,r,n=!1){return{factory:t,value:r,multi:n?[]:void 0}}function ub(t){return null!==t&&"object"==typeof t&&Wg in t}function Dd(t){return"function"==typeof t}let Cl=(()=>{class t{static create(n,S){var U;if(Array.isArray(n))return ob({name:""},S,n,"");{const re=null!==(U=n.name)&&void 0!==U?U:"";return ob({name:re},n.parent,n.providers,re)}}}return t.THROW_IF_NOT_FOUND=rh,t.NULL=new ib,t.\u0275prov=qn({token:t,providedIn:"any",factory:()=>Ti(nv)}),t.__NG_ELEMENT_ID__=-1,t})();function YA(t,r){vi(Op(t)[1],Po())}function Bi(t){let r=function _b(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const S=[t];for(;r;){let U;if(ho(t))U=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new Ar(903,"");U=r.\u0275dir}if(U){if(n){S.push(U);const ye=t;ye.inputs=lv(t.inputs),ye.declaredInputs=lv(t.declaredInputs),ye.outputs=lv(t.outputs);const Me=U.hostBindings;Me&&KA(t,Me);const Ne=U.viewQuery,ft=U.contentQueries;if(Ne&&XA(t,Ne),ft&&$A(t,ft),En(t.inputs,U.inputs),En(t.declaredInputs,U.declaredInputs),En(t.outputs,U.outputs),ho(U)&&U.data.animation){const Bt=t.data;Bt.animation=(Bt.animation||[]).concat(U.data.animation)}}const re=U.features;if(re)for(let ye=0;ye<re.length;ye++){const Me=re[ye];Me&&Me.ngInherit&&Me(t),Me===Bi&&(n=!1)}}r=Object.getPrototypeOf(r)}!function ZA(t){let r=0,n=null;for(let S=t.length-1;S>=0;S--){const U=t[S];U.hostVars=r+=U.hostVars,U.hostAttrs=eo(U.hostAttrs,n=eo(n,U.hostAttrs))}}(S)}function lv(t){return t===es?{}:t===pa?[]:t}function XA(t,r){const n=t.viewQuery;t.viewQuery=n?(S,U)=>{r(S,U),n(S,U)}:r}function $A(t,r){const n=t.contentQueries;t.contentQueries=n?(S,U,re)=>{r(S,U,re),n(S,U,re)}:r}function KA(t,r){const n=t.hostBindings;t.hostBindings=n?(S,U)=>{r(S,U),n(S,U)}:r}let U0=null;function Ld(){if(!U0){const t=sa.Symbol;if(t&&t.iterator)U0=t.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let n=0;n<r.length;++n){const S=r[n];"entries"!==S&&"size"!==S&&Map.prototype[S]===Map.prototype.entries&&(U0=S)}}}return U0}function tg(t){return!!uv(t)&&(Array.isArray(t)||!(t instanceof Map)&&Ld()in t)}function uv(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Tc(t,r,n){return t[r]=n}function ql(t,r,n){return!Object.is(t[r],n)&&(t[r]=n,!0)}function Th(t,r,n,S){const U=ql(t,r,n);return ql(t,r+1,S)||U}function nc(t,r,n,S){const U=ei();return ql(U,O(),r)&&(ea(),Lu(Vn(),U,t,r,n,S)),nc}function Pd(t,r,n,S){return ql(t,O(),n)?r+Fn(n)+S:ha}function Od(t,r,n,S,U,re){const Me=Th(t,function Il(){return ia.lFrame.bindingIndex}(),n,U);return N(2),Me?r+Fn(n)+S+Fn(U)+re:ha}function Pu(t,r,n,S,U,re,ye,Me){const Ne=ei(),ft=ea(),Bt=t+20,Qt=ft.firstCreatePass?function iM(t,r,n,S,U,re,ye,Me,Ne){const ft=r.consts,Bt=rf(r,t,4,ye||null,Yi(ft,Me));Md(r,n,Bt,Yi(ft,Ne)),vi(r,Bt);const Qt=Bt.tViews=Qu(2,Bt,S,U,re,r.directiveRegistry,r.pipeRegistry,null,r.schemas,ft);return null!==r.queries&&(r.queries.template(r,Bt),Qt.queries=r.queries.embeddedTView(Bt)),Bt}(Bt,ft,Ne,r,n,S,U,re,ye):ft.data[Bt];hs(Qt,!1);const Cn=Ne[11].createComment("");$i(ft,Ne,Cn,Qt),Bs(Cn,Ne),j0(Ne,Ne[Bt]=Qp(Cn,Ne,Cn,Qt)),Io(Qt)&&Ju(ft,Ne,Qt),null!=ye&&wc(Ne,Qt,Me)}function Jn(t,r=ki.Default){const n=ei();return null===n?Ti(t,r):bl(Po(),n,rr(t),r)}function pv(){throw new Error("invalid")}function xi(t,r,n){const S=ei();return ql(S,O(),r)&&Rl(ea(),Vn(),S,t,r,S[11],n,!1),xi}function gv(t,r,n,S,U){const ye=U?"class":"style";rb(t,n,r.inputs[ye],ye,S)}function hn(t,r,n,S){const U=ei(),re=ea(),ye=20+t,Me=U[11],Ne=U[ye]=bt(Me,r,function Sr(){return ia.lFrame.currentNamespace}()),ft=re.firstCreatePass?function MM(t,r,n,S,U,re,ye){const Me=r.consts,ft=rf(r,t,2,U,Yi(Me,re));return Md(r,n,ft,Yi(Me,ye)),null!==ft.attrs&&V0(ft,ft.attrs,!1),null!==ft.mergedAttrs&&V0(ft,ft.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,ft),ft}(ye,re,U,0,r,n,S):re.data[ye];hs(ft,!0);const Bt=ft.mergedAttrs;null!==Bt&&ro(Me,Ne,Bt);const Qt=ft.classes;null!==Qt&&Us(Me,Ne,Qt);const Cn=ft.styles;null!==Cn&&sl(Me,Ne,Cn),64!=(64&ft.flags)&&$i(re,U,Ne,ft),0===function vl(){return ia.lFrame.elementDepthCount}()&&Bs(Ne,U),function fc(){ia.lFrame.elementDepthCount++}(),Io(ft)&&(Ju(re,U,ft),Td(re,ft,U)),null!==S&&wc(U,ft)}function dn(){let t=Po();ku()?Vu():(t=t.parent,hs(t,!1));const r=t;!function bu(){ia.lFrame.elementDepthCount--}();const n=ea();n.firstCreatePass&&(vi(n,t),Wa(t)&&n.queries.elementEnd(t)),null!=r.classesWithoutHost&&function ya(t){return 0!=(16&t.flags)}(r)&&gv(n,r,ei(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function ta(t){return 0!=(32&t.flags)}(r)&&gv(n,r,ei(),r.stylesWithoutHost,!1)}function na(t,r,n,S){hn(t,r,n,S),dn()}function q0(){return ei()}function rg(t){return!!t&&"function"==typeof t.then}const vv=function Ub(t){return!!t&&"function"==typeof t.subscribe};function To(t,r,n,S){const U=ei(),re=ea(),ye=Po();return function Gb(t,r,n,S,U,re,ye,Me){const Ne=Io(S),Bt=t.firstCreatePass&&eb(t),Qt=r[8],Cn=Qx(r);let Ln=!0;if(3&S.type||Me){const li=ns(S,r),Xr=Me?Me(li):li,Nr=Cn.length,Gi=Me?Ma=>Me(la(Ma[S.index])):S.index;if(Qi(n)){let Ma=null;if(!Me&&Ne&&(Ma=function SM(t,r,n,S){const U=t.cleanup;if(null!=U)for(let re=0;re<U.length-1;re+=2){const ye=U[re];if(ye===n&&U[re+1]===S){const Me=r[7],Ne=U[re+2];return Me.length>Ne?Me[Ne]:null}"string"==typeof ye&&(re+=2)}return null}(t,r,U,S.index)),null!==Ma)(Ma.__ngLastListenerFn__||Ma).__ngNextListenerFn__=re,Ma.__ngLastListenerFn__=re,Ln=!1;else{re=xv(S,r,Qt,re,!1);const mo=n.listen(Xr,U,re);Cn.push(re,mo),Bt&&Bt.push(U,Gi,Nr,Nr+1)}}else re=xv(S,r,Qt,re,!0),Xr.addEventListener(U,re,ye),Cn.push(re),Bt&&Bt.push(U,Gi,Nr,ye)}else re=xv(S,r,Qt,re,!1);const dr=S.outputs;let Gr;if(Ln&&null!==dr&&(Gr=dr[U])){const li=Gr.length;if(li)for(let Xr=0;Xr<li;Xr+=2){const Mu=r[Gr[Xr]][Gr[Xr+1]].subscribe(re),Bh=Cn.length;Cn.push(re,Mu),Bt&&Bt.push(U,S.index,Bh,-(Bh+1))}}}(re,U,U[11],ye,t,r,!!n,S),To}function qb(t,r,n,S){try{return!1!==n(S)}catch(U){return nb(t,U),!1}}function xv(t,r,n,S,U){return function re(ye){if(ye===Function)return S;const Me=2&t.flags?_s(t.index,r):r;0==(32&r[2])&&Jy(Me);let Ne=qb(r,0,S,ye),ft=re.__ngNextListenerFn__;for(;ft;)Ne=qb(r,0,ft,ye)&&Ne,ft=ft.__ngNextListenerFn__;return U&&!1===Ne&&(ye.preventDefault(),ye.returnValue=!1),Ne}}function Ou(t=1){return function qt(t){return(ia.lFrame.contextLView=function $t(t,r){for(;t>0;)r=r[15],t--;return r}(t,ia.lFrame.contextLView))[8]}(t)}function EM(t,r){let n=null;const S=function Xa(t){const r=t.attrs;if(null!=r){const n=r.indexOf(5);if(0==(1&n))return r[n+1]}return null}(t);for(let U=0;U<r.length;U++){const re=r[U];if("*"!==re){if(null===S?Eo(t,re,!0):Ol(S,re))return U}else n=U}return n}function bv(t,r,n){return _v(t,"",r,"",n),bv}function _v(t,r,n,S,U){const re=ei(),ye=Pd(re,r,n,S);return ye!==ha&&Rl(ea(),Vn(),re,t,ye,re[11],U,!1),_v}function n_(t,r,n,S,U){const re=t[n+1],ye=null===r;let Me=S?Gl(re):fu(re),Ne=!1;for(;0!==Me&&(!1===Ne||ye);){const Bt=t[Me+1];IM(t[Me],r)&&(Ne=!0,t[Me+1]=S?vc(Bt):Pf(Bt)),Me=S?Gl(Bt):fu(Bt)}Ne&&(t[n+1]=S?Pf(re):vc(re))}function IM(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&pc(t,r)>=0}const Tl={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function r_(t){return t.substring(Tl.key,Tl.keyEnd)}function i_(t,r){const n=Tl.textEnd;return n===r?-1:(r=Tl.keyEnd=function FM(t,r,n){for(;r<n&&t.charCodeAt(r)>32;)r++;return r}(t,Tl.key=r,n),Ud(t,r,n))}function Ud(t,r,n){for(;r<n&&t.charCodeAt(r)<=32;)r++;return r}function W0(t,r){return function rc(t,r,n,S){const U=ei(),re=ea(),ye=N(2);re.firstUpdatePass&&f_(re,t,ye,S),r!==ha&&ql(U,ye,r)&&d_(re,re.data[yn()],U,U[11],t,U[ye+1]=function YM(t,r){return null==t||("string"==typeof r?t+=r:"object"==typeof t&&(t=Un(Ul(t)))),t}(r,n),S,ye)}(t,r,null,!0),W0}function Mc(t,r){for(let n=function OM(t){return function o_(t){Tl.key=0,Tl.keyEnd=0,Tl.value=0,Tl.valueEnd=0,Tl.textEnd=t.length}(t),i_(t,Ud(t,0,Tl.textEnd))}(r);n>=0;n=i_(r,n))Vl(t,r_(r),!0)}function c_(t,r){return r>=t.expandoStartIndex}function f_(t,r,n,S){const U=t.data;if(null===U[n+1]){const re=U[yn()],ye=c_(t,n);g_(re,S)&&null===r&&!ye&&(r=!1),r=function VM(t,r,n,S){const U=function ke(t){const r=ia.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let re=S?r.residualClasses:r.residualStyles;if(null===U)0===(S?r.classBindings:r.styleBindings)&&(n=ig(n=wv(null,t,r,n,S),r.attrs,S),re=null);else{const ye=r.directiveStylingLast;if(-1===ye||t[ye]!==U)if(n=wv(U,t,r,n,S),null===re){let Ne=function UM(t,r,n){const S=n?r.classBindings:r.styleBindings;if(0!==fu(S))return t[Gl(S)]}(t,r,S);void 0!==Ne&&Array.isArray(Ne)&&(Ne=wv(null,t,r,Ne[1],S),Ne=ig(Ne,r.attrs,S),function HM(t,r,n,S){t[Gl(n?r.classBindings:r.styleBindings)]=S}(t,r,S,Ne))}else re=function GM(t,r,n){let S;const U=r.directiveEnd;for(let re=1+r.directiveStylingLast;re<U;re++)S=ig(S,t[re].hostAttrs,n);return ig(S,r.attrs,n)}(t,r,S)}return void 0!==re&&(S?r.residualClasses=re:r.residualStyles=re),n}(U,re,r,S),function DM(t,r,n,S,U,re){let ye=re?r.classBindings:r.styleBindings,Me=Gl(ye),Ne=fu(ye);t[S]=n;let Bt,ft=!1;if(Array.isArray(n)){const Qt=n;Bt=Qt[1],(null===Bt||pc(Qt,Bt)>0)&&(ft=!0)}else Bt=n;if(U)if(0!==Ne){const Cn=Gl(t[Me+1]);t[S+1]=$u(Cn,Me),0!==Cn&&(t[Cn+1]=Of(t[Cn+1],S)),t[Me+1]=function dd(t,r){return 131071&t|r<<17}(t[Me+1],S)}else t[S+1]=$u(Me,0),0!==Me&&(t[Me+1]=Of(t[Me+1],S)),Me=S;else t[S+1]=$u(Ne,0),0===Me?Me=S:t[Ne+1]=Of(t[Ne+1],S),Ne=S;ft&&(t[S+1]=Pf(t[S+1])),n_(t,Bt,S,!0),n_(t,Bt,S,!1),function LM(t,r,n,S,U){const re=U?t.residualClasses:t.residualStyles;null!=re&&"string"==typeof r&&pc(re,r)>=0&&(n[S+1]=vc(n[S+1]))}(r,Bt,t,S,re),ye=$u(Me,Ne),re?r.classBindings=ye:r.styleBindings=ye}(U,re,r,n,ye,S)}}function wv(t,r,n,S,U){let re=null;const ye=n.directiveEnd;let Me=n.directiveStylingLast;for(-1===Me?Me=n.directiveStart:Me++;Me<ye&&(re=r[Me],S=ig(S,re.hostAttrs,U),re!==t);)Me++;return null!==t&&(n.directiveStylingLast=Me),S}function ig(t,r,n){const S=n?1:2;let U=-1;if(null!==r)for(let re=0;re<r.length;re++){const ye=r[re];"number"==typeof ye?U=ye:U===S&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Vl(t,ye,!!n||r[++re]))}return void 0===t?null:t}function d_(t,r,n,S,U,re,ye,Me){if(!(3&r.type))return;const Ne=t.data,ft=Ne[Me+1];Y0(function Ku(t){return 1==(1&t)}(ft)?p_(Ne,r,n,U,fu(ft),ye):void 0)||(Y0(re)||function yc(t){return 2==(2&t)}(ft)&&(re=p_(Ne,null,n,U,Me,ye)),function Vs(t,r,n,S,U){const re=Qi(t);if(r)U?re?t.addClass(n,S):n.classList.add(S):re?t.removeClass(n,S):n.classList.remove(S);else{let ye=-1===S.indexOf("-")?void 0:Es.DashCase;if(null==U)re?t.removeStyle(n,S,ye):n.style.removeProperty(S);else{const Me="string"==typeof U&&U.endsWith("!important");Me&&(U=U.slice(0,-10),ye|=Es.Important),re?t.setStyle(n,S,U,ye):n.style.setProperty(S,U,Me?"important":"")}}}(S,ye,Xo(yn(),n),U,re))}function p_(t,r,n,S,U,re){const ye=null===r;let Me;for(;U>0;){const Ne=t[U],ft=Array.isArray(Ne),Bt=ft?Ne[1]:Ne,Qt=null===Bt;let Cn=n[U+1];Cn===ha&&(Cn=Qt?pa:void 0);let Ln=Qt?Bc(Cn,S):Bt===S?Cn:void 0;if(ft&&!Y0(Ln)&&(Ln=Bc(Ne,S)),Y0(Ln)&&(Me=Ln,ye))return Me;const dr=t[U+1];U=ye?Gl(dr):fu(dr)}if(null!==r){let Ne=re?r.residualClasses:r.residualStyles;null!=Ne&&(Me=Bc(Ne,S))}return Me}function Y0(t){return void 0!==t}function g_(t,r){return 0!=(t.flags&(r?16:32))}function Qn(t,r=""){const n=ei(),S=ea(),U=t+20,re=S.firstCreatePass?rf(S,U,1,r,null):S.data[U],ye=n[U]=function Re(t,r){return Qi(t)?t.createText(r):t.createTextNode(r)}(n[11],r);$i(S,n,ye,re),hs(re,!1)}function Ni(t){return Ru("",t,""),Ni}function Ru(t,r,n){const S=ei(),U=Pd(S,t,r,n);return U!==ha&&lf(S,yn(),U),Ru}function Tv(t,r,n,S,U){const re=ei(),ye=Od(re,t,r,n,S,U);return ye!==ha&&lf(re,yn(),ye),Tv}function Ao(t,r,n){!function ic(t,r,n,S){const U=ea(),re=N(2);U.firstUpdatePass&&f_(U,null,re,S);const ye=ei();if(n!==ha&&ql(ye,re,n)){const Me=U.data[yn()];if(g_(Me,S)&&!c_(U,re)){let Ne=S?Me.classesWithoutHost:Me.stylesWithoutHost;null!==Ne&&(n=In(Ne,n||"")),gv(U,Me,ye,n,S)}else!function WM(t,r,n,S,U,re,ye,Me){U===ha&&(U=pa);let Ne=0,ft=0,Bt=0<U.length?U[0]:null,Qt=0<re.length?re[0]:null;for(;null!==Bt||null!==Qt;){const Cn=Ne<U.length?U[Ne+1]:void 0,Ln=ft<re.length?re[ft+1]:void 0;let Gr,dr=null;Bt===Qt?(Ne+=2,ft+=2,Cn!==Ln&&(dr=Qt,Gr=Ln)):null===Qt||null!==Bt&&Bt<Qt?(Ne+=2,dr=Bt):(ft+=2,dr=Qt,Gr=Ln),null!==dr&&d_(t,r,n,S,dr,Gr,ye,Me),Bt=Ne<U.length?U[Ne]:null,Qt=ft<re.length?re[ft]:null}}(U,Me,ye,ye[11],ye[re+1],ye[re+1]=function qM(t,r,n){if(null==n||""===n)return pa;const S=[],U=Ul(n);if(Array.isArray(U))for(let re=0;re<U.length;re++)t(S,U[re],!0);else if("object"==typeof U)for(const re in U)U.hasOwnProperty(re)&&t(S,re,U[re]);else"string"==typeof U&&r(S,U);return S}(t,r,n),S,re)}}(Vl,Mc,Pd(ei(),t,r,n),!0)}const Ah=void 0;var hk=["en",[["a","p"],["AM","PM"],Ah],[["AM","PM"],Ah,Ah],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ah,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ah,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ah,"{1} 'at' {0}",Ah],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function fk(t){const n=Math.floor(Math.abs(t)),S=t.toString().replace(/^[^.]*\.?/,"").length;return 1===n&&0===S?1:5}];let Hd={};function eu(t){const r=function dk(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=R_(r);if(n)return n;const S=r.split("-")[0];if(n=R_(S),n)return n;if("en"===S)return hk;throw new Error(`Missing locale data for the locale "${t}".`)}function R_(t){return t in Hd||(Hd[t]=sa.ng&&sa.ng.common&&sa.ng.common.locales&&sa.ng.common.locales[t]),Hd[t]}var Hi=(()=>((Hi=Hi||{})[Hi.LocaleId=0]="LocaleId",Hi[Hi.DayPeriodsFormat=1]="DayPeriodsFormat",Hi[Hi.DayPeriodsStandalone=2]="DayPeriodsStandalone",Hi[Hi.DaysFormat=3]="DaysFormat",Hi[Hi.DaysStandalone=4]="DaysStandalone",Hi[Hi.MonthsFormat=5]="MonthsFormat",Hi[Hi.MonthsStandalone=6]="MonthsStandalone",Hi[Hi.Eras=7]="Eras",Hi[Hi.FirstDayOfWeek=8]="FirstDayOfWeek",Hi[Hi.WeekendRange=9]="WeekendRange",Hi[Hi.DateFormat=10]="DateFormat",Hi[Hi.TimeFormat=11]="TimeFormat",Hi[Hi.DateTimeFormat=12]="DateTimeFormat",Hi[Hi.NumberSymbols=13]="NumberSymbols",Hi[Hi.NumberFormats=14]="NumberFormats",Hi[Hi.CurrencyCode=15]="CurrencyCode",Hi[Hi.CurrencySymbol=16]="CurrencySymbol",Hi[Hi.CurrencyName=17]="CurrencyName",Hi[Hi.Currencies=18]="Currencies",Hi[Hi.Directionality=19]="Directionality",Hi[Hi.PluralCase=20]="PluralCase",Hi[Hi.ExtraData=21]="ExtraData",Hi))();const Z0="en-US";let F_=Z0;function kv(t,r,n,S,U){if(t=rr(t),Array.isArray(t))for(let re=0;re<t.length;re++)kv(t[re],r,n,S,U);else{const re=ea(),ye=ei();let Me=Dd(t)?t:rr(t.provide),Ne=lb(t);const ft=Po(),Bt=1048575&ft.providerIndexes,Qt=ft.directiveStart,Cn=ft.providerIndexes>>20;if(Dd(t)||!t.multi){const Ln=new Fi(Ne,U,Jn),dr=Sv(Me,r,U?Bt:Bt+Cn,Qt);-1===dr?(ws(_u(ft,ye),re,Me),Cv(re,t,r.length),r.push(Me),ft.directiveStart++,ft.directiveEnd++,U&&(ft.providerIndexes+=1048576),n.push(Ln),ye.push(Ln)):(n[dr]=Ln,ye[dr]=Ln)}else{const Ln=Sv(Me,r,Bt+Cn,Qt),dr=Sv(Me,r,Bt,Bt+Cn),Gr=Ln>=0&&n[Ln],li=dr>=0&&n[dr];if(U&&!li||!U&&!Gr){ws(_u(ft,ye),re,Me);const Xr=function f4(t,r,n,S,U){const re=new Fi(t,n,Jn);return re.multi=[],re.index=r,re.componentProviders=0,o2(re,U,S&&!n),re}(U?c4:u4,n.length,U,S,Ne);!U&&li&&(n[dr].providerFactory=Xr),Cv(re,t,r.length,0),r.push(Me),ft.directiveStart++,ft.directiveEnd++,U&&(ft.providerIndexes+=1048576),n.push(Xr),ye.push(Xr)}else Cv(re,t,Ln>-1?Ln:dr,o2(n[U?dr:Ln],Ne,!U&&S));!U&&S&&li&&n[dr].componentProviders++}}}function Cv(t,r,n,S){const U=Dd(r),re=function FA(t){return!!t.useClass}(r);if(U||re){const Ne=(re?rr(r.useClass):r).prototype.ngOnDestroy;if(Ne){const ft=t.destroyHooks||(t.destroyHooks=[]);if(!U&&r.multi){const Bt=ft.indexOf(n);-1===Bt?ft.push(n,[S,Ne]):ft[Bt+1].push(S,Ne)}else ft.push(n,Ne)}}}function o2(t,r,n){return n&&t.componentProviders++,t.multi.push(r)-1}function Sv(t,r,n,S){for(let U=n;U<S;U++)if(r[U]===t)return U;return-1}function u4(t,r,n,S){return Ev(this.multi,[])}function c4(t,r,n,S){const U=this.multi;let re;if(this.providerFactory){const ye=this.providerFactory.componentProviders,Me=Pc(n,n[1],this.providerFactory.index,S);re=Me.slice(0,ye),Ev(U,re);for(let Ne=ye;Ne<Me.length;Ne++)re.push(Me[Ne])}else re=[],Ev(U,re);return re}function Ev(t,r){for(let n=0;n<t.length;n++)r.push((0,t[n])());return r}function ms(t,r=[]){return n=>{n.providersResolver=(S,U)=>function l4(t,r,n){const S=ea();if(S.firstCreatePass){const U=ho(t);kv(n,S.data,S.blueprint,U,!0),kv(r,S.data,S.blueprint,U,!1)}}(S,U?U(t):t,r)}}class s2{}class p4{resolveComponentFactory(r){throw function d4(t){const r=Error(`No component factory found for ${Un(t)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=t,r}(r)}}let qd=(()=>{class t{}return t.NULL=new p4,t})();function g4(){return Wd(Po(),ei())}function Wd(t,r){return new io(ns(t,r))}let io=(()=>{class t{constructor(n){this.nativeElement=n}}return t.__NG_ELEMENT_ID__=g4,t})();function m4(t){return t instanceof io?t.nativeElement:t}class u2{}let ac=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function v4(){const t=ei(),n=_s(Po().index,t);return function y4(t){return t[11]}(Ua(n)?n:t)}(),t})(),x4=(()=>{class t{}return t.\u0275prov=qn({token:t,providedIn:"root",factory:()=>null}),t})();class Yd{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const b4=new Yd("13.2.2"),Dv={};function Q0(t,r,n,S,U=!1){for(;null!==n;){const re=r[n.index];if(null!==re&&S.push(la(re)),Sa(re))for(let Me=10;Me<re.length;Me++){const Ne=re[Me],ft=Ne[1].firstChild;null!==ft&&Q0(Ne[1],Ne,ft,S)}const ye=n.type;if(8&ye)Q0(t,r,n.child,S);else if(32&ye){const Me=fd(n,r);let Ne;for(;Ne=Me();)S.push(Ne)}else if(16&ye){const Me=wo(r,n);if(Array.isArray(Me))S.push(...Me);else{const Ne=uu(r[16]);Q0(Ne[1],Ne,Me,S,!0)}}n=U?n.projectionNext:n.next}return S}class ug{constructor(r,n){this._lView=r,this._cdRefInjectingView=n,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,n=r[1];return Q0(n,r,n.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Sa(r)){const n=r[8],S=n?n.indexOf(this):-1;S>-1&&(Yn(r,S),Hh(n,S))}this._attachedToViewContainer=!1}ar(this._lView[1],this._lView)}onDestroy(r){Yp(this._lView[1],this._lView,null,r)}markForCheck(){Jy(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){ev(this._lView[1],this._lView,this.context)}checkNoChanges(){!function MA(t,r,n){$o(!0);try{ev(t,r,n)}finally{$o(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Ar(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function cn(t,r){Wo(t,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new Ar(902,"");this._appRef=r}}class _4 extends ug{constructor(r){super(r),this._view=r}detectChanges(){Jx(this._view)}checkNoChanges(){!function kA(t){$o(!0);try{Jx(t)}finally{$o(!1)}}(this._view)}get context(){return null}}class c2 extends qd{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const n=Ja(r);return new Lv(n,this.ngModule)}}function f2(t){const r=[];for(let n in t)t.hasOwnProperty(n)&&r.push({propName:t[n],templateName:n});return r}const T4=new Ea("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>mc});class Lv extends s2{constructor(r,n){super(),this.componentDef=r,this.ngModule=n,this.componentType=r.type,this.selector=function Xu(t){return t.map(Au).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!n}get inputs(){return f2(this.componentDef.inputs)}get outputs(){return f2(this.componentDef.outputs)}create(r,n,S,U){const re=(U=U||this.ngModule)?function A4(t,r){return{get:(n,S,U)=>{const re=t.get(n,Dv,U);return re!==Dv||S===Dv?re:r.get(n,S,U)}}}(r,U.injector):r,ye=re.get(u2,Mo),Me=re.get(x4,null),Ne=ye.createRenderer(null,this.componentDef),ft=this.componentDef.selectors[0][0]||"div",Bt=S?function Wp(t,r,n){if(Qi(t))return t.selectRootElement(r,n===yo.ShadowDom);let S="string"==typeof r?t.querySelector(r):r;return S.textContent="",S}(Ne,S,this.componentDef.encapsulation):bt(ye.createRenderer(null,this.componentDef),ft,function w4(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(ft)),Qt=this.componentDef.onPush?576:528,Cn=function bb(t,r){return{components:[],scheduler:t||mc,clean:CA,playerHandler:r||null,flags:0}}(),Ln=Qu(0,null,null,1,0,null,null,null,null,null),dr=Vf(null,Ln,Cn,Qt,null,null,ye,Ne,Me,re);let Gr,li;Dt(dr);try{const Xr=function vb(t,r,n,S,U,re){const ye=n[1];n[20]=t;const Ne=rf(ye,20,2,"#host",null),ft=Ne.mergedAttrs=r.hostAttrs;null!==ft&&(V0(Ne,ft,!0),null!==t&&(ro(U,t,ft),null!==Ne.classes&&Us(U,t,Ne.classes),null!==Ne.styles&&sl(U,t,Ne.styles)));const Bt=S.createRenderer(t,r),Qt=Vf(n,sf(r),null,r.onPush?64:16,n[20],Ne,S,Bt,re||null,null);return ye.firstCreatePass&&(ws(_u(Ne,n),ye,r.type),F0(ye,Ne),z0(Ne,n.length,1)),j0(n,Qt),n[20]=Qt}(Bt,this.componentDef,dr,ye,Ne);if(Bt)if(S)ro(Ne,Bt,["ng-version",b4.full]);else{const{attrs:Nr,classes:Gi}=function Ls(t){const r=[],n=[];let S=1,U=2;for(;S<t.length;){let re=t[S];if("string"==typeof re)2===U?""!==re&&r.push(re,t[++S]):8===U&&n.push(re);else{if(!to(U))break;U=re}S++}return{attrs:r,classes:n}}(this.componentDef.selectors[0]);Nr&&ro(Ne,Bt,Nr),Gi&&Gi.length>0&&Us(Ne,Bt,Gi.join(" "))}if(li=au(Ln,20),void 0!==n){const Nr=li.projection=[];for(let Gi=0;Gi<this.ngContentSelectors.length;Gi++){const Ma=n[Gi];Nr.push(null!=Ma?Array.from(Ma):null)}}Gr=function xb(t,r,n,S,U){const re=n[1],ye=function Kp(t,r,n){const S=Po();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),N0(t,S,r,Js(t,r,1,null),n));const U=Pc(r,t,S.directiveStart,S);Bs(U,r);const re=ns(S,r);return re&&Bs(re,r),U}(re,n,r);if(S.components.push(ye),t[8]=ye,U&&U.forEach(Ne=>Ne(ye,r)),r.contentQueries){const Ne=Po();r.contentQueries(1,ye,Ne.directiveStart)}const Me=Po();return!re.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(kn(Me.index),Hf(n[1],Me,0,Me.directiveStart,Me.directiveEnd,r),Jp(r,ye)),ye}(Xr,this.componentDef,dr,Cn,[YA]),_c(Ln,dr,null)}finally{Zt()}return new k4(this.componentType,Gr,Wd(li,dr),dr,li)}}class k4 extends class h4{}{constructor(r,n,S,U,re){super(),this.location=S,this._rootLView=U,this._tNode=re,this.instance=n,this.hostView=this.changeDetectorRef=new _4(U),this.componentType=r}get injector(){return new wf(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class uf{}class h2{}const Zd=new Map;class g2 extends uf{constructor(r,n){super(),this._parent=n,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new c2(this);const S=jo(r);this._bootstrapComponents=ol(S.bootstrap),this._r3Injector=sb(r,n,[{provide:uf,useValue:this},{provide:qd,useValue:this.componentFactoryResolver}],Un(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,n=Cl.THROW_IF_NOT_FOUND,S=ki.Default){return r===Cl||r===uf||r===nv?this:this._r3Injector.get(r,n,S)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class Iv extends h2{constructor(r){super(),this.moduleType=r,null!==jo(r)&&function S4(t){const r=new Set;!function n(S){const U=jo(S,!0),re=U.id;null!==re&&(function d2(t,r,n){if(r&&r!==n)throw new Error(`Duplicate module registered for ${t} - ${Un(r)} vs ${Un(r.name)}`)}(re,Zd.get(re),S),Zd.set(re,S));const ye=ol(U.imports);for(const Me of ye)r.has(Me)||(r.add(Me),n(Me))}(t)}(r)}create(r){return new g2(this.moduleType,r)}}function em(t,r,n,S){return function y2(t,r,n,S,U,re){const ye=r+n;return ql(t,ye,U)?Tc(t,ye+1,re?S.call(re,U):S(U)):cg(t,ye+1)}(ei(),Cs(),t,r,n,S)}function m2(t,r,n,S,U){return function v2(t,r,n,S,U,re,ye){const Me=r+n;return Th(t,Me,U,re)?Tc(t,Me+2,ye?S.call(ye,U,re):S(U,re)):cg(t,Me+2)}(ei(),Cs(),t,r,n,S,U)}function cg(t,r){const n=t[r];return n===ha?void 0:n}function Pv(t){return r=>{setTimeout(t,void 0,r)}}const aa=class G4 extends ${constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,n,S){var U,re,ye;let Me=r,Ne=n||(()=>null),ft=S;if(r&&"object"==typeof r){const Qt=r;Me=null===(U=Qt.next)||void 0===U?void 0:U.bind(Qt),Ne=null===(re=Qt.error)||void 0===re?void 0:re.bind(Qt),ft=null===(ye=Qt.complete)||void 0===ye?void 0:ye.bind(Qt)}this.__isAsync&&(Ne=Pv(Ne),Me&&(Me=Pv(Me)),ft&&(ft=Pv(ft)));const Bt=super.subscribe({next:Me,error:Ne,complete:ft});return r instanceof b&&r.add(Bt),Bt}};function q4(){return this._results[Ld()]()}class Ov{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const n=Ld(),S=Ov.prototype;S[n]||(S[n]=q4)}get changes(){return this._changes||(this._changes=new aa)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,n){return this._results.reduce(r,n)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,n){const S=this;S.dirty=!1;const U=jl(r);(this._changesDetected=!function dy(t,r,n){if(t.length!==r.length)return!1;for(let S=0;S<t.length;S++){let U=t[S],re=r[S];if(n&&(U=n(U),re=n(re)),re!==U)return!1}return!0}(S._results,U,n))&&(S._results=U,S.length=U.length,S.last=U[this.length-1],S.first=U[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let cf=(()=>{class t{}return t.__NG_ELEMENT_ID__=Z4,t})();const W4=cf,Y4=class extends W4{constructor(r,n,S){super(),this._declarationLView=r,this._declarationTContainer=n,this.elementRef=S}createEmbeddedView(r){const n=this._declarationTContainer.tViews,S=Vf(this._declarationLView,n,r,16,null,n.declTNode,null,null,null,null);S[17]=this._declarationLView[this._declarationTContainer.index];const re=this._declarationLView[19];return null!==re&&(S[19]=re.createEmbeddedView(n)),_c(n,S,r),new ug(S)}};function Z4(){return tm(Po(),ei())}function tm(t,r){return 4&t.type?new Y4(r,t,Wd(t,r)):null}let oc=(()=>{class t{}return t.__NG_ELEMENT_ID__=X4,t})();function X4(){return A2(Po(),ei())}const $4=oc,w2=class extends $4{constructor(r,n,S){super(),this._lContainer=r,this._hostTNode=n,this._hostLView=S}get element(){return Wd(this._hostTNode,this._hostLView)}get injector(){return new wf(this._hostTNode,this._hostLView)}get parentInjector(){const r=bo(this._hostTNode,this._hostLView);if(xo(r)){const n=ds(r,this._hostLView),S=Ko(r);return new wf(n[1].data[S+8],n)}return new wf(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const n=T2(this._lContainer);return null!==n&&n[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,n,S){const U=r.createEmbeddedView(n||{});return this.insert(U,S),U}createComponent(r,n,S,U,re){const ye=r&&!function eh(t){return"function"==typeof t}(r);let Me;if(ye)Me=n;else{const Qt=n||{};Me=Qt.index,S=Qt.injector,U=Qt.projectableNodes,re=Qt.ngModuleRef}const Ne=ye?r:new Lv(Ja(r)),ft=S||this.parentInjector;if(!re&&null==Ne.ngModule&&ft){const Qt=ft.get(uf,null);Qt&&(re=Qt)}const Bt=Ne.create(ft,U,void 0,re);return this.insert(Bt.hostView,Me),Bt}insert(r,n){const S=r._lView,U=S[1];if(function Ri(t){return Sa(t[3])}(S)){const Bt=this.indexOf(r);if(-1!==Bt)this.detach(Bt);else{const Qt=S[3],Cn=new w2(Qt,Qt[6],Qt[3]);Cn.detach(Cn.indexOf(r))}}const re=this._adjustIndex(n),ye=this._lContainer;!function vn(t,r,n,S){const U=10+S,re=n.length;S>0&&(n[U-1][4]=r),S<re-10?(r[4]=n[U],Nc(n,10+S,r)):(n.push(r),r[4]=null),r[3]=n;const ye=r[17];null!==ye&&n!==ye&&function Pn(t,r){const n=t[9];r[16]!==r[3][3][16]&&(t[2]=!0),null===n?t[9]=[r]:n.push(r)}(ye,r);const Me=r[19];null!==Me&&Me.insertView(t),r[2]|=128}(U,S,ye,re);const Me=so(re,ye),Ne=S[11],ft=_i(Ne,ye[7]);return null!==ft&&function Xt(t,r,n,S,U,re){S[0]=U,S[6]=r,Wo(t,S,n,1,U,re)}(U,ye[6],Ne,S,ft,Me),r.attachToViewContainerRef(),Nc(Rv(ye),re,r),r}move(r,n){return this.insert(r,n)}indexOf(r){const n=T2(this._lContainer);return null!==n?n.indexOf(r):-1}remove(r){const n=this._adjustIndex(r,-1),S=Yn(this._lContainer,n);S&&(Hh(Rv(this._lContainer),n),ar(S[1],S))}detach(r){const n=this._adjustIndex(r,-1),S=Yn(this._lContainer,n);return S&&null!=Hh(Rv(this._lContainer),n)?new ug(S):null}_adjustIndex(r,n=0){return null==r?this.length+n:r}};function T2(t){return t[8]}function Rv(t){return t[8]||(t[8]=[])}function A2(t,r){let n;const S=r[t.index];if(Sa(S))n=S;else{let U;if(8&t.type)U=la(S);else{const re=r[11];U=re.createComment("");const ye=ns(t,r);ni(re,_i(re,ye),U,function Ui(t,r){return Qi(t)?t.nextSibling(r):r.nextSibling}(re,ye),!1)}r[t.index]=n=Qp(S,r,U,t),j0(r,n)}return new w2(n,t,r)}class Fv{constructor(r){this.queryList=r,this.matches=null}clone(){return new Fv(this.queryList)}setDirty(){this.queryList.setDirty()}}class zv{constructor(r=[]){this.queries=r}createEmbeddedView(r){const n=r.queries;if(null!==n){const S=null!==r.contentQueries?r.contentQueries[0]:n.length,U=[];for(let re=0;re<S;re++){const ye=n.getByIndex(re);U.push(this.queries[ye.indexInDeclarationView].clone())}return new zv(U)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let n=0;n<this.queries.length;n++)null!==D2(r,n).matches&&this.queries[n].setDirty()}}class M2{constructor(r,n,S=null){this.predicate=r,this.flags=n,this.read=S}}class Nv{constructor(r=[]){this.queries=r}elementStart(r,n){for(let S=0;S<this.queries.length;S++)this.queries[S].elementStart(r,n)}elementEnd(r){for(let n=0;n<this.queries.length;n++)this.queries[n].elementEnd(r)}embeddedTView(r){let n=null;for(let S=0;S<this.length;S++){const U=null!==n?n.length:0,re=this.getByIndex(S).embeddedTView(r,U);re&&(re.indexInDeclarationView=S,null!==n?n.push(re):n=[re])}return null!==n?new Nv(n):null}template(r,n){for(let S=0;S<this.queries.length;S++)this.queries[S].template(r,n)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class Bv{constructor(r,n=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=n}elementStart(r,n){this.isApplyingToNode(n)&&this.matchTNode(r,n)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,n){this.elementStart(r,n)}embeddedTView(r,n){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,n),new Bv(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const n=this._declarationNodeIndex;let S=r.parent;for(;null!==S&&8&S.type&&S.index!==n;)S=S.parent;return n===(null!==S?S.index:-1)}return this._appliesToNextNode}matchTNode(r,n){const S=this.metadata.predicate;if(Array.isArray(S))for(let U=0;U<S.length;U++){const re=S[U];this.matchTNodeWithReadOption(r,n,Q4(n,re)),this.matchTNodeWithReadOption(r,n,Kl(n,r,re,!1,!1))}else S===cf?4&n.type&&this.matchTNodeWithReadOption(r,n,-1):this.matchTNodeWithReadOption(r,n,Kl(n,r,S,!1,!1))}matchTNodeWithReadOption(r,n,S){if(null!==S){const U=this.metadata.read;if(null!==U)if(U===io||U===oc||U===cf&&4&n.type)this.addMatch(n.index,-2);else{const re=Kl(n,r,U,!1,!1);null!==re&&this.addMatch(n.index,re)}else this.addMatch(n.index,S)}}addMatch(r,n){null===this.matches?this.matches=[r,n]:this.matches.push(r,n)}}function Q4(t,r){const n=t.localNames;if(null!==n)for(let S=0;S<n.length;S+=2)if(n[S]===r)return n[S+1];return null}function tC(t,r,n,S){return-1===n?function eC(t,r){return 11&t.type?Wd(t,r):4&t.type?tm(t,r):null}(r,t):-2===n?function nC(t,r,n){return n===io?Wd(r,t):n===cf?tm(r,t):n===oc?A2(r,t):void 0}(t,r,S):Pc(t,t[1],n,r)}function k2(t,r,n,S){const U=r[19].queries[S];if(null===U.matches){const re=t.data,ye=n.matches,Me=[];for(let Ne=0;Ne<ye.length;Ne+=2){const ft=ye[Ne];Me.push(ft<0?null:tC(r,re[ft],ye[Ne+1],n.metadata.read))}U.matches=Me}return U.matches}function jv(t,r,n,S){const U=t.queries.getByIndex(n),re=U.matches;if(null!==re){const ye=k2(t,r,U,n);for(let Me=0;Me<re.length;Me+=2){const Ne=re[Me];if(Ne>0)S.push(ye[Me/2]);else{const ft=re[Me+1],Bt=r[-Ne];for(let Qt=10;Qt<Bt.length;Qt++){const Cn=Bt[Qt];Cn[17]===Cn[3]&&jv(Cn[1],Cn,ft,S)}if(null!==Bt[9]){const Qt=Bt[9];for(let Cn=0;Cn<Qt.length;Cn++){const Ln=Qt[Cn];jv(Ln[1],Ln,ft,S)}}}}}return S}function nm(t){const r=ei(),n=ea(),S=Oe();Xe(S+1);const U=D2(n,S);if(t.dirty&&Uo(r)===(2==(2&U.metadata.flags))){if(null===U.matches)t.reset([]);else{const re=U.crossesNgTemplate?jv(n,r,S,[]):k2(n,r,U,S);t.reset(re,m4),t.notifyOnChanges()}return!0}return!1}function C2(t,r,n){const S=ea();S.firstCreatePass&&(function E2(t,r,n){null===t.queries&&(t.queries=new Nv),t.queries.track(new Bv(r,n))}(S,new M2(t,r,n),-1),2==(2&r)&&(S.staticViewQueries=!0)),function S2(t,r,n){const S=new Ov(4==(4&n));Yp(t,r,S,S.destroy),null===r[19]&&(r[19]=new zv),r[19].queries.push(new Fv(S))}(S,ei(),r)}function D2(t,r){return t.queries.getByIndex(r)}function om(...t){}const sm=new Ea("Application Initializer");let $d=(()=>{class t{constructor(n){this.appInits=n,this.resolve=om,this.reject=om,this.initialized=!1,this.done=!1,this.donePromise=new Promise((S,U)=>{this.resolve=S,this.reject=U})}runInitializers(){if(this.initialized)return;const n=[],S=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let U=0;U<this.appInits.length;U++){const re=this.appInits[U]();if(rg(re))n.push(re);else if(vv(re)){const ye=new Promise((Me,Ne)=>{re.subscribe({complete:Me,error:Ne})});n.push(ye)}}Promise.all(n).then(()=>{S()}).catch(U=>{this.reject(U)}),0===n.length&&S(),this.initialized=!0}}return t.\u0275fac=function(n){return new(n||t)(Ti(sm,8))},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})();const dg=new Ea("AppId"),TC={provide:dg,useFactory:function wC(){return`${Yv()}${Yv()}${Yv()}`},deps:[]};function Yv(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Y2=new Ea("Platform Initializer"),Fu=new Ea("Platform ID"),Zv=new Ea("appBootstrapListener");let Z2=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})();const Gf=new Ea("LocaleId"),X2=new Ea("DefaultCurrencyCode");class AC{constructor(r,n){this.ngModuleFactory=r,this.componentFactories=n}}let lm=(()=>{class t{compileModuleSync(n){return new Iv(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const S=this.compileModuleSync(n),re=ol(jo(n).declarations).reduce((ye,Me)=>{const Ne=Ja(Me);return Ne&&ye.push(new Lv(Ne)),ye},[]);return new AC(S,re)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})();const kC=(()=>Promise.resolve(0))();function Xv(t){"undefined"==typeof Zone?kC.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Gs{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:n=!1,shouldCoalesceRunChangeDetection:S=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new aa(!1),this.onMicrotaskEmpty=new aa(!1),this.onStable=new aa(!1),this.onError=new aa(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const U=this;U._nesting=0,U._outer=U._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(U._inner=U._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(U._inner=U._inner.fork(Zone.longStackTraceZoneSpec)),U.shouldCoalesceEventChangeDetection=!S&&n,U.shouldCoalesceRunChangeDetection=S,U.lastRequestAnimationFrameId=-1,U.nativeRequestAnimationFrame=function CC(){let t=sa.requestAnimationFrame,r=sa.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&r){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const S=r[Zone.__symbol__("OriginalDelegate")];S&&(r=S)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function DC(t){const r=()=>{!function EC(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(sa,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Kv(t),t.isCheckStableRunning=!0,$v(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Kv(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,S,U,re,ye,Me)=>{try{return $2(t),n.invokeTask(U,re,ye,Me)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===re.type||t.shouldCoalesceRunChangeDetection)&&r(),K2(t)}},onInvoke:(n,S,U,re,ye,Me,Ne)=>{try{return $2(t),n.invoke(U,re,ye,Me,Ne)}finally{t.shouldCoalesceRunChangeDetection&&r(),K2(t)}},onHasTask:(n,S,U,re)=>{n.hasTask(U,re),S===U&&("microTask"==re.change?(t._hasPendingMicrotasks=re.microTask,Kv(t),$v(t)):"macroTask"==re.change&&(t.hasPendingMacrotasks=re.macroTask))},onHandleError:(n,S,U,re)=>(n.handleError(U,re),t.runOutsideAngular(()=>t.onError.emit(re)),!1)})}(U)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Gs.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Gs.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,n,S){return this._inner.run(r,n,S)}runTask(r,n,S,U){const re=this._inner,ye=re.scheduleEventTask("NgZoneEvent: "+U,r,SC,om,om);try{return re.runTask(ye,n,S)}finally{re.cancelTask(ye)}}runGuarded(r,n,S){return this._inner.runGuarded(r,n,S)}runOutsideAngular(r){return this._outer.run(r)}}const SC={};function $v(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Kv(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function $2(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function K2(t){t._nesting--,$v(t)}class LC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new aa,this.onMicrotaskEmpty=new aa,this.onStable=new aa,this.onError=new aa}run(r,n,S){return r.apply(n,S)}runGuarded(r,n,S){return r.apply(n,S)}runOutsideAngular(r){return r()}runTask(r,n,S,U){return r.apply(n,S)}}let Jv=(()=>{class t{constructor(n){this._ngZone=n,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),n.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Gs.assertNotInAngularZone(),Xv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Xv(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb(this._didWork)}this._didWork=!1});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(S=>!S.updateCb||!S.updateCb(n)||(clearTimeout(S.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,S,U){let re=-1;S&&S>0&&(re=setTimeout(()=>{this._callbacks=this._callbacks.filter(ye=>ye.timeoutId!==re),n(this._didWork,this.getPendingTasks())},S)),this._callbacks.push({doneCb:n,timeoutId:re,updateCb:U})}whenStable(n,S,U){if(U&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,S,U),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(n,S,U){return[]}}return t.\u0275fac=function(n){return new(n||t)(Ti(Gs))},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})(),J2=(()=>{class t{constructor(){this._applications=new Map,Qv.addToWindow(this)}registerApplication(n,S){this._applications.set(n,S)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,S=!0){return Qv.findTestabilityInTree(this,n,S)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})();class IC{addToWindow(r){}findTestabilityInTree(r,n,S){return null}}let sc,Qv=new IC;const Q2=new Ea("AllowMultipleToken");class ew{constructor(r,n){this.name=r,this.token=n}}function tw(t,r,n=[]){const S=`Platform: ${r}`,U=new Ea(S);return(re=[])=>{let ye=nw();if(!ye||ye.injector.get(Q2,!1))if(t)t(n.concat(re).concat({provide:U,useValue:!0}));else{const Me=n.concat(re).concat({provide:U,useValue:!0},{provide:rv,useValue:"platform"});!function FC(t){if(sc&&!sc.destroyed&&!sc.injector.get(Q2,!1))throw new Ar(400,"");sc=t.get(rw);const r=t.get(Y2,null);r&&r.forEach(n=>n())}(Cl.create({providers:Me,name:S}))}return function zC(t){const r=nw();if(!r)throw new Ar(401,"");return r}()}}function nw(){return sc&&!sc.destroyed?sc:null}let rw=(()=>{class t{constructor(n){this._injector=n,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(n,S){const Me=function NC(t,r){let n;return n="noop"===t?new LC:("zone.js"===t?void 0:t)||new Gs({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),n}(S?S.ngZone:void 0,{ngZoneEventCoalescing:S&&S.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:S&&S.ngZoneRunCoalescing||!1}),Ne=[{provide:Gs,useValue:Me}];return Me.run(()=>{const ft=Cl.create({providers:Ne,parent:this.injector,name:n.moduleType.name}),Bt=n.create(ft),Qt=Bt.injector.get(gc,null);if(!Qt)throw new Ar(402,"");return Me.runOutsideAngular(()=>{const Cn=Me.onError.subscribe({next:Ln=>{Qt.handleError(Ln)}});Bt.onDestroy(()=>{e1(this._modules,Bt),Cn.unsubscribe()})}),function BC(t,r,n){try{const S=n();return rg(S)?S.catch(U=>{throw r.runOutsideAngular(()=>t.handleError(U)),U}):S}catch(S){throw r.runOutsideAngular(()=>t.handleError(S)),S}}(Qt,Me,()=>{const Cn=Bt.injector.get($d);return Cn.runInitializers(),Cn.donePromise.then(()=>(function yk(t){Wn(t,"Expected localeId to be defined"),"string"==typeof t&&(F_=t.toLowerCase().replace(/_/g,"-"))}(Bt.injector.get(Gf,Z0)||Z0),this._moduleDoBootstrap(Bt),Bt))})})}bootstrapModule(n,S=[]){const U=iw({},S);return function OC(t,r,n){const S=new Iv(n);return Promise.resolve(S)}(0,0,n).then(re=>this.bootstrapModuleFactory(re,U))}_moduleDoBootstrap(n){const S=n.injector.get(pg);if(n._bootstrapComponents.length>0)n._bootstrapComponents.forEach(U=>S.bootstrap(U));else{if(!n.instance.ngDoBootstrap)throw new Ar(403,"");n.instance.ngDoBootstrap(S)}this._modules.push(n)}onDestroy(n){this._destroyListeners.push(n)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ar(404,"");this._modules.slice().forEach(n=>n.destroy()),this._destroyListeners.forEach(n=>n()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(n){return new(n||t)(Ti(Cl))},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})();function iw(t,r){return Array.isArray(r)?r.reduce(iw,t):Object.assign(Object.assign({},t),r)}let pg=(()=>{class t{constructor(n,S,U,re,ye){this._zone=n,this._injector=S,this._exceptionHandler=U,this._componentFactoryResolver=re,this._initStatus=ye,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const Me=new V(ft=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{ft.next(this._stable),ft.complete()})}),Ne=new V(ft=>{let Bt;this._zone.runOutsideAngular(()=>{Bt=this._zone.onStable.subscribe(()=>{Gs.assertNotInAngularZone(),Xv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,ft.next(!0))})})});const Qt=this._zone.onUnstable.subscribe(()=>{Gs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{ft.next(!1)}))});return()=>{Bt.unsubscribe(),Qt.unsubscribe()}});this.isStable=wn(Me,Ne.pipe(function Dn(t={}){const{connector:r=(()=>new $),resetOnError:n=!0,resetOnComplete:S=!0,resetOnRefCountZero:U=!0}=t;return re=>{let ye=null,Me=null,Ne=null,ft=0,Bt=!1,Qt=!1;const Cn=()=>{null==Me||Me.unsubscribe(),Me=null},Ln=()=>{Cn(),ye=Ne=null,Bt=Qt=!1},dr=()=>{const Gr=ye;Ln(),null==Gr||Gr.unsubscribe()};return j((Gr,li)=>{ft++,!Qt&&!Bt&&Cn();const Xr=Ne=null!=Ne?Ne:r();li.add(()=>{ft--,0===ft&&!Qt&&!Bt&&(Me=Tn(dr,U))}),Xr.subscribe(li),ye||(ye=new k({next:Nr=>Xr.next(Nr),error:Nr=>{Qt=!0,Cn(),Me=Tn(Ln,n,Nr),Xr.error(Nr)},complete:()=>{Bt=!0,Cn(),Me=Tn(Ln,S),Xr.complete()}}),on(Gr).subscribe(ye))})(re)}}()))}bootstrap(n,S){if(!this._initStatus.done)throw new Ar(405,"");let U;U=n instanceof s2?n:this._componentFactoryResolver.resolveComponentFactory(n),this.componentTypes.push(U.componentType);const re=function RC(t){return t.isBoundToModule}(U)?void 0:this._injector.get(uf),Me=U.create(Cl.NULL,[],S||U.selector,re),Ne=Me.location.nativeElement,ft=Me.injector.get(Jv,null),Bt=ft&&Me.injector.get(J2);return ft&&Bt&&Bt.registerApplication(Ne,ft),Me.onDestroy(()=>{this.detachView(Me.hostView),e1(this.components,Me),Bt&&Bt.unregisterApplication(Ne)}),this._loadComponent(Me),Me}tick(){if(this._runningTick)throw new Ar(101,"");try{this._runningTick=!0;for(let n of this._views)n.detectChanges()}catch(n){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(n))}finally{this._runningTick=!1}}attachView(n){const S=n;this._views.push(S),S.attachToAppRef(this)}detachView(n){const S=n;e1(this._views,S),S.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n),this._injector.get(Zv,[]).concat(this._bootstrapListeners).forEach(U=>U(n))}ngOnDestroy(){this._views.slice().forEach(n=>n.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(n){return new(n||t)(Ti(Gs),Ti(Cl),Ti(gc),Ti(qd),Ti($d))},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})();function e1(t,r){const n=t.indexOf(r);n>-1&&t.splice(n,1)}let ow=!0,um=(()=>{class t{}return t.__NG_ELEMENT_ID__=UC,t})();function UC(t){return function HC(t,r,n){if(fo(t)&&!n){const S=_s(t.index,r);return new ug(S,S)}return 47&t.type?new ug(r[16],r):null}(Po(),ei(),16==(16&t))}class fw{constructor(){}supports(r){return tg(r)}create(r){return new XC(r)}}const ZC=(t,r)=>r;class XC{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||ZC}forEachItem(r){let n;for(n=this._itHead;null!==n;n=n._next)r(n)}forEachOperation(r){let n=this._itHead,S=this._removalsHead,U=0,re=null;for(;n||S;){const ye=!S||n&&n.currentIndex<dw(S,U,re)?n:S,Me=dw(ye,U,re),Ne=ye.currentIndex;if(ye===S)U--,S=S._nextRemoved;else if(n=n._next,null==ye.previousIndex)U++;else{re||(re=[]);const ft=Me-U,Bt=Ne-U;if(ft!=Bt){for(let Cn=0;Cn<ft;Cn++){const Ln=Cn<re.length?re[Cn]:re[Cn]=0,dr=Ln+Cn;Bt<=dr&&dr<ft&&(re[Cn]=Ln+1)}re[ye.previousIndex]=Bt-ft}}Me!==Ne&&r(ye,Me,Ne)}}forEachPreviousItem(r){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)r(n)}forEachAddedItem(r){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)r(n)}forEachMovedItem(r){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)r(n)}forEachRemovedItem(r){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)r(n)}forEachIdentityChange(r){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)r(n)}diff(r){if(null==r&&(r=[]),!tg(r))throw new Ar(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let U,re,ye,n=this._itHead,S=!1;if(Array.isArray(r)){this.length=r.length;for(let Me=0;Me<this.length;Me++)re=r[Me],ye=this._trackByFn(Me,re),null!==n&&Object.is(n.trackById,ye)?(S&&(n=this._verifyReinsertion(n,re,ye,Me)),Object.is(n.item,re)||this._addIdentityChange(n,re)):(n=this._mismatch(n,re,ye,Me),S=!0),n=n._next}else U=0,function rM(t,r){if(Array.isArray(t))for(let n=0;n<t.length;n++)r(t[n]);else{const n=t[Ld()]();let S;for(;!(S=n.next()).done;)r(S.value)}}(r,Me=>{ye=this._trackByFn(U,Me),null!==n&&Object.is(n.trackById,ye)?(S&&(n=this._verifyReinsertion(n,Me,ye,U)),Object.is(n.item,Me)||this._addIdentityChange(n,Me)):(n=this._mismatch(n,Me,ye,U),S=!0),n=n._next,U++}),this.length=U;return this._truncate(n),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,n,S,U){let re;return null===r?re=this._itTail:(re=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(S,null))?(Object.is(r.item,n)||this._addIdentityChange(r,n),this._reinsertAfter(r,re,U)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(S,U))?(Object.is(r.item,n)||this._addIdentityChange(r,n),this._moveAfter(r,re,U)):r=this._addAfter(new $C(n,S),re,U),r}_verifyReinsertion(r,n,S,U){let re=null===this._unlinkedRecords?null:this._unlinkedRecords.get(S,null);return null!==re?r=this._reinsertAfter(re,r._prev,U):r.currentIndex!=U&&(r.currentIndex=U,this._addToMoves(r,U)),r}_truncate(r){for(;null!==r;){const n=r._next;this._addToRemovals(this._unlink(r)),r=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,n,S){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const U=r._prevRemoved,re=r._nextRemoved;return null===U?this._removalsHead=re:U._nextRemoved=re,null===re?this._removalsTail=U:re._prevRemoved=U,this._insertAfter(r,n,S),this._addToMoves(r,S),r}_moveAfter(r,n,S){return this._unlink(r),this._insertAfter(r,n,S),this._addToMoves(r,S),r}_addAfter(r,n,S){return this._insertAfter(r,n,S),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,n,S){const U=null===n?this._itHead:n._next;return r._next=U,r._prev=n,null===U?this._itTail=r:U._prev=r,null===n?this._itHead=r:n._next=r,null===this._linkedRecords&&(this._linkedRecords=new hw),this._linkedRecords.put(r),r.currentIndex=S,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const n=r._prev,S=r._next;return null===n?this._itHead=S:n._next=S,null===S?this._itTail=n:S._prev=n,r}_addToMoves(r,n){return r.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new hw),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,n){return r.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class $C{constructor(r,n){this.item=r,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class KC{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,n){let S;for(S=this._head;null!==S;S=S._nextDup)if((null===n||n<=S.currentIndex)&&Object.is(S.trackById,r))return S;return null}remove(r){const n=r._prevDup,S=r._nextDup;return null===n?this._head=S:n._nextDup=S,null===S?this._tail=n:S._prevDup=n,null===this._head}}class hw{constructor(){this.map=new Map}put(r){const n=r.trackById;let S=this.map.get(n);S||(S=new KC,this.map.set(n,S)),S.add(r)}get(r,n){const U=this.map.get(r);return U?U.get(r,n):null}remove(r){const n=r.trackById;return this.map.get(n).remove(r)&&this.map.delete(n),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function dw(t,r,n){const S=t.previousIndex;if(null===S)return S;let U=0;return n&&S<n.length&&(U=n[S]),S+r+U}class pw{constructor(){}supports(r){return r instanceof Map||uv(r)}create(){return new JC}}class JC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let n;for(n=this._mapHead;null!==n;n=n._next)r(n)}forEachPreviousItem(r){let n;for(n=this._previousMapHead;null!==n;n=n._nextPrevious)r(n)}forEachChangedItem(r){let n;for(n=this._changesHead;null!==n;n=n._nextChanged)r(n)}forEachAddedItem(r){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)r(n)}forEachRemovedItem(r){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)r(n)}diff(r){if(r){if(!(r instanceof Map||uv(r)))throw new Ar(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let n=this._mapHead;if(this._appendAfter=null,this._forEach(r,(S,U)=>{if(n&&n.key===U)this._maybeAddToChanges(n,S),this._appendAfter=n,n=n._next;else{const re=this._getOrCreateRecordForKey(U,S);n=this._insertBeforeOrAppend(n,re)}}),n){n._prev&&(n._prev._next=null),this._removalsHead=n;for(let S=n;null!==S;S=S._nextRemoved)S===this._mapHead&&(this._mapHead=null),this._records.delete(S.key),S._nextRemoved=S._next,S.previousValue=S.currentValue,S.currentValue=null,S._prev=null,S._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,n){if(r){const S=r._prev;return n._next=r,n._prev=S,r._prev=n,S&&(S._next=n),r===this._mapHead&&(this._mapHead=n),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=n,n._prev=this._appendAfter):this._mapHead=n,this._appendAfter=n,null}_getOrCreateRecordForKey(r,n){if(this._records.has(r)){const U=this._records.get(r);this._maybeAddToChanges(U,n);const re=U._prev,ye=U._next;return re&&(re._next=ye),ye&&(ye._prev=re),U._next=null,U._prev=null,U}const S=new QC(r);return this._records.set(r,S),S.currentValue=n,this._addToAdditions(S),S}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,n){Object.is(n,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=n,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,n){r instanceof Map?r.forEach(n):Object.keys(r).forEach(S=>n(r[S],S))}}class QC{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function gw(){return new kh([new fw])}let kh=(()=>{class t{constructor(n){this.factories=n}static create(n,S){if(null!=S){const U=S.factories.slice();n=n.concat(U)}return new t(n)}static extend(n){return{provide:t,useFactory:S=>t.create(n,S||gw()),deps:[[t,new Mf,new wu]]}}find(n){const S=this.factories.find(U=>U.supports(n));if(null!=S)return S;throw new Ar(901,"")}}return t.\u0275prov=qn({token:t,providedIn:"root",factory:gw}),t})();function mw(){return new ff([new pw])}let ff=(()=>{class t{constructor(n){this.factories=n}static create(n,S){if(S){const U=S.factories.slice();n=n.concat(U)}return new t(n)}static extend(n){return{provide:t,useFactory:S=>t.create(n,S||mw()),deps:[[t,new Mf,new wu]]}}find(n){const S=this.factories.find(re=>re.supports(n));if(S)return S;throw new Ar(901,"")}}return t.\u0275prov=qn({token:t,providedIn:"root",factory:mw}),t})();const e6=[new pw],n6=new kh([new fw]),r6=new ff(e6),i6=tw(null,"core",[{provide:Fu,useValue:"unknown"},{provide:rw,deps:[Cl]},{provide:J2,deps:[]},{provide:Z2,deps:[]}]),u6=[{provide:pg,useClass:pg,deps:[Gs,Cl,gc,qd,$d]},{provide:T4,deps:[Gs],useFactory:function c6(t){let r=[];return t.onStable.subscribe(()=>{for(;r.length;)r.pop()()}),function(n){r.push(n)}}},{provide:$d,useClass:$d,deps:[[new wu,sm]]},{provide:lm,useClass:lm,deps:[]},TC,{provide:kh,useFactory:function a6(){return n6},deps:[]},{provide:ff,useFactory:function o6(){return r6},deps:[]},{provide:Gf,useFactory:function s6(t){return t||function l6(){return"undefined"!=typeof $localize&&$localize.locale||Z0}()},deps:[[new Yu(Gf),new wu,new Mf]]},{provide:X2,useValue:"USD"}];let f6=(()=>{class t{constructor(n){}}return t.\u0275fac=function(n){return new(n||t)(Ti(pg))},t.\u0275mod=Pa({type:t}),t.\u0275inj=tr({providers:u6}),t})(),hm=null;function kc(){return hm}const ul=new Ea("DocumentToken");let Ch=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=qn({token:t,factory:function(){return function g6(){return Ti(yw)}()},providedIn:"platform"}),t})();const m6=new Ea("Location Initialized");let yw=(()=>{class t extends Ch{constructor(n){super(),this._doc=n,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return kc().getBaseHref(this._doc)}onPopState(n){const S=kc().getGlobalEventTarget(this._doc,"window");return S.addEventListener("popstate",n,!1),()=>S.removeEventListener("popstate",n)}onHashChange(n){const S=kc().getGlobalEventTarget(this._doc,"window");return S.addEventListener("hashchange",n,!1),()=>S.removeEventListener("hashchange",n)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(n){this.location.pathname=n}pushState(n,S,U){vw()?this._history.pushState(n,S,U):this.location.hash=U}replaceState(n,S,U){vw()?this._history.replaceState(n,S,U):this.location.hash=U}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}}return t.\u0275fac=function(n){return new(n||t)(Ti(ul))},t.\u0275prov=qn({token:t,factory:function(){return function y6(){return new yw(Ti(ul))}()},providedIn:"platform"}),t})();function vw(){return!!window.history.pushState}function a1(t,r){if(0==t.length)return r;if(0==r.length)return t;let n=0;return t.endsWith("/")&&n++,r.startsWith("/")&&n++,2==n?t+r.substring(1):1==n?t+r:t+"/"+r}function xw(t){const r=t.match(/#|\?|$/),n=r&&r.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function hf(t){return t&&"?"!==t[0]?"?"+t:t}let Kd=(()=>{class t{historyGo(n){throw new Error("Not implemented")}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=qn({token:t,factory:function(){return function v6(t){const r=Ti(ul).location;return new bw(Ti(Ch),r&&r.origin||"")}()},providedIn:"root"}),t})();const o1=new Ea("appBaseHref");let bw=(()=>{class t extends Kd{constructor(n,S){if(super(),this._platformLocation=n,this._removeListenerFns=[],null==S&&(S=this._platformLocation.getBaseHrefFromDOM()),null==S)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=S}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return a1(this._baseHref,n)}path(n=!1){const S=this._platformLocation.pathname+hf(this._platformLocation.search),U=this._platformLocation.hash;return U&&n?`${S}${U}`:S}pushState(n,S,U,re){const ye=this.prepareExternalUrl(U+hf(re));this._platformLocation.pushState(n,S,ye)}replaceState(n,S,U,re){const ye=this.prepareExternalUrl(U+hf(re));this._platformLocation.replaceState(n,S,ye)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var S,U;null===(U=(S=this._platformLocation).historyGo)||void 0===U||U.call(S,n)}}return t.\u0275fac=function(n){return new(n||t)(Ti(Ch),Ti(o1,8))},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})(),x6=(()=>{class t extends Kd{constructor(n,S){super(),this._platformLocation=n,this._baseHref="",this._removeListenerFns=[],null!=S&&(this._baseHref=S)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){let S=this._platformLocation.hash;return null==S&&(S="#"),S.length>0?S.substring(1):S}prepareExternalUrl(n){const S=a1(this._baseHref,n);return S.length>0?"#"+S:S}pushState(n,S,U,re){let ye=this.prepareExternalUrl(U+hf(re));0==ye.length&&(ye=this._platformLocation.pathname),this._platformLocation.pushState(n,S,ye)}replaceState(n,S,U,re){let ye=this.prepareExternalUrl(U+hf(re));0==ye.length&&(ye=this._platformLocation.pathname),this._platformLocation.replaceState(n,S,ye)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(n=0){var S,U;null===(U=(S=this._platformLocation).historyGo)||void 0===U||U.call(S,n)}}return t.\u0275fac=function(n){return new(n||t)(Ti(Ch),Ti(o1,8))},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})(),s1=(()=>{class t{constructor(n,S){this._subject=new aa,this._urlChangeListeners=[],this._platformStrategy=n;const U=this._platformStrategy.getBaseHref();this._platformLocation=S,this._baseHref=xw(_w(U)),this._platformStrategy.onPopState(re=>{this._subject.emit({url:this.path(!0),pop:!0,state:re.state,type:re.type})})}path(n=!1){return this.normalize(this._platformStrategy.path(n))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(n,S=""){return this.path()==this.normalize(n+hf(S))}normalize(n){return t.stripTrailingSlash(function _6(t,r){return t&&r.startsWith(t)?r.substring(t.length):r}(this._baseHref,_w(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._platformStrategy.prepareExternalUrl(n)}go(n,S="",U=null){this._platformStrategy.pushState(U,"",n,S),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+hf(S)),U)}replaceState(n,S="",U=null){this._platformStrategy.replaceState(U,"",n,S),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+hf(S)),U)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(n=0){var S,U;null===(U=(S=this._platformStrategy).historyGo)||void 0===U||U.call(S,n)}onUrlChange(n){this._urlChangeListeners.push(n),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(S=>{this._notifyUrlChangeListeners(S.url,S.state)}))}_notifyUrlChangeListeners(n="",S){this._urlChangeListeners.forEach(U=>U(n,S))}subscribe(n,S,U){return this._subject.subscribe({next:n,error:S,complete:U})}}return t.normalizeQueryParams=hf,t.joinWithSlash=a1,t.stripTrailingSlash=xw,t.\u0275fac=function(n){return new(n||t)(Ti(Kd),Ti(Ch))},t.\u0275prov=qn({token:t,factory:function(){return function b6(){return new s1(Ti(Kd),Ti(Ch))}()},providedIn:"root"}),t})();function _w(t){return t.replace(/\/index.html$/,"")}var cl=(()=>((cl=cl||{})[cl.Zero=0]="Zero",cl[cl.One=1]="One",cl[cl.Two=2]="Two",cl[cl.Few=3]="Few",cl[cl.Many=4]="Many",cl[cl.Other=5]="Other",cl))(),Qs=(()=>((Qs=Qs||{})[Qs.Format=0]="Format",Qs[Qs.Standalone=1]="Standalone",Qs))(),ao=(()=>((ao=ao||{})[ao.Narrow=0]="Narrow",ao[ao.Abbreviated=1]="Abbreviated",ao[ao.Wide=2]="Wide",ao[ao.Short=3]="Short",ao))(),Is=(()=>((Is=Is||{})[Is.Short=0]="Short",Is[Is.Medium=1]="Medium",Is[Is.Long=2]="Long",Is[Is.Full=3]="Full",Is))(),_a=(()=>((_a=_a||{})[_a.Decimal=0]="Decimal",_a[_a.Group=1]="Group",_a[_a.List=2]="List",_a[_a.PercentSign=3]="PercentSign",_a[_a.PlusSign=4]="PlusSign",_a[_a.MinusSign=5]="MinusSign",_a[_a.Exponential=6]="Exponential",_a[_a.SuperscriptingExponent=7]="SuperscriptingExponent",_a[_a.PerMille=8]="PerMille",_a[_a.Infinity=9]="Infinity",_a[_a.NaN=10]="NaN",_a[_a.TimeSeparator=11]="TimeSeparator",_a[_a.CurrencyDecimal=12]="CurrencyDecimal",_a[_a.CurrencyGroup=13]="CurrencyGroup",_a))();function dm(t,r){return Nu(eu(t)[Hi.DateFormat],r)}function pm(t,r){return Nu(eu(t)[Hi.TimeFormat],r)}function gm(t,r){return Nu(eu(t)[Hi.DateTimeFormat],r)}function zu(t,r){const n=eu(t),S=n[Hi.NumberSymbols][r];if(void 0===S){if(r===_a.CurrencyDecimal)return n[Hi.NumberSymbols][_a.Decimal];if(r===_a.CurrencyGroup)return n[Hi.NumberSymbols][_a.Group]}return S}const S6=function O_(t){return eu(t)[Hi.PluralCase]};function Tw(t){if(!t[Hi.ExtraData])throw new Error(`Missing extra locale data for the locale "${t[Hi.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Nu(t,r){for(let n=r;n>-1;n--)if(void 0!==t[n])return t[n];throw new Error("Locale data API: locale data undefined")}function u1(t){const[r,n]=t.split(":");return{hours:+r,minutes:+n}}const O6=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,gg={},R6=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Al=(()=>((Al=Al||{})[Al.Short=0]="Short",Al[Al.ShortGMT=1]="ShortGMT",Al[Al.Long=2]="Long",Al[Al.Extended=3]="Extended",Al))(),Ca=(()=>((Ca=Ca||{})[Ca.FullYear=0]="FullYear",Ca[Ca.Month=1]="Month",Ca[Ca.Date=2]="Date",Ca[Ca.Hours=3]="Hours",Ca[Ca.Minutes=4]="Minutes",Ca[Ca.Seconds=5]="Seconds",Ca[Ca.FractionalSeconds=6]="FractionalSeconds",Ca[Ca.Day=7]="Day",Ca))(),qa=(()=>((qa=qa||{})[qa.DayPeriods=0]="DayPeriods",qa[qa.Days=1]="Days",qa[qa.Months=2]="Months",qa[qa.Eras=3]="Eras",qa))();function Aw(t,r,n,S){let U=function G6(t){if(Cw(t))return t;if("number"==typeof t&&!isNaN(t))return new Date(t);if("string"==typeof t){if(t=t.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(t)){const[U,re=1,ye=1]=t.split("-").map(Me=>+Me);return mm(U,re-1,ye)}const n=parseFloat(t);if(!isNaN(t-n))return new Date(n);let S;if(S=t.match(O6))return function q6(t){const r=new Date(0);let n=0,S=0;const U=t[8]?r.setUTCFullYear:r.setFullYear,re=t[8]?r.setUTCHours:r.setHours;t[9]&&(n=Number(t[9]+t[10]),S=Number(t[9]+t[11])),U.call(r,Number(t[1]),Number(t[2])-1,Number(t[3]));const ye=Number(t[4]||0)-n,Me=Number(t[5]||0)-S,Ne=Number(t[6]||0),ft=Math.floor(1e3*parseFloat("0."+(t[7]||0)));return re.call(r,ye,Me,Ne,ft),r}(S)}const r=new Date(t);if(!Cw(r))throw new Error(`Unable to convert "${t}" into a date`);return r}(t);r=df(n,r)||r;let Me,ye=[];for(;r;){if(Me=R6.exec(r),!Me){ye.push(r);break}{ye=ye.concat(Me.slice(1));const Bt=ye.pop();if(!Bt)break;r=Bt}}let Ne=U.getTimezoneOffset();S&&(Ne=kw(S,Ne),U=function H6(t,r,n){const S=n?-1:1,U=t.getTimezoneOffset();return function U6(t,r){return(t=new Date(t.getTime())).setMinutes(t.getMinutes()+r),t}(t,S*(kw(r,U)-U))}(U,S,!0));let ft="";return ye.forEach(Bt=>{const Qt=function V6(t){if(f1[t])return f1[t];let r;switch(t){case"G":case"GG":case"GGG":r=ss(qa.Eras,ao.Abbreviated);break;case"GGGG":r=ss(qa.Eras,ao.Wide);break;case"GGGGG":r=ss(qa.Eras,ao.Narrow);break;case"y":r=fl(Ca.FullYear,1,0,!1,!0);break;case"yy":r=fl(Ca.FullYear,2,0,!0,!0);break;case"yyy":r=fl(Ca.FullYear,3,0,!1,!0);break;case"yyyy":r=fl(Ca.FullYear,4,0,!1,!0);break;case"Y":r=bm(1);break;case"YY":r=bm(2,!0);break;case"YYY":r=bm(3);break;case"YYYY":r=bm(4);break;case"M":case"L":r=fl(Ca.Month,1,1);break;case"MM":case"LL":r=fl(Ca.Month,2,1);break;case"MMM":r=ss(qa.Months,ao.Abbreviated);break;case"MMMM":r=ss(qa.Months,ao.Wide);break;case"MMMMM":r=ss(qa.Months,ao.Narrow);break;case"LLL":r=ss(qa.Months,ao.Abbreviated,Qs.Standalone);break;case"LLLL":r=ss(qa.Months,ao.Wide,Qs.Standalone);break;case"LLLLL":r=ss(qa.Months,ao.Narrow,Qs.Standalone);break;case"w":r=c1(1);break;case"ww":r=c1(2);break;case"W":r=c1(1,!0);break;case"d":r=fl(Ca.Date,1);break;case"dd":r=fl(Ca.Date,2);break;case"c":case"cc":r=fl(Ca.Day,1);break;case"ccc":r=ss(qa.Days,ao.Abbreviated,Qs.Standalone);break;case"cccc":r=ss(qa.Days,ao.Wide,Qs.Standalone);break;case"ccccc":r=ss(qa.Days,ao.Narrow,Qs.Standalone);break;case"cccccc":r=ss(qa.Days,ao.Short,Qs.Standalone);break;case"E":case"EE":case"EEE":r=ss(qa.Days,ao.Abbreviated);break;case"EEEE":r=ss(qa.Days,ao.Wide);break;case"EEEEE":r=ss(qa.Days,ao.Narrow);break;case"EEEEEE":r=ss(qa.Days,ao.Short);break;case"a":case"aa":case"aaa":r=ss(qa.DayPeriods,ao.Abbreviated);break;case"aaaa":r=ss(qa.DayPeriods,ao.Wide);break;case"aaaaa":r=ss(qa.DayPeriods,ao.Narrow);break;case"b":case"bb":case"bbb":r=ss(qa.DayPeriods,ao.Abbreviated,Qs.Standalone,!0);break;case"bbbb":r=ss(qa.DayPeriods,ao.Wide,Qs.Standalone,!0);break;case"bbbbb":r=ss(qa.DayPeriods,ao.Narrow,Qs.Standalone,!0);break;case"B":case"BB":case"BBB":r=ss(qa.DayPeriods,ao.Abbreviated,Qs.Format,!0);break;case"BBBB":r=ss(qa.DayPeriods,ao.Wide,Qs.Format,!0);break;case"BBBBB":r=ss(qa.DayPeriods,ao.Narrow,Qs.Format,!0);break;case"h":r=fl(Ca.Hours,1,-12);break;case"hh":r=fl(Ca.Hours,2,-12);break;case"H":r=fl(Ca.Hours,1);break;case"HH":r=fl(Ca.Hours,2);break;case"m":r=fl(Ca.Minutes,1);break;case"mm":r=fl(Ca.Minutes,2);break;case"s":r=fl(Ca.Seconds,1);break;case"ss":r=fl(Ca.Seconds,2);break;case"S":r=fl(Ca.FractionalSeconds,1);break;case"SS":r=fl(Ca.FractionalSeconds,2);break;case"SSS":r=fl(Ca.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":r=vm(Al.Short);break;case"ZZZZZ":r=vm(Al.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":r=vm(Al.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":r=vm(Al.Long);break;default:return null}return f1[t]=r,r}(Bt);ft+=Qt?Qt(U,n,Ne):"''"===Bt?"'":Bt.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),ft}function mm(t,r,n){const S=new Date(0);return S.setFullYear(t,r,n),S.setHours(0,0,0),S}function df(t,r){const n=function w6(t){return eu(t)[Hi.LocaleId]}(t);if(gg[n]=gg[n]||{},gg[n][r])return gg[n][r];let S="";switch(r){case"shortDate":S=dm(t,Is.Short);break;case"mediumDate":S=dm(t,Is.Medium);break;case"longDate":S=dm(t,Is.Long);break;case"fullDate":S=dm(t,Is.Full);break;case"shortTime":S=pm(t,Is.Short);break;case"mediumTime":S=pm(t,Is.Medium);break;case"longTime":S=pm(t,Is.Long);break;case"fullTime":S=pm(t,Is.Full);break;case"short":const U=df(t,"shortTime"),re=df(t,"shortDate");S=ym(gm(t,Is.Short),[U,re]);break;case"medium":const ye=df(t,"mediumTime"),Me=df(t,"mediumDate");S=ym(gm(t,Is.Medium),[ye,Me]);break;case"long":const Ne=df(t,"longTime"),ft=df(t,"longDate");S=ym(gm(t,Is.Long),[Ne,ft]);break;case"full":const Bt=df(t,"fullTime"),Qt=df(t,"fullDate");S=ym(gm(t,Is.Full),[Bt,Qt])}return S&&(gg[n][r]=S),S}function ym(t,r){return r&&(t=t.replace(/\{([^}]+)}/g,function(n,S){return null!=r&&S in r?r[S]:n})),t}function lc(t,r,n="-",S,U){let re="";(t<0||U&&t<=0)&&(U?t=1-t:(t=-t,re=n));let ye=String(t);for(;ye.length<r;)ye="0"+ye;return S&&(ye=ye.substr(ye.length-r)),re+ye}function fl(t,r,n=0,S=!1,U=!1){return function(re,ye){let Me=function z6(t,r){switch(t){case Ca.FullYear:return r.getFullYear();case Ca.Month:return r.getMonth();case Ca.Date:return r.getDate();case Ca.Hours:return r.getHours();case Ca.Minutes:return r.getMinutes();case Ca.Seconds:return r.getSeconds();case Ca.FractionalSeconds:return r.getMilliseconds();case Ca.Day:return r.getDay();default:throw new Error(`Unknown DateType value "${t}".`)}}(t,re);if((n>0||Me>-n)&&(Me+=n),t===Ca.Hours)0===Me&&-12===n&&(Me=12);else if(t===Ca.FractionalSeconds)return function F6(t,r){return lc(t,3).substr(0,r)}(Me,r);const Ne=zu(ye,_a.MinusSign);return lc(Me,r,Ne,S,U)}}function ss(t,r,n=Qs.Format,S=!1){return function(U,re){return function N6(t,r,n,S,U,re){switch(n){case qa.Months:return function M6(t,r,n){const S=eu(t),re=Nu([S[Hi.MonthsFormat],S[Hi.MonthsStandalone]],r);return Nu(re,n)}(r,U,S)[t.getMonth()];case qa.Days:return function A6(t,r,n){const S=eu(t),re=Nu([S[Hi.DaysFormat],S[Hi.DaysStandalone]],r);return Nu(re,n)}(r,U,S)[t.getDay()];case qa.DayPeriods:const ye=t.getHours(),Me=t.getMinutes();if(re){const ft=function E6(t){const r=eu(t);return Tw(r),(r[Hi.ExtraData][2]||[]).map(S=>"string"==typeof S?u1(S):[u1(S[0]),u1(S[1])])}(r),Bt=function D6(t,r,n){const S=eu(t);Tw(S);const re=Nu([S[Hi.ExtraData][0],S[Hi.ExtraData][1]],r)||[];return Nu(re,n)||[]}(r,U,S),Qt=ft.findIndex(Cn=>{if(Array.isArray(Cn)){const[Ln,dr]=Cn,Gr=ye>=Ln.hours&&Me>=Ln.minutes,li=ye<dr.hours||ye===dr.hours&&Me<dr.minutes;if(Ln.hours<dr.hours){if(Gr&&li)return!0}else if(Gr||li)return!0}else if(Cn.hours===ye&&Cn.minutes===Me)return!0;return!1});if(-1!==Qt)return Bt[Qt]}return function T6(t,r,n){const S=eu(t),re=Nu([S[Hi.DayPeriodsFormat],S[Hi.DayPeriodsStandalone]],r);return Nu(re,n)}(r,U,S)[ye<12?0:1];case qa.Eras:return function k6(t,r){return Nu(eu(t)[Hi.Eras],r)}(r,S)[t.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${n}`)}}(U,re,t,r,n,S)}}function vm(t){return function(r,n,S){const U=-1*S,re=zu(n,_a.MinusSign),ye=U>0?Math.floor(U/60):Math.ceil(U/60);switch(t){case Al.Short:return(U>=0?"+":"")+lc(ye,2,re)+lc(Math.abs(U%60),2,re);case Al.ShortGMT:return"GMT"+(U>=0?"+":"")+lc(ye,1,re);case Al.Long:return"GMT"+(U>=0?"+":"")+lc(ye,2,re)+":"+lc(Math.abs(U%60),2,re);case Al.Extended:return 0===S?"Z":(U>=0?"+":"")+lc(ye,2,re)+":"+lc(Math.abs(U%60),2,re);default:throw new Error(`Unknown zone width "${t}"`)}}}function Mw(t){return mm(t.getFullYear(),t.getMonth(),t.getDate()+(4-t.getDay()))}function c1(t,r=!1){return function(n,S){let U;if(r){const re=new Date(n.getFullYear(),n.getMonth(),1).getDay()-1,ye=n.getDate();U=1+Math.floor((ye+re)/7)}else{const re=Mw(n),ye=function j6(t){const r=mm(t,0,1).getDay();return mm(t,0,1+(r<=4?4:11)-r)}(re.getFullYear()),Me=re.getTime()-ye.getTime();U=1+Math.round(Me/6048e5)}return lc(U,t,zu(S,_a.MinusSign))}}function bm(t,r=!1){return function(n,S){return lc(Mw(n).getFullYear(),t,zu(S,_a.MinusSign),r)}}const f1={};function kw(t,r){t=t.replace(/:/g,"");const n=Date.parse("Jan 01, 1970 00:00:00 "+t)/6e4;return isNaN(n)?r:n}function Cw(t){return t instanceof Date&&!isNaN(t.valueOf())}class wm{}let nS=(()=>{class t extends wm{constructor(n){super(),this.locale=n}getPluralCategory(n,S){switch(S6(S||this.locale)(n)){case cl.Zero:return"zero";case cl.One:return"one";case cl.Two:return"two";case cl.Few:return"few";case cl.Many:return"many";default:return"other"}}}return t.\u0275fac=function(n){return new(n||t)(Ti(Gf))},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})();function Lw(t,r){r=encodeURIComponent(r);for(const n of t.split(";")){const S=n.indexOf("="),[U,re]=-1==S?[n,""]:[n.slice(0,S),n.slice(S+1)];if(U.trim()===r)return decodeURIComponent(re)}return null}let Jd=(()=>{class t{constructor(n,S,U,re){this._iterableDiffers=n,this._keyValueDiffers=S,this._ngEl=U,this._renderer=re,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(n){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof n?n.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(n){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof n?n.split(/\s+/):n,this._rawClass&&(tg(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const n=this._iterableDiffer.diff(this._rawClass);n&&this._applyIterableChanges(n)}else if(this._keyValueDiffer){const n=this._keyValueDiffer.diff(this._rawClass);n&&this._applyKeyValueChanges(n)}}_applyKeyValueChanges(n){n.forEachAddedItem(S=>this._toggleClass(S.key,S.currentValue)),n.forEachChangedItem(S=>this._toggleClass(S.key,S.currentValue)),n.forEachRemovedItem(S=>{S.previousValue&&this._toggleClass(S.key,!1)})}_applyIterableChanges(n){n.forEachAddedItem(S=>{if("string"!=typeof S.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Un(S.item)}`);this._toggleClass(S.item,!0)}),n.forEachRemovedItem(S=>this._toggleClass(S.item,!1))}_applyClasses(n){n&&(Array.isArray(n)||n instanceof Set?n.forEach(S=>this._toggleClass(S,!0)):Object.keys(n).forEach(S=>this._toggleClass(S,!!n[S])))}_removeClasses(n){n&&(Array.isArray(n)||n instanceof Set?n.forEach(S=>this._toggleClass(S,!1)):Object.keys(n).forEach(S=>this._toggleClass(S,!1)))}_toggleClass(n,S){(n=n.trim())&&n.split(/\s+/g).forEach(U=>{S?this._renderer.addClass(this._ngEl.nativeElement,U):this._renderer.removeClass(this._ngEl.nativeElement,U)})}}return t.\u0275fac=function(n){return new(n||t)(Jn(kh),Jn(ff),Jn(io),Jn(ac))},t.\u0275dir=ai({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class iS{constructor(r,n,S,U){this.$implicit=r,this.ngForOf=n,this.index=S,this.count=U}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Sh=(()=>{class t{constructor(n,S,U){this._viewContainer=n,this._template=S,this._differs=U,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const S=this._viewContainer;n.forEachOperation((U,re,ye)=>{if(null==U.previousIndex)S.createEmbeddedView(this._template,new iS(U.item,this._ngForOf,-1,-1),null===ye?void 0:ye);else if(null==ye)S.remove(null===re?void 0:re);else if(null!==re){const Me=S.get(re);S.move(Me,ye),Iw(Me,U)}});for(let U=0,re=S.length;U<re;U++){const Me=S.get(U).context;Me.index=U,Me.count=re,Me.ngForOf=this._ngForOf}n.forEachIdentityChange(U=>{Iw(S.get(U.currentIndex),U)})}static ngTemplateContextGuard(n,S){return!0}}return t.\u0275fac=function(n){return new(n||t)(Jn(oc),Jn(cf),Jn(kh))},t.\u0275dir=ai({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();function Iw(t,r){t.context.$implicit=r.item}let m1=(()=>{class t{constructor(n,S){this._viewContainer=n,this._context=new aS,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=S}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Pw("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Pw("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,S){return!0}}return t.\u0275fac=function(n){return new(n||t)(Jn(oc),Jn(cf))},t.\u0275dir=ai({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class aS{constructor(){this.$implicit=null,this.ngIf=null}}function Pw(t,r){if(r&&!r.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Un(r)}'.`)}let Tm=(()=>{class t{constructor(n,S,U){this._ngEl=n,this._differs=S,this._renderer=U,this._ngStyle=null,this._differ=null}set ngStyle(n){this._ngStyle=n,!this._differ&&n&&(this._differ=this._differs.find(n).create())}ngDoCheck(){if(this._differ){const n=this._differ.diff(this._ngStyle);n&&this._applyChanges(n)}}_setStyle(n,S){const[U,re]=n.split(".");null!=(S=null!=S&&re?`${S}${re}`:S)?this._renderer.setStyle(this._ngEl.nativeElement,U,S):this._renderer.removeStyle(this._ngEl.nativeElement,U)}_applyChanges(n){n.forEachRemovedItem(S=>this._setStyle(S.key,null)),n.forEachAddedItem(S=>this._setStyle(S.key,S.currentValue)),n.forEachChangedItem(S=>this._setStyle(S.key,S.currentValue))}}return t.\u0275fac=function(n){return new(n||t)(Jn(io),Jn(ff),Jn(ac))},t.\u0275dir=ai({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})(),Eh=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Pa({type:t}),t.\u0275inj=tr({providers:[{provide:wm,useClass:nS}]}),t})();const Fw="browser";function Qd(t){return t===Fw}function ep(t){return"server"===t}let OS=(()=>{class t{}return t.\u0275prov=qn({token:t,providedIn:"root",factory:()=>new RS(Ti(ul),window)}),t})();class RS{constructor(r,n){this.document=r,this.window=n,this.offset=()=>[0,0]}setOffset(r){this.offset=Array.isArray(r)?()=>r:r}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(r){this.supportsScrolling()&&this.window.scrollTo(r[0],r[1])}scrollToAnchor(r){if(!this.supportsScrolling())return;const n=function FS(t,r){const n=t.getElementById(r)||t.getElementsByName(r)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const S=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let U=S.currentNode;for(;U;){const re=U.shadowRoot;if(re){const ye=re.getElementById(r)||re.querySelector(`[name="${r}"]`);if(ye)return ye}U=S.nextNode()}}return null}(this.document,r);n&&(this.scrollToElement(n),n.focus())}setHistoryScrollRestoration(r){if(this.supportScrollRestoration()){const n=this.window.history;n&&n.scrollRestoration&&(n.scrollRestoration=r)}}scrollToElement(r){const n=r.getBoundingClientRect(),S=n.left+this.window.pageXOffset,U=n.top+this.window.pageYOffset,re=this.offset();this.window.scrollTo(S-re[0],U-re[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const r=zw(this.window.history)||zw(Object.getPrototypeOf(this.window.history));return!(!r||!r.writable&&!r.set)}catch(r){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(r){return!1}}}function zw(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class Nw{}class _1 extends class zS extends class p6{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function d6(t){hm||(hm=t)}(new _1)}onAndCancel(r,n,S){return r.addEventListener(n,S,!1),()=>{r.removeEventListener(n,S,!1)}}dispatchEvent(r,n){r.dispatchEvent(n)}remove(r){r.parentNode&&r.parentNode.removeChild(r)}createElement(r,n){return(n=n||this.getDefaultDocument()).createElement(r)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(r){return r.nodeType===Node.ELEMENT_NODE}isShadowRoot(r){return r instanceof DocumentFragment}getGlobalEventTarget(r,n){return"window"===n?window:"document"===n?r:"body"===n?r.body:null}getBaseHref(r){const n=function NS(){return yg=yg||document.querySelector("base"),yg?yg.getAttribute("href"):null}();return null==n?null:function BS(t){Am=Am||document.createElement("a"),Am.setAttribute("href",t);const r=Am.pathname;return"/"===r.charAt(0)?r:`/${r}`}(n)}resetBaseElement(){yg=null}getUserAgent(){return window.navigator.userAgent}getCookie(r){return Lw(document.cookie,r)}}let Am,yg=null;const Bw=new Ea("TRANSITION_ID"),VS=[{provide:sm,useFactory:function jS(t,r,n){return()=>{n.get($d).donePromise.then(()=>{const S=kc(),U=r.querySelectorAll(`style[ng-transition="${t}"]`);for(let re=0;re<U.length;re++)S.remove(U[re])})}},deps:[Bw,ul,Cl],multi:!0}];class w1{static init(){!function PC(t){Qv=t}(new w1)}addToWindow(r){sa.getAngularTestability=(S,U=!0)=>{const re=r.findTestabilityInTree(S,U);if(null==re)throw new Error("Could not find testability for element.");return re},sa.getAllAngularTestabilities=()=>r.getAllTestabilities(),sa.getAllAngularRootElements=()=>r.getAllRootElements(),sa.frameworkStabilizers||(sa.frameworkStabilizers=[]),sa.frameworkStabilizers.push(S=>{const U=sa.getAllAngularTestabilities();let re=U.length,ye=!1;const Me=function(Ne){ye=ye||Ne,re--,0==re&&S(ye)};U.forEach(function(Ne){Ne.whenStable(Me)})})}findTestabilityInTree(r,n,S){if(null==n)return null;const U=r.getTestability(n);return null!=U?U:S?kc().isShadowRoot(n)?this.findTestabilityInTree(r,n.host,!0):this.findTestabilityInTree(r,n.parentElement,!0):null}}let US=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})();const Mm=new Ea("EventManagerPlugins");let km=(()=>{class t{constructor(n,S){this._zone=S,this._eventNameToPlugin=new Map,n.forEach(U=>U.manager=this),this._plugins=n.slice().reverse()}addEventListener(n,S,U){return this._findPluginFor(S).addEventListener(n,S,U)}addGlobalEventListener(n,S,U){return this._findPluginFor(S).addGlobalEventListener(n,S,U)}getZone(){return this._zone}_findPluginFor(n){const S=this._eventNameToPlugin.get(n);if(S)return S;const U=this._plugins;for(let re=0;re<U.length;re++){const ye=U[re];if(ye.supports(n))return this._eventNameToPlugin.set(n,ye),ye}throw new Error(`No event manager plugin found for event ${n}`)}}return t.\u0275fac=function(n){return new(n||t)(Ti(Mm),Ti(Gs))},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})();class jw{constructor(r){this._doc=r}addGlobalEventListener(r,n,S){const U=kc().getGlobalEventTarget(this._doc,r);if(!U)throw new Error(`Unsupported event target ${U} for event ${n}`);return this.addEventListener(U,n,S)}}let Vw=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(n){const S=new Set;n.forEach(U=>{this._stylesSet.has(U)||(this._stylesSet.add(U),S.add(U))}),this.onStylesAdded(S)}onStylesAdded(n){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})(),vg=(()=>{class t extends Vw{constructor(n){super(),this._doc=n,this._hostNodes=new Map,this._hostNodes.set(n.head,[])}_addStylesToHost(n,S,U){n.forEach(re=>{const ye=this._doc.createElement("style");ye.textContent=re,U.push(S.appendChild(ye))})}addHost(n){const S=[];this._addStylesToHost(this._stylesSet,n,S),this._hostNodes.set(n,S)}removeHost(n){const S=this._hostNodes.get(n);S&&S.forEach(Uw),this._hostNodes.delete(n)}onStylesAdded(n){this._hostNodes.forEach((S,U)=>{this._addStylesToHost(n,U,S)})}ngOnDestroy(){this._hostNodes.forEach(n=>n.forEach(Uw))}}return t.\u0275fac=function(n){return new(n||t)(Ti(ul))},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})();function Uw(t){kc().remove(t)}const T1={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},A1=/%COMP%/g;function Cm(t,r,n){for(let S=0;S<r.length;S++){let U=r[S];Array.isArray(U)?Cm(t,U,n):(U=U.replace(A1,t),n.push(U))}return n}function qw(t){return r=>{if("__ngUnwrap__"===r)return t;!1===t(r)&&(r.preventDefault(),r.returnValue=!1)}}let M1=(()=>{class t{constructor(n,S,U){this.eventManager=n,this.sharedStylesHost=S,this.appId=U,this.rendererByCompId=new Map,this.defaultRenderer=new k1(n)}createRenderer(n,S){if(!n||!S)return this.defaultRenderer;switch(S.encapsulation){case yo.Emulated:{let U=this.rendererByCompId.get(S.id);return U||(U=new ZS(this.eventManager,this.sharedStylesHost,S,this.appId),this.rendererByCompId.set(S.id,U)),U.applyToHost(n),U}case 1:case yo.ShadowDom:return new XS(this.eventManager,this.sharedStylesHost,n,S);default:if(!this.rendererByCompId.has(S.id)){const U=Cm(S.id,S.styles,[]);this.sharedStylesHost.addStyles(U),this.rendererByCompId.set(S.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(n){return new(n||t)(Ti(km),Ti(vg),Ti(dg))},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})();class k1{constructor(r){this.eventManager=r,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(r,n){return n?document.createElementNS(T1[n]||n,r):document.createElement(r)}createComment(r){return document.createComment(r)}createText(r){return document.createTextNode(r)}appendChild(r,n){r.appendChild(n)}insertBefore(r,n,S){r&&r.insertBefore(n,S)}removeChild(r,n){r&&r.removeChild(n)}selectRootElement(r,n){let S="string"==typeof r?document.querySelector(r):r;if(!S)throw new Error(`The selector "${r}" did not match any elements`);return n||(S.textContent=""),S}parentNode(r){return r.parentNode}nextSibling(r){return r.nextSibling}setAttribute(r,n,S,U){if(U){n=U+":"+n;const re=T1[U];re?r.setAttributeNS(re,n,S):r.setAttribute(n,S)}else r.setAttribute(n,S)}removeAttribute(r,n,S){if(S){const U=T1[S];U?r.removeAttributeNS(U,n):r.removeAttribute(`${S}:${n}`)}else r.removeAttribute(n)}addClass(r,n){r.classList.add(n)}removeClass(r,n){r.classList.remove(n)}setStyle(r,n,S,U){U&(Es.DashCase|Es.Important)?r.style.setProperty(n,S,U&Es.Important?"important":""):r.style[n]=S}removeStyle(r,n,S){S&Es.DashCase?r.style.removeProperty(n):r.style[n]=""}setProperty(r,n,S){r[n]=S}setValue(r,n){r.nodeValue=n}listen(r,n,S){return"string"==typeof r?this.eventManager.addGlobalEventListener(r,n,qw(S)):this.eventManager.addEventListener(r,n,qw(S))}}class ZS extends k1{constructor(r,n,S,U){super(r),this.component=S;const re=Cm(U+"-"+S.id,S.styles,[]);n.addStyles(re),this.contentAttr=function qS(t){return"_ngcontent-%COMP%".replace(A1,t)}(U+"-"+S.id),this.hostAttr=function WS(t){return"_nghost-%COMP%".replace(A1,t)}(U+"-"+S.id)}applyToHost(r){super.setAttribute(r,this.hostAttr,"")}createElement(r,n){const S=super.createElement(r,n);return super.setAttribute(S,this.contentAttr,""),S}}class XS extends k1{constructor(r,n,S,U){super(r),this.sharedStylesHost=n,this.hostEl=S,this.shadowRoot=S.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const re=Cm(U.id,U.styles,[]);for(let ye=0;ye<re.length;ye++){const Me=document.createElement("style");Me.textContent=re[ye],this.shadowRoot.appendChild(Me)}}nodeOrShadowRoot(r){return r===this.hostEl?this.shadowRoot:r}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(r,n){return super.appendChild(this.nodeOrShadowRoot(r),n)}insertBefore(r,n,S){return super.insertBefore(this.nodeOrShadowRoot(r),n,S)}removeChild(r,n){return super.removeChild(this.nodeOrShadowRoot(r),n)}parentNode(r){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(r)))}}let $S=(()=>{class t extends jw{constructor(n){super(n)}supports(n){return!0}addEventListener(n,S,U){return n.addEventListener(S,U,!1),()=>this.removeEventListener(n,S,U)}removeEventListener(n,S,U){return n.removeEventListener(S,U)}}return t.\u0275fac=function(n){return new(n||t)(Ti(ul))},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})();const Yw=["alt","control","meta","shift"],JS={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Zw={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},QS={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let eE=(()=>{class t extends jw{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,S,U){const re=t.parseEventName(S),ye=t.eventCallback(re.fullKey,U,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>kc().onAndCancel(n,re.domEventName,ye))}static parseEventName(n){const S=n.toLowerCase().split("."),U=S.shift();if(0===S.length||"keydown"!==U&&"keyup"!==U)return null;const re=t._normalizeKey(S.pop());let ye="";if(Yw.forEach(Ne=>{const ft=S.indexOf(Ne);ft>-1&&(S.splice(ft,1),ye+=Ne+".")}),ye+=re,0!=S.length||0===re.length)return null;const Me={};return Me.domEventName=U,Me.fullKey=ye,Me}static getEventFullKey(n){let S="",U=function tE(t){let r=t.key;if(null==r){if(r=t.keyIdentifier,null==r)return"Unidentified";r.startsWith("U+")&&(r=String.fromCharCode(parseInt(r.substring(2),16)),3===t.location&&Zw.hasOwnProperty(r)&&(r=Zw[r]))}return JS[r]||r}(n);return U=U.toLowerCase()," "===U?U="space":"."===U&&(U="dot"),Yw.forEach(re=>{re!=U&&QS[re](n)&&(S+=re+".")}),S+=U,S}static eventCallback(n,S,U){return re=>{t.getEventFullKey(re)===n&&U.runGuarded(()=>S(re))}}static _normalizeKey(n){return"esc"===n?"escape":n}}return t.\u0275fac=function(n){return new(n||t)(Ti(ul))},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})();const aE=tw(i6,"browser",[{provide:Fu,useValue:Fw},{provide:Y2,useValue:function nE(){_1.makeCurrent(),w1.init()},multi:!0},{provide:ul,useFactory:function iE(){return function Ji(t){fs=t}(document),document},deps:[]}]),oE=[{provide:rv,useValue:"root"},{provide:gc,useFactory:function rE(){return new gc},deps:[]},{provide:Mm,useClass:$S,multi:!0,deps:[ul,Gs,Fu]},{provide:Mm,useClass:eE,multi:!0,deps:[ul]},{provide:M1,useClass:M1,deps:[km,vg,dg]},{provide:u2,useExisting:M1},{provide:Vw,useExisting:vg},{provide:vg,useClass:vg,deps:[ul]},{provide:Jv,useClass:Jv,deps:[Gs]},{provide:km,useClass:km,deps:[Mm,Gs]},{provide:Nw,useClass:US,deps:[]}];let sE=(()=>{class t{constructor(n){if(n)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(n){return{ngModule:t,providers:[{provide:dg,useValue:n.appId},{provide:Bw,useExisting:dg},VS]}}}return t.\u0275fac=function(n){return new(n||t)(Ti(t,12))},t.\u0275mod=Pa({type:t}),t.\u0275inj=tr({providers:oE,imports:[Eh,f6]}),t})();function Va(...t){return on(t,Tt(t))}function tp(t,r){return ae(r)?gt(t,r,1):gt(t,1)}function Cc(t,r){return j((n,S)=>{let U=0;n.subscribe(G(S,re=>t.call(r,re,U++)&&S.next(re)))})}"undefined"!=typeof window&&window;class Qw{}class e3{}class pf{constructor(r){this.normalizedNames=new Map,this.lazyUpdate=null,r?this.lazyInit="string"==typeof r?()=>{this.headers=new Map,r.split("\n").forEach(n=>{const S=n.indexOf(":");if(S>0){const U=n.slice(0,S),re=U.toLowerCase(),ye=n.slice(S+1).trim();this.maybeSetNormalizedName(U,re),this.headers.has(re)?this.headers.get(re).push(ye):this.headers.set(re,[ye])}})}:()=>{this.headers=new Map,Object.keys(r).forEach(n=>{let S=r[n];const U=n.toLowerCase();"string"==typeof S&&(S=[S]),S.length>0&&(this.headers.set(U,S),this.maybeSetNormalizedName(n,U))})}:this.headers=new Map}has(r){return this.init(),this.headers.has(r.toLowerCase())}get(r){this.init();const n=this.headers.get(r.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(r){return this.init(),this.headers.get(r.toLowerCase())||null}append(r,n){return this.clone({name:r,value:n,op:"a"})}set(r,n){return this.clone({name:r,value:n,op:"s"})}delete(r,n){return this.clone({name:r,value:n,op:"d"})}maybeSetNormalizedName(r,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,r)}init(){this.lazyInit&&(this.lazyInit instanceof pf?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(r=>this.applyUpdate(r)),this.lazyUpdate=null))}copyFrom(r){r.init(),Array.from(r.headers.keys()).forEach(n=>{this.headers.set(n,r.headers.get(n)),this.normalizedNames.set(n,r.normalizedNames.get(n))})}clone(r){const n=new pf;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof pf?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([r]),n}applyUpdate(r){const n=r.name.toLowerCase();switch(r.op){case"a":case"s":let S=r.value;if("string"==typeof S&&(S=[S]),0===S.length)return;this.maybeSetNormalizedName(r.name,n);const U=("a"===r.op?this.headers.get(n):void 0)||[];U.push(...S),this.headers.set(n,U);break;case"d":const re=r.value;if(re){let ye=this.headers.get(n);if(!ye)return;ye=ye.filter(Me=>-1===re.indexOf(Me)),0===ye.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,ye)}else this.headers.delete(n),this.normalizedNames.delete(n)}}forEach(r){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>r(this.normalizedNames.get(n),this.headers.get(n)))}}class vE{encodeKey(r){return t3(r)}encodeValue(r){return t3(r)}decodeKey(r){return decodeURIComponent(r)}decodeValue(r){return decodeURIComponent(r)}}const bE=/%(\d[a-f0-9])/gi,_E={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function t3(t){return encodeURIComponent(t).replace(bE,(r,n)=>{var S;return null!==(S=_E[n])&&void 0!==S?S:r})}function n3(t){return`${t}`}class Wf{constructor(r={}){if(this.updates=null,this.cloneFrom=null,this.encoder=r.encoder||new vE,r.fromString){if(r.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function xE(t,r){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(U=>{const re=U.indexOf("="),[ye,Me]=-1==re?[r.decodeKey(U),""]:[r.decodeKey(U.slice(0,re)),r.decodeValue(U.slice(re+1))],Ne=n.get(ye)||[];Ne.push(Me),n.set(ye,Ne)}),n}(r.fromString,this.encoder)}else r.fromObject?(this.map=new Map,Object.keys(r.fromObject).forEach(n=>{const S=r.fromObject[n];this.map.set(n,Array.isArray(S)?S:[S])})):this.map=null}has(r){return this.init(),this.map.has(r)}get(r){this.init();const n=this.map.get(r);return n?n[0]:null}getAll(r){return this.init(),this.map.get(r)||null}keys(){return this.init(),Array.from(this.map.keys())}append(r,n){return this.clone({param:r,value:n,op:"a"})}appendAll(r){const n=[];return Object.keys(r).forEach(S=>{const U=r[S];Array.isArray(U)?U.forEach(re=>{n.push({param:S,value:re,op:"a"})}):n.push({param:S,value:U,op:"a"})}),this.clone(n)}set(r,n){return this.clone({param:r,value:n,op:"s"})}delete(r,n){return this.clone({param:r,value:n,op:"d"})}toString(){return this.init(),this.keys().map(r=>{const n=this.encoder.encodeKey(r);return this.map.get(r).map(S=>n+"="+this.encoder.encodeValue(S)).join("&")}).filter(r=>""!==r).join("&")}clone(r){const n=new Wf({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(r),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(r=>this.map.set(r,this.cloneFrom.map.get(r))),this.updates.forEach(r=>{switch(r.op){case"a":case"s":const n=("a"===r.op?this.map.get(r.param):void 0)||[];n.push(n3(r.value)),this.map.set(r.param,n);break;case"d":if(void 0===r.value){this.map.delete(r.param);break}{let S=this.map.get(r.param)||[];const U=S.indexOf(n3(r.value));-1!==U&&S.splice(U,1),S.length>0?this.map.set(r.param,S):this.map.delete(r.param)}}}),this.cloneFrom=this.updates=null)}}class wE{constructor(){this.map=new Map}set(r,n){return this.map.set(r,n),this}get(r){return this.map.has(r)||this.map.set(r,r.defaultValue()),this.map.get(r)}delete(r){return this.map.delete(r),this}has(r){return this.map.has(r)}keys(){return this.map.keys()}}function r3(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function i3(t){return"undefined"!=typeof Blob&&t instanceof Blob}function a3(t){return"undefined"!=typeof FormData&&t instanceof FormData}class xg{constructor(r,n,S,U){let re;if(this.url=n,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=r.toUpperCase(),function TE(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||U?(this.body=void 0!==S?S:null,re=U):re=S,re&&(this.reportProgress=!!re.reportProgress,this.withCredentials=!!re.withCredentials,re.responseType&&(this.responseType=re.responseType),re.headers&&(this.headers=re.headers),re.context&&(this.context=re.context),re.params&&(this.params=re.params)),this.headers||(this.headers=new pf),this.context||(this.context=new wE),this.params){const ye=this.params.toString();if(0===ye.length)this.urlWithParams=n;else{const Me=n.indexOf("?");this.urlWithParams=n+(-1===Me?"?":Me<n.length-1?"&":"")+ye}}else this.params=new Wf,this.urlWithParams=n}serializeBody(){return null===this.body?null:r3(this.body)||i3(this.body)||a3(this.body)||function AE(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Wf?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||a3(this.body)?null:i3(this.body)?this.body.type||null:r3(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Wf?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(r={}){var n;const S=r.method||this.method,U=r.url||this.url,re=r.responseType||this.responseType,ye=void 0!==r.body?r.body:this.body,Me=void 0!==r.withCredentials?r.withCredentials:this.withCredentials,Ne=void 0!==r.reportProgress?r.reportProgress:this.reportProgress;let ft=r.headers||this.headers,Bt=r.params||this.params;const Qt=null!==(n=r.context)&&void 0!==n?n:this.context;return void 0!==r.setHeaders&&(ft=Object.keys(r.setHeaders).reduce((Cn,Ln)=>Cn.set(Ln,r.setHeaders[Ln]),ft)),r.setParams&&(Bt=Object.keys(r.setParams).reduce((Cn,Ln)=>Cn.set(Ln,r.setParams[Ln]),Bt)),new xg(S,U,ye,{params:Bt,headers:ft,context:Qt,reportProgress:Ne,responseType:re,withCredentials:Me})}}var hl=(()=>((hl=hl||{})[hl.Sent=0]="Sent",hl[hl.UploadProgress=1]="UploadProgress",hl[hl.ResponseHeader=2]="ResponseHeader",hl[hl.DownloadProgress=3]="DownloadProgress",hl[hl.Response=4]="Response",hl[hl.User=5]="User",hl))();class S1{constructor(r,n=200,S="OK"){this.headers=r.headers||new pf,this.status=void 0!==r.status?r.status:n,this.statusText=r.statusText||S,this.url=r.url||null,this.ok=this.status>=200&&this.status<300}}class E1 extends S1{constructor(r={}){super(r),this.type=hl.ResponseHeader}clone(r={}){return new E1({headers:r.headers||this.headers,status:void 0!==r.status?r.status:this.status,statusText:r.statusText||this.statusText,url:r.url||this.url||void 0})}}class Sm extends S1{constructor(r={}){super(r),this.type=hl.Response,this.body=void 0!==r.body?r.body:null}clone(r={}){return new Sm({body:void 0!==r.body?r.body:this.body,headers:r.headers||this.headers,status:void 0!==r.status?r.status:this.status,statusText:r.statusText||this.statusText,url:r.url||this.url||void 0})}}class o3 extends S1{constructor(r){super(r,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${r.url||"(unknown url)"}`:`Http failure response for ${r.url||"(unknown url)"}: ${r.status} ${r.statusText}`,this.error=r.error||null}}function D1(t,r){return{body:r,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let s3=(()=>{class t{constructor(n){this.handler=n}request(n,S,U={}){let re;if(n instanceof xg)re=n;else{let Ne,ft;Ne=U.headers instanceof pf?U.headers:new pf(U.headers),U.params&&(ft=U.params instanceof Wf?U.params:new Wf({fromObject:U.params})),re=new xg(n,S,void 0!==U.body?U.body:null,{headers:Ne,context:U.context,params:ft,reportProgress:U.reportProgress,responseType:U.responseType||"json",withCredentials:U.withCredentials})}const ye=Va(re).pipe(tp(Ne=>this.handler.handle(Ne)));if(n instanceof xg||"events"===U.observe)return ye;const Me=ye.pipe(Cc(Ne=>Ne instanceof Sm));switch(U.observe||"body"){case"body":switch(re.responseType){case"arraybuffer":return Me.pipe(ie(Ne=>{if(null!==Ne.body&&!(Ne.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return Ne.body}));case"blob":return Me.pipe(ie(Ne=>{if(null!==Ne.body&&!(Ne.body instanceof Blob))throw new Error("Response is not a Blob.");return Ne.body}));case"text":return Me.pipe(ie(Ne=>{if(null!==Ne.body&&"string"!=typeof Ne.body)throw new Error("Response is not a string.");return Ne.body}));default:return Me.pipe(ie(Ne=>Ne.body))}case"response":return Me;default:throw new Error(`Unreachable: unhandled observe type ${U.observe}}`)}}delete(n,S={}){return this.request("DELETE",n,S)}get(n,S={}){return this.request("GET",n,S)}head(n,S={}){return this.request("HEAD",n,S)}jsonp(n,S){return this.request("JSONP",n,{params:(new Wf).append(S,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,S={}){return this.request("OPTIONS",n,S)}patch(n,S,U={}){return this.request("PATCH",n,D1(U,S))}post(n,S,U={}){return this.request("POST",n,D1(U,S))}put(n,S,U={}){return this.request("PUT",n,D1(U,S))}}return t.\u0275fac=function(n){return new(n||t)(Ti(Qw))},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})();class l3{constructor(r,n){this.next=r,this.interceptor=n}handle(r){return this.interceptor.intercept(r,this.next)}}const u3=new Ea("HTTP_INTERCEPTORS");let ME=(()=>{class t{intercept(n,S){return S.handle(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})();const kE=/^\)\]\}',?\n/;let c3=(()=>{class t{constructor(n){this.xhrFactory=n}handle(n){if("JSONP"===n.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new V(S=>{const U=this.xhrFactory.build();if(U.open(n.method,n.urlWithParams),n.withCredentials&&(U.withCredentials=!0),n.headers.forEach((Ln,dr)=>U.setRequestHeader(Ln,dr.join(","))),n.headers.has("Accept")||U.setRequestHeader("Accept","application/json, text/plain, */*"),!n.headers.has("Content-Type")){const Ln=n.detectContentTypeHeader();null!==Ln&&U.setRequestHeader("Content-Type",Ln)}if(n.responseType){const Ln=n.responseType.toLowerCase();U.responseType="json"!==Ln?Ln:"text"}const re=n.serializeBody();let ye=null;const Me=()=>{if(null!==ye)return ye;const Ln=U.statusText||"OK",dr=new pf(U.getAllResponseHeaders()),Gr=function CE(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(U)||n.url;return ye=new E1({headers:dr,status:U.status,statusText:Ln,url:Gr}),ye},Ne=()=>{let{headers:Ln,status:dr,statusText:Gr,url:li}=Me(),Xr=null;204!==dr&&(Xr=void 0===U.response?U.responseText:U.response),0===dr&&(dr=Xr?200:0);let Nr=dr>=200&&dr<300;if("json"===n.responseType&&"string"==typeof Xr){const Gi=Xr;Xr=Xr.replace(kE,"");try{Xr=""!==Xr?JSON.parse(Xr):null}catch(Ma){Xr=Gi,Nr&&(Nr=!1,Xr={error:Ma,text:Xr})}}Nr?(S.next(new Sm({body:Xr,headers:Ln,status:dr,statusText:Gr,url:li||void 0})),S.complete()):S.error(new o3({error:Xr,headers:Ln,status:dr,statusText:Gr,url:li||void 0}))},ft=Ln=>{const{url:dr}=Me(),Gr=new o3({error:Ln,status:U.status||0,statusText:U.statusText||"Unknown Error",url:dr||void 0});S.error(Gr)};let Bt=!1;const Qt=Ln=>{Bt||(S.next(Me()),Bt=!0);let dr={type:hl.DownloadProgress,loaded:Ln.loaded};Ln.lengthComputable&&(dr.total=Ln.total),"text"===n.responseType&&!!U.responseText&&(dr.partialText=U.responseText),S.next(dr)},Cn=Ln=>{let dr={type:hl.UploadProgress,loaded:Ln.loaded};Ln.lengthComputable&&(dr.total=Ln.total),S.next(dr)};return U.addEventListener("load",Ne),U.addEventListener("error",ft),U.addEventListener("timeout",ft),U.addEventListener("abort",ft),n.reportProgress&&(U.addEventListener("progress",Qt),null!==re&&U.upload&&U.upload.addEventListener("progress",Cn)),U.send(re),S.next({type:hl.Sent}),()=>{U.removeEventListener("error",ft),U.removeEventListener("abort",ft),U.removeEventListener("load",Ne),U.removeEventListener("timeout",ft),n.reportProgress&&(U.removeEventListener("progress",Qt),null!==re&&U.upload&&U.upload.removeEventListener("progress",Cn)),U.readyState!==U.DONE&&U.abort()}})}}return t.\u0275fac=function(n){return new(n||t)(Ti(Nw))},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})();const L1=new Ea("XSRF_COOKIE_NAME"),I1=new Ea("XSRF_HEADER_NAME");class f3{}let SE=(()=>{class t{constructor(n,S,U){this.doc=n,this.platform=S,this.cookieName=U,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Lw(n,this.cookieName),this.lastCookieString=n),this.lastToken}}return t.\u0275fac=function(n){return new(n||t)(Ti(ul),Ti(Fu),Ti(L1))},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})(),P1=(()=>{class t{constructor(n,S){this.tokenService=n,this.headerName=S}intercept(n,S){const U=n.url.toLowerCase();if("GET"===n.method||"HEAD"===n.method||U.startsWith("http://")||U.startsWith("https://"))return S.handle(n);const re=this.tokenService.getToken();return null!==re&&!n.headers.has(this.headerName)&&(n=n.clone({headers:n.headers.set(this.headerName,re)})),S.handle(n)}}return t.\u0275fac=function(n){return new(n||t)(Ti(f3),Ti(I1))},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})(),EE=(()=>{class t{constructor(n,S){this.backend=n,this.injector=S,this.chain=null}handle(n){if(null===this.chain){const S=this.injector.get(u3,[]);this.chain=S.reduceRight((U,re)=>new l3(U,re),this.backend)}return this.chain.handle(n)}}return t.\u0275fac=function(n){return new(n||t)(Ti(e3),Ti(Cl))},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})(),DE=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:P1,useClass:ME}]}}static withOptions(n={}){return{ngModule:t,providers:[n.cookieName?{provide:L1,useValue:n.cookieName}:[],n.headerName?{provide:I1,useValue:n.headerName}:[]]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Pa({type:t}),t.\u0275inj=tr({providers:[P1,{provide:u3,useExisting:P1,multi:!0},{provide:f3,useClass:SE},{provide:L1,useValue:"XSRF-TOKEN"},{provide:I1,useValue:"X-XSRF-TOKEN"}]}),t})(),h3=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Pa({type:t}),t.\u0275inj=tr({providers:[s3,{provide:Qw,useClass:EE},c3,{provide:e3,useExisting:c3}],imports:[[DE.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})();class Bu extends ${constructor(r){super(),this._value=r}get value(){return this.getValue()}_subscribe(r){const n=super._subscribe(r);return!n.closed&&r.next(this._value),n}getValue(){const{hasError:r,thrownError:n,_value:S}=this;if(r)throw n;return this._throwIfClosed(),S}next(r){super.next(this._value=r)}}function d3(t){for(let r in t){let n=t[r]||"";switch(r){case"display":t.display="flex"===n?["-webkit-flex","flex"]:"inline-flex"===n?["-webkit-inline-flex","inline-flex"]:n;break;case"align-items":case"align-self":case"align-content":case"flex":case"flex-basis":case"flex-flow":case"flex-grow":case"flex-shrink":case"flex-wrap":case"justify-content":t["-webkit-"+r]=n;break;case"flex-direction":n=n||"row",t["-webkit-flex-direction"]=n,t["flex-direction"]=n;break;case"order":t.order=t["-webkit-"+r]=isNaN(+n)?"0":n}}return t}const O1="inline",Em=["row","column","row-reverse","column-reverse"];function p3(t){let[r,n,S]=g3(t);return function IE(t,r=null,n=!1){return{display:n?"inline-flex":"flex","box-sizing":"border-box","flex-direction":t,"flex-wrap":r||null}}(r,n,S)}function g3(t){var r;t=null!==(r=null==t?void 0:t.toLowerCase())&&void 0!==r?r:"";let[n,S,U]=t.split(" ");return Em.find(re=>re===n)||(n=Em[0]),S===O1&&(S=U!==O1?U:"",U=O1),[n,LE(S),!!U]}function bg(t){let[r]=g3(t);return r.indexOf("row")>-1}function LE(t){if(t)switch(t.toLowerCase()){case"reverse":case"wrap-reverse":case"reverse-wrap":t="wrap-reverse";break;case"no":case"none":case"nowrap":t="nowrap";break;default:t="wrap"}return t}function gf(t,...r){if(null==t)throw TypeError("Cannot convert undefined or null to object");for(let n of r)if(null!=n)for(let S in n)n.hasOwnProperty(S)&&(t[S]=n[S]);return t}function mu(t,r,n){const S=ae(t)||r||n?{next:t,error:r,complete:n}:t;return S?j((U,re)=>{var ye;null===(ye=S.subscribe)||void 0===ye||ye.call(S);let Me=!0;U.subscribe(G(re,Ne=>{var ft;null===(ft=S.next)||void 0===ft||ft.call(S,Ne),re.next(Ne)},()=>{var Ne;Me=!1,null===(Ne=S.complete)||void 0===Ne||Ne.call(S),re.complete()},Ne=>{var ft;Me=!1,null===(ft=S.error)||void 0===ft||ft.call(S,Ne),re.error(Ne)},()=>{var Ne,ft;Me&&(null===(Ne=S.unsubscribe)||void 0===Ne||Ne.call(S)),null===(ft=S.finalize)||void 0===ft||ft.call(S)}))}):L}const OE={provide:Zv,useFactory:function PE(t,r){return()=>{if(Qd(r)){const n=Array.from(t.querySelectorAll(`[class*=${m3}]`)),S=/\bflex-layout-.+?\b/g;n.forEach(U=>{U.classList.contains(`${m3}ssr`)&&U.parentNode?U.parentNode.removeChild(U):U.className.replace(S,"")})}}},deps:[ul,Fu],multi:!0},m3="flex-layout-";let R1=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Pa({type:t}),t.\u0275inj=tr({providers:[OE]}),t})();class Dh{constructor(r=!1,n="all",S="",U="",re=0){this.matches=r,this.mediaQuery=n,this.mqAlias=S,this.suffix=U,this.priority=re,this.property=""}clone(){return new Dh(this.matches,this.mediaQuery,this.mqAlias,this.suffix)}}let RE=(()=>{class t{constructor(){this.stylesheet=new Map}addStyleToElement(n,S,U){const re=this.stylesheet.get(n);re?re.set(S,U):this.stylesheet.set(n,new Map([[S,U]]))}clearStyles(){this.stylesheet.clear()}getStyleForElement(n,S){const U=this.stylesheet.get(n);let re="";if(U){const ye=U.get(S);("number"==typeof ye||"string"==typeof ye)&&(re=ye+"")}return re}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=qn({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const F1={addFlexToParent:!0,addOrientationBps:!1,disableDefaultBps:!1,disableVendorPrefixes:!1,serverLoaded:!1,useColumnBasisZero:!0,printWithBreakpoints:[],mediaTriggerAutoRestore:!0,ssrObserveBreakpoints:[],multiplier:void 0,defaultUnit:"px",detectLayoutDisplay:!1},cc=new Ea("Flex Layout token, config options for the library",{providedIn:"root",factory:()=>F1}),np=new Ea("FlexLayoutServerLoaded",{providedIn:"root",factory:()=>!1}),z1=new Ea("Flex Layout token, collect all breakpoints into one provider",{providedIn:"root",factory:()=>null});function y3(t,r){return t=t?t.clone():new Dh,r&&(t.mqAlias=r.alias,t.mediaQuery=r.mediaQuery,t.suffix=r.suffix,t.priority=r.priority),t}class qs{constructor(){this.shouldCache=!0}sideEffect(r,n,S){}}let ys=(()=>{class t{constructor(n,S,U,re){this._serverStylesheet=n,this._serverModuleLoaded=S,this._platformId=U,this.layoutConfig=re}applyStyleToElement(n,S,U=null){let re={};"string"==typeof S&&(re[S]=U,S=re),re=this.layoutConfig.disableVendorPrefixes?S:d3(S),this._applyMultiValueStyleToElement(re,n)}applyStyleToElements(n,S=[]){const U=this.layoutConfig.disableVendorPrefixes?n:d3(n);S.forEach(re=>{this._applyMultiValueStyleToElement(U,re)})}getFlowDirection(n){const S="flex-direction";let U=this.lookupStyle(n,S);return[U||"row",this.lookupInlineStyle(n,S)||ep(this._platformId)&&this._serverModuleLoaded?U:""]}hasWrap(n){return"wrap"===this.lookupStyle(n,"flex-wrap")}lookupAttributeValue(n,S){var U;return null!==(U=n.getAttribute(S))&&void 0!==U?U:""}lookupInlineStyle(n,S){return Qd(this._platformId)?n.style.getPropertyValue(S):function FE(t,r){var n;return null!==(n=v3(t)[r])&&void 0!==n?n:""}(n,S)}lookupStyle(n,S,U=!1){let re="";return n&&((re=this.lookupInlineStyle(n,S))||(Qd(this._platformId)?U||(re=getComputedStyle(n).getPropertyValue(S)):this._serverModuleLoaded&&(re=this._serverStylesheet.getStyleForElement(n,S)))),re?re.trim():""}_applyMultiValueStyleToElement(n,S){Object.keys(n).sort().forEach(U=>{const re=n[U],ye=Array.isArray(re)?re:[re];ye.sort();for(let Me of ye)Me=Me?Me+"":"",Qd(this._platformId)||!this._serverModuleLoaded?Qd(this._platformId)?S.style.setProperty(U,Me):zE(S,U,Me):this._serverStylesheet.addStyleToElement(S,U,Me)})}}return t.\u0275fac=function(n){return new(n||t)(Ti(RE),Ti(np),Ti(Fu),Ti(cc))},t.\u0275prov=qn({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function zE(t,r,n){r=r.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();const S=v3(t);S[r]=null!=n?n:"",function NE(t,r){let n="";for(const S in r)r[S]&&(n+=`${S}:${r[S]};`);t.setAttribute("style",n)}(t,S)}function v3(t){const r={},n=t.getAttribute("style");if(n){const S=n.split(/;+/g);for(let U=0;U<S.length;U++){const re=S[U].trim();if(re.length>0){const ye=re.indexOf(":");if(-1===ye)throw new Error(`Invalid CSS style: ${re}`);r[re.substr(0,ye).trim()]=re.substr(ye+1).trim()}}}return r}function _g(t,r){return(r&&r.priority||0)-(t&&t.priority||0)}function BE(t,r){return(t.priority||0)-(r.priority||0)}let N1=(()=>{class t{constructor(n,S,U){this._zone=n,this._platformId=S,this._document=U,this.source=new Bu(new Dh(!0)),this.registry=new Map,this.pendingRemoveListenerFns=[],this._observable$=this.source.asObservable()}get activations(){const n=[];return this.registry.forEach((S,U)=>{S.matches&&n.push(U)}),n}isActive(n){var S;const U=this.registry.get(n);return null!==(S=null==U?void 0:U.matches)&&void 0!==S?S:this.registerQuery(n).some(re=>re.matches)}observe(n,S=!1){if(n&&n.length){const U=this._observable$.pipe(Cc(ye=>!S||n.indexOf(ye.mediaQuery)>-1));return wn(new V(ye=>{const Me=this.registerQuery(n);if(Me.length){const Ne=Me.pop();Me.forEach(ft=>{ye.next(ft)}),this.source.next(Ne)}ye.complete()}),U)}return this._observable$}registerQuery(n){const S=Array.isArray(n)?n:[n],U=[];return function jE(t,r){const n=t.filter(S=>!x3[S]);if(n.length>0){const S=n.join(", ");try{const U=r.createElement("style");U.setAttribute("type","text/css"),U.styleSheet||U.appendChild(r.createTextNode(`\n/*\n  @angular/flex-layout - workaround for possible browser quirk with mediaQuery listeners\n  see http://bit.ly/2sd4HMP\n*/\n@media ${S} {.fx-query-test{ }}\n`)),r.head.appendChild(U),n.forEach(re=>x3[re]=U)}catch(U){console.error(U)}}}(S,this._document),S.forEach(re=>{const ye=Ne=>{this._zone.run(()=>this.source.next(new Dh(Ne.matches,re)))};let Me=this.registry.get(re);Me||(Me=this.buildMQL(re),Me.addListener(ye),this.pendingRemoveListenerFns.push(()=>Me.removeListener(ye)),this.registry.set(re,Me)),Me.matches&&U.push(new Dh(!0,re))}),U}ngOnDestroy(){let n;for(;n=this.pendingRemoveListenerFns.pop();)n()}buildMQL(n){return function VE(t,r){return r&&window.matchMedia("all").addListener?window.matchMedia(t):{matches:"all"===t||""===t,media:t,addListener:()=>{},removeListener:()=>{},onchange:null,addEventListener(){},removeEventListener(){},dispatchEvent:()=>!1}}(n,Qd(this._platformId))}}return t.\u0275fac=function(n){return new(n||t)(Ti(Gs),Ti(Fu),Ti(ul))},t.\u0275prov=qn({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const x3={},UE=[{alias:"xs",mediaQuery:"screen and (min-width: 0px) and (max-width: 599.98px)",priority:1e3},{alias:"sm",mediaQuery:"screen and (min-width: 600px) and (max-width: 959.98px)",priority:900},{alias:"md",mediaQuery:"screen and (min-width: 960px) and (max-width: 1279.98px)",priority:800},{alias:"lg",mediaQuery:"screen and (min-width: 1280px) and (max-width: 1919.98px)",priority:700},{alias:"xl",mediaQuery:"screen and (min-width: 1920px) and (max-width: 4999.98px)",priority:600},{alias:"lt-sm",overlapping:!0,mediaQuery:"screen and (max-width: 599.98px)",priority:950},{alias:"lt-md",overlapping:!0,mediaQuery:"screen and (max-width: 959.98px)",priority:850},{alias:"lt-lg",overlapping:!0,mediaQuery:"screen and (max-width: 1279.98px)",priority:750},{alias:"lt-xl",overlapping:!0,priority:650,mediaQuery:"screen and (max-width: 1919.98px)"},{alias:"gt-xs",overlapping:!0,mediaQuery:"screen and (min-width: 600px)",priority:-950},{alias:"gt-sm",overlapping:!0,mediaQuery:"screen and (min-width: 960px)",priority:-850},{alias:"gt-md",overlapping:!0,mediaQuery:"screen and (min-width: 1280px)",priority:-750},{alias:"gt-lg",overlapping:!0,mediaQuery:"screen and (min-width: 1920px)",priority:-650}],b3="(orientation: portrait) and (max-width: 599.98px)",_3="(orientation: landscape) and (max-width: 959.98px)",w3="(orientation: portrait) and (min-width: 600px) and (max-width: 839.98px)",T3="(orientation: landscape) and (min-width: 960px) and (max-width: 1279.98px)",A3="(orientation: portrait) and (min-width: 840px)",M3="(orientation: landscape) and (min-width: 1280px)",mf={HANDSET:`${b3}, ${_3}`,TABLET:`${w3} , ${T3}`,WEB:`${A3}, ${M3} `,HANDSET_PORTRAIT:`${b3}`,TABLET_PORTRAIT:`${w3} `,WEB_PORTRAIT:`${A3}`,HANDSET_LANDSCAPE:`${_3}`,TABLET_LANDSCAPE:`${T3}`,WEB_LANDSCAPE:`${M3}`},HE=[{alias:"handset",priority:2e3,mediaQuery:mf.HANDSET},{alias:"handset.landscape",priority:2e3,mediaQuery:mf.HANDSET_LANDSCAPE},{alias:"handset.portrait",priority:2e3,mediaQuery:mf.HANDSET_PORTRAIT},{alias:"tablet",priority:2100,mediaQuery:mf.TABLET},{alias:"tablet.landscape",priority:2100,mediaQuery:mf.TABLET_LANDSCAPE},{alias:"tablet.portrait",priority:2100,mediaQuery:mf.TABLET_PORTRAIT},{alias:"web",priority:2200,mediaQuery:mf.WEB,overlapping:!0},{alias:"web.landscape",priority:2200,mediaQuery:mf.WEB_LANDSCAPE,overlapping:!0},{alias:"web.portrait",priority:2200,mediaQuery:mf.WEB_PORTRAIT,overlapping:!0}],GE=/(\.|-|_)/g;function qE(t){let r=t.length>0?t.charAt(0):"",n=t.length>1?t.slice(1):"";return r.toUpperCase()+n}const XE=new Ea("Token (@angular/flex-layout) Breakpoints",{providedIn:"root",factory:()=>{const t=jc(z1),r=jc(cc),n=[].concat.apply([],(t||[]).map(U=>Array.isArray(U)?U:[U]));return function ZE(t,r=[]){const n={};return t.forEach(S=>{n[S.alias]=S}),r.forEach(S=>{n[S.alias]?gf(n[S.alias],S):n[S.alias]=S}),function YE(t){return t.forEach(r=>{r.suffix||(r.suffix=function WE(t){return t.replace(GE,"|").split("|").map(qE).join("")}(r.alias),r.overlapping=!!r.overlapping)}),t}(Object.keys(n).map(S=>n[S]))}((r.disableDefaultBps?[]:UE).concat(r.addOrientationBps?HE:[]),n)}});let B1=(()=>{class t{constructor(n){this.findByMap=new Map,this.items=[...n].sort(BE)}findByAlias(n){return n?this.findWithPredicate(n,S=>S.alias===n):null}findByQuery(n){return this.findWithPredicate(n,S=>S.mediaQuery===n)}get overlappings(){return this.items.filter(n=>n.overlapping)}get aliases(){return this.items.map(n=>n.alias)}get suffixes(){return this.items.map(n=>{var S;return null!==(S=null==n?void 0:n.suffix)&&void 0!==S?S:""})}findWithPredicate(n,S){var U;let re=this.findByMap.get(n);return re||(re=null!==(U=this.items.find(S))&&void 0!==U?U:null,this.findByMap.set(n,re)),null!=re?re:null}}return t.\u0275fac=function(n){return new(n||t)(Ti(XE))},t.\u0275prov=qn({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const rp="print",$E={alias:rp,mediaQuery:rp,priority:1e3};let KE=(()=>{class t{constructor(n,S,U){this.breakpoints=n,this.layoutConfig=S,this._document=U,this.registeredBeforeAfterPrintHooks=!1,this.isPrintingBeforeAfterEvent=!1,this.beforePrintEventListeners=[],this.afterPrintEventListeners=[],this.formerActivations=null,this.isPrinting=!1,this.queue=new JE,this.deactivations=[]}withPrintQuery(n){return[...n,rp]}isPrintEvent(n){return n.mediaQuery.startsWith(rp)}get printAlias(){var n;return[...null!==(n=this.layoutConfig.printWithBreakpoints)&&void 0!==n?n:[]]}get printBreakPoints(){return this.printAlias.map(n=>this.breakpoints.findByAlias(n)).filter(n=>null!==n)}getEventBreakpoints({mediaQuery:n}){const S=this.breakpoints.findByQuery(n);return(S?[...this.printBreakPoints,S]:this.printBreakPoints).sort(_g)}updateEvent(n){var S;let U=this.breakpoints.findByQuery(n.mediaQuery);return this.isPrintEvent(n)&&(U=this.getEventBreakpoints(n)[0],n.mediaQuery=null!==(S=null==U?void 0:U.mediaQuery)&&void 0!==S?S:""),y3(n,U)}registerBeforeAfterPrintHooks(n){if(!this._document.defaultView||this.registeredBeforeAfterPrintHooks)return;this.registeredBeforeAfterPrintHooks=!0;const S=()=>{this.isPrinting||(this.isPrintingBeforeAfterEvent=!0,this.startPrinting(n,this.getEventBreakpoints(new Dh(!0,rp))),n.updateStyles())},U=()=>{this.isPrintingBeforeAfterEvent=!1,this.isPrinting&&(this.stopPrinting(n),n.updateStyles())};this._document.defaultView.addEventListener("beforeprint",S),this._document.defaultView.addEventListener("afterprint",U),this.beforePrintEventListeners.push(S),this.afterPrintEventListeners.push(U)}interceptEvents(n){return S=>{this.isPrintEvent(S)?S.matches&&!this.isPrinting?(this.startPrinting(n,this.getEventBreakpoints(S)),n.updateStyles()):!S.matches&&this.isPrinting&&!this.isPrintingBeforeAfterEvent&&(this.stopPrinting(n),n.updateStyles()):this.collectActivations(n,S)}}blockPropagation(){return n=>!(this.isPrinting||this.isPrintEvent(n))}startPrinting(n,S){this.isPrinting=!0,this.formerActivations=n.activatedBreakpoints,n.activatedBreakpoints=this.queue.addPrintBreakpoints(S)}stopPrinting(n){n.activatedBreakpoints=this.deactivations,this.deactivations=[],this.formerActivations=null,this.queue.clear(),this.isPrinting=!1}collectActivations(n,S){if(!this.isPrinting||this.isPrintingBeforeAfterEvent){if(!this.isPrintingBeforeAfterEvent)return void(this.deactivations=[]);if(!S.matches){const U=this.breakpoints.findByQuery(S.mediaQuery);if(U){const re=this.formerActivations&&this.formerActivations.includes(U),ye=!this.formerActivations&&n.activatedBreakpoints.includes(U);(re||ye)&&(this.deactivations.push(U),this.deactivations.sort(_g))}}}}ngOnDestroy(){this._document.defaultView&&(this.beforePrintEventListeners.forEach(n=>this._document.defaultView.removeEventListener("beforeprint",n)),this.afterPrintEventListeners.forEach(n=>this._document.defaultView.removeEventListener("afterprint",n)))}}return t.\u0275fac=function(n){return new(n||t)(Ti(B1),Ti(cc),Ti(ul))},t.\u0275prov=qn({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class JE{constructor(){this.printBreakpoints=[]}addPrintBreakpoints(r){return r.push($E),r.sort(_g),r.forEach(n=>this.addBreakpoint(n)),this.printBreakpoints}addBreakpoint(r){r&&void 0===this.printBreakpoints.find(S=>S.mediaQuery===r.mediaQuery)&&(this.printBreakpoints=function QE(t){var r;return null!==(r=null==t?void 0:t.mediaQuery.startsWith(rp))&&void 0!==r&&r}(r)?[r,...this.printBreakpoints]:[...this.printBreakpoints,r])}clear(){this.printBreakpoints=[]}}let Ms=(()=>{class t{constructor(n,S,U){this.matchMedia=n,this.breakpoints=S,this.hook=U,this._useFallbacks=!0,this._activatedBreakpoints=[],this.elementMap=new Map,this.elementKeyMap=new WeakMap,this.watcherMap=new WeakMap,this.updateMap=new WeakMap,this.clearMap=new WeakMap,this.subject=new $,this.observeActivations()}get activatedAlias(){var n,S;return null!==(S=null===(n=this.activatedBreakpoints[0])||void 0===n?void 0:n.alias)&&void 0!==S?S:""}set activatedBreakpoints(n){this._activatedBreakpoints=[...n]}get activatedBreakpoints(){return[...this._activatedBreakpoints]}set useFallbacks(n){this._useFallbacks=n}onMediaChange(n){const S=this.findByQuery(n.mediaQuery);if(S){n=y3(n,S);const U=this.activatedBreakpoints.indexOf(S);n.matches&&-1===U?(this._activatedBreakpoints.push(S),this._activatedBreakpoints.sort(_g),this.updateStyles()):!n.matches&&-1!==U&&(this._activatedBreakpoints.splice(U,1),this._activatedBreakpoints.sort(_g),this.updateStyles())}}init(n,S,U,re,ye=[]){k3(this.updateMap,n,S,U),k3(this.clearMap,n,S,re),this.buildElementKeyMap(n,S),this.watchExtraTriggers(n,S,ye)}getValue(n,S,U){const re=this.elementMap.get(n);if(re){const ye=void 0!==U?re.get(U):this.getActivatedValues(re,S);if(ye)return ye.get(S)}}hasValue(n,S){const U=this.elementMap.get(n);if(U){const re=this.getActivatedValues(U,S);if(re)return void 0!==re.get(S)||!1}return!1}setValue(n,S,U,re){var ye;let Me=this.elementMap.get(n);if(Me){const ft=(null!==(ye=Me.get(re))&&void 0!==ye?ye:new Map).set(S,U);Me.set(re,ft),this.elementMap.set(n,Me)}else Me=(new Map).set(re,(new Map).set(S,U)),this.elementMap.set(n,Me);const Ne=this.getValue(n,S);void 0!==Ne&&this.updateElement(n,S,Ne)}trackValue(n,S){return this.subject.asObservable().pipe(Cc(U=>U.element===n&&U.key===S))}updateStyles(){this.elementMap.forEach((n,S)=>{const U=new Set(this.elementKeyMap.get(S));let re=this.getActivatedValues(n);re&&re.forEach((ye,Me)=>{this.updateElement(S,Me,ye),U.delete(Me)}),U.forEach(ye=>{if(re=this.getActivatedValues(n,ye),re){const Me=re.get(ye);this.updateElement(S,ye,Me)}else this.clearElement(S,ye)})})}clearElement(n,S){const U=this.clearMap.get(n);if(U){const re=U.get(S);re&&(re(),this.subject.next({element:n,key:S,value:""}))}}updateElement(n,S,U){const re=this.updateMap.get(n);if(re){const ye=re.get(S);ye&&(ye(U),this.subject.next({element:n,key:S,value:U}))}}releaseElement(n){const S=this.watcherMap.get(n);S&&(S.forEach(re=>re.unsubscribe()),this.watcherMap.delete(n));const U=this.elementMap.get(n);U&&(U.forEach((re,ye)=>U.delete(ye)),this.elementMap.delete(n))}triggerUpdate(n,S){const U=this.elementMap.get(n);if(U){const re=this.getActivatedValues(U,S);re&&(S?this.updateElement(n,S,re.get(S)):re.forEach((ye,Me)=>this.updateElement(n,Me,ye)))}}buildElementKeyMap(n,S){let U=this.elementKeyMap.get(n);U||(U=new Set,this.elementKeyMap.set(n,U)),U.add(S)}watchExtraTriggers(n,S,U){if(U&&U.length){let re=this.watcherMap.get(n);if(re||(re=new Map,this.watcherMap.set(n,re)),!re.get(S)){const Me=wn(...U).subscribe(()=>{const Ne=this.getValue(n,S);this.updateElement(n,S,Ne)});re.set(S,Me)}}}findByQuery(n){return this.breakpoints.findByQuery(n)}getActivatedValues(n,S){for(let re=0;re<this.activatedBreakpoints.length;re++){const Me=n.get(this.activatedBreakpoints[re].alias);if(Me&&(void 0===S||Me.has(S)&&null!=Me.get(S)))return Me}if(!this._useFallbacks)return;const U=n.get("");return void 0===S||U&&U.has(S)?U:void 0}observeActivations(){const n=this.breakpoints.items.map(S=>S.mediaQuery);this.hook.registerBeforeAfterPrintHooks(this),this.matchMedia.observe(this.hook.withPrintQuery(n)).pipe(mu(this.hook.interceptEvents(this)),Cc(this.hook.blockPropagation())).subscribe(this.onMediaChange.bind(this))}}return t.\u0275fac=function(n){return new(n||t)(Ti(N1),Ti(B1),Ti(KE))},t.\u0275prov=qn({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function k3(t,r,n,S){var U;if(void 0!==S){const re=null!==(U=t.get(r))&&void 0!==U?U:new Map;re.set(n,S),t.set(r,re)}}let Ps=(()=>{class t{constructor(n,S,U,re){this.elementRef=n,this.styleBuilder=S,this.styler=U,this.marshal=re,this.DIRECTIVE_KEY="",this.inputs=[],this.mru={},this.destroySubject=new $,this.styleCache=new Map}get parentElement(){return this.elementRef.nativeElement.parentElement}get nativeElement(){return this.elementRef.nativeElement}get activatedValue(){return this.marshal.getValue(this.nativeElement,this.DIRECTIVE_KEY)}set activatedValue(n){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,n,this.marshal.activatedAlias)}ngOnChanges(n){Object.keys(n).forEach(S=>{if(-1!==this.inputs.indexOf(S)){const U=S.split(".").slice(1).join(".");this.setValue(n[S].currentValue,U)}})}ngOnDestroy(){this.destroySubject.next(),this.destroySubject.complete(),this.marshal.releaseElement(this.nativeElement)}init(n=[]){this.marshal.init(this.elementRef.nativeElement,this.DIRECTIVE_KEY,this.updateWithValue.bind(this),this.clearStyles.bind(this),n)}addStyles(n,S){const U=this.styleBuilder,re=U.shouldCache;let ye=this.styleCache.get(n);(!ye||!re)&&(ye=U.buildStyles(n,S),re&&this.styleCache.set(n,ye)),this.mru=Object.assign({},ye),this.applyStyleToElement(ye),U.sideEffect(n,ye,S)}clearStyles(){Object.keys(this.mru).forEach(n=>{this.mru[n]=""}),this.applyStyleToElement(this.mru),this.mru={},this.currentValue=void 0}triggerUpdate(){this.marshal.triggerUpdate(this.nativeElement,this.DIRECTIVE_KEY)}getFlexFlowDirection(n,S=!1){if(n){const[U,re]=this.styler.getFlowDirection(n);if(!re&&S){const ye=p3(U);this.styler.applyStyleToElements(ye,[n])}return U.trim()}return"row"}hasWrap(n){return this.styler.hasWrap(n)}applyStyleToElement(n,S,U=this.nativeElement){this.styler.applyStyleToElement(U,n,S)}setValue(n,S){this.marshal.setValue(this.nativeElement,this.DIRECTIVE_KEY,n,S)}updateWithValue(n){this.currentValue!==n&&(this.addStyles(n),this.currentValue=n)}}return t.\u0275fac=function(n){return new(n||t)(Jn(io),Jn(qs),Jn(ys),Jn(Ms))},t.\u0275dir=ai({type:t,features:[pi]}),t})();function C3(t,r="1",n="1"){let S=[r,n,t],U=t.indexOf("calc");if(U>0){S[2]=S3(t.substring(U).trim());let re=t.substr(0,U).trim().split(" ");2==re.length&&(S[0]=re[0],S[1]=re[1])}else if(0==U)S[2]=S3(t.trim());else{let re=t.split(" ");S=3===re.length?re:[r,n,t]}return S}function S3(t){return t.replace(/[\s]/g,"").replace(/[\/\*\+\-]/g," $& ")}function ip(t){return j((r,n)=>{un(t).subscribe(G(n,()=>n.complete(),u)),!n.closed&&r.subscribe(n)})}let lD=(()=>{class t extends Ps{constructor(n,S,U,re,ye,Me,Ne){super(n,null,S,U),this.ngClassInstance=Ne,this.DIRECTIVE_KEY="ngClass",this.ngClassInstance||(this.ngClassInstance=new Jd(re,ye,n,Me)),this.init(),this.setValue("","")}set klass(n){this.ngClassInstance.klass=n,this.setValue(n,"")}updateWithValue(n){this.ngClassInstance.ngClass=n,this.ngClassInstance.ngDoCheck()}ngDoCheck(){this.ngClassInstance.ngDoCheck()}}return t.\u0275fac=function(n){return new(n||t)(Jn(io),Jn(ys),Jn(Ms),Jn(kh),Jn(ff),Jn(ac),Jn(Jd,10))},t.\u0275dir=ai({type:t,inputs:{klass:["class","klass"]},features:[Bi]}),t})();const uD=["ngClass","ngClass.xs","ngClass.sm","ngClass.md","ngClass.lg","ngClass.xl","ngClass.lt-sm","ngClass.lt-md","ngClass.lt-lg","ngClass.lt-xl","ngClass.gt-xs","ngClass.gt-sm","ngClass.gt-md","ngClass.gt-lg"];let j1=(()=>{class t extends lD{constructor(){super(...arguments),this.inputs=uD}}return t.\u0275fac=function(){let r;return function(S){return(r||(r=oa(t)))(S||t)}}(),t.\u0275dir=ai({type:t,selectors:[["","ngClass",""],["","ngClass.xs",""],["","ngClass.sm",""],["","ngClass.md",""],["","ngClass.lg",""],["","ngClass.xl",""],["","ngClass.lt-sm",""],["","ngClass.lt-md",""],["","ngClass.lt-lg",""],["","ngClass.lt-xl",""],["","ngClass.gt-xs",""],["","ngClass.gt-sm",""],["","ngClass.gt-md",""],["","ngClass.gt-lg",""]],inputs:{ngClass:"ngClass","ngClass.xs":"ngClass.xs","ngClass.sm":"ngClass.sm","ngClass.md":"ngClass.md","ngClass.lg":"ngClass.lg","ngClass.xl":"ngClass.xl","ngClass.lt-sm":"ngClass.lt-sm","ngClass.lt-md":"ngClass.lt-md","ngClass.lt-lg":"ngClass.lt-lg","ngClass.lt-xl":"ngClass.lt-xl","ngClass.gt-xs":"ngClass.gt-xs","ngClass.gt-sm":"ngClass.gt-sm","ngClass.gt-md":"ngClass.gt-md","ngClass.gt-lg":"ngClass.gt-lg"},features:[Bi]}),t})(),R3=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Pa({type:t}),t.\u0275inj=tr({imports:[[R1]]}),t})(),AD=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Pa({type:t}),t.\u0275inj=tr({}),t})(),MD=(()=>{class t extends qs{buildStyles(n,{display:S}){const U=p3(n);return Object.assign(Object.assign({},U),{display:"none"===S?S:U.display})}}return t.\u0275fac=function(){let r;return function(S){return(r||(r=oa(t)))(S||t)}}(),t.\u0275prov=qn({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const kD=["fxLayout","fxLayout.xs","fxLayout.sm","fxLayout.md","fxLayout.lg","fxLayout.xl","fxLayout.lt-sm","fxLayout.lt-md","fxLayout.lt-lg","fxLayout.lt-xl","fxLayout.gt-xs","fxLayout.gt-sm","fxLayout.gt-md","fxLayout.gt-lg"];let CD=(()=>{class t extends Ps{constructor(n,S,U,re,ye){super(n,U,S,re),this._config=ye,this.DIRECTIVE_KEY="layout",this.init()}updateWithValue(n){var S;const re=this._config.detectLayoutDisplay?this.styler.lookupStyle(this.nativeElement,"display"):"";this.styleCache=null!==(S=N3.get(re))&&void 0!==S?S:new Map,N3.set(re,this.styleCache),this.currentValue!==n&&(this.addStyles(n,{display:re}),this.currentValue=n)}}return t.\u0275fac=function(n){return new(n||t)(Jn(io),Jn(ys),Jn(MD),Jn(Ms),Jn(cc))},t.\u0275dir=ai({type:t,features:[Bi]}),t})(),z3=(()=>{class t extends CD{constructor(){super(...arguments),this.inputs=kD}}return t.\u0275fac=function(){let r;return function(S){return(r||(r=oa(t)))(S||t)}}(),t.\u0275dir=ai({type:t,selectors:[["","fxLayout",""],["","fxLayout.xs",""],["","fxLayout.sm",""],["","fxLayout.md",""],["","fxLayout.lg",""],["","fxLayout.xl",""],["","fxLayout.lt-sm",""],["","fxLayout.lt-md",""],["","fxLayout.lt-lg",""],["","fxLayout.lt-xl",""],["","fxLayout.gt-xs",""],["","fxLayout.gt-sm",""],["","fxLayout.gt-md",""],["","fxLayout.gt-lg",""]],inputs:{fxLayout:"fxLayout","fxLayout.xs":"fxLayout.xs","fxLayout.sm":"fxLayout.sm","fxLayout.md":"fxLayout.md","fxLayout.lg":"fxLayout.lg","fxLayout.xl":"fxLayout.xl","fxLayout.lt-sm":"fxLayout.lt-sm","fxLayout.lt-md":"fxLayout.lt-md","fxLayout.lt-lg":"fxLayout.lt-lg","fxLayout.lt-xl":"fxLayout.lt-xl","fxLayout.gt-xs":"fxLayout.gt-xs","fxLayout.gt-sm":"fxLayout.gt-sm","fxLayout.gt-md":"fxLayout.gt-md","fxLayout.gt-lg":"fxLayout.gt-lg"},features:[Bi]}),t})();const N3=new Map;let BD=(()=>{class t extends qs{constructor(n){super(),this.layoutConfig=n}buildStyles(n,S){let[U,re,...ye]=n.split(" "),Me=ye.join(" ");const Ne=S.direction.indexOf("column")>-1?"column":"row",ft=bg(Ne)?"max-width":"max-height",Bt=bg(Ne)?"min-width":"min-height",Qt=String(Me).indexOf("calc")>-1,Cn=Qt||"auto"===Me,Ln=String(Me).indexOf("%")>-1&&!Qt,dr=String(Me).indexOf("px")>-1||String(Me).indexOf("rem")>-1||String(Me).indexOf("em")>-1||String(Me).indexOf("vw")>-1||String(Me).indexOf("vh")>-1;let Gr=Qt||dr;U="0"==U?0:U,re="0"==re?0:re;const li=!U&&!re;let Xr={};const Nr={"max-width":null,"max-height":null,"min-width":null,"min-height":null};switch(Me||""){case"":const Gi=!1!==this.layoutConfig.useColumnBasisZero;Me="row"===Ne?"0%":Gi?"0.000000001px":"auto";break;case"initial":case"nogrow":U=0,Me="auto";break;case"grow":Me="100%";break;case"noshrink":re=0,Me="auto";break;case"auto":break;case"none":U=0,re=0,Me="auto";break;default:!Gr&&!Ln&&!isNaN(Me)&&(Me+="%"),"0%"===Me&&(Gr=!0),"0px"===Me&&(Me="0%"),Xr=gf(Nr,Qt?{"flex-grow":U,"flex-shrink":re,"flex-basis":Gr?Me:"100%"}:{flex:`${U} ${re} ${Gr?Me:"100%"}`})}return Xr.flex||Xr["flex-grow"]||(Xr=gf(Nr,Qt?{"flex-grow":U,"flex-shrink":re,"flex-basis":Me}:{flex:`${U} ${re} ${Me}`})),"0%"!==Me&&"0px"!==Me&&"0.000000001px"!==Me&&"auto"!==Me&&(Xr[Bt]=li||Gr&&U?Me:null,Xr[ft]=li||!Cn&&re?Me:null),Xr[Bt]||Xr[ft]?S.hasWrap&&(Xr[Qt?"flex-basis":"flex"]=Xr[ft]?Qt?Xr[ft]:`${U} ${re} ${Xr[ft]}`:Qt?Xr[Bt]:`${U} ${re} ${Xr[Bt]}`):Xr=gf(Nr,Qt?{"flex-grow":U,"flex-shrink":re,"flex-basis":Me}:{flex:`${U} ${re} ${Me}`}),gf(Xr,{"box-sizing":"border-box"})}}return t.\u0275fac=function(n){return new(n||t)(Ti(cc))},t.\u0275prov=qn({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const jD=["fxFlex","fxFlex.xs","fxFlex.sm","fxFlex.md","fxFlex.lg","fxFlex.xl","fxFlex.lt-sm","fxFlex.lt-md","fxFlex.lt-lg","fxFlex.lt-xl","fxFlex.gt-xs","fxFlex.gt-sm","fxFlex.gt-md","fxFlex.gt-lg"];let VD=(()=>{class t extends Ps{constructor(n,S,U,re,ye){super(n,re,S,ye),this.layoutConfig=U,this.marshal=ye,this.DIRECTIVE_KEY="flex",this.direction=void 0,this.wrap=void 0,this.flexGrow="1",this.flexShrink="1",this.init()}get shrink(){return this.flexShrink}set shrink(n){this.flexShrink=n||"1",this.triggerReflow()}get grow(){return this.flexGrow}set grow(n){this.flexGrow=n||"1",this.triggerReflow()}ngOnInit(){this.parentElement&&(this.marshal.trackValue(this.parentElement,"layout").pipe(ip(this.destroySubject)).subscribe(this.onLayoutChange.bind(this)),this.marshal.trackValue(this.nativeElement,"layout-align").pipe(ip(this.destroySubject)).subscribe(this.triggerReflow.bind(this)))}onLayoutChange(n){const U=n.value.split(" ");this.direction=U[0],this.wrap=void 0!==U[1]&&"wrap"===U[1],this.triggerUpdate()}updateWithValue(n){void 0===this.direction&&(this.direction=this.getFlexFlowDirection(this.parentElement,!1!==this.layoutConfig.addFlexToParent)),void 0===this.wrap&&(this.wrap=this.hasWrap(this.parentElement));const U=this.direction,re=U.startsWith("row"),ye=this.wrap;re&&ye?this.styleCache=GD:re&&!ye?this.styleCache=UD:!re&&ye?this.styleCache=qD:!re&&!ye&&(this.styleCache=HD);const Ne=C3(String(n).replace(";",""),this.flexGrow,this.flexShrink);this.addStyles(Ne.join(" "),{direction:U,hasWrap:ye})}triggerReflow(){const n=this.activatedValue;if(void 0!==n){const S=C3(n+"",this.flexGrow,this.flexShrink);this.marshal.updateElement(this.nativeElement,this.DIRECTIVE_KEY,S.join(" "))}}}return t.\u0275fac=function(n){return new(n||t)(Jn(io),Jn(ys),Jn(cc),Jn(BD),Jn(Ms))},t.\u0275dir=ai({type:t,inputs:{shrink:["fxShrink","shrink"],grow:["fxGrow","grow"]},features:[Bi]}),t})(),V3=(()=>{class t extends VD{constructor(){super(...arguments),this.inputs=jD}}return t.\u0275fac=function(){let r;return function(S){return(r||(r=oa(t)))(S||t)}}(),t.\u0275dir=ai({type:t,selectors:[["","fxFlex",""],["","fxFlex.xs",""],["","fxFlex.sm",""],["","fxFlex.md",""],["","fxFlex.lg",""],["","fxFlex.xl",""],["","fxFlex.lt-sm",""],["","fxFlex.lt-md",""],["","fxFlex.lt-lg",""],["","fxFlex.lt-xl",""],["","fxFlex.gt-xs",""],["","fxFlex.gt-sm",""],["","fxFlex.gt-md",""],["","fxFlex.gt-lg",""]],inputs:{fxFlex:"fxFlex","fxFlex.xs":"fxFlex.xs","fxFlex.sm":"fxFlex.sm","fxFlex.md":"fxFlex.md","fxFlex.lg":"fxFlex.lg","fxFlex.xl":"fxFlex.xl","fxFlex.lt-sm":"fxFlex.lt-sm","fxFlex.lt-md":"fxFlex.lt-md","fxFlex.lt-lg":"fxFlex.lt-lg","fxFlex.lt-xl":"fxFlex.lt-xl","fxFlex.gt-xs":"fxFlex.gt-xs","fxFlex.gt-sm":"fxFlex.gt-sm","fxFlex.gt-md":"fxFlex.gt-md","fxFlex.gt-lg":"fxFlex.gt-lg"},features:[Bi]}),t})();const UD=new Map,HD=new Map,GD=new Map,qD=new Map;let p8=(()=>{class t extends qs{buildStyles(n,S){const U={},[re,ye]=n.split(" ");switch(re){case"center":U["justify-content"]="center";break;case"space-around":U["justify-content"]="space-around";break;case"space-between":U["justify-content"]="space-between";break;case"space-evenly":U["justify-content"]="space-evenly";break;case"end":case"flex-end":U["justify-content"]="flex-end";break;default:U["justify-content"]="flex-start"}switch(ye){case"start":case"flex-start":U["align-items"]=U["align-content"]="flex-start";break;case"center":U["align-items"]=U["align-content"]="center";break;case"end":case"flex-end":U["align-items"]=U["align-content"]="flex-end";break;case"space-between":U["align-content"]="space-between",U["align-items"]="stretch";break;case"space-around":U["align-content"]="space-around",U["align-items"]="stretch";break;case"baseline":U["align-content"]="stretch",U["align-items"]="baseline";break;default:U["align-items"]=U["align-content"]="stretch"}return gf(U,{display:S.inline?"inline-flex":"flex","flex-direction":S.layout,"box-sizing":"border-box","max-width":"stretch"===ye?bg(S.layout)?null:"100%":null,"max-height":"stretch"===ye&&bg(S.layout)?"100%":null})}}return t.\u0275fac=function(){let r;return function(S){return(r||(r=oa(t)))(S||t)}}(),t.\u0275prov=qn({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const g8=["fxLayoutAlign","fxLayoutAlign.xs","fxLayoutAlign.sm","fxLayoutAlign.md","fxLayoutAlign.lg","fxLayoutAlign.xl","fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg"];let m8=(()=>{class t extends Ps{constructor(n,S,U,re){super(n,U,S,re),this.DIRECTIVE_KEY="layout-align",this.layout="row",this.inline=!1,this.init(),this.marshal.trackValue(this.nativeElement,"layout").pipe(ip(this.destroySubject)).subscribe(this.onLayoutChange.bind(this))}updateWithValue(n){const S=this.layout||"row",U=this.inline;"row"===S&&U?this.styleCache=_8:"row"!==S||U?"row-reverse"===S&&U?this.styleCache=T8:"row-reverse"!==S||U?"column"===S&&U?this.styleCache=w8:"column"!==S||U?"column-reverse"===S&&U?this.styleCache=A8:"column-reverse"===S&&!U&&(this.styleCache=b8):this.styleCache=v8:this.styleCache=x8:this.styleCache=y8,this.addStyles(n,{layout:S,inline:U})}onLayoutChange(n){const S=n.value.split(" ");this.layout=S[0],this.inline=n.value.includes("inline"),Em.find(U=>U===this.layout)||(this.layout="row"),this.triggerUpdate()}}return t.\u0275fac=function(n){return new(n||t)(Jn(io),Jn(ys),Jn(p8),Jn(Ms))},t.\u0275dir=ai({type:t,features:[Bi]}),t})(),U3=(()=>{class t extends m8{constructor(){super(...arguments),this.inputs=g8}}return t.\u0275fac=function(){let r;return function(S){return(r||(r=oa(t)))(S||t)}}(),t.\u0275dir=ai({type:t,selectors:[["","fxLayoutAlign",""],["","fxLayoutAlign.xs",""],["","fxLayoutAlign.sm",""],["","fxLayoutAlign.md",""],["","fxLayoutAlign.lg",""],["","fxLayoutAlign.xl",""],["","fxLayoutAlign.lt-sm",""],["","fxLayoutAlign.lt-md",""],["","fxLayoutAlign.lt-lg",""],["","fxLayoutAlign.lt-xl",""],["","fxLayoutAlign.gt-xs",""],["","fxLayoutAlign.gt-sm",""],["","fxLayoutAlign.gt-md",""],["","fxLayoutAlign.gt-lg",""]],inputs:{fxLayoutAlign:"fxLayoutAlign","fxLayoutAlign.xs":"fxLayoutAlign.xs","fxLayoutAlign.sm":"fxLayoutAlign.sm","fxLayoutAlign.md":"fxLayoutAlign.md","fxLayoutAlign.lg":"fxLayoutAlign.lg","fxLayoutAlign.xl":"fxLayoutAlign.xl","fxLayoutAlign.lt-sm":"fxLayoutAlign.lt-sm","fxLayoutAlign.lt-md":"fxLayoutAlign.lt-md","fxLayoutAlign.lt-lg":"fxLayoutAlign.lt-lg","fxLayoutAlign.lt-xl":"fxLayoutAlign.lt-xl","fxLayoutAlign.gt-xs":"fxLayoutAlign.gt-xs","fxLayoutAlign.gt-sm":"fxLayoutAlign.gt-sm","fxLayoutAlign.gt-md":"fxLayoutAlign.gt-md","fxLayoutAlign.gt-lg":"fxLayoutAlign.gt-lg"},features:[Bi]}),t})();const y8=new Map,v8=new Map,x8=new Map,b8=new Map,_8=new Map,w8=new Map,T8=new Map,A8=new Map;let H3=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Pa({type:t}),t.\u0275inj=tr({imports:[[R1,AD]]}),t})(),K3=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Pa({type:t}),t.\u0275inj=tr({imports:[[R1]]}),t})(),J3=(()=>{class t{constructor(n,S){ep(S)&&!n&&console.warn("Warning: Flex Layout loaded on the server without FlexLayoutServerModule")}static withConfig(n,S=[]){return{ngModule:t,providers:n.serverLoaded?[{provide:cc,useValue:Object.assign(Object.assign({},F1),n)},{provide:z1,useValue:S,multi:!0},{provide:np,useValue:!0}]:[{provide:cc,useValue:Object.assign(Object.assign({},F1),n)},{provide:z1,useValue:S,multi:!0}]}}}return t.\u0275fac=function(n){return new(n||t)(Ti(np),Ti(Fu))},t.\u0275mod=Pa({type:t}),t.\u0275inj=tr({imports:[[H3,R3,K3],H3,R3,K3]}),t})();const{isArray:WL}=Array,{getPrototypeOf:YL,prototype:ZL,keys:XL}=Object;function Q3(t){if(1===t.length){const r=t[0];if(WL(r))return{args:r,keys:null};if(function $L(t){return t&&"object"==typeof t&&YL(t)===ZL}(r)){const n=XL(r);return{args:n.map(S=>r[S]),keys:n}}}return{args:t,keys:null}}const{isArray:KL}=Array;function e5(t){return ie(r=>function JL(t,r){return KL(r)?t(...r):t(r)}(t,r))}function t5(t,r){return t.reduce((n,S,U)=>(n[S]=r[U],n),{})}function n5(t,r,n){t?Be(n,t,r):r()}const Im=m(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function U1(...t){return function tI(){return wt(1)}()(on(t,Tt(t)))}function r5(t){return new V(r=>{un(t()).subscribe(r)})}function i5(){return j((t,r)=>{let n=null;t._refCount++;const S=G(r,void 0,void 0,void 0,()=>{if(!t||t._refCount<=0||0<--t._refCount)return void(n=null);const U=t._connection,re=n;n=null,U&&(!re||U===re)&&U.unsubscribe(),r.unsubscribe()});t.subscribe(S),S.closed||(n=t.connect())})}class nI extends V{constructor(r,n){super(),this.source=r,this.subjectFactory=n,this._subject=null,this._refCount=0,this._connection=null,se(r)&&(this.lift=r.lift)}_subscribe(r){return this.getSubject().subscribe(r)}getSubject(){const r=this._subject;return(!r||r.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:r}=this;this._subject=this._connection=null,null==r||r.unsubscribe()}connect(){let r=this._connection;if(!r){r=this._connection=new b;const n=this.getSubject();r.add(this.source.subscribe(G(n,void 0,()=>{this._teardown(),n.complete()},S=>{this._teardown(),n.error(S)},()=>this._teardown()))),r.closed&&(this._connection=null,r=b.EMPTY)}return r}refCount(){return i5()(this)}}function Lh(t,r){return j((n,S)=>{let U=null,re=0,ye=!1;const Me=()=>ye&&!U&&S.complete();n.subscribe(G(S,Ne=>{null==U||U.unsubscribe();let ft=0;const Bt=re++;un(t(Ne,Bt)).subscribe(U=G(S,Qt=>S.next(r?r(Ne,Qt,Bt,ft++):Qt),()=>{U=null,Me()}))},()=>{ye=!0,Me()}))})}function iI(t,r,n,S,U){return(re,ye)=>{let Me=n,Ne=r,ft=0;re.subscribe(G(ye,Bt=>{const Qt=ft++;Ne=Me?t(Ne,Bt,Qt):(Me=!0,Bt),S&&ye.next(Ne)},U&&(()=>{Me&&ye.next(Ne),ye.complete()})))}}function a5(t,r){return j(iI(t,r,arguments.length>=2,!0))}function Zf(t){return j((r,n)=>{let re,S=null,U=!1;S=r.subscribe(G(n,void 0,void 0,ye=>{re=un(t(ye,Zf(t)(r))),S?(S.unsubscribe(),S=null,re.subscribe(n)):U=!0})),U&&(S.unsubscribe(),S=null,re.subscribe(n))})}function H1(t){return t<=0?()=>_t:j((r,n)=>{let S=[];r.subscribe(G(n,U=>{S.push(U),t<S.length&&S.shift()},()=>{for(const U of S)n.next(U);n.complete()},void 0,()=>{S=null}))})}function o5(t=aI){return j((r,n)=>{let S=!1;r.subscribe(G(n,U=>{S=!0,n.next(U)},()=>S?n.complete():n.error(t())))})}function aI(){return new Im}function s5(t){return j((r,n)=>{let S=!1;r.subscribe(G(n,U=>{S=!0,n.next(U)},()=>{S||n.next(t),n.complete()}))})}function ap(t,r){const n=arguments.length>=2;return S=>S.pipe(t?Cc((U,re)=>t(U,re,S)):L,On(1),n?s5(r):o5(()=>new Im))}class yf{constructor(r,n){this.id=r,this.url=n}}class G1 extends yf{constructor(r,n,S="imperative",U=null){super(r,n),this.navigationTrigger=S,this.restoredState=U}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class wg extends yf{constructor(r,n,S){super(r,n),this.urlAfterRedirects=S}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class l5 extends yf{constructor(r,n,S){super(r,n),this.reason=S}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class lI extends yf{constructor(r,n,S){super(r,n),this.error=S}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class uI extends yf{constructor(r,n,S,U){super(r,n),this.urlAfterRedirects=S,this.state=U}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cI extends yf{constructor(r,n,S,U){super(r,n),this.urlAfterRedirects=S,this.state=U}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fI extends yf{constructor(r,n,S,U,re){super(r,n),this.urlAfterRedirects=S,this.state=U,this.shouldActivate=re}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class hI extends yf{constructor(r,n,S,U){super(r,n),this.urlAfterRedirects=S,this.state=U}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dI extends yf{constructor(r,n,S,U){super(r,n),this.urlAfterRedirects=S,this.state=U}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class u5{constructor(r){this.route=r}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class c5{constructor(r){this.route=r}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class pI{constructor(r){this.snapshot=r}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gI{constructor(r){this.snapshot=r}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mI{constructor(r){this.snapshot=r}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class yI{constructor(r){this.snapshot=r}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class f5{constructor(r,n,S){this.routerEvent=r,this.position=n,this.anchor=S}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const no="primary";class vI{constructor(r){this.params=r||{}}has(r){return Object.prototype.hasOwnProperty.call(this.params,r)}get(r){if(this.has(r)){const n=this.params[r];return Array.isArray(n)?n[0]:n}return null}getAll(r){if(this.has(r)){const n=this.params[r];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function op(t){return new vI(t)}const h5="ngNavigationCancelingError";function q1(t){const r=Error("NavigationCancelingError: "+t);return r[h5]=!0,r}function bI(t,r,n){const S=n.path.split("/");if(S.length>t.length||"full"===n.pathMatch&&(r.hasChildren()||S.length<t.length))return null;const U={};for(let re=0;re<S.length;re++){const ye=S[re],Me=t[re];if(ye.startsWith(":"))U[ye.substring(1)]=Me;else if(ye!==Me.path)return null}return{consumed:t.slice(0,S.length),posParams:U}}function Sc(t,r){const n=t?Object.keys(t):void 0,S=r?Object.keys(r):void 0;if(!n||!S||n.length!=S.length)return!1;let U;for(let re=0;re<n.length;re++)if(U=n[re],!d5(t[U],r[U]))return!1;return!0}function d5(t,r){if(Array.isArray(t)&&Array.isArray(r)){if(t.length!==r.length)return!1;const n=[...t].sort(),S=[...r].sort();return n.every((U,re)=>S[re]===U)}return t===r}function p5(t){return Array.prototype.concat.apply([],t)}function g5(t){return t.length>0?t[t.length-1]:null}function Fl(t,r){for(const n in t)t.hasOwnProperty(n)&&r(t[n],n)}function Ec(t){return vv(t)?t:rg(t)?on(Promise.resolve(t)):Va(t)}const TI={exact:function v5(t,r,n){if(!Ph(t.segments,r.segments)||!Pm(t.segments,r.segments,n)||t.numberOfChildren!==r.numberOfChildren)return!1;for(const S in r.children)if(!t.children[S]||!v5(t.children[S],r.children[S],n))return!1;return!0},subset:x5},m5={exact:function AI(t,r){return Sc(t,r)},subset:function MI(t,r){return Object.keys(r).length<=Object.keys(t).length&&Object.keys(r).every(n=>d5(t[n],r[n]))},ignored:()=>!0};function y5(t,r,n){return TI[n.paths](t.root,r.root,n.matrixParams)&&m5[n.queryParams](t.queryParams,r.queryParams)&&!("exact"===n.fragment&&t.fragment!==r.fragment)}function x5(t,r,n){return b5(t,r,r.segments,n)}function b5(t,r,n,S){if(t.segments.length>n.length){const U=t.segments.slice(0,n.length);return!(!Ph(U,n)||r.hasChildren()||!Pm(U,n,S))}if(t.segments.length===n.length){if(!Ph(t.segments,n)||!Pm(t.segments,n,S))return!1;for(const U in r.children)if(!t.children[U]||!x5(t.children[U],r.children[U],S))return!1;return!0}{const U=n.slice(0,t.segments.length),re=n.slice(t.segments.length);return!!(Ph(t.segments,U)&&Pm(t.segments,U,S)&&t.children[no])&&b5(t.children[no],r,re,S)}}function Pm(t,r,n){return r.every((S,U)=>m5[n](t[U].parameters,S.parameters))}class Ih{constructor(r,n,S){this.root=r,this.queryParams=n,this.fragment=S}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=op(this.queryParams)),this._queryParamMap}toString(){return SI.serialize(this)}}class uo{constructor(r,n){this.segments=r,this.children=n,this.parent=null,Fl(n,(S,U)=>S.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Om(this)}}class Tg{constructor(r,n){this.path=r,this.parameters=n}get parameterMap(){return this._parameterMap||(this._parameterMap=op(this.parameters)),this._parameterMap}toString(){return M5(this)}}function Ph(t,r){return t.length===r.length&&t.every((n,S)=>n.path===r[S].path)}class _5{}class w5{parse(r){const n=new zI(r);return new Ih(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(r){const n=`/${Ag(r.root,!0)}`,S=function LI(t){const r=Object.keys(t).map(n=>{const S=t[n];return Array.isArray(S)?S.map(U=>`${Rm(n)}=${Rm(U)}`).join("&"):`${Rm(n)}=${Rm(S)}`}).filter(n=>!!n);return r.length?`?${r.join("&")}`:""}(r.queryParams);return`${n}${S}${"string"==typeof r.fragment?`#${function EI(t){return encodeURI(t)}(r.fragment)}`:""}`}}const SI=new w5;function Om(t){return t.segments.map(r=>M5(r)).join("/")}function Ag(t,r){if(!t.hasChildren())return Om(t);if(r){const n=t.children[no]?Ag(t.children[no],!1):"",S=[];return Fl(t.children,(U,re)=>{re!==no&&S.push(`${re}:${Ag(U,!1)}`)}),S.length>0?`${n}(${S.join("//")})`:n}{const n=function CI(t,r){let n=[];return Fl(t.children,(S,U)=>{U===no&&(n=n.concat(r(S,U)))}),Fl(t.children,(S,U)=>{U!==no&&(n=n.concat(r(S,U)))}),n}(t,(S,U)=>U===no?[Ag(t.children[no],!1)]:[`${U}:${Ag(S,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[no]?`${Om(t)}/${n[0]}`:`${Om(t)}/(${n.join("//")})`}}function T5(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rm(t){return T5(t).replace(/%3B/gi,";")}function W1(t){return T5(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Fm(t){return decodeURIComponent(t)}function A5(t){return Fm(t.replace(/\+/g,"%20"))}function M5(t){return`${W1(t.path)}${function DI(t){return Object.keys(t).map(r=>`;${W1(r)}=${W1(t[r])}`).join("")}(t.parameters)}`}const II=/^[^\/()?;=#]+/;function zm(t){const r=t.match(II);return r?r[0]:""}const PI=/^[^=?&#]+/,RI=/^[^&#]+/;class zI{constructor(r){this.url=r,this.remaining=r}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new uo([],{}):new uo([],this.parseChildren())}parseQueryParams(){const r={};if(this.consumeOptional("?"))do{this.parseQueryParam(r)}while(this.consumeOptional("&"));return r}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const r=[];for(this.peekStartsWith("(")||r.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),r.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let S={};return this.peekStartsWith("(")&&(S=this.parseParens(!1)),(r.length>0||Object.keys(n).length>0)&&(S[no]=new uo(r,n)),S}parseSegment(){const r=zm(this.remaining);if(""===r&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(r),new Tg(Fm(r),this.parseMatrixParams())}parseMatrixParams(){const r={};for(;this.consumeOptional(";");)this.parseParam(r);return r}parseParam(r){const n=zm(this.remaining);if(!n)return;this.capture(n);let S="";if(this.consumeOptional("=")){const U=zm(this.remaining);U&&(S=U,this.capture(S))}r[Fm(n)]=Fm(S)}parseQueryParam(r){const n=function OI(t){const r=t.match(PI);return r?r[0]:""}(this.remaining);if(!n)return;this.capture(n);let S="";if(this.consumeOptional("=")){const ye=function FI(t){const r=t.match(RI);return r?r[0]:""}(this.remaining);ye&&(S=ye,this.capture(S))}const U=A5(n),re=A5(S);if(r.hasOwnProperty(U)){let ye=r[U];Array.isArray(ye)||(ye=[ye],r[U]=ye),ye.push(re)}else r[U]=re}parseParens(r){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const S=zm(this.remaining),U=this.remaining[S.length];if("/"!==U&&")"!==U&&";"!==U)throw new Error(`Cannot parse url '${this.url}'`);let re;S.indexOf(":")>-1?(re=S.substr(0,S.indexOf(":")),this.capture(re),this.capture(":")):r&&(re=no);const ye=this.parseChildren();n[re]=1===Object.keys(ye).length?ye[no]:new uo([],ye),this.consumeOptional("//")}return n}peekStartsWith(r){return this.remaining.startsWith(r)}consumeOptional(r){return!!this.peekStartsWith(r)&&(this.remaining=this.remaining.substring(r.length),!0)}capture(r){if(!this.consumeOptional(r))throw new Error(`Expected "${r}".`)}}class k5{constructor(r){this._root=r}get root(){return this._root.value}parent(r){const n=this.pathFromRoot(r);return n.length>1?n[n.length-2]:null}children(r){const n=Y1(r,this._root);return n?n.children.map(S=>S.value):[]}firstChild(r){const n=Y1(r,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(r){const n=Z1(r,this._root);return n.length<2?[]:n[n.length-2].children.map(U=>U.value).filter(U=>U!==r)}pathFromRoot(r){return Z1(r,this._root).map(n=>n.value)}}function Y1(t,r){if(t===r.value)return r;for(const n of r.children){const S=Y1(t,n);if(S)return S}return null}function Z1(t,r){if(t===r.value)return[r];for(const n of r.children){const S=Z1(t,n);if(S.length)return S.unshift(r),S}return[]}class vf{constructor(r,n){this.value=r,this.children=n}toString(){return`TreeNode(${this.value})`}}function sp(t){const r={};return t&&t.children.forEach(n=>r[n.value.outlet]=n),r}class C5 extends k5{constructor(r,n){super(r),this.snapshot=n,X1(this,r)}toString(){return this.snapshot.toString()}}function S5(t,r){const n=function NI(t,r){const ye=new Nm([],{},{},"",{},no,r,null,t.root,-1,{});return new D5("",new vf(ye,[]))}(t,r),S=new Bu([new Tg("",{})]),U=new Bu({}),re=new Bu({}),ye=new Bu({}),Me=new Bu(""),Ne=new Oh(S,U,ye,Me,re,no,r,n.root);return Ne.snapshot=n.root,new C5(new vf(Ne,[]),n)}class Oh{constructor(r,n,S,U,re,ye,Me,Ne){this.url=r,this.params=n,this.queryParams=S,this.fragment=U,this.data=re,this.outlet=ye,this.component=Me,this._futureSnapshot=Ne}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(ie(r=>op(r)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(ie(r=>op(r)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function E5(t,r="emptyOnly"){const n=t.pathFromRoot;let S=0;if("always"!==r)for(S=n.length-1;S>=1;){const U=n[S],re=n[S-1];if(U.routeConfig&&""===U.routeConfig.path)S--;else{if(re.component)break;S--}}return function BI(t){return t.reduce((r,n)=>({params:Object.assign(Object.assign({},r.params),n.params),data:Object.assign(Object.assign({},r.data),n.data),resolve:Object.assign(Object.assign({},r.resolve),n._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(S))}class Nm{constructor(r,n,S,U,re,ye,Me,Ne,ft,Bt,Qt){this.url=r,this.params=n,this.queryParams=S,this.fragment=U,this.data=re,this.outlet=ye,this.component=Me,this.routeConfig=Ne,this._urlSegment=ft,this._lastPathIndex=Bt,this._resolve=Qt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=op(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=op(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(S=>S.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class D5 extends k5{constructor(r,n){super(n),this.url=r,X1(this,n)}toString(){return L5(this._root)}}function X1(t,r){r.value._routerState=t,r.children.forEach(n=>X1(t,n))}function L5(t){const r=t.children.length>0?` { ${t.children.map(L5).join(", ")} } `:"";return`${t.value}${r}`}function $1(t){if(t.snapshot){const r=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Sc(r.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),r.fragment!==n.fragment&&t.fragment.next(n.fragment),Sc(r.params,n.params)||t.params.next(n.params),function _I(t,r){if(t.length!==r.length)return!1;for(let n=0;n<t.length;++n)if(!Sc(t[n],r[n]))return!1;return!0}(r.url,n.url)||t.url.next(n.url),Sc(r.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function K1(t,r){const n=Sc(t.params,r.params)&&function kI(t,r){return Ph(t,r)&&t.every((n,S)=>Sc(n.parameters,r[S].parameters))}(t.url,r.url);return n&&!(!t.parent!=!r.parent)&&(!t.parent||K1(t.parent,r.parent))}function Mg(t,r,n){if(n&&t.shouldReuseRoute(r.value,n.value.snapshot)){const S=n.value;S._futureSnapshot=r.value;const U=function VI(t,r,n){return r.children.map(S=>{for(const U of n.children)if(t.shouldReuseRoute(S.value,U.value.snapshot))return Mg(t,S,U);return Mg(t,S)})}(t,r,n);return new vf(S,U)}{if(t.shouldAttach(r.value)){const re=t.retrieve(r.value);if(null!==re){const ye=re.route;return ye.value._futureSnapshot=r.value,ye.children=r.children.map(Me=>Mg(t,Me)),ye}}const S=function UI(t){return new Oh(new Bu(t.url),new Bu(t.params),new Bu(t.queryParams),new Bu(t.fragment),new Bu(t.data),t.outlet,t.component,t)}(r.value),U=r.children.map(re=>Mg(t,re));return new vf(S,U)}}function Bm(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function kg(t){return"object"==typeof t&&null!=t&&t.outlets}function J1(t,r,n,S,U){let re={};return S&&Fl(S,(ye,Me)=>{re[Me]=Array.isArray(ye)?ye.map(Ne=>`${Ne}`):`${ye}`}),new Ih(n.root===t?r:I5(n.root,t,r),re,U)}function I5(t,r,n){const S={};return Fl(t.children,(U,re)=>{S[re]=U===r?n:I5(U,r,n)}),new uo(t.segments,S)}class P5{constructor(r,n,S){if(this.isAbsolute=r,this.numberOfDoubleDots=n,this.commands=S,r&&S.length>0&&Bm(S[0]))throw new Error("Root segment cannot have matrix parameters");const U=S.find(kg);if(U&&U!==g5(S))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Q1{constructor(r,n,S){this.segmentGroup=r,this.processChildren=n,this.index=S}}function O5(t,r,n){if(t||(t=new uo([],{})),0===t.segments.length&&t.hasChildren())return jm(t,r,n);const S=function ZI(t,r,n){let S=0,U=r;const re={match:!1,pathIndex:0,commandIndex:0};for(;U<t.segments.length;){if(S>=n.length)return re;const ye=t.segments[U],Me=n[S];if(kg(Me))break;const Ne=`${Me}`,ft=S<n.length-1?n[S+1]:null;if(U>0&&void 0===Ne)break;if(Ne&&ft&&"object"==typeof ft&&void 0===ft.outlets){if(!F5(Ne,ft,ye))return re;S+=2}else{if(!F5(Ne,{},ye))return re;S++}U++}return{match:!0,pathIndex:U,commandIndex:S}}(t,r,n),U=n.slice(S.commandIndex);if(S.match&&S.pathIndex<t.segments.length){const re=new uo(t.segments.slice(0,S.pathIndex),{});return re.children[no]=new uo(t.segments.slice(S.pathIndex),t.children),jm(re,0,U)}return S.match&&0===U.length?new uo(t.segments,{}):S.match&&!t.hasChildren()?ex(t,r,n):S.match?jm(t,0,U):ex(t,r,n)}function jm(t,r,n){if(0===n.length)return new uo(t.segments,{});{const S=function YI(t){return kg(t[0])?t[0].outlets:{[no]:t}}(n),U={};return Fl(S,(re,ye)=>{"string"==typeof re&&(re=[re]),null!==re&&(U[ye]=O5(t.children[ye],r,re))}),Fl(t.children,(re,ye)=>{void 0===S[ye]&&(U[ye]=re)}),new uo(t.segments,U)}}function ex(t,r,n){const S=t.segments.slice(0,r);let U=0;for(;U<n.length;){const re=n[U];if(kg(re)){const Ne=XI(re.outlets);return new uo(S,Ne)}if(0===U&&Bm(n[0])){S.push(new Tg(t.segments[r].path,R5(n[0]))),U++;continue}const ye=kg(re)?re.outlets[no]:`${re}`,Me=U<n.length-1?n[U+1]:null;ye&&Me&&Bm(Me)?(S.push(new Tg(ye,R5(Me))),U+=2):(S.push(new Tg(ye,{})),U++)}return new uo(S,{})}function XI(t){const r={};return Fl(t,(n,S)=>{"string"==typeof n&&(n=[n]),null!==n&&(r[S]=ex(new uo([],{}),0,n))}),r}function R5(t){const r={};return Fl(t,(n,S)=>r[S]=`${n}`),r}function F5(t,r,n){return t==n.path&&Sc(r,n.parameters)}class KI{constructor(r,n,S,U){this.routeReuseStrategy=r,this.futureState=n,this.currState=S,this.forwardEvent=U}activate(r){const n=this.futureState._root,S=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,S,r),$1(this.futureState.root),this.activateChildRoutes(n,S,r)}deactivateChildRoutes(r,n,S){const U=sp(n);r.children.forEach(re=>{const ye=re.value.outlet;this.deactivateRoutes(re,U[ye],S),delete U[ye]}),Fl(U,(re,ye)=>{this.deactivateRouteAndItsChildren(re,S)})}deactivateRoutes(r,n,S){const U=r.value,re=n?n.value:null;if(U===re)if(U.component){const ye=S.getContext(U.outlet);ye&&this.deactivateChildRoutes(r,n,ye.children)}else this.deactivateChildRoutes(r,n,S);else re&&this.deactivateRouteAndItsChildren(n,S)}deactivateRouteAndItsChildren(r,n){r.value.component&&this.routeReuseStrategy.shouldDetach(r.value.snapshot)?this.detachAndStoreRouteSubtree(r,n):this.deactivateRouteAndOutlet(r,n)}detachAndStoreRouteSubtree(r,n){const S=n.getContext(r.value.outlet),U=S&&r.value.component?S.children:n,re=sp(r);for(const ye of Object.keys(re))this.deactivateRouteAndItsChildren(re[ye],U);if(S&&S.outlet){const ye=S.outlet.detach(),Me=S.children.onOutletDeactivated();this.routeReuseStrategy.store(r.value.snapshot,{componentRef:ye,route:r,contexts:Me})}}deactivateRouteAndOutlet(r,n){const S=n.getContext(r.value.outlet),U=S&&r.value.component?S.children:n,re=sp(r);for(const ye of Object.keys(re))this.deactivateRouteAndItsChildren(re[ye],U);S&&S.outlet&&(S.outlet.deactivate(),S.children.onOutletDeactivated(),S.attachRef=null,S.resolver=null,S.route=null)}activateChildRoutes(r,n,S){const U=sp(n);r.children.forEach(re=>{this.activateRoutes(re,U[re.value.outlet],S),this.forwardEvent(new yI(re.value.snapshot))}),r.children.length&&this.forwardEvent(new gI(r.value.snapshot))}activateRoutes(r,n,S){const U=r.value,re=n?n.value:null;if($1(U),U===re)if(U.component){const ye=S.getOrCreateContext(U.outlet);this.activateChildRoutes(r,n,ye.children)}else this.activateChildRoutes(r,n,S);else if(U.component){const ye=S.getOrCreateContext(U.outlet);if(this.routeReuseStrategy.shouldAttach(U.snapshot)){const Me=this.routeReuseStrategy.retrieve(U.snapshot);this.routeReuseStrategy.store(U.snapshot,null),ye.children.onOutletReAttached(Me.contexts),ye.attachRef=Me.componentRef,ye.route=Me.route.value,ye.outlet&&ye.outlet.attach(Me.componentRef,Me.route.value),$1(Me.route.value),this.activateChildRoutes(r,null,ye.children)}else{const Me=function JI(t){for(let r=t.parent;r;r=r.parent){const n=r.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig;if(n&&n.component)return null}return null}(U.snapshot),Ne=Me?Me.module.componentFactoryResolver:null;ye.attachRef=null,ye.route=U,ye.resolver=Ne,ye.outlet&&ye.outlet.activateWith(U,Ne),this.activateChildRoutes(r,null,ye.children)}}else this.activateChildRoutes(r,null,S)}}class tx{constructor(r,n){this.routes=r,this.module=n}}function Xf(t){return"function"==typeof t}function Rh(t){return t instanceof Ih}const Cg=Symbol("INITIAL_VALUE");function Sg(){return Lh(t=>function QL(...t){const r=Tt(t),n=rt(t),{args:S,keys:U}=Q3(t);if(0===S.length)return on([],r);const re=new V(function eI(t,r,n=L){return S=>{n5(r,()=>{const{length:U}=t,re=new Array(U);let ye=U,Me=U;for(let Ne=0;Ne<U;Ne++)n5(r,()=>{const ft=on(t[Ne],r);let Bt=!1;ft.subscribe(G(S,Qt=>{re[Ne]=Qt,Bt||(Bt=!0,Me--),Me||S.next(n(re.slice()))},()=>{--ye||S.complete()}))},S)},S)}}(S,r,U?ye=>t5(U,ye):L));return n?re.pipe(e5(n)):re}(t.map(r=>r.pipe(On(1),function rI(...t){const r=Tt(t);return j((n,S)=>{(r?U1(t,n,r):U1(t,n)).subscribe(S)})}(Cg)))).pipe(a5((r,n)=>{let S=!1;return n.reduce((U,re,ye)=>U!==Cg?U:(re===Cg&&(S=!0),S||!1!==re&&ye!==n.length-1&&!Rh(re)?U:re),r)},Cg),Cc(r=>r!==Cg),ie(r=>Rh(r)?r:!0===r),On(1)))}class iP{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Eg,this.attachRef=null}}class Eg{constructor(){this.contexts=new Map}onChildOutletCreated(r,n){const S=this.getOrCreateContext(r);S.outlet=n,this.contexts.set(r,S)}onChildOutletDestroyed(r){const n=this.getContext(r);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){const r=this.contexts;return this.contexts=new Map,r}onOutletReAttached(r){this.contexts=r}getOrCreateContext(r){let n=this.getContext(r);return n||(n=new iP,this.contexts.set(r,n)),n}getContext(r){return this.contexts.get(r)||null}}let Vm=(()=>{class t{constructor(n,S,U,re,ye){this.parentContexts=n,this.location=S,this.resolver=U,this.changeDetector=ye,this.activated=null,this._activatedRoute=null,this.activateEvents=new aa,this.deactivateEvents=new aa,this.attachEvents=new aa,this.detachEvents=new aa,this.name=re||no,n.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const n=this.parentContexts.getContext(this.name);n&&n.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,S){this.activated=n,this._activatedRoute=S,this.location.insert(n.hostView),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,S){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=n;const ye=(S=S||this.resolver).resolveComponentFactory(n._futureSnapshot.routeConfig.component),Me=this.parentContexts.getOrCreateContext(this.name).children,Ne=new aP(n,Me,this.location.injector);this.activated=this.location.createComponent(ye,this.location.length,Ne),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(n){return new(n||t)(Jn(Eg),Jn(oc),Jn(qd),function Oc(t){return function Zs(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const n=t.attrs;if(n){const S=n.length;let U=0;for(;U<S;){const re=n[U];if(Oo(re))break;if(0===re)U+=2;else if("number"==typeof re)for(U++;U<S&&"string"==typeof n[U];)U++;else{if(re===r)return n[U+1];U+=2}}}return null}(Po(),t)}("name"),Jn(um))},t.\u0275dir=ai({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),t})();class aP{constructor(r,n,S){this.route=r,this.childContexts=n,this.parent=S}get(r,n){return r===Oh?this.route:r===Eg?this.childContexts:this.parent.get(r,n)}}let z5=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Go({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(n,S){1&n&&na(0,"router-outlet")},directives:[Vm],encapsulation:2}),t})();function N5(t,r=""){for(let n=0;n<t.length;n++){const S=t[n];oP(S,sP(r,S))}}function oP(t,r){t.children&&N5(t.children,r)}function sP(t,r){return r?t||r.path?t&&!r.path?`${t}/`:!t&&r.path?r.path:`${t}/${r.path}`:"":t}function nx(t){const r=t.children&&t.children.map(nx),n=r?Object.assign(Object.assign({},t),{children:r}):Object.assign({},t);return!n.component&&(r||n.loadChildren)&&n.outlet&&n.outlet!==no&&(n.component=z5),n}function ju(t){return t.outlet||no}function B5(t,r){const n=t.filter(S=>ju(S)===r);return n.push(...t.filter(S=>ju(S)!==r)),n}const j5={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Um(t,r,n){var S;if(""===r.path)return"full"===r.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},j5):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const re=(r.matcher||bI)(n,t,r);if(!re)return Object.assign({},j5);const ye={};Fl(re.posParams,(Ne,ft)=>{ye[ft]=Ne.path});const Me=re.consumed.length>0?Object.assign(Object.assign({},ye),re.consumed[re.consumed.length-1].parameters):ye;return{matched:!0,consumedSegments:re.consumed,lastChild:re.consumed.length,parameters:Me,positionalParamSegments:null!==(S=re.posParams)&&void 0!==S?S:{}}}function Hm(t,r,n,S,U="corrected"){if(n.length>0&&function cP(t,r,n){return n.some(S=>Gm(t,r,S)&&ju(S)!==no)}(t,n,S)){const ye=new uo(r,function uP(t,r,n,S){const U={};U[no]=S,S._sourceSegment=t,S._segmentIndexShift=r.length;for(const re of n)if(""===re.path&&ju(re)!==no){const ye=new uo([],{});ye._sourceSegment=t,ye._segmentIndexShift=r.length,U[ju(re)]=ye}return U}(t,r,S,new uo(n,t.children)));return ye._sourceSegment=t,ye._segmentIndexShift=r.length,{segmentGroup:ye,slicedSegments:[]}}if(0===n.length&&function fP(t,r,n){return n.some(S=>Gm(t,r,S))}(t,n,S)){const ye=new uo(t.segments,function lP(t,r,n,S,U,re){const ye={};for(const Me of S)if(Gm(t,n,Me)&&!U[ju(Me)]){const Ne=new uo([],{});Ne._sourceSegment=t,Ne._segmentIndexShift="legacy"===re?t.segments.length:r.length,ye[ju(Me)]=Ne}return Object.assign(Object.assign({},U),ye)}(t,r,n,S,t.children,U));return ye._sourceSegment=t,ye._segmentIndexShift=r.length,{segmentGroup:ye,slicedSegments:n}}const re=new uo(t.segments,t.children);return re._sourceSegment=t,re._segmentIndexShift=r.length,{segmentGroup:re,slicedSegments:n}}function Gm(t,r,n){return(!(t.hasChildren()||r.length>0)||"full"!==n.pathMatch)&&""===n.path}function V5(t,r,n,S){return!!(ju(t)===S||S!==no&&Gm(r,n,t))&&("**"===t.path||Um(r,t,n).matched)}function U5(t,r,n){return 0===r.length&&!t.children[n]}class Dg{constructor(r){this.segmentGroup=r||null}}class H5{constructor(r){this.urlTree=r}}function qm(t){return new V(r=>r.error(new Dg(t)))}function G5(t){return new V(r=>r.error(new H5(t)))}function hP(t){return new V(r=>r.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class gP{constructor(r,n,S,U,re){this.configLoader=n,this.urlSerializer=S,this.urlTree=U,this.config=re,this.allowRedirects=!0,this.ngModule=r.get(uf)}apply(){const r=Hm(this.urlTree.root,[],[],this.config).segmentGroup,n=new uo(r.segments,r.children);return this.expandSegmentGroup(this.ngModule,this.config,n,no).pipe(ie(re=>this.createUrlTree(rx(re),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Zf(re=>{if(re instanceof H5)return this.allowRedirects=!1,this.match(re.urlTree);throw re instanceof Dg?this.noMatchError(re):re}))}match(r){return this.expandSegmentGroup(this.ngModule,this.config,r.root,no).pipe(ie(U=>this.createUrlTree(rx(U),r.queryParams,r.fragment))).pipe(Zf(U=>{throw U instanceof Dg?this.noMatchError(U):U}))}noMatchError(r){return new Error(`Cannot match any routes. URL Segment: '${r.segmentGroup}'`)}createUrlTree(r,n,S){const U=r.segments.length>0?new uo([],{[no]:r}):r;return new Ih(U,n,S)}expandSegmentGroup(r,n,S,U){return 0===S.segments.length&&S.hasChildren()?this.expandChildren(r,n,S).pipe(ie(re=>new uo([],re))):this.expandSegment(r,S,n,S.segments,U,!0)}expandChildren(r,n,S){const U=[];for(const re of Object.keys(S.children))"primary"===re?U.unshift(re):U.push(re);return on(U).pipe(tp(re=>{const ye=S.children[re],Me=B5(n,re);return this.expandSegmentGroup(r,Me,ye,re).pipe(ie(Ne=>({segment:Ne,outlet:re})))}),a5((re,ye)=>(re[ye.outlet]=ye.segment,re),{}),function oI(t,r){const n=arguments.length>=2;return S=>S.pipe(t?Cc((U,re)=>t(U,re,S)):L,H1(1),n?s5(r):o5(()=>new Im))}())}expandSegment(r,n,S,U,re,ye){return on(S).pipe(tp(Me=>this.expandSegmentAgainstRoute(r,n,S,Me,U,re,ye).pipe(Zf(ft=>{if(ft instanceof Dg)return Va(null);throw ft}))),ap(Me=>!!Me),Zf((Me,Ne)=>{if(Me instanceof Im||"EmptyError"===Me.name){if(U5(n,U,re))return Va(new uo([],{}));throw new Dg(n)}throw Me}))}expandSegmentAgainstRoute(r,n,S,U,re,ye,Me){return V5(U,n,re,ye)?void 0===U.redirectTo?this.matchSegmentAgainstRoute(r,n,U,re,ye):Me&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(r,n,S,U,re,ye):qm(n):qm(n)}expandSegmentAgainstRouteUsingRedirect(r,n,S,U,re,ye){return"**"===U.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(r,S,U,ye):this.expandRegularSegmentAgainstRouteUsingRedirect(r,n,S,U,re,ye)}expandWildCardWithParamsAgainstRouteUsingRedirect(r,n,S,U){const re=this.applyRedirectCommands([],S.redirectTo,{});return S.redirectTo.startsWith("/")?G5(re):this.lineralizeSegments(S,re).pipe(gt(ye=>{const Me=new uo(ye,{});return this.expandSegment(r,Me,n,ye,U,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(r,n,S,U,re,ye){const{matched:Me,consumedSegments:Ne,lastChild:ft,positionalParamSegments:Bt}=Um(n,U,re);if(!Me)return qm(n);const Qt=this.applyRedirectCommands(Ne,U.redirectTo,Bt);return U.redirectTo.startsWith("/")?G5(Qt):this.lineralizeSegments(U,Qt).pipe(gt(Cn=>this.expandSegment(r,n,S,Cn.concat(re.slice(ft)),ye,!1)))}matchSegmentAgainstRoute(r,n,S,U,re){if("**"===S.path)return S.loadChildren?(S._loadedConfig?Va(S._loadedConfig):this.configLoader.load(r.injector,S)).pipe(ie(Cn=>(S._loadedConfig=Cn,new uo(U,{})))):Va(new uo(U,{}));const{matched:ye,consumedSegments:Me,lastChild:Ne}=Um(n,S,U);if(!ye)return qm(n);const ft=U.slice(Ne);return this.getChildConfig(r,S,U).pipe(gt(Qt=>{const Cn=Qt.module,Ln=Qt.routes,{segmentGroup:dr,slicedSegments:Gr}=Hm(n,Me,ft,Ln),li=new uo(dr.segments,dr.children);if(0===Gr.length&&li.hasChildren())return this.expandChildren(Cn,Ln,li).pipe(ie(Ma=>new uo(Me,Ma)));if(0===Ln.length&&0===Gr.length)return Va(new uo(Me,{}));const Xr=ju(S)===re;return this.expandSegment(Cn,li,Ln,Gr,Xr?no:re,!0).pipe(ie(Gi=>new uo(Me.concat(Gi.segments),Gi.children)))}))}getChildConfig(r,n,S){return n.children?Va(new tx(n.children,r)):n.loadChildren?void 0!==n._loadedConfig?Va(n._loadedConfig):this.runCanLoadGuards(r.injector,n,S).pipe(gt(U=>U?this.configLoader.load(r.injector,n).pipe(ie(re=>(n._loadedConfig=re,re))):function dP(t){return new V(r=>r.error(q1(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(n))):Va(new tx([],r))}runCanLoadGuards(r,n,S){const U=n.canLoad;return U&&0!==U.length?Va(U.map(ye=>{const Me=r.get(ye);let Ne;if(function eP(t){return t&&Xf(t.canLoad)}(Me))Ne=Me.canLoad(n,S);else{if(!Xf(Me))throw new Error("Invalid CanLoad guard");Ne=Me(n,S)}return Ec(Ne)})).pipe(Sg(),mu(ye=>{if(!Rh(ye))return;const Me=q1(`Redirecting to "${this.urlSerializer.serialize(ye)}"`);throw Me.url=ye,Me}),ie(ye=>!0===ye)):Va(!0)}lineralizeSegments(r,n){let S=[],U=n.root;for(;;){if(S=S.concat(U.segments),0===U.numberOfChildren)return Va(S);if(U.numberOfChildren>1||!U.children[no])return hP(r.redirectTo);U=U.children[no]}}applyRedirectCommands(r,n,S){return this.applyRedirectCreatreUrlTree(n,this.urlSerializer.parse(n),r,S)}applyRedirectCreatreUrlTree(r,n,S,U){const re=this.createSegmentGroup(r,n.root,S,U);return new Ih(re,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(r,n){const S={};return Fl(r,(U,re)=>{if("string"==typeof U&&U.startsWith(":")){const Me=U.substring(1);S[re]=n[Me]}else S[re]=U}),S}createSegmentGroup(r,n,S,U){const re=this.createSegments(r,n.segments,S,U);let ye={};return Fl(n.children,(Me,Ne)=>{ye[Ne]=this.createSegmentGroup(r,Me,S,U)}),new uo(re,ye)}createSegments(r,n,S,U){return n.map(re=>re.path.startsWith(":")?this.findPosParam(r,re,U):this.findOrReturn(re,S))}findPosParam(r,n,S){const U=S[n.path.substring(1)];if(!U)throw new Error(`Cannot redirect to '${r}'. Cannot find '${n.path}'.`);return U}findOrReturn(r,n){let S=0;for(const U of n){if(U.path===r.path)return n.splice(S),U;S++}return r}}function rx(t){const r={};for(const S of Object.keys(t.children)){const re=rx(t.children[S]);(re.segments.length>0||re.hasChildren())&&(r[S]=re)}return function mP(t){if(1===t.numberOfChildren&&t.children[no]){const r=t.children[no];return new uo(t.segments.concat(r.segments),r.children)}return t}(new uo(t.segments,r))}class q5{constructor(r){this.path=r,this.route=this.path[this.path.length-1]}}class Wm{constructor(r,n){this.component=r,this.route=n}}function vP(t,r,n){const S=t._root;return Lg(S,r?r._root:null,n,[S.value])}function Ym(t,r,n){const S=function bP(t){if(!t)return null;for(let r=t.parent;r;r=r.parent){const n=r.routeConfig;if(n&&n._loadedConfig)return n._loadedConfig}return null}(r);return(S?S.module.injector:n).get(t)}function Lg(t,r,n,S,U={canDeactivateChecks:[],canActivateChecks:[]}){const re=sp(r);return t.children.forEach(ye=>{(function _P(t,r,n,S,U={canDeactivateChecks:[],canActivateChecks:[]}){const re=t.value,ye=r?r.value:null,Me=n?n.getContext(t.value.outlet):null;if(ye&&re.routeConfig===ye.routeConfig){const Ne=function wP(t,r,n){if("function"==typeof n)return n(t,r);switch(n){case"pathParamsChange":return!Ph(t.url,r.url);case"pathParamsOrQueryParamsChange":return!Ph(t.url,r.url)||!Sc(t.queryParams,r.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!K1(t,r)||!Sc(t.queryParams,r.queryParams);default:return!K1(t,r)}}(ye,re,re.routeConfig.runGuardsAndResolvers);Ne?U.canActivateChecks.push(new q5(S)):(re.data=ye.data,re._resolvedData=ye._resolvedData),Lg(t,r,re.component?Me?Me.children:null:n,S,U),Ne&&Me&&Me.outlet&&Me.outlet.isActivated&&U.canDeactivateChecks.push(new Wm(Me.outlet.component,ye))}else ye&&Ig(r,Me,U),U.canActivateChecks.push(new q5(S)),Lg(t,null,re.component?Me?Me.children:null:n,S,U)})(ye,re[ye.value.outlet],n,S.concat([ye.value]),U),delete re[ye.value.outlet]}),Fl(re,(ye,Me)=>Ig(ye,n.getContext(Me),U)),U}function Ig(t,r,n){const S=sp(t),U=t.value;Fl(S,(re,ye)=>{Ig(re,U.component?r?r.children.getContext(ye):null:r,n)}),n.canDeactivateChecks.push(new Wm(U.component&&r&&r.outlet&&r.outlet.isActivated?r.outlet.component:null,U))}class LP{}function W5(t){return new V(r=>r.error(t))}class PP{constructor(r,n,S,U,re,ye){this.rootComponentType=r,this.config=n,this.urlTree=S,this.url=U,this.paramsInheritanceStrategy=re,this.relativeLinkResolution=ye}recognize(){const r=Hm(this.urlTree.root,[],[],this.config.filter(ye=>void 0===ye.redirectTo),this.relativeLinkResolution).segmentGroup,n=this.processSegmentGroup(this.config,r,no);if(null===n)return null;const S=new Nm([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},no,this.rootComponentType,null,this.urlTree.root,-1,{}),U=new vf(S,n),re=new D5(this.url,U);return this.inheritParamsAndData(re._root),re}inheritParamsAndData(r){const n=r.value,S=E5(n,this.paramsInheritanceStrategy);n.params=Object.freeze(S.params),n.data=Object.freeze(S.data),r.children.forEach(U=>this.inheritParamsAndData(U))}processSegmentGroup(r,n,S){return 0===n.segments.length&&n.hasChildren()?this.processChildren(r,n):this.processSegment(r,n,n.segments,S)}processChildren(r,n){const S=[];for(const re of Object.keys(n.children)){const ye=n.children[re],Me=B5(r,re),Ne=this.processSegmentGroup(Me,ye,re);if(null===Ne)return null;S.push(...Ne)}const U=Y5(S);return function OP(t){t.sort((r,n)=>r.value.outlet===no?-1:n.value.outlet===no?1:r.value.outlet.localeCompare(n.value.outlet))}(U),U}processSegment(r,n,S,U){for(const re of r){const ye=this.processSegmentAgainstRoute(re,n,S,U);if(null!==ye)return ye}return U5(n,S,U)?[]:null}processSegmentAgainstRoute(r,n,S,U){if(r.redirectTo||!V5(r,n,S,U))return null;let re,ye=[],Me=[];if("**"===r.path){const Ln=S.length>0?g5(S).parameters:{};re=new Nm(S,Ln,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$5(r),ju(r),r.component,r,Z5(n),X5(n)+S.length,K5(r))}else{const Ln=Um(n,r,S);if(!Ln.matched)return null;ye=Ln.consumedSegments,Me=S.slice(Ln.lastChild),re=new Nm(ye,Ln.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,$5(r),ju(r),r.component,r,Z5(n),X5(n)+ye.length,K5(r))}const Ne=function RP(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(r),{segmentGroup:ft,slicedSegments:Bt}=Hm(n,ye,Me,Ne.filter(Ln=>void 0===Ln.redirectTo),this.relativeLinkResolution);if(0===Bt.length&&ft.hasChildren()){const Ln=this.processChildren(Ne,ft);return null===Ln?null:[new vf(re,Ln)]}if(0===Ne.length&&0===Bt.length)return[new vf(re,[])];const Qt=ju(r)===U,Cn=this.processSegment(Ne,ft,Bt,Qt?no:U);return null===Cn?null:[new vf(re,Cn)]}}function FP(t){const r=t.value.routeConfig;return r&&""===r.path&&void 0===r.redirectTo}function Y5(t){const r=[],n=new Set;for(const S of t){if(!FP(S)){r.push(S);continue}const U=r.find(re=>S.value.routeConfig===re.value.routeConfig);void 0!==U?(U.children.push(...S.children),n.add(U)):r.push(S)}for(const S of n){const U=Y5(S.children);r.push(new vf(S.value,U))}return r.filter(S=>!n.has(S))}function Z5(t){let r=t;for(;r._sourceSegment;)r=r._sourceSegment;return r}function X5(t){let r=t,n=r._segmentIndexShift?r._segmentIndexShift:0;for(;r._sourceSegment;)r=r._sourceSegment,n+=r._segmentIndexShift?r._segmentIndexShift:0;return n-1}function $5(t){return t.data||{}}function K5(t){return t.resolve||{}}function J5(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function ix(t){return Lh(r=>{const n=t(r);return n?on(n).pipe(ie(()=>r)):Va(r)})}class GP extends class HP{shouldDetach(r){return!1}store(r,n){}shouldAttach(r){return!1}retrieve(r){return null}shouldReuseRoute(r,n){return r.routeConfig===n.routeConfig}}{}const ax=new Ea("ROUTES");class Q5{constructor(r,n,S,U){this.injector=r,this.compiler=n,this.onLoadStartListener=S,this.onLoadEndListener=U}load(r,n){if(n._loader$)return n._loader$;this.onLoadStartListener&&this.onLoadStartListener(n);const U=this.loadModuleFactory(n.loadChildren).pipe(ie(re=>{this.onLoadEndListener&&this.onLoadEndListener(n);const ye=re.create(r);return new tx(p5(ye.injector.get(ax,void 0,ki.Self|ki.Optional)).map(nx),ye)}),Zf(re=>{throw n._loader$=void 0,re}));return n._loader$=new nI(U,()=>new $).pipe(i5()),n._loader$}loadModuleFactory(r){return Ec(r()).pipe(gt(n=>n instanceof h2?Va(n):on(this.compiler.compileModuleAsync(n))))}}class WP{shouldProcessUrl(r){return!0}extract(r){return r}merge(r,n){return r}}function YP(t){throw t}function ZP(t,r,n){return r.parse("/")}function eT(t,r){return Va(null)}const XP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},$P={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let yu=(()=>{class t{constructor(n,S,U,re,ye,Me,Ne){this.rootComponentType=n,this.urlSerializer=S,this.rootContexts=U,this.location=re,this.config=Ne,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new $,this.errorHandler=YP,this.malformedUriErrorHandler=ZP,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:eT,afterPreactivation:eT},this.urlHandlingStrategy=new WP,this.routeReuseStrategy=new GP,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=ye.get(uf),this.console=ye.get(Z2);const Qt=ye.get(Gs);this.isNgZoneEnabled=Qt instanceof Gs&&Gs.isInAngularZone(),this.resetConfig(Ne),this.currentUrlTree=function wI(){return new Ih(new uo([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Q5(ye,Me,Cn=>this.triggerEvent(new u5(Cn)),Cn=>this.triggerEvent(new c5(Cn))),this.routerState=S5(this.currentUrlTree,this.rootComponentType),this.transitions=new Bu({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var n;return null===(n=this.location.getState())||void 0===n?void 0:n.\u0275routerPageId}setupNavigations(n){const S=this.events;return n.pipe(Cc(U=>0!==U.id),ie(U=>Object.assign(Object.assign({},U),{extractedUrl:this.urlHandlingStrategy.extract(U.rawUrl)})),Lh(U=>{let re=!1,ye=!1;return Va(U).pipe(mu(Me=>{this.currentNavigation={id:Me.id,initialUrl:Me.currentRawUrl,extractedUrl:Me.extractedUrl,trigger:Me.source,extras:Me.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Lh(Me=>{const Ne=this.browserUrlTree.toString(),ft=!this.navigated||Me.extractedUrl.toString()!==Ne||Ne!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||ft)&&this.urlHandlingStrategy.shouldProcessUrl(Me.rawUrl))return Zm(Me.source)&&(this.browserUrlTree=Me.extractedUrl),Va(Me).pipe(Lh(Qt=>{const Cn=this.transitions.getValue();return S.next(new G1(Qt.id,this.serializeUrl(Qt.extractedUrl),Qt.source,Qt.restoredState)),Cn!==this.transitions.getValue()?_t:Promise.resolve(Qt)}),function yP(t,r,n,S){return Lh(U=>function pP(t,r,n,S,U){return new gP(t,r,n,S,U).apply()}(t,r,n,U.extractedUrl,S).pipe(ie(re=>Object.assign(Object.assign({},U),{urlAfterRedirects:re}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),mu(Qt=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Qt.urlAfterRedirects})}),function zP(t,r,n,S,U){return gt(re=>function IP(t,r,n,S,U="emptyOnly",re="legacy"){try{const ye=new PP(t,r,n,S,U,re).recognize();return null===ye?W5(new LP):Va(ye)}catch(ye){return W5(ye)}}(t,r,re.urlAfterRedirects,n(re.urlAfterRedirects),S,U).pipe(ie(ye=>Object.assign(Object.assign({},re),{targetSnapshot:ye}))))}(this.rootComponentType,this.config,Qt=>this.serializeUrl(Qt),this.paramsInheritanceStrategy,this.relativeLinkResolution),mu(Qt=>{if("eager"===this.urlUpdateStrategy){if(!Qt.extras.skipLocationChange){const Ln=this.urlHandlingStrategy.merge(Qt.urlAfterRedirects,Qt.rawUrl);this.setBrowserUrl(Ln,Qt)}this.browserUrlTree=Qt.urlAfterRedirects}const Cn=new uI(Qt.id,this.serializeUrl(Qt.extractedUrl),this.serializeUrl(Qt.urlAfterRedirects),Qt.targetSnapshot);S.next(Cn)}));if(ft&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Cn,extractedUrl:Ln,source:dr,restoredState:Gr,extras:li}=Me,Xr=new G1(Cn,this.serializeUrl(Ln),dr,Gr);S.next(Xr);const Nr=S5(Ln,this.rootComponentType).snapshot;return Va(Object.assign(Object.assign({},Me),{targetSnapshot:Nr,urlAfterRedirects:Ln,extras:Object.assign(Object.assign({},li),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Me.rawUrl,Me.resolve(null),_t}),ix(Me=>{const{targetSnapshot:Ne,id:ft,extractedUrl:Bt,rawUrl:Qt,extras:{skipLocationChange:Cn,replaceUrl:Ln}}=Me;return this.hooks.beforePreactivation(Ne,{navigationId:ft,appliedUrlTree:Bt,rawUrlTree:Qt,skipLocationChange:!!Cn,replaceUrl:!!Ln})}),mu(Me=>{const Ne=new cI(Me.id,this.serializeUrl(Me.extractedUrl),this.serializeUrl(Me.urlAfterRedirects),Me.targetSnapshot);this.triggerEvent(Ne)}),ie(Me=>Object.assign(Object.assign({},Me),{guards:vP(Me.targetSnapshot,Me.currentSnapshot,this.rootContexts)})),function TP(t,r){return gt(n=>{const{targetSnapshot:S,currentSnapshot:U,guards:{canActivateChecks:re,canDeactivateChecks:ye}}=n;return 0===ye.length&&0===re.length?Va(Object.assign(Object.assign({},n),{guardsResult:!0})):function AP(t,r,n,S){return on(t).pipe(gt(U=>function DP(t,r,n,S,U){const re=r&&r.routeConfig?r.routeConfig.canDeactivate:null;return re&&0!==re.length?Va(re.map(Me=>{const Ne=Ym(Me,r,U);let ft;if(function rP(t){return t&&Xf(t.canDeactivate)}(Ne))ft=Ec(Ne.canDeactivate(t,r,n,S));else{if(!Xf(Ne))throw new Error("Invalid CanDeactivate guard");ft=Ec(Ne(t,r,n,S))}return ft.pipe(ap())})).pipe(Sg()):Va(!0)}(U.component,U.route,n,r,S)),ap(U=>!0!==U,!0))}(ye,S,U,t).pipe(gt(Me=>Me&&function QI(t){return"boolean"==typeof t}(Me)?function MP(t,r,n,S){return on(r).pipe(tp(U=>U1(function CP(t,r){return null!==t&&r&&r(new pI(t)),Va(!0)}(U.route.parent,S),function kP(t,r){return null!==t&&r&&r(new mI(t)),Va(!0)}(U.route,S),function EP(t,r,n){const S=r[r.length-1],re=r.slice(0,r.length-1).reverse().map(ye=>function xP(t){const r=t.routeConfig?t.routeConfig.canActivateChild:null;return r&&0!==r.length?{node:t,guards:r}:null}(ye)).filter(ye=>null!==ye).map(ye=>r5(()=>Va(ye.guards.map(Ne=>{const ft=Ym(Ne,ye.node,n);let Bt;if(function nP(t){return t&&Xf(t.canActivateChild)}(ft))Bt=Ec(ft.canActivateChild(S,t));else{if(!Xf(ft))throw new Error("Invalid CanActivateChild guard");Bt=Ec(ft(S,t))}return Bt.pipe(ap())})).pipe(Sg())));return Va(re).pipe(Sg())}(t,U.path,n),function SP(t,r,n){const S=r.routeConfig?r.routeConfig.canActivate:null;if(!S||0===S.length)return Va(!0);const U=S.map(re=>r5(()=>{const ye=Ym(re,r,n);let Me;if(function tP(t){return t&&Xf(t.canActivate)}(ye))Me=Ec(ye.canActivate(r,t));else{if(!Xf(ye))throw new Error("Invalid CanActivate guard");Me=Ec(ye(r,t))}return Me.pipe(ap())}));return Va(U).pipe(Sg())}(t,U.route,n))),ap(U=>!0!==U,!0))}(S,re,t,r):Va(Me)),ie(Me=>Object.assign(Object.assign({},n),{guardsResult:Me})))})}(this.ngModule.injector,Me=>this.triggerEvent(Me)),mu(Me=>{if(Rh(Me.guardsResult)){const ft=q1(`Redirecting to "${this.serializeUrl(Me.guardsResult)}"`);throw ft.url=Me.guardsResult,ft}const Ne=new fI(Me.id,this.serializeUrl(Me.extractedUrl),this.serializeUrl(Me.urlAfterRedirects),Me.targetSnapshot,!!Me.guardsResult);this.triggerEvent(Ne)}),Cc(Me=>!!Me.guardsResult||(this.restoreHistory(Me),this.cancelNavigationTransition(Me,""),!1)),ix(Me=>{if(Me.guards.canActivateChecks.length)return Va(Me).pipe(mu(Ne=>{const ft=new hI(Ne.id,this.serializeUrl(Ne.extractedUrl),this.serializeUrl(Ne.urlAfterRedirects),Ne.targetSnapshot);this.triggerEvent(ft)}),Lh(Ne=>{let ft=!1;return Va(Ne).pipe(function NP(t,r){return gt(n=>{const{targetSnapshot:S,guards:{canActivateChecks:U}}=n;if(!U.length)return Va(n);let re=0;return on(U).pipe(tp(ye=>function BP(t,r,n,S){return function jP(t,r,n,S){const U=J5(t);if(0===U.length)return Va({});const re={};return on(U).pipe(gt(ye=>function VP(t,r,n,S){const U=Ym(t,r,S);return Ec(U.resolve?U.resolve(r,n):U(r,n))}(t[ye],r,n,S).pipe(mu(Me=>{re[ye]=Me}))),H1(1),gt(()=>J5(re).length===U.length?Va(re):_t))}(t._resolve,t,r,S).pipe(ie(re=>(t._resolvedData=re,t.data=Object.assign(Object.assign({},t.data),E5(t,n).resolve),null)))}(ye.route,S,t,r)),mu(()=>re++),H1(1),gt(ye=>re===U.length?Va(n):_t))})}(this.paramsInheritanceStrategy,this.ngModule.injector),mu({next:()=>ft=!0,complete:()=>{ft||(this.restoreHistory(Ne),this.cancelNavigationTransition(Ne,"At least one route resolver didn't emit any value."))}}))}),mu(Ne=>{const ft=new dI(Ne.id,this.serializeUrl(Ne.extractedUrl),this.serializeUrl(Ne.urlAfterRedirects),Ne.targetSnapshot);this.triggerEvent(ft)}))}),ix(Me=>{const{targetSnapshot:Ne,id:ft,extractedUrl:Bt,rawUrl:Qt,extras:{skipLocationChange:Cn,replaceUrl:Ln}}=Me;return this.hooks.afterPreactivation(Ne,{navigationId:ft,appliedUrlTree:Bt,rawUrlTree:Qt,skipLocationChange:!!Cn,replaceUrl:!!Ln})}),ie(Me=>{const Ne=function jI(t,r,n){const S=Mg(t,r._root,n?n._root:void 0);return new C5(S,r)}(this.routeReuseStrategy,Me.targetSnapshot,Me.currentRouterState);return Object.assign(Object.assign({},Me),{targetRouterState:Ne})}),mu(Me=>{this.currentUrlTree=Me.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Me.urlAfterRedirects,Me.rawUrl),this.routerState=Me.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Me.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Me),this.browserUrlTree=Me.urlAfterRedirects)}),((t,r,n)=>ie(S=>(new KI(r,S.targetRouterState,S.currentRouterState,n).activate(t),S)))(this.rootContexts,this.routeReuseStrategy,Me=>this.triggerEvent(Me)),mu({next(){re=!0},complete(){re=!0}}),function sI(t){return j((r,n)=>{try{r.subscribe(n)}finally{n.add(t)}})}(()=>{var Me;re||ye||this.cancelNavigationTransition(U,`Navigation ID ${U.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Me=this.currentNavigation)||void 0===Me?void 0:Me.id)===U.id&&(this.currentNavigation=null)}),Zf(Me=>{if(ye=!0,function xI(t){return t&&t[h5]}(Me)){const Ne=Rh(Me.url);Ne||(this.navigated=!0,this.restoreHistory(U,!0));const ft=new l5(U.id,this.serializeUrl(U.extractedUrl),Me.message);S.next(ft),Ne?setTimeout(()=>{const Bt=this.urlHandlingStrategy.merge(Me.url,this.rawUrlTree),Qt={skipLocationChange:U.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Zm(U.source)};this.scheduleNavigation(Bt,"imperative",null,Qt,{resolve:U.resolve,reject:U.reject,promise:U.promise})},0):U.resolve(!1)}else{this.restoreHistory(U,!0);const Ne=new lI(U.id,this.serializeUrl(U.extractedUrl),Me);S.next(Ne);try{U.resolve(this.errorHandler(Me))}catch(ft){U.reject(ft)}}return _t}))}))}resetRootComponentType(n){this.rootComponentType=n,this.routerState.root.component=this.rootComponentType}setTransition(n){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),n))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(n=>{const S="popstate"===n.type?"popstate":"hashchange";"popstate"===S&&setTimeout(()=>{var U;const re={replaceUrl:!0},ye=(null===(U=n.state)||void 0===U?void 0:U.navigationId)?n.state:null;if(ye){const Ne=Object.assign({},ye);delete Ne.navigationId,delete Ne.\u0275routerPageId,0!==Object.keys(Ne).length&&(re.state=Ne)}const Me=this.parseUrl(n.url);this.scheduleNavigation(Me,S,ye,re)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(n){this.events.next(n)}resetConfig(n){N5(n),this.config=n.map(nx),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(n,S={}){const{relativeTo:U,queryParams:re,fragment:ye,queryParamsHandling:Me,preserveFragment:Ne}=S,ft=U||this.routerState.root,Bt=Ne?this.currentUrlTree.fragment:ye;let Qt=null;switch(Me){case"merge":Qt=Object.assign(Object.assign({},this.currentUrlTree.queryParams),re);break;case"preserve":Qt=this.currentUrlTree.queryParams;break;default:Qt=re||null}return null!==Qt&&(Qt=this.removeEmptyProps(Qt)),function HI(t,r,n,S,U){if(0===n.length)return J1(r.root,r.root,r,S,U);const re=function GI(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new P5(!0,0,t);let r=0,n=!1;const S=t.reduce((U,re,ye)=>{if("object"==typeof re&&null!=re){if(re.outlets){const Me={};return Fl(re.outlets,(Ne,ft)=>{Me[ft]="string"==typeof Ne?Ne.split("/"):Ne}),[...U,{outlets:Me}]}if(re.segmentPath)return[...U,re.segmentPath]}return"string"!=typeof re?[...U,re]:0===ye?(re.split("/").forEach((Me,Ne)=>{0==Ne&&"."===Me||(0==Ne&&""===Me?n=!0:".."===Me?r++:""!=Me&&U.push(Me))}),U):[...U,re]},[]);return new P5(n,r,S)}(n);if(re.toRoot())return J1(r.root,new uo([],{}),r,S,U);const ye=function qI(t,r,n){if(t.isAbsolute)return new Q1(r.root,!0,0);if(-1===n.snapshot._lastPathIndex){const re=n.snapshot._urlSegment;return new Q1(re,re===r.root,0)}const S=Bm(t.commands[0])?0:1;return function WI(t,r,n){let S=t,U=r,re=n;for(;re>U;){if(re-=U,S=S.parent,!S)throw new Error("Invalid number of '../'");U=S.segments.length}return new Q1(S,!1,U-re)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+S,t.numberOfDoubleDots)}(re,r,t),Me=ye.processChildren?jm(ye.segmentGroup,ye.index,re.commands):O5(ye.segmentGroup,ye.index,re.commands);return J1(ye.segmentGroup,Me,r,S,U)}(ft,this.currentUrlTree,n,Qt,null!=Bt?Bt:null)}navigateByUrl(n,S={skipLocationChange:!1}){const U=Rh(n)?n:this.parseUrl(n),re=this.urlHandlingStrategy.merge(U,this.rawUrlTree);return this.scheduleNavigation(re,"imperative",null,S)}navigate(n,S={skipLocationChange:!1}){return function KP(t){for(let r=0;r<t.length;r++){const n=t[r];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${r}`)}}(n),this.navigateByUrl(this.createUrlTree(n,S),S)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){let S;try{S=this.urlSerializer.parse(n)}catch(U){S=this.malformedUriErrorHandler(U,this.urlSerializer,n)}return S}isActive(n,S){let U;if(U=!0===S?Object.assign({},XP):!1===S?Object.assign({},$P):S,Rh(n))return y5(this.currentUrlTree,n,U);const re=this.parseUrl(n);return y5(this.currentUrlTree,re,U)}removeEmptyProps(n){return Object.keys(n).reduce((S,U)=>{const re=n[U];return null!=re&&(S[U]=re),S},{})}processNavigations(){this.navigations.subscribe(n=>{this.navigated=!0,this.lastSuccessfulId=n.id,this.currentPageId=n.targetPageId,this.events.next(new wg(n.id,this.serializeUrl(n.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,n.resolve(!0)},n=>{this.console.warn(`Unhandled Navigation Error: ${n}`)})}scheduleNavigation(n,S,U,re,ye){var Me,Ne,ft;if(this.disposed)return Promise.resolve(!1);const Bt=this.transitions.value,Qt=Zm(S)&&Bt&&!Zm(Bt.source),Cn=Bt.rawUrl.toString()===n.toString(),Ln=Bt.id===(null===(Me=this.currentNavigation)||void 0===Me?void 0:Me.id);if(Qt&&Cn&&Ln)return Promise.resolve(!0);let Gr,li,Xr;ye?(Gr=ye.resolve,li=ye.reject,Xr=ye.promise):Xr=new Promise((Ma,mo)=>{Gr=Ma,li=mo});const Nr=++this.navigationId;let Gi;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(U=this.location.getState()),Gi=U&&U.\u0275routerPageId?U.\u0275routerPageId:re.replaceUrl||re.skipLocationChange?null!==(Ne=this.browserPageId)&&void 0!==Ne?Ne:0:(null!==(ft=this.browserPageId)&&void 0!==ft?ft:0)+1):Gi=0,this.setTransition({id:Nr,targetPageId:Gi,source:S,restoredState:U,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:n,extras:re,resolve:Gr,reject:li,promise:Xr,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Xr.catch(Ma=>Promise.reject(Ma))}setBrowserUrl(n,S){const U=this.urlSerializer.serialize(n),re=Object.assign(Object.assign({},S.extras.state),this.generateNgRouterState(S.id,S.targetPageId));this.location.isCurrentPathEqualTo(U)||S.extras.replaceUrl?this.location.replaceState(U,"",re):this.location.go(U,"",re)}restoreHistory(n,S=!1){var U,re;if("computed"===this.canceledNavigationResolution){const ye=this.currentPageId-n.targetPageId;"popstate"!==n.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(U=this.currentNavigation)||void 0===U?void 0:U.finalUrl)||0===ye?this.currentUrlTree===(null===(re=this.currentNavigation)||void 0===re?void 0:re.finalUrl)&&0===ye&&(this.resetState(n),this.browserUrlTree=n.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(ye)}else"replace"===this.canceledNavigationResolution&&(S&&this.resetState(n),this.resetUrlToCurrentUrlTree())}resetState(n){this.routerState=n.currentRouterState,this.currentUrlTree=n.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(n,S){const U=new l5(n.id,this.serializeUrl(n.extractedUrl),S);this.triggerEvent(U),n.resolve(!1)}generateNgRouterState(n,S){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:S}:{navigationId:n}}}return t.\u0275fac=function(n){pv()},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})();function Zm(t){return"imperative"!==t}let Xm=(()=>{class t{constructor(n,S,U){this.router=n,this.route=S,this.locationStrategy=U,this.commands=null,this.href=null,this.onChanges=new $,this.subscription=n.events.subscribe(re=>{re instanceof wg&&this.updateTargetUrlAndHref()})}set routerLink(n){this.commands=null!=n?Array.isArray(n)?n:[n]:null}ngOnChanges(n){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(n,S,U,re,ye){if(0!==n||S||U||re||ye||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const Me={skipLocationChange:lp(this.skipLocationChange),replaceUrl:lp(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Me),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:lp(this.preserveFragment)})}}return t.\u0275fac=function(n){return new(n||t)(Jn(yu),Jn(Oh),Jn(Kd))},t.\u0275dir=ai({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(n,S){1&n&&To("click",function(re){return S.onClick(re.button,re.ctrlKey,re.shiftKey,re.altKey,re.metaKey)}),2&n&&nc("target",S.target)("href",S.href,Lp)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[pi]}),t})();function lp(t){return""===t||!!t}class tT{}class nT{preload(r,n){return Va(null)}}let rT=(()=>{class t{constructor(n,S,U,re){this.router=n,this.injector=U,this.preloadingStrategy=re,this.loader=new Q5(U,S,Ne=>n.triggerEvent(new u5(Ne)),Ne=>n.triggerEvent(new c5(Ne)))}setUpPreloading(){this.subscription=this.router.events.pipe(Cc(n=>n instanceof wg),tp(()=>this.preload())).subscribe(()=>{})}preload(){const n=this.injector.get(uf);return this.processRoutes(n,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(n,S){const U=[];for(const re of S)if(re.loadChildren&&!re.canLoad&&re._loadedConfig){const ye=re._loadedConfig;U.push(this.processRoutes(ye.module,ye.routes))}else re.loadChildren&&!re.canLoad?U.push(this.preloadConfig(n,re)):re.children&&U.push(this.processRoutes(n,re.children));return on(U).pipe(wt(),ie(re=>{}))}preloadConfig(n,S){return this.preloadingStrategy.preload(S,()=>(S._loadedConfig?Va(S._loadedConfig):this.loader.load(n.injector,S)).pipe(gt(re=>(S._loadedConfig=re,this.processRoutes(re.module,re.routes)))))}}return t.\u0275fac=function(n){return new(n||t)(Ti(yu),Ti(lm),Ti(Cl),Ti(tT))},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})(),sx=(()=>{class t{constructor(n,S,U={}){this.router=n,this.viewportScroller=S,this.options=U,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},U.scrollPositionRestoration=U.scrollPositionRestoration||"disabled",U.anchorScrolling=U.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(n=>{n instanceof G1?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof wg&&(this.lastId=n.id,this.scheduleScrollEvent(n,this.router.parseUrl(n.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(n=>{n instanceof f5&&(n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(n,S){this.router.triggerEvent(new f5(n,"popstate"===this.lastSource?this.store[this.restoredId]:null,S))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(n){pv()},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})();const Fh=new Ea("ROUTER_CONFIGURATION"),iT=new Ea("ROUTER_FORROOT_GUARD"),t9=[s1,{provide:_5,useClass:w5},{provide:yu,useFactory:function o9(t,r,n,S,U,re,ye={},Me,Ne){const ft=new yu(null,t,r,n,S,U,p5(re));return Me&&(ft.urlHandlingStrategy=Me),Ne&&(ft.routeReuseStrategy=Ne),function s9(t,r){t.errorHandler&&(r.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(r.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(r.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(r.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(r.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(r.urlUpdateStrategy=t.urlUpdateStrategy),t.canceledNavigationResolution&&(r.canceledNavigationResolution=t.canceledNavigationResolution)}(ye,ft),ye.enableTracing&&ft.events.subscribe(Bt=>{var Qt,Cn;null===(Qt=console.group)||void 0===Qt||Qt.call(console,`Router Event: ${Bt.constructor.name}`),console.log(Bt.toString()),console.log(Bt),null===(Cn=console.groupEnd)||void 0===Cn||Cn.call(console)}),ft},deps:[_5,Eg,s1,Cl,lm,ax,Fh,[class qP{},new wu],[class UP{},new wu]]},Eg,{provide:Oh,useFactory:function l9(t){return t.routerState.root},deps:[yu]},rT,nT,class e9{preload(r,n){return n().pipe(Zf(()=>Va(null)))}},{provide:Fh,useValue:{enableTracing:!1}}];function n9(){return new ew("Router",yu)}let $m=(()=>{class t{constructor(n,S){}static forRoot(n,S){return{ngModule:t,providers:[t9,aT(n),{provide:iT,useFactory:a9,deps:[[yu,new wu,new Mf]]},{provide:Fh,useValue:S||{}},{provide:Kd,useFactory:i9,deps:[Ch,[new Yu(o1),new wu],Fh]},{provide:sx,useFactory:r9,deps:[yu,OS,Fh]},{provide:tT,useExisting:S&&S.preloadingStrategy?S.preloadingStrategy:nT},{provide:ew,multi:!0,useFactory:n9},[lx,{provide:sm,multi:!0,useFactory:u9,deps:[lx]},{provide:oT,useFactory:c9,deps:[lx]},{provide:Zv,multi:!0,useExisting:oT}]]}}static forChild(n){return{ngModule:t,providers:[aT(n)]}}}return t.\u0275fac=function(n){return new(n||t)(Ti(iT,8),Ti(yu,8))},t.\u0275mod=Pa({type:t}),t.\u0275inj=tr({}),t})();function r9(t,r,n){return n.scrollOffset&&r.setOffset(n.scrollOffset),new sx(t,r,n)}function i9(t,r,n={}){return n.useHash?new x6(t,r):new bw(t,r)}function a9(t){return"guarded"}function aT(t){return[{provide:Vg,multi:!0,useValue:t},{provide:ax,multi:!0,useValue:t}]}let lx=(()=>{class t{constructor(n){this.injector=n,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new $}appInitializer(){return this.injector.get(m6,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let S=null;const U=new Promise(Me=>S=Me),re=this.injector.get(yu),ye=this.injector.get(Fh);return"disabled"===ye.initialNavigation?(re.setUpLocationChangeListener(),S(!0)):"enabled"===ye.initialNavigation||"enabledBlocking"===ye.initialNavigation?(re.hooks.afterPreactivation=()=>this.initNavigation?Va(null):(this.initNavigation=!0,S(!0),this.resultOfPreactivationDone),re.initialNavigation()):S(!0),U})}bootstrapListener(n){const S=this.injector.get(Fh),U=this.injector.get(rT),re=this.injector.get(sx),ye=this.injector.get(yu),Me=this.injector.get(pg);n===Me.components[0]&&(("enabledNonBlocking"===S.initialNavigation||void 0===S.initialNavigation)&&ye.initialNavigation(),U.setUpPreloading(),re.init(),ye.resetRootComponentType(Me.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return t.\u0275fac=function(n){return new(n||t)(Ti(Cl))},t.\u0275prov=qn({token:t,factory:t.\u0275fac}),t})();function u9(t){return t.appInitializer.bind(t)}function c9(t){return t.bootstrapListener.bind(t)}const oT=new Ea("Router Initializer");let h9=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Pa({type:t}),t.\u0275inj=tr({imports:[[Eh,$m,J3]]}),t})();function sT(t,r,n,S,U,re,ye){try{var Me=t[re](ye),Ne=Me.value}catch(ft){return void n(ft)}Me.done?r(Ne):Promise.resolve(Ne).then(S,U)}const lT={now:()=>(lT.delegate||Date).now(),delegate:void 0};class Pg extends ${constructor(r=1/0,n=1/0,S=lT){super(),this._bufferSize=r,this._windowTime=n,this._timestampProvider=S,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=n===1/0,this._bufferSize=Math.max(1,r),this._windowTime=Math.max(1,n)}next(r){const{isStopped:n,_buffer:S,_infiniteTimeWindow:U,_timestampProvider:re,_windowTime:ye}=this;n||(S.push(r),!U&&S.push(re.now()+ye)),this._trimBuffer(),super.next(r)}_subscribe(r){this._throwIfClosed(),this._trimBuffer();const n=this._innerSubscribe(r),{_infiniteTimeWindow:S,_buffer:U}=this,re=U.slice();for(let ye=0;ye<re.length&&!r.closed;ye+=S?1:2)r.next(re[ye]);return this._checkFinalizedStatuses(r),n}_trimBuffer(){const{_bufferSize:r,_timestampProvider:n,_buffer:S,_infiniteTimeWindow:U}=this,re=(U?1:2)*r;if(r<1/0&&re<S.length&&S.splice(0,S.length-re),!U){const ye=n.now();let Me=0;for(let Ne=1;Ne<S.length&&S[Ne]<=ye;Ne+=2)Me=Ne;Me&&S.splice(0,Me+1)}}}class Og{constructor(){this.Team=""}}let xf=(()=>{class t{constructor(n){this.http=n,this.apiUrl="https://8zaof0vuah.execute-api.us-east-1.amazonaws.com",this.CEAReplay=new Pg(1),this.MatchReplay=new Pg(1),this.TeamsReplay=new Pg(1),this.CurrTeamReplay=new Pg(1),this.SummaryReplay=new Pg(1),this.loadData()}loadData(){this.http.get(this.apiUrl+"/analysis").subscribe(n=>{this.CEAReplay.next(n),console.log("Getting Data from Database");let U=Aw(new Date,"MM/dd hh:mm a","en-US");localStorage.setItem("lastDB",U),console.log("Time: "+U),localStorage.setItem("CEA",JSON.stringify(n))},()=>{try{console.log("Getting Data from Cache"),this.CEAReplay.next(JSON.parse(localStorage.getItem("CEA")))}catch(n){console.error("Could not load Analysis data from server or cache!")}}),this.http.get(this.apiUrl+"/matches").subscribe(n=>{this.MatchReplay.next(n),localStorage.setItem("Matches",JSON.stringify(n))},()=>{try{this.MatchReplay.next(JSON.parse(localStorage.getItem("Matches")))}catch(n){console.error("Could not load Matches data from server or cache!")}}),this.http.get(this.apiUrl+"/currteam").subscribe(n=>{this.CurrTeamReplay.next(n),localStorage.setItem("CurrTeams",JSON.stringify(n))},()=>{try{this.CurrTeamReplay.next(JSON.parse(localStorage.getItem("CurrTeams")))}catch(n){console.error("Could not load Current Teams data from server or cache!")}}),this.http.get(this.apiUrl+"/summary").subscribe(n=>{this.SummaryReplay.next(n),localStorage.setItem("Summary",JSON.stringify(n))},()=>{try{this.SummaryReplay.next(JSON.parse(localStorage.getItem("Summary")))}catch(n){console.error("Could not load Summary data from server or cache!")}}),this.http.get(this.apiUrl+"/pitdata").subscribe(n=>{this.TeamsReplay.next(n),localStorage.setItem("Teams",JSON.stringify(n))},()=>{try{this.TeamsReplay.next(JSON.parse(localStorage.getItem("Teams")))}catch(n){console.error("Could not load Teams data from server or cache!")}})}getFinal24(){var n=this;return function d9(t){return function(){var r=this,n=arguments;return new Promise(function(S,U){var re=t.apply(r,n);function ye(Ne){sT(re,S,U,ye,Me,"next",Ne)}function Me(Ne){sT(re,S,U,ye,Me,"throw",Ne)}ye(void 0)})}}(function*(){try{const S=yield n.http.get(n.apiUrl+"/final24").toPromise();return localStorage.setItem("Final24",JSON.stringify(S)),S}catch(S){try{return JSON.parse(localStorage.getItem("Final24"))}catch(U){return console.error("Could not load Final24 data from server or cache!"),[]}}})()}saveFinal24(n){localStorage.setItem("Final24",JSON.stringify(n)),this.http.post(this.apiUrl+"/final24",JSON.stringify(Og)).subscribe()}}return t.\u0275fac=function(n){return new(n||t)(Ti(s3))},t.\u0275prov=qn({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),uT=(()=>{class t{constructor(n,S){this._renderer=n,this._elementRef=S,this.onChange=U=>{},this.onTouched=()=>{}}setProperty(n,S){this._renderer.setProperty(this._elementRef.nativeElement,n,S)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}}return t.\u0275fac=function(n){return new(n||t)(Jn(ac),Jn(io))},t.\u0275dir=ai({type:t}),t})(),zh=(()=>{class t extends uT{}return t.\u0275fac=function(){let r;return function(S){return(r||(r=oa(t)))(S||t)}}(),t.\u0275dir=ai({type:t,features:[Bi]}),t})();const Dc=new Ea("NgValueAccessor"),m9={provide:Dc,useExisting:fr(()=>up),multi:!0},v9=new Ea("CompositionEventMode");let up=(()=>{class t extends uT{constructor(n,S,U){super(n,S),this._compositionMode=U,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function y9(){const t=kc()?kc().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",null==n?"":n)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}}return t.\u0275fac=function(n){return new(n||t)(Jn(ac),Jn(io),Jn(v9,8))},t.\u0275dir=ai({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,S){1&n&&To("input",function(re){return S._handleInput(re.target.value)})("blur",function(){return S.onTouched()})("compositionstart",function(){return S._compositionStart()})("compositionend",function(re){return S._compositionEnd(re.target.value)})},features:[ms([m9]),Bi]}),t})();const Wl=new Ea("NgValidators"),Kf=new Ea("NgAsyncValidators");function bT(t){return null!=t}function _T(t){const r=rg(t)?on(t):t;return vv(r),r}function wT(t){let r={};return t.forEach(n=>{r=null!=n?Object.assign(Object.assign({},r),n):r}),0===Object.keys(r).length?null:r}function TT(t,r){return r.map(n=>n(t))}function AT(t){return t.map(r=>function b9(t){return!t.validate}(r)?r:n=>r.validate(n))}function ux(t){return null!=t?function MT(t){if(!t)return null;const r=t.filter(bT);return 0==r.length?null:function(n){return wT(TT(n,r))}}(AT(t)):null}function cx(t){return null!=t?function kT(t){if(!t)return null;const r=t.filter(bT);return 0==r.length?null:function(n){return function p9(...t){const r=rt(t),{args:n,keys:S}=Q3(t),U=new V(re=>{const{length:ye}=n;if(!ye)return void re.complete();const Me=new Array(ye);let Ne=ye,ft=ye;for(let Bt=0;Bt<ye;Bt++){let Qt=!1;un(n[Bt]).subscribe(G(re,Cn=>{Qt||(Qt=!0,ft--),Me[Bt]=Cn},()=>Ne--,void 0,()=>{(!Ne||!Qt)&&(ft||re.next(S?t5(S,Me):Me),re.complete())}))}});return r?U.pipe(e5(r)):U}(TT(n,r).map(_T)).pipe(ie(wT))}}(AT(t)):null}function CT(t,r){return null===t?[r]:Array.isArray(t)?[...t,r]:[t,r]}function fx(t){return t?Array.isArray(t)?t:[t]:[]}function Jm(t,r){return Array.isArray(t)?t.includes(r):t===r}function DT(t,r){const n=fx(r);return fx(t).forEach(U=>{Jm(n,U)||n.push(U)}),n}function LT(t,r){return fx(r).filter(n=>!Jm(t,n))}class IT{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(r){this._rawValidators=r||[],this._composedValidatorFn=ux(this._rawValidators)}_setAsyncValidators(r){this._rawAsyncValidators=r||[],this._composedAsyncValidatorFn=cx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(r){this._onDestroyCallbacks.push(r)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(r=>r()),this._onDestroyCallbacks=[]}reset(r){this.control&&this.control.reset(r)}hasError(r,n){return!!this.control&&this.control.hasError(r,n)}getError(r,n){return this.control?this.control.getError(r,n):null}}class Jf extends IT{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class nu extends IT{get formDirective(){return null}get path(){return null}}class PT{constructor(r){this._cd=r}is(r){var n,S,U;return"submitted"===r?!!(null===(n=this._cd)||void 0===n?void 0:n.submitted):!!(null===(U=null===(S=this._cd)||void 0===S?void 0:S.control)||void 0===U?void 0:U[r])}}let Qm=(()=>{class t extends PT{constructor(n){super(n)}}return t.\u0275fac=function(n){return new(n||t)(Jn(Jf,2))},t.\u0275dir=ai({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,S){2&n&&W0("ng-untouched",S.is("untouched"))("ng-touched",S.is("touched"))("ng-pristine",S.is("pristine"))("ng-dirty",S.is("dirty"))("ng-valid",S.is("valid"))("ng-invalid",S.is("invalid"))("ng-pending",S.is("pending"))},features:[Bi]}),t})(),OT=(()=>{class t extends PT{constructor(n){super(n)}}return t.\u0275fac=function(n){return new(n||t)(Jn(nu,10))},t.\u0275dir=ai({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,S){2&n&&W0("ng-untouched",S.is("untouched"))("ng-touched",S.is("touched"))("ng-pristine",S.is("pristine"))("ng-dirty",S.is("dirty"))("ng-valid",S.is("valid"))("ng-invalid",S.is("invalid"))("ng-pending",S.is("pending"))("ng-submitted",S.is("submitted"))},features:[Bi]}),t})();function Rg(t,r){px(t,r),r.valueAccessor.writeValue(t.value),function S9(t,r){r.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&FT(t,r)})}(t,r),function D9(t,r){const n=(S,U)=>{r.valueAccessor.writeValue(S),U&&r.viewToModelUpdate(S)};t.registerOnChange(n),r._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,r),function E9(t,r){r.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&FT(t,r),"submit"!==t.updateOn&&t.markAsTouched()})}(t,r),function C9(t,r){if(r.valueAccessor.setDisabledState){const n=S=>{r.valueAccessor.setDisabledState(S)};t.registerOnDisabledChange(n),r._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,r)}function ry(t,r){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(r)})}function px(t,r){const n=function ST(t){return t._rawValidators}(t);null!==r.validator?t.setValidators(CT(n,r.validator)):"function"==typeof n&&t.setValidators([n]);const S=function ET(t){return t._rawAsyncValidators}(t);null!==r.asyncValidator?t.setAsyncValidators(CT(S,r.asyncValidator)):"function"==typeof S&&t.setAsyncValidators([S]);const U=()=>t.updateValueAndValidity();ry(r._rawValidators,U),ry(r._rawAsyncValidators,U)}function FT(t,r){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),r.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function yx(t,r){const n=t.indexOf(r);n>-1&&t.splice(n,1)}const Fg="VALID",ay="INVALID",cp="PENDING",zg="DISABLED";function xx(t){return(oy(t)?t.validators:t)||null}function BT(t){return Array.isArray(t)?ux(t):t||null}function bx(t,r){return(oy(r)?r.asyncValidators:t)||null}function jT(t){return Array.isArray(t)?cx(t):t||null}function oy(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}const _x=t=>t instanceof Tx;function UT(t){return(t=>t instanceof qT)(t)?t.value:t.getRawValue()}function HT(t,r){const n=_x(t),S=t.controls;if(!(n?Object.keys(S):S).length)throw new Ar(1e3,"");if(!S[r])throw new Ar(1001,"")}function GT(t,r){_x(t),t._forEachChild((S,U)=>{if(void 0===r[U])throw new Ar(1002,"")})}class wx{constructor(r,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=r,this._rawAsyncValidators=n,this._composedValidatorFn=BT(this._rawValidators),this._composedAsyncValidatorFn=jT(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(r){this._rawValidators=this._composedValidatorFn=r}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(r){this._rawAsyncValidators=this._composedAsyncValidatorFn=r}get parent(){return this._parent}get valid(){return this.status===Fg}get invalid(){return this.status===ay}get pending(){return this.status==cp}get disabled(){return this.status===zg}get enabled(){return this.status!==zg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(r){this._rawValidators=r,this._composedValidatorFn=BT(r)}setAsyncValidators(r){this._rawAsyncValidators=r,this._composedAsyncValidatorFn=jT(r)}addValidators(r){this.setValidators(DT(r,this._rawValidators))}addAsyncValidators(r){this.setAsyncValidators(DT(r,this._rawAsyncValidators))}removeValidators(r){this.setValidators(LT(r,this._rawValidators))}removeAsyncValidators(r){this.setAsyncValidators(LT(r,this._rawAsyncValidators))}hasValidator(r){return Jm(this._rawValidators,r)}hasAsyncValidator(r){return Jm(this._rawAsyncValidators,r)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(r={}){this.touched=!0,this._parent&&!r.onlySelf&&this._parent.markAsTouched(r)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(r=>r.markAllAsTouched())}markAsUntouched(r={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!r.onlySelf&&this._parent._updateTouched(r)}markAsDirty(r={}){this.pristine=!1,this._parent&&!r.onlySelf&&this._parent.markAsDirty(r)}markAsPristine(r={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!r.onlySelf&&this._parent._updatePristine(r)}markAsPending(r={}){this.status=cp,!1!==r.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!r.onlySelf&&this._parent.markAsPending(r)}disable(r={}){const n=this._parentMarkedDirty(r.onlySelf);this.status=zg,this.errors=null,this._forEachChild(S=>{S.disable(Object.assign(Object.assign({},r),{onlySelf:!0}))}),this._updateValue(),!1!==r.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},r),{skipPristineCheck:n})),this._onDisabledChange.forEach(S=>S(!0))}enable(r={}){const n=this._parentMarkedDirty(r.onlySelf);this.status=Fg,this._forEachChild(S=>{S.enable(Object.assign(Object.assign({},r),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:r.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},r),{skipPristineCheck:n})),this._onDisabledChange.forEach(S=>S(!1))}_updateAncestors(r){this._parent&&!r.onlySelf&&(this._parent.updateValueAndValidity(r),r.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(r){this._parent=r}updateValueAndValidity(r={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Fg||this.status===cp)&&this._runAsyncValidator(r.emitEvent)),!1!==r.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!r.onlySelf&&this._parent.updateValueAndValidity(r)}_updateTreeValidity(r={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(r)),this.updateValueAndValidity({onlySelf:!0,emitEvent:r.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?zg:Fg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(r){if(this.asyncValidator){this.status=cp,this._hasOwnPendingAsyncValidator=!0;const n=_T(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(S=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(S,{emitEvent:r})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(r,n={}){this.errors=r,this._updateControlsErrors(!1!==n.emitEvent)}get(r){return function O9(t,r,n){if(null==r||(Array.isArray(r)||(r=r.split(n)),Array.isArray(r)&&0===r.length))return null;let S=t;return r.forEach(U=>{S=_x(S)?S.controls.hasOwnProperty(U)?S.controls[U]:null:(t=>t instanceof F9)(S)&&S.at(U)||null}),S}(this,r,".")}getError(r,n){const S=n?this.get(n):this;return S&&S.errors?S.errors[r]:null}hasError(r,n){return!!this.getError(r,n)}get root(){let r=this;for(;r._parent;)r=r._parent;return r}_updateControlsErrors(r){this.status=this._calculateStatus(),r&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(r)}_initObservables(){this.valueChanges=new aa,this.statusChanges=new aa}_calculateStatus(){return this._allControlsDisabled()?zg:this.errors?ay:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(cp)?cp:this._anyControlsHaveStatus(ay)?ay:Fg}_anyControlsHaveStatus(r){return this._anyControls(n=>n.status===r)}_anyControlsDirty(){return this._anyControls(r=>r.dirty)}_anyControlsTouched(){return this._anyControls(r=>r.touched)}_updatePristine(r={}){this.pristine=!this._anyControlsDirty(),this._parent&&!r.onlySelf&&this._parent._updatePristine(r)}_updateTouched(r={}){this.touched=this._anyControlsTouched(),this._parent&&!r.onlySelf&&this._parent._updateTouched(r)}_isBoxedValue(r){return"object"==typeof r&&null!==r&&2===Object.keys(r).length&&"value"in r&&"disabled"in r}_registerOnCollectionChange(r){this._onCollectionChange=r}_setUpdateStrategy(r){oy(r)&&null!=r.updateOn&&(this._updateOn=r.updateOn)}_parentMarkedDirty(r){return!r&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class qT extends wx{constructor(r=null,n,S){super(xx(n),bx(S,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(r),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),oy(n)&&n.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(r)?r.value:r)}setValue(r,n={}){this.value=this._pendingValue=r,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(S=>S(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(r,n={}){this.setValue(r,n)}reset(r=this.defaultValue,n={}){this._applyFormState(r),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(r){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(r){this._onChange.push(r)}_unregisterOnChange(r){yx(this._onChange,r)}registerOnDisabledChange(r){this._onDisabledChange.push(r)}_unregisterOnDisabledChange(r){yx(this._onDisabledChange,r)}_forEachChild(r){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(r){this._isBoxedValue(r)?(this.value=this._pendingValue=r.value,r.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=r}}class Tx extends wx{constructor(r,n,S){super(xx(n),bx(S,n)),this.controls=r,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(r,n){return this.controls[r]?this.controls[r]:(this.controls[r]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(r,n,S={}){this.registerControl(r,n),this.updateValueAndValidity({emitEvent:S.emitEvent}),this._onCollectionChange()}removeControl(r,n={}){this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),delete this.controls[r],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(r,n,S={}){this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),delete this.controls[r],n&&this.registerControl(r,n),this.updateValueAndValidity({emitEvent:S.emitEvent}),this._onCollectionChange()}contains(r){return this.controls.hasOwnProperty(r)&&this.controls[r].enabled}setValue(r,n={}){GT(this,r),Object.keys(r).forEach(S=>{HT(this,S),this.controls[S].setValue(r[S],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(r,n={}){null!=r&&(Object.keys(r).forEach(S=>{this.controls[S]&&this.controls[S].patchValue(r[S],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(r={},n={}){this._forEachChild((S,U)=>{S.reset(r[U],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(r,n,S)=>(r[S]=UT(n),r))}_syncPendingControls(){let r=this._reduceChildren(!1,(n,S)=>!!S._syncPendingControls()||n);return r&&this.updateValueAndValidity({onlySelf:!0}),r}_forEachChild(r){Object.keys(this.controls).forEach(n=>{const S=this.controls[n];S&&r(S,n)})}_setUpControls(){this._forEachChild(r=>{r.setParent(this),r._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(r){for(const n of Object.keys(this.controls)){const S=this.controls[n];if(this.contains(n)&&r(S))return!0}return!1}_reduceValue(){return this._reduceChildren({},(r,n,S)=>((n.enabled||this.disabled)&&(r[S]=n.value),r))}_reduceChildren(r,n){let S=r;return this._forEachChild((U,re)=>{S=n(S,U,re)}),S}_allControlsDisabled(){for(const r of Object.keys(this.controls))if(this.controls[r].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class F9 extends wx{constructor(r,n,S){super(xx(n),bx(S,n)),this.controls=r,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(r){return this.controls[r]}push(r,n={}){this.controls.push(r),this._registerControl(r),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(r,n,S={}){this.controls.splice(r,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:S.emitEvent})}removeAt(r,n={}){this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(r,n,S={}){this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),n&&(this.controls.splice(r,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:S.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(r,n={}){GT(this,r),r.forEach((S,U)=>{HT(this,U),this.at(U).setValue(S,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(r,n={}){null!=r&&(r.forEach((S,U)=>{this.at(U)&&this.at(U).patchValue(S,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(r=[],n={}){this._forEachChild((S,U)=>{S.reset(r[U],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(r=>UT(r))}clear(r={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:r.emitEvent}))}_syncPendingControls(){let r=this.controls.reduce((n,S)=>!!S._syncPendingControls()||n,!1);return r&&this.updateValueAndValidity({onlySelf:!0}),r}_forEachChild(r){this.controls.forEach((n,S)=>{r(n,S)})}_updateValue(){this.value=this.controls.filter(r=>r.enabled||this.disabled).map(r=>r.value)}_anyControls(r){return this.controls.some(n=>n.enabled&&r(n))}_setUpControls(){this._forEachChild(r=>this._registerControl(r))}_allControlsDisabled(){for(const r of this.controls)if(r.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(r){r.setParent(this),r._registerOnCollectionChange(this._onCollectionChange)}}const z9={provide:nu,useExisting:fr(()=>sy)},Ng=(()=>Promise.resolve(null))();let sy=(()=>{class t extends nu{constructor(n,S){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new aa,this.form=new Tx({},ux(n),cx(S))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){Ng.then(()=>{const S=this._findContainer(n.path);n.control=S.registerControl(n.name,n.control),Rg(n.control,n),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){Ng.then(()=>{const S=this._findContainer(n.path);S&&S.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){Ng.then(()=>{const S=this._findContainer(n.path),U=new Tx({});(function zT(t,r){px(t,r)})(U,n),S.registerControl(n.name,U),U.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){Ng.then(()=>{const S=this._findContainer(n.path);S&&S.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,S){Ng.then(()=>{this.form.get(n.path).setValue(S)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submitted=!0,function NT(t,r){t._syncPendingControls(),r.forEach(n=>{const S=n.control;"submit"===S.updateOn&&S._pendingChange&&(n.viewToModelUpdate(S._pendingValue),S._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),!1}onReset(){this.resetForm()}resetForm(n){this.form.reset(n),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}}return t.\u0275fac=function(n){return new(n||t)(Jn(Wl,10),Jn(Kf,10))},t.\u0275dir=ai({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,S){1&n&&To("submit",function(re){return S.onSubmit(re)})("reset",function(){return S.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ms([z9]),Bi]}),t})();const B9={provide:Jf,useExisting:fr(()=>Bg)},ZT=(()=>Promise.resolve(null))();let Bg=(()=>{class t extends Jf{constructor(n,S,U,re,ye){super(),this._changeDetectorRef=ye,this.control=new qT,this._registered=!1,this.update=new aa,this._parent=n,this._setValidators(S),this._setAsyncValidators(U),this.valueAccessor=function mx(t,r){if(!r)return null;let n,S,U;return Array.isArray(r),r.forEach(re=>{re.constructor===up?n=re:function P9(t){return Object.getPrototypeOf(t.constructor)===zh}(re)?S=re:U=re}),U||S||n||null}(0,re)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const S=n.name.previousValue;this.formDirective.removeControl({name:S,path:this._getPath(S)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function gx(t,r){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(r,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Rg(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){ZT.then(()=>{var S;this.control.setValue(n,{emitViewToModelChange:!1}),null===(S=this._changeDetectorRef)||void 0===S||S.markForCheck()})}_updateDisabled(n){const S=n.isDisabled.currentValue,U=""===S||S&&"false"!==S;ZT.then(()=>{var re;U&&!this.control.disabled?this.control.disable():!U&&this.control.disabled&&this.control.enable(),null===(re=this._changeDetectorRef)||void 0===re||re.markForCheck()})}_getPath(n){return this._parent?function ty(t,r){return[...r.path,t]}(n,this._parent):[n]}}return t.\u0275fac=function(n){return new(n||t)(Jn(nu,9),Jn(Wl,10),Jn(Kf,10),Jn(Dc,10),Jn(um,8))},t.\u0275dir=ai({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ms([B9]),Bi,pi]}),t})(),XT=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275dir=ai({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),KT=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Pa({type:t}),t.\u0275inj=tr({}),t})();const Ax=new Ea("NgModelWithFormControlWarning"),X9={provide:Dc,useExisting:fr(()=>ly),multi:!0};function rA(t,r){return null==t?`${r}`:(r&&"object"==typeof r&&(r="Object"),`${t}: ${r}`.slice(0,50))}let ly=(()=>{class t extends zh{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;const U=rA(this._getOptionId(n),n);this.setProperty("value",U)}registerOnChange(n){this.onChange=S=>{this.value=this._getOptionValue(S),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(const S of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(S),n))return S;return null}_getOptionValue(n){const S=function $9(t){return t.split(":")[0]}(n);return this._optionMap.has(S)?this._optionMap.get(S):n}}return t.\u0275fac=function(){let r;return function(S){return(r||(r=oa(t)))(S||t)}}(),t.\u0275dir=ai({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,S){1&n&&To("change",function(re){return S.onChange(re.target.value)})("blur",function(){return S.onTouched()})},inputs:{compareWith:"compareWith"},features:[ms([X9]),Bi]}),t})(),uy=(()=>{class t{constructor(n,S,U){this._element=n,this._renderer=S,this._select=U,this._select&&(this.id=this._select._registerOption())}set ngValue(n){null!=this._select&&(this._select._optionMap.set(this.id,n),this._setElementValue(rA(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(n){return new(n||t)(Jn(io),Jn(ac),Jn(ly,9))},t.\u0275dir=ai({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const K9={provide:Dc,useExisting:fr(()=>Sx),multi:!0};function iA(t,r){return null==t?`${r}`:("string"==typeof r&&(r=`'${r}'`),r&&"object"==typeof r&&(r="Object"),`${t}: ${r}`.slice(0,50))}let Sx=(()=>{class t extends zh{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){let S;if(this.value=n,Array.isArray(n)){const U=n.map(re=>this._getOptionId(re));S=(re,ye)=>{re._setSelected(U.indexOf(ye.toString())>-1)}}else S=(U,re)=>{U._setSelected(!1)};this._optionMap.forEach(S)}registerOnChange(n){this.onChange=S=>{const U=[],re=S.selectedOptions;if(void 0!==re){const ye=re;for(let Me=0;Me<ye.length;Me++){const ft=this._getOptionValue(ye[Me].value);U.push(ft)}}else{const ye=S.options;for(let Me=0;Me<ye.length;Me++){const Ne=ye[Me];if(Ne.selected){const ft=this._getOptionValue(Ne.value);U.push(ft)}}}this.value=U,n(U)}}_registerOption(n){const S=(this._idCounter++).toString();return this._optionMap.set(S,n),S}_getOptionId(n){for(const S of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(S)._value,n))return S;return null}_getOptionValue(n){const S=function J9(t){return t.split(":")[0]}(n);return this._optionMap.has(S)?this._optionMap.get(S)._value:n}}return t.\u0275fac=function(){let r;return function(S){return(r||(r=oa(t)))(S||t)}}(),t.\u0275dir=ai({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,S){1&n&&To("change",function(re){return S.onChange(re.target)})("blur",function(){return S.onTouched()})},inputs:{compareWith:"compareWith"},features:[ms([K9]),Bi]}),t})(),cy=(()=>{class t{constructor(n,S,U){this._element=n,this._renderer=S,this._select=U,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){null!=this._select&&(this._value=n,this._setElementValue(iA(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(iA(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(n){return new(n||t)(Jn(io),Jn(ac),Jn(Sx,9))},t.\u0275dir=ai({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})(),pA=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Pa({type:t}),t.\u0275inj=tr({imports:[[KT]]}),t})(),lO=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Pa({type:t}),t.\u0275inj=tr({imports:[pA]}),t})(),uO=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:Ax,useValue:n.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Pa({type:t}),t.\u0275inj=tr({imports:[pA]}),t})();const cO=["plot"],fO=["*"];class co{static setModuleName(r){co.moduleName=r}static getModuleName(){return co.moduleName}static setPlotly(r){if("object"==typeof r&&"function"!=typeof r.react)throw new Error("Invalid plotly.js version. Please, use any version above 1.40.0");co.plotly=r}static insert(r){return-1===co.instances.indexOf(r)&&co.instances.push(r),r}static remove(r){const n=co.instances.indexOf(r);n>=0&&(co.instances.splice(n,1),co.plotly.purge(r))}getInstanceByDivId(r){for(const n of co.instances)if(n&&n.id===r)return n}getPlotly(){return be(this,void 0,void 0,function*(){return yield this.waitFor(()=>"waiting"!==this._getPlotly()),this._getPlotly()})}_getPlotly(){if(void 0===co.plotly)throw new Error("ViaCDN"===co.moduleName?"Error loading Peer dependency plotly.js from CDN url":"Peer dependency plotly.js isn't installed");return co.plotly}waitFor(r){return new Promise(n=>{const S=()=>{r()?n():setTimeout(S,10)};S()})}newPlot(r,n,S,U,re){return be(this,void 0,void 0,function*(){if(yield this.waitFor(()=>"waiting"!==this._getPlotly()),re){const ye={data:n,layout:S,config:U,frames:re};return this._getPlotly().newPlot(r,ye).then(()=>co.insert(r))}return this._getPlotly().newPlot(r,n,S,U).then(()=>co.insert(r))})}plot(r,n,S,U,re){if(re){const ye={data:n,layout:S,config:U,frames:re};return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(r,ye):this._getPlotly().newPlot(r,ye)}return"function"==typeof this._getPlotly().plot?this._getPlotly().plot(r,n,S,U):this._getPlotly().newPlot(r,n,S,U)}update(r,n,S,U,re){if(re){const ye={data:n,layout:S,config:U,frames:re};return this._getPlotly().react(r,ye)}return this._getPlotly().react(r,n,S,U)}resize(r){return this._getPlotly().Plots.resize(r)}}co.\u0275fac=function(r){return new(r||co)},co.instances=[],co.plotly=void 0,co.moduleName=void 0,co.\u0275prov=qn({factory:function(){return new co},token:co,providedIn:"root"});let gA=(()=>{class t{constructor(n,S,U){this.plotly=n,this.iterableDiffers=S,this.keyValueDiffers=U,this.defaultClassName="js-plotly-plot",this.revision=0,this.debug=!1,this.useResizeHandler=!1,this.updateOnLayoutChange=!0,this.updateOnDataChange=!0,this.updateOnlyWithRevision=!1,this.initialized=new aa,this.update=new aa,this.purge=new aa,this.error=new aa,this.afterExport=new aa,this.afterPlot=new aa,this.animated=new aa,this.animatingFrame=new aa,this.animationInterrupted=new aa,this.autoSize=new aa,this.beforeExport=new aa,this.buttonClicked=new aa,this.click=new aa,this.plotlyClick=new aa,this.clickAnnotation=new aa,this.deselect=new aa,this.doubleClick=new aa,this.framework=new aa,this.hover=new aa,this.legendClick=new aa,this.legendDoubleClick=new aa,this.react=new aa,this.relayout=new aa,this.restyle=new aa,this.redraw=new aa,this.selected=new aa,this.selecting=new aa,this.sliderChange=new aa,this.sliderEnd=new aa,this.sliderStart=new aa,this.transitioning=new aa,this.transitionInterrupted=new aa,this.unhover=new aa,this.relayouting=new aa,this.treemapclick=new aa,this.sunburstclick=new aa,this.eventNames=["afterExport","afterPlot","animated","animatingFrame","animationInterrupted","autoSize","beforeExport","buttonClicked","clickAnnotation","deselect","doubleClick","framework","hover","legendClick","legendDoubleClick","react","relayout","restyle","redraw","selected","selecting","sliderChange","sliderEnd","sliderStart","transitioning","transitionInterrupted","unhover","relayouting","treemapclick","sunburstclick"]}ngOnInit(){this.createPlot().then(()=>{const n=this.createFigure();this.initialized.emit(n)}),this.click.observers.length>0&&console.error("DEPRECATED: Reconsider using `(plotlyClick)` instead of `(click)` to avoid event conflict. Please check https://github.com/plotly/angular-plotly.js#FAQ")}ngOnDestroy(){"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0);const n=this.createFigure();this.purge.emit(n),co.remove(this.plotlyInstance)}ngOnChanges(n){let S=!1;const U=n.revision;U&&!U.isFirstChange()&&(S=!0);const re=n.debug;re&&!re.isFirstChange()&&(S=!0),S&&this.updatePlot(),this.updateWindowResizeHandler()}ngDoCheck(){if(this.updateOnlyWithRevision)return!1;let n=!1;this.updateOnLayoutChange&&(this.layoutDiffer?this.layoutDiffer.diff(this.layout)&&(n=!0):this.layoutDiffer=this.layout?this.keyValueDiffers.find(this.layout).create():void 0),this.updateOnDataChange&&(this.dataDiffer?this.dataDiffer.diff(this.data)&&(n=!0):this.dataDiffer=Array.isArray(this.data)?this.iterableDiffers.find(this.data).create(this.dataDifferTrackBy):void 0),n&&this.plotlyInstance&&this.updatePlot()}getWindow(){return window}getClassName(){let n=[this.defaultClassName];return Array.isArray(this.className)?n=n.concat(this.className):this.className&&n.push(this.className),n.join(" ")}createPlot(){return this.plotly.newPlot(this.plotEl.nativeElement,this.data,this.layout,this.config,this.frames).then(n=>{this.plotlyInstance=n,this.getWindow().gd=this.debug?n:void 0,this.eventNames.forEach(S=>{const U=`plotly_${S.toLowerCase()}`;n.on(U,re=>this[S].emit(re))}),n.on("plotly_click",S=>{this.click.emit(S),this.plotlyClick.emit(S)}),this.updateWindowResizeHandler()},n=>{console.error("Error while plotting:",n),this.error.emit(n)})}createFigure(){const n=this.plotlyInstance;return{data:n.data,layout:n.layout,frames:n._transitionData?n._transitionData._frames:null}}updatePlot(){if(!this.plotlyInstance){const S=new Error("Plotly component wasn't initialized");throw this.error.emit(S),S}const n=Object.assign({},this.layout);return this.plotly.update(this.plotlyInstance,this.data,n,this.config,this.frames).then(()=>{const S=this.createFigure();this.update.emit(S)},S=>{console.error("Error while updating plot:",S),this.error.emit(S)})}updateWindowResizeHandler(){this.useResizeHandler?void 0===this.resizeHandler&&(this.resizeHandler=()=>this.plotly.resize(this.plotlyInstance),this.getWindow().addEventListener("resize",this.resizeHandler)):"function"==typeof this.resizeHandler&&(this.getWindow().removeEventListener("resize",this.resizeHandler),this.resizeHandler=void 0)}dataDifferTrackBy(n,S){const U=Object.assign({},S,{uid:""});return JSON.stringify(U)}}return t.\u0275fac=function(n){return new(n||t)(Jn(co),Jn(kh),Jn(ff))},t.\u0275cmp=Go({type:t,selectors:[["plotly-plot"]],viewQuery:function(n,S){if(1&n&&C2(cO,7),2&n){let U;nm(U=function rm(){return function rC(t,r){return t[19].queries[r].queryList}(ei(),Oe())}())&&(S.plotEl=U.first)}},inputs:{revision:"revision",debug:"debug",useResizeHandler:"useResizeHandler",updateOnLayoutChange:"updateOnLayoutChange",updateOnDataChange:"updateOnDataChange",updateOnlyWithRevision:"updateOnlyWithRevision",data:"data",layout:"layout",config:"config",frames:"frames",style:"style",divId:"divId",className:"className"},outputs:{initialized:"initialized",update:"update",purge:"purge",error:"error",afterExport:"afterExport",afterPlot:"afterPlot",animated:"animated",animatingFrame:"animatingFrame",animationInterrupted:"animationInterrupted",autoSize:"autoSize",beforeExport:"beforeExport",buttonClicked:"buttonClicked",click:"click",plotlyClick:"plotlyClick",clickAnnotation:"clickAnnotation",deselect:"deselect",doubleClick:"doubleClick",framework:"framework",hover:"hover",legendClick:"legendClick",legendDoubleClick:"legendDoubleClick",react:"react",relayout:"relayout",restyle:"restyle",redraw:"redraw",selected:"selected",selecting:"selecting",sliderChange:"sliderChange",sliderEnd:"sliderEnd",sliderStart:"sliderStart",transitioning:"transitioning",transitionInterrupted:"transitionInterrupted",unhover:"unhover",relayouting:"relayouting",treemapclick:"treemapclick",sunburstclick:"sunburstclick"},features:[ms([co]),pi],ngContentSelectors:fO,decls:3,vars:3,consts:[[3,"ngClass","ngStyle"],["plot",""]],template:function(n,S){1&n&&(function Wb(t){const r=ei()[16][6];if(!r.projection){const S=r.projection=qo(t?t.length:1,null),U=S.slice();let re=r.child;for(;null!==re;){const ye=t?EM(re,t):0;null!==ye&&(U[ye]?U[ye].projectionNext=re:S[ye]=re,U[ye]=re),re=re.next}}}(),hn(0,"div",0,1),function Yb(t,r=0,n){const S=ei(),U=ea(),re=rf(U,20+t,16,null,n||null);null===re.projection&&(re.projection=r),Vu(),64!=(64&re.flags)&&function Fo(t,r,n){js(r[11],0,r,n,Br(t,n,r),zi(n.parent||r[6],n,r))}(U,S,re)}(2),dn()),2&n&&(xi("ngClass",S.getClassName())("ngStyle",S.style),nc("id",S.divId))},directives:[Jd,Tm],encapsulation:2}),t})(),fp=(()=>{class t{constructor(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Pa({type:t}),t.\u0275inj=tr({providers:[co],imports:[[Eh]]}),t})(),mA=(()=>{class t{constructor(){if(!this.isValid())throw new Error("Invalid PlotlyJS object. Please check https://github.com/plotly/angular-plotly.js#quick-start to see how to add PlotlyJS to your project.");co.setPlotly(t.plotlyjs)}isValid(){return void 0!==t.plotlyjs&&("function"==typeof t.plotlyjs.plot||"function"==typeof t.plotlyjs.newPlot)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Pa({type:t}),t.\u0275inj=tr({providers:[co],imports:[[Eh,fp],fp]}),t.plotlyjs={},t})();var hO=oe(102);mA.plotlyjs=hO;let dO=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Pa({type:t}),t.\u0275inj=tr({providers:[h3,xf],imports:[[Eh,$m,J3,h9,lO,uO,mA]]}),t})();const Dx=function(t){return{sorted:t}};function pO(t,r){if(1&t){const n=q0();hn(0,"tr"),hn(1,"td",5),hn(2,"a",6),To("click",function(){const re=Ys(n).$implicit;return Ou().teamSelect(re.Team)})("dblclick",function(){const re=Ys(n).$implicit;return Ou().teamPage(re.Team)}),hn(3,"div",2),Qn(4),dn(),dn(),dn(),hn(5,"td",5),Qn(6),dn(),hn(7,"td",5),Qn(8),dn(),hn(9,"td",5),Qn(10),dn(),hn(11,"td",5),Qn(12),dn(),hn(13,"td",5),Qn(14),dn(),hn(15,"td",5),Qn(16),dn(),hn(17,"td",5),Qn(18),dn(),hn(19,"td",5),Qn(20),dn(),hn(21,"td",5),Qn(22),dn(),hn(23,"td",5),Qn(24),dn(),hn(25,"td",5),Qn(26),dn(),hn(27,"td",5),Qn(28),dn(),hn(29,"td",5),Qn(30),dn(),hn(31,"td",5),Qn(32),dn(),hn(33,"td",5),Qn(34),dn(),hn(35,"td",5),Qn(36),dn(),dn()}if(2&t){const n=r.$implicit,S=Ou();er(3),xi("ngClass",em(66,Dx,n.Team==S.team)),er(1),Ni(n.Team),er(1),Ao("bg",null==n?null:n.Match1Format,""),er(1),Ni(n.Match1Display),er(1),Ao("bg",null==n?null:n.Match2Format,""),er(1),Ni(n.Match2Display),er(1),Ao("bg",null==n?null:n.Match3Format,""),er(1),Ni(n.Match3Display),er(1),Ao("bg",null==n?null:n.Match4Format,""),er(1),Ni(n.Match4Display),er(1),Ao("bg",null==n?null:n.Match5Format,""),er(1),Ni(n.Match5Display),er(1),Ao("bg",null==n?null:n.Match6Format,""),er(1),Ni(n.Match6Display),er(1),Ao("bg",null==n?null:n.Match7Format,""),er(1),Ni(n.Match7Display),er(1),Ao("bg",null==n?null:n.Match8Format,""),er(1),Ni(n.Match8Display),er(1),Ao("bg",null==n?null:n.Match9Format,""),er(1),Ni(n.Match9Display),er(1),Ao("bg",null==n?null:n.Match10Format,""),er(1),Ni(n.Match10Display),er(1),Ao("bg",null==n?null:n.Match11Format,""),er(1),Ni(n.Match11Display),er(1),Ao("bg",null==n?null:n.Match12Format,""),er(1),Ni(n.Match12Display),er(1),Ao("bg",null==n?null:n.Summary1Format,""),er(1),Ni(n.Summary1Display),er(1),Ao("bg",null==n?null:n.Summary2Format,""),er(1),Ni(n.Summary2Display),er(1),Ao("bg",null==n?null:n.Summary3Format,""),er(1),Ni(n.Summary3Display),er(1),Ao("bg",null==n?null:n.Summary4Format,""),er(1),Ni(n.Summary4Display)}}let gO=(()=>{class t{constructor(n,S){this.apiService=n,this.router=S,this.sendTeamEvent=new aa,this.apiAnalysis=[],this.apiAnalysis_filter=[],this.apiAnalysis_filter=[],this.apiAnalysis=[],this.title="Title",this.teamList=[],this.sort=1,this.team="",this.focus="999",this.apiService.CEAReplay.subscribe(U=>{this.apiAnalysis=U,this.regenerateFilter()})}ngOnInit(){console.log("Analysis Passed to Component: "+this.analysisTypeID)}ngOnChanges(){this.regenerateFilter(),this.teamSelect(this.focus)}localSort(n){console.log("Local Sort Type: "+n),this.sort=n,this.regenerateFilter()}teamPage(n){console.log("Calling Robot Page with: "+n),this.router.navigate([]).then(S=>{window.open("#/robot/"+n,"_blank")})}teamSelect(n){n==this.team?console.log("Highlight off"):(this.team=n,console.log("Highlighting Robot: "+n)),this.sendTeamEvent.emit(this.team)}regenerateFilter(){if(console.log("Analysis Passed to Component: "+this.analysisTypeID),this.apiAnalysis&&this.apiAnalysis.length&&this.teamList&&this.teamList.length){this.apiAnalysis_filter=[];let n=0;for(const S of this.apiAnalysis)if(S.AnalysisTypeID==this.analysisTypeID){n=0;for(const U of this.teamList)if(S.Team==U.Team){n+=1;break}0==n&&(this.apiAnalysis_filter.push(S),this.title=S.AnalysisType)}this.apiAnalysis_filter.sort(1==this.sort?(S,U)=>U.Summary1Value-S.Summary1Value:(S,U)=>Number(S.Team)-Number(U.Team))}else this.apiAnalysis_filter=[]}}return t.\u0275fac=function(n){return new(n||t)(Jn(xf),Jn(yu))},t.\u0275cmp=Go({type:t,selectors:[["app-team-table"]],inputs:{teamList:"teamList",analysisTypeID:"analysisTypeID",sort:"sort",focus:"focus"},outputs:{sendTeamEvent:"sendTeamEvent"},features:[pi],decls:45,vars:8,consts:[["border","1",1,"cea_table"],["colspan","17"],[3,"ngClass"],[3,"click"],[4,"ngFor","ngForOf"],["align","center"],[3,"click","dblclick"]],template:function(n,S){1&n&&(hn(0,"div"),hn(1,"table",0),hn(2,"tr"),hn(3,"th",1),Qn(4),dn(),dn(),hn(5,"tr"),hn(6,"th"),hn(7,"div",2),hn(8,"a",3),To("click",function(){return S.localSort(2)}),Qn(9,"Team"),dn(),dn(),dn(),hn(10,"th"),Qn(11,"Q1"),dn(),hn(12,"th"),Qn(13,"Q2"),dn(),hn(14,"th"),Qn(15,"Q3"),dn(),hn(16,"th"),Qn(17,"Q4"),dn(),hn(18,"th"),Qn(19,"Q5"),dn(),hn(20,"th"),Qn(21,"Q6"),dn(),hn(22,"th"),Qn(23,"Q7"),dn(),hn(24,"th"),Qn(25,"Q8"),dn(),hn(26,"th"),Qn(27,"Q9"),dn(),hn(28,"th"),Qn(29,"Q10"),dn(),hn(30,"th"),Qn(31,"Q11"),dn(),hn(32,"th"),Qn(33,"Q12"),dn(),hn(34,"th"),Qn(35,"A"),dn(),hn(36,"th"),hn(37,"div",2),hn(38,"a",3),To("click",function(){return S.localSort(1)}),Qn(39,"M"),dn(),dn(),dn(),hn(40,"th"),Qn(41,"R"),dn(),hn(42,"th"),Qn(43,"S"),dn(),dn(),Pu(44,pO,37,68,"tr",4),dn(),dn()),2&n&&(er(4),Ni(S.title),er(3),xi("ngClass",em(4,Dx,2==S.sort)),er(30),xi("ngClass",em(6,Dx,1==S.sort)),er(7),xi("ngForOf",S.apiAnalysis_filter))},directives:[Jd,j1,Sh],styles:[".bg0[_ngcontent-%COMP%]{background-color:#fff}.bg1[_ngcontent-%COMP%]{background-color:#000;color:#fff}.bg2[_ngcontent-%COMP%]{background-color:red;color:#fff}.bg3[_ngcontent-%COMP%]{background-color:#ff0}.bg4[_ngcontent-%COMP%]{background-color:#0f0}.bg5[_ngcontent-%COMP%]{background-color:#00f;color:#fff}tr[_ngcontent-%COMP%]{font-size:12px;width:25px}th[_ngcontent-%COMP%]{font-size:12px;width:25px;background-color:#ccc}.cea_table[_ngcontent-%COMP%]{border-spacing:0;border-collapse:collapse}.sorted[_ngcontent-%COMP%]{background-color:#9932cc;color:#fff}"]}),t})(),mO=(()=>{class t{constructor(n){this.apiService=n,this.apiAnalysis=[],this.apiAnalysis_filter=[],this.team1="195",this.graph={data:[{x:[1,2,3,4,5,6,7,8,9,10,11,12],y:[2,3,8,5,6,4,8],type:"line",name:this.team1,mode:"lines+points",marker:{color:"red"}},{x:[1,2,3,4,5,6,7,8,9,10,11,12],y:[2,5,3],type:"line",name:"Hello"}],layout:{width:640,height:480,title:"A Fancy Plot"}},this.analysisTypeID=2,this.team="",this.teamList=[],this.match=[],this.graphData=[],this.analysisType=""}ngOnInit(){this.apiService.CEAReplay.subscribe(n=>{this.apiAnalysis=n,this.regenerateFilter()})}ngOnChanges(){this.regenerateFilter()}regenerateFilter(){if(console.log("Analysis Passed to Component: "+this.analysisTypeID),this.apiAnalysis&&this.apiAnalysis.length){this.apiAnalysis_filter=[],this.graphData=[];let n=0,S=[1,2,3,4,5,6,7,8,9,10,11,12];for(const U of this.apiAnalysis)if(U.AnalysisTypeID==this.analysisTypeID){n=0;for(const ye of this.teamList)if(U.Team==ye.Team){n+=1;break}let re=[];0==n&&(this.team=U.Team,re.push(U.Match1Value),re.push(U.Match2Value),re.push(U.Match3Value),re.push(U.Match4Value),re.push(U.Match5Value),re.push(U.Match6Value),re.push(U.Match7Value),re.push(U.Match8Value),re.push(U.Match9Value),re.push(U.Match10Value),re.push(U.Match11Value),re.push(U.Match12Value),this.analysisType=U.AnalysisType,this.graphData.push({x:S,y:re,type:"line",showlegend:!0,name:this.team}))}}else this.apiAnalysis_filter=[];this.graph={data:this.graphData,layout:{width:1e3,height:360,title:this.analysisType}}}}return t.\u0275fac=function(n){return new(n||t)(Jn(xf))},t.\u0275cmp=Go({type:t,selectors:[["app-team-graph"]],inputs:{teamList:"teamList",analysisTypeID:"analysisTypeID"},features:[pi],decls:1,vars:2,consts:[[3,"data","layout"]],template:function(n,S){1&n&&na(0,"plotly-plot",0),2&n&&xi("data",S.graph.data)("layout",S.graph.layout)},directives:[gA],styles:[""]}),t})();function yO(t,r){if(1&t){const n=q0();(function mv(t,r,n){const S=ei(),U=ea(),re=t+20,ye=U.firstCreatePass?function kM(t,r,n,S,U){const re=r.consts,ye=Yi(re,S),Me=rf(r,t,8,"ng-container",ye);return null!==ye&&V0(Me,ye,!0),Md(r,n,Me,Yi(re,U)),null!==r.queries&&r.queries.elementStart(r,Me),Me}(re,U,S,r,n):U.data[re];hs(ye,!0);const Me=S[re]=S[11].createComment("");$i(U,S,Me,ye),Bs(Me,S),Io(ye)&&(Ju(U,S,ye),Td(U,ye,S)),null!=n&&wc(S,ye)})(0),Qn(1),hn(2,"input",19),To("ngModelChange",function(U){return Ys(n).$implicit.Team=U})("dblclick",function(){const re=Ys(n).index;return Ou().processDoubleClick(re)})("ngModelChange",function(){return Ys(n),Ou().teamSelectionChange()}),dn(),na(3,"br"),function yv(){let t=Po();const r=ea();ku()?Vu():(t=t.parent,hs(t,!1)),r.firstCreatePass&&(vi(r,t),Wa(t)&&r.queries.elementEnd(t))}()}if(2&t){const n=r.$implicit,S=r.index;er(1),Ru(" ",S+1," "),er(1),xi("ngModel",n.Team)}}let vO=(()=>{class t{constructor(n){this.apiService=n,this.analysis1=10,this.analysis2=11,this.type=1,this.sortType=1,this.viewType=1,this.graphShow=!0,this.tableShow=!1,this.apiFinal24List=[],this.apiFinal24List=[new Og],this.analysisTypeID=1,this.focusTeam=""}ngOnInit(){this.apiService.getFinal24().then(n=>this.apiFinal24List=n)}teamSelectionChange(){this.apiFinal24List=this.apiFinal24List.slice()}addEnd(){this.apiFinal24List.splice(this.apiFinal24List.length,0,new Og)}processDoubleClick(n){1==this.apiFinal24List.length?this.apiFinal24List.splice(n,0,new Og):""===this.apiFinal24List[n].Team?this.apiFinal24List.length>1&&this.apiFinal24List.splice(n,1):this.apiFinal24List.splice(n,0,new Og)}select(n,S){1==n?this.analysis1=S:this.analysis2=S}changeDisplay(n){console.log("Display Type: "+n),1==n?(this.analysis1=10,this.analysis2=11):2==n?(this.analysis1=20,this.analysis2=21):3==n?(this.analysis1=60,this.analysis2=61):4==n?(this.analysis1=22,this.analysis2=30):5==n?(this.analysis1=40,this.analysis2=41):6==n?(this.analysis1=42,this.analysis2=43):7==n?(this.analysis1=44,this.analysis2=45):8==n?(this.analysis1=46,this.analysis2=47):9==n?(this.analysis1=48,this.analysis2=49):10==n?(this.analysis1=62,this.analysis2=70):(this.analysis1=10,this.analysis2=11),console.log("Left Table: "+this.analysis1+", Right Table: "+this.analysis2)}changeSort(n){console.log("Sort Type: "+n),this.sortType=1==n?2:1}changeView(n){console.log("View Type: "+n),this.viewType=1==n?2:1,this.graphShow=!this.graphShow,this.tableShow=!this.tableShow,console.log("Graph: "+this.graphShow+" Table: "+this.tableShow)}listRecipients(){console.log("Hello!")}save(){console.log("Hello!")}onChanges(){console.log("Change IDentified")}print_team(n){console.log("Team Passed back from Child: "+n),this.focusTeam=n}}return t.\u0275fac=function(n){return new(n||t)(Jn(xf))},t.\u0275cmp=Go({type:t,selectors:[["app-analysis"]],decls:172,vars:63,consts:[["border","1"],["colspan","3"],[2,"float","left","width","50%"],[3,"click"],[2,"float","right","width","50%"],["type","text","name","AnalysisType1",1,"form-control",3,"ngModel","ngModelChange"],[3,"value"],["type","text","name","AnalysisType2",1,"form-control",3,"ngModel","ngModelChange"],["type","hidden",3,"ngModel","ngModelChange"],["border","0"],["align","right"],["align","center"],[4,"ngFor","ngForOf"],["valign","top","align","center"],["type","text","size","3"],[3,"hidden"],[3,"analysisTypeID","teamList","sort","focus","sendTeamEvent"],["width","20"],[3,"analysisTypeID","teamList"],["type","text","size","3",3,"ngModel","ngModelChange","dblclick"]],template:function(n,S){1&n&&(hn(0,"div"),hn(1,"table",0),hn(2,"tr"),hn(3,"td"),Qn(4,"\xa0"),dn(),hn(5,"td",1),hn(6,"div",2),hn(7,"button",3),To("click",function(){return S.changeDisplay(1)}),Qn(8,"Auto"),dn(),hn(9,"button",3),To("click",function(){return S.changeDisplay(2)}),Qn(10,"Low|High"),dn(),hn(11,"button",3),To("click",function(){return S.changeDisplay(3)}),Qn(12,"Cargo|Score"),dn(),hn(13,"button",3),To("click",function(){return S.changeDisplay(4)}),Qn(14,"Tele|Climb"),dn(),dn(),hn(15,"div",4),hn(16,"b"),Qn(17,"\xa0Left Table: "),dn(),hn(18,"select",5),To("ngModelChange",function(re){return S.analysis1=re})("ngModelChange",function(re){return S.select(1,re)}),hn(19,"option",6),Qn(20,"Start POS"),dn(),hn(21,"option",6),Qn(22,"Auto"),dn(),hn(23,"option",6),Qn(24,"AutoScore"),dn(),hn(25,"option",6),Qn(26,"Tele Low"),dn(),hn(27,"option",6),Qn(28,"Tele High"),dn(),hn(29,"option",6),Qn(30,"Tele Total"),dn(),hn(31,"option",6),Qn(32,"climb"),dn(),hn(33,"option",6),Qn(34,"Ground Pickup"),dn(),hn(35,"option",6),Qn(36,"D Against"),dn(),hn(37,"option",6),Qn(38,"Launch Pad"),dn(),hn(39,"option",6),Qn(40,"Sort Cargo"),dn(),hn(41,"option",6),Qn(42,"Shoot Drive"),dn(),hn(43,"option",6),Qn(44,"Pickup"),dn(),hn(45,"option",6),Qn(46,"Played D"),dn(),hn(47,"option",6),Qn(48,"Lost Comm"),dn(),hn(49,"option",6),Qn(50,"Sub Broke"),dn(),hn(51,"option",6),Qn(52,"Broke Down"),dn(),hn(53,"option",6),Qn(54,"Total Cargo"),dn(),hn(55,"option",6),Qn(56,"Total Score"),dn(),hn(57,"option",6),Qn(58,"TeleBall Score"),dn(),hn(59,"option",6),Qn(60,"Match Videos"),dn(),dn(),hn(61,"b"),Qn(62,"\xa0Right Table: "),dn(),hn(63,"select",7),To("ngModelChange",function(re){return S.analysis2=re})("ngModelChange",function(re){return S.select(2,re)}),hn(64,"option",6),Qn(65,"Start POS"),dn(),hn(66,"option",6),Qn(67,"Auto"),dn(),hn(68,"option",6),Qn(69,"AutoScore"),dn(),hn(70,"option",6),Qn(71,"Tele Low"),dn(),hn(72,"option",6),Qn(73,"Tele High"),dn(),hn(74,"option",6),Qn(75,"Tele Total"),dn(),hn(76,"option",6),Qn(77,"climb"),dn(),hn(78,"option",6),Qn(79,"Ground Pickup"),dn(),hn(80,"option",6),Qn(81,"D Against"),dn(),hn(82,"option",6),Qn(83,"Launch Pad"),dn(),hn(84,"option",6),Qn(85,"Sort Cargo"),dn(),hn(86,"option",6),Qn(87,"Shoot Drive"),dn(),hn(88,"option",6),Qn(89,"Pickup"),dn(),hn(90,"option",6),Qn(91,"Played D"),dn(),hn(92,"option",6),Qn(93,"Lost Comm"),dn(),hn(94,"option",6),Qn(95,"Sub Broke"),dn(),hn(96,"option",6),Qn(97,"Broke Down"),dn(),hn(98,"option",6),Qn(99,"Total Cargo"),dn(),hn(100,"option",6),Qn(101,"Total Score"),dn(),hn(102,"option",6),Qn(103,"TeleBall Score"),dn(),hn(104,"option",6),Qn(105,"Match Videos"),dn(),dn(),hn(106,"input",8),To("ngModelChange",function(re){return S.analysis1=re}),dn(),hn(107,"input",8),To("ngModelChange",function(re){return S.analysis2=re}),dn(),dn(),dn(),dn(),hn(108,"tr"),hn(109,"td"),hn(110,"table",9),hn(111,"tr"),hn(112,"td",10),hn(113,"div",11),Qn(114,"Final"),dn(),Pu(115,yO,4,2,"ng-container",12),hn(116,"button",3),To("click",function(){return S.addEnd()}),Qn(117,"Add"),dn(),dn(),hn(118,"td",13),Qn(119," Pick "),hn(120,"form"),na(121,"input",14),na(122,"br"),na(123,"input",14),na(124,"br"),na(125,"input",14),na(126,"br"),na(127,"input",14),na(128,"br"),na(129,"input",14),na(130,"br"),na(131,"input",14),na(132,"br"),na(133,"input",14),na(134,"br"),na(135,"input",14),na(136,"br"),na(137,"input",14),na(138,"br"),na(139,"input",14),na(140,"br"),na(141,"input",14),na(142,"br"),na(143,"input",14),na(144,"br"),dn(),dn(),hn(145,"td"),hn(146,"button",3),To("click",function(){return S.changeSort(S.sortType)}),Qn(147),dn(),na(148,"br"),hn(149,"button",3),To("click",function(){return S.changeView(S.viewType)}),Qn(150),dn(),na(151,"br"),hn(152,"button",3),To("click",function(){return S.apiService.saveFinal24(S.apiFinal24List)}),Qn(153,"Save to server"),dn(),dn(),dn(),dn(),dn(),hn(154,"td"),hn(155,"div",15),hn(156,"table"),hn(157,"tr"),hn(158,"td"),hn(159,"app-team-table",16),To("sendTeamEvent",function(re){return S.print_team(re)}),dn(),dn(),hn(160,"td",17),Qn(161," \xa0 "),dn(),hn(162,"td"),hn(163,"app-team-table",16),To("sendTeamEvent",function(re){return S.print_team(re)}),dn(),dn(),dn(),dn(),dn(),hn(164,"div",15),hn(165,"table"),hn(166,"tr"),hn(167,"td"),na(168,"app-team-graph",18),dn(),dn(),hn(169,"tr"),hn(170,"td"),na(171,"app-team-graph",18),dn(),dn(),dn(),dn(),dn(),dn(),dn(),dn()),2&n&&(er(18),xi("ngModel",S.analysis1),er(1),xi("value",1),er(2),xi("value",10),er(2),xi("value",11),er(2),xi("value",20),er(2),xi("value",21),er(2),xi("value",22),er(2),xi("value",30),er(2),xi("value",40),er(2),xi("value",41),er(2),xi("value",42),er(2),xi("value",43),er(2),xi("value",44),er(2),xi("value",45),er(2),xi("value",46),er(2),xi("value",47),er(2),xi("value",48),er(2),xi("value",49),er(2),xi("value",60),er(2),xi("value",61),er(2),xi("value",62),er(2),xi("value",70),er(4),xi("ngModel",S.analysis2),er(1),xi("value",1),er(2),xi("value",10),er(2),xi("value",11),er(2),xi("value",20),er(2),xi("value",21),er(2),xi("value",22),er(2),xi("value",30),er(2),xi("value",40),er(2),xi("value",41),er(2),xi("value",42),er(2),xi("value",43),er(2),xi("value",44),er(2),xi("value",45),er(2),xi("value",46),er(2),xi("value",47),er(2),xi("value",48),er(2),xi("value",49),er(2),xi("value",60),er(2),xi("value",61),er(2),xi("value",62),er(2),xi("value",70),er(2),xi("ngModel",S.analysis1),er(1),xi("ngModel",S.analysis2),er(8),xi("ngForOf",S.apiFinal24List),er(32),Ni(1==S.sortType?"Team Sort":"Amt Sort"),er(3),Ni(1==S.viewType?"Graph View":"Table View"),er(5),xi("hidden",S.tableShow),er(4),xi("analysisTypeID",S.analysis1)("teamList",S.apiFinal24List)("sort",S.sortType)("focus",S.focusTeam),er(4),xi("analysisTypeID",S.analysis2)("teamList",S.apiFinal24List)("sort",S.sortType)("focus",S.focusTeam),er(1),xi("hidden",S.graphShow),er(4),xi("analysisTypeID",S.analysis1)("teamList",S.apiFinal24List),er(3),xi("analysisTypeID",S.analysis2)("teamList",S.apiFinal24List))},directives:[ly,Qm,Bg,uy,cy,up,Sh,XT,OT,sy,gO,mO],styles:[".bg0[_ngcontent-%COMP%]{background-color:#fff}.bg1[_ngcontent-%COMP%]{background-color:#000;color:#fff}.bg2[_ngcontent-%COMP%]{background-color:red;color:#fff}.bg3[_ngcontent-%COMP%]{background-color:#ff0}.bg4[_ngcontent-%COMP%]{background-color:#0f0}.bg5[_ngcontent-%COMP%]{background-color:#00f;color:#fff}tr[_ngcontent-%COMP%]{font-size:12px;width:25px}th[_ngcontent-%COMP%]{font-size:12px;width:25px;background-color:#ccc}td[_ngcontent-%COMP%]{vertical-align:top}.cea_table[_ngcontent-%COMP%]{border-spacing:0;border-collapse:collapse}"]}),t})(),xO=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Go({type:t,selectors:[["app-home"]],decls:1,vars:0,consts:[["src","https://cdn.discordapp.com/attachments/768102645361410108/942127141775102012/image_from_ios.png","alt","logan",2,"width","500px","height","600px"]],template:function(n,S){1&n&&na(0,"img",0)},styles:[""]}),t})();function bO(t,r){if(1&t&&(hn(0,"tr"),hn(1,"td",5),Qn(2),dn(),hn(3,"td",5),Qn(4),dn(),hn(5,"td",5),Qn(6),dn(),hn(7,"td",5),Qn(8),dn(),hn(9,"td",5),Qn(10),dn(),hn(11,"td",5),Qn(12),dn(),hn(13,"td",5),Qn(14),dn(),hn(15,"td",5),Qn(16),dn(),hn(17,"td",5),Qn(18),dn(),hn(19,"td",5),Qn(20),dn(),hn(21,"td",5),Qn(22),dn(),hn(23,"td",5),Qn(24),dn(),hn(25,"td",5),Qn(26),dn(),hn(27,"td",5),Qn(28),dn(),hn(29,"td",5),Qn(30),dn(),hn(31,"td",5),Qn(32),dn(),hn(33,"td",5),Qn(34),dn(),dn()),2&t){const n=r.$implicit;er(2),Ni(n.AnalysisType),er(1),Ao("bg",null==n?null:n.Match1Format,""),er(1),Ni(n.Match1Display),er(1),Ao("bg",null==n?null:n.Match2Format,""),er(1),Ni(n.Match2Display),er(1),Ao("bg",null==n?null:n.Match3Format,""),er(1),Ni(n.Match3Display),er(1),Ao("bg",null==n?null:n.Match4Format,""),er(1),Ni(n.Match4Display),er(1),Ao("bg",null==n?null:n.Match5Format,""),er(1),Ni(n.Match5Display),er(1),Ao("bg",null==n?null:n.Match6Format,""),er(1),Ni(n.Match6Display),er(1),Ao("bg",null==n?null:n.Match7Format,""),er(1),Ni(n.Match7Display),er(1),Ao("bg",null==n?null:n.Match8Format,""),er(1),Ni(n.Match8Display),er(1),Ao("bg",null==n?null:n.Match9Format,""),er(1),Ni(n.Match9Display),er(1),Ao("bg",null==n?null:n.Match10Format,""),er(1),Ni(n.Match10Display),er(1),Ao("bg",null==n?null:n.Match11Format,""),er(1),Ni(n.Match11Display),er(1),Ao("bg",null==n?null:n.Match12Format,""),er(1),Ni(n.Match12Display),er(1),Ao("bg",null==n?null:n.Summary1Format,""),er(1),Ni(n.Summary1Display),er(1),Ao("bg",null==n?null:n.Summary2Format,""),er(1),Ni(n.Summary2Display),er(1),Ao("bg",null==n?null:n.Summary3Format,""),er(1),Ni(n.Summary3Display),er(1),Ao("bg",null==n?null:n.Summary4Format,""),er(1),Ni(n.Summary4Display)}}const _O=function(t,r){return{titleR:t,titleB:r}};let yA=(()=>{class t{constructor(n){this.apiService=n,this.apiAnalysis=[],this.apiAnalysis_filter=[],this.titleShow=!0,this.apiAnalysis_filter=[],this.apiAnalysis=[],this.title="Title",this.selectedTeam="",this.analysisGroup=0,this.color=0,this.apiService.CEAReplay.subscribe(S=>{this.apiAnalysis=S,this.regenerateFilter()})}ngOnInit(){}ngOnChanges(){this.regenerateFilter()}regenerateFilter(){if(this.apiAnalysis){this.apiAnalysis_filter=[];let n=[];n=1==this.analysisGroup?[1,10,11,20,21,22,30,60,61,62,70]:2==this.analysisGroup?[40,41,42,43,44,45,46,47,48,49]:3==this.analysisGroup?[1,10,11,20,21,22,30,60,61,62]:[70],this.color>0&&(this.titleShow=!1);for(const U of this.apiAnalysis)U.Team==this.selectedTeam&&n.includes(U.AnalysisTypeID)&&this.apiAnalysis_filter.push(U)}else this.apiAnalysis_filter=[]}}return t.\u0275fac=function(n){return new(n||t)(Jn(xf))},t.\u0275cmp=Go({type:t,selectors:[["app-analysis-table"]],inputs:{selectedTeam:"selectedTeam",analysisGroup:"analysisGroup",color:"color"},features:[pi],decls:43,vars:7,consts:[[3,"hidden"],["border","1","width","550",1,"cea_table"],[3,"ngClass"],["border","1",1,"cea_table"],[4,"ngFor","ngForOf"],["align","center"]],template:function(n,S){1&n&&(hn(0,"div"),hn(1,"div",0),hn(2,"table",1),hn(3,"tr"),hn(4,"th",2),Qn(5),dn(),dn(),dn(),dn(),hn(6,"table",3),hn(7,"tr"),hn(8,"th"),Qn(9,"Type"),dn(),hn(10,"th"),Qn(11,"Q1"),dn(),hn(12,"th"),Qn(13,"Q2"),dn(),hn(14,"th"),Qn(15,"Q3"),dn(),hn(16,"th"),Qn(17,"Q4"),dn(),hn(18,"th"),Qn(19,"Q5"),dn(),hn(20,"th"),Qn(21,"Q6"),dn(),hn(22,"th"),Qn(23,"Q7"),dn(),hn(24,"th"),Qn(25,"Q8"),dn(),hn(26,"th"),Qn(27,"Q9"),dn(),hn(28,"th"),Qn(29,"Q10"),dn(),hn(30,"th"),Qn(31,"Q11"),dn(),hn(32,"th"),Qn(33,"Q12"),dn(),hn(34,"th"),Qn(35,"A"),dn(),hn(36,"th"),Qn(37,"M"),dn(),hn(38,"th"),Qn(39,"R"),dn(),hn(40,"th"),Qn(41,"S"),dn(),dn(),Pu(42,bO,35,65,"tr",4),dn(),dn()),2&n&&(er(1),xi("hidden",S.titleShow),er(3),xi("ngClass",m2(4,_O,1==S.color,2==S.color)),er(1),Ni(S.selectedTeam),er(37),xi("ngForOf",S.apiAnalysis_filter))},directives:[Jd,j1,Sh],styles:[".bg0[_ngcontent-%COMP%]{background-color:#fff}.bg1[_ngcontent-%COMP%]{background-color:#000;color:#fff}.bg2[_ngcontent-%COMP%]{background-color:red;color:#fff}.bg3[_ngcontent-%COMP%]{background-color:#ff0}.bg4[_ngcontent-%COMP%]{background-color:#0f0}.bg5[_ngcontent-%COMP%]{background-color:#00f;color:#fff}tr[_ngcontent-%COMP%]{font-size:12px;width:25px}th[_ngcontent-%COMP%]{font-size:12px;width:25px;background-color:#ccc}.cea_table[_ngcontent-%COMP%]{border-spacing:0;border-collapse:collapse}.titleR[_ngcontent-%COMP%]{background-color:red;color:#fff;text-align:center}.titleB[_ngcontent-%COMP%]{background-color:#00f;color:#fff;text-align:center}"]}),t})();function wO(t,r){if(1&t&&(hn(0,"option",6),Qn(1),dn()),2&t){const n=r.$implicit;xi("ngValue",n.MatchNo),er(1),Ni(n.MatchNo)}}let TO=(()=>{class t{constructor(n){this.apiService=n,this.redTeam1="195",this.redTeam2="195",this.redTeam3="195",this.blueTeam1="195",this.blueTeam2="195",this.blueTeam3="195",this.matchNo=1,this.apiMatchList=[]}getMatch(n){this.matchNo=n,this.regenerateFilter()}regenerateFilter(){if(this.apiMatchList){for(const n of this.apiMatchList)if(n.MatchNo==this.matchNo){this.redTeam1=n.RedTeam1,this.redTeam2=n.RedTeam2,this.redTeam3=n.RedTeam3,this.blueTeam1=n.BlueTeam1,this.blueTeam2=n.BlueTeam2,this.blueTeam3=n.BlueTeam3;break}}else console.log("Match List Not Found")}ngOnInit(){this.apiService.MatchReplay.subscribe(n=>{this.apiMatchList=n,this.regenerateFilter()})}}return t.\u0275fac=function(n){return new(n||t)(Jn(xf))},t.\u0275cmp=Go({type:t,selectors:[["app-match"]],decls:24,vars:20,consts:[["border","1","width","100%"],["list","productName","name","matchSelect","ngModel","",3,"ngModelChange"],["id","productName"],[3,"ngValue",4,"ngFor","ngForOf"],["colspan","3","align","center"],[3,"analysisGroup","selectedTeam","color"],[3,"ngValue"]],template:function(n,S){1&n&&(hn(0,"table",0),hn(1,"tr"),hn(2,"td"),hn(3,"input",1),To("ngModelChange",function(re){return S.getMatch(re)}),dn(),hn(4,"datalist",2),Pu(5,wO,2,2,"option",3),dn(),dn(),dn(),hn(6,"tr"),hn(7,"td",4),hn(8,"h1"),Qn(9),dn(),dn(),dn(),hn(10,"tr"),hn(11,"td"),na(12,"app-analysis-table",5),na(13,"br"),na(14,"app-analysis-table",5),na(15,"br"),na(16,"app-analysis-table",5),dn(),na(17,"td"),hn(18,"td"),na(19,"app-analysis-table",5),na(20,"br"),na(21,"app-analysis-table",5),na(22,"br"),na(23,"app-analysis-table",5),dn(),dn(),dn()),2&n&&(er(5),xi("ngForOf",S.apiMatchList),er(4),Ru("Match ",S.matchNo,""),er(3),xi("analysisGroup",1)("selectedTeam",S.redTeam1)("color",1),er(2),xi("analysisGroup",1)("selectedTeam",S.redTeam2)("color",1),er(2),xi("analysisGroup",1)("selectedTeam",S.redTeam3)("color",1),er(3),xi("analysisGroup",1)("selectedTeam",S.blueTeam1)("color",2),er(2),xi("analysisGroup",1)("selectedTeam",S.blueTeam2)("color",2),er(2),xi("analysisGroup",1)("selectedTeam",S.blueTeam3)("color",2))},directives:[up,Qm,Bg,Sh,uy,cy,yA],styles:[""]}),t})();function AO(t,r){if(1&t&&(hn(0,"div"),hn(1,"tr"),hn(2,"td"),hn(3,"b"),Qn(4,"# Of Wheels: "),dn(),dn(),hn(5,"td"),Qn(6),dn(),dn(),hn(7,"tr"),hn(8,"td"),hn(9,"b"),Qn(10,"# Of Motors: "),dn(),dn(),hn(11,"td"),Qn(12),dn(),dn(),hn(13,"tr"),hn(14,"td"),hn(15,"b"),Qn(16,"Type of Wheels: "),dn(),dn(),hn(17,"td"),Qn(18),dn(),dn(),hn(19,"tr"),hn(20,"td"),hn(21,"b"),Qn(22,"Type of Drive: "),dn(),dn(),hn(23,"td"),Qn(24),dn(),dn(),hn(25,"tr"),hn(26,"td"),hn(27,"b"),Qn(28,"Type of Motors: "),dn(),dn(),hn(29,"td"),Qn(30),dn(),dn(),hn(31,"tr"),hn(32,"td"),hn(33,"b"),Qn(34,"Language: "),dn(),dn(),hn(35,"td"),Qn(36),dn(),dn(),hn(37,"tr"),hn(38,"td"),hn(39,"b"),Qn(40,"Speed: "),dn(),dn(),hn(41,"td"),Qn(42),dn(),dn(),hn(43,"tr"),hn(44,"td"),hn(45,"b"),Qn(46,"Gear Ratio: "),dn(),dn(),hn(47,"td"),Qn(48),dn(),dn(),hn(49,"tr"),hn(50,"td"),hn(51,"b"),Qn(52,"Gear Speed: "),dn(),dn(),hn(53,"td"),Qn(54),dn(),dn(),hn(55,"tr"),hn(56,"td"),hn(57,"b"),Qn(58,"Legth: "),dn(),dn(),hn(59,"td"),Qn(60),dn(),dn(),hn(61,"tr"),hn(62,"td"),hn(63,"b"),Qn(64,"Width: "),dn(),dn(),hn(65,"td"),Qn(66),dn(),dn(),hn(67,"tr"),hn(68,"td"),hn(69,"b"),Qn(70,"Height: "),dn(),dn(),hn(71,"td"),Qn(72),dn(),dn(),hn(73,"tr"),hn(74,"td"),hn(75,"b"),Qn(76,"Weight: "),dn(),dn(),hn(77,"td"),Qn(78),dn(),dn(),hn(79,"tr"),hn(80,"td"),hn(81,"b"),Qn(82,"Pneumatics: "),dn(),dn(),hn(83,"td"),Qn(84),dn(),dn(),hn(85,"tr"),hn(86,"td"),hn(87,"b"),Qn(88,"Intake Type: "),dn(),dn(),hn(89,"td"),Qn(90),dn(),dn(),hn(91,"tr"),hn(92,"td"),hn(93,"b"),Qn(94,"Preload: "),dn(),dn(),hn(95,"td"),Qn(96),dn(),dn(),hn(97,"tr"),hn(98,"td"),hn(99,"b"),Qn(100,"Has Auto: "),dn(),dn(),hn(101,"td"),Qn(102),dn(),dn(),hn(103,"tr"),hn(104,"td"),hn(105,"b"),Qn(106,"Auto Scored High: "),dn(),dn(),hn(107,"td"),Qn(108),dn(),dn(),hn(109,"tr"),hn(110,"td"),hn(111,"b"),Qn(112,"Auto Scored Low: "),dn(),dn(),hn(113,"td"),Qn(114),dn(),dn(),hn(115,"tr"),hn(116,"td"),hn(117,"b"),Qn(118,"Move Bonus: "),dn(),dn(),hn(119,"td"),Qn(120),dn(),dn(),hn(121,"tr"),hn(122,"td"),hn(123,"b"),Qn(124,"Auto PickUp: "),dn(),dn(),hn(125,"td"),Qn(126),dn(),dn(),hn(127,"tr"),hn(128,"td"),hn(129,"b"),Qn(130,"Auto StartPosition: "),dn(),dn(),hn(131,"td"),Qn(132),dn(),dn(),hn(133,"tr"),hn(134,"td"),hn(135,"b"),Qn(136,"Auto Summary: "),dn(),dn(),hn(137,"td"),Qn(138),dn(),dn(),hn(139,"tr"),hn(140,"td"),hn(141,"b"),Qn(142,"Auto Human: "),dn(),dn(),hn(143,"td"),Qn(144),dn(),dn(),hn(145,"tr"),hn(146,"td"),hn(147,"b"),Qn(148,"Tele Balls Scored High: "),dn(),dn(),hn(149,"td"),Qn(150),dn(),dn(),hn(151,"tr"),hn(152,"td"),hn(153,"b"),Qn(154,"Tele Balls Scored Low: "),dn(),dn(),hn(155,"td"),Qn(156),dn(),dn(),hn(157,"tr"),hn(158,"td"),hn(159,"b"),Qn(160,"Max Ball Capacity: "),dn(),dn(),hn(161,"td"),Qn(162),dn(),dn(),hn(163,"tr"),hn(164,"td"),hn(165,"b"),Qn(166,"Tele Defense: "),dn(),dn(),hn(167,"td"),Qn(168),dn(),dn(),hn(169,"tr"),hn(170,"td"),hn(171,"b"),Qn(172,"Tele Defense Evade: "),dn(),dn(),hn(173,"td"),Qn(174),dn(),dn(),hn(175,"tr"),hn(176,"td"),hn(177,"b"),Qn(178,"Tele Strategy: "),dn(),dn(),hn(179,"td"),Qn(180),dn(),dn(),hn(181,"tr"),hn(182,"td"),hn(183,"b"),Qn(184,"Tele Defense Strategy: "),dn(),dn(),hn(185,"td"),Qn(186),dn(),dn(),hn(187,"tr"),hn(188,"td"),hn(189,"b"),Qn(190,"Tele Sort Cargo: "),dn(),dn(),hn(191,"td"),Qn(192),dn(),dn(),hn(193,"tr"),hn(194,"td"),hn(195,"b"),Qn(196,"Tele Shoot While Drive: "),dn(),dn(),hn(197,"td"),Qn(198),dn(),dn(),hn(199,"tr"),hn(200,"td"),hn(201,"b"),Qn(202,"Can Climb: "),dn(),dn(),hn(203,"td"),Qn(204),dn(),dn(),hn(205,"tr"),hn(206,"td"),hn(207,"b"),Qn(208,"Climb Position: "),dn(),dn(),hn(209,"td"),Qn(210),dn(),dn(),hn(211,"tr"),hn(212,"td"),hn(213,"b"),Qn(214,"Climb Strategy: "),dn(),dn(),hn(215,"td"),Qn(216),dn(),dn(),hn(217,"tr"),hn(218,"td"),hn(219,"b"),Qn(220,"Climb Time: "),dn(),dn(),hn(221,"td"),Qn(222),dn(),dn(),hn(223,"tr"),hn(224,"td"),hn(225,"b"),Qn(226,"Climb Height: "),dn(),dn(),hn(227,"td"),Qn(228),dn(),dn(),dn()),2&t){const n=Ou().$implicit;er(6),Ni(n.NumWheels),er(6),Ni(n.NumDriveMotors),er(6),Ni(n.WheelType),er(6),Ni(n.DriveType),er(6),Ni(n.MotorType),er(6),Ni(n.LanguageType),er(6),Ru("",n.Speed," ft/s"),er(6),Ni(n.GearRatio),er(6),Ni(n.NumGearSpeed),er(6),Ru("",n.RobotLength," in."),er(6),Ru("",n.RobotWidth," in."),er(6),Ru("",n.RobotHeight," in."),er(6),Ru("",n.RobotWeight," lb."),er(6),Ni(n.Pneumatics),er(6),Ni(n.IntakeType),er(6),Ni(n.Preload),er(6),Ni(n.HasAuto),er(6),Ni(n.AutoScoredHigh),er(6),Ni(n.AutoScoredLow),er(6),Ni(n.MoveBonus),er(6),Ni(n.AutoPickUp),er(6),Ni(n.AutoStartPosID),er(6),Ni(n.AutoSummary),er(6),Ni(n.AutoHuman),er(6),Ni(n.TeleBallsScoredHigh),er(6),Ni(n.TeleBallsScoredLow),er(6),Ni(n.MaxBallCapacity),er(6),Ni(n.TeleDefense),er(6),Ni(n.TeleDefenseEvade),er(6),Ni(n.TeleStrategy),er(6),Ni(n.TeleDefenseStrat),er(6),Ni(n.TeleSortCargo),er(6),Ni(n.TeleShootWhileDrive),er(6),Ni(n.CanClimb),er(6),Ni(n.ClimbPosition),er(6),Ni(n.ClimbStrategy),er(6),Ni(n.ClimbTime),er(6),Ni(n.ClimbHeightID)}}function MO(t,r){if(1&t&&(hn(0,"div"),Pu(1,AO,229,38,"div",2),dn()),2&t){const n=r.$implicit,S=Ou();er(1),xi("ngIf",n.Team+""==S.team)}}let kO=(()=>{class t{constructor(n){this.apiService=n,this.apiTeamsList=[],this.apiService.TeamsReplay.subscribe(S=>this.apiTeamsList=S),this.team="195"}getWheelType(n){return"Error, No ID Detected"}getDriveType(n){return 1==n?"Mecanum":2==n?"Tank":3==n?"H-Drive":4==n?"Other":5==n?"Swerve":"Error, No ID Detected"}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)(Jn(xf))},t.\u0275cmp=Go({type:t,selectors:[["app-pit-data"]],inputs:{team:"team"},decls:3,vars:1,consts:[["border","1"],[4,"ngFor","ngForOf"],[4,"ngIf"]],template:function(n,S){1&n&&(hn(0,"table",0),hn(1,"tr"),Pu(2,MO,2,1,"div",1),dn(),dn()),2&n&&(er(2),xi("ngForOf",S.apiTeamsList))},directives:[Sh,m1],styles:[""]}),t})(),CO=(()=>{class t{constructor(n){this.apiService=n,this.apiAnalysis=[],this.apiAnalysis_filter=[],this.graph={data:[{x:[],y:[]}],layout:{width:640,height:480,title:"",margin:{b:0,l:0,r:0,t:0}}},this.apiAnalysis_filter=[],this.apiAnalysis=[],this.title="Title",this.selectedTeam="",this.analysisTypeID=0,this.team="195",this.analysisType="",this.graphData=[],this.apiService.CEAReplay.subscribe(S=>{this.apiAnalysis=S,this.regenerateFilter()})}ngOnInit(){}ngOnChanges(){this.regenerateFilter()}regenerateFilter(){if(console.log("Analysis Type ID: "+this.analysisTypeID),console.log("Selected Team: "+this.selectedTeam),this.apiAnalysis){this.graphData=[],this.apiAnalysis_filter=[];for(const n of this.apiAnalysis)if(n.AnalysisTypeID==this.analysisTypeID){let S=[],U=[],re="#CCCCCC";this.team=n.Team,this.analysisType=n.AnalysisType,this.team==this.selectedTeam&&(re="#0000FF"),U.push(this.analysisType),S.push(n.Summary2Value),this.graphData.push({x:U,y:S,text:S.map(String),type:"bar",marker:{color:re},showlegend:!1,name:this.team})}}else this.apiAnalysis_filter=[];this.graphData.sort((n,S)=>S.y-n.y),this.graph={data:this.graphData,layout:{width:240,height:120,title:" ",margin:{b:20,l:20,r:20,t:20}}}}}return t.\u0275fac=function(n){return new(n||t)(Jn(xf))},t.\u0275cmp=Go({type:t,selectors:[["app-analysis-graph"]],inputs:{selectedTeam:"selectedTeam",analysisTypeID:"analysisTypeID"},features:[pi],decls:1,vars:2,consts:[[3,"data","layout"]],template:function(n,S){1&n&&na(0,"plotly-plot",0),2&n&&xi("data",S.graph.data)("layout",S.graph.layout)},directives:[gA],styles:[""]}),t})();function SO(t,r){if(1&t&&(hn(0,"option",9),Qn(1),dn()),2&t){const n=r.$implicit;bv("value",n.Team),er(1),Ni(n.Team)}}function EO(t,r){if(1&t&&(hn(0,"div"),hn(1,"b"),Qn(2,"Team Name:"),dn(),Qn(3),dn()),2&t){const n=Ou().$implicit;er(3),Ru(" ",n.TeamName,"")}}function DO(t,r){if(1&t&&(hn(0,"div"),Pu(1,EO,4,1,"div",10),dn()),2&t){const n=r.$implicit,S=Ou();er(1),xi("ngIf",n.Team+""==S.team+"")}}function LO(t,r){if(1&t&&(hn(0,"div"),hn(1,"b"),Qn(2,"Team Location:"),dn(),Qn(3),dn()),2&t){const n=Ou().$implicit;er(3),Tv(" ",n.TeamCity,", ",n.TeamStateProv,"")}}function IO(t,r){if(1&t&&(hn(0,"div"),Pu(1,LO,4,2,"div",10),dn()),2&t){const n=r.$implicit,S=Ou();er(1),xi("ngIf",n.Team+""==S.team+"")}}let vA=(()=>{class t{constructor(n,S){this.apiService=n,this.route=S,this.analysisGroup=2,this.apiTeamsList=[],this.apiService.TeamsReplay.subscribe(U=>this.apiTeamsList=U),this.team="195"}setTeam(n){console.log(n),this.team=n}ngOnInit(){this.team=this.route.snapshot.paramMap.get("team")||"",console.log("Check Robot: "+this.team)}}return t.\u0275fac=function(n){return new(n||t)(Jn(xf),Jn(Oh))},t.\u0275cmp=Go({type:t,selectors:[["app-robot"]],decls:33,vars:26,consts:[["border","0"],["type","string","id","teamSelect","name","teamSelect","list","productName","ngModel","",3,"ngModelChange"],["teamSelect",""],["id","productName"],[3,"value",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],[3,"analysisGroup","selectedTeam"],[3,"team"],[3,"analysisTypeID","selectedTeam"],[3,"value"],[4,"ngIf"]],template:function(n,S){if(1&n){const U=q0();hn(0,"table",0),hn(1,"tr"),hn(2,"td"),hn(3,"input",1,2),To("ngModelChange",function(){Ys(U);const ye=function Lb(t){return function vo(t,r){return t[r]}(function hc(){return ia.lFrame.contextLView}(),20+t)}(4);return S.setTeam(ye.value)}),dn(),hn(5,"datalist",3),Pu(6,SO,2,2,"option",4),dn(),dn(),hn(7,"td"),Pu(8,DO,2,1,"div",5),dn(),hn(9,"td"),Pu(10,IO,2,1,"div",5),dn(),dn(),hn(11,"tr"),hn(12,"td"),na(13,"app-analysis-table",6),na(14,"br"),na(15,"app-analysis-table",6),na(16,"br"),na(17,"app-analysis-table",6),dn(),hn(18,"td"),na(19,"app-pit-data",7),dn(),hn(20,"td"),hn(21,"table"),hn(22,"tr"),hn(23,"td"),na(24,"app-analysis-graph",8),na(25,"app-analysis-graph",8),na(26,"app-analysis-graph",8),na(27,"app-analysis-graph",8),dn(),hn(28,"td"),na(29,"app-analysis-graph",8),na(30,"app-analysis-graph",8),na(31,"app-analysis-graph",8),na(32,"app-analysis-graph",8),dn(),dn(),dn(),dn(),dn(),dn()}2&n&&(er(6),xi("ngForOf",S.apiTeamsList),er(2),xi("ngForOf",S.apiTeamsList),er(2),xi("ngForOf",S.apiTeamsList),er(3),xi("analysisGroup",3)("selectedTeam",S.team),er(2),xi("analysisGroup",2)("selectedTeam",S.team),er(2),xi("analysisGroup",4)("selectedTeam",S.team),er(2),xi("team",S.team),er(5),xi("analysisTypeID",10)("selectedTeam",S.team),er(1),xi("analysisTypeID",20)("selectedTeam",S.team),er(1),xi("analysisTypeID",21)("selectedTeam",S.team),er(1),xi("analysisTypeID",60)("selectedTeam",S.team),er(2),xi("analysisTypeID",11)("selectedTeam",S.team),er(1),xi("analysisTypeID",22)("selectedTeam",S.team),er(1),xi("analysisTypeID",30)("selectedTeam",S.team),er(1),xi("analysisTypeID",61)("selectedTeam",S.team))},directives:[up,Qm,Bg,Sh,uy,cy,m1,yA,kO,CO],styles:["td[_ngcontent-%COMP%]{vertical-align:top}"]}),t})(),PO=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Go({type:t,selectors:[["app-header"]],decls:17,vars:0,consts:[["fxLayoutAlign","space-between center"],["fxLayout","row"],["routerLink","/"],["type","button"],["routerLink","/analysis"],["routerLink","/robot"],["routerLink","/match"]],template:function(n,S){1&n&&(hn(0,"header",0),hn(1,"div"),hn(2,"b"),Qn(3,"\u2003CyberScouter 2022"),dn(),dn(),hn(4,"div",1),hn(5,"a",2),hn(6,"button",3),Qn(7,"Home"),dn(),dn(),hn(8,"a",4),hn(9,"button",3),Qn(10,"Team Picker"),dn(),dn(),hn(11,"a",5),hn(12,"button",3),Qn(13,"Robot Snapshot"),dn(),dn(),hn(14,"a",6),hn(15,"button",3),Qn(16,"Match Report"),dn(),dn(),dn(),dn())},directives:[U3,z3,Xm],styles:["header[_ngcontent-%COMP%]{background-color:#9932cc;color:#fff;font-family:Verdana,sans-serif}a[_ngcontent-%COMP%]:link, a[_ngcontent-%COMP%]:visited{color:#fff;text-decoration:none}a[_ngcontent-%COMP%]:hover{color:#ff0;text-decoration:none}button[_ngcontent-%COMP%]{border:none;color:#fff;background-color:#9932cc;padding:20px 15px;text-align:center;text-decoration:none;display:inline-block;font-size:14px;font-weight:700;cursor:pointer;font-family:Verdana,sans-serif}button[_ngcontent-%COMP%]:hover{background-color:purple}"]}),t})(),OO=(()=>{class t{constructor(){this.lastDBtime=""}ngOnInit(){this.lastDBtime=localStorage.getItem("lastDB")||""}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Go({type:t,selectors:[["app-footer"]],decls:5,vars:1,consts:[[2,"float","left","width","50%"],[2,"float","right","width","50%"]],template:function(n,S){1&n&&(hn(0,"footer"),hn(1,"div",0),Qn(2," 2022 CyberKnights\u2122 "),dn(),hn(3,"div",1),Qn(4),dn(),dn()),2&n&&(er(4),Ru(" Last Database Update: ",S.lastDBtime," "))},styles:["footer[_ngcontent-%COMP%]{padding:20px;background-color:#9932cc;color:#fff;font-family:Verdana,sans-serif}"]}),t})();const RO=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Go({type:t,selectors:[["app-default"]],decls:5,vars:0,consts:[["flexLayout","column"],["flexLayout","row","fxFlex",""],["fxFlex","",1,"content"]],template:function(n,S){1&n&&(na(0,"app-header",0),hn(1,"div",1),hn(2,"div",2),na(3,"router-outlet"),dn(),dn(),na(4,"app-footer",0))},directives:[PO,V3,Vm,OO],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;height:100%}.content[_ngcontent-%COMP%]{padding:20px}"]}),t})(),children:[{path:"",component:xO},{path:"robot",component:vA},{path:"robot/:team",component:vA},{path:"match",component:TO},{path:"analysis",component:vO}]}];let FO=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Pa({type:t}),t.\u0275inj=tr({imports:[[$m.forRoot(RO,{useHash:!0})],$m]}),t})(),zO=(()=>{class t{constructor(){this.title="frontend"}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=Go({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(n,S){1&n&&na(0,"router-outlet")},directives:[Vm],styles:[""]}),t})(),NO=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=Pa({type:t,bootstrap:[zO]}),t.\u0275inj=tr({providers:[],imports:[[sE,FO,dO,h3]]}),t})();(function VC(){ow=!1})(),aE().bootstrapModule(NO).catch(t=>console.error(t))},102:hp=>{hp.exports=function _(oe,ae,m){function x(e,o){if(!ae[e]){if(!oe[e]){if(T)return T(e,!0);var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}var i=ae[e]={exports:{}};oe[e][0].call(i.exports,function(d){return x(oe[e][1][d]||d)},i,i.exports,_,oe,ae,m)}return ae[e].exports}for(var T=void 0,b=0;b<m.length;b++)x(m[b]);return x}({1:[function(_,oe,ae){"use strict";var m=_("../src/lib"),x={"X,X div":'direction:ltr;font-family:"Open Sans",verdana,arial,sans-serif;margin:0;padding:0;',"X input,X button":'font-family:"Open Sans",verdana,arial,sans-serif;',"X input:focus,X button:focus":"outline:none;","X a":"text-decoration:none;","X a:hover":"text-decoration:none;","X .crisp":"shape-rendering:crispEdges;","X .user-select-none":"-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;-o-user-select:none;user-select:none;","X svg":"overflow:hidden;","X svg a":"fill:#447adb;","X svg a:hover":"fill:#3c6dc5;","X .main-svg":"position:absolute;top:0;left:0;pointer-events:none;","X .main-svg .draglayer":"pointer-events:all;","X .cursor-default":"cursor:default;","X .cursor-pointer":"cursor:pointer;","X .cursor-crosshair":"cursor:crosshair;","X .cursor-move":"cursor:move;","X .cursor-col-resize":"cursor:col-resize;","X .cursor-row-resize":"cursor:row-resize;","X .cursor-ns-resize":"cursor:ns-resize;","X .cursor-ew-resize":"cursor:ew-resize;","X .cursor-sw-resize":"cursor:sw-resize;","X .cursor-s-resize":"cursor:s-resize;","X .cursor-se-resize":"cursor:se-resize;","X .cursor-w-resize":"cursor:w-resize;","X .cursor-e-resize":"cursor:e-resize;","X .cursor-nw-resize":"cursor:nw-resize;","X .cursor-n-resize":"cursor:n-resize;","X .cursor-ne-resize":"cursor:ne-resize;","X .cursor-grab":"cursor:-webkit-grab;cursor:grab;","X .modebar":"position:absolute;top:2px;right:2px;","X .ease-bg":"-webkit-transition:background-color .3s ease 0s;-moz-transition:background-color .3s ease 0s;-ms-transition:background-color .3s ease 0s;-o-transition:background-color .3s ease 0s;transition:background-color .3s ease 0s;","X .modebar--hover>:not(.watermark)":"opacity:0;-webkit-transition:opacity .3s ease 0s;-moz-transition:opacity .3s ease 0s;-ms-transition:opacity .3s ease 0s;-o-transition:opacity .3s ease 0s;transition:opacity .3s ease 0s;","X:hover .modebar--hover .modebar-group":"opacity:1;","X .modebar-group":"float:left;display:inline-block;box-sizing:border-box;padding-left:8px;position:relative;vertical-align:middle;white-space:nowrap;","X .modebar-btn":"position:relative;font-size:16px;padding:3px 4px;height:22px;cursor:pointer;line-height:normal;box-sizing:border-box;","X .modebar-btn svg":"position:relative;top:2px;","X .modebar.vertical":"display:flex;flex-direction:column;flex-wrap:wrap;align-content:flex-end;max-height:100%;","X .modebar.vertical svg":"top:-1px;","X .modebar.vertical .modebar-group":"display:block;float:none;padding-left:0px;padding-bottom:8px;","X .modebar.vertical .modebar-group .modebar-btn":"display:block;text-align:center;","X [data-title]:before,X [data-title]:after":"position:absolute;-webkit-transform:translate3d(0, 0, 0);-moz-transform:translate3d(0, 0, 0);-ms-transform:translate3d(0, 0, 0);-o-transform:translate3d(0, 0, 0);transform:translate3d(0, 0, 0);display:none;opacity:0;z-index:1001;pointer-events:none;top:110%;right:50%;","X [data-title]:hover:before,X [data-title]:hover:after":"display:block;opacity:1;","X [data-title]:before":'content:"";position:absolute;background:transparent;border:6px solid transparent;z-index:1002;margin-top:-12px;border-bottom-color:#69738a;margin-right:-6px;',"X [data-title]:after":"content:attr(data-title);background:#69738a;color:#fff;padding:8px 10px;font-size:12px;line-height:12px;white-space:nowrap;margin-right:-18px;border-radius:2px;","X .vertical [data-title]:before,X .vertical [data-title]:after":"top:0%;right:200%;","X .vertical [data-title]:before":"border:6px solid transparent;border-left-color:#69738a;margin-top:8px;margin-right:-30px;","X .select-outline":"fill:none;stroke-width:1;shape-rendering:crispEdges;","X .select-outline-1":"stroke:#fff;","X .select-outline-2":"stroke:#000;stroke-dasharray:2px 2px;",Y:'font-family:"Open Sans",verdana,arial,sans-serif;position:fixed;top:50px;right:20px;z-index:10000;font-size:10pt;max-width:180px;',"Y p":"margin:0;","Y .notifier-note":"min-width:180px;max-width:250px;border:1px solid #fff;z-index:3000;margin:0;background-color:#8c97af;background-color:rgba(140,151,175,.9);color:#fff;padding:10px;overflow-wrap:break-word;word-wrap:break-word;-ms-hyphens:auto;-webkit-hyphens:auto;hyphens:auto;","Y .notifier-close":"color:#fff;opacity:.8;float:right;padding:0 5px;background:none;border:none;font-size:20px;font-weight:bold;line-height:20px;","Y .notifier-close:hover":"color:#444;text-decoration:none;cursor:pointer;"};for(var T in x){var b=T.replace(/^,/," ,").replace(/X/g,".js-plotly-plot .plotly").replace(/Y/g,".plotly-notifier");m.addStyleRule(b,x[T])}},{"../src/lib":503}],2:[function(_,oe,ae){"use strict";oe.exports=_("../src/transforms/aggregate")},{"../src/transforms/aggregate":1114}],3:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/bar")},{"../src/traces/bar":656}],4:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/barpolar")},{"../src/traces/barpolar":669}],5:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/box")},{"../src/traces/box":679}],6:[function(_,oe,ae){"use strict";oe.exports=_("../src/components/calendars")},{"../src/components/calendars":364}],7:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/candlestick")},{"../src/traces/candlestick":688}],8:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/carpet")},{"../src/traces/carpet":707}],9:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/choropleth")},{"../src/traces/choropleth":721}],10:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/choroplethmapbox")},{"../src/traces/choroplethmapbox":728}],11:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/cone")},{"../src/traces/cone":734}],12:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/contour")},{"../src/traces/contour":749}],13:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/contourcarpet")},{"../src/traces/contourcarpet":760}],14:[function(_,oe,ae){"use strict";oe.exports=_("../src/core")},{"../src/core":481}],15:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/densitymapbox")},{"../src/traces/densitymapbox":768}],16:[function(_,oe,ae){"use strict";oe.exports=_("../src/transforms/filter")},{"../src/transforms/filter":1115}],17:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/funnel")},{"../src/traces/funnel":778}],18:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/funnelarea")},{"../src/traces/funnelarea":787}],19:[function(_,oe,ae){"use strict";oe.exports=_("../src/transforms/groupby")},{"../src/transforms/groupby":1116}],20:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/heatmap")},{"../src/traces/heatmap":800}],21:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/heatmapgl")},{"../src/traces/heatmapgl":811}],22:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/histogram")},{"../src/traces/histogram":823}],23:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/histogram2d")},{"../src/traces/histogram2d":829}],24:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/histogram2dcontour")},{"../src/traces/histogram2dcontour":833}],25:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/icicle")},{"../src/traces/icicle":839}],26:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/image")},{"../src/traces/image":852}],27:[function(_,oe,ae){"use strict";var m=_("./core");m.register([_("./bar"),_("./box"),_("./heatmap"),_("./histogram"),_("./histogram2d"),_("./histogram2dcontour"),_("./contour"),_("./scatterternary"),_("./violin"),_("./funnel"),_("./waterfall"),_("./image"),_("./pie"),_("./sunburst"),_("./treemap"),_("./icicle"),_("./funnelarea"),_("./scatter3d"),_("./surface"),_("./isosurface"),_("./volume"),_("./mesh3d"),_("./cone"),_("./streamtube"),_("./scattergeo"),_("./choropleth"),_("./scattergl"),_("./splom"),_("./pointcloud"),_("./heatmapgl"),_("./parcoords"),_("./parcats"),_("./scattermapbox"),_("./choroplethmapbox"),_("./densitymapbox"),_("./sankey"),_("./indicator"),_("./table"),_("./carpet"),_("./scattercarpet"),_("./contourcarpet"),_("./ohlc"),_("./candlestick"),_("./scatterpolar"),_("./scatterpolargl"),_("./barpolar"),_("./scattersmith"),_("./aggregate"),_("./filter"),_("./groupby"),_("./sort"),_("./calendars")]),oe.exports=m},{"./aggregate":2,"./bar":3,"./barpolar":4,"./box":5,"./calendars":6,"./candlestick":7,"./carpet":8,"./choropleth":9,"./choroplethmapbox":10,"./cone":11,"./contour":12,"./contourcarpet":13,"./core":14,"./densitymapbox":15,"./filter":16,"./funnel":17,"./funnelarea":18,"./groupby":19,"./heatmap":20,"./heatmapgl":21,"./histogram":22,"./histogram2d":23,"./histogram2dcontour":24,"./icicle":25,"./image":26,"./indicator":28,"./isosurface":29,"./mesh3d":30,"./ohlc":31,"./parcats":32,"./parcoords":33,"./pie":34,"./pointcloud":35,"./sankey":36,"./scatter3d":37,"./scattercarpet":38,"./scattergeo":39,"./scattergl":40,"./scattermapbox":41,"./scatterpolar":42,"./scatterpolargl":43,"./scattersmith":44,"./scatterternary":45,"./sort":46,"./splom":47,"./streamtube":48,"./sunburst":49,"./surface":50,"./table":51,"./treemap":52,"./violin":53,"./volume":54,"./waterfall":55}],28:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/indicator")},{"../src/traces/indicator":860}],29:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/isosurface")},{"../src/traces/isosurface":866}],30:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/mesh3d")},{"../src/traces/mesh3d":871}],31:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/ohlc")},{"../src/traces/ohlc":876}],32:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/parcats")},{"../src/traces/parcats":885}],33:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/parcoords")},{"../src/traces/parcoords":895}],34:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/pie")},{"../src/traces/pie":906}],35:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/pointcloud")},{"../src/traces/pointcloud":915}],36:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/sankey")},{"../src/traces/sankey":921}],37:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/scatter3d")},{"../src/traces/scatter3d":959}],38:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/scattercarpet")},{"../src/traces/scattercarpet":966}],39:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/scattergeo")},{"../src/traces/scattergeo":974}],40:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/scattergl")},{"../src/traces/scattergl":987}],41:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/scattermapbox")},{"../src/traces/scattermapbox":997}],42:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/scatterpolar")},{"../src/traces/scatterpolar":1005}],43:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/scatterpolargl")},{"../src/traces/scatterpolargl":1012}],44:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/scattersmith")},{"../src/traces/scattersmith":1019}],45:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/scatterternary")},{"../src/traces/scatterternary":1027}],46:[function(_,oe,ae){"use strict";oe.exports=_("../src/transforms/sort")},{"../src/transforms/sort":1118}],47:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/splom")},{"../src/traces/splom":1036}],48:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/streamtube")},{"../src/traces/streamtube":1044}],49:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/sunburst")},{"../src/traces/sunburst":1052}],50:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/surface")},{"../src/traces/surface":1061}],51:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/table")},{"../src/traces/table":1069}],52:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/treemap")},{"../src/traces/treemap":1080}],53:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/violin")},{"../src/traces/violin":1093}],54:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/volume")},{"../src/traces/volume":1101}],55:[function(_,oe,ae){"use strict";oe.exports=_("../src/traces/waterfall")},{"../src/traces/waterfall":1109}],56:[function(_,oe,ae){var m,x;m=this,x=function(m,x,T,b,e){"use strict";function o(le){return le.target.depth}function a(le,ue){return le.sourceLinks.length?le.depth:ue-1}function l(le){return function(){return le}}e=e&&e.hasOwnProperty("default")?e.default:e;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(le){return typeof le}:function(le){return le&&"function"==typeof Symbol&&le.constructor===Symbol&&le!==Symbol.prototype?"symbol":typeof le};function d(le,ue){return s(le.source,ue.source)||le.index-ue.index}function u(le,ue){return s(le.target,ue.target)||le.index-ue.index}function s(le,ue){return le.partOfCycle===ue.partOfCycle?le.y0-ue.y0:"top"===le.circularLinkType||"bottom"===ue.circularLinkType?-1:1}function c(le){return le.value}function h(le){return(le.y0+le.y1)/2}function p(le){return h(le.source)}function v(le){return h(le.target)}function g(le){return le.index}function f(le){return le.nodes}function w(le){return le.links}function y(le,ue){var de=le.get(ue);if(!de)throw new Error("missing: "+ue);return de}function M(le,ue){return ue(le)}function A(le,ue,de){var he=0;if(null===de){for(var be=[],ge=0;ge<le.links.length;ge++){var we=le.links[ge],Ce=we.source.index,De=we.target.index;be[Ce]||(be[Ce]=[]),be[De]||(be[De]=[]),-1===be[Ce].indexOf(De)&&be[Ce].push(De)}var Se=e(be);Se.sort(function(Te,Le){return Te.length-Le.length});var Fe={};for(ge=0;ge<Se.length;ge++){var ve=Se[ge].slice(-2);Fe[ve[0]]||(Fe[ve[0]]={}),Fe[ve[0]][ve[1]]=!0}le.links.forEach(function(Te){var Le=Te.target.index,Ee=Te.source.index;Le===Ee||Fe[Ee]&&Fe[Ee][Le]?(Te.circular=!0,Te.circularLinkID=he,he+=1):Te.circular=!1})}else le.links.forEach(function(Te){Te.source[de]<Te.target[de]?Te.circular=!1:(Te.circular=!0,Te.circularLinkID=he,he+=1)})}function k(le,ue){var de=0,he=0;le.links.forEach(function(be){be.circular&&(be.circularLinkType=be.source.circularLinkType||be.target.circularLinkType?be.source.circularLinkType?be.source.circularLinkType:be.target.circularLinkType:de<he?"top":"bottom","top"==be.circularLinkType?de+=1:he+=1,le.nodes.forEach(function(ge){M(ge,ue)!=M(be.source,ue)&&M(ge,ue)!=M(be.target,ue)||(ge.circularLinkType=be.circularLinkType)}))}),le.links.forEach(function(be){be.circular&&(be.source.circularLinkType==be.target.circularLinkType&&(be.circularLinkType=be.source.circularLinkType),te(be,ue)&&(be.circularLinkType=be.source.circularLinkType))})}function C(le){var ue=Math.abs(le.y1-le.y0),de=Math.abs(le.target.x0-le.source.x1);return Math.atan(de/ue)}function P(le,ue){var de=0;le.sourceLinks.forEach(function(be){de=be.circular&&!te(be,ue)?de+1:de});var he=0;return le.targetLinks.forEach(function(be){he=be.circular&&!te(be,ue)?he+1:he}),de+he}function D(le){var de=0;le.source.sourceLinks.forEach(function(ge){de=ge.circular?de+1:de});var be=0;return le.target.targetLinks.forEach(function(ge){be=ge.circular?be+1:be}),!(de>1||be>1)}function F(le,ue,de){return le.sort(L),le.forEach(function(he,be){var ge,we,Ce=0;if(te(he,de)&&D(he))he.circularPathData.verticalBuffer=Ce+he.width/2;else{for(var De=0;De<be;De++)if(!((ge=le[be]).source.column<(we=le[De]).target.column||ge.target.column>we.source.column)){var Se=le[De].circularPathData.verticalBuffer+le[De].width/2+ue;Ce=Se>Ce?Se:Ce}he.circularPathData.verticalBuffer=Ce+he.width/2}}),le}function R(le,ue,de,he){var be=x.min(le.links,function(ge){return ge.source.y0});le.links.forEach(function(ge){ge.circular&&(ge.circularPathData={})}),F(le.links.filter(function(ge){return"top"==ge.circularLinkType}),ue,he),F(le.links.filter(function(ge){return"bottom"==ge.circularLinkType}),ue,he),le.links.forEach(function(ge){if(ge.circular){if(ge.circularPathData.arcRadius=ge.width+10,ge.circularPathData.leftNodeBuffer=5,ge.circularPathData.rightNodeBuffer=5,ge.circularPathData.sourceWidth=ge.source.x1-ge.source.x0,ge.circularPathData.sourceX=ge.source.x0+ge.circularPathData.sourceWidth,ge.circularPathData.targetX=ge.target.x0,ge.circularPathData.sourceY=ge.y0,ge.circularPathData.targetY=ge.y1,te(ge,he)&&D(ge))ge.circularPathData.leftSmallArcRadius=10+ge.width/2,ge.circularPathData.leftLargeArcRadius=10+ge.width/2,ge.circularPathData.rightSmallArcRadius=10+ge.width/2,ge.circularPathData.rightLargeArcRadius=10+ge.width/2,"bottom"==ge.circularLinkType?(ge.circularPathData.verticalFullExtent=ge.source.y1+25+ge.circularPathData.verticalBuffer,ge.circularPathData.verticalLeftInnerExtent=ge.circularPathData.verticalFullExtent-ge.circularPathData.leftLargeArcRadius,ge.circularPathData.verticalRightInnerExtent=ge.circularPathData.verticalFullExtent-ge.circularPathData.rightLargeArcRadius):(ge.circularPathData.verticalFullExtent=ge.source.y0-25-ge.circularPathData.verticalBuffer,ge.circularPathData.verticalLeftInnerExtent=ge.circularPathData.verticalFullExtent+ge.circularPathData.leftLargeArcRadius,ge.circularPathData.verticalRightInnerExtent=ge.circularPathData.verticalFullExtent+ge.circularPathData.rightLargeArcRadius);else{var we=ge.source.column,Ce=ge.circularLinkType,De=le.links.filter(function(ve){return ve.source.column==we&&ve.circularLinkType==Ce});De.sort("bottom"==ge.circularLinkType?B:I);var Se=0;De.forEach(function(ve,Te){ve.circularLinkID==ge.circularLinkID&&(ge.circularPathData.leftSmallArcRadius=10+ge.width/2+Se,ge.circularPathData.leftLargeArcRadius=10+ge.width/2+Te*ue+Se),Se+=ve.width}),we=ge.target.column,(De=le.links.filter(function(ve){return ve.target.column==we&&ve.circularLinkType==Ce})).sort("bottom"==ge.circularLinkType?Z:V),Se=0,De.forEach(function(ve,Te){ve.circularLinkID==ge.circularLinkID&&(ge.circularPathData.rightSmallArcRadius=10+ge.width/2+Se,ge.circularPathData.rightLargeArcRadius=10+ge.width/2+Te*ue+Se),Se+=ve.width}),"bottom"==ge.circularLinkType?(ge.circularPathData.verticalFullExtent=Math.max(de,ge.source.y1,ge.target.y1)+25+ge.circularPathData.verticalBuffer,ge.circularPathData.verticalLeftInnerExtent=ge.circularPathData.verticalFullExtent-ge.circularPathData.leftLargeArcRadius,ge.circularPathData.verticalRightInnerExtent=ge.circularPathData.verticalFullExtent-ge.circularPathData.rightLargeArcRadius):(ge.circularPathData.verticalFullExtent=be-25-ge.circularPathData.verticalBuffer,ge.circularPathData.verticalLeftInnerExtent=ge.circularPathData.verticalFullExtent+ge.circularPathData.leftLargeArcRadius,ge.circularPathData.verticalRightInnerExtent=ge.circularPathData.verticalFullExtent+ge.circularPathData.rightLargeArcRadius)}ge.circularPathData.leftInnerExtent=ge.circularPathData.sourceX+ge.circularPathData.leftNodeBuffer,ge.circularPathData.rightInnerExtent=ge.circularPathData.targetX-ge.circularPathData.rightNodeBuffer,ge.circularPathData.leftFullExtent=ge.circularPathData.sourceX+ge.circularPathData.leftLargeArcRadius+ge.circularPathData.leftNodeBuffer,ge.circularPathData.rightFullExtent=ge.circularPathData.targetX-ge.circularPathData.rightLargeArcRadius-ge.circularPathData.rightNodeBuffer}if(ge.circular)ge.path="top"==(ve=ge).circularLinkType?"M"+ve.circularPathData.sourceX+" "+ve.circularPathData.sourceY+" L"+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.sourceY+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftSmallArcRadius+" 0 0 0 "+ve.circularPathData.leftFullExtent+" "+(ve.circularPathData.sourceY-ve.circularPathData.leftSmallArcRadius)+" L"+ve.circularPathData.leftFullExtent+" "+ve.circularPathData.verticalLeftInnerExtent+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftLargeArcRadius+" 0 0 0 "+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.verticalFullExtent+" L"+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.verticalFullExtent+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightLargeArcRadius+" 0 0 0 "+ve.circularPathData.rightFullExtent+" "+ve.circularPathData.verticalRightInnerExtent+" L"+ve.circularPathData.rightFullExtent+" "+(ve.circularPathData.targetY-ve.circularPathData.rightSmallArcRadius)+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightSmallArcRadius+" 0 0 0 "+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.targetY+" L"+ve.circularPathData.targetX+" "+ve.circularPathData.targetY:"M"+ve.circularPathData.sourceX+" "+ve.circularPathData.sourceY+" L"+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.sourceY+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftSmallArcRadius+" 0 0 1 "+ve.circularPathData.leftFullExtent+" "+(ve.circularPathData.sourceY+ve.circularPathData.leftSmallArcRadius)+" L"+ve.circularPathData.leftFullExtent+" "+ve.circularPathData.verticalLeftInnerExtent+" A"+ve.circularPathData.leftLargeArcRadius+" "+ve.circularPathData.leftLargeArcRadius+" 0 0 1 "+ve.circularPathData.leftInnerExtent+" "+ve.circularPathData.verticalFullExtent+" L"+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.verticalFullExtent+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightLargeArcRadius+" 0 0 1 "+ve.circularPathData.rightFullExtent+" "+ve.circularPathData.verticalRightInnerExtent+" L"+ve.circularPathData.rightFullExtent+" "+(ve.circularPathData.targetY+ve.circularPathData.rightSmallArcRadius)+" A"+ve.circularPathData.rightLargeArcRadius+" "+ve.circularPathData.rightSmallArcRadius+" 0 0 1 "+ve.circularPathData.rightInnerExtent+" "+ve.circularPathData.targetY+" L"+ve.circularPathData.targetX+" "+ve.circularPathData.targetY;else{var Fe=b.linkHorizontal().source(function(ve){return[ve.source.x0+(ve.source.x1-ve.source.x0),ve.y0]}).target(function(ve){return[ve.target.x0,ve.y1]});ge.path=Fe(ge)}var ve})}function L(le,ue){return Y(le)==Y(ue)?"bottom"==le.circularLinkType?B(le,ue):I(le,ue):Y(ue)-Y(le)}function I(le,ue){return le.y0-ue.y0}function B(le,ue){return ue.y0-le.y0}function V(le,ue){return le.y1-ue.y1}function Z(le,ue){return ue.y1-le.y1}function Y(le){return le.target.column-le.source.column}function ee(le){return le.target.x0-le.source.x1}function J(le,ue){var de=C(le),he=ee(ue)/Math.tan(de);return"up"==q(le)?le.y1+he:le.y1-he}function $(le,ue){var de=C(le),he=ee(ue)/Math.tan(de);return"up"==q(le)?le.y1-he:le.y1+he}function Q(le,ue,de,he){le.links.forEach(function(be){if(!be.circular&&be.target.column-be.source.column>1){var ge=be.source.column+1,we=be.target.column-1,Ce=1,De=we-ge+1;for(Ce=1;ge<=we;ge++,Ce++)le.nodes.forEach(function(Se){if(Se.column==ge){var Fe,ve=Ce/(De+1),Te=Math.pow(1-ve,3),Le=3*ve*Math.pow(1-ve,2),Ee=3*Math.pow(ve,2)*(1-ve),Pe=Math.pow(ve,3),je=Te*be.y0+Le*be.y0+Ee*be.y1+Pe*be.y1,Ge=je-be.width/2,Ke=je+be.width/2;Ge>Se.y0&&Ge<Se.y1?(Fe=Se.y1-Ge+10,Se=j(Se,Fe="bottom"==Se.circularLinkType?Fe:-Fe,ue,de),le.nodes.forEach(function(lt){M(lt,he)!=M(Se,he)&&lt.column==Se.column&&se(Se,lt)&&j(lt,Fe,ue,de)})):(Ke>Se.y0&&Ke<Se.y1||Ge<Se.y0&&Ke>Se.y1)&&(Se=j(Se,Fe=Ke-Se.y0+10,ue,de),le.nodes.forEach(function(lt){M(lt,he)!=M(Se,he)&&lt.column==Se.column&&lt.y0<Se.y1&&lt.y1>Se.y1&&j(lt,Fe,ue,de)}))}})}})}function se(le,ue){return le.y0>ue.y0&&le.y0<ue.y1||le.y1>ue.y0&&le.y1<ue.y1||le.y0<ue.y0&&le.y1>ue.y1}function j(le,ue,de,he){return le.y0+ue>=de&&le.y1+ue<=he&&(le.y0=le.y0+ue,le.y1=le.y1+ue,le.targetLinks.forEach(function(be){be.y1=be.y1+ue}),le.sourceLinks.forEach(function(be){be.y0=be.y0+ue})),le}function G(le,ue,de,he){le.nodes.forEach(function(be){he&&be.y+(be.y1-be.y0)>ue&&(be.y=be.y-(be.y+(be.y1-be.y0)-ue));var ge=le.links.filter(function(De){return M(De.source,de)==M(be,de)}),we=ge.length;we>1&&ge.sort(function(De,Se){if(!De.circular&&!Se.circular){if(De.target.column==Se.target.column||!ie(De,Se))return De.y1-Se.y1;if(De.target.column>Se.target.column){var Fe=$(Se,De);return De.y1-Fe}if(Se.target.column>De.target.column)return $(De,Se)-Se.y1}return De.circular&&!Se.circular?"top"==De.circularLinkType?-1:1:Se.circular&&!De.circular?"top"==Se.circularLinkType?1:-1:De.circular&&Se.circular?De.circularLinkType===Se.circularLinkType&&"top"==De.circularLinkType?De.target.column===Se.target.column?De.target.y1-Se.target.y1:Se.target.column-De.target.column:De.circularLinkType===Se.circularLinkType&&"bottom"==De.circularLinkType?De.target.column===Se.target.column?Se.target.y1-De.target.y1:De.target.column-Se.target.column:"top"==De.circularLinkType?-1:1:void 0});var Ce=be.y0;ge.forEach(function(De){De.y0=Ce+De.width/2,Ce+=De.width}),ge.forEach(function(De,Se){if("bottom"==De.circularLinkType){for(var Fe=Se+1,ve=0;Fe<we;Fe++)ve+=ge[Fe].width;De.y0=be.y1-ve-De.width/2}})})}function W(le,ue,de){le.nodes.forEach(function(he){var be=le.links.filter(function(Ce){return M(Ce.target,de)==M(he,de)}),ge=be.length;ge>1&&be.sort(function(Ce,De){if(!Ce.circular&&!De.circular){if(Ce.source.column==De.source.column||!ie(Ce,De))return Ce.y0-De.y0;if(De.source.column<Ce.source.column){var Se=J(De,Ce);return Ce.y0-Se}if(Ce.source.column<De.source.column)return J(Ce,De)-De.y0}return Ce.circular&&!De.circular?"top"==Ce.circularLinkType?-1:1:De.circular&&!Ce.circular?"top"==De.circularLinkType?1:-1:Ce.circular&&De.circular?Ce.circularLinkType===De.circularLinkType&&"top"==Ce.circularLinkType?Ce.source.column===De.source.column?Ce.source.y1-De.source.y1:Ce.source.column-De.source.column:Ce.circularLinkType===De.circularLinkType&&"bottom"==Ce.circularLinkType?Ce.source.column===De.source.column?Ce.source.y1-De.source.y1:De.source.column-Ce.source.column:"top"==Ce.circularLinkType?-1:1:void 0});var we=he.y0;be.forEach(function(Ce){Ce.y1=we+Ce.width/2,we+=Ce.width}),be.forEach(function(Ce,De){if("bottom"==Ce.circularLinkType){for(var Se=De+1,Fe=0;Se<ge;Se++)Fe+=be[Se].width;Ce.y1=he.y1-Fe-Ce.width/2}})})}function ie(le,ue){return q(le)==q(ue)}function q(le){return le.y0-le.y1>0?"up":"down"}function te(le,ue){return M(le.source,ue)==M(le.target,ue)}function ne(le,ue,de){var he=le.nodes,be=le.links,ge=!1,we=!1;if(be.forEach(function(Se){"top"==Se.circularLinkType?ge=!0:"bottom"==Se.circularLinkType&&(we=!0)}),0==ge||0==we){var Ce=x.min(he,function(Se){return Se.y0}),De=(de-ue)/(x.max(he,function(Se){return Se.y1})-Ce);he.forEach(function(Se){var Fe=(Se.y1-Se.y0)*De;Se.y0=(Se.y0-Ce)*De,Se.y1=Se.y0+Fe}),be.forEach(function(Se){Se.y0=(Se.y0-Ce)*De,Se.y1=(Se.y1-Ce)*De,Se.width=Se.width*De})}}m.sankeyCircular=function(){var le,ue,de=0,he=0,be=1,ge=1,we=24,Ce=g,De=a,Se=f,Fe=w,ve=32,Te=2,Le=null;function Ee(){var Ue={nodes:Se.apply(null,arguments),links:Fe.apply(null,arguments)};Pe(Ue),A(Ue,0,Le),je(Ue),Ge(Ue),k(Ue,Ce),Ke(Ue,ve,Ce),lt(Ue);for(var $e=4,et=0;et<$e;et++)G(Ue,ge,Ce),W(Ue,0,Ce),Q(Ue,he,ge,Ce),G(Ue,ge,Ce),W(Ue,0,Ce);return ne(Ue,he,ge),R(Ue,Te,ge,Ce),Ue}function Pe(Ue){Ue.nodes.forEach(function(et,tt){et.index=tt,et.sourceLinks=[],et.targetLinks=[]});var $e=T.map(Ue.nodes,Ce);return Ue.links.forEach(function(et,tt){et.index=tt;var ct=et.source,xt=et.target;"object"!==(void 0===ct?"undefined":i(ct))&&(ct=et.source=y($e,ct)),"object"!==(void 0===xt?"undefined":i(xt))&&(xt=et.target=y($e,xt)),ct.sourceLinks.push(et),xt.targetLinks.push(et)}),Ue}function je(Ue){Ue.nodes.forEach(function($e){$e.partOfCycle=!1,$e.value=Math.max(x.sum($e.sourceLinks,c),x.sum($e.targetLinks,c)),$e.sourceLinks.forEach(function(et){et.circular&&($e.partOfCycle=!0,$e.circularLinkType=et.circularLinkType)}),$e.targetLinks.forEach(function(et){et.circular&&($e.partOfCycle=!0,$e.circularLinkType=et.circularLinkType)})})}function Ge(Ue){var $e,et,tt;for($e=Ue.nodes,et=[],tt=0;$e.length;++tt,$e=et,et=[])$e.forEach(function(ct){ct.depth=tt,ct.sourceLinks.forEach(function(xt){et.indexOf(xt.target)<0&&!xt.circular&&et.push(xt.target)})});for($e=Ue.nodes,et=[],tt=0;$e.length;++tt,$e=et,et=[])$e.forEach(function(ct){ct.height=tt,ct.targetLinks.forEach(function(xt){et.indexOf(xt.source)<0&&!xt.circular&&et.push(xt.source)})});Ue.nodes.forEach(function(ct){ct.column=Math.floor(De.call(null,ct,tt))})}function Ke(Ue,$e,et){var tt=T.nest().key(function(zt){return zt.column}).sortKeys(x.ascending).entries(Ue.nodes).map(function(zt){return zt.values});(function(zt){if(ue){var ht=1/0;tt.forEach(function(un){var Ze=ge*ue/(un.length+1);ht=Ze<ht?Ze:ht}),le=ht}var ut=x.min(tt,function(un){return(ge-he-(un.length-1)*le)/x.sum(un,c)});ut*=.3,Ue.links.forEach(function(un){un.width=un.value*ut});var un,Ze,Qe,qe,it,Ie,Ot=(Ze=0,Qe=0,qe=0,it=0,Ie=x.max((un=Ue).nodes,function(ze){return ze.column}),un.links.forEach(function(ze){ze.circular&&("top"==ze.circularLinkType?Ze+=ze.width:Qe+=ze.width,0==ze.target.column&&(it+=ze.width),ze.source.column==Ie&&(qe+=ze.width))}),{top:Ze=Ze>0?Ze+25+10:Ze,bottom:Qe=Qe>0?Qe+25+10:Qe,left:it=it>0?it+25+10:it,right:qe=qe>0?qe+25+10:qe}),tn=function(un,Ze){var Qe=x.max(un.nodes,function(Ve){return Ve.column}),qe=be-de,it=ge-he,Ie=qe/(qe+Ze.right+Ze.left),ze=it/(it+Ze.top+Ze.bottom);return de=de*Ie+Ze.left,be=0==Ze.right?be:be*Ie,he=he*ze+Ze.top,ge*=ze,un.nodes.forEach(function(Ve){Ve.x0=de+Ve.column*((be-de-we)/Qe),Ve.x1=Ve.x0+we}),ze}(Ue,Ot);ut*=tn,Ue.links.forEach(function(un){un.width=un.value*ut}),tt.forEach(function(un){var Ze=un.length;un.forEach(function(Qe,qe){Qe.depth==tt.length-1&&1==Ze||0==Qe.depth&&1==Ze?(Qe.y0=ge/2-Qe.value*ut,Qe.y1=Qe.y0+Qe.value*ut):Qe.partOfCycle?0==P(Qe,zt)?(Qe.y0=ge/2+qe,Qe.y1=Qe.y0+Qe.value*ut):"top"==Qe.circularLinkType?(Qe.y0=he+qe,Qe.y1=Qe.y0+Qe.value*ut):(Qe.y0=ge-Qe.value*ut-qe,Qe.y1=Qe.y0+Qe.value*ut):0==Ot.top||0==Ot.bottom?(Qe.y0=(ge-he)/Ze*qe,Qe.y1=Qe.y0+Qe.value*ut):(Qe.y0=(ge-he)/2-Ze/2+qe,Qe.y1=Qe.y0+Qe.value*ut)})})})(et),Ht();for(var ct=1,xt=$e;xt>0;--xt)Ct(ct*=.99,et),Ht();function Ct(zt,ht){var ut=tt.length;tt.forEach(function(Ot){var tn=Ot.length,un=Ot[0].depth;Ot.forEach(function(Ze){var Qe;if((Ze.sourceLinks.length||Ze.targetLinks.length)&&!(Ze.partOfCycle&&P(Ze,ht)>0))if(0==un&&1==tn)Ze.y0=ge/2-(Qe=Ze.y1-Ze.y0)/2,Ze.y1=ge/2+Qe/2;else if(un==ut-1&&1==tn)Ze.y0=ge/2-(Qe=Ze.y1-Ze.y0)/2,Ze.y1=ge/2+Qe/2;else{var qe=x.mean(Ze.sourceLinks,v),it=x.mean(Ze.targetLinks,p),Ie=((qe&&it?(qe+it)/2:qe||it)-h(Ze))*zt;Ze.y0+=Ie,Ze.y1+=Ie}})})}function Ht(){tt.forEach(function(zt){var ht,ut,Ot,tn=he,un=zt.length;for(zt.sort(s),Ot=0;Ot<un;++Ot)(ut=tn-(ht=zt[Ot]).y0)>0&&(ht.y0+=ut,ht.y1+=ut),tn=ht.y1+le;if((ut=tn-le-ge)>0)for(tn=ht.y0-=ut,ht.y1-=ut,Ot=un-2;Ot>=0;--Ot)(ut=(ht=zt[Ot]).y1+le-tn)>0&&(ht.y0-=ut,ht.y1-=ut),tn=ht.y0})}}function lt(Ue){Ue.nodes.forEach(function($e){$e.sourceLinks.sort(u),$e.targetLinks.sort(d)}),Ue.nodes.forEach(function($e){var et=$e.y0,tt=et,ct=$e.y1,xt=ct;$e.sourceLinks.forEach(function(Ct){Ct.circular?(Ct.y0=ct-Ct.width/2,ct-=Ct.width):(Ct.y0=et+Ct.width/2,et+=Ct.width)}),$e.targetLinks.forEach(function(Ct){Ct.circular?(Ct.y1=xt-Ct.width/2,xt-=Ct.width):(Ct.y1=tt+Ct.width/2,tt+=Ct.width)})})}return Ee.nodeId=function(Ue){return arguments.length?(Ce="function"==typeof Ue?Ue:l(Ue),Ee):Ce},Ee.nodeAlign=function(Ue){return arguments.length?(De="function"==typeof Ue?Ue:l(Ue),Ee):De},Ee.nodeWidth=function(Ue){return arguments.length?(we=+Ue,Ee):we},Ee.nodePadding=function(Ue){return arguments.length?(le=+Ue,Ee):le},Ee.nodes=function(Ue){return arguments.length?(Se="function"==typeof Ue?Ue:l(Ue),Ee):Se},Ee.links=function(Ue){return arguments.length?(Fe="function"==typeof Ue?Ue:l(Ue),Ee):Fe},Ee.size=function(Ue){return arguments.length?(de=he=0,be=+Ue[0],ge=+Ue[1],Ee):[be-de,ge-he]},Ee.extent=function(Ue){return arguments.length?(de=+Ue[0][0],be=+Ue[1][0],he=+Ue[0][1],ge=+Ue[1][1],Ee):[[de,he],[be,ge]]},Ee.iterations=function(Ue){return arguments.length?(ve=+Ue,Ee):ve},Ee.circularLinkGap=function(Ue){return arguments.length?(Te=+Ue,Ee):Te},Ee.nodePaddingRatio=function(Ue){return arguments.length?(ue=+Ue,Ee):ue},Ee.sortNodes=function(Ue){return arguments.length?(Le=Ue,Ee):Le},Ee.update=function(Ue){return k(Ue,Ce),lt(Ue),Ue.links.forEach(function($e){$e.circular&&($e.circularLinkType=$e.y0+$e.y1<ge?"top":"bottom",$e.source.circularLinkType=$e.circularLinkType,$e.target.circularLinkType=$e.circularLinkType)}),G(Ue,ge,Ce,!1),W(Ue,0,Ce),R(Ue,Te,ge,Ce),Ue},Ee},m.sankeyCenter=function(le){return le.targetLinks.length?le.depth:le.sourceLinks.length?x.min(le.sourceLinks,o)-1:0},m.sankeyLeft=function(le){return le.depth},m.sankeyRight=function(le,ue){return ue-1-le.height},m.sankeyJustify=a,Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==oe?x(ae,_("d3-array"),_("d3-collection"),_("d3-shape"),_("elementary-circuits-directed-graph")):x(m.d3=m.d3||{},m.d3,m.d3,m.d3,null)},{"d3-array":107,"d3-collection":108,"d3-shape":119,"elementary-circuits-directed-graph":130}],57:[function(_,oe,ae){var m,x;m=this,x=function(m,x,T,b){"use strict";function e(M){return M.target.depth}function o(M,A){return M.sourceLinks.length?M.depth:A-1}function a(M){return function(){return M}}function l(M,A){return d(M.source,A.source)||M.index-A.index}function i(M,A){return d(M.target,A.target)||M.index-A.index}function d(M,A){return M.y0-A.y0}function u(M){return M.value}function s(M){return(M.y0+M.y1)/2}function c(M){return s(M.source)*M.value}function h(M){return s(M.target)*M.value}function p(M){return M.index}function v(M){return M.nodes}function g(M){return M.links}function f(M,A){var k=M.get(A);if(!k)throw new Error("missing: "+A);return k}function w(M){return[M.source.x1,M.y0]}function y(M){return[M.target.x0,M.y1]}m.sankey=function(){var M=0,A=0,k=1,C=1,P=24,D=8,F=p,R=o,L=v,I=g,B=32;function V(){var Q={nodes:L.apply(null,arguments),links:I.apply(null,arguments)};return Z(Q),Y(Q),ee(Q),J(Q),$(Q),Q}function Z(Q){Q.nodes.forEach(function(j,G){j.index=G,j.sourceLinks=[],j.targetLinks=[]});var se=T.map(Q.nodes,F);Q.links.forEach(function(j,G){j.index=G;var W=j.source,ie=j.target;"object"!=typeof W&&(W=j.source=f(se,W)),"object"!=typeof ie&&(ie=j.target=f(se,ie)),W.sourceLinks.push(j),ie.targetLinks.push(j)})}function Y(Q){Q.nodes.forEach(function(se){se.value=Math.max(x.sum(se.sourceLinks,u),x.sum(se.targetLinks,u))})}function ee(Q){var se,j,G;for(se=Q.nodes,j=[],G=0;se.length;++G,se=j,j=[])se.forEach(function(ie){ie.depth=G,ie.sourceLinks.forEach(function(q){j.indexOf(q.target)<0&&j.push(q.target)})});for(se=Q.nodes,j=[],G=0;se.length;++G,se=j,j=[])se.forEach(function(ie){ie.height=G,ie.targetLinks.forEach(function(q){j.indexOf(q.source)<0&&j.push(q.source)})});var W=(k-M-P)/(G-1);Q.nodes.forEach(function(ie){ie.x1=(ie.x0=M+Math.max(0,Math.min(G-1,Math.floor(R.call(null,ie,G))))*W)+P})}function J(Q){var se=T.nest().key(function(te){return te.x0}).sortKeys(x.ascending).entries(Q.nodes).map(function(te){return te.values});(function(){var te=x.max(se,function(ue){return ue.length}),ne=2/3*(C-A)/(te-1);D>ne&&(D=ne);var le=x.min(se,function(ue){return(C-A-(ue.length-1)*D)/x.sum(ue,u)});se.forEach(function(ue){ue.forEach(function(de,he){de.y1=(de.y0=he)+de.value*le})}),Q.links.forEach(function(ue){ue.width=ue.value*le})})(),q();for(var j=1,G=B;G>0;--G)ie(j*=.99),q(),W(j),q();function W(te){se.forEach(function(ne){ne.forEach(function(le){if(le.targetLinks.length){var ue=(x.sum(le.targetLinks,c)/x.sum(le.targetLinks,u)-s(le))*te;le.y0+=ue,le.y1+=ue}})})}function ie(te){se.slice().reverse().forEach(function(ne){ne.forEach(function(le){if(le.sourceLinks.length){var ue=(x.sum(le.sourceLinks,h)/x.sum(le.sourceLinks,u)-s(le))*te;le.y0+=ue,le.y1+=ue}})})}function q(){se.forEach(function(te){var ne,le,ue,de=A,he=te.length;for(te.sort(d),ue=0;ue<he;++ue)(le=de-(ne=te[ue]).y0)>0&&(ne.y0+=le,ne.y1+=le),de=ne.y1+D;if((le=de-D-C)>0)for(de=ne.y0-=le,ne.y1-=le,ue=he-2;ue>=0;--ue)(le=(ne=te[ue]).y1+D-de)>0&&(ne.y0-=le,ne.y1-=le),de=ne.y0})}}function $(Q){Q.nodes.forEach(function(se){se.sourceLinks.sort(i),se.targetLinks.sort(l)}),Q.nodes.forEach(function(se){var j=se.y0,G=j;se.sourceLinks.forEach(function(W){W.y0=j+W.width/2,j+=W.width}),se.targetLinks.forEach(function(W){W.y1=G+W.width/2,G+=W.width})})}return V.update=function(Q){return $(Q),Q},V.nodeId=function(Q){return arguments.length?(F="function"==typeof Q?Q:a(Q),V):F},V.nodeAlign=function(Q){return arguments.length?(R="function"==typeof Q?Q:a(Q),V):R},V.nodeWidth=function(Q){return arguments.length?(P=+Q,V):P},V.nodePadding=function(Q){return arguments.length?(D=+Q,V):D},V.nodes=function(Q){return arguments.length?(L="function"==typeof Q?Q:a(Q),V):L},V.links=function(Q){return arguments.length?(I="function"==typeof Q?Q:a(Q),V):I},V.size=function(Q){return arguments.length?(M=A=0,k=+Q[0],C=+Q[1],V):[k-M,C-A]},V.extent=function(Q){return arguments.length?(M=+Q[0][0],k=+Q[1][0],A=+Q[0][1],C=+Q[1][1],V):[[M,A],[k,C]]},V.iterations=function(Q){return arguments.length?(B=+Q,V):B},V},m.sankeyCenter=function(M){return M.targetLinks.length?M.depth:M.sourceLinks.length?x.min(M.sourceLinks,e)-1:0},m.sankeyLeft=function(M){return M.depth},m.sankeyRight=function(M,A){return A-1-M.height},m.sankeyJustify=o,m.sankeyLinkHorizontal=function(){return b.linkHorizontal().source(w).target(y)},Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==oe?x(ae,_("d3-array"),_("d3-collection"),_("d3-shape")):x(m.d3=m.d3||{},m.d3,m.d3,m.d3)},{"d3-array":107,"d3-collection":108,"d3-shape":119}],58:[function(_,oe,ae){(function(){var m={version:"3.8.0"},x=[].slice,T=function(pe){return x.call(pe)},b=self.document;function e(pe){return pe&&(pe.ownerDocument||pe.document||pe).documentElement}function o(pe){return pe&&(pe.ownerDocument&&pe.ownerDocument.defaultView||pe.document&&pe||pe.defaultView)}if(b)try{T(b.documentElement.childNodes)}catch(pe){T=function(O){for(var N=O.length,H=new Array(N);N--;)H[N]=O[N];return H}}if(Date.now||(Date.now=function(){return+new Date}),b)try{b.createElement("DIV").style.setProperty("opacity",0,"")}catch(pe){var a=this.Element.prototype,l=a.setAttribute,i=a.setAttributeNS,d=this.CSSStyleDeclaration.prototype,u=d.setProperty;a.setAttribute=function(O,N){l.call(this,O,N+"")},a.setAttributeNS=function(O,N,H){i.call(this,O,N,H+"")},d.setProperty=function(O,N,H){u.call(this,O,N+"",H)}}function s(pe,O){return pe<O?-1:pe>O?1:pe>=O?0:NaN}function c(pe){return null===pe?NaN:+pe}function h(pe){return!isNaN(pe)}function p(pe){return{left:function(O,N,H,X){for(arguments.length<3&&(H=0),arguments.length<4&&(X=O.length);H<X;){var fe=H+X>>>1;pe(O[fe],N)<0?H=fe+1:X=fe}return H},right:function(O,N,H,X){for(arguments.length<3&&(H=0),arguments.length<4&&(X=O.length);H<X;){var fe=H+X>>>1;pe(O[fe],N)>0?X=fe:H=fe+1}return H}}}m.ascending=s,m.descending=function(pe,O){return O<pe?-1:O>pe?1:O>=pe?0:NaN},m.min=function(pe,O){var N,H,X=-1,fe=pe.length;if(1===arguments.length){for(;++X<fe;)if(null!=(H=pe[X])&&H>=H){N=H;break}for(;++X<fe;)null!=(H=pe[X])&&N>H&&(N=H)}else{for(;++X<fe;)if(null!=(H=O.call(pe,pe[X],X))&&H>=H){N=H;break}for(;++X<fe;)null!=(H=O.call(pe,pe[X],X))&&N>H&&(N=H)}return N},m.max=function(pe,O){var N,H,X=-1,fe=pe.length;if(1===arguments.length){for(;++X<fe;)if(null!=(H=pe[X])&&H>=H){N=H;break}for(;++X<fe;)null!=(H=pe[X])&&H>N&&(N=H)}else{for(;++X<fe;)if(null!=(H=O.call(pe,pe[X],X))&&H>=H){N=H;break}for(;++X<fe;)null!=(H=O.call(pe,pe[X],X))&&H>N&&(N=H)}return N},m.extent=function(pe,O){var N,H,X,fe=-1,me=pe.length;if(1===arguments.length){for(;++fe<me;)if(null!=(H=pe[fe])&&H>=H){N=X=H;break}for(;++fe<me;)null!=(H=pe[fe])&&(N>H&&(N=H),X<H&&(X=H))}else{for(;++fe<me;)if(null!=(H=O.call(pe,pe[fe],fe))&&H>=H){N=X=H;break}for(;++fe<me;)null!=(H=O.call(pe,pe[fe],fe))&&(N>H&&(N=H),X<H&&(X=H))}return[N,X]},m.sum=function(pe,O){var N,H=0,X=pe.length,fe=-1;if(1===arguments.length)for(;++fe<X;)h(N=+pe[fe])&&(H+=N);else for(;++fe<X;)h(N=+O.call(pe,pe[fe],fe))&&(H+=N);return H},m.mean=function(pe,O){var N,H=0,X=pe.length,fe=-1,me=X;if(1===arguments.length)for(;++fe<X;)h(N=c(pe[fe]))?H+=N:--me;else for(;++fe<X;)h(N=c(O.call(pe,pe[fe],fe)))?H+=N:--me;if(me)return H/me},m.quantile=function(pe,O){var N=(pe.length-1)*O+1,H=Math.floor(N),X=+pe[H-1],fe=N-H;return fe?X+fe*(pe[H]-X):X},m.median=function(pe,O){var N,H=[],X=pe.length,fe=-1;if(1===arguments.length)for(;++fe<X;)h(N=c(pe[fe]))&&H.push(N);else for(;++fe<X;)h(N=c(O.call(pe,pe[fe],fe)))&&H.push(N);if(H.length)return m.quantile(H.sort(s),.5)},m.variance=function(pe,O){var N,H,X=pe.length,fe=0,me=0,_e=-1,ke=0;if(1===arguments.length)for(;++_e<X;)h(N=c(pe[_e]))&&(me+=(H=N-fe)*(N-(fe+=H/++ke)));else for(;++_e<X;)h(N=c(O.call(pe,pe[_e],_e)))&&(me+=(H=N-fe)*(N-(fe+=H/++ke)));if(ke>1)return me/(ke-1)},m.deviation=function(){var pe=m.variance.apply(this,arguments);return pe&&Math.sqrt(pe)};var v=p(s);function g(pe){return pe.length}m.bisectLeft=v.left,m.bisect=m.bisectRight=v.right,m.bisector=function(pe){return p(1===pe.length?function(O,N){return s(pe(O),N)}:pe)},m.shuffle=function(pe,O,N){(fe=arguments.length)<3&&(N=pe.length,fe<2&&(O=0));for(var H,X,fe=N-O;fe;)X=Math.random()*fe--|0,H=pe[fe+O],pe[fe+O]=pe[X+O],pe[X+O]=H;return pe},m.permute=function(pe,O){for(var N=O.length,H=new Array(N);N--;)H[N]=pe[O[N]];return H},m.pairs=function(pe){for(var O=0,N=pe.length-1,H=pe[0],X=new Array(N<0?0:N);O<N;)X[O]=[H,H=pe[++O]];return X},m.transpose=function(pe){if(!(X=pe.length))return[];for(var O=-1,N=m.min(pe,g),H=new Array(N);++O<N;)for(var X,fe=-1,me=H[O]=new Array(X);++fe<X;)me[fe]=pe[fe][O];return H},m.zip=function(){return m.transpose(arguments)},m.keys=function(pe){var O=[];for(var N in pe)O.push(N);return O},m.values=function(pe){var O=[];for(var N in pe)O.push(pe[N]);return O},m.entries=function(pe){var O=[];for(var N in pe)O.push({key:N,value:pe[N]});return O},m.merge=function(pe){for(var O,N,H,X=pe.length,fe=-1,me=0;++fe<X;)me+=pe[fe].length;for(N=new Array(me);--X>=0;)for(O=(H=pe[X]).length;--O>=0;)N[--me]=H[O];return N};var f=Math.abs;function w(pe){for(var O=1;pe*O%1;)O*=10;return O}function y(pe,O){for(var N in O)Object.defineProperty(pe.prototype,N,{value:O[N],enumerable:!1})}function M(){this._=Object.create(null)}function A(pe){return"__proto__"==(pe+="")||"\0"===pe[0]?"\0"+pe:pe}function k(pe){return"\0"===(pe+="")[0]?pe.slice(1):pe}function C(pe){return A(pe)in this._}function P(pe){return(pe=A(pe))in this._&&delete this._[pe]}function D(){var pe=[];for(var O in this._)pe.push(k(O));return pe}function F(){var pe=0;for(var O in this._)++pe;return pe}function R(){for(var pe in this._)return!1;return!0}function L(){this._=Object.create(null)}function I(pe){return pe}function B(pe,O,N){return function(){var H=N.apply(O,arguments);return H===O?pe:H}}function V(pe,O){if(O in pe)return O;O=O.charAt(0).toUpperCase()+O.slice(1);for(var N=0,H=Z.length;N<H;++N){var X=Z[N]+O;if(X in pe)return X}}m.range=function(pe,O,N){if(arguments.length<3&&(N=1,arguments.length<2&&(O=pe,pe=0)),(O-pe)/N==1/0)throw new Error("infinite range");var H,X=[],fe=w(f(N)),me=-1;if(pe*=fe,O*=fe,(N*=fe)<0)for(;(H=pe+N*++me)>O;)X.push(H/fe);else for(;(H=pe+N*++me)<O;)X.push(H/fe);return X},m.map=function(pe,O){var N=new M;if(pe instanceof M)pe.forEach(function(_e,ke){N.set(_e,ke)});else if(Array.isArray(pe)){var H,X=-1,fe=pe.length;if(1===arguments.length)for(;++X<fe;)N.set(X,pe[X]);else for(;++X<fe;)N.set(O.call(pe,H=pe[X],X),H)}else for(var me in pe)N.set(me,pe[me]);return N},y(M,{has:C,get:function(pe){return this._[A(pe)]},set:function(pe,O){return this._[A(pe)]=O},remove:P,keys:D,values:function(){var pe=[];for(var O in this._)pe.push(this._[O]);return pe},entries:function(){var pe=[];for(var O in this._)pe.push({key:k(O),value:this._[O]});return pe},size:F,empty:R,forEach:function(pe){for(var O in this._)pe.call(this,k(O),this._[O])}}),m.nest=function(){var pe,O,N={},H=[],X=[];function fe(me,_e,ke){if(ke>=H.length)return O?O.call(N,_e):pe?_e.sort(pe):_e;for(var Oe,Xe,nt,dt,Dt=-1,Ft=_e.length,It=H[ke++],Pt=new M;++Dt<Ft;)(dt=Pt.get(Oe=It(Xe=_e[Dt])))?dt.push(Xe):Pt.set(Oe,[Xe]);return me?(Xe=me(),nt=function(Et,Zt){Xe.set(Et,fe(me,Zt,ke))}):(Xe={},nt=function(Et,Zt){Xe[Et]=fe(me,Zt,ke)}),Pt.forEach(nt),Xe}return N.map=function(me,_e){return fe(_e,me,0)},N.entries=function(me){return function _e(ke,Oe){if(Oe>=H.length)return ke;var Xe=[],nt=X[Oe++];return ke.forEach(function(dt,Dt){Xe.push({key:dt,values:_e(Dt,Oe)})}),nt?Xe.sort(function(dt,Dt){return nt(dt.key,Dt.key)}):Xe}(fe(m.map,me,0),0)},N.key=function(me){return H.push(me),N},N.sortKeys=function(me){return X[H.length-1]=me,N},N.sortValues=function(me){return pe=me,N},N.rollup=function(me){return O=me,N},N},m.set=function(pe){var O=new L;if(pe)for(var N=0,H=pe.length;N<H;++N)O.add(pe[N]);return O},y(L,{has:C,add:function(pe){return this._[A(pe+="")]=!0,pe},remove:P,values:D,size:F,empty:R,forEach:function(pe){for(var O in this._)pe.call(this,k(O))}}),m.behavior={},m.rebind=function(pe,O){for(var N,H=1,X=arguments.length;++H<X;)pe[N=arguments[H]]=B(pe,O,O[N]);return pe};var Z=["webkit","ms","moz","Moz","o","O"];function Y(){}function ee(){}function J(pe){var O=[],N=new M;function H(){for(var X,fe=O,me=-1,_e=fe.length;++me<_e;)(X=fe[me].on)&&X.apply(this,arguments);return pe}return H.on=function(X,fe){var me,_e=N.get(X);return arguments.length<2?_e&&_e.on:(_e&&(_e.on=null,O=O.slice(0,me=O.indexOf(_e)).concat(O.slice(me+1)),N.remove(X)),fe&&O.push(N.set(X,{on:fe})),pe)},H}function $(){m.event.preventDefault()}function Q(){for(var pe,O=m.event;pe=O.sourceEvent;)O=pe;return O}function se(pe){for(var O=new ee,N=0,H=arguments.length;++N<H;)O[arguments[N]]=J(O);return O.of=function(X,fe){return function(me){try{var _e=me.sourceEvent=m.event;me.target=pe,m.event=me,O[me.type].apply(X,fe)}finally{m.event=_e}}},O}m.dispatch=function(){for(var pe=new ee,O=-1,N=arguments.length;++O<N;)pe[arguments[O]]=J(pe);return pe},ee.prototype.on=function(pe,O){var N=pe.indexOf("."),H="";if(N>=0&&(H=pe.slice(N+1),pe=pe.slice(0,N)),pe)return arguments.length<2?this[pe].on(H):this[pe].on(H,O);if(2===arguments.length){if(null==O)for(pe in this)this.hasOwnProperty(pe)&&this[pe].on(H,null);return this}},m.event=null,m.requote=function(pe){return pe.replace(j,"\\$&")};var j=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,G={}.__proto__?function(pe,O){pe.__proto__=O}:function(pe,O){for(var N in O)pe[N]=O[N]};function W(pe){return G(pe,ne),pe}var ie=function(pe,O){return O.querySelector(pe)},q=function(pe,O){return O.querySelectorAll(pe)},te=function(pe,O){var N=pe.matches||pe[V(pe,"matchesSelector")];return(te=function(H,X){return N.call(H,X)})(pe,O)};"function"==typeof Sizzle&&(ie=function(pe,O){return Sizzle(pe,O)[0]||null},q=Sizzle,te=Sizzle.matchesSelector),m.selection=function(){return m.select(b.documentElement)};var ne=m.selection.prototype=[];function le(pe){return"function"==typeof pe?pe:function(){return ie(pe,this)}}function ue(pe){return"function"==typeof pe?pe:function(){return q(pe,this)}}ne.select=function(pe){var O,N,H,X,fe=[];pe=le(pe);for(var me=-1,_e=this.length;++me<_e;){fe.push(O=[]),O.parentNode=(H=this[me]).parentNode;for(var ke=-1,Oe=H.length;++ke<Oe;)(X=H[ke])?(O.push(N=pe.call(X,X.__data__,ke,me)),N&&"__data__"in X&&(N.__data__=X.__data__)):O.push(null)}return W(fe)},ne.selectAll=function(pe){var O,N,H=[];pe=ue(pe);for(var X=-1,fe=this.length;++X<fe;)for(var me=this[X],_e=-1,ke=me.length;++_e<ke;)(N=me[_e])&&(H.push(O=T(pe.call(N,N.__data__,_e,X))),O.parentNode=N);return W(H)};var de="http://www.w3.org/1999/xhtml",he={svg:"http://www.w3.org/2000/svg",xhtml:de,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function be(pe,O){return pe=m.ns.qualify(pe),null==O?pe.local?function(){this.removeAttributeNS(pe.space,pe.local)}:function(){this.removeAttribute(pe)}:"function"==typeof O?pe.local?function(){var N=O.apply(this,arguments);null==N?this.removeAttributeNS(pe.space,pe.local):this.setAttributeNS(pe.space,pe.local,N)}:function(){var N=O.apply(this,arguments);null==N?this.removeAttribute(pe):this.setAttribute(pe,N)}:pe.local?function(){this.setAttributeNS(pe.space,pe.local,O)}:function(){this.setAttribute(pe,O)}}function ge(pe){return pe.trim().replace(/\s+/g," ")}function we(pe){return new RegExp("(?:^|\\s+)"+m.requote(pe)+"(?:\\s+|$)","g")}function Ce(pe){return(pe+"").trim().split(/^|\s+/)}function De(pe,O){var N=(pe=Ce(pe).map(Se)).length;return"function"==typeof O?function(){for(var H=-1,X=O.apply(this,arguments);++H<N;)pe[H](this,X)}:function(){for(var H=-1;++H<N;)pe[H](this,O)}}function Se(pe){var O=we(pe);return function(N,H){if(X=N.classList)return H?X.add(pe):X.remove(pe);var X=N.getAttribute("class")||"";H?(O.lastIndex=0,O.test(X)||N.setAttribute("class",ge(X+" "+pe))):N.setAttribute("class",ge(X.replace(O," ")))}}function Fe(pe,O,N){return null==O?function(){this.style.removeProperty(pe)}:"function"==typeof O?function(){var H=O.apply(this,arguments);null==H?this.style.removeProperty(pe):this.style.setProperty(pe,H,N)}:function(){this.style.setProperty(pe,O,N)}}function ve(pe,O){return null==O?function(){delete this[pe]}:"function"==typeof O?function(){var N=O.apply(this,arguments);null==N?delete this[pe]:this[pe]=N}:function(){this[pe]=O}}function Te(pe){return"function"==typeof pe?pe:(pe=m.ns.qualify(pe)).local?function(){return this.ownerDocument.createElementNS(pe.space,pe.local)}:function(){var O=this.ownerDocument,N=this.namespaceURI;return N===de&&O.documentElement.namespaceURI===de?O.createElement(pe):O.createElementNS(N,pe)}}function Le(){var pe=this.parentNode;pe&&pe.removeChild(this)}function Ee(pe){return{__data__:pe}}function Pe(pe){return function(){return te(this,pe)}}function je(pe){return arguments.length||(pe=s),function(O,N){return O&&N?pe(O.__data__,N.__data__):!O-!N}}function Ge(pe,O){for(var N=0,H=pe.length;N<H;N++)for(var X,fe=pe[N],me=0,_e=fe.length;me<_e;me++)(X=fe[me])&&O(X,me,N);return pe}function Ke(pe){return G(pe,lt),pe}m.ns={prefix:he,qualify:function(pe){var O=pe.indexOf(":"),N=pe;return O>=0&&"xmlns"!==(N=pe.slice(0,O))&&(pe=pe.slice(O+1)),he.hasOwnProperty(N)?{space:he[N],local:pe}:pe}},ne.attr=function(pe,O){if(arguments.length<2){if("string"==typeof pe){var N=this.node();return(pe=m.ns.qualify(pe)).local?N.getAttributeNS(pe.space,pe.local):N.getAttribute(pe)}for(O in pe)this.each(be(O,pe[O]));return this}return this.each(be(pe,O))},ne.classed=function(pe,O){if(arguments.length<2){if("string"==typeof pe){var N=this.node(),H=(pe=Ce(pe)).length,X=-1;if(O=N.classList){for(;++X<H;)if(!O.contains(pe[X]))return!1}else for(O=N.getAttribute("class");++X<H;)if(!we(pe[X]).test(O))return!1;return!0}for(O in pe)this.each(De(O,pe[O]));return this}return this.each(De(pe,O))},ne.style=function(pe,O,N){var H=arguments.length;if(H<3){if("string"!=typeof pe){for(N in H<2&&(O=""),pe)this.each(Fe(N,pe[N],O));return this}if(H<2){var X=this.node();return o(X).getComputedStyle(X,null).getPropertyValue(pe)}N=""}return this.each(Fe(pe,O,N))},ne.property=function(pe,O){if(arguments.length<2){if("string"==typeof pe)return this.node()[pe];for(O in pe)this.each(ve(O,pe[O]));return this}return this.each(ve(pe,O))},ne.text=function(pe){return arguments.length?this.each("function"==typeof pe?function(){var O=pe.apply(this,arguments);this.textContent=null==O?"":O}:null==pe?function(){this.textContent=""}:function(){this.textContent=pe}):this.node().textContent},ne.html=function(pe){return arguments.length?this.each("function"==typeof pe?function(){var O=pe.apply(this,arguments);this.innerHTML=null==O?"":O}:null==pe?function(){this.innerHTML=""}:function(){this.innerHTML=pe}):this.node().innerHTML},ne.append=function(pe){return pe=Te(pe),this.select(function(){return this.appendChild(pe.apply(this,arguments))})},ne.insert=function(pe,O){return pe=Te(pe),O=le(O),this.select(function(){return this.insertBefore(pe.apply(this,arguments),O.apply(this,arguments)||null)})},ne.remove=function(){return this.each(Le)},ne.data=function(pe,O){var N,H,X=-1,fe=this.length;if(!arguments.length){for(pe=new Array(fe=(N=this[0]).length);++X<fe;)(H=N[X])&&(pe[X]=H.__data__);return pe}function me(Xe,nt){var dt,Dt,Ft,It=Xe.length,Pt=nt.length,Et=Math.min(It,Pt),Zt=new Array(Pt),qt=new Array(Pt),$t=new Array(It);if(O){var yn,kn=new M,Vn=new Array(It);for(dt=-1;++dt<It;)(Dt=Xe[dt])&&(kn.has(yn=O.call(Dt,Dt.__data__,dt))?$t[dt]=Dt:kn.set(yn,Dt),Vn[dt]=yn);for(dt=-1;++dt<Pt;)(Dt=kn.get(yn=O.call(nt,Ft=nt[dt],dt)))?!0!==Dt&&(Zt[dt]=Dt,Dt.__data__=Ft):qt[dt]=Ee(Ft),kn.set(yn,!0);for(dt=-1;++dt<It;)dt in Vn&&!0!==kn.get(Vn[dt])&&($t[dt]=Xe[dt])}else{for(dt=-1;++dt<Et;)Ft=nt[dt],(Dt=Xe[dt])?(Dt.__data__=Ft,Zt[dt]=Dt):qt[dt]=Ee(Ft);for(;dt<Pt;++dt)qt[dt]=Ee(nt[dt]);for(;dt<It;++dt)$t[dt]=Xe[dt]}qt.update=Zt,qt.parentNode=Zt.parentNode=$t.parentNode=Xe.parentNode,_e.push(qt),ke.push(Zt),Oe.push($t)}var _e=Ke([]),ke=W([]),Oe=W([]);if("function"==typeof pe)for(;++X<fe;)me(N=this[X],pe.call(N,N.parentNode.__data__,X));else for(;++X<fe;)me(N=this[X],pe);return ke.enter=function(){return _e},ke.exit=function(){return Oe},ke},ne.datum=function(pe){return arguments.length?this.property("__data__",pe):this.property("__data__")},ne.filter=function(pe){var O,N,H,X=[];"function"!=typeof pe&&(pe=Pe(pe));for(var fe=0,me=this.length;fe<me;fe++){X.push(O=[]),O.parentNode=(N=this[fe]).parentNode;for(var _e=0,ke=N.length;_e<ke;_e++)(H=N[_e])&&pe.call(H,H.__data__,_e,fe)&&O.push(H)}return W(X)},ne.order=function(){for(var pe=-1,O=this.length;++pe<O;)for(var N,H=this[pe],X=H.length-1,fe=H[X];--X>=0;)(N=H[X])&&(fe&&fe!==N.nextSibling&&fe.parentNode.insertBefore(N,fe),fe=N);return this},ne.sort=function(pe){pe=je.apply(this,arguments);for(var O=-1,N=this.length;++O<N;)this[O].sort(pe);return this.order()},ne.each=function(pe){return Ge(this,function(O,N,H){pe.call(O,O.__data__,N,H)})},ne.call=function(pe){var O=T(arguments);return pe.apply(O[0]=this,O),this},ne.empty=function(){return!this.node()},ne.node=function(){for(var pe=0,O=this.length;pe<O;pe++)for(var N=this[pe],H=0,X=N.length;H<X;H++){var fe=N[H];if(fe)return fe}return null},ne.size=function(){var pe=0;return Ge(this,function(){++pe}),pe};var lt=[];function Ue(pe){var O,N;return function(H,X,fe){var me,_e=pe[fe].update,ke=_e.length;for(fe!=N&&(N=fe,O=0),X>=O&&(O=X+1);!(me=_e[O])&&++O<ke;);return me}}function $e(pe,O,N){var H="__on"+pe,X=pe.indexOf("."),fe=tt;X>0&&(pe=pe.slice(0,X));var me=et.get(pe);function _e(){var ke=this[H];ke&&(this.removeEventListener(pe,ke,ke.$),delete this[H])}return me&&(pe=me,fe=ct),X?O?function(){var ke=fe(O,T(arguments));_e.call(this),this.addEventListener(pe,this[H]=ke,ke.$=N),ke._=O}:_e:O?Y:function(){var ke,Oe=new RegExp("^__on([^.]+)"+m.requote(pe)+"$");for(var Xe in this)if(ke=Xe.match(Oe)){var nt=this[Xe];this.removeEventListener(ke[1],nt,nt.$),delete this[Xe]}}}m.selection.enter=Ke,m.selection.enter.prototype=lt,lt.append=ne.append,lt.empty=ne.empty,lt.node=ne.node,lt.call=ne.call,lt.size=ne.size,lt.select=function(pe){for(var O,N,H,X,fe,me=[],_e=-1,ke=this.length;++_e<ke;){H=(X=this[_e]).update,me.push(O=[]),O.parentNode=X.parentNode;for(var Oe=-1,Xe=X.length;++Oe<Xe;)(fe=X[Oe])?(O.push(H[Oe]=N=pe.call(X.parentNode,fe.__data__,Oe,_e)),N.__data__=fe.__data__):O.push(null)}return W(me)},lt.insert=function(pe,O){return arguments.length<2&&(O=Ue(this)),ne.insert.call(this,pe,O)},m.select=function(pe){var O;return"string"==typeof pe?(O=[ie(pe,b)]).parentNode=b.documentElement:(O=[pe]).parentNode=e(pe),W([O])},m.selectAll=function(pe){var O;return"string"==typeof pe?(O=T(q(pe,b))).parentNode=b.documentElement:(O=T(pe)).parentNode=null,W([O])},ne.on=function(pe,O,N){var H=arguments.length;if(H<3){if("string"!=typeof pe){for(N in H<2&&(O=!1),pe)this.each($e(N,pe[N],O));return this}if(H<2)return(H=this.node()["__on"+pe])&&H._;N=!1}return this.each($e(pe,O,N))};var et=m.map({mouseenter:"mouseover",mouseleave:"mouseout"});function tt(pe,O){return function(N){var H=m.event;m.event=N,O[0]=this.__data__;try{pe.apply(this,O)}finally{m.event=H}}}function ct(pe,O){var N=tt(pe,O);return function(H){var X=H.relatedTarget;X&&(X===this||8&X.compareDocumentPosition(this))||N.call(this,H)}}b&&et.forEach(function(pe){"on"+pe in b&&et.remove(pe)});var xt,Ct=0;function Ht(pe){var O=".dragsuppress-"+ ++Ct,N="click"+O,H=m.select(o(pe)).on("touchmove"+O,$).on("dragstart"+O,$).on("selectstart"+O,$);if(null==xt&&(xt=!("onselectstart"in pe)&&V(pe.style,"userSelect")),xt){var X=e(pe).style,fe=X[xt];X[xt]="none"}return function(me){if(H.on(O,null),xt&&(X[xt]=fe),me){var _e=function(){H.on(N,null)};H.on(N,function(){$(),_e()},!0),setTimeout(_e,0)}}}m.mouse=function(pe){return ht(pe,Q())};var zt=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;function ht(pe,O){O.changedTouches&&(O=O.changedTouches[0]);var N=pe.ownerSVGElement||pe;if(N.createSVGPoint){var H=N.createSVGPoint();if(zt<0){var X=o(pe);if(X.scrollX||X.scrollY){var fe=(N=m.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();zt=!(fe.f||fe.e),N.remove()}}return zt?(H.x=O.pageX,H.y=O.pageY):(H.x=O.clientX,H.y=O.clientY),[(H=H.matrixTransform(pe.getScreenCTM().inverse())).x,H.y]}var me=pe.getBoundingClientRect();return[O.clientX-me.left-pe.clientLeft,O.clientY-me.top-pe.clientTop]}function ut(){return m.event.changedTouches[0].identifier}m.touch=function(pe,O,N){if(arguments.length<3&&(N=O,O=Q().changedTouches),O)for(var H,X=0,fe=O.length;X<fe;++X)if((H=O[X]).identifier===N)return ht(pe,H)},m.behavior.drag=function(){var pe=se(X,"drag","dragstart","dragend"),O=null,N=fe(Y,m.mouse,o,"mousemove","mouseup"),H=fe(ut,m.touch,I,"touchmove","touchend");function X(){this.on("mousedown.drag",N).on("touchstart.drag",H)}function fe(me,_e,ke,Oe,Xe){return function(){var nt,dt=this,Dt=m.event.target.correspondingElement||m.event.target,Ft=dt.parentNode,It=pe.of(dt,arguments),Pt=0,Et=me(),Zt=".drag"+(null==Et?"":"-"+Et),qt=m.select(ke(Dt)).on(Oe+Zt,kn).on(Xe+Zt,Vn),$t=Ht(Dt),yn=_e(Ft,Et);function kn(){var Gn,Tr,_r=_e(Ft,Et);_r&&(Pt|=(Gn=_r[0]-yn[0])|(Tr=_r[1]-yn[1]),yn=_r,It({type:"drag",x:_r[0]+nt[0],y:_r[1]+nt[1],dx:Gn,dy:Tr}))}function Vn(){_e(Ft,Et)&&(qt.on(Oe+Zt,null).on(Xe+Zt,null),$t(Pt),It({type:"dragend"}))}nt=O?[(nt=O.apply(dt,arguments)).x-yn[0],nt.y-yn[1]]:[0,0],It({type:"dragstart"})}}return X.origin=function(me){return arguments.length?(O=me,X):O},m.rebind(X,pe,"on")},m.touches=function(pe,O){return arguments.length<2&&(O=Q().touches),O?T(O).map(function(N){var H=ht(pe,N);return H.identifier=N.identifier,H}):[]};var Ot=1e-6,tn=Math.PI,un=2*tn,Ze=un-Ot,Qe=tn/2,qe=tn/180,it=180/tn;function Ie(pe){return pe>1?Qe:pe<-1?-Qe:Math.asin(pe)}function ze(pe){return((pe=Math.exp(pe))+1/pe)/2}var Ve=Math.SQRT2;m.interpolateZoom=function(pe,O){var N,H,X=pe[0],fe=pe[1],me=pe[2],Oe=O[2],Xe=O[0]-X,nt=O[1]-fe,dt=Xe*Xe+nt*nt;if(dt<1e-12)H=Math.log(Oe/me)/Ve,N=function(Zt){return[X+Zt*Xe,fe+Zt*nt,me*Math.exp(Ve*Zt*H)]};else{var Dt=Math.sqrt(dt),Ft=(Oe*Oe-me*me+4*dt)/(2*me*2*Dt),It=(Oe*Oe-me*me-4*dt)/(2*Oe*2*Dt),Pt=Math.log(Math.sqrt(Ft*Ft+1)-Ft),Et=Math.log(Math.sqrt(It*It+1)-It);H=(Et-Pt)/Ve,N=function(Zt){var qt,Vn,$t=Zt*H,yn=ze(Pt),kn=me/(2*Dt)*(yn*(qt=Ve*$t+Pt,((qt=Math.exp(2*qt))-1)/(qt+1))-(Vn=Pt,((Vn=Math.exp(Vn))-1/Vn)/2));return[X+kn*Xe,fe+kn*nt,me*yn/ze(Ve*$t+Pt)]}}return N.duration=1e3*H,N},m.behavior.zoom=function(){var pe,O,N,H,X,fe,me,_e,ke,Oe={x:0,y:0,k:1},Xe=[960,500],nt=gt,dt=250,Dt=0,Ft="mousedown.zoom",It="mousemove.zoom",Pt="mouseup.zoom",Et="touchstart.zoom",Zt=se(qt,"zoomstart","zoom","zoomend");function qt(cr){cr.on(Ft,Sr).on(at+".zoom",vi).on("dblclick.zoom",Oi).on(Et,hi)}function $t(cr){return[(cr[0]-Oe.x)/Oe.k,(cr[1]-Oe.y)/Oe.k]}function yn(cr){Oe.k=Math.max(nt[0],Math.min(nt[1],cr))}function kn(cr,Hr){var bi;Oe.x+=cr[0]-(Hr=[(bi=Hr)[0]*Oe.k+Oe.x,bi[1]*Oe.k+Oe.y])[0],Oe.y+=cr[1]-Hr[1]}function Vn(cr,Hr,bi,mi){cr.__chart__={x:Oe.x,y:Oe.y,k:Oe.k},yn(Math.pow(2,mi)),kn(O=Hr,bi),cr=m.select(cr),dt>0&&(cr=cr.transition().duration(dt)),cr.call(qt.event)}function Gn(){me&&me.domain(fe.range().map(function(cr){return(cr-Oe.x)/Oe.k}).map(fe.invert)),ke&&ke.domain(_e.range().map(function(cr){return(cr-Oe.y)/Oe.k}).map(_e.invert))}function Tr(cr){Dt++||cr({type:"zoomstart"})}function _r(cr){Gn(),cr({type:"zoom",scale:Oe.k,translate:[Oe.x,Oe.y]})}function Or(cr){--Dt||(cr({type:"zoomend"}),O=null)}function Sr(){var cr=this,Hr=Zt.of(cr,arguments),bi=0,mi=m.select(o(cr)).on(It,ca).on(Pt,Ai),wi=$t(m.mouse(cr)),Fi=Ht(cr);function ca(){bi=1,kn(m.mouse(cr),wi),_r(Hr)}function Ai(){mi.on(It,null).on(Pt,null),Fi(bi),Or(Hr)}bu.call(cr),Tr(Hr)}function hi(){var cr,Hr=this,bi=Zt.of(Hr,arguments),mi={},wi=0,Fi=".zoom-"+m.event.changedTouches[0].identifier,ca="touchmove"+Fi,Ai="touchend"+Fi,Zi=[],Xi=m.select(Hr),ya=Ht(Hr);function ta(){var Oo=m.touches(Hr);return cr=Oe.k,Oo.forEach(function(ko){ko.identifier in mi&&(mi[ko.identifier]=$t(ko))}),Oo}function ba(){var Oo=m.event.target;m.select(Oo).on(ca,Ra).on(Ai,ro),Zi.push(Oo);for(var ko=m.event.changedTouches,eo=0,Co=ko.length;eo<Co;++eo)mi[ko[eo].identifier]=null;var xo=ta(),Ko=Date.now();if(1===xo.length){if(Ko-X<500){var rs=xo[0];Vn(Hr,rs,mi[rs.identifier],Math.floor(Math.log(Oe.k)/Math.LN2)+1),$()}X=Ko}else if(xo.length>1){var ds=xo[1],Bl=(rs=xo[0])[0]-ds[0],$l=rs[1]-ds[1];wi=Bl*Bl+$l*$l}}function Ra(){var Oo,ko,eo,Co,xo=m.touches(Hr);bu.call(Hr);for(var Ko=0,rs=xo.length;Ko<rs;++Ko,Co=null)if(Co=mi[(eo=xo[Ko]).identifier]){if(ko)break;Oo=eo,ko=Co}if(Co){var ds=(ds=eo[0]-Oo[0])*ds+(ds=eo[1]-Oo[1])*ds,Bl=wi&&Math.sqrt(ds/wi);Oo=[(Oo[0]+eo[0])/2,(Oo[1]+eo[1])/2],ko=[(ko[0]+Co[0])/2,(ko[1]+Co[1])/2],yn(Bl*cr)}X=null,kn(Oo,ko),_r(bi)}function ro(){if(m.event.touches.length){for(var Oo=m.event.changedTouches,ko=0,eo=Oo.length;ko<eo;++ko)delete mi[Oo[ko].identifier];for(var Co in mi)return void ta()}m.selectAll(Zi).on(Fi,null),Xi.on(Ft,Sr).on(Et,hi),ya(),Or(bi)}ba(),Tr(bi),Xi.on(Ft,null).on(Et,ba)}function vi(){var cr=Zt.of(this,arguments);H?clearTimeout(H):(bu.call(this),pe=$t(O=N||m.mouse(this)),Tr(cr)),H=setTimeout(function(){H=null,Or(cr)},50),$(),yn(Math.pow(2,.002*Be())*Oe.k),kn(O,pe),_r(cr)}function Oi(){var cr=m.mouse(this),Hr=Math.log(Oe.k)/Math.LN2;Vn(this,cr,$t(cr),m.event.shiftKey?Math.ceil(Hr)-1:Math.floor(Hr)+1)}return at||(at="onwheel"in b?(Be=function(){return-m.event.deltaY*(m.event.deltaMode?120:1)},"wheel"):"onmousewheel"in b?(Be=function(){return m.event.wheelDelta},"mousewheel"):(Be=function(){return-m.event.detail},"MozMousePixelScroll")),qt.event=function(cr){cr.each(function(){var Hr=Zt.of(this,arguments),bi=Oe;Zl?m.select(this).transition().each("start.zoom",function(){Oe=this.__chart__||{x:0,y:0,k:1},Tr(Hr)}).tween("zoom:zoom",function(){var mi=Xe[0],Fi=O?O[0]:mi/2,ca=O?O[1]:Xe[1]/2,Ai=m.interpolateZoom([(Fi-Oe.x)/Oe.k,(ca-Oe.y)/Oe.k,mi/Oe.k],[(Fi-bi.x)/bi.k,(ca-bi.y)/bi.k,mi/bi.k]);return function(Zi){var Xi=Ai(Zi),ya=mi/Xi[2];this.__chart__=Oe={x:Fi-Xi[0]*ya,y:ca-Xi[1]*ya,k:ya},_r(Hr)}}).each("interrupt.zoom",function(){Or(Hr)}).each("end.zoom",function(){Or(Hr)}):(this.__chart__=Oe,Tr(Hr),_r(Hr),Or(Hr))})},qt.translate=function(cr){return arguments.length?(Oe={x:+cr[0],y:+cr[1],k:Oe.k},Gn(),qt):[Oe.x,Oe.y]},qt.scale=function(cr){return arguments.length?(Oe={x:Oe.x,y:Oe.y,k:null},yn(+cr),Gn(),qt):Oe.k},qt.scaleExtent=function(cr){return arguments.length?(nt=null==cr?gt:[+cr[0],+cr[1]],qt):nt},qt.center=function(cr){return arguments.length?(N=cr&&[+cr[0],+cr[1]],qt):N},qt.size=function(cr){return arguments.length?(Xe=cr&&[+cr[0],+cr[1]],qt):Xe},qt.duration=function(cr){return arguments.length?(dt=+cr,qt):dt},qt.x=function(cr){return arguments.length?(me=cr,fe=cr.copy(),Oe={x:0,y:0,k:1},qt):me},qt.y=function(cr){return arguments.length?(ke=cr,_e=cr.copy(),Oe={x:0,y:0,k:1},qt):ke},m.rebind(qt,Zt,"on")};var Be,at,gt=[0,1/0];function wt(){}function _t(pe,O,N){return this instanceof _t?(this.h=+pe,this.s=+O,void(this.l=+N)):arguments.length<2?pe instanceof _t?new _t(pe.h,pe.s,pe.l):On(""+pe,Dn,_t):new _t(pe,O,N)}m.color=wt,wt.prototype.toString=function(){return this.rgb()+""},m.hsl=_t;var Rt=_t.prototype=new wt;function yt(pe,O,N){var H,X;function fe(me){return Math.round(255*((_e=me)>360?_e-=360:_e<0&&(_e+=360),_e<60?H+(X-H)*_e/60:_e<180?X:_e<240?H+(X-H)*(240-_e)/60:H));var _e}return pe=isNaN(pe)?0:(pe%=360)<0?pe+360:pe,O=isNaN(O)||O<0?0:O>1?1:O,H=2*(N=N<0?0:N>1?1:N)-(X=N<=.5?N*(1+O):N+O-N*O),new Kt(fe(pe+120),fe(pe),fe(pe-120))}function Vt(pe,O,N){return this instanceof Vt?(this.h=+pe,this.c=+O,void(this.l=+N)):arguments.length<2?pe instanceof Vt?new Vt(pe.h,pe.c,pe.l):He(pe instanceof Tt?pe.l:(pe=Tn((pe=m.rgb(pe)).r,pe.g,pe.b)).l,pe.a,pe.b):new Vt(pe,O,N)}Rt.brighter=function(pe){return pe=Math.pow(.7,arguments.length?pe:1),new _t(this.h,this.s,this.l/pe)},Rt.darker=function(pe){return pe=Math.pow(.7,arguments.length?pe:1),new _t(this.h,this.s,pe*this.l)},Rt.rgb=function(){return yt(this.h,this.s,this.l)},m.hcl=Vt;var Nt=Vt.prototype=new wt;function rt(pe,O,N){return isNaN(pe)&&(pe=0),isNaN(O)&&(O=0),new Tt(N,Math.cos(pe*=qe)*O,Math.sin(pe)*O)}function Tt(pe,O,N){return this instanceof Tt?(this.l=+pe,this.a=+O,void(this.b=+N)):arguments.length<2?pe instanceof Tt?new Tt(pe.l,pe.a,pe.b):pe instanceof Vt?rt(pe.h,pe.c,pe.l):Tn((pe=Kt(pe)).r,pe.g,pe.b):new Tt(pe,O,N)}Nt.brighter=function(pe){return new Vt(this.h,this.c,Math.min(100,this.l+Ut*(arguments.length?pe:1)))},Nt.darker=function(pe){return new Vt(this.h,this.c,Math.max(0,this.l-Ut*(arguments.length?pe:1)))},Nt.rgb=function(){return rt(this.h,this.c,this.l).rgb()},m.lab=Tt;var Ut=18,Wt=Tt.prototype=new wt;function sn(pe,O,N){var H=(pe+16)/116,X=H+O/500,fe=H-N/200;return new Kt(Gt(3.2404542*(X=.95047*vt(X))-1.5371385*(H=1*vt(H))-.4985314*(fe=1.08883*vt(fe))),Gt(-.969266*X+1.8760108*H+.041556*fe),Gt(.0556434*X-.2040259*H+1.0572252*fe))}function He(pe,O,N){return pe>0?new Vt(Math.atan2(N,O)*it,Math.sqrt(O*O+N*N),pe):new Vt(NaN,NaN,pe)}function vt(pe){return pe>.206893034?pe*pe*pe:(pe-4/29)/7.787037}function Lt(pe){return pe>.008856?Math.pow(pe,1/3):7.787037*pe+4/29}function Gt(pe){return Math.round(255*(pe<=.00304?12.92*pe:1.055*Math.pow(pe,1/2.4)-.055))}function Kt(pe,O,N){return this instanceof Kt?(this.r=~~pe,this.g=~~O,void(this.b=~~N)):arguments.length<2?pe instanceof Kt?new Kt(pe.r,pe.g,pe.b):On(""+pe,Kt,yt):new Kt(pe,O,N)}function _n(pe){return new Kt(pe>>16,pe>>8&255,255&pe)}function en(pe){return _n(pe)+""}Wt.brighter=function(pe){return new Tt(Math.min(100,this.l+Ut*(arguments.length?pe:1)),this.a,this.b)},Wt.darker=function(pe){return new Tt(Math.max(0,this.l-Ut*(arguments.length?pe:1)),this.a,this.b)},Wt.rgb=function(){return sn(this.l,this.a,this.b)},m.rgb=Kt;var on=Kt.prototype=new wt;function wn(pe){return pe<16?"0"+Math.max(0,pe).toString(16):Math.min(255,pe).toString(16)}function On(pe,O,N){var H,X,fe,me=0,_e=0,ke=0;if(H=/([a-z]+)\((.*)\)/.exec(pe=pe.toLowerCase()))switch(X=H[2].split(","),H[1]){case"hsl":return N(parseFloat(X[0]),parseFloat(X[1])/100,parseFloat(X[2])/100);case"rgb":return O(En(X[0]),En(X[1]),En(X[2]))}return(fe=Un.get(pe))?O(fe.r,fe.g,fe.b):(null==pe||"#"!==pe.charAt(0)||isNaN(fe=parseInt(pe.slice(1),16))||(4===pe.length?(me=(3840&fe)>>4,me|=me>>4,_e=240&fe,_e|=_e>>4,ke=15&fe,ke|=ke<<4):7===pe.length&&(me=(16711680&fe)>>16,_e=(65280&fe)>>8,ke=255&fe)),O(me,_e,ke))}function Dn(pe,O,N){var H,X,fe=Math.min(pe/=255,O/=255,N/=255),me=Math.max(pe,O,N),_e=me-fe,ke=(me+fe)/2;return _e?(X=ke<.5?_e/(me+fe):_e/(2-me-fe),H=pe==me?(O-N)/_e+(O<N?6:0):O==me?(N-pe)/_e+2:(pe-O)/_e+4,H*=60):(H=NaN,X=ke>0&&ke<1?0:H),new _t(H,X,ke)}function Tn(pe,O,N){var H=Lt((.4124564*(pe=pn(pe))+.3575761*(O=pn(O))+.1804375*(N=pn(N)))/.95047),X=Lt((.2126729*pe+.7151522*O+.072175*N)/1);return Tt(116*X-16,500*(H-X),200*(X-Lt((.0193339*pe+.119192*O+.9503041*N)/1.08883)))}function pn(pe){return(pe/=255)<=.04045?pe/12.92:Math.pow((pe+.055)/1.055,2.4)}function En(pe){var O=parseFloat(pe);return"%"===pe.charAt(pe.length-1)?Math.round(2.55*O):O}on.brighter=function(pe){pe=Math.pow(.7,arguments.length?pe:1);var O=this.r,N=this.g,H=this.b,X=30;return O||N||H?(O&&O<X&&(O=X),N&&N<X&&(N=X),H&&H<X&&(H=X),new Kt(Math.min(255,O/pe),Math.min(255,N/pe),Math.min(255,H/pe))):new Kt(X,X,X)},on.darker=function(pe){return new Kt((pe=Math.pow(.7,arguments.length?pe:1))*this.r,pe*this.g,pe*this.b)},on.hsl=function(){return Dn(this.r,this.g,this.b)},on.toString=function(){return"#"+wn(this.r)+wn(this.g)+wn(this.b)};var Un=m.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});function In(pe){return"function"==typeof pe?pe:function(){return pe}}function sr(pe){return function(O,N,H){return 2===arguments.length&&"function"==typeof N&&(H=N,N=null),fr(O,N,pe,H)}}function fr(pe,O,N,H){var Xe,X={},fe=m.dispatch("beforesend","progress","load","error"),me={},_e=new XMLHttpRequest,ke=null;function Oe(){var Xe,dt,Dt,nt=_e.status;if(!nt&&((Dt=(dt=_e).responseType)&&"text"!==Dt?dt.response:dt.responseText)||nt>=200&&nt<300||304===nt){try{Xe=N.call(X,_e)}catch(dt){return void fe.error.call(X,dt)}fe.load.call(X,Xe)}else fe.error.call(X,_e)}return self.XDomainRequest&&!("withCredentials"in _e)&&/^(http(s)?:)?\/\//.test(pe)&&(_e=new XDomainRequest),"onload"in _e?_e.onload=_e.onerror=Oe:_e.onreadystatechange=function(){_e.readyState>3&&Oe()},_e.onprogress=function(Xe){var nt=m.event;m.event=Xe;try{fe.progress.call(X,_e)}finally{m.event=nt}},X.header=function(Xe,nt){return Xe=(Xe+"").toLowerCase(),arguments.length<2?me[Xe]:(null==nt?delete me[Xe]:me[Xe]=nt+"",X)},X.mimeType=function(Xe){return arguments.length?(O=null==Xe?null:Xe+"",X):O},X.responseType=function(Xe){return arguments.length?(ke=Xe,X):ke},X.response=function(Xe){return N=Xe,X},["get","post"].forEach(function(Xe){X[Xe]=function(){return X.send.apply(X,[Xe].concat(T(arguments)))}}),X.send=function(Xe,nt,dt){if(2===arguments.length&&"function"==typeof nt&&(dt=nt,nt=null),_e.open(Xe,pe,!0),null==O||"accept"in me||(me.accept=O+",*/*"),_e.setRequestHeader)for(var Dt in me)_e.setRequestHeader(Dt,me[Dt]);return null!=O&&_e.overrideMimeType&&_e.overrideMimeType(O),null!=ke&&(_e.responseType=ke),null!=dt&&X.on("error",dt).on("load",function(Ft){dt(null,Ft)}),fe.beforesend.call(X,_e),_e.send(null==nt?null:nt),X},X.abort=function(){return _e.abort(),X},m.rebind(X,fe,"on"),null==H?X:X.get(1===(Xe=H).length?function(nt,dt){Xe(null==nt?dt:null)}:Xe)}Un.forEach(function(pe,O){Un.set(pe,_n(O))}),m.functor=In,m.xhr=sr(I),m.dsv=function(pe,O){var N=new RegExp('["'+pe+"\n]"),H=pe.charCodeAt(0);function X(Oe,Xe,nt){arguments.length<3&&(nt=Xe,Xe=null);var dt=fr(Oe,O,null==Xe?fe:me(Xe),nt);return dt.row=function(Dt){return arguments.length?dt.response(null==(Xe=Dt)?fe:me(Dt)):Xe},dt}function fe(Oe){return X.parse(Oe.responseText)}function me(Oe){return function(Xe){return X.parse(Xe.responseText,Oe)}}function _e(Oe){return Oe.map(ke).join(pe)}function ke(Oe){return N.test(Oe)?'"'+Oe.replace(/\"/g,'""')+'"':Oe}return X.parse=function(Oe,Xe){var nt;return X.parseRows(Oe,function(dt,Dt){if(nt)return nt(dt,Dt-1);var Ft=function(It){for(var Pt={},Et=dt.length,Zt=0;Zt<Et;++Zt)Pt[dt[Zt]]=It[Zt];return Pt};nt=Xe?function(It,Pt){return Xe(Ft(It),Pt)}:Ft})},X.parseRows=function(Oe,Xe){var nt,dt,Dt={},Ft={},It=[],Pt=Oe.length,Et=0,Zt=0;function qt(){if(Et>=Pt)return Ft;if(dt)return dt=!1,Dt;var yn=Et;if(34===Oe.charCodeAt(yn)){for(var kn=yn;kn++<Pt;)if(34===Oe.charCodeAt(kn)){if(34!==Oe.charCodeAt(kn+1))break;++kn}return Et=kn+2,13===(Vn=Oe.charCodeAt(kn+1))?(dt=!0,10===Oe.charCodeAt(kn+2)&&++Et):10===Vn&&(dt=!0),Oe.slice(yn+1,kn).replace(/""/g,'"')}for(;Et<Pt;){var Vn,Gn=1;if(10===(Vn=Oe.charCodeAt(Et++)))dt=!0;else if(13===Vn)dt=!0,10===Oe.charCodeAt(Et)&&(++Et,++Gn);else if(Vn!==H)continue;return Oe.slice(yn,Et-Gn)}return Oe.slice(yn)}for(;(nt=qt())!==Ft;){for(var $t=[];nt!==Dt&&nt!==Ft;)$t.push(nt),nt=qt();Xe&&null==($t=Xe($t,Zt++))||It.push($t)}return It},X.format=function(Oe){if(Array.isArray(Oe[0]))return X.formatRows(Oe);var Xe=new L,nt=[];return Oe.forEach(function(dt){for(var Dt in dt)Xe.has(Dt)||nt.push(Xe.add(Dt))}),[nt.map(ke).join(pe)].concat(Oe.map(function(dt){return nt.map(function(Dt){return ke(dt[Dt])}).join(pe)})).join("\n")},X.formatRows=function(Oe){return Oe.map(_e).join("\n")},X},m.csv=m.dsv(",","text/csv"),m.tsv=m.dsv("\t","text/tab-separated-values");var rr,qr,ti,Ar,pr=this[V(this,"requestAnimationFrame")]||function(pe){setTimeout(pe,17)};function Fn(pe,O,N){var H=arguments.length;H<2&&(O=0),H<3&&(N=Date.now());var fe={c:pe,t:N+O,n:null};return qr?qr.n=fe:rr=fe,qr=fe,ti||(Ar=clearTimeout(Ar),ti=1,pr(Rn)),fe}function Rn(){var pe=hr(),O=ri()-pe;O>24?(isFinite(O)&&(clearTimeout(Ar),Ar=setTimeout(Rn,O)),ti=0):(ti=1,pr(Rn))}function hr(){for(var pe=Date.now(),O=rr;O;)pe>=O.t&&O.c(pe-O.t)&&(O.c=null),O=O.n;return pe}function ri(){for(var pe,O=rr,N=1/0;O;)O.c?(O.t<N&&(N=O.t),O=(pe=O).n):O=pe?pe.n=O.n:rr=O.n;return qr=pe,N}function ir(pe){return pe[0]}function Ur(pe){return pe[1]}function Mr(pe){for(var O,N,H,X=pe.length,fe=[0,1],me=2,_e=2;_e<X;_e++){for(;me>1&&((N=pe[fe[me-1]])[0]-(O=pe[fe[me-2]])[0])*((H=pe[_e])[1]-O[1])-(N[1]-O[1])*(H[0]-O[0])<=0;)--me;fe[me++]=_e}return fe.slice(0,me)}function wr(pe,O){return pe[0]-O[0]||pe[1]-O[1]}m.timer=function(){Fn.apply(this,arguments)},m.timer.flush=function(){hr(),ri()},m.round=function(pe,O){return O?Math.round(pe*(O=Math.pow(10,O)))/O:Math.round(pe)},m.geom={},m.geom.hull=function(pe){var O=ir,N=Ur;if(arguments.length)return H(pe);function H(X){if(X.length<3)return[];var fe,me=In(O),_e=In(N),ke=X.length,Oe=[],Xe=[];for(fe=0;fe<ke;fe++)Oe.push([+me.call(this,X[fe],fe),+_e.call(this,X[fe],fe),fe]);for(Oe.sort(wr),fe=0;fe<ke;fe++)Xe.push([Oe[fe][0],-Oe[fe][1]]);var nt=Mr(Oe),dt=Mr(Xe),Dt=dt[0]===nt[0],Ft=dt[dt.length-1]===nt[nt.length-1],It=[];for(fe=nt.length-1;fe>=0;--fe)It.push(X[Oe[nt[fe]][2]]);for(fe=+Dt;fe<dt.length-Ft;++fe)It.push(X[Oe[dt[fe]][2]]);return It}return H.x=function(X){return arguments.length?(O=X,H):O},H.y=function(X){return arguments.length?(N=X,H):N},H},m.geom.polygon=function(pe){return G(pe,ii),pe};var ii=m.geom.polygon.prototype=[];function gn(pe,O,N){return(N[0]-O[0])*(pe[1]-O[1])<(N[1]-O[1])*(pe[0]-O[0])}function jt(pe,O,N,H){var X=pe[0],fe=N[0],me=O[0]-X,_e=H[0]-fe,ke=pe[1],Oe=N[1],Xe=O[1]-ke,nt=H[1]-Oe,dt=(_e*(ke-Oe)-nt*(X-fe))/(nt*me-_e*Xe);return[X+dt*me,ke+dt*Xe]}function Jt(pe){var O=pe[0],N=pe[pe.length-1];return!(O[0]-N[0]||O[1]-N[1])}ii.area=function(){for(var pe,O=-1,N=this.length,H=this[N-1],X=0;++O<N;)X+=(pe=H)[1]*(H=this[O])[0]-pe[0]*H[1];return.5*X},ii.centroid=function(pe){var O,N,H=-1,X=this.length,fe=0,me=0,_e=this[X-1];for(arguments.length||(pe=-1/(6*this.area()));++H<X;)fe+=((O=_e)[0]+(_e=this[H])[0])*(N=O[0]*_e[1]-_e[0]*O[1]),me+=(O[1]+_e[1])*N;return[fe*pe,me*pe]},ii.clip=function(pe){for(var O,N,H,X,fe,me,_e=Jt(pe),ke=-1,Oe=this.length-Jt(this),Xe=this[Oe-1];++ke<Oe;){for(O=pe.slice(),pe.length=0,X=this[ke],fe=O[(H=O.length-_e)-1],N=-1;++N<H;)gn(me=O[N],Xe,X)?(gn(fe,Xe,X)||pe.push(jt(fe,me,Xe,X)),pe.push(me)):gn(fe,Xe,X)&&pe.push(jt(fe,me,Xe,X)),fe=me;_e&&pe.push(pe[0]),Xe=X}return pe};var An,Hn,yr,gr,Bn,Nn=[],Zn=[];function Wn(){$a(this),this.edge=this.site=this.circle=null}function jn(pe){var O=Nn.pop()||new Wn;return O.site=pe,O}function xr(pe){Zr(pe),yr.remove(pe),Nn.push(pe),$a(pe)}function Ir(pe){var O=pe.circle,N=O.x,H=O.cy,X={x:N,y:H},fe=pe.P,me=pe.N,_e=[pe];xr(pe);for(var ke=fe;ke.circle&&f(N-ke.circle.x)<Ot&&f(H-ke.circle.cy)<Ot;)fe=ke.P,_e.unshift(ke),xr(ke),ke=fe;_e.unshift(ke),Zr(ke);for(var Oe=me;Oe.circle&&f(N-Oe.circle.x)<Ot&&f(H-Oe.circle.cy)<Ot;)me=Oe.N,_e.push(Oe),xr(Oe),Oe=me;_e.push(Oe),Zr(Oe);var Xe,nt=_e.length;for(Xe=1;Xe<nt;++Xe)qi((Oe=_e[Xe]).edge,(ke=_e[Xe-1]).site,Oe.site,X);(Oe=_e[nt-1]).edge=zr((ke=_e[0]).site,Oe.site,null,X),Fr(ke),Fr(Oe)}function Vr(pe){for(var O,N,H,X,fe=pe.x,me=pe.y,_e=yr._;_e;)if((H=qn(_e,me)-fe)>Ot)_e=_e.L;else{if(!((X=fe-jr(_e,me))>Ot)){H>-Ot?(O=_e.P,N=_e):X>-Ot?(O=_e,N=_e.N):O=N=_e;break}if(!_e.R){O=_e;break}_e=_e.R}var ke=jn(pe);if(yr.insert(O,ke),O||N){if(O===N)return Zr(O),N=jn(O.site),yr.insert(ke,N),ke.edge=N.edge=zr(O.site,ke.site),Fr(O),void Fr(N);if(N){Zr(O),Zr(N);var Oe=O.site,Xe=Oe.x,nt=Oe.y,dt=pe.x-Xe,Dt=pe.y-nt,Ft=N.site,It=Ft.x-Xe,Pt=Ft.y-nt,Et=2*(dt*Pt-Dt*It),Zt=dt*dt+Dt*Dt,qt=It*It+Pt*Pt,$t={x:(Pt*Zt-Dt*qt)/Et+Xe,y:(dt*qt-It*Zt)/Et+nt};qi(N.edge,Oe,Ft,$t),ke.edge=zr(Oe,pe,null,$t),N.edge=zr(pe,Ft,null,$t),Fr(O),Fr(N)}else ke.edge=zr(O.site,ke.site)}}function qn(pe,O){var N=pe.site,H=N.x,X=N.y,fe=X-O;if(!fe)return H;var me=pe.P;if(!me)return-1/0;var _e=(N=me.site).x,ke=N.y,Oe=ke-O;if(!Oe)return _e;var Xe=_e-H,nt=1/fe-1/Oe,dt=Xe/Oe;return nt?(-dt+Math.sqrt(dt*dt-2*nt*(Xe*Xe/(-2*Oe)-ke+Oe/2+X-fe/2)))/nt+H:(H+_e)/2}function jr(pe,O){var N=pe.N;if(N)return qn(N,O);var H=pe.site;return H.y===O?H.x:1/0}function tr(pe){this.site=pe,this.edges=[]}function ur(pe,O){return O.angle-pe.angle}function Cr(){$a(this),this.x=this.y=this.arc=this.site=this.cy=null}function Fr(pe){var O=pe.P,N=pe.N;if(O&&N){var H=O.site,X=pe.site,fe=N.site;if(H!==fe){var me=X.x,_e=X.y,ke=H.x-me,Oe=H.y-_e,Xe=fe.x-me,nt=2*(ke*(Pt=fe.y-_e)-Oe*Xe);if(!(nt>=-1e-12)){var dt=ke*ke+Oe*Oe,Dt=Xe*Xe+Pt*Pt,Ft=(Pt*dt-Oe*Dt)/nt,It=(ke*Dt-Xe*dt)/nt,Pt=It+_e,Et=Zn.pop()||new Cr;Et.arc=pe,Et.site=X,Et.x=Ft+me,Et.y=Pt+Math.sqrt(Ft*Ft+It*It),Et.cy=Pt,pe.circle=Et;for(var Zt=null,qt=Bn._;qt;)if(Et.y<qt.y||Et.y===qt.y&&Et.x<=qt.x){if(!qt.L){Zt=qt.P;break}qt=qt.L}else{if(!qt.R){Zt=qt;break}qt=qt.R}Bn.insert(Zt,Et),Zt||(gr=Et)}}}}function Zr(pe){var O=pe.circle;O&&(O.P||(gr=O.N),Bn.remove(O),Zn.push(O),$a(O),pe.circle=null)}function Ii(pe,O){var N=pe.b;if(N)return!0;var H,X,fe=pe.a,me=O[0][0],_e=O[1][0],ke=O[0][1],Oe=O[1][1],Xe=pe.l,nt=pe.r,dt=Xe.x,Dt=Xe.y,Ft=nt.x,It=nt.y,Pt=(dt+Ft)/2;if(It===Dt){if(Pt<me||Pt>=_e)return;if(dt>Ft){if(fe){if(fe.y>=Oe)return}else fe={x:Pt,y:ke};N={x:Pt,y:Oe}}else{if(fe){if(fe.y<ke)return}else fe={x:Pt,y:Oe};N={x:Pt,y:ke}}}else if(X=(Dt+It)/2-(H=(dt-Ft)/(It-Dt))*Pt,H<-1||H>1)if(dt>Ft){if(fe){if(fe.y>=Oe)return}else fe={x:(ke-X)/H,y:ke};N={x:(Oe-X)/H,y:Oe}}else{if(fe){if(fe.y<ke)return}else fe={x:(Oe-X)/H,y:Oe};N={x:(ke-X)/H,y:ke}}else if(Dt<It){if(fe){if(fe.x>=_e)return}else fe={x:me,y:H*me+X};N={x:_e,y:H*_e+X}}else{if(fe){if(fe.x<me)return}else fe={x:_e,y:H*_e+X};N={x:me,y:H*me+X}}return pe.a=fe,pe.b=N,!0}function gi(pe,O){this.l=pe,this.r=O,this.a=this.b=null}function zr(pe,O,N,H){var X=new gi(pe,O);return An.push(X),N&&qi(X,pe,O,N),H&&qi(X,O,pe,H),Hn[pe.i].edges.push(new ki(X,pe,O)),Hn[O.i].edges.push(new ki(X,O,pe)),X}function Ci(pe,O,N){var H=new gi(pe,null);return H.a=O,H.b=N,An.push(H),H}function qi(pe,O,N,H){pe.a||pe.b?pe.l===N?pe.b=H:pe.a=H:(pe.a=H,pe.l=O,pe.r=N)}function ki(pe,O,N){var H=pe.a,X=pe.b;this.edge=pe,this.site=O,this.angle=N?Math.atan2(N.y-O.y,N.x-O.x):pe.l===O?Math.atan2(X.x-H.x,H.y-X.y):Math.atan2(H.x-X.x,X.y-H.y)}function Do(){this._=null}function $a(pe){pe.U=pe.C=pe.L=pe.R=pe.P=pe.N=null}function Ka(pe,O){var N=O,H=O.R,X=N.U;X?X.L===N?X.L=H:X.R=H:pe._=H,H.U=X,N.U=H,N.R=H.L,N.R&&(N.R.U=N),H.L=N}function ga(pe,O){var N=O,H=O.L,X=N.U;X?X.L===N?X.L=H:X.R=H:pe._=H,H.U=X,N.U=H,N.L=H.R,N.L&&(N.L.U=N),H.R=N}function Na(pe){for(;pe.L;)pe=pe.L;return pe}function zo(pe,O){var N,H,X,fe=pe.sort(Ho).pop();for(An=[],Hn=new Array(pe.length),yr=new Do,Bn=new Do;;)if(X=gr,fe&&(!X||fe.y<X.y||fe.y===X.y&&fe.x<X.x))fe.x===N&&fe.y===H||(Hn[fe.i]=new tr(fe),Vr(fe),N=fe.x,H=fe.y),fe=pe.pop();else{if(!X)break;Ir(X.arc)}O&&(function(_e){for(var ke,Oe,Xe,nt,dt,Dt=An,Ft=(Oe=_e[0][0],Xe=_e[0][1],nt=_e[1][0],dt=_e[1][1],function(Pt){var Et,Zt=Pt.a,qt=Pt.b,$t=Zt.x,yn=Zt.y,kn=0,Vn=1,Gn=qt.x-$t,Tr=qt.y-yn;if(Et=Oe-$t,Gn||!(Et>0)){if(Et/=Gn,Gn<0){if(Et<kn)return;Et<Vn&&(Vn=Et)}else if(Gn>0){if(Et>Vn)return;Et>kn&&(kn=Et)}if(Et=nt-$t,Gn||!(Et<0)){if(Et/=Gn,Gn<0){if(Et>Vn)return;Et>kn&&(kn=Et)}else if(Gn>0){if(Et<kn)return;Et<Vn&&(Vn=Et)}if(Et=Xe-yn,Tr||!(Et>0)){if(Et/=Tr,Tr<0){if(Et<kn)return;Et<Vn&&(Vn=Et)}else if(Tr>0){if(Et>Vn)return;Et>kn&&(kn=Et)}if(Et=dt-yn,Tr||!(Et<0)){if(Et/=Tr,Tr<0){if(Et>Vn)return;Et>kn&&(kn=Et)}else if(Tr>0){if(Et<kn)return;Et<Vn&&(Vn=Et)}return kn>0&&(Pt.a={x:$t+kn*Gn,y:yn+kn*Tr}),Vn<1&&(Pt.b={x:$t+Vn*Gn,y:yn+Vn*Tr}),Pt}}}}}),It=Dt.length;It--;)(!Ii(ke=Dt[It],_e)||!Ft(ke)||f(ke.a.x-ke.b.x)<Ot&&f(ke.a.y-ke.b.y)<Ot)&&(ke.a=ke.b=null,Dt.splice(It,1))}(O),function(_e){for(var ke,Oe,Xe,nt,dt,Dt,Ft,It,Pt,Et,Zt=_e[0][0],qt=_e[1][0],$t=_e[0][1],yn=_e[1][1],kn=Hn,Vn=kn.length;Vn--;)if((dt=kn[Vn])&&dt.prepare())for(It=(Ft=dt.edges).length,Dt=0;Dt<It;)Xe=(Et=Ft[Dt].end()).x,nt=Et.y,ke=(Pt=Ft[++Dt%It].start()).x,Oe=Pt.y,(f(Xe-ke)>Ot||f(nt-Oe)>Ot)&&(Ft.splice(Dt,0,new ki(Ci(dt.site,Et,f(Xe-Zt)<Ot&&yn-nt>Ot?{x:Zt,y:f(ke-Zt)<Ot?Oe:yn}:f(nt-yn)<Ot&&qt-Xe>Ot?{x:f(Oe-yn)<Ot?ke:qt,y:yn}:f(Xe-qt)<Ot&&nt-$t>Ot?{x:qt,y:f(ke-qt)<Ot?Oe:$t}:f(nt-$t)<Ot&&Xe-Zt>Ot?{x:f(Oe-$t)<Ot?ke:Zt,y:$t}:null),dt.site,null)),++It)}(O));var me={cells:Hn,edges:An};return yr=Bn=An=Hn=null,me}function Ho(pe,O){return O.y-pe.y||O.x-pe.x}tr.prototype.prepare=function(){for(var pe,O=this.edges,N=O.length;N--;)(pe=O[N].edge).b&&pe.a||O.splice(N,1);return O.sort(ur),O.length},ki.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},Do.prototype={insert:function(pe,O){var N,H,X;if(pe){if(O.P=pe,O.N=pe.N,pe.N&&(pe.N.P=O),pe.N=O,pe.R){for(pe=pe.R;pe.L;)pe=pe.L;pe.L=O}else pe.R=O;N=pe}else this._?(pe=Na(this._),O.P=null,O.N=pe,pe.P=pe.L=O,N=pe):(O.P=O.N=null,this._=O,N=null);for(O.L=O.R=null,O.U=N,O.C=!0,pe=O;N&&N.C;)N===(H=N.U).L?(X=H.R)&&X.C?(N.C=X.C=!1,H.C=!0,pe=H):(pe===N.R&&(Ka(this,N),N=(pe=N).U),N.C=!1,H.C=!0,ga(this,H)):(X=H.L)&&X.C?(N.C=X.C=!1,H.C=!0,pe=H):(pe===N.L&&(ga(this,N),N=(pe=N).U),N.C=!1,H.C=!0,Ka(this,H)),N=pe.U;this._.C=!1},remove:function(pe){pe.N&&(pe.N.P=pe.P),pe.P&&(pe.P.N=pe.N),pe.N=pe.P=null;var O,N,H,X=pe.U,fe=pe.L,me=pe.R;if(N=fe?me?Na(me):fe:me,X?X.L===pe?X.L=N:X.R=N:this._=N,fe&&me?(H=N.C,N.C=pe.C,N.L=fe,fe.U=N,N!==me?(X=N.U,N.U=pe.U,X.L=pe=N.R,N.R=me,me.U=N):(N.U=X,X=N,pe=N.R)):(H=pe.C,pe=N),pe&&(pe.U=X),!H)if(pe&&pe.C)pe.C=!1;else{do{if(pe===this._)break;if(pe===X.L){if((O=X.R).C&&(O.C=!1,X.C=!0,Ka(this,X),O=X.R),O.L&&O.L.C||O.R&&O.R.C){O.R&&O.R.C||(O.L.C=!1,O.C=!0,ga(this,O),O=X.R),O.C=X.C,X.C=O.R.C=!1,Ka(this,X),pe=this._;break}}else if((O=X.L).C&&(O.C=!1,X.C=!0,ga(this,X),O=X.L),O.L&&O.L.C||O.R&&O.R.C){O.L&&O.L.C||(O.R.C=!1,O.C=!0,Ka(this,O),O=X.L),O.C=X.C,X.C=O.L.C=!1,ga(this,X),pe=this._;break}O.C=!0,pe=X,X=X.U}while(!pe.C);pe&&(pe.C=!1)}}},m.geom.voronoi=function(pe){var O=ir,N=Ur,H=O,X=N,fe=Sl;if(pe)return me(pe);function me(ke){var Oe=new Array(ke.length),Xe=fe[0][0],nt=fe[0][1],dt=fe[1][0],Dt=fe[1][1];return zo(_e(ke),fe).cells.forEach(function(Ft,It){var Pt=Ft.edges,Et=Ft.site;(Oe[It]=Pt.length?Pt.map(function(Zt){var qt=Zt.start();return[qt.x,qt.y]}):Et.x>=Xe&&Et.x<=dt&&Et.y>=nt&&Et.y<=Dt?[[Xe,Dt],[dt,Dt],[dt,nt],[Xe,nt]]:[]).point=ke[It]}),Oe}function _e(ke){return ke.map(function(Oe,Xe){return{x:Math.round(H(Oe,Xe)/Ot)*Ot,y:Math.round(X(Oe,Xe)/Ot)*Ot,i:Xe}})}return me.links=function(ke){return zo(_e(ke)).edges.filter(function(Oe){return Oe.l&&Oe.r}).map(function(Oe){return{source:ke[Oe.l.i],target:ke[Oe.r.i]}})},me.triangles=function(ke){var Oe=[];return zo(_e(ke)).cells.forEach(function(Xe,nt){for(var dt,Dt,Ft,It,Pt=Xe.site,Et=Xe.edges.sort(ur),Zt=-1,qt=Et.length,$t=Et[qt-1].edge,yn=$t.l===Pt?$t.r:$t.l;++Zt<qt;)dt=yn,yn=($t=Et[Zt].edge).l===Pt?$t.r:$t.l,nt<dt.i&&nt<yn.i&&((Dt=Pt).x-(It=yn).x)*((Ft=dt).y-Dt.y)-(Dt.x-Ft.x)*(It.y-Dt.y)<0&&Oe.push([ke[nt],ke[dt.i],ke[yn.i]])}),Oe},me.x=function(ke){return arguments.length?(H=In(O=ke),me):O},me.y=function(ke){return arguments.length?(X=In(N=ke),me):N},me.clipExtent=function(ke){return arguments.length?(fe=null==ke?Sl:ke,me):fe===Sl?null:fe},me.size=function(ke){return arguments.length?me.clipExtent(ke&&[[0,0],ke]):fe===Sl?null:fe&&fe[1]},me};var Sl=[[-1e6,-1e6],[1e6,1e6]];function ls(pe){return pe.x}function yo(pe){return pe.y}function dl(pe,O,N,H,X,fe){if(!pe(O,N,H,X,fe)){var me=.5*(N+X),_e=.5*(H+fe),ke=O.nodes;ke[0]&&dl(pe,ke[0],N,H,me,_e),ke[1]&&dl(pe,ke[1],me,H,X,_e),ke[2]&&dl(pe,ke[2],N,_e,me,fe),ke[3]&&dl(pe,ke[3],me,_e,X,fe)}}function Ba(pe,O,N,H,X,fe,me){var _e,ke=1/0;return function Oe(Xe,nt,dt,Dt,Ft){if(!(nt>fe||dt>me||Dt<H||Ft<X)){if(It=Xe.point){var It,Pt=O-Xe.x,Et=N-Xe.y,Zt=Pt*Pt+Et*Et;if(Zt<ke){var qt=Math.sqrt(ke=Zt);H=O-qt,X=N-qt,fe=O+qt,me=N+qt,_e=It}}for(var $t=Xe.nodes,yn=.5*(nt+Dt),kn=.5*(dt+Ft),Vn=(N>=kn)<<1|O>=yn,Gn=Vn+4;Vn<Gn;++Vn)if(Xe=$t[3&Vn])switch(3&Vn){case 0:Oe(Xe,nt,dt,yn,kn);break;case 1:Oe(Xe,yn,dt,Dt,kn);break;case 2:Oe(Xe,nt,kn,yn,Ft);break;case 3:Oe(Xe,yn,kn,Dt,Ft)}}}(pe,H,X,fe,me),_e}function Ws(pe,O){pe=m.rgb(pe),O=m.rgb(O);var N=pe.r,H=pe.g,X=pe.b,fe=O.r-N,me=O.g-H,_e=O.b-X;return function(ke){return"#"+wn(Math.round(N+fe*ke))+wn(Math.round(H+me*ke))+wn(Math.round(X+_e*ke))}}function Os(pe,O){var N,H={},X={};for(N in pe)N in O?H[N]=pa(pe[N],O[N]):X[N]=pe[N];for(N in O)N in pe||(X[N]=O[N]);return function(fe){for(N in H)X[N]=H[N](fe);return X}}function sa(pe,O){return pe=+pe,O=+O,function(N){return pe*(1-N)+O*N}}function vs(pe,O){var N,H,X,fe=Rs.lastIndex=es.lastIndex=0,me=-1,_e=[],ke=[];for(pe+="",O+="";(N=Rs.exec(pe))&&(H=es.exec(O));)(X=H.index)>fe&&(X=O.slice(fe,X),_e[me]?_e[me]+=X:_e[++me]=X),(N=N[0])===(H=H[0])?_e[me]?_e[me]+=H:_e[++me]=H:(_e[++me]=null,ke.push({i:me,x:sa(N,H)})),fe=es.lastIndex;return fe<O.length&&(X=O.slice(fe),_e[me]?_e[me]+=X:_e[++me]=X),_e.length<2?ke[0]?(O=ke[0].x,function(Oe){return O(Oe)+""}):function(){return O}:(O=ke.length,function(Oe){for(var Xe,nt=0;nt<O;++nt)_e[(Xe=ke[nt]).i]=Xe.x(Oe);return _e.join("")})}m.geom.delaunay=function(pe){return m.geom.voronoi().triangles(pe)},m.geom.quadtree=function(pe,O,N,H,X){var fe,me=ir,_e=Ur;if(fe=arguments.length)return me=ls,_e=yo,3===fe&&(X=N,H=O,N=O=0),ke(pe);function ke(Oe){var Xe,nt,dt,Dt,Ft,It,Pt,Et,Zt,qt=In(me),$t=In(_e);if(null!=O)It=O,Pt=N,Et=H,Zt=X;else if(Et=Zt=-(It=Pt=1/0),nt=[],dt=[],Ft=Oe.length,fe)for(Dt=0;Dt<Ft;++Dt)(Xe=Oe[Dt]).x<It&&(It=Xe.x),Xe.y<Pt&&(Pt=Xe.y),Xe.x>Et&&(Et=Xe.x),Xe.y>Zt&&(Zt=Xe.y),nt.push(Xe.x),dt.push(Xe.y);else for(Dt=0;Dt<Ft;++Dt){var yn=+qt(Xe=Oe[Dt],Dt),kn=+$t(Xe,Dt);yn<It&&(It=yn),kn<Pt&&(Pt=kn),yn>Et&&(Et=yn),kn>Zt&&(Zt=kn),nt.push(yn),dt.push(kn)}var Vn=Et-It,Gn=Zt-Pt;function Tr(Sr,hi,vi,Oi,cr,Hr,bi,mi){if(!isNaN(vi)&&!isNaN(Oi))if(Sr.leaf){var wi=Sr.x,Fi=Sr.y;if(null!=wi)if(f(wi-vi)+f(Fi-Oi)<.01)_r(Sr,hi,vi,Oi,cr,Hr,bi,mi);else{var ca=Sr.point;Sr.x=Sr.y=Sr.point=null,_r(Sr,ca,wi,Fi,cr,Hr,bi,mi),_r(Sr,hi,vi,Oi,cr,Hr,bi,mi)}else Sr.x=vi,Sr.y=Oi,Sr.point=hi}else _r(Sr,hi,vi,Oi,cr,Hr,bi,mi)}function _r(Sr,hi,vi,Oi,cr,Hr,bi,mi){var wi=.5*(cr+bi),Fi=.5*(Hr+mi),ca=vi>=wi,Ai=Oi>=Fi,Zi=Ai<<1|ca;Sr.leaf=!1,ca?cr=wi:bi=wi,Ai?Hr=Fi:mi=Fi,Tr(Sr=Sr.nodes[Zi]||(Sr.nodes[Zi]={leaf:!0,nodes:[],point:null,x:null,y:null}),hi,vi,Oi,cr,Hr,bi,mi)}Vn>Gn?Zt=Pt+Vn:Et=It+Gn;var Or={leaf:!0,nodes:[],point:null,x:null,y:null,add:function(Sr){Tr(Or,Sr,+qt(Sr,++Dt),+$t(Sr,Dt),It,Pt,Et,Zt)},visit:function(Sr){dl(Sr,Or,It,Pt,Et,Zt)},find:function(Sr){return Ba(Or,Sr[0],Sr[1],It,Pt,Et,Zt)}};if(Dt=-1,null==O){for(;++Dt<Ft;)Tr(Or,Oe[Dt],nt[Dt],dt[Dt],It,Pt,Et,Zt);--Dt}else Oe.forEach(Or.add);return nt=dt=Oe=Xe=null,Or}return ke.x=function(Oe){return arguments.length?(me=Oe,ke):me},ke.y=function(Oe){return arguments.length?(_e=Oe,ke):_e},ke.extent=function(Oe){return arguments.length?(null==Oe?O=N=H=X=null:(O=+Oe[0][0],N=+Oe[0][1],H=+Oe[1][0],X=+Oe[1][1]),ke):null==O?null:[[O,N],[H,X]]},ke.size=function(Oe){return arguments.length?(null==Oe?O=N=H=X=null:(O=N=0,H=+Oe[0],X=+Oe[1]),ke):null==O?null:[H-O,X-N]},ke},m.interpolateRgb=Ws,m.interpolateObject=Os,m.interpolateNumber=sa,m.interpolateString=vs;var Rs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,es=new RegExp(Rs.source,"g");function pa(pe,O){for(var N,H=m.interpolators.length;--H>=0&&!(N=m.interpolators[H](pe,O)););return N}function oo(pe,O){var N,H=[],X=[],fe=pe.length,me=O.length,_e=Math.min(pe.length,O.length);for(N=0;N<_e;++N)H.push(pa(pe[N],O[N]));for(;N<fe;++N)X[N]=pe[N];for(;N<me;++N)X[N]=O[N];return function(ke){for(N=0;N<_e;++N)X[N]=H[N](ke);return X}}m.interpolate=pa,m.interpolators=[function(pe,O){var N=typeof O;return("string"===N?Un.has(O.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(O)?Ws:vs:O instanceof wt?Ws:Array.isArray(O)?oo:"object"===N&&isNaN(O)?Os:sa)(pe,O)}],m.interpolateArray=oo;var Zo=function(){return I},zl=m.map({linear:Zo,poly:function(pe){return function(O){return Math.pow(O,pe)}},quad:function(){return Go},cubic:function(){return vu},sin:function(){return iu},exp:function(){return Fs},circle:function(){return Pa},elastic:function(pe,O){var N;return arguments.length<2&&(O=.45),arguments.length?N=O/un*Math.asin(1/pe):(pe=1,N=O/4),function(H){return 1+pe*Math.pow(2,-10*H)*Math.sin((H-N)*un/O)}},back:function(pe){return pe||(pe=1.70158),function(O){return O*O*((pe+1)*O-pe)}},bounce:function(){return ml}}),ru=m.map({in:I,out:pl,"in-out":El,"out-in":function(pe){return El(pl(pe))}});function wa(pe){return function(O){return O<=0?0:O>=1?1:pe(O)}}function pl(pe){return function(O){return 1-pe(1-O)}}function El(pe){return function(O){return.5*(O<.5?pe(2*O):2-pe(2-2*O))}}function Go(pe){return pe*pe}function vu(pe){return pe*pe*pe}function Yl(pe){if(pe<=0)return 0;if(pe>=1)return 1;var O=pe*pe,N=O*pe;return 4*(pe<.5?N:3*(pe-O)+N-.75)}function iu(pe){return 1-Math.cos(pe*Qe)}function Fs(pe){return Math.pow(2,10*(pe-1))}function Pa(pe){return 1-Math.sqrt(1-pe*pe)}function ml(pe){return pe<1/2.75?7.5625*pe*pe:pe<2/2.75?7.5625*(pe-=1.5/2.75)*pe+.75:pe<2.5/2.75?7.5625*(pe-=2.25/2.75)*pe+.9375:7.5625*(pe-=2.625/2.75)*pe+.984375}function el(pe,O){return O-=pe,function(N){return Math.round(pe+O*N)}}function ai(pe){var O,N,H,X=[pe.a,pe.b],fe=[pe.c,pe.d],me=Ja(X),_e=No(X,fe),ke=Ja(((O=fe)[0]+=(H=-_e)*(N=X)[0],O[1]+=H*N[1],O))||0;X[0]*fe[1]<fe[0]*X[1]&&(X[0]*=-1,X[1]*=-1,me*=-1,_e*=-1),this.rotate=(me?Math.atan2(X[1],X[0]):Math.atan2(-fe[0],fe[1]))*it,this.translate=[pe.e,pe.f],this.scale=[me,ke],this.skew=ke?Math.atan2(_e,ke)*it:0}function No(pe,O){return pe[0]*O[0]+pe[1]*O[1]}function Ja(pe){var O=Math.sqrt(No(pe,pe));return O&&(pe[0]/=O,pe[1]/=O),O}m.ease=function(pe){var O=pe.indexOf("-"),N=O>=0?pe.slice(0,O):pe,H=O>=0?pe.slice(O+1):"in";return N=zl.get(N)||Zo,wa((H=ru.get(H)||I)(N.apply(null,x.call(arguments,1))))},m.interpolateHcl=function(pe,O){pe=m.hcl(pe),O=m.hcl(O);var N=pe.h,H=pe.c,X=pe.l,fe=O.h-N,me=O.c-H,_e=O.l-X;return isNaN(me)&&(me=0,H=isNaN(H)?O.c:H),isNaN(fe)?(fe=0,N=isNaN(N)?O.h:N):fe>180?fe-=360:fe<-180&&(fe+=360),function(ke){return rt(N+fe*ke,H+me*ke,X+_e*ke)+""}},m.interpolateHsl=function(pe,O){pe=m.hsl(pe),O=m.hsl(O);var N=pe.h,H=pe.s,X=pe.l,fe=O.h-N,me=O.s-H,_e=O.l-X;return isNaN(me)&&(me=0,H=isNaN(H)?O.s:H),isNaN(fe)?(fe=0,N=isNaN(N)?O.h:N):fe>180?fe-=360:fe<-180&&(fe+=360),function(ke){return yt(N+fe*ke,H+me*ke,X+_e*ke)+""}},m.interpolateLab=function(pe,O){pe=m.lab(pe),O=m.lab(O);var N=pe.l,H=pe.a,X=pe.b,fe=O.l-N,me=O.a-H,_e=O.b-X;return function(ke){return sn(N+fe*ke,H+me*ke,X+_e*ke)+""}},m.interpolateRound=el,m.transform=function(pe){var O=b.createElementNS(m.ns.prefix.svg,"g");return(m.transform=function(N){if(null!=N){O.setAttribute("transform",N);var H=O.transform.baseVal.consolidate()}return new ai(H?H.matrix:zs)})(pe)},ai.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var zs={a:1,b:0,c:0,d:1,e:0,f:0};function Bo(pe){return pe.length?pe.pop()+",":""}function jo(pe,O){var X,fe,me,N=[],H=[];return pe=m.transform(pe),O=m.transform(O),function(X,fe,me,_e){if(X[0]!==fe[0]||X[1]!==fe[1]){var ke=me.push("translate(",null,",",null,")");_e.push({i:ke-4,x:sa(X[0],fe[0])},{i:ke-2,x:sa(X[1],fe[1])})}else(fe[0]||fe[1])&&me.push("translate("+fe+")")}(pe.translate,O.translate,N,H),me=N,(X=pe.rotate)!==(fe=O.rotate)?(X-fe>180?fe+=360:fe-X>180&&(X+=360),H.push({i:me.push(Bo(me)+"rotate(",null,")")-2,x:sa(X,fe)})):fe&&me.push(Bo(me)+"rotate("+fe+")"),function(X,fe,me,_e){X!==fe?_e.push({i:me.push(Bo(me)+"skewX(",null,")")-2,x:sa(X,fe)}):fe&&me.push(Bo(me)+"skewX("+fe+")")}(pe.skew,O.skew,N,H),function(X,fe,me,_e){if(X[0]!==fe[0]||X[1]!==fe[1]){var ke=me.push(Bo(me)+"scale(",null,",",null,")");_e.push({i:ke-4,x:sa(X[0],fe[0])},{i:ke-2,x:sa(X[1],fe[1])})}else 1===fe[0]&&1===fe[1]||me.push(Bo(me)+"scale("+fe+")")}(pe.scale,O.scale,N,H),pe=O=null,function(X){for(var fe,me=-1,_e=H.length;++me<_e;)N[(fe=H[me]).i]=fe.x(X);return N.join("")}}function Ml(pe,O){return O=(O-=pe=+pe)||1/O,function(N){return(N-pe)/O}}function ks(pe,O){return O=(O-=pe=+pe)||1/O,function(N){return Math.max(0,Math.min(1,(N-pe)/O))}}function Da(pe){for(var O=pe.source,N=pe.target,H=function(me,_e){if(me===_e)return me;for(var ke=Ye(me),Oe=Ye(_e),Xe=ke.pop(),nt=Oe.pop(),dt=null;Xe===nt;)dt=Xe,Xe=ke.pop(),nt=Oe.pop();return dt}(O,N),X=[O];O!==H;)X.push(O=O.parent);for(var fe=X.length;N!==H;)X.splice(fe,0,N),N=N.parent;return X}function Ye(pe){for(var O=[],N=pe.parent;null!=N;)O.push(pe),pe=N,N=N.parent;return O.push(pe),O}function Je(pe){pe.fixed|=2}function st(pe){pe.fixed&=-7}function mt(pe){pe.fixed|=4,pe.px=pe.x,pe.py=pe.y}function Mt(pe){pe.fixed&=-5}m.interpolateTransform=jo,m.layout={},m.layout.bundle=function(){return function(pe){for(var O=[],N=-1,H=pe.length;++N<H;)O.push(Da(pe[N]));return O}},m.layout.chord=function(){var pe,O,N,H,X,fe,me,_e={},ke=0;function Oe(){var nt,dt,Dt,Ft,It,Pt={},Et=[],Zt=m.range(H),qt=[];for(pe=[],O=[],nt=0,Ft=-1;++Ft<H;){for(dt=0,It=-1;++It<H;)dt+=N[Ft][It];Et.push(dt),qt.push(m.range(H)),nt+=dt}for(X&&Zt.sort(function(Or,Sr){return X(Et[Or],Et[Sr])}),fe&&qt.forEach(function(Or,Sr){Or.sort(function(hi,vi){return fe(N[Sr][hi],N[Sr][vi])})}),nt=(un-ke*H)/nt,dt=0,Ft=-1;++Ft<H;){for(Dt=dt,It=-1;++It<H;){var $t=Zt[Ft],yn=qt[$t][It],kn=N[$t][yn],Vn=dt,Gn=dt+=kn*nt;Pt[$t+"-"+yn]={index:$t,subindex:yn,startAngle:Vn,endAngle:Gn,value:kn}}O[$t]={index:$t,startAngle:Dt,endAngle:dt,value:Et[$t]},dt+=ke}for(Ft=-1;++Ft<H;)for(It=Ft-1;++It<H;){var Tr=Pt[Ft+"-"+It],_r=Pt[It+"-"+Ft];(Tr.value||_r.value)&&pe.push(Tr.value<_r.value?{source:_r,target:Tr}:{source:Tr,target:_r})}me&&Xe()}function Xe(){pe.sort(function(nt,dt){return me((nt.source.value+nt.target.value)/2,(dt.source.value+dt.target.value)/2)})}return _e.matrix=function(nt){return arguments.length?(H=(N=nt)&&N.length,pe=O=null,_e):N},_e.padding=function(nt){return arguments.length?(ke=nt,pe=O=null,_e):ke},_e.sortGroups=function(nt){return arguments.length?(X=nt,pe=O=null,_e):X},_e.sortSubgroups=function(nt){return arguments.length?(fe=nt,pe=null,_e):fe},_e.sortChords=function(nt){return arguments.length?(me=nt,pe&&Xe(),_e):me},_e.chords=function(){return pe||Oe(),pe},_e.groups=function(){return O||Oe(),O},_e},m.layout.force=function(){var pe,O,N,H,X,fe,me={},_e=m.dispatch("start","tick","end"),ke=[1,1],Oe=.9,Xe=pt,nt=St,dt=-30,Dt=an,Ft=.1,It=.64,Pt=[],Et=[];function Zt($t){return function(yn,kn,Vn,Gn){if(yn.point!==$t){var Tr=yn.cx-$t.x,_r=yn.cy-$t.y,Or=Gn-kn,Sr=Tr*Tr+_r*_r;if(Or*Or/It<Sr){if(Sr<Dt){var hi=yn.charge/Sr;$t.px-=Tr*hi,$t.py-=_r*hi}return!0}yn.point&&Sr&&Sr<Dt&&($t.px-=Tr*(hi=yn.pointCharge/Sr),$t.py-=_r*hi)}return!yn.charge}}function qt($t){$t.px=m.event.x,$t.py=m.event.y,me.resume()}return me.tick=function(){if((N*=.99)<.005)return pe=null,_e.end({type:"end",alpha:N=0}),!0;var $t,yn,kn,Vn,Gn,Tr,_r,Or,Sr,hi=Pt.length,vi=Et.length;for(yn=0;yn<vi;++yn)Vn=(kn=Et[yn]).source,(Tr=(Or=(Gn=kn.target).x-Vn.x)*Or+(Sr=Gn.y-Vn.y)*Sr)&&(Or*=Tr=N*X[yn]*((Tr=Math.sqrt(Tr))-H[yn])/Tr,Sr*=Tr,Gn.x-=Or*(_r=Vn.weight+Gn.weight?Vn.weight/(Vn.weight+Gn.weight):.5),Gn.y-=Sr*_r,Vn.x+=Or*(_r=1-_r),Vn.y+=Sr*_r);if((_r=N*Ft)&&(Or=ke[0]/2,Sr=ke[1]/2,yn=-1,_r))for(;++yn<hi;)(kn=Pt[yn]).x+=(Or-kn.x)*_r,kn.y+=(Sr-kn.y)*_r;if(dt)for(function Oi(cr,Hr,bi){var mi=0,wi=0;if(cr.charge=0,!cr.leaf)for(var Fi,ca=cr.nodes,Ai=ca.length,Zi=-1;++Zi<Ai;)null!=(Fi=ca[Zi])&&(Oi(Fi,Hr,bi),cr.charge+=Fi.charge,mi+=Fi.charge*Fi.cx,wi+=Fi.charge*Fi.cy);if(cr.point){cr.leaf||(cr.point.x+=Math.random()-.5,cr.point.y+=Math.random()-.5);var Xi=Hr*bi[cr.point.index];cr.charge+=cr.pointCharge=Xi,mi+=Xi*cr.point.x,wi+=Xi*cr.point.y}cr.cx=mi/cr.charge,cr.cy=wi/cr.charge}($t=m.geom.quadtree(Pt),N,fe),yn=-1;++yn<hi;)(kn=Pt[yn]).fixed||$t.visit(Zt(kn));for(yn=-1;++yn<hi;)(kn=Pt[yn]).fixed?(kn.x=kn.px,kn.y=kn.py):(kn.x-=(kn.px-(kn.px=kn.x))*Oe,kn.y-=(kn.py-(kn.py=kn.y))*Oe);_e.tick({type:"tick",alpha:N})},me.nodes=function($t){return arguments.length?(Pt=$t,me):Pt},me.links=function($t){return arguments.length?(Et=$t,me):Et},me.size=function($t){return arguments.length?(ke=$t,me):ke},me.linkDistance=function($t){return arguments.length?(Xe="function"==typeof $t?$t:+$t,me):Xe},me.distance=me.linkDistance,me.linkStrength=function($t){return arguments.length?(nt="function"==typeof $t?$t:+$t,me):nt},me.friction=function($t){return arguments.length?(Oe=+$t,me):Oe},me.charge=function($t){return arguments.length?(dt="function"==typeof $t?$t:+$t,me):dt},me.chargeDistance=function($t){return arguments.length?(Dt=$t*$t,me):Math.sqrt(Dt)},me.gravity=function($t){return arguments.length?(Ft=+$t,me):Ft},me.theta=function($t){return arguments.length?(It=$t*$t,me):Math.sqrt(It)},me.alpha=function($t){return arguments.length?($t=+$t,N?$t>0?N=$t:(pe.c=null,pe.t=NaN,pe=null,_e.end({type:"end",alpha:N=0})):$t>0&&(_e.start({type:"start",alpha:N=$t}),pe=Fn(me.tick)),me):N},me.start=function(){var $t,yn,kn,Vn=Pt.length,Gn=Et.length,Tr=ke[0],_r=ke[1];for($t=0;$t<Vn;++$t)(kn=Pt[$t]).index=$t,kn.weight=0;for($t=0;$t<Gn;++$t)"number"==typeof(kn=Et[$t]).source&&(kn.source=Pt[kn.source]),"number"==typeof kn.target&&(kn.target=Pt[kn.target]),++kn.source.weight,++kn.target.weight;for($t=0;$t<Vn;++$t)kn=Pt[$t],isNaN(kn.x)&&(kn.x=Or("x",Tr)),isNaN(kn.y)&&(kn.y=Or("y",_r)),isNaN(kn.px)&&(kn.px=kn.x),isNaN(kn.py)&&(kn.py=kn.y);if(H=[],"function"==typeof Xe)for($t=0;$t<Gn;++$t)H[$t]=+Xe.call(this,Et[$t],$t);else for($t=0;$t<Gn;++$t)H[$t]=Xe;if(X=[],"function"==typeof nt)for($t=0;$t<Gn;++$t)X[$t]=+nt.call(this,Et[$t],$t);else for($t=0;$t<Gn;++$t)X[$t]=nt;if(fe=[],"function"==typeof dt)for($t=0;$t<Vn;++$t)fe[$t]=+dt.call(this,Pt[$t],$t);else for($t=0;$t<Vn;++$t)fe[$t]=dt;function Or(Sr,hi){if(!yn){for(yn=new Array(Vn),Hr=0;Hr<Vn;++Hr)yn[Hr]=[];for(Hr=0;Hr<Gn;++Hr){var vi=Et[Hr];yn[vi.source.index].push(vi.target),yn[vi.target.index].push(vi.source)}}for(var Oi,cr=yn[$t],Hr=-1,bi=cr.length;++Hr<bi;)if(!isNaN(Oi=cr[Hr][Sr]))return Oi;return Math.random()*hi}return me.resume()},me.resume=function(){return me.alpha(.1)},me.stop=function(){return me.alpha(0)},me.drag=function(){if(O||(O=m.behavior.drag().origin(I).on("dragstart.force",Je).on("drag.force",qt).on("dragend.force",st)),!arguments.length)return O;this.on("mouseover.force",mt).on("mouseout.force",Mt).call(O)},m.rebind(me,_e,"on")};var pt=20,St=1,an=1/0;function fn(pe,O){return m.rebind(pe,O,"sort","children","value"),pe.nodes=pe,pe.links=$n,pe}function ln(pe,O){for(var N=[pe];null!=(pe=N.pop());)if(O(pe),(X=pe.children)&&(H=X.length))for(var H,X;--H>=0;)N.push(X[H])}function mn(pe,O){for(var N=[pe],H=[];null!=(pe=N.pop());)if(H.push(pe),(fe=pe.children)&&(X=fe.length))for(var X,fe,me=-1;++me<X;)N.push(fe[me]);for(;null!=(pe=H.pop());)O(pe)}function Mn(pe){return pe.children}function Sn(pe){return pe.value}function zn(pe,O){return O.value-pe.value}function $n(pe){return m.merge(pe.map(function(O){return(O.children||[]).map(function(N){return{source:O,target:N}})}))}m.layout.hierarchy=function(){var pe=zn,O=Mn,N=Sn;function H(X){var fe,me=[X],_e=[];for(X.depth=0;null!=(fe=me.pop());)if(_e.push(fe),(Oe=O.call(H,fe,fe.depth))&&(ke=Oe.length)){for(var ke,Oe,Xe;--ke>=0;)me.push(Xe=Oe[ke]),Xe.parent=fe,Xe.depth=fe.depth+1;N&&(fe.value=0),fe.children=Oe}else N&&(fe.value=+N.call(H,fe,fe.depth)||0),delete fe.children;return mn(X,function(nt){var dt,Dt;pe&&(dt=nt.children)&&dt.sort(pe),N&&(Dt=nt.parent)&&(Dt.value+=nt.value)}),_e}return H.sort=function(X){return arguments.length?(pe=X,H):pe},H.children=function(X){return arguments.length?(O=X,H):O},H.value=function(X){return arguments.length?(N=X,H):N},H.revalue=function(X){return N&&(ln(X,function(fe){fe.children&&(fe.value=0)}),mn(X,function(fe){var me;fe.children||(fe.value=+N.call(H,fe,fe.depth)||0),(me=fe.parent)&&(me.value+=fe.value)})),X},H},m.layout.partition=function(){var pe=m.layout.hierarchy(),O=[1,1];function N(H,X){var fe=pe.call(this,H,X);return function me(_e,ke,Oe,Xe){var nt=_e.children;if(_e.x=ke,_e.y=_e.depth*Xe,_e.dx=Oe,_e.dy=Xe,nt&&(dt=nt.length)){var dt,Dt,Ft,It=-1;for(Oe=_e.value?Oe/_e.value:0;++It<dt;)me(Dt=nt[It],ke,Ft=Dt.value*Oe,Xe),ke+=Ft}}(fe[0],0,O[0],O[1]/function me(_e){var ke=_e.children,Oe=0;if(ke&&(Xe=ke.length))for(var Xe,nt=-1;++nt<Xe;)Oe=Math.max(Oe,me(ke[nt]));return 1+Oe}(fe[0])),fe}return N.size=function(H){return arguments.length?(O=H,N):O},fn(N,pe)},m.layout.pie=function(){var pe=Number,O=or,N=0,H=un,X=0;function fe(me){var _e,ke=me.length,Oe=me.map(function(Zt,qt){return+pe.call(fe,Zt,qt)}),Xe=+("function"==typeof N?N.apply(this,arguments):N),nt=("function"==typeof H?H.apply(this,arguments):H)-Xe,dt=Math.min(Math.abs(nt)/ke,+("function"==typeof X?X.apply(this,arguments):X)),Dt=dt*(nt<0?-1:1),Ft=m.sum(Oe),It=Ft?(nt-ke*Dt)/Ft:0,Pt=m.range(ke),Et=[];return null!=O&&Pt.sort(O===or?function(Zt,qt){return Oe[qt]-Oe[Zt]}:function(Zt,qt){return O(me[Zt],me[qt])}),Pt.forEach(function(Zt){Et[Zt]={data:me[Zt],value:_e=Oe[Zt],startAngle:Xe,endAngle:Xe+=_e*It+Dt,padAngle:dt}}),Et}return fe.value=function(me){return arguments.length?(pe=me,fe):pe},fe.sort=function(me){return arguments.length?(O=me,fe):O},fe.startAngle=function(me){return arguments.length?(N=me,fe):N},fe.endAngle=function(me){return arguments.length?(H=me,fe):H},fe.padAngle=function(me){return arguments.length?(X=me,fe):X},fe};var or={};function Lr(pe){return pe.x}function Kr(pe){return pe.y}function oi(pe,O,N){pe.y0=O,pe.y=N}m.layout.stack=function(){var pe=I,O=ji,N=Ki,H=oi,X=Lr,fe=Kr;function me(_e,ke){if(!(dt=_e.length))return _e;var Oe=_e.map(function(Zt,qt){return pe.call(me,Zt,qt)}),Xe=Oe.map(function(Zt){return Zt.map(function(qt,$t){return[X.call(me,qt,$t),fe.call(me,qt,$t)]})}),nt=O.call(me,Xe,ke);Oe=m.permute(Oe,nt),Xe=m.permute(Xe,nt);var dt,Dt,Ft,It,Pt=N.call(me,Xe,ke),Et=Oe[0].length;for(Ft=0;Ft<Et;++Ft)for(H.call(me,Oe[0][Ft],It=Pt[Ft],Xe[0][Ft][1]),Dt=1;Dt<dt;++Dt)H.call(me,Oe[Dt][Ft],It+=Xe[Dt-1][Ft][1],Xe[Dt][Ft][1]);return _e}return me.values=function(_e){return arguments.length?(pe=_e,me):pe},me.order=function(_e){return arguments.length?(O="function"==typeof _e?_e:fi.get(_e)||ji,me):O},me.offset=function(_e){return arguments.length?(N="function"==typeof _e?_e:Qr.get(_e)||Ki,me):N},me.x=function(_e){return arguments.length?(X=_e,me):X},me.y=function(_e){return arguments.length?(fe=_e,me):fe},me.out=function(_e){return arguments.length?(H=_e,me):H},me};var fi=m.map({"inside-out":function(pe){var O,N,H=pe.length,X=pe.map(fa),fe=pe.map(Vi),me=m.range(H).sort(function(nt,dt){return X[nt]-X[dt]}),_e=0,ke=0,Oe=[],Xe=[];for(O=0;O<H;++O)N=me[O],_e<ke?(_e+=fe[N],Oe.push(N)):(ke+=fe[N],Xe.push(N));return Xe.reverse().concat(Oe)},reverse:function(pe){return m.range(pe.length).reverse()},default:ji}),Qr=m.map({silhouette:function(pe){var O,N,H,X=pe.length,fe=pe[0].length,me=[],_e=0,ke=[];for(N=0;N<fe;++N){for(O=0,H=0;O<X;O++)H+=pe[O][N][1];H>_e&&(_e=H),me.push(H)}for(N=0;N<fe;++N)ke[N]=(_e-me[N])/2;return ke},wiggle:function(pe){var O,N,H,X,fe,me,_e,ke,Oe,Xe=pe.length,nt=pe[0],dt=nt.length,Dt=[];for(Dt[0]=ke=Oe=0,N=1;N<dt;++N){for(O=0,X=0;O<Xe;++O)X+=pe[O][N][1];for(O=0,fe=0,_e=nt[N][0]-nt[N-1][0];O<Xe;++O){for(H=0,me=(pe[O][N][1]-pe[O][N-1][1])/(2*_e);H<O;++H)me+=(pe[H][N][1]-pe[H][N-1][1])/_e;fe+=me*pe[O][N][1]}Dt[N]=ke-=X?fe/X*_e:0,ke<Oe&&(Oe=ke)}for(N=0;N<dt;++N)Dt[N]-=Oe;return Dt},expand:function(pe){var O,N,H,X=pe.length,fe=pe[0].length,me=1/X,_e=[];for(N=0;N<fe;++N){for(O=0,H=0;O<X;O++)H+=pe[O][N][1];if(H)for(O=0;O<X;O++)pe[O][N][1]/=H;else for(O=0;O<X;O++)pe[O][N][1]=me}for(N=0;N<fe;++N)_e[N]=0;return _e},zero:Ki});function ji(pe){return m.range(pe.length)}function Ki(pe){for(var O=-1,N=pe[0].length,H=[];++O<N;)H[O]=0;return H}function fa(pe){for(var O,N=1,H=0,X=pe[0][1],fe=pe.length;N<fe;++N)(O=pe[N][1])>X&&(H=N,X=O);return H}function Vi(pe){return pe.reduce(Oa,0)}function Oa(pe,O){return pe+O[1]}function Lo(pe,O){return Ua(pe,Math.ceil(Math.log(O.length)/Math.LN2+1))}function Ua(pe,O){for(var N=-1,H=+pe[0],X=(pe[1]-H)/O,fe=[];++N<=O;)fe[N]=X*N+H;return fe}function Sa(pe){return[m.min(pe),m.max(pe)]}function Wa(pe,O){return pe.value-O.value}function fo(pe,O){var N=pe._pack_next;pe._pack_next=O,O._pack_prev=pe,O._pack_next=N,N._pack_prev=O}function Io(pe,O){pe._pack_next=O,O._pack_prev=pe}function ho(pe,O){var N=O.x-pe.x,H=O.y-pe.y,X=pe.r+O.r;return.999*X*X>N*N+H*H}function us(pe){if((O=pe.children)&&(ke=O.length)){var O,N,H,X,fe,me,_e,ke,Oe=1/0,Xe=-1/0,nt=1/0,dt=-1/0;if(O.forEach(xs),(N=O[0]).x=-N.r,N.y=0,qt(N),ke>1&&((H=O[1]).x=H.r,H.y=0,qt(H),ke>2))for(ka(N,H,X=O[2]),qt(X),fo(N,X),N._pack_prev=X,fo(X,H),H=N._pack_next,fe=3;fe<ke;fe++){ka(N,H,X=O[fe]);var Dt=0,Ft=1,It=1;for(me=H._pack_next;me!==H;me=me._pack_next,Ft++)if(ho(me,X)){Dt=1;break}if(1==Dt)for(_e=N._pack_prev;_e!==me._pack_prev&&!ho(_e,X);_e=_e._pack_prev,It++);Dt?(Ft<It||Ft==It&&H.r<N.r?Io(N,H=me):Io(N=_e,H),fe--):(fo(N,X),H=X,qt(X))}var Pt=(Oe+Xe)/2,Et=(nt+dt)/2,Zt=0;for(fe=0;fe<ke;fe++)(X=O[fe]).x-=Pt,X.y-=Et,Zt=Math.max(Zt,X.r+Math.sqrt(X.x*X.x+X.y*X.y));pe.r=Zt,O.forEach(cs)}function qt($t){Oe=Math.min($t.x-$t.r,Oe),Xe=Math.max($t.x+$t.r,Xe),nt=Math.min($t.y-$t.r,nt),dt=Math.max($t.y+$t.r,dt)}}function xs(pe){pe._pack_next=pe._pack_prev=pe}function cs(pe){delete pe._pack_next,delete pe._pack_prev}function ka(pe,O,N){var H=pe.r+N.r,X=O.x-pe.x,fe=O.y-pe.y;if(H&&(X||fe)){var me=O.r+N.r,_e=X*X+fe*fe,ke=.5+((H*=H)-(me*=me))/(2*_e),Oe=Math.sqrt(Math.max(0,2*me*(H+_e)-(H-=_e)*H-me*me))/(2*_e);N.x=pe.x+ke*X+Oe*fe,N.y=pe.y+ke*fe-Oe*X}else N.x=pe.x+H,N.y=pe.y}function At(pe,O){return pe.parent==O.parent?1:2}function Yt(pe){var O=pe.children;return O.length?O[0]:pe.t}function xn(pe){var O,N=pe.children;return(O=N.length)?N[O-1]:pe.t}function rn(pe,O,N){var H=N/(O.i-pe.i);O.c-=H,O.s+=N,pe.c+=H,O.z+=N,O.m+=N}function bn(pe,O,N){return pe.a.parent===O.parent?pe.a:N}function Kn(pe){return{x:pe.x,y:pe.y,dx:pe.dx,dy:pe.dy}}function nr(pe,O){var N=pe.x+O[3],H=pe.y+O[0],X=pe.dx-O[1]-O[3],fe=pe.dy-O[0]-O[2];return X<0&&(N+=X/2,X=0),fe<0&&(H+=fe/2,fe=0),{x:N,y:H,dx:X,dy:fe}}function vr(pe){var O=pe[0],N=pe[pe.length-1];return O<N?[O,N]:[N,O]}function Er(pe){return pe.rangeExtent?pe.rangeExtent():vr(pe.range())}function kr(pe,O,N,H){var X=N(pe[0],pe[1]),fe=H(O[0],O[1]);return function(me){return fe(X(me))}}function Rr(pe,O){var N,H=0,X=pe.length-1,fe=pe[H],me=pe[X];return me<fe&&(N=H,H=X,X=N,N=fe,fe=me,me=N),pe[H]=O.floor(fe),pe[X]=O.ceil(me),pe}function Wr(pe){return pe?{floor:function(O){return Math.floor(O/pe)*pe},ceil:function(O){return Math.ceil(O/pe)*pe}}:Dr}m.layout.histogram=function(){var pe=!0,O=Number,N=Sa,H=Lo;function X(fe,me){for(var _e,ke,Oe=[],Xe=fe.map(O,this),nt=N.call(this,Xe,me),dt=H.call(this,nt,Xe,me),Dt=(me=-1,Xe.length),Ft=dt.length-1,It=pe?1:1/Dt;++me<Ft;)(_e=Oe[me]=[]).dx=dt[me+1]-(_e.x=dt[me]),_e.y=0;if(Ft>0)for(me=-1;++me<Dt;)(ke=Xe[me])>=nt[0]&&ke<=nt[1]&&((_e=Oe[m.bisect(dt,ke,1,Ft)-1]).y+=It,_e.push(fe[me]));return Oe}return X.value=function(fe){return arguments.length?(O=fe,X):O},X.range=function(fe){return arguments.length?(N=In(fe),X):N},X.bins=function(fe){return arguments.length?(H="number"==typeof fe?function(me){return Ua(me,fe)}:In(fe),X):H},X.frequency=function(fe){return arguments.length?(pe=!!fe,X):pe},X},m.layout.pack=function(){var pe,O=m.layout.hierarchy().sort(Wa),N=0,H=[1,1];function X(fe,me){var _e=O.call(this,fe,me),ke=_e[0],Oe=H[0],Xe=H[1],nt=null==pe?Math.sqrt:"function"==typeof pe?pe:function(){return pe};if(ke.x=ke.y=0,mn(ke,function(Dt){Dt.r=+nt(Dt.value)}),mn(ke,us),N){var dt=N*(pe?1:Math.max(2*ke.r/Oe,2*ke.r/Xe))/2;mn(ke,function(Dt){Dt.r+=dt}),mn(ke,us),mn(ke,function(Dt){Dt.r-=dt})}return function Dt(Ft,It,Pt,Et){var Zt=Ft.children;if(Ft.x=It+=Et*Ft.x,Ft.y=Pt+=Et*Ft.y,Ft.r*=Et,Zt)for(var qt=-1,$t=Zt.length;++qt<$t;)Dt(Zt[qt],It,Pt,Et)}(ke,Oe/2,Xe/2,pe?1:1/Math.max(2*ke.r/Oe,2*ke.r/Xe)),_e}return X.size=function(fe){return arguments.length?(H=fe,X):H},X.radius=function(fe){return arguments.length?(pe=null==fe||"function"==typeof fe?fe:+fe,X):pe},X.padding=function(fe){return arguments.length?(N=+fe,X):N},fn(X,O)},m.layout.tree=function(){var pe=m.layout.hierarchy().sort(null).value(null),O=At,N=[1,1],H=null;function X(ke,Oe){var Xe=pe.call(this,ke,Oe),nt=Xe[0],dt=function(qt){for(var $t,yn={A:null,children:[qt]},kn=[yn];null!=($t=kn.pop());)for(var Vn,Gn=$t.children,Tr=0,_r=Gn.length;Tr<_r;++Tr)kn.push((Gn[Tr]=Vn={_:Gn[Tr],parent:$t,children:(Vn=Gn[Tr].children)&&Vn.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:Tr}).a=Vn);return yn.children[0]}(nt);if(mn(dt,fe),dt.parent.m=-dt.z,ln(dt,me),H)ln(nt,_e);else{var Dt=nt,Ft=nt,It=nt;ln(nt,function(qt){qt.x<Dt.x&&(Dt=qt),qt.x>Ft.x&&(Ft=qt),qt.depth>It.depth&&(It=qt)});var Pt=O(Dt,Ft)/2-Dt.x,Et=N[0]/(Ft.x+O(Ft,Dt)/2+Pt),Zt=N[1]/(It.depth||1);ln(nt,function(qt){qt.x=(qt.x+Pt)*Et,qt.y=qt.depth*Zt})}return Xe}function fe(ke){var Oe=ke.children,Xe=ke.parent.children,nt=ke.i?Xe[ke.i-1]:null;if(Oe.length){!function(Dt){for(var Ft,It=0,Pt=0,Et=Dt.children,Zt=Et.length;--Zt>=0;)(Ft=Et[Zt]).z+=It,Ft.m+=It,It+=Ft.s+(Pt+=Ft.c)}(ke);var dt=(Oe[0].z+Oe[Oe.length-1].z)/2;nt?(ke.z=nt.z+O(ke._,nt._),ke.m=ke.z-dt):ke.z=dt}else nt&&(ke.z=nt.z+O(ke._,nt._));ke.parent.A=function(Dt,Ft,It){if(Ft){for(var Pt,Et=Dt,Zt=Dt,qt=Ft,$t=Et.parent.children[0],yn=Et.m,kn=Zt.m,Vn=qt.m,Gn=$t.m;qt=xn(qt),Et=Yt(Et),qt&&Et;)$t=Yt($t),(Zt=xn(Zt)).a=Dt,(Pt=qt.z+Vn-Et.z-yn+O(qt._,Et._))>0&&(rn(bn(qt,Dt,It),Dt,Pt),yn+=Pt,kn+=Pt),Vn+=qt.m,yn+=Et.m,Gn+=$t.m,kn+=Zt.m;qt&&!xn(Zt)&&(Zt.t=qt,Zt.m+=Vn-kn),Et&&!Yt($t)&&($t.t=Et,$t.m+=yn-Gn,It=Dt)}return It}(ke,nt,ke.parent.A||Xe[0])}function me(ke){ke._.x=ke.z+ke.parent.m,ke.m+=ke.parent.m}function _e(ke){ke.x*=N[0],ke.y=ke.depth*N[1]}return X.separation=function(ke){return arguments.length?(O=ke,X):O},X.size=function(ke){return arguments.length?(H=null==(N=ke)?_e:null,X):H?null:N},X.nodeSize=function(ke){return arguments.length?(H=null==(N=ke)?null:_e,X):H?N:null},fn(X,pe)},m.layout.cluster=function(){var pe=m.layout.hierarchy().sort(null).value(null),O=At,N=[1,1],H=!1;function X(fe,me){var _e,ke=pe.call(this,fe,me),Oe=ke[0],Xe=0;mn(Oe,function(It){var Et,Pt=It.children;Pt&&Pt.length?(It.x=(Et=Pt).reduce(function(Zt,qt){return Zt+qt.x},0)/Et.length,It.y=function(Et){return 1+m.max(Et,function(Zt){return Zt.y})}(Pt)):(It.x=_e?Xe+=O(It,_e):0,It.y=0,_e=It)});var nt=function It(Pt){var Et=Pt.children;return Et&&Et.length?It(Et[0]):Pt}(Oe),dt=function It(Pt){var Et,Zt=Pt.children;return Zt&&(Et=Zt.length)?It(Zt[Et-1]):Pt}(Oe),Dt=nt.x-O(nt,dt)/2,Ft=dt.x+O(dt,nt)/2;return mn(Oe,H?function(It){It.x=(It.x-Oe.x)*N[0],It.y=(Oe.y-It.y)*N[1]}:function(It){It.x=(It.x-Dt)/(Ft-Dt)*N[0],It.y=(1-(Oe.y?It.y/Oe.y:1))*N[1]}),ke}return X.separation=function(fe){return arguments.length?(O=fe,X):O},X.size=function(fe){return arguments.length?(H=null==(N=fe),X):H?null:N},X.nodeSize=function(fe){return arguments.length?(H=null!=(N=fe),X):H?N:null},fn(X,pe)},m.layout.treemap=function(){var pe,O=m.layout.hierarchy(),N=Math.round,H=[1,1],X=null,fe=Kn,me=!1,_e="squarify",ke=.5*(1+Math.sqrt(5));function Oe(It,Pt){for(var Et,Zt,qt=-1,$t=It.length;++qt<$t;)Zt=(Et=It[qt]).value*(Pt<0?0:Pt),Et.area=isNaN(Zt)||Zt<=0?0:Zt}function Xe(It){var Pt=It.children;if(Pt&&Pt.length){var Et,Zt,qt,$t=fe(It),yn=[],kn=Pt.slice(),Vn=1/0,Gn="slice"===_e?$t.dx:"dice"===_e?$t.dy:"slice-dice"===_e?1&It.depth?$t.dy:$t.dx:Math.min($t.dx,$t.dy);for(Oe(kn,$t.dx*$t.dy/It.value),yn.area=0;(qt=kn.length)>0;)yn.push(Et=kn[qt-1]),yn.area+=Et.area,"squarify"!==_e||(Zt=dt(yn,Gn))<=Vn?(kn.pop(),Vn=Zt):(yn.area-=yn.pop().area,Dt(yn,Gn,$t,!1),Gn=Math.min($t.dx,$t.dy),yn.length=yn.area=0,Vn=1/0);yn.length&&(Dt(yn,Gn,$t,!0),yn.length=yn.area=0),Pt.forEach(Xe)}}function nt(It){var Pt=It.children;if(Pt&&Pt.length){var Et,Zt=fe(It),qt=Pt.slice(),$t=[];for(Oe(qt,Zt.dx*Zt.dy/It.value),$t.area=0;Et=qt.pop();)$t.push(Et),$t.area+=Et.area,null!=Et.z&&(Dt($t,Et.z?Zt.dx:Zt.dy,Zt,!qt.length),$t.length=$t.area=0);Pt.forEach(nt)}}function dt(It,Pt){for(var Et,Zt=It.area,qt=0,$t=1/0,yn=-1,kn=It.length;++yn<kn;)(Et=It[yn].area)&&(Et<$t&&($t=Et),Et>qt&&(qt=Et));return Pt*=Pt,(Zt*=Zt)?Math.max(Pt*qt*ke/Zt,Zt/(Pt*$t*ke)):1/0}function Dt(It,Pt,Et,Zt){var qt,$t=-1,yn=It.length,kn=Et.x,Vn=Et.y,Gn=Pt?N(It.area/Pt):0;if(Pt==Et.dx){for((Zt||Gn>Et.dy)&&(Gn=Et.dy);++$t<yn;)(qt=It[$t]).x=kn,qt.y=Vn,qt.dy=Gn,kn+=qt.dx=Math.min(Et.x+Et.dx-kn,Gn?N(qt.area/Gn):0);qt.z=!0,qt.dx+=Et.x+Et.dx-kn,Et.y+=Gn,Et.dy-=Gn}else{for((Zt||Gn>Et.dx)&&(Gn=Et.dx);++$t<yn;)(qt=It[$t]).x=kn,qt.y=Vn,qt.dx=Gn,Vn+=qt.dy=Math.min(Et.y+Et.dy-Vn,Gn?N(qt.area/Gn):0);qt.z=!1,qt.dy+=Et.y+Et.dy-Vn,Et.x+=Gn,Et.dx-=Gn}}function Ft(It){var Pt=pe||O(It),Et=Pt[0];return Et.x=Et.y=0,Et.value?(Et.dx=H[0],Et.dy=H[1]):Et.dx=Et.dy=0,pe&&O.revalue(Et),Oe([Et],Et.dx*Et.dy/Et.value),(pe?nt:Xe)(Et),me&&(pe=Pt),Pt}return Ft.size=function(It){return arguments.length?(H=It,Ft):H},Ft.padding=function(It){if(!arguments.length)return X;function Pt(qt){var $t=It.call(Ft,qt,qt.depth);return null==$t?Kn(qt):nr(qt,"number"==typeof $t?[$t,$t,$t,$t]:$t)}function Et(qt){return nr(qt,It)}var Zt;return fe=null==(X=It)?Kn:"function"==(Zt=typeof It)?Pt:("number"===Zt&&(It=[It,It,It,It]),Et),Ft},Ft.round=function(It){return arguments.length?(N=It?Math.round:Number,Ft):N!=Number},Ft.sticky=function(It){return arguments.length?(me=It,pe=null,Ft):me},Ft.ratio=function(It){return arguments.length?(ke=It,Ft):ke},Ft.mode=function(It){return arguments.length?(_e=It+"",Ft):_e},fn(Ft,O)},m.random={normal:function(pe,O){var N=arguments.length;return N<2&&(O=1),N<1&&(pe=0),function(){var H,X,fe;do{fe=(H=2*Math.random()-1)*H+(X=2*Math.random()-1)*X}while(!fe||fe>1);return pe+O*H*Math.sqrt(-2*Math.log(fe)/fe)}},logNormal:function(){var pe=m.random.normal.apply(m,arguments);return function(){return Math.exp(pe())}},bates:function(pe){var O=m.random.irwinHall(pe);return function(){return O()/pe}},irwinHall:function(pe){return function(){for(var O=0,N=0;N<pe;N++)O+=Math.random();return O}}},m.scale={};var Dr={floor:I,ceil:I};function Yr(pe,O,N,H){var X=[],fe=[],me=0,_e=Math.min(pe.length,O.length)-1;for(pe[_e]<pe[0]&&(pe=pe.slice().reverse(),O=O.slice().reverse());++me<=_e;)X.push(N(pe[me-1],pe[me])),fe.push(H(O[me-1],O[me]));return function(ke){var Oe=m.bisect(pe,ke,1,_e)-1;return fe[Oe](X[Oe](ke))}}function si(pe,O){return m.rebind(pe,O,"range","rangeRound","interpolate","clamp")}function di(pe,O){return Rr(pe,Wr(Di(pe,O)[2])),Rr(pe,Wr(Di(pe,O)[2])),pe}function Di(pe,O){null==O&&(O=10);var N=vr(pe),H=N[1]-N[0],X=Math.pow(10,Math.floor(Math.log(H/O)/Math.LN10)),fe=O/H*X;return fe<=.15?X*=10:fe<=.35?X*=5:fe<=.75&&(X*=2),N[0]=Math.ceil(N[0]/X)*X,N[1]=Math.floor(N[1]/X)*X+.5*X,N[2]=X,N}function br(pe,O){return m.range.apply(m,Di(pe,O))}m.scale.linear=function(){return function pe(O,N,H,X){var fe,me;function _e(){var Oe=Math.min(O.length,N.length)>2?Yr:kr,Xe=X?ks:Ml;return fe=Oe(O,N,Xe,H),me=Oe(N,O,Xe,pa),ke}function ke(Oe){return fe(Oe)}return ke.invert=function(Oe){return me(Oe)},ke.domain=function(Oe){return arguments.length?(O=Oe.map(Number),_e()):O},ke.range=function(Oe){return arguments.length?(N=Oe,_e()):N},ke.rangeRound=function(Oe){return ke.range(Oe).interpolate(el)},ke.clamp=function(Oe){return arguments.length?(X=Oe,_e()):X},ke.interpolate=function(Oe){return arguments.length?(H=Oe,_e()):H},ke.ticks=function(Oe){return br(O,Oe)},ke.tickFormat=function(Oe,Xe){return d3_scale_linearTickFormat(O,Oe,Xe)},ke.nice=function(Oe){return di(O,Oe),_e()},ke.copy=function(){return pe(O,N,H,X)},_e()}([0,1],[0,1],pa,!1)},m.scale.log=function(){return function pe(O,N,H,X){function fe(ke){return(H?Math.log(ke<0?0:ke):-Math.log(ke>0?0:-ke))/Math.log(N)}function me(ke){return H?Math.pow(N,ke):-Math.pow(N,-ke)}function _e(ke){return O(fe(ke))}return _e.invert=function(ke){return me(O.invert(ke))},_e.domain=function(ke){return arguments.length?(H=ke[0]>=0,O.domain((X=ke.map(Number)).map(fe)),_e):X},_e.base=function(ke){return arguments.length?(N=+ke,O.domain(X.map(fe)),_e):N},_e.nice=function(){var ke=Rr(X.map(fe),H?Math:Si);return O.domain(ke),X=ke.map(me),_e},_e.ticks=function(){var ke=vr(X),Oe=[],Xe=ke[0],nt=ke[1],dt=Math.floor(fe(Xe)),Dt=Math.ceil(fe(nt)),Ft=N%1?2:N;if(isFinite(Dt-dt)){if(H){for(;dt<Dt;dt++)for(var It=1;It<Ft;It++)Oe.push(me(dt)*It);Oe.push(me(dt))}else for(Oe.push(me(dt));dt++<Dt;)for(It=Ft-1;It>0;It--)Oe.push(me(dt)*It);for(dt=0;Oe[dt]<Xe;dt++);for(Dt=Oe.length;Oe[Dt-1]>nt;Dt--);Oe=Oe.slice(dt,Dt)}return Oe},_e.copy=function(){return pe(O.copy(),N,H,X)},si(_e,O)}(m.scale.linear().domain([0,1]),10,!0,[1,10])};var Si={floor:function(pe){return-Math.ceil(-pe)},ceil:function(pe){return-Math.floor(-pe)}};function Jr(pe){return function(O){return O<0?-Math.pow(-O,pe):Math.pow(O,pe)}}m.scale.pow=function(){return function pe(O,N,H){var X=Jr(N),fe=Jr(1/N);function me(_e){return O(X(_e))}return me.invert=function(_e){return fe(O.invert(_e))},me.domain=function(_e){return arguments.length?(O.domain((H=_e.map(Number)).map(X)),me):H},me.ticks=function(_e){return br(H,_e)},me.tickFormat=function(_e,ke){return d3_scale_linearTickFormat(H,_e,ke)},me.nice=function(_e){return me.domain(di(H,_e))},me.exponent=function(_e){return arguments.length?(X=Jr(N=_e),fe=Jr(1/N),O.domain(H.map(X)),me):N},me.copy=function(){return pe(O.copy(),N,H)},si(me,O)}(m.scale.linear(),1,[0,1])},m.scale.sqrt=function(){return m.scale.pow().exponent(.5)},m.scale.ordinal=function(){return function pe(O,N){var H,X,fe;function me(ke){return X[((H.get(ke)||("range"===N.t?H.set(ke,O.push(ke)):NaN))-1)%X.length]}function _e(ke,Oe){return m.range(O.length).map(function(Xe){return ke+Oe*Xe})}return me.domain=function(ke){if(!arguments.length)return O;O=[],H=new M;for(var Oe,Xe=-1,nt=ke.length;++Xe<nt;)H.has(Oe=ke[Xe])||H.set(Oe,O.push(Oe));return me[N.t].apply(me,N.a)},me.range=function(ke){return arguments.length?(X=ke,fe=0,N={t:"range",a:arguments},me):X},me.rangePoints=function(ke,Oe){arguments.length<2&&(Oe=0);var Xe=ke[0],nt=ke[1],dt=O.length<2?(Xe=(Xe+nt)/2,0):(nt-Xe)/(O.length-1+Oe);return X=_e(Xe+dt*Oe/2,dt),fe=0,N={t:"rangePoints",a:arguments},me},me.rangeRoundPoints=function(ke,Oe){arguments.length<2&&(Oe=0);var Xe=ke[0],nt=ke[1],dt=O.length<2?(Xe=nt=Math.round((Xe+nt)/2),0):(nt-Xe)/(O.length-1+Oe)|0;return X=_e(Xe+Math.round(dt*Oe/2+(nt-Xe-(O.length-1+Oe)*dt)/2),dt),fe=0,N={t:"rangeRoundPoints",a:arguments},me},me.rangeBands=function(ke,Oe,Xe){arguments.length<2&&(Oe=0),arguments.length<3&&(Xe=Oe);var nt=ke[1]<ke[0],dt=ke[nt-0],Ft=(ke[1-nt]-dt)/(O.length-Oe+2*Xe);return X=_e(dt+Ft*Xe,Ft),nt&&X.reverse(),fe=Ft*(1-Oe),N={t:"rangeBands",a:arguments},me},me.rangeRoundBands=function(ke,Oe,Xe){arguments.length<2&&(Oe=0),arguments.length<3&&(Xe=Oe);var nt=ke[1]<ke[0],dt=ke[nt-0],Dt=ke[1-nt],Ft=Math.floor((Dt-dt)/(O.length-Oe+2*Xe));return X=_e(dt+Math.round((Dt-dt-(O.length-Oe)*Ft)/2),Ft),nt&&X.reverse(),fe=Math.round(Ft*(1-Oe)),N={t:"rangeRoundBands",a:arguments},me},me.rangeBand=function(){return fe},me.rangeExtent=function(){return vr(N.a[0])},me.copy=function(){return pe(O,N)},me.domain(O)}([],{t:"range",a:[[]]})},m.scale.category10=function(){return m.scale.ordinal().range(ci)},m.scale.category20=function(){return m.scale.ordinal().range(pi)},m.scale.category20b=function(){return m.scale.ordinal().range(ra)},m.scale.category20c=function(){return m.scale.ordinal().range(ma)};var ci=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(en),pi=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(en),ra=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(en),ma=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(en);function $r(){return 0}m.scale.quantile=function(){return function pe(O,N){var H;function X(){var me=0,_e=N.length;for(H=[];++me<_e;)H[me-1]=m.quantile(O,me/_e);return fe}function fe(me){if(!isNaN(me=+me))return N[m.bisect(H,me)]}return fe.domain=function(me){return arguments.length?(O=me.map(c).filter(h).sort(s),X()):O},fe.range=function(me){return arguments.length?(N=me,X()):N},fe.quantiles=function(){return H},fe.invertExtent=function(me){return(me=N.indexOf(me))<0?[NaN,NaN]:[me>0?H[me-1]:O[0],me<H.length?H[me]:O[O.length-1]]},fe.copy=function(){return pe(O,N)},X()}([],[])},m.scale.quantize=function(){return function pe(O,N,H){var X,fe;function me(ke){return H[Math.max(0,Math.min(fe,Math.floor(X*(ke-O))))]}function _e(){return X=H.length/(N-O),fe=H.length-1,me}return me.domain=function(ke){return arguments.length?(O=+ke[0],N=+ke[ke.length-1],_e()):[O,N]},me.range=function(ke){return arguments.length?(H=ke,_e()):H},me.invertExtent=function(ke){return[ke=(ke=H.indexOf(ke))<0?NaN:ke/X+O,ke+1/X]},me.copy=function(){return pe(O,N,H)},_e()}(0,1,[0,1])},m.scale.threshold=function(){return function pe(O,N){function H(X){if(X<=X)return N[m.bisect(O,X)]}return H.domain=function(X){return arguments.length?(O=X,H):O},H.range=function(X){return arguments.length?(N=X,H):N},H.invertExtent=function(X){return X=N.indexOf(X),[O[X-1],O[X]]},H.copy=function(){return pe(O,N)},H}([.5],[0,1])},m.scale.identity=function(){return function pe(O){function N(H){return+H}return N.invert=N,N.domain=N.range=function(H){return arguments.length?(O=H.map(N),N):O},N.ticks=function(H){return br(O,H)},N.tickFormat=function(H,X){return d3_scale_linearTickFormat(O,H,X)},N.copy=function(){return pe(O)},N}([0,1])},m.svg={},m.svg.arc=function(){var pe=da,O=Wi,N=$r,H=Ta,X=va,fe=ua,me=xa;function _e(){var Oe=Math.max(0,+pe.apply(this,arguments)),Xe=Math.max(0,+O.apply(this,arguments)),nt=X.apply(this,arguments)-Qe,dt=fe.apply(this,arguments)-Qe,Dt=Math.abs(dt-nt),Ft=nt>dt?0:1;if(Xe<Oe&&(It=Xe,Xe=Oe,Oe=It),Dt>=Ze)return ke(Xe,Ft)+(Oe?ke(Oe,1-Ft):"")+"Z";var It,Pt,Et,Zt,qt,$t,yn,kn,Vn,Gn,Tr,_r,Or=0,Sr=0,hi=[];if((Zt=(+me.apply(this,arguments)||0)/2)&&(Et=H===Ta?Math.sqrt(Oe*Oe+Xe*Xe):+H.apply(this,arguments),Ft||(Sr*=-1),Xe&&(Sr=Ie(Et/Xe*Math.sin(Zt))),Oe&&(Or=Ie(Et/Oe*Math.sin(Zt)))),Xe){qt=Xe*Math.cos(nt+Sr),$t=Xe*Math.sin(nt+Sr),yn=Xe*Math.cos(dt-Sr),kn=Xe*Math.sin(dt-Sr);var vi=Math.abs(dt-nt-2*Sr)<=tn?0:1;if(Sr&&Mi(qt,$t,yn,kn)===Ft^vi){var Oi=(nt+dt)/2;qt=Xe*Math.cos(Oi),$t=Xe*Math.sin(Oi),yn=kn=null}}else qt=$t=0;if(Oe){Vn=Oe*Math.cos(dt-Or),Gn=Oe*Math.sin(dt-Or),Tr=Oe*Math.cos(nt+Or),_r=Oe*Math.sin(nt+Or);var cr=Math.abs(nt-dt+2*Or)<=tn?0:1;if(Or&&Mi(Vn,Gn,Tr,_r)===1-Ft^cr){var Hr=(nt+dt)/2;Vn=Oe*Math.cos(Hr),Gn=Oe*Math.sin(Hr),Tr=_r=null}}else Vn=Gn=0;if(Dt>Ot&&(It=Math.min(Math.abs(Xe-Oe)/2,+N.apply(this,arguments)))>.001){Pt=Oe<Xe^Ft?0:1;var bi=It,mi=It;if(Dt<tn){var wi=null==Tr?[Vn,Gn]:null==yn?[qt,$t]:jt([qt,$t],[Tr,_r],[yn,kn],[Vn,Gn]),Fi=qt-wi[0],ca=$t-wi[1],Ai=yn-wi[0],Zi=kn-wi[1],Xi=1/Math.sin(Math.acos((Fi*Ai+ca*Zi)/(Math.sqrt(Fi*Fi+ca*ca)*Math.sqrt(Ai*Ai+Zi*Zi)))/2),ya=Math.sqrt(wi[0]*wi[0]+wi[1]*wi[1]);mi=Math.min(It,(Oe-ya)/(Xi-1)),bi=Math.min(It,(Xe-ya)/(Xi+1))}if(null!=yn){var ta=ja(null==Tr?[Vn,Gn]:[Tr,_r],[qt,$t],Xe,bi,Ft),ba=ja([yn,kn],[Vn,Gn],Xe,bi,Ft);It===bi?hi.push("M",ta[0],"A",bi,",",bi," 0 0,",Pt," ",ta[1],"A",Xe,",",Xe," 0 ",1-Ft^Mi(ta[1][0],ta[1][1],ba[1][0],ba[1][1]),",",Ft," ",ba[1],"A",bi,",",bi," 0 0,",Pt," ",ba[0]):hi.push("M",ta[0],"A",bi,",",bi," 0 1,",Pt," ",ba[0])}else hi.push("M",qt,",",$t);if(null!=Tr){var Ra=ja([qt,$t],[Tr,_r],Oe,-mi,Ft),ro=ja([Vn,Gn],null==yn?[qt,$t]:[yn,kn],Oe,-mi,Ft);It===mi?hi.push("L",ro[0],"A",mi,",",mi," 0 0,",Pt," ",ro[1],"A",Oe,",",Oe," 0 ",Ft^Mi(ro[1][0],ro[1][1],Ra[1][0],Ra[1][1]),",",1-Ft," ",Ra[1],"A",mi,",",mi," 0 0,",Pt," ",Ra[0]):hi.push("L",ro[0],"A",mi,",",mi," 0 0,",Pt," ",Ra[0])}else hi.push("L",Vn,",",Gn)}else hi.push("M",qt,",",$t),null!=yn&&hi.push("A",Xe,",",Xe," 0 ",vi,",",Ft," ",yn,",",kn),hi.push("L",Vn,",",Gn),null!=Tr&&hi.push("A",Oe,",",Oe," 0 ",cr,",",1-Ft," ",Tr,",",_r);return hi.push("Z"),hi.join("")}function ke(Oe,Xe){return"M0,"+Oe+"A"+Oe+","+Oe+" 0 1,"+Xe+" 0,"+-Oe+"A"+Oe+","+Oe+" 0 1,"+Xe+" 0,"+Oe}return _e.innerRadius=function(Oe){return arguments.length?(pe=In(Oe),_e):pe},_e.outerRadius=function(Oe){return arguments.length?(O=In(Oe),_e):O},_e.cornerRadius=function(Oe){return arguments.length?(N=In(Oe),_e):N},_e.padRadius=function(Oe){return arguments.length?(H=Oe==Ta?Ta:In(Oe),_e):H},_e.startAngle=function(Oe){return arguments.length?(X=In(Oe),_e):X},_e.endAngle=function(Oe){return arguments.length?(fe=In(Oe),_e):fe},_e.padAngle=function(Oe){return arguments.length?(me=In(Oe),_e):me},_e.centroid=function(){var Oe=(+pe.apply(this,arguments)+ +O.apply(this,arguments))/2,Xe=(+X.apply(this,arguments)+ +fe.apply(this,arguments))/2-Qe;return[Math.cos(Xe)*Oe,Math.sin(Xe)*Oe]},_e};var Ta="auto";function da(pe){return pe.innerRadius}function Wi(pe){return pe.outerRadius}function va(pe){return pe.startAngle}function ua(pe){return pe.endAngle}function xa(pe){return pe&&pe.padAngle}function Mi(pe,O,N,H){return(pe-N)*O-(O-H)*pe>0?0:1}function ja(pe,O,N,H,X){var fe=pe[0]-O[0],me=pe[1]-O[1],_e=(X?H:-H)/Math.sqrt(fe*fe+me*me),ke=_e*me,Oe=-_e*fe,Xe=pe[0]+ke,nt=pe[1]+Oe,dt=O[0]+ke,Dt=O[1]+Oe,Ft=(Xe+dt)/2,It=(nt+Dt)/2,Pt=dt-Xe,Et=Dt-nt,Zt=Pt*Pt+Et*Et,qt=N-H,$t=Xe*Dt-dt*nt,yn=(Et<0?-1:1)*Math.sqrt(Math.max(0,qt*qt*Zt-$t*$t)),kn=($t*Et-Pt*yn)/Zt,Vn=(-$t*Pt-Et*yn)/Zt,Gn=($t*Et+Pt*yn)/Zt,Tr=(-$t*Pt+Et*yn)/Zt,_r=kn-Ft,Or=Vn-It,Sr=Gn-Ft,hi=Tr-It;return _r*_r+Or*Or>Sr*Sr+hi*hi&&(kn=Gn,Vn=Tr),[[kn-ke,Vn-Oe],[kn*N/qt,Vn*N/qt]]}function Vo(){return!0}function kl(pe){var O=ir,N=Ur,H=Vo,X=fs,fe=X.key,me=.7;function _e(ke){var Oe,Xe=[],nt=[],dt=-1,Dt=ke.length,Ft=In(O),It=In(N);function Pt(){Xe.push("M",X(pe(nt),me))}for(;++dt<Dt;)H.call(this,Oe=ke[dt],dt)?nt.push([+Ft.call(this,Oe,dt),+It.call(this,Oe,dt)]):nt.length&&(Pt(),nt=[]);return nt.length&&Pt(),Xe.length?Xe.join(""):null}return _e.x=function(ke){return arguments.length?(O=ke,_e):O},_e.y=function(ke){return arguments.length?(N=ke,_e):N},_e.defined=function(ke){return arguments.length?(H=ke,_e):H},_e.interpolate=function(ke){return arguments.length?(fe="function"==typeof ke?X=ke:(X=tl.get(ke)||fs).key,_e):fe},_e.tension=function(ke){return arguments.length?(me=ke,_e):me},_e}m.svg.line=function(){return kl(I)};var tl=m.map({linear:fs,"linear-closed":Ji,step:function(pe){for(var O=0,N=pe.length,H=pe[0],X=[H[0],",",H[1]];++O<N;)X.push("H",(H[0]+(H=pe[O])[0])/2,"V",H[1]);return N>1&&X.push("H",H[0]),X.join("")},"step-before":po,"step-after":Ns,basis:ts,"basis-open":function(pe){if(pe.length<4)return fs(pe);for(var O,N=[],H=-1,X=pe.length,fe=[0],me=[0];++H<3;)fe.push((O=pe[H])[0]),me.push(O[1]);for(N.push(la(Xo,fe)+","+la(Xo,me)),--H;++H<X;)O=pe[H],fe.shift(),fe.push(O[0]),me.shift(),me.push(O[1]),ns(N,fe,me);return N.join("")},"basis-closed":function(pe){for(var O,N,H=-1,X=pe.length,fe=X+4,me=[],_e=[];++H<4;)me.push((N=pe[H%X])[0]),_e.push(N[1]);for(O=[la(Xo,me),",",la(Xo,_e)],--H;++H<fe;)N=pe[H%X],me.shift(),me.push(N[0]),_e.shift(),_e.push(N[1]),ns(O,me,_e);return O.join("")},bundle:function(pe,O){var N=pe.length-1;if(N)for(var H,X,fe=pe[0][0],me=pe[0][1],_e=pe[N][0]-fe,ke=pe[N][1]-me,Oe=-1;++Oe<=N;)(H=pe[Oe])[0]=O*H[0]+(1-O)*(fe+(X=Oe/N)*_e),H[1]=O*H[1]+(1-O)*(me+X*ke);return ts(pe)},cardinal:function(pe,O){return pe.length<3?fs(pe):pe[0]+Qi(pe,Mo(pe,O))},"cardinal-open":function(pe,O){return pe.length<4?fs(pe):pe[1]+Qi(pe.slice(1,-1),Mo(pe,O))},"cardinal-closed":function(pe,O){return pe.length<3?Ji(pe):pe[0]+Qi((pe.push(pe[0]),pe),Mo([pe[pe.length-2]].concat(pe,[pe[1]]),O))},monotone:function(pe){return pe.length<3?fs(pe):pe[0]+Qi(pe,function(O){for(var N,H,X,fe,me=[],_e=function(Xe){for(var nt=0,dt=Xe.length-1,Dt=[],Ft=Xe[0],It=Xe[1],Pt=Dt[0]=Dl(Ft,It);++nt<dt;)Dt[nt]=(Pt+(Pt=Dl(Ft=It,It=Xe[nt+1])))/2;return Dt[nt]=Pt,Dt}(O),ke=-1,Oe=O.length-1;++ke<Oe;)N=Dl(O[ke],O[ke+1]),f(N)<Ot?_e[ke]=_e[ke+1]=0:(fe=(H=_e[ke]/N)*H+(X=_e[ke+1]/N)*X)>9&&(fe=3*N/Math.sqrt(fe),_e[ke]=fe*H,_e[ke+1]=fe*X);for(ke=-1;++ke<=Oe;)fe=(O[Math.min(Oe,ke+1)][0]-O[Math.max(0,ke-1)][0])/(6*(1+_e[ke]*_e[ke])),me.push([fe||0,_e[ke]*fe||0]);return me}(pe))}});function fs(pe){return pe.length>1?pe.join("L"):pe+"Z"}function Ji(pe){return pe.join("L")+"Z"}function po(pe){for(var O=0,N=pe.length,H=pe[0],X=[H[0],",",H[1]];++O<N;)X.push("V",(H=pe[O])[1],"H",H[0]);return X.join("")}function Ns(pe){for(var O=0,N=pe.length,H=pe[0],X=[H[0],",",H[1]];++O<N;)X.push("H",(H=pe[O])[0],"V",H[1]);return X.join("")}function Qi(pe,O){if(O.length<1||pe.length!=O.length&&pe.length!=O.length+2)return fs(pe);var N=pe.length!=O.length,H="",X=pe[0],fe=pe[1],me=O[0],_e=me,ke=1;if(N&&(H+="Q"+(fe[0]-2*me[0]/3)+","+(fe[1]-2*me[1]/3)+","+fe[0]+","+fe[1],X=pe[1],ke=2),O.length>1){fe=pe[ke],ke++,H+="C"+(X[0]+me[0])+","+(X[1]+me[1])+","+(fe[0]-(_e=O[1])[0])+","+(fe[1]-_e[1])+","+fe[0]+","+fe[1];for(var Oe=2;Oe<O.length;Oe++,ke++)H+="S"+((fe=pe[ke])[0]-(_e=O[Oe])[0])+","+(fe[1]-_e[1])+","+fe[0]+","+fe[1]}if(N){var Xe=pe[ke];H+="Q"+(fe[0]+2*_e[0]/3)+","+(fe[1]+2*_e[1]/3)+","+Xe[0]+","+Xe[1]}return H}function Mo(pe,O){for(var N,H=[],X=(1-O)/2,fe=pe[0],me=pe[1],_e=1,ke=pe.length;++_e<ke;)N=fe,fe=me,H.push([X*((me=pe[_e])[0]-N[0]),X*(me[1]-N[1])]);return H}function ts(pe){if(pe.length<3)return fs(pe);var O=1,N=pe.length,H=pe[0],X=H[0],fe=H[1],me=[X,X,X,(H=pe[1])[0]],_e=[fe,fe,fe,H[1]],ke=[X,",",fe,"L",la(Xo,me),",",la(Xo,_e)];for(pe.push(pe[N-1]);++O<=N;)H=pe[O],me.shift(),me.push(H[0]),_e.shift(),_e.push(H[1]),ns(ke,me,_e);return pe.pop(),ke.push("L",H),ke.join("")}function la(pe,O){return pe[0]*O[0]+pe[1]*O[1]+pe[2]*O[2]+pe[3]*O[3]}tl.forEach(function(pe,O){O.key=pe,O.closed=/-closed$/.test(pe)});var bs=[0,2/3,1/3,0],Qa=[0,1/3,2/3,0],Xo=[0,1/6,2/3,1/6];function ns(pe,O,N){pe.push("C",la(bs,O),",",la(bs,N),",",la(Qa,O),",",la(Qa,N),",",la(Xo,O),",",la(Xo,N))}function Dl(pe,O){return(O[1]-pe[1])/(O[0]-pe[0])}function au(pe){for(var O,N,H,X=-1,fe=pe.length;++X<fe;)N=(O=pe[X])[0],H=O[1]-Qe,O[0]=N*Math.cos(H),O[1]=N*Math.sin(H);return pe}function vo(pe){var O=ir,N=ir,H=0,X=Ur,fe=Vo,me=fs,_e=me.key,ke=me,Oe="L",Xe=.7;function nt(dt){var Dt,Ft,It,Pt=[],Et=[],Zt=[],qt=-1,$t=dt.length,yn=In(O),kn=In(H),Vn=O===N?function(){return Ft}:In(N),Gn=H===X?function(){return It}:In(X);function Tr(){Pt.push("M",me(pe(Zt),Xe),Oe,ke(pe(Et.reverse()),Xe),"Z")}for(;++qt<$t;)fe.call(this,Dt=dt[qt],qt)?(Et.push([Ft=+yn.call(this,Dt,qt),It=+kn.call(this,Dt,qt)]),Zt.push([+Vn.call(this,Dt,qt),+Gn.call(this,Dt,qt)])):Et.length&&(Tr(),Et=[],Zt=[]);return Et.length&&Tr(),Pt.length?Pt.join(""):null}return nt.x=function(dt){return arguments.length?(O=N=dt,nt):N},nt.x0=function(dt){return arguments.length?(O=dt,nt):O},nt.x1=function(dt){return arguments.length?(N=dt,nt):N},nt.y=function(dt){return arguments.length?(H=X=dt,nt):X},nt.y0=function(dt){return arguments.length?(H=dt,nt):H},nt.y1=function(dt){return arguments.length?(X=dt,nt):X},nt.defined=function(dt){return arguments.length?(fe=dt,nt):fe},nt.interpolate=function(dt){return arguments.length?(_e="function"==typeof dt?me=dt:(me=tl.get(dt)||fs).key,ke=me.reverse||me,Oe=me.closed?"M":"L",nt):_e},nt.tension=function(dt){return arguments.length?(Xe=dt,nt):Xe},nt}function _s(pe){return pe.source}function Uo(pe){return pe.target}function yl(pe){return pe.radius}function Ri(pe){return[pe.x,pe.y]}function Yi(pe){return function(){var O=pe.apply(this,arguments),N=O[0],H=O[1]-Qe;return[N*Math.cos(H),N*Math.sin(H)]}}function xu(){return 64}function ou(){return"circle"}function ia(pe){var O=Math.sqrt(pe/tn);return"M0,"+O+"A"+O+","+O+" 0 1,1 0,"+-O+"A"+O+","+O+" 0 1,1 0,"+O+"Z"}m.svg.line.radial=function(){var pe=kl(au);return pe.radius=pe.x,delete pe.x,pe.angle=pe.y,delete pe.y,pe},po.reverse=Ns,Ns.reverse=po,m.svg.area=function(){return vo(I)},m.svg.area.radial=function(){var pe=vo(au);return pe.radius=pe.x,delete pe.x,pe.innerRadius=pe.x0,delete pe.x0,pe.outerRadius=pe.x1,delete pe.x1,pe.angle=pe.y,delete pe.y,pe.startAngle=pe.y0,delete pe.y0,pe.endAngle=pe.y1,delete pe.y1,pe},m.svg.chord=function(){var pe=_s,O=Uo,N=yl,H=va,X=ua;function fe(Oe,Xe){var nt,dt,Dt=me(this,pe,Oe,Xe),Ft=me(this,O,Oe,Xe);return"M"+Dt.p0+_e(Dt.r,Dt.p1,Dt.a1-Dt.a0)+((nt=Dt).a0==(dt=Ft).a0&&nt.a1==dt.a1?ke(0,0,0,Dt.p0):ke(0,0,0,Ft.p0)+_e(Ft.r,Ft.p1,Ft.a1-Ft.a0)+ke(0,0,0,Dt.p0))+"Z"}function me(Oe,Xe,nt,dt){var Dt=Xe.call(Oe,nt,dt),Ft=N.call(Oe,Dt,dt),It=H.call(Oe,Dt,dt)-Qe,Pt=X.call(Oe,Dt,dt)-Qe;return{r:Ft,a0:It,a1:Pt,p0:[Ft*Math.cos(It),Ft*Math.sin(It)],p1:[Ft*Math.cos(Pt),Ft*Math.sin(Pt)]}}function _e(Oe,Xe,nt){return"A"+Oe+","+Oe+" 0 "+ +(nt>tn)+",1 "+Xe}function ke(Oe,Xe,nt,dt){return"Q 0,0 "+dt}return fe.radius=function(Oe){return arguments.length?(N=In(Oe),fe):N},fe.source=function(Oe){return arguments.length?(pe=In(Oe),fe):pe},fe.target=function(Oe){return arguments.length?(O=In(Oe),fe):O},fe.startAngle=function(Oe){return arguments.length?(H=In(Oe),fe):H},fe.endAngle=function(Oe){return arguments.length?(X=In(Oe),fe):X},fe},m.svg.diagonal=function(){var pe=_s,O=Uo,N=Ri;function H(X,fe){var me=pe.call(this,X,fe),_e=O.call(this,X,fe),ke=(me.y+_e.y)/2,Oe=[me,{x:me.x,y:ke},{x:_e.x,y:ke},_e];return"M"+(Oe=Oe.map(N))[0]+"C"+Oe[1]+" "+Oe[2]+" "+Oe[3]}return H.source=function(X){return arguments.length?(pe=In(X),H):pe},H.target=function(X){return arguments.length?(O=In(X),H):O},H.projection=function(X){return arguments.length?(N=X,H):N},H},m.svg.diagonal.radial=function(){var pe=m.svg.diagonal(),O=Ri,N=pe.projection;return pe.projection=function(H){return arguments.length?N(Yi(O=H)):O},pe},m.svg.symbol=function(){var pe=ou,O=xu;function N(H,X){return(nl.get(pe.call(this,H,X))||ia)(O.call(this,H,X))}return N.type=function(H){return arguments.length?(pe=In(H),N):pe},N.size=function(H){return arguments.length?(O=In(H),N):O},N};var nl=m.map({circle:ia,cross:function(pe){var O=Math.sqrt(pe/5)/2;return"M"+-3*O+","+-O+"H"+-O+"V"+-3*O+"H"+O+"V"+-O+"H"+3*O+"V"+O+"H"+O+"V"+3*O+"H"+-O+"V"+O+"H"+-3*O+"Z"},diamond:function(pe){var O=Math.sqrt(pe/(2*fc)),N=O*fc;return"M0,"+-O+"L"+N+",0 0,"+O+" "+-N+",0Z"},square:function(pe){var O=Math.sqrt(pe)/2;return"M"+-O+","+-O+"L"+O+","+-O+" "+O+","+O+" "+-O+","+O+"Z"},"triangle-down":function(pe){var O=Math.sqrt(pe/vl),N=O*vl/2;return"M0,"+N+"L"+O+","+-N+" "+-O+","+-N+"Z"},"triangle-up":function(pe){var O=Math.sqrt(pe/vl),N=O*vl/2;return"M0,"+-N+"L"+O+","+N+" "+-O+","+N+"Z"}});m.svg.symbolTypes=nl.keys();var vl=Math.sqrt(3),fc=Math.tan(30*qe);ne.transition=function(pe){for(var O,N,H=Zl||++Ys,X=Ll(pe),fe=[],me=ei||{time:Date.now(),ease:Yl,delay:0,duration:250},_e=-1,ke=this.length;++_e<ke;){fe.push(O=[]);for(var Oe=this[_e],Xe=-1,nt=Oe.length;++Xe<nt;)(N=Oe[Xe])&&hs(N,Xe,X,H,me),O.push(N)}return Za(fe,X,H)},ne.interrupt=function(pe){return this.each(null==pe?bu:Fa(Ll(pe)))};var bu=Fa(Ll());function Fa(pe){return function(){var O,N,H;(O=this[pe])&&(H=O[N=O.active])&&(H.timer.c=null,H.timer.t=NaN,--O.count?delete O[N]:delete this[pe],O.active+=.5,H.event&&H.event.interrupt.call(this,this.__data__,H.index))}}function Za(pe,O,N){return G(pe,ea),pe.namespace=O,pe.id=N,pe}var Zl,ei,ea=[],Ys=0;function Po(pe,O,N,H){var X=pe.id,fe=pe.namespace;return Ge(pe,"function"==typeof N?function(me,_e,ke){me[fe][X].tween.set(O,H(N.call(me,me.__data__,_e,ke)))}:(N=H(N),function(me){me[fe][X].tween.set(O,N)}))}function Xl(pe){return null==pe&&(pe=""),function(){this.textContent=pe}}function Ll(pe){return null==pe?"__transition__":"__transition_"+pe+"__"}function hs(pe,O,N,H,X){var fe,me,_e,ke,Oe,Xe=pe[N]||(pe[N]={active:0,count:0}),nt=Xe[H];function dt(Ft){var It=Xe.active,Pt=Xe[It];for(var Et in Pt&&(Pt.timer.c=null,Pt.timer.t=NaN,--Xe.count,delete Xe[It],Pt.event&&Pt.event.interrupt.call(pe,pe.__data__,Pt.index)),Xe)if(+Et<H){var Zt=Xe[Et];Zt.timer.c=null,Zt.timer.t=NaN,--Xe.count,delete Xe[Et]}me.c=Dt,Fn(function(){return me.c&&Dt(Ft||1)&&(me.c=null,me.t=NaN),1},0,fe),Xe.active=H,nt.event&&nt.event.start.call(pe,pe.__data__,O),Oe=[],nt.tween.forEach(function(qt,$t){($t=$t.call(pe,pe.__data__,O))&&Oe.push($t)}),ke=nt.ease,_e=nt.duration}function Dt(Ft){for(var It=Ft/_e,Pt=ke(It),Et=Oe.length;Et>0;)Oe[--Et].call(pe,Pt);if(It>=1)return nt.event&&nt.event.end.call(pe,pe.__data__,O),--Xe.count?delete Xe[H]:delete pe[N],1}nt||(me=Fn(function(Ft){var It=nt.delay;if(me.t=It+fe,It<=Ft)return dt(Ft-It);me.c=dt},0,fe=X.time),nt=Xe[H]={tween:new M,time:fe,timer:me,delay:X.delay,duration:X.duration,ease:X.ease,index:O},X=null,++Xe.count)}ea.call=ne.call,ea.empty=ne.empty,ea.node=ne.node,ea.size=ne.size,m.transition=function(pe,O){return pe&&pe.transition?Zl?pe.transition(O):pe:m.selection().transition(pe)},m.transition.prototype=ea,ea.select=function(pe){var O,N,H,X=this.id,fe=this.namespace,me=[];pe=le(pe);for(var _e=-1,ke=this.length;++_e<ke;){me.push(O=[]);for(var Oe=this[_e],Xe=-1,nt=Oe.length;++Xe<nt;)(H=Oe[Xe])&&(N=pe.call(H,H.__data__,Xe,_e))?("__data__"in H&&(N.__data__=H.__data__),hs(N,Xe,fe,X,H[fe][X]),O.push(N)):O.push(null)}return Za(me,fe,X)},ea.selectAll=function(pe){var O,N,H,X,fe,me=this.id,_e=this.namespace,ke=[];pe=ue(pe);for(var Oe=-1,Xe=this.length;++Oe<Xe;)for(var nt=this[Oe],dt=-1,Dt=nt.length;++dt<Dt;)if(H=nt[dt]){fe=H[_e][me],N=pe.call(H,H.__data__,dt,Oe),ke.push(O=[]);for(var Ft=-1,It=N.length;++Ft<It;)(X=N[Ft])&&hs(X,Ft,_e,me,fe),O.push(X)}return Za(ke,_e,me)},ea.filter=function(pe){var O,N,H=[];"function"!=typeof pe&&(pe=Pe(pe));for(var X=0,fe=this.length;X<fe;X++){H.push(O=[]);for(var me,_e=0,ke=(me=this[X]).length;_e<ke;_e++)(N=me[_e])&&pe.call(N,N.__data__,_e,X)&&O.push(N)}return Za(H,this.namespace,this.id)},ea.tween=function(pe,O){var N=this.id,H=this.namespace;return arguments.length<2?this.node()[H][N].tween.get(pe):Ge(this,null==O?function(X){X[H][N].tween.remove(pe)}:function(X){X[H][N].tween.set(pe,O)})},ea.attr=function(pe,O){if(arguments.length<2){for(O in pe)this.attr(O,pe[O]);return this}var N="transform"==pe?jo:pa,H=m.ns.qualify(pe);function X(){this.removeAttribute(H)}function fe(){this.removeAttributeNS(H.space,H.local)}function me(ke){return null==ke?X:(ke+="",function(){var Oe,Xe=this.getAttribute(H);return Xe!==ke&&(Oe=N(Xe,ke),function(nt){this.setAttribute(H,Oe(nt))})})}function _e(ke){return null==ke?fe:(ke+="",function(){var Oe,Xe=this.getAttributeNS(H.space,H.local);return Xe!==ke&&(Oe=N(Xe,ke),function(nt){this.setAttributeNS(H.space,H.local,Oe(nt))})})}return Po(this,"attr."+pe,O,H.local?_e:me)},ea.attrTween=function(pe,O){var N=m.ns.qualify(pe);return this.tween("attr."+pe,N.local?function(H,X){var fe=O.call(this,H,X,this.getAttributeNS(N.space,N.local));return fe&&function(me){this.setAttributeNS(N.space,N.local,fe(me))}}:function(H,X){var fe=O.call(this,H,X,this.getAttribute(N));return fe&&function(me){this.setAttribute(N,fe(me))}})},ea.style=function(pe,O,N){var H=arguments.length;if(H<3){if("string"!=typeof pe){for(N in H<2&&(O=""),pe)this.style(N,pe[N],O);return this}N=""}function X(){this.style.removeProperty(pe)}function fe(me){return null==me?X:(me+="",function(){var _e,ke=o(this).getComputedStyle(this,null).getPropertyValue(pe);return ke!==me&&(_e=pa(ke,me),function(Oe){this.style.setProperty(pe,_e(Oe),N)})})}return Po(this,"style."+pe,O,fe)},ea.styleTween=function(pe,O,N){function H(X,fe){var me=O.call(this,X,fe,o(this).getComputedStyle(this,null).getPropertyValue(pe));return me&&function(_e){this.style.setProperty(pe,me(_e),N)}}return arguments.length<3&&(N=""),this.tween("style."+pe,H)},ea.text=function(pe){return Po(this,"text",pe,Xl)},ea.remove=function(){var pe=this.namespace;return this.each("end.transition",function(){var O;this[pe].count<2&&(O=this.parentNode)&&O.removeChild(this)})},ea.ease=function(pe){var O=this.id,N=this.namespace;return arguments.length<1?this.node()[N][O].ease:("function"!=typeof pe&&(pe=m.ease.apply(m,arguments)),Ge(this,function(H){H[N][O].ease=pe}))},ea.delay=function(pe){var O=this.id,N=this.namespace;return arguments.length<1?this.node()[N][O].delay:Ge(this,"function"==typeof pe?function(H,X,fe){H[N][O].delay=+pe.call(H,H.__data__,X,fe)}:(pe=+pe,function(H){H[N][O].delay=pe}))},ea.duration=function(pe){var O=this.id,N=this.namespace;return arguments.length<1?this.node()[N][O].duration:Ge(this,"function"==typeof pe?function(H,X,fe){H[N][O].duration=Math.max(1,pe.call(H,H.__data__,X,fe))}:(pe=Math.max(1,pe),function(H){H[N][O].duration=pe}))},ea.each=function(pe,O){var N=this.id,H=this.namespace;if(arguments.length<2){var X=ei,fe=Zl;try{Zl=N,Ge(this,function(me,_e,ke){ei=me[H][N],pe.call(me,me.__data__,_e,ke)})}finally{ei=X,Zl=fe}}else Ge(this,function(me){var _e=me[H][N];(_e.event||(_e.event=m.dispatch("start","end","interrupt"))).on(pe,O)});return this},ea.transition=function(){for(var pe,O,N,H=this.id,X=++Ys,fe=this.namespace,me=[],_e=0,ke=this.length;_e<ke;_e++){me.push(pe=[]);for(var Oe,Xe=0,nt=(Oe=this[_e]).length;Xe<nt;Xe++)(O=Oe[Xe])&&hs(O,Xe,fe,X,{time:(N=O[fe][H]).time,ease:N.ease,delay:N.delay+N.duration,duration:N.duration}),pe.push(O)}return Za(me,fe,X)},m.svg.axis=function(){var pe,O=m.scale.linear(),N=ku,H=6,X=6,fe=3,me=[10],_e=null;function ke(Oe){Oe.each(function(){var Xe,nt=m.select(this),dt=this.__chart__||O,Dt=this.__chart__=O.copy(),Ft=null==_e?Dt.ticks?Dt.ticks.apply(Dt,me):Dt.domain():_e,It=null==pe?Dt.tickFormat?Dt.tickFormat.apply(Dt,me):I:pe,Pt=nt.selectAll(".tick").data(Ft,Dt),Et=Pt.enter().insert("g",".domain").attr("class","tick").style("opacity",Ot),Zt=m.transition(Pt.exit()).style("opacity",Ot).remove(),qt=m.transition(Pt.order()).style("opacity",1),$t=Math.max(H,0)+fe,yn=Er(Dt),kn=nt.selectAll(".domain").data([0]),Vn=(kn.enter().append("path").attr("class","domain"),m.transition(kn));Et.append("line"),Et.append("text");var Gn,Tr,_r,Or,Sr=Et.select("line"),hi=qt.select("line"),vi=Pt.select("text").text(It),Oi=Et.select("text"),cr=qt.select("text"),Hr="top"===N||"left"===N?-1:1;if("bottom"===N||"top"===N?(Xe=su,Gn="x",_r="y",Tr="x2",Or="y2",vi.attr("dy",Hr<0?"0em":".71em").style("text-anchor","middle"),Vn.attr("d","M"+yn[0]+","+Hr*X+"V0H"+yn[1]+"V"+Hr*X)):(Xe=hc,Gn="y",_r="x",Tr="y2",Or="x2",vi.attr("dy",".32em").style("text-anchor",Hr<0?"end":"start"),Vn.attr("d","M"+Hr*X+","+yn[0]+"H0V"+yn[1]+"H"+Hr*X)),Sr.attr(Or,Hr*H),Oi.attr(_r,Hr*$t),hi.attr(Tr,0).attr(Or,Hr*H),cr.attr(Gn,0).attr(_r,Hr*$t),Dt.rangeBand){var bi=Dt,mi=bi.rangeBand()/2;dt=Dt=function(wi){return bi(wi)+mi}}else dt.rangeBand?dt=Dt:Zt.call(Xe,Dt,dt);Et.call(Xe,dt,Dt),qt.call(Xe,Dt,Dt)})}return ke.scale=function(Oe){return arguments.length?(O=Oe,ke):O},ke.orient=function(Oe){return arguments.length?(N=Oe in Vu?Oe+"":ku,ke):N},ke.ticks=function(){return arguments.length?(me=T(arguments),ke):me},ke.tickValues=function(Oe){return arguments.length?(_e=Oe,ke):_e},ke.tickFormat=function(Oe){return arguments.length?(pe=Oe,ke):pe},ke.tickSize=function(Oe){var Xe=arguments.length;return Xe?(H=+Oe,X=+arguments[Xe-1],ke):H},ke.innerTickSize=function(Oe){return arguments.length?(H=+Oe,ke):H},ke.outerTickSize=function(Oe){return arguments.length?(X=+Oe,ke):X},ke.tickPadding=function(Oe){return arguments.length?(fe=+Oe,ke):fe},ke.tickSubdivide=function(){return arguments.length&&ke},ke};var ku="bottom",Vu={top:1,right:1,bottom:1,left:1};function su(pe,O,N){pe.attr("transform",function(H){var X=O(H);return"translate("+(isFinite(X)?X:N(H))+",0)"})}function hc(pe,O,N){pe.attr("transform",function(H){var X=O(H);return"translate(0,"+(isFinite(X)?X:N(H))+")"})}m.svg.brush=function(){var pe,O,N=se(Xe,"brushstart","brush","brushend"),H=null,X=null,fe=[0,0],me=[0,0],_e=!0,ke=!0,Oe=$o[0];function Xe(It){It.each(function(){var Pt=m.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",Ft).on("touchstart.brush",Ft),Et=Pt.selectAll(".background").data([0]);Et.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),Pt.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var Zt=Pt.selectAll(".resize").data(Oe,I);Zt.exit().remove(),Zt.enter().append("g").attr("class",function(kn){return"resize "+kn}).style("cursor",function(kn){return Nl[kn]}).append("rect").attr("x",function(kn){return/[ew]$/.test(kn)?-3:null}).attr("y",function(kn){return/^[ns]/.test(kn)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),Zt.style("display",Xe.empty()?"none":null);var qt,$t=m.transition(Pt),yn=m.transition(Et);H&&(qt=Er(H),yn.attr("x",qt[0]).attr("width",qt[1]-qt[0]),dt($t)),X&&(qt=Er(X),yn.attr("y",qt[0]).attr("height",qt[1]-qt[0]),Dt($t)),nt($t)})}function nt(It){It.selectAll(".resize").attr("transform",function(Pt){return"translate("+fe[+/e$/.test(Pt)]+","+me[+/^s/.test(Pt)]+")"})}function dt(It){It.select(".extent").attr("x",fe[0]),It.selectAll(".extent,.n>rect,.s>rect").attr("width",fe[1]-fe[0])}function Dt(It){It.select(".extent").attr("y",me[0]),It.selectAll(".extent,.e>rect,.w>rect").attr("height",me[1]-me[0])}function Ft(){var It,Pt,Et=this,Zt=m.select(m.event.target),qt=N.of(Et,arguments),$t=m.select(Et),yn=Zt.datum(),kn=!/^(n|s)$/.test(yn)&&H,Vn=!/^(e|w)$/.test(yn)&&X,Gn=Zt.classed("extent"),Tr=Ht(Et),_r=m.mouse(Et),Or=m.select(o(Et)).on("keydown.brush",vi).on("keyup.brush",Oi);if(m.event.changedTouches?Or.on("touchmove.brush",cr).on("touchend.brush",bi):Or.on("mousemove.brush",cr).on("mouseup.brush",bi),$t.interrupt().selectAll("*").interrupt(),Gn)_r[0]=fe[0]-_r[0],_r[1]=me[0]-_r[1];else if(yn){var Sr=+/w$/.test(yn),hi=+/^n/.test(yn);Pt=[fe[1-Sr]-_r[0],me[1-hi]-_r[1]],_r[0]=fe[Sr],_r[1]=me[hi]}else m.event.altKey&&(It=_r.slice());function vi(){32==m.event.keyCode&&(Gn||(It=null,_r[0]-=fe[1],_r[1]-=me[1],Gn=2),$())}function Oi(){32==m.event.keyCode&&2==Gn&&(_r[0]+=fe[1],_r[1]+=me[1],Gn=0,$())}function cr(){var mi=m.mouse(Et),wi=!1;Pt&&(mi[0]+=Pt[0],mi[1]+=Pt[1]),Gn||(m.event.altKey?(It||(It=[(fe[0]+fe[1])/2,(me[0]+me[1])/2]),_r[0]=fe[+(mi[0]<It[0])],_r[1]=me[+(mi[1]<It[1])]):It=null),kn&&Hr(mi,H,0)&&(dt($t),wi=!0),Vn&&Hr(mi,X,1)&&(Dt($t),wi=!0),wi&&(nt($t),qt({type:"brush",mode:Gn?"move":"resize"}))}function Hr(mi,wi,Fi){var ca,Ai,Zi=Er(wi),Xi=Zi[0],ya=Zi[1],ta=_r[Fi],ba=Fi?me:fe,Ra=ba[1]-ba[0];if(Gn&&(Xi-=ta,ya-=Ra+ta),ca=(Fi?ke:_e)?Math.max(Xi,Math.min(ya,mi[Fi])):mi[Fi],Gn?Ai=(ca+=ta)+Ra:(It&&(ta=Math.max(Xi,Math.min(ya,2*It[Fi]-ca))),ta<ca?(Ai=ca,ca=ta):Ai=ta),ba[0]!=ca||ba[1]!=Ai)return Fi?O=null:pe=null,ba[0]=ca,ba[1]=Ai,!0}function bi(){cr(),$t.style("pointer-events","all").selectAll(".resize").style("display",Xe.empty()?"none":null),m.select("body").style("cursor",null),Or.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),Tr(),qt({type:"brushend"})}$t.style("pointer-events","none").selectAll(".resize").style("display",null),m.select("body").style("cursor",Zt.style("cursor")),qt({type:"brushstart"}),cr()}return Xe.event=function(It){It.each(function(){var Pt=N.of(this,arguments),Et={x:fe,y:me,i:pe,j:O},Zt=this.__chart__||Et;this.__chart__=Et,Zl?m.select(this).transition().each("start.brush",function(){pe=Zt.i,O=Zt.j,fe=Zt.x,me=Zt.y,Pt({type:"brushstart"})}).tween("brush:brush",function(){var qt=oo(fe,Et.x),$t=oo(me,Et.y);return pe=O=null,function(yn){fe=Et.x=qt(yn),me=Et.y=$t(yn),Pt({type:"brush",mode:"resize"})}}).each("end.brush",function(){pe=Et.i,O=Et.j,Pt({type:"brush",mode:"resize"}),Pt({type:"brushend"})}):(Pt({type:"brushstart"}),Pt({type:"brush",mode:"resize"}),Pt({type:"brushend"}))})},Xe.x=function(It){return arguments.length?(Oe=$o[!(H=It)<<1|!X],Xe):H},Xe.y=function(It){return arguments.length?(Oe=$o[!H<<1|!(X=It)],Xe):X},Xe.clamp=function(It){return arguments.length?(H&&X?(_e=!!It[0],ke=!!It[1]):H?_e=!!It:X&&(ke=!!It),Xe):H&&X?[_e,ke]:H?_e:X?ke:null},Xe.extent=function(It){var Pt,Et,Zt,qt,$t;return arguments.length?(H&&(Pt=It[0],Et=It[1],X&&(Pt=Pt[0],Et=Et[0]),pe=[Pt,Et],H.invert&&(Pt=H(Pt),Et=H(Et)),Et<Pt&&($t=Pt,Pt=Et,Et=$t),Pt==fe[0]&&Et==fe[1]||(fe=[Pt,Et])),X&&(Zt=It[0],qt=It[1],H&&(Zt=Zt[1],qt=qt[1]),O=[Zt,qt],X.invert&&(Zt=X(Zt),qt=X(qt)),qt<Zt&&($t=Zt,Zt=qt,qt=$t),Zt==me[0]&&qt==me[1]||(me=[Zt,qt])),Xe):(H&&(pe?(Pt=pe[0],Et=pe[1]):(Pt=fe[0],Et=fe[1],H.invert&&(Pt=H.invert(Pt),Et=H.invert(Et)),Et<Pt&&($t=Pt,Pt=Et,Et=$t))),X&&(O?(Zt=O[0],qt=O[1]):(Zt=me[0],qt=me[1],X.invert&&(Zt=X.invert(Zt),qt=X.invert(qt)),qt<Zt&&($t=Zt,Zt=qt,qt=$t))),H&&X?[[Pt,Zt],[Et,qt]]:H?[Pt,Et]:X&&[Zt,qt])},Xe.clear=function(){return Xe.empty()||(fe=[0,0],me=[0,0],pe=O=null),Xe},Xe.empty=function(){return!!H&&fe[0]==fe[1]||!!X&&me[0]==me[1]},m.rebind(Xe,N,"on")};var Nl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},$o=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];function Cs(pe){return JSON.parse(pe.responseText)}function Il(pe){var O=b.createRange();return O.selectNode(b.body),O.createContextualFragment(pe.responseText)}m.text=sr(function(pe){return pe.responseText}),m.json=function(pe,O){return fr(pe,"application/json",Cs,O)},m.html=function(pe,O){return fr(pe,"text/html",Il,O)},m.xml=sr(function(pe){return pe.responseXML}),"object"==typeof oe&&oe.exports?oe.exports=m:this.d3=m}).apply(self)},{}],59:[function(_,oe,ae){"use strict";oe.exports=_("./quad")},{"./quad":60}],60:[function(_,oe,ae){"use strict";var m=_("binary-search-bounds"),x=_("clamp"),T=_("parse-rect"),b=_("array-bounds"),e=_("pick-by-alias"),o=_("defined"),a=_("flatten-vertex-data"),l=_("is-obj"),i=_("dtype"),d=_("math-log2");function u(s,c){for(var h=c[0],p=c[1],v=1/(c[2]-h),g=1/(c[3]-p),f=new Array(s.length),w=0,y=s.length/2;w<y;w++)f[2*w]=x((s[2*w]-h)*v,0,1),f[2*w+1]=x((s[2*w+1]-p)*g,0,1);return f}oe.exports=function(s,c){c||(c={}),s=a(s,"float64"),c=e(c,{bounds:"range bounds dataBox databox",maxDepth:"depth maxDepth maxdepth level maxLevel maxlevel levels",dtype:"type dtype format out dst output destination"});var h=o(c.maxDepth,255),p=o(c.bounds,b(s,2));p[0]===p[2]&&p[2]++,p[1]===p[3]&&p[3]++;var v,g=u(s,p),f=s.length>>>1;c.dtype||(c.dtype="array"),"string"==typeof c.dtype?v=new(i(c.dtype))(f):c.dtype&&(v=c.dtype,Array.isArray(v)&&(v.length=f));for(var w=0;w<f;++w)v[w]=w;var y=[],M=[],A=[],k=[];!function V(Z,Y,ee,J,$,Q){if(!J.length)return null;var se=y[$]||(y[$]=[]),j=A[$]||(A[$]=[]),G=M[$]||(M[$]=[]),W=se.length;if(++$>h||Q>1073741824){for(var ie=0;ie<J.length;ie++)se.push(J[ie]),j.push(Q),G.push(null,null,null,null);return W}if(se.push(J[0]),j.push(Q),J.length<=1)return G.push(null,null,null,null),W;for(var q=.5*ee,te=Z+q,ne=Y+q,le=[],ue=[],de=[],he=[],be=1,ge=J.length;be<ge;be++){var we=J[be],De=g[2*we+1];g[2*we]<te?De<ne?le.push(we):ue.push(we):De<ne?de.push(we):he.push(we)}return G.push(V(Z,Y,q,le,$,Q<<=2),V(Z,ne,q,ue,$,Q+1),V(te,Y,q,de,$,Q+2),V(te,ne,q,he,$,Q+3)),W}(0,0,1,v,0,1);for(var C=0,P=0;P<y.length;P++){var D=y[P];if(v.set)v.set(D,C);else for(var F=0,R=D.length;F<R;F++)v[F+C]=D[F];var L=C+y[P].length;k[P]=[C,L],C=L}return v.range=function(){for(var V,Z=[],Y=arguments.length;Y--;)Z[Y]=arguments[Y];if(l(Z[Z.length-1])){var ee=Z.pop();Z.length||null==ee.x&&null==ee.l&&null==ee.left||(Z=[ee],V={}),V=e(ee,{level:"level maxLevel",d:"d diam diameter r radius px pxSize pixel pixelSize maxD size minSize",lod:"lod details ranges offsets"})}else V={};Z.length||(Z=p);var ue,J=T.apply(void 0,Z),$=[Math.min(J.x,J.x+J.width),Math.min(J.y,J.y+J.height),Math.max(J.x,J.x+J.width),Math.max(J.y,J.y+J.height)],Q=$[0],se=$[1],j=$[2],G=$[3],W=u([Q,se,j,G],p),ie=W[0],q=W[1],te=W[2],ne=W[3],le=o(V.level,y.length);if(null!=V.d&&("number"==typeof V.d?ue=[V.d,V.d]:V.d.length&&(ue=V.d),le=Math.min(Math.max(Math.ceil(-d(Math.abs(ue[0])/(p[2]-p[0]))),Math.ceil(-d(Math.abs(ue[1])/(p[3]-p[1])))),le)),le=Math.min(le,y.length),V.lod)return I(ie,q,te,ne,le);var de=[];function he(ge,we,Ce,De,Se,Fe){if(null!==Se&&null!==Fe&&!(ie>ge+Ce||q>we+Ce||te<ge||ne<we||De>=le||Se===Fe)){var ve=y[De];void 0===Fe&&(Fe=ve.length);for(var Te=Se;Te<Fe;Te++){var Le=ve[Te],Ee=s[2*Le],Pe=s[2*Le+1];Ee>=Q&&Ee<=j&&Pe>=se&&Pe<=G&&de.push(Le)}var je=M[De],Ge=je[4*Se+0],Ke=je[4*Se+1],lt=je[4*Se+2],Ue=je[4*Se+3],$e=be(je,Se+1),et=.5*Ce,tt=De+1;he(ge,we,et,tt,Ge,Ke||lt||Ue||$e),he(ge,we+et,et,tt,Ke,lt||Ue||$e),he(ge+et,we,et,tt,lt,Ue||$e),he(ge+et,we+et,et,tt,Ue,$e)}}function be(ge,we){for(var Ce=null,De=0;null===Ce;)if(Ce=ge[4*we+De],++De>ge.length)return null;return Ce}return he(0,0,1,0,0,1),de},v;function I(V,Z,Y,ee,J){for(var $=[],Q=0;Q<J;Q++){var se=A[Q],j=k[Q][0],G=B(V,Z,Q),W=B(Y,ee,Q),ie=m.ge(se,G),q=m.gt(se,W,ie,se.length-1);$[Q]=[ie+j,q+j]}return $}function B(V,Z,Y){for(var ee=1,J=.5,$=.5,Q=.5,se=0;se<Y;se++)ee<<=2,ee+=V<J?Z<$?0:1:Z<$?2:3,Q*=.5,J+=V<J?-Q:Q,$+=Z<$?-Q:Q;return ee}}},{"array-bounds":71,"binary-search-bounds":80,clamp:86,defined:124,dtype:127,"flatten-vertex-data":191,"is-obj":235,"math-log2":240,"parse-rect":249,"pick-by-alias":253}],61:[function(_,oe,ae){"use strict";Object.defineProperty(ae,"__esModule",{value:!0});var m=_("@turf/meta");function x(e){var o=0;if(e&&e.length>0){o+=Math.abs(T(e[0]));for(var a=1;a<e.length;a++)o-=Math.abs(T(e[a]))}return o}function T(e){var o,a,l,i,d,u,s=0,c=e.length;if(c>2){for(u=0;u<c;u++)u===c-2?(l=c-2,i=c-1,d=0):u===c-1?(l=c-1,i=0,d=1):(l=u,i=u+1,d=u+2),o=e[l],a=e[i],s+=(b(e[d][0])-b(o[0]))*Math.sin(b(a[1]));s=6378137*s*6378137/2}return s}function b(e){return e*Math.PI/180}ae.default=function(e){return m.geomReduce(e,function(o,a){return o+function(l){var i,d=0;switch(l.type){case"Polygon":return x(l.coordinates);case"MultiPolygon":for(i=0;i<l.coordinates.length;i++)d+=x(l.coordinates[i]);return d;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}(a)},0)}},{"@turf/meta":63}],62:[function(_,oe,ae){"use strict";function m(c,h,p){void 0===p&&(p={});var v={type:"Feature"};return(0===p.id||p.id)&&(v.id=p.id),p.bbox&&(v.bbox=p.bbox),v.properties=h||{},v.geometry=c,v}function x(c,h,p){if(void 0===p&&(p={}),!c)throw new Error("coordinates is required");if(!Array.isArray(c))throw new Error("coordinates must be an Array");if(c.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!s(c[0])||!s(c[1]))throw new Error("coordinates must contain numbers");return m({type:"Point",coordinates:c},h,p)}function T(c,h,p){void 0===p&&(p={});for(var v=0,g=c;v<g.length;v++){var f=g[v];if(f.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var w=0;w<f[f.length-1].length;w++)if(f[f.length-1][w]!==f[0][w])throw new Error("First and last Position are not equivalent.")}return m({type:"Polygon",coordinates:c},h,p)}function b(c,h,p){if(void 0===p&&(p={}),c.length<2)throw new Error("coordinates must be an array of two or more positions");return m({type:"LineString",coordinates:c},h,p)}function e(c,h){void 0===h&&(h={});var p={type:"FeatureCollection"};return h.id&&(p.id=h.id),h.bbox&&(p.bbox=h.bbox),p.features=c,p}function o(c,h,p){return void 0===p&&(p={}),m({type:"MultiLineString",coordinates:c},h,p)}function a(c,h,p){return void 0===p&&(p={}),m({type:"MultiPoint",coordinates:c},h,p)}function l(c,h,p){return void 0===p&&(p={}),m({type:"MultiPolygon",coordinates:c},h,p)}function i(c,h){void 0===h&&(h="kilometers");var p=ae.factors[h];if(!p)throw new Error(h+" units is invalid");return c*p}function d(c,h){void 0===h&&(h="kilometers");var p=ae.factors[h];if(!p)throw new Error(h+" units is invalid");return c/p}function u(c){return c%(2*Math.PI)*180/Math.PI}function s(c){return!isNaN(c)&&null!==c&&!Array.isArray(c)}Object.defineProperty(ae,"__esModule",{value:!0}),ae.earthRadius=6371008.8,ae.factors={centimeters:100*ae.earthRadius,centimetres:100*ae.earthRadius,degrees:ae.earthRadius/111325,feet:3.28084*ae.earthRadius,inches:39.37*ae.earthRadius,kilometers:ae.earthRadius/1e3,kilometres:ae.earthRadius/1e3,meters:ae.earthRadius,metres:ae.earthRadius,miles:ae.earthRadius/1609.344,millimeters:1e3*ae.earthRadius,millimetres:1e3*ae.earthRadius,nauticalmiles:ae.earthRadius/1852,radians:1,yards:1.0936*ae.earthRadius},ae.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ae.earthRadius,yards:1.0936133},ae.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,hectares:1e-4,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},ae.feature=m,ae.geometry=function(c,h,p){switch(void 0===p&&(p={}),c){case"Point":return x(h).geometry;case"LineString":return b(h).geometry;case"Polygon":return T(h).geometry;case"MultiPoint":return a(h).geometry;case"MultiLineString":return o(h).geometry;case"MultiPolygon":return l(h).geometry;default:throw new Error(c+" is invalid")}},ae.point=x,ae.points=function(c,h,p){return void 0===p&&(p={}),e(c.map(function(v){return x(v,h)}),p)},ae.polygon=T,ae.polygons=function(c,h,p){return void 0===p&&(p={}),e(c.map(function(v){return T(v,h)}),p)},ae.lineString=b,ae.lineStrings=function(c,h,p){return void 0===p&&(p={}),e(c.map(function(v){return b(v,h)}),p)},ae.featureCollection=e,ae.multiLineString=o,ae.multiPoint=a,ae.multiPolygon=l,ae.geometryCollection=function(c,h,p){return void 0===p&&(p={}),m({type:"GeometryCollection",geometries:c},h,p)},ae.round=function(c,h){if(void 0===h&&(h=0),h&&!(h>=0))throw new Error("precision must be a positive number");var p=Math.pow(10,h||0);return Math.round(c*p)/p},ae.radiansToLength=i,ae.lengthToRadians=d,ae.lengthToDegrees=function(c,h){return u(d(c,h))},ae.bearingToAzimuth=function(c){var h=c%360;return h<0&&(h+=360),h},ae.radiansToDegrees=u,ae.degreesToRadians=function(c){return c%360*Math.PI/180},ae.convertLength=function(c,h,p){if(void 0===h&&(h="kilometers"),void 0===p&&(p="kilometers"),!(c>=0))throw new Error("length must be a positive number");return i(d(c,h),p)},ae.convertArea=function(c,h,p){if(void 0===h&&(h="meters"),void 0===p&&(p="kilometers"),!(c>=0))throw new Error("area must be a positive number");var v=ae.areaFactors[h];if(!v)throw new Error("invalid original units");var g=ae.areaFactors[p];if(!g)throw new Error("invalid final units");return c/v*g},ae.isNumber=s,ae.isObject=function(c){return!!c&&c.constructor===Object},ae.validateBBox=function(c){if(!c)throw new Error("bbox is required");if(!Array.isArray(c))throw new Error("bbox must be an Array");if(4!==c.length&&6!==c.length)throw new Error("bbox must be an Array of 4 or 6 numbers");c.forEach(function(h){if(!s(h))throw new Error("bbox must only contain numbers")})},ae.validateId=function(c){if(!c)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof c))throw new Error("id must be a number or a string")}},{}],63:[function(_,oe,ae){"use strict";Object.defineProperty(ae,"__esModule",{value:!0});var m=_("@turf/helpers");function x(i,d,u){if(null!==i)for(var s,c,h,p,v,g,f,w,y=0,M=0,A=i.type,k="FeatureCollection"===A,C="Feature"===A,P=k?i.features.length:1,D=0;D<P;D++){v=(w=!!(f=k?i.features[D].geometry:C?i.geometry:i)&&"GeometryCollection"===f.type)?f.geometries.length:1;for(var F=0;F<v;F++){var R=0,L=0;if(null!==(p=w?f.geometries[F]:f)){g=p.coordinates;var I=p.type;switch(y=!u||"Polygon"!==I&&"MultiPolygon"!==I?0:1,I){case null:break;case"Point":if(!1===d(g,M,D,R,L))return!1;M++,R++;break;case"LineString":case"MultiPoint":for(s=0;s<g.length;s++){if(!1===d(g[s],M,D,R,L))return!1;M++,"MultiPoint"===I&&R++}"LineString"===I&&R++;break;case"Polygon":case"MultiLineString":for(s=0;s<g.length;s++){for(c=0;c<g[s].length-y;c++){if(!1===d(g[s][c],M,D,R,L))return!1;M++}"MultiLineString"===I&&R++,"Polygon"===I&&L++}"Polygon"===I&&R++;break;case"MultiPolygon":for(s=0;s<g.length;s++){for(L=0,c=0;c<g[s].length;c++){for(h=0;h<g[s][c].length-y;h++){if(!1===d(g[s][c][h],M,D,R,L))return!1;M++}L++}R++}break;case"GeometryCollection":for(s=0;s<p.geometries.length;s++)if(!1===x(p.geometries[s],d,u))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function T(i,d){var u;switch(i.type){case"FeatureCollection":for(u=0;u<i.features.length&&!1!==d(i.features[u].properties,u);u++);break;case"Feature":d(i.properties,0)}}function b(i,d){if("Feature"===i.type)d(i,0);else if("FeatureCollection"===i.type)for(var u=0;u<i.features.length&&!1!==d(i.features[u],u);u++);}function e(i,d){var u,s,c,h,p,v,g,f,w,y,M=0,A="FeatureCollection"===i.type,k="Feature"===i.type,C=A?i.features.length:1;for(u=0;u<C;u++){for(f=A?i.features[u].properties:k?i.properties:{},w=A?i.features[u].bbox:k?i.bbox:void 0,y=A?i.features[u].id:k?i.id:void 0,p=(g=!!(v=A?i.features[u].geometry:k?i.geometry:i)&&"GeometryCollection"===v.type)?v.geometries.length:1,c=0;c<p;c++)if(null!==(h=g?v.geometries[c]:v))switch(h.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===d(h,M,f,w,y))return!1;break;case"GeometryCollection":for(s=0;s<h.geometries.length;s++)if(!1===d(h.geometries[s],M,f,w,y))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===d(null,M,f,w,y))return!1;M++}}function o(i,d){e(i,function(u,s,c,h,p){var v,g=null===u?null:u.type;switch(g){case null:case"Point":case"LineString":case"Polygon":return!1!==d(m.feature(u,c,{bbox:h,id:p}),s,0)&&void 0}switch(g){case"MultiPoint":v="Point";break;case"MultiLineString":v="LineString";break;case"MultiPolygon":v="Polygon"}for(var f=0;f<u.coordinates.length;f++)if(!1===d(m.feature({type:v,coordinates:u.coordinates[f]},c),s,f))return!1})}function a(i,d){o(i,function(u,s,c){var h=0;if(u.geometry){var p=u.geometry.type;if("Point"!==p&&"MultiPoint"!==p){var v,g=0,f=0,w=0;return!1!==x(u,function(y,M,A,k,C){if(void 0===v||s>g||k>f||C>w)return v=y,g=s,f=k,w=C,void(h=0);var P=m.lineString([v,y],u.properties);if(!1===d(P,s,c,C,h))return!1;h++,v=y})&&void 0}}})}function l(i,d){if(!i)throw new Error("geojson is required");o(i,function(u,s,c){if(null!==u.geometry){var p=u.geometry.coordinates;switch(u.geometry.type){case"LineString":if(!1===d(u,s,c,0,0))return!1;break;case"Polygon":for(var v=0;v<p.length;v++)if(!1===d(m.lineString(p[v],u.properties),s,c,v))return!1}}})}ae.coordEach=x,ae.coordReduce=function(i,d,u,s){var c=u;return x(i,function(h,p,v,g,f){c=0===p&&void 0===u?h:d(c,h,p,v,g,f)},s),c},ae.propEach=T,ae.propReduce=function(i,d,u){var s=u;return T(i,function(c,h){s=0===h&&void 0===u?c:d(s,c,h)}),s},ae.featureEach=b,ae.featureReduce=function(i,d,u){var s=u;return b(i,function(c,h){s=0===h&&void 0===u?c:d(s,c,h)}),s},ae.coordAll=function(i){var d=[];return x(i,function(u){d.push(u)}),d},ae.geomEach=e,ae.geomReduce=function(i,d,u){var s=u;return e(i,function(c,h,p,v,g){s=0===h&&void 0===u?c:d(s,c,h,p,v,g)}),s},ae.flattenEach=o,ae.flattenReduce=function(i,d,u){var s=u;return o(i,function(c,h,p){s=0===h&&0===p&&void 0===u?c:d(s,c,h,p)}),s},ae.segmentEach=a,ae.segmentReduce=function(i,d,u){var s=u,c=!1;return a(i,function(h,p,v,g,f){s=!1===c&&void 0===u?h:d(s,h,p,v,g,f),c=!0}),s},ae.lineEach=l,ae.lineReduce=function(i,d,u){var s=u;return l(i,function(c,h,p,v){s=0===h&&void 0===u?c:d(s,c,h,p,v)}),s},ae.findSegment=function(i,d){if(!m.isObject(d=d||{}))throw new Error("options is invalid");var u,s=d.featureIndex||0,c=d.multiFeatureIndex||0,h=d.geometryIndex||0,p=d.segmentIndex||0,v=d.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),v=v||i.features[s].properties,u=i.features[s].geometry;break;case"Feature":v=v||i.properties,u=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=i;break;default:throw new Error("geojson is invalid")}if(null===u)return null;var g=u.coordinates;switch(u.type){case"Point":case"MultiPoint":return null;case"LineString":return p<0&&(p=g.length+p-1),m.lineString([g[p],g[p+1]],v,d);case"Polygon":return h<0&&(h=g.length+h),p<0&&(p=g[h].length+p-1),m.lineString([g[h][p],g[h][p+1]],v,d);case"MultiLineString":return c<0&&(c=g.length+c),p<0&&(p=g[c].length+p-1),m.lineString([g[c][p],g[c][p+1]],v,d);case"MultiPolygon":return c<0&&(c=g.length+c),h<0&&(h=g[c].length+h),p<0&&(p=g[c][h].length-p-1),m.lineString([g[c][h][p],g[c][h][p+1]],v,d)}throw new Error("geojson is invalid")},ae.findPoint=function(i,d){if(!m.isObject(d=d||{}))throw new Error("options is invalid");var u,s=d.featureIndex||0,c=d.multiFeatureIndex||0,h=d.geometryIndex||0,p=d.coordIndex||0,v=d.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),v=v||i.features[s].properties,u=i.features[s].geometry;break;case"Feature":v=v||i.properties,u=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=i;break;default:throw new Error("geojson is invalid")}if(null===u)return null;var g=u.coordinates;switch(u.type){case"Point":return m.point(g,v,d);case"MultiPoint":return c<0&&(c=g.length+c),m.point(g[c],v,d);case"LineString":return p<0&&(p=g.length+p),m.point(g[p],v,d);case"Polygon":return h<0&&(h=g.length+h),p<0&&(p=g[h].length+p),m.point(g[h][p],v,d);case"MultiLineString":return c<0&&(c=g.length+c),p<0&&(p=g[c].length+p),m.point(g[c][p],v,d);case"MultiPolygon":return c<0&&(c=g.length+c),h<0&&(h=g[c].length+h),p<0&&(p=g[c][h].length-p),m.point(g[c][h][p],v,d)}throw new Error("geojson is invalid")}},{"@turf/helpers":62}],64:[function(_,oe,ae){"use strict";Object.defineProperty(ae,"__esModule",{value:!0});var m=_("@turf/meta");function x(T){var b=[1/0,1/0,-1/0,-1/0];return m.coordEach(T,function(e){b[0]>e[0]&&(b[0]=e[0]),b[1]>e[1]&&(b[1]=e[1]),b[2]<e[0]&&(b[2]=e[0]),b[3]<e[1]&&(b[3]=e[1])}),b}x.default=x,ae.default=x},{"@turf/meta":66}],65:[function(_,oe,ae){arguments[4][62][0].apply(ae,arguments)},{dup:62}],66:[function(_,oe,ae){arguments[4][63][0].apply(ae,arguments)},{"@turf/helpers":65,dup:63}],67:[function(_,oe,ae){"use strict";Object.defineProperty(ae,"__esModule",{value:!0});var m=_("@turf/meta"),x=_("@turf/helpers");ae.default=function(T,b){void 0===b&&(b={});var e=0,o=0,a=0;return m.coordEach(T,function(l){e+=l[0],o+=l[1],a++}),x.point([e/a,o/a],b.properties)}},{"@turf/helpers":68,"@turf/meta":69}],68:[function(_,oe,ae){"use strict";function m(c,h,p){void 0===p&&(p={});var v={type:"Feature"};return(0===p.id||p.id)&&(v.id=p.id),p.bbox&&(v.bbox=p.bbox),v.properties=h||{},v.geometry=c,v}function x(c,h,p){return void 0===p&&(p={}),m({type:"Point",coordinates:c},h,p)}function T(c,h,p){void 0===p&&(p={});for(var v=0,g=c;v<g.length;v++){var f=g[v];if(f.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");for(var w=0;w<f[f.length-1].length;w++)if(f[f.length-1][w]!==f[0][w])throw new Error("First and last Position are not equivalent.")}return m({type:"Polygon",coordinates:c},h,p)}function b(c,h,p){if(void 0===p&&(p={}),c.length<2)throw new Error("coordinates must be an array of two or more positions");return m({type:"LineString",coordinates:c},h,p)}function e(c,h){void 0===h&&(h={});var p={type:"FeatureCollection"};return h.id&&(p.id=h.id),h.bbox&&(p.bbox=h.bbox),p.features=c,p}function o(c,h,p){return void 0===p&&(p={}),m({type:"MultiLineString",coordinates:c},h,p)}function a(c,h,p){return void 0===p&&(p={}),m({type:"MultiPoint",coordinates:c},h,p)}function l(c,h,p){return void 0===p&&(p={}),m({type:"MultiPolygon",coordinates:c},h,p)}function i(c,h){void 0===h&&(h="kilometers");var p=ae.factors[h];if(!p)throw new Error(h+" units is invalid");return c*p}function d(c,h){void 0===h&&(h="kilometers");var p=ae.factors[h];if(!p)throw new Error(h+" units is invalid");return c/p}function u(c){return c%(2*Math.PI)*180/Math.PI}function s(c){return!isNaN(c)&&null!==c&&!Array.isArray(c)&&!/^\s*$/.test(c)}Object.defineProperty(ae,"__esModule",{value:!0}),ae.earthRadius=6371008.8,ae.factors={centimeters:100*ae.earthRadius,centimetres:100*ae.earthRadius,degrees:ae.earthRadius/111325,feet:3.28084*ae.earthRadius,inches:39.37*ae.earthRadius,kilometers:ae.earthRadius/1e3,kilometres:ae.earthRadius/1e3,meters:ae.earthRadius,metres:ae.earthRadius,miles:ae.earthRadius/1609.344,millimeters:1e3*ae.earthRadius,millimetres:1e3*ae.earthRadius,nauticalmiles:ae.earthRadius/1852,radians:1,yards:ae.earthRadius/1.0936},ae.unitsFactors={centimeters:100,centimetres:100,degrees:1/111325,feet:3.28084,inches:39.37,kilometers:.001,kilometres:.001,meters:1,metres:1,miles:1/1609.344,millimeters:1e3,millimetres:1e3,nauticalmiles:1/1852,radians:1/ae.earthRadius,yards:1/1.0936},ae.areaFactors={acres:247105e-9,centimeters:1e4,centimetres:1e4,feet:10.763910417,inches:1550.003100006,kilometers:1e-6,kilometres:1e-6,meters:1,metres:1,miles:386e-9,millimeters:1e6,millimetres:1e6,yards:1.195990046},ae.feature=m,ae.geometry=function(c,h,p){switch(void 0===p&&(p={}),c){case"Point":return x(h).geometry;case"LineString":return b(h).geometry;case"Polygon":return T(h).geometry;case"MultiPoint":return a(h).geometry;case"MultiLineString":return o(h).geometry;case"MultiPolygon":return l(h).geometry;default:throw new Error(c+" is invalid")}},ae.point=x,ae.points=function(c,h,p){return void 0===p&&(p={}),e(c.map(function(v){return x(v,h)}),p)},ae.polygon=T,ae.polygons=function(c,h,p){return void 0===p&&(p={}),e(c.map(function(v){return T(v,h)}),p)},ae.lineString=b,ae.lineStrings=function(c,h,p){return void 0===p&&(p={}),e(c.map(function(v){return b(v,h)}),p)},ae.featureCollection=e,ae.multiLineString=o,ae.multiPoint=a,ae.multiPolygon=l,ae.geometryCollection=function(c,h,p){return void 0===p&&(p={}),m({type:"GeometryCollection",geometries:c},h,p)},ae.round=function(c,h){if(void 0===h&&(h=0),h&&!(h>=0))throw new Error("precision must be a positive number");var p=Math.pow(10,h||0);return Math.round(c*p)/p},ae.radiansToLength=i,ae.lengthToRadians=d,ae.lengthToDegrees=function(c,h){return u(d(c,h))},ae.bearingToAzimuth=function(c){var h=c%360;return h<0&&(h+=360),h},ae.radiansToDegrees=u,ae.degreesToRadians=function(c){return c%360*Math.PI/180},ae.convertLength=function(c,h,p){if(void 0===h&&(h="kilometers"),void 0===p&&(p="kilometers"),!(c>=0))throw new Error("length must be a positive number");return i(d(c,h),p)},ae.convertArea=function(c,h,p){if(void 0===h&&(h="meters"),void 0===p&&(p="kilometers"),!(c>=0))throw new Error("area must be a positive number");var v=ae.areaFactors[h];if(!v)throw new Error("invalid original units");var g=ae.areaFactors[p];if(!g)throw new Error("invalid final units");return c/v*g},ae.isNumber=s,ae.isObject=function(c){return!!c&&c.constructor===Object},ae.validateBBox=function(c){if(!c)throw new Error("bbox is required");if(!Array.isArray(c))throw new Error("bbox must be an Array");if(4!==c.length&&6!==c.length)throw new Error("bbox must be an Array of 4 or 6 numbers");c.forEach(function(h){if(!s(h))throw new Error("bbox must only contain numbers")})},ae.validateId=function(c){if(!c)throw new Error("id is required");if(-1===["string","number"].indexOf(typeof c))throw new Error("id must be a number or a string")},ae.radians2degrees=function(){throw new Error("method has been renamed to `radiansToDegrees`")},ae.degrees2radians=function(){throw new Error("method has been renamed to `degreesToRadians`")},ae.distanceToDegrees=function(){throw new Error("method has been renamed to `lengthToDegrees`")},ae.distanceToRadians=function(){throw new Error("method has been renamed to `lengthToRadians`")},ae.radiansToDistance=function(){throw new Error("method has been renamed to `radiansToLength`")},ae.bearingToAngle=function(){throw new Error("method has been renamed to `bearingToAzimuth`")},ae.convertDistance=function(){throw new Error("method has been renamed to `convertLength`")}},{}],69:[function(_,oe,ae){"use strict";Object.defineProperty(ae,"__esModule",{value:!0});var m=_("@turf/helpers");function x(i,d,u){if(null!==i)for(var s,c,h,p,v,g,f,w,y=0,M=0,A=i.type,k="FeatureCollection"===A,C="Feature"===A,P=k?i.features.length:1,D=0;D<P;D++){v=(w=!!(f=k?i.features[D].geometry:C?i.geometry:i)&&"GeometryCollection"===f.type)?f.geometries.length:1;for(var F=0;F<v;F++){var R=0,L=0;if(null!==(p=w?f.geometries[F]:f)){g=p.coordinates;var I=p.type;switch(y=!u||"Polygon"!==I&&"MultiPolygon"!==I?0:1,I){case null:break;case"Point":if(!1===d(g,M,D,R,L))return!1;M++,R++;break;case"LineString":case"MultiPoint":for(s=0;s<g.length;s++){if(!1===d(g[s],M,D,R,L))return!1;M++,"MultiPoint"===I&&R++}"LineString"===I&&R++;break;case"Polygon":case"MultiLineString":for(s=0;s<g.length;s++){for(c=0;c<g[s].length-y;c++){if(!1===d(g[s][c],M,D,R,L))return!1;M++}"MultiLineString"===I&&R++,"Polygon"===I&&L++}"Polygon"===I&&R++;break;case"MultiPolygon":for(s=0;s<g.length;s++){for(L=0,c=0;c<g[s].length;c++){for(h=0;h<g[s][c].length-y;h++){if(!1===d(g[s][c][h],M,D,R,L))return!1;M++}L++}R++}break;case"GeometryCollection":for(s=0;s<p.geometries.length;s++)if(!1===x(p.geometries[s],d,u))return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function T(i,d){var u;switch(i.type){case"FeatureCollection":for(u=0;u<i.features.length&&!1!==d(i.features[u].properties,u);u++);break;case"Feature":d(i.properties,0)}}function b(i,d){if("Feature"===i.type)d(i,0);else if("FeatureCollection"===i.type)for(var u=0;u<i.features.length&&!1!==d(i.features[u],u);u++);}function e(i,d){var u,s,c,h,p,v,g,f,w,y,M=0,A="FeatureCollection"===i.type,k="Feature"===i.type,C=A?i.features.length:1;for(u=0;u<C;u++){for(f=A?i.features[u].properties:k?i.properties:{},w=A?i.features[u].bbox:k?i.bbox:void 0,y=A?i.features[u].id:k?i.id:void 0,p=(g=!!(v=A?i.features[u].geometry:k?i.geometry:i)&&"GeometryCollection"===v.type)?v.geometries.length:1,c=0;c<p;c++)if(null!==(h=g?v.geometries[c]:v))switch(h.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":if(!1===d(h,M,f,w,y))return!1;break;case"GeometryCollection":for(s=0;s<h.geometries.length;s++)if(!1===d(h.geometries[s],M,f,w,y))return!1;break;default:throw new Error("Unknown Geometry Type")}else if(!1===d(null,M,f,w,y))return!1;M++}}function o(i,d){e(i,function(u,s,c,h,p){var v,g=null===u?null:u.type;switch(g){case null:case"Point":case"LineString":case"Polygon":return!1!==d(m.feature(u,c,{bbox:h,id:p}),s,0)&&void 0}switch(g){case"MultiPoint":v="Point";break;case"MultiLineString":v="LineString";break;case"MultiPolygon":v="Polygon"}for(var f=0;f<u.coordinates.length;f++)if(!1===d(m.feature({type:v,coordinates:u.coordinates[f]},c),s,f))return!1})}function a(i,d){o(i,function(u,s,c){var h=0;if(u.geometry){var p=u.geometry.type;if("Point"!==p&&"MultiPoint"!==p){var v,g=0,f=0,w=0;return!1!==x(u,function(y,M,A,k,C){if(void 0===v||s>g||k>f||C>w)return v=y,g=s,f=k,w=C,void(h=0);var P=m.lineString([v,y],u.properties);if(!1===d(P,s,c,C,h))return!1;h++,v=y})&&void 0}}})}function l(i,d){if(!i)throw new Error("geojson is required");o(i,function(u,s,c){if(null!==u.geometry){var p=u.geometry.coordinates;switch(u.geometry.type){case"LineString":if(!1===d(u,s,c,0,0))return!1;break;case"Polygon":for(var v=0;v<p.length;v++)if(!1===d(m.lineString(p[v],u.properties),s,c,v))return!1}}})}ae.coordEach=x,ae.coordReduce=function(i,d,u,s){var c=u;return x(i,function(h,p,v,g,f){c=0===p&&void 0===u?h:d(c,h,p,v,g,f)},s),c},ae.propEach=T,ae.propReduce=function(i,d,u){var s=u;return T(i,function(c,h){s=0===h&&void 0===u?c:d(s,c,h)}),s},ae.featureEach=b,ae.featureReduce=function(i,d,u){var s=u;return b(i,function(c,h){s=0===h&&void 0===u?c:d(s,c,h)}),s},ae.coordAll=function(i){var d=[];return x(i,function(u){d.push(u)}),d},ae.geomEach=e,ae.geomReduce=function(i,d,u){var s=u;return e(i,function(c,h,p,v,g){s=0===h&&void 0===u?c:d(s,c,h,p,v,g)}),s},ae.flattenEach=o,ae.flattenReduce=function(i,d,u){var s=u;return o(i,function(c,h,p){s=0===h&&0===p&&void 0===u?c:d(s,c,h,p)}),s},ae.segmentEach=a,ae.segmentReduce=function(i,d,u){var s=u,c=!1;return a(i,function(h,p,v,g,f){s=!1===c&&void 0===u?h:d(s,h,p,v,g,f),c=!0}),s},ae.lineEach=l,ae.lineReduce=function(i,d,u){var s=u;return l(i,function(c,h,p,v){s=0===h&&void 0===u?c:d(s,c,h,p,v)}),s},ae.findSegment=function(i,d){if(!m.isObject(d=d||{}))throw new Error("options is invalid");var u,s=d.featureIndex||0,c=d.multiFeatureIndex||0,h=d.geometryIndex||0,p=d.segmentIndex||0,v=d.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),v=v||i.features[s].properties,u=i.features[s].geometry;break;case"Feature":v=v||i.properties,u=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=i;break;default:throw new Error("geojson is invalid")}if(null===u)return null;var g=u.coordinates;switch(u.type){case"Point":case"MultiPoint":return null;case"LineString":return p<0&&(p=g.length+p-1),m.lineString([g[p],g[p+1]],v,d);case"Polygon":return h<0&&(h=g.length+h),p<0&&(p=g[h].length+p-1),m.lineString([g[h][p],g[h][p+1]],v,d);case"MultiLineString":return c<0&&(c=g.length+c),p<0&&(p=g[c].length+p-1),m.lineString([g[c][p],g[c][p+1]],v,d);case"MultiPolygon":return c<0&&(c=g.length+c),h<0&&(h=g[c].length+h),p<0&&(p=g[c][h].length-p-1),m.lineString([g[c][h][p],g[c][h][p+1]],v,d)}throw new Error("geojson is invalid")},ae.findPoint=function(i,d){if(!m.isObject(d=d||{}))throw new Error("options is invalid");var u,s=d.featureIndex||0,c=d.multiFeatureIndex||0,h=d.geometryIndex||0,p=d.coordIndex||0,v=d.properties;switch(i.type){case"FeatureCollection":s<0&&(s=i.features.length+s),v=v||i.features[s].properties,u=i.features[s].geometry;break;case"Feature":v=v||i.properties,u=i.geometry;break;case"Point":case"MultiPoint":return null;case"LineString":case"Polygon":case"MultiLineString":case"MultiPolygon":u=i;break;default:throw new Error("geojson is invalid")}if(null===u)return null;var g=u.coordinates;switch(u.type){case"Point":return m.point(g,v,d);case"MultiPoint":return c<0&&(c=g.length+c),m.point(g[c],v,d);case"LineString":return p<0&&(p=g.length+p),m.point(g[p],v,d);case"Polygon":return h<0&&(h=g.length+h),p<0&&(p=g[h].length+p),m.point(g[h][p],v,d);case"MultiLineString":return c<0&&(c=g.length+c),p<0&&(p=g[c].length+p),m.point(g[c][p],v,d);case"MultiPolygon":return c<0&&(c=g.length+c),h<0&&(h=g[c].length+h),p<0&&(p=g[c][h].length-p),m.point(g[c][h][p],v,d)}throw new Error("geojson is invalid")}},{"@turf/helpers":68}],70:[function(_,oe,ae){oe.exports=function(m){var x=0,T=0,b=0,e=0;return m.map(function(o){var a=(o=o.slice())[0],l=a.toUpperCase();if(a!=l)switch(o[0]=l,a){case"a":o[6]+=b,o[7]+=e;break;case"v":o[1]+=e;break;case"h":o[1]+=b;break;default:for(var i=1;i<o.length;)o[i++]+=b,o[i++]+=e}switch(l){case"Z":b=x,e=T;break;case"H":b=o[1];break;case"V":e=o[1];break;case"M":b=x=o[1],e=T=o[2];break;default:b=o[o.length-2],e=o[o.length-1]}return o})}},{}],71:[function(_,oe,ae){"use strict";oe.exports=function(m,x){if(!m||null==m.length)throw Error("Argument should be an array");x=null==x?1:Math.floor(x);for(var T=Array(2*x),b=0;b<x;b++){for(var e=-1/0,o=1/0,a=b,l=m.length;a<l;a+=x)m[a]>e&&(e=m[a]),m[a]<o&&(o=m[a]);T[b]=o,T[x+b]=e}return T}},{}],72:[function(_,oe,ae){"use strict";oe.exports=function(m,x,T){if("function"==typeof Array.prototype.findIndex)return m.findIndex(x,T);if("function"!=typeof x)throw new TypeError("predicate must be a function");var b=Object(m),e=b.length;if(0===e)return-1;for(var o=0;o<e;o++)if(x.call(T,b[o],o,b))return o;return-1}},{}],73:[function(_,oe,ae){"use strict";var m=_("array-bounds");oe.exports=function(x,T,b){if(!x||null==x.length)throw Error("Argument should be an array");null==T&&(T=1),null==b&&(b=m(x,T));for(var e=0;e<T;e++){var o=b[T+e],a=b[e],l=e,i=x.length;if(o===1/0&&a===-1/0)for(l=e;l<i;l+=T)x[l]=x[l]===o?1:x[l]===a?0:.5;else if(o===1/0)for(l=e;l<i;l+=T)x[l]=x[l]===o?1:0;else if(a===-1/0)for(l=e;l<i;l+=T)x[l]=x[l]===a?0:1;else{var d=o-a;for(l=e;l<i;l+=T)isNaN(x[l])||(x[l]=0===d?.5:(x[l]-a)/d)}}return x}},{"array-bounds":71}],74:[function(_,oe,ae){oe.exports=function(m,x){var T="number"==typeof m,b="number"==typeof x;T&&!b?(x=m,m=0):T||b||(m=0,x=0);var e=(x|=0)-(m|=0);if(e<0)throw new Error("array length must be positive");for(var o=new Array(e),a=0,l=m;a<e;a++,l++)o[a]=l;return o}},{}],75:[function(_,oe,ae){(function(m){(function(){"use strict";var x=_("object-assign");function T(k,C){if(k===C)return 0;for(var P=k.length,D=C.length,F=0,R=Math.min(P,D);F<R;++F)if(k[F]!==C[F]){P=k[F],D=C[F];break}return P<D?-1:D<P?1:0}function b(k){return m.Buffer&&"function"==typeof m.Buffer.isBuffer?m.Buffer.isBuffer(k):!(null==k||!k._isBuffer)}var e=_("util/"),o=Object.prototype.hasOwnProperty,a=Array.prototype.slice,l="foo"===function(){}.name;function i(k){return Object.prototype.toString.call(k)}function d(k){return!b(k)&&"function"==typeof m.ArrayBuffer&&("function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(k):!!k&&(k instanceof DataView||!!(k.buffer&&k.buffer instanceof ArrayBuffer)))}var u=oe.exports=g,s=/\s*function\s+([^\(\s]*)\s*/;function c(k){if(e.isFunction(k)){if(l)return k.name;var C=k.toString().match(s);return C&&C[1]}}function h(k,C){return"string"==typeof k?k.length<C?k:k.slice(0,C):k}function p(k){if(l||!e.isFunction(k))return e.inspect(k);var C=c(k);return"[Function"+(C?": "+C:"")+"]"}function v(k,C,P,D,F){throw new u.AssertionError({message:P,actual:k,expected:C,operator:D,stackStartFunction:F})}function g(k,C){k||v(k,!0,C,"==",u.ok)}function f(k,C,P,D){if(k===C)return!0;if(b(k)&&b(C))return 0===T(k,C);if(e.isDate(k)&&e.isDate(C))return k.getTime()===C.getTime();if(e.isRegExp(k)&&e.isRegExp(C))return k.source===C.source&&k.global===C.global&&k.multiline===C.multiline&&k.lastIndex===C.lastIndex&&k.ignoreCase===C.ignoreCase;if(null!==k&&"object"==typeof k||null!==C&&"object"==typeof C){if(d(k)&&d(C)&&i(k)===i(C)&&!(k instanceof Float32Array||k instanceof Float64Array))return 0===T(new Uint8Array(k.buffer),new Uint8Array(C.buffer));if(b(k)!==b(C))return!1;var F=(D=D||{actual:[],expected:[]}).actual.indexOf(k);return-1!==F&&F===D.expected.indexOf(C)||(D.actual.push(k),D.expected.push(C),function(R,L,I,B){if(null==R||null==L)return!1;if(e.isPrimitive(R)||e.isPrimitive(L))return R===L;if(I&&Object.getPrototypeOf(R)!==Object.getPrototypeOf(L))return!1;var V=w(R),Z=w(L);if(V&&!Z||!V&&Z)return!1;if(V)return f(R=a.call(R),L=a.call(L),I);var Y,ee,J=A(R),$=A(L);if(J.length!==$.length)return!1;for(J.sort(),$.sort(),ee=J.length-1;ee>=0;ee--)if(J[ee]!==$[ee])return!1;for(ee=J.length-1;ee>=0;ee--)if(!f(R[Y=J[ee]],L[Y],I,B))return!1;return!0}(k,C,P,D))}return P?k===C:k==C}function w(k){return"[object Arguments]"==Object.prototype.toString.call(k)}function y(k,C){if(!k||!C)return!1;if("[object RegExp]"==Object.prototype.toString.call(C))return C.test(k);try{if(k instanceof C)return!0}catch(P){}return!Error.isPrototypeOf(C)&&!0===C.call({},k)}function M(k,C,P,D){var F;if("function"!=typeof C)throw new TypeError('"block" argument must be a function');"string"==typeof P&&(D=P,P=null),F=function(I){var B;try{I()}catch(V){B=V}return B}(C),D=(P&&P.name?" ("+P.name+").":".")+(D?" "+D:"."),k&&!F&&v(F,P,"Missing expected exception"+D);var R="string"==typeof D,L=!k&&F&&!P;if((!k&&e.isError(F)&&R&&y(F,P)||L)&&v(F,P,"Got unwanted exception"+D),k&&F&&P&&!y(F,P)||!k&&F)throw F}u.AssertionError=function(k){this.name="AssertionError",this.actual=k.actual,this.expected=k.expected,this.operator=k.operator,k.message?(this.message=k.message,this.generatedMessage=!1):(this.message=h(p(this.actual),128)+" "+this.operator+" "+h(p(this.expected),128),this.generatedMessage=!0);var C=k.stackStartFunction||v;if(Error.captureStackTrace)Error.captureStackTrace(this,C);else{var P=new Error;if(P.stack){var D=P.stack,F=c(C),R=D.indexOf("\n"+F);if(R>=0){var L=D.indexOf("\n",R+1);D=D.substring(L+1)}this.stack=D}}},e.inherits(u.AssertionError,Error),u.fail=v,u.ok=g,u.equal=function(k,C,P){k!=C&&v(k,C,P,"==",u.equal)},u.notEqual=function(k,C,P){k==C&&v(k,C,P,"!=",u.notEqual)},u.deepEqual=function(k,C,P){f(k,C,!1)||v(k,C,P,"deepEqual",u.deepEqual)},u.deepStrictEqual=function(k,C,P){f(k,C,!0)||v(k,C,P,"deepStrictEqual",u.deepStrictEqual)},u.notDeepEqual=function(k,C,P){f(k,C,!1)&&v(k,C,P,"notDeepEqual",u.notDeepEqual)},u.notDeepStrictEqual=function k(C,P,D){f(C,P,!0)&&v(C,P,D,"notDeepStrictEqual",k)},u.strictEqual=function(k,C,P){k!==C&&v(k,C,P,"===",u.strictEqual)},u.notStrictEqual=function(k,C,P){k===C&&v(k,C,P,"!==",u.notStrictEqual)},u.throws=function(k,C,P){M(!0,k,C,P)},u.doesNotThrow=function(k,C,P){M(!1,k,C,P)},u.ifError=function(k){if(k)throw k},u.strict=x(function k(C,P){C||v(C,!0,P,"==",k)},u,{equal:u.strictEqual,deepEqual:u.deepStrictEqual,notEqual:u.notStrictEqual,notDeepEqual:u.notDeepStrictEqual}),u.strict.strict=u.strict;var A=Object.keys||function(k){var C=[];for(var P in k)o.call(k,P)&&C.push(P);return C}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"object-assign":247,"util/":78}],76:[function(_,oe,ae){oe.exports="function"==typeof Object.create?function(m,x){m.super_=x,m.prototype=Object.create(x.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}})}:function(m,x){m.super_=x;var T=function(){};T.prototype=x.prototype,m.prototype=new T,m.prototype.constructor=m}},{}],77:[function(_,oe,ae){oe.exports=function(m){return m&&"object"==typeof m&&"function"==typeof m.copy&&"function"==typeof m.fill&&"function"==typeof m.readUInt8}},{}],78:[function(_,oe,ae){(function(m,x){(function(){var T=/%[sdj%]/g;ae.format=function(R){if(!v(R)){for(var L=[],I=0;I<arguments.length;I++)L.push(o(arguments[I]));return L.join(" ")}I=1;for(var B=arguments,V=B.length,Z=String(R).replace(T,function(ee){if("%%"===ee)return"%";if(I>=V)return ee;switch(ee){case"%s":return String(B[I++]);case"%d":return Number(B[I++]);case"%j":try{return JSON.stringify(B[I++])}catch(J){return"[Circular]"}default:return ee}}),Y=B[I];I<V;Y=B[++I])h(Y)||!w(Y)?Z+=" "+Y:Z+=" "+o(Y);return Z},ae.deprecate=function(R,L){if(g(x.process))return function(){return ae.deprecate(R,L).apply(this,arguments)};if(!0===m.noDeprecation)return R;var I=!1;return function(){if(!I){if(m.throwDeprecation)throw new Error(L);m.traceDeprecation?console.trace(L):console.error(L),I=!0}return R.apply(this,arguments)}};var b,e={};function o(R,L){var I={seen:[],stylize:l};return arguments.length>=3&&(I.depth=arguments[2]),arguments.length>=4&&(I.colors=arguments[3]),c(L)?I.showHidden=L:L&&ae._extend(I,L),g(I.showHidden)&&(I.showHidden=!1),g(I.depth)&&(I.depth=2),g(I.colors)&&(I.colors=!1),g(I.customInspect)&&(I.customInspect=!0),I.colors&&(I.stylize=a),i(I,R,I.depth)}function a(R,L){var I=o.styles[L];return I?"\x1b["+o.colors[I][0]+"m"+R+"\x1b["+o.colors[I][1]+"m":R}function l(R,L){return R}function i(R,L,I){if(R.customInspect&&L&&A(L.inspect)&&L.inspect!==ae.inspect&&(!L.constructor||L.constructor.prototype!==L)){var B=L.inspect(I,R);return v(B)||(B=i(R,B,I)),B}var V=function(j,G){if(g(G))return j.stylize("undefined","undefined");if(v(G)){var W="'"+JSON.stringify(G).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return j.stylize(W,"string")}return p(G)?j.stylize(""+G,"number"):c(G)?j.stylize(""+G,"boolean"):h(G)?j.stylize("null","null"):void 0}(R,L);if(V)return V;var G,Z=Object.keys(L),Y=(G={},Z.forEach(function(W,ie){G[W]=!0}),G);if(R.showHidden&&(Z=Object.getOwnPropertyNames(L)),M(L)&&(Z.indexOf("message")>=0||Z.indexOf("description")>=0))return d(L);if(0===Z.length){if(A(L))return R.stylize("[Function"+(L.name?": "+L.name:"")+"]","special");if(f(L))return R.stylize(RegExp.prototype.toString.call(L),"regexp");if(y(L))return R.stylize(Date.prototype.toString.call(L),"date");if(M(L))return d(L)}var J,$="",Q=!1,se=["{","}"];return s(L)&&(Q=!0,se=["[","]"]),A(L)&&($=" [Function"+(L.name?": "+L.name:"")+"]"),f(L)&&($=" "+RegExp.prototype.toString.call(L)),y(L)&&($=" "+Date.prototype.toUTCString.call(L)),M(L)&&($=" "+d(L)),0!==Z.length||Q&&0!=L.length?I<0?f(L)?R.stylize(RegExp.prototype.toString.call(L),"regexp"):R.stylize("[Object]","special"):(R.seen.push(L),J=Q?function(j,G,W,ie,q){for(var te=[],ne=0,le=G.length;ne<le;++ne)F(G,String(ne))?te.push(u(j,G,W,ie,String(ne),!0)):te.push("");return q.forEach(function(ue){ue.match(/^\d+$/)||te.push(u(j,G,W,ie,ue,!0))}),te}(R,L,I,Y,Z):Z.map(function(j){return u(R,L,I,Y,j,Q)}),R.seen.pop(),function(j,G,W){return j.reduce(function(ie,q){return q.indexOf("\n"),ie+q.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?W[0]+(""===G?"":G+"\n ")+" "+j.join(",\n  ")+" "+W[1]:W[0]+G+" "+j.join(", ")+" "+W[1]}(J,$,se)):se[0]+$+se[1]}function d(R){return"["+Error.prototype.toString.call(R)+"]"}function u(R,L,I,B,V,Z){var Y,ee,J;if((J=Object.getOwnPropertyDescriptor(L,V)||{value:L[V]}).get?ee=R.stylize(J.set?"[Getter/Setter]":"[Getter]","special"):J.set&&(ee=R.stylize("[Setter]","special")),F(B,V)||(Y="["+V+"]"),ee||(R.seen.indexOf(J.value)<0?(ee=h(I)?i(R,J.value,null):i(R,J.value,I-1)).indexOf("\n")>-1&&(ee=Z?ee.split("\n").map(function($){return"  "+$}).join("\n").substr(2):"\n"+ee.split("\n").map(function($){return"   "+$}).join("\n")):ee=R.stylize("[Circular]","special")),g(Y)){if(Z&&V.match(/^\d+$/))return ee;(Y=JSON.stringify(""+V)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(Y=Y.substr(1,Y.length-2),Y=R.stylize(Y,"name")):(Y=Y.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),Y=R.stylize(Y,"string"))}return Y+": "+ee}function s(R){return Array.isArray(R)}function c(R){return"boolean"==typeof R}function h(R){return null===R}function p(R){return"number"==typeof R}function v(R){return"string"==typeof R}function g(R){return void 0===R}function f(R){return w(R)&&"[object RegExp]"===k(R)}function w(R){return"object"==typeof R&&null!==R}function y(R){return w(R)&&"[object Date]"===k(R)}function M(R){return w(R)&&("[object Error]"===k(R)||R instanceof Error)}function A(R){return"function"==typeof R}function k(R){return Object.prototype.toString.call(R)}function C(R){return R<10?"0"+R.toString(10):R.toString(10)}ae.debuglog=function(R){if(g(b)&&(b=m.env.NODE_DEBUG||""),R=R.toUpperCase(),!e[R])if(new RegExp("\\b"+R+"\\b","i").test(b)){var L=m.pid;e[R]=function(){var I=ae.format.apply(ae,arguments);console.error("%s %d: %s",R,L,I)}}else e[R]=function(){};return e[R]},ae.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},ae.isArray=s,ae.isBoolean=c,ae.isNull=h,ae.isNullOrUndefined=function(R){return null==R},ae.isNumber=p,ae.isString=v,ae.isSymbol=function(R){return"symbol"==typeof R},ae.isUndefined=g,ae.isRegExp=f,ae.isObject=w,ae.isDate=y,ae.isError=M,ae.isFunction=A,ae.isPrimitive=function(R){return null===R||"boolean"==typeof R||"number"==typeof R||"string"==typeof R||"symbol"==typeof R||void 0===R},ae.isBuffer=_("./support/isBuffer");var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function D(){var R=new Date,L=[C(R.getHours()),C(R.getMinutes()),C(R.getSeconds())].join(":");return[R.getDate(),P[R.getMonth()],L].join(" ")}function F(R,L){return Object.prototype.hasOwnProperty.call(R,L)}ae.log=function(){console.log("%s - %s",D(),ae.format.apply(ae,arguments))},ae.inherits=_("inherits"),ae._extend=function(R,L){if(!L||!w(L))return R;for(var I=Object.keys(L),B=I.length;B--;)R[I[B]]=L[I[B]];return R}}).call(this)}).call(this,_("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":77,_process:277,inherits:76}],79:[function(_,oe,ae){"use strict";ae.byteLength=function(i){var d=a(i),s=d[1];return 3*(d[0]+s)/4-s},ae.toByteArray=function(i){var d,u,y,s=a(i),c=s[0],h=s[1],p=new T(3*(c+(y=h))/4-y),v=0,g=h>0?c-4:c;for(u=0;u<g;u+=4)d=x[i.charCodeAt(u)]<<18|x[i.charCodeAt(u+1)]<<12|x[i.charCodeAt(u+2)]<<6|x[i.charCodeAt(u+3)],p[v++]=d>>16&255,p[v++]=d>>8&255,p[v++]=255&d;return 2===h&&(d=x[i.charCodeAt(u)]<<2|x[i.charCodeAt(u+1)]>>4,p[v++]=255&d),1===h&&(d=x[i.charCodeAt(u)]<<10|x[i.charCodeAt(u+1)]<<4|x[i.charCodeAt(u+2)]>>2,p[v++]=d>>8&255,p[v++]=255&d),p},ae.fromByteArray=function(i){for(var d,u=i.length,s=u%3,c=[],h=0,p=u-s;h<p;h+=16383)c.push(l(i,h,h+16383>p?p:h+16383));return 1===s?c.push(m[(d=i[u-1])>>2]+m[d<<4&63]+"=="):2===s&&c.push(m[(d=(i[u-2]<<8)+i[u-1])>>10]+m[d>>4&63]+m[d<<2&63]+"="),c.join("")};for(var m=[],x=[],T="undefined"!=typeof Uint8Array?Uint8Array:Array,b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,o=b.length;e<o;++e)m[e]=b[e],x[b.charCodeAt(e)]=e;function a(i){var d=i.length;if(d%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=i.indexOf("=");return-1===u&&(u=d),[u,u===d?0:4-u%4]}function l(i,d,u){for(var c,h=[],p=d;p<u;p+=3)h.push(m[(c=(i[p]<<16&16711680)+(i[p+1]<<8&65280)+(255&i[p+2]))>>18&63]+m[c>>12&63]+m[c>>6&63]+m[63&c]);return h.join("")}x["-".charCodeAt(0)]=62,x["_".charCodeAt(0)]=63},{}],80:[function(_,oe,ae){"use strict";function m(a,l,i,d,u){for(var s=u+1;d<=u;){var c=d+u>>>1,h=a[c];(void 0!==i?i(h,l):h-l)>=0?(s=c,u=c-1):d=c+1}return s}function x(a,l,i,d,u){for(var s=u+1;d<=u;){var c=d+u>>>1,h=a[c];(void 0!==i?i(h,l):h-l)>0?(s=c,u=c-1):d=c+1}return s}function T(a,l,i,d,u){for(var s=d-1;d<=u;){var c=d+u>>>1,h=a[c];(void 0!==i?i(h,l):h-l)<0?(s=c,d=c+1):u=c-1}return s}function b(a,l,i,d,u){for(var s=d-1;d<=u;){var c=d+u>>>1,h=a[c];(void 0!==i?i(h,l):h-l)<=0?(s=c,d=c+1):u=c-1}return s}function e(a,l,i,d,u){for(;d<=u;){var s=d+u>>>1,c=a[s],h=void 0!==i?i(c,l):c-l;if(0===h)return s;h<=0?d=s+1:u=s-1}return-1}function o(a,l,i,d,u,s){return"function"==typeof i?s(a,l,i,void 0===d?0:0|d,void 0===u?a.length-1:0|u):s(a,l,void 0,void 0===i?0:0|i,void 0===d?a.length-1:0|d)}oe.exports={ge:function(a,l,i,d,u){return o(a,l,i,d,u,m)},gt:function(a,l,i,d,u){return o(a,l,i,d,u,x)},lt:function(a,l,i,d,u){return o(a,l,i,d,u,T)},le:function(a,l,i,d,u){return o(a,l,i,d,u,b)},eq:function(a,l,i,d,u){return o(a,l,i,d,u,e)}}},{}],81:[function(_,oe,ae){"use strict";function m(T){var b=32;return(T&=-T)&&b--,65535&T&&(b-=16),16711935&T&&(b-=8),252645135&T&&(b-=4),858993459&T&&(b-=2),1431655765&T&&(b-=1),b}ae.INT_BITS=32,ae.INT_MAX=2147483647,ae.INT_MIN=-1<<31,ae.sign=function(T){return(T>0)-(T<0)},ae.abs=function(T){var b=T>>31;return(T^b)-b},ae.min=function(T,b){return b^(T^b)&-(T<b)},ae.max=function(T,b){return T^(T^b)&-(T<b)},ae.isPow2=function(T){return!(T&T-1||!T)},ae.log2=function(T){var b,e;return b=(T>65535)<<4,b|=e=((T>>>=b)>255)<<3,b|=e=((T>>>=e)>15)<<2,(b|=e=((T>>>=e)>3)<<1)|(T>>>=e)>>1},ae.log10=function(T){return T>=1e9?9:T>=1e8?8:T>=1e7?7:T>=1e6?6:T>=1e5?5:T>=1e4?4:T>=1e3?3:T>=100?2:T>=10?1:0},ae.popCount=function(T){return 16843009*((T=(858993459&(T-=T>>>1&1431655765))+(T>>>2&858993459))+(T>>>4)&252645135)>>>24},ae.countTrailingZeros=m,ae.nextPow2=function(T){return T+=0===T,--T,T|=T>>>1,T|=T>>>2,T|=T>>>4,1+((T|=T>>>8)|T>>>16)},ae.prevPow2=function(T){return T|=T>>>1,T|=T>>>2,T|=T>>>4,T|=T>>>8,(T|=T>>>16)-(T>>>1)},ae.parity=function(T){return T^=T>>>16,T^=T>>>8,T^=T>>>4,27030>>>(T&=15)&1};var x=new Array(256);(function(T){for(var b=0;b<256;++b){var e=b,o=b,a=7;for(e>>>=1;e;e>>>=1)o<<=1,o|=1&e,--a;T[b]=o<<a&255}})(x),ae.reverse=function(T){return x[255&T]<<24|x[T>>>8&255]<<16|x[T>>>16&255]<<8|x[T>>>24&255]},ae.interleave2=function(T,b){return(T=1431655765&((T=858993459&((T=252645135&((T=16711935&((T&=65535)|T<<8))|T<<4))|T<<2))|T<<1))|(b=1431655765&((b=858993459&((b=252645135&((b=16711935&((b&=65535)|b<<8))|b<<4))|b<<2))|b<<1))<<1},ae.deinterleave2=function(T,b){return(T=65535&((T=16711935&((T=252645135&((T=858993459&((T=T>>>b&1431655765)|T>>>1))|T>>>2))|T>>>4))|T>>>16))<<16>>16},ae.interleave3=function(T,b,e){return T=1227133513&((T=3272356035&((T=251719695&((T=4278190335&((T&=1023)|T<<16))|T<<8))|T<<4))|T<<2),(T|=(b=1227133513&((b=3272356035&((b=251719695&((b=4278190335&((b&=1023)|b<<16))|b<<8))|b<<4))|b<<2))<<1)|(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<2},ae.deinterleave3=function(T,b){return(T=1023&((T=4278190335&((T=251719695&((T=3272356035&((T=T>>>b&1227133513)|T>>>2))|T>>>4))|T>>>8))|T>>>16))<<22>>22},ae.nextCombination=function(T){var b=T|T-1;return b+1|(~b&-~b)-1>>>m(T)+1}},{}],82:[function(_,oe,ae){"use strict";var m=_("clamp");oe.exports=function(e,o){o||(o={});var a,l,i,d,u,s,h,v,g,f=null==o.cutoff?.25:o.cutoff,w=null==o.radius?8:o.radius,y=o.channel||0;if(ArrayBuffer.isView(e)||Array.isArray(e)){if(!o.width||!o.height)throw Error("For raw data width and height should be provided by options");a=o.width,l=o.height,d=e,s=o.stride?o.stride:Math.floor(e.length/a/l)}else window.HTMLCanvasElement&&e instanceof window.HTMLCanvasElement?(d=(h=e).getContext("2d").getImageData(0,0,a=h.width,l=h.height).data,s=4):window.CanvasRenderingContext2D&&e instanceof window.CanvasRenderingContext2D?(d=e.getImageData(0,0,a=(h=e.canvas).width,l=h.height).data,s=4):window.ImageData&&e instanceof window.ImageData&&(a=e.width,l=e.height,d=e.data,s=4);if(i=Math.max(a,l),window.Uint8ClampedArray&&d instanceof window.Uint8ClampedArray||window.Uint8Array&&d instanceof window.Uint8Array)for(u=d,d=Array(a*l),v=0,g=u.length;v<g;v++)d[v]=u[v*s+y]/255;else if(1!==s)throw Error("Raw data can have only 1 value per pixel");var M=Array(a*l),A=Array(a*l),k=Array(i),C=Array(i),P=Array(i+1),D=Array(i);for(v=0,g=a*l;v<g;v++){var F=d[v];M[v]=1===F?0:0===F?x:Math.pow(Math.max(0,.5-F),2),A[v]=1===F?x:0===F?0:Math.pow(Math.max(0,F-.5),2)}T(M,a,l,k,C,D,P),T(A,a,l,k,C,D,P);var R=window.Float32Array?new Float32Array(a*l):new Array(a*l);for(v=0,g=a*l;v<g;v++)R[v]=m(1-((M[v]-A[v])/w+f),0,1);return R};var x=1e20;function T(e,o,a,l,i,d,u){for(var s=0;s<o;s++){for(var c=0;c<a;c++)l[c]=e[c*o+s];for(b(l,i,d,u,a),c=0;c<a;c++)e[c*o+s]=i[c]}for(c=0;c<a;c++){for(s=0;s<o;s++)l[s]=e[c*o+s];for(b(l,i,d,u,o),s=0;s<o;s++)e[c*o+s]=Math.sqrt(i[s])}}function b(e,o,a,l,i){a[0]=0,l[0]=-x,l[1]=+x;for(var d=1,u=0;d<i;d++){for(var s=(e[d]+d*d-(e[a[u]]+a[u]*a[u]))/(2*d-2*a[u]);s<=l[u];)u--,s=(e[d]+d*d-(e[a[u]]+a[u]*a[u]))/(2*d-2*a[u]);a[++u]=d,l[u]=s,l[u+1]=+x}for(d=0,u=0;d<i;d++){for(;l[u+1]<d;)u++;o[d]=(d-a[u])*(d-a[u])+e[a[u]]}}},{clamp:86}],83:[function(_,oe,ae){},{}],84:[function(_,oe,ae){"use strict";var m,x="object"==typeof Reflect?Reflect:null,T=x&&"function"==typeof x.apply?x.apply:function(p,v,g){return Function.prototype.apply.call(p,v,g)};m=x&&"function"==typeof x.ownKeys?x.ownKeys:Object.getOwnPropertySymbols?function(p){return Object.getOwnPropertyNames(p).concat(Object.getOwnPropertySymbols(p))}:function(p){return Object.getOwnPropertyNames(p)};var b=Number.isNaN||function(p){return p!=p};function e(){e.init.call(this)}oe.exports=e,oe.exports.once=function(p,v){return new Promise(function(g,f){function w(){void 0!==y&&p.removeListener("error",y),g([].slice.call(arguments))}var y;"error"!==v&&(y=function(M){p.removeListener(v,w),f(M)},p.once("error",y)),p.once(v,w)})},e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var o=10;function a(p){if("function"!=typeof p)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof p)}function l(p){return void 0===p._maxListeners?e.defaultMaxListeners:p._maxListeners}function i(p,v,g,f){var w,y,M;if(a(g),void 0===(y=p._events)?(y=p._events=Object.create(null),p._eventsCount=0):(void 0!==y.newListener&&(p.emit("newListener",v,g.listener?g.listener:g),y=p._events),M=y[v]),void 0===M)M=y[v]=g,++p._eventsCount;else if("function"==typeof M?M=y[v]=f?[g,M]:[M,g]:f?M.unshift(g):M.push(g),(w=l(p))>0&&M.length>w&&!M.warned){M.warned=!0;var k=new Error("Possible EventEmitter memory leak detected. "+M.length+" "+String(v)+" listeners added. Use emitter.setMaxListeners() to increase limit");k.name="MaxListenersExceededWarning",k.emitter=p,k.type=v,k.count=M.length,console&&console.warn&&console.warn(k)}return p}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(p,v,g){var f={fired:!1,wrapFn:void 0,target:p,type:v,listener:g},w=d.bind(f);return w.listener=g,f.wrapFn=w,w}function s(p,v,g){var f=p._events;if(void 0===f)return[];var w=f[v];return void 0===w?[]:"function"==typeof w?g?[w.listener||w]:[w]:g?function(y){for(var M=new Array(y.length),A=0;A<M.length;++A)M[A]=y[A].listener||y[A];return M}(w):h(w,w.length)}function c(p){var v=this._events;if(void 0!==v){var g=v[p];if("function"==typeof g)return 1;if(void 0!==g)return g.length}return 0}function h(p,v){for(var g=new Array(v),f=0;f<v;++f)g[f]=p[f];return g}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return o},set:function(p){if("number"!=typeof p||p<0||b(p))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+p+".");o=p}}),e.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(p){if("number"!=typeof p||p<0||b(p))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+p+".");return this._maxListeners=p,this},e.prototype.getMaxListeners=function(){return l(this)},e.prototype.emit=function(p){for(var v=[],g=1;g<arguments.length;g++)v.push(arguments[g]);var f="error"===p,w=this._events;if(void 0!==w)f=f&&void 0===w.error;else if(!f)return!1;if(f){var y;if(v.length>0&&(y=v[0]),y instanceof Error)throw y;var M=new Error("Unhandled error."+(y?" ("+y.message+")":""));throw M.context=y,M}var A=w[p];if(void 0===A)return!1;if("function"==typeof A)T(A,this,v);else{var k=A.length,C=h(A,k);for(g=0;g<k;++g)T(C[g],this,v)}return!0},e.prototype.on=e.prototype.addListener=function(p,v){return i(this,p,v,!1)},e.prototype.prependListener=function(p,v){return i(this,p,v,!0)},e.prototype.once=function(p,v){return a(v),this.on(p,u(this,p,v)),this},e.prototype.prependOnceListener=function(p,v){return a(v),this.prependListener(p,u(this,p,v)),this},e.prototype.off=e.prototype.removeListener=function(p,v){var g,f,w,y,M;if(a(v),void 0===(f=this._events))return this;if(void 0===(g=f[p]))return this;if(g===v||g.listener===v)0==--this._eventsCount?this._events=Object.create(null):(delete f[p],f.removeListener&&this.emit("removeListener",p,g.listener||v));else if("function"!=typeof g){for(w=-1,y=g.length-1;y>=0;y--)if(g[y]===v||g[y].listener===v){M=g[y].listener,w=y;break}if(w<0)return this;0===w?g.shift():function(A,k){for(;k+1<A.length;k++)A[k]=A[k+1];A.pop()}(g,w),1===g.length&&(f[p]=g[0]),void 0!==f.removeListener&&this.emit("removeListener",p,M||v)}return this},e.prototype.removeAllListeners=function(p){var v,g,f;if(void 0===(g=this._events))return this;if(void 0===g.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==g[p]&&(0==--this._eventsCount?this._events=Object.create(null):delete g[p]),this;if(0===arguments.length){var w,y=Object.keys(g);for(f=0;f<y.length;++f)"removeListener"!==(w=y[f])&&this.removeAllListeners(w);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(v=g[p]))this.removeListener(p,v);else if(void 0!==v)for(f=v.length-1;f>=0;f--)this.removeListener(p,v[f]);return this},e.prototype.listeners=function(p){return s(this,p,!0)},e.prototype.rawListeners=function(p){return s(this,p,!1)},e.listenerCount=function(p,v){return"function"==typeof p.listenerCount?p.listenerCount(v):c.call(p,v)},e.prototype.listenerCount=c,e.prototype.eventNames=function(){return this._eventsCount>0?m(this._events):[]}},{}],85:[function(_,oe,ae){(function(m){(function(){"use strict";var x=_("base64-js"),T=_("ieee754");function b(j){if(j>2147483647)throw new RangeError('The value "'+j+'" is invalid for option "size"');var G=new Uint8Array(j);return G.__proto__=e.prototype,G}function e(j,G,W){if("number"==typeof j){if("string"==typeof G)throw new TypeError('The "string" argument must be of type string. Received type number');return l(j)}return o(j,G,W)}function o(j,G,W){if("string"==typeof j)return function(te,ne){if("string"==typeof ne&&""!==ne||(ne="utf8"),!e.isEncoding(ne))throw new TypeError("Unknown encoding: "+ne);var le=0|u(te,ne),ue=b(le),de=ue.write(te,ne);return de!==le&&(ue=ue.slice(0,de)),ue}(j,G);if(ArrayBuffer.isView(j))return i(j);if(null==j)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j);if(Q(j,ArrayBuffer)||j&&Q(j.buffer,ArrayBuffer))return function(te,ne,le){if(ne<0||te.byteLength<ne)throw new RangeError('"offset" is outside of buffer bounds');if(te.byteLength<ne+(le||0))throw new RangeError('"length" is outside of buffer bounds');var ue;return(ue=void 0===ne&&void 0===le?new Uint8Array(te):void 0===le?new Uint8Array(te,ne):new Uint8Array(te,ne,le)).__proto__=e.prototype,ue}(j,G,W);if("number"==typeof j)throw new TypeError('The "value" argument must not be of type number. Received type number');var ie=j.valueOf&&j.valueOf();if(null!=ie&&ie!==j)return e.from(ie,G,W);var q=function(te){if(e.isBuffer(te)){var ne=0|d(te.length),le=b(ne);return 0===le.length||te.copy(le,0,0,ne),le}return void 0!==te.length?"number"!=typeof te.length||se(te.length)?b(0):i(te):"Buffer"===te.type&&Array.isArray(te.data)?i(te.data):void 0}(j);if(q)return q;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof j[Symbol.toPrimitive])return e.from(j[Symbol.toPrimitive]("string"),G,W);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof j)}function a(j){if("number"!=typeof j)throw new TypeError('"size" argument must be of type number');if(j<0)throw new RangeError('The value "'+j+'" is invalid for option "size"')}function l(j){return a(j),b(j<0?0:0|d(j))}function i(j){for(var G=j.length<0?0:0|d(j.length),W=b(G),ie=0;ie<G;ie+=1)W[ie]=255&j[ie];return W}function d(j){if(j>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|j}function u(j,G){if(e.isBuffer(j))return j.length;if(ArrayBuffer.isView(j)||Q(j,ArrayBuffer))return j.byteLength;if("string"!=typeof j)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof j);var W=j.length,ie=arguments.length>2&&!0===arguments[2];if(!ie&&0===W)return 0;for(var q=!1;;)switch(G){case"ascii":case"latin1":case"binary":return W;case"utf8":case"utf-8":return ee(j).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*W;case"hex":return W>>>1;case"base64":return J(j).length;default:if(q)return ie?-1:ee(j).length;G=(""+G).toLowerCase(),q=!0}}function s(j,G,W){var ie=!1;if((void 0===G||G<0)&&(G=0),G>this.length||((void 0===W||W>this.length)&&(W=this.length),W<=0)||(W>>>=0)<=(G>>>=0))return"";for(j||(j="utf8");;)switch(j){case"hex":return D(this,G,W);case"utf8":case"utf-8":return k(this,G,W);case"ascii":return C(this,G,W);case"latin1":case"binary":return P(this,G,W);case"base64":return A(this,G,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return F(this,G,W);default:if(ie)throw new TypeError("Unknown encoding: "+j);j=(j+"").toLowerCase(),ie=!0}}function c(j,G,W){var ie=j[G];j[G]=j[W],j[W]=ie}function h(j,G,W,ie,q){if(0===j.length)return-1;if("string"==typeof W?(ie=W,W=0):W>2147483647?W=2147483647:W<-2147483648&&(W=-2147483648),se(W=+W)&&(W=q?0:j.length-1),W<0&&(W=j.length+W),W>=j.length){if(q)return-1;W=j.length-1}else if(W<0){if(!q)return-1;W=0}if("string"==typeof G&&(G=e.from(G,ie)),e.isBuffer(G))return 0===G.length?-1:p(j,G,W,ie,q);if("number"==typeof G)return G&=255,"function"==typeof Uint8Array.prototype.indexOf?q?Uint8Array.prototype.indexOf.call(j,G,W):Uint8Array.prototype.lastIndexOf.call(j,G,W):p(j,[G],W,ie,q);throw new TypeError("val must be string, number or Buffer")}function p(j,G,W,ie,q){var te,ne=1,le=j.length,ue=G.length;if(void 0!==ie&&("ucs2"===(ie=String(ie).toLowerCase())||"ucs-2"===ie||"utf16le"===ie||"utf-16le"===ie)){if(j.length<2||G.length<2)return-1;ne=2,le/=2,ue/=2,W/=2}function de(we,Ce){return 1===ne?we[Ce]:we.readUInt16BE(Ce*ne)}if(q){var he=-1;for(te=W;te<le;te++)if(de(j,te)===de(G,-1===he?0:te-he)){if(-1===he&&(he=te),te-he+1===ue)return he*ne}else-1!==he&&(te-=te-he),he=-1}else for(W+ue>le&&(W=le-ue),te=W;te>=0;te--){for(var be=!0,ge=0;ge<ue;ge++)if(de(j,te+ge)!==de(G,ge)){be=!1;break}if(be)return te}return-1}function v(j,G,W,ie){W=Number(W)||0;var q=j.length-W;ie?(ie=Number(ie))>q&&(ie=q):ie=q;var te=G.length;ie>te/2&&(ie=te/2);for(var ne=0;ne<ie;++ne){var le=parseInt(G.substr(2*ne,2),16);if(se(le))return ne;j[W+ne]=le}return ne}function g(j,G,W,ie){return $(ee(G,j.length-W),j,W,ie)}function f(j,G,W,ie){return $(function(q){for(var te=[],ne=0;ne<q.length;++ne)te.push(255&q.charCodeAt(ne));return te}(G),j,W,ie)}function w(j,G,W,ie){return f(j,G,W,ie)}function y(j,G,W,ie){return $(J(G),j,W,ie)}function M(j,G,W,ie){return $(function(q,te){for(var ne,le,de=[],he=0;he<q.length&&!((te-=2)<0);++he)le=(ne=q.charCodeAt(he))>>8,de.push(ne%256),de.push(le);return de}(G,j.length-W),j,W,ie)}function A(j,G,W){return x.fromByteArray(0===G&&W===j.length?j:j.slice(G,W))}function k(j,G,W){W=Math.min(j.length,W);for(var ie=[],q=G;q<W;){var te,ne,le,ue,de=j[q],he=null,be=de>239?4:de>223?3:de>191?2:1;if(q+be<=W)switch(be){case 1:de<128&&(he=de);break;case 2:128==(192&(te=j[q+1]))&&(ue=(31&de)<<6|63&te)>127&&(he=ue);break;case 3:ne=j[q+2],128==(192&(te=j[q+1]))&&128==(192&ne)&&(ue=(15&de)<<12|(63&te)<<6|63&ne)>2047&&(ue<55296||ue>57343)&&(he=ue);break;case 4:ne=j[q+2],le=j[q+3],128==(192&(te=j[q+1]))&&128==(192&ne)&&128==(192&le)&&(ue=(15&de)<<18|(63&te)<<12|(63&ne)<<6|63&le)>65535&&ue<1114112&&(he=ue)}null===he?(he=65533,be=1):he>65535&&(ie.push((he-=65536)>>>10&1023|55296),he=56320|1023&he),ie.push(he),q+=be}return function(ge){var we=ge.length;if(we<=4096)return String.fromCharCode.apply(String,ge);for(var Ce="",De=0;De<we;)Ce+=String.fromCharCode.apply(String,ge.slice(De,De+=4096));return Ce}(ie)}function C(j,G,W){var ie="";W=Math.min(j.length,W);for(var q=G;q<W;++q)ie+=String.fromCharCode(127&j[q]);return ie}function P(j,G,W){var ie="";W=Math.min(j.length,W);for(var q=G;q<W;++q)ie+=String.fromCharCode(j[q]);return ie}function D(j,G,W){var ie=j.length;(!G||G<0)&&(G=0),(!W||W<0||W>ie)&&(W=ie);for(var q="",te=G;te<W;++te)q+=Y(j[te]);return q}function F(j,G,W){for(var ie=j.slice(G,W),q="",te=0;te<ie.length;te+=2)q+=String.fromCharCode(ie[te]+256*ie[te+1]);return q}function R(j,G,W){if(j%1!=0||j<0)throw new RangeError("offset is not uint");if(j+G>W)throw new RangeError("Trying to access beyond buffer length")}function L(j,G,W,ie,q,te){if(!e.isBuffer(j))throw new TypeError('"buffer" argument must be a Buffer instance');if(G>q||G<te)throw new RangeError('"value" argument is out of bounds');if(W+ie>j.length)throw new RangeError("Index out of range")}function I(j,G,W,ie,q,te){if(W+ie>j.length)throw new RangeError("Index out of range");if(W<0)throw new RangeError("Index out of range")}function B(j,G,W,ie,q){return G=+G,W>>>=0,q||I(j,0,W,4),T.write(j,G,W,ie,23,4),W+4}function V(j,G,W,ie,q){return G=+G,W>>>=0,q||I(j,0,W,8),T.write(j,G,W,ie,52,8),W+8}ae.Buffer=e,ae.SlowBuffer=function(j){return+j!=j&&(j=0),e.alloc(+j)},ae.INSPECT_MAX_BYTES=50,ae.kMaxLength=2147483647,(e.TYPED_ARRAY_SUPPORT=function(){try{var j=new Uint8Array(1);return j.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===j.foo()}catch(G){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(e.prototype,"parent",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.buffer}}),Object.defineProperty(e.prototype,"offset",{enumerable:!0,get:function(){if(e.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&e[Symbol.species]===e&&Object.defineProperty(e,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),e.poolSize=8192,e.from=function(j,G,W){return o(j,G,W)},e.prototype.__proto__=Uint8Array.prototype,e.__proto__=Uint8Array,e.alloc=function(j,G,W){return q=G,te=W,a(ie=j),ie<=0?b(ie):void 0!==q?"string"==typeof te?b(ie).fill(q,te):b(ie).fill(q):b(ie);var ie,q,te},e.allocUnsafe=function(j){return l(j)},e.allocUnsafeSlow=function(j){return l(j)},e.isBuffer=function(j){return null!=j&&!0===j._isBuffer&&j!==e.prototype},e.compare=function(j,G){if(Q(j,Uint8Array)&&(j=e.from(j,j.offset,j.byteLength)),Q(G,Uint8Array)&&(G=e.from(G,G.offset,G.byteLength)),!e.isBuffer(j)||!e.isBuffer(G))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(j===G)return 0;for(var W=j.length,ie=G.length,q=0,te=Math.min(W,ie);q<te;++q)if(j[q]!==G[q]){W=j[q],ie=G[q];break}return W<ie?-1:ie<W?1:0},e.isEncoding=function(j){switch(String(j).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},e.concat=function(j,G){if(!Array.isArray(j))throw new TypeError('"list" argument must be an Array of Buffers');if(0===j.length)return e.alloc(0);var W;if(void 0===G)for(G=0,W=0;W<j.length;++W)G+=j[W].length;var ie=e.allocUnsafe(G),q=0;for(W=0;W<j.length;++W){var te=j[W];if(Q(te,Uint8Array)&&(te=e.from(te)),!e.isBuffer(te))throw new TypeError('"list" argument must be an Array of Buffers');te.copy(ie,q),q+=te.length}return ie},e.byteLength=u,e.prototype._isBuffer=!0,e.prototype.swap16=function(){var j=this.length;if(j%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var G=0;G<j;G+=2)c(this,G,G+1);return this},e.prototype.swap32=function(){var j=this.length;if(j%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var G=0;G<j;G+=4)c(this,G,G+3),c(this,G+1,G+2);return this},e.prototype.swap64=function(){var j=this.length;if(j%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var G=0;G<j;G+=8)c(this,G,G+7),c(this,G+1,G+6),c(this,G+2,G+5),c(this,G+3,G+4);return this},e.prototype.toLocaleString=e.prototype.toString=function(){var j=this.length;return 0===j?"":0===arguments.length?k(this,0,j):s.apply(this,arguments)},e.prototype.equals=function(j){if(!e.isBuffer(j))throw new TypeError("Argument must be a Buffer");return this===j||0===e.compare(this,j)},e.prototype.inspect=function(){var j="",G=ae.INSPECT_MAX_BYTES;return j=this.toString("hex",0,G).replace(/(.{2})/g,"$1 ").trim(),this.length>G&&(j+=" ... "),"<Buffer "+j+">"},e.prototype.compare=function(j,G,W,ie,q){if(Q(j,Uint8Array)&&(j=e.from(j,j.offset,j.byteLength)),!e.isBuffer(j))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof j);if(void 0===G&&(G=0),void 0===W&&(W=j?j.length:0),void 0===ie&&(ie=0),void 0===q&&(q=this.length),G<0||W>j.length||ie<0||q>this.length)throw new RangeError("out of range index");if(ie>=q&&G>=W)return 0;if(ie>=q)return-1;if(G>=W)return 1;if(this===j)return 0;for(var te=(q>>>=0)-(ie>>>=0),ne=(W>>>=0)-(G>>>=0),le=Math.min(te,ne),ue=this.slice(ie,q),de=j.slice(G,W),he=0;he<le;++he)if(ue[he]!==de[he]){te=ue[he],ne=de[he];break}return te<ne?-1:ne<te?1:0},e.prototype.includes=function(j,G,W){return-1!==this.indexOf(j,G,W)},e.prototype.indexOf=function(j,G,W){return h(this,j,G,W,!0)},e.prototype.lastIndexOf=function(j,G,W){return h(this,j,G,W,!1)},e.prototype.write=function(j,G,W,ie){if(void 0===G)ie="utf8",W=this.length,G=0;else if(void 0===W&&"string"==typeof G)ie=G,W=this.length,G=0;else{if(!isFinite(G))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");G>>>=0,isFinite(W)?(W>>>=0,void 0===ie&&(ie="utf8")):(ie=W,W=void 0)}var q=this.length-G;if((void 0===W||W>q)&&(W=q),j.length>0&&(W<0||G<0)||G>this.length)throw new RangeError("Attempt to write outside buffer bounds");ie||(ie="utf8");for(var te=!1;;)switch(ie){case"hex":return v(this,j,G,W);case"utf8":case"utf-8":return g(this,j,G,W);case"ascii":return f(this,j,G,W);case"latin1":case"binary":return w(this,j,G,W);case"base64":return y(this,j,G,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,j,G,W);default:if(te)throw new TypeError("Unknown encoding: "+ie);ie=(""+ie).toLowerCase(),te=!0}},e.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},e.prototype.slice=function(j,G){var W=this.length;(j=~~j)<0?(j+=W)<0&&(j=0):j>W&&(j=W),(G=void 0===G?W:~~G)<0?(G+=W)<0&&(G=0):G>W&&(G=W),G<j&&(G=j);var ie=this.subarray(j,G);return ie.__proto__=e.prototype,ie},e.prototype.readUIntLE=function(j,G,W){j>>>=0,G>>>=0,W||R(j,G,this.length);for(var ie=this[j],q=1,te=0;++te<G&&(q*=256);)ie+=this[j+te]*q;return ie},e.prototype.readUIntBE=function(j,G,W){j>>>=0,G>>>=0,W||R(j,G,this.length);for(var ie=this[j+--G],q=1;G>0&&(q*=256);)ie+=this[j+--G]*q;return ie},e.prototype.readUInt8=function(j,G){return j>>>=0,G||R(j,1,this.length),this[j]},e.prototype.readUInt16LE=function(j,G){return j>>>=0,G||R(j,2,this.length),this[j]|this[j+1]<<8},e.prototype.readUInt16BE=function(j,G){return j>>>=0,G||R(j,2,this.length),this[j]<<8|this[j+1]},e.prototype.readUInt32LE=function(j,G){return j>>>=0,G||R(j,4,this.length),(this[j]|this[j+1]<<8|this[j+2]<<16)+16777216*this[j+3]},e.prototype.readUInt32BE=function(j,G){return j>>>=0,G||R(j,4,this.length),16777216*this[j]+(this[j+1]<<16|this[j+2]<<8|this[j+3])},e.prototype.readIntLE=function(j,G,W){j>>>=0,G>>>=0,W||R(j,G,this.length);for(var ie=this[j],q=1,te=0;++te<G&&(q*=256);)ie+=this[j+te]*q;return ie>=(q*=128)&&(ie-=Math.pow(2,8*G)),ie},e.prototype.readIntBE=function(j,G,W){j>>>=0,G>>>=0,W||R(j,G,this.length);for(var ie=G,q=1,te=this[j+--ie];ie>0&&(q*=256);)te+=this[j+--ie]*q;return te>=(q*=128)&&(te-=Math.pow(2,8*G)),te},e.prototype.readInt8=function(j,G){return j>>>=0,G||R(j,1,this.length),128&this[j]?-1*(255-this[j]+1):this[j]},e.prototype.readInt16LE=function(j,G){j>>>=0,G||R(j,2,this.length);var W=this[j]|this[j+1]<<8;return 32768&W?4294901760|W:W},e.prototype.readInt16BE=function(j,G){j>>>=0,G||R(j,2,this.length);var W=this[j+1]|this[j]<<8;return 32768&W?4294901760|W:W},e.prototype.readInt32LE=function(j,G){return j>>>=0,G||R(j,4,this.length),this[j]|this[j+1]<<8|this[j+2]<<16|this[j+3]<<24},e.prototype.readInt32BE=function(j,G){return j>>>=0,G||R(j,4,this.length),this[j]<<24|this[j+1]<<16|this[j+2]<<8|this[j+3]},e.prototype.readFloatLE=function(j,G){return j>>>=0,G||R(j,4,this.length),T.read(this,j,!0,23,4)},e.prototype.readFloatBE=function(j,G){return j>>>=0,G||R(j,4,this.length),T.read(this,j,!1,23,4)},e.prototype.readDoubleLE=function(j,G){return j>>>=0,G||R(j,8,this.length),T.read(this,j,!0,52,8)},e.prototype.readDoubleBE=function(j,G){return j>>>=0,G||R(j,8,this.length),T.read(this,j,!1,52,8)},e.prototype.writeUIntLE=function(j,G,W,ie){j=+j,G>>>=0,W>>>=0,ie||L(this,j,G,W,Math.pow(2,8*W)-1,0);var q=1,te=0;for(this[G]=255&j;++te<W&&(q*=256);)this[G+te]=j/q&255;return G+W},e.prototype.writeUIntBE=function(j,G,W,ie){j=+j,G>>>=0,W>>>=0,ie||L(this,j,G,W,Math.pow(2,8*W)-1,0);var q=W-1,te=1;for(this[G+q]=255&j;--q>=0&&(te*=256);)this[G+q]=j/te&255;return G+W},e.prototype.writeUInt8=function(j,G,W){return j=+j,G>>>=0,W||L(this,j,G,1,255,0),this[G]=255&j,G+1},e.prototype.writeUInt16LE=function(j,G,W){return j=+j,G>>>=0,W||L(this,j,G,2,65535,0),this[G]=255&j,this[G+1]=j>>>8,G+2},e.prototype.writeUInt16BE=function(j,G,W){return j=+j,G>>>=0,W||L(this,j,G,2,65535,0),this[G]=j>>>8,this[G+1]=255&j,G+2},e.prototype.writeUInt32LE=function(j,G,W){return j=+j,G>>>=0,W||L(this,j,G,4,4294967295,0),this[G+3]=j>>>24,this[G+2]=j>>>16,this[G+1]=j>>>8,this[G]=255&j,G+4},e.prototype.writeUInt32BE=function(j,G,W){return j=+j,G>>>=0,W||L(this,j,G,4,4294967295,0),this[G]=j>>>24,this[G+1]=j>>>16,this[G+2]=j>>>8,this[G+3]=255&j,G+4},e.prototype.writeIntLE=function(j,G,W,ie){if(j=+j,G>>>=0,!ie){var q=Math.pow(2,8*W-1);L(this,j,G,W,q-1,-q)}var te=0,ne=1,le=0;for(this[G]=255&j;++te<W&&(ne*=256);)j<0&&0===le&&0!==this[G+te-1]&&(le=1),this[G+te]=(j/ne>>0)-le&255;return G+W},e.prototype.writeIntBE=function(j,G,W,ie){if(j=+j,G>>>=0,!ie){var q=Math.pow(2,8*W-1);L(this,j,G,W,q-1,-q)}var te=W-1,ne=1,le=0;for(this[G+te]=255&j;--te>=0&&(ne*=256);)j<0&&0===le&&0!==this[G+te+1]&&(le=1),this[G+te]=(j/ne>>0)-le&255;return G+W},e.prototype.writeInt8=function(j,G,W){return j=+j,G>>>=0,W||L(this,j,G,1,127,-128),j<0&&(j=255+j+1),this[G]=255&j,G+1},e.prototype.writeInt16LE=function(j,G,W){return j=+j,G>>>=0,W||L(this,j,G,2,32767,-32768),this[G]=255&j,this[G+1]=j>>>8,G+2},e.prototype.writeInt16BE=function(j,G,W){return j=+j,G>>>=0,W||L(this,j,G,2,32767,-32768),this[G]=j>>>8,this[G+1]=255&j,G+2},e.prototype.writeInt32LE=function(j,G,W){return j=+j,G>>>=0,W||L(this,j,G,4,2147483647,-2147483648),this[G]=255&j,this[G+1]=j>>>8,this[G+2]=j>>>16,this[G+3]=j>>>24,G+4},e.prototype.writeInt32BE=function(j,G,W){return j=+j,G>>>=0,W||L(this,j,G,4,2147483647,-2147483648),j<0&&(j=4294967295+j+1),this[G]=j>>>24,this[G+1]=j>>>16,this[G+2]=j>>>8,this[G+3]=255&j,G+4},e.prototype.writeFloatLE=function(j,G,W){return B(this,j,G,!0,W)},e.prototype.writeFloatBE=function(j,G,W){return B(this,j,G,!1,W)},e.prototype.writeDoubleLE=function(j,G,W){return V(this,j,G,!0,W)},e.prototype.writeDoubleBE=function(j,G,W){return V(this,j,G,!1,W)},e.prototype.copy=function(j,G,W,ie){if(!e.isBuffer(j))throw new TypeError("argument should be a Buffer");if(W||(W=0),ie||0===ie||(ie=this.length),G>=j.length&&(G=j.length),G||(G=0),ie>0&&ie<W&&(ie=W),ie===W||0===j.length||0===this.length)return 0;if(G<0)throw new RangeError("targetStart out of bounds");if(W<0||W>=this.length)throw new RangeError("Index out of range");if(ie<0)throw new RangeError("sourceEnd out of bounds");ie>this.length&&(ie=this.length),j.length-G<ie-W&&(ie=j.length-G+W);var q=ie-W;if(this===j&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(G,W,ie);else if(this===j&&W<G&&G<ie)for(var te=q-1;te>=0;--te)j[te+G]=this[te+W];else Uint8Array.prototype.set.call(j,this.subarray(W,ie),G);return q},e.prototype.fill=function(j,G,W,ie){if("string"==typeof j){if("string"==typeof G?(ie=G,G=0,W=this.length):"string"==typeof W&&(ie=W,W=this.length),void 0!==ie&&"string"!=typeof ie)throw new TypeError("encoding must be a string");if("string"==typeof ie&&!e.isEncoding(ie))throw new TypeError("Unknown encoding: "+ie);if(1===j.length){var q=j.charCodeAt(0);("utf8"===ie&&q<128||"latin1"===ie)&&(j=q)}}else"number"==typeof j&&(j&=255);if(G<0||this.length<G||this.length<W)throw new RangeError("Out of range index");if(W<=G)return this;var te;if(G>>>=0,W=void 0===W?this.length:W>>>0,j||(j=0),"number"==typeof j)for(te=G;te<W;++te)this[te]=j;else{var ne=e.isBuffer(j)?j:e.from(j,ie),le=ne.length;if(0===le)throw new TypeError('The value "'+j+'" is invalid for argument "value"');for(te=0;te<W-G;++te)this[te+G]=ne[te%le]}return this};var Z=/[^+/0-9A-Za-z-_]/g;function Y(j){return j<16?"0"+j.toString(16):j.toString(16)}function ee(j,G){var W;G=G||1/0;for(var ie=j.length,q=null,te=[],ne=0;ne<ie;++ne){if((W=j.charCodeAt(ne))>55295&&W<57344){if(!q){if(W>56319){(G-=3)>-1&&te.push(239,191,189);continue}if(ne+1===ie){(G-=3)>-1&&te.push(239,191,189);continue}q=W;continue}if(W<56320){(G-=3)>-1&&te.push(239,191,189),q=W;continue}W=65536+(q-55296<<10|W-56320)}else q&&(G-=3)>-1&&te.push(239,191,189);if(q=null,W<128){if((G-=1)<0)break;te.push(W)}else if(W<2048){if((G-=2)<0)break;te.push(W>>6|192,63&W|128)}else if(W<65536){if((G-=3)<0)break;te.push(W>>12|224,W>>6&63|128,63&W|128)}else{if(!(W<1114112))throw new Error("Invalid code point");if((G-=4)<0)break;te.push(W>>18|240,W>>12&63|128,W>>6&63|128,63&W|128)}}return te}function J(j){return x.toByteArray(function(G){if((G=(G=G.split("=")[0]).trim().replace(Z,"")).length<2)return"";for(;G.length%4!=0;)G+="=";return G}(j))}function $(j,G,W,ie){for(var q=0;q<ie&&!(q+W>=G.length||q>=j.length);++q)G[q+W]=j[q];return q}function Q(j,G){return j instanceof G||null!=j&&null!=j.constructor&&null!=j.constructor.name&&j.constructor.name===G.name}function se(j){return j!=j}}).call(this)}).call(this,_("buffer").Buffer)},{"base64-js":79,buffer:85,ieee754:230}],86:[function(_,oe,ae){oe.exports=function(m,x,T){return x<T?m<x?x:m>T?T:m:m<T?T:m>x?x:m}},{}],87:[function(_,oe,ae){"use strict";var m=_("clamp");function x(T,b){null==b&&(b=!0);var e=T[0],o=T[1],a=T[2],l=T[3];return null==l&&(l=b?1:255),b&&(e*=255,o*=255,a*=255,l*=255),16777216*(e=255&m(e,0,255))+((o=255&m(o,0,255))<<16)+((a=255&m(a,0,255))<<8)+(255&m(l,0,255))}oe.exports=x,oe.exports.to=x,oe.exports.from=function(T,b){var e=(T=+T)>>>24,o=(16711680&T)>>>16,a=(65280&T)>>>8,l=255&T;return!1===b?[e,o,a,l]:[e/255,o/255,a/255,l/255]}},{clamp:86}],88:[function(_,oe,ae){"use strict";oe.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],89:[function(_,oe,ae){"use strict";var m=_("color-rgba"),x=_("clamp"),T=_("dtype");oe.exports=function(b,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var l,o=new(T(e))(4),a="uint8"!==e&&"uint8_clamped"!==e;return b.length&&"string"!=typeof b||((b=m(b))[0]/=255,b[1]/=255,b[2]/=255),(l=b)instanceof Uint8Array||l instanceof Uint8ClampedArray||Array.isArray(l)&&(l[0]>1||0===l[0])&&(l[1]>1||0===l[1])&&(l[2]>1||0===l[2])&&(!l[3]||l[3]>1)?(o[0]=b[0],o[1]=b[1],o[2]=b[2],o[3]=null!=b[3]?b[3]:255,a&&(o[0]/=255,o[1]/=255,o[2]/=255,o[3]/=255),o):(a?(o[0]=b[0],o[1]=b[1],o[2]=b[2],o[3]=null!=b[3]?b[3]:1):(o[0]=x(Math.floor(255*b[0]),0,255),o[1]=x(Math.floor(255*b[1]),0,255),o[2]=x(Math.floor(255*b[2]),0,255),o[3]=null==b[3]?255:x(Math.floor(255*b[3]),0,255)),o)}},{clamp:86,"color-rgba":91,dtype:127}],90:[function(_,oe,ae){(function(m){(function(){"use strict";var x=_("color-name"),T=_("is-plain-obj"),b=_("defined");oe.exports=function(o){var a,l,i=[],d=1;if("string"==typeof o)if(x[o])i=x[o].slice(),l="rgb";else if("transparent"===o)d=0,l="rgb",i=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(o)){var u=(h=o.slice(1)).length;d=1,u<=4?(i=[parseInt(h[0]+h[0],16),parseInt(h[1]+h[1],16),parseInt(h[2]+h[2],16)],4===u&&(d=parseInt(h[3]+h[3],16)/255)):(i=[parseInt(h[0]+h[1],16),parseInt(h[2]+h[3],16),parseInt(h[4]+h[5],16)],8===u&&(d=parseInt(h[6]+h[7],16)/255)),i[0]||(i[0]=0),i[1]||(i[1]=0),i[2]||(i[2]=0),l="rgb"}else if(a=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(o)){var s=a[1],c="rgb"===s,h=s.replace(/a$/,"");l=h,u="cmyk"===h?4:"gray"===h?1:3,i=a[2].trim().split(/\s*,\s*/).map(function(v,g){if(/%$/.test(v))return g===u?parseFloat(v)/100:"rgb"===h?255*parseFloat(v)/100:parseFloat(v);if("h"===h[g]){if(/deg$/.test(v))return parseFloat(v);if(void 0!==e[v])return e[v]}return parseFloat(v)}),s===h&&i.push(1),d=c||void 0===i[u]?1:i[u],i=i.slice(0,u)}else o.length>10&&/[0-9](?:\s|\/)/.test(o)&&(i=o.match(/([0-9]+)/g).map(function(v){return parseFloat(v)}),l=o.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(o))if(T(o)){var p=b(o.r,o.red,o.R,null);null!==p?(l="rgb",i=[p,b(o.g,o.green,o.G),b(o.b,o.blue,o.B)]):(l="hsl",i=[b(o.h,o.hue,o.H),b(o.s,o.saturation,o.S),b(o.l,o.lightness,o.L,o.b,o.brightness)]),d=b(o.a,o.alpha,o.opacity,1),null!=o.opacity&&(d/=100)}else(Array.isArray(o)||m.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(o))&&(i=[o[0],o[1],o[2]],l="rgb",d=4===o.length?o[3]:1);else l="rgb",i=[o>>>16,(65280&o)>>>8,255&o];return{space:l,values:i,alpha:d}};var e={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"color-name":88,defined:124,"is-plain-obj":236}],91:[function(_,oe,ae){"use strict";var m=_("color-parse"),x=_("color-space/hsl"),T=_("clamp");oe.exports=function(b){var e,o=m(b);return o.space?((e=Array(3))[0]=T(o.values[0],0,255),e[1]=T(o.values[1],0,255),e[2]=T(o.values[2],0,255),"h"===o.space[0]&&(e=x.rgb(e)),e.push(T(o.alpha,0,1)),e):[]}},{clamp:86,"color-parse":90,"color-space/hsl":92}],92:[function(_,oe,ae){"use strict";var m=_("./rgb");oe.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(x){var T,b,e,o,a,l=x[0]/360,i=x[1]/100,d=x[2]/100;if(0===i)return[a=255*d,a,a];T=2*d-(b=d<.5?d*(1+i):d+i-d*i),o=[0,0,0];for(var u=0;u<3;u++)(e=l+1/3*-(u-1))<0?e++:e>1&&e--,o[u]=255*(a=6*e<1?T+6*(b-T)*e:2*e<1?b:3*e<2?T+(b-T)*(2/3-e)*6:T);return o}},m.hsl=function(x){var T,b,e=x[0]/255,o=x[1]/255,a=x[2]/255,l=Math.min(e,o,a),i=Math.max(e,o,a),d=i-l;return i===l?T=0:e===i?T=(o-a)/d:o===i?T=2+(a-e)/d:a===i&&(T=4+(e-o)/d),(T=Math.min(60*T,360))<0&&(T+=360),b=(l+i)/2,[T,100*(i===l?0:b<=.5?d/(i+l):d/(2-i-l)),100*b]}},{"./rgb":93}],93:[function(_,oe,ae){"use strict";oe.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},{}],94:[function(_,oe,ae){oe.exports={AFG:"afghan",ALA:"\\b\\wland",ALB:"albania",DZA:"algeria",ASM:"^(?=.*americ).*samoa",AND:"andorra",AGO:"angola",AIA:"anguill?a",ATA:"antarctica",ATG:"antigua",ARG:"argentin",ARM:"armenia",ABW:"^(?!.*bonaire).*\\baruba",AUS:"australia",AUT:"^(?!.*hungary).*austria|\\baustri.*\\bemp",AZE:"azerbaijan",BHS:"bahamas",BHR:"bahrain",BGD:"bangladesh|^(?=.*east).*paki?stan",BRB:"barbados",BLR:"belarus|byelo",BEL:"^(?!.*luxem).*belgium",BLZ:"belize|^(?=.*british).*honduras",BEN:"benin|dahome",BMU:"bermuda",BTN:"bhutan",BOL:"bolivia",BES:"^(?=.*bonaire).*eustatius|^(?=.*carib).*netherlands|\\bbes.?islands",BIH:"herzegovina|bosnia",BWA:"botswana|bechuana",BVT:"bouvet",BRA:"brazil",IOT:"british.?indian.?ocean",BRN:"brunei",BGR:"bulgaria",BFA:"burkina|\\bfaso|upper.?volta",BDI:"burundi",CPV:"verde",KHM:"cambodia|kampuchea|khmer",CMR:"cameroon",CAN:"canada",CYM:"cayman",CAF:"\\bcentral.african.republic",TCD:"\\bchad",CHL:"\\bchile",CHN:"^(?!.*\\bmac)(?!.*\\bhong)(?!.*\\btai)(?!.*\\brep).*china|^(?=.*peo)(?=.*rep).*china",CXR:"christmas",CCK:"\\bcocos|keeling",COL:"colombia",COM:"comoro",COG:"^(?!.*\\bdem)(?!.*\\bd[\\.]?r)(?!.*kinshasa)(?!.*zaire)(?!.*belg)(?!.*l.opoldville)(?!.*free).*\\bcongo",COK:"\\bcook",CRI:"costa.?rica",CIV:"ivoire|ivory",HRV:"croatia",CUB:"\\bcuba",CUW:"^(?!.*bonaire).*\\bcura(c|\xe7)ao",CYP:"cyprus",CSK:"czechoslovakia",CZE:"^(?=.*rep).*czech|czechia|bohemia",COD:"\\bdem.*congo|congo.*\\bdem|congo.*\\bd[\\.]?r|\\bd[\\.]?r.*congo|belgian.?congo|congo.?free.?state|kinshasa|zaire|l.opoldville|drc|droc|rdc",DNK:"denmark",DJI:"djibouti",DMA:"dominica(?!n)",DOM:"dominican.rep",ECU:"ecuador",EGY:"egypt",SLV:"el.?salvador",GNQ:"guine.*eq|eq.*guine|^(?=.*span).*guinea",ERI:"eritrea",EST:"estonia",ETH:"ethiopia|abyssinia",FLK:"falkland|malvinas",FRO:"faroe|faeroe",FJI:"fiji",FIN:"finland",FRA:"^(?!.*\\bdep)(?!.*martinique).*france|french.?republic|\\bgaul",GUF:"^(?=.*french).*guiana",PYF:"french.?polynesia|tahiti",ATF:"french.?southern",GAB:"gabon",GMB:"gambia",GEO:"^(?!.*south).*georgia",DDR:"german.?democratic.?republic|democratic.?republic.*germany|east.germany",DEU:"^(?!.*east).*germany|^(?=.*\\bfed.*\\brep).*german",GHA:"ghana|gold.?coast",GIB:"gibraltar",GRC:"greece|hellenic|hellas",GRL:"greenland",GRD:"grenada",GLP:"guadeloupe",GUM:"\\bguam",GTM:"guatemala",GGY:"guernsey",GIN:"^(?!.*eq)(?!.*span)(?!.*bissau)(?!.*portu)(?!.*new).*guinea",GNB:"bissau|^(?=.*portu).*guinea",GUY:"guyana|british.?guiana",HTI:"haiti",HMD:"heard.*mcdonald",VAT:"holy.?see|vatican|papal.?st",HND:"^(?!.*brit).*honduras",HKG:"hong.?kong",HUN:"^(?!.*austr).*hungary",ISL:"iceland",IND:"india(?!.*ocea)",IDN:"indonesia",IRN:"\\biran|persia",IRQ:"\\biraq|mesopotamia",IRL:"(^ireland)|(^republic.*ireland)",IMN:"^(?=.*isle).*\\bman",ISR:"israel",ITA:"italy",JAM:"jamaica",JPN:"japan",JEY:"jersey",JOR:"jordan",KAZ:"kazak",KEN:"kenya|british.?east.?africa|east.?africa.?prot",KIR:"kiribati",PRK:"^(?=.*democrat|people|north|d.*p.*.r).*\\bkorea|dprk|korea.*(d.*p.*r)",KWT:"kuwait",KGZ:"kyrgyz|kirghiz",LAO:"\\blaos?\\b",LVA:"latvia",LBN:"lebanon",LSO:"lesotho|basuto",LBR:"liberia",LBY:"libya",LIE:"liechtenstein",LTU:"lithuania",LUX:"^(?!.*belg).*luxem",MAC:"maca(o|u)",MDG:"madagascar|malagasy",MWI:"malawi|nyasa",MYS:"malaysia",MDV:"maldive",MLI:"\\bmali\\b",MLT:"\\bmalta",MHL:"marshall",MTQ:"martinique",MRT:"mauritania",MUS:"mauritius",MYT:"\\bmayotte",MEX:"\\bmexic",FSM:"fed.*micronesia|micronesia.*fed",MCO:"monaco",MNG:"mongolia",MNE:"^(?!.*serbia).*montenegro",MSR:"montserrat",MAR:"morocco|\\bmaroc",MOZ:"mozambique",MMR:"myanmar|burma",NAM:"namibia",NRU:"nauru",NPL:"nepal",NLD:"^(?!.*\\bant)(?!.*\\bcarib).*netherlands",ANT:"^(?=.*\\bant).*(nether|dutch)",NCL:"new.?caledonia",NZL:"new.?zealand",NIC:"nicaragua",NER:"\\bniger(?!ia)",NGA:"nigeria",NIU:"niue",NFK:"norfolk",MNP:"mariana",NOR:"norway",OMN:"\\boman|trucial",PAK:"^(?!.*east).*paki?stan",PLW:"palau",PSE:"palestin|\\bgaza|west.?bank",PAN:"panama",PNG:"papua|new.?guinea",PRY:"paraguay",PER:"peru",PHL:"philippines",PCN:"pitcairn",POL:"poland",PRT:"portugal",PRI:"puerto.?rico",QAT:"qatar",KOR:"^(?!.*d.*p.*r)(?!.*democrat)(?!.*people)(?!.*north).*\\bkorea(?!.*d.*p.*r)",MDA:"moldov|b(a|e)ssarabia",REU:"r(e|\xe9)union",ROU:"r(o|u|ou)mania",RUS:"\\brussia|soviet.?union|u\\.?s\\.?s\\.?r|socialist.?republics",RWA:"rwanda",BLM:"barth(e|\xe9)lemy",SHN:"helena",KNA:"kitts|\\bnevis",LCA:"\\blucia",MAF:"^(?=.*collectivity).*martin|^(?=.*france).*martin(?!ique)|^(?=.*french).*martin(?!ique)",SPM:"miquelon",VCT:"vincent",WSM:"^(?!.*amer).*samoa",SMR:"san.?marino",STP:"\\bs(a|\xe3)o.?tom(e|\xe9)",SAU:"\\bsa\\w*.?arabia",SEN:"senegal",SRB:"^(?!.*monte).*serbia",SYC:"seychell",SLE:"sierra",SGP:"singapore",SXM:"^(?!.*martin)(?!.*saba).*maarten",SVK:"^(?!.*cze).*slovak",SVN:"slovenia",SLB:"solomon",SOM:"somali",ZAF:"south.africa|s\\\\..?africa",SGS:"south.?georgia|sandwich",SSD:"\\bs\\w*.?sudan",ESP:"spain",LKA:"sri.?lanka|ceylon",SDN:"^(?!.*\\bs(?!u)).*sudan",SUR:"surinam|dutch.?guiana",SJM:"svalbard",SWZ:"swaziland",SWE:"sweden",CHE:"switz|swiss",SYR:"syria",TWN:"taiwan|taipei|formosa|^(?!.*peo)(?=.*rep).*china",TJK:"tajik",THA:"thailand|\\bsiam",MKD:"macedonia|fyrom",TLS:"^(?=.*leste).*timor|^(?=.*east).*timor",TGO:"togo",TKL:"tokelau",TON:"tonga",TTO:"trinidad|tobago",TUN:"tunisia",TUR:"turkey",TKM:"turkmen",TCA:"turks",TUV:"tuvalu",UGA:"uganda",UKR:"ukrain",ARE:"emirates|^u\\.?a\\.?e\\.?$|united.?arab.?em",GBR:"united.?kingdom|britain|^u\\.?k\\.?$",TZA:"tanzania",USA:"united.?states\\b(?!.*islands)|\\bu\\.?s\\.?a\\.?\\b|^\\s*u\\.?s\\.?\\b(?!.*islands)",UMI:"minor.?outlying.?is",URY:"uruguay",UZB:"uzbek",VUT:"vanuatu|new.?hebrides",VEN:"venezuela",VNM:"^(?!.*republic).*viet.?nam|^(?=.*socialist).*viet.?nam",VGB:"^(?=.*\\bu\\.?\\s?k).*virgin|^(?=.*brit).*virgin|^(?=.*kingdom).*virgin",VIR:"^(?=.*\\bu\\.?\\s?s).*virgin|^(?=.*states).*virgin",WLF:"futuna|wallis",ESH:"western.sahara",YEM:"^(?!.*arab)(?!.*north)(?!.*sana)(?!.*peo)(?!.*dem)(?!.*south)(?!.*aden)(?!.*\\bp\\.?d\\.?r).*yemen",YMD:"^(?=.*peo).*yemen|^(?!.*rep)(?=.*dem).*yemen|^(?=.*south).*yemen|^(?=.*aden).*yemen|^(?=.*\\bp\\.?d\\.?r).*yemen",YUG:"yugoslavia",ZMB:"zambia|northern.?rhodesia",EAZ:"zanzibar",ZWE:"zimbabwe|^(?!.*northern).*rhodesia"}},{}],95:[function(_,oe,ae){oe.exports=["xx-small","x-small","small","medium","large","x-large","xx-large","larger","smaller"]},{}],96:[function(_,oe,ae){oe.exports=["normal","condensed","semi-condensed","extra-condensed","ultra-condensed","expanded","semi-expanded","extra-expanded","ultra-expanded"]},{}],97:[function(_,oe,ae){oe.exports=["normal","italic","oblique"]},{}],98:[function(_,oe,ae){oe.exports=["normal","bold","bolder","lighter","100","200","300","400","500","600","700","800","900"]},{}],99:[function(_,oe,ae){"use strict";oe.exports={parse:_("./parse"),stringify:_("./stringify")}},{"./parse":101,"./stringify":102}],100:[function(_,oe,ae){"use strict";var m=_("css-font-size-keywords");oe.exports={isSize:function(x){return/^[\d\.]/.test(x)||-1!==x.indexOf("/")||-1!==m.indexOf(x)}}},{"css-font-size-keywords":95}],101:[function(_,oe,ae){"use strict";var m=_("unquote"),x=_("css-global-keywords"),T=_("css-system-font-keywords"),b=_("css-font-weight-keywords"),e=_("css-font-style-keywords"),o=_("css-font-stretch-keywords"),a=_("string-split-by"),l=_("./lib/util").isSize;oe.exports=d;var i=d.cache={};function d(s){if("string"!=typeof s)throw new Error("Font argument must be a string.");if(i[s])return i[s];if(""===s)throw new Error("Cannot parse an empty string.");if(-1!==T.indexOf(s))return i[s]={system:s};for(var c,h={style:"normal",variant:"normal",weight:"normal",stretch:"normal",lineHeight:"normal",size:"1rem",family:["serif"]},p=a(s,/\s+/);c=p.shift();){if(-1!==x.indexOf(c))return["style","variant","weight","stretch"].forEach(function(g){h[g]=c}),i[s]=h;if(-1===e.indexOf(c))if("normal"!==c&&"small-caps"!==c)if(-1===o.indexOf(c)){if(-1===b.indexOf(c)){if(l(c)){var v=a(c,"/");if(h.size=v[0],null!=v[1]?h.lineHeight=u(v[1]):"/"===p[0]&&(p.shift(),h.lineHeight=u(p.shift())),!p.length)throw new Error("Missing required font-family.");return h.family=a(p.join(" "),/\s*,\s*/).map(m),i[s]=h}throw new Error("Unknown or unsupported font token: "+c)}h.weight=c}else h.stretch=c;else h.variant=c;else h.style=c}throw new Error("Missing required font-size.")}function u(s){var c=parseFloat(s);return c.toString()===s?c:s}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"string-split-by":305,unquote:328}],102:[function(_,oe,ae){"use strict";var m=_("pick-by-alias"),x=_("./lib/util").isSize,T=c(_("css-global-keywords")),b=c(_("css-system-font-keywords")),e=c(_("css-font-weight-keywords")),o=c(_("css-font-style-keywords")),a=c(_("css-font-stretch-keywords")),l={normal:1,"small-caps":1},i={serif:1,"sans-serif":1,monospace:1,cursive:1,fantasy:1,"system-ui":1},u="serif";function s(h,p){if(h&&!p[h]&&!T[h])throw Error("Unknown keyword `"+h+"`");return h}function c(h){for(var p={},v=0;v<h.length;v++)p[h[v]]=1;return p}oe.exports=function(h){if((h=m(h,{style:"style fontstyle fontStyle font-style slope distinction",variant:"variant font-variant fontVariant fontvariant var capitalization",weight:"weight w font-weight fontWeight fontweight",stretch:"stretch font-stretch fontStretch fontstretch width",size:"size s font-size fontSize fontsize height em emSize",lineHeight:"lh line-height lineHeight lineheight leading",family:"font family fontFamily font-family fontfamily type typeface face",system:"system reserved default global"})).system)return h.system&&s(h.system,b),h.system;if(s(h.style,o),s(h.variant,l),s(h.weight,e),s(h.stretch,a),null==h.size&&(h.size="1rem"),"number"==typeof h.size&&(h.size+="px"),!x)throw Error("Bad size value `"+h.size+"`");h.family||(h.family=u),Array.isArray(h.family)&&(h.family.length||(h.family=[u]),h.family=h.family.map(function(v){return i[v]?v:'"'+v+'"'}).join(", "));var p=[];return p.push(h.style),h.variant!==h.style&&p.push(h.variant),h.weight!==h.variant&&h.weight!==h.style&&p.push(h.weight),h.stretch!==h.weight&&h.stretch!==h.variant&&h.stretch!==h.style&&p.push(h.stretch),p.push(h.size+(null==h.lineHeight||"normal"===h.lineHeight||h.lineHeight+""=="1"?"":"/"+h.lineHeight)),p.push(h.family),p.filter(Boolean).join(" ")}},{"./lib/util":100,"css-font-stretch-keywords":96,"css-font-style-keywords":97,"css-font-weight-keywords":98,"css-global-keywords":103,"css-system-font-keywords":104,"pick-by-alias":253}],103:[function(_,oe,ae){oe.exports=["inherit","initial","unset"]},{}],104:[function(_,oe,ae){oe.exports=["caption","icon","menu","message-box","small-caption","status-bar"]},{}],105:[function(_,oe,ae){"use strict";var m,x=_("type/value/is"),T=_("type/value/ensure"),b=_("type/plain-function/ensure"),e=_("es5-ext/object/copy"),o=_("es5-ext/object/normalize-options"),a=_("es5-ext/object/map"),l=Function.prototype.bind,i=Object.defineProperty,d=Object.prototype.hasOwnProperty;m=function(u,s,c){var h,p=T(s)&&b(s.value);return delete(h=e(s)).writable,delete h.value,h.get=function(){return!c.overwriteDefinition&&d.call(this,u)?p:(s.value=l.call(p,c.resolveContext?c.resolveContext(this):this),i(this,u,s),this[u])},h},oe.exports=function(u){var s=o(arguments[1]);return x(s.resolveContext)&&b(s.resolveContext),a(u,function(c,h){return m(h,c,s)})}},{"es5-ext/object/copy":147,"es5-ext/object/map":155,"es5-ext/object/normalize-options":156,"type/plain-function/ensure":321,"type/value/ensure":325,"type/value/is":326}],106:[function(_,oe,ae){"use strict";var m=_("type/value/is"),x=_("type/plain-function/is"),T=_("es5-ext/object/assign"),b=_("es5-ext/object/normalize-options"),e=_("es5-ext/string/#/contains");(oe.exports=function(o,a){var l,i,d,u,s;return arguments.length<2||"string"!=typeof o?(u=a,a=o,o=null):u=arguments[2],m(o)?(l=e.call(o,"c"),i=e.call(o,"e"),d=e.call(o,"w")):(l=d=!0,i=!1),s={value:a,configurable:l,enumerable:i,writable:d},u?T(b(u),s):s}).gs=function(o,a,l){var i,d,u,s;return"string"!=typeof o?(u=l,l=a,a=o,o=null):u=arguments[3],m(a)?x(a)?m(l)?x(l)||(u=l,l=void 0):l=void 0:(u=a,a=l=void 0):a=void 0,m(o)?(i=e.call(o,"c"),d=e.call(o,"e")):(i=!0,d=!1),s={get:a,set:l,configurable:i,enumerable:d},u?T(b(u),s):s}},{"es5-ext/object/assign":144,"es5-ext/object/normalize-options":156,"es5-ext/string/#/contains":163,"type/plain-function/is":322,"type/value/is":326}],107:[function(_,oe,ae){var x;x=function(m){"use strict";function x(R,L){return R<L?-1:R>L?1:R>=L?0:NaN}function T(R){var L;return 1===R.length&&(L=R,R=function(I,B){return x(L(I),B)}),{left:function(I,B,V,Z){for(null==V&&(V=0),null==Z&&(Z=I.length);V<Z;){var Y=V+Z>>>1;R(I[Y],B)<0?V=Y+1:Z=Y}return V},right:function(I,B,V,Z){for(null==V&&(V=0),null==Z&&(Z=I.length);V<Z;){var Y=V+Z>>>1;R(I[Y],B)>0?Z=Y:V=Y+1}return V}}}var b=T(x),e=b.right,o=b.left;function a(R,L){return[R,L]}function l(R){return null===R?NaN:+R}function i(R,L){var I,B,V=R.length,Z=0,Y=-1,ee=0,J=0;if(null==L)for(;++Y<V;)isNaN(I=l(R[Y]))||(J+=(B=I-ee)*(I-(ee+=B/++Z)));else for(;++Y<V;)isNaN(I=l(L(R[Y],Y,R)))||(J+=(B=I-ee)*(I-(ee+=B/++Z)));if(Z>1)return J/(Z-1)}function d(R,L){var I=i(R,L);return I&&Math.sqrt(I)}function u(R,L){var I,B,V,Z=R.length,Y=-1;if(null==L){for(;++Y<Z;)if(null!=(I=R[Y])&&I>=I)for(B=V=I;++Y<Z;)null!=(I=R[Y])&&(B>I&&(B=I),V<I&&(V=I))}else for(;++Y<Z;)if(null!=(I=L(R[Y],Y,R))&&I>=I)for(B=V=I;++Y<Z;)null!=(I=L(R[Y],Y,R))&&(B>I&&(B=I),V<I&&(V=I));return[B,V]}var s=Array.prototype,c=s.slice,h=s.map;function p(R){return function(){return R}}function v(R){return R}function g(R,L,I){R=+R,L=+L,I=(V=arguments.length)<2?(L=R,R=0,1):V<3?1:+I;for(var B=-1,V=0|Math.max(0,Math.ceil((L-R)/I)),Z=new Array(V);++B<V;)Z[B]=R+B*I;return Z}var f=Math.sqrt(50),w=Math.sqrt(10),y=Math.sqrt(2);function M(R,L,I){var B=(L-R)/Math.max(0,I),V=Math.floor(Math.log(B)/Math.LN10),Z=B/Math.pow(10,V);return V>=0?(Z>=f?10:Z>=w?5:Z>=y?2:1)*Math.pow(10,V):-Math.pow(10,-V)/(Z>=f?10:Z>=w?5:Z>=y?2:1)}function A(R,L,I){var B=Math.abs(L-R)/Math.max(0,I),V=Math.pow(10,Math.floor(Math.log(B)/Math.LN10)),Z=B/V;return Z>=f?V*=10:Z>=w?V*=5:Z>=y&&(V*=2),L<R?-V:V}function k(R){return Math.ceil(Math.log(R.length)/Math.LN2)+1}function C(R,L,I){if(null==I&&(I=l),B=R.length){if((L=+L)<=0||B<2)return+I(R[0],0,R);if(L>=1)return+I(R[B-1],B-1,R);var B,V=(B-1)*L,Z=Math.floor(V),Y=+I(R[Z],Z,R);return Y+(+I(R[Z+1],Z+1,R)-Y)*(V-Z)}}function P(R,L){var I,B,V=R.length,Z=-1;if(null==L){for(;++Z<V;)if(null!=(I=R[Z])&&I>=I)for(B=I;++Z<V;)null!=(I=R[Z])&&B>I&&(B=I)}else for(;++Z<V;)if(null!=(I=L(R[Z],Z,R))&&I>=I)for(B=I;++Z<V;)null!=(I=L(R[Z],Z,R))&&B>I&&(B=I);return B}function D(R){if(!(V=R.length))return[];for(var L=-1,I=P(R,F),B=new Array(I);++L<I;)for(var V,Z=-1,Y=B[L]=new Array(V);++Z<V;)Y[Z]=R[Z][L];return B}function F(R){return R.length}m.bisect=e,m.bisectRight=e,m.bisectLeft=o,m.ascending=x,m.bisector=T,m.cross=function(R,L,I){var B,V,Z,Y,ee=R.length,J=L.length,$=new Array(ee*J);for(null==I&&(I=a),B=Z=0;B<ee;++B)for(Y=R[B],V=0;V<J;++V,++Z)$[Z]=I(Y,L[V]);return $},m.descending=function(R,L){return L<R?-1:L>R?1:L>=R?0:NaN},m.deviation=d,m.extent=u,m.histogram=function(){var R=v,L=u,I=k;function B(V){var Z,Y,ee=V.length,J=new Array(ee);for(Z=0;Z<ee;++Z)J[Z]=R(V[Z],Z,V);var $=L(J),Q=$[0],se=$[1],j=I(J,Q,se);Array.isArray(j)||(j=A(Q,se,j),j=g(Math.ceil(Q/j)*j,se,j));for(var G=j.length;j[0]<=Q;)j.shift(),--G;for(;j[G-1]>se;)j.pop(),--G;var W,ie=new Array(G+1);for(Z=0;Z<=G;++Z)(W=ie[Z]=[]).x0=Z>0?j[Z-1]:Q,W.x1=Z<G?j[Z]:se;for(Z=0;Z<ee;++Z)Q<=(Y=J[Z])&&Y<=se&&ie[e(j,Y,0,G)].push(V[Z]);return ie}return B.value=function(V){return arguments.length?(R="function"==typeof V?V:p(V),B):R},B.domain=function(V){return arguments.length?(L="function"==typeof V?V:p([V[0],V[1]]),B):L},B.thresholds=function(V){return arguments.length?(I="function"==typeof V?V:Array.isArray(V)?p(c.call(V)):p(V),B):I},B},m.thresholdFreedmanDiaconis=function(R,L,I){return R=h.call(R,l).sort(x),Math.ceil((I-L)/(2*(C(R,.75)-C(R,.25))*Math.pow(R.length,-1/3)))},m.thresholdScott=function(R,L,I){return Math.ceil((I-L)/(3.5*d(R)*Math.pow(R.length,-1/3)))},m.thresholdSturges=k,m.max=function(R,L){var I,B,V=R.length,Z=-1;if(null==L){for(;++Z<V;)if(null!=(I=R[Z])&&I>=I)for(B=I;++Z<V;)null!=(I=R[Z])&&I>B&&(B=I)}else for(;++Z<V;)if(null!=(I=L(R[Z],Z,R))&&I>=I)for(B=I;++Z<V;)null!=(I=L(R[Z],Z,R))&&I>B&&(B=I);return B},m.mean=function(R,L){var I,B=R.length,V=B,Z=-1,Y=0;if(null==L)for(;++Z<B;)isNaN(I=l(R[Z]))?--V:Y+=I;else for(;++Z<B;)isNaN(I=l(L(R[Z],Z,R)))?--V:Y+=I;if(V)return Y/V},m.median=function(R,L){var I,B=R.length,V=-1,Z=[];if(null==L)for(;++V<B;)isNaN(I=l(R[V]))||Z.push(I);else for(;++V<B;)isNaN(I=l(L(R[V],V,R)))||Z.push(I);return C(Z.sort(x),.5)},m.merge=function(R){for(var L,I,B,V=R.length,Z=-1,Y=0;++Z<V;)Y+=R[Z].length;for(I=new Array(Y);--V>=0;)for(L=(B=R[V]).length;--L>=0;)I[--Y]=B[L];return I},m.min=P,m.pairs=function(R,L){null==L&&(L=a);for(var I=0,B=R.length-1,V=R[0],Z=new Array(B<0?0:B);I<B;)Z[I]=L(V,V=R[++I]);return Z},m.permute=function(R,L){for(var I=L.length,B=new Array(I);I--;)B[I]=R[L[I]];return B},m.quantile=C,m.range=g,m.scan=function(R,L){if(I=R.length){var I,B,V=0,Z=0,Y=R[Z];for(null==L&&(L=x);++V<I;)(L(B=R[V],Y)<0||0!==L(Y,Y))&&(Y=B,Z=V);return 0===L(Y,Y)?Z:void 0}},m.shuffle=function(R,L,I){for(var B,V,Z=(null==I?R.length:I)-(L=null==L?0:+L);Z;)V=Math.random()*Z--|0,B=R[Z+L],R[Z+L]=R[V+L],R[V+L]=B;return R},m.sum=function(R,L){var I,B=R.length,V=-1,Z=0;if(null==L)for(;++V<B;)(I=+R[V])&&(Z+=I);else for(;++V<B;)(I=+L(R[V],V,R))&&(Z+=I);return Z},m.ticks=function(R,L,I){var B,V,Z,Y,ee=-1;if(I=+I,(R=+R)==(L=+L)&&I>0)return[R];if((B=L<R)&&(V=R,R=L,L=V),0===(Y=M(R,L,I))||!isFinite(Y))return[];if(Y>0)for(R=Math.ceil(R/Y),L=Math.floor(L/Y),Z=new Array(V=Math.ceil(L-R+1));++ee<V;)Z[ee]=(R+ee)*Y;else for(R=Math.floor(R*Y),L=Math.ceil(L*Y),Z=new Array(V=Math.ceil(R-L+1));++ee<V;)Z[ee]=(R-ee)/Y;return B&&Z.reverse(),Z},m.tickIncrement=M,m.tickStep=A,m.transpose=D,m.variance=i,m.zip=function(){return D(arguments)},Object.defineProperty(m,"__esModule",{value:!0})},x("object"==typeof ae&&void 0!==oe?ae:this.d3=this.d3||{})},{}],108:[function(_,oe,ae){var x;x=function(m){"use strict";function x(){}function T(u,s){var c=new x;if(u instanceof x)u.each(function(f,w){c.set(w,f)});else if(Array.isArray(u)){var h,p=-1,v=u.length;if(null==s)for(;++p<v;)c.set(p,u[p]);else for(;++p<v;)c.set(s(h=u[p],p,u),h)}else if(u)for(var g in u)c.set(g,u[g]);return c}function b(){return{}}function e(u,s,c){u[s]=c}function o(){return T()}function a(u,s,c){u.set(s,c)}function l(){}x.prototype=T.prototype={constructor:x,has:function(u){return"$"+u in this},get:function(u){return this["$"+u]},set:function(u,s){return this["$"+u]=s,this},remove:function(u){var s="$"+u;return s in this&&delete this[s]},clear:function(){for(var u in this)"$"===u[0]&&delete this[u]},keys:function(){var u=[];for(var s in this)"$"===s[0]&&u.push(s.slice(1));return u},values:function(){var u=[];for(var s in this)"$"===s[0]&&u.push(this[s]);return u},entries:function(){var u=[];for(var s in this)"$"===s[0]&&u.push({key:s.slice(1),value:this[s]});return u},size:function(){var u=0;for(var s in this)"$"===s[0]&&++u;return u},empty:function(){for(var u in this)if("$"===u[0])return!1;return!0},each:function(u){for(var s in this)"$"===s[0]&&u(this[s],s.slice(1),this)}};var i=T.prototype;function d(u,s){var c=new l;if(u instanceof l)u.each(function(v){c.add(v)});else if(u){var h=-1,p=u.length;if(null==s)for(;++h<p;)c.add(u[h]);else for(;++h<p;)c.add(s(u[h],h,u))}return c}l.prototype=d.prototype={constructor:l,has:i.has,add:function(u){return this["$"+(u+="")]=u,this},remove:i.remove,clear:i.clear,values:i.keys,size:i.size,empty:i.empty,each:i.each},m.nest=function(){var u,s,c,h=[],p=[];function v(g,f,w,y){if(f>=h.length)return null!=u&&g.sort(u),null!=s?s(g):g;for(var M,A,k,C=-1,P=g.length,D=h[f++],F=T(),R=w();++C<P;)(k=F.get(M=D(A=g[C])+""))?k.push(A):F.set(M,[A]);return F.each(function(L,I){y(R,I,v(L,f,w,y))}),R}return c={object:function(g){return v(g,0,b,e)},map:function(g){return v(g,0,o,a)},entries:function(g){return function f(w,y){if(++y>h.length)return w;var M,A=p[y-1];return null!=s&&y>=h.length?M=w.entries():(M=[],w.each(function(k,C){M.push({key:C,values:f(k,y)})})),null!=A?M.sort(function(k,C){return A(k.key,C.key)}):M}(v(g,0,o,a),0)},key:function(g){return h.push(g),c},sortKeys:function(g){return p[h.length-1]=g,c},sortValues:function(g){return u=g,c},rollup:function(g){return s=g,c}}},m.set=d,m.map=T,m.keys=function(u){var s=[];for(var c in u)s.push(c);return s},m.values=function(u){var s=[];for(var c in u)s.push(u[c]);return s},m.entries=function(u){var s=[];for(var c in u)s.push({key:c,value:u[c]});return s},Object.defineProperty(m,"__esModule",{value:!0})},x("object"==typeof ae&&void 0!==oe?ae:this.d3=this.d3||{})},{}],109:[function(_,oe,ae){var m,x;m=this,x=function(m){"use strict";function x(ve,Te,Le){ve.prototype=Te.prototype=Le,Le.constructor=ve}function T(ve,Te){var Le=Object.create(ve.prototype);for(var Ee in Te)Le[Ee]=Te[Ee];return Le}function b(){}var e="\\s*([+-]?\\d+)\\s*",o="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",a="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",l=/^#([0-9a-f]{3,8})$/,i=new RegExp("^rgb\\("+[e,e,e]+"\\)$"),d=new RegExp("^rgb\\("+[a,a,a]+"\\)$"),u=new RegExp("^rgba\\("+[e,e,e,o]+"\\)$"),s=new RegExp("^rgba\\("+[a,a,a,o]+"\\)$"),c=new RegExp("^hsl\\("+[o,a,a]+"\\)$"),h=new RegExp("^hsla\\("+[o,a,a,o]+"\\)$"),p={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function v(){return this.rgb().formatHex()}function g(){return this.rgb().formatRgb()}function f(ve){var Te,Le;return ve=(ve+"").trim().toLowerCase(),(Te=l.exec(ve))?(Le=Te[1].length,Te=parseInt(Te[1],16),6===Le?w(Te):3===Le?new k(Te>>8&15|Te>>4&240,Te>>4&15|240&Te,(15&Te)<<4|15&Te,1):8===Le?y(Te>>24&255,Te>>16&255,Te>>8&255,(255&Te)/255):4===Le?y(Te>>12&15|Te>>8&240,Te>>8&15|Te>>4&240,Te>>4&15|240&Te,((15&Te)<<4|15&Te)/255):null):(Te=i.exec(ve))?new k(Te[1],Te[2],Te[3],1):(Te=d.exec(ve))?new k(255*Te[1]/100,255*Te[2]/100,255*Te[3]/100,1):(Te=u.exec(ve))?y(Te[1],Te[2],Te[3],Te[4]):(Te=s.exec(ve))?y(255*Te[1]/100,255*Te[2]/100,255*Te[3]/100,Te[4]):(Te=c.exec(ve))?F(Te[1],Te[2]/100,Te[3]/100,1):(Te=h.exec(ve))?F(Te[1],Te[2]/100,Te[3]/100,Te[4]):p.hasOwnProperty(ve)?w(p[ve]):"transparent"===ve?new k(NaN,NaN,NaN,0):null}function w(ve){return new k(ve>>16&255,ve>>8&255,255&ve,1)}function y(ve,Te,Le,Ee){return Ee<=0&&(ve=Te=Le=NaN),new k(ve,Te,Le,Ee)}function M(ve){return ve instanceof b||(ve=f(ve)),ve?new k((ve=ve.rgb()).r,ve.g,ve.b,ve.opacity):new k}function A(ve,Te,Le,Ee){return 1===arguments.length?M(ve):new k(ve,Te,Le,null==Ee?1:Ee)}function k(ve,Te,Le,Ee){this.r=+ve,this.g=+Te,this.b=+Le,this.opacity=+Ee}function C(){return"#"+D(this.r)+D(this.g)+D(this.b)}function P(){var ve=this.opacity;return(1===(ve=isNaN(ve)?1:Math.max(0,Math.min(1,ve)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===ve?")":", "+ve+")")}function D(ve){return((ve=Math.max(0,Math.min(255,Math.round(ve)||0)))<16?"0":"")+ve.toString(16)}function F(ve,Te,Le,Ee){return Ee<=0?ve=Te=Le=NaN:Le<=0||Le>=1?ve=Te=NaN:Te<=0&&(ve=NaN),new I(ve,Te,Le,Ee)}function R(ve){if(ve instanceof I)return new I(ve.h,ve.s,ve.l,ve.opacity);if(ve instanceof b||(ve=f(ve)),!ve)return new I;if(ve instanceof I)return ve;var Te=(ve=ve.rgb()).r/255,Le=ve.g/255,Ee=ve.b/255,Pe=Math.min(Te,Le,Ee),je=Math.max(Te,Le,Ee),Ge=NaN,Ke=je-Pe,lt=(je+Pe)/2;return Ke?(Ge=Te===je?(Le-Ee)/Ke+6*(Le<Ee):Le===je?(Ee-Te)/Ke+2:(Te-Le)/Ke+4,Ke/=lt<.5?je+Pe:2-je-Pe,Ge*=60):Ke=lt>0&&lt<1?0:Ge,new I(Ge,Ke,lt,ve.opacity)}function L(ve,Te,Le,Ee){return 1===arguments.length?R(ve):new I(ve,Te,Le,null==Ee?1:Ee)}function I(ve,Te,Le,Ee){this.h=+ve,this.s=+Te,this.l=+Le,this.opacity=+Ee}function B(ve,Te,Le){return 255*(ve<60?Te+(Le-Te)*ve/60:ve<180?Le:ve<240?Te+(Le-Te)*(240-ve)/60:Te)}x(b,f,{copy:function(ve){return Object.assign(new this.constructor,this,ve)},displayable:function(){return this.rgb().displayable()},hex:v,formatHex:v,formatHsl:function(){return R(this).formatHsl()},formatRgb:g,toString:g}),x(k,A,T(b,{brighter:function(ve){return ve=null==ve?1/.7:Math.pow(1/.7,ve),new k(this.r*ve,this.g*ve,this.b*ve,this.opacity)},darker:function(ve){return ve=null==ve?.7:Math.pow(.7,ve),new k(this.r*ve,this.g*ve,this.b*ve,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:C,formatHex:C,formatRgb:P,toString:P})),x(I,L,T(b,{brighter:function(ve){return ve=null==ve?1/.7:Math.pow(1/.7,ve),new I(this.h,this.s,this.l*ve,this.opacity)},darker:function(ve){return ve=null==ve?.7:Math.pow(.7,ve),new I(this.h,this.s,this.l*ve,this.opacity)},rgb:function(){var ve=this.h%360+360*(this.h<0),Te=isNaN(ve)||isNaN(this.s)?0:this.s,Le=this.l,Ee=Le+(Le<.5?Le:1-Le)*Te,Pe=2*Le-Ee;return new k(B(ve>=240?ve-240:ve+120,Pe,Ee),B(ve,Pe,Ee),B(ve<120?ve+240:ve-120,Pe,Ee),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var ve=this.opacity;return(1===(ve=isNaN(ve)?1:Math.max(0,Math.min(1,ve)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===ve?")":", "+ve+")")}}));var V=Math.PI/180,Z=180/Math.PI,Y=6/29,ee=3*Y*Y;function J(ve){if(ve instanceof Q)return new Q(ve.l,ve.a,ve.b,ve.opacity);if(ve instanceof te)return ne(ve);ve instanceof k||(ve=M(ve));var Te,Le,Ee=W(ve.r),Pe=W(ve.g),je=W(ve.b),Ge=se((.2225045*Ee+.7168786*Pe+.0606169*je)/1);return Ee===Pe&&Pe===je?Te=Le=Ge:(Te=se((.4360747*Ee+.3850649*Pe+.1430804*je)/.96422),Le=se((.0139322*Ee+.0971045*Pe+.7141733*je)/.82521)),new Q(116*Ge-16,500*(Te-Ge),200*(Ge-Le),ve.opacity)}function $(ve,Te,Le,Ee){return 1===arguments.length?J(ve):new Q(ve,Te,Le,null==Ee?1:Ee)}function Q(ve,Te,Le,Ee){this.l=+ve,this.a=+Te,this.b=+Le,this.opacity=+Ee}function se(ve){return ve>.008856451679035631?Math.pow(ve,1/3):ve/ee+4/29}function j(ve){return ve>Y?ve*ve*ve:ee*(ve-4/29)}function G(ve){return 255*(ve<=.0031308?12.92*ve:1.055*Math.pow(ve,1/2.4)-.055)}function W(ve){return(ve/=255)<=.04045?ve/12.92:Math.pow((ve+.055)/1.055,2.4)}function ie(ve){if(ve instanceof te)return new te(ve.h,ve.c,ve.l,ve.opacity);if(ve instanceof Q||(ve=J(ve)),0===ve.a&&0===ve.b)return new te(NaN,0<ve.l&&ve.l<100?0:NaN,ve.l,ve.opacity);var Te=Math.atan2(ve.b,ve.a)*Z;return new te(Te<0?Te+360:Te,Math.sqrt(ve.a*ve.a+ve.b*ve.b),ve.l,ve.opacity)}function q(ve,Te,Le,Ee){return 1===arguments.length?ie(ve):new te(ve,Te,Le,null==Ee?1:Ee)}function te(ve,Te,Le,Ee){this.h=+ve,this.c=+Te,this.l=+Le,this.opacity=+Ee}function ne(ve){if(isNaN(ve.h))return new Q(ve.l,0,0,ve.opacity);var Te=ve.h*V;return new Q(ve.l,Math.cos(Te)*ve.c,Math.sin(Te)*ve.c,ve.opacity)}x(Q,$,T(b,{brighter:function(ve){return new Q(this.l+18*(null==ve?1:ve),this.a,this.b,this.opacity)},darker:function(ve){return new Q(this.l-18*(null==ve?1:ve),this.a,this.b,this.opacity)},rgb:function(){var ve=(this.l+16)/116,Te=isNaN(this.a)?ve:ve+this.a/500,Le=isNaN(this.b)?ve:ve-this.b/200;return new k(G(3.1338561*(Te=.96422*j(Te))-1.6168667*(ve=1*j(ve))-.4906146*(Le=.82521*j(Le))),G(-.9787684*Te+1.9161415*ve+.033454*Le),G(.0719453*Te-.2289914*ve+1.4052427*Le),this.opacity)}})),x(te,q,T(b,{brighter:function(ve){return new te(this.h,this.c,this.l+18*(null==ve?1:ve),this.opacity)},darker:function(ve){return new te(this.h,this.c,this.l-18*(null==ve?1:ve),this.opacity)},rgb:function(){return ne(this).rgb()}}));var ue=1.78277,de=-.29227,he=-.90649,be=1.97294,ge=be*he,we=be*ue,Ce=ue*de- -.14861*he;function De(ve){if(ve instanceof Fe)return new Fe(ve.h,ve.s,ve.l,ve.opacity);ve instanceof k||(ve=M(ve));var Le=ve.g/255,Ee=ve.b/255,Pe=(Ce*Ee+ge*(ve.r/255)-we*Le)/(Ce+ge-we),je=Ee-Pe,Ge=(be*(Le-Pe)-de*je)/he,Ke=Math.sqrt(Ge*Ge+je*je)/(be*Pe*(1-Pe)),lt=Ke?Math.atan2(Ge,je)*Z-120:NaN;return new Fe(lt<0?lt+360:lt,Ke,Pe,ve.opacity)}function Se(ve,Te,Le,Ee){return 1===arguments.length?De(ve):new Fe(ve,Te,Le,null==Ee?1:Ee)}function Fe(ve,Te,Le,Ee){this.h=+ve,this.s=+Te,this.l=+Le,this.opacity=+Ee}x(Fe,Se,T(b,{brighter:function(ve){return ve=null==ve?1/.7:Math.pow(1/.7,ve),new Fe(this.h,this.s,this.l*ve,this.opacity)},darker:function(ve){return ve=null==ve?.7:Math.pow(.7,ve),new Fe(this.h,this.s,this.l*ve,this.opacity)},rgb:function(){var ve=isNaN(this.h)?0:(this.h+120)*V,Te=+this.l,Le=isNaN(this.s)?0:this.s*Te*(1-Te),Ee=Math.cos(ve),Pe=Math.sin(ve);return new k(255*(Te+Le*(-.14861*Ee+ue*Pe)),255*(Te+Le*(de*Ee+he*Pe)),255*(Te+Le*(be*Ee)),this.opacity)}})),m.color=f,m.cubehelix=Se,m.gray=function(ve,Te){return new Q(ve,0,0,null==Te?1:Te)},m.hcl=q,m.hsl=L,m.lab=$,m.lch=function(ve,Te,Le,Ee){return 1===arguments.length?ie(ve):new te(Le,Te,ve,null==Ee?1:Ee)},m.rgb=A,Object.defineProperty(m,"__esModule",{value:!0})},x("object"==typeof ae&&void 0!==oe?ae:(m=m||self).d3=m.d3||{})},{}],110:[function(_,oe,ae){var m,x;m=this,x=function(m){"use strict";var x={value:function(){}};function T(){for(var l,i=0,d=arguments.length,u={};i<d;++i){if(!(l=arguments[i]+"")||l in u||/[\s.]/.test(l))throw new Error("illegal type: "+l);u[l]=[]}return new b(u)}function b(l){this._=l}function e(l,i){return l.trim().split(/^|\s+/).map(function(d){var u="",s=d.indexOf(".");if(s>=0&&(u=d.slice(s+1),d=d.slice(0,s)),d&&!i.hasOwnProperty(d))throw new Error("unknown type: "+d);return{type:d,name:u}})}function o(l,i){for(var d,u=0,s=l.length;u<s;++u)if((d=l[u]).name===i)return d.value}function a(l,i,d){for(var u=0,s=l.length;u<s;++u)if(l[u].name===i){l[u]=x,l=l.slice(0,u).concat(l.slice(u+1));break}return null!=d&&l.push({name:i,value:d}),l}b.prototype=T.prototype={constructor:b,on:function(l,i){var d,u=this._,s=e(l+"",u),c=-1,h=s.length;if(!(arguments.length<2)){if(null!=i&&"function"!=typeof i)throw new Error("invalid callback: "+i);for(;++c<h;)if(d=(l=s[c]).type)u[d]=a(u[d],l.name,i);else if(null==i)for(d in u)u[d]=a(u[d],l.name,null);return this}for(;++c<h;)if((d=(l=s[c]).type)&&(d=o(u[d],l.name)))return d},copy:function(){var l={},i=this._;for(var d in i)l[d]=i[d].slice();return new b(l)},call:function(l,i){if((d=arguments.length-2)>0)for(var d,u,s=new Array(d),c=0;c<d;++c)s[c]=arguments[c+2];if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(c=0,d=(u=this._[l]).length;c<d;++c)u[c].value.apply(i,s)},apply:function(l,i,d){if(!this._.hasOwnProperty(l))throw new Error("unknown type: "+l);for(var u=this._[l],s=0,c=u.length;s<c;++s)u[s].value.apply(i,d)}},m.dispatch=T,Object.defineProperty(m,"__esModule",{value:!0})},x("object"==typeof ae&&void 0!==oe?ae:(m=m||self).d3=m.d3||{})},{}],111:[function(_,oe,ae){var m,x;m=this,x=function(m,x,T,b,e){"use strict";function o(p){return function(){return p}}function a(){return 1e-6*(Math.random()-.5)}function l(p){return p.x+p.vx}function i(p){return p.y+p.vy}function d(p){return p.index}function u(p,v){var g=p.get(v);if(!g)throw new Error("missing: "+v);return g}function s(p){return p.x}function c(p){return p.y}var h=Math.PI*(3-Math.sqrt(5));m.forceCenter=function(p,v){var g;function f(){var w,y,M=g.length,A=0,k=0;for(w=0;w<M;++w)A+=(y=g[w]).x,k+=y.y;for(A=A/M-p,k=k/M-v,w=0;w<M;++w)(y=g[w]).x-=A,y.y-=k}return null==p&&(p=0),null==v&&(v=0),f.initialize=function(w){g=w},f.x=function(w){return arguments.length?(p=+w,f):p},f.y=function(w){return arguments.length?(v=+w,f):v},f},m.forceCollide=function(p){var v,g,f=1,w=1;function y(){for(var k,C,P,D,F,R,L,I=v.length,B=0;B<w;++B)for(C=x.quadtree(v,l,i).visitAfter(M),k=0;k<I;++k)L=(R=g[(P=v[k]).index])*R,D=P.x+P.vx,F=P.y+P.vy,C.visit(V);function V(Z,Y,ee,J,$){var Q=Z.data,se=Z.r,j=R+se;if(!Q)return Y>D+j||J<D-j||ee>F+j||$<F-j;if(Q.index>P.index){var G=D-Q.x-Q.vx,W=F-Q.y-Q.vy,ie=G*G+W*W;ie<j*j&&(0===G&&(ie+=(G=a())*G),0===W&&(ie+=(W=a())*W),ie=(j-(ie=Math.sqrt(ie)))/ie*f,P.vx+=(G*=ie)*(j=(se*=se)/(L+se)),P.vy+=(W*=ie)*j,Q.vx-=G*(j=1-j),Q.vy-=W*j)}}}function M(k){if(k.data)return k.r=g[k.data.index];for(var C=k.r=0;C<4;++C)k[C]&&k[C].r>k.r&&(k.r=k[C].r)}function A(){if(v){var k,C,P=v.length;for(g=new Array(P),k=0;k<P;++k)g[(C=v[k]).index]=+p(C,k,v)}}return"function"!=typeof p&&(p=o(null==p?1:+p)),y.initialize=function(k){v=k,A()},y.iterations=function(k){return arguments.length?(w=+k,y):w},y.strength=function(k){return arguments.length?(f=+k,y):f},y.radius=function(k){return arguments.length?(p="function"==typeof k?k:o(+k),A(),y):p},y},m.forceLink=function(p){var v,g,f,w,y,M=d,A=function(L){return 1/Math.min(w[L.source.index],w[L.target.index])},k=o(30),C=1;function P(L){for(var I=0,B=p.length;I<C;++I)for(var V,Z,Y,ee,J,$,Q,se=0;se<B;++se)Z=(V=p[se]).source,ee=(Y=V.target).x+Y.vx-Z.x-Z.vx||a(),J=Y.y+Y.vy-Z.y-Z.vy||a(),ee*=$=(($=Math.sqrt(ee*ee+J*J))-g[se])/$*L*v[se],J*=$,Y.vx-=ee*(Q=y[se]),Y.vy-=J*Q,Z.vx+=ee*(Q=1-Q),Z.vy+=J*Q}function D(){if(f){var L,I,B=f.length,V=p.length,Z=T.map(f,M);for(L=0,w=new Array(B);L<V;++L)(I=p[L]).index=L,"object"!=typeof I.source&&(I.source=u(Z,I.source)),"object"!=typeof I.target&&(I.target=u(Z,I.target)),w[I.source.index]=(w[I.source.index]||0)+1,w[I.target.index]=(w[I.target.index]||0)+1;for(L=0,y=new Array(V);L<V;++L)y[L]=w[(I=p[L]).source.index]/(w[I.source.index]+w[I.target.index]);v=new Array(V),F(),g=new Array(V),R()}}function F(){if(f)for(var L=0,I=p.length;L<I;++L)v[L]=+A(p[L],L,p)}function R(){if(f)for(var L=0,I=p.length;L<I;++L)g[L]=+k(p[L],L,p)}return null==p&&(p=[]),P.initialize=function(L){f=L,D()},P.links=function(L){return arguments.length?(p=L,D(),P):p},P.id=function(L){return arguments.length?(M=L,P):M},P.iterations=function(L){return arguments.length?(C=+L,P):C},P.strength=function(L){return arguments.length?(A="function"==typeof L?L:o(+L),F(),P):A},P.distance=function(L){return arguments.length?(k="function"==typeof L?L:o(+L),R(),P):k},P},m.forceManyBody=function(){var p,v,g,f,w=o(-30),y=1,M=1/0,A=.81;function k(F){var R,L=p.length,I=x.quadtree(p,s,c).visitAfter(P);for(g=F,R=0;R<L;++R)v=p[R],I.visit(D)}function C(){if(p){var F,R,L=p.length;for(f=new Array(L),F=0;F<L;++F)f[(R=p[F]).index]=+w(R,F,p)}}function P(F){var R,L,I,B,V,Z=0,Y=0;if(F.length){for(I=B=V=0;V<4;++V)(R=F[V])&&(L=Math.abs(R.value))&&(Z+=R.value,Y+=L,I+=L*R.x,B+=L*R.y);F.x=I/Y,F.y=B/Y}else{(R=F).x=R.data.x,R.y=R.data.y;do{Z+=f[R.data.index]}while(R=R.next)}F.value=Z}function D(F,R,L,I){if(!F.value)return!0;var B=F.x-v.x,V=F.y-v.y,Z=I-R,Y=B*B+V*V;if(Z*Z/A<Y)return Y<M&&(0===B&&(Y+=(B=a())*B),0===V&&(Y+=(V=a())*V),Y<y&&(Y=Math.sqrt(y*Y)),v.vx+=B*F.value*g/Y,v.vy+=V*F.value*g/Y),!0;if(!(F.length||Y>=M)){(F.data!==v||F.next)&&(0===B&&(Y+=(B=a())*B),0===V&&(Y+=(V=a())*V),Y<y&&(Y=Math.sqrt(y*Y)));do{F.data!==v&&(v.vx+=B*(Z=f[F.data.index]*g/Y),v.vy+=V*Z)}while(F=F.next)}}return k.initialize=function(F){p=F,C()},k.strength=function(F){return arguments.length?(w="function"==typeof F?F:o(+F),C(),k):w},k.distanceMin=function(F){return arguments.length?(y=F*F,k):Math.sqrt(y)},k.distanceMax=function(F){return arguments.length?(M=F*F,k):Math.sqrt(M)},k.theta=function(F){return arguments.length?(A=F*F,k):Math.sqrt(A)},k},m.forceRadial=function(p,v,g){var f,w,y,M=o(.1);function A(C){for(var P=0,D=f.length;P<D;++P){var F=f[P],R=F.x-v||1e-6,L=F.y-g||1e-6,I=Math.sqrt(R*R+L*L),B=(y[P]-I)*w[P]*C/I;F.vx+=R*B,F.vy+=L*B}}function k(){if(f){var C,P=f.length;for(w=new Array(P),y=new Array(P),C=0;C<P;++C)y[C]=+p(f[C],C,f),w[C]=isNaN(y[C])?0:+M(f[C],C,f)}}return"function"!=typeof p&&(p=o(+p)),null==v&&(v=0),null==g&&(g=0),A.initialize=function(C){f=C,k()},A.strength=function(C){return arguments.length?(M="function"==typeof C?C:o(+C),k(),A):M},A.radius=function(C){return arguments.length?(p="function"==typeof C?C:o(+C),k(),A):p},A.x=function(C){return arguments.length?(v=+C,A):v},A.y=function(C){return arguments.length?(g=+C,A):g},A},m.forceSimulation=function(p){var v,g=1,f=.001,w=1-Math.pow(f,1/300),y=0,M=.6,A=T.map(),k=e.timer(P),C=b.dispatch("tick","end");function P(){D(),C.call("tick",v),g<f&&(k.stop(),C.call("end",v))}function D(L){var I,B,V=p.length;void 0===L&&(L=1);for(var Z=0;Z<L;++Z)for(g+=(y-g)*w,A.each(function(Y){Y(g)}),I=0;I<V;++I)null==(B=p[I]).fx?B.x+=B.vx*=M:(B.x=B.fx,B.vx=0),null==B.fy?B.y+=B.vy*=M:(B.y=B.fy,B.vy=0);return v}function F(){for(var L,I=0,B=p.length;I<B;++I){if((L=p[I]).index=I,null!=L.fx&&(L.x=L.fx),null!=L.fy&&(L.y=L.fy),isNaN(L.x)||isNaN(L.y)){var V=10*Math.sqrt(I),Z=I*h;L.x=V*Math.cos(Z),L.y=V*Math.sin(Z)}(isNaN(L.vx)||isNaN(L.vy))&&(L.vx=L.vy=0)}}function R(L){return L.initialize&&L.initialize(p),L}return null==p&&(p=[]),F(),v={tick:D,restart:function(){return k.restart(P),v},stop:function(){return k.stop(),v},nodes:function(L){return arguments.length?(p=L,F(),A.each(R),v):p},alpha:function(L){return arguments.length?(g=+L,v):g},alphaMin:function(L){return arguments.length?(f=+L,v):f},alphaDecay:function(L){return arguments.length?(w=+L,v):+w},alphaTarget:function(L){return arguments.length?(y=+L,v):y},velocityDecay:function(L){return arguments.length?(M=1-L,v):1-M},force:function(L,I){return arguments.length>1?(null==I?A.remove(L):A.set(L,R(I)),v):A.get(L)},find:function(L,I,B){var V,Z,Y,ee,J,$=0,Q=p.length;for(null==B?B=1/0:B*=B,$=0;$<Q;++$)(Y=(V=L-(ee=p[$]).x)*V+(Z=I-ee.y)*Z)<B&&(J=ee,B=Y);return J},on:function(L,I){return arguments.length>1?(C.on(L,I),v):C.on(L)}}},m.forceX=function(p){var v,g,f,w=o(.1);function y(A){for(var k,C=0,P=v.length;C<P;++C)(k=v[C]).vx+=(f[C]-k.x)*g[C]*A}function M(){if(v){var A,k=v.length;for(g=new Array(k),f=new Array(k),A=0;A<k;++A)g[A]=isNaN(f[A]=+p(v[A],A,v))?0:+w(v[A],A,v)}}return"function"!=typeof p&&(p=o(null==p?0:+p)),y.initialize=function(A){v=A,M()},y.strength=function(A){return arguments.length?(w="function"==typeof A?A:o(+A),M(),y):w},y.x=function(A){return arguments.length?(p="function"==typeof A?A:o(+A),M(),y):p},y},m.forceY=function(p){var v,g,f,w=o(.1);function y(A){for(var k,C=0,P=v.length;C<P;++C)(k=v[C]).vy+=(f[C]-k.y)*g[C]*A}function M(){if(v){var A,k=v.length;for(g=new Array(k),f=new Array(k),A=0;A<k;++A)g[A]=isNaN(f[A]=+p(v[A],A,v))?0:+w(v[A],A,v)}}return"function"!=typeof p&&(p=o(null==p?0:+p)),y.initialize=function(A){v=A,M()},y.strength=function(A){return arguments.length?(w="function"==typeof A?A:o(+A),M(),y):w},y.y=function(A){return arguments.length?(p="function"==typeof A?A:o(+A),M(),y):p},y},Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==oe?x(ae,_("d3-quadtree"),_("d3-collection"),_("d3-dispatch"),_("d3-timer")):x(m.d3=m.d3||{},m.d3,m.d3,m.d3,m.d3)},{"d3-collection":108,"d3-dispatch":110,"d3-quadtree":118,"d3-timer":123}],112:[function(_,oe,ae){var m,x;m=this,x=function(m){"use strict";function x(v,g){if((f=(v=g?v.toExponential(g-1):v.toExponential()).indexOf("e"))<0)return null;var f,w=v.slice(0,f);return[w.length>1?w[0]+w.slice(2):w,+v.slice(f+1)]}function T(v){return(v=x(Math.abs(v)))?v[1]:NaN}var b,e=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function o(v){if(!(g=e.exec(v)))throw new Error("invalid format: "+v);var g;return new a({fill:g[1],align:g[2],sign:g[3],symbol:g[4],zero:g[5],width:g[6],comma:g[7],precision:g[8]&&g[8].slice(1),trim:g[9],type:g[10]})}function a(v){this.fill=void 0===v.fill?" ":v.fill+"",this.align=void 0===v.align?">":v.align+"",this.sign=void 0===v.sign?"-":v.sign+"",this.symbol=void 0===v.symbol?"":v.symbol+"",this.zero=!!v.zero,this.width=void 0===v.width?void 0:+v.width,this.comma=!!v.comma,this.precision=void 0===v.precision?void 0:+v.precision,this.trim=!!v.trim,this.type=void 0===v.type?"":v.type+""}function l(v,g){var f=x(v,g);if(!f)return v+"";var w=f[0],y=f[1];return y<0?"0."+new Array(-y).join("0")+w:w.length>y+1?w.slice(0,y+1)+"."+w.slice(y+1):w+new Array(y-w.length+2).join("0")}o.prototype=a.prototype,a.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var i={"%":function(v,g){return(100*v).toFixed(g)},b:function(v){return Math.round(v).toString(2)},c:function(v){return v+""},d:function(v){return Math.abs(v=Math.round(v))>=1e21?v.toLocaleString("en").replace(/,/g,""):v.toString(10)},e:function(v,g){return v.toExponential(g)},f:function(v,g){return v.toFixed(g)},g:function(v,g){return v.toPrecision(g)},o:function(v){return Math.round(v).toString(8)},p:function(v,g){return l(100*v,g)},r:l,s:function(v,g){var f=x(v,g);if(!f)return v+"";var w=f[0],y=f[1],M=y-(b=3*Math.max(-8,Math.min(8,Math.floor(y/3))))+1,A=w.length;return M===A?w:M>A?w+new Array(M-A+1).join("0"):M>0?w.slice(0,M)+"."+w.slice(M):"0."+new Array(1-M).join("0")+x(v,Math.max(0,g+M-1))[0]},X:function(v){return Math.round(v).toString(16).toUpperCase()},x:function(v){return Math.round(v).toString(16)}};function d(v){return v}var u,s=Array.prototype.map,c=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function h(v){var g,f,R,w=void 0===v.grouping||void 0===v.thousands?d:(g=s.call(v.grouping,Number),f=v.thousands+"",function(R,L){for(var I=R.length,B=[],V=0,Z=g[0],Y=0;I>0&&Z>0&&(Y+Z+1>L&&(Z=Math.max(1,L-Y)),B.push(R.substring(I-=Z,I+Z)),!((Y+=Z+1)>L));)Z=g[V=(V+1)%g.length];return B.reverse().join(f)}),y=void 0===v.currency?"":v.currency[0]+"",M=void 0===v.currency?"":v.currency[1]+"",A=void 0===v.decimal?".":v.decimal+"",k=void 0===v.numerals?d:(R=s.call(v.numerals,String),function(L){return L.replace(/[0-9]/g,function(I){return R[+I]})}),C=void 0===v.percent?"%":v.percent+"",P=void 0===v.minus?"-":v.minus+"",D=void 0===v.nan?"NaN":v.nan+"";function F(R){var L=(R=o(R)).fill,I=R.align,B=R.sign,V=R.symbol,Z=R.zero,Y=R.width,ee=R.comma,J=R.precision,$=R.trim,Q=R.type;"n"===Q?(ee=!0,Q="g"):i[Q]||(void 0===J&&(J=12),$=!0,Q="g"),(Z||"0"===L&&"="===I)&&(Z=!0,L="0",I="=");var se="$"===V?y:"#"===V&&/[boxX]/.test(Q)?"0"+Q.toLowerCase():"",j="$"===V?M:/[%p]/.test(Q)?C:"",G=i[Q],W=/[defgprs%]/.test(Q);function ie(q){var te,ne,le,ue=se,de=j;if("c"===Q)de=G(q)+de,q="";else{var he=(q=+q)<0||1/q<0;if(q=isNaN(q)?D:G(Math.abs(q),J),$&&(q=function(we){e:for(var Ce,De=we.length,Se=1,Fe=-1;Se<De;++Se)switch(we[Se]){case".":Fe=Ce=Se;break;case"0":0===Fe&&(Fe=Se),Ce=Se;break;default:if(!+we[Se])break e;Fe>0&&(Fe=0)}return Fe>0?we.slice(0,Fe)+we.slice(Ce+1):we}(q)),he&&0==+q&&"+"!==B&&(he=!1),ue=(he?"("===B?B:P:"-"===B||"("===B?"":B)+ue,de=("s"===Q?c[8+b/3]:"")+de+(he&&"("===B?")":""),W)for(te=-1,ne=q.length;++te<ne;)if(48>(le=q.charCodeAt(te))||le>57){de=(46===le?A+q.slice(te+1):q.slice(te))+de,q=q.slice(0,te);break}}ee&&!Z&&(q=w(q,1/0));var be=ue.length+q.length+de.length,ge=be<Y?new Array(Y-be+1).join(L):"";switch(ee&&Z&&(q=w(ge+q,ge.length?Y-de.length:1/0),ge=""),I){case"<":q=ue+q+de+ge;break;case"=":q=ue+ge+q+de;break;case"^":q=ge.slice(0,be=ge.length>>1)+ue+q+de+ge.slice(be);break;default:q=ge+ue+q+de}return k(q)}return J=void 0===J?6:/[gprs]/.test(Q)?Math.max(1,Math.min(21,J)):Math.max(0,Math.min(20,J)),ie.toString=function(){return R+""},ie}return{format:F,formatPrefix:function(R,L){var I=F(((R=o(R)).type="f",R)),B=3*Math.max(-8,Math.min(8,Math.floor(T(L)/3))),V=Math.pow(10,-B),Z=c[8+B/3];return function(Y){return I(V*Y)+Z}}}}function p(v){return u=h(v),m.format=u.format,m.formatPrefix=u.formatPrefix,u}p({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),m.FormatSpecifier=a,m.formatDefaultLocale=p,m.formatLocale=h,m.formatSpecifier=o,m.precisionFixed=function(v){return Math.max(0,-T(Math.abs(v)))},m.precisionPrefix=function(v,g){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(T(g)/3)))-T(Math.abs(v)))},m.precisionRound=function(v,g){return v=Math.abs(v),g=Math.abs(g)-v,Math.max(0,T(g)-T(v))+1},Object.defineProperty(m,"__esModule",{value:!0})},x("object"==typeof ae&&void 0!==oe?ae:(m="undefined"!=typeof globalThis?globalThis:m||self).d3=m.d3||{})},{}],113:[function(_,oe,ae){var m,x;m=this,x=function(m,x,T){"use strict";var b=Math.abs,e=Math.atan,o=Math.atan2,a=Math.cos,l=Math.exp,i=Math.floor,d=Math.log,u=Math.max,s=Math.min,c=Math.pow,h=Math.round,p=Math.sign||function(Ye){return Ye>0?1:Ye<0?-1:0},v=Math.sin,g=Math.tan,f=1e-6,w=Math.PI,y=w/2,M=w/4,A=Math.SQRT1_2,k=I(2),C=I(w),P=2*w,D=180/w,F=w/180;function R(Ye){return Ye>1?y:Ye<-1?-y:Math.asin(Ye)}function L(Ye){return Ye>1?0:Ye<-1?w:Math.acos(Ye)}function I(Ye){return Ye>0?Math.sqrt(Ye):0}function B(Ye){return(l(Ye)-l(-Ye))/2}function V(Ye){return(l(Ye)+l(-Ye))/2}function Z(Ye){var Je=g(Ye/2),st=2*d(a(Ye/2))/(Je*Je);function mt(Mt,pt){var St=a(Mt),an=a(pt),fn=v(pt),ln=an*St,mn=-((1-ln?d((1+ln)/2)/(1-ln):-.5)+st/(1+ln));return[mn*an*v(Mt),mn*fn]}return mt.invert=function(Mt,pt){var St,an=I(Mt*Mt+pt*pt),fn=-Ye/2,ln=50;if(!an)return[0,0];do{var mn=fn/2,Mn=a(mn),Sn=v(mn),zn=Sn/Mn,$n=-d(b(Mn));fn-=St=(2/zn*$n-st*zn-an)/(-$n/(Sn*Sn)+1-st/(2*Mn*Mn))*(Mn<0?.7:1)}while(b(St)>f&&--ln>0);var or=v(fn);return[o(Mt*or,an*a(fn)),R(pt*or/an)]},mt}function Y(Ye,Je){var Mt,st=a(Je),mt=(Mt=L(st*a(Ye/=2)))?Mt/Math.sin(Mt):1;return[2*st*v(Ye)*mt,v(Je)*mt]}function ee(Ye){var Je=v(Ye),st=a(Ye),mt=Ye>=0?1:-1,Mt=g(mt*Ye),pt=(1+Je-st)/2;function St(an,fn){var ln=a(fn),mn=a(an/=2);return[(1+ln)*v(an),(mt*fn>-o(mn,Mt)-.001?0:10*-mt)+pt+v(fn)*st-(1+ln)*Je*mn]}return St.invert=function(an,fn){var ln=0,mn=0,Mn=50;do{var Sn=a(ln),zn=v(ln),$n=a(mn),or=v(mn),Lr=1+$n,Kr=Lr*zn-an,oi=pt+or*st-Lr*Je*Sn-fn,fi=Lr*Sn/2,Qr=-zn*or,ji=Je*Lr*zn/2,Ki=st*$n+Je*Sn*or,fa=Qr*ji-Ki*fi,Vi=(oi*Qr-Kr*Ki)/fa/2,Oa=(Kr*ji-oi*fi)/fa;b(Oa)>2&&(Oa/=2),ln-=Vi,mn-=Oa}while((b(Vi)>f||b(Oa)>f)&&--Mn>0);return mt*mn>-o(a(ln),Mt)-.001?[2*ln,mn]:null},St}function J(Ye,Je){var st=g(Je/2),mt=I(1-st*st),Mt=1+mt*a(Ye/=2),pt=v(Ye)*mt/Mt,St=st/Mt,an=pt*pt,fn=St*St;return[4/3*pt*(3+an-3*fn),4/3*St*(3+3*an-fn)]}Y.invert=function(Ye,Je){if(!(Ye*Ye+4*Je*Je>w*w+f)){var st=Ye,mt=Je,Mt=25;do{var pt,St=v(st),an=v(st/2),fn=a(st/2),ln=v(mt),mn=a(mt),Mn=v(2*mt),Sn=ln*ln,zn=mn*mn,$n=an*an,or=1-zn*fn*fn,Lr=or?L(mn*fn)*I(pt=1/or):pt=0,Kr=2*Lr*mn*an-Ye,oi=Lr*ln-Je,fi=pt*(zn*$n+Lr*mn*fn*Sn),Qr=pt*(.5*St*Mn-2*Lr*ln*an),ji=.25*pt*(Mn*an-Lr*ln*zn*St),Ki=pt*(Sn*fn+Lr*$n*mn),fa=Qr*ji-Ki*fi;if(!fa)break;var Vi=(oi*Qr-Kr*Ki)/fa,Oa=(Kr*ji-oi*fi)/fa;st-=Vi,mt-=Oa}while((b(Vi)>f||b(Oa)>f)&&--Mt>0);return[st,mt]}},J.invert=function(Ye,Je){if(Je*=3/8,!(Ye*=3/8)&&b(Je)>1)return null;var ln,st=1+Ye*Ye+Je*Je,mt=I((st-I(st*st-4*Je*Je))/2),Mt=R(mt)/3,pt=mt?(ln=b(Je/mt),d(ln+I(ln*ln-1))/3):function(ln){return d(ln+I(ln*ln+1))}(b(Ye))/3,St=a(Mt),an=V(pt),fn=an*an-St*St;return[2*p(Ye)*o(B(pt)*St,.25-fn),2*p(Je)*o(an*v(Mt),.25+fn)]};var $=I(8),Q=d(1+k);function se(Ye,Je){var st=b(Je);return st<M?[Ye,d(g(M+Je/2))]:[Ye*a(st)*(2*k-1/v(st)),p(Je)*(2*k*(st-M)-d(g(st/2)))]}function j(Ye){var Je=2*w/Ye;function st(mt,Mt){var pt=x.geoAzimuthalEquidistantRaw(mt,Mt);if(b(mt)>y){var St=o(pt[1],pt[0]),an=I(pt[0]*pt[0]+pt[1]*pt[1]),fn=Je*h((St-y)/Je)+y,ln=o(v(St-=fn),2-a(St));St=fn+R(w/an*v(ln))-ln,pt[0]=an*a(St),pt[1]=an*v(St)}return pt}return st.invert=function(mt,Mt){var pt=I(mt*mt+Mt*Mt);if(pt>y){var St=o(Mt,mt),an=Je*h((St-y)/Je)+y,fn=St>an?-1:1,ln=pt*a(an-St),mn=1/g(fn*L((ln-w)/I(w*(w-2*ln)+pt*pt)));St=an+2*e((mn+fn*I(mn*mn-3))/3),mt=pt*a(St),Mt=pt*v(St)}return x.geoAzimuthalEquidistantRaw.invert(mt,Mt)},st}function G(Ye,Je){if(arguments.length<2&&(Je=Ye),1===Je)return x.geoAzimuthalEqualAreaRaw;if(Je===1/0)return W;function st(mt,Mt){var pt=x.geoAzimuthalEqualAreaRaw(mt/Je,Mt);return pt[0]*=Ye,pt}return st.invert=function(mt,Mt){var pt=x.geoAzimuthalEqualAreaRaw.invert(mt/Ye,Mt);return pt[0]*=Je,pt},st}function W(Ye,Je){return[Ye*a(Je)/a(Je/=2),2*v(Je)]}function ie(Ye,Je,st){var mt,Mt,pt,St=100;st=void 0===st?0:+st,Je=+Je;do{(Mt=Ye(st))===(pt=Ye(st+f))&&(pt=Mt+f),st-=mt=-1*f*(Mt-Je)/(Mt-pt)}while(St-- >0&&b(mt)>f);return St<0?NaN:st}function q(Ye,Je,st){return void 0===Je&&(Je=40),void 0===st&&(st=1e-12),function(mt,Mt,pt,St){var an,fn,ln;pt=void 0===pt?0:+pt,St=void 0===St?0:+St;for(var mn=0;mn<Je;mn++){var Mn=Ye(pt,St),Sn=Mn[0]-mt,zn=Mn[1]-Mt;if(b(Sn)<st&&b(zn)<st)break;var $n=Sn*Sn+zn*zn;if($n>an)pt-=fn/=2,St-=ln/=2;else{an=$n;var or=(pt>0?-1:1)*st,Lr=(St>0?-1:1)*st,Kr=Ye(pt+or,St),oi=Ye(pt,St+Lr),fi=(Kr[0]-Mn[0])/or,Qr=(Kr[1]-Mn[1])/or,ji=(oi[0]-Mn[0])/Lr,Ki=(oi[1]-Mn[1])/Lr,fa=Ki*fi-Qr*ji,Vi=(b(fa)<.5?.5:1)/fa;if(pt+=fn=(zn*ji-Sn*Ki)*Vi,St+=ln=(Sn*Qr-zn*fi)*Vi,b(fn)<st&&b(ln)<st)break}}return[pt,St]}}function te(){var Ye=G(1.68,2);function Je(st,mt){if(st+mt<-1.4){var Mt=(st-mt+1.6)*(st+mt+1.4)/8;st+=Mt,mt-=.8*Mt*v(mt+w/2)}var pt=Ye(st,mt),St=(1-a(st*mt))/12;return pt[1]<0&&(pt[0]*=1+St),pt[1]>0&&(pt[1]*=1+St/1.5*pt[0]*pt[0]),pt}return Je.invert=q(Je),Je}function ne(Ye,Je){var st,mt=Ye*v(Je),Mt=30;do{Je-=st=(Je+v(Je)-mt)/(1+a(Je))}while(b(st)>f&&--Mt>0);return Je/2}function le(Ye,Je,st){function mt(Mt,pt){return[Ye*Mt*a(pt=ne(st,pt)),Je*v(pt)]}return mt.invert=function(Mt,pt){return pt=R(pt/Je),[Mt/(Ye*a(pt)),R((2*pt+v(2*pt))/st)]},mt}se.invert=function(Ye,Je){if((mt=b(Je))<Q)return[Ye,2*e(l(Je))-y];var st,mt,Mt=M,pt=25;do{var St=a(Mt/2),an=g(Mt/2);Mt-=st=($*(Mt-M)-d(an)-mt)/($-St*St/(2*an))}while(b(st)>1e-12&&--pt>0);return[Ye/(a(Mt)*($-1/v(Mt))),p(Je)*Mt]},W.invert=function(Ye,Je){var st=2*R(Je/2);return[Ye*a(st/2)/a(st),st]};var ue=le(k/y,k,w),de=2.00276;function be(Ye,Je){var st=ne(w,Je);return[de*Ye/(1/a(Je)+1.11072/a(st)),(Je+k*v(st))/de]}function ge(Ye){var Je=0,st=x.geoProjectionMutator(Ye),mt=st(Je);return mt.parallel=function(Mt){return arguments.length?st(Je=Mt*F):Je*D},mt}function we(Ye,Je){return[Ye*a(Je),Je]}function Ce(Ye){if(!Ye)return we;var Je=1/g(Ye);function st(mt,Mt){var pt=Je+Ye-Mt,St=pt&&mt*a(Mt)/pt;return[pt*v(St),Je-pt*a(St)]}return st.invert=function(mt,Mt){var pt=I(mt*mt+(Mt=Je-Mt)*Mt),St=Je+Ye-pt;return[pt/a(St)*o(mt,Mt),St]},st}function De(Ye){function Je(st,mt){var Mt=y-mt,pt=Mt&&st*Ye*v(Mt)/Mt;return[Mt*v(pt)/Ye,y-Mt*a(pt)]}return Je.invert=function(st,mt){var Mt=st*Ye,pt=y-mt,St=I(Mt*Mt+pt*pt),an=o(Mt,pt);return[(St?St/v(St):1)*an/Ye,y-St]},Je}be.invert=function(Ye,Je){var st,mt,Mt=de*Je,pt=Je<0?-M:M,St=25;do{mt=Mt-k*v(pt),pt-=st=(v(2*pt)+2*pt-w*v(mt))/(2*a(2*pt)+2+w*a(mt)*k*a(pt))}while(b(st)>f&&--St>0);return mt=Mt-k*v(pt),[Ye*(1/a(mt)+1.11072/a(pt))/de,mt]},we.invert=function(Ye,Je){return[Ye/a(Je),Je]};var Se=le(1,4/w,w);function Fe(Ye,Je,st,mt,Mt,pt){var St,an=a(pt);if(b(Ye)>1||b(pt)>1)St=L(st*Mt+Je*mt*an);else{var fn=v(Ye/2),ln=v(pt/2);St=2*R(I(fn*fn+Je*mt*ln*ln))}return b(St)>f?[St,o(mt*v(pt),Je*Mt-st*mt*an)]:[0,0]}function ve(Ye,Je,st){return L((Ye*Ye+Je*Je-st*st)/(2*Ye*Je))}function Te(Ye){return Ye-2*w*i((Ye+w)/(2*w))}function Le(Ye,Je,st){for(var mt,Mt=[[Ye[0],Ye[1],v(Ye[1]),a(Ye[1])],[Je[0],Je[1],v(Je[1]),a(Je[1])],[st[0],st[1],v(st[1]),a(st[1])]],pt=Mt[2],St=0;St<3;++St,pt=mt)pt.v=Fe((mt=Mt[St])[1]-pt[1],pt[3],pt[2],mt[3],mt[2],mt[0]-pt[0]),pt.point=[0,0];var an=ve(Mt[0].v[0],Mt[2].v[0],Mt[1].v[0]),fn=ve(Mt[0].v[0],Mt[1].v[0],Mt[2].v[0]),ln=w-an;Mt[2].point[1]=0,Mt[0].point[0]=-(Mt[1].point[0]=Mt[0].v[0]/2);var mn=[Mt[2].point[0]=Mt[0].point[0]+Mt[2].v[0]*a(an),2*(Mt[0].point[1]=Mt[1].point[1]=Mt[2].v[0]*v(an))];return function(Mn,Sn){var zn,$n=v(Sn),or=a(Sn),Lr=new Array(3);for(zn=0;zn<3;++zn){var Kr=Mt[zn];if(Lr[zn]=Fe(Sn-Kr[1],Kr[3],Kr[2],or,$n,Mn-Kr[0]),!Lr[zn][0])return Kr.point;Lr[zn][1]=Te(Lr[zn][1]-Kr.v[1])}var oi=mn.slice();for(zn=0;zn<3;++zn){var Qr=ve(Mt[zn].v[0],Lr[zn][0],Lr[2==zn?0:zn+1][0]);Lr[zn][1]<0&&(Qr=-Qr),zn?1==zn?(oi[0]-=Lr[zn][0]*a(Qr=fn-Qr),oi[1]-=Lr[zn][0]*v(Qr)):(oi[0]+=Lr[zn][0]*a(Qr=ln-Qr),oi[1]+=Lr[zn][0]*v(Qr)):(oi[0]+=Lr[zn][0]*a(Qr),oi[1]-=Lr[zn][0]*v(Qr))}return oi[0]/=3,oi[1]/=3,oi}}function Ee(Ye){return Ye[0]*=F,Ye[1]*=F,Ye}function Pe(Ye,Je,st){var mt=x.geoCentroid({type:"MultiPoint",coordinates:[Ye,Je,st]}),Mt=[-mt[0],-mt[1]],pt=x.geoRotation(Mt),St=Le(Ee(pt(Ye)),Ee(pt(Je)),Ee(pt(st)));St.invert=q(St);var an=x.geoProjection(St).rotate(Mt),fn=an.center;return delete an.rotate,an.center=function(ln){return arguments.length?fn(pt(ln)):pt.invert(fn())},an.clipAngle(90)}function je(Ye,Je){var st=I(1-v(Je));return[2/C*Ye*st,C*(1-st)]}function Ge(Ye){var Je=g(Ye);function st(mt,Mt){return[mt,(mt?mt/v(mt):1)*(v(Mt)*a(mt)-Je*a(Mt))]}return st.invert=Je?function(mt,Mt){mt&&(Mt*=v(mt)/mt);var pt=a(mt);return[mt,2*o(I(pt*pt+Je*Je-Mt*Mt)-pt,Je-Mt)]}:function(mt,Mt){return[mt,R(mt?Mt*g(mt)/mt:Mt)]},st}je.invert=function(Ye,Je){var st=(st=Je/C-1)*st;return[st>0?Ye*I(w/st)/2:0,R(1-st)]};var Ke=I(3);function lt(Ye,Je){return[Ke*Ye*(2*a(2*Je/3)-1)/C,Ke*C*v(Je/3)]}function Ue(Ye){var Je=a(Ye);function st(mt,Mt){return[mt*Je,v(Mt)/Je]}return st.invert=function(mt,Mt){return[mt/Je,R(Mt*Je)]},st}function $e(Ye){var Je=a(Ye);function st(mt,Mt){return[mt*Je,(1+Je)*g(Mt/2)]}return st.invert=function(mt,Mt){return[mt/Je,2*e(Mt/(1+Je))]},st}function et(Ye,Je){var st=I(8/(3*w));return[st*Ye*(1-b(Je)/w),st*Je]}function tt(Ye,Je){var st=I(4-3*v(b(Je)));return[2/I(6*w)*Ye*st,p(Je)*I(2*w/3)*(2-st)]}function ct(Ye,Je){var st=I(w*(4+w));return[2/st*Ye*(1+I(1-4*Je*Je/(w*w))),4/st*Je]}function xt(Ye,Je){var st=(2+y)*v(Je);Je/=2;for(var mt=0,Mt=1/0;mt<10&&b(Mt)>f;mt++){var pt=a(Je);Je-=Mt=(Je+v(Je)*(pt+2)-st)/(2*pt*(1+pt))}return[2/I(w*(4+w))*Ye*(1+a(Je)),2*I(w/(4+w))*v(Je)]}function Ct(Ye,Je){return[Ye*(1+a(Je))/I(2+w),2*Je/I(2+w)]}function Ht(Ye,Je){for(var st=(1+y)*v(Je),mt=0,Mt=1/0;mt<10&&b(Mt)>f;mt++)Je-=Mt=(Je+v(Je)-st)/(1+a(Je));return st=I(2+w),[Ye*(1+a(Je))/st,2*Je/st]}lt.invert=function(Ye,Je){var st=3*R(Je/(Ke*C));return[C*Ye/(Ke*(2*a(2*st/3)-1)),st]},et.invert=function(Ye,Je){var st=I(8/(3*w)),mt=Je/st;return[Ye/(st*(1-b(mt)/w)),mt]},tt.invert=function(Ye,Je){var st=2-b(Je)/I(2*w/3);return[Ye*I(6*w)/(2*st),p(Je)*R((4-st*st)/3)]},ct.invert=function(Ye,Je){var st=I(w*(4+w))/2;return[Ye*st/(1+I(1-Je*Je*(4+w)/(4*w))),Je*st/2]},xt.invert=function(Ye,Je){var st=Je*I((4+w)/w)/2,mt=R(st),Mt=a(mt);return[Ye/(2/I(w*(4+w))*(1+Mt)),R((mt+st*(Mt+2))/(2+y))]},Ct.invert=function(Ye,Je){var st=I(2+w),mt=Je*st/2;return[st*Ye/(1+a(mt)),mt]},Ht.invert=function(Ye,Je){var st=1+y,mt=I(st/2);return[2*Ye*mt/(1+a(Je*=mt)),R((Je+v(Je))/st)]};var zt=3+2*k;function ht(Ye,Je){var st=v(Ye/=2),mt=a(Ye),Mt=I(a(Je)),pt=a(Je/=2),St=v(Je)/(pt+k*mt*Mt),an=I(2/(1+St*St)),fn=I((k*pt+(mt+st)*Mt)/(k*pt+(mt-st)*Mt));return[zt*(an*(fn-1/fn)-2*d(fn)),zt*(an*St*(fn+1/fn)-2*e(St))]}ht.invert=function(Ye,Je){if(!(st=J.invert(Ye/1.2,1.065*Je)))return null;var st,mt=st[0],Mt=st[1],pt=20;Ye/=zt,Je/=zt;do{var St=mt/2,an=Mt/2,fn=v(St),ln=a(St),mn=v(an),Mn=a(an),Sn=a(Mt),zn=I(Sn),$n=mn/(Mn+k*ln*zn),or=$n*$n,Lr=I(2/(1+or)),Kr=(k*Mn+(ln+fn)*zn)/(k*Mn+(ln-fn)*zn),oi=I(Kr),fi=oi-1/oi,Qr=oi+1/oi,ji=Lr*fi-2*d(oi)-Ye,Ki=Lr*$n*Qr-2*e($n)-Je,fa=mn&&A*zn*fn*or/mn,Vi=(k*ln*Mn+zn)/(2*(Mn+k*ln*zn)*(Mn+k*ln*zn)*zn),Oa=-.5*$n*Lr*Lr*Lr,Lo=Oa*fa,Ua=Oa*Vi,Sa=(Sa=2*Mn+k*zn*(ln-fn))*Sa*oi,Wa=(k*ln*Mn*zn+Sn)/Sa,fo=-k*fn*mn/(zn*Sa),Io=fi*Lo-2*Wa/oi+Lr*(Wa+Wa/Kr),ho=fi*Ua-2*fo/oi+Lr*(fo+fo/Kr),us=$n*Qr*Lo-2*fa/(1+or)+Lr*Qr*fa+Lr*$n*(Wa-Wa/Kr),xs=$n*Qr*Ua-2*Vi/(1+or)+Lr*Qr*Vi+Lr*$n*(fo-fo/Kr),cs=ho*us-xs*Io;if(!cs)break;var ka=(Ki*ho-ji*xs)/cs,At=(ji*us-Ki*Io)/cs;mt-=ka,Mt=u(-y,s(y,Mt-At))}while((b(ka)>f||b(At)>f)&&--pt>0);return b(b(Mt)-y)<f?[0,Mt]:pt&&[mt,Mt]};var ut=a(35*F);function Ot(Ye,Je){var st=g(Je/2);return[Ye*ut*I(1-st*st),(1+ut)*st]}function tn(Ye,Je){var st=Je/2,mt=a(st);return[2*Ye/C*a(Je)*mt*mt,C*g(st)]}function un(Ye){var Je=1-Ye,st=Mt(w,0)[0]-Mt(-w,0)[0],mt=I(2*(Mt(0,y)[1]-Mt(0,-y)[1])/st);function Mt(an,fn){var ln=a(fn),mn=v(fn);return[ln/(Je+Ye*ln)*an,Je*fn+Ye*mn]}function pt(an,fn){var ln=Mt(an,fn);return[ln[0]*mt,ln[1]/mt]}function St(an){return pt(0,an)[1]}return pt.invert=function(an,fn){var ln=ie(St,fn);return[an/mt*(Ye+Je/a(ln)),ln]},pt}function Ze(Ye){return[Ye[0]/2,R(g(Ye[1]/2*F))*D]}function Qe(Ye){return[2*Ye[0],2*e(v(Ye[1]*F))*D]}function qe(Ye,Je){var st=2*w/Je,mt=Ye*Ye;function Mt(pt,St){var an=x.geoAzimuthalEquidistantRaw(pt,St),fn=an[0],ln=an[1],mn=fn*fn+ln*ln;if(mn>mt){var Mn=I(mn),Sn=o(ln,fn),zn=st*h(Sn/st),$n=Sn-zn,or=Ye*a($n),Lr=(Ye*v($n)-$n*v(or))/(y-or),Kr=it($n,Lr),oi=(w-Ye)/Ie(Kr,or,w);fn=Mn;var fi,Qr=50;do{fn-=fi=(Ye+Ie(Kr,or,fn)*oi-Mn)/(Kr(fn)*oi)}while(b(fi)>f&&--Qr>0);ln=$n*v(fn),fn<y&&(ln-=Lr*(fn-y));var ji=v(zn),Ki=a(zn);an[0]=fn*Ki-ln*ji,an[1]=fn*ji+ln*Ki}return an}return Mt.invert=function(pt,St){var an=pt*pt+St*St;if(an>mt){var fn=I(an),ln=o(St,pt),mn=st*h(ln/st),Mn=ln-mn;pt=fn*a(Mn),St=fn*v(Mn);for(var Sn=pt-y,zn=v(pt),$n=St/zn,or=pt<y?1/0:0,Lr=10;;){var Kr=Ye*v($n),oi=Ye*a($n),fi=v(oi),Qr=y-oi,ji=(Kr-$n*fi)/Qr,Ki=it($n,ji);if(b(or)<1e-12||!--Lr)break;$n-=or=($n*zn-ji*Sn-St)/(zn-2*Sn*(Qr*(oi+$n*Kr*a(oi)-fi)-Kr*(Kr-$n*fi))/(Qr*Qr))}pt=(fn=Ye+Ie(Ki,oi,pt)*(w-Ye)/Ie(Ki,oi,w))*a(ln=mn+$n),St=fn*v(ln)}return x.geoAzimuthalEquidistantRaw.invert(pt,St)},Mt}function it(Ye,Je){return function(st){var mt=Ye*a(st);return st<y&&(mt-=Je),I(1+mt*mt)}}function Ie(Ye,Je,st){for(var mt=(st-Je)/50,Mt=Ye(Je)+Ye(st),pt=1,St=Je;pt<50;++pt)Mt+=2*Ye(St+=mt);return.5*Mt*mt}function ze(Ye,Je,st,mt,Mt,pt,St,an){function fn(ln,mn){if(!mn)return[Ye*ln/w,0];var Mn=mn*mn,Sn=Ye+Mn*(Je+Mn*(st+Mn*mt)),zn=mn*(Mt-1+Mn*(pt-an+Mn*St)),$n=(Sn*Sn+zn*zn)/(2*zn),or=ln*R(Sn/$n)/w;return[$n*v(or),mn*(1+Mn*an)+$n*(1-a(or))]}return arguments.length<8&&(an=0),fn.invert=function(ln,mn){var Mn,Sn,zn=w*ln/Ye,$n=mn,or=50;do{var Lr=$n*$n,Kr=Ye+Lr*(Je+Lr*(st+Lr*mt)),oi=$n*(Mt-1+Lr*(pt-an+Lr*St)),fi=Kr*Kr+oi*oi,Qr=2*oi,ji=fi/Qr,Ki=ji*ji,fa=R(Kr/ji)/w,Vi=zn*fa,Oa=Kr*Kr,Lo=(2*Je+Lr*(4*st+6*Lr*mt))*$n,Ua=Mt+Lr*(3*pt+5*Lr*St),Sa=(2*(Kr*Lo+oi*(Ua-1))*Qr-fi*(2*(Ua-1)))/(Qr*Qr),Wa=a(Vi),fo=v(Vi),Io=ji*Wa,ho=ji*fo,us=zn/w*(1/I(1-Oa/Ki))*(Lo*ji-Kr*Sa)/Ki,xs=ho-ln,cs=$n*(1+Lr*an)+ji-Io-mn,ka=Sa*fo+Io*us,At=Io*fa,Yt=1+Sa-(Sa*Wa-ho*us),xn=ho*fa,rn=ka*xn-Yt*At;if(!rn)break;zn-=Mn=(cs*ka-xs*Yt)/rn,$n-=Sn=(xs*xn-cs*At)/rn}while((b(Mn)>f||b(Sn)>f)&&--or>0);return[zn,$n]},fn}Ot.invert=function(Ye,Je){var st=Je/(1+ut);return[Ye&&Ye/(ut*I(1-st*st)),2*e(st)]},tn.invert=function(Ye,Je){var st=e(Je/C),mt=a(st),Mt=2*st;return[Ye*C/2/(a(Mt)*mt*mt),Mt]};var Ve=ze(2.8284,-1.6988,.75432,-.18071,1.76003,-.38914,.042555),Be=ze(2.583819,-.835827,.170354,-.038094,1.543313,-.411435,.082742),at=ze(5/6*w,-.62636,-.0344,0,1.3493,-.05524,0,.045);function gt(Ye,Je){var st=Ye*Ye,mt=Je*Je;return[Ye*(1-.162388*mt)*(.87-952426e-9*st*st),Je*(1+mt/12)]}gt.invert=function(Ye,Je){var st,mt=Ye,Mt=Je,pt=50;do{var St=Mt*Mt;Mt-=st=(Mt*(1+St/12)-Je)/(1+St/4)}while(b(st)>f&&--pt>0);pt=50,Ye/=1-.162388*St;do{var an=(an=mt*mt)*an;mt-=st=(mt*(.87-952426e-9*an)-Ye)/(.87-.00476213*an)}while(b(st)>f&&--pt>0);return[mt,Mt]};var wt=ze(2.6516,-.76534,.19123,-.047094,1.36289,-.13965,.031762);function _t(Ye){var Je=Ye(y,0)[0]-Ye(-y,0)[0];function st(mt,Mt){var pt=mt>0?-.5:.5,St=Ye(mt+pt*w,Mt);return St[0]-=pt*Je,St}return Ye.invert&&(st.invert=function(mt,Mt){var pt=mt>0?-.5:.5,St=Ye.invert(mt+pt*Je,Mt),an=St[0]-pt*w;return an<-w?an+=2*w:an>w&&(an-=2*w),St[0]=an,St}),st}function Rt(Ye,Je){var st=p(Ye),mt=p(Je),Mt=a(Je),pt=a(Ye)*Mt,St=v(Ye)*Mt,an=v(mt*Je);Ye=b(o(St,an)),Je=R(pt),b(Ye-y)>f&&(Ye%=y);var fn=function(ln,mn){if(mn===y)return[0,0];var Mn,Sn,zn=v(mn),$n=zn*zn,or=$n*$n,Lr=1+or,Kr=1+3*or,oi=1-or,fi=R(1/I(Lr)),Qr=oi+$n*Lr*fi,ji=(1-zn)/Qr,Ki=I(ji),fa=ji*Lr,Vi=I(fa),Oa=Ki*oi;if(0===ln)return[0,-(Oa+$n*Vi)];var Lo,Ua=a(mn),Sa=1/Ua,Wa=2*zn*Ua,fo=(-Qr*Ua-(-3*$n+fi*Kr)*Wa*(1-zn))/(Qr*Qr),Io=-Sa*Wa,ho=-Sa*($n*Lr*fo+ji*Kr*Wa),us=-2*Sa*(oi*(.5*fo/Ki)-2*$n*Ki*Wa),xs=4*ln/w;if(ln>.222*w||mn<w/4&&ln>.175*w){if(Mn=(Oa+$n*I(fa*(1+or)-Oa*Oa))/(1+or),ln>w/4)return[Mn,Mn];var cs=Mn,ka=.5*Mn;Mn=.5*(ka+cs),Sn=50;do{var Yt=Mn*(us+Io*I(fa-Mn*Mn))+ho*R(Mn/Vi)-xs;if(!Yt)break;Yt<0?ka=Mn:cs=Mn,Mn=.5*(ka+cs)}while(b(cs-ka)>f&&--Sn>0)}else{Mn=f,Sn=25;do{var xn=Mn*Mn,rn=I(fa-xn),bn=us+Io*rn,Kn=Mn*bn+ho*R(Mn/Vi)-xs;Mn-=Lo=rn?Kn/(bn+(ho-Io*xn)/rn):0}while(b(Lo)>f&&--Sn>0)}return[Mn,-Oa-$n*I(fa-Mn*Mn)]}(Ye>w/4?y-Ye:Ye,Je);return Ye>w/4&&(an=fn[0],fn[0]=-fn[1],fn[1]=-an),fn[0]*=st,fn[1]*=-mt,fn}function yt(Ye,Je){var st,mt,Mt,pt,St,an;if(Je<f)return[(pt=v(Ye))-(st=Je*(Ye-pt*(mt=a(Ye)))/4)*mt,mt+st*pt,1-Je*pt*pt/2,Ye-st];if(Je>=1-f)return st=(1-Je)/4,Mt=1/(mt=V(Ye)),[(pt=((an=l(2*(an=Ye)))-1)/(an+1))+st*((St=mt*B(Ye))-Ye)/(mt*mt),Mt-st*pt*Mt*(St-Ye),Mt+st*pt*Mt*(St+Ye),2*e(l(Ye))-y+st*(St-Ye)/mt];var fn=[1,0,0,0,0,0,0,0,0],ln=[I(Je),0,0,0,0,0,0,0,0],mn=0;for(mt=I(1-Je),St=1;b(ln[mn]/fn[mn])>f&&mn<8;)st=fn[mn++],ln[mn]=(st-mt)/2,fn[mn]=(st+mt)/2,mt=I(st*mt),St*=2;Mt=St*fn[mn]*Ye;do{Mt=(R(pt=ln[mn]*v(mt=Mt)/fn[mn])+Mt)/2}while(--mn);return[v(Mt),pt=a(Mt),pt/a(Mt-mt),Mt]}function Vt(Ye,Je){if(!Je)return Ye;if(1===Je)return d(g(Ye/2+M));for(var st=1,mt=I(1-Je),Mt=I(Je),pt=0;b(Mt)>f;pt++){if(Ye%w){var St=e(mt*g(Ye)/st);St<0&&(St+=w),Ye+=St+~~(Ye/w)*w}else Ye+=Ye;Mt=(st+mt)/2,mt=I(st*mt),Mt=((st=Mt)-mt)/2}return Ye/(c(2,pt)*st)}function Nt(Ye,Je){var ln,mn,Mn,Sn,zn,st=(k-1)/(k+1),mt=I(1-st*st),Mt=Vt(y,mt*mt),pt=d(g(w/4+b(Je)/2)),St=l(-1*pt)/I(st),an=(ln=St*a(-1*Ye),Sn=(mn=St*v(-1*Ye))+1,[.5*((ln>=0?y:-y)-o(zn=1-(Mn=ln*ln)-mn*mn,2*ln)),-.25*d(zn*zn+4*Mn)+.5*d(Sn*Sn+Mn)]),fn=function(ln,mn,Mn){var Sn=b(ln),zn=B(b(mn));if(Sn){var $n=1/v(Sn),or=1/(g(Sn)*g(Sn)),Lr=-(or+Mn*(zn*zn*$n*$n)-1+Mn),Kr=(-Lr+I(Lr*Lr-(Mn-1)*or*4))/2;return[Vt(e(1/I(Kr)),Mn)*p(ln),Vt(e(I((Kr/or-1)/Mn)),1-Mn)*p(mn)]}return[0,Vt(e(zn),1-Mn)*p(mn)]}(an[0],an[1],mt*mt);return[-fn[1],(Je>=0?1:-1)*(.5*Mt-fn[0])]}function rt(Ye){var Je=v(Ye),st=a(Ye),mt=Tt(Ye);function Mt(pt,St){var an=mt(pt,St);pt=an[0];var fn=v(St=an[1]),ln=a(St),mn=a(pt),Mn=L(Je*fn+st*ln*mn),Sn=v(Mn),zn=b(Sn)>f?Mn/Sn:1;return[zn*st*v(pt),(b(pt)>y?zn:-zn)*(Je*ln-st*fn*mn)]}return mt.invert=Tt(-Ye),Mt.invert=function(pt,St){var an=I(pt*pt+St*St),fn=-v(an),ln=a(an),mn=an*ln,Mn=-St*fn,Sn=an*Je,zn=I(mn*mn+Mn*Mn-Sn*Sn),$n=o(mn*Sn+Mn*zn,Mn*Sn-mn*zn),or=(an>y?-1:1)*o(pt*fn,an*a($n)*ln+St*v($n)*fn);return mt.invert(or,$n)},Mt}function Tt(Ye){var Je=v(Ye),st=a(Ye);return function(mt,Mt){var pt=a(Mt),St=a(mt)*pt,an=v(mt)*pt,fn=v(Mt);return[o(an,St*st-fn*Je),R(fn*st+St*Je)]}}Rt.invert=function(Ye,Je){b(Ye)>1&&(Ye=2*p(Ye)-Ye),b(Je)>1&&(Je=2*p(Je)-Je);var st=p(Ye),mt=p(Je),Mt=-st*Ye,pt=-mt*Je,St=pt/Mt<1,an=function(Mn,Sn){for(var zn=0,$n=1,or=.5,Lr=50;;){var Kr=or*or,oi=I(or),fi=R(1/I(1+Kr)),Qr=1-Kr+or*(1+Kr)*fi,ji=(1-oi)/Qr,Ki=I(ji),fa=ji*(1+Kr),Vi=Ki*(1-Kr),Oa=I(fa-Mn*Mn),Lo=Sn+Vi+or*Oa;if(b($n-zn)<1e-12||0==--Lr||0===Lo)break;Lo>0?zn=or:$n=or,or=.5*(zn+$n)}if(!Lr)return null;var Ua=R(oi),Sa=a(Ua),Wa=1/Sa,fo=2*oi*Sa,Io=(-Qr*Sa-(-3*or+fi*(1+3*Kr))*fo*(1-oi))/(Qr*Qr);return[w/4*(Mn*(-2*Wa*(.5*Io/Ki*(1-Kr)-2*or*Ki*fo)+-Wa*fo*Oa)+-Wa*(or*(1+Kr)*Io+ji*(1+3*Kr)*fo)*R(Mn/I(fa))),Ua]}(St?pt:Mt,St?Mt:pt),fn=an[0],ln=an[1],mn=a(ln);return St&&(fn=-y-fn),[st*(o(v(fn)*mn,-v(ln))+w),mt*R(a(fn)*mn)]},Nt.invert=function(Ye,Je){var st,mt,Mt,pt,St,an,zn,$n,or,fn=(k-1)/(k+1),ln=I(1-fn*fn),Mn=(mt=-Ye,Mt=ln*ln,(st=.5*Vt(y,ln*ln)-Je)?(pt=yt(st,Mt),mt?(an=(St=yt(mt,1-Mt))[1]*St[1]+Mt*pt[0]*pt[0]*St[0]*St[0],[[pt[0]*St[2]/an,pt[1]*pt[2]*St[0]*St[1]/an],[pt[1]*St[1]/an,-pt[0]*pt[2]*St[0]*St[2]/an],[pt[2]*St[1]*St[2]/an,-Mt*pt[0]*pt[1]*St[0]/an]]):[[pt[0],0],[pt[1],0],[pt[2],0]]):[[0,(St=yt(mt,1-Mt))[0]/St[1]],[1/St[1],0],[St[2]/St[1],0]]),Sn=[((zn=Mn[0])[0]*($n=Mn[1])[0]+zn[1]*$n[1])/(or=$n[0]*$n[0]+$n[1]*$n[1]),(zn[1]*$n[0]-zn[0]*$n[1])/or];return[o(Sn[1],Sn[0])/-1,2*e(l(-.5*d(fn*Sn[0]*Sn[0]+fn*Sn[1]*Sn[1])))-y]};var Ut=R(1-1/3)*D,Wt=Ue(0);function sn(Ye){var Je=Ut*F,st=je(w,Je)[0]-je(-w,Je)[0],mt=Wt(0,Je)[1],Mt=je(0,Je)[1],pt=C-Mt,St=P/Ye,an=4/P,fn=mt+pt*pt*4/P;function ln(mn,Mn){var Sn,zn=b(Mn);if(zn>Je){var $n=s(Ye-1,u(0,i((mn+w)/St)));(Sn=je(mn+=w*(Ye-1)/Ye-$n*St,zn))[0]=Sn[0]*P/st-P*(Ye-1)/(2*Ye)+$n*P/Ye,Sn[1]=mt+4*(Sn[1]-Mt)*pt/P,Mn<0&&(Sn[1]=-Sn[1])}else Sn=Wt(mn,Mn);return Sn[0]*=an,Sn[1]/=fn,Sn}return ln.invert=function(mn,Mn){mn/=an;var Sn=b(Mn*=fn);if(Sn>mt){var zn=s(Ye-1,u(0,i((mn+w)/St))),$n=je.invert(mn=(mn+w*(Ye-1)/Ye-zn*St)*st/P,.25*(Sn-mt)*P/pt+Mt);return $n[0]-=w*(Ye-1)/Ye-zn*St,Mn<0&&($n[1]=-$n[1]),$n}return Wt.invert(mn,Mn)},ln}function He(Ye,Je){return[Ye,1&Je?90-f:Ut]}function vt(Ye,Je){return[Ye,1&Je?-90+f:-Ut]}function Lt(Ye){return[Ye[0]*(1-f),Ye[1]]}function Gt(Ye){var Je,st=1+Ye,mt=R(v(1/st)),Mt=2*I(w/(Je=w+4*mt*st)),pt=.5*Mt*(st+I(Ye*(2+Ye))),St=Ye*Ye,an=st*st;function fn(ln,mn){var Mn,Sn,zn=1-v(mn);if(zn&&zn<2){var $n,or=y-mn,Lr=25;do{var Kr=v(or),oi=a(or),fi=mt+o(Kr,st-oi),Qr=1+an-2*st*oi;or-=$n=(or-St*mt-st*Kr+Qr*fi-.5*zn*Je)/(2*st*Kr*fi)}while(b($n)>1e-12&&--Lr>0);Mn=Mt*I(Qr),Sn=ln*fi/w}else Mn=Mt*(Ye+zn),Sn=ln*mt/w;return[Mn*v(Sn),pt-Mn*a(Sn)]}return fn.invert=function(ln,mn){var Mn=ln*ln+(mn-=pt)*mn,Sn=(1+an-Mn/(Mt*Mt))/(2*st),zn=L(Sn),$n=v(zn),or=mt+o($n,st-Sn);return[R(ln/I(Mn))*w/or,R(1-2*(zn-St*mt-st*$n+(1+an-2*st*Sn)*or)/Je)]},fn}function Kt(Ye,Je){return Je>-.7109889596207567?((Ye=ue(Ye,Je))[1]+=.0528035274542,Ye):we(Ye,Je)}function _n(Ye,Je){return b(Je)>.7109889596207567?((Ye=ue(Ye,Je))[1]-=Je>0?.0528035274542:-.0528035274542,Ye):we(Ye,Je)}function en(Ye,Je,st,mt){var Mt=I(4*w/(2*st+(1+Ye-Je/2)*v(2*st)+(Ye+Je)/2*v(4*st)+Je/2*v(6*st))),pt=I(mt*v(st)*I((1+Ye*a(2*st)+Je*a(4*st))/(1+Ye+Je))),St=st*fn(1);function an(Mn){return I(1+Ye*a(2*Mn)+Je*a(4*Mn))}function fn(Mn){var Sn=Mn*st;return(2*Sn+(1+Ye-Je/2)*v(2*Sn)+(Ye+Je)/2*v(4*Sn)+Je/2*v(6*Sn))/st}function ln(Mn){return an(Mn)*v(Mn)}var mn=function(Mn,Sn){var zn=st*ie(fn,St*v(Sn)/st,Sn/w);isNaN(zn)&&(zn=st*p(Sn));var $n=Mt*an(zn);return[$n*pt*Mn/w*a(zn),$n/pt*v(zn)]};return mn.invert=function(Mn,Sn){var zn=ie(ln,Sn*pt/Mt);return[Mn*w/(a(zn)*Mt*pt*an(zn)),R(st*fn(zn/st)/St)]},0===st&&(Mt=I(mt/w),(mn=function(Mn,Sn){return[Mn*Mt,v(Sn)/Mt]}).invert=function(Mn,Sn){return[Mn/Mt,R(Sn*Mt)]}),mn}function wn(Ye,Je,st){function mt(zn){return Ye+(1-Ye)*c(1-c(zn,Je),1/Je)}function Mt(zn){return function on(Ye,Je,st,mt,Mt){void 0===mt&&(mt=1e-8),void 0===Mt&&(Mt=20);var pt=Ye(Je),St=Ye(.5*(Je+st)),an=Ye(st);return function fn(ln,mn,Mn,Sn,zn,$n,or,Lr,Kr,oi,fi){if(fi.nanEncountered)return NaN;var Qr,ji,Ki,fa,Vi,Oa,Lo,Ua,Sa,Wa;if(ji=ln(mn+.25*(Qr=Mn-mn)),Ki=ln(Mn-.25*Qr),isNaN(ji))fi.nanEncountered=!0;else{if(!isNaN(Ki))return Wa=((Oa=(fa=Qr*(Sn+4*ji+zn)/12)+(Vi=Qr*(zn+4*Ki+$n)/12))-or)/15,oi>Kr?(fi.maxDepthCount++,Oa+Wa):Math.abs(Wa)<Lr?Oa+Wa:(Ua=fn(ln,mn,Lo=mn+.5*Qr,Sn,ji,zn,fa,.5*Lr,Kr,oi+1,fi),isNaN(Ua)?(fi.nanEncountered=!0,NaN):(Sa=fn(ln,Lo,Mn,zn,Ki,$n,Vi,.5*Lr,Kr,oi+1,fi),isNaN(Sa)?(fi.nanEncountered=!0,NaN):Ua+Sa));fi.nanEncountered=!0}}(Ye,Je,st,pt,St,an,(pt+4*St+an)*(st-Je)/6,mt,Mt,1,{maxDepthCount:0,nanEncountered:!1})}(mt,0,zn,1e-4)}for(var pt=1/Mt(1),an=(1+1e-8)*pt,fn=[],ln=0;ln<=1e3;ln++)fn.push(Mt(ln/1e3)*an);function mn(zn){var $n=0,or=1e3,Lr=500;do{fn[Lr]>zn?or=Lr:$n=Lr,Lr=$n+or>>1}while(Lr>$n);var Kr=fn[Lr+1]-fn[Lr];return Kr&&(Kr=(zn-fn[Lr+1])/Kr),(Lr+1+Kr)/1e3}var Mn=2*mn(1)/w*pt/st,Sn=function(zn,$n){var or=mn(b(v($n))),Lr=mt(or)*zn;return or/=Mn,[Lr,$n>=0?or:-or]};return Sn.invert=function(zn,$n){var or;return b($n*=Mn)<1&&(or=p($n)*R(Mt(b($n))*pt)),[zn/mt(b($n)),or]},Sn}function On(Ye,Je){return b(Ye[0]-Je[0])<f&&b(Ye[1]-Je[1])<f}function Dn(Ye,Je){for(var st,mt,Mt,pt=-1,St=Ye.length,an=Ye[0],fn=[];++pt<St;){mt=((st=Ye[pt])[0]-an[0])/Je,Mt=(st[1]-an[1])/Je;for(var ln=0;ln<Je;++ln)fn.push([an[0]+ln*mt,an[1]+ln*Mt]);an=st}return fn.push(st),fn}function Tn(Ye){var Je,st,Mt,pt,an,fn=[],ln=Ye[0].length;for(an=0;an<ln;++an)st=(Je=Ye[0][an])[0][0],fn.push(Dn([[st+f,Je[0][1]+f],[st+f,(Mt=Je[1][1])-f],[(pt=Je[2][0])-f,Mt-f],[pt-f,Je[2][1]+f]],30));for(an=Ye[1].length-1;an>=0;--an)st=(Je=Ye[1][an])[0][0],fn.push(Dn([[(pt=Je[2][0])-f,Je[2][1]-f],[pt-f,(Mt=Je[1][1])+f],[st+f,Mt+f],[st+f,Je[0][1]-f]],30));return{type:"Polygon",coordinates:[T.merge(fn)]}}function pn(Ye,Je,st){var mt,Mt;function pt(fn,ln){for(var mn=ln<0?-1:1,Mn=Je[+(ln<0)],Sn=0,zn=Mn.length-1;Sn<zn&&fn>Mn[Sn][2][0];++Sn);var $n=Ye(fn-Mn[Sn][1][0],ln);return $n[0]+=Ye(Mn[Sn][1][0],mn*ln>mn*Mn[Sn][0][1]?Mn[Sn][0][1]:ln)[0],$n}st?pt.invert=st(pt):Ye.invert&&(pt.invert=function(fn,ln){for(var mn=Mt[+(ln<0)],Mn=Je[+(ln<0)],Sn=0,zn=mn.length;Sn<zn;++Sn){var $n=mn[Sn];if($n[0][0]<=fn&&fn<$n[1][0]&&$n[0][1]<=ln&&ln<$n[1][1]){var or=Ye.invert(fn-Ye(Mn[Sn][1][0],0)[0],ln);return or[0]+=Mn[Sn][1][0],On(pt(or[0],or[1]),[fn,ln])?or:null}}});var St=x.geoProjection(pt),an=St.stream;return St.stream=function(fn){var ln=St.rotate(),mn=an(fn),Mn=(St.rotate([0,0]),an(fn));return St.rotate(ln),mn.sphere=function(){x.geoStream(mt,Mn)},mn},St.lobes=function(fn){return arguments.length?(mt=Tn(fn),Je=fn.map(function(ln){return ln.map(function(mn){return[[mn[0][0]*F,mn[0][1]*F],[mn[1][0]*F,mn[1][1]*F],[mn[2][0]*F,mn[2][1]*F]]})}),Mt=Je.map(function(ln){return ln.map(function(mn){var Mn,Sn=Ye(mn[0][0],mn[0][1])[0],zn=Ye(mn[2][0],mn[2][1])[0],$n=Ye(mn[1][0],mn[0][1])[1],or=Ye(mn[1][0],mn[1][1])[1];return $n>or&&(Mn=$n,$n=or,or=Mn),[[Sn,$n],[zn,or]]})}),St):Je.map(function(ln){return ln.map(function(mn){return[[mn[0][0]*D,mn[0][1]*D],[mn[1][0]*D,mn[1][1]*D],[mn[2][0]*D,mn[2][1]*D]]})})},null!=Je&&St.lobes(Je),St}Kt.invert=function(Ye,Je){return Je>-.7109889596207567?ue.invert(Ye,Je-.0528035274542):we.invert(Ye,Je)},_n.invert=function(Ye,Je){return b(Je)>.7109889596207567?ue.invert(Ye,Je+(Je>0?.0528035274542:-.0528035274542)):we.invert(Ye,Je)};var En=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],Un=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],In=[[[[-180,0],[-100,90],[-40,0]],[[-40,0],[30,90],[180,0]]],[[[-180,0],[-160,-90],[-100,0]],[[-100,0],[-60,-90],[-20,0]],[[-20,0],[20,-90],[80,0]],[[80,0],[140,-90],[180,0]]]],sr=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]],fr=[[[[-180,35],[-30,90],[0,35]],[[0,35],[30,90],[180,35]]],[[[-180,-10],[-102,-90],[-65,-10]],[[-65,-10],[5,-90],[77,-10]],[[77,-10],[103,-90],[180,-10]]]],rr=[[[[-180,0],[-110,90],[-40,0]],[[-40,0],[0,90],[40,0]],[[40,0],[110,90],[180,0]]],[[[-180,0],[-110,-90],[-40,0]],[[-40,0],[0,-90],[40,0]],[[40,0],[110,-90],[180,0]]]];function qr(Ye,Je){return[3/P*Ye*I(w*w/3-Je*Je),Je]}function ti(Ye){function Je(st,mt){if(b(b(mt)-y)<f)return[0,mt<0?-2:2];var Mt=v(mt),pt=c((1+Mt)/(1-Mt),Ye/2),St=.5*(pt+1/pt)+a(st*=Ye);return[2*v(st)/St,(pt-1/pt)/St]}return Je.invert=function(st,mt){var Mt=b(mt);if(b(Mt-2)<f)return st?null:[0,p(mt)*y];if(Mt>2)return null;var pt=(st/=2)*st,St=(mt/=2)*mt,an=2*mt/(1+pt+St);return an=c((1+an)/(1-an),1/Ye),[o(2*st,1-pt-St)/Ye,R((an-1)/(an+1))]},Je}qr.invert=function(Ye,Je){return[P/3*Ye/I(w*w/3-Je*Je),Je]};var Ar=w/k;function pr(Ye,Je){return[Ye*(1+I(a(Je)))/2,Je/(a(Je/2)*a(Ye/6))]}function Fn(Ye,Je){var st=Ye*Ye,mt=Je*Je;return[Ye*(.975534+mt*(-.0143059*st-.119161+-.0547009*mt)),Je*(1.00384+st*(.0802894+-.02855*mt+199025e-9*st)+mt*(.0998909+-.0491032*mt))]}function Rn(Ye,Je){return[v(Ye)/a(Je),g(Je)*a(Ye)]}function hr(Ye){var Je=a(Ye),st=g(M+Ye/2);function mt(Mt,pt){var St=pt-Ye,an=b(St)<f?Mt*Je:b(an=M+pt/2)<f||b(b(an)-y)<f?0:Mt*St/d(g(an)/st);return[an,St]}return mt.invert=function(Mt,pt){var St,an=pt+Ye;return[b(pt)<f?Mt/Je:b(St=M+an/2)<f||b(b(St)-y)<f?0:Mt*d(g(St)/st)/pt,an]},mt}function ri(Ye,Je){return[Ye,1.25*d(g(M+.4*Je))]}function ir(Ye){var Je=Ye.length-1;function st(mt,Mt){for(var pt,St=a(Mt),an=2/(1+St*a(mt)),fn=an*St*v(mt),ln=an*v(Mt),mn=Je,Mn=Ye[mn],Sn=Mn[0],zn=Mn[1];--mn>=0;)Sn=(Mn=Ye[mn])[0]+fn*(pt=Sn)-ln*zn,zn=Mn[1]+fn*zn+ln*pt;return[Sn=fn*(pt=Sn)-ln*zn,zn=fn*zn+ln*pt]}return st.invert=function(mt,Mt){var pt=20,St=mt,an=Mt;do{for(var fn,ln=Je,mn=Ye[ln],Mn=mn[0],Sn=mn[1],zn=0,$n=0;--ln>=0;)zn=Mn+St*(fn=zn)-an*$n,$n=Sn+St*$n+an*fn,Mn=(mn=Ye[ln])[0]+St*(fn=Mn)-an*Sn,Sn=mn[1]+St*Sn+an*fn;var or,Lr,Kr=(zn=Mn+St*(fn=zn)-an*$n)*zn+($n=Sn+St*$n+an*fn)*$n;St-=or=((Mn=St*(fn=Mn)-an*Sn-mt)*zn+(Sn=St*Sn+an*fn-Mt)*$n)/Kr,an-=Lr=(Sn*zn-Mn*$n)/Kr}while(b(or)+b(Lr)>1e-12&&--pt>0);if(pt){var oi=I(St*St+an*an),fi=2*e(.5*oi),Qr=v(fi);return[o(St*Qr,oi*a(fi)),oi?R(an*Qr/oi):0]}},st}pr.invert=function(Ye,Je){var st=b(Ye),mt=b(Je),Mt=f,pt=y;mt<Ar?pt*=mt/Ar:Mt+=6*L(Ar/mt);for(var St=0;St<25;St++){var an=v(pt),fn=I(a(pt)),ln=v(pt/2),mn=a(pt/2),Mn=v(Mt/6),Sn=a(Mt/6),zn=.5*Mt*(1+fn)-st,$n=pt/(mn*Sn)-mt,or=fn?-.25*Mt*an/fn:0,Lr=.5*(1+fn),Kr=(1+.5*pt*ln/mn)/(mn*Sn),oi=pt/mn*(Mn/6)/(Sn*Sn),fi=or*oi-Kr*Lr,Qr=(zn*oi-$n*Lr)/fi,ji=($n*or-zn*Kr)/fi;if(pt-=Qr,Mt-=ji,b(Qr)<f&&b(ji)<f)break}return[Ye<0?-Mt:Mt,Je<0?-pt:pt]},Fn.invert=function(Ye,Je){var st=p(Ye)*w,mt=Je/2,Mt=50;do{var pt=st*st,St=mt*mt,an=st*mt,fn=st*(.975534+St*(-.0143059*pt-.119161+-.0547009*St))-Ye,ln=mt*(1.00384+pt*(.0802894+-.02855*St+199025e-9*pt)+St*(.0998909+-.0491032*St))-Je,mn=.975534-St*(.119161+3*pt*.0143059+.0547009*St),Mn=-an*(.238322+.2188036*St+.0286118*pt),Sn=an*(.1605788+7961e-7*pt+-.0571*St),zn=1.00384+pt*(.0802894+199025e-9*pt)+St*(3*(.0998909-.02855*pt)-.245516*St),$n=Mn*Sn-zn*mn,or=(ln*Mn-fn*zn)/$n,Lr=(fn*Sn-ln*mn)/$n;st-=or,mt-=Lr}while((b(or)>f||b(Lr)>f)&&--Mt>0);return Mt&&[st,mt]},Rn.invert=function(Ye,Je){var st=Ye*Ye,mt=Je*Je+1,Mt=st+mt,pt=Ye?A*I((Mt-I(Mt*Mt-4*st))/st):1/I(mt);return[R(Ye*pt),p(Je)*L(pt)]},ri.invert=function(Ye,Je){return[Ye,2.5*e(l(.8*Je))-.625*w]};var Ur=[[.9972523,0],[.0052513,-.0041175],[.0074606,.0048125],[-.0153783,-.1968253],[.0636871,-.1408027],[.3660976,-.2937382]],Mr=[[.98879,0],[0,0],[-.050909,0],[0,0],[.075528,0]],wr=[[.984299,0],[.0211642,.0037608],[-.1036018,-.0575102],[-.0329095,-.0320119],[.0499471,.1223335],[.026046,.0899805],[7388e-7,-.1435792],[.0075848,-.1334108],[-.0216473,.0776645],[-.0225161,.0853673]],ii=[[.9245,0],[0,0],[.01943,0]],gn=[[.721316,0],[0,0],[-.00881625,-.00617325]];function jt(Ye,Je){var st=x.geoProjection(ir(Ye)).rotate(Je).clipAngle(90),mt=x.geoRotation(Je),Mt=st.center;return delete st.rotate,st.center=function(pt){return arguments.length?Mt(mt(pt)):mt.invert(Mt())},st}var Jt=I(6),An=I(7);function Hn(Ye,Je){var st=R(7*v(Je)/(3*Jt));return[Jt*Ye*(2*a(2*st/3)-1)/An,9*v(st/3)/An]}function yr(Ye,Je){for(var st,mt=(1+A)*v(Je),Mt=Je,pt=0;pt<25&&(Mt-=st=(v(Mt/2)+v(Mt)-mt)/(.5*a(Mt/2)+a(Mt)),!(b(st)<f));pt++);return[Ye*(1+2*a(Mt)/a(Mt/2))/(3*k),2*I(3)*v(Mt/2)/I(2+k)]}function gr(Ye,Je){for(var st,mt=I(6/(4+w)),Mt=(1+w/4)*v(Je),pt=Je/2,St=0;St<25&&(pt-=st=(pt/2+v(pt)-Mt)/(.5+a(pt)),!(b(st)<f));St++);return[mt*(.5+a(pt))*Ye/1.5,mt*pt]}function Bn(Ye,Je){var st=Je*Je,mt=st*st,Mt=st*mt;return[Ye*(.84719-.13063*st+Mt*Mt*(.05494*st-.04515-.02326*mt+.00331*Mt)),Je*(1.01183+mt*mt*(.01926*st-.02625-.00396*mt))]}function Nn(Ye,Je){return[Ye*(1+a(Je))/2,2*(Je-g(Je/2))]}Hn.invert=function(Ye,Je){var st=3*R(Je*An/9);return[Ye*An/(Jt*(2*a(2*st/3)-1)),R(3*v(st)*Jt/7)]},yr.invert=function(Ye,Je){var st=Je*I(2+k)/(2*I(3)),mt=2*R(st);return[3*k*Ye/(1+2*a(mt)/a(mt/2)),R((st+v(mt))/(1+A))]},gr.invert=function(Ye,Je){var st=I(6/(4+w)),mt=Je/st;return b(b(mt)-y)<f&&(mt=mt<0?-y:y),[1.5*Ye/(st*(.5+a(mt))),R((mt/2+v(mt))/(1+w/4))]},Bn.invert=function(Ye,Je){var st,mt,Mt,pt,St=Je,an=25;do{St-=st=(St*(1.01183+(Mt=(mt=St*St)*mt)*Mt*(.01926*mt-.02625-.00396*Mt))-Je)/(1.01183+Mt*Mt*(.21186*mt-.23625+-.05148*Mt))}while(b(st)>1e-12&&--an>0);return[Ye/(.84719-.13063*(mt=St*St)+(pt=mt*(Mt=mt*mt))*pt*(.05494*mt-.04515-.02326*Mt+.00331*pt)),St]},Nn.invert=function(Ye,Je){for(var st=Je/2,mt=0,Mt=1/0;mt<10&&b(Mt)>f;++mt){var pt=a(Je/2);Je-=Mt=(Je-g(Je/2)-st)/(1-.5/(pt*pt))}return[2*Ye/(1+a(Je)),Je]};var Zn=[[[[-180,0],[-90,90],[0,0]],[[0,0],[90,90],[180,0]]],[[[-180,0],[-90,-90],[0,0]],[[0,0],[90,-90],[180,0]]]];function Wn(Ye,Je){var st=v(Je),mt=a(Je),Mt=p(Ye);if(0===Ye||b(Je)===y)return[0,Je];if(0===Je)return[Ye,0];if(b(Ye)===y)return[Ye*mt,y*st];var pt=w/(2*Ye)-2*Ye/w,St=2*Je/w,an=(1-St*St)/(st-St),fn=pt*pt,ln=an*an,mn=1+fn/ln,Mn=1+ln/fn,Sn=(pt*st/an-pt/2)/mn,zn=(ln*st/fn+an/2)/Mn,$n=zn*zn-(ln*st*st/fn+an*st-1)/Mn;return[y*(Sn+I(Sn*Sn+mt*mt/mn)*Mt),y*(zn+I($n<0?0:$n)*p(-Je*pt)*Mt)]}function jn(Ye,Je){var st=Je*Je;return[Ye,Je*(1.0148+st*st*(.23185+st*(.02406*st-.14499)))]}function xr(Ye,Je){if(b(Je)<f)return[Ye,0];var st=g(Je),mt=Ye*v(Je);return[v(mt)/st,Je+(1-a(mt))/st]}function Vr(Ye,Je){return[Ye[0]*Je[0]+Ye[1]*Je[3],Ye[0]*Je[1]+Ye[1]*Je[4],Ye[0]*Je[2]+Ye[1]*Je[5]+Ye[2],Ye[3]*Je[0]+Ye[4]*Je[3],Ye[3]*Je[1]+Ye[4]*Je[4],Ye[3]*Je[2]+Ye[4]*Je[5]+Ye[5]]}function qn(Ye,Je){return[Ye[0]-Je[0],Ye[1]-Je[1]]}function jr(Ye){return I(Ye[0]*Ye[0]+Ye[1]*Ye[1])}function tr(Ye,Je,st){function mt(St,an){var fn,ln=Je(St,an),mn=ln.project([St*D,an*D]);return(fn=ln.transform)?[fn[0]*mn[0]+fn[1]*mn[1]+fn[2],-(fn[3]*mn[0]+fn[4]*mn[1]+fn[5])]:(mn[1]=-mn[1],mn)}(function St(an,fn){if(an.edges=function($n){for(var or=$n.length,Lr=[],Kr=$n[or-1],oi=0;oi<or;++oi)Lr.push([Kr,Kr=$n[oi]]);return Lr}(an.face),fn.face){var ln=an.shared=function($n,or){for(var Lr,Kr,oi=$n.length,fi=null,Qr=0;Qr<oi;++Qr){Lr=$n[Qr];for(var ji=or.length;--ji>=0;)if(Lr[0]===(Kr=or[ji])[0]&&Lr[1]===Kr[1]){if(fi)return[fi,Lr];fi=Lr}}}(an.face,fn.face),mn=function Ir(Ye,Je){var St,an,st=qn(Ye[1],Ye[0]),mt=qn(Je[1],Je[0]),Mt=o((St=st)[0]*(an=mt)[1]-St[1]*an[0],St[0]*an[0]+St[1]*an[1]),pt=jr(st)/jr(mt);return Vr([1,0,Ye[0][0],0,1,Ye[0][1]],Vr([pt,0,0,0,pt,0],Vr([a(Mt),v(Mt),0,-v(Mt),a(Mt),0],[1,0,-Je[0][0],0,1,-Je[0][1]])))}(ln.map(fn.project),ln.map(an.project));an.transform=fn.transform?Vr(fn.transform,mn):mn;for(var Mn=fn.edges,Sn=0,zn=Mn.length;Sn<zn;++Sn)ur(ln[0],Mn[Sn][1])&&ur(ln[1],Mn[Sn][0])&&(Mn[Sn]=an),ur(ln[0],Mn[Sn][0])&&ur(ln[1],Mn[Sn][1])&&(Mn[Sn]=an);for(Sn=0,zn=(Mn=an.edges).length;Sn<zn;++Sn)ur(ln[0],Mn[Sn][0])&&ur(ln[1],Mn[Sn][1])&&(Mn[Sn]=fn),ur(ln[0],Mn[Sn][1])&&ur(ln[1],Mn[Sn][0])&&(Mn[Sn]=fn)}else an.transform=fn.transform;return an.children&&an.children.forEach(function($n){St($n,an)}),an})(Ye,{transform:null}),Cr(Ye)&&(mt.invert=function(St,an){var fn=function ln(mn,Mn){var fi,Qr,Sn=mn.project.invert,zn=mn.transform,$n=Mn;if(zn&&($n=[(zn=[(Qr=1/((fi=zn)[0]*fi[4]-fi[1]*fi[3]))*fi[4],-Qr*fi[1],Qr*(fi[1]*fi[5]-fi[2]*fi[4]),-Qr*fi[3],Qr*fi[0],Qr*(fi[2]*fi[3]-fi[0]*fi[5])])[0]*$n[0]+zn[1]*$n[1]+zn[2],zn[3]*$n[0]+zn[4]*$n[1]+zn[5]]),Sn&&mn===function(fi){return Je(fi[0]*F,fi[1]*F)}(or=Sn($n)))return or;for(var or,Lr=mn.children,Kr=0,oi=Lr&&Lr.length;Kr<oi;++Kr)if(or=ln(Lr[Kr],Mn))return or}(Ye,[St,-an]);return fn&&(fn[0]*=F,fn[1]*=F,fn)});var Mt=x.geoProjection(mt),pt=Mt.stream;return Mt.stream=function(St){var an=Mt.rotate(),fn=pt(St),ln=(Mt.rotate([0,0]),pt(St));return Mt.rotate(an),fn.sphere=function(){ln.polygonStart(),ln.lineStart(),function mn(Mn,Sn,zn){var $n,or,Lr=Sn.edges,Kr=Lr.length,oi={type:"MultiPoint",coordinates:Sn.face},fi=Sn.face.filter(function(Lo){return 90!==b(Lo[1])}),Qr=x.geoBounds({type:"MultiPoint",coordinates:fi}),ji=!1,Ki=-1,fa=Qr[1][0]-Qr[0][0],Vi=180===fa||360===fa?[(Qr[0][0]+Qr[1][0])/2,(Qr[0][1]+Qr[1][1])/2]:x.geoCentroid(oi);if(zn)for(;++Ki<Kr&&Lr[Ki]!==zn;);++Ki;for(var Oa=0;Oa<Kr;++Oa)or=Lr[(Oa+Ki)%Kr],Array.isArray(or)?(ji||(Mn.point(($n=x.geoInterpolate(or[0],Vi)(f))[0],$n[1]),ji=!0),Mn.point(($n=x.geoInterpolate(or[1],Vi)(f))[0],$n[1])):(ji=!1,or!==zn&&mn(Mn,or,Sn))}(ln,Ye),ln.lineEnd(),ln.polygonEnd()},fn},Mt.angle(null==st?-30:st*D)}function ur(Ye,Je){return Ye&&Je&&Ye[0]===Je[0]&&Ye[1]===Je[1]}function Cr(Ye){return Ye.project.invert||Ye.children&&Ye.children.some(Cr)}Wn.invert=function(Ye,Je){var st=(Ye/=y)*Ye,mt=st+(Je/=y)*Je,Mt=w*w;return[Ye?(mt-1+I((1-mt)*(1-mt)+4*st))/(2*Ye)*y:0,ie(function(pt){return mt*(w*v(pt)-2*pt)*w+4*pt*pt*(Je-v(pt))+2*w*pt-Mt*Je},0)]},jn.invert=function(Ye,Je){Je>1.790857183?Je=1.790857183:Je<-1.790857183&&(Je=-1.790857183);var st,mt=Je;do{var Mt=mt*mt;mt-=st=(mt*(1.0148+Mt*Mt*(.23185+Mt*(.02406*Mt-.14499)))-Je)/(1.0148+Mt*Mt*(5*.23185+Mt*(.21654*Mt-1.01493)))}while(b(st)>f);return[Ye,mt]},xr.invert=function(Ye,Je){if(b(Je)<f)return[Ye,0];var st,mt=Ye*Ye+Je*Je,Mt=.5*Je,pt=10;do{var St=g(Mt),an=1/a(Mt),fn=mt-2*Je*Mt+Mt*Mt;Mt-=st=(St*fn+2*(Mt-Je))/(2+fn*an*an+2*(Mt-Je)*St)}while(b(st)>f&&--pt>0);return St=g(Mt),[(b(Je)<b(Mt+1/St)?R(Ye*St):p(Je)*p(Ye)*(L(b(Ye*St))+y))/v(Mt),Mt]};var Fr=[[0,90],[-90,0],[0,0],[90,0],[180,0],[0,-90]],Zr=[[0,2,1],[0,3,2],[5,1,2],[5,2,3],[0,1,4],[0,4,3],[5,4,1],[5,3,4]].map(function(Ye){return Ye.map(function(Je){return Fr[Je]})}),Ii=2/I(3);function gi(Ye,Je){var st=je(Ye,Je);return[st[0]*Ii,st[1]]}function zr(Ye,Je){for(var st=0,mt=Ye.length,Mt=0;st<mt;++st)Mt+=Ye[st]*Je[st];return Mt}function Ci(Ye){return[o(Ye[1],Ye[0])*D,R(u(-1,s(1,Ye[2])))*D]}function qi(Ye){var Je=Ye[0]*F,st=Ye[1]*F,mt=a(st);return[mt*a(Je),mt*v(Je),v(st)]}function ki(){}function Do(Ye,Je){return{type:"FeatureCollection",features:Ye.features.map(function(st){return $a(st,Je)})}}function $a(Ye,Je){return{type:"Feature",id:Ye.id,properties:Ye.properties,geometry:Ka(Ye.geometry,Je)}}function Ka(Ye,Je){if(!Ye)return null;if("GeometryCollection"===Ye.type)return Mt=Je,{type:"GeometryCollection",geometries:Ye.geometries.map(function(pt){return Ka(pt,Mt)})};var Mt,st;switch(Ye.type){case"Point":case"MultiPoint":st=zo;break;case"LineString":case"MultiLineString":st=Ho;break;case"Polygon":case"MultiPolygon":case"Sphere":st=Sl;break;default:return null}return x.geoStream(Ye,Je(st)),st.result()}gi.invert=function(Ye,Je){return je.invert(Ye/Ii,Je)};var ga=[],Na=[],zo={point:function(Ye,Je){ga.push([Ye,Je])},result:function(){var Ye=ga.length?ga.length<2?{type:"Point",coordinates:ga[0]}:{type:"MultiPoint",coordinates:ga}:null;return ga=[],Ye}},Ho={lineStart:ki,point:function(Ye,Je){ga.push([Ye,Je])},lineEnd:function(){ga.length&&(Na.push(ga),ga=[])},result:function(){var Ye=Na.length?Na.length<2?{type:"LineString",coordinates:Na[0]}:{type:"MultiLineString",coordinates:Na}:null;return Na=[],Ye}},Sl={polygonStart:ki,lineStart:ki,point:function(Ye,Je){ga.push([Ye,Je])},lineEnd:function(){var Ye=ga.length;if(Ye){do{ga.push(ga[0].slice())}while(++Ye<4);Na.push(ga),ga=[]}},polygonEnd:ki,result:function(){if(!Na.length)return null;var Ye=[],Je=[];return Na.forEach(function(st){!function(mt){if((Mt=mt.length)<4)return!1;for(var Mt,pt=0,St=mt[Mt-1][1]*mt[0][0]-mt[Mt-1][0]*mt[0][1];++pt<Mt;)St+=mt[pt-1][1]*mt[pt][0]-mt[pt-1][0]*mt[pt][1];return St<=0}(st)?Je.push(st):Ye.push([st])}),Je.forEach(function(st){var mt=st[0];Ye.some(function(Mt){if(function(pt,St){for(var an=St[0],fn=St[1],ln=!1,mn=0,Mn=pt.length,Sn=Mn-1;mn<Mn;Sn=mn++){var zn=pt[mn],$n=zn[0],or=zn[1],Lr=pt[Sn],oi=Lr[1];or>fn^oi>fn&&an<(Lr[0]-$n)*(fn-or)/(oi-or)+$n&&(ln=!ln)}return ln}(Mt[0],mt))return Mt.push(st),!0})||Ye.push([st])}),Na=[],Ye.length?Ye.length>1?{type:"MultiPolygon",coordinates:Ye}:{type:"Polygon",coordinates:Ye[0]}:null}};function ls(Ye){var Je=Ye(y,0)[0]-Ye(-y,0)[0];function st(mt,Mt){var pt=b(mt)<y,St=Ye(pt?mt:mt>0?mt-w:mt+w,Mt),an=(St[0]-St[1])*A,fn=(St[0]+St[1])*A;if(pt)return[an,fn];var ln=Je*A,mn=an>0^fn>0?-1:1;return[mn*an-p(fn)*ln,mn*fn-p(an)*ln]}return Ye.invert&&(st.invert=function(mt,Mt){var pt=(mt+Mt)*A,St=(Mt-mt)*A,an=b(pt)<.5*Je&&b(St)<.5*Je;if(!an){var fn=Je*A,ln=pt>0^St>0?-1:1,mn=-ln*mt+(St>0?1:-1)*fn,Mn=-ln*Mt+(pt>0?1:-1)*fn;pt=(-mn-Mn)*A,St=(mn-Mn)*A}var Sn=Ye.invert(pt,St);return an||(Sn[0]+=pt>0?w:-w),Sn}),x.geoProjection(st).rotate([-90,-90,45]).clipAngle(179.999)}function yo(){return ls(Nt).scale(111.48)}function dl(Ye){var Je=v(Ye);function st(mt,Mt){var pt=Je?g(mt*Je/2)/Je:mt/2;if(!Mt)return[2*pt,-Ye];var St=2*e(pt*v(Mt)),an=1/g(Mt);return[v(St)*an,Mt+(1-a(St))*an-Ye]}return st.invert=function(mt,Mt){if(b(Mt+=Ye)<f)return[Je?2*e(Je*mt/2)/Je:mt,0];var pt,St=mt*mt+Mt*Mt,an=0,fn=10;do{var ln=g(an),mn=1/a(an),Mn=St-2*Mt*an+an*an;an-=pt=(ln*Mn+2*(an-Mt))/(2+Mn*mn*mn+2*(an-Mt)*ln)}while(b(pt)>f&&--fn>0);var Sn=mt*(ln=g(an)),zn=g(b(Mt)<b(an+1/ln)?.5*R(Sn):.5*L(Sn)+w/4)/v(an);return[Je?2*e(Je*zn)/Je:2*zn,an]},st}var Ba=[[.9986,-.062],[1,0],[.9986,.062],[.9954,.124],[.99,.186],[.9822,.248],[.973,.31],[.96,.372],[.9427,.434],[.9216,.4958],[.8962,.5571],[.8679,.6176],[.835,.6769],[.7986,.7346],[.7597,.7903],[.7186,.8435],[.6732,.8936],[.6213,.9394],[.5722,.9761],[.5322,1]];function Ws(Ye,Je){var st,mt=s(18,36*b(Je)/w),Mt=i(mt),pt=mt-Mt,St=(st=Ba[Mt])[0],an=st[1],fn=(st=Ba[++Mt])[0],ln=st[1],mn=(st=Ba[s(19,++Mt)])[0],Mn=st[1];return[Ye*(fn+pt*(mn-St)/2+pt*pt*(mn-2*fn+St)/2),(Je>0?y:-y)*(ln+pt*(Mn-an)/2+pt*pt*(Mn-2*ln+an)/2)]}function Os(Ye,Je){var st=function(St){function an(fn,ln){var mn=a(ln),Mn=(St-1)/(St-mn*a(fn));return[Mn*mn*v(fn),Mn*v(ln)]}return an.invert=function(fn,ln){var mn=fn*fn+ln*ln,Mn=I(mn),Sn=(St-I(1-mn*(St+1)/(St-1)))/((St-1)/Mn+Mn/(St-1));return[o(fn*Sn,Mn*I(1-Sn*Sn)),Mn?R(ln*Sn/Mn):0]},an}(Ye);if(!Je)return st;var mt=a(Je),Mt=v(Je);function pt(St,an){var fn=st(St,an),ln=fn[1],mn=ln*Mt/(Ye-1)+mt;return[fn[0]*mt/mn,ln/mn]}return pt.invert=function(St,an){var fn=(Ye-1)/(Ye-1-an*Mt);return st.invert(fn*St,fn*an*mt)},pt}Ba.forEach(function(Ye){Ye[1]*=1.0144}),Ws.invert=function(Ye,Je){var st=Je/y,mt=90*st,Mt=s(18,b(mt/5)),pt=u(0,i(Mt));do{var St=Ba[pt][1],an=Ba[pt+1][1],fn=Ba[s(19,pt+2)][1],ln=fn-St,mn=fn-2*an+St,Mn=2*(b(st)-an)/ln,Sn=mn/ln,zn=Mn*(1-Sn*Mn*(1-2*Sn*Mn));if(zn>=0||1===pt){mt=(Je>=0?5:-5)*(zn+Mt);var $n,or=50;do{zn=(Mt=s(18,b(mt)/5))-(pt=i(Mt)),St=Ba[pt][1],an=Ba[pt+1][1],fn=Ba[s(19,pt+2)][1],mt-=($n=(Je>=0?y:-y)*(an+zn*(fn-St)/2+zn*zn*(fn-2*an+St)/2)-Je)*D}while(b($n)>1e-12&&--or>0);break}}while(--pt>=0);var Lr=Ba[pt][0],Kr=Ba[pt+1][0],oi=Ba[s(19,pt+2)][0];return[Ye/(Kr+zn*(oi-Lr)/2+zn*zn*(oi-2*Kr+Lr)/2),mt*F]};var sa=-179.9999,vs=179.9999,Rs=-89.9999;function es(Ye){return Ye.length>0}function pa(Ye){return-90===Ye||90===Ye?[0,Ye]:[-180,(Je=Ye,Math.floor(1e4*Je)/1e4)];var Je}function oo(Ye){var Je=Ye[0],st=Ye[1],mt=!1;return Je<=sa?(Je=-180,mt=!0):Je>=vs&&(Je=180,mt=!0),st<=Rs?(st=-90,mt=!0):st>=89.9999&&(st=90,mt=!0),mt?[Je,st]:Ye}function Zo(Ye){return Ye.map(oo)}function zl(Ye,Je,st){for(var mt=0,Mt=Ye.length;mt<Mt;++mt){var pt=Ye[mt].slice();st.push({index:-1,polygon:Je,ring:pt});for(var St=0,an=pt.length;St<an;++St){var fn=pt[St],ln=fn[0],mn=fn[1];if(ln<=sa||ln>=vs||mn<=Rs||mn>=89.9999){pt[St]=oo(fn);for(var Mn=St+1;Mn<an;++Mn){var Sn=pt[Mn],zn=Sn[0],$n=Sn[1];if(zn>sa&&zn<vs&&$n>Rs&&$n<89.9999)break}if(Mn===St+1)continue;if(St){var or={index:-1,polygon:Je,ring:pt.slice(0,St+1)};or.ring[or.ring.length-1]=pa(mn),st[st.length-1]=or}else st.pop();if(Mn>=an)break;st.push({index:-1,polygon:Je,ring:pt=pt.slice(Mn-1)}),pt[0]=pa(pt[0][1]),St=-1,an=pt.length}}}}function ru(Ye){var Je,st,mt,Mt,pt,St,an=Ye.length,fn={},ln={};for(Je=0;Je<an;++Je)(mt=(st=Ye[Je]).ring[0])[0]!==(pt=st.ring[st.ring.length-1])[0]||mt[1]!==pt[1]?(st.index=Je,fn[mt]=ln[pt]=st):(st.polygon.push(st.ring),Ye[Je]=null);for(Je=0;Je<an;++Je)if(st=Ye[Je]){if(Mt=ln[mt=st.ring[0]],St=fn[pt=st.ring[st.ring.length-1]],delete fn[mt],delete ln[pt],mt[0]===pt[0]&&mt[1]===pt[1]){st.polygon.push(st.ring);continue}Mt?(delete ln[mt],delete fn[Mt.ring[0]],Mt.ring.pop(),Ye[Mt.index]=null,st={index:-1,polygon:Mt.polygon,ring:Mt.ring.concat(st.ring)},Mt===St?st.polygon.push(st.ring):(st.index=an++,Ye.push(fn[st.ring[0]]=ln[st.ring[st.ring.length-1]]=st))):St?(delete fn[pt],delete ln[St.ring[St.ring.length-1]],st.ring.pop(),st={index:an++,polygon:St.polygon,ring:st.ring.concat(St.ring)},Ye[St.index]=null,Ye.push(fn[st.ring[0]]=ln[st.ring[st.ring.length-1]]=st)):(st.ring.push(st.ring[0]),st.polygon.push(st.ring))}}function wa(Ye){var Je={type:"Feature",geometry:pl(Ye.geometry)};return null!=Ye.id&&(Je.id=Ye.id),null!=Ye.bbox&&(Je.bbox=Ye.bbox),null!=Ye.properties&&(Je.properties=Ye.properties),Je}function pl(Ye){if(null==Ye)return Ye;var Je,st,mt,Mt;switch(Ye.type){case"GeometryCollection":Je={type:"GeometryCollection",geometries:Ye.geometries.map(pl)};break;case"Point":Je={type:"Point",coordinates:oo(Ye.coordinates)};break;case"MultiPoint":case"LineString":Je={type:Ye.type,coordinates:Zo(Ye.coordinates)};break;case"MultiLineString":Je={type:"MultiLineString",coordinates:Ye.coordinates.map(Zo)};break;case"Polygon":var pt=[];zl(Ye.coordinates,pt,st=[]),ru(st),Je={type:"Polygon",coordinates:pt};break;case"MultiPolygon":st=[],mt=-1,Mt=Ye.coordinates.length;for(var St=new Array(Mt);++mt<Mt;)zl(Ye.coordinates[mt],St[mt]=[],st);ru(st),Je={type:"MultiPolygon",coordinates:St.filter(es)};break;default:return Ye}return null!=Ye.bbox&&(Je.bbox=Ye.bbox),Je}function El(Ye,Je){var st=g(Je/2),mt=v(M*st);return[Ye*(.74482-.34588*mt*mt),1.70711*st]}function Go(Ye,Je,st){var mt=x.geoInterpolate(Je,st),Mt=mt(.5),pt=x.geoRotation([-Mt[0],-Mt[1]])(Je),St=mt.distance/2,an=-R(v(pt[1]*F)/v(St)),fn=[-Mt[0],-Mt[1],-(pt[0]>0?w-an:an)*D],ln=x.geoProjection(Ye(St)).rotate(fn),mn=x.geoRotation(fn),Mn=ln.center;return delete ln.rotate,ln.center=function(Sn){return arguments.length?Mn(mn(Sn)):mn.invert(Mn())},ln.clipAngle(90)}function vu(Ye){var Je=a(Ye);function st(mt,Mt){var pt=x.geoGnomonicRaw(mt,Mt);return pt[0]*=Je,pt}return st.invert=function(mt,Mt){return x.geoGnomonicRaw.invert(mt/Je,Mt)},st}function Yl(Ye,Je){return Go(vu,Ye,Je)}function iu(Ye){if(!(Ye*=2))return x.geoAzimuthalEquidistantRaw;var Je=-Ye/2,st=-Je,mt=Ye*Ye,Mt=g(st),pt=.5/v(st);function St(an,fn){var ln=L(a(fn)*a(an-Je)),mn=L(a(fn)*a(an-st));return[((ln*=ln)-(mn*=mn))/(2*Ye),(fn<0?-1:1)*I(4*mt*mn-(mt-ln+mn)*(mt-ln+mn))/(2*Ye)]}return St.invert=function(an,fn){var ln,mn,Mn=fn*fn,Sn=a(I(Mn+(ln=an+Je)*ln)),zn=a(I(Mn+(ln=an+st)*ln));return[o(mn=Sn-zn,ln=(Sn+zn)*Mt),(fn<0?-1:1)*L(I(ln*ln+mn*mn)*pt)]},St}function Fs(Ye,Je){return Go(iu,Ye,Je)}function Pa(Ye,Je){if(b(Je)<f)return[Ye,0];var st=b(Je/y),mt=R(st);if(b(Ye)<f||b(b(Je)-y)<f)return[0,p(Je)*w*g(mt/2)];var Mt=a(mt),pt=b(w/Ye-Ye/w)/2,St=pt*pt,an=Mt/(st+Mt-1),fn=an*(2/st-1),ln=fn*fn,mn=ln+St,Mn=an-ln,Sn=St+an;return[p(Ye)*w*(pt*Mn+I(St*Mn*Mn-mn*(an*an-ln)))/mn,p(Je)*w*(fn*Sn-pt*I((St+1)*mn-Sn*Sn))/mn]}function ml(Ye,Je){if(b(Je)<f)return[Ye,0];var st=b(Je/y),mt=R(st);if(b(Ye)<f||b(b(Je)-y)<f)return[0,p(Je)*w*g(mt/2)];var Mt=a(mt),pt=b(w/Ye-Ye/w)/2,St=pt*pt,an=Mt*(I(1+St)-pt*Mt)/(1+St*st*st);return[p(Ye)*w*an,p(Je)*w*I(1-an*(2*pt+an))]}function el(Ye,Je){if(b(Je)<f)return[Ye,0];var st=Je/y,mt=R(st);if(b(Ye)<f||b(b(Je)-y)<f)return[0,w*g(mt/2)];var Mt=(w/Ye-Ye/w)/2,pt=st/(1+a(mt));return[w*(p(Ye)*I(Mt*Mt+1-pt*pt)-Mt),w*pt]}function ai(Ye,Je){if(!Je)return[Ye,0];var st=b(Je);if(!Ye||st===y)return[0,Je];var mt=st/y,Mt=mt*mt,pt=(8*mt-Mt*(Mt+2)-5)/(2*Mt*(mt-1)),St=pt*pt,an=mt*pt,fn=Mt+St+2*an,ln=mt+3*pt,mn=Ye/y,Mn=mn+1/mn,Sn=p(b(Ye)-y)*I(Mn*Mn-4),zn=Sn*Sn,$n=(Sn*(fn+St-1)+2*I(fn*(Mt+St*zn-1)+(1-Mt)*(Mt*(ln*ln+4*St)+12*an*St+4*St*St)))/(4*fn+zn);return[p(Ye)*y*$n,p(Je)*y*I(1+Sn*b($n)-$n*$n)]}function No(Ye,Je,st,mt){var Mt=w/3;Ye=u(Ye,f),Je=u(Je,f),Ye=s(Ye,y),Je=s(Je,w-f),st=u(st,0),st=s(st,100-f);var pt=(mt=u(mt,f))/100,St=L((st/100+1)*a(Mt))/Mt,an=v(Ye)/v(St*y),fn=Je/w,ln=I(pt*v(Ye/2)/v(Je/2));return function(mn,Mn,Sn,zn,$n){function or(Lr,Kr){var oi=Sn*v(zn*Kr),fi=I(1-oi*oi),Qr=I(2/(1+fi*a(Lr*=$n)));return[mn*fi*Qr*v(Lr),Mn*oi*Qr]}return or.invert=function(Lr,Kr){var oi=Lr/mn,fi=Kr/Mn,Qr=I(oi*oi+fi*fi),ji=2*R(Qr/2);return[o(Lr*g(ji),mn*Qr)/$n,Qr&&R(Kr*v(ji)/(Mn*Sn*Qr))/zn]},or}(ln/I(fn*an*St),1/(ln*I(fn*an*St)),an,St,fn)}function Ja(){var Ye=65*F,Je=60*F,st=20,mt=200,Mt=x.geoProjectionMutator(No),pt=Mt(Ye,Je,st,mt);return pt.poleline=function(St){return arguments.length?Mt(Ye=+St*F,Je,st,mt):Ye*D},pt.parallels=function(St){return arguments.length?Mt(Ye,Je=+St*F,st,mt):Je*D},pt.inflation=function(St){return arguments.length?Mt(Ye,Je,st=+St,mt):st},pt.ratio=function(St){return arguments.length?Mt(Ye,Je,st,mt=+St):mt},pt.scale(163.775)}El.invert=function(Ye,Je){var st=Je/1.70711,mt=v(M*st);return[Ye/(.74482-.34588*mt*mt),2*e(st)]},Pa.invert=function(Ye,Je){if(b(Je)<f)return[Ye,0];if(b(Ye)<f)return[0,y*v(2*e(Je/w))];var st=(Ye/=w)*Ye,mt=(Je/=w)*Je,Mt=st+mt,pt=Mt*Mt,St=-b(Je)*(1+Mt),an=St-2*mt+st,fn=-2*St+1+2*mt+pt,ln=mt/fn+(2*an*an*an/(fn*fn*fn)-9*St*an/(fn*fn))/27,mn=(St-an*an/(3*fn))/fn,Mn=2*I(-mn/3),Sn=L(3*ln/(mn*Mn))/3;return[w*(Mt-1+I(1+2*(st-mt)+pt))/(2*Ye),p(Je)*w*(-Mn*a(Sn+w/3)-an/(3*fn))]},ml.invert=function(Ye,Je){if(!Ye)return[0,y*v(2*e(Je/w))];var st=b(Ye/w),mt=(1-st*st-(Je/=w)*Je)/(2*st),Mt=I(mt*mt+1);return[p(Ye)*w*(Mt-mt),p(Je)*y*v(2*o(I((1-2*mt*st)*(mt+Mt)-st),I(Mt+mt+st)))]},el.invert=function(Ye,Je){if(!Je)return[Ye,0];var st=Je/w,mt=(w*w*(1-st*st)-Ye*Ye)/(2*w*Ye);return[Ye?w*(p(Ye)*I(mt*mt+1)-mt):0,y*v(2*e(st))]},ai.invert=function(Ye,Je){var st;if(!Ye||!Je)return[Ye,Je];Je/=w;var mt=p(Ye)*Ye/y,Mt=(mt*mt-1+4*Je*Je)/b(mt),pt=Mt*Mt,St=2*Je,an=50;do{var fn=St*St,ln=(8*St-fn*(fn+2)-5)/(2*fn*(St-1)),mn=(3*St-fn*St-10)/(2*fn*St),Mn=ln*ln,Sn=St*ln,zn=St+ln,$n=zn*zn,or=St+3*ln,Lr=-2*zn*(4*Sn*Mn+(1-4*fn+3*fn*fn)*(1+mn)+Mn*(14*fn-6-pt+(8*fn-8-2*pt)*mn)+Sn*(12*fn-8+(10*fn-10-pt)*mn)),Kr=I($n*(fn+Mn*pt-1)+(1-fn)*(fn*(or*or+4*Mn)+Mn*(12*Sn+4*Mn)));St-=st=(Mt*($n+Mn-1)+2*Kr-mt*(4*$n+pt))/(Mt*(2*ln*mn+2*zn*(1+mn))+Lr/Kr-8*zn*(Mt*(-1+Mn+$n)+2*Kr)*(1+mn)/(pt+4*$n))}while(st>f&&--an>0);return[p(Ye)*(I(Mt*Mt+4)+Mt)*w/4,y*St]};var zs=4*w+3*I(3),Bo=2*I(2*w*I(3)/zs),jo=le(Bo*I(3)/w,Bo,zs/6);function Ml(Ye,Je){return[Ye*I(1-3*Je*Je/(w*w)),Je]}function ks(Ye,Je){var st=a(Je),mt=a(Ye)*st,Mt=1-mt,pt=a(Ye=o(v(Ye)*st,-v(Je))),St=v(Ye);return[St*(st=I(1-mt*mt))-pt*Mt,-pt*st-St*Mt]}function Da(Ye,Je){var st=Y(Ye,Je);return[(st[0]+Ye/y)/2,(st[1]+Je)/2]}Ml.invert=function(Ye,Je){return[Ye/I(1-3*Je*Je/(w*w)),Je]},ks.invert=function(Ye,Je){var st=(Ye*Ye+Je*Je)/-2,mt=I(-st*(2+st)),Mt=Je*st+Ye*mt,pt=Ye*st-Je*mt,St=I(pt*pt+Mt*Mt);return[o(mt*Mt,St*(1+st)),St?-R(mt*pt/St):0]},Da.invert=function(Ye,Je){var st=Ye,mt=Je,Mt=25;do{var pt,St=a(mt),an=v(mt),fn=v(2*mt),ln=an*an,mn=St*St,Mn=v(st),Sn=a(st/2),zn=v(st/2),$n=zn*zn,or=1-mn*Sn*Sn,Lr=or?L(St*Sn)*I(pt=1/or):pt=0,Kr=.5*(2*Lr*St*zn+st/y)-Ye,oi=.5*(Lr*an+mt)-Je,fi=.5*pt*(mn*$n+Lr*St*Sn*ln)+.5/y,Qr=pt*(Mn*fn/4-Lr*an*zn),ji=.125*pt*(fn*zn-Lr*an*mn*Mn),Ki=.5*pt*(ln*Sn+Lr*$n*St)+.5,fa=Qr*ji-Ki*fi,Vi=(oi*Qr-Kr*Ki)/fa,Oa=(Kr*ji-oi*fi)/fa;st-=Vi,mt-=Oa}while((b(Vi)>f||b(Oa)>f)&&--Mt>0);return[st,mt]},m.geoNaturalEarth=x.geoNaturalEarth1,m.geoNaturalEarthRaw=x.geoNaturalEarth1Raw,m.geoAiry=function(){var Ye=y,Je=x.geoProjectionMutator(Z),st=Je(Ye);return st.radius=function(mt){return arguments.length?Je(Ye=mt*F):Ye*D},st.scale(179.976).clipAngle(147)},m.geoAiryRaw=Z,m.geoAitoff=function(){return x.geoProjection(Y).scale(152.63)},m.geoAitoffRaw=Y,m.geoArmadillo=function(){var Ye=20*F,Je=Ye>=0?1:-1,st=g(Je*Ye),mt=x.geoProjectionMutator(ee),Mt=mt(Ye),pt=Mt.stream;return Mt.parallel=function(St){return arguments.length?(st=g((Je=(Ye=St*F)>=0?1:-1)*Ye),mt(Ye)):Ye*D},Mt.stream=function(St){var an=Mt.rotate(),fn=pt(St),ln=(Mt.rotate([0,0]),pt(St)),mn=Mt.precision();return Mt.rotate(an),fn.sphere=function(){ln.polygonStart(),ln.lineStart();for(var Mn=-180*Je;Je*Mn<180;Mn+=90*Je)ln.point(Mn,90*Je);if(Ye)for(;Je*(Mn-=3*Je*mn)>=-180;)ln.point(Mn,Je*-o(a(Mn*F/2),st)*D);ln.lineEnd(),ln.polygonEnd()},fn},Mt.scale(218.695).center([0,28.0974])},m.geoArmadilloRaw=ee,m.geoAugust=function(){return x.geoProjection(J).scale(66.1603)},m.geoAugustRaw=J,m.geoBaker=function(){return x.geoProjection(se).scale(112.314)},m.geoBakerRaw=se,m.geoBerghaus=function(){var Ye=5,Je=x.geoProjectionMutator(j),st=Je(Ye),mt=st.stream,Mt=-a(.01*F),pt=v(.01*F);return st.lobes=function(St){return arguments.length?Je(Ye=+St):Ye},st.stream=function(St){var an=st.rotate(),fn=mt(St),ln=(st.rotate([0,0]),mt(St));return st.rotate(an),fn.sphere=function(){ln.polygonStart(),ln.lineStart();for(var mn=0,Mn=360/Ye,Sn=2*w/Ye,zn=90-180/Ye,$n=y;mn<Ye;++mn,zn-=Mn,$n-=Sn)ln.point(o(pt*a($n),Mt)*D,R(pt*v($n))*D),zn<-90?(ln.point(-90,-180-zn-.01),ln.point(-90,-180-zn+.01)):(ln.point(90,zn+.01),ln.point(90,zn-.01));ln.lineEnd(),ln.polygonEnd()},fn},st.scale(87.8076).center([0,17.1875]).clipAngle(179.999)},m.geoBerghausRaw=j,m.geoBertin1953=function(){return x.geoProjection(te()).rotate([-16.5,-42]).scale(176.57).center([7.93,.09])},m.geoBertin1953Raw=te,m.geoBoggs=function(){return x.geoProjection(be).scale(160.857)},m.geoBoggsRaw=be,m.geoBonne=function(){return ge(Ce).scale(123.082).center([0,26.1441]).parallel(45)},m.geoBonneRaw=Ce,m.geoBottomley=function(){var Ye=.5,Je=x.geoProjectionMutator(De),st=Je(Ye);return st.fraction=function(mt){return arguments.length?Je(Ye=+mt):Ye},st.scale(158.837)},m.geoBottomleyRaw=De,m.geoBromley=function(){return x.geoProjection(Se).scale(152.63)},m.geoBromleyRaw=Se,m.geoChamberlin=Pe,m.geoChamberlinRaw=Le,m.geoChamberlinAfrica=function(){return Pe([0,22],[45,22],[22.5,-22]).scale(380).center([22.5,2])},m.geoCollignon=function(){return x.geoProjection(je).scale(95.6464).center([0,30])},m.geoCollignonRaw=je,m.geoCraig=function(){return ge(Ge).scale(249.828).clipAngle(90)},m.geoCraigRaw=Ge,m.geoCraster=function(){return x.geoProjection(lt).scale(156.19)},m.geoCrasterRaw=lt,m.geoCylindricalEqualArea=function(){return ge(Ue).parallel(38.58).scale(195.044)},m.geoCylindricalEqualAreaRaw=Ue,m.geoCylindricalStereographic=function(){return ge($e).scale(124.75)},m.geoCylindricalStereographicRaw=$e,m.geoEckert1=function(){return x.geoProjection(et).scale(165.664)},m.geoEckert1Raw=et,m.geoEckert2=function(){return x.geoProjection(tt).scale(165.664)},m.geoEckert2Raw=tt,m.geoEckert3=function(){return x.geoProjection(ct).scale(180.739)},m.geoEckert3Raw=ct,m.geoEckert4=function(){return x.geoProjection(xt).scale(180.739)},m.geoEckert4Raw=xt,m.geoEckert5=function(){return x.geoProjection(Ct).scale(173.044)},m.geoEckert5Raw=Ct,m.geoEckert6=function(){return x.geoProjection(Ht).scale(173.044)},m.geoEckert6Raw=Ht,m.geoEisenlohr=function(){return x.geoProjection(ht).scale(62.5271)},m.geoEisenlohrRaw=ht,m.geoFahey=function(){return x.geoProjection(Ot).scale(137.152)},m.geoFaheyRaw=Ot,m.geoFoucaut=function(){return x.geoProjection(tn).scale(135.264)},m.geoFoucautRaw=tn,m.geoFoucautSinusoidal=function(){var Ye=.5,Je=x.geoProjectionMutator(un),st=Je(Ye);return st.alpha=function(mt){return arguments.length?Je(Ye=+mt):Ye},st.scale(168.725)},m.geoFoucautSinusoidalRaw=un,m.geoGilbert=function(Ye){null==Ye&&(Ye=x.geoOrthographic);var Je=Ye(),st=x.geoEquirectangular().scale(D).precision(0).clipAngle(null).translate([0,0]);function mt(pt){return Je(Ze(pt))}function Mt(pt){mt[pt]=function(){return arguments.length?(Je[pt].apply(Je,arguments),mt):Je[pt]()}}return Je.invert&&(mt.invert=function(pt){return Qe(Je.invert(pt))}),mt.stream=function(pt){var St=Je.stream(pt),an=st.stream({point:function(fn,ln){St.point(fn/2,R(g(-ln/2*F))*D)},lineStart:function(){St.lineStart()},lineEnd:function(){St.lineEnd()},polygonStart:function(){St.polygonStart()},polygonEnd:function(){St.polygonEnd()}});return an.sphere=St.sphere,an},mt.rotate=function(pt){return arguments.length?(st.rotate(pt),mt):st.rotate()},mt.center=function(pt){return arguments.length?(Je.center(Ze(pt)),mt):Qe(Je.center())},Mt("angle"),Mt("clipAngle"),Mt("clipExtent"),Mt("fitExtent"),Mt("fitHeight"),Mt("fitSize"),Mt("fitWidth"),Mt("scale"),Mt("translate"),Mt("precision"),mt.scale(249.5)},m.geoGingery=function(){var Ye=6,Je=30*F,st=a(Je),mt=v(Je),Mt=x.geoProjectionMutator(qe),pt=Mt(Je,Ye),St=pt.stream,an=-a(.01*F),fn=v(.01*F);return pt.radius=function(ln){return arguments.length?(st=a(Je=ln*F),mt=v(Je),Mt(Je,Ye)):Je*D},pt.lobes=function(ln){return arguments.length?Mt(Je,Ye=+ln):Ye},pt.stream=function(ln){var mn=pt.rotate(),Mn=St(ln),Sn=(pt.rotate([0,0]),St(ln));return pt.rotate(mn),Mn.sphere=function(){Sn.polygonStart(),Sn.lineStart();for(var zn=0,$n=2*w/Ye,or=0;zn<Ye;++zn,or-=$n)Sn.point(o(fn*a(or),an)*D,R(fn*v(or))*D),Sn.point(o(mt*a(or-$n/2),st)*D,R(mt*v(or-$n/2))*D);Sn.lineEnd(),Sn.polygonEnd()},Mn},pt.rotate([90,-40]).scale(91.7095).clipAngle(179.999)},m.geoGingeryRaw=qe,m.geoGinzburg4=function(){return x.geoProjection(Ve).scale(149.995)},m.geoGinzburg4Raw=Ve,m.geoGinzburg5=function(){return x.geoProjection(Be).scale(153.93)},m.geoGinzburg5Raw=Be,m.geoGinzburg6=function(){return x.geoProjection(at).scale(130.945)},m.geoGinzburg6Raw=at,m.geoGinzburg8=function(){return x.geoProjection(gt).scale(131.747)},m.geoGinzburg8Raw=gt,m.geoGinzburg9=function(){return x.geoProjection(wt).scale(131.087)},m.geoGinzburg9Raw=wt,m.geoGringorten=function(){return x.geoProjection(_t(Rt)).scale(239.75)},m.geoGringortenRaw=Rt,m.geoGuyou=function(){return x.geoProjection(_t(Nt)).scale(151.496)},m.geoGuyouRaw=Nt,m.geoHammer=function(){var Ye=2,Je=x.geoProjectionMutator(G),st=Je(Ye);return st.coefficient=function(mt){return arguments.length?Je(Ye=+mt):Ye},st.scale(169.529)},m.geoHammerRaw=G,m.geoHammerRetroazimuthal=function(){var Ye=0,Je=x.geoProjectionMutator(rt),st=Je(Ye),mt=st.rotate,Mt=st.stream,pt=x.geoCircle();return st.parallel=function(St){if(!arguments.length)return Ye*D;var an=st.rotate();return Je(Ye=St*F).rotate(an)},st.rotate=function(St){return arguments.length?(mt.call(st,[St[0],St[1]-Ye*D]),pt.center([-St[0],-St[1]]),st):((St=mt.call(st))[1]+=Ye*D,St)},st.stream=function(St){return(St=Mt(St)).sphere=function(){St.polygonStart();var an,fn=pt.radius(89.99)().coordinates[0],ln=fn.length-1,mn=-1;for(St.lineStart();++mn<ln;)St.point((an=fn[mn])[0],an[1]);for(St.lineEnd(),ln=(fn=pt.radius(90.01)().coordinates[0]).length-1,St.lineStart();--mn>=0;)St.point((an=fn[mn])[0],an[1]);St.lineEnd(),St.polygonEnd()},St},st.scale(79.4187).parallel(45).clipAngle(179.999)},m.geoHammerRetroazimuthalRaw=rt,m.geoHealpix=function(){var Ye=4,Je=x.geoProjectionMutator(sn),st=Je(Ye),mt=st.stream;return st.lobes=function(Mt){return arguments.length?Je(Ye=+Mt):Ye},st.stream=function(Mt){var pt=st.rotate(),St=mt(Mt),an=(st.rotate([0,0]),mt(Mt));return st.rotate(pt),St.sphere=function(){var fn,ln;x.geoStream((ln=[].concat(T.range(-180,180+(fn=180/Ye)/2,fn).map(He),T.range(180,-180-fn/2,-fn).map(vt)),{type:"Polygon",coordinates:[180===fn?ln.map(Lt):ln]}),an)},St},st.scale(239.75)},m.geoHealpixRaw=sn,m.geoHill=function(){var Ye=1,Je=x.geoProjectionMutator(Gt),st=Je(Ye);return st.ratio=function(mt){return arguments.length?Je(Ye=+mt):Ye},st.scale(167.774).center([0,18.67])},m.geoHillRaw=Gt,m.geoHomolosine=function(){return x.geoProjection(_n).scale(152.63)},m.geoHomolosineRaw=_n,m.geoHufnagel=function(){var Ye=1,Je=0,st=45*F,mt=2,Mt=x.geoProjectionMutator(en),pt=Mt(Ye,Je,st,mt);return pt.a=function(St){return arguments.length?Mt(Ye=+St,Je,st,mt):Ye},pt.b=function(St){return arguments.length?Mt(Ye,Je=+St,st,mt):Je},pt.psiMax=function(St){return arguments.length?Mt(Ye,Je,st=+St*F,mt):st*D},pt.ratio=function(St){return arguments.length?Mt(Ye,Je,st,mt=+St):mt},pt.scale(180.739)},m.geoHufnagelRaw=en,m.geoHyperelliptical=function(){var Ye=0,Je=2.5,st=1.183136,mt=x.geoProjectionMutator(wn),Mt=mt(Ye,Je,st);return Mt.alpha=function(pt){return arguments.length?mt(Ye=+pt,Je,st):Ye},Mt.k=function(pt){return arguments.length?mt(Ye,Je=+pt,st):Je},Mt.gamma=function(pt){return arguments.length?mt(Ye,Je,st=+pt):st},Mt.scale(152.63)},m.geoHyperellipticalRaw=wn,m.geoInterrupt=pn,m.geoInterruptedBoggs=function(){return pn(be,En).scale(160.857)},m.geoInterruptedHomolosine=function(){return pn(_n,Un).scale(152.63)},m.geoInterruptedMollweide=function(){return pn(ue,In).scale(169.529)},m.geoInterruptedMollweideHemispheres=function(){return pn(ue,sr).scale(169.529).rotate([20,0])},m.geoInterruptedSinuMollweide=function(){return pn(Kt,fr,q).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},m.geoInterruptedSinusoidal=function(){return pn(we,rr).scale(152.63).rotate([-20,0])},m.geoKavrayskiy7=function(){return x.geoProjection(qr).scale(158.837)},m.geoKavrayskiy7Raw=qr,m.geoLagrange=function(){var Ye=.5,Je=x.geoProjectionMutator(ti),st=Je(Ye);return st.spacing=function(mt){return arguments.length?Je(Ye=+mt):Ye},st.scale(124.75)},m.geoLagrangeRaw=ti,m.geoLarrivee=function(){return x.geoProjection(pr).scale(97.2672)},m.geoLarriveeRaw=pr,m.geoLaskowski=function(){return x.geoProjection(Fn).scale(139.98)},m.geoLaskowskiRaw=Fn,m.geoLittrow=function(){return x.geoProjection(Rn).scale(144.049).clipAngle(89.999)},m.geoLittrowRaw=Rn,m.geoLoximuthal=function(){return ge(hr).parallel(40).scale(158.837)},m.geoLoximuthalRaw=hr,m.geoMiller=function(){return x.geoProjection(ri).scale(108.318)},m.geoMillerRaw=ri,m.geoModifiedStereographic=jt,m.geoModifiedStereographicRaw=ir,m.geoModifiedStereographicAlaska=function(){return jt(Ur,[152,-64]).scale(1400).center([-160.908,62.4864]).clipAngle(30).angle(7.8)},m.geoModifiedStereographicGs48=function(){return jt(Mr,[95,-38]).scale(1e3).clipAngle(55).center([-96.5563,38.8675])},m.geoModifiedStereographicGs50=function(){return jt(wr,[120,-45]).scale(359.513).clipAngle(55).center([-117.474,53.0628])},m.geoModifiedStereographicMiller=function(){return jt(ii,[-20,-18]).scale(209.091).center([20,16.7214]).clipAngle(82)},m.geoModifiedStereographicLee=function(){return jt(gn,[165,10]).scale(250).clipAngle(130).center([-165,-10])},m.geoMollweide=function(){return x.geoProjection(ue).scale(169.529)},m.geoMollweideRaw=ue,m.geoMtFlatPolarParabolic=function(){return x.geoProjection(Hn).scale(164.859)},m.geoMtFlatPolarParabolicRaw=Hn,m.geoMtFlatPolarQuartic=function(){return x.geoProjection(yr).scale(188.209)},m.geoMtFlatPolarQuarticRaw=yr,m.geoMtFlatPolarSinusoidal=function(){return x.geoProjection(gr).scale(166.518)},m.geoMtFlatPolarSinusoidalRaw=gr,m.geoNaturalEarth2=function(){return x.geoProjection(Bn).scale(175.295)},m.geoNaturalEarth2Raw=Bn,m.geoNellHammer=function(){return x.geoProjection(Nn).scale(152.63)},m.geoNellHammerRaw=Nn,m.geoInterruptedQuarticAuthalic=function(){return pn(G(1/0),Zn).rotate([20,0]).scale(152.63)},m.geoNicolosi=function(){return x.geoProjection(Wn).scale(127.267)},m.geoNicolosiRaw=Wn,m.geoPatterson=function(){return x.geoProjection(jn).scale(139.319)},m.geoPattersonRaw=jn,m.geoPolyconic=function(){return x.geoProjection(xr).scale(103.74)},m.geoPolyconicRaw=xr,m.geoPolyhedral=tr,m.geoPolyhedralButterfly=function(Ye){Ye=Ye||function(st){var mt=x.geoCentroid({type:"MultiPoint",coordinates:st});return x.geoGnomonic().scale(1).translate([0,0]).rotate([-mt[0],-mt[1]])};var Je=Zr.map(function(st){return{face:st,project:Ye(st)}});return[-1,0,0,1,0,1,4,5].forEach(function(st,mt){var Mt=Je[st];Mt&&(Mt.children||(Mt.children=[])).push(Je[mt])}),tr(Je[0],function(st,mt){return Je[st<-w/2?mt<0?6:4:st<0?mt<0?2:0:st<w/2?mt<0?3:1:mt<0?7:5]}).angle(-30).scale(101.858).center([0,45])},m.geoPolyhedralCollignon=function(Ye){Ye=Ye||function(st){var mt=x.geoCentroid({type:"MultiPoint",coordinates:st});return x.geoProjection(gi).translate([0,0]).scale(1).rotate(mt[1]>0?[-mt[0],0]:[180-mt[0],180])};var Je=Zr.map(function(st){return{face:st,project:Ye(st)}});return[-1,0,0,1,0,1,4,5].forEach(function(st,mt){var Mt=Je[st];Mt&&(Mt.children||(Mt.children=[])).push(Je[mt])}),tr(Je[0],function(st,mt){return Je[st<-w/2?mt<0?6:4:st<0?mt<0?2:0:st<w/2?mt<0?3:1:mt<0?7:5]}).angle(-30).scale(121.906).center([0,48.5904])},m.geoPolyhedralWaterman=function(Ye){Ye=Ye||function(pt){var St=6===pt.length?x.geoCentroid({type:"MultiPoint",coordinates:pt}):pt[0];return x.geoGnomonic().scale(1).translate([0,0]).rotate([-St[0],-St[1]])};var Je=Zr.map(function(pt){for(var St,an=pt.map(qi),fn=an.length,ln=an[fn-1],mn=[],Mn=0;Mn<fn;++Mn)mn.push(Ci([.9486832980505138*ln[0]+.31622776601683794*(St=an[Mn])[0],.9486832980505138*ln[1]+.31622776601683794*St[1],.9486832980505138*ln[2]+.31622776601683794*St[2]]),Ci([.9486832980505138*St[0]+.31622776601683794*ln[0],.9486832980505138*St[1]+.31622776601683794*ln[1],.9486832980505138*St[2]+.31622776601683794*ln[2]])),ln=St;return mn}),st=[],mt=[-1,0,0,1,0,1,4,5];Je.forEach(function(pt,St){for(var an,fn,ln=Zr[St],mn=ln.length,Mn=st[St]=[],Sn=0;Sn<mn;++Sn)Je.push([ln[Sn],pt[(2*Sn+2)%(2*mn)],pt[(2*Sn+1)%(2*mn)]]),mt.push(St),Mn.push((an=qi(pt[(2*Sn+2)%(2*mn)]),fn=qi(pt[(2*Sn+1)%(2*mn)]),[an[1]*fn[2]-an[2]*fn[1],an[2]*fn[0]-an[0]*fn[2],an[0]*fn[1]-an[1]*fn[0]]))});var Mt=Je.map(function(pt){return{project:Ye(pt),face:pt}});return mt.forEach(function(pt,St){var an=Mt[pt];an&&(an.children||(an.children=[])).push(Mt[St])}),tr(Mt[0],function(pt,St){var an=a(St),fn=[an*a(pt),an*v(pt),v(St)],ln=pt<-w/2?St<0?6:4:pt<0?St<0?2:0:pt<w/2?St<0?3:1:St<0?7:5,mn=st[ln];return Mt[zr(mn[0],fn)<0?8+3*ln:zr(mn[1],fn)<0?8+3*ln+1:zr(mn[2],fn)<0?8+3*ln+2:ln]}).angle(-30).scale(110.625).center([0,45])},m.geoProject=function(Ye,Je){var st,mt=Je.stream;if(!mt)throw new Error("invalid projection");switch(Ye&&Ye.type){case"Feature":st=$a;break;case"FeatureCollection":st=Do;break;default:st=Ka}return st(Ye,mt)},m.geoGringortenQuincuncial=function(){return ls(Rt).scale(176.423)},m.geoPeirceQuincuncial=yo,m.geoPierceQuincuncial=yo,m.geoQuantize=function(Ye,Je){if(!(0<=(Je=+Je)&&Je<=20))throw new Error("invalid digits");function st(ln){var mn=ln.length,Mn=2,Sn=new Array(mn);for(Sn[0]=+ln[0].toFixed(Je),Sn[1]=+ln[1].toFixed(Je);Mn<mn;)Sn[Mn]=ln[Mn],++Mn;return Sn}function mt(ln){return ln.map(st)}function Mt(ln){for(var mn=st(ln[0]),Mn=[mn],Sn=1;Sn<ln.length;Sn++){var zn=st(ln[Sn]);(zn.length>2||zn[0]!=mn[0]||zn[1]!=mn[1])&&(Mn.push(zn),mn=zn)}return 1===Mn.length&&ln.length>1&&Mn.push(st(ln[ln.length-1])),Mn}function pt(ln){return ln.map(Mt)}function St(ln){if(null==ln)return ln;var mn;switch(ln.type){case"GeometryCollection":mn={type:"GeometryCollection",geometries:ln.geometries.map(St)};break;case"Point":mn={type:"Point",coordinates:st(ln.coordinates)};break;case"MultiPoint":mn={type:ln.type,coordinates:mt(ln.coordinates)};break;case"LineString":mn={type:ln.type,coordinates:Mt(ln.coordinates)};break;case"MultiLineString":case"Polygon":mn={type:ln.type,coordinates:pt(ln.coordinates)};break;case"MultiPolygon":mn={type:"MultiPolygon",coordinates:ln.coordinates.map(pt)};break;default:return ln}return null!=ln.bbox&&(mn.bbox=ln.bbox),mn}function an(ln){var mn={type:"Feature",properties:ln.properties,geometry:St(ln.geometry)};return null!=ln.id&&(mn.id=ln.id),null!=ln.bbox&&(mn.bbox=ln.bbox),mn}if(null!=Ye)switch(Ye.type){case"Feature":return an(Ye);case"FeatureCollection":var fn={type:"FeatureCollection",features:Ye.features.map(an)};return null!=Ye.bbox&&(fn.bbox=Ye.bbox),fn;default:return St(Ye)}return Ye},m.geoQuincuncial=ls,m.geoRectangularPolyconic=function(){return ge(dl).scale(131.215)},m.geoRectangularPolyconicRaw=dl,m.geoRobinson=function(){return x.geoProjection(Ws).scale(152.63)},m.geoRobinsonRaw=Ws,m.geoSatellite=function(){var Ye=2,Je=0,st=x.geoProjectionMutator(Os),mt=st(Ye,Je);return mt.distance=function(Mt){return arguments.length?st(Ye=+Mt,Je):Ye},mt.tilt=function(Mt){return arguments.length?st(Ye,Je=Mt*F):Je*D},mt.scale(432.147).clipAngle(L(1/Ye)*D-1e-6)},m.geoSatelliteRaw=Os,m.geoSinuMollweide=function(){return x.geoProjection(Kt).rotate([-20,-55]).scale(164.263).center([0,-5.4036])},m.geoSinuMollweideRaw=Kt,m.geoSinusoidal=function(){return x.geoProjection(we).scale(152.63)},m.geoSinusoidalRaw=we,m.geoStitch=function(Ye){if(null==Ye)return Ye;switch(Ye.type){case"Feature":return wa(Ye);case"FeatureCollection":var Je={type:"FeatureCollection",features:Ye.features.map(wa)};return null!=Ye.bbox&&(Je.bbox=Ye.bbox),Je;default:return pl(Ye)}},m.geoTimes=function(){return x.geoProjection(El).scale(146.153)},m.geoTimesRaw=El,m.geoTwoPointAzimuthal=Yl,m.geoTwoPointAzimuthalRaw=vu,m.geoTwoPointAzimuthalUsa=function(){return Yl([-158,21.5],[-77,39]).clipAngle(60).scale(400)},m.geoTwoPointEquidistant=Fs,m.geoTwoPointEquidistantRaw=iu,m.geoTwoPointEquidistantUsa=function(){return Fs([-158,21.5],[-77,39]).clipAngle(130).scale(122.571)},m.geoVanDerGrinten=function(){return x.geoProjection(Pa).scale(79.4183)},m.geoVanDerGrintenRaw=Pa,m.geoVanDerGrinten2=function(){return x.geoProjection(ml).scale(79.4183)},m.geoVanDerGrinten2Raw=ml,m.geoVanDerGrinten3=function(){return x.geoProjection(el).scale(79.4183)},m.geoVanDerGrinten3Raw=el,m.geoVanDerGrinten4=function(){return x.geoProjection(ai).scale(127.16)},m.geoVanDerGrinten4Raw=ai,m.geoWagner=Ja,m.geoWagner7=function(){return Ja().poleline(65).parallels(60).inflation(0).ratio(200).scale(172.633)},m.geoWagnerRaw=No,m.geoWagner4=function(){return x.geoProjection(jo).scale(176.84)},m.geoWagner4Raw=jo,m.geoWagner6=function(){return x.geoProjection(Ml).scale(152.63)},m.geoWagner6Raw=Ml,m.geoWiechel=function(){return x.geoProjection(ks).rotate([0,-90,45]).scale(124.75).clipAngle(179.999)},m.geoWiechelRaw=ks,m.geoWinkel3=function(){return x.geoProjection(Da).scale(158.837)},m.geoWinkel3Raw=Da,Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==oe?x(ae,_("d3-geo"),_("d3-array")):x(m.d3=m.d3||{},m.d3,m.d3)},{"d3-array":107,"d3-geo":114}],114:[function(_,oe,ae){var m,x;m=this,x=function(m,x){"use strict";function T(){return new b}function b(){this.reset()}b.prototype={constructor:b,reset:function(){this.s=this.t=0},add:function(At){o(e,At,this.t),o(this,e.s,this.s),this.s?this.t+=e.t:this.s=e.t},valueOf:function(){return this.s}};var e=new b;function o(At,Yt,xn){var rn=At.s=Yt+xn,bn=rn-Yt;At.t=Yt-(rn-bn)+(xn-bn)}var a=1e-6,l=Math.PI,i=l/2,d=l/4,u=2*l,s=180/l,c=l/180,h=Math.abs,p=Math.atan,v=Math.atan2,g=Math.cos,f=Math.ceil,w=Math.exp,y=Math.log,M=Math.pow,A=Math.sin,k=Math.sign||function(At){return At>0?1:At<0?-1:0},C=Math.sqrt,P=Math.tan;function D(At){return At>1?0:At<-1?l:Math.acos(At)}function F(At){return At>1?i:At<-1?-i:Math.asin(At)}function R(At){return(At=A(At/2))*At}function L(){}function I(At,Yt){At&&V.hasOwnProperty(At.type)&&V[At.type](At,Yt)}var B={Feature:function(At,Yt){I(At.geometry,Yt)},FeatureCollection:function(At,Yt){for(var xn=At.features,rn=-1,bn=xn.length;++rn<bn;)I(xn[rn].geometry,Yt)}},V={Sphere:function(At,Yt){Yt.sphere()},Point:function(At,Yt){Yt.point((At=At.coordinates)[0],At[1],At[2])},MultiPoint:function(At,Yt){for(var xn=At.coordinates,rn=-1,bn=xn.length;++rn<bn;)Yt.point((At=xn[rn])[0],At[1],At[2])},LineString:function(At,Yt){Z(At.coordinates,Yt,0)},MultiLineString:function(At,Yt){for(var xn=At.coordinates,rn=-1,bn=xn.length;++rn<bn;)Z(xn[rn],Yt,0)},Polygon:function(At,Yt){Y(At.coordinates,Yt)},MultiPolygon:function(At,Yt){for(var xn=At.coordinates,rn=-1,bn=xn.length;++rn<bn;)Y(xn[rn],Yt)},GeometryCollection:function(At,Yt){for(var xn=At.geometries,rn=-1,bn=xn.length;++rn<bn;)I(xn[rn],Yt)}};function Z(At,Yt,xn){var rn,bn=-1,Kn=At.length-xn;for(Yt.lineStart();++bn<Kn;)Yt.point((rn=At[bn])[0],rn[1],rn[2]);Yt.lineEnd()}function Y(At,Yt){var xn=-1,rn=At.length;for(Yt.polygonStart();++xn<rn;)Z(At[xn],Yt,1);Yt.polygonEnd()}function ee(At,Yt){At&&B.hasOwnProperty(At.type)?B[At.type](At,Yt):I(At,Yt)}var J,$,Q,se,j,G=T(),W=T(),ie={point:L,lineStart:L,lineEnd:L,polygonStart:function(){G.reset(),ie.lineStart=q,ie.lineEnd=te},polygonEnd:function(){var At=+G;W.add(At<0?u+At:At),this.lineStart=this.lineEnd=this.point=L},sphere:function(){W.add(u)}};function q(){ie.point=ne}function te(){le(J,$)}function ne(At,Yt){ie.point=le,J=At,$=Yt,Q=At*=c,se=g(Yt=(Yt*=c)/2+d),j=A(Yt)}function le(At,Yt){var xn=(At*=c)-Q,rn=xn>=0?1:-1,bn=rn*xn,Kn=g(Yt=(Yt*=c)/2+d),nr=A(Yt),vr=j*nr,Er=se*Kn+vr*g(bn),kr=vr*rn*A(bn);G.add(v(kr,Er)),Q=At,se=Kn,j=nr}function ue(At){return[v(At[1],At[0]),F(At[2])]}function de(At){var Yt=At[0],xn=At[1],rn=g(xn);return[rn*g(Yt),rn*A(Yt),A(xn)]}function he(At,Yt){return At[0]*Yt[0]+At[1]*Yt[1]+At[2]*Yt[2]}function be(At,Yt){return[At[1]*Yt[2]-At[2]*Yt[1],At[2]*Yt[0]-At[0]*Yt[2],At[0]*Yt[1]-At[1]*Yt[0]]}function ge(At,Yt){At[0]+=Yt[0],At[1]+=Yt[1],At[2]+=Yt[2]}function we(At,Yt){return[At[0]*Yt,At[1]*Yt,At[2]*Yt]}function Ce(At){var Yt=C(At[0]*At[0]+At[1]*At[1]+At[2]*At[2]);At[0]/=Yt,At[1]/=Yt,At[2]/=Yt}var De,Se,Fe,ve,Te,Le,Ee,Pe,je,Ge,Ke,lt,Ue,$e,et,tt,ct,xt,Ct,Ht,zt,ht,ut,Ot,tn,un,Ze=T(),Qe={point:qe,lineStart:Ie,lineEnd:ze,polygonStart:function(){Qe.point=Ve,Qe.lineStart=Be,Qe.lineEnd=at,Ze.reset(),ie.polygonStart()},polygonEnd:function(){ie.polygonEnd(),Qe.point=qe,Qe.lineStart=Ie,Qe.lineEnd=ze,G<0?(De=-(Fe=180),Se=-(ve=90)):Ze>a?ve=90:Ze<-a&&(Se=-90),Ge[0]=De,Ge[1]=Fe},sphere:function(){De=-(Fe=180),Se=-(ve=90)}};function qe(At,Yt){je.push(Ge=[De=At,Fe=At]),Yt<Se&&(Se=Yt),Yt>ve&&(ve=Yt)}function it(At,Yt){var xn=de([At*c,Yt*c]);if(Pe){var rn=be(Pe,xn),bn=be([rn[1],-rn[0],0],rn);Ce(bn),bn=ue(bn);var Kn,nr=At-Te,vr=nr>0?1:-1,Er=bn[0]*s*vr,kr=h(nr)>180;kr^(vr*Te<Er&&Er<vr*At)?(Kn=bn[1]*s)>ve&&(ve=Kn):kr^(vr*Te<(Er=(Er+360)%360-180)&&Er<vr*At)?(Kn=-bn[1]*s)<Se&&(Se=Kn):(Yt<Se&&(Se=Yt),Yt>ve&&(ve=Yt)),kr?At<Te?gt(De,At)>gt(De,Fe)&&(Fe=At):gt(At,Fe)>gt(De,Fe)&&(De=At):Fe>=De?(At<De&&(De=At),At>Fe&&(Fe=At)):At>Te?gt(De,At)>gt(De,Fe)&&(Fe=At):gt(At,Fe)>gt(De,Fe)&&(De=At)}else je.push(Ge=[De=At,Fe=At]);Yt<Se&&(Se=Yt),Yt>ve&&(ve=Yt),Pe=xn,Te=At}function Ie(){Qe.point=it}function ze(){Ge[0]=De,Ge[1]=Fe,Qe.point=qe,Pe=null}function Ve(At,Yt){if(Pe){var xn=At-Te;Ze.add(h(xn)>180?xn+(xn>0?360:-360):xn)}else Le=At,Ee=Yt;ie.point(At,Yt),it(At,Yt)}function Be(){ie.lineStart()}function at(){Ve(Le,Ee),ie.lineEnd(),h(Ze)>a&&(De=-(Fe=180)),Ge[0]=De,Ge[1]=Fe,Pe=null}function gt(At,Yt){return(Yt-=At)<0?Yt+360:Yt}function wt(At,Yt){return At[0]-Yt[0]}function _t(At,Yt){return At[0]<=At[1]?At[0]<=Yt&&Yt<=At[1]:Yt<At[0]||At[1]<Yt}var Rt={sphere:L,point:yt,lineStart:Nt,lineEnd:Ut,polygonStart:function(){Rt.lineStart=Wt,Rt.lineEnd=sn},polygonEnd:function(){Rt.lineStart=Nt,Rt.lineEnd=Ut}};function yt(At,Yt){At*=c;var xn=g(Yt*=c);Vt(xn*g(At),xn*A(At),A(Yt))}function Vt(At,Yt,xn){++Ke,Ue+=(At-Ue)/Ke,$e+=(Yt-$e)/Ke,et+=(xn-et)/Ke}function Nt(){Rt.point=rt}function rt(At,Yt){At*=c;var xn=g(Yt*=c);Ot=xn*g(At),tn=xn*A(At),un=A(Yt),Rt.point=Tt,Vt(Ot,tn,un)}function Tt(At,Yt){At*=c;var xn=g(Yt*=c),rn=xn*g(At),bn=xn*A(At),Kn=A(Yt),nr=v(C((nr=tn*Kn-un*bn)*nr+(nr=un*rn-Ot*Kn)*nr+(nr=Ot*bn-tn*rn)*nr),Ot*rn+tn*bn+un*Kn);lt+=nr,tt+=nr*(Ot+(Ot=rn)),ct+=nr*(tn+(tn=bn)),xt+=nr*(un+(un=Kn)),Vt(Ot,tn,un)}function Ut(){Rt.point=yt}function Wt(){Rt.point=He}function sn(){vt(ht,ut),Rt.point=yt}function He(At,Yt){ht=At,ut=Yt,At*=c,Yt*=c,Rt.point=vt;var xn=g(Yt);Ot=xn*g(At),tn=xn*A(At),un=A(Yt),Vt(Ot,tn,un)}function vt(At,Yt){At*=c;var xn=g(Yt*=c),rn=xn*g(At),bn=xn*A(At),Kn=A(Yt),nr=tn*Kn-un*bn,vr=un*rn-Ot*Kn,Er=Ot*bn-tn*rn,kr=C(nr*nr+vr*vr+Er*Er),Rr=F(kr),Wr=kr&&-Rr/kr;Ct+=Wr*nr,Ht+=Wr*vr,zt+=Wr*Er,lt+=Rr,tt+=Rr*(Ot+(Ot=rn)),ct+=Rr*(tn+(tn=bn)),xt+=Rr*(un+(un=Kn)),Vt(Ot,tn,un)}function Lt(At){return function(){return At}}function Gt(At,Yt){function xn(rn,bn){return rn=At(rn,bn),Yt(rn[0],rn[1])}return At.invert&&Yt.invert&&(xn.invert=function(rn,bn){return(rn=Yt.invert(rn,bn))&&At.invert(rn[0],rn[1])}),xn}function Kt(At,Yt){return[h(At)>l?At+Math.round(-At/u)*u:At,Yt]}function _n(At,Yt,xn){return(At%=u)?Yt||xn?Gt(on(At),wn(Yt,xn)):on(At):Yt||xn?wn(Yt,xn):Kt}function en(At){return function(Yt,xn){return[(Yt+=At)>l?Yt-u:Yt<-l?Yt+u:Yt,xn]}}function on(At){var Yt=en(At);return Yt.invert=en(-At),Yt}function wn(At,Yt){var xn=g(At),rn=A(At),bn=g(Yt),Kn=A(Yt);function nr(vr,Er){var kr=g(Er),Rr=g(vr)*kr,Wr=A(vr)*kr,Dr=A(Er),Yr=Dr*xn+Rr*rn;return[v(Wr*bn-Yr*Kn,Rr*xn-Dr*rn),F(Yr*bn+Wr*Kn)]}return nr.invert=function(vr,Er){var kr=g(Er),Rr=g(vr)*kr,Wr=A(vr)*kr,Dr=A(Er),Yr=Dr*bn-Wr*Kn;return[v(Wr*bn+Dr*Kn,Rr*xn+Yr*rn),F(Yr*xn-Rr*rn)]},nr}function On(At){function Yt(xn){return(xn=At(xn[0]*c,xn[1]*c))[0]*=s,xn[1]*=s,xn}return At=_n(At[0]*c,At[1]*c,At.length>2?At[2]*c:0),Yt.invert=function(xn){return(xn=At.invert(xn[0]*c,xn[1]*c))[0]*=s,xn[1]*=s,xn},Yt}function Dn(At,Yt,xn,rn,bn,Kn){if(xn){var nr=g(Yt),vr=A(Yt),Er=rn*xn;null==bn?(bn=Yt+rn*u,Kn=Yt-Er/2):(bn=Tn(nr,bn),Kn=Tn(nr,Kn),(rn>0?bn<Kn:bn>Kn)&&(bn+=rn*u));for(var kr,Rr=bn;rn>0?Rr>Kn:Rr<Kn;Rr-=Er)kr=ue([nr,-vr*g(Rr),-vr*A(Rr)]),At.point(kr[0],kr[1])}}function Tn(At,Yt){(Yt=de(Yt))[0]-=At,Ce(Yt);var xn=D(-Yt[1]);return((-Yt[2]<0?-xn:xn)+u-a)%u}function pn(){var At,Yt=[];return{point:function(xn,rn,bn){At.push([xn,rn,bn])},lineStart:function(){Yt.push(At=[])},lineEnd:L,rejoin:function(){Yt.length>1&&Yt.push(Yt.pop().concat(Yt.shift()))},result:function(){var xn=Yt;return Yt=[],At=null,xn}}}function En(At,Yt){return h(At[0]-Yt[0])<a&&h(At[1]-Yt[1])<a}function Un(At,Yt,xn,rn){this.x=At,this.z=Yt,this.o=xn,this.e=rn,this.v=!1,this.n=this.p=null}function In(At,Yt,xn,rn,bn){var Kn,nr,vr=[],Er=[];if(At.forEach(function(si){if(!((di=si.length-1)<=0)){var di,Di,br=si[0],Si=si[di];if(En(br,Si)){if(!br[2]&&!Si[2]){for(bn.lineStart(),Kn=0;Kn<di;++Kn)bn.point((br=si[Kn])[0],br[1]);return void bn.lineEnd()}Si[0]+=2*a}vr.push(Di=new Un(br,si,null,!0)),Er.push(Di.o=new Un(br,null,Di,!1)),vr.push(Di=new Un(Si,si,null,!1)),Er.push(Di.o=new Un(Si,null,Di,!0))}}),vr.length){for(Er.sort(Yt),sr(vr),sr(Er),Kn=0,nr=Er.length;Kn<nr;++Kn)Er[Kn].e=xn=!xn;for(var kr,Rr,Wr=vr[0];;){for(var Dr=Wr,Yr=!0;Dr.v;)if((Dr=Dr.n)===Wr)return;kr=Dr.z,bn.lineStart();do{if(Dr.v=Dr.o.v=!0,Dr.e){if(Yr)for(Kn=0,nr=kr.length;Kn<nr;++Kn)bn.point((Rr=kr[Kn])[0],Rr[1]);else rn(Dr.x,Dr.n.x,1,bn);Dr=Dr.n}else{if(Yr)for(Kn=(kr=Dr.p.z).length-1;Kn>=0;--Kn)bn.point((Rr=kr[Kn])[0],Rr[1]);else rn(Dr.x,Dr.p.x,-1,bn);Dr=Dr.p}kr=(Dr=Dr.o).z,Yr=!Yr}while(!Dr.v);bn.lineEnd()}}}function sr(At){if(Yt=At.length){for(var Yt,xn,rn=0,bn=At[0];++rn<Yt;)bn.n=xn=At[rn],xn.p=bn,bn=xn;bn.n=xn=At[0],xn.p=bn}}Kt.invert=Kt;var fr=T();function rr(At){return h(At[0])<=l?At[0]:k(At[0])*((h(At[0])+l)%u-l)}function qr(At,Yt){var xn=rr(Yt),rn=Yt[1],bn=A(rn),Kn=[A(xn),-g(xn),0],nr=0,vr=0;fr.reset(),1===bn?rn=i+a:-1===bn&&(rn=-i-a);for(var Er=0,kr=At.length;Er<kr;++Er)if(Wr=(Rr=At[Er]).length)for(var Rr,Wr,Dr=Rr[Wr-1],Yr=rr(Dr),si=Dr[1]/2+d,di=A(si),Di=g(si),br=0;br<Wr;++br,Yr=Jr,di=pi,Di=ra,Dr=Si){var Si=Rr[br],Jr=rr(Si),ci=Si[1]/2+d,pi=A(ci),ra=g(ci),ma=Jr-Yr,$r=ma>=0?1:-1,Ta=$r*ma,da=Ta>l,Wi=di*pi;if(fr.add(v(Wi*$r*A(Ta),Di*ra+Wi*g(Ta))),nr+=da?ma+$r*u:ma,da^Yr>=xn^Jr>=xn){var va=be(de(Dr),de(Si));Ce(va);var ua=be(Kn,va);Ce(ua);var xa=(da^ma>=0?-1:1)*F(ua[2]);(rn>xa||rn===xa&&(va[0]||va[1]))&&(vr+=da^ma>=0?1:-1)}}return(nr<-a||nr<a&&fr<-a)^1&vr}function ti(At,Yt,xn,rn){return function(bn){var Kn,nr,vr,Er=Yt(bn),kr=pn(),Rr=Yt(kr),Wr=!1,Dr={point:Yr,lineStart:di,lineEnd:Di,polygonStart:function(){Dr.point=br,Dr.lineStart=Si,Dr.lineEnd=Jr,nr=[],Kn=[]},polygonEnd:function(){Dr.point=Yr,Dr.lineStart=di,Dr.lineEnd=Di,nr=x.merge(nr);var ci=qr(Kn,rn);nr.length?(Wr||(bn.polygonStart(),Wr=!0),In(nr,pr,ci,xn,bn)):ci&&(Wr||(bn.polygonStart(),Wr=!0),bn.lineStart(),xn(null,null,1,bn),bn.lineEnd()),Wr&&(bn.polygonEnd(),Wr=!1),nr=Kn=null},sphere:function(){bn.polygonStart(),bn.lineStart(),xn(null,null,1,bn),bn.lineEnd(),bn.polygonEnd()}};function Yr(ci,pi){At(ci,pi)&&bn.point(ci,pi)}function si(ci,pi){Er.point(ci,pi)}function di(){Dr.point=si,Er.lineStart()}function Di(){Dr.point=Yr,Er.lineEnd()}function br(ci,pi){vr.push([ci,pi]),Rr.point(ci,pi)}function Si(){Rr.lineStart(),vr=[]}function Jr(){br(vr[0][0],vr[0][1]),Rr.lineEnd();var ci,pi,ra,ma,$r=Rr.clean(),Ta=kr.result(),da=Ta.length;if(vr.pop(),Kn.push(vr),vr=null,da)if(1&$r){if((pi=(ra=Ta[0]).length-1)>0){for(Wr||(bn.polygonStart(),Wr=!0),bn.lineStart(),ci=0;ci<pi;++ci)bn.point((ma=ra[ci])[0],ma[1]);bn.lineEnd()}}else da>1&&2&$r&&Ta.push(Ta.pop().concat(Ta.shift())),nr.push(Ta.filter(Ar))}return Dr}}function Ar(At){return At.length>1}function pr(At,Yt){return((At=At.x)[0]<0?At[1]-i-a:i-At[1])-((Yt=Yt.x)[0]<0?Yt[1]-i-a:i-Yt[1])}var Fn=ti(function(){return!0},function(At){var Yt,xn=NaN,rn=NaN,bn=NaN;return{lineStart:function(){At.lineStart(),Yt=1},point:function(Kn,nr){var kr,Rr,Wr,Dr,Yr,si,di,vr=Kn>0?l:-l,Er=h(Kn-xn);h(Er-l)<a?(At.point(xn,rn=(rn+nr)/2>0?i:-i),At.point(bn,rn),At.lineEnd(),At.lineStart(),At.point(vr,rn),At.point(Kn,rn),Yt=0):bn!==vr&&Er>=l&&(h(xn-bn)<a&&(xn-=bn*a),h(Kn-vr)<a&&(Kn-=vr*a),Rr=rn,Dr=nr,di=A((kr=xn)-(Wr=Kn)),rn=h(di)>a?p((A(Rr)*(si=g(Dr))*A(Wr)-A(Dr)*(Yr=g(Rr))*A(kr))/(Yr*si*di)):(Rr+Dr)/2,At.point(bn,rn),At.lineEnd(),At.lineStart(),At.point(vr,rn),Yt=0),At.point(xn=Kn,rn=nr),bn=vr},lineEnd:function(){At.lineEnd(),xn=rn=NaN},clean:function(){return 2-Yt}}},function(At,Yt,xn,rn){var bn;if(null==At)rn.point(-l,bn=xn*i),rn.point(0,bn),rn.point(l,bn),rn.point(l,0),rn.point(l,-bn),rn.point(0,-bn),rn.point(-l,-bn),rn.point(-l,0),rn.point(-l,bn);else if(h(At[0]-Yt[0])>a){var Kn=At[0]<Yt[0]?l:-l;rn.point(-Kn,bn=xn*Kn/2),rn.point(0,bn),rn.point(Kn,bn)}else rn.point(Yt[0],Yt[1])},[-l,-i]);function Rn(At){var Yt=g(At),xn=6*c,rn=Yt>0,bn=h(Yt)>a;function Kn(Er,kr){return g(Er)*g(kr)>Yt}function nr(Er,kr,Rr){var Wr=[1,0,0],Dr=be(de(Er),de(kr)),Yr=he(Dr,Dr),si=Dr[0],di=Yr-si*si;if(!di)return!Rr&&Er;var Di=Yt*Yr/di,br=-Yt*si/di,Si=be(Wr,Dr),Jr=we(Wr,Di);ge(Jr,we(Dr,br));var ci=Si,pi=he(Jr,ci),ra=he(ci,ci),ma=pi*pi-ra*(he(Jr,Jr)-1);if(!(ma<0)){var $r=C(ma),Ta=we(ci,(-pi-$r)/ra);if(ge(Ta,Jr),Ta=ue(Ta),!Rr)return Ta;var da,Wi=Er[0],va=kr[0],ua=Er[1],xa=kr[1];va<Wi&&(da=Wi,Wi=va,va=da);var Mi=va-Wi,ja=h(Mi-l)<a;if(!ja&&xa<ua&&(da=ua,ua=xa,xa=da),ja||Mi<a?ja?ua+xa>0^Ta[1]<(h(Ta[0]-Wi)<a?ua:xa):ua<=Ta[1]&&Ta[1]<=xa:Mi>l^(Wi<=Ta[0]&&Ta[0]<=va)){var Vo=we(ci,(-pi+$r)/ra);return ge(Vo,Jr),[Ta,ue(Vo)]}}}function vr(Er,kr){var Rr=rn?At:l-At,Wr=0;return Er<-Rr?Wr|=1:Er>Rr&&(Wr|=2),kr<-Rr?Wr|=4:kr>Rr&&(Wr|=8),Wr}return ti(Kn,function(Er){var kr,Rr,Wr,Dr,Yr;return{lineStart:function(){Dr=Wr=!1,Yr=1},point:function(si,di){var Di,br=[si,di],Si=Kn(si,di),Jr=rn?Si?0:vr(si,di):Si?vr(si+(si<0?l:-l),di):0;if(!kr&&(Dr=Wr=Si)&&Er.lineStart(),Si!==Wr&&(!(Di=nr(kr,br))||En(kr,Di)||En(br,Di))&&(br[2]=1),Si!==Wr)Yr=0,Si?(Er.lineStart(),Di=nr(br,kr),Er.point(Di[0],Di[1])):(Di=nr(kr,br),Er.point(Di[0],Di[1],2),Er.lineEnd()),kr=Di;else if(bn&&kr&&rn^Si){var ci;Jr&Rr||!(ci=nr(br,kr,!0))||(Yr=0,rn?(Er.lineStart(),Er.point(ci[0][0],ci[0][1]),Er.point(ci[1][0],ci[1][1]),Er.lineEnd()):(Er.point(ci[1][0],ci[1][1]),Er.lineEnd(),Er.lineStart(),Er.point(ci[0][0],ci[0][1],3)))}!Si||kr&&En(kr,br)||Er.point(br[0],br[1]),kr=br,Wr=Si,Rr=Jr},lineEnd:function(){Wr&&Er.lineEnd(),kr=null},clean:function(){return Yr|(Dr&&Wr)<<1}}},function(Er,kr,Rr,Wr){Dn(Wr,At,xn,Rr,Er,kr)},rn?[0,-At]:[-l,At-l])}function hr(At,Yt,xn,rn){function bn(kr,Rr){return At<=kr&&kr<=xn&&Yt<=Rr&&Rr<=rn}function Kn(kr,Rr,Wr,Dr){var Yr=0,si=0;if(null==kr||(Yr=nr(kr,Wr))!==(si=nr(Rr,Wr))||Er(kr,Rr)<0^Wr>0)do{Dr.point(0===Yr||3===Yr?At:xn,Yr>1?rn:Yt)}while((Yr=(Yr+Wr+4)%4)!==si);else Dr.point(Rr[0],Rr[1])}function nr(kr,Rr){return h(kr[0]-At)<a?Rr>0?0:3:h(kr[0]-xn)<a?Rr>0?2:1:h(kr[1]-Yt)<a?Rr>0?1:0:Rr>0?3:2}function vr(kr,Rr){return Er(kr.x,Rr.x)}function Er(kr,Rr){var Wr=nr(kr,1),Dr=nr(Rr,1);return Wr!==Dr?Wr-Dr:0===Wr?Rr[1]-kr[1]:1===Wr?kr[0]-Rr[0]:2===Wr?kr[1]-Rr[1]:Rr[0]-kr[0]}return function(kr){var Rr,Wr,Dr,Yr,si,di,Di,br,Si,Jr,ci,pi=kr,ra=pn(),ma={point:$r,lineStart:function(){ma.point=Ta,Wr&&Wr.push(Dr=[]),Jr=!0,Si=!1,Di=br=NaN},lineEnd:function(){Rr&&(Ta(Yr,si),di&&Si&&ra.rejoin(),Rr.push(ra.result())),ma.point=$r,Si&&pi.lineEnd()},polygonStart:function(){pi=ra,Rr=[],Wr=[],ci=!0},polygonEnd:function(){var da=function(){for(var ua=0,xa=0,Mi=Wr.length;xa<Mi;++xa)for(var ja,Vo,kl=Wr[xa],tl=1,fs=kl.length,Ji=kl[0],po=Ji[0],Ns=Ji[1];tl<fs;++tl)ja=po,Vo=Ns,po=(Ji=kl[tl])[0],Ns=Ji[1],Vo<=rn?Ns>rn&&(po-ja)*(rn-Vo)>(Ns-Vo)*(At-ja)&&++ua:Ns<=rn&&(po-ja)*(rn-Vo)<(Ns-Vo)*(At-ja)&&--ua;return ua}(),Wi=ci&&da,va=(Rr=x.merge(Rr)).length;(Wi||va)&&(kr.polygonStart(),Wi&&(kr.lineStart(),Kn(null,null,1,kr),kr.lineEnd()),va&&In(Rr,vr,da,Kn,kr),kr.polygonEnd()),pi=kr,Rr=Wr=Dr=null}};function $r(da,Wi){bn(da,Wi)&&pi.point(da,Wi)}function Ta(da,Wi){var va=bn(da,Wi);if(Wr&&Dr.push([da,Wi]),Jr)Yr=da,si=Wi,di=va,Jr=!1,va&&(pi.lineStart(),pi.point(da,Wi));else if(va&&Si)pi.point(da,Wi);else{var ua=[Di=Math.max(-1e9,Math.min(1e9,Di)),br=Math.max(-1e9,Math.min(1e9,br))],xa=[da=Math.max(-1e9,Math.min(1e9,da)),Wi=Math.max(-1e9,Math.min(1e9,Wi))];!function(Mi,ja,Vo,kl,tl,fs){var Ji,po=Mi[0],Ns=Mi[1],Qi=0,Mo=1,ts=ja[0]-po,la=ja[1]-Ns;if(Ji=Vo-po,ts||!(Ji>0)){if(Ji/=ts,ts<0){if(Ji<Qi)return;Ji<Mo&&(Mo=Ji)}else if(ts>0){if(Ji>Mo)return;Ji>Qi&&(Qi=Ji)}if(Ji=tl-po,ts||!(Ji<0)){if(Ji/=ts,ts<0){if(Ji>Mo)return;Ji>Qi&&(Qi=Ji)}else if(ts>0){if(Ji<Qi)return;Ji<Mo&&(Mo=Ji)}if(Ji=kl-Ns,la||!(Ji>0)){if(Ji/=la,la<0){if(Ji<Qi)return;Ji<Mo&&(Mo=Ji)}else if(la>0){if(Ji>Mo)return;Ji>Qi&&(Qi=Ji)}if(Ji=fs-Ns,la||!(Ji<0)){if(Ji/=la,la<0){if(Ji>Mo)return;Ji>Qi&&(Qi=Ji)}else if(la>0){if(Ji<Qi)return;Ji<Mo&&(Mo=Ji)}return Qi>0&&(Mi[0]=po+Qi*ts,Mi[1]=Ns+Qi*la),Mo<1&&(ja[0]=po+Mo*ts,ja[1]=Ns+Mo*la),!0}}}}}(ua,xa,At,Yt,xn,rn)?va&&(pi.lineStart(),pi.point(da,Wi),ci=!1):(Si||(pi.lineStart(),pi.point(ua[0],ua[1])),pi.point(xa[0],xa[1]),va||pi.lineEnd(),ci=!1)}Di=da,br=Wi,Si=va}return ma}}var ri,ir,Ur,Mr=T(),wr={sphere:L,point:L,lineStart:function(){wr.point=gn,wr.lineEnd=ii},lineEnd:L,polygonStart:L,polygonEnd:L};function ii(){wr.point=wr.lineEnd=L}function gn(At,Yt){ri=At*=c,ir=A(Yt*=c),Ur=g(Yt),wr.point=jt}function jt(At,Yt){At*=c;var xn=A(Yt*=c),rn=g(Yt),bn=h(At-ri),Kn=g(bn),nr=rn*A(bn),vr=Ur*xn-ir*rn*Kn,Er=ir*xn+Ur*rn*Kn;Mr.add(v(C(nr*nr+vr*vr),Er)),ri=At,ir=xn,Ur=rn}function Jt(At){return Mr.reset(),ee(At,wr),+Mr}var An=[null,null],Hn={type:"LineString",coordinates:An};function yr(At,Yt){return An[0]=At,An[1]=Yt,Jt(Hn)}var gr={Feature:function(At,Yt){return Nn(At.geometry,Yt)},FeatureCollection:function(At,Yt){for(var xn=At.features,rn=-1,bn=xn.length;++rn<bn;)if(Nn(xn[rn].geometry,Yt))return!0;return!1}},Bn={Sphere:function(){return!0},Point:function(At,Yt){return Zn(At.coordinates,Yt)},MultiPoint:function(At,Yt){for(var xn=At.coordinates,rn=-1,bn=xn.length;++rn<bn;)if(Zn(xn[rn],Yt))return!0;return!1},LineString:function(At,Yt){return Wn(At.coordinates,Yt)},MultiLineString:function(At,Yt){for(var xn=At.coordinates,rn=-1,bn=xn.length;++rn<bn;)if(Wn(xn[rn],Yt))return!0;return!1},Polygon:function(At,Yt){return jn(At.coordinates,Yt)},MultiPolygon:function(At,Yt){for(var xn=At.coordinates,rn=-1,bn=xn.length;++rn<bn;)if(jn(xn[rn],Yt))return!0;return!1},GeometryCollection:function(At,Yt){for(var xn=At.geometries,rn=-1,bn=xn.length;++rn<bn;)if(Nn(xn[rn],Yt))return!0;return!1}};function Nn(At,Yt){return!(!At||!Bn.hasOwnProperty(At.type))&&Bn[At.type](At,Yt)}function Zn(At,Yt){return 0===yr(At,Yt)}function Wn(At,Yt){for(var xn,rn,bn,Kn=0,nr=At.length;Kn<nr;Kn++){if(0===(rn=yr(At[Kn],Yt))||Kn>0&&(bn=yr(At[Kn],At[Kn-1]))>0&&xn<=bn&&rn<=bn&&(xn+rn-bn)*(1-Math.pow((xn-rn)/bn,2))<1e-12*bn)return!0;xn=rn}return!1}function jn(At,Yt){return!!qr(At.map(xr),Ir(Yt))}function xr(At){return(At=At.map(Ir)).pop(),At}function Ir(At){return[At[0]*c,At[1]*c]}function Vr(At,Yt,xn){var rn=x.range(At,Yt-a,xn).concat(Yt);return function(bn){return rn.map(function(Kn){return[bn,Kn]})}}function qn(At,Yt,xn){var rn=x.range(At,Yt-a,xn).concat(Yt);return function(bn){return rn.map(function(Kn){return[Kn,bn]})}}function jr(){var At,Yt,xn,rn,bn,Kn,nr,vr,Er,kr,Rr,Wr,Dr=10,Yr=Dr,si=90,di=360,Di=2.5;function br(){return{type:"MultiLineString",coordinates:Si()}}function Si(){return x.range(f(rn/si)*si,xn,si).map(Rr).concat(x.range(f(vr/di)*di,nr,di).map(Wr)).concat(x.range(f(Yt/Dr)*Dr,At,Dr).filter(function(Jr){return h(Jr%si)>a}).map(Er)).concat(x.range(f(Kn/Yr)*Yr,bn,Yr).filter(function(Jr){return h(Jr%di)>a}).map(kr))}return br.lines=function(){return Si().map(function(Jr){return{type:"LineString",coordinates:Jr}})},br.outline=function(){return{type:"Polygon",coordinates:[Rr(rn).concat(Wr(nr).slice(1),Rr(xn).reverse().slice(1),Wr(vr).reverse().slice(1))]}},br.extent=function(Jr){return arguments.length?br.extentMajor(Jr).extentMinor(Jr):br.extentMinor()},br.extentMajor=function(Jr){return arguments.length?(vr=+Jr[0][1],nr=+Jr[1][1],(rn=+Jr[0][0])>(xn=+Jr[1][0])&&(Jr=rn,rn=xn,xn=Jr),vr>nr&&(Jr=vr,vr=nr,nr=Jr),br.precision(Di)):[[rn,vr],[xn,nr]]},br.extentMinor=function(Jr){return arguments.length?(Kn=+Jr[0][1],bn=+Jr[1][1],(Yt=+Jr[0][0])>(At=+Jr[1][0])&&(Jr=Yt,Yt=At,At=Jr),Kn>bn&&(Jr=Kn,Kn=bn,bn=Jr),br.precision(Di)):[[Yt,Kn],[At,bn]]},br.step=function(Jr){return arguments.length?br.stepMajor(Jr).stepMinor(Jr):br.stepMinor()},br.stepMajor=function(Jr){return arguments.length?(si=+Jr[0],di=+Jr[1],br):[si,di]},br.stepMinor=function(Jr){return arguments.length?(Dr=+Jr[0],Yr=+Jr[1],br):[Dr,Yr]},br.precision=function(Jr){return arguments.length?(Di=+Jr,Er=Vr(Kn,bn,90),kr=qn(Yt,At,Di),Rr=Vr(vr,nr,90),Wr=qn(rn,xn,Di),br):Di},br.extentMajor([[-180,-90+a],[180,90-a]]).extentMinor([[-180,-80-a],[180,80+a]])}function tr(At){return At}var ur,Cr,Fr,Zr,Ii=T(),gi=T(),zr={point:L,lineStart:L,lineEnd:L,polygonStart:function(){zr.lineStart=Ci,zr.lineEnd=Do},polygonEnd:function(){zr.lineStart=zr.lineEnd=zr.point=L,Ii.add(h(gi)),gi.reset()},result:function(){var At=Ii/2;return Ii.reset(),At}};function Ci(){zr.point=qi}function qi(At,Yt){zr.point=ki,ur=Fr=At,Cr=Zr=Yt}function ki(At,Yt){gi.add(Zr*At-Fr*Yt),Fr=At,Zr=Yt}function Do(){ki(ur,Cr)}var Ho,Sl,ls,yo,$a=1/0,Ka=$a,ga=-$a,Na=ga,zo={point:function(At,Yt){At<$a&&($a=At),At>ga&&(ga=At),Yt<Ka&&(Ka=Yt),Yt>Na&&(Na=Yt)},lineStart:L,lineEnd:L,polygonStart:L,polygonEnd:L,result:function(){var At=[[$a,Ka],[ga,Na]];return ga=Na=-(Ka=$a=1/0),At}},dl=0,Ba=0,Ws=0,Os=0,sa=0,vs=0,Rs=0,es=0,pa=0,oo={point:Zo,lineStart:zl,lineEnd:pl,polygonStart:function(){oo.lineStart=El,oo.lineEnd=Go},polygonEnd:function(){oo.point=Zo,oo.lineStart=zl,oo.lineEnd=pl},result:function(){var At=pa?[Rs/pa,es/pa]:vs?[Os/vs,sa/vs]:Ws?[dl/Ws,Ba/Ws]:[NaN,NaN];return dl=Ba=Ws=Os=sa=vs=Rs=es=pa=0,At}};function Zo(At,Yt){dl+=At,Ba+=Yt,++Ws}function zl(){oo.point=ru}function ru(At,Yt){oo.point=wa,Zo(ls=At,yo=Yt)}function wa(At,Yt){var xn=At-ls,rn=Yt-yo,bn=C(xn*xn+rn*rn);Os+=bn*(ls+At)/2,sa+=bn*(yo+Yt)/2,vs+=bn,Zo(ls=At,yo=Yt)}function pl(){oo.point=Zo}function El(){oo.point=vu}function Go(){Yl(Ho,Sl)}function vu(At,Yt){oo.point=Yl,Zo(Ho=ls=At,Sl=yo=Yt)}function Yl(At,Yt){var xn=At-ls,rn=Yt-yo,bn=C(xn*xn+rn*rn);Os+=bn*(ls+At)/2,sa+=bn*(yo+Yt)/2,vs+=bn,Rs+=(bn=yo*At-ls*Yt)*(ls+At),es+=bn*(yo+Yt),pa+=3*bn,Zo(ls=At,yo=Yt)}function iu(At){this._context=At}iu.prototype={_radius:4.5,pointRadius:function(At){return this._radius=At,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(At,Yt){switch(this._point){case 0:this._context.moveTo(At,Yt),this._point=1;break;case 1:this._context.lineTo(At,Yt);break;default:this._context.moveTo(At+this._radius,Yt),this._context.arc(At,Yt,this._radius,0,u)}},result:L};var Fs,Pa,ml,el,ai,No=T(),Ja={point:L,lineStart:function(){Ja.point=zs},lineEnd:function(){Fs&&Bo(Pa,ml),Ja.point=L},polygonStart:function(){Fs=!0},polygonEnd:function(){Fs=null},result:function(){var At=+No;return No.reset(),At}};function zs(At,Yt){Ja.point=Bo,Pa=el=At,ml=ai=Yt}function Bo(At,Yt){No.add(C((el-=At)*el+(ai-=Yt)*ai)),el=At,ai=Yt}function jo(){this._string=[]}function Ml(At){return"m0,"+At+"a"+At+","+At+" 0 1,1 0,"+-2*At+"a"+At+","+At+" 0 1,1 0,"+2*At+"z"}function ks(At){return function(Yt){var xn=new Da;for(var rn in At)xn[rn]=At[rn];return xn.stream=Yt,xn}}function Da(){}function Ye(At,Yt,xn){var rn=At.clipExtent&&At.clipExtent();return At.scale(150).translate([0,0]),null!=rn&&At.clipExtent(null),ee(xn,At.stream(zo)),Yt(zo.result()),null!=rn&&At.clipExtent(rn),At}function Je(At,Yt,xn){return Ye(At,function(rn){var bn=Yt[1][0]-Yt[0][0],Kn=Yt[1][1]-Yt[0][1],nr=Math.min(bn/(rn[1][0]-rn[0][0]),Kn/(rn[1][1]-rn[0][1])),vr=+Yt[0][0]+(bn-nr*(rn[1][0]+rn[0][0]))/2,Er=+Yt[0][1]+(Kn-nr*(rn[1][1]+rn[0][1]))/2;At.scale(150*nr).translate([vr,Er])},xn)}function st(At,Yt,xn){return Je(At,[[0,0],Yt],xn)}function mt(At,Yt,xn){return Ye(At,function(rn){var bn=+Yt,Kn=bn/(rn[1][0]-rn[0][0]),nr=(bn-Kn*(rn[1][0]+rn[0][0]))/2,vr=-Kn*rn[0][1];At.scale(150*Kn).translate([nr,vr])},xn)}function Mt(At,Yt,xn){return Ye(At,function(rn){var bn=+Yt,Kn=bn/(rn[1][1]-rn[0][1]),nr=-Kn*rn[0][0],vr=(bn-Kn*(rn[1][1]+rn[0][1]))/2;At.scale(150*Kn).translate([nr,vr])},xn)}jo.prototype={_radius:4.5,_circle:Ml(4.5),pointRadius:function(At){return(At=+At)!==this._radius&&(this._radius=At,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(At,Yt){switch(this._point){case 0:this._string.push("M",At,",",Yt),this._point=1;break;case 1:this._string.push("L",At,",",Yt);break;default:null==this._circle&&(this._circle=Ml(this._radius)),this._string.push("M",At,",",Yt,this._circle)}},result:function(){if(this._string.length){var At=this._string.join("");return this._string=[],At}return null}},Da.prototype={constructor:Da,point:function(At,Yt){this.stream.point(At,Yt)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var pt=g(30*c);function St(At,Yt){return+Yt?function(xn,rn){function bn(Kn,nr,vr,Er,kr,Rr,Wr,Dr,Yr,si,di,Di,br,Si){var Jr=Wr-Kn,ci=Dr-nr,pi=Jr*Jr+ci*ci;if(pi>4*rn&&br--){var ra=Er+si,ma=kr+di,$r=Rr+Di,Ta=C(ra*ra+ma*ma+$r*$r),da=F($r/=Ta),Wi=h(h($r)-1)<a||h(vr-Yr)<a?(vr+Yr)/2:v(ma,ra),va=xn(Wi,da),ua=va[0],xa=va[1],Mi=ua-Kn,ja=xa-nr,Vo=ci*Mi-Jr*ja;(Vo*Vo/pi>rn||h((Jr*Mi+ci*ja)/pi-.5)>.3||Er*si+kr*di+Rr*Di<pt)&&(bn(Kn,nr,vr,Er,kr,Rr,ua,xa,Wi,ra/=Ta,ma/=Ta,$r,br,Si),Si.point(ua,xa),bn(ua,xa,Wi,ra,ma,$r,Wr,Dr,Yr,si,di,Di,br,Si))}}return function(Kn){var nr,vr,Er,kr,Rr,Wr,Dr,Yr,si,di,Di,br,Si={point:Jr,lineStart:ci,lineEnd:ra,polygonStart:function(){Kn.polygonStart(),Si.lineStart=ma},polygonEnd:function(){Kn.polygonEnd(),Si.lineStart=ci}};function Jr(da,Wi){da=xn(da,Wi),Kn.point(da[0],da[1])}function ci(){Yr=NaN,Si.point=pi,Kn.lineStart()}function pi(da,Wi){var va=de([da,Wi]),ua=xn(da,Wi);bn(Yr,si,Dr,di,Di,br,Yr=ua[0],si=ua[1],Dr=da,di=va[0],Di=va[1],br=va[2],16,Kn),Kn.point(Yr,si)}function ra(){Si.point=Jr,Kn.lineEnd()}function ma(){ci(),Si.point=$r,Si.lineEnd=Ta}function $r(da,Wi){pi(nr=da,Wi),vr=Yr,Er=si,kr=di,Rr=Di,Wr=br,Si.point=pi}function Ta(){bn(Yr,si,Dr,di,Di,br,vr,Er,nr,kr,Rr,Wr,16,Kn),Si.lineEnd=ra,ra()}return Si}}(At,Yt):(xn=At,ks({point:function(rn,bn){rn=xn(rn,bn),this.stream.point(rn[0],rn[1])}}));var xn}var an=ks({point:function(At,Yt){this.stream.point(At*c,Yt*c)}});function fn(At,Yt,xn,rn,bn){function Kn(nr,vr){return[Yt+At*(nr*=rn),xn-At*(vr*=bn)]}return Kn.invert=function(nr,vr){return[(nr-Yt)/At*rn,(xn-vr)/At*bn]},Kn}function ln(At,Yt,xn,rn,bn,Kn){var nr=g(Kn),vr=A(Kn),Er=nr*At,kr=vr*At,Rr=nr/At,Wr=vr/At,Dr=(vr*xn-nr*Yt)/At,Yr=(vr*Yt+nr*xn)/At;function si(di,Di){return[Er*(di*=rn)-kr*(Di*=bn)+Yt,xn-kr*di-Er*Di]}return si.invert=function(di,Di){return[rn*(Rr*di-Wr*Di+Dr),bn*(Yr-Wr*di-Rr*Di)]},si}function mn(At){return Mn(function(){return At})()}function Mn(At){var Yt,xn,rn,bn,Kn,nr,vr,Er,kr,Rr,Wr=150,Dr=480,Yr=250,si=0,di=0,Di=0,br=0,Si=0,Jr=0,ci=1,pi=1,ra=null,ma=Fn,$r=null,Ta=tr,da=.5;function Wi(Mi){return Er(Mi[0]*c,Mi[1]*c)}function va(Mi){return(Mi=Er.invert(Mi[0],Mi[1]))&&[Mi[0]*s,Mi[1]*s]}function ua(){var Mi=ln(Wr,0,0,ci,pi,Jr).apply(null,Yt(si,di)),ja=(Jr?ln:fn)(Wr,Dr-Mi[0],Yr-Mi[1],ci,pi,Jr);return xn=_n(Di,br,Si),vr=Gt(Yt,ja),Er=Gt(xn,vr),nr=St(vr,da),xa()}function xa(){return kr=Rr=null,Wi}return Wi.stream=function(Mi){return kr&&Rr===Mi?kr:kr=an((ja=xn,ks({point:function(Vo,kl){var tl=ja(Vo,kl);return this.stream.point(tl[0],tl[1])}}))(ma(nr(Ta(Rr=Mi)))));var ja},Wi.preclip=function(Mi){return arguments.length?(ma=Mi,ra=void 0,xa()):ma},Wi.postclip=function(Mi){return arguments.length?(Ta=Mi,$r=rn=bn=Kn=null,xa()):Ta},Wi.clipAngle=function(Mi){return arguments.length?(ma=+Mi?Rn(ra=Mi*c):(ra=null,Fn),xa()):ra*s},Wi.clipExtent=function(Mi){return arguments.length?(Ta=null==Mi?($r=rn=bn=Kn=null,tr):hr($r=+Mi[0][0],rn=+Mi[0][1],bn=+Mi[1][0],Kn=+Mi[1][1]),xa()):null==$r?null:[[$r,rn],[bn,Kn]]},Wi.scale=function(Mi){return arguments.length?(Wr=+Mi,ua()):Wr},Wi.translate=function(Mi){return arguments.length?(Dr=+Mi[0],Yr=+Mi[1],ua()):[Dr,Yr]},Wi.center=function(Mi){return arguments.length?(si=Mi[0]%360*c,di=Mi[1]%360*c,ua()):[si*s,di*s]},Wi.rotate=function(Mi){return arguments.length?(Di=Mi[0]%360*c,br=Mi[1]%360*c,Si=Mi.length>2?Mi[2]%360*c:0,ua()):[Di*s,br*s,Si*s]},Wi.angle=function(Mi){return arguments.length?(Jr=Mi%360*c,ua()):Jr*s},Wi.reflectX=function(Mi){return arguments.length?(ci=Mi?-1:1,ua()):ci<0},Wi.reflectY=function(Mi){return arguments.length?(pi=Mi?-1:1,ua()):pi<0},Wi.precision=function(Mi){return arguments.length?(nr=St(vr,da=Mi*Mi),xa()):C(da)},Wi.fitExtent=function(Mi,ja){return Je(Wi,Mi,ja)},Wi.fitSize=function(Mi,ja){return st(Wi,Mi,ja)},Wi.fitWidth=function(Mi,ja){return mt(Wi,Mi,ja)},Wi.fitHeight=function(Mi,ja){return Mt(Wi,Mi,ja)},function(){return Yt=At.apply(this,arguments),Wi.invert=Yt.invert&&va,ua()}}function Sn(At){var Yt=0,xn=l/3,rn=Mn(At),bn=rn(Yt,xn);return bn.parallels=function(Kn){return arguments.length?rn(Yt=Kn[0]*c,xn=Kn[1]*c):[Yt*s,xn*s]},bn}function zn(At,Yt){var xn=A(At),rn=(xn+A(Yt))/2;if(h(rn)<a)return function(vr){var Er=g(vr);function kr(Rr,Wr){return[Rr*Er,A(Wr)/Er]}return kr.invert=function(Rr,Wr){return[Rr/Er,F(Wr*Er)]},kr}(At);var bn=1+xn*(2*rn-xn),Kn=C(bn)/rn;function nr(vr,Er){var kr=C(bn-2*rn*A(Er))/rn;return[kr*A(vr*=rn),Kn-kr*g(vr)]}return nr.invert=function(vr,Er){var kr=Kn-Er,Rr=v(vr,h(kr))*k(kr);return kr*rn<0&&(Rr-=l*k(vr)*k(kr)),[Rr/rn,F((bn-(vr*vr+kr*kr)*rn*rn)/(2*rn))]},nr}function $n(){return Sn(zn).scale(155.424).center([0,33.6442])}function or(){return $n().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Lr(At){return function(Yt,xn){var rn=g(Yt),bn=g(xn),Kn=At(rn*bn);return[Kn*bn*A(Yt),Kn*A(xn)]}}function Kr(At){return function(Yt,xn){var rn=C(Yt*Yt+xn*xn),bn=At(rn),Kn=A(bn),nr=g(bn);return[v(Yt*Kn,rn*nr),F(rn&&xn*Kn/rn)]}}var oi=Lr(function(At){return C(2/(1+At))});oi.invert=Kr(function(At){return 2*F(At/2)});var fi=Lr(function(At){return(At=D(At))&&At/A(At)});function Qr(At,Yt){return[At,y(P((i+Yt)/2))]}function ji(At){var Yt,xn,rn,bn=mn(At),Kn=bn.center,nr=bn.scale,vr=bn.translate,Er=bn.clipExtent,kr=null;function Rr(){var Wr=l*nr(),Dr=bn(On(bn.rotate()).invert([0,0]));return Er(null==kr?[[Dr[0]-Wr,Dr[1]-Wr],[Dr[0]+Wr,Dr[1]+Wr]]:At===Qr?[[Math.max(Dr[0]-Wr,kr),Yt],[Math.min(Dr[0]+Wr,xn),rn]]:[[kr,Math.max(Dr[1]-Wr,Yt)],[xn,Math.min(Dr[1]+Wr,rn)]])}return bn.scale=function(Wr){return arguments.length?(nr(Wr),Rr()):nr()},bn.translate=function(Wr){return arguments.length?(vr(Wr),Rr()):vr()},bn.center=function(Wr){return arguments.length?(Kn(Wr),Rr()):Kn()},bn.clipExtent=function(Wr){return arguments.length?(null==Wr?kr=Yt=xn=rn=null:(kr=+Wr[0][0],Yt=+Wr[0][1],xn=+Wr[1][0],rn=+Wr[1][1]),Rr()):null==kr?null:[[kr,Yt],[xn,rn]]},Rr()}function Ki(At){return P((i+At)/2)}function fa(At,Yt){var xn=g(At),rn=At===Yt?A(At):y(xn/g(Yt))/y(Ki(Yt)/Ki(At)),bn=xn*M(Ki(At),rn)/rn;if(!rn)return Qr;function Kn(nr,vr){bn>0?vr<-i+a&&(vr=-i+a):vr>i-a&&(vr=i-a);var Er=bn/M(Ki(vr),rn);return[Er*A(rn*nr),bn-Er*g(rn*nr)]}return Kn.invert=function(nr,vr){var Er=bn-vr,kr=k(rn)*C(nr*nr+Er*Er),Rr=v(nr,h(Er))*k(Er);return Er*rn<0&&(Rr-=l*k(nr)*k(Er)),[Rr/rn,2*p(M(bn/kr,1/rn))-i]},Kn}function Vi(At,Yt){return[At,Yt]}function Oa(At,Yt){var xn=g(At),rn=At===Yt?A(At):(xn-g(Yt))/(Yt-At),bn=xn/rn+At;if(h(rn)<a)return Vi;function Kn(nr,vr){var Er=bn-vr,kr=rn*nr;return[Er*A(kr),bn-Er*g(kr)]}return Kn.invert=function(nr,vr){var Er=bn-vr,kr=v(nr,h(Er))*k(Er);return Er*rn<0&&(kr-=l*k(nr)*k(Er)),[kr/rn,bn-k(rn)*C(nr*nr+Er*Er)]},Kn}fi.invert=Kr(function(At){return At}),Qr.invert=function(At,Yt){return[At,2*p(w(Yt))-i]},Vi.invert=Vi;var Lo=1.340264,Ua=-.081106,Sa=893e-6,Wa=.003796,fo=C(3)/2;function Io(At,Yt){var xn=F(fo*A(Yt)),rn=xn*xn,bn=rn*rn*rn;return[At*g(xn)/(fo*(Lo+3*Ua*rn+bn*(7*Sa+9*Wa*rn))),xn*(Lo+Ua*rn+bn*(Sa+Wa*rn))]}function ho(At,Yt){var xn=g(Yt),rn=g(At)*xn;return[xn*A(At)/rn,A(Yt)/rn]}function us(At,Yt){var xn=Yt*Yt,rn=xn*xn;return[At*(.8707-.131979*xn+rn*(rn*(.003971*xn-.001529*rn)-.013791)),Yt*(1.007226+xn*(.015085+rn*(.028874*xn-.044475-.005916*rn)))]}function xs(At,Yt){return[g(Yt)*A(At),A(Yt)]}function cs(At,Yt){var xn=g(Yt),rn=1+g(At)*xn;return[xn*A(At)/rn,A(Yt)/rn]}function ka(At,Yt){return[y(P((i+Yt)/2)),-At]}Io.invert=function(At,Yt){for(var xn,rn=Yt,bn=rn*rn,Kn=bn*bn*bn,nr=0;nr<12&&(Kn=(bn=(rn-=xn=(rn*(Lo+Ua*bn+Kn*(Sa+Wa*bn))-Yt)/(Lo+3*Ua*bn+Kn*(7*Sa+9*Wa*bn)))*rn)*bn*bn,!(h(xn)<1e-12));++nr);return[fo*At*(Lo+3*Ua*bn+Kn*(7*Sa+9*Wa*bn))/g(rn),F(A(rn)/fo)]},ho.invert=Kr(p),us.invert=function(At,Yt){var xn,rn=Yt,bn=25;do{var Kn=rn*rn,nr=Kn*Kn;rn-=xn=(rn*(1.007226+Kn*(.015085+nr*(.028874*Kn-.044475-.005916*nr)))-Yt)/(1.007226+Kn*(.045255+nr*(.259866*Kn-.311325-.005916*11*nr)))}while(h(xn)>a&&--bn>0);return[At/(.8707+(Kn=rn*rn)*(Kn*(Kn*Kn*Kn*(.003971-.001529*Kn)-.013791)-.131979)),rn]},xs.invert=Kr(F),cs.invert=Kr(function(At){return 2*p(At)}),ka.invert=function(At,Yt){return[-Yt,2*p(w(At))-i]},m.geoAlbers=or,m.geoAlbersUsa=function(){var At,Yt,xn,rn,bn,Kn,nr=or(),vr=$n().rotate([154,0]).center([-2,58.5]).parallels([55,65]),Er=$n().rotate([157,0]).center([-3,19.9]).parallels([8,18]),kr={point:function(Dr,Yr){Kn=[Dr,Yr]}};function Rr(Dr){var Yr=Dr[0],si=Dr[1];return Kn=null,xn.point(Yr,si),Kn||(rn.point(Yr,si),Kn)||(bn.point(Yr,si),Kn)}function Wr(){return At=Yt=null,Rr}return Rr.invert=function(Dr){var Yr=nr.scale(),si=nr.translate(),di=(Dr[0]-si[0])/Yr,Di=(Dr[1]-si[1])/Yr;return(Di>=.12&&Di<.234&&di>=-.425&&di<-.214?vr:Di>=.166&&Di<.234&&di>=-.214&&di<-.115?Er:nr).invert(Dr)},Rr.stream=function(Dr){return At&&Yt===Dr?At:(Yr=[nr.stream(Yt=Dr),vr.stream(Dr),Er.stream(Dr)],si=Yr.length,At={point:function(di,Di){for(var br=-1;++br<si;)Yr[br].point(di,Di)},sphere:function(){for(var di=-1;++di<si;)Yr[di].sphere()},lineStart:function(){for(var di=-1;++di<si;)Yr[di].lineStart()},lineEnd:function(){for(var di=-1;++di<si;)Yr[di].lineEnd()},polygonStart:function(){for(var di=-1;++di<si;)Yr[di].polygonStart()},polygonEnd:function(){for(var di=-1;++di<si;)Yr[di].polygonEnd()}});var Yr,si},Rr.precision=function(Dr){return arguments.length?(nr.precision(Dr),vr.precision(Dr),Er.precision(Dr),Wr()):nr.precision()},Rr.scale=function(Dr){return arguments.length?(nr.scale(Dr),vr.scale(.35*Dr),Er.scale(Dr),Rr.translate(nr.translate())):nr.scale()},Rr.translate=function(Dr){if(!arguments.length)return nr.translate();var Yr=nr.scale(),si=+Dr[0],di=+Dr[1];return xn=nr.translate(Dr).clipExtent([[si-.455*Yr,di-.238*Yr],[si+.455*Yr,di+.238*Yr]]).stream(kr),rn=vr.translate([si-.307*Yr,di+.201*Yr]).clipExtent([[si-.425*Yr+a,di+.12*Yr+a],[si-.214*Yr-a,di+.234*Yr-a]]).stream(kr),bn=Er.translate([si-.205*Yr,di+.212*Yr]).clipExtent([[si-.214*Yr+a,di+.166*Yr+a],[si-.115*Yr-a,di+.234*Yr-a]]).stream(kr),Wr()},Rr.fitExtent=function(Dr,Yr){return Je(Rr,Dr,Yr)},Rr.fitSize=function(Dr,Yr){return st(Rr,Dr,Yr)},Rr.fitWidth=function(Dr,Yr){return mt(Rr,Dr,Yr)},Rr.fitHeight=function(Dr,Yr){return Mt(Rr,Dr,Yr)},Rr.scale(1070)},m.geoArea=function(At){return W.reset(),ee(At,ie),2*W},m.geoAzimuthalEqualArea=function(){return mn(oi).scale(124.75).clipAngle(179.999)},m.geoAzimuthalEqualAreaRaw=oi,m.geoAzimuthalEquidistant=function(){return mn(fi).scale(79.4188).clipAngle(179.999)},m.geoAzimuthalEquidistantRaw=fi,m.geoBounds=function(At){var Yt,xn,rn,bn,Kn,nr,vr;if(ve=Fe=-(De=Se=1/0),je=[],ee(At,Qe),xn=je.length){for(je.sort(wt),Yt=1,Kn=[rn=je[0]];Yt<xn;++Yt)_t(rn,(bn=je[Yt])[0])||_t(rn,bn[1])?(gt(rn[0],bn[1])>gt(rn[0],rn[1])&&(rn[1]=bn[1]),gt(bn[0],rn[1])>gt(rn[0],rn[1])&&(rn[0]=bn[0])):Kn.push(rn=bn);for(nr=-1/0,Yt=0,rn=Kn[xn=Kn.length-1];Yt<=xn;rn=bn,++Yt)(vr=gt(rn[1],(bn=Kn[Yt])[0]))>nr&&(nr=vr,De=bn[0],Fe=rn[1])}return je=Ge=null,De===1/0||Se===1/0?[[NaN,NaN],[NaN,NaN]]:[[De,Se],[Fe,ve]]},m.geoCentroid=function(At){Ke=lt=Ue=$e=et=tt=ct=xt=Ct=Ht=zt=0,ee(At,Rt);var Yt=Ct,xn=Ht,rn=zt,bn=Yt*Yt+xn*xn+rn*rn;return bn<1e-12&&(Yt=tt,xn=ct,rn=xt,lt<a&&(Yt=Ue,xn=$e,rn=et),(bn=Yt*Yt+xn*xn+rn*rn)<1e-12)?[NaN,NaN]:[v(xn,Yt)*s,F(rn/C(bn))*s]},m.geoCircle=function(){var At,Yt,xn=Lt([0,0]),rn=Lt(90),bn=Lt(6),Kn={point:function(vr,Er){At.push(vr=Yt(vr,Er)),vr[0]*=s,vr[1]*=s}};function nr(){var vr=xn.apply(this,arguments),Er=rn.apply(this,arguments)*c,kr=bn.apply(this,arguments)*c;return At=[],Yt=_n(-vr[0]*c,-vr[1]*c,0).invert,Dn(Kn,Er,kr,1),vr={type:"Polygon",coordinates:[At]},At=Yt=null,vr}return nr.center=function(vr){return arguments.length?(xn="function"==typeof vr?vr:Lt([+vr[0],+vr[1]]),nr):xn},nr.radius=function(vr){return arguments.length?(rn="function"==typeof vr?vr:Lt(+vr),nr):rn},nr.precision=function(vr){return arguments.length?(bn="function"==typeof vr?vr:Lt(+vr),nr):bn},nr},m.geoClipAntimeridian=Fn,m.geoClipCircle=Rn,m.geoClipExtent=function(){var At,Yt,xn,rn=0,bn=0,Kn=960,nr=500;return xn={stream:function(vr){return At&&Yt===vr?At:At=hr(rn,bn,Kn,nr)(Yt=vr)},extent:function(vr){return arguments.length?(rn=+vr[0][0],bn=+vr[0][1],Kn=+vr[1][0],nr=+vr[1][1],At=Yt=null,xn):[[rn,bn],[Kn,nr]]}}},m.geoClipRectangle=hr,m.geoConicConformal=function(){return Sn(fa).scale(109.5).parallels([30,30])},m.geoConicConformalRaw=fa,m.geoConicEqualArea=$n,m.geoConicEqualAreaRaw=zn,m.geoConicEquidistant=function(){return Sn(Oa).scale(131.154).center([0,13.9389])},m.geoConicEquidistantRaw=Oa,m.geoContains=function(At,Yt){return(At&&gr.hasOwnProperty(At.type)?gr[At.type]:Nn)(At,Yt)},m.geoDistance=yr,m.geoEqualEarth=function(){return mn(Io).scale(177.158)},m.geoEqualEarthRaw=Io,m.geoEquirectangular=function(){return mn(Vi).scale(152.63)},m.geoEquirectangularRaw=Vi,m.geoGnomonic=function(){return mn(ho).scale(144.049).clipAngle(60)},m.geoGnomonicRaw=ho,m.geoGraticule=jr,m.geoGraticule10=function(){return jr()()},m.geoIdentity=function(){var At,Yt,xn,rn,bn,Kn,nr,vr=1,Er=0,kr=0,Rr=1,Wr=1,Dr=0,Yr=null,si=1,di=1,Di=ks({point:function(ci,pi){var ra=Jr([ci,pi]);this.stream.point(ra[0],ra[1])}}),br=tr;function Si(){return si=vr*Rr,di=vr*Wr,Kn=nr=null,Jr}function Jr(ci){var pi=ci[0]*si,ra=ci[1]*di;if(Dr){var ma=ra*At-pi*Yt;pi=pi*At+ra*Yt,ra=ma}return[pi+Er,ra+kr]}return Jr.invert=function(ci){var pi=ci[0]-Er,ra=ci[1]-kr;if(Dr){var ma=ra*At+pi*Yt;pi=pi*At-ra*Yt,ra=ma}return[pi/si,ra/di]},Jr.stream=function(ci){return Kn&&nr===ci?Kn:Kn=Di(br(nr=ci))},Jr.postclip=function(ci){return arguments.length?(br=ci,Yr=xn=rn=bn=null,Si()):br},Jr.clipExtent=function(ci){return arguments.length?(br=null==ci?(Yr=xn=rn=bn=null,tr):hr(Yr=+ci[0][0],xn=+ci[0][1],rn=+ci[1][0],bn=+ci[1][1]),Si()):null==Yr?null:[[Yr,xn],[rn,bn]]},Jr.scale=function(ci){return arguments.length?(vr=+ci,Si()):vr},Jr.translate=function(ci){return arguments.length?(Er=+ci[0],kr=+ci[1],Si()):[Er,kr]},Jr.angle=function(ci){return arguments.length?(Yt=A(Dr=ci%360*c),At=g(Dr),Si()):Dr*s},Jr.reflectX=function(ci){return arguments.length?(Rr=ci?-1:1,Si()):Rr<0},Jr.reflectY=function(ci){return arguments.length?(Wr=ci?-1:1,Si()):Wr<0},Jr.fitExtent=function(ci,pi){return Je(Jr,ci,pi)},Jr.fitSize=function(ci,pi){return st(Jr,ci,pi)},Jr.fitWidth=function(ci,pi){return mt(Jr,ci,pi)},Jr.fitHeight=function(ci,pi){return Mt(Jr,ci,pi)},Jr},m.geoInterpolate=function(At,Yt){var xn=At[0]*c,rn=At[1]*c,bn=Yt[0]*c,Kn=Yt[1]*c,nr=g(rn),vr=A(rn),Er=g(Kn),kr=A(Kn),Rr=nr*g(xn),Wr=nr*A(xn),Dr=Er*g(bn),Yr=Er*A(bn),si=2*F(C(R(Kn-rn)+nr*Er*R(bn-xn))),di=A(si),Di=si?function(br){var Si=A(br*=si)/di,Jr=A(si-br)/di,ci=Jr*Rr+Si*Dr,pi=Jr*Wr+Si*Yr,ra=Jr*vr+Si*kr;return[v(pi,ci)*s,v(ra,C(ci*ci+pi*pi))*s]}:function(){return[xn*s,rn*s]};return Di.distance=si,Di},m.geoLength=Jt,m.geoMercator=function(){return ji(Qr).scale(961/u)},m.geoMercatorRaw=Qr,m.geoNaturalEarth1=function(){return mn(us).scale(175.295)},m.geoNaturalEarth1Raw=us,m.geoOrthographic=function(){return mn(xs).scale(249.5).clipAngle(90+a)},m.geoOrthographicRaw=xs,m.geoPath=function(At,Yt){var xn,rn,bn=4.5;function Kn(nr){return nr&&("function"==typeof bn&&rn.pointRadius(+bn.apply(this,arguments)),ee(nr,xn(rn))),rn.result()}return Kn.area=function(nr){return ee(nr,xn(zr)),zr.result()},Kn.measure=function(nr){return ee(nr,xn(Ja)),Ja.result()},Kn.bounds=function(nr){return ee(nr,xn(zo)),zo.result()},Kn.centroid=function(nr){return ee(nr,xn(oo)),oo.result()},Kn.projection=function(nr){return arguments.length?(xn=null==nr?(At=null,tr):(At=nr).stream,Kn):At},Kn.context=function(nr){return arguments.length?(rn=null==nr?(Yt=null,new jo):new iu(Yt=nr),"function"!=typeof bn&&rn.pointRadius(bn),Kn):Yt},Kn.pointRadius=function(nr){return arguments.length?(bn="function"==typeof nr?nr:(rn.pointRadius(+nr),+nr),Kn):bn},Kn.projection(At).context(Yt)},m.geoProjection=mn,m.geoProjectionMutator=Mn,m.geoRotation=On,m.geoStereographic=function(){return mn(cs).scale(250).clipAngle(142)},m.geoStereographicRaw=cs,m.geoStream=ee,m.geoTransform=function(At){return{stream:ks(At)}},m.geoTransverseMercator=function(){var At=ji(ka),Yt=At.center,xn=At.rotate;return At.center=function(rn){return arguments.length?Yt([-rn[1],rn[0]]):[(rn=Yt())[1],-rn[0]]},At.rotate=function(rn){return arguments.length?xn([rn[0],rn[1],rn.length>2?rn[2]+90:90]):[(rn=xn())[0],rn[1],rn[2]-90]},xn([0,0,90]).scale(159.155)},m.geoTransverseMercatorRaw=ka,Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==oe?x(ae,_("d3-array")):x((m=m||self).d3=m.d3||{},m.d3)},{"d3-array":107}],115:[function(_,oe,ae){var m,x;m=this,x=function(m){"use strict";function x(he,be){return he.parent===be.parent?1:2}function T(he,be){return he+be.x}function b(he,be){return Math.max(he,be.y)}function e(he){var be=0,ge=he.children,we=ge&&ge.length;if(we)for(;--we>=0;)be+=ge[we].value;else be=1;he.value=be}function o(he,be){var ge,we,Ce,De,Se,Fe=new d(he),ve=+he.value&&(Fe.value=he.value),Te=[Fe];for(null==be&&(be=a);ge=Te.pop();)if(ve&&(ge.value=+ge.data.value),(Ce=be(ge.data))&&(Se=Ce.length))for(ge.children=new Array(Se),De=Se-1;De>=0;--De)Te.push(we=ge.children[De]=new d(Ce[De])),we.parent=ge,we.depth=ge.depth+1;return Fe.eachBefore(i)}function a(he){return he.children}function l(he){he.data=he.data.data}function i(he){var be=0;do{he.height=be}while((he=he.parent)&&he.height<++be)}function d(he){this.data=he,this.depth=this.height=0,this.parent=null}d.prototype=o.prototype={constructor:d,count:function(){return this.eachAfter(e)},each:function(he){var be,ge,we,Ce,De=this,Se=[De];do{for(be=Se.reverse(),Se=[];De=be.pop();)if(he(De),ge=De.children)for(we=0,Ce=ge.length;we<Ce;++we)Se.push(ge[we])}while(Se.length);return this},eachAfter:function(he){for(var be,ge,we,Ce=this,De=[Ce],Se=[];Ce=De.pop();)if(Se.push(Ce),be=Ce.children)for(ge=0,we=be.length;ge<we;++ge)De.push(be[ge]);for(;Ce=Se.pop();)he(Ce);return this},eachBefore:function(he){for(var be,ge,we=this,Ce=[we];we=Ce.pop();)if(he(we),be=we.children)for(ge=be.length-1;ge>=0;--ge)Ce.push(be[ge]);return this},sum:function(he){return this.eachAfter(function(be){for(var ge=+he(be.data)||0,we=be.children,Ce=we&&we.length;--Ce>=0;)ge+=we[Ce].value;be.value=ge})},sort:function(he){return this.eachBefore(function(be){be.children&&be.children.sort(he)})},path:function(he){for(var be=this,ge=function(De,Se){if(De===Se)return De;var Fe=De.ancestors(),ve=Se.ancestors(),Te=null;for(De=Fe.pop(),Se=ve.pop();De===Se;)Te=De,De=Fe.pop(),Se=ve.pop();return Te}(be,he),we=[be];be!==ge;)we.push(be=be.parent);for(var Ce=we.length;he!==ge;)we.splice(Ce,0,he),he=he.parent;return we},ancestors:function(){for(var he=this,be=[he];he=he.parent;)be.push(he);return be},descendants:function(){var he=[];return this.each(function(be){he.push(be)}),he},leaves:function(){var he=[];return this.eachBefore(function(be){be.children||he.push(be)}),he},links:function(){var he=this,be=[];return he.each(function(ge){ge!==he&&be.push({source:ge.parent,target:ge})}),be},copy:function(){return o(this).eachBefore(l)}};var u=Array.prototype.slice;function s(he){for(var be,ge,we=0,Ce=(he=function(Se){for(var Fe,ve,Te=Se.length;Te;)ve=Math.random()*Te--|0,Fe=Se[Te],Se[Te]=Se[ve],Se[ve]=Fe;return Se}(u.call(he))).length,De=[];we<Ce;)be=he[we],ge&&p(ge,be)?++we:(ge=g(De=c(De,be)),we=0);return ge}function c(he,be){var ge,we;if(v(be,he))return[be];for(ge=0;ge<he.length;++ge)if(h(be,he[ge])&&v(f(he[ge],be),he))return[he[ge],be];for(ge=0;ge<he.length-1;++ge)for(we=ge+1;we<he.length;++we)if(h(f(he[ge],he[we]),be)&&h(f(he[ge],be),he[we])&&h(f(he[we],be),he[ge])&&v(w(he[ge],he[we],be),he))return[he[ge],he[we],be];throw new Error}function h(he,be){var ge=he.r-be.r,we=be.x-he.x,Ce=be.y-he.y;return ge<0||ge*ge<we*we+Ce*Ce}function p(he,be){var ge=he.r-be.r+1e-6,we=be.x-he.x,Ce=be.y-he.y;return ge>0&&ge*ge>we*we+Ce*Ce}function v(he,be){for(var ge=0;ge<be.length;++ge)if(!p(he,be[ge]))return!1;return!0}function g(he){switch(he.length){case 1:return{x:(be=he[0]).x,y:be.y,r:be.r};case 2:return f(he[0],he[1]);case 3:return w(he[0],he[1],he[2])}var be}function f(he,be){var ge=he.x,we=he.y,Ce=he.r,De=be.x,Se=be.y,Fe=be.r,ve=De-ge,Te=Se-we,Le=Fe-Ce,Ee=Math.sqrt(ve*ve+Te*Te);return{x:(ge+De+ve/Ee*Le)/2,y:(we+Se+Te/Ee*Le)/2,r:(Ee+Ce+Fe)/2}}function w(he,be,ge){var we=he.x,Ce=he.y,De=he.r,Se=be.x,Fe=be.y,ve=be.r,Te=ge.x,Le=ge.y,Ee=ge.r,Pe=we-Se,je=we-Te,Ge=Ce-Fe,Ke=Ce-Le,lt=ve-De,Ue=Ee-De,$e=we*we+Ce*Ce-De*De,et=$e-Se*Se-Fe*Fe+ve*ve,tt=$e-Te*Te-Le*Le+Ee*Ee,ct=je*Ge-Pe*Ke,xt=(Ge*tt-Ke*et)/(2*ct)-we,Ct=(Ke*lt-Ge*Ue)/ct,Ht=(je*et-Pe*tt)/(2*ct)-Ce,zt=(Pe*Ue-je*lt)/ct,ht=Ct*Ct+zt*zt-1,ut=2*(De+xt*Ct+Ht*zt),Ot=xt*xt+Ht*Ht-De*De,tn=-(ht?(ut+Math.sqrt(ut*ut-4*ht*Ot))/(2*ht):Ot/ut);return{x:we+xt+Ct*tn,y:Ce+Ht+zt*tn,r:tn}}function y(he,be,ge){var we,Ce,De,Se,Fe=he.x-be.x,ve=he.y-be.y,Te=Fe*Fe+ve*ve;Te?(Ce=be.r+ge.r,Se=he.r+ge.r,(Ce*=Ce)>(Se*=Se)?(we=(Te+Se-Ce)/(2*Te),De=Math.sqrt(Math.max(0,Se/Te-we*we)),ge.x=he.x-we*Fe-De*ve,ge.y=he.y-we*ve+De*Fe):(we=(Te+Ce-Se)/(2*Te),De=Math.sqrt(Math.max(0,Ce/Te-we*we)),ge.x=be.x+we*Fe-De*ve,ge.y=be.y+we*ve+De*Fe)):(ge.x=be.x+ge.r,ge.y=be.y)}function M(he,be){var ge=he.r+be.r-1e-6,we=be.x-he.x,Ce=be.y-he.y;return ge>0&&ge*ge>we*we+Ce*Ce}function A(he){var be=he._,ge=he.next._,we=be.r+ge.r,Ce=(be.x*ge.r+ge.x*be.r)/we,De=(be.y*ge.r+ge.y*be.r)/we;return Ce*Ce+De*De}function k(he){this._=he,this.next=null,this.previous=null}function C(he){if(!(Ce=he.length))return 0;var be,ge,we,Ce,De,Se,Fe,ve,Te,Le,Ee;if((be=he[0]).x=0,be.y=0,!(Ce>1))return be.r;if(be.x=-(ge=he[1]).r,ge.x=be.r,ge.y=0,!(Ce>2))return be.r+ge.r;y(ge,be,we=he[2]),be=new k(be),ge=new k(ge),we=new k(we),be.next=we.previous=ge,ge.next=be.previous=we,we.next=ge.previous=be;e:for(Fe=3;Fe<Ce;++Fe){y(be._,ge._,we=he[Fe]),we=new k(we),ve=ge.next,Te=be.previous,Le=ge._.r,Ee=be._.r;do{if(Le<=Ee){if(M(ve._,we._)){be.next=ge=ve,ge.previous=be,--Fe;continue e}Le+=ve._.r,ve=ve.next}else{if(M(Te._,we._)){(be=Te).next=ge,ge.previous=be,--Fe;continue e}Ee+=Te._.r,Te=Te.previous}}while(ve!==Te.next);for(we.previous=be,we.next=ge,be.next=ge.previous=ge=we,De=A(be);(we=we.next)!==ge;)(Se=A(we))<De&&(be=we,De=Se);ge=be.next}for(be=[ge._],we=ge;(we=we.next)!==ge;)be.push(we._);for(we=s(be),Fe=0;Fe<Ce;++Fe)(be=he[Fe]).x-=we.x,be.y-=we.y;return we.r}function P(he){return null==he?null:D(he)}function D(he){if("function"!=typeof he)throw new Error;return he}function F(){return 0}function R(he){return function(){return he}}function L(he){return Math.sqrt(he.value)}function I(he){return function(be){be.children||(be.r=Math.max(0,+he(be)||0))}}function B(he,be){return function(ge){if(we=ge.children){var we,Ce,De,Se=we.length,Fe=he(ge)*be||0;if(Fe)for(Ce=0;Ce<Se;++Ce)we[Ce].r+=Fe;if(De=C(we),Fe)for(Ce=0;Ce<Se;++Ce)we[Ce].r-=Fe;ge.r=De+Fe}}}function V(he){return function(be){var ge=be.parent;be.r*=he,ge&&(be.x=ge.x+he*be.x,be.y=ge.y+he*be.y)}}function Z(he){he.x0=Math.round(he.x0),he.y0=Math.round(he.y0),he.x1=Math.round(he.x1),he.y1=Math.round(he.y1)}function Y(he,be,ge,we,Ce){for(var De,Se=he.children,Fe=-1,ve=Se.length,Te=he.value&&(we-be)/he.value;++Fe<ve;)(De=Se[Fe]).y0=ge,De.y1=Ce,De.x0=be,De.x1=be+=De.value*Te}var ee={depth:-1},J={};function $(he){return he.id}function Q(he){return he.parentId}function se(he,be){return he.parent===be.parent?1:2}function j(he){var be=he.children;return be?be[0]:he.t}function G(he){var be=he.children;return be?be[be.length-1]:he.t}function W(he,be,ge){var we=ge/(be.i-he.i);be.c-=we,be.s+=ge,he.c+=we,be.z+=ge,be.m+=ge}function ie(he,be,ge){return he.a.parent===be.parent?he.a:ge}function q(he,be){this._=he,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=be}function te(he,be,ge,we,Ce){for(var De,Se=he.children,Fe=-1,ve=Se.length,Te=he.value&&(Ce-ge)/he.value;++Fe<ve;)(De=Se[Fe]).x0=be,De.x1=we,De.y0=ge,De.y1=ge+=De.value*Te}q.prototype=Object.create(d.prototype);var ne=(1+Math.sqrt(5))/2;function le(he,be,ge,we,Ce,De){for(var Se,Fe,ve,Te,Le,Ee,Pe,je,Ge,Ke,lt,Ue=[],$e=be.children,et=0,tt=0,ct=$e.length,xt=be.value;et<ct;){ve=Ce-ge,Te=De-we;do{Le=$e[tt++].value}while(!Le&&tt<ct);for(Ee=Pe=Le,lt=Le*Le*(Ke=Math.max(Te/ve,ve/Te)/(xt*he)),Ge=Math.max(Pe/lt,lt/Ee);tt<ct;++tt){if(Le+=Fe=$e[tt].value,Fe<Ee&&(Ee=Fe),Fe>Pe&&(Pe=Fe),lt=Le*Le*Ke,(je=Math.max(Pe/lt,lt/Ee))>Ge){Le-=Fe;break}Ge=je}Ue.push(Se={value:Le,dice:ve<Te,children:$e.slice(et,tt)}),Se.dice?Y(Se,ge,we,Ce,xt?we+=Te*Le/xt:De):te(Se,ge,we,xt?ge+=ve*Le/xt:Ce,De),xt-=Le,et=tt}return Ue}var ue=function he(be){function ge(we,Ce,De,Se,Fe){le(be,we,Ce,De,Se,Fe)}return ge.ratio=function(we){return he((we=+we)>1?we:1)},ge}(ne),de=function he(be){function ge(we,Ce,De,Se,Fe){if((ve=we._squarify)&&ve.ratio===be)for(var ve,Te,Le,Ee,Pe,je=-1,Ge=ve.length,Ke=we.value;++je<Ge;){for(Le=(Te=ve[je]).children,Ee=Te.value=0,Pe=Le.length;Ee<Pe;++Ee)Te.value+=Le[Ee].value;Te.dice?Y(Te,Ce,De,Se,De+=(Fe-De)*Te.value/Ke):te(Te,Ce,De,Ce+=(Se-Ce)*Te.value/Ke,Fe),Ke-=Te.value}else we._squarify=ve=le(be,we,Ce,De,Se,Fe),ve.ratio=be}return ge.ratio=function(we){return he((we=+we)>1?we:1)},ge}(ne);m.cluster=function(){var he=x,be=1,ge=1,we=!1;function Ce(De){var Se,Fe=0;De.eachAfter(function(Pe){var Ge,je=Pe.children;je?(Pe.x=(Ge=je).reduce(T,0)/Ge.length,Pe.y=function(Ge){return 1+Ge.reduce(b,0)}(je)):(Pe.x=Se?Fe+=he(Pe,Se):0,Pe.y=0,Se=Pe)});var ve=function(Pe){for(var je;je=Pe.children;)Pe=je[0];return Pe}(De),Te=function(Pe){for(var je;je=Pe.children;)Pe=je[je.length-1];return Pe}(De),Le=ve.x-he(ve,Te)/2,Ee=Te.x+he(Te,ve)/2;return De.eachAfter(we?function(Pe){Pe.x=(Pe.x-De.x)*be,Pe.y=(De.y-Pe.y)*ge}:function(Pe){Pe.x=(Pe.x-Le)/(Ee-Le)*be,Pe.y=(1-(De.y?Pe.y/De.y:1))*ge})}return Ce.separation=function(De){return arguments.length?(he=De,Ce):he},Ce.size=function(De){return arguments.length?(we=!1,be=+De[0],ge=+De[1],Ce):we?null:[be,ge]},Ce.nodeSize=function(De){return arguments.length?(we=!0,be=+De[0],ge=+De[1],Ce):we?[be,ge]:null},Ce},m.hierarchy=o,m.pack=function(){var he=null,be=1,ge=1,we=F;function Ce(De){return De.x=be/2,De.y=ge/2,he?De.eachBefore(I(he)).eachAfter(B(we,.5)).eachBefore(V(1)):De.eachBefore(I(L)).eachAfter(B(F,1)).eachAfter(B(we,De.r/Math.min(be,ge))).eachBefore(V(Math.min(be,ge)/(2*De.r))),De}return Ce.radius=function(De){return arguments.length?(he=P(De),Ce):he},Ce.size=function(De){return arguments.length?(be=+De[0],ge=+De[1],Ce):[be,ge]},Ce.padding=function(De){return arguments.length?(we="function"==typeof De?De:R(+De),Ce):we},Ce},m.packEnclose=s,m.packSiblings=function(he){return C(he),he},m.partition=function(){var he=1,be=1,ge=0,we=!1;function Ce(De){var Fe,ve,Se=De.height+1;return De.x0=De.y0=ge,De.x1=he,De.y1=be/Se,De.eachBefore((Fe=be,ve=Se,function(Te){Te.children&&Y(Te,Te.x0,Fe*(Te.depth+1)/ve,Te.x1,Fe*(Te.depth+2)/ve);var Le=Te.x0,Ee=Te.y0,Pe=Te.x1-ge,je=Te.y1-ge;Pe<Le&&(Le=Pe=(Le+Pe)/2),je<Ee&&(Ee=je=(Ee+je)/2),Te.x0=Le,Te.y0=Ee,Te.x1=Pe,Te.y1=je})),we&&De.eachBefore(Z),De}return Ce.round=function(De){return arguments.length?(we=!!De,Ce):we},Ce.size=function(De){return arguments.length?(he=+De[0],be=+De[1],Ce):[he,be]},Ce.padding=function(De){return arguments.length?(ge=+De,Ce):ge},Ce},m.stratify=function(){var he=$,be=Q;function ge(we){var Ce,De,Se,Fe,ve,Te,Le,Ee=we.length,Pe=new Array(Ee),je={};for(De=0;De<Ee;++De)ve=Pe[De]=new d(Ce=we[De]),null!=(Te=he(Ce,De,we))&&(Te+="")&&(je[Le="$"+(ve.id=Te)]=Le in je?J:ve);for(De=0;De<Ee;++De)if(ve=Pe[De],null!=(Te=be(we[De],De,we))&&(Te+="")){if(!(Fe=je["$"+Te]))throw new Error("missing: "+Te);if(Fe===J)throw new Error("ambiguous: "+Te);Fe.children?Fe.children.push(ve):Fe.children=[ve],ve.parent=Fe}else{if(Se)throw new Error("multiple roots");Se=ve}if(!Se)throw new Error("no root");if(Se.parent=ee,Se.eachBefore(function(Ge){Ge.depth=Ge.parent.depth+1,--Ee}).eachBefore(i),Se.parent=null,Ee>0)throw new Error("cycle");return Se}return ge.id=function(we){return arguments.length?(he=D(we),ge):he},ge.parentId=function(we){return arguments.length?(be=D(we),ge):be},ge},m.tree=function(){var he=se,be=1,ge=1,we=null;function Ce(ve){var Te=function(Ue){for(var $e,et,tt,ct,xt,Ct=new q(Ue,0),Ht=[Ct];$e=Ht.pop();)if(tt=$e._.children)for($e.children=new Array(xt=tt.length),ct=xt-1;ct>=0;--ct)Ht.push(et=$e.children[ct]=new q(tt[ct],ct)),et.parent=$e;return(Ct.parent=new q(null,0)).children=[Ct],Ct}(ve);if(Te.eachAfter(De),Te.parent.m=-Te.z,Te.eachBefore(Se),we)ve.eachBefore(Fe);else{var Le=ve,Ee=ve,Pe=ve;ve.eachBefore(function(Ue){Ue.x<Le.x&&(Le=Ue),Ue.x>Ee.x&&(Ee=Ue),Ue.depth>Pe.depth&&(Pe=Ue)});var je=Le===Ee?1:he(Le,Ee)/2,Ge=je-Le.x,Ke=be/(Ee.x+je+Ge),lt=ge/(Pe.depth||1);ve.eachBefore(function(Ue){Ue.x=(Ue.x+Ge)*Ke,Ue.y=Ue.depth*lt})}return ve}function De(ve){var Te=ve.children,Le=ve.parent.children,Ee=ve.i?Le[ve.i-1]:null;if(Te){!function(je){for(var Ge,Ke=0,lt=0,Ue=je.children,$e=Ue.length;--$e>=0;)(Ge=Ue[$e]).z+=Ke,Ge.m+=Ke,Ke+=Ge.s+(lt+=Ge.c)}(ve);var Pe=(Te[0].z+Te[Te.length-1].z)/2;Ee?(ve.z=Ee.z+he(ve._,Ee._),ve.m=ve.z-Pe):ve.z=Pe}else Ee&&(ve.z=Ee.z+he(ve._,Ee._));ve.parent.A=function(je,Ge,Ke){if(Ge){for(var lt,Ue=je,$e=je,et=Ge,tt=Ue.parent.children[0],ct=Ue.m,xt=$e.m,Ct=et.m,Ht=tt.m;et=G(et),Ue=j(Ue),et&&Ue;)tt=j(tt),($e=G($e)).a=je,(lt=et.z+Ct-Ue.z-ct+he(et._,Ue._))>0&&(W(ie(et,je,Ke),je,lt),ct+=lt,xt+=lt),Ct+=et.m,ct+=Ue.m,Ht+=tt.m,xt+=$e.m;et&&!G($e)&&($e.t=et,$e.m+=Ct-xt),Ue&&!j(tt)&&(tt.t=Ue,tt.m+=ct-Ht,Ke=je)}return Ke}(ve,Ee,ve.parent.A||Le[0])}function Se(ve){ve._.x=ve.z+ve.parent.m,ve.m+=ve.parent.m}function Fe(ve){ve.x*=be,ve.y=ve.depth*ge}return Ce.separation=function(ve){return arguments.length?(he=ve,Ce):he},Ce.size=function(ve){return arguments.length?(we=!1,be=+ve[0],ge=+ve[1],Ce):we?null:[be,ge]},Ce.nodeSize=function(ve){return arguments.length?(we=!0,be=+ve[0],ge=+ve[1],Ce):we?[be,ge]:null},Ce},m.treemap=function(){var he=ue,be=!1,ge=1,we=1,Ce=[0],De=F,Se=F,Fe=F,ve=F,Te=F;function Le(Pe){return Pe.x0=Pe.y0=0,Pe.x1=ge,Pe.y1=we,Pe.eachBefore(Ee),Ce=[0],be&&Pe.eachBefore(Z),Pe}function Ee(Pe){var je=Ce[Pe.depth],Ge=Pe.x0+je,Ke=Pe.y0+je,lt=Pe.x1-je,Ue=Pe.y1-je;lt<Ge&&(Ge=lt=(Ge+lt)/2),Ue<Ke&&(Ke=Ue=(Ke+Ue)/2),Pe.x0=Ge,Pe.y0=Ke,Pe.x1=lt,Pe.y1=Ue,Pe.children&&(je=Ce[Pe.depth+1]=De(Pe)/2,Ge+=Te(Pe)-je,Ke+=Se(Pe)-je,(lt-=Fe(Pe)-je)<Ge&&(Ge=lt=(Ge+lt)/2),(Ue-=ve(Pe)-je)<Ke&&(Ke=Ue=(Ke+Ue)/2),he(Pe,Ge,Ke,lt,Ue))}return Le.round=function(Pe){return arguments.length?(be=!!Pe,Le):be},Le.size=function(Pe){return arguments.length?(ge=+Pe[0],we=+Pe[1],Le):[ge,we]},Le.tile=function(Pe){return arguments.length?(he=D(Pe),Le):he},Le.padding=function(Pe){return arguments.length?Le.paddingInner(Pe).paddingOuter(Pe):Le.paddingInner()},Le.paddingInner=function(Pe){return arguments.length?(De="function"==typeof Pe?Pe:R(+Pe),Le):De},Le.paddingOuter=function(Pe){return arguments.length?Le.paddingTop(Pe).paddingRight(Pe).paddingBottom(Pe).paddingLeft(Pe):Le.paddingTop()},Le.paddingTop=function(Pe){return arguments.length?(Se="function"==typeof Pe?Pe:R(+Pe),Le):Se},Le.paddingRight=function(Pe){return arguments.length?(Fe="function"==typeof Pe?Pe:R(+Pe),Le):Fe},Le.paddingBottom=function(Pe){return arguments.length?(ve="function"==typeof Pe?Pe:R(+Pe),Le):ve},Le.paddingLeft=function(Pe){return arguments.length?(Te="function"==typeof Pe?Pe:R(+Pe),Le):Te},Le},m.treemapBinary=function(he,be,ge,we,Ce){var De,Se,Fe=he.children,ve=Fe.length,Te=new Array(ve+1);for(Te[0]=Se=De=0;De<ve;++De)Te[De+1]=Se+=Fe[De].value;!function Le(Ee,Pe,je,Ge,Ke,lt,Ue){if(Ee>=Pe-1){var $e=Fe[Ee];return $e.x0=Ge,$e.y0=Ke,$e.x1=lt,void($e.y1=Ue)}for(var et=Te[Ee],tt=je/2+et,ct=Ee+1,xt=Pe-1;ct<xt;){var Ct=ct+xt>>>1;Te[Ct]<tt?ct=Ct+1:xt=Ct}tt-Te[ct-1]<Te[ct]-tt&&Ee+1<ct&&--ct;var Ht=Te[ct]-et,zt=je-Ht;if(lt-Ge>Ue-Ke){var ht=(Ge*zt+lt*Ht)/je;Le(Ee,ct,Ht,Ge,Ke,ht,Ue),Le(ct,Pe,zt,ht,Ke,lt,Ue)}else{var ut=(Ke*zt+Ue*Ht)/je;Le(Ee,ct,Ht,Ge,Ke,lt,ut),Le(ct,Pe,zt,Ge,ut,lt,Ue)}}(0,ve,he.value,be,ge,we,Ce)},m.treemapDice=Y,m.treemapResquarify=de,m.treemapSlice=te,m.treemapSliceDice=function(he,be,ge,we,Ce){(1&he.depth?te:Y)(he,be,ge,we,Ce)},m.treemapSquarify=ue,Object.defineProperty(m,"__esModule",{value:!0})},x("object"==typeof ae&&void 0!==oe?ae:(m=m||self).d3=m.d3||{})},{}],116:[function(_,oe,ae){var m,x;m=this,x=function(m,x){"use strict";function T(ne,le,ue,de,he){var be=ne*ne,ge=be*ne;return((1-3*ne+3*be-ge)*le+(4-6*be+3*ge)*ue+(1+3*ne+3*be-3*ge)*de+ge*he)/6}function b(ne){var le=ne.length-1;return function(ue){var de=ue<=0?ue=0:ue>=1?(ue=1,le-1):Math.floor(ue*le),he=ne[de],be=ne[de+1];return T((ue-de/le)*le,de>0?ne[de-1]:2*he-be,he,be,de<le-1?ne[de+2]:2*be-he)}}function e(ne){var le=ne.length;return function(ue){var de=Math.floor(((ue%=1)<0?++ue:ue)*le);return T((ue-de/le)*le,ne[(de+le-1)%le],ne[de%le],ne[(de+1)%le],ne[(de+2)%le])}}function o(ne){return function(){return ne}}function a(ne,le){return function(ue){return ne+ue*le}}function l(ne,le){var ue=le-ne;return ue?a(ne,ue>180||ue<-180?ue-360*Math.round(ue/360):ue):o(isNaN(ne)?le:ne)}function d(ne,le){var ue=le-ne;return ue?a(ne,ue):o(isNaN(ne)?le:ne)}var u=function ne(le){var ue=function i(ne){return 1==(ne=+ne)?d:function(le,ue){return ue-le?(de=le,he=ue,be=ne,de=Math.pow(de,be),he=Math.pow(he,be)-de,be=1/be,function(ge){return Math.pow(de+ge*he,be)}):o(isNaN(le)?ue:le);var de,he,be}}(le);function de(he,be){var ge=ue((he=x.rgb(he)).r,(be=x.rgb(be)).r),we=ue(he.g,be.g),Ce=ue(he.b,be.b),De=d(he.opacity,be.opacity);return function(Se){return he.r=ge(Se),he.g=we(Se),he.b=Ce(Se),he.opacity=De(Se),he+""}}return de.gamma=ne,de}(1);function s(ne){return function(le){var ue,de,he=le.length,be=new Array(he),ge=new Array(he),we=new Array(he);for(ue=0;ue<he;++ue)de=x.rgb(le[ue]),be[ue]=de.r||0,ge[ue]=de.g||0,we[ue]=de.b||0;return be=ne(be),ge=ne(ge),we=ne(we),de.opacity=1,function(Ce){return de.r=be(Ce),de.g=ge(Ce),de.b=we(Ce),de+""}}}var c=s(b),h=s(e);function p(ne,le){le||(le=[]);var ue,de=ne?Math.min(le.length,ne.length):0,he=le.slice();return function(be){for(ue=0;ue<de;++ue)he[ue]=ne[ue]*(1-be)+le[ue]*be;return he}}function v(ne){return ArrayBuffer.isView(ne)&&!(ne instanceof DataView)}function g(ne,le){var ue,de=le?le.length:0,he=ne?Math.min(de,ne.length):0,be=new Array(he),ge=new Array(de);for(ue=0;ue<he;++ue)be[ue]=C(ne[ue],le[ue]);for(;ue<de;++ue)ge[ue]=le[ue];return function(we){for(ue=0;ue<he;++ue)ge[ue]=be[ue](we);return ge}}function f(ne,le){var ue=new Date;return ne=+ne,le=+le,function(de){return ue.setTime(ne*(1-de)+le*de),ue}}function w(ne,le){return ne=+ne,le=+le,function(ue){return ne*(1-ue)+le*ue}}function y(ne,le){var ue,de={},he={};for(ue in null!==ne&&"object"==typeof ne||(ne={}),null!==le&&"object"==typeof le||(le={}),le)ue in ne?de[ue]=C(ne[ue],le[ue]):he[ue]=le[ue];return function(be){for(ue in de)he[ue]=de[ue](be);return he}}var M=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,A=new RegExp(M.source,"g");function k(ne,le){var ue,de,he,De,be=M.lastIndex=A.lastIndex=0,ge=-1,we=[],Ce=[];for(ne+="",le+="";(ue=M.exec(ne))&&(de=A.exec(le));)(he=de.index)>be&&(he=le.slice(be,he),we[ge]?we[ge]+=he:we[++ge]=he),(ue=ue[0])===(de=de[0])?we[ge]?we[ge]+=de:we[++ge]=de:(we[++ge]=null,Ce.push({i:ge,x:w(ue,de)})),be=A.lastIndex;return be<le.length&&(he=le.slice(be),we[ge]?we[ge]+=he:we[++ge]=he),we.length<2?Ce[0]?(De=Ce[0].x,function(Se){return De(Se)+""}):function(De){return function(){return De}}(le):(le=Ce.length,function(De){for(var Se,Fe=0;Fe<le;++Fe)we[(Se=Ce[Fe]).i]=Se.x(De);return we.join("")})}function C(ne,le){var ue,de=typeof le;return null==le||"boolean"===de?o(le):("number"===de?w:"string"===de?(ue=x.color(le))?(le=ue,u):k:le instanceof x.color?u:le instanceof Date?f:v(le)?p:Array.isArray(le)?g:"function"!=typeof le.valueOf&&"function"!=typeof le.toString||isNaN(le)?y:w)(ne,le)}var P,D,F,R,L=180/Math.PI,I={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function B(ne,le,ue,de,he,be){var ge,we,Ce;return(ge=Math.sqrt(ne*ne+le*le))&&(ne/=ge,le/=ge),(Ce=ne*ue+le*de)&&(ue-=ne*Ce,de-=le*Ce),(we=Math.sqrt(ue*ue+de*de))&&(ue/=we,de/=we,Ce/=we),ne*de<le*ue&&(ne=-ne,le=-le,Ce=-Ce,ge=-ge),{translateX:he,translateY:be,rotate:Math.atan2(le,ne)*L,skewX:Math.atan(Ce)*L,scaleX:ge,scaleY:we}}function V(ne,le,ue,de){function he(be){return be.length?be.pop()+" ":""}return function(be,ge){var De,Se,Fe,we=[],Ce=[];return be=ne(be),ge=ne(ge),function(De,Se,Fe,ve,Te,Le){if(De!==Fe||Se!==ve){var Ee=Te.push("translate(",null,le,null,ue);Le.push({i:Ee-4,x:w(De,Fe)},{i:Ee-2,x:w(Se,ve)})}else(Fe||ve)&&Te.push("translate("+Fe+le+ve+ue)}(be.translateX,be.translateY,ge.translateX,ge.translateY,we,Ce),Fe=we,(De=be.rotate)!==(Se=ge.rotate)?(De-Se>180?Se+=360:Se-De>180&&(De+=360),Ce.push({i:Fe.push(he(Fe)+"rotate(",null,de)-2,x:w(De,Se)})):Se&&Fe.push(he(Fe)+"rotate("+Se+de),function(De,Se,Fe,ve){De!==Se?ve.push({i:Fe.push(he(Fe)+"skewX(",null,de)-2,x:w(De,Se)}):Se&&Fe.push(he(Fe)+"skewX("+Se+de)}(be.skewX,ge.skewX,we,Ce),function(De,Se,Fe,ve,Te,Le){if(De!==Fe||Se!==ve){var Ee=Te.push(he(Te)+"scale(",null,",",null,")");Le.push({i:Ee-4,x:w(De,Fe)},{i:Ee-2,x:w(Se,ve)})}else 1===Fe&&1===ve||Te.push(he(Te)+"scale("+Fe+","+ve+")")}(be.scaleX,be.scaleY,ge.scaleX,ge.scaleY,we,Ce),be=ge=null,function(De){for(var Se,Fe=-1,ve=Ce.length;++Fe<ve;)we[(Se=Ce[Fe]).i]=Se.x(De);return we.join("")}}}var Z=V(function(ne){return"none"===ne?I:(P||(P=document.createElement("DIV"),D=document.documentElement,F=document.defaultView),P.style.transform=ne,ne=F.getComputedStyle(D.appendChild(P),null).getPropertyValue("transform"),D.removeChild(P),B(+(ne=ne.slice(7,-1).split(","))[0],+ne[1],+ne[2],+ne[3],+ne[4],+ne[5]))},"px, ","px)","deg)"),Y=V(function(ne){return null==ne?I:(R||(R=document.createElementNS("http://www.w3.org/2000/svg","g")),R.setAttribute("transform",ne),(ne=R.transform.baseVal.consolidate())?B((ne=ne.matrix).a,ne.b,ne.c,ne.d,ne.e,ne.f):I)},", ",")",")"),ee=Math.SQRT2;function J(ne){return((ne=Math.exp(ne))+1/ne)/2}function $(ne){return function(le,ue){var de=ne((le=x.hsl(le)).h,(ue=x.hsl(ue)).h),he=d(le.s,ue.s),be=d(le.l,ue.l),ge=d(le.opacity,ue.opacity);return function(we){return le.h=de(we),le.s=he(we),le.l=be(we),le.opacity=ge(we),le+""}}}var Q=$(l),se=$(d);function j(ne){return function(le,ue){var de=ne((le=x.hcl(le)).h,(ue=x.hcl(ue)).h),he=d(le.c,ue.c),be=d(le.l,ue.l),ge=d(le.opacity,ue.opacity);return function(we){return le.h=de(we),le.c=he(we),le.l=be(we),le.opacity=ge(we),le+""}}}var G=j(l),W=j(d);function ie(ne){return function le(ue){function de(he,be){var ge=ne((he=x.cubehelix(he)).h,(be=x.cubehelix(be)).h),we=d(he.s,be.s),Ce=d(he.l,be.l),De=d(he.opacity,be.opacity);return function(Se){return he.h=ge(Se),he.s=we(Se),he.l=Ce(Math.pow(Se,ue)),he.opacity=De(Se),he+""}}return ue=+ue,de.gamma=le,de}(1)}var q=ie(l),te=ie(d);m.interpolate=C,m.interpolateArray=function(ne,le){return(v(le)?p:g)(ne,le)},m.interpolateBasis=b,m.interpolateBasisClosed=e,m.interpolateCubehelix=q,m.interpolateCubehelixLong=te,m.interpolateDate=f,m.interpolateDiscrete=function(ne){var le=ne.length;return function(ue){return ne[Math.max(0,Math.min(le-1,Math.floor(ue*le)))]}},m.interpolateHcl=G,m.interpolateHclLong=W,m.interpolateHsl=Q,m.interpolateHslLong=se,m.interpolateHue=function(ne,le){var ue=l(+ne,+le);return function(de){var he=ue(de);return he-360*Math.floor(he/360)}},m.interpolateLab=function(ne,le){var ue=d((ne=x.lab(ne)).l,(le=x.lab(le)).l),de=d(ne.a,le.a),he=d(ne.b,le.b),be=d(ne.opacity,le.opacity);return function(ge){return ne.l=ue(ge),ne.a=de(ge),ne.b=he(ge),ne.opacity=be(ge),ne+""}},m.interpolateNumber=w,m.interpolateNumberArray=p,m.interpolateObject=y,m.interpolateRgb=u,m.interpolateRgbBasis=c,m.interpolateRgbBasisClosed=h,m.interpolateRound=function(ne,le){return ne=+ne,le=+le,function(ue){return Math.round(ne*(1-ue)+le*ue)}},m.interpolateString=k,m.interpolateTransformCss=Z,m.interpolateTransformSvg=Y,m.interpolateZoom=function(ne,le){var ue,de,he=ne[0],be=ne[1],ge=ne[2],De=le[2],Se=le[0]-he,Fe=le[1]-be,ve=Se*Se+Fe*Fe;if(ve<1e-12)de=Math.log(De/ge)/ee,ue=function(Ge){return[he+Ge*Se,be+Ge*Fe,ge*Math.exp(ee*Ge*de)]};else{var Te=Math.sqrt(ve),Le=(De*De-ge*ge+4*ve)/(2*ge*2*Te),Ee=(De*De-ge*ge-4*ve)/(2*De*2*Te),Pe=Math.log(Math.sqrt(Le*Le+1)-Le),je=Math.log(Math.sqrt(Ee*Ee+1)-Ee);de=(je-Pe)/ee,ue=function(Ge){var Ke,et,lt=Ge*de,Ue=J(Pe),$e=ge/(2*Te)*(Ue*(Ke=ee*lt+Pe,((Ke=Math.exp(2*Ke))-1)/(Ke+1))-(et=Pe,((et=Math.exp(et))-1/et)/2));return[he+$e*Se,be+$e*Fe,ge*Ue/J(ee*lt+Pe)]}}return ue.duration=1e3*de,ue},m.piecewise=function(ne,le){for(var ue=0,de=le.length-1,he=le[0],be=new Array(de<0?0:de);ue<de;)be[ue]=ne(he,he=le[++ue]);return function(ge){var we=Math.max(0,Math.min(de-1,Math.floor(ge*=de)));return be[we](ge-we)}},m.quantize=function(ne,le){for(var ue=new Array(le),de=0;de<le;++de)ue[de]=ne(de/(le-1));return ue},Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==oe?x(ae,_("d3-color")):x((m=m||self).d3=m.d3||{},m.d3)},{"d3-color":109}],117:[function(_,oe,ae){var m,x;m=this,x=function(m){"use strict";var x=Math.PI,T=2*x,b=T-1e-6;function e(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function o(){return new e}e.prototype=o.prototype={constructor:e,moveTo:function(a,l){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+l)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(a,l){this._+="L"+(this._x1=+a)+","+(this._y1=+l)},quadraticCurveTo:function(a,l,i,d){this._+="Q"+ +a+","+ +l+","+(this._x1=+i)+","+(this._y1=+d)},bezierCurveTo:function(a,l,i,d,u,s){this._+="C"+ +a+","+ +l+","+ +i+","+ +d+","+(this._x1=+u)+","+(this._y1=+s)},arcTo:function(a,l,i,d,u){var s=this._x1,c=this._y1,h=(i=+i)-(a=+a),p=(d=+d)-(l=+l),v=s-a,g=c-l,f=v*v+g*g;if((u=+u)<0)throw new Error("negative radius: "+u);if(null===this._x1)this._+="M"+(this._x1=a)+","+(this._y1=l);else if(f>1e-6)if(Math.abs(g*h-p*v)>1e-6&&u){var w=i-s,y=d-c,M=h*h+p*p,A=w*w+y*y,k=Math.sqrt(M),C=Math.sqrt(f),P=u*Math.tan((x-Math.acos((M+f-A)/(2*k*C)))/2),D=P/C,F=P/k;Math.abs(D-1)>1e-6&&(this._+="L"+(a+D*v)+","+(l+D*g)),this._+="A"+u+","+u+",0,0,"+ +(g*w>v*y)+","+(this._x1=a+F*h)+","+(this._y1=l+F*p)}else this._+="L"+(this._x1=a)+","+(this._y1=l)},arc:function(a,l,i,d,u,s){a=+a,l=+l,s=!!s;var c=(i=+i)*Math.cos(d),h=i*Math.sin(d),p=a+c,v=l+h,g=1^s,f=s?d-u:u-d;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+p+","+v:(Math.abs(this._x1-p)>1e-6||Math.abs(this._y1-v)>1e-6)&&(this._+="L"+p+","+v),i&&(f<0&&(f=f%T+T),f>b?this._+="A"+i+","+i+",0,1,"+g+","+(a-c)+","+(l-h)+"A"+i+","+i+",0,1,"+g+","+(this._x1=p)+","+(this._y1=v):f>1e-6&&(this._+="A"+i+","+i+",0,"+ +(f>=x)+","+g+","+(this._x1=a+i*Math.cos(u))+","+(this._y1=l+i*Math.sin(u))))},rect:function(a,l,i,d){this._+="M"+(this._x0=this._x1=+a)+","+(this._y0=this._y1=+l)+"h"+ +i+"v"+ +d+"h"+-i+"Z"},toString:function(){return this._}},m.path=o,Object.defineProperty(m,"__esModule",{value:!0})},x("object"==typeof ae&&void 0!==oe?ae:(m=m||self).d3=m.d3||{})},{}],118:[function(_,oe,ae){var m,x;m=this,x=function(m){"use strict";function x(d,u,s,c){if(isNaN(u)||isNaN(s))return d;var h,p,v,g,f,w,y,M,A,k=d._root,C={data:c},P=d._x0,D=d._y0,F=d._x1,R=d._y1;if(!k)return d._root=C,d;for(;k.length;)if((w=u>=(p=(P+F)/2))?P=p:F=p,(y=s>=(v=(D+R)/2))?D=v:R=v,h=k,!(k=k[M=y<<1|w]))return h[M]=C,d;if(g=+d._x.call(null,k.data),f=+d._y.call(null,k.data),u===g&&s===f)return C.next=k,h?h[M]=C:d._root=C,d;do{h=h?h[M]=new Array(4):d._root=new Array(4),(w=u>=(p=(P+F)/2))?P=p:F=p,(y=s>=(v=(D+R)/2))?D=v:R=v}while((M=y<<1|w)==(A=(f>=v)<<1|g>=p));return h[A]=k,h[M]=C,d}function T(d,u,s,c,h){this.node=d,this.x0=u,this.y0=s,this.x1=c,this.y1=h}function b(d){return d[0]}function e(d){return d[1]}function o(d,u,s){var c=new a(null==u?b:u,null==s?e:s,NaN,NaN,NaN,NaN);return null==d?c:c.addAll(d)}function a(d,u,s,c,h,p){this._x=d,this._y=u,this._x0=s,this._y0=c,this._x1=h,this._y1=p,this._root=void 0}function l(d){for(var u={data:d.data},s=u;d=d.next;)s=s.next={data:d.data};return u}var i=o.prototype=a.prototype;i.copy=function(){var d,u,s=new a(this._x,this._y,this._x0,this._y0,this._x1,this._y1),c=this._root;if(!c)return s;if(!c.length)return s._root=l(c),s;for(d=[{source:c,target:s._root=new Array(4)}];c=d.pop();)for(var h=0;h<4;++h)(u=c.source[h])&&(u.length?d.push({source:u,target:c.target[h]=new Array(4)}):c.target[h]=l(u));return s},i.add=function(d){var u=+this._x.call(null,d),s=+this._y.call(null,d);return x(this.cover(u,s),u,s,d)},i.addAll=function(d){var u,s,c,h,p=d.length,v=new Array(p),g=new Array(p),f=1/0,w=1/0,y=-1/0,M=-1/0;for(s=0;s<p;++s)isNaN(c=+this._x.call(null,u=d[s]))||isNaN(h=+this._y.call(null,u))||(v[s]=c,g[s]=h,c<f&&(f=c),c>y&&(y=c),h<w&&(w=h),h>M&&(M=h));if(f>y||w>M)return this;for(this.cover(f,w).cover(y,M),s=0;s<p;++s)x(this,v[s],g[s],d[s]);return this},i.cover=function(d,u){if(isNaN(d=+d)||isNaN(u=+u))return this;var s=this._x0,c=this._y0,h=this._x1,p=this._y1;if(isNaN(s))h=(s=Math.floor(d))+1,p=(c=Math.floor(u))+1;else{for(var v,g,f=h-s,w=this._root;s>d||d>=h||c>u||u>=p;)switch(g=(u<c)<<1|d<s,(v=new Array(4))[g]=w,w=v,f*=2,g){case 0:h=s+f,p=c+f;break;case 1:s=h-f,p=c+f;break;case 2:h=s+f,c=p-f;break;case 3:s=h-f,c=p-f}this._root&&this._root.length&&(this._root=w)}return this._x0=s,this._y0=c,this._x1=h,this._y1=p,this},i.data=function(){var d=[];return this.visit(function(u){if(!u.length)do{d.push(u.data)}while(u=u.next)}),d},i.extent=function(d){return arguments.length?this.cover(+d[0][0],+d[0][1]).cover(+d[1][0],+d[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},i.find=function(d,u,s){var c,h,p,v,g,f,w,y=this._x0,M=this._y0,A=this._x1,k=this._y1,C=[],P=this._root;for(P&&C.push(new T(P,y,M,A,k)),null==s?s=1/0:(y=d-s,M=u-s,A=d+s,k=u+s,s*=s);f=C.pop();)if(!(!(P=f.node)||(h=f.x0)>A||(p=f.y0)>k||(v=f.x1)<y||(g=f.y1)<M))if(P.length){var D=(h+v)/2,F=(p+g)/2;C.push(new T(P[3],D,F,v,g),new T(P[2],h,F,D,g),new T(P[1],D,p,v,F),new T(P[0],h,p,D,F)),(w=(u>=F)<<1|d>=D)&&(f=C[C.length-1],C[C.length-1]=C[C.length-1-w],C[C.length-1-w]=f)}else{var R=d-+this._x.call(null,P.data),L=u-+this._y.call(null,P.data),I=R*R+L*L;if(I<s){var B=Math.sqrt(s=I);y=d-B,M=u-B,A=d+B,k=u+B,c=P.data}}return c},i.remove=function(d){if(isNaN(p=+this._x.call(null,d))||isNaN(v=+this._y.call(null,d)))return this;var u,s,c,h,p,v,g,f,w,y,M,A,k=this._root,C=this._x0,P=this._y0,D=this._x1,F=this._y1;if(!k)return this;if(k.length)for(;;){if((w=p>=(g=(C+D)/2))?C=g:D=g,(y=v>=(f=(P+F)/2))?P=f:F=f,u=k,!(k=k[M=y<<1|w]))return this;if(!k.length)break;(u[M+1&3]||u[M+2&3]||u[M+3&3])&&(s=u,A=M)}for(;k.data!==d;)if(c=k,!(k=k.next))return this;return(h=k.next)&&delete k.next,c?(h?c.next=h:delete c.next,this):u?(h?u[M]=h:delete u[M],(k=u[0]||u[1]||u[2]||u[3])&&k===(u[3]||u[2]||u[1]||u[0])&&!k.length&&(s?s[A]=k:this._root=k),this):(this._root=h,this)},i.removeAll=function(d){for(var u=0,s=d.length;u<s;++u)this.remove(d[u]);return this},i.root=function(){return this._root},i.size=function(){var d=0;return this.visit(function(u){if(!u.length)do{++d}while(u=u.next)}),d},i.visit=function(d){var u,s,c,h,p,v,g=[],f=this._root;for(f&&g.push(new T(f,this._x0,this._y0,this._x1,this._y1));u=g.pop();)if(!d(f=u.node,c=u.x0,h=u.y0,p=u.x1,v=u.y1)&&f.length){var w=(c+p)/2,y=(h+v)/2;(s=f[3])&&g.push(new T(s,w,y,p,v)),(s=f[2])&&g.push(new T(s,c,y,w,v)),(s=f[1])&&g.push(new T(s,w,h,p,y)),(s=f[0])&&g.push(new T(s,c,h,w,y))}return this},i.visitAfter=function(d){var u,s=[],c=[];for(this._root&&s.push(new T(this._root,this._x0,this._y0,this._x1,this._y1));u=s.pop();){var h=u.node;if(h.length){var p,v=u.x0,g=u.y0,f=u.x1,w=u.y1,y=(v+f)/2,M=(g+w)/2;(p=h[0])&&s.push(new T(p,v,g,y,M)),(p=h[1])&&s.push(new T(p,y,g,f,M)),(p=h[2])&&s.push(new T(p,v,M,y,w)),(p=h[3])&&s.push(new T(p,y,M,f,w))}c.push(u)}for(;u=c.pop();)d(u.node,u.x0,u.y0,u.x1,u.y1);return this},i.x=function(d){return arguments.length?(this._x=d,this):this._x},i.y=function(d){return arguments.length?(this._y=d,this):this._y},m.quadtree=o,Object.defineProperty(m,"__esModule",{value:!0})},x("object"==typeof ae&&void 0!==oe?ae:(m=m||self).d3=m.d3||{})},{}],119:[function(_,oe,ae){var m,x;m=this,x=function(m,x){"use strict";function T(He){return function(){return He}}var b=Math.abs,e=Math.atan2,o=Math.cos,a=Math.max,l=Math.min,i=Math.sin,d=Math.sqrt,u=Math.PI,s=u/2,c=2*u;function h(He){return He>1?0:He<-1?u:Math.acos(He)}function p(He){return He>=1?s:He<=-1?-s:Math.asin(He)}function v(He){return He.innerRadius}function g(He){return He.outerRadius}function f(He){return He.startAngle}function w(He){return He.endAngle}function y(He){return He&&He.padAngle}function M(He,vt,Lt,Gt,Kt,_n,en,on){var wn=Lt-He,On=Gt-vt,Dn=en-Kt,Tn=on-_n,pn=Tn*wn-Dn*On;if(!(pn*pn<1e-12))return[He+(pn=(Dn*(vt-_n)-Tn*(He-Kt))/pn)*wn,vt+pn*On]}function A(He,vt,Lt,Gt,Kt,_n,en){var on=He-Lt,wn=vt-Gt,On=(en?_n:-_n)/d(on*on+wn*wn),Dn=On*wn,Tn=-On*on,pn=He+Dn,En=vt+Tn,Un=Lt+Dn,In=Gt+Tn,sr=(pn+Un)/2,fr=(En+In)/2,rr=Un-pn,qr=In-En,ti=rr*rr+qr*qr,Ar=Kt-_n,pr=pn*In-Un*En,Fn=(qr<0?-1:1)*d(a(0,Ar*Ar*ti-pr*pr)),Rn=(pr*qr-rr*Fn)/ti,hr=(-pr*rr-qr*Fn)/ti,ri=(pr*qr+rr*Fn)/ti,ir=(-pr*rr+qr*Fn)/ti,Ur=Rn-sr,Mr=hr-fr,wr=ri-sr,ii=ir-fr;return Ur*Ur+Mr*Mr>wr*wr+ii*ii&&(Rn=ri,hr=ir),{cx:Rn,cy:hr,x01:-Dn,y01:-Tn,x11:Rn*(Kt/Ar-1),y11:hr*(Kt/Ar-1)}}function k(He){this._context=He}function C(He){return new k(He)}function P(He){return He[0]}function D(He){return He[1]}function F(){var He=P,vt=D,Lt=T(!0),Gt=null,Kt=C,_n=null;function en(on){var wn,On,Dn,Tn=on.length,pn=!1;for(null==Gt&&(_n=Kt(Dn=x.path())),wn=0;wn<=Tn;++wn)!(wn<Tn&&Lt(On=on[wn],wn,on))===pn&&((pn=!pn)?_n.lineStart():_n.lineEnd()),pn&&_n.point(+He(On,wn,on),+vt(On,wn,on));if(Dn)return _n=null,Dn+""||null}return en.x=function(on){return arguments.length?(He="function"==typeof on?on:T(+on),en):He},en.y=function(on){return arguments.length?(vt="function"==typeof on?on:T(+on),en):vt},en.defined=function(on){return arguments.length?(Lt="function"==typeof on?on:T(!!on),en):Lt},en.curve=function(on){return arguments.length?(Kt=on,null!=Gt&&(_n=Kt(Gt)),en):Kt},en.context=function(on){return arguments.length?(null==on?Gt=_n=null:_n=Kt(Gt=on),en):Gt},en}function R(){var He=P,vt=null,Lt=T(0),Gt=D,Kt=T(!0),_n=null,en=C,on=null;function wn(Dn){var Tn,pn,En,Un,In,sr=Dn.length,fr=!1,rr=new Array(sr),qr=new Array(sr);for(null==_n&&(on=en(In=x.path())),Tn=0;Tn<=sr;++Tn){if(!(Tn<sr&&Kt(Un=Dn[Tn],Tn,Dn))===fr)if(fr=!fr)pn=Tn,on.areaStart(),on.lineStart();else{for(on.lineEnd(),on.lineStart(),En=Tn-1;En>=pn;--En)on.point(rr[En],qr[En]);on.lineEnd(),on.areaEnd()}fr&&(rr[Tn]=+He(Un,Tn,Dn),qr[Tn]=+Lt(Un,Tn,Dn),on.point(vt?+vt(Un,Tn,Dn):rr[Tn],Gt?+Gt(Un,Tn,Dn):qr[Tn]))}if(In)return on=null,In+""||null}function On(){return F().defined(Kt).curve(en).context(_n)}return wn.x=function(Dn){return arguments.length?(He="function"==typeof Dn?Dn:T(+Dn),vt=null,wn):He},wn.x0=function(Dn){return arguments.length?(He="function"==typeof Dn?Dn:T(+Dn),wn):He},wn.x1=function(Dn){return arguments.length?(vt=null==Dn?null:"function"==typeof Dn?Dn:T(+Dn),wn):vt},wn.y=function(Dn){return arguments.length?(Lt="function"==typeof Dn?Dn:T(+Dn),Gt=null,wn):Lt},wn.y0=function(Dn){return arguments.length?(Lt="function"==typeof Dn?Dn:T(+Dn),wn):Lt},wn.y1=function(Dn){return arguments.length?(Gt=null==Dn?null:"function"==typeof Dn?Dn:T(+Dn),wn):Gt},wn.lineX0=wn.lineY0=function(){return On().x(He).y(Lt)},wn.lineY1=function(){return On().x(He).y(Gt)},wn.lineX1=function(){return On().x(vt).y(Lt)},wn.defined=function(Dn){return arguments.length?(Kt="function"==typeof Dn?Dn:T(!!Dn),wn):Kt},wn.curve=function(Dn){return arguments.length?(en=Dn,null!=_n&&(on=en(_n)),wn):en},wn.context=function(Dn){return arguments.length?(null==Dn?_n=on=null:on=en(_n=Dn),wn):_n},wn}function L(He,vt){return vt<He?-1:vt>He?1:vt>=He?0:NaN}function I(He){return He}k.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(He,vt){switch(He=+He,vt=+vt,this._point){case 0:this._point=1,this._line?this._context.lineTo(He,vt):this._context.moveTo(He,vt);break;case 1:this._point=2;default:this._context.lineTo(He,vt)}}};var B=Z(C);function V(He){this._curve=He}function Z(He){function vt(Lt){return new V(He(Lt))}return vt._curve=He,vt}function Y(He){var vt=He.curve;return He.angle=He.x,delete He.x,He.radius=He.y,delete He.y,He.curve=function(Lt){return arguments.length?vt(Z(Lt)):vt()._curve},He}function ee(){return Y(F().curve(B))}function J(){var He=R().curve(B),vt=He.curve,Lt=He.lineX0,Gt=He.lineX1,Kt=He.lineY0,_n=He.lineY1;return He.angle=He.x,delete He.x,He.startAngle=He.x0,delete He.x0,He.endAngle=He.x1,delete He.x1,He.radius=He.y,delete He.y,He.innerRadius=He.y0,delete He.y0,He.outerRadius=He.y1,delete He.y1,He.lineStartAngle=function(){return Y(Lt())},delete He.lineX0,He.lineEndAngle=function(){return Y(Gt())},delete He.lineX1,He.lineInnerRadius=function(){return Y(Kt())},delete He.lineY0,He.lineOuterRadius=function(){return Y(_n())},delete He.lineY1,He.curve=function(en){return arguments.length?vt(Z(en)):vt()._curve},He}function $(He,vt){return[(vt=+vt)*Math.cos(He-=Math.PI/2),vt*Math.sin(He)]}V.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(He,vt){this._curve.point(vt*Math.sin(He),vt*-Math.cos(He))}};var Q=Array.prototype.slice;function se(He){return He.source}function j(He){return He.target}function G(He){var vt=se,Lt=j,Gt=P,Kt=D,_n=null;function en(){var on,wn=Q.call(arguments),On=vt.apply(this,wn),Dn=Lt.apply(this,wn);if(_n||(_n=on=x.path()),He(_n,+Gt.apply(this,(wn[0]=On,wn)),+Kt.apply(this,wn),+Gt.apply(this,(wn[0]=Dn,wn)),+Kt.apply(this,wn)),on)return _n=null,on+""||null}return en.source=function(on){return arguments.length?(vt=on,en):vt},en.target=function(on){return arguments.length?(Lt=on,en):Lt},en.x=function(on){return arguments.length?(Gt="function"==typeof on?on:T(+on),en):Gt},en.y=function(on){return arguments.length?(Kt="function"==typeof on?on:T(+on),en):Kt},en.context=function(on){return arguments.length?(_n=null==on?null:on,en):_n},en}function W(He,vt,Lt,Gt,Kt){He.moveTo(vt,Lt),He.bezierCurveTo(vt=(vt+Gt)/2,Lt,vt,Kt,Gt,Kt)}function ie(He,vt,Lt,Gt,Kt){He.moveTo(vt,Lt),He.bezierCurveTo(vt,Lt=(Lt+Kt)/2,Gt,Lt,Gt,Kt)}function q(He,vt,Lt,Gt,Kt){var _n=$(vt,Lt),en=$(vt,Lt=(Lt+Kt)/2),on=$(Gt,Lt),wn=$(Gt,Kt);He.moveTo(_n[0],_n[1]),He.bezierCurveTo(en[0],en[1],on[0],on[1],wn[0],wn[1])}var te={draw:function(He,vt){var Lt=Math.sqrt(vt/u);He.moveTo(Lt,0),He.arc(0,0,Lt,0,c)}},ne={draw:function(He,vt){var Lt=Math.sqrt(vt/5)/2;He.moveTo(-3*Lt,-Lt),He.lineTo(-Lt,-Lt),He.lineTo(-Lt,-3*Lt),He.lineTo(Lt,-3*Lt),He.lineTo(Lt,-Lt),He.lineTo(3*Lt,-Lt),He.lineTo(3*Lt,Lt),He.lineTo(Lt,Lt),He.lineTo(Lt,3*Lt),He.lineTo(-Lt,3*Lt),He.lineTo(-Lt,Lt),He.lineTo(-3*Lt,Lt),He.closePath()}},le=Math.sqrt(1/3),ue=2*le,de={draw:function(He,vt){var Lt=Math.sqrt(vt/ue),Gt=Lt*le;He.moveTo(0,-Lt),He.lineTo(Gt,0),He.lineTo(0,Lt),He.lineTo(-Gt,0),He.closePath()}},he=Math.sin(u/10)/Math.sin(7*u/10),be=Math.sin(c/10)*he,ge=-Math.cos(c/10)*he,we={draw:function(He,vt){var Lt=Math.sqrt(.8908130915292852*vt),Gt=be*Lt,Kt=ge*Lt;He.moveTo(0,-Lt),He.lineTo(Gt,Kt);for(var _n=1;_n<5;++_n){var en=c*_n/5,on=Math.cos(en),wn=Math.sin(en);He.lineTo(wn*Lt,-on*Lt),He.lineTo(on*Gt-wn*Kt,wn*Gt+on*Kt)}He.closePath()}},Ce={draw:function(He,vt){var Lt=Math.sqrt(vt),Gt=-Lt/2;He.rect(Gt,Gt,Lt,Lt)}},De=Math.sqrt(3),Se={draw:function(He,vt){var Lt=-Math.sqrt(vt/(3*De));He.moveTo(0,2*Lt),He.lineTo(-De*Lt,-Lt),He.lineTo(De*Lt,-Lt),He.closePath()}},Fe=-.5,ve=Math.sqrt(3)/2,Te=1/Math.sqrt(12),Le=3*(Te/2+1),Ee={draw:function(He,vt){var Lt=Math.sqrt(vt/Le),Gt=Lt/2,Kt=Lt*Te,_n=Gt,en=Lt*Te+Lt,on=-_n,wn=en;He.moveTo(Gt,Kt),He.lineTo(_n,en),He.lineTo(on,wn),He.lineTo(Fe*Gt-ve*Kt,ve*Gt+Fe*Kt),He.lineTo(Fe*_n-ve*en,ve*_n+Fe*en),He.lineTo(Fe*on-ve*wn,ve*on+Fe*wn),He.lineTo(Fe*Gt+ve*Kt,Fe*Kt-ve*Gt),He.lineTo(Fe*_n+ve*en,Fe*en-ve*_n),He.lineTo(Fe*on+ve*wn,Fe*wn-ve*on),He.closePath()}},Pe=[te,ne,de,Ce,we,Se,Ee];function je(){}function Ge(He,vt,Lt){He._context.bezierCurveTo((2*He._x0+He._x1)/3,(2*He._y0+He._y1)/3,(He._x0+2*He._x1)/3,(He._y0+2*He._y1)/3,(He._x0+4*He._x1+vt)/6,(He._y0+4*He._y1+Lt)/6)}function Ke(He){this._context=He}function lt(He){this._context=He}function Ue(He){this._context=He}function $e(He,vt){this._basis=new Ke(He),this._beta=vt}Ke.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ge(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(He,vt){switch(He=+He,vt=+vt,this._point){case 0:this._point=1,this._line?this._context.lineTo(He,vt):this._context.moveTo(He,vt);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ge(this,He,vt)}this._x0=this._x1,this._x1=He,this._y0=this._y1,this._y1=vt}},lt.prototype={areaStart:je,areaEnd:je,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(He,vt){switch(He=+He,vt=+vt,this._point){case 0:this._point=1,this._x2=He,this._y2=vt;break;case 1:this._point=2,this._x3=He,this._y3=vt;break;case 2:this._point=3,this._x4=He,this._y4=vt,this._context.moveTo((this._x0+4*this._x1+He)/6,(this._y0+4*this._y1+vt)/6);break;default:Ge(this,He,vt)}this._x0=this._x1,this._x1=He,this._y0=this._y1,this._y1=vt}},Ue.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(He,vt){switch(He=+He,vt=+vt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var Lt=(this._x0+4*this._x1+He)/6,Gt=(this._y0+4*this._y1+vt)/6;this._line?this._context.lineTo(Lt,Gt):this._context.moveTo(Lt,Gt);break;case 3:this._point=4;default:Ge(this,He,vt)}this._x0=this._x1,this._x1=He,this._y0=this._y1,this._y1=vt}},$e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var He=this._x,vt=this._y,Lt=He.length-1;if(Lt>0)for(var Gt,Kt=He[0],_n=vt[0],en=He[Lt]-Kt,on=vt[Lt]-_n,wn=-1;++wn<=Lt;)this._basis.point(this._beta*He[wn]+(1-this._beta)*(Kt+(Gt=wn/Lt)*en),this._beta*vt[wn]+(1-this._beta)*(_n+Gt*on));this._x=this._y=null,this._basis.lineEnd()},point:function(He,vt){this._x.push(+He),this._y.push(+vt)}};var et=function He(vt){function Lt(Gt){return 1===vt?new Ke(Gt):new $e(Gt,vt)}return Lt.beta=function(Gt){return He(+Gt)},Lt}(.85);function tt(He,vt,Lt){He._context.bezierCurveTo(He._x1+He._k*(He._x2-He._x0),He._y1+He._k*(He._y2-He._y0),He._x2+He._k*(He._x1-vt),He._y2+He._k*(He._y1-Lt),He._x2,He._y2)}function ct(He,vt){this._context=He,this._k=(1-vt)/6}ct.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:tt(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(He,vt){switch(He=+He,vt=+vt,this._point){case 0:this._point=1,this._line?this._context.lineTo(He,vt):this._context.moveTo(He,vt);break;case 1:this._point=2,this._x1=He,this._y1=vt;break;case 2:this._point=3;default:tt(this,He,vt)}this._x0=this._x1,this._x1=this._x2,this._x2=He,this._y0=this._y1,this._y1=this._y2,this._y2=vt}};var xt=function He(vt){function Lt(Gt){return new ct(Gt,vt)}return Lt.tension=function(Gt){return He(+Gt)},Lt}(0);function Ct(He,vt){this._context=He,this._k=(1-vt)/6}Ct.prototype={areaStart:je,areaEnd:je,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(He,vt){switch(He=+He,vt=+vt,this._point){case 0:this._point=1,this._x3=He,this._y3=vt;break;case 1:this._point=2,this._context.moveTo(this._x4=He,this._y4=vt);break;case 2:this._point=3,this._x5=He,this._y5=vt;break;default:tt(this,He,vt)}this._x0=this._x1,this._x1=this._x2,this._x2=He,this._y0=this._y1,this._y1=this._y2,this._y2=vt}};var Ht=function He(vt){function Lt(Gt){return new Ct(Gt,vt)}return Lt.tension=function(Gt){return He(+Gt)},Lt}(0);function zt(He,vt){this._context=He,this._k=(1-vt)/6}zt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(He,vt){switch(He=+He,vt=+vt,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:tt(this,He,vt)}this._x0=this._x1,this._x1=this._x2,this._x2=He,this._y0=this._y1,this._y1=this._y2,this._y2=vt}};var ht=function He(vt){function Lt(Gt){return new zt(Gt,vt)}return Lt.tension=function(Gt){return He(+Gt)},Lt}(0);function ut(He,vt,Lt){var Gt=He._x1,Kt=He._y1,_n=He._x2,en=He._y2;if(He._l01_a>1e-12){var on=2*He._l01_2a+3*He._l01_a*He._l12_a+He._l12_2a,wn=3*He._l01_a*(He._l01_a+He._l12_a);Gt=(Gt*on-He._x0*He._l12_2a+He._x2*He._l01_2a)/wn,Kt=(Kt*on-He._y0*He._l12_2a+He._y2*He._l01_2a)/wn}if(He._l23_a>1e-12){var On=2*He._l23_2a+3*He._l23_a*He._l12_a+He._l12_2a,Dn=3*He._l23_a*(He._l23_a+He._l12_a);_n=(_n*On+He._x1*He._l23_2a-vt*He._l12_2a)/Dn,en=(en*On+He._y1*He._l23_2a-Lt*He._l12_2a)/Dn}He._context.bezierCurveTo(Gt,Kt,_n,en,He._x2,He._y2)}function Ot(He,vt){this._context=He,this._alpha=vt}Ot.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(He,vt){if(He=+He,vt=+vt,this._point){var Lt=this._x2-He,Gt=this._y2-vt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Lt*Lt+Gt*Gt,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(He,vt):this._context.moveTo(He,vt);break;case 1:this._point=2;break;case 2:this._point=3;default:ut(this,He,vt)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=He,this._y0=this._y1,this._y1=this._y2,this._y2=vt}};var tn=function He(vt){function Lt(Gt){return vt?new Ot(Gt,vt):new ct(Gt,0)}return Lt.alpha=function(Gt){return He(+Gt)},Lt}(.5);function un(He,vt){this._context=He,this._alpha=vt}un.prototype={areaStart:je,areaEnd:je,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(He,vt){if(He=+He,vt=+vt,this._point){var Lt=this._x2-He,Gt=this._y2-vt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Lt*Lt+Gt*Gt,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=He,this._y3=vt;break;case 1:this._point=2,this._context.moveTo(this._x4=He,this._y4=vt);break;case 2:this._point=3,this._x5=He,this._y5=vt;break;default:ut(this,He,vt)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=He,this._y0=this._y1,this._y1=this._y2,this._y2=vt}};var Ze=function He(vt){function Lt(Gt){return vt?new un(Gt,vt):new Ct(Gt,0)}return Lt.alpha=function(Gt){return He(+Gt)},Lt}(.5);function Qe(He,vt){this._context=He,this._alpha=vt}Qe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(He,vt){if(He=+He,vt=+vt,this._point){var Lt=this._x2-He,Gt=this._y2-vt;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(Lt*Lt+Gt*Gt,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ut(this,He,vt)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=He,this._y0=this._y1,this._y1=this._y2,this._y2=vt}};var qe=function He(vt){function Lt(Gt){return vt?new Qe(Gt,vt):new zt(Gt,0)}return Lt.alpha=function(Gt){return He(+Gt)},Lt}(.5);function it(He){this._context=He}function Ie(He){return He<0?-1:1}function ze(He,vt,Lt){var Gt=He._x1-He._x0,Kt=vt-He._x1,_n=(He._y1-He._y0)/(Gt||Kt<0&&-0),en=(Lt-He._y1)/(Kt||Gt<0&&-0),on=(_n*Kt+en*Gt)/(Gt+Kt);return(Ie(_n)+Ie(en))*Math.min(Math.abs(_n),Math.abs(en),.5*Math.abs(on))||0}function Ve(He,vt){var Lt=He._x1-He._x0;return Lt?(3*(He._y1-He._y0)/Lt-vt)/2:vt}function Be(He,vt,Lt){var Gt=He._x0,_n=He._x1,en=He._y1,on=(_n-Gt)/3;He._context.bezierCurveTo(Gt+on,He._y0+on*vt,_n-on,en-on*Lt,_n,en)}function at(He){this._context=He}function gt(He){this._context=new wt(He)}function wt(He){this._context=He}function _t(He){this._context=He}function Rt(He){var vt,Lt,Gt=He.length-1,Kt=new Array(Gt),_n=new Array(Gt),en=new Array(Gt);for(Kt[0]=0,_n[0]=2,en[0]=He[0]+2*He[1],vt=1;vt<Gt-1;++vt)Kt[vt]=1,_n[vt]=4,en[vt]=4*He[vt]+2*He[vt+1];for(Kt[Gt-1]=2,_n[Gt-1]=7,en[Gt-1]=8*He[Gt-1]+He[Gt],vt=1;vt<Gt;++vt)_n[vt]-=Lt=Kt[vt]/_n[vt-1],en[vt]-=Lt*en[vt-1];for(Kt[Gt-1]=en[Gt-1]/_n[Gt-1],vt=Gt-2;vt>=0;--vt)Kt[vt]=(en[vt]-Kt[vt+1])/_n[vt];for(_n[Gt-1]=(He[Gt]+Kt[Gt-1])/2,vt=0;vt<Gt-1;++vt)_n[vt]=2*He[vt+1]-Kt[vt+1];return[Kt,_n]}function yt(He,vt){this._context=He,this._t=vt}function Vt(He,vt){if((Kt=He.length)>1)for(var Lt,Gt,Kt,_n=1,en=He[vt[0]],on=en.length;_n<Kt;++_n)for(Gt=en,en=He[vt[_n]],Lt=0;Lt<on;++Lt)en[Lt][1]+=en[Lt][0]=isNaN(Gt[Lt][1])?Gt[Lt][0]:Gt[Lt][1]}function Nt(He){for(var vt=He.length,Lt=new Array(vt);--vt>=0;)Lt[vt]=vt;return Lt}function rt(He,vt){return He[vt]}function Tt(He){var vt=He.map(Ut);return Nt(He).sort(function(Lt,Gt){return vt[Lt]-vt[Gt]})}function Ut(He){for(var vt,Lt=-1,Gt=0,Kt=He.length,_n=-1/0;++Lt<Kt;)(vt=+He[Lt][1])>_n&&(_n=vt,Gt=Lt);return Gt}function Wt(He){var vt=He.map(sn);return Nt(He).sort(function(Lt,Gt){return vt[Lt]-vt[Gt]})}function sn(He){for(var vt,Lt=0,Gt=-1,Kt=He.length;++Gt<Kt;)(vt=+He[Gt][1])&&(Lt+=vt);return Lt}it.prototype={areaStart:je,areaEnd:je,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(He,vt){He=+He,vt=+vt,this._point?this._context.lineTo(He,vt):(this._point=1,this._context.moveTo(He,vt))}},at.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Be(this,this._t0,Ve(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(He,vt){var Lt=NaN;if(vt=+vt,(He=+He)!==this._x1||vt!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(He,vt):this._context.moveTo(He,vt);break;case 1:this._point=2;break;case 2:this._point=3,Be(this,Ve(this,Lt=ze(this,He,vt)),Lt);break;default:Be(this,this._t0,Lt=ze(this,He,vt))}this._x0=this._x1,this._x1=He,this._y0=this._y1,this._y1=vt,this._t0=Lt}}},(gt.prototype=Object.create(at.prototype)).point=function(He,vt){at.prototype.point.call(this,vt,He)},wt.prototype={moveTo:function(He,vt){this._context.moveTo(vt,He)},closePath:function(){this._context.closePath()},lineTo:function(He,vt){this._context.lineTo(vt,He)},bezierCurveTo:function(He,vt,Lt,Gt,Kt,_n){this._context.bezierCurveTo(vt,He,Gt,Lt,_n,Kt)}},_t.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var He=this._x,vt=this._y,Lt=He.length;if(Lt)if(this._line?this._context.lineTo(He[0],vt[0]):this._context.moveTo(He[0],vt[0]),2===Lt)this._context.lineTo(He[1],vt[1]);else for(var Gt=Rt(He),Kt=Rt(vt),_n=0,en=1;en<Lt;++_n,++en)this._context.bezierCurveTo(Gt[0][_n],Kt[0][_n],Gt[1][_n],Kt[1][_n],He[en],vt[en]);(this._line||0!==this._line&&1===Lt)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(He,vt){this._x.push(+He),this._y.push(+vt)}},yt.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(He,vt){switch(He=+He,vt=+vt,this._point){case 0:this._point=1,this._line?this._context.lineTo(He,vt):this._context.moveTo(He,vt);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,vt),this._context.lineTo(He,vt);else{var Lt=this._x*(1-this._t)+He*this._t;this._context.lineTo(Lt,this._y),this._context.lineTo(Lt,vt)}}this._x=He,this._y=vt}},m.arc=function(){var He=v,vt=g,Lt=T(0),Gt=null,Kt=f,_n=w,en=y,on=null;function wn(){var On,Dn,Tn=+He.apply(this,arguments),pn=+vt.apply(this,arguments),En=Kt.apply(this,arguments)-s,Un=_n.apply(this,arguments)-s,In=b(Un-En),sr=Un>En;if(on||(on=On=x.path()),pn<Tn&&(Dn=pn,pn=Tn,Tn=Dn),pn>1e-12)if(In>c-1e-12)on.moveTo(pn*o(En),pn*i(En)),on.arc(0,0,pn,En,Un,!sr),Tn>1e-12&&(on.moveTo(Tn*o(Un),Tn*i(Un)),on.arc(0,0,Tn,Un,En,sr));else{var fr,rr,qr=En,ti=Un,Ar=En,pr=Un,Fn=In,Rn=In,hr=en.apply(this,arguments)/2,ri=hr>1e-12&&(Gt?+Gt.apply(this,arguments):d(Tn*Tn+pn*pn)),ir=l(b(pn-Tn)/2,+Lt.apply(this,arguments)),Ur=ir,Mr=ir;if(ri>1e-12){var wr=p(ri/Tn*i(hr)),ii=p(ri/pn*i(hr));(Fn-=2*wr)>1e-12?(Ar+=wr*=sr?1:-1,pr-=wr):(Fn=0,Ar=pr=(En+Un)/2),(Rn-=2*ii)>1e-12?(qr+=ii*=sr?1:-1,ti-=ii):(Rn=0,qr=ti=(En+Un)/2)}var gn=pn*o(qr),jt=pn*i(qr),Jt=Tn*o(pr),An=Tn*i(pr);if(ir>1e-12){var Hn,yr=pn*o(ti),gr=pn*i(ti),Bn=Tn*o(Ar),Nn=Tn*i(Ar);if(In<u&&(Hn=M(gn,jt,Bn,Nn,yr,gr,Jt,An))){var Zn=gn-Hn[0],Wn=jt-Hn[1],jn=yr-Hn[0],xr=gr-Hn[1],Ir=1/i(h((Zn*jn+Wn*xr)/(d(Zn*Zn+Wn*Wn)*d(jn*jn+xr*xr)))/2),Vr=d(Hn[0]*Hn[0]+Hn[1]*Hn[1]);Ur=l(ir,(Tn-Vr)/(Ir-1)),Mr=l(ir,(pn-Vr)/(Ir+1))}}Rn>1e-12?Mr>1e-12?(fr=A(Bn,Nn,gn,jt,pn,Mr,sr),rr=A(yr,gr,Jt,An,pn,Mr,sr),on.moveTo(fr.cx+fr.x01,fr.cy+fr.y01),Mr<ir?on.arc(fr.cx,fr.cy,Mr,e(fr.y01,fr.x01),e(rr.y01,rr.x01),!sr):(on.arc(fr.cx,fr.cy,Mr,e(fr.y01,fr.x01),e(fr.y11,fr.x11),!sr),on.arc(0,0,pn,e(fr.cy+fr.y11,fr.cx+fr.x11),e(rr.cy+rr.y11,rr.cx+rr.x11),!sr),on.arc(rr.cx,rr.cy,Mr,e(rr.y11,rr.x11),e(rr.y01,rr.x01),!sr))):(on.moveTo(gn,jt),on.arc(0,0,pn,qr,ti,!sr)):on.moveTo(gn,jt),Tn>1e-12&&Fn>1e-12?Ur>1e-12?(fr=A(Jt,An,yr,gr,Tn,-Ur,sr),rr=A(gn,jt,Bn,Nn,Tn,-Ur,sr),on.lineTo(fr.cx+fr.x01,fr.cy+fr.y01),Ur<ir?on.arc(fr.cx,fr.cy,Ur,e(fr.y01,fr.x01),e(rr.y01,rr.x01),!sr):(on.arc(fr.cx,fr.cy,Ur,e(fr.y01,fr.x01),e(fr.y11,fr.x11),!sr),on.arc(0,0,Tn,e(fr.cy+fr.y11,fr.cx+fr.x11),e(rr.cy+rr.y11,rr.cx+rr.x11),sr),on.arc(rr.cx,rr.cy,Ur,e(rr.y11,rr.x11),e(rr.y01,rr.x01),!sr))):on.arc(0,0,Tn,pr,Ar,sr):on.lineTo(Jt,An)}else on.moveTo(0,0);if(on.closePath(),On)return on=null,On+""||null}return wn.centroid=function(){var On=(+He.apply(this,arguments)+ +vt.apply(this,arguments))/2,Dn=(+Kt.apply(this,arguments)+ +_n.apply(this,arguments))/2-u/2;return[o(Dn)*On,i(Dn)*On]},wn.innerRadius=function(On){return arguments.length?(He="function"==typeof On?On:T(+On),wn):He},wn.outerRadius=function(On){return arguments.length?(vt="function"==typeof On?On:T(+On),wn):vt},wn.cornerRadius=function(On){return arguments.length?(Lt="function"==typeof On?On:T(+On),wn):Lt},wn.padRadius=function(On){return arguments.length?(Gt=null==On?null:"function"==typeof On?On:T(+On),wn):Gt},wn.startAngle=function(On){return arguments.length?(Kt="function"==typeof On?On:T(+On),wn):Kt},wn.endAngle=function(On){return arguments.length?(_n="function"==typeof On?On:T(+On),wn):_n},wn.padAngle=function(On){return arguments.length?(en="function"==typeof On?On:T(+On),wn):en},wn.context=function(On){return arguments.length?(on=null==On?null:On,wn):on},wn},m.area=R,m.areaRadial=J,m.curveBasis=function(He){return new Ke(He)},m.curveBasisClosed=function(He){return new lt(He)},m.curveBasisOpen=function(He){return new Ue(He)},m.curveBundle=et,m.curveCardinal=xt,m.curveCardinalClosed=Ht,m.curveCardinalOpen=ht,m.curveCatmullRom=tn,m.curveCatmullRomClosed=Ze,m.curveCatmullRomOpen=qe,m.curveLinear=C,m.curveLinearClosed=function(He){return new it(He)},m.curveMonotoneX=function(He){return new at(He)},m.curveMonotoneY=function(He){return new gt(He)},m.curveNatural=function(He){return new _t(He)},m.curveStep=function(He){return new yt(He,.5)},m.curveStepAfter=function(He){return new yt(He,1)},m.curveStepBefore=function(He){return new yt(He,0)},m.line=F,m.lineRadial=ee,m.linkHorizontal=function(){return G(W)},m.linkRadial=function(){var He=G(q);return He.angle=He.x,delete He.x,He.radius=He.y,delete He.y,He},m.linkVertical=function(){return G(ie)},m.pie=function(){var He=I,vt=L,Lt=null,Gt=T(0),Kt=T(c),_n=T(0);function en(on){var wn,On,Dn,Tn,pn,En=on.length,Un=0,In=new Array(En),sr=new Array(En),fr=+Gt.apply(this,arguments),rr=Math.min(c,Math.max(-c,Kt.apply(this,arguments)-fr)),qr=Math.min(Math.abs(rr)/En,_n.apply(this,arguments)),ti=qr*(rr<0?-1:1);for(wn=0;wn<En;++wn)(pn=sr[In[wn]=wn]=+He(on[wn],wn,on))>0&&(Un+=pn);for(null!=vt?In.sort(function(Ar,pr){return vt(sr[Ar],sr[pr])}):null!=Lt&&In.sort(function(Ar,pr){return Lt(on[Ar],on[pr])}),wn=0,Dn=Un?(rr-En*ti)/Un:0;wn<En;++wn,fr=Tn)Tn=fr+((pn=sr[On=In[wn]])>0?pn*Dn:0)+ti,sr[On]={data:on[On],index:wn,value:pn,startAngle:fr,endAngle:Tn,padAngle:qr};return sr}return en.value=function(on){return arguments.length?(He="function"==typeof on?on:T(+on),en):He},en.sortValues=function(on){return arguments.length?(vt=on,Lt=null,en):vt},en.sort=function(on){return arguments.length?(Lt=on,vt=null,en):Lt},en.startAngle=function(on){return arguments.length?(Gt="function"==typeof on?on:T(+on),en):Gt},en.endAngle=function(on){return arguments.length?(Kt="function"==typeof on?on:T(+on),en):Kt},en.padAngle=function(on){return arguments.length?(_n="function"==typeof on?on:T(+on),en):_n},en},m.pointRadial=$,m.radialArea=J,m.radialLine=ee,m.stack=function(){var He=T([]),vt=Nt,Lt=Vt,Gt=rt;function Kt(_n){var en,on,wn=He.apply(this,arguments),On=_n.length,Dn=wn.length,Tn=new Array(Dn);for(en=0;en<Dn;++en){for(var pn,En=wn[en],Un=Tn[en]=new Array(On),In=0;In<On;++In)Un[In]=pn=[0,+Gt(_n[In],En,In,_n)],pn.data=_n[In];Un.key=En}for(en=0,on=vt(Tn);en<Dn;++en)Tn[on[en]].index=en;return Lt(Tn,on),Tn}return Kt.keys=function(_n){return arguments.length?(He="function"==typeof _n?_n:T(Q.call(_n)),Kt):He},Kt.value=function(_n){return arguments.length?(Gt="function"==typeof _n?_n:T(+_n),Kt):Gt},Kt.order=function(_n){return arguments.length?(vt=null==_n?Nt:"function"==typeof _n?_n:T(Q.call(_n)),Kt):vt},Kt.offset=function(_n){return arguments.length?(Lt=null==_n?Vt:_n,Kt):Lt},Kt},m.stackOffsetDiverging=function(He,vt){if((on=He.length)>0)for(var Lt,Gt,Kt,_n,en,on,wn=0,On=He[vt[0]].length;wn<On;++wn)for(_n=en=0,Lt=0;Lt<on;++Lt)(Kt=(Gt=He[vt[Lt]][wn])[1]-Gt[0])>0?(Gt[0]=_n,Gt[1]=_n+=Kt):Kt<0?(Gt[1]=en,Gt[0]=en+=Kt):(Gt[0]=0,Gt[1]=Kt)},m.stackOffsetExpand=function(He,vt){if((Gt=He.length)>0){for(var Lt,Gt,Kt,_n=0,en=He[0].length;_n<en;++_n){for(Kt=Lt=0;Lt<Gt;++Lt)Kt+=He[Lt][_n][1]||0;if(Kt)for(Lt=0;Lt<Gt;++Lt)He[Lt][_n][1]/=Kt}Vt(He,vt)}},m.stackOffsetNone=Vt,m.stackOffsetSilhouette=function(He,vt){if((Lt=He.length)>0){for(var Lt,Gt=0,Kt=He[vt[0]],_n=Kt.length;Gt<_n;++Gt){for(var en=0,on=0;en<Lt;++en)on+=He[en][Gt][1]||0;Kt[Gt][1]+=Kt[Gt][0]=-on/2}Vt(He,vt)}},m.stackOffsetWiggle=function(He,vt){if((Kt=He.length)>0&&(Gt=(Lt=He[vt[0]]).length)>0){for(var Lt,Gt,Kt,_n=0,en=1;en<Gt;++en){for(var on=0,wn=0,On=0;on<Kt;++on){for(var Dn=He[vt[on]],Tn=Dn[en][1]||0,pn=(Tn-(Dn[en-1][1]||0))/2,En=0;En<on;++En){var Un=He[vt[En]];pn+=(Un[en][1]||0)-(Un[en-1][1]||0)}wn+=Tn,On+=pn*Tn}Lt[en-1][1]+=Lt[en-1][0]=_n,wn&&(_n-=On/wn)}Lt[en-1][1]+=Lt[en-1][0]=_n,Vt(He,vt)}},m.stackOrderAppearance=Tt,m.stackOrderAscending=Wt,m.stackOrderDescending=function(He){return Wt(He).reverse()},m.stackOrderInsideOut=function(He){var vt,Lt,Gt=He.length,Kt=He.map(sn),_n=Tt(He),en=0,on=0,wn=[],On=[];for(vt=0;vt<Gt;++vt)Lt=_n[vt],en<on?(en+=Kt[Lt],wn.push(Lt)):(on+=Kt[Lt],On.push(Lt));return On.reverse().concat(wn)},m.stackOrderNone=Nt,m.stackOrderReverse=function(He){return Nt(He).reverse()},m.symbol=function(){var He=T(te),vt=T(64),Lt=null;function Gt(){var Kt;if(Lt||(Lt=Kt=x.path()),He.apply(this,arguments).draw(Lt,+vt.apply(this,arguments)),Kt)return Lt=null,Kt+""||null}return Gt.type=function(Kt){return arguments.length?(He="function"==typeof Kt?Kt:T(Kt),Gt):He},Gt.size=function(Kt){return arguments.length?(vt="function"==typeof Kt?Kt:T(+Kt),Gt):vt},Gt.context=function(Kt){return arguments.length?(Lt=null==Kt?null:Kt,Gt):Lt},Gt},m.symbolCircle=te,m.symbolCross=ne,m.symbolDiamond=de,m.symbolSquare=Ce,m.symbolStar=we,m.symbolTriangle=Se,m.symbolWye=Ee,m.symbols=Pe,Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==oe?x(ae,_("d3-path")):x((m=m||self).d3=m.d3||{},m.d3)},{"d3-path":117}],120:[function(_,oe,ae){var m,x;m=this,x=function(m,x){"use strict";function T(ht){if(0<=ht.y&&ht.y<100){var ut=new Date(-1,ht.m,ht.d,ht.H,ht.M,ht.S,ht.L);return ut.setFullYear(ht.y),ut}return new Date(ht.y,ht.m,ht.d,ht.H,ht.M,ht.S,ht.L)}function b(ht){if(0<=ht.y&&ht.y<100){var ut=new Date(Date.UTC(-1,ht.m,ht.d,ht.H,ht.M,ht.S,ht.L));return ut.setUTCFullYear(ht.y),ut}return new Date(Date.UTC(ht.y,ht.m,ht.d,ht.H,ht.M,ht.S,ht.L))}function e(ht,ut,Ot){return{y:ht,m:ut,d:Ot,H:0,M:0,S:0,L:0}}function o(ht){var ut=ht.dateTime,Ot=ht.date,tn=ht.time,un=ht.periods,Ze=ht.days,Qe=ht.shortDays,qe=ht.months,it=ht.shortMonths,Ie=h(un),ze=p(un),Ve=h(Ze),Be=p(Ze),at=h(Qe),gt=p(Qe),wt=h(qe),_t=p(qe),Rt=h(it),yt=p(it),Vt={a:function(sn){return Qe[sn.getDay()]},A:function(sn){return Ze[sn.getDay()]},b:function(sn){return it[sn.getMonth()]},B:function(sn){return qe[sn.getMonth()]},c:null,d:J,e:J,f:G,H:$,I:Q,j:se,L:j,m:W,M:ie,p:function(sn){return un[+(sn.getHours()>=12)]},q:function(sn){return 1+~~(sn.getMonth()/3)},Q:ct,s:xt,S:q,u:te,U:ne,V:le,w:ue,W:de,x:null,X:null,y:he,Y:be,Z:ge,"%":tt},Nt={a:function(sn){return Qe[sn.getUTCDay()]},A:function(sn){return Ze[sn.getUTCDay()]},b:function(sn){return it[sn.getUTCMonth()]},B:function(sn){return qe[sn.getUTCMonth()]},c:null,d:we,e:we,f:ve,H:Ce,I:De,j:Se,L:Fe,m:Te,M:Le,p:function(sn){return un[+(sn.getUTCHours()>=12)]},q:function(sn){return 1+~~(sn.getUTCMonth()/3)},Q:ct,s:xt,S:Ee,u:Pe,U:je,V:Ge,w:Ke,W:lt,x:null,X:null,y:Ue,Y:$e,Z:et,"%":tt},rt={a:function(sn,He,vt){var Lt=at.exec(He.slice(vt));return Lt?(sn.w=gt[Lt[0].toLowerCase()],vt+Lt[0].length):-1},A:function(sn,He,vt){var Lt=Ve.exec(He.slice(vt));return Lt?(sn.w=Be[Lt[0].toLowerCase()],vt+Lt[0].length):-1},b:function(sn,He,vt){var Lt=Rt.exec(He.slice(vt));return Lt?(sn.m=yt[Lt[0].toLowerCase()],vt+Lt[0].length):-1},B:function(sn,He,vt){var Lt=wt.exec(He.slice(vt));return Lt?(sn.m=_t[Lt[0].toLowerCase()],vt+Lt[0].length):-1},c:function(sn,He,vt){return Wt(sn,ut,He,vt)},d:D,e:D,f:V,H:R,I:R,j:F,L:B,m:P,M:L,p:function(sn,He,vt){var Lt=Ie.exec(He.slice(vt));return Lt?(sn.p=ze[Lt[0].toLowerCase()],vt+Lt[0].length):-1},q:C,Q:Y,s:ee,S:I,u:g,U:f,V:w,w:v,W:y,x:function(sn,He,vt){return Wt(sn,Ot,He,vt)},X:function(sn,He,vt){return Wt(sn,tn,He,vt)},y:A,Y:M,Z:k,"%":Z};function Tt(sn,He){return function(vt){var Lt,Gt,Kt,_n=[],en=-1,on=0,wn=sn.length;for(vt instanceof Date||(vt=new Date(+vt));++en<wn;)37===sn.charCodeAt(en)&&(_n.push(sn.slice(on,en)),null!=(Gt=l[Lt=sn.charAt(++en)])?Lt=sn.charAt(++en):Gt="e"===Lt?" ":"0",(Kt=He[Lt])&&(Lt=Kt(vt,Gt)),_n.push(Lt),on=en+1);return _n.push(sn.slice(on,en)),_n.join("")}}function Ut(sn,He){return function(vt){var Lt,Gt,Kt=e(1900,void 0,1);if(Wt(Kt,sn,vt+="",0)!=vt.length)return null;if("Q"in Kt)return new Date(Kt.Q);if("s"in Kt)return new Date(1e3*Kt.s+("L"in Kt?Kt.L:0));if(He&&!("Z"in Kt)&&(Kt.Z=0),"p"in Kt&&(Kt.H=Kt.H%12+12*Kt.p),void 0===Kt.m&&(Kt.m="q"in Kt?Kt.q:0),"V"in Kt){if(Kt.V<1||Kt.V>53)return null;"w"in Kt||(Kt.w=1),"Z"in Kt?(Gt=(Lt=b(e(Kt.y,0,1))).getUTCDay(),Lt=Gt>4||0===Gt?x.utcMonday.ceil(Lt):x.utcMonday(Lt),Lt=x.utcDay.offset(Lt,7*(Kt.V-1)),Kt.y=Lt.getUTCFullYear(),Kt.m=Lt.getUTCMonth(),Kt.d=Lt.getUTCDate()+(Kt.w+6)%7):(Gt=(Lt=T(e(Kt.y,0,1))).getDay(),Lt=Gt>4||0===Gt?x.timeMonday.ceil(Lt):x.timeMonday(Lt),Lt=x.timeDay.offset(Lt,7*(Kt.V-1)),Kt.y=Lt.getFullYear(),Kt.m=Lt.getMonth(),Kt.d=Lt.getDate()+(Kt.w+6)%7)}else("W"in Kt||"U"in Kt)&&("w"in Kt||(Kt.w="u"in Kt?Kt.u%7:"W"in Kt?1:0),Gt="Z"in Kt?b(e(Kt.y,0,1)).getUTCDay():T(e(Kt.y,0,1)).getDay(),Kt.m=0,Kt.d="W"in Kt?(Kt.w+6)%7+7*Kt.W-(Gt+5)%7:Kt.w+7*Kt.U-(Gt+6)%7);return"Z"in Kt?(Kt.H+=Kt.Z/100|0,Kt.M+=Kt.Z%100,b(Kt)):T(Kt)}}function Wt(sn,He,vt,Lt){for(var Gt,Kt,_n=0,en=He.length,on=vt.length;_n<en;){if(Lt>=on)return-1;if(37===(Gt=He.charCodeAt(_n++))){if(Gt=He.charAt(_n++),!(Kt=rt[Gt in l?He.charAt(_n++):Gt])||(Lt=Kt(sn,vt,Lt))<0)return-1}else if(Gt!=vt.charCodeAt(Lt++))return-1}return Lt}return Vt.x=Tt(Ot,Vt),Vt.X=Tt(tn,Vt),Vt.c=Tt(ut,Vt),Nt.x=Tt(Ot,Nt),Nt.X=Tt(tn,Nt),Nt.c=Tt(ut,Nt),{format:function(sn){var He=Tt(sn+="",Vt);return He.toString=function(){return sn},He},parse:function(sn){var He=Ut(sn+="",!1);return He.toString=function(){return sn},He},utcFormat:function(sn){var He=Tt(sn+="",Nt);return He.toString=function(){return sn},He},utcParse:function(sn){var He=Ut(sn+="",!0);return He.toString=function(){return sn},He}}}var a,l={"-":"",_:" ",0:"0"},i=/^\s*\d+/,d=/^%/,u=/[\\^$*+?|[\]().{}]/g;function s(ht,ut,Ot){var tn=ht<0?"-":"",un=(tn?-ht:ht)+"",Ze=un.length;return tn+(Ze<Ot?new Array(Ot-Ze+1).join(ut)+un:un)}function c(ht){return ht.replace(u,"\\$&")}function h(ht){return new RegExp("^(?:"+ht.map(c).join("|")+")","i")}function p(ht){for(var ut={},Ot=-1,tn=ht.length;++Ot<tn;)ut[ht[Ot].toLowerCase()]=Ot;return ut}function v(ht,ut,Ot){var tn=i.exec(ut.slice(Ot,Ot+1));return tn?(ht.w=+tn[0],Ot+tn[0].length):-1}function g(ht,ut,Ot){var tn=i.exec(ut.slice(Ot,Ot+1));return tn?(ht.u=+tn[0],Ot+tn[0].length):-1}function f(ht,ut,Ot){var tn=i.exec(ut.slice(Ot,Ot+2));return tn?(ht.U=+tn[0],Ot+tn[0].length):-1}function w(ht,ut,Ot){var tn=i.exec(ut.slice(Ot,Ot+2));return tn?(ht.V=+tn[0],Ot+tn[0].length):-1}function y(ht,ut,Ot){var tn=i.exec(ut.slice(Ot,Ot+2));return tn?(ht.W=+tn[0],Ot+tn[0].length):-1}function M(ht,ut,Ot){var tn=i.exec(ut.slice(Ot,Ot+4));return tn?(ht.y=+tn[0],Ot+tn[0].length):-1}function A(ht,ut,Ot){var tn=i.exec(ut.slice(Ot,Ot+2));return tn?(ht.y=+tn[0]+(+tn[0]>68?1900:2e3),Ot+tn[0].length):-1}function k(ht,ut,Ot){var tn=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(ut.slice(Ot,Ot+6));return tn?(ht.Z=tn[1]?0:-(tn[2]+(tn[3]||"00")),Ot+tn[0].length):-1}function C(ht,ut,Ot){var tn=i.exec(ut.slice(Ot,Ot+1));return tn?(ht.q=3*tn[0]-3,Ot+tn[0].length):-1}function P(ht,ut,Ot){var tn=i.exec(ut.slice(Ot,Ot+2));return tn?(ht.m=tn[0]-1,Ot+tn[0].length):-1}function D(ht,ut,Ot){var tn=i.exec(ut.slice(Ot,Ot+2));return tn?(ht.d=+tn[0],Ot+tn[0].length):-1}function F(ht,ut,Ot){var tn=i.exec(ut.slice(Ot,Ot+3));return tn?(ht.m=0,ht.d=+tn[0],Ot+tn[0].length):-1}function R(ht,ut,Ot){var tn=i.exec(ut.slice(Ot,Ot+2));return tn?(ht.H=+tn[0],Ot+tn[0].length):-1}function L(ht,ut,Ot){var tn=i.exec(ut.slice(Ot,Ot+2));return tn?(ht.M=+tn[0],Ot+tn[0].length):-1}function I(ht,ut,Ot){var tn=i.exec(ut.slice(Ot,Ot+2));return tn?(ht.S=+tn[0],Ot+tn[0].length):-1}function B(ht,ut,Ot){var tn=i.exec(ut.slice(Ot,Ot+3));return tn?(ht.L=+tn[0],Ot+tn[0].length):-1}function V(ht,ut,Ot){var tn=i.exec(ut.slice(Ot,Ot+6));return tn?(ht.L=Math.floor(tn[0]/1e3),Ot+tn[0].length):-1}function Z(ht,ut,Ot){var tn=d.exec(ut.slice(Ot,Ot+1));return tn?Ot+tn[0].length:-1}function Y(ht,ut,Ot){var tn=i.exec(ut.slice(Ot));return tn?(ht.Q=+tn[0],Ot+tn[0].length):-1}function ee(ht,ut,Ot){var tn=i.exec(ut.slice(Ot));return tn?(ht.s=+tn[0],Ot+tn[0].length):-1}function J(ht,ut){return s(ht.getDate(),ut,2)}function $(ht,ut){return s(ht.getHours(),ut,2)}function Q(ht,ut){return s(ht.getHours()%12||12,ut,2)}function se(ht,ut){return s(1+x.timeDay.count(x.timeYear(ht),ht),ut,3)}function j(ht,ut){return s(ht.getMilliseconds(),ut,3)}function G(ht,ut){return j(ht,ut)+"000"}function W(ht,ut){return s(ht.getMonth()+1,ut,2)}function ie(ht,ut){return s(ht.getMinutes(),ut,2)}function q(ht,ut){return s(ht.getSeconds(),ut,2)}function te(ht){var ut=ht.getDay();return 0===ut?7:ut}function ne(ht,ut){return s(x.timeSunday.count(x.timeYear(ht)-1,ht),ut,2)}function le(ht,ut){var Ot=ht.getDay();return ht=Ot>=4||0===Ot?x.timeThursday(ht):x.timeThursday.ceil(ht),s(x.timeThursday.count(x.timeYear(ht),ht)+(4===x.timeYear(ht).getDay()),ut,2)}function ue(ht){return ht.getDay()}function de(ht,ut){return s(x.timeMonday.count(x.timeYear(ht)-1,ht),ut,2)}function he(ht,ut){return s(ht.getFullYear()%100,ut,2)}function be(ht,ut){return s(ht.getFullYear()%1e4,ut,4)}function ge(ht){var ut=ht.getTimezoneOffset();return(ut>0?"-":(ut*=-1,"+"))+s(ut/60|0,"0",2)+s(ut%60,"0",2)}function we(ht,ut){return s(ht.getUTCDate(),ut,2)}function Ce(ht,ut){return s(ht.getUTCHours(),ut,2)}function De(ht,ut){return s(ht.getUTCHours()%12||12,ut,2)}function Se(ht,ut){return s(1+x.utcDay.count(x.utcYear(ht),ht),ut,3)}function Fe(ht,ut){return s(ht.getUTCMilliseconds(),ut,3)}function ve(ht,ut){return Fe(ht,ut)+"000"}function Te(ht,ut){return s(ht.getUTCMonth()+1,ut,2)}function Le(ht,ut){return s(ht.getUTCMinutes(),ut,2)}function Ee(ht,ut){return s(ht.getUTCSeconds(),ut,2)}function Pe(ht){var ut=ht.getUTCDay();return 0===ut?7:ut}function je(ht,ut){return s(x.utcSunday.count(x.utcYear(ht)-1,ht),ut,2)}function Ge(ht,ut){var Ot=ht.getUTCDay();return ht=Ot>=4||0===Ot?x.utcThursday(ht):x.utcThursday.ceil(ht),s(x.utcThursday.count(x.utcYear(ht),ht)+(4===x.utcYear(ht).getUTCDay()),ut,2)}function Ke(ht){return ht.getUTCDay()}function lt(ht,ut){return s(x.utcMonday.count(x.utcYear(ht)-1,ht),ut,2)}function Ue(ht,ut){return s(ht.getUTCFullYear()%100,ut,2)}function $e(ht,ut){return s(ht.getUTCFullYear()%1e4,ut,4)}function et(){return"+0000"}function tt(){return"%"}function ct(ht){return+ht}function xt(ht){return Math.floor(+ht/1e3)}function Ct(ht){return a=o(ht),m.timeFormat=a.format,m.timeParse=a.parse,m.utcFormat=a.utcFormat,m.utcParse=a.utcParse,a}Ct({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Ht=Date.prototype.toISOString?function(ht){return ht.toISOString()}:m.utcFormat("%Y-%m-%dT%H:%M:%S.%LZ"),zt=+new Date("2000-01-01T00:00:00.000Z")?function(ht){var ut=new Date(ht);return isNaN(ut)?null:ut}:m.utcParse("%Y-%m-%dT%H:%M:%S.%LZ");m.isoFormat=Ht,m.isoParse=zt,m.timeFormatDefaultLocale=Ct,m.timeFormatLocale=o,Object.defineProperty(m,"__esModule",{value:!0})},"object"==typeof ae&&void 0!==oe?x(ae,_("d3-time")):x((m=m||self).d3=m.d3||{},m.d3)},{"d3-time":121}],121:[function(_,oe,ae){var m,x;m=this,x=function(m){"use strict";var x=new Date,T=new Date;function b(Te,Le,Ee,Pe){function je(Ge){return Te(Ge=0===arguments.length?new Date:new Date(+Ge)),Ge}return je.floor=function(Ge){return Te(Ge=new Date(+Ge)),Ge},je.ceil=function(Ge){return Te(Ge=new Date(Ge-1)),Le(Ge,1),Te(Ge),Ge},je.round=function(Ge){var Ke=je(Ge),lt=je.ceil(Ge);return Ge-Ke<lt-Ge?Ke:lt},je.offset=function(Ge,Ke){return Le(Ge=new Date(+Ge),null==Ke?1:Math.floor(Ke)),Ge},je.range=function(Ge,Ke,lt){var Ue,$e=[];if(Ge=je.ceil(Ge),lt=null==lt?1:Math.floor(lt),!(Ge<Ke&&lt>0))return $e;do{$e.push(Ue=new Date(+Ge)),Le(Ge,lt),Te(Ge)}while(Ue<Ge&&Ge<Ke);return $e},je.filter=function(Ge){return b(function(Ke){if(Ke>=Ke)for(;Te(Ke),!Ge(Ke);)Ke.setTime(Ke-1)},function(Ke,lt){if(Ke>=Ke)if(lt<0)for(;++lt<=0;)for(;Le(Ke,-1),!Ge(Ke););else for(;--lt>=0;)for(;Le(Ke,1),!Ge(Ke););})},Ee&&(je.count=function(Ge,Ke){return x.setTime(+Ge),T.setTime(+Ke),Te(x),Te(T),Math.floor(Ee(x,T))},je.every=function(Ge){return Ge=Math.floor(Ge),isFinite(Ge)&&Ge>0?Ge>1?je.filter(Pe?function(Ke){return Pe(Ke)%Ge==0}:function(Ke){return je.count(0,Ke)%Ge==0}):je:null}),je}var e=b(function(){},function(Te,Le){Te.setTime(+Te+Le)},function(Te,Le){return Le-Te});e.every=function(Te){return Te=Math.floor(Te),isFinite(Te)&&Te>0?Te>1?b(function(Le){Le.setTime(Math.floor(Le/Te)*Te)},function(Le,Ee){Le.setTime(+Le+Ee*Te)},function(Le,Ee){return(Ee-Le)/Te}):e:null};var o=e.range,a=b(function(Te){Te.setTime(Te-Te.getMilliseconds())},function(Te,Le){Te.setTime(+Te+1e3*Le)},function(Te,Le){return(Le-Te)/1e3},function(Te){return Te.getUTCSeconds()}),l=a.range,i=b(function(Te){Te.setTime(Te-Te.getMilliseconds()-1e3*Te.getSeconds())},function(Te,Le){Te.setTime(+Te+6e4*Le)},function(Te,Le){return(Le-Te)/6e4},function(Te){return Te.getMinutes()}),d=i.range,u=b(function(Te){Te.setTime(Te-Te.getMilliseconds()-1e3*Te.getSeconds()-6e4*Te.getMinutes())},function(Te,Le){Te.setTime(+Te+36e5*Le)},function(Te,Le){return(Le-Te)/36e5},function(Te){return Te.getHours()}),s=u.range,c=b(function(Te){Te.setHours(0,0,0,0)},function(Te,Le){Te.setDate(Te.getDate()+Le)},function(Te,Le){return(Le-Te-6e4*(Le.getTimezoneOffset()-Te.getTimezoneOffset()))/864e5},function(Te){return Te.getDate()-1}),h=c.range;function p(Te){return b(function(Le){Le.setDate(Le.getDate()-(Le.getDay()+7-Te)%7),Le.setHours(0,0,0,0)},function(Le,Ee){Le.setDate(Le.getDate()+7*Ee)},function(Le,Ee){return(Ee-Le-6e4*(Ee.getTimezoneOffset()-Le.getTimezoneOffset()))/6048e5})}var v=p(0),g=p(1),f=p(2),w=p(3),y=p(4),M=p(5),A=p(6),k=v.range,C=g.range,P=f.range,D=w.range,F=y.range,R=M.range,L=A.range,I=b(function(Te){Te.setDate(1),Te.setHours(0,0,0,0)},function(Te,Le){Te.setMonth(Te.getMonth()+Le)},function(Te,Le){return Le.getMonth()-Te.getMonth()+12*(Le.getFullYear()-Te.getFullYear())},function(Te){return Te.getMonth()}),B=I.range,V=b(function(Te){Te.setMonth(0,1),Te.setHours(0,0,0,0)},function(Te,Le){Te.setFullYear(Te.getFullYear()+Le)},function(Te,Le){return Le.getFullYear()-Te.getFullYear()},function(Te){return Te.getFullYear()});V.every=function(Te){return isFinite(Te=Math.floor(Te))&&Te>0?b(function(Le){Le.setFullYear(Math.floor(Le.getFullYear()/Te)*Te),Le.setMonth(0,1),Le.setHours(0,0,0,0)},function(Le,Ee){Le.setFullYear(Le.getFullYear()+Ee*Te)}):null};var Z=V.range,Y=b(function(Te){Te.setUTCSeconds(0,0)},function(Te,Le){Te.setTime(+Te+6e4*Le)},function(Te,Le){return(Le-Te)/6e4},function(Te){return Te.getUTCMinutes()}),ee=Y.range,J=b(function(Te){Te.setUTCMinutes(0,0,0)},function(Te,Le){Te.setTime(+Te+36e5*Le)},function(Te,Le){return(Le-Te)/36e5},function(Te){return Te.getUTCHours()}),$=J.range,Q=b(function(Te){Te.setUTCHours(0,0,0,0)},function(Te,Le){Te.setUTCDate(Te.getUTCDate()+Le)},function(Te,Le){return(Le-Te)/864e5},function(Te){return Te.getUTCDate()-1}),se=Q.range;function j(Te){return b(function(Le){Le.setUTCDate(Le.getUTCDate()-(Le.getUTCDay()+7-Te)%7),Le.setUTCHours(0,0,0,0)},function(Le,Ee){Le.setUTCDate(Le.getUTCDate()+7*Ee)},function(Le,Ee){return(Ee-Le)/6048e5})}var G=j(0),W=j(1),ie=j(2),q=j(3),te=j(4),ne=j(5),le=j(6),ue=G.range,de=W.range,he=ie.range,be=q.range,ge=te.range,we=ne.range,Ce=le.range,De=b(function(Te){Te.setUTCDate(1),Te.setUTCHours(0,0,0,0)},function(Te,Le){Te.setUTCMonth(Te.getUTCMonth()+Le)},function(Te,Le){return Le.getUTCMonth()-Te.getUTCMonth()+12*(Le.getUTCFullYear()-Te.getUTCFullYear())},function(Te){return Te.getUTCMonth()}),Se=De.range,Fe=b(function(Te){Te.setUTCMonth(0,1),Te.setUTCHours(0,0,0,0)},function(Te,Le){Te.setUTCFullYear(Te.getUTCFullYear()+Le)},function(Te,Le){return Le.getUTCFullYear()-Te.getUTCFullYear()},function(Te){return Te.getUTCFullYear()});Fe.every=function(Te){return isFinite(Te=Math.floor(Te))&&Te>0?b(function(Le){Le.setUTCFullYear(Math.floor(Le.getUTCFullYear()/Te)*Te),Le.setUTCMonth(0,1),Le.setUTCHours(0,0,0,0)},function(Le,Ee){Le.setUTCFullYear(Le.getUTCFullYear()+Ee*Te)}):null};var ve=Fe.range;m.timeDay=c,m.timeDays=h,m.timeFriday=M,m.timeFridays=R,m.timeHour=u,m.timeHours=s,m.timeInterval=b,m.timeMillisecond=e,m.timeMilliseconds=o,m.timeMinute=i,m.timeMinutes=d,m.timeMonday=g,m.timeMondays=C,m.timeMonth=I,m.timeMonths=B,m.timeSaturday=A,m.timeSaturdays=L,m.timeSecond=a,m.timeSeconds=l,m.timeSunday=v,m.timeSundays=k,m.timeThursday=y,m.timeThursdays=F,m.timeTuesday=f,m.timeTuesdays=P,m.timeWednesday=w,m.timeWednesdays=D,m.timeWeek=v,m.timeWeeks=k,m.timeYear=V,m.timeYears=Z,m.utcDay=Q,m.utcDays=se,m.utcFriday=ne,m.utcFridays=we,m.utcHour=J,m.utcHours=$,m.utcMillisecond=e,m.utcMilliseconds=o,m.utcMinute=Y,m.utcMinutes=ee,m.utcMonday=W,m.utcMondays=de,m.utcMonth=De,m.utcMonths=Se,m.utcSaturday=le,m.utcSaturdays=Ce,m.utcSecond=a,m.utcSeconds=l,m.utcSunday=G,m.utcSundays=ue,m.utcThursday=te,m.utcThursdays=ge,m.utcTuesday=ie,m.utcTuesdays=he,m.utcWednesday=q,m.utcWednesdays=be,m.utcWeek=G,m.utcWeeks=ue,m.utcYear=Fe,m.utcYears=ve,Object.defineProperty(m,"__esModule",{value:!0})},x("object"==typeof ae&&void 0!==oe?ae:(m=m||self).d3=m.d3||{})},{}],122:[function(_,oe,ae){arguments[4][121][0].apply(ae,arguments)},{dup:121}],123:[function(_,oe,ae){var m,x;m=this,x=function(m){"use strict";var x,T,b=0,e=0,o=0,a=0,l=0,i=0,d="object"==typeof performance&&performance.now?performance:Date,u="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(y){setTimeout(y,17)};function s(){return l||(u(c),l=d.now()+i)}function c(){l=0}function h(){this._call=this._time=this._next=null}function p(y,M,A){var k=new h;return k.restart(y,M,A),k}function v(){s(),++b;for(var y,M=x;M;)(y=l-M._time)>=0&&M._call.call(null,y),M=M._next;--b}function g(){l=(a=d.now())+i,b=e=0;try{v()}finally{b=0,function(){for(var y,M,A=x,k=1/0;A;)A._call?(k>A._time&&(k=A._time),y=A,A=A._next):(M=A._next,A._next=null,A=y?y._next=M:x=M);T=y,w(k)}(),l=0}}function f(){var y=d.now(),M=y-a;M>1e3&&(i-=M,a=y)}function w(y){b||(e&&(e=clearTimeout(e)),y-l>24?(y<1/0&&(e=setTimeout(g,y-d.now()-i)),o&&(o=clearInterval(o))):(o||(a=d.now(),o=setInterval(f,1e3)),b=1,u(g)))}h.prototype=p.prototype={constructor:h,restart:function(y,M,A){if("function"!=typeof y)throw new TypeError("callback is not a function");A=(null==A?s():+A)+(null==M?0:+M),this._next||T===this||(T?T._next=this:x=this,T=this),this._call=y,this._time=A,w()},stop:function(){this._call&&(this._call=null,this._time=1/0,w())}},m.interval=function(y,M,A){var k=new h,C=M;return null==M?(k.restart(y,M,A),k):(M=+M,A=null==A?s():+A,k.restart(function P(D){D+=C,k.restart(P,C+=M,A),y(D)},M,A),k)},m.now=s,m.timeout=function(y,M,A){var k=new h;return k.restart(function(C){k.stop(),y(C+M)},M=null==M?0:+M,A),k},m.timer=p,m.timerFlush=v,Object.defineProperty(m,"__esModule",{value:!0})},x("object"==typeof ae&&void 0!==oe?ae:(m=m||self).d3=m.d3||{})},{}],124:[function(_,oe,ae){oe.exports=function(){for(var m=0;m<arguments.length;m++)if(void 0!==arguments[m])return arguments[m]}},{}],125:[function(_,oe,ae){"use strict";oe.exports=T;var m=(T.canvas=document.createElement("canvas")).getContext("2d"),x=b([32,126]);function T(e,o){Array.isArray(e)&&(e=e.join(", "));var a,l={},i=16,d=.05;o&&(2===o.length&&"number"==typeof o[0]?a=b(o):Array.isArray(o)?a=o:(o.o?a=b(o.o):o.pairs&&(a=o.pairs),o.fontSize&&(i=o.fontSize),null!=o.threshold&&(d=o.threshold))),a||(a=x),m.font=i+"px "+e;for(var u=0;u<a.length;u++){var s=a[u],c=m.measureText(s[0]).width+m.measureText(s[1]).width,h=m.measureText(s).width;Math.abs(c-h)>i*d&&(l[s]=(h-c)/i*1e3)}return l}function b(e){for(var o=[],a=e[0];a<=e[1];a++)for(var l=String.fromCharCode(a),i=e[0];i<e[1];i++){var d=l+String.fromCharCode(i);o.push(d)}return o}T.createPairs=b,T.ascii=x},{}],126:[function(_,oe,ae){var m=_("abs-svg-path"),x=_("normalize-svg-path"),T={M:"moveTo",C:"bezierCurveTo"};oe.exports=function(b,e){b.beginPath(),x(m(e)).forEach(function(o){var a=o[0],l=o.slice(1);b[T[a]].apply(b,l)}),b.closePath()}},{"abs-svg-path":70,"normalize-svg-path":246}],127:[function(_,oe,ae){oe.exports=function(m){switch(m){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},{}],128:[function(_,oe,ae){"use strict";oe.exports=function(m,x){switch(void 0===x&&(x=0),typeof m){case"number":if(m>0)return function(T,b){var e,o;for(e=new Array(T),o=0;o<T;++o)e[o]=b;return e}(0|m,x);break;case"object":if("number"==typeof m.length)return function T(b,e,o){var a=0|b[o];if(a<=0)return[];var l,i=new Array(a);if(o===b.length-1)for(l=0;l<a;++l)i[l]=e;else for(l=0;l<a;++l)i[l]=T(b,e,o+1);return i}(m,x,0)}return[]}},{}],129:[function(_,oe,ae){"use strict";function m(F,R,L){L=L||2;var I,B,V,Z,Y,ee,J,$=R&&R.length,Q=$?R[0]*L:F.length,se=x(F,0,Q,L,!0),j=[];if(!se||se.next===se.prev)return j;if($&&(se=function(W,ie,q,te){var ne,le,he,be=[];for(ne=0,le=ie.length;ne<le;ne++)(he=x(W,ie[ne]*te,ne<le-1?ie[ne+1]*te:W.length,te,!1))===he.next&&(he.steiner=!0),be.push(c(he));for(be.sort(i),ne=0;ne<be.length;ne++)d(be[ne],q),q=T(q,q.next);return q}(F,R,se,L)),F.length>80*L){I=V=F[0],B=Z=F[1];for(var G=L;G<Q;G+=L)(Y=F[G])<I&&(I=Y),(ee=F[G+1])<B&&(B=ee),Y>V&&(V=Y),ee>Z&&(Z=ee);J=0!==(J=Math.max(V-I,Z-B))?1/J:0}return b(se,j,L,I,B,J),j}function x(F,R,L,I,B){var V,Z;if(B===D(F,R,L,I)>0)for(V=R;V<L;V+=I)Z=k(V,F[V],F[V+1],Z);else for(V=L-I;V>=R;V-=I)Z=k(V,F[V],F[V+1],Z);return Z&&g(Z,Z.next)&&(C(Z),Z=Z.next),Z}function T(F,R){if(!F)return F;R||(R=F);var L,I=F;do{if(L=!1,I.steiner||!g(I,I.next)&&0!==v(I.prev,I,I.next))I=I.next;else{if(C(I),(I=R=I.prev)===I.next)break;L=!0}}while(L||I!==R);return R}function b(F,R,L,I,B,V,Z){if(F){!Z&&V&&function($,Q,se,j){var G=$;do{null===G.z&&(G.z=s(G.x,G.y,Q,se,j)),G.prevZ=G.prev,G.nextZ=G.next,G=G.next}while(G!==$);G.prevZ.nextZ=null,G.prevZ=null,function(W){var ie,q,te,ne,le,ue,de,he,be=1;do{for(q=W,W=null,le=null,ue=0;q;){for(ue++,te=q,de=0,ie=0;ie<be&&(de++,te=te.nextZ);ie++);for(he=be;de>0||he>0&&te;)0!==de&&(0===he||!te||q.z<=te.z)?(ne=q,q=q.nextZ,de--):(ne=te,te=te.nextZ,he--),le?le.nextZ=ne:W=ne,ne.prevZ=le,le=ne;q=te}le.nextZ=null,be*=2}while(ue>1)}(G)}(F,I,B,V);for(var Y,ee,J=F;F.prev!==F.next;)if(Y=F.prev,ee=F.next,V?o(F,I,B,V):e(F))R.push(Y.i/L),R.push(F.i/L),R.push(ee.i/L),C(F),F=ee.next,J=ee.next;else if((F=ee)===J){Z?1===Z?b(F=a(T(F),R,L),R,L,I,B,V,2):2===Z&&l(F,R,L,I,B,V):b(T(F),R,L,I,B,V,1);break}}}function e(F){var R=F.prev,L=F,I=F.next;if(v(R,L,I)>=0)return!1;for(var B=F.next.next;B!==F.prev;){if(h(R.x,R.y,L.x,L.y,I.x,I.y,B.x,B.y)&&v(B.prev,B,B.next)>=0)return!1;B=B.next}return!0}function o(F,R,L,I){var B=F.prev,V=F,Z=F.next;if(v(B,V,Z)>=0)return!1;for(var J=B.x>V.x?B.x>Z.x?B.x:Z.x:V.x>Z.x?V.x:Z.x,$=B.y>V.y?B.y>Z.y?B.y:Z.y:V.y>Z.y?V.y:Z.y,Q=s(B.x<V.x?B.x<Z.x?B.x:Z.x:V.x<Z.x?V.x:Z.x,B.y<V.y?B.y<Z.y?B.y:Z.y:V.y<Z.y?V.y:Z.y,R,L,I),se=s(J,$,R,L,I),j=F.prevZ,G=F.nextZ;j&&j.z>=Q&&G&&G.z<=se;){if(j!==F.prev&&j!==F.next&&h(B.x,B.y,V.x,V.y,Z.x,Z.y,j.x,j.y)&&v(j.prev,j,j.next)>=0||(j=j.prevZ,G!==F.prev&&G!==F.next&&h(B.x,B.y,V.x,V.y,Z.x,Z.y,G.x,G.y)&&v(G.prev,G,G.next)>=0))return!1;G=G.nextZ}for(;j&&j.z>=Q;){if(j!==F.prev&&j!==F.next&&h(B.x,B.y,V.x,V.y,Z.x,Z.y,j.x,j.y)&&v(j.prev,j,j.next)>=0)return!1;j=j.prevZ}for(;G&&G.z<=se;){if(G!==F.prev&&G!==F.next&&h(B.x,B.y,V.x,V.y,Z.x,Z.y,G.x,G.y)&&v(G.prev,G,G.next)>=0)return!1;G=G.nextZ}return!0}function a(F,R,L){var I=F;do{var B=I.prev,V=I.next.next;!g(B,V)&&f(B,I,I.next,V)&&M(B,V)&&M(V,B)&&(R.push(B.i/L),R.push(I.i/L),R.push(V.i/L),C(I),C(I.next),I=F=V),I=I.next}while(I!==F);return T(I)}function l(F,R,L,I,B,V){var Z=F;do{for(var Y=Z.next.next;Y!==Z.prev;){if(Z.i!==Y.i&&p(Z,Y)){var ee=A(Z,Y);return Z=T(Z,Z.next),ee=T(ee,ee.next),b(Z,R,L,I,B,V),void b(ee,R,L,I,B,V)}Y=Y.next}Z=Z.next}while(Z!==F)}function i(F,R){return F.x-R.x}function d(F,R){if(R=function(I,B){var V,Z=B,Y=I.x,ee=I.y,J=-1/0;do{if(ee<=Z.y&&ee>=Z.next.y&&Z.next.y!==Z.y){var $=Z.x+(ee-Z.y)*(Z.next.x-Z.x)/(Z.next.y-Z.y);if($<=Y&&$>J){if(J=$,$===Y){if(ee===Z.y)return Z;if(ee===Z.next.y)return Z.next}V=Z.x<Z.next.x?Z:Z.next}}Z=Z.next}while(Z!==B);if(!V)return null;if(Y===J)return V;var Q,se=V,j=V.x,G=V.y,W=1/0;Z=V;do{Y>=Z.x&&Z.x>=j&&Y!==Z.x&&h(ee<G?Y:J,ee,j,G,ee<G?J:Y,ee,Z.x,Z.y)&&(Q=Math.abs(ee-Z.y)/(Y-Z.x),M(Z,I)&&(Q<W||Q===W&&(Z.x>V.x||Z.x===V.x&&u(V,Z)))&&(V=Z,W=Q)),Z=Z.next}while(Z!==se);return V}(F,R)){var L=A(R,F);T(R,R.next),T(L,L.next)}}function u(F,R){return v(F.prev,F,R.prev)<0&&v(R.next,F,F.next)<0}function s(F,R,L,I,B){return(F=1431655765&((F=858993459&((F=252645135&((F=16711935&((F=32767*(F-L)*B)|F<<8))|F<<4))|F<<2))|F<<1))|(R=1431655765&((R=858993459&((R=252645135&((R=16711935&((R=32767*(R-I)*B)|R<<8))|R<<4))|R<<2))|R<<1))<<1}function c(F){var R=F,L=F;do{(R.x<L.x||R.x===L.x&&R.y<L.y)&&(L=R),R=R.next}while(R!==F);return L}function h(F,R,L,I,B,V,Z,Y){return(B-Z)*(R-Y)-(F-Z)*(V-Y)>=0&&(F-Z)*(I-Y)-(L-Z)*(R-Y)>=0&&(L-Z)*(V-Y)-(B-Z)*(I-Y)>=0}function p(F,R){return F.next.i!==R.i&&F.prev.i!==R.i&&!function(L,I){var B=L;do{if(B.i!==L.i&&B.next.i!==L.i&&B.i!==I.i&&B.next.i!==I.i&&f(B,B.next,L,I))return!0;B=B.next}while(B!==L);return!1}(F,R)&&(M(F,R)&&M(R,F)&&function(L,I){var B=L,V=!1,Z=(L.x+I.x)/2,Y=(L.y+I.y)/2;do{B.y>Y!=B.next.y>Y&&B.next.y!==B.y&&Z<(B.next.x-B.x)*(Y-B.y)/(B.next.y-B.y)+B.x&&(V=!V),B=B.next}while(B!==L);return V}(F,R)&&(v(F.prev,F,R.prev)||v(F,R.prev,R))||g(F,R)&&v(F.prev,F,F.next)>0&&v(R.prev,R,R.next)>0)}function v(F,R,L){return(R.y-F.y)*(L.x-R.x)-(R.x-F.x)*(L.y-R.y)}function g(F,R){return F.x===R.x&&F.y===R.y}function f(F,R,L,I){var B=y(v(F,R,L)),V=y(v(F,R,I)),Z=y(v(L,I,F)),Y=y(v(L,I,R));return B!==V&&Z!==Y||!(0!==B||!w(F,L,R))||!(0!==V||!w(F,I,R))||!(0!==Z||!w(L,F,I))||!(0!==Y||!w(L,R,I))}function w(F,R,L){return R.x<=Math.max(F.x,L.x)&&R.x>=Math.min(F.x,L.x)&&R.y<=Math.max(F.y,L.y)&&R.y>=Math.min(F.y,L.y)}function y(F){return F>0?1:F<0?-1:0}function M(F,R){return v(F.prev,F,F.next)<0?v(F,R,F.next)>=0&&v(F,F.prev,R)>=0:v(F,R,F.prev)<0||v(F,F.next,R)<0}function A(F,R){var L=new P(F.i,F.x,F.y),I=new P(R.i,R.x,R.y),B=F.next,V=R.prev;return F.next=R,R.prev=F,L.next=B,B.prev=L,I.next=L,L.prev=I,V.next=I,I.prev=V,I}function k(F,R,L,I){var B=new P(F,R,L);return I?(B.next=I.next,B.prev=I,I.next.prev=B,I.next=B):(B.prev=B,B.next=B),B}function C(F){F.next.prev=F.prev,F.prev.next=F.next,F.prevZ&&(F.prevZ.nextZ=F.nextZ),F.nextZ&&(F.nextZ.prevZ=F.prevZ)}function P(F,R,L){this.i=F,this.x=R,this.y=L,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function D(F,R,L,I){for(var B=0,V=R,Z=L-I;V<L;V+=I)B+=(F[Z]-F[V])*(F[V+1]+F[Z+1]),Z=V;return B}oe.exports=m,oe.exports.default=m,m.deviation=function(F,R,L,I){var B=R&&R.length,Z=Math.abs(D(F,0,B?R[0]*L:F.length,L));if(B)for(var Y=0,ee=R.length;Y<ee;Y++)Z-=Math.abs(D(F,R[Y]*L,Y<ee-1?R[Y+1]*L:F.length,L));var Q=0;for(Y=0;Y<I.length;Y+=3){var se=I[Y]*L,j=I[Y+1]*L,G=I[Y+2]*L;Q+=Math.abs((F[se]-F[G])*(F[j+1]-F[se+1])-(F[se]-F[j])*(F[G+1]-F[se+1]))}return 0===Z&&0===Q?0:Math.abs((Q-Z)/Z)},m.flatten=function(F){for(var R=F[0][0].length,L={vertices:[],holes:[],dimensions:R},I=0,B=0;B<F.length;B++){for(var V=0;V<F[B].length;V++)for(var Z=0;Z<R;Z++)L.vertices.push(F[B][V][Z]);B>0&&L.holes.push(I+=F[B-1].length)}return L}},{}],130:[function(_,oe,ae){var m=_("strongly-connected-components");oe.exports=function(x,T){var b,e=[],o=[],a=[],l={},i=[];function d(f){var w,y,M=!1;for(o.push(f),a[f]=!0,w=0;w<i[f].length;w++)(y=i[f][w])===b?(u(b,o),M=!0):a[y]||(M=d(y));if(M)!function k(C){a[C]=!1,l.hasOwnProperty(C)&&Object.keys(l[C]).forEach(function(P){delete l[C][P],a[P]&&k(P)})}(f);else for(w=0;w<i[f].length;w++){var A=l[y=i[f][w]];A||(l[y]=A={}),A[y]=!0}return o.pop(),M}function u(f,w){var y=[].concat(w).concat(f);T?T(d):e.push(y)}function s(f){!function(P){for(var D=0;D<x.length;D++)D<P&&(x[D]=[]),x[D]=x[D].filter(function(F){return F>=P})}(f);for(var w,y=m(x).components.filter(function(P){return P.length>1}),M=1/0,A=0;A<y.length;A++)for(var k=0;k<y[A].length;k++)y[A][k]<M&&(M=y[A][k],w=A);var C=y[w];return!!C&&{leastVertex:M,adjList:x.map(function(P,D){return-1===C.indexOf(D)?[]:P.filter(function(F){return-1!==C.indexOf(F)})})}}b=0;for(var c=x.length;b<c;){var h=s(b);if(b=h.leastVertex,i=h.adjList){for(var p=0;p<i.length;p++)for(var v=0;v<i[p].length;v++){var g=i[p][v];a[+g]=!1,l[g]={}}d(b),b+=1}else b=c}return T?void 0:e}},{"strongly-connected-components":306}],131:[function(_,oe,ae){"use strict";var m=_("../../object/valid-value");oe.exports=function(){return m(this).length=0,this}},{"../../object/valid-value":162}],132:[function(_,oe,ae){"use strict";oe.exports=_("./is-implemented")()?Array.from:_("./shim")},{"./is-implemented":133,"./shim":134}],133:[function(_,oe,ae){"use strict";oe.exports=function(){var m,x,T=Array.from;return"function"==typeof T&&(x=T(m=["raz","dwa"]),Boolean(x&&x!==m&&"dwa"===x[1]))}},{}],134:[function(_,oe,ae){"use strict";var m=_("es6-symbol").iterator,x=_("../../function/is-arguments"),T=_("../../function/is-function"),b=_("../../number/to-pos-integer"),e=_("../../object/valid-callable"),o=_("../../object/valid-value"),a=_("../../object/is-value"),l=_("../../string/is-string"),i=Array.isArray,d=Function.prototype.call,u={configurable:!0,enumerable:!0,writable:!0,value:null},s=Object.defineProperty;oe.exports=function(c){var h,p,v,g,f,w,y,M,A,k,C=arguments[1],P=arguments[2];if(c=Object(o(c)),a(C)&&e(C),this&&this!==Array&&T(this))h=this;else{if(!C){if(x(c))return 1!==(f=c.length)?Array.apply(null,c):((g=new Array(1))[0]=c[0],g);if(i(c)){for(g=new Array(f=c.length),p=0;p<f;++p)g[p]=c[p];return g}}g=[]}if(!i(c))if(void 0!==(A=c[m])){for(y=e(A).call(c),h&&(g=new h),M=y.next(),p=0;!M.done;)k=C?d.call(C,P,M.value,p):M.value,h?(u.value=k,s(g,p,u)):g[p]=k,M=y.next(),++p;f=p}else if(l(c)){for(f=c.length,h&&(g=new h),p=0,v=0;p<f;++p)k=c[p],p+1<f&&(w=k.charCodeAt(0))>=55296&&w<=56319&&(k+=c[++p]),k=C?d.call(C,P,k,v):k,h?(u.value=k,s(g,v,u)):g[v]=k,++v;f=v}if(void 0===f)for(f=b(c.length),h&&(g=new h(f)),p=0;p<f;++p)k=C?d.call(C,P,c[p],p):c[p],h?(u.value=k,s(g,p,u)):g[p]=k;return h&&(u.value=null,g.length=f),g}},{"../../function/is-arguments":135,"../../function/is-function":136,"../../number/to-pos-integer":142,"../../object/is-value":151,"../../object/valid-callable":160,"../../object/valid-value":162,"../../string/is-string":166,"es6-symbol":175}],135:[function(_,oe,ae){"use strict";var m=Object.prototype.toString,x=m.call(function(){return arguments}());oe.exports=function(T){return m.call(T)===x}},{}],136:[function(_,oe,ae){"use strict";var m=Object.prototype.toString,x=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);oe.exports=function(T){return"function"==typeof T&&x(m.call(T))}},{}],137:[function(_,oe,ae){"use strict";oe.exports=function(){}},{}],138:[function(_,oe,ae){"use strict";oe.exports=_("./is-implemented")()?Math.sign:_("./shim")},{"./is-implemented":139,"./shim":140}],139:[function(_,oe,ae){"use strict";oe.exports=function(){var m=Math.sign;return"function"==typeof m&&1===m(10)&&-1===m(-20)}},{}],140:[function(_,oe,ae){"use strict";oe.exports=function(m){return m=Number(m),isNaN(m)||0===m?m:m>0?1:-1}},{}],141:[function(_,oe,ae){"use strict";var m=_("../math/sign"),x=Math.abs,T=Math.floor;oe.exports=function(b){return isNaN(b)?0:0!==(b=Number(b))&&isFinite(b)?m(b)*T(x(b)):b}},{"../math/sign":138}],142:[function(_,oe,ae){"use strict";var m=_("./to-integer"),x=Math.max;oe.exports=function(T){return x(0,m(T))}},{"./to-integer":141}],143:[function(_,oe,ae){"use strict";var m=_("./valid-callable"),x=_("./valid-value"),T=Function.prototype.bind,b=Function.prototype.call,e=Object.keys,o=Object.prototype.propertyIsEnumerable;oe.exports=function(a,l){return function(i,d){var u,s=arguments[2],c=arguments[3];return i=Object(x(i)),m(d),u=e(i),c&&u.sort("function"==typeof c?T.call(c,i):void 0),"function"!=typeof a&&(a=u[a]),b.call(a,u,function(h,p){return o.call(i,h)?b.call(d,s,i[h],h,i,p):l})}}},{"./valid-callable":160,"./valid-value":162}],144:[function(_,oe,ae){"use strict";oe.exports=_("./is-implemented")()?Object.assign:_("./shim")},{"./is-implemented":145,"./shim":146}],145:[function(_,oe,ae){"use strict";oe.exports=function(){var m,x=Object.assign;return"function"==typeof x&&(x(m={foo:"raz"},{bar:"dwa"},{trzy:"trzy"}),m.foo+m.bar+m.trzy==="razdwatrzy")}},{}],146:[function(_,oe,ae){"use strict";var m=_("../keys"),x=_("../valid-value"),T=Math.max;oe.exports=function(b,e){var o,a,l,i=T(arguments.length,2);for(b=Object(x(b)),l=function(d){try{b[d]=e[d]}catch(u){o||(o=u)}},a=1;a<i;++a)m(e=arguments[a]).forEach(l);if(void 0!==o)throw o;return b}},{"../keys":152,"../valid-value":162}],147:[function(_,oe,ae){"use strict";var m=_("../array/from"),x=_("./assign"),T=_("./valid-value");oe.exports=function(b){var e=Object(T(b)),o=arguments[1],a=Object(arguments[2]);if(e!==b&&!o)return e;var l={};return o?m(o,function(i){(a.ensure||i in b)&&(l[i]=b[i])}):x(l,b),l}},{"../array/from":132,"./assign":144,"./valid-value":162}],148:[function(_,oe,ae){"use strict";var m,x,T,b,e=Object.create;_("./set-prototype-of/is-implemented")()||(m=_("./set-prototype-of/shim")),oe.exports=m?1!==m.level?e:(x={},T={},b={configurable:!1,enumerable:!1,writable:!0,value:void 0},Object.getOwnPropertyNames(Object.prototype).forEach(function(o){T[o]="__proto__"!==o?b:{configurable:!0,enumerable:!1,writable:!0,value:void 0}}),Object.defineProperties(x,T),Object.defineProperty(m,"nullPolyfill",{configurable:!1,enumerable:!1,writable:!1,value:x}),function(o,a){return e(null===o?x:o,a)}):e},{"./set-prototype-of/is-implemented":158,"./set-prototype-of/shim":159}],149:[function(_,oe,ae){"use strict";oe.exports=_("./_iterate")("forEach")},{"./_iterate":143}],150:[function(_,oe,ae){"use strict";var m=_("./is-value"),x={function:!0,object:!0};oe.exports=function(T){return m(T)&&x[typeof T]||!1}},{"./is-value":151}],151:[function(_,oe,ae){"use strict";var m=_("../function/noop")();oe.exports=function(x){return x!==m&&null!==x}},{"../function/noop":137}],152:[function(_,oe,ae){"use strict";oe.exports=_("./is-implemented")()?Object.keys:_("./shim")},{"./is-implemented":153,"./shim":154}],153:[function(_,oe,ae){"use strict";oe.exports=function(){try{return Object.keys("primitive"),!0}catch(m){return!1}}},{}],154:[function(_,oe,ae){"use strict";var m=_("../is-value"),x=Object.keys;oe.exports=function(T){return x(m(T)?Object(T):T)}},{"../is-value":151}],155:[function(_,oe,ae){"use strict";var m=_("./valid-callable"),x=_("./for-each"),T=Function.prototype.call;oe.exports=function(b,e){var o={},a=arguments[2];return m(e),x(b,function(l,i,d,u){o[i]=T.call(e,a,l,i,d,u)}),o}},{"./for-each":149,"./valid-callable":160}],156:[function(_,oe,ae){"use strict";var m=_("./is-value"),x=Array.prototype.forEach,T=Object.create,b=function(e,o){var a;for(a in e)o[a]=e[a]};oe.exports=function(e){var o=T(null);return x.call(arguments,function(a){m(a)&&b(Object(a),o)}),o}},{"./is-value":151}],157:[function(_,oe,ae){"use strict";oe.exports=_("./is-implemented")()?Object.setPrototypeOf:_("./shim")},{"./is-implemented":158,"./shim":159}],158:[function(_,oe,ae){"use strict";var m=Object.create,x=Object.getPrototypeOf,T={};oe.exports=function(){var b=Object.setPrototypeOf;return"function"==typeof b&&x(b((arguments[0]||m)(null),T))===T}},{}],159:[function(_,oe,ae){"use strict";var m,a,l,i,x=_("../is-object"),T=_("../valid-value"),b=Object.prototype.isPrototypeOf,e=Object.defineProperty,o={configurable:!0,enumerable:!1,writable:!0,value:void 0};m=function(a,l){if(T(a),null===l||x(l))return a;throw new TypeError("Prototype must be null or an object")},oe.exports=(a=function(){var a,l=Object.create(null),i={},d=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__");if(d){try{(a=d.set).call(l,i)}catch(u){}if(Object.getPrototypeOf(l)===i)return{set:a,level:2}}return l.__proto__=i,Object.getPrototypeOf(l)===i?{level:2}:((l={}).__proto__=i,Object.getPrototypeOf(l)===i&&{level:1})}(),a?(2===a.level?a.set?(i=a.set,l=function(d,u){return i.call(m(d,u),u),d}):l=function(d,u){return m(d,u).__proto__=u,d}:l=function d(u,s){var c;return m(u,s),(c=b.call(d.nullPolyfill,u))&&delete d.nullPolyfill.__proto__,null===s&&(s=d.nullPolyfill),u.__proto__=s,c&&e(d.nullPolyfill,"__proto__",o),u},Object.defineProperty(l,"level",{configurable:!1,enumerable:!1,writable:!1,value:a.level})):null),_("../create")},{"../create":148,"../is-object":150,"../valid-value":162}],160:[function(_,oe,ae){"use strict";oe.exports=function(m){if("function"!=typeof m)throw new TypeError(m+" is not a function");return m}},{}],161:[function(_,oe,ae){"use strict";var m=_("./is-object");oe.exports=function(x){if(!m(x))throw new TypeError(x+" is not an Object");return x}},{"./is-object":150}],162:[function(_,oe,ae){"use strict";var m=_("./is-value");oe.exports=function(x){if(!m(x))throw new TypeError("Cannot use null or undefined");return x}},{"./is-value":151}],163:[function(_,oe,ae){"use strict";oe.exports=_("./is-implemented")()?String.prototype.contains:_("./shim")},{"./is-implemented":164,"./shim":165}],164:[function(_,oe,ae){"use strict";var m="razdwatrzy";oe.exports=function(){return"function"==typeof m.contains&&!0===m.contains("dwa")&&!1===m.contains("foo")}},{}],165:[function(_,oe,ae){"use strict";var m=String.prototype.indexOf;oe.exports=function(x){return m.call(this,x,arguments[1])>-1}},{}],166:[function(_,oe,ae){"use strict";var m=Object.prototype.toString,x=m.call("");oe.exports=function(T){return"string"==typeof T||T&&"object"==typeof T&&(T instanceof String||m.call(T)===x)||!1}},{}],167:[function(_,oe,ae){"use strict";var m=Object.create(null),x=Math.random;oe.exports=function(){var T;do{T=x().toString(36).slice(2)}while(m[T]);return T}},{}],168:[function(_,oe,ae){"use strict";var m,x=_("es5-ext/object/set-prototype-of"),T=_("es5-ext/string/#/contains"),b=_("d"),e=_("es6-symbol"),o=_("./"),a=Object.defineProperty;m=oe.exports=function(l,i){if(!(this instanceof m))throw new TypeError("Constructor requires 'new'");o.call(this,l),i=i?T.call(i,"key+value")?"key+value":T.call(i,"key")?"key":"value":"value",a(this,"__kind__",b("",i))},x&&x(m,o),delete m.prototype.constructor,m.prototype=Object.create(o.prototype,{_resolve:b(function(l){return"value"===this.__kind__?this.__list__[l]:"key+value"===this.__kind__?[l,this.__list__[l]]:l})}),a(m.prototype,e.toStringTag,b("c","Array Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es5-ext/string/#/contains":163,"es6-symbol":175}],169:[function(_,oe,ae){"use strict";var m=_("es5-ext/function/is-arguments"),x=_("es5-ext/object/valid-callable"),T=_("es5-ext/string/is-string"),b=_("./get"),e=Array.isArray,o=Function.prototype.call,a=Array.prototype.some;oe.exports=function(l,i){var d,u,s,c,h,p,v,g,f=arguments[2];if(e(l)||m(l)?d="array":T(l)?d="string":l=b(l),x(i),s=function(){c=!0},"array"!==d)if("string"!==d)for(u=l.next();!u.done;){if(o.call(i,f,u.value,s),c)return;u=l.next()}else for(p=l.length,h=0;h<p&&(v=l[h],h+1<p&&(g=v.charCodeAt(0))>=55296&&g<=56319&&(v+=l[++h]),o.call(i,f,v,s),!c);++h);else a.call(l,function(w){return o.call(i,f,w,s),c})}},{"./get":170,"es5-ext/function/is-arguments":135,"es5-ext/object/valid-callable":160,"es5-ext/string/is-string":166}],170:[function(_,oe,ae){"use strict";var m=_("es5-ext/function/is-arguments"),x=_("es5-ext/string/is-string"),T=_("./array"),b=_("./string"),e=_("./valid-iterable"),o=_("es6-symbol").iterator;oe.exports=function(a){return"function"==typeof e(a)[o]?a[o]():m(a)?new T(a):x(a)?new b(a):new T(a)}},{"./array":168,"./string":173,"./valid-iterable":174,"es5-ext/function/is-arguments":135,"es5-ext/string/is-string":166,"es6-symbol":175}],171:[function(_,oe,ae){"use strict";var m,x=_("es5-ext/array/#/clear"),T=_("es5-ext/object/assign"),b=_("es5-ext/object/valid-callable"),e=_("es5-ext/object/valid-value"),o=_("d"),a=_("d/auto-bind"),l=_("es6-symbol"),i=Object.defineProperty,d=Object.defineProperties;oe.exports=m=function(u,s){if(!(this instanceof m))throw new TypeError("Constructor requires 'new'");d(this,{__list__:o("w",e(u)),__context__:o("w",s),__nextIndex__:o("w",0)}),s&&(b(s.on),s.on("_add",this._onAdd),s.on("_delete",this._onDelete),s.on("_clear",this._onClear))},delete m.prototype.constructor,d(m.prototype,T({_next:o(function(){var u;if(this.__list__)return this.__redo__&&void 0!==(u=this.__redo__.shift())?u:this.__nextIndex__<this.__list__.length?this.__nextIndex__++:void this._unBind()}),next:o(function(){return this._createResult(this._next())}),_createResult:o(function(u){return void 0===u?{done:!0,value:void 0}:{done:!1,value:this._resolve(u)}}),_resolve:o(function(u){return this.__list__[u]}),_unBind:o(function(){this.__list__=null,delete this.__redo__,this.__context__&&(this.__context__.off("_add",this._onAdd),this.__context__.off("_delete",this._onDelete),this.__context__.off("_clear",this._onClear),this.__context__=null)}),toString:o(function(){return"[object "+(this[l.toStringTag]||"Object")+"]"})},a({_onAdd:o(function(u){u>=this.__nextIndex__||(++this.__nextIndex__,this.__redo__?(this.__redo__.forEach(function(s,c){s>=u&&(this.__redo__[c]=++s)},this),this.__redo__.push(u)):i(this,"__redo__",o("c",[u])))}),_onDelete:o(function(u){var s;u>=this.__nextIndex__||(--this.__nextIndex__,this.__redo__&&(-1!==(s=this.__redo__.indexOf(u))&&this.__redo__.splice(s,1),this.__redo__.forEach(function(c,h){c>u&&(this.__redo__[h]=--c)},this)))}),_onClear:o(function(){this.__redo__&&x.call(this.__redo__),this.__nextIndex__=0})}))),i(m.prototype,l.iterator,o(function(){return this}))},{d:106,"d/auto-bind":105,"es5-ext/array/#/clear":131,"es5-ext/object/assign":144,"es5-ext/object/valid-callable":160,"es5-ext/object/valid-value":162,"es6-symbol":175}],172:[function(_,oe,ae){"use strict";var m=_("es5-ext/function/is-arguments"),x=_("es5-ext/object/is-value"),T=_("es5-ext/string/is-string"),b=_("es6-symbol").iterator,e=Array.isArray;oe.exports=function(o){return!(!x(o)||!e(o)&&!T(o)&&!m(o)&&"function"!=typeof o[b])}},{"es5-ext/function/is-arguments":135,"es5-ext/object/is-value":151,"es5-ext/string/is-string":166,"es6-symbol":175}],173:[function(_,oe,ae){"use strict";var m,x=_("es5-ext/object/set-prototype-of"),T=_("d"),b=_("es6-symbol"),e=_("./"),o=Object.defineProperty;m=oe.exports=function(a){if(!(this instanceof m))throw new TypeError("Constructor requires 'new'");a=String(a),e.call(this,a),o(this,"__length__",T("",a.length))},x&&x(m,e),delete m.prototype.constructor,m.prototype=Object.create(e.prototype,{_next:T(function(){if(this.__list__)return this.__nextIndex__<this.__length__?this.__nextIndex__++:void this._unBind()}),_resolve:T(function(a){var l,i=this.__list__[a];return this.__nextIndex__===this.__length__?i:(l=i.charCodeAt(0))>=55296&&l<=56319?i+this.__list__[this.__nextIndex__++]:i})}),o(m.prototype,b.toStringTag,T("c","String Iterator"))},{"./":171,d:106,"es5-ext/object/set-prototype-of":157,"es6-symbol":175}],174:[function(_,oe,ae){"use strict";var m=_("./is-iterable");oe.exports=function(x){if(!m(x))throw new TypeError(x+" is not iterable");return x}},{"./is-iterable":172}],175:[function(_,oe,ae){"use strict";oe.exports=_("./is-implemented")()?_("ext/global-this").Symbol:_("./polyfill")},{"./is-implemented":176,"./polyfill":181,"ext/global-this":188}],176:[function(_,oe,ae){"use strict";var m=_("ext/global-this"),x={object:!0,symbol:!0};oe.exports=function(){var T,b=m.Symbol;if("function"!=typeof b)return!1;T=b("test symbol");try{String(T)}catch(e){return!1}return!!x[typeof b.iterator]&&!!x[typeof b.toPrimitive]&&!!x[typeof b.toStringTag]}},{"ext/global-this":188}],177:[function(_,oe,ae){"use strict";oe.exports=function(m){return!!m&&("symbol"==typeof m||!!m.constructor&&"Symbol"===m.constructor.name&&"Symbol"===m[m.constructor.toStringTag])}},{}],178:[function(_,oe,ae){"use strict";var m=_("d"),T=Object.defineProperty,b=Object.prototype,e=(0,Object.create)(null);oe.exports=function(o){for(var a,l,i=0;e[o+(i||"")];)++i;return e[o+=i||""]=!0,T(b,a="@@"+o,m.gs(null,function(d){l||(l=!0,T(this,a,m(d)),l=!1)})),a}},{d:106}],179:[function(_,oe,ae){"use strict";var m=_("d"),x=_("ext/global-this").Symbol;oe.exports=function(T){return Object.defineProperties(T,{hasInstance:m("",x&&x.hasInstance||T("hasInstance")),isConcatSpreadable:m("",x&&x.isConcatSpreadable||T("isConcatSpreadable")),iterator:m("",x&&x.iterator||T("iterator")),match:m("",x&&x.match||T("match")),replace:m("",x&&x.replace||T("replace")),search:m("",x&&x.search||T("search")),species:m("",x&&x.species||T("species")),split:m("",x&&x.split||T("split")),toPrimitive:m("",x&&x.toPrimitive||T("toPrimitive")),toStringTag:m("",x&&x.toStringTag||T("toStringTag")),unscopables:m("",x&&x.unscopables||T("unscopables"))})}},{d:106,"ext/global-this":188}],180:[function(_,oe,ae){"use strict";var m=_("d"),x=_("../../../validate-symbol"),T=Object.create(null);oe.exports=function(b){return Object.defineProperties(b,{for:m(function(e){return T[e]?T[e]:T[e]=b(String(e))}),keyFor:m(function(e){var o;for(o in x(e),T)if(T[o]===e)return o})})}},{"../../../validate-symbol":182,d:106}],181:[function(_,oe,ae){"use strict";var m,x,T,b=_("d"),e=_("./validate-symbol"),o=_("ext/global-this").Symbol,a=_("./lib/private/generate-name"),l=_("./lib/private/setup/standard-symbols"),i=_("./lib/private/setup/symbol-registry"),d=Object.create,u=Object.defineProperties,s=Object.defineProperty;if("function"==typeof o)try{String(o()),T=!0}catch(c){}else o=null;x=function(c){if(this instanceof x)throw new TypeError("Symbol is not a constructor");return m(c)},oe.exports=m=function c(h){var p;if(this instanceof c)throw new TypeError("Symbol is not a constructor");return T?o(h):(p=d(x.prototype),h=void 0===h?"":String(h),u(p,{__description__:b("",h),__name__:b("",a(h))}))},l(m),i(m),u(x.prototype,{constructor:b(m),toString:b("",function(){return this.__name__})}),u(m.prototype,{toString:b(function(){return"Symbol ("+e(this).__description__+")"}),valueOf:b(function(){return e(this)})}),s(m.prototype,m.toPrimitive,b("",function(){var c=e(this);return"symbol"==typeof c?c:c.toString()})),s(m.prototype,m.toStringTag,b("c","Symbol")),s(x.prototype,m.toStringTag,b("c",m.prototype[m.toStringTag])),s(x.prototype,m.toPrimitive,b("c",m.prototype[m.toPrimitive]))},{"./lib/private/generate-name":178,"./lib/private/setup/standard-symbols":179,"./lib/private/setup/symbol-registry":180,"./validate-symbol":182,d:106,"ext/global-this":188}],182:[function(_,oe,ae){"use strict";var m=_("./is-symbol");oe.exports=function(x){if(!m(x))throw new TypeError(x+" is not a symbol");return x}},{"./is-symbol":177}],183:[function(_,oe,ae){"use strict";oe.exports=_("./is-implemented")()?WeakMap:_("./polyfill")},{"./is-implemented":184,"./polyfill":186}],184:[function(_,oe,ae){"use strict";oe.exports=function(){var m,x;if("function"!=typeof WeakMap)return!1;try{m=new WeakMap([[x={},"one"],[{},"two"],[{},"three"]])}catch(T){return!1}return"[object WeakMap]"===String(m)&&"function"==typeof m.set&&m.set({},1)===m&&"function"==typeof m.delete&&"function"==typeof m.has&&"one"===m.get(x)}},{}],185:[function(_,oe,ae){"use strict";oe.exports="function"==typeof WeakMap&&"[object WeakMap]"===Object.prototype.toString.call(new WeakMap)},{}],186:[function(_,oe,ae){"use strict";var m,x=_("es5-ext/object/is-value"),T=_("es5-ext/object/set-prototype-of"),b=_("es5-ext/object/valid-object"),e=_("es5-ext/object/valid-value"),o=_("es5-ext/string/random-uniq"),a=_("d"),l=_("es6-iterator/get"),i=_("es6-iterator/for-of"),d=_("es6-symbol").toStringTag,u=_("./is-native-implemented"),s=Array.isArray,c=Object.defineProperty,h=Object.prototype.hasOwnProperty,p=Object.getPrototypeOf;oe.exports=m=function(){var v,g=arguments[0];if(!(this instanceof m))throw new TypeError("Constructor requires 'new'");return v=u&&T&&WeakMap!==m?T(new WeakMap,p(this)):this,x(g)&&(s(g)||(g=l(g))),c(v,"__weakMapData__",a("c","$weakMap$"+o())),g&&i(g,function(f){e(f),v.set(f[0],f[1])}),v},u&&(T&&T(m,WeakMap),m.prototype=Object.create(WeakMap.prototype,{constructor:a(m)})),Object.defineProperties(m.prototype,{delete:a(function(v){return!!h.call(b(v),this.__weakMapData__)&&(delete v[this.__weakMapData__],!0)}),get:a(function(v){if(h.call(b(v),this.__weakMapData__))return v[this.__weakMapData__]}),has:a(function(v){return h.call(b(v),this.__weakMapData__)}),set:a(function(v,g){return c(b(v),this.__weakMapData__,a("c",g)),this}),toString:a(function(){return"[object WeakMap]"})}),c(m.prototype,d,a("c","WeakMap"))},{"./is-native-implemented":185,d:106,"es5-ext/object/is-value":151,"es5-ext/object/set-prototype-of":157,"es5-ext/object/valid-object":161,"es5-ext/object/valid-value":162,"es5-ext/string/random-uniq":167,"es6-iterator/for-of":169,"es6-iterator/get":170,"es6-symbol":175}],187:[function(_,oe,ae){var m=function(){if("object"==typeof self&&self)return self;if("object"==typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};oe.exports=function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(x){return m()}try{return __global__||m()}finally{delete Object.prototype.__global__}}()},{}],188:[function(_,oe,ae){"use strict";oe.exports=_("./is-implemented")()?globalThis:_("./implementation")},{"./implementation":187,"./is-implemented":189}],189:[function(_,oe,ae){"use strict";oe.exports=function(){return"object"==typeof globalThis&&!!globalThis&&globalThis.Array===Array}},{}],190:[function(_,oe,ae){"use strict";var m=_("is-string-blank");oe.exports=function(x){var T=typeof x;if("string"===T){var b=x;if(0==(x=+x)&&m(b))return!1}else if("number"!==T)return!1;return x-x<1}},{"is-string-blank":237}],191:[function(_,oe,ae){var m=_("dtype");oe.exports=function(x,T,b){if(!x)throw new TypeError("must specify data as first parameter");if(b=0|+(b||0),Array.isArray(x)&&x[0]&&"number"==typeof x[0][0]){var e,o,a,l,i=x[0].length,d=x.length*i;T&&"string"!=typeof T||(T=new(m(T||"float32"))(d+b));var u=T.length-b;if(d!==u)throw new Error("source length "+d+" ("+i+"x"+x.length+") does not match destination length "+u);for(e=0,a=b;e<x.length;e++)for(o=0;o<i;o++)T[a++]=null===x[e][o]?NaN:x[e][o]}else if(T&&"string"!=typeof T)T.set(x,b);else{var s=m(T||"float32");if(Array.isArray(x)||"array"===T)for(e=0,a=b,l=(T=new s(x.length+b)).length;a<l;a++,e++)T[a]=null===x[e]?NaN:x[e];else 0===b?T=new s(x):(T=new s(x.length+b)).set(x,b)}return T}},{dtype:127}],192:[function(_,oe,ae){"use strict";var m=_("css-font/stringify"),x=[32,126];oe.exports=function(T){var b=(T=T||{}).shape?T.shape:T.canvas?[T.canvas.width,T.canvas.height]:[512,512],e=T.canvas||document.createElement("canvas"),o=T.font,a="number"==typeof T.step?[T.step,T.step]:T.step||[32,32],l=T.chars||x;if(o&&"string"!=typeof o&&(o=m(o)),Array.isArray(l)){if(2===l.length&&"number"==typeof l[0]&&"number"==typeof l[1]){for(var i=[],d=l[0],u=0;d<=l[1];d++)i[u++]=String.fromCharCode(d);l=i}}else l=String(l).split("");b=b.slice(),e.width=b[0],e.height=b[1];var s=e.getContext("2d");s.fillStyle="#000",s.fillRect(0,0,e.width,e.height),s.font=o,s.textAlign="center",s.textBaseline="middle",s.fillStyle="#fff";var c=a[0]/2,h=a[1]/2;for(d=0;d<l.length;d++)s.fillText(l[d],c,h),(c+=a[0])>b[0]-a[0]/2&&(c=a[0]/2,h+=a[1]);return e}},{"css-font/stringify":102}],193:[function(_,oe,ae){"use strict";function m(e,o){o||(o={}),("string"==typeof e||Array.isArray(e))&&(o.family=e);var a=Array.isArray(o.family)?o.family.join(", "):o.family;if(!a)throw Error("`family` must be defined");var l=o.size||o.fontSize||o.em||48,d=(e=[o.style||o.fontStyle||"",o.weight||o.fontWeight||"",l].join(" ")+"px "+a,o.origin||"top");if(m.cache[a]&&l<=m.cache[a].em)return x(m.cache[a],d);var u=o.canvas||m.canvas,s=u.getContext("2d"),c={upper:void 0!==o.upper?o.upper:"H",lower:void 0!==o.lower?o.lower:"x",descent:void 0!==o.descent?o.descent:"p",ascent:void 0!==o.ascent?o.ascent:"h",tittle:void 0!==o.tittle?o.tittle:"i",overshoot:void 0!==o.overshoot?o.overshoot:"O"},h=Math.ceil(1.5*l);u.height=h,u.width=.5*h,s.font=e;var p={top:0};s.clearRect(0,0,h,h),s.textBaseline="top",s.fillStyle="black",s.fillText("H",0,0);var v=T(s.getImageData(0,0,h,h));s.clearRect(0,0,h,h),s.textBaseline="bottom",s.fillText("H",0,h);var g=T(s.getImageData(0,0,h,h));p.lineHeight=p.bottom=h-g+v,s.clearRect(0,0,h,h),s.textBaseline="alphabetic",s.fillText("H",0,h);var f=h-T(s.getImageData(0,0,h,h))-1+v;p.baseline=p.alphabetic=f,s.clearRect(0,0,h,h),s.textBaseline="middle",s.fillText("H",0,.5*h);var w=T(s.getImageData(0,0,h,h));p.median=p.middle=h-w-1+v-.5*h,s.clearRect(0,0,h,h),s.textBaseline="hanging",s.fillText("H",0,.5*h);var y=T(s.getImageData(0,0,h,h));p.hanging=h-y-1+v-.5*h,s.clearRect(0,0,h,h),s.textBaseline="ideographic",s.fillText("H",0,h);var M=T(s.getImageData(0,0,h,h));if(p.ideographic=h-M-1+v,c.upper&&(s.clearRect(0,0,h,h),s.textBaseline="top",s.fillText(c.upper,0,0),p.upper=T(s.getImageData(0,0,h,h)),p.capHeight=p.baseline-p.upper),c.lower&&(s.clearRect(0,0,h,h),s.textBaseline="top",s.fillText(c.lower,0,0),p.lower=T(s.getImageData(0,0,h,h)),p.xHeight=p.baseline-p.lower),c.tittle&&(s.clearRect(0,0,h,h),s.textBaseline="top",s.fillText(c.tittle,0,0),p.tittle=T(s.getImageData(0,0,h,h))),c.ascent&&(s.clearRect(0,0,h,h),s.textBaseline="top",s.fillText(c.ascent,0,0),p.ascent=T(s.getImageData(0,0,h,h))),c.descent&&(s.clearRect(0,0,h,h),s.textBaseline="top",s.fillText(c.descent,0,0),p.descent=b(s.getImageData(0,0,h,h))),c.overshoot){s.clearRect(0,0,h,h),s.textBaseline="top",s.fillText(c.overshoot,0,0);var A=b(s.getImageData(0,0,h,h));p.overshoot=A-f}for(var k in p)p[k]/=l;return p.em=l,m.cache[a]=p,x(p,d)}function x(e,o){var a={};for(var l in"string"==typeof o&&(o=e[o]),e)"em"!==l&&(a[l]=e[l]-o);return a}function T(e){for(var o=e.height,a=e.data,l=3;l<a.length;l+=4)if(0!==a[l])return Math.floor(.25*(l-3)/o)}function b(e){for(var o=e.height,a=e.data,l=a.length-1;l>0;l-=4)if(0!==a[l])return Math.floor(.25*(l-3)/o)}oe.exports=m,m.canvas=document.createElement("canvas"),m.cache={}},{}],194:[function(_,oe,ae){oe.exports=function(m,x){if("string"!=typeof m)throw new TypeError("must specify type string");if(x=x||{},"undefined"==typeof document&&!x.canvas)return null;var T=x.canvas||document.createElement("canvas");"number"==typeof x.width&&(T.width=x.width),"number"==typeof x.height&&(T.height=x.height);var b,e=x;try{var o=[m];0===m.indexOf("webgl")&&o.push("experimental-"+m);for(var a=0;a<o.length;a++)if(b=T.getContext(o[a],e))return b}catch(l){b=null}return b||null}},{}],195:[function(_,oe,ae){oe.exports=function(m,x){var T=x[0],b=x[1],e=x[2],o=x[3],a=x[4],l=x[5],i=x[6],d=x[7],u=x[8],s=x[9],c=x[10],h=x[11],p=x[12],v=x[13],g=x[14],f=x[15];return m[0]=l*(c*f-h*g)-s*(i*f-d*g)+v*(i*h-d*c),m[1]=-(b*(c*f-h*g)-s*(e*f-o*g)+v*(e*h-o*c)),m[2]=b*(i*f-d*g)-l*(e*f-o*g)+v*(e*d-o*i),m[3]=-(b*(i*h-d*c)-l*(e*h-o*c)+s*(e*d-o*i)),m[4]=-(a*(c*f-h*g)-u*(i*f-d*g)+p*(i*h-d*c)),m[5]=T*(c*f-h*g)-u*(e*f-o*g)+p*(e*h-o*c),m[6]=-(T*(i*f-d*g)-a*(e*f-o*g)+p*(e*d-o*i)),m[7]=T*(i*h-d*c)-a*(e*h-o*c)+u*(e*d-o*i),m[8]=a*(s*f-h*v)-u*(l*f-d*v)+p*(l*h-d*s),m[9]=-(T*(s*f-h*v)-u*(b*f-o*v)+p*(b*h-o*s)),m[10]=T*(l*f-d*v)-a*(b*f-o*v)+p*(b*d-o*l),m[11]=-(T*(l*h-d*s)-a*(b*h-o*s)+u*(b*d-o*l)),m[12]=-(a*(s*g-c*v)-u*(l*g-i*v)+p*(l*c-i*s)),m[13]=T*(s*g-c*v)-u*(b*g-e*v)+p*(b*c-e*s),m[14]=-(T*(l*g-i*v)-a*(b*g-e*v)+p*(b*i-e*l)),m[15]=T*(l*c-i*s)-a*(b*c-e*s)+u*(b*i-e*l),m}},{}],196:[function(_,oe,ae){oe.exports=function(m){var x=new Float32Array(16);return x[0]=m[0],x[1]=m[1],x[2]=m[2],x[3]=m[3],x[4]=m[4],x[5]=m[5],x[6]=m[6],x[7]=m[7],x[8]=m[8],x[9]=m[9],x[10]=m[10],x[11]=m[11],x[12]=m[12],x[13]=m[13],x[14]=m[14],x[15]=m[15],x}},{}],197:[function(_,oe,ae){oe.exports=function(m,x){return m[0]=x[0],m[1]=x[1],m[2]=x[2],m[3]=x[3],m[4]=x[4],m[5]=x[5],m[6]=x[6],m[7]=x[7],m[8]=x[8],m[9]=x[9],m[10]=x[10],m[11]=x[11],m[12]=x[12],m[13]=x[13],m[14]=x[14],m[15]=x[15],m}},{}],198:[function(_,oe,ae){oe.exports=function(){var m=new Float32Array(16);return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],199:[function(_,oe,ae){oe.exports=function(m){var x=m[0],T=m[1],b=m[2],e=m[3],o=m[4],a=m[5],l=m[6],i=m[7],d=m[8],u=m[9],s=m[10],c=m[11],h=m[12],p=m[13],v=m[14],g=m[15];return(x*a-T*o)*(s*g-c*v)-(x*l-b*o)*(u*g-c*p)+(x*i-e*o)*(u*v-s*p)+(T*l-b*a)*(d*g-c*h)-(T*i-e*a)*(d*v-s*h)+(b*i-e*l)*(d*p-u*h)}},{}],200:[function(_,oe,ae){oe.exports=function(m,x){var T=x[0],b=x[1],e=x[2],o=x[3],a=T+T,l=b+b,i=e+e,d=T*a,u=b*a,s=b*l,c=e*a,h=e*l,p=e*i,v=o*a,g=o*l,f=o*i;return m[0]=1-s-p,m[1]=u+f,m[2]=c-g,m[3]=0,m[4]=u-f,m[5]=1-d-p,m[6]=h+v,m[7]=0,m[8]=c+g,m[9]=h-v,m[10]=1-d-s,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],201:[function(_,oe,ae){oe.exports=function(m,x,T){var b,e,o,a=T[0],l=T[1],i=T[2],d=Math.sqrt(a*a+l*l+i*i);return Math.abs(d)<1e-6?null:(a*=d=1/d,l*=d,i*=d,b=Math.sin(x),e=Math.cos(x),m[0]=a*a*(o=1-e)+e,m[1]=l*a*o+i*b,m[2]=i*a*o-l*b,m[3]=0,m[4]=a*l*o-i*b,m[5]=l*l*o+e,m[6]=i*l*o+a*b,m[7]=0,m[8]=a*i*o+l*b,m[9]=l*i*o-a*b,m[10]=i*i*o+e,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m)}},{}],202:[function(_,oe,ae){oe.exports=function(m,x,T){var b=x[0],e=x[1],o=x[2],a=x[3],l=b+b,i=e+e,d=o+o,u=b*l,s=b*i,c=b*d,h=e*i,p=e*d,v=o*d,g=a*l,f=a*i,w=a*d;return m[0]=1-(h+v),m[1]=s+w,m[2]=c-f,m[3]=0,m[4]=s-w,m[5]=1-(u+v),m[6]=p+g,m[7]=0,m[8]=c+f,m[9]=p-g,m[10]=1-(u+h),m[11]=0,m[12]=T[0],m[13]=T[1],m[14]=T[2],m[15]=1,m}},{}],203:[function(_,oe,ae){oe.exports=function(m,x){return m[0]=x[0],m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=x[1],m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=x[2],m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],204:[function(_,oe,ae){oe.exports=function(m,x){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=x[0],m[13]=x[1],m[14]=x[2],m[15]=1,m}},{}],205:[function(_,oe,ae){oe.exports=function(m,x){var T=Math.sin(x),b=Math.cos(x);return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=b,m[6]=T,m[7]=0,m[8]=0,m[9]=-T,m[10]=b,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],206:[function(_,oe,ae){oe.exports=function(m,x){var T=Math.sin(x),b=Math.cos(x);return m[0]=b,m[1]=0,m[2]=-T,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=T,m[9]=0,m[10]=b,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],207:[function(_,oe,ae){oe.exports=function(m,x){var T=Math.sin(x),b=Math.cos(x);return m[0]=b,m[1]=T,m[2]=0,m[3]=0,m[4]=-T,m[5]=b,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],208:[function(_,oe,ae){oe.exports=function(m,x,T,b,e,o,a){var l=1/(T-x),i=1/(e-b),d=1/(o-a);return m[0]=2*o*l,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=2*o*i,m[6]=0,m[7]=0,m[8]=(T+x)*l,m[9]=(e+b)*i,m[10]=(a+o)*d,m[11]=-1,m[12]=0,m[13]=0,m[14]=a*o*2*d,m[15]=0,m}},{}],209:[function(_,oe,ae){oe.exports=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=1,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=1,m[11]=0,m[12]=0,m[13]=0,m[14]=0,m[15]=1,m}},{}],210:[function(_,oe,ae){oe.exports={create:_("./create"),clone:_("./clone"),copy:_("./copy"),identity:_("./identity"),transpose:_("./transpose"),invert:_("./invert"),adjoint:_("./adjoint"),determinant:_("./determinant"),multiply:_("./multiply"),translate:_("./translate"),scale:_("./scale"),rotate:_("./rotate"),rotateX:_("./rotateX"),rotateY:_("./rotateY"),rotateZ:_("./rotateZ"),fromRotation:_("./fromRotation"),fromRotationTranslation:_("./fromRotationTranslation"),fromScaling:_("./fromScaling"),fromTranslation:_("./fromTranslation"),fromXRotation:_("./fromXRotation"),fromYRotation:_("./fromYRotation"),fromZRotation:_("./fromZRotation"),fromQuat:_("./fromQuat"),frustum:_("./frustum"),perspective:_("./perspective"),perspectiveFromFieldOfView:_("./perspectiveFromFieldOfView"),ortho:_("./ortho"),lookAt:_("./lookAt"),str:_("./str")}},{"./adjoint":195,"./clone":196,"./copy":197,"./create":198,"./determinant":199,"./fromQuat":200,"./fromRotation":201,"./fromRotationTranslation":202,"./fromScaling":203,"./fromTranslation":204,"./fromXRotation":205,"./fromYRotation":206,"./fromZRotation":207,"./frustum":208,"./identity":209,"./invert":211,"./lookAt":212,"./multiply":213,"./ortho":214,"./perspective":215,"./perspectiveFromFieldOfView":216,"./rotate":217,"./rotateX":218,"./rotateY":219,"./rotateZ":220,"./scale":221,"./str":222,"./translate":223,"./transpose":224}],211:[function(_,oe,ae){oe.exports=function(m,x){var T=x[0],b=x[1],e=x[2],o=x[3],a=x[4],l=x[5],i=x[6],d=x[7],u=x[8],s=x[9],c=x[10],h=x[11],p=x[12],v=x[13],g=x[14],f=x[15],w=T*l-b*a,y=T*i-e*a,M=T*d-o*a,A=b*i-e*l,k=b*d-o*l,C=e*d-o*i,P=u*v-s*p,D=u*g-c*p,F=u*f-h*p,R=s*g-c*v,L=s*f-h*v,I=c*f-h*g,B=w*I-y*L+M*R+A*F-k*D+C*P;return B?(m[0]=(l*I-i*L+d*R)*(B=1/B),m[1]=(e*L-b*I-o*R)*B,m[2]=(v*C-g*k+f*A)*B,m[3]=(c*k-s*C-h*A)*B,m[4]=(i*F-a*I-d*D)*B,m[5]=(T*I-e*F+o*D)*B,m[6]=(g*M-p*C-f*y)*B,m[7]=(u*C-c*M+h*y)*B,m[8]=(a*L-l*F+d*P)*B,m[9]=(b*F-T*L-o*P)*B,m[10]=(p*k-v*M+f*w)*B,m[11]=(s*M-u*k-h*w)*B,m[12]=(l*D-a*R-i*P)*B,m[13]=(T*R-b*D+e*P)*B,m[14]=(v*y-p*A-g*w)*B,m[15]=(u*A-s*y+c*w)*B,m):null}},{}],212:[function(_,oe,ae){var m=_("./identity");oe.exports=function(x,T,b,e){var o,a,l,i,d,u,s,c,h,p,v=T[0],g=T[1],f=T[2],w=e[0],y=e[1],M=e[2],A=b[0],k=b[1],C=b[2];return Math.abs(v-A)<1e-6&&Math.abs(g-k)<1e-6&&Math.abs(f-C)<1e-6?m(x):(s=v-A,c=g-k,h=f-C,o=y*(h*=p=1/Math.sqrt(s*s+c*c+h*h))-M*(c*=p),a=M*(s*=p)-w*h,l=w*c-y*s,(p=Math.sqrt(o*o+a*a+l*l))?(o*=p=1/p,a*=p,l*=p):(o=0,a=0,l=0),i=c*l-h*a,d=h*o-s*l,u=s*a-c*o,(p=Math.sqrt(i*i+d*d+u*u))?(i*=p=1/p,d*=p,u*=p):(i=0,d=0,u=0),x[0]=o,x[1]=i,x[2]=s,x[3]=0,x[4]=a,x[5]=d,x[6]=c,x[7]=0,x[8]=l,x[9]=u,x[10]=h,x[11]=0,x[12]=-(o*v+a*g+l*f),x[13]=-(i*v+d*g+u*f),x[14]=-(s*v+c*g+h*f),x[15]=1,x)}},{"./identity":209}],213:[function(_,oe,ae){oe.exports=function(m,x,T){var b=x[0],e=x[1],o=x[2],a=x[3],l=x[4],i=x[5],d=x[6],u=x[7],s=x[8],c=x[9],h=x[10],p=x[11],v=x[12],g=x[13],f=x[14],w=x[15],y=T[0],M=T[1],A=T[2],k=T[3];return m[0]=y*b+M*l+A*s+k*v,m[1]=y*e+M*i+A*c+k*g,m[2]=y*o+M*d+A*h+k*f,m[3]=y*a+M*u+A*p+k*w,m[4]=(y=T[4])*b+(M=T[5])*l+(A=T[6])*s+(k=T[7])*v,m[5]=y*e+M*i+A*c+k*g,m[6]=y*o+M*d+A*h+k*f,m[7]=y*a+M*u+A*p+k*w,m[8]=(y=T[8])*b+(M=T[9])*l+(A=T[10])*s+(k=T[11])*v,m[9]=y*e+M*i+A*c+k*g,m[10]=y*o+M*d+A*h+k*f,m[11]=y*a+M*u+A*p+k*w,m[12]=(y=T[12])*b+(M=T[13])*l+(A=T[14])*s+(k=T[15])*v,m[13]=y*e+M*i+A*c+k*g,m[14]=y*o+M*d+A*h+k*f,m[15]=y*a+M*u+A*p+k*w,m}},{}],214:[function(_,oe,ae){oe.exports=function(m,x,T,b,e,o,a){var l=1/(x-T),i=1/(b-e),d=1/(o-a);return m[0]=-2*l,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=-2*i,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=2*d,m[11]=0,m[12]=(x+T)*l,m[13]=(e+b)*i,m[14]=(a+o)*d,m[15]=1,m}},{}],215:[function(_,oe,ae){oe.exports=function(m,x,T,b,e){var o=1/Math.tan(x/2),a=1/(b-e);return m[0]=o/T,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=o,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=(e+b)*a,m[11]=-1,m[12]=0,m[13]=0,m[14]=2*e*b*a,m[15]=0,m}},{}],216:[function(_,oe,ae){oe.exports=function(m,x,T,b){var e=Math.tan(x.upDegrees*Math.PI/180),o=Math.tan(x.downDegrees*Math.PI/180),a=Math.tan(x.leftDegrees*Math.PI/180),l=Math.tan(x.rightDegrees*Math.PI/180),i=2/(a+l),d=2/(e+o);return m[0]=i,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=d,m[6]=0,m[7]=0,m[8]=-(a-l)*i*.5,m[9]=(e-o)*d*.5,m[10]=b/(T-b),m[11]=-1,m[12]=0,m[13]=0,m[14]=b*T/(T-b),m[15]=0,m}},{}],217:[function(_,oe,ae){oe.exports=function(m,x,T,b){var e,o,a,l,i,d,u,s,c,h,p,v,g,f,w,y,M,A,k,C,P,D,F,R,L=b[0],I=b[1],B=b[2],V=Math.sqrt(L*L+I*I+B*B);return Math.abs(V)<1e-6?null:(L*=V=1/V,I*=V,B*=V,e=Math.sin(T),o=Math.cos(T),i=x[1],d=x[2],u=x[3],c=x[5],h=x[6],p=x[7],g=x[9],f=x[10],w=x[11],k=L*I*(a=1-o)-B*e,C=I*I*a+o,P=B*I*a+L*e,D=L*B*a+I*e,F=I*B*a-L*e,R=B*B*a+o,m[0]=(l=x[0])*(y=L*L*a+o)+(s=x[4])*(M=I*L*a+B*e)+(v=x[8])*(A=B*L*a-I*e),m[1]=i*y+c*M+g*A,m[2]=d*y+h*M+f*A,m[3]=u*y+p*M+w*A,m[4]=l*k+s*C+v*P,m[5]=i*k+c*C+g*P,m[6]=d*k+h*C+f*P,m[7]=u*k+p*C+w*P,m[8]=l*D+s*F+v*R,m[9]=i*D+c*F+g*R,m[10]=d*D+h*F+f*R,m[11]=u*D+p*F+w*R,x!==m&&(m[12]=x[12],m[13]=x[13],m[14]=x[14],m[15]=x[15]),m)}},{}],218:[function(_,oe,ae){oe.exports=function(m,x,T){var b=Math.sin(T),e=Math.cos(T),o=x[4],a=x[5],l=x[6],i=x[7],d=x[8],u=x[9],s=x[10],c=x[11];return x!==m&&(m[0]=x[0],m[1]=x[1],m[2]=x[2],m[3]=x[3],m[12]=x[12],m[13]=x[13],m[14]=x[14],m[15]=x[15]),m[4]=o*e+d*b,m[5]=a*e+u*b,m[6]=l*e+s*b,m[7]=i*e+c*b,m[8]=d*e-o*b,m[9]=u*e-a*b,m[10]=s*e-l*b,m[11]=c*e-i*b,m}},{}],219:[function(_,oe,ae){oe.exports=function(m,x,T){var b=Math.sin(T),e=Math.cos(T),o=x[0],a=x[1],l=x[2],i=x[3],d=x[8],u=x[9],s=x[10],c=x[11];return x!==m&&(m[4]=x[4],m[5]=x[5],m[6]=x[6],m[7]=x[7],m[12]=x[12],m[13]=x[13],m[14]=x[14],m[15]=x[15]),m[0]=o*e-d*b,m[1]=a*e-u*b,m[2]=l*e-s*b,m[3]=i*e-c*b,m[8]=o*b+d*e,m[9]=a*b+u*e,m[10]=l*b+s*e,m[11]=i*b+c*e,m}},{}],220:[function(_,oe,ae){oe.exports=function(m,x,T){var b=Math.sin(T),e=Math.cos(T),o=x[0],a=x[1],l=x[2],i=x[3],d=x[4],u=x[5],s=x[6],c=x[7];return x!==m&&(m[8]=x[8],m[9]=x[9],m[10]=x[10],m[11]=x[11],m[12]=x[12],m[13]=x[13],m[14]=x[14],m[15]=x[15]),m[0]=o*e+d*b,m[1]=a*e+u*b,m[2]=l*e+s*b,m[3]=i*e+c*b,m[4]=d*e-o*b,m[5]=u*e-a*b,m[6]=s*e-l*b,m[7]=c*e-i*b,m}},{}],221:[function(_,oe,ae){oe.exports=function(m,x,T){var b=T[0],e=T[1],o=T[2];return m[0]=x[0]*b,m[1]=x[1]*b,m[2]=x[2]*b,m[3]=x[3]*b,m[4]=x[4]*e,m[5]=x[5]*e,m[6]=x[6]*e,m[7]=x[7]*e,m[8]=x[8]*o,m[9]=x[9]*o,m[10]=x[10]*o,m[11]=x[11]*o,m[12]=x[12],m[13]=x[13],m[14]=x[14],m[15]=x[15],m}},{}],222:[function(_,oe,ae){oe.exports=function(m){return"mat4("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+", "+m[6]+", "+m[7]+", "+m[8]+", "+m[9]+", "+m[10]+", "+m[11]+", "+m[12]+", "+m[13]+", "+m[14]+", "+m[15]+")"}},{}],223:[function(_,oe,ae){oe.exports=function(m,x,T){var b,e,o,a,l,i,d,u,s,c,h,p,v=T[0],g=T[1],f=T[2];return x===m?(m[12]=x[0]*v+x[4]*g+x[8]*f+x[12],m[13]=x[1]*v+x[5]*g+x[9]*f+x[13],m[14]=x[2]*v+x[6]*g+x[10]*f+x[14],m[15]=x[3]*v+x[7]*g+x[11]*f+x[15]):(e=x[1],o=x[2],a=x[3],l=x[4],i=x[5],d=x[6],u=x[7],s=x[8],c=x[9],h=x[10],p=x[11],m[0]=b=x[0],m[1]=e,m[2]=o,m[3]=a,m[4]=l,m[5]=i,m[6]=d,m[7]=u,m[8]=s,m[9]=c,m[10]=h,m[11]=p,m[12]=b*v+l*g+s*f+x[12],m[13]=e*v+i*g+c*f+x[13],m[14]=o*v+d*g+h*f+x[14],m[15]=a*v+u*g+p*f+x[15]),m}},{}],224:[function(_,oe,ae){oe.exports=function(m,x){if(m===x){var T=x[1],b=x[2],e=x[3],o=x[6],a=x[7],l=x[11];m[1]=x[4],m[2]=x[8],m[3]=x[12],m[4]=T,m[6]=x[9],m[7]=x[13],m[8]=b,m[9]=o,m[11]=x[14],m[12]=e,m[13]=a,m[14]=l}else m[0]=x[0],m[1]=x[4],m[2]=x[8],m[3]=x[12],m[4]=x[1],m[5]=x[5],m[6]=x[9],m[7]=x[13],m[8]=x[2],m[9]=x[6],m[10]=x[10],m[11]=x[14],m[12]=x[3],m[13]=x[7],m[14]=x[11],m[15]=x[15];return m}},{}],225:[function(_,oe,ae){"use strict";var m=_("css-font"),x=_("pick-by-alias"),T=_("regl"),b=_("gl-util/context"),e=_("es6-weak-map"),o=_("color-normalize"),a=_("font-atlas"),l=_("typedarray-pool"),i=_("parse-rect"),d=_("is-plain-obj"),u=_("parse-unit"),s=_("to-px"),c=_("detect-kerning"),h=_("object-assign"),p=_("font-measure"),v=_("flatten-vertex-data"),g=_("bit-twiddle").nextPow2,f=new e,w=!1;if(document.body){var y=document.body.appendChild(document.createElement("div"));y.style.font="italic small-caps bold condensed 16px/2 cursive",getComputedStyle(y).fontStretch&&(w=!0),document.body.removeChild(y)}var M=function(A){var k;this.gl="function"==typeof(k=A)&&k._gl&&k.prop&&k.texture&&k.buffer?(A={regl:A}).regl._gl:b(A),this.shader=f.get(this.gl),this.regl=this.shader?this.shader.regl:A.regl||T({gl:this.gl}),this.charBuffer=this.regl.buffer({type:"uint8",usage:"stream"}),this.sizeBuffer=this.regl.buffer({type:"float",usage:"stream"}),this.shader||(this.shader=this.createShader(),f.set(this.gl,this.shader)),this.batch=[],this.fontSize=[],this.font=[],this.fontAtlas=[],this.draw=this.shader.draw.bind(this),this.render=function(){this.regl._refresh(),this.draw(this.batch)},this.canvas=this.gl.canvas,this.update(d(A)?A:{})};M.prototype.createShader=function(){var A=this.regl,k=A({blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},stencil:{enable:!1},depth:{enable:!1},count:A.prop("count"),offset:A.prop("offset"),attributes:{charOffset:{offset:4,stride:8,buffer:A.this("sizeBuffer")},width:{offset:0,stride:8,buffer:A.this("sizeBuffer")},char:A.this("charBuffer"),position:A.this("position")},uniforms:{atlasSize:function(C,P){return[P.atlas.width,P.atlas.height]},atlasDim:function(C,P){return[P.atlas.cols,P.atlas.rows]},atlas:function(C,P){return P.atlas.texture},charStep:function(C,P){return P.atlas.step},em:function(C,P){return P.atlas.em},color:A.prop("color"),opacity:A.prop("opacity"),viewport:A.this("viewportArray"),scale:A.this("scale"),align:A.prop("align"),baseline:A.prop("baseline"),translate:A.this("translate"),positionOffset:A.prop("positionOffset")},primitive:"points",viewport:A.this("viewport"),vert:"\n\t\t\tprecision highp float;\n\t\t\tattribute float width, charOffset, char;\n\t\t\tattribute vec2 position;\n\t\t\tuniform float fontSize, charStep, em, align, baseline;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform vec4 color;\n\t\t\tuniform vec2 atlasSize, atlasDim, scale, translate, positionOffset;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvoid main () {\n\t\t\t\tvec2 offset = floor(em * (vec2(align + charOffset, baseline)\n\t\t\t\t\t+ vec2(positionOffset.x, -positionOffset.y)))\n\t\t\t\t\t/ (viewport.zw * scale.xy);\n\n\t\t\t\tvec2 position = (position + translate) * scale;\n\t\t\t\tposition += offset * scale;\n\n\t\t\t\tcharCoord = position * viewport.zw + viewport.xy;\n\n\t\t\t\tgl_Position = vec4(position * 2. - 1., 0, 1);\n\n\t\t\t\tgl_PointSize = charStep;\n\n\t\t\t\tcharId.x = mod(char, atlasDim.x);\n\t\t\t\tcharId.y = floor(char / atlasDim.x);\n\n\t\t\t\tcharWidth = width * em;\n\n\t\t\t\tfontColor = color / 255.;\n\t\t\t}",frag:"\n\t\t\tprecision highp float;\n\t\t\tuniform float fontSize, charStep, opacity;\n\t\t\tuniform vec2 atlasSize;\n\t\t\tuniform vec4 viewport;\n\t\t\tuniform sampler2D atlas;\n\t\t\tvarying vec4 fontColor;\n\t\t\tvarying vec2 charCoord, charId;\n\t\t\tvarying float charWidth;\n\n\t\t\tfloat lightness(vec4 color) {\n\t\t\t\treturn color.r * 0.299 + color.g * 0.587 + color.b * 0.114;\n\t\t\t}\n\n\t\t\tvoid main () {\n\t\t\t\tvec2 uv = gl_FragCoord.xy - charCoord + charStep * .5;\n\t\t\t\tfloat halfCharStep = floor(charStep * .5 + .5);\n\n\t\t\t\t// invert y and shift by 1px (FF expecially needs that)\n\t\t\t\tuv.y = charStep - uv.y;\n\n\t\t\t\t// ignore points outside of character bounding box\n\t\t\t\tfloat halfCharWidth = ceil(charWidth * .5);\n\t\t\t\tif (floor(uv.x) > halfCharStep + halfCharWidth ||\n\t\t\t\t\tfloor(uv.x) < halfCharStep - halfCharWidth) return;\n\n\t\t\t\tuv += charId * charStep;\n\t\t\t\tuv = uv / atlasSize;\n\n\t\t\t\tvec4 color = fontColor;\n\t\t\t\tvec4 mask = texture2D(atlas, uv);\n\n\t\t\t\tfloat maskY = lightness(mask);\n\t\t\t\t// float colorY = lightness(color);\n\t\t\t\tcolor.a *= maskY;\n\t\t\t\tcolor.a *= opacity;\n\n\t\t\t\t// color.a += .1;\n\n\t\t\t\t// antialiasing, see yiq color space y-channel formula\n\t\t\t\t// color.rgb += (1. - color.rgb) * (1. - mask.rgb);\n\n\t\t\t\tgl_FragColor = color;\n\t\t\t}"});return{regl:A,draw:k,atlas:{}}},M.prototype.update=function(A){var k=this;if("string"==typeof A)A={text:A};else if(!A)return;null!=(A=x(A,{position:"position positions coord coords coordinates",font:"font fontFace fontface typeface cssFont css-font family fontFamily",fontSize:"fontSize fontsize size font-size",text:"text texts chars characters value values symbols",align:"align alignment textAlign textbaseline",baseline:"baseline textBaseline textbaseline",direction:"dir direction textDirection",color:"color colour fill fill-color fillColor textColor textcolor",kerning:"kerning kern",range:"range dataBox",viewport:"vp viewport viewBox viewbox viewPort",opacity:"opacity alpha transparency visible visibility opaque",offset:"offset positionOffset padding shift indent indentation"},!0)).opacity&&(this.opacity=Array.isArray(A.opacity)?A.opacity.map(function(Te){return parseFloat(Te)}):parseFloat(A.opacity)),null!=A.viewport&&(this.viewport=i(A.viewport),this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null==this.viewport&&(this.viewport={x:0,y:0,width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight},this.viewportArray=[this.viewport.x,this.viewport.y,this.viewport.width,this.viewport.height]),null!=A.kerning&&(this.kerning=A.kerning),null!=A.offset&&("number"==typeof A.offset&&(A.offset=[A.offset,0]),this.positionOffset=v(A.offset)),A.direction&&(this.direction=A.direction),A.range&&(this.range=A.range,this.scale=[1/(A.range[2]-A.range[0]),1/(A.range[3]-A.range[1])],this.translate=[-A.range[0],-A.range[1]]),A.scale&&(this.scale=A.scale),A.translate&&(this.translate=A.translate),this.scale||(this.scale=[1/this.viewport.width,1/this.viewport.height]),this.translate||(this.translate=[0,0]),this.font.length||A.font||(A.font=M.baseFontSize+"px sans-serif");var C,P=!1,D=!1;if(A.font&&(Array.isArray(A.font)?A.font:[A.font]).forEach(function(Te,Le){if("string"==typeof Te)try{Te=m.parse(Te)}catch(lt){Te=m.parse(M.baseFontSize+"px "+Te)}else Te=m.parse(m.stringify(Te));var Ee=m.stringify({size:M.baseFontSize,family:Te.family,stretch:w?Te.stretch:void 0,variant:Te.variant,weight:Te.weight,style:Te.style}),Pe=u(Te.size),je=Math.round(Pe[0]*s(Pe[1]));if(je!==k.fontSize[Le]&&(D=!0,k.fontSize[Le]=je),!(k.font[Le]&&Ee==k.font[Le].baseString||(P=!0,k.font[Le]=M.fonts[Ee],k.font[Le]))){var Ge=Te.family.join(", "),Ke=[Te.style];Te.style!=Te.variant&&Ke.push(Te.variant),Te.variant!=Te.weight&&Ke.push(Te.weight),w&&Te.weight!=Te.stretch&&Ke.push(Te.stretch),k.font[Le]={baseString:Ee,family:Ge,weight:Te.weight,stretch:Te.stretch,style:Te.style,variant:Te.variant,width:{},kerning:{},metrics:p(Ge,{origin:"top",fontSize:M.baseFontSize,fontStyle:Ke.join(" ")})},M.fonts[Ee]=k.font[Le]}}),(P||D)&&this.font.forEach(function(Te,Le){var Ee=m.stringify({size:k.fontSize[Le],family:Te.family,stretch:w?Te.stretch:void 0,variant:Te.variant,weight:Te.weight,style:Te.style});k.fontAtlas[Le]=k.shader.atlas[Ee],k.fontAtlas[Le]||(k.shader.atlas[Ee]=k.fontAtlas[Le]={fontString:Ee,step:2*Math.ceil(k.fontSize[Le]*Te.metrics.bottom*.5),em:k.fontSize[Le],cols:0,rows:0,height:0,width:0,chars:[],ids:{},texture:k.regl.texture()}),null==A.text&&(A.text=k.text)}),"string"==typeof A.text&&A.position&&A.position.length>2){for(var F=Array(.5*A.position.length),R=0;R<F.length;R++)F[R]=A.text;A.text=F}if(null!=A.text||P){if(this.textOffsets=[0],Array.isArray(A.text)){this.count=A.text[0].length,this.counts=[this.count];for(var L=1;L<A.text.length;L++)this.textOffsets[L]=this.textOffsets[L-1]+A.text[L-1].length,this.count+=A.text[L].length,this.counts.push(A.text[L].length);this.text=A.text.join("")}else this.text=A.text,this.count=this.text.length,this.counts=[this.count];C=[],this.font.forEach(function(Te,Le){M.atlasContext.font=Te.baseString;for(var Ee=k.fontAtlas[Le],Pe=0;Pe<k.text.length;Pe++){var je=k.text.charAt(Pe);if(null==Ee.ids[je]&&(Ee.ids[je]=Ee.chars.length,Ee.chars.push(je),C.push(je)),null==Te.width[je]&&(Te.width[je]=M.atlasContext.measureText(je).width/M.baseFontSize,k.kerning)){var Ge=[];for(var Ke in Te.width)Ge.push(Ke+je,je+Ke);h(Te.kerning,c(Te.family,{pairs:Ge}))}}})}if(A.position)if(A.position.length>2){for(var I=!A.position[0].length,B=l.mallocFloat(2*this.count),V=0,Z=0;V<this.counts.length;V++){var Y=this.counts[V];if(I)for(var ee=0;ee<Y;ee++)B[Z++]=A.position[2*V],B[Z++]=A.position[2*V+1];else for(var J=0;J<Y;J++)B[Z++]=A.position[V][0],B[Z++]=A.position[V][1]}this.position.call?this.position({type:"float",data:B}):this.position=this.regl.buffer({type:"float",data:B}),l.freeFloat(B)}else this.position.destroy&&this.position.destroy(),this.position={constant:A.position};if(A.text||P){var $=l.mallocUint8(this.count),Q=l.mallocFloat(2*this.count);this.textWidth=[];for(var se=0,j=0;se<this.counts.length;se++){for(var G=this.counts[se],W=this.font[se]||this.font[0],ie=this.fontAtlas[se]||this.fontAtlas[0],q=0;q<G;q++){var te=this.text.charAt(j),ne=this.text.charAt(j-1);if($[j]=ie.ids[te],Q[2*j]=W.width[te],q){var de=Q[2*j-1]+.5*Q[2*j-2]+.5*Q[2*j];if(this.kerning){var he=W.kerning[ne+te];he&&(de+=.001*he)}Q[2*j+1]=de}else Q[2*j+1]=.5*Q[2*j];j++}this.textWidth.push(Q.length?.5*Q[2*j-2]+Q[2*j-1]:0)}A.align||(A.align=this.align),this.charBuffer({data:$,type:"uint8",usage:"stream"}),this.sizeBuffer({data:Q,type:"float",usage:"stream"}),l.freeUint8($),l.freeFloat(Q),C.length&&this.font.forEach(function(Te,Le){var Ee=k.fontAtlas[Le],Pe=Ee.step,je=Math.floor(M.maxAtlasSize/Pe),Ge=Math.min(je,Ee.chars.length),Ke=Math.ceil(Ee.chars.length/Ge),lt=g(Ge*Pe),Ue=g(Ke*Pe);Ee.width=lt,Ee.height=Ue,Ee.rows=Ke,Ee.cols=Ge,Ee.em&&Ee.texture({data:a({canvas:M.atlasCanvas,font:Ee.fontString,chars:Ee.chars,shape:[lt,Ue],step:[Pe,Pe]})})})}if(A.align&&(this.align=A.align,this.alignOffset=this.textWidth.map(function(Te,Le){var Ee=Array.isArray(k.align)?k.align.length>1?k.align[Le]:k.align[0]:k.align;if("number"==typeof Ee)return Ee;switch(Ee){case"right":case"end":return-Te;case"center":case"centre":case"middle":return.5*-Te}return 0})),null==this.baseline&&null==A.baseline&&(A.baseline=0),null!=A.baseline&&(this.baseline=A.baseline,Array.isArray(this.baseline)||(this.baseline=[this.baseline]),this.baselineOffset=this.baseline.map(function(Te,Le){var Ee=(k.font[Le]||k.font[0]).metrics,Pe=0;return-1*((Pe+=.5*Ee.bottom)+("number"==typeof Te?Te-Ee.baseline:-Ee[Te]))})),null!=A.color)if(A.color||(A.color="transparent"),"string"!=typeof A.color&&isNaN(A.color)){var be;if("number"==typeof A.color[0]&&A.color.length>this.counts.length){var ge=A.color.length;be=l.mallocUint8(ge);for(var we=(A.color.subarray||A.color.slice).bind(A.color),Ce=0;Ce<ge;Ce+=4)be.set(o(we(Ce,Ce+4),"uint8"),Ce)}else{var De=A.color.length;be=l.mallocUint8(4*De);for(var Se=0;Se<De;Se++)be.set(o(A.color[Se]||0,"uint8"),4*Se)}this.color=be}else this.color=o(A.color,"uint8");if(A.position||A.text||A.color||A.baseline||A.align||A.font||A.offset||A.opacity)if(this.color.length>4||this.baselineOffset.length>1||this.align&&this.align.length>1||this.fontAtlas.length>1||this.positionOffset.length>2){var Fe=Math.max(.5*this.position.length||0,.25*this.color.length||0,this.baselineOffset.length||0,this.alignOffset.length||0,this.font.length||0,this.opacity.length||0,.5*this.positionOffset.length||0);this.batch=Array(Fe);for(var ve=0;ve<this.batch.length;ve++)this.batch[ve]={count:this.counts.length>1?this.counts[ve]:this.counts[0],offset:this.textOffsets.length>1?this.textOffsets[ve]:this.textOffsets[0],color:this.color?this.color.length<=4?this.color:this.color.subarray(4*ve,4*ve+4):[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[ve]:this.opacity,baseline:null!=this.baselineOffset[ve]?this.baselineOffset[ve]:this.baselineOffset[0],align:this.align?null!=this.alignOffset[ve]?this.alignOffset[ve]:this.alignOffset[0]:0,atlas:this.fontAtlas[ve]||this.fontAtlas[0],positionOffset:this.positionOffset.length>2?this.positionOffset.subarray(2*ve,2*ve+2):this.positionOffset}}else this.batch=this.count?[{count:this.count,offset:0,color:this.color||[0,0,0,255],opacity:Array.isArray(this.opacity)?this.opacity[0]:this.opacity,baseline:this.baselineOffset[0],align:this.alignOffset?this.alignOffset[0]:0,atlas:this.fontAtlas[0],positionOffset:this.positionOffset}]:[]},M.prototype.destroy=function(){},M.prototype.kerning=!0,M.prototype.position={constant:new Float32Array(2)},M.prototype.translate=null,M.prototype.scale=null,M.prototype.font=null,M.prototype.text="",M.prototype.positionOffset=[0,0],M.prototype.opacity=1,M.prototype.color=new Uint8Array([0,0,0,255]),M.prototype.alignOffset=[0,0],M.maxAtlasSize=1024,M.atlasCanvas=document.createElement("canvas"),M.atlasContext=M.atlasCanvas.getContext("2d",{alpha:!1}),M.baseFontSize=64,M.fonts={},oe.exports=M},{"bit-twiddle":81,"color-normalize":89,"css-font":99,"detect-kerning":125,"es6-weak-map":183,"flatten-vertex-data":191,"font-atlas":192,"font-measure":193,"gl-util/context":226,"is-plain-obj":236,"object-assign":247,"parse-rect":249,"parse-unit":251,"pick-by-alias":253,regl:283,"to-px":314,"typedarray-pool":327}],226:[function(_,oe,ae){(function(m){(function(){"use strict";var x=_("pick-by-alias");function T(o){if(o.container)if(o.container==document.body)document.body.style.width||(o.canvas.width=o.width||o.pixelRatio*m.innerWidth),document.body.style.height||(o.canvas.height=o.height||o.pixelRatio*m.innerHeight);else{var a=o.container.getBoundingClientRect();o.canvas.width=o.width||a.right-a.left,o.canvas.height=o.height||a.bottom-a.top}}function b(o){return"function"==typeof o.getContext&&"width"in o&&"height"in o}function e(){var o=document.createElement("canvas");return o.style.position="absolute",o.style.top=0,o.style.left=0,o}oe.exports=function(o){var a,i;if(o?"string"==typeof o&&(o={container:o}):o={},(o=b(o)||"string"==typeof(a=o).nodeName&&"function"==typeof a.appendChild&&"function"==typeof a.getBoundingClientRect?{container:o}:"function"==typeof(i=o).drawArrays||"function"==typeof i.drawElements?{gl:o}:x(o,{container:"container target element el canvas holder parent parentNode wrapper use ref root node",gl:"gl context webgl glContext",attrs:"attributes attrs contextAttributes",pixelRatio:"pixelRatio pxRatio px ratio pxratio pixelratio",width:"w width",height:"h height"},!0)).pixelRatio||(o.pixelRatio=m.pixelRatio||1),o.gl)return o.gl;if(o.canvas&&(o.container=o.canvas.parentNode),o.container){if("string"==typeof o.container){var l=document.querySelector(o.container);if(!l)throw Error("Element "+o.container+" is not found");o.container=l}b(o.container)?(o.canvas=o.container,o.container=o.canvas.parentNode):o.canvas||(o.canvas=e(),o.container.appendChild(o.canvas),T(o))}else if(!o.canvas){if("undefined"==typeof document)throw Error("Not DOM environment. Use headless-gl.");o.container=document.body||document.documentElement,o.canvas=e(),o.container.appendChild(o.canvas),T(o)}return o.gl||["webgl","experimental-webgl","webgl-experimental"].some(function(i){try{o.gl=o.canvas.getContext(i,o.attrs)}catch(d){}return o.gl}),o.gl}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"pick-by-alias":253}],227:[function(_,oe,ae){oe.exports=function(m){"string"==typeof m&&(m=[m]);for(var x=[].slice.call(arguments,1),T=[],b=0;b<m.length-1;b++)T.push(m[b],x[b]||"");return T.push(m[b]),T.join("")}},{}],228:[function(_,oe,ae){(function(m){(function(){"use strict";var x,T=_("is-browser");x="function"==typeof m.matchMedia?!m.matchMedia("(hover: none)").matches:T,oe.exports=x}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"is-browser":232}],229:[function(_,oe,ae){"use strict";var m=_("is-browser");oe.exports=m&&function(){var x=!1;try{var T=Object.defineProperty({},"passive",{get:function(){x=!0}});window.addEventListener("test",null,T),window.removeEventListener("test",null,T)}catch(b){x=!1}return x}()},{"is-browser":232}],230:[function(_,oe,ae){ae.read=function(m,x,T,b,e){var o,a,l=8*e-b-1,i=(1<<l)-1,d=i>>1,u=-7,s=T?e-1:0,c=T?-1:1,h=m[x+s];for(s+=c,o=h&(1<<-u)-1,h>>=-u,u+=l;u>0;o=256*o+m[x+s],s+=c,u-=8);for(a=o&(1<<-u)-1,o>>=-u,u+=b;u>0;a=256*a+m[x+s],s+=c,u-=8);if(0===o)o=1-d;else{if(o===i)return a?NaN:1/0*(h?-1:1);a+=Math.pow(2,b),o-=d}return(h?-1:1)*a*Math.pow(2,o-b)},ae.write=function(m,x,T,b,e,o){var a,l,i,d=8*o-e-1,u=(1<<d)-1,s=u>>1,c=23===e?Math.pow(2,-24)-Math.pow(2,-77):0,h=b?0:o-1,p=b?1:-1,v=x<0||0===x&&1/x<0?1:0;for(x=Math.abs(x),isNaN(x)||x===1/0?(l=isNaN(x)?1:0,a=u):(a=Math.floor(Math.log(x)/Math.LN2),x*(i=Math.pow(2,-a))<1&&(a--,i*=2),(x+=a+s>=1?c/i:c*Math.pow(2,1-s))*i>=2&&(a++,i/=2),a+s>=u?(l=0,a=u):a+s>=1?(l=(x*i-1)*Math.pow(2,e),a+=s):(l=x*Math.pow(2,s-1)*Math.pow(2,e),a=0));e>=8;m[T+h]=255&l,h+=p,l/=256,e-=8);for(a=a<<e|l,d+=e;d>0;m[T+h]=255&a,h+=p,a/=256,d-=8);m[T+h-p]|=128*v}},{}],231:[function(_,oe,ae){oe.exports="function"==typeof Object.create?function(m,x){x&&(m.super_=x,m.prototype=Object.create(x.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}))}:function(m,x){if(x){m.super_=x;var T=function(){};T.prototype=x.prototype,m.prototype=new T,m.prototype.constructor=m}}},{}],232:[function(_,oe,ae){oe.exports=!0},{}],233:[function(_,oe,ae){"use strict";oe.exports="undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion))},{}],234:[function(_,oe,ae){"use strict";oe.exports=T,oe.exports.isMobile=T,oe.exports.default=T;var m=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,x=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function T(b){b||(b={});var e=b.ua;if(e||"undefined"==typeof navigator||(e=navigator.userAgent),e&&e.headers&&"string"==typeof e.headers["user-agent"]&&(e=e.headers["user-agent"]),"string"!=typeof e)return!1;var o=b.tablet?x.test(e):m.test(e);return!o&&b.tablet&&b.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==e.indexOf("Macintosh")&&-1!==e.indexOf("Safari")&&(o=!0),o}},{}],235:[function(_,oe,ae){"use strict";oe.exports=function(m){var x=typeof m;return null!==m&&("object"===x||"function"===x)}},{}],236:[function(_,oe,ae){"use strict";var m=Object.prototype.toString;oe.exports=function(x){var T;return"[object Object]"===m.call(x)&&(null===(T=Object.getPrototypeOf(x))||T===Object.getPrototypeOf({}))}},{}],237:[function(_,oe,ae){"use strict";oe.exports=function(m){for(var x,T=m.length,b=0;b<T;b++)if(((x=m.charCodeAt(b))<9||x>13)&&32!==x&&133!==x&&160!==x&&5760!==x&&6158!==x&&(x<8192||x>8205)&&8232!==x&&8233!==x&&8239!==x&&8287!==x&&8288!==x&&12288!==x&&65279!==x)return!1;return!0}},{}],238:[function(_,oe,ae){"use strict";oe.exports=function(m){return"string"==typeof m&&(m=m.trim(),!!(/^[mzlhvcsqta]\s*[-+.0-9][^mlhvzcsqta]+/i.test(m)&&/[\dz]$/i.test(m)&&m.length>4))}},{}],239:[function(_,oe,ae){var m,x;m=this,x=function(){"use strict";var m,x,T;function b(e,o){if(m)if(x){var a="var sharedChunk = {}; ("+m+")(sharedChunk); ("+x+")(sharedChunk);",l={};m(l),(T=o(l)).workerUrl=window.URL.createObjectURL(new Blob([a],{type:"text/javascript"}))}else x=o;else m=o}return b(0,function(e){function o(E,z){return E(z={exports:{}},z.exports),z.exports}var a=l;function l(E,z,K,ce){this.cx=3*E,this.bx=3*(K-E)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*z,this.by=3*(ce-z)-this.cy,this.ay=1-this.cy-this.by,this.p1x=E,this.p1y=ce,this.p2x=K,this.p2y=ce}l.prototype.sampleCurveX=function(E){return((this.ax*E+this.bx)*E+this.cx)*E},l.prototype.sampleCurveY=function(E){return((this.ay*E+this.by)*E+this.cy)*E},l.prototype.sampleCurveDerivativeX=function(E){return(3*this.ax*E+2*this.bx)*E+this.cx},l.prototype.solveCurveX=function(E,z){var K,ce,xe,Ae,Re;for(void 0===z&&(z=1e-6),xe=E,Re=0;Re<8;Re++){if(Ae=this.sampleCurveX(xe)-E,Math.abs(Ae)<z)return xe;var We=this.sampleCurveDerivativeX(xe);if(Math.abs(We)<1e-6)break;xe-=Ae/We}if((xe=E)<(K=0))return K;if(xe>(ce=1))return ce;for(;K<ce;){if(Ae=this.sampleCurveX(xe),Math.abs(Ae-E)<z)return xe;E>Ae?K=xe:ce=xe,xe=.5*(ce-K)+K}return xe},l.prototype.solve=function(E,z){return this.sampleCurveY(this.solveCurveX(E,z))};var i=d;function d(E,z){this.x=E,this.y=z}function u(E,z,K,ce){var xe=new a(E,z,K,ce);return function(Ae){return xe.solve(Ae)}}d.prototype={clone:function(){return new d(this.x,this.y)},add:function(E){return this.clone()._add(E)},sub:function(E){return this.clone()._sub(E)},multByPoint:function(E){return this.clone()._multByPoint(E)},divByPoint:function(E){return this.clone()._divByPoint(E)},mult:function(E){return this.clone()._mult(E)},div:function(E){return this.clone()._div(E)},rotate:function(E){return this.clone()._rotate(E)},rotateAround:function(E,z){return this.clone()._rotateAround(E,z)},matMult:function(E){return this.clone()._matMult(E)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(E){return this.x===E.x&&this.y===E.y},dist:function(E){return Math.sqrt(this.distSqr(E))},distSqr:function(E){var z=E.x-this.x,K=E.y-this.y;return z*z+K*K},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(E){return Math.atan2(this.y-E.y,this.x-E.x)},angleWith:function(E){return this.angleWithSep(E.x,E.y)},angleWithSep:function(E,z){return Math.atan2(this.x*z-this.y*E,this.x*E+this.y*z)},_matMult:function(E){var K=E[2]*this.x+E[3]*this.y;return this.x=E[0]*this.x+E[1]*this.y,this.y=K,this},_add:function(E){return this.x+=E.x,this.y+=E.y,this},_sub:function(E){return this.x-=E.x,this.y-=E.y,this},_mult:function(E){return this.x*=E,this.y*=E,this},_div:function(E){return this.x/=E,this.y/=E,this},_multByPoint:function(E){return this.x*=E.x,this.y*=E.y,this},_divByPoint:function(E){return this.x/=E.x,this.y/=E.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var E=this.y;return this.y=this.x,this.x=-E,this},_rotate:function(E){var z=Math.cos(E),K=Math.sin(E),xe=K*this.x+z*this.y;return this.x=z*this.x-K*this.y,this.y=xe,this},_rotateAround:function(E,z){var K=Math.cos(E),ce=Math.sin(E),Ae=z.y+ce*(this.x-z.x)+K*(this.y-z.y);return this.x=z.x+K*(this.x-z.x)-ce*(this.y-z.y),this.y=Ae,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},d.convert=function(E){return E instanceof d?E:Array.isArray(E)?new d(E[0],E[1]):E};var s=u(.25,.1,.25,1);function c(E,z,K){return Math.min(K,Math.max(z,E))}function h(E,z,K){var ce=K-z,xe=((E-z)%ce+ce)%ce+z;return xe===z?K:xe}function p(E){for(var z=[],K=arguments.length-1;K-- >0;)z[K]=arguments[K+1];for(var ce=0,xe=z;ce<xe.length;ce+=1){var Ae=xe[ce];for(var Re in Ae)E[Re]=Ae[Re]}return E}var v=1;function g(){return v++}function f(){return function E(z){return z?(z^16*Math.random()>>z/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,E)}()}function w(E){return!!E&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(E)}function y(E,z){E.forEach(function(K){z[K]&&(z[K]=z[K].bind(z))})}function M(E,z){return-1!==E.indexOf(z,E.length-z.length)}function A(E,z,K){var ce={};for(var xe in E)ce[xe]=z.call(K||this,E[xe],xe,E);return ce}function k(E,z,K){var ce={};for(var xe in E)z.call(K||this,E[xe],xe,E)&&(ce[xe]=E[xe]);return ce}function C(E){return Array.isArray(E)?E.map(C):"object"==typeof E&&E?A(E,C):E}var P={};function D(E){P[E]||("undefined"!=typeof console&&console.warn(E),P[E]=!0)}function F(E,z,K){return(K.y-E.y)*(z.x-E.x)>(z.y-E.y)*(K.x-E.x)}function R(E){for(var z=0,K=0,ce=E.length,xe=ce-1,Ae=void 0,Re=void 0;K<ce;xe=K++)z+=((Re=E[xe]).x-(Ae=E[K]).x)*(Ae.y+Re.y);return z}function L(){return"undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof self&&self instanceof WorkerGlobalScope}function I(E){var z={};if(E.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,function(ce,xe,Ae,Re){var We=Ae||Re;return z[xe]=!We||We.toLowerCase(),""}),z["max-age"]){var K=parseInt(z["max-age"],10);isNaN(K)?delete z["max-age"]:z["max-age"]=K}return z}var B=null;function V(E){if(null==B){var z=E.navigator?E.navigator.userAgent:null;B=!!E.safari||!(!z||!(/\b(iPad|iPhone|iPod)\b/.test(z)||z.match("Safari")&&!z.match("Chrome")))}return B}function Z(E){try{var z=self[E];return z.setItem("_mapbox_test_",1),z.removeItem("_mapbox_test_"),!0}catch(K){return!1}}var Y,ee,J,$,Q=self.performance&&self.performance.now?self.performance.now.bind(self.performance):Date.now.bind(Date),se=self.requestAnimationFrame||self.mozRequestAnimationFrame||self.webkitRequestAnimationFrame||self.msRequestAnimationFrame,j=self.cancelAnimationFrame||self.mozCancelAnimationFrame||self.webkitCancelAnimationFrame||self.msCancelAnimationFrame,G={now:Q,frame:function(E){var z=se(E);return{cancel:function(){return j(z)}}},getImageData:function(E,z){void 0===z&&(z=0);var K=self.document.createElement("canvas"),ce=K.getContext("2d");if(!ce)throw new Error("failed to create canvas 2d context");return K.width=E.width,K.height=E.height,ce.drawImage(E,0,0,E.width,E.height),ce.getImageData(-z,-z,E.width+2*z,E.height+2*z)},resolveURL:function(E){return Y||(Y=self.document.createElement("a")),Y.href=E,Y.href},hardwareConcurrency:self.navigator.hardwareConcurrency||4,get devicePixelRatio(){return self.devicePixelRatio},get prefersReducedMotion(){return!!self.matchMedia&&(null==ee&&(ee=self.matchMedia("(prefers-reduced-motion: reduce)")),ee.matches)}},W={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?0===this.API_URL.indexOf("https://api.mapbox.cn")?"https://events.mapbox.cn/events/v2":0===this.API_URL.indexOf("https://api.mapbox.com")?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},ie={supported:!1,testSupport:function(E){q||!$||(te?ne(E):J=E)}},q=!1,te=!1;function ne(E){var z=E.createTexture();E.bindTexture(E.TEXTURE_2D,z);try{if(E.texImage2D(E.TEXTURE_2D,0,E.RGBA,E.RGBA,E.UNSIGNED_BYTE,$),E.isContextLost())return;ie.supported=!0}catch(K){}E.deleteTexture(z),q=!0}self.document&&(($=self.document.createElement("img")).onload=function(){J&&ne(J),J=null,te=!0},$.onerror=function(){q=!0,J=null},$.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var le="01",ue=function(E,z){this._transformRequestFn=E,this._customAccessToken=z,this._createSkuToken()};function de(E){return 0===E.indexOf("mapbox:")}ue.prototype._createSkuToken=function(){var E=function(){for(var z="",K=0;K<10;K++)z+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",le,z].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=E.token,this._skuTokenExpiresAt=E.tokenExpiresAt},ue.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},ue.prototype.transformRequest=function(E,z){return this._transformRequestFn&&this._transformRequestFn(E,z)||{url:E}},ue.prototype.normalizeStyleURL=function(E,z){if(!de(E))return E;var K=we(E);return K.path="/styles/v1"+K.path,this._makeAPIURL(K,this._customAccessToken||z)},ue.prototype.normalizeGlyphsURL=function(E,z){if(!de(E))return E;var K=we(E);return K.path="/fonts/v1"+K.path,this._makeAPIURL(K,this._customAccessToken||z)},ue.prototype.normalizeSourceURL=function(E,z){if(!de(E))return E;var K=we(E);return K.path="/v4/"+K.authority+".json",K.params.push("secure"),this._makeAPIURL(K,this._customAccessToken||z)},ue.prototype.normalizeSpriteURL=function(E,z,K,ce){var xe=we(E);return de(E)?(xe.path="/styles/v1"+xe.path+"/sprite"+z+K,this._makeAPIURL(xe,this._customAccessToken||ce)):(xe.path+=""+z+K,Ce(xe))},ue.prototype.normalizeTileURL=function(E,z){if(this._isSkuTokenExpired()&&this._createSkuToken(),E&&!de(E))return E;var K=we(E);K.path=K.path.replace(/(\.(png|jpg)\d*)(?=$)/,(G.devicePixelRatio>=2||512===z?"@2x":"")+(ie.supported?".webp":"$1")),K.path=K.path.replace(/^.+\/v4\//,"/"),K.path="/v4"+K.path;var Ae=this._customAccessToken||function(Re){for(var We=0,ot=Re;We<ot.length;We+=1){var bt=ot[We].match(/^access_token=(.*)$/);if(bt)return bt[1]}return null}(K.params)||W.ACCESS_TOKEN;return W.REQUIRE_ACCESS_TOKEN&&Ae&&this._skuToken&&K.params.push("sku="+this._skuToken),this._makeAPIURL(K,Ae)},ue.prototype.canonicalizeTileURL=function(E,z){var K=we(E);if(!K.path.match(/(^\/v4\/)/)||!K.path.match(/\.[\w]+$/))return E;var ce="mapbox://tiles/";ce+=K.path.replace("/v4/","");var xe=K.params;return z&&(xe=xe.filter(function(Ae){return!Ae.match(/^access_token=/)})),xe.length&&(ce+="?"+xe.join("&")),ce},ue.prototype.canonicalizeTileset=function(E,z){for(var K=!!z&&de(z),ce=[],xe=0,Ae=E.tiles||[];xe<Ae.length;xe+=1){var Re=Ae[xe];be(Re)?ce.push(this.canonicalizeTileURL(Re,K)):ce.push(Re)}return ce},ue.prototype._makeAPIURL=function(E,z){var K="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",ce=we(W.API_URL);if(E.protocol=ce.protocol,E.authority=ce.authority,"/"!==ce.path&&(E.path=""+ce.path+E.path),!W.REQUIRE_ACCESS_TOKEN)return Ce(E);if(!(z=z||W.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+K);if("s"===z[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+K);return E.params=E.params.filter(function(xe){return-1===xe.indexOf("access_token")}),E.params.push("access_token="+z),Ce(E)};var he=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function be(E){return he.test(E)}var ge=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function we(E){var z=E.match(ge);if(!z)throw new Error("Unable to parse URL object");return{protocol:z[1],authority:z[2],path:z[3]||"/",params:z[4]?z[4].split("&"):[]}}function Ce(E){var z=E.params.length?"?"+E.params.join("&"):"";return E.protocol+"://"+E.authority+E.path+z}function De(E){if(!E)return null;var K=E.split(".");if(!K||3!==K.length)return null;try{return JSON.parse(decodeURIComponent(self.atob(K[1]).split("").map(function(ce){return"%"+("00"+ce.charCodeAt(0).toString(16)).slice(-2)}).join("")))}catch(ce){return null}}var Se=function(E){this.type=E,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Se.prototype.getStorageKey=function(E){var ce,K=De(W.ACCESS_TOKEN);return ce=K&&K.u?self.btoa(encodeURIComponent(K.u).replace(/%([0-9A-F]{2})/g,function(xe,Ae){return String.fromCharCode(Number("0x"+Ae))})):W.ACCESS_TOKEN||"",E?"mapbox.eventData."+E+":"+ce:"mapbox.eventData:"+ce},Se.prototype.fetchEventData=function(){var E=Z("localStorage"),z=this.getStorageKey(),K=this.getStorageKey("uuid");if(E)try{var ce=self.localStorage.getItem(z);ce&&(this.eventData=JSON.parse(ce));var xe=self.localStorage.getItem(K);xe&&(this.anonId=xe)}catch(Ae){D("Unable to read from LocalStorage")}},Se.prototype.saveEventData=function(){var E=Z("localStorage"),z=this.getStorageKey(),K=this.getStorageKey("uuid");if(E)try{self.localStorage.setItem(K,this.anonId),Object.keys(this.eventData).length>=1&&self.localStorage.setItem(z,JSON.stringify(this.eventData))}catch(ce){D("Unable to write to LocalStorage")}},Se.prototype.processRequests=function(E){},Se.prototype.postEvent=function(E,z,K,ce){var xe=this;if(W.EVENTS_URL){var Ae=we(W.EVENTS_URL);Ae.params.push("access_token="+(ce||W.ACCESS_TOKEN||""));var Re={event:this.type,created:new Date(E).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.10.1",skuId:le,userId:this.anonId},We=z?p(Re,z):Re,ot={url:Ce(Ae),headers:{"Content-Type":"text/plain"},body:JSON.stringify([We])};this.pendingRequest=tn(ot,function(bt){xe.pendingRequest=null,K(bt),xe.saveEventData(),xe.processRequests(ce)})}},Se.prototype.queueRequest=function(E,z){this.queue.push(E),this.processRequests(z)};var Fe,ve,Te=function(E){function z(){E.call(this,"map.load"),this.success={},this.skuToken=""}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.postMapLoadEvent=function(K,ce,xe,Ae){this.skuToken=xe,(W.EVENTS_URL&&Ae||W.ACCESS_TOKEN&&Array.isArray(K)&&K.some(function(Re){return de(Re)||be(Re)}))&&this.queueRequest({id:ce,timestamp:Date.now()},Ae)},z.prototype.processRequests=function(K){var ce=this;if(!this.pendingRequest&&0!==this.queue.length){var xe=this.queue.shift(),Ae=xe.id,Re=xe.timestamp;Ae&&this.success[Ae]||(this.anonId||this.fetchEventData(),w(this.anonId)||(this.anonId=f()),this.postEvent(Re,{skuToken:this.skuToken},function(We){We||Ae&&(ce.success[Ae]=!0)},K))}},z}(Se),Le=new(function(E){function z(K){E.call(this,"appUserTurnstile"),this._customAccessToken=K}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.postTurnstileEvent=function(K,ce){W.EVENTS_URL&&W.ACCESS_TOKEN&&Array.isArray(K)&&K.some(function(xe){return de(xe)||be(xe)})&&this.queueRequest(Date.now(),ce)},z.prototype.processRequests=function(K){var ce=this;if(!this.pendingRequest&&0!==this.queue.length){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var xe=De(W.ACCESS_TOKEN),Ae=xe?xe.u:W.ACCESS_TOKEN,Re=Ae!==this.eventData.tokenU;w(this.anonId)||(this.anonId=f(),Re=!0);var We=this.queue.shift();if(this.eventData.lastSuccess){var ot=new Date(this.eventData.lastSuccess),bt=new Date(We),kt=(We-this.eventData.lastSuccess)/864e5;Re=Re||kt>=1||kt<-1||ot.getDate()!==bt.getDate()}else Re=!0;if(!Re)return this.processRequests();this.postEvent(We,{"enabled.telemetry":!1},function(Xt){Xt||(ce.eventData.lastSuccess=We,ce.eventData.tokenU=Ae)},K)}},z}(Se)),Ee=Le.postTurnstileEvent.bind(Le),Pe=new Te,je=Pe.postMapLoadEvent.bind(Pe),Ge=500,Ke=50;function lt(){self.caches&&!Fe&&(Fe=self.caches.open("mapbox-tiles"))}function $e(E){var z=E.indexOf("?");return z<0?E:E.slice(0,z)}var tt,ct=1/0;function xt(){return null==tt&&(tt=self.OffscreenCanvas&&new self.OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof self.createImageBitmap),tt}var Ct={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};"function"==typeof Object.freeze&&Object.freeze(Ct);var Ht=function(E){function z(K,ce,xe){401===ce&&be(xe)&&(K+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),E.call(this,K),this.status=ce,this.url=xe,this.name=this.constructor.name,this.message=K}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},z}(Error),zt=L()?function(){return self.worker&&self.worker.referrer}:function(){return("blob:"===self.location.protocol?self.parent:self).location.href};function ht(E,z){var K,ce=new self.AbortController,xe=new self.Request(E.url,{method:E.method||"GET",body:E.body,credentials:E.credentials,headers:E.headers,referrer:zt(),signal:ce.signal}),Ae=!1,Re=!1,We=(K=xe.url).indexOf("sku=")>0&&be(K);"json"===E.type&&xe.headers.set("Accept","application/json");var ot=function(kt,Xt,cn){if(!Re){if(kt&&"SecurityError"!==kt.message&&D(kt),Xt&&cn)return bt(Xt);var nn=Date.now();self.fetch(xe).then(function(vn){if(vn.ok){var Pn=We?vn.clone():null;return bt(vn,Pn,nn)}return z(new Ht(vn.statusText,vn.status,E.url))}).catch(function(vn){20!==vn.code&&z(new Error(vn.message))})}},bt=function(kt,Xt,cn){("arrayBuffer"===E.type?kt.arrayBuffer():"json"===E.type?kt.json():kt.text()).then(function(nn){Re||(Xt&&cn&&function Ue(E,z,K){if(lt(),Fe){var ce={status:z.status,statusText:z.statusText,headers:new self.Headers};z.headers.forEach(function(Ae,Re){return ce.headers.set(Re,Ae)});var xe=I(z.headers.get("Cache-Control")||"");xe["no-store"]||(xe["max-age"]&&ce.headers.set("Expires",new Date(K+1e3*xe["max-age"]).toUTCString()),new Date(ce.headers.get("Expires")).getTime()-K<42e4||function(Ae,Re){if(void 0===ve)try{new Response(new ReadableStream),ve=!0}catch(We){ve=!1}ve?Re(Ae.body):Ae.blob().then(Re)}(z,function(Ae){var Re=new self.Response(Ae,ce);lt(),Fe&&Fe.then(function(We){return We.put($e(E.url),Re)}).catch(function(We){return D(We.message)})}))}}(xe,Xt,cn),Ae=!0,z(null,nn,kt.headers.get("Cache-Control"),kt.headers.get("Expires")))}).catch(function(nn){Re||z(new Error(nn.message))})};return We?function et(E,z){if(lt(),!Fe)return z(null);var K=$e(E.url);Fe.then(function(ce){ce.match(K).then(function(xe){var Ae=function(Re){if(!Re)return!1;var We=new Date(Re.headers.get("Expires")||0),ot=I(Re.headers.get("Cache-Control")||"");return We>Date.now()&&!ot["no-cache"]}(xe);ce.delete(K),Ae&&ce.put(K,xe.clone()),z(null,xe,Ae)}).catch(z)}).catch(z)}(xe,ot):ot(null,null),{cancel:function(){Re=!0,Ae||ce.abort()}}}var un,Ze,ut=function(E,z){if(!(/^file:/.test(K=E.url)||/^file:/.test(zt())&&!/^\w+:/.test(K))){if(self.fetch&&self.Request&&self.AbortController&&self.Request.prototype.hasOwnProperty("signal"))return ht(E,z);if(L()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",E,z,void 0,!0)}var K;return function(ce,xe){var Ae=new self.XMLHttpRequest;for(var Re in Ae.open(ce.method||"GET",ce.url,!0),"arrayBuffer"===ce.type&&(Ae.responseType="arraybuffer"),ce.headers)Ae.setRequestHeader(Re,ce.headers[Re]);return"json"===ce.type&&(Ae.responseType="text",Ae.setRequestHeader("Accept","application/json")),Ae.withCredentials="include"===ce.credentials,Ae.onerror=function(){xe(new Error(Ae.statusText))},Ae.onload=function(){if((Ae.status>=200&&Ae.status<300||0===Ae.status)&&null!==Ae.response){var We=Ae.response;if("json"===ce.type)try{We=JSON.parse(Ae.response)}catch(ot){return xe(ot)}xe(null,We,Ae.getResponseHeader("Cache-Control"),Ae.getResponseHeader("Expires"))}else xe(new Ht(Ae.statusText,Ae.status,ce.url))},Ae.send(ce.body),{cancel:function(){return Ae.abort()}}}(E,z)},Ot=function(E,z){return ut(p(E,{type:"arrayBuffer"}),z)},tn=function(E,z){return ut(p(E,{method:"POST"}),z)};un=[],Ze=0;var Qe=function(E,z){if(ie.supported&&(E.headers||(E.headers={}),E.headers.accept="image/webp,*/*"),Ze>=W.MAX_PARALLEL_IMAGE_REQUESTS){var K={requestParameters:E,callback:z,cancelled:!1,cancel:function(){this.cancelled=!0}};return un.push(K),K}Ze++;var ce=!1,xe=function(){if(!ce)for(ce=!0,Ze--;un.length&&Ze<W.MAX_PARALLEL_IMAGE_REQUESTS;){var Re=un.shift();Re.cancelled||(Re.cancel=Qe(Re.requestParameters,Re.callback).cancel)}},Ae=Ot(E,function(Re,We,ot,bt){var Xt,cn;xe(),Re?z(Re):We&&(xt()?(Xt=z,cn=new self.Blob([new Uint8Array(We)],{type:"image/png"}),self.createImageBitmap(cn).then(function(nn){Xt(null,nn)}).catch(function(nn){Xt(new Error("Could not load image because of "+nn.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))})):function(kt,Xt,cn,nn){var vn=new self.Image,Pn=self.URL;vn.onload=function(){Xt(null,vn),Pn.revokeObjectURL(vn.src)},vn.onerror=function(){return Xt(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var Xn=new self.Blob([new Uint8Array(kt)],{type:"image/png"});vn.cacheControl=cn,vn.expires=nn,vn.src=kt.byteLength?Pn.createObjectURL(Xn):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}(We,z,ot,bt))});return{cancel:function(){Ae.cancel(),xe()}}};function qe(E,z,K){K[E]&&-1!==K[E].indexOf(z)||(K[E]=K[E]||[],K[E].push(z))}function it(E,z,K){if(K&&K[E]){var ce=K[E].indexOf(z);-1!==ce&&K[E].splice(ce,1)}}var Ie=function(E,z){void 0===z&&(z={}),p(this,z),this.type=E},ze=function(E){function z(K,ce){void 0===ce&&(ce={}),E.call(this,"error",p({error:K},ce))}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z}(Ie),Ve=function(){};Ve.prototype.on=function(E,z){return this._listeners=this._listeners||{},qe(E,z,this._listeners),this},Ve.prototype.off=function(E,z){return it(E,z,this._listeners),it(E,z,this._oneTimeListeners),this},Ve.prototype.once=function(E,z){return this._oneTimeListeners=this._oneTimeListeners||{},qe(E,z,this._oneTimeListeners),this},Ve.prototype.fire=function(E,z){"string"==typeof E&&(E=new Ie(E,z||{}));var K=E.type;if(this.listens(K)){E.target=this;for(var ce=0,xe=this._listeners&&this._listeners[K]?this._listeners[K].slice():[];ce<xe.length;ce+=1)xe[ce].call(this,E);for(var Ae=0,Re=this._oneTimeListeners&&this._oneTimeListeners[K]?this._oneTimeListeners[K].slice():[];Ae<Re.length;Ae+=1){var We=Re[Ae];it(K,We,this._oneTimeListeners),We.call(this,E)}var ot=this._eventedParent;ot&&(p(E,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),ot.fire(E))}else E instanceof ze&&console.error(E.error);return this},Ve.prototype.listens=function(E){return this._listeners&&this._listeners[E]&&this._listeners[E].length>0||this._oneTimeListeners&&this._oneTimeListeners[E]&&this._oneTimeListeners[E].length>0||this._eventedParent&&this._eventedParent.listens(E)},Ve.prototype.setEventedParent=function(E,z){return this._eventedParent=E,this._eventedParentData=z,this};var Be={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},at=function(E,z,K,ce){this.message=(E?E+": ":"")+K,ce&&(this.identifier=ce),null!=z&&z.__line__&&(this.line=z.__line__)};function gt(E){var K=E.value;return K?[new at(E.key,K,"constants have been deprecated as of v8")]:[]}function wt(E){for(var z=[],K=arguments.length-1;K-- >0;)z[K]=arguments[K+1];for(var ce=0,xe=z;ce<xe.length;ce+=1){var Ae=xe[ce];for(var Re in Ae)E[Re]=Ae[Re]}return E}function _t(E){return E instanceof Number||E instanceof String||E instanceof Boolean?E.valueOf():E}function Rt(E){if(Array.isArray(E))return E.map(Rt);if(E instanceof Object&&!(E instanceof Number||E instanceof String||E instanceof Boolean)){var z={};for(var K in E)z[K]=Rt(E[K]);return z}return _t(E)}var yt=function(E){function z(K,ce){E.call(this,ce),this.message=ce,this.key=K}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z}(Error),Vt=function(E,z){void 0===z&&(z=[]),this.parent=E,this.bindings={};for(var K=0,ce=z;K<ce.length;K+=1){var xe=ce[K];this.bindings[xe[0]]=xe[1]}};Vt.prototype.concat=function(E){return new Vt(this,E)},Vt.prototype.get=function(E){if(this.bindings[E])return this.bindings[E];if(this.parent)return this.parent.get(E);throw new Error(E+" not found in scope.")},Vt.prototype.has=function(E){return!!this.bindings[E]||!!this.parent&&this.parent.has(E)};var Nt={kind:"null"},rt={kind:"number"},Tt={kind:"string"},Ut={kind:"boolean"},Wt={kind:"color"},sn={kind:"object"},He={kind:"value"},vt={kind:"collator"},Lt={kind:"formatted"},Gt={kind:"resolvedImage"};function Kt(E,z){return{kind:"array",itemType:E,N:z}}function _n(E){if("array"===E.kind){var z=_n(E.itemType);return"number"==typeof E.N?"array<"+z+", "+E.N+">":"value"===E.itemType.kind?"array":"array<"+z+">"}return E.kind}var en=[Nt,rt,Tt,Ut,Wt,Lt,sn,Kt(He),Gt];function on(E,z){if("error"===z.kind)return null;if("array"===E.kind){if("array"===z.kind&&(0===z.N&&"value"===z.itemType.kind||!on(E.itemType,z.itemType))&&("number"!=typeof E.N||E.N===z.N))return null}else{if(E.kind===z.kind)return null;if("value"===E.kind)for(var K=0,ce=en;K<ce.length;K+=1)if(!on(ce[K],z))return null}return"Expected "+_n(E)+" but found "+_n(z)+" instead."}function wn(E,z){return z.some(function(K){return K.kind===E.kind})}function On(E,z){return z.some(function(K){return"null"===K?null===E:"array"===K?Array.isArray(E):"object"===K?E&&!Array.isArray(E)&&"object"==typeof E:K===typeof E})}var Dn=o(function(E,z){var K={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function ce(ot){return(ot=Math.round(ot))<0?0:ot>255?255:ot}function Ae(ot){return ce("%"===ot[ot.length-1]?parseFloat(ot)/100*255:parseInt(ot))}function Re(ot){return function xe(ot){return ot<0?0:ot>1?1:ot}("%"===ot[ot.length-1]?parseFloat(ot)/100:parseFloat(ot))}function We(ot,bt,kt){return kt<0?kt+=1:kt>1&&(kt-=1),6*kt<1?ot+(bt-ot)*kt*6:2*kt<1?bt:3*kt<2?ot+(bt-ot)*(2/3-kt)*6:ot}try{z.parseCSSColor=function(ot){var bt,kt=ot.replace(/ /g,"").toLowerCase();if(kt in K)return K[kt].slice();if("#"===kt[0])return 4===kt.length?(bt=parseInt(kt.substr(1),16))>=0&&bt<=4095?[(3840&bt)>>4|(3840&bt)>>8,240&bt|(240&bt)>>4,15&bt|(15&bt)<<4,1]:null:7===kt.length&&(bt=parseInt(kt.substr(1),16))>=0&&bt<=16777215?[(16711680&bt)>>16,(65280&bt)>>8,255&bt,1]:null;var Xt=kt.indexOf("("),cn=kt.indexOf(")");if(-1!==Xt&&cn+1===kt.length){var nn=kt.substr(0,Xt),vn=kt.substr(Xt+1,cn-(Xt+1)).split(","),Pn=1;switch(nn){case"rgba":if(4!==vn.length)return null;Pn=Re(vn.pop());case"rgb":return 3!==vn.length?null:[Ae(vn[0]),Ae(vn[1]),Ae(vn[2]),Pn];case"hsla":if(4!==vn.length)return null;Pn=Re(vn.pop());case"hsl":if(3!==vn.length)return null;var Xn=(parseFloat(vn[0])%360+360)%360/360,Yn=Re(vn[1]),ar=Re(vn[2]),lr=ar<=.5?ar*(Yn+1):ar+Yn-ar*Yn,mr=2*ar-lr;return[ce(255*We(mr,lr,Xn+1/3)),ce(255*We(mr,lr,Xn)),ce(255*We(mr,lr,Xn-1/3)),Pn];default:return null}}return null}}catch(ot){}}).parseCSSColor,Tn=function(E,z,K,ce){void 0===ce&&(ce=1),this.r=E,this.g=z,this.b=K,this.a=ce};Tn.parse=function(E){if(E){if(E instanceof Tn)return E;if("string"==typeof E){var z=Dn(E);if(z)return new Tn(z[0]/255*z[3],z[1]/255*z[3],z[2]/255*z[3],z[3])}}},Tn.prototype.toString=function(){var E=this.toArray(),K=E[1],ce=E[2],xe=E[3];return"rgba("+Math.round(E[0])+","+Math.round(K)+","+Math.round(ce)+","+xe+")"},Tn.prototype.toArray=function(){var ce=this.a;return 0===ce?[0,0,0,0]:[255*this.r/ce,255*this.g/ce,255*this.b/ce,ce]},Tn.black=new Tn(0,0,0,1),Tn.white=new Tn(1,1,1,1),Tn.transparent=new Tn(0,0,0,0),Tn.red=new Tn(1,0,0,1);var pn=function(E,z,K){this.sensitivity=E?z?"variant":"case":z?"accent":"base",this.locale=K,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};pn.prototype.compare=function(E,z){return this.collator.compare(E,z)},pn.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var En=function(E,z,K,ce,xe){this.text=E,this.image=z,this.scale=K,this.fontStack=ce,this.textColor=xe},Un=function(E){this.sections=E};Un.fromString=function(E){return new Un([new En(E,null,null,null,null)])},Un.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(E){return 0!==E.text.length||E.image&&0!==E.image.name.length})},Un.factory=function(E){return E instanceof Un?E:Un.fromString(E)},Un.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(E){return E.text}).join("")},Un.prototype.serialize=function(){for(var E=["format"],z=0,K=this.sections;z<K.length;z+=1){var ce=K[z];if(ce.image)E.push(["image",ce.image.name]);else{E.push(ce.text);var xe={};ce.fontStack&&(xe["text-font"]=["literal",ce.fontStack.split(",")]),ce.scale&&(xe["font-scale"]=ce.scale),ce.textColor&&(xe["text-color"]=["rgba"].concat(ce.textColor.toArray())),E.push(xe)}}return E};var In=function(E){this.name=E.name,this.available=E.available};function sr(E,z,K,ce){return"number"==typeof E&&E>=0&&E<=255&&"number"==typeof z&&z>=0&&z<=255&&"number"==typeof K&&K>=0&&K<=255?void 0===ce||"number"==typeof ce&&ce>=0&&ce<=1?null:"Invalid rgba value ["+[E,z,K,ce].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof ce?[E,z,K,ce]:[E,z,K]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function fr(E){if(null===E||"string"==typeof E||"boolean"==typeof E||"number"==typeof E||E instanceof Tn||E instanceof pn||E instanceof Un||E instanceof In)return!0;if(Array.isArray(E)){for(var z=0,K=E;z<K.length;z+=1)if(!fr(K[z]))return!1;return!0}if("object"==typeof E){for(var ce in E)if(!fr(E[ce]))return!1;return!0}return!1}function rr(E){if(null===E)return Nt;if("string"==typeof E)return Tt;if("boolean"==typeof E)return Ut;if("number"==typeof E)return rt;if(E instanceof Tn)return Wt;if(E instanceof pn)return vt;if(E instanceof Un)return Lt;if(E instanceof In)return Gt;if(Array.isArray(E)){for(var z,K=E.length,ce=0,xe=E;ce<xe.length;ce+=1){var Ae=rr(xe[ce]);if(z){if(z===Ae)continue;z=He;break}z=Ae}return Kt(z||He,K)}return sn}function qr(E){var z=typeof E;return null===E?"":"string"===z||"number"===z||"boolean"===z?String(E):E instanceof Tn||E instanceof Un||E instanceof In?E.toString():JSON.stringify(E)}In.prototype.toString=function(){return this.name},In.fromString=function(E){return E?new In({name:E,available:!1}):null},In.prototype.serialize=function(){return["image",this.name]};var ti=function(E,z){this.type=E,this.value=z};ti.parse=function(E,z){if(2!==E.length)return z.error("'literal' expression requires exactly one argument, but found "+(E.length-1)+" instead.");if(!fr(E[1]))return z.error("invalid value");var K=E[1],ce=rr(K),xe=z.expectedType;return"array"!==ce.kind||0!==ce.N||!xe||"array"!==xe.kind||"number"==typeof xe.N&&0!==xe.N||(ce=xe),new ti(ce,K)},ti.prototype.evaluate=function(){return this.value},ti.prototype.eachChild=function(){},ti.prototype.outputDefined=function(){return!0},ti.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof Tn?["rgba"].concat(this.value.toArray()):this.value instanceof Un?this.value.serialize():this.value};var Ar=function(E){this.name="ExpressionEvaluationError",this.message=E};Ar.prototype.toJSON=function(){return this.message};var pr={string:Tt,number:rt,boolean:Ut,object:sn},Fn=function(E,z){this.type=E,this.args=z};Fn.parse=function(E,z){if(E.length<2)return z.error("Expected at least one argument.");var K,ce=1,xe=E[0];if("array"===xe){var Ae,Re;if(E.length>2){var We=E[1];if("string"!=typeof We||!(We in pr)||"object"===We)return z.error('The item type argument of "array" must be one of string, number, boolean',1);Ae=pr[We],ce++}else Ae=He;if(E.length>3){if(null!==E[2]&&("number"!=typeof E[2]||E[2]<0||E[2]!==Math.floor(E[2])))return z.error('The length argument to "array" must be a positive integer literal',2);Re=E[2],ce++}K=Kt(Ae,Re)}else K=pr[xe];for(var ot=[];ce<E.length;ce++){var bt=z.parse(E[ce],ce,He);if(!bt)return null;ot.push(bt)}return new Fn(K,ot)},Fn.prototype.evaluate=function(E){for(var z=0;z<this.args.length;z++){var K=this.args[z].evaluate(E);if(!on(this.type,rr(K)))return K;if(z===this.args.length-1)throw new Ar("Expected value to be of type "+_n(this.type)+", but found "+_n(rr(K))+" instead.")}return null},Fn.prototype.eachChild=function(E){this.args.forEach(E)},Fn.prototype.outputDefined=function(){return this.args.every(function(E){return E.outputDefined()})},Fn.prototype.serialize=function(){var E=this.type,z=[E.kind];if("array"===E.kind){var K=E.itemType;if("string"===K.kind||"number"===K.kind||"boolean"===K.kind){z.push(K.kind);var ce=E.N;("number"==typeof ce||this.args.length>1)&&z.push(ce)}}return z.concat(this.args.map(function(xe){return xe.serialize()}))};var Rn=function(E){this.type=Lt,this.sections=E};Rn.parse=function(E,z){if(E.length<2)return z.error("Expected at least one argument.");var K=E[1];if(!Array.isArray(K)&&"object"==typeof K)return z.error("First argument must be an image or text section.");for(var ce=[],xe=!1,Ae=1;Ae<=E.length-1;++Ae){var Re=E[Ae];if(xe&&"object"==typeof Re&&!Array.isArray(Re)){xe=!1;var We=null;if(Re["font-scale"]&&!(We=z.parse(Re["font-scale"],1,rt)))return null;var ot=null;if(Re["text-font"]&&!(ot=z.parse(Re["text-font"],1,Kt(Tt))))return null;var bt=null;if(Re["text-color"]&&!(bt=z.parse(Re["text-color"],1,Wt)))return null;var kt=ce[ce.length-1];kt.scale=We,kt.font=ot,kt.textColor=bt}else{var Xt=z.parse(E[Ae],1,He);if(!Xt)return null;var cn=Xt.type.kind;if("string"!==cn&&"value"!==cn&&"null"!==cn&&"resolvedImage"!==cn)return z.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");xe=!0,ce.push({content:Xt,scale:null,font:null,textColor:null})}}return new Rn(ce)},Rn.prototype.evaluate=function(E){return new Un(this.sections.map(function(z){var K=z.content.evaluate(E);return rr(K)===Gt?new En("",K,null,null,null):new En(qr(K),null,z.scale?z.scale.evaluate(E):null,z.font?z.font.evaluate(E).join(","):null,z.textColor?z.textColor.evaluate(E):null)}))},Rn.prototype.eachChild=function(E){for(var z=0,K=this.sections;z<K.length;z+=1){var ce=K[z];E(ce.content),ce.scale&&E(ce.scale),ce.font&&E(ce.font),ce.textColor&&E(ce.textColor)}},Rn.prototype.outputDefined=function(){return!1},Rn.prototype.serialize=function(){for(var E=["format"],z=0,K=this.sections;z<K.length;z+=1){var ce=K[z];E.push(ce.content.serialize());var xe={};ce.scale&&(xe["font-scale"]=ce.scale.serialize()),ce.font&&(xe["text-font"]=ce.font.serialize()),ce.textColor&&(xe["text-color"]=ce.textColor.serialize()),E.push(xe)}return E};var hr=function(E){this.type=Gt,this.input=E};hr.parse=function(E,z){if(2!==E.length)return z.error("Expected two arguments.");var K=z.parse(E[1],1,Tt);return K?new hr(K):z.error("No image name provided.")},hr.prototype.evaluate=function(E){var z=this.input.evaluate(E),K=In.fromString(z);return K&&E.availableImages&&(K.available=E.availableImages.indexOf(z)>-1),K},hr.prototype.eachChild=function(E){E(this.input)},hr.prototype.outputDefined=function(){return!1},hr.prototype.serialize=function(){return["image",this.input.serialize()]};var ri={"to-boolean":Ut,"to-color":Wt,"to-number":rt,"to-string":Tt},ir=function(E,z){this.type=E,this.args=z};ir.parse=function(E,z){if(E.length<2)return z.error("Expected at least one argument.");var K=E[0];if(("to-boolean"===K||"to-string"===K)&&2!==E.length)return z.error("Expected one argument.");for(var ce=ri[K],xe=[],Ae=1;Ae<E.length;Ae++){var Re=z.parse(E[Ae],Ae,He);if(!Re)return null;xe.push(Re)}return new ir(ce,xe)},ir.prototype.evaluate=function(E){if("boolean"===this.type.kind)return Boolean(this.args[0].evaluate(E));if("color"===this.type.kind){for(var z,K,ce=0,xe=this.args;ce<xe.length;ce+=1){if(K=null,(z=xe[ce].evaluate(E))instanceof Tn)return z;if("string"==typeof z){var Ae=E.parseColor(z);if(Ae)return Ae}else if(Array.isArray(z)&&!(K=z.length<3||z.length>4?"Invalid rbga value "+JSON.stringify(z)+": expected an array containing either three or four numeric values.":sr(z[0],z[1],z[2],z[3])))return new Tn(z[0]/255,z[1]/255,z[2]/255,z[3])}throw new Ar(K||"Could not parse color from value '"+("string"==typeof z?z:String(JSON.stringify(z)))+"'")}if("number"===this.type.kind){for(var Re=null,We=0,ot=this.args;We<ot.length;We+=1){if(null===(Re=ot[We].evaluate(E)))return 0;var bt=Number(Re);if(!isNaN(bt))return bt}throw new Ar("Could not convert "+JSON.stringify(Re)+" to number.")}return"formatted"===this.type.kind?Un.fromString(qr(this.args[0].evaluate(E))):"resolvedImage"===this.type.kind?In.fromString(qr(this.args[0].evaluate(E))):qr(this.args[0].evaluate(E))},ir.prototype.eachChild=function(E){this.args.forEach(E)},ir.prototype.outputDefined=function(){return this.args.every(function(E){return E.outputDefined()})},ir.prototype.serialize=function(){if("formatted"===this.type.kind)return new Rn([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new hr(this.args[0]).serialize();var E=["to-"+this.type.kind];return this.eachChild(function(z){E.push(z.serialize())}),E};var Ur=["Unknown","Point","LineString","Polygon"],Mr=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};Mr.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},Mr.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?Ur[this.feature.type]:this.feature.type:null},Mr.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},Mr.prototype.canonicalID=function(){return this.canonical},Mr.prototype.properties=function(){return this.feature&&this.feature.properties||{}},Mr.prototype.parseColor=function(E){var z=this._parseColorCache[E];return z||(z=this._parseColorCache[E]=Tn.parse(E)),z};var wr=function(E,z,K,ce){this.name=E,this.type=z,this._evaluate=K,this.args=ce};wr.prototype.evaluate=function(E){return this._evaluate(E,this.args)},wr.prototype.eachChild=function(E){this.args.forEach(E)},wr.prototype.outputDefined=function(){return!1},wr.prototype.serialize=function(){return[this.name].concat(this.args.map(function(E){return E.serialize()}))},wr.parse=function(E,z){var K,ce=E[0],xe=wr.definitions[ce];if(!xe)return z.error('Unknown expression "'+ce+'". If you wanted a literal array, use ["literal", [...]].',0);for(var Ae=Array.isArray(xe)?xe[0]:xe.type,Re=Array.isArray(xe)?[[xe[1],xe[2]]]:xe.overloads,We=Re.filter(function(Pi){var _i=Pi[0];return!Array.isArray(_i)||_i.length===E.length-1}),ot=null,bt=0,kt=We;bt<kt.length;bt+=1){var Xt=kt[bt],cn=Xt[0],nn=Xt[1];ot=new Fr(z.registry,z.path,null,z.scope);for(var vn=[],Pn=!1,Xn=1;Xn<E.length;Xn++){var Yn=E[Xn],ar=Array.isArray(cn)?cn[Xn-1]:cn.type,lr=ot.parse(Yn,1+vn.length,ar);if(!lr){Pn=!0;break}vn.push(lr)}if(!Pn)if(Array.isArray(cn)&&cn.length!==vn.length)ot.error("Expected "+cn.length+" arguments, but found "+vn.length+" instead.");else{for(var mr=0;mr<vn.length;mr++){var Pr=Array.isArray(cn)?cn[mr]:cn.type,Br=vn[mr];ot.concat(mr+1).checkSubtype(Pr,Br.type)}if(0===ot.errors.length)return new wr(ce,Ae,nn,vn)}}if(1===We.length)(K=z.errors).push.apply(K,ot.errors);else{for(var ui=(We.length?We:Re).map(function(Pi){var _i;return _i=Pi[0],Array.isArray(_i)?"("+_i.map(_n).join(", ")+")":"("+_n(_i.type)+"...)"}).join(" | "),ni=[],yi=1;yi<E.length;yi++){var Ei=z.parse(E[yi],1+ni.length);if(!Ei)return null;ni.push(_n(Ei.type))}z.error("Expected arguments of type "+ui+", but found ("+ni.join(", ")+") instead.")}return null},wr.register=function(E,z){for(var K in wr.definitions=z,z)E[K]=wr};var ii=function(E,z,K){this.type=vt,this.locale=K,this.caseSensitive=E,this.diacriticSensitive=z};function gn(E,z){E[0]=Math.min(E[0],z[0]),E[1]=Math.min(E[1],z[1]),E[2]=Math.max(E[2],z[0]),E[3]=Math.max(E[3],z[1])}function jt(E,z){return!(E[0]<=z[0]||E[2]>=z[2]||E[1]<=z[1]||E[3]>=z[3])}function Jt(E,z){var ce=(180+E[0])/360,xe=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+E[1]*Math.PI/360)))/360,Ae=Math.pow(2,z.z);return[Math.round(ce*Ae*8192),Math.round(xe*Ae*8192)]}function An(E,z,K){return z[1]>E[1]!=K[1]>E[1]&&E[0]<(K[0]-z[0])*(E[1]-z[1])/(K[1]-z[1])+z[0]}function Hn(E,z){for(var K,ce,xe,Ae,Re,We,ot,bt=!1,kt=0,Xt=z.length;kt<Xt;kt++)for(var cn=z[kt],nn=0,vn=cn.length;nn<vn-1;nn++){if(void 0,void 0,void 0,void 0,(Ae=(K=E)[0]-(ce=cn[nn])[0])*(ot=K[1]-(xe=cn[nn+1])[1])-(We=K[0]-xe[0])*(Re=K[1]-ce[1])==0&&Ae*We<=0&&Re*ot<=0)return!1;An(E,cn[nn],cn[nn+1])&&(bt=!bt)}return bt}function yr(E,z){for(var K=0;K<z.length;K++)if(Hn(E,z[K]))return!0;return!1}function gr(E,z,K,ce){var ot=ce[0]-K[0],bt=ce[1]-K[1],kt=(E[0]-K[0])*bt-ot*(E[1]-K[1]),Xt=(z[0]-K[0])*bt-ot*(z[1]-K[1]);return kt>0&&Xt<0||kt<0&&Xt>0}function Bn(E,z,K){for(var ce=0,xe=K;ce<xe.length;ce+=1)for(var Ae=xe[ce],Re=0;Re<Ae.length-1;++Re)if(void 0,void 0,(Xt=[(kt=Ae[Re+1])[0]-(bt=Ae[Re])[0],kt[1]-bt[1]])[0]*(cn=[(ot=z)[0]-(We=E)[0],ot[1]-We[1]])[1]-Xt[1]*cn[0]!=0&&gr(We,ot,bt,kt)&&gr(bt,kt,We,ot))return!0;var We,ot,bt,kt,Xt,cn;return!1}function Nn(E,z){for(var K=0;K<E.length;++K)if(!Hn(E[K],z))return!1;for(var ce=0;ce<E.length-1;++ce)if(Bn(E[ce],E[ce+1],z))return!1;return!0}function Zn(E,z){for(var K=0;K<z.length;K++)if(Nn(E,z[K]))return!0;return!1}function Wn(E,z,K){for(var ce=[],xe=0;xe<E.length;xe++){for(var Ae=[],Re=0;Re<E[xe].length;Re++){var We=Jt(E[xe][Re],K);gn(z,We),Ae.push(We)}ce.push(Ae)}return ce}function jn(E,z,K){for(var ce=[],xe=0;xe<E.length;xe++){var Ae=Wn(E[xe],z,K);ce.push(Ae)}return ce}function xr(E,z,K,ce){if(E[0]<K[0]||E[0]>K[2]){var xe=.5*ce,Ae=E[0]-K[0]>xe?-ce:K[0]-E[0]>xe?ce:0;0===Ae&&(Ae=E[0]-K[2]>xe?-ce:K[2]-E[0]>xe?ce:0),E[0]+=Ae}gn(z,E)}function Ir(E,z,K,ce){for(var xe=8192*Math.pow(2,ce.z),Ae=[8192*ce.x,8192*ce.y],Re=[],We=0,ot=E;We<ot.length;We+=1)for(var bt=0,kt=ot[We];bt<kt.length;bt+=1){var Xt=kt[bt],cn=[Xt.x+Ae[0],Xt.y+Ae[1]];xr(cn,z,K,xe),Re.push(cn)}return Re}function Vr(E,z,K,ce){for(var xe,Ae=8192*Math.pow(2,ce.z),Re=[8192*ce.x,8192*ce.y],We=[],ot=0,bt=E;ot<bt.length;ot+=1){for(var kt=[],Xt=0,cn=bt[ot];Xt<cn.length;Xt+=1){var nn=cn[Xt],vn=[nn.x+Re[0],nn.y+Re[1]];gn(z,vn),kt.push(vn)}We.push(kt)}if(z[2]-z[0]<=Ae/2){(xe=z)[0]=xe[1]=1/0,xe[2]=xe[3]=-1/0;for(var Pn=0,Xn=We;Pn<Xn.length;Pn+=1)for(var Yn=0,ar=Xn[Pn];Yn<ar.length;Yn+=1)xr(ar[Yn],z,K,Ae)}return We}ii.parse=function(E,z){if(2!==E.length)return z.error("Expected one argument.");var K=E[1];if("object"!=typeof K||Array.isArray(K))return z.error("Collator options argument must be an object.");var ce=z.parse(void 0!==K["case-sensitive"]&&K["case-sensitive"],1,Ut);if(!ce)return null;var xe=z.parse(void 0!==K["diacritic-sensitive"]&&K["diacritic-sensitive"],1,Ut);if(!xe)return null;var Ae=null;return K.locale&&!(Ae=z.parse(K.locale,1,Tt))?null:new ii(ce,xe,Ae)},ii.prototype.evaluate=function(E){return new pn(this.caseSensitive.evaluate(E),this.diacriticSensitive.evaluate(E),this.locale?this.locale.evaluate(E):null)},ii.prototype.eachChild=function(E){E(this.caseSensitive),E(this.diacriticSensitive),this.locale&&E(this.locale)},ii.prototype.outputDefined=function(){return!1},ii.prototype.serialize=function(){var E={};return E["case-sensitive"]=this.caseSensitive.serialize(),E["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(E.locale=this.locale.serialize()),["collator",E]};var qn=function(E,z){this.type=Ut,this.geojson=E,this.geometries=z};function jr(E){if(E instanceof wr&&("get"===E.name&&1===E.args.length||"feature-state"===E.name||"has"===E.name&&1===E.args.length||"properties"===E.name||"geometry-type"===E.name||"id"===E.name||/^filter-/.test(E.name))||E instanceof qn)return!1;var z=!0;return E.eachChild(function(K){z&&!jr(K)&&(z=!1)}),z}function tr(E){if(E instanceof wr&&"feature-state"===E.name)return!1;var z=!0;return E.eachChild(function(K){z&&!tr(K)&&(z=!1)}),z}function ur(E,z){if(E instanceof wr&&z.indexOf(E.name)>=0)return!1;var K=!0;return E.eachChild(function(ce){K&&!ur(ce,z)&&(K=!1)}),K}qn.parse=function(E,z){if(2!==E.length)return z.error("'within' expression requires exactly one argument, but found "+(E.length-1)+" instead.");if(fr(E[1])){var K=E[1];if("FeatureCollection"===K.type)for(var ce=0;ce<K.features.length;++ce){var xe=K.features[ce].geometry.type;if("Polygon"===xe||"MultiPolygon"===xe)return new qn(K,K.features[ce].geometry)}else if("Feature"===K.type){var Ae=K.geometry.type;if("Polygon"===Ae||"MultiPolygon"===Ae)return new qn(K,K.geometry)}else if("Polygon"===K.type||"MultiPolygon"===K.type)return new qn(K,K)}return z.error("'within' expression requires valid geojson object that contains polygon geometry type.")},qn.prototype.evaluate=function(E){if(null!=E.geometry()&&null!=E.canonicalID()){if("Point"===E.geometryType())return function(z,K){var ce=[1/0,1/0,-1/0,-1/0],xe=[1/0,1/0,-1/0,-1/0],Ae=z.canonicalID();if("Polygon"===K.type){var Re=Wn(K.coordinates,xe,Ae),We=Ir(z.geometry(),ce,xe,Ae);if(!jt(ce,xe))return!1;for(var ot=0,bt=We;ot<bt.length;ot+=1)if(!Hn(bt[ot],Re))return!1}if("MultiPolygon"===K.type){var kt=jn(K.coordinates,xe,Ae),Xt=Ir(z.geometry(),ce,xe,Ae);if(!jt(ce,xe))return!1;for(var cn=0,nn=Xt;cn<nn.length;cn+=1)if(!yr(nn[cn],kt))return!1}return!0}(E,this.geometries);if("LineString"===E.geometryType())return function(z,K){var ce=[1/0,1/0,-1/0,-1/0],xe=[1/0,1/0,-1/0,-1/0],Ae=z.canonicalID();if("Polygon"===K.type){var Re=Wn(K.coordinates,xe,Ae),We=Vr(z.geometry(),ce,xe,Ae);if(!jt(ce,xe))return!1;for(var ot=0,bt=We;ot<bt.length;ot+=1)if(!Nn(bt[ot],Re))return!1}if("MultiPolygon"===K.type){var kt=jn(K.coordinates,xe,Ae),Xt=Vr(z.geometry(),ce,xe,Ae);if(!jt(ce,xe))return!1;for(var cn=0,nn=Xt;cn<nn.length;cn+=1)if(!Zn(nn[cn],kt))return!1}return!0}(E,this.geometries)}return!1},qn.prototype.eachChild=function(){},qn.prototype.outputDefined=function(){return!0},qn.prototype.serialize=function(){return["within",this.geojson]};var Cr=function(E,z){this.type=z.type,this.name=E,this.boundExpression=z};Cr.parse=function(E,z){if(2!==E.length||"string"!=typeof E[1])return z.error("'var' expression requires exactly one string literal argument.");var K=E[1];return z.scope.has(K)?new Cr(K,z.scope.get(K)):z.error('Unknown variable "'+K+'". Make sure "'+K+'" has been bound in an enclosing "let" expression before using it.',1)},Cr.prototype.evaluate=function(E){return this.boundExpression.evaluate(E)},Cr.prototype.eachChild=function(){},Cr.prototype.outputDefined=function(){return!1},Cr.prototype.serialize=function(){return["var",this.name]};var Fr=function(E,z,K,ce,xe){void 0===z&&(z=[]),void 0===ce&&(ce=new Vt),void 0===xe&&(xe=[]),this.registry=E,this.path=z,this.key=z.map(function(Ae){return"["+Ae+"]"}).join(""),this.scope=ce,this.errors=xe,this.expectedType=K};function Zr(E,z){for(var K,xe=E.length-1,Ae=0,Re=xe,We=0;Ae<=Re;)if((K=E[We=Math.floor((Ae+Re)/2)])<=z){if(We===xe||z<E[We+1])return We;Ae=We+1}else{if(!(K>z))throw new Ar("Input is not a number.");Re=We-1}return 0}Fr.prototype.parse=function(E,z,K,ce,xe){return void 0===xe&&(xe={}),z?this.concat(z,K,ce)._parse(E,xe):this._parse(E,xe)},Fr.prototype._parse=function(E,z){function K(bt,kt,Xt){return"assert"===Xt?new Fn(kt,[bt]):"coerce"===Xt?new ir(kt,[bt]):bt}if(null!==E&&"string"!=typeof E&&"boolean"!=typeof E&&"number"!=typeof E||(E=["literal",E]),Array.isArray(E)){if(0===E.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var ce=E[0];if("string"!=typeof ce)return this.error("Expression name must be a string, but found "+typeof ce+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var xe=this.registry[ce];if(xe){var Ae=xe.parse(E,this);if(!Ae)return null;if(this.expectedType){var Re=this.expectedType,We=Ae.type;if("string"!==Re.kind&&"number"!==Re.kind&&"boolean"!==Re.kind&&"object"!==Re.kind&&"array"!==Re.kind||"value"!==We.kind)if("color"!==Re.kind&&"formatted"!==Re.kind&&"resolvedImage"!==Re.kind||"value"!==We.kind&&"string"!==We.kind){if(this.checkSubtype(Re,We))return null}else Ae=K(Ae,Re,z.typeAnnotation||"coerce");else Ae=K(Ae,Re,z.typeAnnotation||"assert")}if(!(Ae instanceof ti)&&"resolvedImage"!==Ae.type.kind&&function bt(kt){if(kt instanceof Cr)return bt(kt.boundExpression);if(kt instanceof wr&&"error"===kt.name||kt instanceof ii||kt instanceof qn)return!1;var Xt=kt instanceof ir||kt instanceof Fn,cn=!0;return kt.eachChild(function(nn){cn=Xt?cn&&bt(nn):cn&&nn instanceof ti}),!!cn&&jr(kt)&&ur(kt,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}(Ae)){var ot=new Mr;try{Ae=new ti(Ae.type,Ae.evaluate(ot))}catch(bt){return this.error(bt.message),null}}return Ae}return this.error('Unknown expression "'+ce+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(void 0===E?"'undefined' value invalid. Use null instead.":"object"==typeof E?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof E+" instead.")},Fr.prototype.concat=function(E,z,K){var ce="number"==typeof E?this.path.concat(E):this.path,xe=K?this.scope.concat(K):this.scope;return new Fr(this.registry,ce,z||null,xe,this.errors)},Fr.prototype.error=function(E){for(var z=[],K=arguments.length-1;K-- >0;)z[K]=arguments[K+1];var ce=""+this.key+z.map(function(xe){return"["+xe+"]"}).join("");this.errors.push(new yt(ce,E))},Fr.prototype.checkSubtype=function(E,z){var K=on(E,z);return K&&this.error(K),K};var Ii=function(E,z,K){this.type=E,this.input=z,this.labels=[],this.outputs=[];for(var ce=0,xe=K;ce<xe.length;ce+=1){var Ae=xe[ce],We=Ae[1];this.labels.push(Ae[0]),this.outputs.push(We)}};function gi(E,z,K){return E*(1-K)+z*K}Ii.parse=function(E,z){if(E.length-1<4)return z.error("Expected at least 4 arguments, but found only "+(E.length-1)+".");if((E.length-1)%2!=0)return z.error("Expected an even number of arguments.");var K=z.parse(E[1],1,rt);if(!K)return null;var ce=[],xe=null;z.expectedType&&"value"!==z.expectedType.kind&&(xe=z.expectedType);for(var Ae=1;Ae<E.length;Ae+=2){var Re=1===Ae?-1/0:E[Ae],We=E[Ae+1],ot=Ae,bt=Ae+1;if("number"!=typeof Re)return z.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ot);if(ce.length&&ce[ce.length-1][0]>=Re)return z.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',ot);var kt=z.parse(We,bt,xe);if(!kt)return null;xe=xe||kt.type,ce.push([Re,kt])}return new Ii(xe,K,ce)},Ii.prototype.evaluate=function(E){var z=this.labels,K=this.outputs;if(1===z.length)return K[0].evaluate(E);var ce=this.input.evaluate(E);if(ce<=z[0])return K[0].evaluate(E);var xe=z.length;return ce>=z[xe-1]?K[xe-1].evaluate(E):K[Zr(z,ce)].evaluate(E)},Ii.prototype.eachChild=function(E){E(this.input);for(var z=0,K=this.outputs;z<K.length;z+=1)E(K[z])},Ii.prototype.outputDefined=function(){return this.outputs.every(function(E){return E.outputDefined()})},Ii.prototype.serialize=function(){for(var E=["step",this.input.serialize()],z=0;z<this.labels.length;z++)z>0&&E.push(this.labels[z]),E.push(this.outputs[z].serialize());return E};var zr=Object.freeze({__proto__:null,number:gi,color:function(E,z,K){return new Tn(gi(E.r,z.r,K),gi(E.g,z.g,K),gi(E.b,z.b,K),gi(E.a,z.a,K))},array:function(E,z,K){return E.map(function(ce,xe){return gi(ce,z[xe],K)})}}),Ci=6/29,qi=3*Ci*Ci,ki=Math.PI/180,Do=180/Math.PI;function $a(E){return E>.008856451679035631?Math.pow(E,1/3):E/qi+4/29}function Ka(E){return E>Ci?E*E*E:qi*(E-4/29)}function ga(E){return 255*(E<=.0031308?12.92*E:1.055*Math.pow(E,1/2.4)-.055)}function Na(E){return(E/=255)<=.04045?E/12.92:Math.pow((E+.055)/1.055,2.4)}function zo(E){var z=Na(E.r),K=Na(E.g),ce=Na(E.b),xe=$a((.4124564*z+.3575761*K+.1804375*ce)/.95047),Ae=$a((.2126729*z+.7151522*K+.072175*ce)/1);return{l:116*Ae-16,a:500*(xe-Ae),b:200*(Ae-$a((.0193339*z+.119192*K+.9503041*ce)/1.08883)),alpha:E.a}}function Ho(E){var z=(E.l+16)/116,K=isNaN(E.a)?z:z+E.a/500,ce=isNaN(E.b)?z:z-E.b/200;return z=1*Ka(z),K=.95047*Ka(K),ce=1.08883*Ka(ce),new Tn(ga(3.2404542*K-1.5371385*z-.4985314*ce),ga(-.969266*K+1.8760108*z+.041556*ce),ga(.0556434*K-.2040259*z+1.0572252*ce),E.alpha)}function Sl(E,z,K){var ce=z-E;return E+K*(ce>180||ce<-180?ce-360*Math.round(ce/360):ce)}var ls={forward:zo,reverse:Ho,interpolate:function(E,z,K){return{l:gi(E.l,z.l,K),a:gi(E.a,z.a,K),b:gi(E.b,z.b,K),alpha:gi(E.alpha,z.alpha,K)}}},yo={forward:function(E){var z=zo(E),K=z.l,ce=z.a,xe=z.b,Ae=Math.atan2(xe,ce)*Do;return{h:Ae<0?Ae+360:Ae,c:Math.sqrt(ce*ce+xe*xe),l:K,alpha:E.a}},reverse:function(E){var z=E.h*ki,K=E.c;return Ho({l:E.l,a:Math.cos(z)*K,b:Math.sin(z)*K,alpha:E.alpha})},interpolate:function(E,z,K){return{h:Sl(E.h,z.h,K),c:gi(E.c,z.c,K),l:gi(E.l,z.l,K),alpha:gi(E.alpha,z.alpha,K)}}},dl=Object.freeze({__proto__:null,lab:ls,hcl:yo}),Ba=function(E,z,K,ce,xe){this.type=E,this.operator=z,this.interpolation=K,this.input=ce,this.labels=[],this.outputs=[];for(var Ae=0,Re=xe;Ae<Re.length;Ae+=1){var We=Re[Ae],bt=We[1];this.labels.push(We[0]),this.outputs.push(bt)}};function Ws(E,z,K,ce){var xe=ce-K,Ae=E-K;return 0===xe?0:1===z?Ae/xe:(Math.pow(z,Ae)-1)/(Math.pow(z,xe)-1)}Ba.interpolationFactor=function(E,z,K,ce){var xe=0;if("exponential"===E.name)xe=Ws(z,E.base,K,ce);else if("linear"===E.name)xe=Ws(z,1,K,ce);else if("cubic-bezier"===E.name){var Ae=E.controlPoints;xe=new a(Ae[0],Ae[1],Ae[2],Ae[3]).solve(Ws(z,1,K,ce))}return xe},Ba.parse=function(E,z){var K=E[0],ce=E[1],xe=E[2],Ae=E.slice(3);if(!Array.isArray(ce)||0===ce.length)return z.error("Expected an interpolation type expression.",1);if("linear"===ce[0])ce={name:"linear"};else if("exponential"===ce[0]){var Re=ce[1];if("number"!=typeof Re)return z.error("Exponential interpolation requires a numeric base.",1,1);ce={name:"exponential",base:Re}}else{if("cubic-bezier"!==ce[0])return z.error("Unknown interpolation type "+String(ce[0]),1,0);var We=ce.slice(1);if(4!==We.length||We.some(function(Xn){return"number"!=typeof Xn||Xn<0||Xn>1}))return z.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ce={name:"cubic-bezier",controlPoints:We}}if(E.length-1<4)return z.error("Expected at least 4 arguments, but found only "+(E.length-1)+".");if((E.length-1)%2!=0)return z.error("Expected an even number of arguments.");if(!(xe=z.parse(xe,2,rt)))return null;var ot=[],bt=null;"interpolate-hcl"===K||"interpolate-lab"===K?bt=Wt:z.expectedType&&"value"!==z.expectedType.kind&&(bt=z.expectedType);for(var kt=0;kt<Ae.length;kt+=2){var Xt=Ae[kt],cn=Ae[kt+1],nn=kt+3,vn=kt+4;if("number"!=typeof Xt)return z.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',nn);if(ot.length&&ot[ot.length-1][0]>=Xt)return z.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',nn);var Pn=z.parse(cn,vn,bt);if(!Pn)return null;bt=bt||Pn.type,ot.push([Xt,Pn])}return"number"===bt.kind||"color"===bt.kind||"array"===bt.kind&&"number"===bt.itemType.kind&&"number"==typeof bt.N?new Ba(bt,K,ce,xe,ot):z.error("Type "+_n(bt)+" is not interpolatable.")},Ba.prototype.evaluate=function(E){var z=this.labels,K=this.outputs;if(1===z.length)return K[0].evaluate(E);var ce=this.input.evaluate(E);if(ce<=z[0])return K[0].evaluate(E);var xe=z.length;if(ce>=z[xe-1])return K[xe-1].evaluate(E);var Ae=Zr(z,ce),ot=Ba.interpolationFactor(this.interpolation,ce,z[Ae],z[Ae+1]),bt=K[Ae].evaluate(E),kt=K[Ae+1].evaluate(E);return"interpolate"===this.operator?zr[this.type.kind.toLowerCase()](bt,kt,ot):"interpolate-hcl"===this.operator?yo.reverse(yo.interpolate(yo.forward(bt),yo.forward(kt),ot)):ls.reverse(ls.interpolate(ls.forward(bt),ls.forward(kt),ot))},Ba.prototype.eachChild=function(E){E(this.input);for(var z=0,K=this.outputs;z<K.length;z+=1)E(K[z])},Ba.prototype.outputDefined=function(){return this.outputs.every(function(E){return E.outputDefined()})},Ba.prototype.serialize=function(){var E;E="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var z=[this.operator,E,this.input.serialize()],K=0;K<this.labels.length;K++)z.push(this.labels[K],this.outputs[K].serialize());return z};var Os=function(E,z){this.type=E,this.args=z};Os.parse=function(E,z){if(E.length<2)return z.error("Expectected at least one argument.");var K=null,ce=z.expectedType;ce&&"value"!==ce.kind&&(K=ce);for(var xe=[],Ae=0,Re=E.slice(1);Ae<Re.length;Ae+=1){var ot=z.parse(Re[Ae],1+xe.length,K,void 0,{typeAnnotation:"omit"});if(!ot)return null;K=K||ot.type,xe.push(ot)}var bt=ce&&xe.some(function(kt){return on(ce,kt.type)});return new Os(bt?He:K,xe)},Os.prototype.evaluate=function(E){for(var z,K=null,ce=0,xe=0,Ae=this.args;xe<Ae.length&&(ce++,(K=Ae[xe].evaluate(E))&&K instanceof In&&!K.available&&(z||(z=K.name),K=null,ce===this.args.length&&(K=z)),null===K);xe+=1);return K},Os.prototype.eachChild=function(E){this.args.forEach(E)},Os.prototype.outputDefined=function(){return this.args.every(function(E){return E.outputDefined()})},Os.prototype.serialize=function(){var E=["coalesce"];return this.eachChild(function(z){E.push(z.serialize())}),E};var sa=function(E,z){this.type=z.type,this.bindings=[].concat(E),this.result=z};sa.prototype.evaluate=function(E){return this.result.evaluate(E)},sa.prototype.eachChild=function(E){for(var z=0,K=this.bindings;z<K.length;z+=1)E(K[z][1]);E(this.result)},sa.parse=function(E,z){if(E.length<4)return z.error("Expected at least 3 arguments, but found "+(E.length-1)+" instead.");for(var K=[],ce=1;ce<E.length-1;ce+=2){var xe=E[ce];if("string"!=typeof xe)return z.error("Expected string, but found "+typeof xe+" instead.",ce);if(/[^a-zA-Z0-9_]/.test(xe))return z.error("Variable names must contain only alphanumeric characters or '_'.",ce);var Ae=z.parse(E[ce+1],ce+1);if(!Ae)return null;K.push([xe,Ae])}var Re=z.parse(E[E.length-1],E.length-1,z.expectedType,K);return Re?new sa(K,Re):null},sa.prototype.outputDefined=function(){return this.result.outputDefined()},sa.prototype.serialize=function(){for(var E=["let"],z=0,K=this.bindings;z<K.length;z+=1){var ce=K[z];E.push(ce[0],ce[1].serialize())}return E.push(this.result.serialize()),E};var vs=function(E,z,K){this.type=E,this.index=z,this.input=K};vs.parse=function(E,z){if(3!==E.length)return z.error("Expected 2 arguments, but found "+(E.length-1)+" instead.");var K=z.parse(E[1],1,rt),ce=z.parse(E[2],2,Kt(z.expectedType||He));return K&&ce?new vs(ce.type.itemType,K,ce):null},vs.prototype.evaluate=function(E){var z=this.index.evaluate(E),K=this.input.evaluate(E);if(z<0)throw new Ar("Array index out of bounds: "+z+" < 0.");if(z>=K.length)throw new Ar("Array index out of bounds: "+z+" > "+(K.length-1)+".");if(z!==Math.floor(z))throw new Ar("Array index must be an integer, but found "+z+" instead.");return K[z]},vs.prototype.eachChild=function(E){E(this.index),E(this.input)},vs.prototype.outputDefined=function(){return!1},vs.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var Rs=function(E,z){this.type=Ut,this.needle=E,this.haystack=z};Rs.parse=function(E,z){if(3!==E.length)return z.error("Expected 2 arguments, but found "+(E.length-1)+" instead.");var K=z.parse(E[1],1,He),ce=z.parse(E[2],2,He);return K&&ce?wn(K.type,[Ut,Tt,rt,Nt,He])?new Rs(K,ce):z.error("Expected first argument to be of type boolean, string, number or null, but found "+_n(K.type)+" instead"):null},Rs.prototype.evaluate=function(E){var z=this.needle.evaluate(E),K=this.haystack.evaluate(E);if(!K)return!1;if(!On(z,["boolean","string","number","null"]))throw new Ar("Expected first argument to be of type boolean, string, number or null, but found "+_n(rr(z))+" instead.");if(!On(K,["string","array"]))throw new Ar("Expected second argument to be of type array or string, but found "+_n(rr(K))+" instead.");return K.indexOf(z)>=0},Rs.prototype.eachChild=function(E){E(this.needle),E(this.haystack)},Rs.prototype.outputDefined=function(){return!0},Rs.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var es=function(E,z,K){this.type=rt,this.needle=E,this.haystack=z,this.fromIndex=K};es.parse=function(E,z){if(E.length<=2||E.length>=5)return z.error("Expected 3 or 4 arguments, but found "+(E.length-1)+" instead.");var K=z.parse(E[1],1,He),ce=z.parse(E[2],2,He);if(!K||!ce)return null;if(!wn(K.type,[Ut,Tt,rt,Nt,He]))return z.error("Expected first argument to be of type boolean, string, number or null, but found "+_n(K.type)+" instead");if(4===E.length){var xe=z.parse(E[3],3,rt);return xe?new es(K,ce,xe):null}return new es(K,ce)},es.prototype.evaluate=function(E){var z=this.needle.evaluate(E),K=this.haystack.evaluate(E);if(!On(z,["boolean","string","number","null"]))throw new Ar("Expected first argument to be of type boolean, string, number or null, but found "+_n(rr(z))+" instead.");if(!On(K,["string","array"]))throw new Ar("Expected second argument to be of type array or string, but found "+_n(rr(K))+" instead.");if(this.fromIndex){var ce=this.fromIndex.evaluate(E);return K.indexOf(z,ce)}return K.indexOf(z)},es.prototype.eachChild=function(E){E(this.needle),E(this.haystack),this.fromIndex&&E(this.fromIndex)},es.prototype.outputDefined=function(){return!1},es.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var E=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),E]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var pa=function(E,z,K,ce,xe,Ae){this.inputType=E,this.type=z,this.input=K,this.cases=ce,this.outputs=xe,this.otherwise=Ae};pa.parse=function(E,z){if(E.length<5)return z.error("Expected at least 4 arguments, but found only "+(E.length-1)+".");if(E.length%2!=1)return z.error("Expected an even number of arguments.");var K,ce;z.expectedType&&"value"!==z.expectedType.kind&&(ce=z.expectedType);for(var xe={},Ae=[],Re=2;Re<E.length-1;Re+=2){var We=E[Re],ot=E[Re+1];Array.isArray(We)||(We=[We]);var bt=z.concat(Re);if(0===We.length)return bt.error("Expected at least one branch label.");for(var kt=0,Xt=We;kt<Xt.length;kt+=1){var cn=Xt[kt];if("number"!=typeof cn&&"string"!=typeof cn)return bt.error("Branch labels must be numbers or strings.");if("number"==typeof cn&&Math.abs(cn)>Number.MAX_SAFE_INTEGER)return bt.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof cn&&Math.floor(cn)!==cn)return bt.error("Numeric branch labels must be integer values.");if(K){if(bt.checkSubtype(K,rr(cn)))return null}else K=rr(cn);if(void 0!==xe[String(cn)])return bt.error("Branch labels must be unique.");xe[String(cn)]=Ae.length}var nn=z.parse(ot,Re,ce);if(!nn)return null;ce=ce||nn.type,Ae.push(nn)}var vn=z.parse(E[1],1,He);if(!vn)return null;var Pn=z.parse(E[E.length-1],E.length-1,ce);return Pn?"value"!==vn.type.kind&&z.concat(1).checkSubtype(K,vn.type)?null:new pa(K,ce,vn,xe,Ae,Pn):null},pa.prototype.evaluate=function(E){var z=this.input.evaluate(E);return(rr(z)===this.inputType&&this.outputs[this.cases[z]]||this.otherwise).evaluate(E)},pa.prototype.eachChild=function(E){E(this.input),this.outputs.forEach(E),E(this.otherwise)},pa.prototype.outputDefined=function(){return this.outputs.every(function(E){return E.outputDefined()})&&this.otherwise.outputDefined()},pa.prototype.serialize=function(){for(var E=this,z=["match",this.input.serialize()],K=[],ce={},xe=0,Ae=Object.keys(this.cases).sort();xe<Ae.length;xe+=1){var Re=Ae[xe];void 0===(Xt=ce[this.cases[Re]])?(ce[this.cases[Re]]=K.length,K.push([this.cases[Re],[Re]])):K[Xt][1].push(Re)}for(var We=function(nn){return"number"===E.inputType.kind?Number(nn):nn},ot=0,bt=K;ot<bt.length;ot+=1){var kt=bt[ot],Xt=kt[0],cn=kt[1];z.push(1===cn.length?We(cn[0]):cn.map(We)),z.push(this.outputs[outputIndex$1].serialize())}return z.push(this.otherwise.serialize()),z};var oo=function(E,z,K){this.type=E,this.branches=z,this.otherwise=K};oo.parse=function(E,z){if(E.length<4)return z.error("Expected at least 3 arguments, but found only "+(E.length-1)+".");if(E.length%2!=0)return z.error("Expected an odd number of arguments.");var K;z.expectedType&&"value"!==z.expectedType.kind&&(K=z.expectedType);for(var ce=[],xe=1;xe<E.length-1;xe+=2){var Ae=z.parse(E[xe],xe,Ut);if(!Ae)return null;var Re=z.parse(E[xe+1],xe+1,K);if(!Re)return null;ce.push([Ae,Re]),K=K||Re.type}var We=z.parse(E[E.length-1],E.length-1,K);return We?new oo(K,ce,We):null},oo.prototype.evaluate=function(E){for(var z=0,K=this.branches;z<K.length;z+=1){var ce=K[z],Ae=ce[1];if(ce[0].evaluate(E))return Ae.evaluate(E)}return this.otherwise.evaluate(E)},oo.prototype.eachChild=function(E){for(var z=0,K=this.branches;z<K.length;z+=1){var ce=K[z],Ae=ce[1];E(ce[0]),E(Ae)}E(this.otherwise)},oo.prototype.outputDefined=function(){return this.branches.every(function(E){return E[1].outputDefined()})&&this.otherwise.outputDefined()},oo.prototype.serialize=function(){var E=["case"];return this.eachChild(function(z){E.push(z.serialize())}),E};var Zo=function(E,z,K,ce){this.type=E,this.input=z,this.beginIndex=K,this.endIndex=ce};function zl(E,z){return"=="===E||"!="===E?"boolean"===z.kind||"string"===z.kind||"number"===z.kind||"null"===z.kind||"value"===z.kind:"string"===z.kind||"number"===z.kind||"value"===z.kind}function ru(E,z,K,ce){return 0===ce.compare(z,K)}function wa(E,z,K){var ce="=="!==E&&"!="!==E;return function(){function xe(Ae,Re,We){this.type=Ut,this.lhs=Ae,this.rhs=Re,this.collator=We,this.hasUntypedArgument="value"===Ae.type.kind||"value"===Re.type.kind}return xe.parse=function(Ae,Re){if(3!==Ae.length&&4!==Ae.length)return Re.error("Expected two or three arguments.");var We=Ae[0],ot=Re.parse(Ae[1],1,He);if(!ot)return null;if(!zl(We,ot.type))return Re.concat(1).error('"'+We+"\" comparisons are not supported for type '"+_n(ot.type)+"'.");var bt=Re.parse(Ae[2],2,He);if(!bt)return null;if(!zl(We,bt.type))return Re.concat(2).error('"'+We+"\" comparisons are not supported for type '"+_n(bt.type)+"'.");if(ot.type.kind!==bt.type.kind&&"value"!==ot.type.kind&&"value"!==bt.type.kind)return Re.error("Cannot compare types '"+_n(ot.type)+"' and '"+_n(bt.type)+"'.");ce&&("value"===ot.type.kind&&"value"!==bt.type.kind?ot=new Fn(bt.type,[ot]):"value"!==ot.type.kind&&"value"===bt.type.kind&&(bt=new Fn(ot.type,[bt])));var kt=null;if(4===Ae.length){if("string"!==ot.type.kind&&"string"!==bt.type.kind&&"value"!==ot.type.kind&&"value"!==bt.type.kind)return Re.error("Cannot use collator to compare non-string types.");if(!(kt=Re.parse(Ae[3],3,vt)))return null}return new xe(ot,bt,kt)},xe.prototype.evaluate=function(Ae){var Re=this.lhs.evaluate(Ae),We=this.rhs.evaluate(Ae);if(ce&&this.hasUntypedArgument){var ot=rr(Re),bt=rr(We);if(ot.kind!==bt.kind||"string"!==ot.kind&&"number"!==ot.kind)throw new Ar('Expected arguments for "'+E+'" to be (string, string) or (number, number), but found ('+ot.kind+", "+bt.kind+") instead.")}if(this.collator&&!ce&&this.hasUntypedArgument){var kt=rr(Re),Xt=rr(We);if("string"!==kt.kind||"string"!==Xt.kind)return z(Ae,Re,We)}return this.collator?K(Ae,Re,We,this.collator.evaluate(Ae)):z(Ae,Re,We)},xe.prototype.eachChild=function(Ae){Ae(this.lhs),Ae(this.rhs),this.collator&&Ae(this.collator)},xe.prototype.outputDefined=function(){return!0},xe.prototype.serialize=function(){var Ae=[E];return this.eachChild(function(Re){Ae.push(Re.serialize())}),Ae},xe}()}Zo.parse=function(E,z){if(E.length<=2||E.length>=5)return z.error("Expected 3 or 4 arguments, but found "+(E.length-1)+" instead.");var K=z.parse(E[1],1,He),ce=z.parse(E[2],2,rt);if(!K||!ce)return null;if(!wn(K.type,[Kt(He),Tt,He]))return z.error("Expected first argument to be of type array or string, but found "+_n(K.type)+" instead");if(4===E.length){var xe=z.parse(E[3],3,rt);return xe?new Zo(K.type,K,ce,xe):null}return new Zo(K.type,K,ce)},Zo.prototype.evaluate=function(E){var z=this.input.evaluate(E),K=this.beginIndex.evaluate(E);if(!On(z,["string","array"]))throw new Ar("Expected first argument to be of type array or string, but found "+_n(rr(z))+" instead.");if(this.endIndex){var ce=this.endIndex.evaluate(E);return z.slice(K,ce)}return z.slice(K)},Zo.prototype.eachChild=function(E){E(this.input),E(this.beginIndex),this.endIndex&&E(this.endIndex)},Zo.prototype.outputDefined=function(){return!1},Zo.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var E=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),E]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var pl=wa("==",function(E,z,K){return z===K},ru),El=wa("!=",function(E,z,K){return z!==K},function(E,z,K,ce){return!ru(0,z,K,ce)}),Go=wa("<",function(E,z,K){return z<K},function(E,z,K,ce){return ce.compare(z,K)<0}),vu=wa(">",function(E,z,K){return z>K},function(E,z,K,ce){return ce.compare(z,K)>0}),Yl=wa("<=",function(E,z,K){return z<=K},function(E,z,K,ce){return ce.compare(z,K)<=0}),iu=wa(">=",function(E,z,K){return z>=K},function(E,z,K,ce){return ce.compare(z,K)>=0}),Fs=function(E,z,K,ce,xe){this.type=Tt,this.number=E,this.locale=z,this.currency=K,this.minFractionDigits=ce,this.maxFractionDigits=xe};Fs.parse=function(E,z){if(3!==E.length)return z.error("Expected two arguments.");var K=z.parse(E[1],1,rt);if(!K)return null;var ce=E[2];if("object"!=typeof ce||Array.isArray(ce))return z.error("NumberFormat options argument must be an object.");var xe=null;if(ce.locale&&!(xe=z.parse(ce.locale,1,Tt)))return null;var Ae=null;if(ce.currency&&!(Ae=z.parse(ce.currency,1,Tt)))return null;var Re=null;if(ce["min-fraction-digits"]&&!(Re=z.parse(ce["min-fraction-digits"],1,rt)))return null;var We=null;return ce["max-fraction-digits"]&&!(We=z.parse(ce["max-fraction-digits"],1,rt))?null:new Fs(K,xe,Ae,Re,We)},Fs.prototype.evaluate=function(E){return new Intl.NumberFormat(this.locale?this.locale.evaluate(E):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(E):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(E):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(E):void 0}).format(this.number.evaluate(E))},Fs.prototype.eachChild=function(E){E(this.number),this.locale&&E(this.locale),this.currency&&E(this.currency),this.minFractionDigits&&E(this.minFractionDigits),this.maxFractionDigits&&E(this.maxFractionDigits)},Fs.prototype.outputDefined=function(){return!1},Fs.prototype.serialize=function(){var E={};return this.locale&&(E.locale=this.locale.serialize()),this.currency&&(E.currency=this.currency.serialize()),this.minFractionDigits&&(E["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(E["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),E]};var Pa=function(E){this.type=rt,this.input=E};Pa.parse=function(E,z){if(2!==E.length)return z.error("Expected 1 argument, but found "+(E.length-1)+" instead.");var K=z.parse(E[1],1);return K?"array"!==K.type.kind&&"string"!==K.type.kind&&"value"!==K.type.kind?z.error("Expected argument of type string or array, but found "+_n(K.type)+" instead."):new Pa(K):null},Pa.prototype.evaluate=function(E){var z=this.input.evaluate(E);if("string"==typeof z||Array.isArray(z))return z.length;throw new Ar("Expected value to be of type string or array, but found "+_n(rr(z))+" instead.")},Pa.prototype.eachChild=function(E){E(this.input)},Pa.prototype.outputDefined=function(){return!1},Pa.prototype.serialize=function(){var E=["length"];return this.eachChild(function(z){E.push(z.serialize())}),E};var ml={"==":pl,"!=":El,">":vu,"<":Go,">=":iu,"<=":Yl,array:Fn,at:vs,boolean:Fn,case:oo,coalesce:Os,collator:ii,format:Rn,image:hr,in:Rs,"index-of":es,interpolate:Ba,"interpolate-hcl":Ba,"interpolate-lab":Ba,length:Pa,let:sa,literal:ti,match:pa,number:Fn,"number-format":Fs,object:Fn,slice:Zo,step:Ii,string:Fn,"to-boolean":ir,"to-color":ir,"to-number":ir,"to-string":ir,var:Cr,within:qn};function el(E,z){var K=z[0],ce=z[1],xe=z[2],Ae=z[3];K=K.evaluate(E),ce=ce.evaluate(E),xe=xe.evaluate(E);var Re=Ae?Ae.evaluate(E):1,We=sr(K,ce,xe,Re);if(We)throw new Ar(We);return new Tn(K/255*Re,ce/255*Re,xe/255*Re,Re)}function ai(E,z){return E in z}function No(E,z){var K=z[E];return void 0===K?null:K}function Ja(E){return{type:E}}function zs(E){return{result:"success",value:E}}function Bo(E){return{result:"error",value:E}}function jo(E){return"data-driven"===E["property-type"]||"cross-faded-data-driven"===E["property-type"]}function Ml(E){return!!E.expression&&E.expression.parameters.indexOf("zoom")>-1}function ks(E){return!!E.expression&&E.expression.interpolated}function Da(E){return E instanceof Number?"number":E instanceof String?"string":E instanceof Boolean?"boolean":Array.isArray(E)?"array":null===E?"null":typeof E}function Ye(E){return"object"==typeof E&&null!==E&&!Array.isArray(E)}function Je(E){return E}function st(E,z,K){return void 0!==E?E:void 0!==z?z:void 0!==K?K:void 0}function mt(E,z,K,ce,xe){return st(typeof K===xe?ce[K]:void 0,E.default,z.default)}function Mt(E,z,K){if("number"!==Da(K))return st(E.default,z.default);var ce=E.stops.length;if(1===ce||K<=E.stops[0][0])return E.stops[0][1];if(K>=E.stops[ce-1][0])return E.stops[ce-1][1];var xe=Zr(E.stops.map(function(Ae){return Ae[0]}),K);return E.stops[xe][1]}function pt(E,z,K){var ce=void 0!==E.base?E.base:1;if("number"!==Da(K))return st(E.default,z.default);var xe=E.stops.length;if(1===xe||K<=E.stops[0][0])return E.stops[0][1];if(K>=E.stops[xe-1][0])return E.stops[xe-1][1];var cn,nn,Pn,Xn,Ae=Zr(E.stops.map(function(Xt){return Xt[0]}),K),Re=(cn=ce,Xn=K-(nn=E.stops[Ae][0]),0==(Pn=E.stops[Ae+1][0]-nn)?0:1===cn?Xn/Pn:(Math.pow(cn,Xn)-1)/(Math.pow(cn,Pn)-1)),We=E.stops[Ae][1],ot=E.stops[Ae+1][1],bt=zr[z.type]||Je;if(E.colorSpace&&"rgb"!==E.colorSpace){var kt=dl[E.colorSpace];bt=function(Xt,cn){return kt.reverse(kt.interpolate(kt.forward(Xt),kt.forward(cn),Re))}}return"function"==typeof We.evaluate?{evaluate:function(){for(var Xt=[],cn=arguments.length;cn--;)Xt[cn]=arguments[cn];var nn=We.evaluate.apply(void 0,Xt),vn=ot.evaluate.apply(void 0,Xt);if(void 0!==nn&&void 0!==vn)return bt(nn,vn,Re)}}:bt(We,ot,Re)}function St(E,z,K){return"color"===z.type?K=Tn.parse(K):"formatted"===z.type?K=Un.fromString(K.toString()):"resolvedImage"===z.type?K=In.fromString(K.toString()):Da(K)===z.type||"enum"===z.type&&z.values[K]||(K=void 0),st(K,E.default,z.default)}wr.register(ml,{error:[{kind:"error"},[Tt],function(E,z){throw new Ar(z[0].evaluate(E))}],typeof:[Tt,[He],function(E,z){return _n(rr(z[0].evaluate(E)))}],"to-rgba":[Kt(rt,4),[Wt],function(E,z){return z[0].evaluate(E).toArray()}],rgb:[Wt,[rt,rt,rt],el],rgba:[Wt,[rt,rt,rt,rt],el],has:{type:Ut,overloads:[[[Tt],function(E,z){return ai(z[0].evaluate(E),E.properties())}],[[Tt,sn],function(E,z){var ce=z[1];return ai(z[0].evaluate(E),ce.evaluate(E))}]]},get:{type:He,overloads:[[[Tt],function(E,z){return No(z[0].evaluate(E),E.properties())}],[[Tt,sn],function(E,z){var ce=z[1];return No(z[0].evaluate(E),ce.evaluate(E))}]]},"feature-state":[He,[Tt],function(E,z){return No(z[0].evaluate(E),E.featureState||{})}],properties:[sn,[],function(E){return E.properties()}],"geometry-type":[Tt,[],function(E){return E.geometryType()}],id:[He,[],function(E){return E.id()}],zoom:[rt,[],function(E){return E.globals.zoom}],"heatmap-density":[rt,[],function(E){return E.globals.heatmapDensity||0}],"line-progress":[rt,[],function(E){return E.globals.lineProgress||0}],accumulated:[He,[],function(E){return void 0===E.globals.accumulated?null:E.globals.accumulated}],"+":[rt,Ja(rt),function(E,z){for(var K=0,ce=0,xe=z;ce<xe.length;ce+=1)K+=xe[ce].evaluate(E);return K}],"*":[rt,Ja(rt),function(E,z){for(var K=1,ce=0,xe=z;ce<xe.length;ce+=1)K*=xe[ce].evaluate(E);return K}],"-":{type:rt,overloads:[[[rt,rt],function(E,z){var ce=z[1];return z[0].evaluate(E)-ce.evaluate(E)}],[[rt],function(E,z){return-z[0].evaluate(E)}]]},"/":[rt,[rt,rt],function(E,z){var ce=z[1];return z[0].evaluate(E)/ce.evaluate(E)}],"%":[rt,[rt,rt],function(E,z){var ce=z[1];return z[0].evaluate(E)%ce.evaluate(E)}],ln2:[rt,[],function(){return Math.LN2}],pi:[rt,[],function(){return Math.PI}],e:[rt,[],function(){return Math.E}],"^":[rt,[rt,rt],function(E,z){var ce=z[1];return Math.pow(z[0].evaluate(E),ce.evaluate(E))}],sqrt:[rt,[rt],function(E,z){return Math.sqrt(z[0].evaluate(E))}],log10:[rt,[rt],function(E,z){return Math.log(z[0].evaluate(E))/Math.LN10}],ln:[rt,[rt],function(E,z){return Math.log(z[0].evaluate(E))}],log2:[rt,[rt],function(E,z){return Math.log(z[0].evaluate(E))/Math.LN2}],sin:[rt,[rt],function(E,z){return Math.sin(z[0].evaluate(E))}],cos:[rt,[rt],function(E,z){return Math.cos(z[0].evaluate(E))}],tan:[rt,[rt],function(E,z){return Math.tan(z[0].evaluate(E))}],asin:[rt,[rt],function(E,z){return Math.asin(z[0].evaluate(E))}],acos:[rt,[rt],function(E,z){return Math.acos(z[0].evaluate(E))}],atan:[rt,[rt],function(E,z){return Math.atan(z[0].evaluate(E))}],min:[rt,Ja(rt),function(E,z){return Math.min.apply(Math,z.map(function(K){return K.evaluate(E)}))}],max:[rt,Ja(rt),function(E,z){return Math.max.apply(Math,z.map(function(K){return K.evaluate(E)}))}],abs:[rt,[rt],function(E,z){return Math.abs(z[0].evaluate(E))}],round:[rt,[rt],function(E,z){var K=z[0].evaluate(E);return K<0?-Math.round(-K):Math.round(K)}],floor:[rt,[rt],function(E,z){return Math.floor(z[0].evaluate(E))}],ceil:[rt,[rt],function(E,z){return Math.ceil(z[0].evaluate(E))}],"filter-==":[Ut,[Tt,He],function(E,z){var K=z[0],ce=z[1];return E.properties()[K.value]===ce.value}],"filter-id-==":[Ut,[He],function(E,z){var K=z[0];return E.id()===K.value}],"filter-type-==":[Ut,[Tt],function(E,z){var K=z[0];return E.geometryType()===K.value}],"filter-<":[Ut,[Tt,He],function(E,z){var K=z[0],ce=z[1],xe=E.properties()[K.value],Ae=ce.value;return typeof xe==typeof Ae&&xe<Ae}],"filter-id-<":[Ut,[He],function(E,z){var K=z[0],ce=E.id(),xe=K.value;return typeof ce==typeof xe&&ce<xe}],"filter->":[Ut,[Tt,He],function(E,z){var K=z[0],ce=z[1],xe=E.properties()[K.value],Ae=ce.value;return typeof xe==typeof Ae&&xe>Ae}],"filter-id->":[Ut,[He],function(E,z){var K=z[0],ce=E.id(),xe=K.value;return typeof ce==typeof xe&&ce>xe}],"filter-<=":[Ut,[Tt,He],function(E,z){var K=z[0],ce=z[1],xe=E.properties()[K.value],Ae=ce.value;return typeof xe==typeof Ae&&xe<=Ae}],"filter-id-<=":[Ut,[He],function(E,z){var K=z[0],ce=E.id(),xe=K.value;return typeof ce==typeof xe&&ce<=xe}],"filter->=":[Ut,[Tt,He],function(E,z){var K=z[0],ce=z[1],xe=E.properties()[K.value],Ae=ce.value;return typeof xe==typeof Ae&&xe>=Ae}],"filter-id->=":[Ut,[He],function(E,z){var K=z[0],ce=E.id(),xe=K.value;return typeof ce==typeof xe&&ce>=xe}],"filter-has":[Ut,[He],function(E,z){return z[0].value in E.properties()}],"filter-has-id":[Ut,[],function(E){return null!==E.id()&&void 0!==E.id()}],"filter-type-in":[Ut,[Kt(Tt)],function(E,z){return z[0].value.indexOf(E.geometryType())>=0}],"filter-id-in":[Ut,[Kt(He)],function(E,z){return z[0].value.indexOf(E.id())>=0}],"filter-in-small":[Ut,[Tt,Kt(He)],function(E,z){var K=z[0];return z[1].value.indexOf(E.properties()[K.value])>=0}],"filter-in-large":[Ut,[Tt,Kt(He)],function(E,z){var K=z[0],ce=z[1];return function(xe,Ae,Re,We){for(;Re<=We;){var ot=Re+We>>1;if(Ae[ot]===xe)return!0;Ae[ot]>xe?We=ot-1:Re=ot+1}return!1}(E.properties()[K.value],ce.value,0,ce.value.length-1)}],all:{type:Ut,overloads:[[[Ut,Ut],function(E,z){var ce=z[1];return z[0].evaluate(E)&&ce.evaluate(E)}],[Ja(Ut),function(E,z){for(var K=0,ce=z;K<ce.length;K+=1)if(!ce[K].evaluate(E))return!1;return!0}]]},any:{type:Ut,overloads:[[[Ut,Ut],function(E,z){var ce=z[1];return z[0].evaluate(E)||ce.evaluate(E)}],[Ja(Ut),function(E,z){for(var K=0,ce=z;K<ce.length;K+=1)if(ce[K].evaluate(E))return!0;return!1}]]},"!":[Ut,[Ut],function(E,z){return!z[0].evaluate(E)}],"is-supported-script":[Ut,[Tt],function(E,z){var ce=E.globals&&E.globals.isSupportedScript;return!ce||ce(z[0].evaluate(E))}],upcase:[Tt,[Tt],function(E,z){return z[0].evaluate(E).toUpperCase()}],downcase:[Tt,[Tt],function(E,z){return z[0].evaluate(E).toLowerCase()}],concat:[Tt,Ja(He),function(E,z){return z.map(function(K){return qr(K.evaluate(E))}).join("")}],"resolved-locale":[Tt,[vt],function(E,z){return z[0].evaluate(E).resolvedLocale()}]});var an=function(E,z){var K;this.expression=E,this._warningHistory={},this._evaluator=new Mr,this._defaultValue=z?"color"===(K=z).type&&Ye(K.default)?new Tn(0,0,0,0):"color"===K.type?Tn.parse(K.default)||null:void 0===K.default?null:K.default:null,this._enumValues=z&&"enum"===z.type?z.values:null};function fn(E){return Array.isArray(E)&&E.length>0&&"string"==typeof E[0]&&E[0]in ml}function ln(E,z){var xe,Ae,K=new Fr(ml,[],z?(Ae={color:Wt,string:Tt,number:rt,enum:Tt,boolean:Ut,formatted:Lt,resolvedImage:Gt},"array"===(xe=z).type?Kt(Ae[xe.value]||He,xe.length):Ae[xe.type]):void 0),ce=K.parse(E,void 0,void 0,void 0,z&&"string"===z.type?{typeAnnotation:"coerce"}:void 0);return ce?zs(new an(ce,z)):Bo(K.errors)}an.prototype.evaluateWithoutErrorHandling=function(E,z,K,ce,xe,Ae){return this._evaluator.globals=E,this._evaluator.feature=z,this._evaluator.featureState=K,this._evaluator.canonical=ce,this._evaluator.availableImages=xe||null,this._evaluator.formattedSection=Ae,this.expression.evaluate(this._evaluator)},an.prototype.evaluate=function(E,z,K,ce,xe,Ae){this._evaluator.globals=E,this._evaluator.feature=z||null,this._evaluator.featureState=K||null,this._evaluator.canonical=ce,this._evaluator.availableImages=xe||null,this._evaluator.formattedSection=Ae||null;try{var Re=this.expression.evaluate(this._evaluator);if(null==Re||"number"==typeof Re&&Re!=Re)return this._defaultValue;if(this._enumValues&&!(Re in this._enumValues))throw new Ar("Expected value to be one of "+Object.keys(this._enumValues).map(function(We){return JSON.stringify(We)}).join(", ")+", but found "+JSON.stringify(Re)+" instead.");return Re}catch(We){return this._warningHistory[We.message]||(this._warningHistory[We.message]=!0,"undefined"!=typeof console&&console.warn(We.message)),this._defaultValue}};var mn=function(E,z){this.kind=E,this._styleExpression=z,this.isStateDependent="constant"!==E&&!tr(z.expression)};mn.prototype.evaluateWithoutErrorHandling=function(E,z,K,ce,xe,Ae){return this._styleExpression.evaluateWithoutErrorHandling(E,z,K,ce,xe,Ae)},mn.prototype.evaluate=function(E,z,K,ce,xe,Ae){return this._styleExpression.evaluate(E,z,K,ce,xe,Ae)};var Mn=function(E,z,K,ce){this.kind=E,this.zoomStops=K,this._styleExpression=z,this.isStateDependent="camera"!==E&&!tr(z.expression),this.interpolationType=ce};function Sn(E,z){if("error"===(E=ln(E,z)).result)return E;var K=E.value.expression,ce=jr(K);if(!ce&&!jo(z))return Bo([new yt("","data expressions not supported")]);var xe=ur(K,["zoom"]);if(!xe&&!Ml(z))return Bo([new yt("","zoom expressions not supported")]);var Ae=function We(ot){var bt=null;if(ot instanceof sa)bt=We(ot.result);else if(ot instanceof Os)for(var kt=0,Xt=ot.args;kt<Xt.length&&!(bt=We(Xt[kt]));kt+=1);else(ot instanceof Ii||ot instanceof Ba)&&ot.input instanceof wr&&"zoom"===ot.input.name&&(bt=ot);return bt instanceof yt||ot.eachChild(function(nn){var vn=We(nn);vn instanceof yt?bt=vn:!bt&&vn?bt=new yt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):bt&&vn&&bt!==vn&&(bt=new yt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),bt}(K);return Ae||xe?Ae instanceof yt?Bo([Ae]):Ae instanceof Ba&&!ks(z)?Bo([new yt("",'"interpolate" expressions cannot be used with this property')]):zs(Ae?new Mn(ce?"camera":"composite",E.value,Ae.labels,Ae instanceof Ba?Ae.interpolation:void 0):new mn(ce?"constant":"source",E.value)):Bo([new yt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Mn.prototype.evaluateWithoutErrorHandling=function(E,z,K,ce,xe,Ae){return this._styleExpression.evaluateWithoutErrorHandling(E,z,K,ce,xe,Ae)},Mn.prototype.evaluate=function(E,z,K,ce,xe,Ae){return this._styleExpression.evaluate(E,z,K,ce,xe,Ae)},Mn.prototype.interpolationFactor=function(E,z,K){return this.interpolationType?Ba.interpolationFactor(this.interpolationType,E,z,K):0};var zn=function(E,z){this._parameters=E,this._specification=z,wt(this,function K(ce,xe){var Ae,Re,We,ot="color"===xe.type,bt=ce.stops&&"object"==typeof ce.stops[0][0],Xt=bt||!(bt||void 0!==ce.property),cn=ce.type||(ks(xe)?"exponential":"interval");if(ot&&((ce=wt({},ce)).stops&&(ce.stops=ce.stops.map(function(Pi){return[Pi[0],Tn.parse(Pi[1])]})),ce.default=Tn.parse(ce.default?ce.default:xe.default)),ce.colorSpace&&"rgb"!==ce.colorSpace&&!dl[ce.colorSpace])throw new Error("Unknown color space: "+ce.colorSpace);if("exponential"===cn)Ae=pt;else if("interval"===cn)Ae=Mt;else if("categorical"===cn){Ae=mt,Re=Object.create(null);for(var nn=0,vn=ce.stops;nn<vn.length;nn+=1){var Pn=vn[nn];Re[Pn[0]]=Pn[1]}We=typeof ce.stops[0][0]}else{if("identity"!==cn)throw new Error('Unknown function type "'+cn+'"');Ae=St}if(bt){for(var Xn={},Yn=[],ar=0;ar<ce.stops.length;ar++){var lr=ce.stops[ar],mr=lr[0].zoom;void 0===Xn[mr]&&(Xn[mr]={zoom:mr,type:ce.type,property:ce.property,default:ce.default,stops:[]},Yn.push(mr)),Xn[mr].stops.push([lr[0].value,lr[1]])}for(var Pr=[],Br=0,ui=Yn;Br<ui.length;Br+=1){var ni=ui[Br];Pr.push([Xn[ni].zoom,K(Xn[ni],xe)])}var yi={name:"linear"};return{kind:"composite",interpolationType:yi,interpolationFactor:Ba.interpolationFactor.bind(void 0,yi),zoomStops:Pr.map(function(Pi){return Pi[0]}),evaluate:function(Pi,_i){var Ui=Pi.zoom;return pt({stops:Pr,base:ce.base},xe,Ui).evaluate(Ui,_i)}}}if(Xt){var Ei="exponential"===cn?{name:"exponential",base:void 0!==ce.base?ce.base:1}:null;return{kind:"camera",interpolationType:Ei,interpolationFactor:Ba.interpolationFactor.bind(void 0,Ei),zoomStops:ce.stops.map(function(Pi){return Pi[0]}),evaluate:function(Pi){return Ae(ce,xe,Pi.zoom,Re,We)}}}return{kind:"source",evaluate:function(Pi,_i){var Ui=_i&&_i.properties?_i.properties[ce.property]:void 0;return void 0===Ui?st(ce.default,xe.default):Ae(ce,xe,Ui,Re,We)}}}(this._parameters,this._specification))};function $n(E){var z=E.key,K=E.value,ce=E.valueSpec||{},xe=E.objectElementValidators||{},Ae=E.style,Re=E.styleSpec,We=[],ot=Da(K);if("object"!==ot)return[new at(z,K,"object expected, "+ot+" found")];for(var bt in K){var kt=bt.split(".")[0],Xt=ce[kt]||ce["*"],cn=void 0;if(xe[kt])cn=xe[kt];else if(ce[kt])cn=xn;else if(xe["*"])cn=xe["*"];else{if(!ce["*"]){We.push(new at(z,K[bt],'unknown property "'+bt+'"'));continue}cn=xn}We=We.concat(cn({key:(z&&z+".")+bt,value:K[bt],valueSpec:Xt,style:Ae,styleSpec:Re,object:K,objectKey:bt},K))}for(var nn in ce)xe[nn]||ce[nn].required&&void 0===ce[nn].default&&void 0===K[nn]&&We.push(new at(z,K,'missing required property "'+nn+'"'));return We}function or(E){var z=E.value,K=E.valueSpec,ce=E.style,xe=E.styleSpec,Ae=E.key,Re=E.arrayElementValidator||xn;if("array"!==Da(z))return[new at(Ae,z,"array expected, "+Da(z)+" found")];if(K.length&&z.length!==K.length)return[new at(Ae,z,"array length "+K.length+" expected, length "+z.length+" found")];if(K["min-length"]&&z.length<K["min-length"])return[new at(Ae,z,"array length at least "+K["min-length"]+" expected, length "+z.length+" found")];var We={type:K.value,values:K.values};xe.$version<7&&(We.function=K.function),"object"===Da(K.value)&&(We=K.value);for(var ot=[],bt=0;bt<z.length;bt++)ot=ot.concat(Re({array:z,arrayIndex:bt,value:z[bt],valueSpec:We,style:ce,styleSpec:xe,key:Ae+"["+bt+"]"}));return ot}function Lr(E){var z=E.key,K=E.value,ce=E.valueSpec,xe=Da(K);return"number"===xe&&K!=K&&(xe="NaN"),"number"!==xe?[new at(z,K,"number expected, "+xe+" found")]:"minimum"in ce&&K<ce.minimum?[new at(z,K,K+" is less than the minimum value "+ce.minimum)]:"maximum"in ce&&K>ce.maximum?[new at(z,K,K+" is greater than the maximum value "+ce.maximum)]:[]}function Kr(E){var z,K,ce,xe=E.valueSpec,Ae=_t(E.value.type),Re={},We="categorical"!==Ae&&void 0===E.value.property,ot=!We,bt="array"===Da(E.value.stops)&&"array"===Da(E.value.stops[0])&&"object"===Da(E.value.stops[0][0]),kt=$n({key:E.key,value:E.value,valueSpec:E.styleSpec.function,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{stops:function(nn){if("identity"===Ae)return[new at(nn.key,nn.value,'identity function may not have a "stops" property')];var vn=[],Pn=nn.value;return vn=vn.concat(or({key:nn.key,value:Pn,valueSpec:nn.valueSpec,style:nn.style,styleSpec:nn.styleSpec,arrayElementValidator:Xt})),"array"===Da(Pn)&&0===Pn.length&&vn.push(new at(nn.key,Pn,"array must have at least one stop")),vn},default:function(nn){return xn({key:nn.key,value:nn.value,valueSpec:xe,style:nn.style,styleSpec:nn.styleSpec})}}});return"identity"===Ae&&We&&kt.push(new at(E.key,E.value,'missing required property "property"')),"identity"===Ae||E.value.stops||kt.push(new at(E.key,E.value,'missing required property "stops"')),"exponential"===Ae&&E.valueSpec.expression&&!ks(E.valueSpec)&&kt.push(new at(E.key,E.value,"exponential functions not supported")),E.styleSpec.$version>=8&&(ot&&!jo(E.valueSpec)?kt.push(new at(E.key,E.value,"property functions not supported")):We&&!Ml(E.valueSpec)&&kt.push(new at(E.key,E.value,"zoom functions not supported"))),"categorical"!==Ae&&!bt||void 0!==E.value.property||kt.push(new at(E.key,E.value,'"property" property is required')),kt;function Xt(nn){var vn=[],Pn=nn.value,Xn=nn.key;if("array"!==Da(Pn))return[new at(Xn,Pn,"array expected, "+Da(Pn)+" found")];if(2!==Pn.length)return[new at(Xn,Pn,"array length 2 expected, length "+Pn.length+" found")];if(bt){if("object"!==Da(Pn[0]))return[new at(Xn,Pn,"object expected, "+Da(Pn[0])+" found")];if(void 0===Pn[0].zoom)return[new at(Xn,Pn,"object stop key must have zoom")];if(void 0===Pn[0].value)return[new at(Xn,Pn,"object stop key must have value")];if(ce&&ce>_t(Pn[0].zoom))return[new at(Xn,Pn[0].zoom,"stop zoom values must appear in ascending order")];_t(Pn[0].zoom)!==ce&&(ce=_t(Pn[0].zoom),K=void 0,Re={}),vn=vn.concat($n({key:Xn+"[0]",value:Pn[0],valueSpec:{zoom:{}},style:nn.style,styleSpec:nn.styleSpec,objectElementValidators:{zoom:Lr,value:cn}}))}else vn=vn.concat(cn({key:Xn+"[0]",value:Pn[0],valueSpec:{},style:nn.style,styleSpec:nn.styleSpec},Pn));return fn(Rt(Pn[1]))?vn.concat([new at(Xn+"[1]",Pn[1],"expressions are not allowed in function stops.")]):vn.concat(xn({key:Xn+"[1]",value:Pn[1],valueSpec:xe,style:nn.style,styleSpec:nn.styleSpec}))}function cn(nn,vn){var Pn=Da(nn.value),Xn=_t(nn.value),Yn=null!==nn.value?nn.value:vn;if(z){if(Pn!==z)return[new at(nn.key,Yn,Pn+" stop domain type must match previous stop domain type "+z)]}else z=Pn;if("number"!==Pn&&"string"!==Pn&&"boolean"!==Pn)return[new at(nn.key,Yn,"stop domain value must be a number, string, or boolean")];if("number"!==Pn&&"categorical"!==Ae){var ar="number expected, "+Pn+" found";return jo(xe)&&void 0===Ae&&(ar+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new at(nn.key,Yn,ar)]}return"categorical"!==Ae||"number"!==Pn||isFinite(Xn)&&Math.floor(Xn)===Xn?"categorical"!==Ae&&"number"===Pn&&void 0!==K&&Xn<K?[new at(nn.key,Yn,"stop domain values must appear in ascending order")]:(K=Xn,"categorical"===Ae&&Xn in Re?[new at(nn.key,Yn,"stop domain values must be unique")]:(Re[Xn]=!0,[])):[new at(nn.key,Yn,"integer expected, found "+Xn)]}}function oi(E){var z=("property"===E.expressionContext?Sn:ln)(Rt(E.value),E.valueSpec);if("error"===z.result)return z.value.map(function(ce){return new at(""+E.key+ce.key,E.value,ce.message)});var K=z.value.expression||z.value._styleExpression.expression;if("property"===E.expressionContext&&"text-font"===E.propertyKey&&!K.outputDefined())return[new at(E.key,E.value,'Invalid data expression for "'+E.propertyKey+'". Output values must be contained as literals within the expression.')];if("property"===E.expressionContext&&"layout"===E.propertyType&&!tr(K))return[new at(E.key,E.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===E.expressionContext&&!tr(K))return[new at(E.key,E.value,'"feature-state" data expressions are not supported with filters.')];if(E.expressionContext&&0===E.expressionContext.indexOf("cluster")){if(!ur(K,["zoom","feature-state"]))return[new at(E.key,E.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===E.expressionContext&&!jr(K))return[new at(E.key,E.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function fi(E){var z=E.key,K=E.value,ce=E.valueSpec,xe=[];return Array.isArray(ce.values)?-1===ce.values.indexOf(_t(K))&&xe.push(new at(z,K,"expected one of ["+ce.values.join(", ")+"], "+JSON.stringify(K)+" found")):-1===Object.keys(ce.values).indexOf(_t(K))&&xe.push(new at(z,K,"expected one of ["+Object.keys(ce.values).join(", ")+"], "+JSON.stringify(K)+" found")),xe}function Qr(E){if(!0===E||!1===E)return!0;if(!Array.isArray(E)||0===E.length)return!1;switch(E[0]){case"has":return E.length>=2&&"$id"!==E[1]&&"$type"!==E[1];case"in":return E.length>=3&&("string"!=typeof E[1]||Array.isArray(E[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==E.length||Array.isArray(E[1])||Array.isArray(E[2]);case"any":case"all":for(var z=0,K=E.slice(1);z<K.length;z+=1){var ce=K[z];if(!Qr(ce)&&"boolean"!=typeof ce)return!1}return!0;default:return!0}}zn.deserialize=function(E){return new zn(E._parameters,E._specification)},zn.serialize=function(E){return{_parameters:E._parameters,_specification:E._specification}};var ji={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Ki(E){if(null==E)return{filter:function(){return!0},needGeometry:!1};Qr(E)||(E=Vi(E));var z=ln(E,ji);if("error"===z.result)throw new Error(z.value.map(function(K){return K.key+": "+K.message}).join(", "));return{filter:function(K,ce,xe){return z.value.evaluate(K,ce,{},xe)},needGeometry:function K(ce){if(!Array.isArray(ce))return!1;if("within"===ce[0])return!0;for(var xe=1;xe<ce.length;xe++)if(K(ce[xe]))return!0;return!1}(E)}}function fa(E,z){return E<z?-1:E>z?1:0}function Vi(E){if(!E)return!0;var z,K=E[0];return E.length<=1?"any"!==K:"=="===K?Oa(E[1],E[2],"=="):"!="===K?Sa(Oa(E[1],E[2],"==")):"<"===K||">"===K||"<="===K||">="===K?Oa(E[1],E[2],K):"any"===K?(z=E.slice(1),["any"].concat(z.map(Vi))):"all"===K?["all"].concat(E.slice(1).map(Vi)):"none"===K?["all"].concat(E.slice(1).map(Vi).map(Sa)):"in"===K?Lo(E[1],E.slice(2)):"!in"===K?Sa(Lo(E[1],E.slice(2))):"has"===K?Ua(E[1]):"!has"===K?Sa(Ua(E[1])):"within"!==K||E}function Oa(E,z,K){switch(E){case"$type":return["filter-type-"+K,z];case"$id":return["filter-id-"+K,z];default:return["filter-"+K,E,z]}}function Lo(E,z){if(0===z.length)return!1;switch(E){case"$type":return["filter-type-in",["literal",z]];case"$id":return["filter-id-in",["literal",z]];default:return z.length>200&&!z.some(function(K){return typeof K!=typeof z[0]})?["filter-in-large",E,["literal",z.sort(fa)]]:["filter-in-small",E,["literal",z]]}}function Ua(E){switch(E){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",E]}}function Sa(E){return["!",E]}function Wa(E){return Qr(Rt(E.value))?oi(wt({},E,{expressionContext:"filter",valueSpec:{value:"boolean"}})):function z(K){var ce=K.value,xe=K.key;if("array"!==Da(ce))return[new at(xe,ce,"array expected, "+Da(ce)+" found")];var Ae,Re=K.styleSpec,We=[];if(ce.length<1)return[new at(xe,ce,"filter array must have at least 1 element")];switch(We=We.concat(fi({key:xe+"[0]",value:ce[0],valueSpec:Re.filter_operator,style:K.style,styleSpec:K.styleSpec})),_t(ce[0])){case"<":case"<=":case">":case">=":ce.length>=2&&"$type"===_t(ce[1])&&We.push(new at(xe,ce,'"$type" cannot be use with operator "'+ce[0]+'"'));case"==":case"!=":3!==ce.length&&We.push(new at(xe,ce,'filter array for operator "'+ce[0]+'" must have 3 elements'));case"in":case"!in":ce.length>=2&&"string"!==(Ae=Da(ce[1]))&&We.push(new at(xe+"[1]",ce[1],"string expected, "+Ae+" found"));for(var ot=2;ot<ce.length;ot++)Ae=Da(ce[ot]),"$type"===_t(ce[1])?We=We.concat(fi({key:xe+"["+ot+"]",value:ce[ot],valueSpec:Re.geometry_type,style:K.style,styleSpec:K.styleSpec})):"string"!==Ae&&"number"!==Ae&&"boolean"!==Ae&&We.push(new at(xe+"["+ot+"]",ce[ot],"string, number, or boolean expected, "+Ae+" found"));break;case"any":case"all":case"none":for(var bt=1;bt<ce.length;bt++)We=We.concat(z({key:xe+"["+bt+"]",value:ce[bt],style:K.style,styleSpec:K.styleSpec}));break;case"has":case"!has":Ae=Da(ce[1]),2!==ce.length?We.push(new at(xe,ce,'filter array for "'+ce[0]+'" operator must have 2 elements')):"string"!==Ae&&We.push(new at(xe+"[1]",ce[1],"string expected, "+Ae+" found"));break;case"within":Ae=Da(ce[1]),2!==ce.length?We.push(new at(xe,ce,'filter array for "'+ce[0]+'" operator must have 2 elements')):"object"!==Ae&&We.push(new at(xe+"[1]",ce[1],"object expected, "+Ae+" found"))}return We}(E)}function fo(E,z){var K=E.key,ce=E.style,xe=E.styleSpec,Ae=E.value,Re=E.objectKey,We=xe[z+"_"+E.layerType];if(!We)return[];var ot=Re.match(/^(.*)-transition$/);if("paint"===z&&ot&&We[ot[1]]&&We[ot[1]].transition)return xn({key:K,value:Ae,valueSpec:xe.transition,style:ce,styleSpec:xe});var bt,kt=E.valueSpec||We[Re];if(!kt)return[new at(K,Ae,'unknown property "'+Re+'"')];if("string"===Da(Ae)&&jo(kt)&&!kt.tokens&&(bt=/^{([^}]+)}$/.exec(Ae)))return[new at(K,Ae,'"'+Re+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(bt[1])+" }`.")];var Xt=[];return"symbol"===E.layerType&&("text-field"===Re&&ce&&!ce.glyphs&&Xt.push(new at(K,Ae,'use of "text-field" requires a style "glyphs" property')),"text-font"===Re&&Ye(Rt(Ae))&&"identity"===_t(Ae.type)&&Xt.push(new at(K,Ae,'"text-font" does not support identity functions'))),Xt.concat(xn({key:E.key,value:Ae,valueSpec:kt,style:ce,styleSpec:xe,expressionContext:"property",propertyType:z,propertyKey:Re}))}function Io(E){return fo(E,"paint")}function ho(E){return fo(E,"layout")}function us(E){var z=[],K=E.value,ce=E.key,xe=E.style,Ae=E.styleSpec;K.type||K.ref||z.push(new at(ce,K,'either "type" or "ref" is required'));var Re,We=_t(K.type),ot=_t(K.ref);if(K.id)for(var bt=_t(K.id),kt=0;kt<E.arrayIndex;kt++){var Xt=xe.layers[kt];_t(Xt.id)===bt&&z.push(new at(ce,K.id,'duplicate layer id "'+K.id+'", previously used at line '+Xt.id.__line__))}if("ref"in K)["type","source","source-layer","filter","layout"].forEach(function(vn){vn in K&&z.push(new at(ce,K[vn],'"'+vn+'" is prohibited for ref layers'))}),xe.layers.forEach(function(vn){_t(vn.id)===ot&&(Re=vn)}),Re?Re.ref?z.push(new at(ce,K.ref,"ref cannot reference another ref layer")):We=_t(Re.type):z.push(new at(ce,K.ref,'ref layer "'+ot+'" not found'));else if("background"!==We)if(K.source){var cn=xe.sources&&xe.sources[K.source],nn=cn&&_t(cn.type);cn?"vector"===nn&&"raster"===We?z.push(new at(ce,K.source,'layer "'+K.id+'" requires a raster source')):"raster"===nn&&"raster"!==We?z.push(new at(ce,K.source,'layer "'+K.id+'" requires a vector source')):"vector"!==nn||K["source-layer"]?"raster-dem"===nn&&"hillshade"!==We?z.push(new at(ce,K.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==We||!K.paint||!K.paint["line-gradient"]||"geojson"===nn&&cn.lineMetrics||z.push(new at(ce,K,'layer "'+K.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):z.push(new at(ce,K,'layer "'+K.id+'" must specify a "source-layer"')):z.push(new at(ce,K.source,'source "'+K.source+'" not found'))}else z.push(new at(ce,K,'missing required property "source"'));return z=z.concat($n({key:ce,value:K,valueSpec:Ae.layer,style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return xn({key:ce+".type",value:K.type,valueSpec:Ae.layer.type,style:E.style,styleSpec:E.styleSpec,object:K,objectKey:"type"})},filter:Wa,layout:function(vn){return $n({layer:K,key:vn.key,value:vn.value,style:vn.style,styleSpec:vn.styleSpec,objectElementValidators:{"*":function(Pn){return ho(wt({layerType:We},Pn))}}})},paint:function(vn){return $n({layer:K,key:vn.key,value:vn.value,style:vn.style,styleSpec:vn.styleSpec,objectElementValidators:{"*":function(Pn){return Io(wt({layerType:We},Pn))}}})}}}))}function xs(E){var z=E.value,K=E.key,ce=Da(z);return"string"!==ce?[new at(K,z,"string expected, "+ce+" found")]:[]}var cs={promoteId:function(E){var z=E.key,K=E.value;if("string"===Da(K))return xs({key:z,value:K});var ce=[];for(var xe in K)ce.push.apply(ce,xs({key:z+"."+xe,value:K[xe]}));return ce}};function ka(E){var z=E.value,K=E.key,ce=E.styleSpec,xe=E.style;if(!z.type)return[new at(K,z,'"type" is required')];var Ae,Re=_t(z.type);switch(Re){case"vector":case"raster":case"raster-dem":return $n({key:K,value:z,valueSpec:ce["source_"+Re.replace("-","_")],style:E.style,styleSpec:ce,objectElementValidators:cs});case"geojson":if(Ae=$n({key:K,value:z,valueSpec:ce.source_geojson,style:xe,styleSpec:ce,objectElementValidators:cs}),z.cluster)for(var We in z.clusterProperties){var ot=z.clusterProperties[We],bt=ot[0],Xt="string"==typeof bt?[bt,["accumulated"],["get",We]]:bt;Ae.push.apply(Ae,oi({key:K+"."+We+".map",value:ot[1],expressionContext:"cluster-map"})),Ae.push.apply(Ae,oi({key:K+"."+We+".reduce",value:Xt,expressionContext:"cluster-reduce"}))}return Ae;case"video":return $n({key:K,value:z,valueSpec:ce.source_video,style:xe,styleSpec:ce});case"image":return $n({key:K,value:z,valueSpec:ce.source_image,style:xe,styleSpec:ce});case"canvas":return[new at(K,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return fi({key:K+".type",value:z.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:xe,styleSpec:ce})}}function At(E){var z=E.value,K=E.styleSpec,ce=K.light,xe=E.style,Ae=[],Re=Da(z);if(void 0===z)return Ae;if("object"!==Re)return Ae.concat([new at("light",z,"object expected, "+Re+" found")]);for(var We in z){var ot=We.match(/^(.*)-transition$/);Ae=Ae.concat(ot&&ce[ot[1]]&&ce[ot[1]].transition?xn({key:We,value:z[We],valueSpec:K.transition,style:xe,styleSpec:K}):ce[We]?xn({key:We,value:z[We],valueSpec:ce[We],style:xe,styleSpec:K}):[new at(We,z[We],'unknown property "'+We+'"')])}return Ae}var Yt={"*":function(){return[]},array:or,boolean:function(E){var z=E.value,K=E.key,ce=Da(z);return"boolean"!==ce?[new at(K,z,"boolean expected, "+ce+" found")]:[]},number:Lr,color:function(E){var z=E.key,K=E.value,ce=Da(K);return"string"!==ce?[new at(z,K,"color expected, "+ce+" found")]:null===Dn(K)?[new at(z,K,'color expected, "'+K+'" found')]:[]},constants:gt,enum:fi,filter:Wa,function:Kr,layer:us,object:$n,source:ka,light:At,string:xs,formatted:function(E){return 0===xs(E).length?[]:oi(E)},resolvedImage:function(E){return 0===xs(E).length?[]:oi(E)}};function xn(E){var z=E.value,K=E.valueSpec,ce=E.styleSpec;return K.expression&&Ye(_t(z))?Kr(E):K.expression&&fn(Rt(z))?oi(E):K.type&&Yt[K.type]?Yt[K.type](E):$n(wt({},E,{valueSpec:K.type?ce[K.type]:K}))}function rn(E){var z=E.value,K=E.key,ce=xs(E);return ce.length||(-1===z.indexOf("{fontstack}")&&ce.push(new at(K,z,'"glyphs" url must include a "{fontstack}" token')),-1===z.indexOf("{range}")&&ce.push(new at(K,z,'"glyphs" url must include a "{range}" token'))),ce}function bn(E,z){void 0===z&&(z=Be);var K=[];return K=K.concat(xn({key:"",value:E,valueSpec:z.$root,styleSpec:z,style:E,objectElementValidators:{glyphs:rn,"*":function(){return[]}}})),E.constants&&(K=K.concat(gt({key:"constants",value:E.constants,style:E,styleSpec:z}))),Kn(K)}function Kn(E){return[].concat(E).sort(function(z,K){return z.line-K.line})}function nr(E){return function(){for(var z=[],K=arguments.length;K--;)z[K]=arguments[K];return Kn(E.apply(this,z))}}bn.source=nr(ka),bn.light=nr(At),bn.layer=nr(us),bn.filter=nr(Wa),bn.paintProperty=nr(Io),bn.layoutProperty=nr(ho);var vr=bn,Er=vr.light,kr=vr.paintProperty,Rr=vr.layoutProperty;function Wr(E,z){var K=!1;if(z&&z.length)for(var ce=0,xe=z;ce<xe.length;ce+=1)E.fire(new ze(new Error(xe[ce].message))),K=!0;return K}var Dr=Yr;function Yr(E,z,K){var ce=this.cells=[];if(E instanceof ArrayBuffer){this.arrayBuffer=E;var xe=new Int32Array(this.arrayBuffer);E=xe[0],this.d=(z=xe[1])+2*(K=xe[2]);for(var Ae=0;Ae<this.d*this.d;Ae++){var Re=xe[3+Ae],We=xe[3+Ae+1];ce.push(Re===We?null:xe.subarray(Re,We))}var bt=xe[3+ce.length+1];this.keys=xe.subarray(xe[3+ce.length],bt),this.bboxes=xe.subarray(bt),this.insert=this._insertReadonly}else{this.d=z+2*K;for(var kt=0;kt<this.d*this.d;kt++)ce.push([]);this.keys=[],this.bboxes=[]}this.n=z,this.extent=E,this.padding=K,this.scale=z/E,this.uid=0;var Xt=K/z*E;this.min=-Xt,this.max=E+Xt}Yr.prototype.insert=function(E,z,K,ce,xe){this._forEachCell(z,K,ce,xe,this._insertCell,this.uid++),this.keys.push(E),this.bboxes.push(z),this.bboxes.push(K),this.bboxes.push(ce),this.bboxes.push(xe)},Yr.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},Yr.prototype._insertCell=function(E,z,K,ce,xe,Ae){this.cells[xe].push(Ae)},Yr.prototype.query=function(E,z,K,ce,xe){var Ae=this.min,Re=this.max;if(E<=Ae&&z<=Ae&&Re<=K&&Re<=ce&&!xe)return Array.prototype.slice.call(this.keys);var We=[];return this._forEachCell(E,z,K,ce,this._queryCell,We,{},xe),We},Yr.prototype._queryCell=function(E,z,K,ce,xe,Ae,Re,We){var ot=this.cells[xe];if(null!==ot)for(var bt=this.keys,kt=this.bboxes,Xt=0;Xt<ot.length;Xt++){var cn=ot[Xt];if(void 0===Re[cn]){var nn=4*cn;(We?We(kt[nn+0],kt[nn+1],kt[nn+2],kt[nn+3]):E<=kt[nn+2]&&z<=kt[nn+3]&&K>=kt[nn+0]&&ce>=kt[nn+1])?(Re[cn]=!0,Ae.push(bt[cn])):Re[cn]=!1}}},Yr.prototype._forEachCell=function(E,z,K,ce,xe,Ae,Re,We){for(var ot=this._convertToCellCoord(E),bt=this._convertToCellCoord(z),kt=this._convertToCellCoord(K),Xt=this._convertToCellCoord(ce),cn=ot;cn<=kt;cn++)for(var nn=bt;nn<=Xt;nn++){var vn=this.d*nn+cn;if((!We||We(this._convertFromCellCoord(cn),this._convertFromCellCoord(nn),this._convertFromCellCoord(cn+1),this._convertFromCellCoord(nn+1)))&&xe.call(this,E,z,K,ce,vn,Ae,Re,We))return}},Yr.prototype._convertFromCellCoord=function(E){return(E-this.padding)/this.scale},Yr.prototype._convertToCellCoord=function(E){return Math.max(0,Math.min(this.d-1,Math.floor(E*this.scale)+this.padding))},Yr.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var E=this.cells,z=3+this.cells.length+1+1,K=0,ce=0;ce<this.cells.length;ce++)K+=this.cells[ce].length;var xe=new Int32Array(z+K+this.keys.length+this.bboxes.length);xe[0]=this.extent,xe[1]=this.n,xe[2]=this.padding;for(var Ae=z,Re=0;Re<E.length;Re++){var We=E[Re];xe[3+Re]=Ae,xe.set(We,Ae),Ae+=We.length}return xe[3+E.length]=Ae,xe.set(this.keys,Ae),xe[3+E.length+1]=Ae+=this.keys.length,xe.set(this.bboxes,Ae),Ae+=this.bboxes.length,xe.buffer};var si=self.ImageData,di=self.ImageBitmap,Di={};function br(E,z,K){void 0===K&&(K={}),Object.defineProperty(z,"_classRegistryKey",{value:E,writeable:!1}),Di[E]={klass:z,omit:K.omit||[],shallow:K.shallow||[]}}for(var Si in br("Object",Object),Dr.serialize=function(E,z){var K=E.toArrayBuffer();return z&&z.push(K),{buffer:K}},Dr.deserialize=function(E){return new Dr(E.buffer)},br("Grid",Dr),br("Color",Tn),br("Error",Error),br("ResolvedImage",In),br("StylePropertyFunction",zn),br("StyleExpression",an,{omit:["_evaluator"]}),br("ZoomDependentExpression",Mn),br("ZoomConstantExpression",mn),br("CompoundExpression",wr,{omit:["_evaluate"]}),ml)ml[Si]._classRegistryKey||br("Expression_"+Si,ml[Si]);function Jr(E){return E&&"undefined"!=typeof ArrayBuffer&&(E instanceof ArrayBuffer||E.constructor&&"ArrayBuffer"===E.constructor.name)}function ci(E){return di&&E instanceof di}function pi(E,z){if(null==E||"boolean"==typeof E||"number"==typeof E||"string"==typeof E||E instanceof Boolean||E instanceof Number||E instanceof String||E instanceof Date||E instanceof RegExp)return E;if(Jr(E)||ci(E))return z&&z.push(E),E;if(ArrayBuffer.isView(E)){var K=E;return z&&z.push(K.buffer),K}if(E instanceof si)return z&&z.push(E.data.buffer),E;if(Array.isArray(E)){for(var ce=[],xe=0,Ae=E;xe<Ae.length;xe+=1)ce.push(pi(Ae[xe],z));return ce}if("object"==typeof E){var We=E.constructor,ot=We._classRegistryKey;if(!ot)throw new Error("can't serialize object of unregistered class");var bt=We.serialize?We.serialize(E,z):{};if(!We.serialize){for(var kt in E)if(E.hasOwnProperty(kt)&&!(Di[ot].omit.indexOf(kt)>=0)){var Xt=E[kt];bt[kt]=Di[ot].shallow.indexOf(kt)>=0?Xt:pi(Xt,z)}E instanceof Error&&(bt.message=E.message)}if(bt.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==ot&&(bt.$name=ot),bt}throw new Error("can't serialize object of type "+typeof E)}function ra(E){if(null==E||"boolean"==typeof E||"number"==typeof E||"string"==typeof E||E instanceof Boolean||E instanceof Number||E instanceof String||E instanceof Date||E instanceof RegExp||Jr(E)||ci(E)||ArrayBuffer.isView(E)||E instanceof si)return E;if(Array.isArray(E))return E.map(ra);if("object"==typeof E){var z=E.$name||"Object",K=Di[z].klass;if(!K)throw new Error("can't deserialize unregistered class "+z);if(K.deserialize)return K.deserialize(E);for(var ce=Object.create(K.prototype),xe=0,Ae=Object.keys(E);xe<Ae.length;xe+=1){var Re=Ae[xe];if("$name"!==Re){var We=E[Re];ce[Re]=Di[z].shallow.indexOf(Re)>=0?We:ra(We)}}return ce}throw new Error("can't deserialize object of type "+typeof E)}var ma=function(){this.first=!0};ma.prototype.update=function(E,z){var K=Math.floor(E);return this.first?(this.first=!1,this.lastIntegerZoom=K,this.lastIntegerZoomTime=0,this.lastZoom=E,this.lastFloorZoom=K,!0):(this.lastFloorZoom>K?(this.lastIntegerZoom=K+1,this.lastIntegerZoomTime=z):this.lastFloorZoom<K&&(this.lastIntegerZoom=K,this.lastIntegerZoomTime=z),E!==this.lastZoom&&(this.lastZoom=E,this.lastFloorZoom=K,!0))};var $r={"Latin-1 Supplement":function(E){return E>=128&&E<=255},Arabic:function(E){return E>=1536&&E<=1791},"Arabic Supplement":function(E){return E>=1872&&E<=1919},"Arabic Extended-A":function(E){return E>=2208&&E<=2303},"Hangul Jamo":function(E){return E>=4352&&E<=4607},"Unified Canadian Aboriginal Syllabics":function(E){return E>=5120&&E<=5759},Khmer:function(E){return E>=6016&&E<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(E){return E>=6320&&E<=6399},"General Punctuation":function(E){return E>=8192&&E<=8303},"Letterlike Symbols":function(E){return E>=8448&&E<=8527},"Number Forms":function(E){return E>=8528&&E<=8591},"Miscellaneous Technical":function(E){return E>=8960&&E<=9215},"Control Pictures":function(E){return E>=9216&&E<=9279},"Optical Character Recognition":function(E){return E>=9280&&E<=9311},"Enclosed Alphanumerics":function(E){return E>=9312&&E<=9471},"Geometric Shapes":function(E){return E>=9632&&E<=9727},"Miscellaneous Symbols":function(E){return E>=9728&&E<=9983},"Miscellaneous Symbols and Arrows":function(E){return E>=11008&&E<=11263},"CJK Radicals Supplement":function(E){return E>=11904&&E<=12031},"Kangxi Radicals":function(E){return E>=12032&&E<=12255},"Ideographic Description Characters":function(E){return E>=12272&&E<=12287},"CJK Symbols and Punctuation":function(E){return E>=12288&&E<=12351},Hiragana:function(E){return E>=12352&&E<=12447},Katakana:function(E){return E>=12448&&E<=12543},Bopomofo:function(E){return E>=12544&&E<=12591},"Hangul Compatibility Jamo":function(E){return E>=12592&&E<=12687},Kanbun:function(E){return E>=12688&&E<=12703},"Bopomofo Extended":function(E){return E>=12704&&E<=12735},"CJK Strokes":function(E){return E>=12736&&E<=12783},"Katakana Phonetic Extensions":function(E){return E>=12784&&E<=12799},"Enclosed CJK Letters and Months":function(E){return E>=12800&&E<=13055},"CJK Compatibility":function(E){return E>=13056&&E<=13311},"CJK Unified Ideographs Extension A":function(E){return E>=13312&&E<=19903},"Yijing Hexagram Symbols":function(E){return E>=19904&&E<=19967},"CJK Unified Ideographs":function(E){return E>=19968&&E<=40959},"Yi Syllables":function(E){return E>=40960&&E<=42127},"Yi Radicals":function(E){return E>=42128&&E<=42191},"Hangul Jamo Extended-A":function(E){return E>=43360&&E<=43391},"Hangul Syllables":function(E){return E>=44032&&E<=55215},"Hangul Jamo Extended-B":function(E){return E>=55216&&E<=55295},"Private Use Area":function(E){return E>=57344&&E<=63743},"CJK Compatibility Ideographs":function(E){return E>=63744&&E<=64255},"Arabic Presentation Forms-A":function(E){return E>=64336&&E<=65023},"Vertical Forms":function(E){return E>=65040&&E<=65055},"CJK Compatibility Forms":function(E){return E>=65072&&E<=65103},"Small Form Variants":function(E){return E>=65104&&E<=65135},"Arabic Presentation Forms-B":function(E){return E>=65136&&E<=65279},"Halfwidth and Fullwidth Forms":function(E){return E>=65280&&E<=65519}};function Ta(E){for(var z=0,K=E;z<K.length;z+=1)if(Wi(K[z].charCodeAt(0)))return!0;return!1}function da(E){return!($r.Arabic(E)||$r["Arabic Supplement"](E)||$r["Arabic Extended-A"](E)||$r["Arabic Presentation Forms-A"](E)||$r["Arabic Presentation Forms-B"](E))}function Wi(E){return!(746!==E&&747!==E&&(E<4352||!($r["Bopomofo Extended"](E)||$r.Bopomofo(E)||$r["CJK Compatibility Forms"](E)&&!(E>=65097&&E<=65103)||$r["CJK Compatibility Ideographs"](E)||$r["CJK Compatibility"](E)||$r["CJK Radicals Supplement"](E)||$r["CJK Strokes"](E)||!(!$r["CJK Symbols and Punctuation"](E)||E>=12296&&E<=12305||E>=12308&&E<=12319||12336===E)||$r["CJK Unified Ideographs Extension A"](E)||$r["CJK Unified Ideographs"](E)||$r["Enclosed CJK Letters and Months"](E)||$r["Hangul Compatibility Jamo"](E)||$r["Hangul Jamo Extended-A"](E)||$r["Hangul Jamo Extended-B"](E)||$r["Hangul Jamo"](E)||$r["Hangul Syllables"](E)||$r.Hiragana(E)||$r["Ideographic Description Characters"](E)||$r.Kanbun(E)||$r["Kangxi Radicals"](E)||$r["Katakana Phonetic Extensions"](E)||$r.Katakana(E)&&12540!==E||!(!$r["Halfwidth and Fullwidth Forms"](E)||65288===E||65289===E||65293===E||E>=65306&&E<=65310||65339===E||65341===E||65343===E||E>=65371&&E<=65503||65507===E||E>=65512&&E<=65519)||!(!$r["Small Form Variants"](E)||E>=65112&&E<=65118||E>=65123&&E<=65126)||$r["Unified Canadian Aboriginal Syllabics"](E)||$r["Unified Canadian Aboriginal Syllabics Extended"](E)||$r["Vertical Forms"](E)||$r["Yijing Hexagram Symbols"](E)||$r["Yi Syllables"](E)||$r["Yi Radicals"](E))))}function va(E){return!(Wi(E)||(z=E,$r["Latin-1 Supplement"](z)&&(167===z||169===z||174===z||177===z||188===z||189===z||190===z||215===z||247===z)||$r["General Punctuation"](z)&&(8214===z||8224===z||8225===z||8240===z||8241===z||8251===z||8252===z||8258===z||8263===z||8264===z||8265===z||8273===z)||$r["Letterlike Symbols"](z)||$r["Number Forms"](z)||$r["Miscellaneous Technical"](z)&&(z>=8960&&z<=8967||z>=8972&&z<=8991||z>=8996&&z<=9e3||9003===z||z>=9085&&z<=9114||z>=9150&&z<=9165||9167===z||z>=9169&&z<=9179||z>=9186&&z<=9215)||$r["Control Pictures"](z)&&9251!==z||$r["Optical Character Recognition"](z)||$r["Enclosed Alphanumerics"](z)||$r["Geometric Shapes"](z)||$r["Miscellaneous Symbols"](z)&&!(z>=9754&&z<=9759)||$r["Miscellaneous Symbols and Arrows"](z)&&(z>=11026&&z<=11055||z>=11088&&z<=11097||z>=11192&&z<=11243)||$r["CJK Symbols and Punctuation"](z)||$r.Katakana(z)||$r["Private Use Area"](z)||$r["CJK Compatibility Forms"](z)||$r["Small Form Variants"](z)||$r["Halfwidth and Fullwidth Forms"](z)||8734===z||8756===z||8757===z||z>=9984&&z<=10087||z>=10102&&z<=10131||65532===z||65533===z));var z}function ua(E){return E>=1424&&E<=2303||$r["Arabic Presentation Forms-A"](E)||$r["Arabic Presentation Forms-B"](E)}function xa(E,z){return!(!z&&ua(E)||E>=2304&&E<=3583||E>=3840&&E<=4255||$r.Khmer(E))}function Mi(E){for(var z=0,K=E;z<K.length;z+=1)if(ua(K[z].charCodeAt(0)))return!0;return!1}var ja="deferred",Vo="loading",kl="loaded",fs=null,Ji="unavailable",po=null,Ns=function(E){E&&"string"==typeof E&&E.indexOf("NetworkError")>-1&&(Ji="error"),fs&&fs(E)};function Qi(){Mo.fire(new Ie("pluginStateChange",{pluginStatus:Ji,pluginURL:po}))}var Mo=new Ve,ts=function(){return Ji},la=function(){if(Ji!==ja||!po)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");Ji=Vo,Qi(),po&&Ot({url:po},function(E){E?Ns(E):(Ji=kl,Qi())})},bs={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return Ji===kl||null!=bs.applyArabicShaping},isLoading:function(){return Ji===Vo},setState:function(E){Ji=E.pluginStatus,po=E.pluginURL},isParsed:function(){return null!=bs.applyArabicShaping&&null!=bs.processBidirectionalText&&null!=bs.processStyledBidirectionalText},getPluginURL:function(){return po}},Qa=function(E,z){this.zoom=E,z?(this.now=z.now,this.fadeDuration=z.fadeDuration,this.zoomHistory=z.zoomHistory,this.transition=z.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ma,this.transition={})};Qa.prototype.isSupportedScript=function(E){return function(z,K){for(var ce=0,xe=z;ce<xe.length;ce+=1)if(!xa(xe[ce].charCodeAt(0),K))return!1;return!0}(E,bs.isLoaded())},Qa.prototype.crossFadingFactor=function(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},Qa.prototype.getCrossfadeParameters=function(){var E=this.zoom,z=E-Math.floor(E),K=this.crossFadingFactor();return E>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:z+(1-z)*K}:{fromScale:.5,toScale:1,t:1-(1-K)*z}};var Xo=function(E,z){this.property=E,this.value=z,this.expression=function(K,ce){if(Ye(K))return new zn(K,ce);if(fn(K)){var xe=Sn(K,ce);if("error"===xe.result)throw new Error(xe.value.map(function(Re){return Re.key+": "+Re.message}).join(", "));return xe.value}var Ae=K;return"string"==typeof K&&"color"===ce.type&&(Ae=Tn.parse(K)),{kind:"constant",evaluate:function(){return Ae}}}(void 0===z?E.specification.default:z,E.specification)};Xo.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},Xo.prototype.possiblyEvaluate=function(E,z,K){return this.property.possiblyEvaluate(this,E,z,K)};var ns=function(E){this.property=E,this.value=new Xo(E,void 0)};ns.prototype.transitioned=function(E,z){return new au(this.property,this.value,z,p({},E.transition,this.transition),E.now)},ns.prototype.untransitioned=function(){return new au(this.property,this.value,null,{},0)};var Dl=function(E){this._properties=E,this._values=Object.create(E.defaultTransitionablePropertyValues)};Dl.prototype.getValue=function(E){return C(this._values[E].value.value)},Dl.prototype.setValue=function(E,z){this._values.hasOwnProperty(E)||(this._values[E]=new ns(this._values[E].property)),this._values[E].value=new Xo(this._values[E].property,null===z?void 0:C(z))},Dl.prototype.getTransition=function(E){return C(this._values[E].transition)},Dl.prototype.setTransition=function(E,z){this._values.hasOwnProperty(E)||(this._values[E]=new ns(this._values[E].property)),this._values[E].transition=C(z)||void 0},Dl.prototype.serialize=function(){for(var E={},z=0,K=Object.keys(this._values);z<K.length;z+=1){var ce=K[z],xe=this.getValue(ce);void 0!==xe&&(E[ce]=xe);var Ae=this.getTransition(ce);void 0!==Ae&&(E[ce+"-transition"]=Ae)}return E},Dl.prototype.transitioned=function(E,z){for(var K=new vo(this._properties),ce=0,xe=Object.keys(this._values);ce<xe.length;ce+=1){var Ae=xe[ce];K._values[Ae]=this._values[Ae].transitioned(E,z._values[Ae])}return K},Dl.prototype.untransitioned=function(){for(var E=new vo(this._properties),z=0,K=Object.keys(this._values);z<K.length;z+=1){var ce=K[z];E._values[ce]=this._values[ce].untransitioned()}return E};var au=function(E,z,K,ce,xe){this.property=E,this.value=z,this.begin=xe+ce.delay||0,this.end=this.begin+ce.duration||0,E.specification.transition&&(ce.delay||ce.duration)&&(this.prior=K)};au.prototype.possiblyEvaluate=function(E,z,K){var ce=E.now||0,xe=this.value.possiblyEvaluate(E,z,K),Ae=this.prior;if(Ae){if(ce>this.end)return this.prior=null,xe;if(this.value.isDataDriven())return this.prior=null,xe;if(ce<this.begin)return Ae.possiblyEvaluate(E,z,K);var Re=(ce-this.begin)/(this.end-this.begin);return this.property.interpolate(Ae.possiblyEvaluate(E,z,K),xe,function(We){if(We<=0)return 0;if(We>=1)return 1;var ot=We*We,bt=ot*We;return 4*(We<.5?bt:3*(We-ot)+bt-.75)}(Re))}return xe};var vo=function(E){this._properties=E,this._values=Object.create(E.defaultTransitioningPropertyValues)};vo.prototype.possiblyEvaluate=function(E,z,K){for(var ce=new yl(this._properties),xe=0,Ae=Object.keys(this._values);xe<Ae.length;xe+=1){var Re=Ae[xe];ce._values[Re]=this._values[Re].possiblyEvaluate(E,z,K)}return ce},vo.prototype.hasTransition=function(){for(var E=0,z=Object.keys(this._values);E<z.length;E+=1)if(this._values[z[E]].prior)return!0;return!1};var _s=function(E){this._properties=E,this._values=Object.create(E.defaultPropertyValues)};_s.prototype.getValue=function(E){return C(this._values[E].value)},_s.prototype.setValue=function(E,z){this._values[E]=new Xo(this._values[E].property,null===z?void 0:C(z))},_s.prototype.serialize=function(){for(var E={},z=0,K=Object.keys(this._values);z<K.length;z+=1){var ce=K[z],xe=this.getValue(ce);void 0!==xe&&(E[ce]=xe)}return E},_s.prototype.possiblyEvaluate=function(E,z,K){for(var ce=new yl(this._properties),xe=0,Ae=Object.keys(this._values);xe<Ae.length;xe+=1){var Re=Ae[xe];ce._values[Re]=this._values[Re].possiblyEvaluate(E,z,K)}return ce};var Uo=function(E,z,K){this.property=E,this.value=z,this.parameters=K};Uo.prototype.isConstant=function(){return"constant"===this.value.kind},Uo.prototype.constantOr=function(E){return"constant"===this.value.kind?this.value.value:E},Uo.prototype.evaluate=function(E,z,K,ce){return this.property.evaluate(this.value,this.parameters,E,z,K,ce)};var yl=function(E){this._properties=E,this._values=Object.create(E.defaultPossiblyEvaluatedValues)};yl.prototype.get=function(E){return this._values[E]};var Ri=function(E){this.specification=E};Ri.prototype.possiblyEvaluate=function(E,z){return E.expression.evaluate(z)},Ri.prototype.interpolate=function(E,z,K){var ce=zr[this.specification.type];return ce?ce(E,z,K):E};var Yi=function(E,z){this.specification=E,this.overrides=z};Yi.prototype.possiblyEvaluate=function(E,z,K,ce){return new Uo(this,"constant"===E.expression.kind||"camera"===E.expression.kind?{kind:"constant",value:E.expression.evaluate(z,null,{},K,ce)}:E.expression,z)},Yi.prototype.interpolate=function(E,z,K){if("constant"!==E.value.kind||"constant"!==z.value.kind)return E;if(void 0===E.value.value||void 0===z.value.value)return new Uo(this,{kind:"constant",value:void 0},E.parameters);var ce=zr[this.specification.type];return ce?new Uo(this,{kind:"constant",value:ce(E.value.value,z.value.value,K)},E.parameters):E},Yi.prototype.evaluate=function(E,z,K,ce,xe,Ae){return"constant"===E.kind?E.value:E.evaluate(z,K,ce,xe,Ae)};var xu=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.possiblyEvaluate=function(K,ce,xe,Ae){if(void 0===K.value)return new Uo(this,{kind:"constant",value:void 0},ce);if("constant"===K.expression.kind){var Re=K.expression.evaluate(ce,null,{},xe,Ae),We="resolvedImage"===K.property.specification.type&&"string"!=typeof Re?Re.name:Re,ot=this._calculate(We,We,We,ce);return new Uo(this,{kind:"constant",value:ot},ce)}if("camera"===K.expression.kind){var bt=this._calculate(K.expression.evaluate({zoom:ce.zoom-1}),K.expression.evaluate({zoom:ce.zoom}),K.expression.evaluate({zoom:ce.zoom+1}),ce);return new Uo(this,{kind:"constant",value:bt},ce)}return new Uo(this,K.expression,ce)},z.prototype.evaluate=function(K,ce,xe,Ae,Re,We){if("source"===K.kind){var ot=K.evaluate(ce,xe,Ae,Re,We);return this._calculate(ot,ot,ot,ce)}return"composite"===K.kind?this._calculate(K.evaluate({zoom:Math.floor(ce.zoom)-1},xe,Ae),K.evaluate({zoom:Math.floor(ce.zoom)},xe,Ae),K.evaluate({zoom:Math.floor(ce.zoom)+1},xe,Ae),ce):K.value},z.prototype._calculate=function(K,ce,xe,Ae){return Ae.zoom>Ae.zoomHistory.lastIntegerZoom?{from:K,to:ce}:{from:xe,to:ce}},z.prototype.interpolate=function(K){return K},z}(Yi),ou=function(E){this.specification=E};ou.prototype.possiblyEvaluate=function(E,z,K,ce){if(void 0!==E.value){if("constant"===E.expression.kind){var xe=E.expression.evaluate(z,null,{},K,ce);return this._calculate(xe,xe,xe,z)}return this._calculate(E.expression.evaluate(new Qa(Math.floor(z.zoom-1),z)),E.expression.evaluate(new Qa(Math.floor(z.zoom),z)),E.expression.evaluate(new Qa(Math.floor(z.zoom+1),z)),z)}},ou.prototype._calculate=function(E,z,K,ce){return ce.zoom>ce.zoomHistory.lastIntegerZoom?{from:E,to:z}:{from:K,to:z}},ou.prototype.interpolate=function(E){return E};var ia=function(E){this.specification=E};ia.prototype.possiblyEvaluate=function(E,z,K,ce){return!!E.expression.evaluate(z,null,{},K,ce)},ia.prototype.interpolate=function(){return!1};var nl=function(E){for(var z in this.properties=E,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],E){var K=E[z];K.specification.overridable&&this.overridableProperties.push(z);var ce=this.defaultPropertyValues[z]=new Xo(K,void 0),xe=this.defaultTransitionablePropertyValues[z]=new ns(K);this.defaultTransitioningPropertyValues[z]=xe.untransitioned(),this.defaultPossiblyEvaluatedValues[z]=ce.possiblyEvaluate({})}};br("DataDrivenProperty",Yi),br("DataConstantProperty",Ri),br("CrossFadedDataDrivenProperty",xu),br("CrossFadedProperty",ou),br("ColorRampProperty",ia);var vl=function(E){function z(K,ce){if(E.call(this),this.id=K.id,this.type=K.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},"custom"!==K.type&&(this.metadata=(K=K).metadata,this.minzoom=K.minzoom,this.maxzoom=K.maxzoom,"background"!==K.type&&(this.source=K.source,this.sourceLayer=K["source-layer"],this.filter=K.filter),ce.layout&&(this._unevaluatedLayout=new _s(ce.layout)),ce.paint)){for(var xe in this._transitionablePaint=new Dl(ce.paint),K.paint)this.setPaintProperty(xe,K.paint[xe],{validate:!1});for(var Ae in K.layout)this.setLayoutProperty(Ae,K.layout[Ae],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new yl(ce.paint)}}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},z.prototype.getLayoutProperty=function(K){return"visibility"===K?this.visibility:this._unevaluatedLayout.getValue(K)},z.prototype.setLayoutProperty=function(K,ce,xe){void 0===xe&&(xe={}),null!=ce&&this._validate(Rr,"layers."+this.id+".layout."+K,K,ce,xe)||("visibility"!==K?this._unevaluatedLayout.setValue(K,ce):this.visibility=ce)},z.prototype.getPaintProperty=function(K){return M(K,"-transition")?this._transitionablePaint.getTransition(K.slice(0,-"-transition".length)):this._transitionablePaint.getValue(K)},z.prototype.setPaintProperty=function(K,ce,xe){if(void 0===xe&&(xe={}),null!=ce&&this._validate(kr,"layers."+this.id+".paint."+K,K,ce,xe))return!1;if(M(K,"-transition"))return this._transitionablePaint.setTransition(K.slice(0,-"-transition".length),ce||void 0),!1;var Re=this._transitionablePaint._values[K],We="cross-faded-data-driven"===Re.property.specification["property-type"],ot=Re.value.isDataDriven(),bt=Re.value;this._transitionablePaint.setValue(K,ce),this._handleSpecialPaintPropertyUpdate(K);var kt=this._transitionablePaint._values[K].value;return kt.isDataDriven()||ot||We||this._handleOverridablePaintPropertyUpdate(K,bt,kt)},z.prototype._handleSpecialPaintPropertyUpdate=function(K){},z.prototype._handleOverridablePaintPropertyUpdate=function(K,ce,xe){return!1},z.prototype.isHidden=function(K){return!!(this.minzoom&&K<this.minzoom)||!!(this.maxzoom&&K>=this.maxzoom)||"none"===this.visibility},z.prototype.updateTransitions=function(K){this._transitioningPaint=this._transitionablePaint.transitioned(K,this._transitioningPaint)},z.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},z.prototype.recalculate=function(K,ce){K.getCrossfadeParameters&&(this._crossfadeParameters=K.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(K,void 0,ce)),this.paint=this._transitioningPaint.possiblyEvaluate(K,void 0,ce)},z.prototype.serialize=function(){var K={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(K.layout=K.layout||{},K.layout.visibility=this.visibility),k(K,function(ce,xe){return!(void 0===ce||"layout"===xe&&!Object.keys(ce).length||"paint"===xe&&!Object.keys(ce).length)})},z.prototype._validate=function(K,ce,xe,Ae,Re){return void 0===Re&&(Re={}),(!Re||!1!==Re.validate)&&Wr(this,K.call(vr,{key:ce,layerType:this.type,objectKey:xe,value:Ae,styleSpec:Be,style:{glyphs:!0,sprite:!0}}))},z.prototype.is3D=function(){return!1},z.prototype.isTileClipped=function(){return!1},z.prototype.hasOffscreenPass=function(){return!1},z.prototype.resize=function(){},z.prototype.isStateDependent=function(){for(var K in this.paint._values){var ce=this.paint.get(K);if(ce instanceof Uo&&jo(ce.property.specification)&&("source"===ce.value.kind||"composite"===ce.value.kind)&&ce.value.isStateDependent)return!0}return!1},z}(Ve),fc={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},bu=function(E,z){this._structArray=E,this._pos1=z*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Fa=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function Za(E,z){void 0===z&&(z=1);var K=0,ce=0;return{members:E.map(function(xe){var Re=fc[xe.type].BYTES_PER_ELEMENT,We=K=Zl(K,Math.max(z,Re)),ot=xe.components||1;return ce=Math.max(ce,Re),K+=Re*ot,{name:xe.name,type:xe.type,components:ot,offset:We}}),size:Zl(K,Math.max(ce,z)),alignment:z}}function Zl(E,z){return Math.ceil(E/z)*z}Fa.serialize=function(E,z){return E._trim(),z&&(E.isTransferred=!0,z.push(E.arrayBuffer)),{length:E.length,arrayBuffer:E.arrayBuffer}},Fa.deserialize=function(E){var z=Object.create(this.prototype);return z.arrayBuffer=E.arrayBuffer,z.length=E.length,z.capacity=E.arrayBuffer.byteLength/z.bytesPerElement,z._refreshViews(),z},Fa.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Fa.prototype.clear=function(){this.length=0},Fa.prototype.resize=function(E){this.reserve(E),this.length=E},Fa.prototype.reserve=function(E){if(E>this.capacity){this.capacity=Math.max(E,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var z=this.uint8;this._refreshViews(),z&&this.uint8.set(z)}},Fa.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var ei=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(K,ce){var xe=this.length;return this.resize(xe+1),this.emplace(xe,K,ce)},z.prototype.emplace=function(K,ce,xe){var Ae=2*K;return this.int16[Ae+0]=ce,this.int16[Ae+1]=xe,K},z}(Fa);ei.prototype.bytesPerElement=4,br("StructArrayLayout2i4",ei);var ea=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(K,ce,xe,Ae){var Re=this.length;return this.resize(Re+1),this.emplace(Re,K,ce,xe,Ae)},z.prototype.emplace=function(K,ce,xe,Ae,Re){var We=4*K;return this.int16[We+0]=ce,this.int16[We+1]=xe,this.int16[We+2]=Ae,this.int16[We+3]=Re,K},z}(Fa);ea.prototype.bytesPerElement=8,br("StructArrayLayout4i8",ea);var Ys=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(K,ce,xe,Ae,Re,We){var ot=this.length;return this.resize(ot+1),this.emplace(ot,K,ce,xe,Ae,Re,We)},z.prototype.emplace=function(K,ce,xe,Ae,Re,We,ot){var bt=6*K;return this.int16[bt+0]=ce,this.int16[bt+1]=xe,this.int16[bt+2]=Ae,this.int16[bt+3]=Re,this.int16[bt+4]=We,this.int16[bt+5]=ot,K},z}(Fa);Ys.prototype.bytesPerElement=12,br("StructArrayLayout2i4i12",Ys);var Po=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(K,ce,xe,Ae,Re,We){var ot=this.length;return this.resize(ot+1),this.emplace(ot,K,ce,xe,Ae,Re,We)},z.prototype.emplace=function(K,ce,xe,Ae,Re,We,ot){var bt=4*K,kt=8*K;return this.int16[bt+0]=ce,this.int16[bt+1]=xe,this.uint8[kt+4]=Ae,this.uint8[kt+5]=Re,this.uint8[kt+6]=We,this.uint8[kt+7]=ot,K},z}(Fa);Po.prototype.bytesPerElement=8,br("StructArrayLayout2i4ub8",Po);var Xl=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(K,ce,xe,Ae,Re,We,ot,bt,kt,Xt){var cn=this.length;return this.resize(cn+1),this.emplace(cn,K,ce,xe,Ae,Re,We,ot,bt,kt,Xt)},z.prototype.emplace=function(K,ce,xe,Ae,Re,We,ot,bt,kt,Xt,cn){var nn=9*K,vn=18*K;return this.uint16[nn+0]=ce,this.uint16[nn+1]=xe,this.uint16[nn+2]=Ae,this.uint16[nn+3]=Re,this.uint16[nn+4]=We,this.uint16[nn+5]=ot,this.uint16[nn+6]=bt,this.uint16[nn+7]=kt,this.uint8[vn+16]=Xt,this.uint8[vn+17]=cn,K},z}(Fa);Xl.prototype.bytesPerElement=18,br("StructArrayLayout8ui2ub18",Xl);var Ll=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(K,ce,xe,Ae,Re,We,ot,bt,kt,Xt,cn,nn){var vn=this.length;return this.resize(vn+1),this.emplace(vn,K,ce,xe,Ae,Re,We,ot,bt,kt,Xt,cn,nn)},z.prototype.emplace=function(K,ce,xe,Ae,Re,We,ot,bt,kt,Xt,cn,nn,vn){var Pn=12*K;return this.int16[Pn+0]=ce,this.int16[Pn+1]=xe,this.int16[Pn+2]=Ae,this.int16[Pn+3]=Re,this.uint16[Pn+4]=We,this.uint16[Pn+5]=ot,this.uint16[Pn+6]=bt,this.uint16[Pn+7]=kt,this.int16[Pn+8]=Xt,this.int16[Pn+9]=cn,this.int16[Pn+10]=nn,this.int16[Pn+11]=vn,K},z}(Fa);Ll.prototype.bytesPerElement=24,br("StructArrayLayout4i4ui4i24",Ll);var hs=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(K,ce,xe){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,K,ce,xe)},z.prototype.emplace=function(K,ce,xe,Ae){var Re=3*K;return this.float32[Re+0]=ce,this.float32[Re+1]=xe,this.float32[Re+2]=Ae,K},z}(Fa);hs.prototype.bytesPerElement=12,br("StructArrayLayout3f12",hs);var ku=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(K){var ce=this.length;return this.resize(ce+1),this.emplace(ce,K)},z.prototype.emplace=function(K,ce){return this.uint32[1*K+0]=ce,K},z}(Fa);ku.prototype.bytesPerElement=4,br("StructArrayLayout1ul4",ku);var Vu=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(K,ce,xe,Ae,Re,We,ot,bt,kt){var Xt=this.length;return this.resize(Xt+1),this.emplace(Xt,K,ce,xe,Ae,Re,We,ot,bt,kt)},z.prototype.emplace=function(K,ce,xe,Ae,Re,We,ot,bt,kt,Xt){var cn=10*K,nn=5*K;return this.int16[cn+0]=ce,this.int16[cn+1]=xe,this.int16[cn+2]=Ae,this.int16[cn+3]=Re,this.int16[cn+4]=We,this.int16[cn+5]=ot,this.uint32[nn+3]=bt,this.uint16[cn+8]=kt,this.uint16[cn+9]=Xt,K},z}(Fa);Vu.prototype.bytesPerElement=20,br("StructArrayLayout6i1ul2ui20",Vu);var su=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(K,ce,xe,Ae,Re,We){var ot=this.length;return this.resize(ot+1),this.emplace(ot,K,ce,xe,Ae,Re,We)},z.prototype.emplace=function(K,ce,xe,Ae,Re,We,ot){var bt=6*K;return this.int16[bt+0]=ce,this.int16[bt+1]=xe,this.int16[bt+2]=Ae,this.int16[bt+3]=Re,this.int16[bt+4]=We,this.int16[bt+5]=ot,K},z}(Fa);su.prototype.bytesPerElement=12,br("StructArrayLayout2i2i2i12",su);var hc=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(K,ce,xe,Ae,Re){var We=this.length;return this.resize(We+1),this.emplace(We,K,ce,xe,Ae,Re)},z.prototype.emplace=function(K,ce,xe,Ae,Re,We){var ot=4*K,bt=8*K;return this.float32[ot+0]=ce,this.float32[ot+1]=xe,this.float32[ot+2]=Ae,this.int16[bt+6]=Re,this.int16[bt+7]=We,K},z}(Fa);hc.prototype.bytesPerElement=16,br("StructArrayLayout2f1f2i16",hc);var Nl=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(K,ce,xe,Ae){var Re=this.length;return this.resize(Re+1),this.emplace(Re,K,ce,xe,Ae)},z.prototype.emplace=function(K,ce,xe,Ae,Re){var We=12*K,ot=3*K;return this.uint8[We+0]=ce,this.uint8[We+1]=xe,this.float32[ot+1]=Ae,this.float32[ot+2]=Re,K},z}(Fa);Nl.prototype.bytesPerElement=12,br("StructArrayLayout2ub2f12",Nl);var $o=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(K,ce,xe){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,K,ce,xe)},z.prototype.emplace=function(K,ce,xe,Ae){var Re=3*K;return this.uint16[Re+0]=ce,this.uint16[Re+1]=xe,this.uint16[Re+2]=Ae,K},z}(Fa);$o.prototype.bytesPerElement=6,br("StructArrayLayout3ui6",$o);var Cs=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(K,ce,xe,Ae,Re,We,ot,bt,kt,Xt,cn,nn,vn,Pn,Xn,Yn,ar){var lr=this.length;return this.resize(lr+1),this.emplace(lr,K,ce,xe,Ae,Re,We,ot,bt,kt,Xt,cn,nn,vn,Pn,Xn,Yn,ar)},z.prototype.emplace=function(K,ce,xe,Ae,Re,We,ot,bt,kt,Xt,cn,nn,vn,Pn,Xn,Yn,ar,lr){var mr=24*K,Pr=12*K,Br=48*K;return this.int16[mr+0]=ce,this.int16[mr+1]=xe,this.uint16[mr+2]=Ae,this.uint16[mr+3]=Re,this.uint32[Pr+2]=We,this.uint32[Pr+3]=ot,this.uint32[Pr+4]=bt,this.uint16[mr+10]=kt,this.uint16[mr+11]=Xt,this.uint16[mr+12]=cn,this.float32[Pr+7]=nn,this.float32[Pr+8]=vn,this.uint8[Br+36]=Pn,this.uint8[Br+37]=Xn,this.uint8[Br+38]=Yn,this.uint32[Pr+10]=ar,this.int16[mr+22]=lr,K},z}(Fa);Cs.prototype.bytesPerElement=48,br("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Cs);var Il=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(K,ce,xe,Ae,Re,We,ot,bt,kt,Xt,cn,nn,vn,Pn,Xn,Yn,ar,lr,mr,Pr,Br,ui,ni,yi,Ei,Pi,_i,Ui){var zi=this.length;return this.resize(zi+1),this.emplace(zi,K,ce,xe,Ae,Re,We,ot,bt,kt,Xt,cn,nn,vn,Pn,Xn,Yn,ar,lr,mr,Pr,Br,ui,ni,yi,Ei,Pi,_i,Ui)},z.prototype.emplace=function(K,ce,xe,Ae,Re,We,ot,bt,kt,Xt,cn,nn,vn,Pn,Xn,Yn,ar,lr,mr,Pr,Br,ui,ni,yi,Ei,Pi,_i,Ui,zi){var Li=34*K,za=17*K;return this.int16[Li+0]=ce,this.int16[Li+1]=xe,this.int16[Li+2]=Ae,this.int16[Li+3]=Re,this.int16[Li+4]=We,this.int16[Li+5]=ot,this.int16[Li+6]=bt,this.int16[Li+7]=kt,this.uint16[Li+8]=Xt,this.uint16[Li+9]=cn,this.uint16[Li+10]=nn,this.uint16[Li+11]=vn,this.uint16[Li+12]=Pn,this.uint16[Li+13]=Xn,this.uint16[Li+14]=Yn,this.uint16[Li+15]=ar,this.uint16[Li+16]=lr,this.uint16[Li+17]=mr,this.uint16[Li+18]=Pr,this.uint16[Li+19]=Br,this.uint16[Li+20]=ui,this.uint16[Li+21]=ni,this.uint16[Li+22]=yi,this.uint32[za+12]=Ei,this.float32[za+13]=Pi,this.float32[za+14]=_i,this.float32[za+15]=Ui,this.float32[za+16]=zi,K},z}(Fa);Il.prototype.bytesPerElement=68,br("StructArrayLayout8i15ui1ul4f68",Il);var pe=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(K){var ce=this.length;return this.resize(ce+1),this.emplace(ce,K)},z.prototype.emplace=function(K,ce){return this.float32[1*K+0]=ce,K},z}(Fa);pe.prototype.bytesPerElement=4,br("StructArrayLayout1f4",pe);var O=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(K,ce,xe){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,K,ce,xe)},z.prototype.emplace=function(K,ce,xe,Ae){var Re=3*K;return this.int16[Re+0]=ce,this.int16[Re+1]=xe,this.int16[Re+2]=Ae,K},z}(Fa);O.prototype.bytesPerElement=6,br("StructArrayLayout3i6",O);var N=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(K,ce,xe){var Ae=this.length;return this.resize(Ae+1),this.emplace(Ae,K,ce,xe)},z.prototype.emplace=function(K,ce,xe,Ae){var We=4*K;return this.uint32[2*K+0]=ce,this.uint16[We+2]=xe,this.uint16[We+3]=Ae,K},z}(Fa);N.prototype.bytesPerElement=8,br("StructArrayLayout1ul2ui8",N);var H=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(K,ce){var xe=this.length;return this.resize(xe+1),this.emplace(xe,K,ce)},z.prototype.emplace=function(K,ce,xe){var Ae=2*K;return this.uint16[Ae+0]=ce,this.uint16[Ae+1]=xe,K},z}(Fa);H.prototype.bytesPerElement=4,br("StructArrayLayout2ui4",H);var X=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},z.prototype.emplaceBack=function(K){var ce=this.length;return this.resize(ce+1),this.emplace(ce,K)},z.prototype.emplace=function(K,ce){return this.uint16[1*K+0]=ce,K},z}(Fa);X.prototype.bytesPerElement=2,br("StructArrayLayout1ui2",X);var fe=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(K,ce){var xe=this.length;return this.resize(xe+1),this.emplace(xe,K,ce)},z.prototype.emplace=function(K,ce,xe){var Ae=2*K;return this.float32[Ae+0]=ce,this.float32[Ae+1]=xe,K},z}(Fa);fe.prototype.bytesPerElement=8,br("StructArrayLayout2f8",fe);var me=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},z.prototype.emplaceBack=function(K,ce,xe,Ae){var Re=this.length;return this.resize(Re+1),this.emplace(Re,K,ce,xe,Ae)},z.prototype.emplace=function(K,ce,xe,Ae,Re){var We=4*K;return this.float32[We+0]=ce,this.float32[We+1]=xe,this.float32[We+2]=Ae,this.float32[We+3]=Re,K},z}(Fa);me.prototype.bytesPerElement=16,br("StructArrayLayout4f16",me);var _e=function(E){function z(){E.apply(this,arguments)}E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z;var K={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return K.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},K.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},K.x1.get=function(){return this._structArray.int16[this._pos2+2]},K.y1.get=function(){return this._structArray.int16[this._pos2+3]},K.x2.get=function(){return this._structArray.int16[this._pos2+4]},K.y2.get=function(){return this._structArray.int16[this._pos2+5]},K.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},K.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},K.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},K.anchorPoint.get=function(){return new i(this.anchorPointX,this.anchorPointY)},Object.defineProperties(z.prototype,K),z}(bu);_e.prototype.size=20;var ke=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.get=function(K){return new _e(this,K)},z}(Vu);br("CollisionBoxArray",ke);var Oe=function(E){function z(){E.apply(this,arguments)}E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z;var K={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return K.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},K.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},K.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},K.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},K.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},K.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},K.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},K.segment.get=function(){return this._structArray.uint16[this._pos2+10]},K.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},K.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},K.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},K.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},K.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},K.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},K.placedOrientation.set=function(ce){this._structArray.uint8[this._pos1+37]=ce},K.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},K.hidden.set=function(ce){this._structArray.uint8[this._pos1+38]=ce},K.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},K.crossTileID.set=function(ce){this._structArray.uint32[this._pos4+10]=ce},K.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(z.prototype,K),z}(bu);Oe.prototype.size=48;var Xe=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.get=function(K){return new Oe(this,K)},z}(Cs);br("PlacedSymbolArray",Xe);var nt=function(E){function z(){E.apply(this,arguments)}E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z;var K={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return K.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},K.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},K.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},K.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},K.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},K.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},K.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},K.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},K.key.get=function(){return this._structArray.uint16[this._pos2+8]},K.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},K.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},K.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},K.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},K.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},K.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},K.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},K.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},K.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},K.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},K.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},K.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},K.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},K.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},K.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},K.crossTileID.set=function(ce){this._structArray.uint32[this._pos4+12]=ce},K.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},K.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},K.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},K.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(z.prototype,K),z}(bu);nt.prototype.size=68;var dt=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.get=function(K){return new nt(this,K)},z}(Il);br("SymbolInstanceArray",dt);var Dt=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.getoffsetX=function(K){return this.float32[1*K+0]},z}(pe);br("GlyphOffsetArray",Dt);var Ft=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.getx=function(K){return this.int16[3*K+0]},z.prototype.gety=function(K){return this.int16[3*K+1]},z.prototype.gettileUnitDistanceFromAnchor=function(K){return this.int16[3*K+2]},z}(O);br("SymbolLineVertexArray",Ft);var It=function(E){function z(){E.apply(this,arguments)}E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z;var K={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return K.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},K.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},K.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(z.prototype,K),z}(bu);It.prototype.size=8;var Pt=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.get=function(K){return new It(this,K)},z}(N);br("FeatureIndexArray",Pt);var Et=Za([{name:"a_pos",components:2,type:"Int16"}],4).members,Zt=function(E){void 0===E&&(E=[]),this.segments=E};function qt(E,z){return 256*(E=c(Math.floor(E),0,255))+c(Math.floor(z),0,255)}Zt.prototype.prepareSegment=function(E,z,K,ce){var xe=this.segments[this.segments.length-1];return E>Zt.MAX_VERTEX_ARRAY_LENGTH&&D("Max vertices per segment is "+Zt.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+E),(!xe||xe.vertexLength+E>Zt.MAX_VERTEX_ARRAY_LENGTH||xe.sortKey!==ce)&&(xe={vertexOffset:z.length,primitiveOffset:K.length,vertexLength:0,primitiveLength:0},void 0!==ce&&(xe.sortKey=ce),this.segments.push(xe)),xe},Zt.prototype.get=function(){return this.segments},Zt.prototype.destroy=function(){for(var E=0,z=this.segments;E<z.length;E+=1){var K=z[E];for(var ce in K.vaos)K.vaos[ce].destroy()}},Zt.simpleSegment=function(E,z,K,ce){return new Zt([{vertexOffset:E,primitiveOffset:z,vertexLength:K,primitiveLength:ce,vaos:{},sortKey:0}])},Zt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,br("SegmentVector",Zt);var $t=Za([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint8"},{name:"a_pixel_ratio_to",components:1,type:"Uint8"}]),yn=o(function(E){E.exports=function(z,K){var ce,xe,Ae,Re,We,ot,bt,kt;for(xe=z.length-(ce=3&z.length),Ae=K,We=3432918353,ot=461845907,kt=0;kt<xe;)bt=255&z.charCodeAt(kt)|(255&z.charCodeAt(++kt))<<8|(255&z.charCodeAt(++kt))<<16|(255&z.charCodeAt(++kt))<<24,++kt,Ae=27492+(65535&(Re=5*(65535&(Ae=(Ae^=bt=(65535&(bt=(bt=(65535&bt)*We+(((bt>>>16)*We&65535)<<16)&4294967295)<<15|bt>>>17))*ot+(((bt>>>16)*ot&65535)<<16)&4294967295)<<13|Ae>>>19))+((5*(Ae>>>16)&65535)<<16)&4294967295))+((58964+(Re>>>16)&65535)<<16);switch(bt=0,ce){case 3:bt^=(255&z.charCodeAt(kt+2))<<16;case 2:bt^=(255&z.charCodeAt(kt+1))<<8;case 1:Ae^=bt=(65535&(bt=(bt=(65535&(bt^=255&z.charCodeAt(kt)))*We+(((bt>>>16)*We&65535)<<16)&4294967295)<<15|bt>>>17))*ot+(((bt>>>16)*ot&65535)<<16)&4294967295}return Ae^=z.length,Ae=2246822507*(65535&(Ae^=Ae>>>16))+((2246822507*(Ae>>>16)&65535)<<16)&4294967295,Ae=3266489909*(65535&(Ae^=Ae>>>13))+((3266489909*(Ae>>>16)&65535)<<16)&4294967295,(Ae^=Ae>>>16)>>>0}}),kn=o(function(E){E.exports=function(z,K){for(var ce,xe=z.length,Ae=K^xe,Re=0;xe>=4;)ce=1540483477*(65535&(ce=255&z.charCodeAt(Re)|(255&z.charCodeAt(++Re))<<8|(255&z.charCodeAt(++Re))<<16|(255&z.charCodeAt(++Re))<<24))+((1540483477*(ce>>>16)&65535)<<16),Ae=1540483477*(65535&Ae)+((1540483477*(Ae>>>16)&65535)<<16)^(ce=1540483477*(65535&(ce^=ce>>>24))+((1540483477*(ce>>>16)&65535)<<16)),xe-=4,++Re;switch(xe){case 3:Ae^=(255&z.charCodeAt(Re+2))<<16;case 2:Ae^=(255&z.charCodeAt(Re+1))<<8;case 1:Ae=1540483477*(65535&(Ae^=255&z.charCodeAt(Re)))+((1540483477*(Ae>>>16)&65535)<<16)}return Ae=1540483477*(65535&(Ae^=Ae>>>13))+((1540483477*(Ae>>>16)&65535)<<16),(Ae^=Ae>>>15)>>>0}}),Vn=yn,Tr=kn;Vn.murmur3=yn,Vn.murmur2=Tr;var _r=function(){this.ids=[],this.positions=[],this.indexed=!1};_r.prototype.add=function(E,z,K,ce){this.ids.push(Sr(E)),this.positions.push(z,K,ce)},_r.prototype.getPositions=function(E){for(var z=Sr(E),K=0,ce=this.ids.length-1;K<ce;){var xe=K+ce>>1;this.ids[xe]>=z?ce=xe:K=xe+1}for(var Ae=[];this.ids[K]===z;)Ae.push({index:this.positions[3*K],start:this.positions[3*K+1],end:this.positions[3*K+2]}),K++;return Ae},_r.serialize=function(E,z){var K=new Float64Array(E.ids),ce=new Uint32Array(E.positions);return function xe(Ae,Re,We,ot){for(;We<ot;){for(var bt=Ae[We+ot>>1],kt=We-1,Xt=ot+1;;){do{kt++}while(Ae[kt]<bt);do{Xt--}while(Ae[Xt]>bt);if(kt>=Xt)break;hi(Ae,kt,Xt),hi(Re,3*kt,3*Xt),hi(Re,3*kt+1,3*Xt+1),hi(Re,3*kt+2,3*Xt+2)}Xt-We<ot-Xt?(xe(Ae,Re,We,Xt),We=Xt+1):(xe(Ae,Re,Xt+1,ot),ot=Xt)}}(K,ce,0,K.length-1),z&&z.push(K.buffer,ce.buffer),{ids:K,positions:ce}},_r.deserialize=function(E){var z=new _r;return z.ids=E.ids,z.positions=E.positions,z.indexed=!0,z};var Or=Math.pow(2,53)-1;function Sr(E){var z=+E;return!isNaN(z)&&z<=Or?z:Vn(String(E))}function hi(E,z,K){var ce=E[z];E[z]=E[K],E[K]=ce}br("FeaturePositionMap",_r);var vi=function(E,z){this.gl=E.gl,this.location=z},Oi=function(E){function z(K,ce){E.call(this,K,ce),this.current=0}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.set=function(K){this.current!==K&&(this.current=K,this.gl.uniform1i(this.location,K))},z}(vi),cr=function(E){function z(K,ce){E.call(this,K,ce),this.current=0}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.set=function(K){this.current!==K&&(this.current=K,this.gl.uniform1f(this.location,K))},z}(vi),Hr=function(E){function z(K,ce){E.call(this,K,ce),this.current=[0,0]}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.set=function(K){K[0]===this.current[0]&&K[1]===this.current[1]||(this.current=K,this.gl.uniform2f(this.location,K[0],K[1]))},z}(vi),bi=function(E){function z(K,ce){E.call(this,K,ce),this.current=[0,0,0]}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.set=function(K){K[0]===this.current[0]&&K[1]===this.current[1]&&K[2]===this.current[2]||(this.current=K,this.gl.uniform3f(this.location,K[0],K[1],K[2]))},z}(vi),mi=function(E){function z(K,ce){E.call(this,K,ce),this.current=[0,0,0,0]}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.set=function(K){K[0]===this.current[0]&&K[1]===this.current[1]&&K[2]===this.current[2]&&K[3]===this.current[3]||(this.current=K,this.gl.uniform4f(this.location,K[0],K[1],K[2],K[3]))},z}(vi),wi=function(E){function z(K,ce){E.call(this,K,ce),this.current=Tn.transparent}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.set=function(K){K.r===this.current.r&&K.g===this.current.g&&K.b===this.current.b&&K.a===this.current.a||(this.current=K,this.gl.uniform4f(this.location,K.r,K.g,K.b,K.a))},z}(vi),Fi=new Float32Array(16),ca=function(E){function z(K,ce){E.call(this,K,ce),this.current=Fi}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.set=function(K){if(K[12]!==this.current[12]||K[0]!==this.current[0])return this.current=K,void this.gl.uniformMatrix4fv(this.location,!1,K);for(var ce=1;ce<16;ce++)if(K[ce]!==this.current[ce]){this.current=K,this.gl.uniformMatrix4fv(this.location,!1,K);break}},z}(vi);function Ai(E){return[qt(255*E.r,255*E.g),qt(255*E.b,255*E.a)]}var Zi=function(E,z,K){this.value=E,this.uniformNames=z.map(function(ce){return"u_"+ce}),this.type=K};Zi.prototype.setUniform=function(E,z,K){E.set(K.constantOr(this.value))},Zi.prototype.getBinding=function(E,z,K){return"color"===this.type?new wi(E,z):new cr(E,z)};var Xi=function(E,z){this.uniformNames=z.map(function(K){return"u_"+K}),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Xi.prototype.setConstantPatternPositions=function(E,z){this.pixelRatioFrom=z.pixelRatio,this.pixelRatioTo=E.pixelRatio,this.patternFrom=z.tlbr,this.patternTo=E.tlbr},Xi.prototype.setUniform=function(E,z,K,ce){var xe="u_pattern_to"===ce?this.patternTo:"u_pattern_from"===ce?this.patternFrom:"u_pixel_ratio_to"===ce?this.pixelRatioTo:"u_pixel_ratio_from"===ce?this.pixelRatioFrom:null;xe&&E.set(xe)},Xi.prototype.getBinding=function(E,z,K){return"u_pattern"===K.substr(0,9)?new mi(E,z):new cr(E,z)};var ya=function(E,z,K,ce){this.expression=E,this.type=K,this.maxValue=0,this.paintVertexAttributes=z.map(function(xe){return{name:"a_"+xe,type:"Float32",components:"color"===K?2:1,offset:0}}),this.paintVertexArray=new ce};ya.prototype.populatePaintArray=function(E,z,K,ce,xe){var Ae=this.paintVertexArray.length,Re=this.expression.evaluate(new Qa(0),z,{},ce,[],xe);this.paintVertexArray.resize(E),this._setPaintValue(Ae,E,Re)},ya.prototype.updatePaintArray=function(E,z,K,ce){var xe=this.expression.evaluate({zoom:0},K,ce);this._setPaintValue(E,z,xe)},ya.prototype._setPaintValue=function(E,z,K){if("color"===this.type)for(var ce=Ai(K),xe=E;xe<z;xe++)this.paintVertexArray.emplace(xe,ce[0],ce[1]);else{for(var Ae=E;Ae<z;Ae++)this.paintVertexArray.emplace(Ae,K);this.maxValue=Math.max(this.maxValue,Math.abs(K))}},ya.prototype.upload=function(E){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=E.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ya.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var ta=function(E,z,K,ce,xe,Ae){this.expression=E,this.uniformNames=z.map(function(Re){return"u_"+Re+"_t"}),this.type=K,this.useIntegerZoom=ce,this.zoom=xe,this.maxValue=0,this.paintVertexAttributes=z.map(function(Re){return{name:"a_"+Re,type:"Float32",components:"color"===K?4:2,offset:0}}),this.paintVertexArray=new Ae};ta.prototype.populatePaintArray=function(E,z,K,ce,xe){var Ae=this.expression.evaluate(new Qa(this.zoom),z,{},ce,[],xe),Re=this.expression.evaluate(new Qa(this.zoom+1),z,{},ce,[],xe),We=this.paintVertexArray.length;this.paintVertexArray.resize(E),this._setPaintValue(We,E,Ae,Re)},ta.prototype.updatePaintArray=function(E,z,K,ce){var xe=this.expression.evaluate({zoom:this.zoom},K,ce),Ae=this.expression.evaluate({zoom:this.zoom+1},K,ce);this._setPaintValue(E,z,xe,Ae)},ta.prototype._setPaintValue=function(E,z,K,ce){if("color"===this.type)for(var xe=Ai(K),Ae=Ai(ce),Re=E;Re<z;Re++)this.paintVertexArray.emplace(Re,xe[0],xe[1],Ae[0],Ae[1]);else{for(var We=E;We<z;We++)this.paintVertexArray.emplace(We,K,ce);this.maxValue=Math.max(this.maxValue,Math.abs(K),Math.abs(ce))}},ta.prototype.upload=function(E){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=E.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ta.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},ta.prototype.setUniform=function(E,z){var K=this.useIntegerZoom?Math.floor(z.zoom):z.zoom,ce=c(this.expression.interpolationFactor(K,this.zoom,this.zoom+1),0,1);E.set(ce)},ta.prototype.getBinding=function(E,z,K){return new cr(E,z)};var ba=function(E,z,K,ce,xe,Ae){this.expression=E,this.type=z,this.useIntegerZoom=K,this.zoom=ce,this.layerId=Ae,this.zoomInPaintVertexArray=new xe,this.zoomOutPaintVertexArray=new xe};ba.prototype.populatePaintArray=function(E,z,K){var ce=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(E),this.zoomOutPaintVertexArray.resize(E),this._setPaintValues(ce,E,z.patterns&&z.patterns[this.layerId],K)},ba.prototype.updatePaintArray=function(E,z,K,ce,xe){this._setPaintValues(E,z,K.patterns&&K.patterns[this.layerId],xe)},ba.prototype._setPaintValues=function(E,z,K,ce){if(ce&&K){var We=ce[K.min],ot=ce[K.mid],bt=ce[K.max];if(We&&ot&&bt)for(var kt=E;kt<z;kt++)this.zoomInPaintVertexArray.emplace(kt,ot.tl[0],ot.tl[1],ot.br[0],ot.br[1],We.tl[0],We.tl[1],We.br[0],We.br[1],ot.pixelRatio,We.pixelRatio),this.zoomOutPaintVertexArray.emplace(kt,ot.tl[0],ot.tl[1],ot.br[0],ot.br[1],bt.tl[0],bt.tl[1],bt.br[0],bt.br[1],ot.pixelRatio,bt.pixelRatio)}},ba.prototype.upload=function(E){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=E.createVertexBuffer(this.zoomInPaintVertexArray,$t.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=E.createVertexBuffer(this.zoomOutPaintVertexArray,$t.members,this.expression.isStateDependent))},ba.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Ra=function(E,z,K,ce){this.binders={},this.layoutAttributes=ce,this._buffers=[];var xe=[];for(var Ae in E.paint._values)if(K(Ae)){var Re=E.paint.get(Ae);if(Re instanceof Uo&&jo(Re.property.specification)){var We=Oo(Ae,E.type),ot=Re.value,bt=Re.property.specification.type,kt=Re.property.useIntegerZoom,Xt=Re.property.specification["property-type"],cn="cross-faded"===Xt||"cross-faded-data-driven"===Xt;if("constant"===ot.kind)this.binders[Ae]=cn?new Xi(ot.value,We):new Zi(ot.value,We,bt),xe.push("/u_"+Ae);else if("source"===ot.kind||cn){var nn=ko(Ae,bt,"source");this.binders[Ae]=cn?new ba(ot,bt,kt,z,nn,E.id):new ya(ot,We,bt,nn),xe.push("/a_"+Ae)}else{var vn=ko(Ae,bt,"composite");this.binders[Ae]=new ta(ot,We,bt,kt,z,vn),xe.push("/z_"+Ae)}}}this.cacheKey=xe.sort().join("")};Ra.prototype.getMaxValue=function(E){var z=this.binders[E];return z instanceof ya||z instanceof ta?z.maxValue:0},Ra.prototype.populatePaintArrays=function(E,z,K,ce,xe){for(var Ae in this.binders){var Re=this.binders[Ae];(Re instanceof ya||Re instanceof ta||Re instanceof ba)&&Re.populatePaintArray(E,z,K,ce,xe)}},Ra.prototype.setConstantPatternPositions=function(E,z){for(var K in this.binders){var ce=this.binders[K];ce instanceof Xi&&ce.setConstantPatternPositions(E,z)}},Ra.prototype.updatePaintArrays=function(E,z,K,ce,xe){var Ae=!1;for(var Re in E)for(var We=0,ot=z.getPositions(Re);We<ot.length;We+=1){var bt=ot[We],kt=K.feature(bt.index);for(var Xt in this.binders){var cn=this.binders[Xt];if((cn instanceof ya||cn instanceof ta||cn instanceof ba)&&!0===cn.expression.isStateDependent){var nn=ce.paint.get(Xt);cn.expression=nn.value,cn.updatePaintArray(bt.start,bt.end,kt,E[Re],xe),Ae=!0}}}return Ae},Ra.prototype.defines=function(){var E=[];for(var z in this.binders){var K=this.binders[z];(K instanceof Zi||K instanceof Xi)&&E.push.apply(E,K.uniformNames.map(function(ce){return"#define HAS_UNIFORM_"+ce}))}return E},Ra.prototype.getPaintVertexBuffers=function(){return this._buffers},Ra.prototype.getUniforms=function(E,z){var K=[];for(var ce in this.binders){var xe=this.binders[ce];if(xe instanceof Zi||xe instanceof Xi||xe instanceof ta)for(var Ae=0,Re=xe.uniformNames;Ae<Re.length;Ae+=1){var We=Re[Ae];if(z[We]){var ot=xe.getBinding(E,z[We],We);K.push({name:We,property:ce,binding:ot})}}}return K},Ra.prototype.setUniforms=function(E,z,K,ce){for(var xe=0,Ae=z;xe<Ae.length;xe+=1){var Re=Ae[xe],We=Re.name,ot=Re.property;this.binders[ot].setUniform(Re.binding,ce,K.get(ot),We)}},Ra.prototype.updatePaintBuffers=function(E){for(var z in this._buffers=[],this.binders){var K=this.binders[z];if(E&&K instanceof ba){var ce=2===E.fromScale?K.zoomInPaintVertexBuffer:K.zoomOutPaintVertexBuffer;ce&&this._buffers.push(ce)}else(K instanceof ya||K instanceof ta)&&K.paintVertexBuffer&&this._buffers.push(K.paintVertexBuffer)}},Ra.prototype.upload=function(E){for(var z in this.binders){var K=this.binders[z];(K instanceof ya||K instanceof ta||K instanceof ba)&&K.upload(E)}this.updatePaintBuffers()},Ra.prototype.destroy=function(){for(var E in this.binders){var z=this.binders[E];(z instanceof ya||z instanceof ta||z instanceof ba)&&z.destroy()}};var ro=function(E,z,K,ce){void 0===ce&&(ce=function(){return!0}),this.programConfigurations={};for(var xe=0,Ae=z;xe<Ae.length;xe+=1){var Re=Ae[xe];this.programConfigurations[Re.id]=new Ra(Re,K,ce,E)}this.needsUpload=!1,this._featureMap=new _r,this._bufferOffset=0};function Oo(E,z){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[E]||[E.replace(z+"-","").replace(/-/g,"_")]}function ko(E,z,K){var xe={"line-pattern":{source:Xl,composite:Xl},"fill-pattern":{source:Xl,composite:Xl},"fill-extrusion-pattern":{source:Xl,composite:Xl}}[E];return xe&&xe[K]||{color:{source:fe,composite:me},number:{source:pe,composite:fe}}[z][K]}ro.prototype.populatePaintArrays=function(E,z,K,ce,xe,Ae){for(var Re in this.programConfigurations)this.programConfigurations[Re].populatePaintArrays(E,z,ce,xe,Ae);void 0!==z.id&&this._featureMap.add(z.id,K,this._bufferOffset,E),this._bufferOffset=E,this.needsUpload=!0},ro.prototype.updatePaintArrays=function(E,z,K,ce){for(var xe=0,Ae=K;xe<Ae.length;xe+=1){var Re=Ae[xe];this.needsUpload=this.programConfigurations[Re.id].updatePaintArrays(E,this._featureMap,z,Re,ce)||this.needsUpload}},ro.prototype.get=function(E){return this.programConfigurations[E]},ro.prototype.upload=function(E){if(this.needsUpload){for(var z in this.programConfigurations)this.programConfigurations[z].upload(E);this.needsUpload=!1}},ro.prototype.destroy=function(){for(var E in this.programConfigurations)this.programConfigurations[E].destroy()},br("ConstantBinder",Zi),br("CrossFadedConstantBinder",Xi),br("SourceExpressionBinder",ya),br("CrossFadedCompositeBinder",ba),br("CompositeExpressionBinder",ta),br("ProgramConfiguration",Ra,{omit:["_buffers"]}),br("ProgramConfigurationSet",ro);var Co=(15,{min:-1*Math.pow(2,14),max:Math.pow(2,14)-1});function xo(E){for(var z=8192/E.extent,K=E.loadGeometry(),ce=0;ce<K.length;ce++)for(var xe=K[ce],Ae=0;Ae<xe.length;Ae++){var Re=xe[Ae];Re.x=Math.round(Re.x*z),Re.y=Math.round(Re.y*z),(Re.x<Co.min||Re.x>Co.max||Re.y<Co.min||Re.y>Co.max)&&(D("Geometry exceeds allowed extent, reduce your vector tile buffer size"),Re.x=c(Re.x,Co.min,Co.max),Re.y=c(Re.y,Co.min,Co.max))}return K}function Ko(E,z,K,ce,xe){E.emplaceBack(2*z+(ce+1)/2,2*K+(xe+1)/2)}var rs=function(E){this.zoom=E.zoom,this.overscaling=E.overscaling,this.layers=E.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=E.index,this.hasPattern=!1,this.layoutVertexArray=new ei,this.indexArray=new $o,this.segments=new Zt,this.programConfigurations=new ro(Et,E.layers,E.zoom),this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};function ds(E,z){for(var K=0;K<E.length;K++)if(xl(z,E[K]))return!0;for(var ce=0;ce<z.length;ce++)if(xl(E,z[ce]))return!0;return!!Uu(E,z)}function Bl(E,z,K){return!!xl(E,z)||!!Ss(z,E,K)}function $l(E,z){if(1===E.length)return _u(z,E[0]);for(var K=0;K<z.length;K++)for(var ce=z[K],xe=0;xe<ce.length;xe++)if(xl(E,ce[xe]))return!0;for(var Ae=0;Ae<E.length;Ae++)if(_u(z,E[Ae]))return!0;for(var Re=0;Re<z.length;Re++)if(Uu(E,z[Re]))return!0;return!1}function bf(E,z,K){if(E.length>1){if(Uu(E,z))return!0;for(var ce=0;ce<z.length;ce++)if(Ss(z[ce],E,K))return!0}for(var xe=0;xe<E.length;xe++)if(Ss(E[xe],z,K))return!0;return!1}function Uu(E,z){if(0===E.length||0===z.length)return!1;for(var K=0;K<E.length-1;K++)for(var ce=E[K],xe=E[K+1],Ae=0;Ae<z.length-1;Ae++)if(Hu(ce,xe,z[Ae],z[Ae+1]))return!0;return!1}function Hu(E,z,K,ce){return F(E,K,ce)!==F(z,K,ce)&&F(E,z,K)!==F(E,z,ce)}function Ss(E,z,K){var ce=K*K;if(1===z.length)return E.distSqr(z[0])<ce;for(var xe=1;xe<z.length;xe++)if(Gu(E,z[xe-1],z[xe])<ce)return!0;return!1}function Gu(E,z,K){var ce=z.distSqr(K);if(0===ce)return E.distSqr(z);var xe=((E.x-z.x)*(K.x-z.x)+(E.y-z.y)*(K.y-z.y))/ce;return E.distSqr(xe<0?z:xe>1?K:K.sub(z)._mult(xe)._add(z))}function _u(E,z){for(var K,ce,xe,Ae=!1,Re=0;Re<E.length;Re++)for(var We=0,ot=(K=E[Re]).length-1;We<K.length;ot=We++)(ce=K[We]).y>z.y!=(xe=K[ot]).y>z.y&&z.x<(xe.x-ce.x)*(z.y-ce.y)/(xe.y-ce.y)+ce.x&&(Ae=!Ae);return Ae}function xl(E,z){for(var K=!1,ce=0,xe=E.length-1;ce<E.length;xe=ce++){var Ae=E[ce],Re=E[xe];Ae.y>z.y!=Re.y>z.y&&z.x<(Re.x-Ae.x)*(z.y-Ae.y)/(Re.y-Ae.y)+Ae.x&&(K=!K)}return K}function qu(E,z,K){var ce=K[0],xe=K[2];if(E.x<ce.x&&z.x<ce.x||E.x>xe.x&&z.x>xe.x||E.y<ce.y&&z.y<ce.y||E.y>xe.y&&z.y>xe.y)return!1;var Ae=F(E,z,K[0]);return Ae!==F(E,z,K[1])||Ae!==F(E,z,K[2])||Ae!==F(E,z,K[3])}function bo(E,z,K){var ce=z.paint.get(E).value;return"constant"===ce.kind?ce.value:K.programConfigurations.get(z.id).getMaxValue(E)}function ws(E){return Math.sqrt(E[0]*E[0]+E[1]*E[1])}function Zs(E,z,K,ce,xe){if(!z[0]&&!z[1])return E;var Ae=i.convert(z)._mult(xe);"viewport"===K&&Ae._rotate(-ce);for(var Re=[],We=0;We<E.length;We++)Re.push(E[We].sub(Ae));return Re}rs.prototype.populate=function(E,z,K){var ce=this.layers[0],xe=[],Ae=null;"circle"===ce.type&&(Ae=ce.layout.get("circle-sort-key"));for(var Re=0,We=E;Re<We.length;Re+=1){var ot=We[Re],bt=ot.feature,kt=ot.id,Xt=ot.index,cn=ot.sourceLayerIndex,nn=this.layers[0]._featureFilter.needGeometry,vn={type:bt.type,id:kt,properties:bt.properties,geometry:nn?xo(bt):[]};if(this.layers[0]._featureFilter.filter(new Qa(this.zoom),vn,K)){nn||(vn.geometry=xo(bt));var Pn=Ae?Ae.evaluate(vn,{},K):void 0;xe.push({id:kt,properties:bt.properties,type:bt.type,sourceLayerIndex:cn,index:Xt,geometry:vn.geometry,patterns:{},sortKey:Pn})}}Ae&&xe.sort(function(yi,Ei){return yi.sortKey-Ei.sortKey});for(var Yn=0,ar=xe;Yn<ar.length;Yn+=1){var lr=ar[Yn],Pr=lr.geometry,Br=lr.index,ui=lr.sourceLayerIndex,ni=E[Br].feature;this.addFeature(lr,Pr,Br,K),z.featureIndex.insert(ni,Pr,Br,ui,this.index)}},rs.prototype.update=function(E,z,K){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(E,z,this.stateDependentLayers,K)},rs.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},rs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},rs.prototype.upload=function(E){this.uploaded||(this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,Et),this.indexBuffer=E.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(E),this.uploaded=!0},rs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},rs.prototype.addFeature=function(E,z,K,ce){for(var xe=0,Ae=z;xe<Ae.length;xe+=1)for(var Re=0,We=Ae[xe];Re<We.length;Re+=1){var ot=We[Re],bt=ot.x,kt=ot.y;if(!(bt<0||bt>=8192||kt<0||kt>=8192)){var Xt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,E.sortKey),cn=Xt.vertexLength;Ko(this.layoutVertexArray,bt,kt,-1,-1),Ko(this.layoutVertexArray,bt,kt,1,-1),Ko(this.layoutVertexArray,bt,kt,1,1),Ko(this.layoutVertexArray,bt,kt,-1,1),this.indexArray.emplaceBack(cn,cn+1,cn+2),this.indexArray.emplaceBack(cn,cn+3,cn+2),Xt.vertexLength+=4,Xt.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,E,K,{},ce)},br("CircleBucket",rs,{omit:["layers"]});var Lc=new nl({"circle-sort-key":new Yi(Be.layout_circle["circle-sort-key"])}),jh={paint:new nl({"circle-radius":new Yi(Be.paint_circle["circle-radius"]),"circle-color":new Yi(Be.paint_circle["circle-color"]),"circle-blur":new Yi(Be.paint_circle["circle-blur"]),"circle-opacity":new Yi(Be.paint_circle["circle-opacity"]),"circle-translate":new Ri(Be.paint_circle["circle-translate"]),"circle-translate-anchor":new Ri(Be.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Ri(Be.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Ri(Be.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Yi(Be.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Yi(Be.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Yi(Be.paint_circle["circle-stroke-opacity"])}),layout:Lc},bl="undefined"!=typeof Float32Array?Float32Array:Array;function _f(E){return E[0]=1,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=1,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=1,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E}function Ic(E,z,K){var ce=z[0],xe=z[1],Ae=z[2],Re=z[3],We=z[4],ot=z[5],bt=z[6],kt=z[7],Xt=z[8],cn=z[9],nn=z[10],vn=z[11],Pn=z[12],Xn=z[13],Yn=z[14],ar=z[15],lr=K[0],mr=K[1],Pr=K[2],Br=K[3];return E[0]=lr*ce+mr*We+Pr*Xt+Br*Pn,E[1]=lr*xe+mr*ot+Pr*cn+Br*Xn,E[2]=lr*Ae+mr*bt+Pr*nn+Br*Yn,E[3]=lr*Re+mr*kt+Pr*vn+Br*ar,E[4]=(lr=K[4])*ce+(mr=K[5])*We+(Pr=K[6])*Xt+(Br=K[7])*Pn,E[5]=lr*xe+mr*ot+Pr*cn+Br*Xn,E[6]=lr*Ae+mr*bt+Pr*nn+Br*Yn,E[7]=lr*Re+mr*kt+Pr*vn+Br*ar,E[8]=(lr=K[8])*ce+(mr=K[9])*We+(Pr=K[10])*Xt+(Br=K[11])*Pn,E[9]=lr*xe+mr*ot+Pr*cn+Br*Xn,E[10]=lr*Ae+mr*bt+Pr*nn+Br*Yn,E[11]=lr*Re+mr*kt+Pr*vn+Br*ar,E[12]=(lr=K[12])*ce+(mr=K[13])*We+(Pr=K[14])*Xt+(Br=K[15])*Pn,E[13]=lr*xe+mr*ot+Pr*cn+Br*Xn,E[14]=lr*Ae+mr*bt+Pr*nn+Br*Yn,E[15]=lr*Re+mr*kt+Pr*vn+Br*ar,E}Math.hypot||(Math.hypot=function(){for(var E=arguments,z=0,K=arguments.length;K--;)z+=E[K]*E[K];return Math.sqrt(z)});var Kl,z,dp=Ic;function Wu(E,z,K){var ce=z[0],xe=z[1],Ae=z[2],Re=z[3];return E[0]=K[0]*ce+K[4]*xe+K[8]*Ae+K[12]*Re,E[1]=K[1]*ce+K[5]*xe+K[9]*Ae+K[13]*Re,E[2]=K[2]*ce+K[6]*xe+K[10]*Ae+K[14]*Re,E[3]=K[3]*ce+K[7]*xe+K[11]*Ae+K[15]*Re,E}Kl=new bl(3),bl!=Float32Array&&(Kl[0]=0,Kl[1]=0,Kl[2]=0),z=new bl(4),bl!=Float32Array&&(z[0]=0,z[1]=0,z[2]=0,z[3]=0);var wf=(function(){var z=new bl(2);bl!=Float32Array&&(z[0]=0,z[1]=0)}(),function(E){function z(K){E.call(this,K,jh)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.createBucket=function(K){return new rs(K)},z.prototype.queryRadius=function(K){var ce=K;return bo("circle-radius",this,ce)+bo("circle-stroke-width",this,ce)+ws(this.paint.get("circle-translate"))},z.prototype.queryIntersectsFeature=function(K,ce,xe,Ae,Re,We,ot,bt){for(var kt=Zs(K,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),We.angle,ot),Xt=this.paint.get("circle-radius").evaluate(ce,xe)+this.paint.get("circle-stroke-width").evaluate(ce,xe),cn="map"===this.paint.get("circle-pitch-alignment"),nn=cn?kt:function(ui,ni){return ui.map(function(yi){return oa(yi,ni)})}(kt,bt),vn=cn?Xt*ot:Xt,Pn=0,Xn=Ae;Pn<Xn.length;Pn+=1)for(var Yn=0,ar=Xn[Pn];Yn<ar.length;Yn+=1){var lr=ar[Yn],mr=cn?lr:oa(lr,bt),Pr=vn,Br=Wu([],[lr.x,lr.y,0,1],bt);if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?Pr*=Br[3]/We.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(Pr*=We.cameraToCenterDistance/Br[3]),Bl(nn,mr,Pr))return!0}return!1},z}(vl));function oa(E,z){var K=Wu([],[E.x,E.y,0,1],z);return new i(K[0]/K[3],K[1]/K[3])}var Vh=function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z}(rs);function Oc(E,z,K,ce){var xe=z.width,Ae=z.height;if(ce){if(ce instanceof Uint8ClampedArray)ce=new Uint8Array(ce.buffer);else if(ce.length!==xe*Ae*K)throw new RangeError("mismatched image size")}else ce=new Uint8Array(xe*Ae*K);return E.width=xe,E.height=Ae,E.data=ce,E}function Rc(E,z,K){var ce=z.width,xe=z.height;if(ce!==E.width||xe!==E.height){var Ae=Oc({},{width:ce,height:xe},K);dc(E,Ae,{x:0,y:0},{x:0,y:0},{width:Math.min(E.width,ce),height:Math.min(E.height,xe)},K),E.width=ce,E.height=xe,E.data=Ae.data}}function dc(E,z,K,ce,xe,Ae){if(0===xe.width||0===xe.height)return z;if(xe.width>E.width||xe.height>E.height||K.x>E.width-xe.width||K.y>E.height-xe.height)throw new RangeError("out of range source coordinates for image copy");if(xe.width>z.width||xe.height>z.height||ce.x>z.width-xe.width||ce.y>z.height-xe.height)throw new RangeError("out of range destination coordinates for image copy");for(var Re=E.data,We=z.data,ot=0;ot<xe.height;ot++)for(var bt=((K.y+ot)*E.width+K.x)*Ae,kt=((ce.y+ot)*z.width+ce.x)*Ae,Xt=0;Xt<xe.width*Ae;Xt++)We[kt+Xt]=Re[bt+Xt];return z}br("HeatmapBucket",Vh,{omit:["layers"]});var lu=function(E,z){Oc(this,E,1,z)};lu.prototype.resize=function(E){Rc(this,E,1)},lu.prototype.clone=function(){return new lu({width:this.width,height:this.height},new Uint8Array(this.data))},lu.copy=function(E,z,K,ce,xe){dc(E,z,K,ce,xe,1)};var _l=function(E,z){Oc(this,E,4,z)};_l.prototype.resize=function(E){Rc(this,E,4)},_l.prototype.replace=function(E,z){z?this.data.set(E):this.data=E instanceof Uint8ClampedArray?new Uint8Array(E.buffer):E},_l.prototype.clone=function(){return new _l({width:this.width,height:this.height},new Uint8Array(this.data))},_l.copy=function(E,z,K,ce,xe){dc(E,z,K,ce,xe,4)},br("AlphaImage",lu),br("RGBAImage",_l);var gp={paint:new nl({"heatmap-radius":new Yi(Be.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Yi(Be.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Ri(Be.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ia(Be.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Ri(Be.paint_heatmap["heatmap-opacity"])})};function Fc(E,z){for(var K=new Uint8Array(1024),ce={},xe=0,Ae=0;xe<256;xe++,Ae+=4){ce[z]=xe/255;var Re=E.evaluate(ce);K[Ae+0]=Math.floor(255*Re.r/Re.a),K[Ae+1]=Math.floor(255*Re.g/Re.a),K[Ae+2]=Math.floor(255*Re.b/Re.a),K[Ae+3]=Math.floor(255*Re.a)}return new _l({width:256,height:1},K)}var jx=function(E){function z(K){E.call(this,K,gp),this._updateColorRamp()}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.createBucket=function(K){return new Vh(K)},z.prototype._handleSpecialPaintPropertyUpdate=function(K){"heatmap-color"===K&&this._updateColorRamp()},z.prototype._updateColorRamp=function(){this.colorRamp=Fc(this._transitionablePaint._values["heatmap-color"].value.expression,"heatmapDensity"),this.colorRampTexture=null},z.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},z.prototype.queryRadius=function(){return 0},z.prototype.queryIntersectsFeature=function(){return!1},z.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility},z}(vl),fy={paint:new nl({"hillshade-illumination-direction":new Ri(Be.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Ri(Be.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Ri(Be.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Ri(Be.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Ri(Be.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Ri(Be.paint_hillshade["hillshade-accent-color"])})},Ea=function(E){function z(K){E.call(this,K,fy)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.hasOffscreenPass=function(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility},z}(vl),Vg=Za([{name:"a_pos",components:2,type:"Int16"}],4).members,Ug=mp,Vx=mp;function mp(E,z,K){K=K||2;var ce,xe,Ae,Re,We,ot,bt,kt=z&&z.length,Xt=kt?z[0]*K:E.length,cn=hy(E,0,Xt,K,!0),nn=[];if(!cn||cn.next===cn.prev)return nn;if(kt&&(cn=function(Pn,Xn,Yn,ar){var lr,mr,ui,ni=[];for(lr=0,mr=Xn.length;lr<mr;lr++)(ui=hy(Pn,Xn[lr]*ar,lr<mr-1?Xn[lr+1]*ar:Pn.length,ar,!1))===ui.next&&(ui.steiner=!0),ni.push(Cu(ui));for(ni.sort(eh),lr=0;lr<ni.length;lr++)Hx(ni[lr],Yn),Yn=zc(Yn,Yn.next);return Yn}(E,z,cn,K)),E.length>80*K){ce=Ae=E[0],xe=Re=E[1];for(var vn=K;vn<Xt;vn+=K)(We=E[vn])<ce&&(ce=We),(ot=E[vn+1])<xe&&(xe=ot),We>Ae&&(Ae=We),ot>Re&&(Re=ot);bt=0!==(bt=Math.max(Ae-ce,Re-xe))?1/bt:0}return Uh(cn,nn,K,ce,xe,bt),nn}function hy(E,z,K,ce,xe){var Ae,Re;if(xe===Gg(E,z,K,ce)>0)for(Ae=z;Ae<K;Ae+=ce)Re=Vl(Ae,E[Ae],E[Ae+1],Re);else for(Ae=K-ce;Ae>=z;Ae-=ce)Re=Vl(Ae,E[Ae],E[Ae+1],Re);return Re&&th(Re,Re.next)&&(Bc(Re),Re=Re.next),Re}function zc(E,z){if(!E)return E;z||(z=E);var K,ce=E;do{if(K=!1,ce.steiner||!th(ce,ce.next)&&0!==qo(ce.prev,ce,ce.next))ce=ce.next;else{if(Bc(ce),(ce=z=ce.prev)===ce.next)break;K=!0}}while(K||ce!==z);return z}function Uh(E,z,K,ce,xe,Ae,Re){if(E){!Re&&Ae&&function(kt,Xt,cn,nn){var vn=kt;do{null===vn.z&&(vn.z=jl(vn.x,vn.y,Xt,cn,nn)),vn.prevZ=vn.prev,vn.nextZ=vn.next,vn=vn.next}while(vn!==kt);vn.prevZ.nextZ=null,vn.prevZ=null,function(Pn){var Xn,Yn,ar,lr,mr,Pr,Br,ui,ni=1;do{for(Yn=Pn,Pn=null,mr=null,Pr=0;Yn;){for(Pr++,ar=Yn,Br=0,Xn=0;Xn<ni&&(Br++,ar=ar.nextZ);Xn++);for(ui=ni;Br>0||ui>0&&ar;)0!==Br&&(0===ui||!ar||Yn.z<=ar.z)?(lr=Yn,Yn=Yn.nextZ,Br--):(lr=ar,ar=ar.nextZ,ui--),mr?mr.nextZ=lr:Pn=lr,lr.prevZ=mr,mr=lr;Yn=ar}mr.nextZ=null,ni*=2}while(Pr>1)}(vn)}(E,ce,xe,Ae);for(var We,ot,bt=E;E.prev!==E.next;)if(We=E.prev,ot=E.next,Ae?Ux(E,ce,xe,Ae):Qf(E))z.push(We.i/K),z.push(E.i/K),z.push(ot.i/K),Bc(E),E=ot.next,bt=ot.next;else if((E=ot)===bt){Re?1===Re?Uh(E=Xs(zc(E),z,K),z,K,ce,xe,Ae,2):2===Re&&yp(E,z,K,ce,xe,Ae):Uh(zc(E),z,K,ce,xe,Ae,1);break}}}function Qf(E){var z=E.prev,K=E,ce=E.next;if(qo(z,K,ce)>=0)return!1;for(var xe=E.next.next;xe!==E.prev;){if(Nc(z.x,z.y,K.x,K.y,ce.x,ce.y,xe.x,xe.y)&&qo(xe.prev,xe,xe.next)>=0)return!1;xe=xe.next}return!0}function Ux(E,z,K,ce){var xe=E.prev,Ae=E,Re=E.next;if(qo(xe,Ae,Re)>=0)return!1;for(var bt=xe.x>Ae.x?xe.x>Re.x?xe.x:Re.x:Ae.x>Re.x?Ae.x:Re.x,kt=xe.y>Ae.y?xe.y>Re.y?xe.y:Re.y:Ae.y>Re.y?Ae.y:Re.y,Xt=jl(xe.x<Ae.x?xe.x<Re.x?xe.x:Re.x:Ae.x<Re.x?Ae.x:Re.x,xe.y<Ae.y?xe.y<Re.y?xe.y:Re.y:Ae.y<Re.y?Ae.y:Re.y,z,K,ce),cn=jl(bt,kt,z,K,ce),nn=E.prevZ,vn=E.nextZ;nn&&nn.z>=Xt&&vn&&vn.z<=cn;){if(nn!==E.prev&&nn!==E.next&&Nc(xe.x,xe.y,Ae.x,Ae.y,Re.x,Re.y,nn.x,nn.y)&&qo(nn.prev,nn,nn.next)>=0||(nn=nn.prevZ,vn!==E.prev&&vn!==E.next&&Nc(xe.x,xe.y,Ae.x,Ae.y,Re.x,Re.y,vn.x,vn.y)&&qo(vn.prev,vn,vn.next)>=0))return!1;vn=vn.nextZ}for(;nn&&nn.z>=Xt;){if(nn!==E.prev&&nn!==E.next&&Nc(xe.x,xe.y,Ae.x,Ae.y,Re.x,Re.y,nn.x,nn.y)&&qo(nn.prev,nn,nn.next)>=0)return!1;nn=nn.prevZ}for(;vn&&vn.z<=cn;){if(vn!==E.prev&&vn!==E.next&&Nc(xe.x,xe.y,Ae.x,Ae.y,Re.x,Re.y,vn.x,vn.y)&&qo(vn.prev,vn,vn.next)>=0)return!1;vn=vn.nextZ}return!0}function Xs(E,z,K){var ce=E;do{var xe=ce.prev,Ae=ce.next.next;!th(xe,Ae)&&Hg(xe,ce,ce.next,Ae)&&qh(xe,Ae)&&qh(Ae,xe)&&(z.push(xe.i/K),z.push(ce.i/K),z.push(Ae.i/K),Bc(ce),Bc(ce.next),ce=E=Ae),ce=ce.next}while(ce!==E);return zc(ce)}function yp(E,z,K,ce,xe,Ae){var Re=E;do{for(var We=Re.next.next;We!==Re.prev;){if(Re.i!==We.i&&Hh(Re,We)){var ot=xp(Re,We);return Re=zc(Re,Re.next),ot=zc(ot,ot.next),Uh(Re,z,K,ce,xe,Ae),void Uh(ot,z,K,ce,xe,Ae)}We=We.next}Re=Re.next}while(Re!==E)}function eh(E,z){return E.x-z.x}function Hx(E,z){if(z=function(ce,xe){var Ae,Re=xe,We=ce.x,ot=ce.y,bt=-1/0;do{if(ot<=Re.y&&ot>=Re.next.y&&Re.next.y!==Re.y){var kt=Re.x+(ot-Re.y)*(Re.next.x-Re.x)/(Re.next.y-Re.y);if(kt<=We&&kt>bt){if(bt=kt,kt===We){if(ot===Re.y)return Re;if(ot===Re.next.y)return Re.next}Ae=Re.x<Re.next.x?Re:Re.next}}Re=Re.next}while(Re!==xe);if(!Ae)return null;if(We===bt)return Ae;var Xt,cn=Ae,nn=Ae.x,vn=Ae.y,Pn=1/0;Re=Ae;do{We>=Re.x&&Re.x>=nn&&We!==Re.x&&Nc(ot<vn?We:bt,ot,nn,vn,ot<vn?bt:We,ot,Re.x,Re.y)&&(Xt=Math.abs(ot-Re.y)/(We-Re.x),qh(Re,ce)&&(Xt<Pn||Xt===Pn&&(Re.x>Ae.x||Re.x===Ae.x&&dy(Ae,Re)))&&(Ae=Re,Pn=Xt)),Re=Re.next}while(Re!==cn);return Ae}(E,z)){var K=xp(z,E);zc(z,z.next),zc(K,K.next)}}function dy(E,z){return qo(E.prev,E,z.prev)<0&&qo(z.next,E,E.next)<0}function jl(E,z,K,ce,xe){return(E=1431655765&((E=858993459&((E=252645135&((E=16711935&((E=32767*(E-K)*xe)|E<<8))|E<<4))|E<<2))|E<<1))|(z=1431655765&((z=858993459&((z=252645135&((z=16711935&((z=32767*(z-ce)*xe)|z<<8))|z<<4))|z<<2))|z<<1))<<1}function Cu(E){var z=E,K=E;do{(z.x<K.x||z.x===K.x&&z.y<K.y)&&(K=z),z=z.next}while(z!==E);return K}function Nc(E,z,K,ce,xe,Ae,Re,We){return(xe-Re)*(z-We)-(E-Re)*(Ae-We)>=0&&(E-Re)*(ce-We)-(K-Re)*(z-We)>=0&&(K-Re)*(Ae-We)-(xe-Re)*(ce-We)>=0}function Hh(E,z){return E.next.i!==z.i&&E.prev.i!==z.i&&!function(K,ce){var xe=K;do{if(xe.i!==K.i&&xe.next.i!==K.i&&xe.i!==ce.i&&xe.next.i!==ce.i&&Hg(xe,xe.next,K,ce))return!0;xe=xe.next}while(xe!==K);return!1}(E,z)&&(qh(E,z)&&qh(z,E)&&function(K,ce){var xe=K,Ae=!1,Re=(K.x+ce.x)/2,We=(K.y+ce.y)/2;do{xe.y>We!=xe.next.y>We&&xe.next.y!==xe.y&&Re<(xe.next.x-xe.x)*(We-xe.y)/(xe.next.y-xe.y)+xe.x&&(Ae=!Ae),xe=xe.next}while(xe!==K);return Ae}(E,z)&&(qo(E.prev,E,z.prev)||qo(E,z.prev,z))||th(E,z)&&qo(E.prev,E,E.next)>0&&qo(z.prev,z,z.next)>0)}function qo(E,z,K){return(z.y-E.y)*(K.x-z.x)-(z.x-E.x)*(K.y-z.y)}function th(E,z){return E.x===z.x&&E.y===z.y}function Hg(E,z,K,ce){var xe=vp(qo(E,z,K)),Ae=vp(qo(E,z,ce)),Re=vp(qo(K,ce,E)),We=vp(qo(K,ce,z));return xe!==Ae&&Re!==We||!(0!==xe||!Gh(E,K,z))||!(0!==Ae||!Gh(E,ce,z))||!(0!==Re||!Gh(K,E,ce))||!(0!==We||!Gh(K,z,ce))}function Gh(E,z,K){return z.x<=Math.max(E.x,K.x)&&z.x>=Math.min(E.x,K.x)&&z.y<=Math.max(E.y,K.y)&&z.y>=Math.min(E.y,K.y)}function vp(E){return E>0?1:E<0?-1:0}function qh(E,z){return qo(E.prev,E,E.next)<0?qo(E,z,E.next)>=0&&qo(E,E.prev,z)>=0:qo(E,z,E.prev)<0||qo(E,E.next,z)<0}function xp(E,z){var K=new pc(E.i,E.x,E.y),ce=new pc(z.i,z.x,z.y),xe=E.next,Ae=z.prev;return E.next=z,z.prev=E,K.next=xe,xe.prev=K,ce.next=K,K.prev=ce,Ae.next=ce,ce.prev=Ae,ce}function Vl(E,z,K,ce){var xe=new pc(E,z,K);return ce?(xe.next=ce.next,xe.prev=ce,ce.next.prev=xe,ce.next=xe):(xe.prev=xe,xe.next=xe),xe}function Bc(E){E.next.prev=E.prev,E.prev.next=E.next,E.prevZ&&(E.prevZ.nextZ=E.nextZ),E.nextZ&&(E.nextZ.prevZ=E.prevZ)}function pc(E,z,K){this.i=E,this.x=z,this.y=K,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Gg(E,z,K,ce){for(var xe=0,Ae=z,Re=K-ce;Ae<K;Ae+=ce)xe+=(E[Re]-E[Ae])*(E[Ae+1]+E[Re+1]),Re=Ae;return xe}function qg(E,z,K,ce,xe){!function Ae(Re,We,ot,bt,kt){for(;bt>ot;){if(bt-ot>600){var Xt=bt-ot+1,cn=We-ot+1,nn=Math.log(Xt),vn=.5*Math.exp(2*nn/3),Pn=.5*Math.sqrt(nn*vn*(Xt-vn)/Xt)*(cn-Xt/2<0?-1:1);Ae(Re,We,Math.max(ot,Math.floor(We-cn*vn/Xt+Pn)),Math.min(bt,Math.floor(We+(Xt-cn)*vn/Xt+Pn)),kt)}var ar=Re[We],lr=ot,mr=bt;for(nh(Re,ot,We),kt(Re[bt],ar)>0&&nh(Re,ot,bt);lr<mr;){for(nh(Re,lr,mr),lr++,mr--;kt(Re[lr],ar)<0;)lr++;for(;kt(Re[mr],ar)>0;)mr--}0===kt(Re[ot],ar)?nh(Re,ot,mr):nh(Re,++mr,bt),mr<=We&&(ot=mr+1),We<=mr&&(bt=mr-1)}}(E,z,K||0,ce||E.length-1,xe||py)}function nh(E,z,K){var ce=E[z];E[z]=E[K],E[K]=ce}function py(E,z){return E<z?-1:E>z?1:0}function bp(E,z){var K=E.length;if(K<=1)return[E];for(var ce,xe,Ae=[],Re=0;Re<K;Re++){var We=R(E[Re]);0!==We&&(E[Re].area=Math.abs(We),void 0===xe&&(xe=We<0),xe===We<0?(ce&&Ae.push(ce),ce=[E[Re]]):ce.push(E[Re]))}if(ce&&Ae.push(ce),z>1)for(var ot=0;ot<Ae.length;ot++)Ae[ot].length<=z||(qg(Ae[ot],z,1,Ae[ot].length-1,gy),Ae[ot]=Ae[ot].slice(0,z));return Ae}function gy(E,z){return z.area-E.area}function _p(E,z,K){for(var ce=K.patternDependencies,xe=!1,Ae=0,Re=z;Ae<Re.length;Ae+=1){var We=Re[Ae].paint.get(E+"-pattern");We.isConstant()||(xe=!0);var ot=We.constantOr(null);ot&&(xe=!0,ce[ot.to]=!0,ce[ot.from]=!0)}return xe}function Wh(E,z,K,ce,xe){for(var Ae=xe.patternDependencies,Re=0,We=z;Re<We.length;Re+=1){var ot=We[Re],bt=ot.paint.get(E+"-pattern").value;if("constant"!==bt.kind){var kt=bt.evaluate({zoom:ce-1},K,{},xe.availableImages),Xt=bt.evaluate({zoom:ce},K,{},xe.availableImages),cn=bt.evaluate({zoom:ce+1},K,{},xe.availableImages);Xt=Xt&&Xt.name?Xt.name:Xt,cn=cn&&cn.name?cn.name:cn,Ae[kt=kt&&kt.name?kt.name:kt]=!0,Ae[Xt]=!0,Ae[cn]=!0,K.patterns[ot.id]={min:kt,mid:Xt,max:cn}}}return K}mp.deviation=function(E,z,K,ce){var xe=z&&z.length,Re=Math.abs(Gg(E,0,xe?z[0]*K:E.length,K));if(xe)for(var We=0,ot=z.length;We<ot;We++)Re-=Math.abs(Gg(E,z[We]*K,We<ot-1?z[We+1]*K:E.length,K));var Xt=0;for(We=0;We<ce.length;We+=3){var cn=ce[We]*K,nn=ce[We+1]*K,vn=ce[We+2]*K;Xt+=Math.abs((E[cn]-E[vn])*(E[nn+1]-E[cn+1])-(E[cn]-E[nn])*(E[vn+1]-E[cn+1]))}return 0===Re&&0===Xt?0:Math.abs((Xt-Re)/Re)},mp.flatten=function(E){for(var z=E[0][0].length,K={vertices:[],holes:[],dimensions:z},ce=0,xe=0;xe<E.length;xe++){for(var Ae=0;Ae<E[xe].length;Ae++)for(var Re=0;Re<z;Re++)K.vertices.push(E[xe][Ae][Re]);xe>0&&K.holes.push(ce+=E[xe-1].length)}return K},Ug.default=Vx;var Jl=function(E){this.zoom=E.zoom,this.overscaling=E.overscaling,this.layers=E.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=E.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ei,this.indexArray=new $o,this.indexArray2=new H,this.programConfigurations=new ro(Vg,E.layers,E.zoom),this.segments=new Zt,this.segments2=new Zt,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};Jl.prototype.populate=function(E,z,K){this.hasPattern=_p("fill",this.layers,z);for(var ce=this.layers[0].layout.get("fill-sort-key"),xe=[],Ae=0,Re=E;Ae<Re.length;Ae+=1){var We=Re[Ae],ot=We.feature,bt=We.id,kt=We.index,Xt=We.sourceLayerIndex,cn=this.layers[0]._featureFilter.needGeometry,nn={type:ot.type,id:bt,properties:ot.properties,geometry:cn?xo(ot):[]};if(this.layers[0]._featureFilter.filter(new Qa(this.zoom),nn,K)){cn||(nn.geometry=xo(ot));var vn=ce?ce.evaluate(nn,{},K,z.availableImages):void 0;xe.push({id:bt,properties:ot.properties,type:ot.type,sourceLayerIndex:Xt,index:kt,geometry:nn.geometry,patterns:{},sortKey:vn})}}ce&&xe.sort(function(yi,Ei){return yi.sortKey-Ei.sortKey});for(var Xn=0,Yn=xe;Xn<Yn.length;Xn+=1){var ar=Yn[Xn],mr=ar.geometry,Pr=ar.index,Br=ar.sourceLayerIndex;if(this.hasPattern){var ui=Wh("fill",this.layers,ar,this.zoom,z);this.patternFeatures.push(ui)}else this.addFeature(ar,mr,Pr,K,{});z.featureIndex.insert(E[Pr].feature,mr,Pr,Br,this.index)}},Jl.prototype.update=function(E,z,K){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(E,z,this.stateDependentLayers,K)},Jl.prototype.addFeatures=function(E,z,K){for(var ce=0,xe=this.patternFeatures;ce<xe.length;ce+=1){var Ae=xe[ce];this.addFeature(Ae,Ae.geometry,Ae.index,z,K)}},Jl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Jl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Jl.prototype.upload=function(E){this.uploaded||(this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,Vg),this.indexBuffer=E.createIndexBuffer(this.indexArray),this.indexBuffer2=E.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(E),this.uploaded=!0},Jl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Jl.prototype.addFeature=function(E,z,K,ce,xe){for(var Ae=0,Re=bp(z,500);Ae<Re.length;Ae+=1){for(var We=Re[Ae],ot=0,bt=0,kt=We;bt<kt.length;bt+=1)ot+=kt[bt].length;for(var Xt=this.segments.prepareSegment(ot,this.layoutVertexArray,this.indexArray),cn=Xt.vertexLength,nn=[],vn=[],Pn=0,Xn=We;Pn<Xn.length;Pn+=1){var Yn=Xn[Pn];if(0!==Yn.length){Yn!==We[0]&&vn.push(nn.length/2);var ar=this.segments2.prepareSegment(Yn.length,this.layoutVertexArray,this.indexArray2),lr=ar.vertexLength;this.layoutVertexArray.emplaceBack(Yn[0].x,Yn[0].y),this.indexArray2.emplaceBack(lr+Yn.length-1,lr),nn.push(Yn[0].x),nn.push(Yn[0].y);for(var mr=1;mr<Yn.length;mr++)this.layoutVertexArray.emplaceBack(Yn[mr].x,Yn[mr].y),this.indexArray2.emplaceBack(lr+mr-1,lr+mr),nn.push(Yn[mr].x),nn.push(Yn[mr].y);ar.vertexLength+=Yn.length,ar.primitiveLength+=Yn.length}}for(var Pr=Ug(nn,vn),Br=0;Br<Pr.length;Br+=3)this.indexArray.emplaceBack(cn+Pr[Br],cn+Pr[Br+1],cn+Pr[Br+2]);Xt.vertexLength+=ot,Xt.primitiveLength+=Pr.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,E,K,xe,ce)},br("FillBucket",Jl,{omit:["layers","patternFeatures"]});var Yh=new nl({"fill-sort-key":new Yi(Be.layout_fill["fill-sort-key"])}),Gx={paint:new nl({"fill-antialias":new Ri(Be.paint_fill["fill-antialias"]),"fill-opacity":new Yi(Be.paint_fill["fill-opacity"]),"fill-color":new Yi(Be.paint_fill["fill-color"]),"fill-outline-color":new Yi(Be.paint_fill["fill-outline-color"]),"fill-translate":new Ri(Be.paint_fill["fill-translate"]),"fill-translate-anchor":new Ri(Be.paint_fill["fill-translate-anchor"]),"fill-pattern":new xu(Be.paint_fill["fill-pattern"])}),layout:Yh},rh=function(E){function z(K){E.call(this,K,Gx)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.recalculate=function(K,ce){E.prototype.recalculate.call(this,K,ce);var xe=this.paint._values["fill-outline-color"];"constant"===xe.value.kind&&void 0===xe.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},z.prototype.createBucket=function(K){return new Jl(K)},z.prototype.queryRadius=function(){return ws(this.paint.get("fill-translate"))},z.prototype.queryIntersectsFeature=function(K,ce,xe,Ae,Re,We,ot){return $l(Zs(K,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),We.angle,ot),Ae)},z.prototype.isTileClipped=function(){return!0},z}(vl),Zh=Za([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,ih=Tf;function Tf(E,z,K,ce,xe){this.properties={},this.extent=K,this.type=0,this._pbf=E,this._geometry=-1,this._keys=ce,this._values=xe,E.readFields(my,this,z)}function my(E,z,K){1==E?z.id=K.readVarint():2==E?function(ce,xe){for(var Ae=ce.readVarint()+ce.pos;ce.pos<Ae;){var Re=xe._keys[ce.readVarint()],We=xe._values[ce.readVarint()];xe.properties[Re]=We}}(K,z):3==E?z.type=K.readVarint():4==E&&(z._geometry=K.pos)}function yy(E){for(var z,K,ce=0,xe=0,Ae=E.length,Re=Ae-1;xe<Ae;Re=xe++)ce+=((K=E[Re]).x-(z=E[xe]).x)*(z.y+K.y);return ce}Tf.types=["Unknown","Point","LineString","Polygon"],Tf.prototype.loadGeometry=function(){var E=this._pbf;E.pos=this._geometry;for(var z,K=E.readVarint()+E.pos,ce=1,xe=0,Ae=0,Re=0,We=[];E.pos<K;){if(xe<=0){var ot=E.readVarint();ce=7&ot,xe=ot>>3}if(xe--,1===ce||2===ce)Ae+=E.readSVarint(),Re+=E.readSVarint(),1===ce&&(z&&We.push(z),z=[]),z.push(new i(Ae,Re));else{if(7!==ce)throw new Error("unknown command "+ce);z&&z.push(z[0].clone())}}return z&&We.push(z),We},Tf.prototype.bbox=function(){var E=this._pbf;E.pos=this._geometry;for(var z=E.readVarint()+E.pos,K=1,ce=0,xe=0,Ae=0,Re=1/0,We=-1/0,ot=1/0,bt=-1/0;E.pos<z;){if(ce<=0){var kt=E.readVarint();K=7&kt,ce=kt>>3}if(ce--,1===K||2===K)(xe+=E.readSVarint())<Re&&(Re=xe),xe>We&&(We=xe),(Ae+=E.readSVarint())<ot&&(ot=Ae),Ae>bt&&(bt=Ae);else if(7!==K)throw new Error("unknown command "+K)}return[Re,ot,We,bt]},Tf.prototype.toGeoJSON=function(E,z,K){var ce,xe,Ae=this.extent*Math.pow(2,K),Re=this.extent*E,We=this.extent*z,ot=this.loadGeometry(),bt=Tf.types[this.type];function kt(nn){for(var vn=0;vn<nn.length;vn++){var Pn=nn[vn];nn[vn]=[360*(Pn.x+Re)/Ae-180,360/Math.PI*Math.atan(Math.exp((180-360*(Pn.y+We)/Ae)*Math.PI/180))-90]}}switch(this.type){case 1:var Xt=[];for(ce=0;ce<ot.length;ce++)Xt[ce]=ot[ce][0];kt(ot=Xt);break;case 2:for(ce=0;ce<ot.length;ce++)kt(ot[ce]);break;case 3:for(ot=function(nn){var vn=nn.length;if(vn<=1)return[nn];for(var Pn,Xn,Yn=[],ar=0;ar<vn;ar++){var lr=yy(nn[ar]);0!==lr&&(void 0===Xn&&(Xn=lr<0),Xn===lr<0?(Pn&&Yn.push(Pn),Pn=[nn[ar]]):Pn.push(nn[ar]))}return Pn&&Yn.push(Pn),Yn}(ot),ce=0;ce<ot.length;ce++)for(xe=0;xe<ot[ce].length;xe++)kt(ot[ce][xe])}1===ot.length?ot=ot[0]:bt="Multi"+bt;var cn={type:"Feature",geometry:{type:bt,coordinates:ot},properties:this.properties};return"id"in this&&(cn.id=this.id),cn};var wp=Wg;function Wg(E,z){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=E,this._keys=[],this._values=[],this._features=[],E.readFields(ah,this,z),this.length=this._features.length}function ah(E,z,K){15===E?z.version=K.readVarint():1===E?z.name=K.readString():5===E?z.extent=K.readVarint():2===E?z._features.push(K.pos):3===E?z._keys.push(K.readString()):4===E&&z._values.push(function(ce){for(var xe=null,Ae=ce.readVarint()+ce.pos;ce.pos<Ae;){var Re=ce.readVarint()>>3;xe=1===Re?ce.readString():2===Re?ce.readFloat():3===Re?ce.readDouble():4===Re?ce.readVarint64():5===Re?ce.readVarint():6===Re?ce.readSVarint():7===Re?ce.readBoolean():null}return xe}(K))}function Yg(E,z,K){if(3===E){var ce=new wp(K,K.readVarint()+K.pos);ce.length&&(z[ce.name]=ce)}}Wg.prototype.feature=function(E){if(E<0||E>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[E];var z=this._pbf.readVarint()+this._pbf.pos;return new ih(this._pbf,z,this.extent,this._keys,this._values)};var Af={VectorTile:function(E,z){this.layers=E.readFields(Yg,{},z)},VectorTileFeature:ih,VectorTileLayer:wp},Ti=Af.VectorTileFeature.types,Xh=Math.pow(2,13);function jc(E,z,K,ce,xe,Ae,Re,We){E.emplaceBack(z,K,2*Math.floor(ce*Xh)+Re,xe*Xh*2,Ae*Xh*2,Math.round(We))}var Ql=function(E){this.zoom=E.zoom,this.overscaling=E.overscaling,this.layers=E.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=E.index,this.hasPattern=!1,this.layoutVertexArray=new Ys,this.indexArray=new $o,this.programConfigurations=new ro(Zh,E.layers,E.zoom),this.segments=new Zt,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};function oh(E,z){return E.x===z.x&&(E.x<0||E.x>8192)||E.y===z.y&&(E.y<0||E.y>8192)}function vy(E){return E.every(function(z){return z.x<0})||E.every(function(z){return z.x>8192})||E.every(function(z){return z.y<0})||E.every(function(z){return z.y>8192})}Ql.prototype.populate=function(E,z,K){this.features=[],this.hasPattern=_p("fill-extrusion",this.layers,z);for(var ce=0,xe=E;ce<xe.length;ce+=1){var Ae=xe[ce],Re=Ae.feature,We=Ae.id,ot=Ae.index,bt=Ae.sourceLayerIndex,kt=this.layers[0]._featureFilter.needGeometry,Xt={type:Re.type,id:We,properties:Re.properties,geometry:kt?xo(Re):[]};if(this.layers[0]._featureFilter.filter(new Qa(this.zoom),Xt,K)){var cn={id:We,sourceLayerIndex:bt,index:ot,geometry:kt?Xt.geometry:xo(Re),properties:Re.properties,type:Re.type,patterns:{}};void 0!==Re.id&&(cn.id=Re.id),this.hasPattern?this.features.push(Wh("fill-extrusion",this.layers,cn,this.zoom,z)):this.addFeature(cn,cn.geometry,ot,K,{}),z.featureIndex.insert(Re,cn.geometry,ot,bt,this.index,!0)}}},Ql.prototype.addFeatures=function(E,z,K){for(var ce=0,xe=this.features;ce<xe.length;ce+=1){var Ae=xe[ce];this.addFeature(Ae,Ae.geometry,Ae.index,z,K)}},Ql.prototype.update=function(E,z,K){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(E,z,this.stateDependentLayers,K)},Ql.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},Ql.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Ql.prototype.upload=function(E){this.uploaded||(this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,Zh),this.indexBuffer=E.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(E),this.uploaded=!0},Ql.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},Ql.prototype.addFeature=function(E,z,K,ce,xe){for(var Ae=0,Re=bp(z,500);Ae<Re.length;Ae+=1){for(var We=Re[Ae],ot=0,bt=0,kt=We;bt<kt.length;bt+=1)ot+=kt[bt].length;for(var Xt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),cn=0,nn=We;cn<nn.length;cn+=1){var vn=nn[cn];if(0!==vn.length&&!vy(vn))for(var Pn=0,Xn=0;Xn<vn.length;Xn++){var Yn=vn[Xn];if(Xn>=1){var ar=vn[Xn-1];if(!oh(Yn,ar)){Xt.vertexLength+4>Zt.MAX_VERTEX_ARRAY_LENGTH&&(Xt=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var lr=Yn.sub(ar)._perp()._unit(),mr=ar.dist(Yn);Pn+mr>32768&&(Pn=0),jc(this.layoutVertexArray,Yn.x,Yn.y,lr.x,lr.y,0,0,Pn),jc(this.layoutVertexArray,Yn.x,Yn.y,lr.x,lr.y,0,1,Pn),jc(this.layoutVertexArray,ar.x,ar.y,lr.x,lr.y,0,0,Pn+=mr),jc(this.layoutVertexArray,ar.x,ar.y,lr.x,lr.y,0,1,Pn);var Pr=Xt.vertexLength;this.indexArray.emplaceBack(Pr,Pr+2,Pr+1),this.indexArray.emplaceBack(Pr+1,Pr+2,Pr+3),Xt.vertexLength+=4,Xt.primitiveLength+=2}}}}if(Xt.vertexLength+ot>Zt.MAX_VERTEX_ARRAY_LENGTH&&(Xt=this.segments.prepareSegment(ot,this.layoutVertexArray,this.indexArray)),"Polygon"===Ti[E.type]){for(var Br=[],ui=[],ni=Xt.vertexLength,yi=0,Ei=We;yi<Ei.length;yi+=1){var Pi=Ei[yi];if(0!==Pi.length){Pi!==We[0]&&ui.push(Br.length/2);for(var _i=0;_i<Pi.length;_i++){var Ui=Pi[_i];jc(this.layoutVertexArray,Ui.x,Ui.y,0,0,1,1,0),Br.push(Ui.x),Br.push(Ui.y)}}}for(var zi=Ug(Br,ui),Li=0;Li<zi.length;Li+=3)this.indexArray.emplaceBack(ni+zi[Li],ni+zi[Li+2],ni+zi[Li+1]);Xt.primitiveLength+=zi.length/3,Xt.vertexLength+=ot}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,E,K,xe,ce)},br("FillExtrusionBucket",Ql,{omit:["layers","features"]});var xy={paint:new nl({"fill-extrusion-opacity":new Ri(Be["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Yi(Be["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Ri(Be["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Ri(Be["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new xu(Be["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Yi(Be["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Yi(Be["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Ri(Be["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},by=function(E){function z(K){E.call(this,K,xy)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.createBucket=function(K){return new Ql(K)},z.prototype.queryRadius=function(){return ws(this.paint.get("fill-extrusion-translate"))},z.prototype.is3D=function(){return!0},z.prototype.queryIntersectsFeature=function(K,ce,xe,Ae,Re,We,ot,bt){var kt=Zs(K,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),We.angle,ot),Xt=this.paint.get("fill-extrusion-height").evaluate(ce,xe),cn=this.paint.get("fill-extrusion-base").evaluate(ce,xe),nn=function(Pn,Xn,Yn,ar){for(var lr=[],mr=0,Pr=Pn;mr<Pr.length;mr+=1){var Br=Pr[mr],ui=[Br.x,Br.y,0,1];Wu(ui,ui,Xn),lr.push(new i(ui[0]/ui[3],ui[1]/ui[3]))}return lr}(kt,bt),vn=function(Pn,Xn,Yn,ar){for(var lr=[],mr=[],Pr=ar[8]*Xn,Br=ar[9]*Xn,ui=ar[10]*Xn,ni=ar[11]*Xn,yi=ar[8]*Yn,Ei=ar[9]*Yn,Pi=ar[10]*Yn,_i=ar[11]*Yn,Ui=0,zi=Pn;Ui<zi.length;Ui+=1){for(var za=[],La=[],Ha=0,$i=zi[Ui];Ha<$i.length;Ha+=1){var Ia=$i[Ha],wo=Ia.x,so=Ia.y,So=ar[0]*wo+ar[4]*so+ar[12],lo=ar[1]*wo+ar[5]*so+ar[13],Wo=ar[2]*wo+ar[6]*so+ar[14],Fo=ar[3]*wo+ar[7]*so+ar[15],js=Wo+ui,Ds=Fo+ni,Vs=So+yi,sl=lo+Ei,Us=Wo+Pi,as=Fo+_i,$s=new i((So+Pr)/Ds,(lo+Br)/Ds);$s.z=js/Ds,za.push($s);var is=new i(Vs/as,sl/as);is.z=Us/as,La.push(is)}lr.push(za),mr.push(La)}return[lr,mr]}(Ae,cn,Xt,bt);return function(Pn,Xn,Yn){var ar=1/0;$l(Yn,Xn)&&(ar=wu(Yn,Xn[0]));for(var lr=0;lr<Xn.length;lr++)for(var mr=Xn[lr],Pr=Pn[lr],Br=0;Br<mr.length-1;Br++){var ui=mr[Br],Pi=[ui,mr[Br+1],Pr[Br+1],Pr[Br],ui];ds(Yn,Pi)&&(ar=Math.min(ar,wu(Yn,Pi)))}return ar!==1/0&&ar}(vn[0],vn[1],nn)},z}(vl);function Yu(E,z){return E.x*z.x+E.y*z.y}function wu(E,z){if(1===E.length){for(var K,ce=0,xe=z[ce++];!K||xe.equals(K);)if(!(K=z[ce++]))return 1/0;for(;ce<z.length;ce++){var Ae=z[ce],Re=E[0],We=K.sub(xe),ot=Ae.sub(xe),bt=Re.sub(xe),kt=Yu(We,We),Xt=Yu(We,ot),cn=Yu(ot,ot),nn=Yu(bt,We),vn=Yu(bt,ot),Pn=kt*cn-Xt*Xt,Xn=(cn*nn-Xt*vn)/Pn,Yn=(kt*vn-Xt*nn)/Pn,lr=xe.z*(1-Xn-Yn)+K.z*Xn+Ae.z*Yn;if(isFinite(lr))return lr}return 1/0}for(var mr=1/0,Pr=0,Br=z;Pr<Br.length;Pr+=1)mr=Math.min(mr,Br[Pr].z);return mr}var Tp=Za([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Mf=Af.VectorTileFeature.types,_y=Math.cos(Math.PI/180*37.5),Ap=Math.pow(2,14)/.5,rl=function(E){this.zoom=E.zoom,this.overscaling=E.overscaling,this.layers=E.layers,this.layerIds=this.layers.map(function(z){return z.id}),this.index=E.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Po,this.indexArray=new $o,this.programConfigurations=new ro(Tp,E.layers,E.zoom),this.segments=new Zt,this.stateDependentLayerIds=this.layers.filter(function(z){return z.isStateDependent()}).map(function(z){return z.id})};rl.prototype.populate=function(E,z,K){this.hasPattern=_p("line",this.layers,z);for(var ce=this.layers[0].layout.get("line-sort-key"),xe=[],Ae=0,Re=E;Ae<Re.length;Ae+=1){var We=Re[Ae],ot=We.feature,bt=We.id,kt=We.index,Xt=We.sourceLayerIndex,cn=this.layers[0]._featureFilter.needGeometry,nn={type:ot.type,id:bt,properties:ot.properties,geometry:cn?xo(ot):[]};if(this.layers[0]._featureFilter.filter(new Qa(this.zoom),nn,K)){cn||(nn.geometry=xo(ot));var vn=ce?ce.evaluate(nn,{},K):void 0;xe.push({id:bt,properties:ot.properties,type:ot.type,sourceLayerIndex:Xt,index:kt,geometry:nn.geometry,patterns:{},sortKey:vn})}}ce&&xe.sort(function(yi,Ei){return yi.sortKey-Ei.sortKey});for(var Xn=0,Yn=xe;Xn<Yn.length;Xn+=1){var ar=Yn[Xn],mr=ar.geometry,Pr=ar.index,Br=ar.sourceLayerIndex;if(this.hasPattern){var ui=Wh("line",this.layers,ar,this.zoom,z);this.patternFeatures.push(ui)}else this.addFeature(ar,mr,Pr,K,{});z.featureIndex.insert(E[Pr].feature,mr,Pr,Br,this.index)}},rl.prototype.update=function(E,z,K){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(E,z,this.stateDependentLayers,K)},rl.prototype.addFeatures=function(E,z,K){for(var ce=0,xe=this.patternFeatures;ce<xe.length;ce+=1){var Ae=xe[ce];this.addFeature(Ae,Ae.geometry,Ae.index,z,K)}},rl.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},rl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},rl.prototype.upload=function(E){this.uploaded||(this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,Tp),this.indexBuffer=E.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(E),this.uploaded=!0},rl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},rl.prototype.addFeature=function(E,z,K,ce,xe){for(var Ae=this.layers[0].layout,Re=Ae.get("line-join").evaluate(E,{}),We=Ae.get("line-cap"),ot=Ae.get("line-miter-limit"),bt=Ae.get("line-round-limit"),kt=0,Xt=z;kt<Xt.length;kt+=1)this.addLine(Xt[kt],E,Re,We,ot,bt);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,E,K,xe,ce)},rl.prototype.addLine=function(E,z,K,ce,xe,Ae){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,z.properties&&z.properties.hasOwnProperty("mapbox_clip_start")&&z.properties.hasOwnProperty("mapbox_clip_end")){this.clipStart=+z.properties.mapbox_clip_start,this.clipEnd=+z.properties.mapbox_clip_end;for(var Re=0;Re<E.length-1;Re++)this.totalDistance+=E[Re].dist(E[Re+1]);this.updateScaledDistance()}for(var We="Polygon"===Mf[z.type],ot=E.length;ot>=2&&E[ot-1].equals(E[ot-2]);)ot--;for(var bt=0;bt<ot-1&&E[bt].equals(E[bt+1]);)bt++;if(!(ot<(We?3:2))){"bevel"===K&&(xe=1.05);var kt,Xt=this.overscaling<=16?122880/(512*this.overscaling):0,cn=this.segments.prepareSegment(10*ot,this.layoutVertexArray,this.indexArray),nn=void 0,vn=void 0,Pn=void 0,Xn=void 0;this.e1=this.e2=-1,We&&(Xn=E[bt].sub(kt=E[ot-2])._unit()._perp());for(var Yn=bt;Yn<ot;Yn++)if(!(vn=Yn===ot-1?We?E[bt+1]:void 0:E[Yn+1])||!E[Yn].equals(vn)){Xn&&(Pn=Xn),kt&&(nn=kt),kt=E[Yn],Xn=vn?vn.sub(kt)._unit()._perp():Pn;var ar=(Pn=Pn||Xn).add(Xn);0===ar.x&&0===ar.y||ar._unit();var lr=Pn.x*Xn.x+Pn.y*Xn.y,mr=ar.x*Xn.x+ar.y*Xn.y,Pr=0!==mr?1/mr:1/0,Br=2*Math.sqrt(2-2*mr),ui=mr<_y&&nn&&vn,ni=Pn.x*Xn.y-Pn.y*Xn.x>0;if(ui&&Yn>bt){var yi=kt.dist(nn);if(yi>2*Xt){var Ei=kt.sub(kt.sub(nn)._mult(Xt/yi)._round());this.updateDistance(nn,Ei),this.addCurrentVertex(Ei,Pn,0,0,cn),nn=Ei}}var Pi=nn&&vn,_i=Pi?K:We?"butt":ce;if(Pi&&"round"===_i&&(Pr<Ae?_i="miter":Pr<=2&&(_i="fakeround")),"miter"===_i&&Pr>xe&&(_i="bevel"),"bevel"===_i&&(Pr>2&&(_i="flipbevel"),Pr<xe&&(_i="miter")),nn&&this.updateDistance(nn,kt),"miter"===_i)ar._mult(Pr),this.addCurrentVertex(kt,ar,0,0,cn);else if("flipbevel"===_i){if(Pr>100)ar=Xn.mult(-1);else{var Ui=Pr*Pn.add(Xn).mag()/Pn.sub(Xn).mag();ar._perp()._mult(Ui*(ni?-1:1))}this.addCurrentVertex(kt,ar,0,0,cn),this.addCurrentVertex(kt,ar.mult(-1),0,0,cn)}else if("bevel"===_i||"fakeround"===_i){var zi=-Math.sqrt(Pr*Pr-1),Li=ni?zi:0,za=ni?0:zi;if(nn&&this.addCurrentVertex(kt,Pn,Li,za,cn),"fakeround"===_i)for(var La=Math.round(180*Br/Math.PI/20),Ha=1;Ha<La;Ha++){var $i=Ha/La;if(.5!==$i){var Ia=$i-.5;$i+=$i*Ia*($i-1)*((1.0904+lr*(lr*(3.55645-1.43519*lr)-3.2452))*Ia*Ia+(.848013+lr*(.215638*lr-1.06021)))}var wo=Xn.sub(Pn)._mult($i)._add(Pn)._unit()._mult(ni?-1:1);this.addHalfVertex(kt,wo.x,wo.y,!1,ni,0,cn)}vn&&this.addCurrentVertex(kt,Xn,-Li,-za,cn)}else if("butt"===_i)this.addCurrentVertex(kt,ar,0,0,cn);else if("square"===_i){var so=nn?1:-1;this.addCurrentVertex(kt,ar,so,so,cn)}else"round"===_i&&(nn&&(this.addCurrentVertex(kt,Pn,0,0,cn),this.addCurrentVertex(kt,Pn,1,1,cn,!0)),vn&&(this.addCurrentVertex(kt,Xn,-1,-1,cn,!0),this.addCurrentVertex(kt,Xn,0,0,cn)));if(ui&&Yn<ot-1){var So=kt.dist(vn);if(So>2*Xt){var lo=kt.add(vn.sub(kt)._mult(Xt/So)._round());this.updateDistance(kt,lo),this.addCurrentVertex(lo,Xn,0,0,cn),kt=lo}}}}},rl.prototype.addCurrentVertex=function(E,z,K,ce,xe,Ae){void 0===Ae&&(Ae=!1);var ot=z.y*ce-z.x,bt=-z.y-z.x*ce;this.addHalfVertex(E,z.x+z.y*K,z.y-z.x*K,Ae,!1,K,xe),this.addHalfVertex(E,ot,bt,Ae,!0,-ce,xe),this.distance>Ap/2&&0===this.totalDistance&&(this.distance=0,this.addCurrentVertex(E,z,K,ce,xe,Ae))},rl.prototype.addHalfVertex=function(E,z,K,ce,xe,Ae,Re){var bt=.5*this.scaledDistance;this.layoutVertexArray.emplaceBack((E.x<<1)+(ce?1:0),(E.y<<1)+(xe?1:0),Math.round(63*z)+128,Math.round(63*K)+128,1+(0===Ae?0:Ae<0?-1:1)|(63&bt)<<2,bt>>6);var kt=Re.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,kt),Re.primitiveLength++),xe?this.e2=kt:this.e1=kt},rl.prototype.updateScaledDistance=function(){this.scaledDistance=this.totalDistance>0?(this.clipStart+(this.clipEnd-this.clipStart)*this.distance/this.totalDistance)*(Ap-1):this.distance},rl.prototype.updateDistance=function(E,z){this.distance+=E.dist(z),this.updateScaledDistance()},br("LineBucket",rl,{omit:["layers","patternFeatures"]});var $h=new nl({"line-cap":new Ri(Be.layout_line["line-cap"]),"line-join":new Yi(Be.layout_line["line-join"]),"line-miter-limit":new Ri(Be.layout_line["line-miter-limit"]),"line-round-limit":new Ri(Be.layout_line["line-round-limit"]),"line-sort-key":new Yi(Be.layout_line["line-sort-key"])}),Mp={paint:new nl({"line-opacity":new Yi(Be.paint_line["line-opacity"]),"line-color":new Yi(Be.paint_line["line-color"]),"line-translate":new Ri(Be.paint_line["line-translate"]),"line-translate-anchor":new Ri(Be.paint_line["line-translate-anchor"]),"line-width":new Yi(Be.paint_line["line-width"]),"line-gap-width":new Yi(Be.paint_line["line-gap-width"]),"line-offset":new Yi(Be.paint_line["line-offset"]),"line-blur":new Yi(Be.paint_line["line-blur"]),"line-dasharray":new ou(Be.paint_line["line-dasharray"]),"line-pattern":new xu(Be.paint_line["line-pattern"]),"line-gradient":new ia(Be.paint_line["line-gradient"])}),layout:$h},Zg=new(function(E){function z(){E.apply(this,arguments)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.possiblyEvaluate=function(K,ce){return ce=new Qa(Math.floor(ce.zoom),{now:ce.now,fadeDuration:ce.fadeDuration,zoomHistory:ce.zoomHistory,transition:ce.transition}),E.prototype.possiblyEvaluate.call(this,K,ce)},z.prototype.evaluate=function(K,ce,xe,Ae){return ce=p({},ce,{zoom:Math.floor(ce.zoom)}),E.prototype.evaluate.call(this,K,ce,xe,Ae)},z}(Yi))(Mp.paint.properties["line-width"].specification);Zg.useIntegerZoom=!0;var wy=function(E){function z(K){E.call(this,K,Mp)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype._handleSpecialPaintPropertyUpdate=function(K){"line-gradient"===K&&this._updateGradient()},z.prototype._updateGradient=function(){this.gradient=Fc(this._transitionablePaint._values["line-gradient"].value.expression,"lineProgress"),this.gradientTexture=null},z.prototype.recalculate=function(K,ce){E.prototype.recalculate.call(this,K,ce),this.paint._values["line-floorwidth"]=Zg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,K)},z.prototype.createBucket=function(K){return new rl(K)},z.prototype.queryRadius=function(K){var ce=K,xe=Vc(bo("line-width",this,ce),bo("line-gap-width",this,ce)),Ae=bo("line-offset",this,ce);return xe/2+Math.abs(Ae)+ws(this.paint.get("line-translate"))},z.prototype.queryIntersectsFeature=function(K,ce,xe,Ae,Re,We,ot){var bt=Zs(K,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),We.angle,ot),kt=ot/2*Vc(this.paint.get("line-width").evaluate(ce,xe),this.paint.get("line-gap-width").evaluate(ce,xe)),Xt=this.paint.get("line-offset").evaluate(ce,xe);return Xt&&(Ae=function(cn,nn){for(var vn=[],Pn=new i(0,0),Xn=0;Xn<cn.length;Xn++){for(var Yn=cn[Xn],ar=[],lr=0;lr<Yn.length;lr++){var Pr=Yn[lr],Br=Yn[lr+1],ui=0===lr?Pn:Pr.sub(Yn[lr-1])._unit()._perp(),ni=lr===Yn.length-1?Pn:Br.sub(Pr)._unit()._perp(),yi=ui._add(ni)._unit();yi._mult(1/(yi.x*ni.x+yi.y*ni.y)),ar.push(yi._mult(nn)._add(Pr))}vn.push(ar)}return vn}(Ae,Xt*ot)),function(cn,nn,vn){for(var Pn=0;Pn<nn.length;Pn++){var Xn=nn[Pn];if(cn.length>=3)for(var Yn=0;Yn<Xn.length;Yn++)if(xl(cn,Xn[Yn]))return!0;if(bf(cn,Xn,vn))return!0}return!1}(bt,Ae,kt)},z.prototype.isTileClipped=function(){return!0},z}(vl);function Vc(E,z){return z>0?z+2*E:E}var Uc=Za([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Ty=Za([{name:"a_projected_pos",components:3,type:"Float32"}],4),qx=(Za([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),Za([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),kp=(Za([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),Za([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),Ay=Za([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Wx(E,z,K){return E.sections.forEach(function(ce){var xe,Re,We;ce.text=(xe=ce.text,Re=K,"uppercase"===(We=z.layout.get("text-transform").evaluate(Re,{}))?xe=xe.toLocaleUpperCase():"lowercase"===We&&(xe=xe.toLocaleLowerCase()),bs.applyArabicShaping&&(xe=bs.applyArabicShaping(xe)),xe)}),E}Za([{name:"triangle",components:3,type:"Uint16"}]),Za([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Za([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Za([{type:"Float32",name:"offsetX"}]),Za([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var sh={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"},Xg=function(E,z,K,ce,xe){var Ae,Re,We=8*xe-ce-1,ot=(1<<We)-1,bt=ot>>1,kt=-7,Xt=K?xe-1:0,cn=K?-1:1,nn=E[z+Xt];for(Xt+=cn,Ae=nn&(1<<-kt)-1,nn>>=-kt,kt+=We;kt>0;Ae=256*Ae+E[z+Xt],Xt+=cn,kt-=8);for(Re=Ae&(1<<-kt)-1,Ae>>=-kt,kt+=ce;kt>0;Re=256*Re+E[z+Xt],Xt+=cn,kt-=8);if(0===Ae)Ae=1-bt;else{if(Ae===ot)return Re?NaN:1/0*(nn?-1:1);Re+=Math.pow(2,ce),Ae-=bt}return(nn?-1:1)*Re*Math.pow(2,Ae-ce)},$g=function(E,z,K,ce,xe,Ae){var Re,We,ot,bt=8*Ae-xe-1,kt=(1<<bt)-1,Xt=kt>>1,cn=23===xe?Math.pow(2,-24)-Math.pow(2,-77):0,nn=ce?0:Ae-1,vn=ce?1:-1,Pn=z<0||0===z&&1/z<0?1:0;for(z=Math.abs(z),isNaN(z)||z===1/0?(We=isNaN(z)?1:0,Re=kt):(Re=Math.floor(Math.log(z)/Math.LN2),z*(ot=Math.pow(2,-Re))<1&&(Re--,ot*=2),(z+=Re+Xt>=1?cn/ot:cn*Math.pow(2,1-Xt))*ot>=2&&(Re++,ot/=2),Re+Xt>=kt?(We=0,Re=kt):Re+Xt>=1?(We=(z*ot-1)*Math.pow(2,xe),Re+=Xt):(We=z*Math.pow(2,Xt-1)*Math.pow(2,xe),Re=0));xe>=8;E[K+nn]=255&We,nn+=vn,We/=256,xe-=8);for(Re=Re<<xe|We,bt+=xe;bt>0;E[K+nn]=255&Re,nn+=vn,Re/=256,bt-=8);E[K+nn-vn]|=128*Pn},Hc=go;function go(E){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(E)?E:new Uint8Array(E||0),this.pos=0,this.type=0,this.length=this.buf.length}go.Varint=0,go.Fixed64=1,go.Bytes=2,go.Fixed32=5;var Gc="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function Zu(E){return E.type===go.Bytes?E.readVarint()+E.pos:E.pos+1}function My(E,z,K){var ce=z<=16383?1:z<=2097151?2:z<=268435455?3:Math.floor(Math.log(z)/(7*Math.LN2));K.realloc(ce);for(var xe=K.pos-1;xe>=E;xe--)K.buf[xe+ce]=K.buf[xe]}function Kh(E,z){for(var K=0;K<E.length;K++)z.writeVarint(E[K])}function Cp(E,z){for(var K=0;K<E.length;K++)z.writeSVarint(E[K])}function Kg(E,z){for(var K=0;K<E.length;K++)z.writeFloat(E[K])}function Jg(E,z){for(var K=0;K<E.length;K++)z.writeDouble(E[K])}function Qg(E,z){for(var K=0;K<E.length;K++)z.writeBoolean(E[K])}function qc(E,z){for(var K=0;K<E.length;K++)z.writeFixed32(E[K])}function ky(E,z){for(var K=0;K<E.length;K++)z.writeSFixed32(E[K])}function Cy(E,z){for(var K=0;K<E.length;K++)z.writeFixed64(E[K])}function Sy(E,z){for(var K=0;K<E.length;K++)z.writeSFixed64(E[K])}function Jh(E,z){return(E[z]|E[z+1]<<8|E[z+2]<<16)+16777216*E[z+3]}function Cf(E,z,K){E[K]=z,E[K+1]=z>>>8,E[K+2]=z>>>16,E[K+3]=z>>>24}function Ul(E,z){return(E[z]|E[z+1]<<8|E[z+2]<<16)+(E[z+3]<<24)}function Su(E,z,K){1===E&&K.readMessage(e0,z)}function e0(E,z,K){if(3===E){var ce=K.readMessage(Ey,{}),Re=ce.width,We=ce.height,ot=ce.left,bt=ce.top,kt=ce.advance;z.push({id:ce.id,bitmap:new lu({width:Re+6,height:We+6},ce.bitmap),metrics:{width:Re,height:We,left:ot,top:bt,advance:kt}})}}function Ey(E,z,K){1===E?z.id=K.readVarint():2===E?z.bitmap=K.readBytes():3===E?z.width=K.readVarint():4===E?z.height=K.readVarint():5===E?z.left=K.readSVarint():6===E?z.top=K.readSVarint():7===E&&(z.advance=K.readVarint())}function t0(E){for(var z=0,K=0,ce=0,xe=E;ce<xe.length;ce+=1){var Ae=xe[ce];z+=Ae.w*Ae.h,K=Math.max(K,Ae.w)}E.sort(function(Pn,Xn){return Xn.h-Pn.h});for(var Re=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(z/.95)),K),h:1/0}],We=0,ot=0,bt=0,kt=E;bt<kt.length;bt+=1)for(var Xt=kt[bt],cn=Re.length-1;cn>=0;cn--){var nn=Re[cn];if(!(Xt.w>nn.w||Xt.h>nn.h)){if(Xt.x=nn.x,Xt.y=nn.y,ot=Math.max(ot,Xt.y+Xt.h),We=Math.max(We,Xt.x+Xt.w),Xt.w===nn.w&&Xt.h===nn.h){var vn=Re.pop();cn<Re.length&&(Re[cn]=vn)}else Xt.h===nn.h?(nn.x+=Xt.w,nn.w-=Xt.w):Xt.w===nn.w?(nn.y+=Xt.h,nn.h-=Xt.h):(Re.push({x:nn.x+Xt.w,y:nn.y,w:nn.w-Xt.w,h:Xt.h}),nn.y+=Xt.h,nn.h-=Xt.h);break}}return{w:We,h:ot,fill:z/(We*ot)||0}}go.prototype={destroy:function(){this.buf=null},readFields:function(E,z,K){for(K=K||this.length;this.pos<K;){var ce=this.readVarint(),xe=ce>>3,Ae=this.pos;this.type=7&ce,E(xe,z,this),this.pos===Ae&&this.skip(ce)}return z},readMessage:function(E,z){return this.readFields(E,z,this.readVarint()+this.pos)},readFixed32:function(){var E=Jh(this.buf,this.pos);return this.pos+=4,E},readSFixed32:function(){var E=Ul(this.buf,this.pos);return this.pos+=4,E},readFixed64:function(){var E=Jh(this.buf,this.pos)+4294967296*Jh(this.buf,this.pos+4);return this.pos+=8,E},readSFixed64:function(){var E=Jh(this.buf,this.pos)+4294967296*Ul(this.buf,this.pos+4);return this.pos+=8,E},readFloat:function(){var E=Xg(this.buf,this.pos,!0,23,4);return this.pos+=4,E},readDouble:function(){var E=Xg(this.buf,this.pos,!0,52,8);return this.pos+=8,E},readVarint:function(E){var z,K,ce=this.buf;return z=127&(K=ce[this.pos++]),K<128?z:(z|=(127&(K=ce[this.pos++]))<<7,K<128?z:(z|=(127&(K=ce[this.pos++]))<<14,K<128?z:(z|=(127&(K=ce[this.pos++]))<<21,K<128?z:function(xe,Ae,Re){var We,ot,bt=Re.buf;if(We=(112&(ot=bt[Re.pos++]))>>4,ot<128||(We|=(127&(ot=bt[Re.pos++]))<<3,ot<128)||(We|=(127&(ot=bt[Re.pos++]))<<10,ot<128)||(We|=(127&(ot=bt[Re.pos++]))<<17,ot<128)||(We|=(127&(ot=bt[Re.pos++]))<<24,ot<128)||(We|=(1&(ot=bt[Re.pos++]))<<31,ot<128))return function kf(E,z,K){return K?4294967296*z+(E>>>0):4294967296*(z>>>0)+(E>>>0)}(xe,We,Ae);throw new Error("Expected varint not more than 10 bytes")}(z|=(15&(K=ce[this.pos]))<<28,E,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var E=this.readVarint();return E%2==1?(E+1)/-2:E/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var E=this.readVarint()+this.pos,z=this.pos;return this.pos=E,E-z>=12&&Gc?Gc.decode(this.buf.subarray(z,E)):function(K,ce,xe){for(var Ae="",Re=ce;Re<xe;){var We,ot,bt,kt=K[Re],Xt=null,cn=kt>239?4:kt>223?3:kt>191?2:1;if(Re+cn>xe)break;1===cn?kt<128&&(Xt=kt):2===cn?128==(192&(We=K[Re+1]))&&(Xt=(31&kt)<<6|63&We)<=127&&(Xt=null):3===cn?(ot=K[Re+2],128==(192&(We=K[Re+1]))&&128==(192&ot)&&((Xt=(15&kt)<<12|(63&We)<<6|63&ot)<=2047||Xt>=55296&&Xt<=57343)&&(Xt=null)):4===cn&&(ot=K[Re+2],bt=K[Re+3],128==(192&(We=K[Re+1]))&&128==(192&ot)&&128==(192&bt)&&((Xt=(15&kt)<<18|(63&We)<<12|(63&ot)<<6|63&bt)<=65535||Xt>=1114112)&&(Xt=null)),null===Xt?(Xt=65533,cn=1):Xt>65535&&(Xt-=65536,Ae+=String.fromCharCode(Xt>>>10&1023|55296),Xt=56320|1023&Xt),Ae+=String.fromCharCode(Xt),Re+=cn}return Ae}(this.buf,z,E)},readBytes:function(){var E=this.readVarint()+this.pos,z=this.buf.subarray(this.pos,E);return this.pos=E,z},readPackedVarint:function(E,z){if(this.type!==go.Bytes)return E.push(this.readVarint(z));var K=Zu(this);for(E=E||[];this.pos<K;)E.push(this.readVarint(z));return E},readPackedSVarint:function(E){if(this.type!==go.Bytes)return E.push(this.readSVarint());var z=Zu(this);for(E=E||[];this.pos<z;)E.push(this.readSVarint());return E},readPackedBoolean:function(E){if(this.type!==go.Bytes)return E.push(this.readBoolean());var z=Zu(this);for(E=E||[];this.pos<z;)E.push(this.readBoolean());return E},readPackedFloat:function(E){if(this.type!==go.Bytes)return E.push(this.readFloat());var z=Zu(this);for(E=E||[];this.pos<z;)E.push(this.readFloat());return E},readPackedDouble:function(E){if(this.type!==go.Bytes)return E.push(this.readDouble());var z=Zu(this);for(E=E||[];this.pos<z;)E.push(this.readDouble());return E},readPackedFixed32:function(E){if(this.type!==go.Bytes)return E.push(this.readFixed32());var z=Zu(this);for(E=E||[];this.pos<z;)E.push(this.readFixed32());return E},readPackedSFixed32:function(E){if(this.type!==go.Bytes)return E.push(this.readSFixed32());var z=Zu(this);for(E=E||[];this.pos<z;)E.push(this.readSFixed32());return E},readPackedFixed64:function(E){if(this.type!==go.Bytes)return E.push(this.readFixed64());var z=Zu(this);for(E=E||[];this.pos<z;)E.push(this.readFixed64());return E},readPackedSFixed64:function(E){if(this.type!==go.Bytes)return E.push(this.readSFixed64());var z=Zu(this);for(E=E||[];this.pos<z;)E.push(this.readSFixed64());return E},skip:function(E){var z=7&E;if(z===go.Varint)for(;this.buf[this.pos++]>127;);else if(z===go.Bytes)this.pos=this.readVarint()+this.pos;else if(z===go.Fixed32)this.pos+=4;else{if(z!==go.Fixed64)throw new Error("Unimplemented type: "+z);this.pos+=8}},writeTag:function(E,z){this.writeVarint(E<<3|z)},realloc:function(E){for(var z=this.length||16;z<this.pos+E;)z*=2;if(z!==this.length){var K=new Uint8Array(z);K.set(this.buf),this.buf=K,this.length=z}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(E){this.realloc(4),Cf(this.buf,E,this.pos),this.pos+=4},writeSFixed32:function(E){this.realloc(4),Cf(this.buf,E,this.pos),this.pos+=4},writeFixed64:function(E){this.realloc(8),Cf(this.buf,-1&E,this.pos),Cf(this.buf,Math.floor(E*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(E){this.realloc(8),Cf(this.buf,-1&E,this.pos),Cf(this.buf,Math.floor(E*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(E){(E=+E||0)>268435455||E<0?function(z,K){var ce,xe,Ae,We;if(z>=0?(ce=z%4294967296|0,xe=z/4294967296|0):(xe=~(-z/4294967296),4294967295^(ce=~(-z%4294967296))?ce=ce+1|0:(ce=0,xe=xe+1|0)),z>=0x10000000000000000||z<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");K.realloc(10),Ae=ce,(We=K).buf[We.pos++]=127&Ae|128,Ae>>>=7,We.buf[We.pos++]=127&Ae|128,Ae>>>=7,We.buf[We.pos++]=127&Ae|128,Ae>>>=7,We.buf[We.pos++]=127&Ae|128,We.buf[We.pos]=127&(Ae>>>=7),function(Ae,Re){var We=(7&Ae)<<4;Re.buf[Re.pos++]|=We|((Ae>>>=3)?128:0),Ae&&(Re.buf[Re.pos++]=127&Ae|((Ae>>>=7)?128:0),Ae&&(Re.buf[Re.pos++]=127&Ae|((Ae>>>=7)?128:0),Ae&&(Re.buf[Re.pos++]=127&Ae|((Ae>>>=7)?128:0),Ae&&(Re.buf[Re.pos++]=127&Ae|((Ae>>>=7)?128:0),Ae&&(Re.buf[Re.pos++]=127&Ae)))))}(xe,K)}(E,this):(this.realloc(4),this.buf[this.pos++]=127&E|(E>127?128:0),E<=127||(this.buf[this.pos++]=127&(E>>>=7)|(E>127?128:0),E<=127||(this.buf[this.pos++]=127&(E>>>=7)|(E>127?128:0),E<=127||(this.buf[this.pos++]=E>>>7&127))))},writeSVarint:function(E){this.writeVarint(E<0?2*-E-1:2*E)},writeBoolean:function(E){this.writeVarint(Boolean(E))},writeString:function(E){E=String(E),this.realloc(4*E.length),this.pos++;var z=this.pos;this.pos=function(ce,xe,Ae){for(var Re,We,ot=0;ot<xe.length;ot++){if((Re=xe.charCodeAt(ot))>55295&&Re<57344){if(!We){Re>56319||ot+1===xe.length?(ce[Ae++]=239,ce[Ae++]=191,ce[Ae++]=189):We=Re;continue}if(Re<56320){ce[Ae++]=239,ce[Ae++]=191,ce[Ae++]=189,We=Re;continue}Re=We-55296<<10|Re-56320|65536,We=null}else We&&(ce[Ae++]=239,ce[Ae++]=191,ce[Ae++]=189,We=null);Re<128?ce[Ae++]=Re:(Re<2048?ce[Ae++]=Re>>6|192:(Re<65536?ce[Ae++]=Re>>12|224:(ce[Ae++]=Re>>18|240,ce[Ae++]=Re>>12&63|128),ce[Ae++]=Re>>6&63|128),ce[Ae++]=63&Re|128)}return Ae}(this.buf,E,this.pos);var K=this.pos-z;K>=128&&My(z,K,this),this.pos=z-1,this.writeVarint(K),this.pos+=K},writeFloat:function(E){this.realloc(4),$g(this.buf,E,this.pos,!0,23,4),this.pos+=4},writeDouble:function(E){this.realloc(8),$g(this.buf,E,this.pos,!0,52,8),this.pos+=8},writeBytes:function(E){var z=E.length;this.writeVarint(z),this.realloc(z);for(var K=0;K<z;K++)this.buf[this.pos++]=E[K]},writeRawMessage:function(E,z){this.pos++;var K=this.pos;E(z,this);var ce=this.pos-K;ce>=128&&My(K,ce,this),this.pos=K-1,this.writeVarint(ce),this.pos+=ce},writeMessage:function(E,z,K){this.writeTag(E,go.Bytes),this.writeRawMessage(z,K)},writePackedVarint:function(E,z){z.length&&this.writeMessage(E,Kh,z)},writePackedSVarint:function(E,z){z.length&&this.writeMessage(E,Cp,z)},writePackedBoolean:function(E,z){z.length&&this.writeMessage(E,Qg,z)},writePackedFloat:function(E,z){z.length&&this.writeMessage(E,Kg,z)},writePackedDouble:function(E,z){z.length&&this.writeMessage(E,Jg,z)},writePackedFixed32:function(E,z){z.length&&this.writeMessage(E,qc,z)},writePackedSFixed32:function(E,z){z.length&&this.writeMessage(E,ky,z)},writePackedFixed64:function(E,z){z.length&&this.writeMessage(E,Cy,z)},writePackedSFixed64:function(E,z){z.length&&this.writeMessage(E,Sy,z)},writeBytesField:function(E,z){this.writeTag(E,go.Bytes),this.writeBytes(z)},writeFixed32Field:function(E,z){this.writeTag(E,go.Fixed32),this.writeFixed32(z)},writeSFixed32Field:function(E,z){this.writeTag(E,go.Fixed32),this.writeSFixed32(z)},writeFixed64Field:function(E,z){this.writeTag(E,go.Fixed64),this.writeFixed64(z)},writeSFixed64Field:function(E,z){this.writeTag(E,go.Fixed64),this.writeSFixed64(z)},writeVarintField:function(E,z){this.writeTag(E,go.Varint),this.writeVarint(z)},writeSVarintField:function(E,z){this.writeTag(E,go.Varint),this.writeSVarint(z)},writeStringField:function(E,z){this.writeTag(E,go.Bytes),this.writeString(z)},writeFloatField:function(E,z){this.writeTag(E,go.Fixed32),this.writeFloat(z)},writeDoubleField:function(E,z){this.writeTag(E,go.Fixed64),this.writeDouble(z)},writeBooleanField:function(E,z){this.writeVarintField(E,Boolean(z))}};var Qh=function(E,z){var K=z.pixelRatio,ce=z.version,xe=z.stretchX,Ae=z.stretchY,Re=z.content;this.paddedRect=E,this.pixelRatio=K,this.stretchX=xe,this.stretchY=Ae,this.content=Re,this.version=ce},lh={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};lh.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},lh.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},lh.tlbr.get=function(){return this.tl.concat(this.br)},lh.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Qh.prototype,lh);var uh=function(E,z){var K={},ce={};this.haveRenderCallbacks=[];var xe=[];this.addImages(E,K,xe),this.addImages(z,ce,xe);var Ae=t0(xe),ot=new _l({width:Ae.w||1,height:Ae.h||1});for(var bt in E){var kt=E[bt],Xt=K[bt].paddedRect;_l.copy(kt.data,ot,{x:0,y:0},{x:Xt.x+1,y:Xt.y+1},kt.data)}for(var cn in z){var nn=z[cn],vn=ce[cn].paddedRect,Pn=vn.x+1,Xn=vn.y+1,Yn=nn.data.width,ar=nn.data.height;_l.copy(nn.data,ot,{x:0,y:0},{x:Pn,y:Xn},nn.data),_l.copy(nn.data,ot,{x:0,y:ar-1},{x:Pn,y:Xn-1},{width:Yn,height:1}),_l.copy(nn.data,ot,{x:0,y:0},{x:Pn,y:Xn+ar},{width:Yn,height:1}),_l.copy(nn.data,ot,{x:Yn-1,y:0},{x:Pn-1,y:Xn},{width:1,height:ar}),_l.copy(nn.data,ot,{x:0,y:0},{x:Pn+Yn,y:Xn},{width:1,height:ar})}this.image=ot,this.iconPositions=K,this.patternPositions=ce};uh.prototype.addImages=function(E,z,K){for(var ce in E){var xe=E[ce],Ae={x:0,y:0,w:xe.data.width+2,h:xe.data.height+2};K.push(Ae),z[ce]=new Qh(Ae,xe),xe.hasRenderCallback&&this.haveRenderCallbacks.push(ce)}},uh.prototype.patchUpdatedImages=function(E,z){for(var K in E.dispatchRenderCallbacks(this.haveRenderCallbacks),E.updatedImages)this.patchUpdatedImage(this.iconPositions[K],E.getImage(K),z),this.patchUpdatedImage(this.patternPositions[K],E.getImage(K),z)},uh.prototype.patchUpdatedImage=function(E,z,K){if(E&&z&&E.version!==z.version){E.version=z.version;var ce=E.tl;K.update(z.data,void 0,{x:ce[0],y:ce[1]})}},br("ImagePosition",Qh),br("ImageAtlas",uh);var Pl={horizontal:1,vertical:2,horizontalOnly:3},Sf=function(){this.scale=1,this.fontStack="",this.imageName=null};Sf.forText=function(E,z){var K=new Sf;return K.scale=E||1,K.fontStack=z,K},Sf.forImage=function(E){var z=new Sf;return z.imageName=E,z};var il=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function ed(E,z,K,ce,xe,Ae,Re,We,ot,bt,kt,Xt,cn,nn,vn,Pn){var Xn,Yn=il.fromFeature(E,xe);Xt===Pl.vertical&&Yn.verticalizePunctuation();var ar=bs.processBidirectionalText,lr=bs.processStyledBidirectionalText;if(ar&&1===Yn.sections.length){Xn=[];for(var mr=0,Pr=ar(Yn.toString(),Wc(Yn,bt,Ae,z,ce,nn,vn));mr<Pr.length;mr+=1){var Br=Pr[mr],ui=new il;ui.text=Br,ui.sections=Yn.sections;for(var ni=0;ni<Br.length;ni++)ui.sectionIndex.push(0);Xn.push(ui)}}else if(lr){Xn=[];for(var yi=0,Ei=lr(Yn.text,Yn.sectionIndex,Wc(Yn,bt,Ae,z,ce,nn,vn));yi<Ei.length;yi+=1){var Pi=Ei[yi],_i=new il;_i.text=Pi[0],_i.sectionIndex=Pi[1],_i.sections=Yn.sections,Xn.push(_i)}}else Xn=function(Li,za){for(var La=[],Ha=Li.text,$i=0,Ia=0,wo=za;Ia<wo.length;Ia+=1){var so=wo[Ia];La.push(Li.substring($i,so)),$i=so}return $i<Ha.length&&La.push(Li.substring($i,Ha.length)),La}(Yn,Wc(Yn,bt,Ae,z,ce,nn,vn));var Ui=[],zi={positionedLines:Ui,text:Yn.toString(),top:kt[1],bottom:kt[1],left:kt[0],right:kt[0],writingMode:Xt,iconsInText:!1,verticalizable:!1};return function(Li,za,La,Ha,$i,Ia,wo,so,So,lo,Wo,Fo){for(var js=0,Ds=-17,Vs=0,sl=0,Us="right"===so?1:"left"===so?0:.5,as=0,$s=0,is=$i;$s<is.length;$s+=1){var As=is[$s];As.trim();var Aa=As.getMaxScale(),Ga=24*(Aa-1),Jo={positionedGlyphs:[],lineOffset:0};Li.positionedLines[as]=Jo;var to=Jo.positionedGlyphs,Yo=0;if(As.length()){for(var Eo=0;Eo<As.length();Eo++){var Xa=As.getSection(Eo),Qo=As.getSectionIndex(Eo),wl=As.getCharCode(Eo),Ol=0,Ks=null,Au=null,Xu=null,Ls=24,ha=!(So===Pl.horizontal||!Wo&&!Wi(wl)||Wo&&(td[wl]||(Ku=wl,$r.Arabic(Ku)||$r["Arabic Supplement"](Ku)||$r["Arabic Extended-A"](Ku)||$r["Arabic Presentation Forms-A"](Ku)||$r["Arabic Presentation Forms-B"](Ku))));if(Xa.imageName){var er=Ha[Xa.imageName];if(!er)continue;Xu=Xa.imageName,Li.iconsInText=Li.iconsInText||!0,Au=er.paddedRect;var cu=er.displaySize;Xa.scale=24*Xa.scale/Fo,Ol=Ga+(24-cu[1]*Xa.scale),Ls=(Ks={width:cu[0],height:cu[1],left:1,top:-3,advance:ha?cu[1]:cu[0]}).advance;var $u=ha?cu[0]*Xa.scale-24*Aa:cu[1]*Xa.scale-24*Aa;$u>0&&$u>Yo&&(Yo=$u)}else{var Gl=La[Xa.fontStack],yc=Gl&&Gl[wl];if(yc&&yc.rect)Au=yc.rect,Ks=yc.metrics;else{var dd=za[Xa.fontStack],Pf=dd&&dd[wl];if(!Pf)continue;Ks=Pf.metrics}Ol=24*(Aa-Xa.scale)}ha?(Li.verticalizable=!0,to.push({glyph:wl,imageName:Xu,x:js,y:Ds+Ol,vertical:ha,scale:Xa.scale,fontStack:Xa.fontStack,sectionIndex:Qo,metrics:Ks,rect:Au}),js+=Ls*Xa.scale+lo):(to.push({glyph:wl,imageName:Xu,x:js,y:Ds+Ol,vertical:ha,scale:Xa.scale,fontStack:Xa.fontStack,sectionIndex:Qo,metrics:Ks,rect:Au}),js+=Ks.advance*Xa.scale+lo)}0!==to.length&&(Vs=Math.max(js-lo,Vs),a0(to,0,to.length-1,Us,Yo)),js=0;var Of=Ia*Aa+Yo;Jo.lineOffset=Math.max(Yo,Ga),Ds+=Of,sl=Math.max(Of,sl),++as}else Ds+=Ia,++as}var Ku,vc=Ds- -17,Vp=nd(wo),Kc=Vp.horizontalAlign,Jc=Vp.verticalAlign;(function(xc,Qc,Rf,Ff,ef,Up,yh,pd,vh){var tf,gd=(Qc-Rf)*ef;tf=Up!==yh?-pd*Ff- -17:(-Ff*vh+.5)*yh;for(var xh=0,zf=xc;xh<zf.length;xh+=1)for(var nf=0,Nf=zf[xh].positionedGlyphs;nf<Nf.length;nf+=1){var Bf=Nf[nf];Bf.x+=gd,Bf.y+=tf}})(Li.positionedLines,Us,Kc,Jc,Vs,sl,Ia,vc,$i.length),Li.top+=-Jc*vc,Li.bottom=Li.top+vc,Li.left+=-Kc*Vs,Li.right=Li.left+Vs}(zi,z,K,ce,Xn,Re,We,ot,Xt,bt,cn,Pn),!function(Li){for(var za=0,La=Li;za<La.length;za+=1)if(0!==La[za].positionedGlyphs.length)return!1;return!0}(Ui)&&zi}il.fromFeature=function(E,z){for(var K=new il,ce=0;ce<E.sections.length;ce++){var xe=E.sections[ce];xe.image?K.addImageSection(xe):K.addTextSection(xe,z)}return K},il.prototype.length=function(){return this.text.length},il.prototype.getSection=function(E){return this.sections[this.sectionIndex[E]]},il.prototype.getSectionIndex=function(E){return this.sectionIndex[E]},il.prototype.getCharCode=function(E){return this.text.charCodeAt(E)},il.prototype.verticalizePunctuation=function(){this.text=function(E){for(var z="",K=0;K<E.length;K++){var ce=E.charCodeAt(K+1)||null,xe=E.charCodeAt(K-1)||null;ce&&va(ce)&&!sh[E[K+1]]||xe&&va(xe)&&!sh[E[K-1]]||!sh[E[K]]?z+=E[K]:z+=sh[E[K]]}return z}(this.text)},il.prototype.trim=function(){for(var E=0,z=0;z<this.text.length&&td[this.text.charCodeAt(z)];z++)E++;for(var K=this.text.length,ce=this.text.length-1;ce>=0&&ce>=E&&td[this.text.charCodeAt(ce)];ce--)K--;this.text=this.text.substring(E,K),this.sectionIndex=this.sectionIndex.slice(E,K)},il.prototype.substring=function(E,z){var K=new il;return K.text=this.text.substring(E,z),K.sectionIndex=this.sectionIndex.slice(E,z),K.sections=this.sections,K},il.prototype.toString=function(){return this.text},il.prototype.getMaxScale=function(){var E=this;return this.sectionIndex.reduce(function(z,K){return Math.max(z,E.sections[K].scale)},0)},il.prototype.addTextSection=function(E,z){this.text+=E.text,this.sections.push(Sf.forText(E.scale,E.fontStack||z));for(var K=this.sections.length-1,ce=0;ce<E.text.length;++ce)this.sectionIndex.push(K)},il.prototype.addImageSection=function(E){var z=E.image?E.image.name:"";if(0!==z.length){var K=this.getNextImageSectionCharCode();K?(this.text+=String.fromCharCode(K),this.sections.push(Sf.forImage(z)),this.sectionIndex.push(this.sections.length-1)):D("Reached maximum number of images 6401")}else D("Can't add FormattedSection with an empty image.")},il.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var td={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Hl={};function n0(E,z,K,ce,xe,Ae){if(z.imageName){var Re=ce[z.imageName];return Re?Re.displaySize[0]*z.scale*24/Ae+xe:0}var We=K[z.fontStack],ot=We&&We[E];return ot?ot.metrics.advance*z.scale+xe:0}function Ef(E,z,K,ce){var xe=Math.pow(E-z,2);return ce?E<z?xe/2:2*xe:xe+Math.abs(K)*K}function r0(E,z,K){var ce=0;return 10===E&&(ce-=1e4),K&&(ce+=150),40!==E&&65288!==E||(ce+=50),41!==z&&65289!==z||(ce+=50),ce}function Tu(E,z,K,ce,xe,Ae){for(var Re=null,We=Ef(z,K,xe,Ae),ot=0,bt=ce;ot<bt.length;ot+=1){var kt=bt[ot],Xt=Ef(z-kt.x,K,xe,Ae)+kt.badness;Xt<=We&&(Re=kt,We=Xt)}return{index:E,x:z,priorBreak:Re,badness:We}}function Wc(E,z,K,ce,xe,Ae,Re){if("point"!==Ae)return[];if(!E)return[];for(var We,ot=[],bt=function(Xn,Yn,ar,lr,mr,Pr){for(var Br=0,ui=0;ui<Xn.length();ui++){var ni=Xn.getSection(ui);Br+=n0(Xn.getCharCode(ui),ni,lr,mr,Yn,Pr)}return Br/Math.max(1,Math.ceil(Br/ar))}(E,z,K,ce,xe,Re),kt=E.text.indexOf("\u200b")>=0,Xt=0,cn=0;cn<E.length();cn++){var nn=E.getSection(cn),vn=E.getCharCode(cn);if(td[vn]||(Xt+=n0(vn,nn,ce,xe,z,Re)),cn<E.length()-1){var Pn=!((We=vn)<11904||!($r["Bopomofo Extended"](We)||$r.Bopomofo(We)||$r["CJK Compatibility Forms"](We)||$r["CJK Compatibility Ideographs"](We)||$r["CJK Compatibility"](We)||$r["CJK Radicals Supplement"](We)||$r["CJK Strokes"](We)||$r["CJK Symbols and Punctuation"](We)||$r["CJK Unified Ideographs Extension A"](We)||$r["CJK Unified Ideographs"](We)||$r["Enclosed CJK Letters and Months"](We)||$r["Halfwidth and Fullwidth Forms"](We)||$r.Hiragana(We)||$r["Ideographic Description Characters"](We)||$r["Kangxi Radicals"](We)||$r["Katakana Phonetic Extensions"](We)||$r.Katakana(We)||$r["Vertical Forms"](We)||$r["Yi Radicals"](We)||$r["Yi Syllables"](We)));(Hl[vn]||Pn||nn.imageName)&&ot.push(Tu(cn+1,Xt,bt,ot,r0(vn,E.getCharCode(cn+1),Pn&&kt),!1))}}return function Xn(Yn){return Yn?Xn(Yn.priorBreak).concat(Yn.index):[]}(Tu(E.length(),Xt,bt,ot,0,!0))}function nd(E){var z=.5,K=.5;switch(E){case"right":case"top-right":case"bottom-right":z=1;break;case"left":case"top-left":case"bottom-left":z=0}switch(E){case"bottom":case"bottom-right":case"bottom-left":K=1;break;case"top":case"top-right":case"top-left":K=0}return{horizontalAlign:z,verticalAlign:K}}function a0(E,z,K,ce,xe){if(ce||xe)for(var Ae=E[K],We=(E[K].x+Ae.metrics.advance*Ae.scale)*ce,ot=z;ot<=K;ot++)E[ot].x-=We,E[ot].y+=xe}function Sp(E,z,K,ce,xe,Ae){var Re,We=E.image;if(We.content){var ot=We.content,bt=We.pixelRatio||1;Re=[ot[0]/bt,ot[1]/bt,We.displaySize[0]-ot[2]/bt,We.displaySize[1]-ot[3]/bt]}var kt,Xt,cn,nn,vn=z.left*Ae,Pn=z.right*Ae;"width"===K||"both"===K?(nn=xe[0]+vn-ce[3],Xt=xe[0]+Pn+ce[1]):Xt=(nn=xe[0]+(vn+Pn-We.displaySize[0])/2)+We.displaySize[0];var Xn=z.top*Ae,Yn=z.bottom*Ae;return"height"===K||"both"===K?(kt=xe[1]+Xn-ce[0],cn=xe[1]+Yn+ce[2]):cn=(kt=xe[1]+(Xn+Yn-We.displaySize[1])/2)+We.displaySize[1],{image:We,top:kt,right:Xt,bottom:cn,left:nn,collisionPadding:Re}}Hl[10]=!0,Hl[32]=!0,Hl[38]=!0,Hl[40]=!0,Hl[41]=!0,Hl[43]=!0,Hl[45]=!0,Hl[47]=!0,Hl[173]=!0,Hl[183]=!0,Hl[8203]=!0,Hl[8208]=!0,Hl[8211]=!0,Hl[8231]=!0;var ch=function(E){function z(K,ce,xe,Ae){E.call(this,K,ce),this.angle=xe,void 0!==Ae&&(this.segment=Ae)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.clone=function(){return new z(this.x,this.y,this.angle,this.segment)},z}(i);function o0(E,z){var K=z.expression;if("constant"===K.kind)return{kind:"constant",layoutSize:K.evaluate(new Qa(E+1))};if("source"===K.kind)return{kind:"source"};for(var ce=K.zoomStops,xe=K.interpolationType,Ae=0;Ae<ce.length&&ce[Ae]<=E;)Ae++;for(var Re=Ae=Math.max(0,Ae-1);Re<ce.length&&ce[Re]<E+1;)Re++;Re=Math.min(ce.length-1,Re);var We=ce[Ae],ot=ce[Re];return"composite"===K.kind?{kind:"composite",minZoom:We,maxZoom:ot,interpolationType:xe}:{kind:"camera",minZoom:We,maxZoom:ot,minSize:K.evaluate(new Qa(We)),maxSize:K.evaluate(new Qa(ot)),interpolationType:xe}}function Dy(E,z,K){var ce=z.uSize,Ae=K.lowerSize;return"source"===E.kind?Ae/128:"composite"===E.kind?gi(Ae/128,K.upperSize/128,z.uSizeT):ce}function rd(E,z){var K=0,ce=0;if("constant"===E.kind)ce=E.layoutSize;else if("source"!==E.kind){var xe=E.interpolationType,We=xe?c(Ba.interpolationFactor(xe,z,E.minZoom,E.maxZoom),0,1):0;"camera"===E.kind?ce=gi(E.minSize,E.maxSize,We):K=We}return{uSizeT:K,uSize:ce}}br("Anchor",ch);var Ep=Object.freeze({__proto__:null,getSizeData:o0,evaluateSizeForFeature:Dy,evaluateSizeForZoom:rd,SIZE_PACK_FACTOR:128});function id(E,z,K,ce,xe){if(void 0===z.segment)return!0;for(var Ae=z,Re=z.segment+1,We=0;We>-K/2;){if(--Re<0)return!1;We-=E[Re].dist(Ae),Ae=E[Re]}We+=E[Re].dist(E[Re+1]),Re++;for(var ot=[],bt=0;We<K/2;){var Xt=E[Re],cn=E[Re+1];if(!cn)return!1;var nn=E[Re-1].angleTo(Xt)-Xt.angleTo(cn);for(nn=Math.abs((nn+3*Math.PI)%(2*Math.PI)-Math.PI),ot.push({distance:We,angleDelta:nn}),bt+=nn;We-ot[0].distance>ce;)bt-=ot.shift().angleDelta;if(bt>xe)return!1;Re++,We+=Xt.dist(cn)}return!0}function Ly(E){for(var z=0,K=0;K<E.length-1;K++)z+=E[K].dist(E[K+1]);return z}function Iy(E,z,K){return E?.6*z*K:0}function Dp(E,z){return Math.max(E?E.right-E.left:0,z?z.right-z.left:0)}function Py(E,z,K,ce,xe,Ae){for(var Re=Iy(K,xe,Ae),We=Dp(K,ce)*Ae,ot=0,bt=Ly(E)/2,kt=0;kt<E.length-1;kt++){var Xt=E[kt],cn=E[kt+1],nn=Xt.dist(cn);if(ot+nn>bt){var vn=(bt-ot)/nn,Pn=gi(Xt.x,cn.x,vn),Xn=gi(Xt.y,cn.y,vn),Yn=new ch(Pn,Xn,cn.angleTo(Xt),kt);return Yn._round(),!Re||id(E,Yn,We,Re,z)?Yn:void 0}ot+=nn}}function Oy(E,z,K,ce,xe,Ae,Re,We,ot){var bt=Iy(ce,Ae,Re),kt=Dp(ce,xe),Xt=kt*Re,cn=0===E[0].x||E[0].x===ot||0===E[0].y||E[0].y===ot;return z-Xt<z/4&&(z=Xt+z/4),function nn(vn,Pn,Xn,Yn,ar,lr,mr,Pr,Br){for(var ui=lr/2,ni=Ly(vn),yi=0,Ei=Pn-Xn,Pi=[],_i=0;_i<vn.length-1;_i++){for(var Ui=vn[_i],zi=vn[_i+1],Li=Ui.dist(zi),za=zi.angleTo(Ui);Ei+Xn<yi+Li;){var La=((Ei+=Xn)-yi)/Li,Ha=gi(Ui.x,zi.x,La),$i=gi(Ui.y,zi.y,La);if(Ha>=0&&Ha<Br&&$i>=0&&$i<Br&&Ei-ui>=0&&Ei+ui<=ni){var Ia=new ch(Ha,$i,za,_i);Ia._round(),Yn&&!id(vn,Ia,lr,Yn,ar)||Pi.push(Ia)}}yi+=Li}return Pr||Pi.length||mr||(Pi=nn(vn,yi/2,Xn,Yn,ar,lr,mr,!0,Br)),Pi}(E,cn?z/2*We%z:(kt/2+2*Ae)*Re*We%z,z,bt,K,Xt,cn,!1,ot)}function s0(E,z,K,ce,xe){for(var Ae=[],Re=0;Re<E.length;Re++)for(var We=E[Re],ot=void 0,bt=0;bt<We.length-1;bt++){var kt=We[bt],Xt=We[bt+1];kt.x<z&&Xt.x<z||(kt.x<z?kt=new i(z,kt.y+(z-kt.x)/(Xt.x-kt.x)*(Xt.y-kt.y))._round():Xt.x<z&&(Xt=new i(z,kt.y+(z-kt.x)/(Xt.x-kt.x)*(Xt.y-kt.y))._round()),kt.y<K&&Xt.y<K||(kt.y<K?kt=new i(kt.x+(K-kt.y)/(Xt.y-kt.y)*(Xt.x-kt.x),K)._round():Xt.y<K&&(Xt=new i(kt.x+(K-kt.y)/(Xt.y-kt.y)*(Xt.x-kt.x),K)._round()),kt.x>=ce&&Xt.x>=ce||(kt.x>=ce?kt=new i(ce,kt.y+(ce-kt.x)/(Xt.x-kt.x)*(Xt.y-kt.y))._round():Xt.x>=ce&&(Xt=new i(ce,kt.y+(ce-kt.x)/(Xt.x-kt.x)*(Xt.y-kt.y))._round()),kt.y>=xe&&Xt.y>=xe||(kt.y>=xe?kt=new i(kt.x+(xe-kt.y)/(Xt.y-kt.y)*(Xt.x-kt.x),xe)._round():Xt.y>=xe&&(Xt=new i(kt.x+(xe-kt.y)/(Xt.y-kt.y)*(Xt.x-kt.x),xe)._round()),ot&&kt.equals(ot[ot.length-1])||Ae.push(ot=[kt]),ot.push(Xt)))))}return Ae}function l0(E,z,K,ce){var xe=[],Ae=E.image,Re=Ae.pixelRatio,We=Ae.paddedRect.w-2,ot=Ae.paddedRect.h-2,bt=E.right-E.left,kt=E.bottom-E.top,Xt=Ae.stretchX||[[0,We]],cn=Ae.stretchY||[[0,ot]],nn=function(Ia,wo){return Ia+wo[1]-wo[0]},vn=Xt.reduce(nn,0),Pn=cn.reduce(nn,0),Xn=We-vn,Yn=ot-Pn,ar=0,lr=vn,mr=0,Pr=Pn,Br=0,ui=Xn,ni=0,yi=Yn;if(Ae.content&&ce){var Ei=Ae.content;ar=fh(Xt,0,Ei[0]),mr=fh(cn,0,Ei[1]),lr=fh(Xt,Ei[0],Ei[2]),Pr=fh(cn,Ei[1],Ei[3]),Br=Ei[0]-ar,ni=Ei[1]-mr,ui=Ei[2]-Ei[0]-lr,yi=Ei[3]-Ei[1]-Pr}var Pi=function(Ia,wo,so,So){var lo=dh(Ia.stretch-ar,lr,bt,E.left),Wo=Df(Ia.fixed-Br,ui,Ia.stretch,vn),Fo=dh(wo.stretch-mr,Pr,kt,E.top),js=Df(wo.fixed-ni,yi,wo.stretch,Pn),Ds=dh(so.stretch-ar,lr,bt,E.left),Vs=Df(so.fixed-Br,ui,so.stretch,vn),sl=dh(So.stretch-mr,Pr,kt,E.top),Us=Df(So.fixed-ni,yi,So.stretch,Pn),as=new i(lo,Fo),$s=new i(Ds,Fo),is=new i(Ds,sl),As=new i(lo,sl),Aa=new i(Wo/Re,js/Re),Ga=new i(Vs/Re,Us/Re),Jo=z*Math.PI/180;if(Jo){var to=Math.sin(Jo),Yo=Math.cos(Jo),Eo=[Yo,-to,to,Yo];as._matMult(Eo),$s._matMult(Eo),As._matMult(Eo),is._matMult(Eo)}var Xa=Ia.stretch+Ia.fixed,wl=wo.stretch+wo.fixed;return{tl:as,tr:$s,bl:As,br:is,tex:{x:Ae.paddedRect.x+1+Xa,y:Ae.paddedRect.y+1+wl,w:so.stretch+so.fixed-Xa,h:So.stretch+So.fixed-wl},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Aa,pixelOffsetBR:Ga,minFontScaleX:ui/Re/bt,minFontScaleY:yi/Re/kt,isSDF:K}};if(ce&&(Ae.stretchX||Ae.stretchY))for(var _i=hh(Xt,Xn,vn),Ui=hh(cn,Yn,Pn),zi=0;zi<_i.length-1;zi++)for(var Li=_i[zi],za=_i[zi+1],La=0;La<Ui.length-1;La++)xe.push(Pi(Li,Ui[La],za,Ui[La+1]));else xe.push(Pi({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:We+1},{fixed:0,stretch:ot+1}));return xe}function fh(E,z,K){for(var ce=0,xe=0,Ae=E;xe<Ae.length;xe+=1){var Re=Ae[xe];ce+=Math.max(z,Math.min(K,Re[1]))-Math.max(z,Math.min(K,Re[0]))}return ce}function hh(E,z,K){for(var ce=[{fixed:-1,stretch:0}],xe=0,Ae=E;xe<Ae.length;xe+=1){var Re=Ae[xe],We=Re[0],ot=Re[1],bt=ce[ce.length-1];ce.push({fixed:We-bt.stretch,stretch:bt.stretch}),ce.push({fixed:We-bt.stretch,stretch:bt.stretch+(ot-We)})}return ce.push({fixed:z+1,stretch:K}),ce}function dh(E,z,K,ce){return E/z*K+ce}function Df(E,z,K,ce){return E-z*K/ce}var ad=function(E,z,K,ce,xe,Ae,Re,We,ot,bt){if(this.boxStartIndex=E.length,ot){var kt=Ae.top,Xt=Ae.bottom,cn=Ae.collisionPadding;cn&&(kt-=cn[1],Xt+=cn[3]);var nn=Xt-kt;nn>0&&(nn=Math.max(10,nn),this.circleDiameter=nn)}else{var vn=Ae.top*Re-We,Pn=Ae.bottom*Re+We,Xn=Ae.left*Re-We,Yn=Ae.right*Re+We,ar=Ae.collisionPadding;if(ar&&(Xn-=ar[0]*Re,vn-=ar[1]*Re,Yn+=ar[2]*Re,Pn+=ar[3]*Re),bt){var lr=new i(Xn,vn),mr=new i(Yn,vn),Pr=new i(Xn,Pn),Br=new i(Yn,Pn),ui=bt*Math.PI/180;lr._rotate(ui),mr._rotate(ui),Pr._rotate(ui),Br._rotate(ui),Xn=Math.min(lr.x,mr.x,Pr.x,Br.x),Yn=Math.max(lr.x,mr.x,Pr.x,Br.x),vn=Math.min(lr.y,mr.y,Pr.y,Br.y),Pn=Math.max(lr.y,mr.y,Pr.y,Br.y)}E.emplaceBack(z.x,z.y,Xn,vn,Yn,Pn,K,ce,xe)}this.boxEndIndex=E.length},_o=function(E,z){if(void 0===E&&(E=[]),void 0===z&&(z=Ry),this.data=E,this.length=this.data.length,this.compare=z,this.length>0)for(var K=(this.length>>1)-1;K>=0;K--)this._down(K)};function Ry(E,z){return E<z?-1:E>z?1:0}function Fy(E,z,K){void 0===z&&(z=1),void 0===K&&(K=!1);for(var ce=1/0,xe=1/0,Ae=-1/0,Re=-1/0,We=E[0],ot=0;ot<We.length;ot++){var bt=We[ot];(!ot||bt.x<ce)&&(ce=bt.x),(!ot||bt.y<xe)&&(xe=bt.y),(!ot||bt.x>Ae)&&(Ae=bt.x),(!ot||bt.y>Re)&&(Re=bt.y)}var cn=Math.min(Ae-ce,Re-xe),nn=cn/2,vn=new _o([],Lp);if(0===cn)return new i(ce,xe);for(var Pn=ce;Pn<Ae;Pn+=cn)for(var Xn=xe;Xn<Re;Xn+=cn)vn.push(new Yc(Pn+nn,Xn+nn,nn,E));for(var Yn=function(mr){for(var Pr=0,Br=0,ui=0,ni=mr[0],yi=0,Ei=ni.length,Pi=Ei-1;yi<Ei;Pi=yi++){var _i=ni[yi],Ui=ni[Pi],zi=_i.x*Ui.y-Ui.x*_i.y;Br+=(_i.x+Ui.x)*zi,ui+=(_i.y+Ui.y)*zi,Pr+=3*zi}return new Yc(Br/Pr,ui/Pr,0,mr)}(E),ar=vn.length;vn.length;){var lr=vn.pop();(lr.d>Yn.d||!Yn.d)&&(Yn=lr,K&&console.log("found best %d after %d probes",Math.round(1e4*lr.d)/1e4,ar)),lr.max-Yn.d<=z||(vn.push(new Yc(lr.p.x-(nn=lr.h/2),lr.p.y-nn,nn,E)),vn.push(new Yc(lr.p.x+nn,lr.p.y-nn,nn,E)),vn.push(new Yc(lr.p.x-nn,lr.p.y+nn,nn,E)),vn.push(new Yc(lr.p.x+nn,lr.p.y+nn,nn,E)),ar+=4)}return K&&(console.log("num probes: "+ar),console.log("best distance: "+Yn.d)),Yn.p}function Lp(E,z){return z.max-E.max}function Yc(E,z,K,ce){this.p=new i(E,z),this.h=K,this.d=function(xe,Ae){for(var Re=!1,We=1/0,ot=0;ot<Ae.length;ot++)for(var bt=Ae[ot],kt=0,Xt=bt.length,cn=Xt-1;kt<Xt;cn=kt++){var nn=bt[kt],vn=bt[cn];nn.y>xe.y!=vn.y>xe.y&&xe.x<(vn.x-nn.x)*(xe.y-nn.y)/(vn.y-nn.y)+nn.x&&(Re=!Re),We=Math.min(We,Gu(xe,nn,vn))}return(Re?1:-1)*Math.sqrt(We)}(this.p,ce),this.max=this.d+this.h*Math.SQRT2}_o.prototype.push=function(E){this.data.push(E),this.length++,this._up(this.length-1)},_o.prototype.pop=function(){if(0!==this.length){var E=this.data[0],z=this.data.pop();return this.length--,this.length>0&&(this.data[0]=z,this._down(0)),E}},_o.prototype.peek=function(){return this.data[0]},_o.prototype._up=function(E){for(var z=this.data,K=this.compare,ce=z[E];E>0;){var xe=E-1>>1,Ae=z[xe];if(K(ce,Ae)>=0)break;z[E]=Ae,E=xe}z[E]=ce},_o.prototype._down=function(E){for(var z=this.data,K=this.compare,ce=this.length>>1,xe=z[E];E<ce;){var Ae=1+(E<<1),Re=z[Ae],We=Ae+1;if(We<this.length&&K(z[We],Re)<0&&(Ae=We,Re=z[We]),K(Re,xe)>=0)break;z[E]=Re,E=Ae}z[E]=xe};var Ip=Number.POSITIVE_INFINITY;function u0(E,z){return z[1]!==Ip?function(K,ce,xe){var Ae=0,Re=0;switch(ce=Math.abs(ce),xe=Math.abs(xe),K){case"top-right":case"top-left":case"top":Re=xe-7;break;case"bottom-right":case"bottom-left":case"bottom":Re=7-xe}switch(K){case"top-right":case"bottom-right":case"right":Ae=-ce;break;case"top-left":case"bottom-left":case"left":Ae=ce}return[Ae,Re]}(E,z[0],z[1]):function(K,ce){var xe=0,Ae=0;ce<0&&(ce=0);var Re=ce/Math.sqrt(2);switch(K){case"top-right":case"top-left":Ae=Re-7;break;case"bottom-right":case"bottom-left":Ae=7-Re;break;case"bottom":Ae=7-ce;break;case"top":Ae=ce-7}switch(K){case"top-right":case"bottom-right":xe=-Re;break;case"top-left":case"bottom-left":xe=Re;break;case"left":xe=ce;break;case"right":xe=-ce}return[xe,Ae]}(E,z[0])}function Pp(E){switch(E){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function c0(E,z,K,ce,xe,Ae,Re,We,ot,bt,kt,Xt,cn,nn,vn){var Pn=function(mr,Pr,Br,ui,ni,yi,Ei,Pi){for(var _i=ui.layout.get("text-rotate").evaluate(yi,{})*Math.PI/180,Ui=[],zi=0,Li=Pr.positionedLines;zi<Li.length;zi+=1)for(var za=Li[zi],La=0,Ha=za.positionedGlyphs;La<Ha.length;La+=1){var $i=Ha[La];if($i.rect){var Ia=$i.rect||{},wo=4,so=!0,So=1,lo=0,Wo=(ni||Pi)&&$i.vertical,Fo=$i.metrics.advance*$i.scale/2;if(Pi&&Pr.verticalizable&&(lo=za.lineOffset/2-($i.imageName?-(24-$i.metrics.width*$i.scale)/2:24*($i.scale-1))),$i.imageName){var Vs=Ei[$i.imageName];so=Vs.sdf,wo=1/(So=Vs.pixelRatio)}var sl=ni?[$i.x+Fo,$i.y]:[0,0],Us=ni?[0,0]:[$i.x+Fo+Br[0],$i.y+Br[1]-lo],as=[0,0];Wo&&(as=Us,Us=[0,0]);var $s=($i.metrics.left-wo)*$i.scale-Fo+Us[0],is=(-$i.metrics.top-wo)*$i.scale+Us[1],As=$s+Ia.w*$i.scale/So,Aa=is+Ia.h*$i.scale/So,Ga=new i($s,is),Jo=new i(As,is),to=new i($s,Aa),Yo=new i(As,Aa);if(Wo){var Eo=new i(-Fo,Fo- -17),Xa=-Math.PI/2,Qo=12-Fo,Ol=new i(22-Qo,-($i.imageName?Qo:0)),Ks=new(Function.prototype.bind.apply(i,[null].concat(as)));Ga._rotateAround(Xa,Eo)._add(Ol)._add(Ks),Jo._rotateAround(Xa,Eo)._add(Ol)._add(Ks),to._rotateAround(Xa,Eo)._add(Ol)._add(Ks),Yo._rotateAround(Xa,Eo)._add(Ol)._add(Ks)}if(_i){var Au=Math.sin(_i),Xu=Math.cos(_i),Ls=[Xu,-Au,Au,Xu];Ga._matMult(Ls),Jo._matMult(Ls),to._matMult(Ls),Yo._matMult(Ls)}var ha=new i(0,0),er=new i(0,0);Ui.push({tl:Ga,tr:Jo,bl:to,br:Yo,tex:Ia,writingMode:Pr.writingMode,glyphOffset:sl,sectionIndex:$i.sectionIndex,isSDF:so,pixelOffsetTL:ha,pixelOffsetBR:er,minFontScaleX:0,minFontScaleY:0})}}return Ui}(0,K,We,xe,Ae,Re,ce,E.allowVerticalPlacement),Xn=E.textSizeData,Yn=null;"source"===Xn.kind?(Yn=[128*xe.layout.get("text-size").evaluate(Re,{})])[0]>32640&&D(E.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):"composite"===Xn.kind&&((Yn=[128*nn.compositeTextSizes[0].evaluate(Re,{},vn),128*nn.compositeTextSizes[1].evaluate(Re,{},vn)])[0]>32640||Yn[1]>32640)&&D(E.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),E.addSymbols(E.text,Pn,Yn,We,Ae,Re,bt,z,ot.lineStartIndex,ot.lineLength,cn,vn);for(var ar=0,lr=kt;ar<lr.length;ar+=1)Xt[lr[ar]]=E.text.placedSymbolArray.length-1;return 4*Pn.length}function f0(E){for(var z in E)return E[z];return null}function Yx(E,z,K,ce){var xe=E.compareText;if(z in xe){for(var Ae=xe[z],Re=Ae.length-1;Re>=0;Re--)if(ce.dist(Ae[Re])<K)return!0}else xe[z]=[];return xe[z].push(ce),!1}var Zx=Af.VectorTileFeature.types,ph=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function al(E,z,K,ce,xe,Ae,Re,We,ot,bt,kt,Xt,cn){var nn=We?Math.min(32640,Math.round(We[0])):0,vn=We?Math.min(32640,Math.round(We[1])):0;E.emplaceBack(z,K,Math.round(32*ce),Math.round(32*xe),Ae,Re,(nn<<1)+(ot?1:0),vn,16*bt,16*kt,256*Xt,256*cn)}function gh(E,z,K){E.emplaceBack(z.x,z.y,K),E.emplaceBack(z.x,z.y,K),E.emplaceBack(z.x,z.y,K),E.emplaceBack(z.x,z.y,K)}function h0(E){for(var z=0,K=E.sections;z<K.length;z+=1)if(Mi(K[z].text))return!0;return!1}var Zc=function(E){this.layoutVertexArray=new Ll,this.indexArray=new $o,this.programConfigurations=E,this.segments=new Zt,this.dynamicLayoutVertexArray=new hs,this.opacityVertexArray=new ku,this.placedSymbolArray=new Xe};Zc.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length},Zc.prototype.upload=function(E,z,K,ce){this.isEmpty()||(K&&(this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,Uc.members),this.indexBuffer=E.createIndexBuffer(this.indexArray,z),this.dynamicLayoutVertexBuffer=E.createVertexBuffer(this.dynamicLayoutVertexArray,Ty.members,!0),this.opacityVertexBuffer=E.createVertexBuffer(this.opacityVertexArray,ph,!0),this.opacityVertexBuffer.itemSize=1),(K||ce)&&this.programConfigurations.upload(E))},Zc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},br("SymbolBuffers",Zc);var Bs=function(E,z,K){this.layoutVertexArray=new E,this.layoutAttributes=z,this.indexArray=new K,this.segments=new Zt,this.collisionVertexArray=new Nl};Bs.prototype.upload=function(E){this.layoutVertexBuffer=E.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=E.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=E.createVertexBuffer(this.collisionVertexArray,qx.members,!0)},Bs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},br("CollisionBuffers",Bs);var Ya=function(E){this.collisionBoxArray=E.collisionBoxArray,this.zoom=E.zoom,this.overscaling=E.overscaling,this.layers=E.layers,this.layerIds=this.layers.map(function(Re){return Re.id}),this.index=E.index,this.pixelRatio=E.pixelRatio,this.sourceLayerIndex=E.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=_f([]),this.placementViewportMatrix=_f([]);var z=this.layers[0]._unevaluatedLayout._values;this.textSizeData=o0(this.zoom,z["text-size"]),this.iconSizeData=o0(this.zoom,z["icon-size"]);var K=this.layers[0].layout,ce=K.get("symbol-sort-key"),xe=K.get("symbol-z-order");this.sortFeaturesByKey="viewport-y"!==xe&&void 0!==ce.constantOr(1),this.sortFeaturesByY=("viewport-y"===xe||"auto"===xe&&!this.sortFeaturesByKey)&&(K.get("text-allow-overlap")||K.get("icon-allow-overlap")||K.get("text-ignore-placement")||K.get("icon-ignore-placement")),"point"===K.get("symbol-placement")&&(this.writingModes=K.get("text-writing-mode").map(function(Re){return Pl[Re]})),this.stateDependentLayerIds=this.layers.filter(function(Re){return Re.isStateDependent()}).map(function(Re){return Re.id}),this.sourceID=E.sourceID};Ya.prototype.createArrays=function(){this.text=new Zc(new ro(Uc.members,this.layers,this.zoom,function(E){return/^text/.test(E)})),this.icon=new Zc(new ro(Uc.members,this.layers,this.zoom,function(E){return/^icon/.test(E)})),this.glyphOffsetArray=new Dt,this.lineVertexArray=new Ft,this.symbolInstances=new dt},Ya.prototype.calculateGlyphDependencies=function(E,z,K,ce,xe){for(var Ae=0;Ae<E.length;Ae++)if(z[E.charCodeAt(Ae)]=!0,(K||ce)&&xe){var Re=sh[E.charAt(Ae)];Re&&(z[Re.charCodeAt(0)]=!0)}},Ya.prototype.populate=function(E,z,K){var ce=this.layers[0],xe=ce.layout,Ae=xe.get("text-font"),Re=xe.get("text-field"),We=xe.get("icon-image"),ot=("constant"!==Re.value.kind||Re.value.value instanceof Un&&!Re.value.value.isEmpty()||Re.value.value.toString().length>0)&&("constant"!==Ae.value.kind||Ae.value.value.length>0),bt="constant"!==We.value.kind||!!We.value.value||Object.keys(We.parameters).length>0,kt=xe.get("symbol-sort-key");if(this.features=[],ot||bt){for(var Xt=z.iconDependencies,cn=z.glyphDependencies,nn=z.availableImages,vn=new Qa(this.zoom),Pn=0,Xn=E;Pn<Xn.length;Pn+=1){var Yn=Xn[Pn],ar=Yn.feature,lr=Yn.id,mr=Yn.index,Pr=Yn.sourceLayerIndex,Br=ce._featureFilter.needGeometry,ui={type:ar.type,id:lr,properties:ar.properties,geometry:Br?xo(ar):[]};if(ce._featureFilter.filter(vn,ui,K)){Br||(ui.geometry=xo(ar));var ni=void 0;if(ot){var yi=ce.getValueAndResolveTokens("text-field",ui,K,nn),Ei=Un.factory(yi);h0(Ei)&&(this.hasRTLText=!0),(!this.hasRTLText||"unavailable"===ts()||this.hasRTLText&&bs.isParsed())&&(ni=Wx(Ei,ce,ui))}var Pi=void 0;if(bt){var _i=ce.getValueAndResolveTokens("icon-image",ui,K,nn);Pi=_i instanceof In?_i:In.fromString(_i)}if(ni||Pi){var Ui=this.sortFeaturesByKey?kt.evaluate(ui,{},K):void 0,zi={id:lr,text:ni,icon:Pi,index:mr,sourceLayerIndex:Pr,geometry:xo(ar),properties:ar.properties,type:Zx[ar.type],sortKey:Ui};if(this.features.push(zi),Pi&&(Xt[Pi.name]=!0),ni){var Li=Ae.evaluate(ui,{},K).join(","),za="map"===xe.get("text-rotation-alignment")&&"point"!==xe.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Pl.vertical)>=0;for(var La=0,Ha=ni.sections;La<Ha.length;La+=1){var $i=Ha[La];if($i.image)Xt[$i.image.name]=!0;else{var Ia=Ta(ni.toString()),wo=$i.fontStack||Li,so=cn[wo]=cn[wo]||{};this.calculateGlyphDependencies($i.text,so,za,this.allowVerticalPlacement,Ia)}}}}}}"line"===xe.get("symbol-placement")&&(this.features=function(So){var lo={},Wo={},Fo=[],js=0;function Ds(Yo){Fo.push(So[Yo]),js++}function Vs(Yo,Eo,Xa){var Qo=Wo[Yo];return delete Wo[Yo],Wo[Eo]=Qo,Fo[Qo].geometry[0].pop(),Fo[Qo].geometry[0]=Fo[Qo].geometry[0].concat(Xa[0]),Qo}function sl(Yo,Eo,Xa){var Qo=lo[Eo];return delete lo[Eo],lo[Yo]=Qo,Fo[Qo].geometry[0].shift(),Fo[Qo].geometry[0]=Xa[0].concat(Fo[Qo].geometry[0]),Qo}function Us(Yo,Eo,Xa){var Qo=Xa?Eo[0][Eo[0].length-1]:Eo[0][0];return Yo+":"+Qo.x+":"+Qo.y}for(var as=0;as<So.length;as++){var $s=So[as],is=$s.geometry,As=$s.text?$s.text.toString():null;if(As){var Aa=Us(As,is),Ga=Us(As,is,!0);if(Aa in Wo&&Ga in lo&&Wo[Aa]!==lo[Ga]){var Jo=sl(Aa,Ga,is),to=Vs(Aa,Ga,Fo[Jo].geometry);delete lo[Aa],delete Wo[Ga],Wo[Us(As,Fo[to].geometry,!0)]=to,Fo[Jo].geometry=null}else Aa in Wo?Vs(Aa,Ga,is):Ga in lo?sl(Aa,Ga,is):(Ds(as),lo[Aa]=js-1,Wo[Ga]=js-1)}else Ds(as)}return Fo.filter(function(Yo){return Yo.geometry})}(this.features)),this.sortFeaturesByKey&&this.features.sort(function(So,lo){return So.sortKey-lo.sortKey})}},Ya.prototype.update=function(E,z,K){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(E,z,this.layers,K),this.icon.programConfigurations.updatePaintArrays(E,z,this.layers,K))},Ya.prototype.isEmpty=function(){return 0===this.symbolInstances.length&&!this.hasRTLText},Ya.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},Ya.prototype.upload=function(E){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(E),this.iconCollisionBox.upload(E)),this.text.upload(E,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(E,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},Ya.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},Ya.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},Ya.prototype.addToLineVertexArray=function(E,z){var K=this.lineVertexArray.length;if(void 0!==E.segment){for(var ce=E.dist(z[E.segment+1]),xe=E.dist(z[E.segment]),Ae={},Re=E.segment+1;Re<z.length;Re++)Ae[Re]={x:z[Re].x,y:z[Re].y,tileUnitDistanceFromAnchor:ce},Re<z.length-1&&(ce+=z[Re+1].dist(z[Re]));for(var We=E.segment||0;We>=0;We--)Ae[We]={x:z[We].x,y:z[We].y,tileUnitDistanceFromAnchor:xe},We>0&&(xe+=z[We-1].dist(z[We]));for(var ot=0;ot<z.length;ot++){var bt=Ae[ot];this.lineVertexArray.emplaceBack(bt.x,bt.y,bt.tileUnitDistanceFromAnchor)}}return{lineStartIndex:K,lineLength:this.lineVertexArray.length-K}},Ya.prototype.addSymbols=function(E,z,K,ce,xe,Ae,Re,We,ot,bt,kt,Xt){for(var cn=E.indexArray,nn=E.layoutVertexArray,vn=E.segments.prepareSegment(4*z.length,nn,cn,Ae.sortKey),Pn=this.glyphOffsetArray.length,Xn=vn.vertexLength,Yn=this.allowVerticalPlacement&&Re===Pl.vertical?Math.PI/2:0,ar=Ae.text&&Ae.text.sections,lr=0;lr<z.length;lr++){var mr=z[lr],Pr=mr.tl,Br=mr.tr,ui=mr.bl,ni=mr.br,yi=mr.tex,Ei=mr.pixelOffsetTL,Pi=mr.pixelOffsetBR,_i=mr.minFontScaleX,Ui=mr.minFontScaleY,zi=mr.glyphOffset,Li=mr.isSDF,za=mr.sectionIndex,La=vn.vertexLength,Ha=zi[1];al(nn,We.x,We.y,Pr.x,Ha+Pr.y,yi.x,yi.y,K,Li,Ei.x,Ei.y,_i,Ui),al(nn,We.x,We.y,Br.x,Ha+Br.y,yi.x+yi.w,yi.y,K,Li,Pi.x,Ei.y,_i,Ui),al(nn,We.x,We.y,ui.x,Ha+ui.y,yi.x,yi.y+yi.h,K,Li,Ei.x,Pi.y,_i,Ui),al(nn,We.x,We.y,ni.x,Ha+ni.y,yi.x+yi.w,yi.y+yi.h,K,Li,Pi.x,Pi.y,_i,Ui),gh(E.dynamicLayoutVertexArray,We,Yn),cn.emplaceBack(La,La+1,La+2),cn.emplaceBack(La+1,La+2,La+3),vn.vertexLength+=4,vn.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(zi[0]),lr!==z.length-1&&za===z[lr+1].sectionIndex||E.programConfigurations.populatePaintArrays(nn.length,Ae,Ae.index,{},Xt,ar&&ar[za])}E.placedSymbolArray.emplaceBack(We.x,We.y,Pn,this.glyphOffsetArray.length-Pn,Xn,ot,bt,We.segment,K?K[0]:0,K?K[1]:0,ce[0],ce[1],Re,0,!1,0,kt)},Ya.prototype._addCollisionDebugVertex=function(E,z,K,ce,xe,Ae){return z.emplaceBack(0,0),E.emplaceBack(K.x,K.y,ce,xe,Math.round(Ae.x),Math.round(Ae.y))},Ya.prototype.addCollisionDebugVertices=function(E,z,K,ce,xe,Ae,Re){var We=xe.segments.prepareSegment(4,xe.layoutVertexArray,xe.indexArray),ot=We.vertexLength,bt=xe.layoutVertexArray,kt=xe.collisionVertexArray,Xt=Re.anchorX,cn=Re.anchorY;this._addCollisionDebugVertex(bt,kt,Ae,Xt,cn,new i(E,z)),this._addCollisionDebugVertex(bt,kt,Ae,Xt,cn,new i(K,z)),this._addCollisionDebugVertex(bt,kt,Ae,Xt,cn,new i(K,ce)),this._addCollisionDebugVertex(bt,kt,Ae,Xt,cn,new i(E,ce)),We.vertexLength+=4;var nn=xe.indexArray;nn.emplaceBack(ot,ot+1),nn.emplaceBack(ot+1,ot+2),nn.emplaceBack(ot+2,ot+3),nn.emplaceBack(ot+3,ot),We.primitiveLength+=4},Ya.prototype.addDebugCollisionBoxes=function(E,z,K,ce){for(var xe=E;xe<z;xe++){var Ae=this.collisionBoxArray.get(xe);this.addCollisionDebugVertices(Ae.x1,Ae.y1,Ae.x2,Ae.y2,ce?this.textCollisionBox:this.iconCollisionBox,Ae.anchorPoint,K)}},Ya.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Bs(su,kp.members,H),this.iconCollisionBox=new Bs(su,kp.members,H);for(var E=0;E<this.symbolInstances.length;E++){var z=this.symbolInstances.get(E);this.addDebugCollisionBoxes(z.textBoxStartIndex,z.textBoxEndIndex,z,!0),this.addDebugCollisionBoxes(z.verticalTextBoxStartIndex,z.verticalTextBoxEndIndex,z,!0),this.addDebugCollisionBoxes(z.iconBoxStartIndex,z.iconBoxEndIndex,z,!1),this.addDebugCollisionBoxes(z.verticalIconBoxStartIndex,z.verticalIconBoxEndIndex,z,!1)}},Ya.prototype._deserializeCollisionBoxesForSymbol=function(E,z,K,ce,xe,Ae,Re,We,ot){for(var bt={},kt=z;kt<K;kt++){var Xt=E.get(kt);bt.textBox={x1:Xt.x1,y1:Xt.y1,x2:Xt.x2,y2:Xt.y2,anchorPointX:Xt.anchorPointX,anchorPointY:Xt.anchorPointY},bt.textFeatureIndex=Xt.featureIndex;break}for(var cn=ce;cn<xe;cn++){var nn=E.get(cn);bt.verticalTextBox={x1:nn.x1,y1:nn.y1,x2:nn.x2,y2:nn.y2,anchorPointX:nn.anchorPointX,anchorPointY:nn.anchorPointY},bt.verticalTextFeatureIndex=nn.featureIndex;break}for(var vn=Ae;vn<Re;vn++){var Pn=E.get(vn);bt.iconBox={x1:Pn.x1,y1:Pn.y1,x2:Pn.x2,y2:Pn.y2,anchorPointX:Pn.anchorPointX,anchorPointY:Pn.anchorPointY},bt.iconFeatureIndex=Pn.featureIndex;break}for(var Xn=We;Xn<ot;Xn++){var Yn=E.get(Xn);bt.verticalIconBox={x1:Yn.x1,y1:Yn.y1,x2:Yn.x2,y2:Yn.y2,anchorPointX:Yn.anchorPointX,anchorPointY:Yn.anchorPointY},bt.verticalIconFeatureIndex=Yn.featureIndex;break}return bt},Ya.prototype.deserializeCollisionBoxes=function(E){this.collisionArrays=[];for(var z=0;z<this.symbolInstances.length;z++){var K=this.symbolInstances.get(z);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(E,K.textBoxStartIndex,K.textBoxEndIndex,K.verticalTextBoxStartIndex,K.verticalTextBoxEndIndex,K.iconBoxStartIndex,K.iconBoxEndIndex,K.verticalIconBoxStartIndex,K.verticalIconBoxEndIndex))}},Ya.prototype.hasTextData=function(){return this.text.segments.get().length>0},Ya.prototype.hasIconData=function(){return this.icon.segments.get().length>0},Ya.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},Ya.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},Ya.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},Ya.prototype.addIndicesForPlacedSymbol=function(E,z){for(var K=E.placedSymbolArray.get(z),ce=K.vertexStartIndex+4*K.numGlyphs,xe=K.vertexStartIndex;xe<ce;xe+=4)E.indexArray.emplaceBack(xe,xe+1,xe+2),E.indexArray.emplaceBack(xe+1,xe+2,xe+3)},Ya.prototype.getSortedSymbolIndexes=function(E){if(this.sortedAngle===E&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;for(var z=Math.sin(E),K=Math.cos(E),ce=[],xe=[],Ae=[],Re=0;Re<this.symbolInstances.length;++Re){Ae.push(Re);var We=this.symbolInstances.get(Re);ce.push(0|Math.round(z*We.anchorX+K*We.anchorY)),xe.push(We.featureIndex)}return Ae.sort(function(ot,bt){return ce[ot]-ce[bt]||xe[bt]-xe[ot]}),Ae},Ya.prototype.addToSortKeyRanges=function(E,z){var K=this.sortKeyRanges[this.sortKeyRanges.length-1];K&&K.sortKey===z?K.symbolInstanceEnd=E+1:this.sortKeyRanges.push({sortKey:z,symbolInstanceStart:E,symbolInstanceEnd:E+1})},Ya.prototype.sortFeatures=function(E){var z=this;if(this.sortFeaturesByY&&this.sortedAngle!==E&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(E),this.sortedAngle=E,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var K=0,ce=this.symbolInstanceIndexes;K<ce.length;K+=1){var Ae=this.symbolInstances.get(ce[K]);this.featureSortOrder.push(Ae.featureIndex),[Ae.rightJustifiedTextSymbolIndex,Ae.centerJustifiedTextSymbolIndex,Ae.leftJustifiedTextSymbolIndex].forEach(function(Re,We,ot){Re>=0&&ot.indexOf(Re)===We&&z.addIndicesForPlacedSymbol(z.text,Re)}),Ae.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,Ae.verticalPlacedTextSymbolIndex),Ae.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ae.placedIconSymbolIndex),Ae.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,Ae.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},br("SymbolBucket",Ya,{omit:["layers","collisionBoxArray","features","compareText"]}),Ya.MAX_GLYPHS=65535,Ya.addDynamicAttributes=gh;var Op=new nl({"symbol-placement":new Ri(Be.layout_symbol["symbol-placement"]),"symbol-spacing":new Ri(Be.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Ri(Be.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Yi(Be.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Ri(Be.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Ri(Be.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Ri(Be.layout_symbol["icon-ignore-placement"]),"icon-optional":new Ri(Be.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Ri(Be.layout_symbol["icon-rotation-alignment"]),"icon-size":new Yi(Be.layout_symbol["icon-size"]),"icon-text-fit":new Ri(Be.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Ri(Be.layout_symbol["icon-text-fit-padding"]),"icon-image":new Yi(Be.layout_symbol["icon-image"]),"icon-rotate":new Yi(Be.layout_symbol["icon-rotate"]),"icon-padding":new Ri(Be.layout_symbol["icon-padding"]),"icon-keep-upright":new Ri(Be.layout_symbol["icon-keep-upright"]),"icon-offset":new Yi(Be.layout_symbol["icon-offset"]),"icon-anchor":new Yi(Be.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Ri(Be.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Ri(Be.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Ri(Be.layout_symbol["text-rotation-alignment"]),"text-field":new Yi(Be.layout_symbol["text-field"]),"text-font":new Yi(Be.layout_symbol["text-font"]),"text-size":new Yi(Be.layout_symbol["text-size"]),"text-max-width":new Yi(Be.layout_symbol["text-max-width"]),"text-line-height":new Ri(Be.layout_symbol["text-line-height"]),"text-letter-spacing":new Yi(Be.layout_symbol["text-letter-spacing"]),"text-justify":new Yi(Be.layout_symbol["text-justify"]),"text-radial-offset":new Yi(Be.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Ri(Be.layout_symbol["text-variable-anchor"]),"text-anchor":new Yi(Be.layout_symbol["text-anchor"]),"text-max-angle":new Ri(Be.layout_symbol["text-max-angle"]),"text-writing-mode":new Ri(Be.layout_symbol["text-writing-mode"]),"text-rotate":new Yi(Be.layout_symbol["text-rotate"]),"text-padding":new Ri(Be.layout_symbol["text-padding"]),"text-keep-upright":new Ri(Be.layout_symbol["text-keep-upright"]),"text-transform":new Yi(Be.layout_symbol["text-transform"]),"text-offset":new Yi(Be.layout_symbol["text-offset"]),"text-allow-overlap":new Ri(Be.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Ri(Be.layout_symbol["text-ignore-placement"]),"text-optional":new Ri(Be.layout_symbol["text-optional"])}),Rp={paint:new nl({"icon-opacity":new Yi(Be.paint_symbol["icon-opacity"]),"icon-color":new Yi(Be.paint_symbol["icon-color"]),"icon-halo-color":new Yi(Be.paint_symbol["icon-halo-color"]),"icon-halo-width":new Yi(Be.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Yi(Be.paint_symbol["icon-halo-blur"]),"icon-translate":new Ri(Be.paint_symbol["icon-translate"]),"icon-translate-anchor":new Ri(Be.paint_symbol["icon-translate-anchor"]),"text-opacity":new Yi(Be.paint_symbol["text-opacity"]),"text-color":new Yi(Be.paint_symbol["text-color"],{runtimeType:Wt,getOverride:function(E){return E.textColor},hasOverride:function(E){return!!E.textColor}}),"text-halo-color":new Yi(Be.paint_symbol["text-halo-color"]),"text-halo-width":new Yi(Be.paint_symbol["text-halo-width"]),"text-halo-blur":new Yi(Be.paint_symbol["text-halo-blur"]),"text-translate":new Ri(Be.paint_symbol["text-translate"]),"text-translate-anchor":new Ri(Be.paint_symbol["text-translate-anchor"])}),layout:Op},Lf=function(E){this.type=E.property.overrides?E.property.overrides.runtimeType:Nt,this.defaultValue=E};Lf.prototype.evaluate=function(E){if(E.formattedSection){var z=this.defaultValue.property.overrides;if(z&&z.hasOverride(E.formattedSection))return z.getOverride(E.formattedSection)}return E.feature&&E.featureState?this.defaultValue.evaluate(E.feature,E.featureState):this.defaultValue.property.specification.default},Lf.prototype.eachChild=function(E){this.defaultValue.isConstant()||E(this.defaultValue.value._styleExpression.expression)},Lf.prototype.outputDefined=function(){return!1},Lf.prototype.serialize=function(){return null},br("FormatSectionOverride",Lf,{omit:["defaultValue"]});var d0=function(E){function z(K){E.call(this,K,Rp)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.recalculate=function(K,ce){if(E.prototype.recalculate.call(this,K,ce),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){var xe=this.layout.get("text-writing-mode");if(xe){for(var Ae=[],Re=0,We=xe;Re<We.length;Re+=1){var ot=We[Re];Ae.indexOf(ot)<0&&Ae.push(ot)}this.layout._values["text-writing-mode"]=Ae}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},z.prototype.getValueAndResolveTokens=function(K,ce,xe,Ae){var ot,Re=this.layout.get(K).evaluate(ce,{},xe,Ae),We=this._unevaluatedLayout._values[K];return We.isDataDriven()||fn(We.value)||!Re?Re:(ot=ce.properties,Re.replace(/{([^{}]+)}/g,function(kt,Xt){return Xt in ot?String(ot[Xt]):""}))},z.prototype.createBucket=function(K){return new Ya(K)},z.prototype.queryRadius=function(){return 0},z.prototype.queryIntersectsFeature=function(){return!1},z.prototype._setPaintOverrides=function(){for(var K=0,ce=Rp.paint.overridableProperties;K<ce.length;K+=1){var xe=ce[K];if(z.hasPaintOverride(this.layout,xe)){var ot,Ae=this.paint.get(xe),Re=new Lf(Ae),We=new an(Re,Ae.property.specification);ot="constant"===Ae.value.kind||"source"===Ae.value.kind?new mn("source",We):new Mn("composite",We,Ae.value.zoomStops,Ae.value._interpolationType),this.paint._values[xe]=new Uo(Ae.property,ot,Ae.parameters)}}},z.prototype._handleOverridablePaintPropertyUpdate=function(K,ce,xe){return!(!this.layout||ce.isDataDriven()||xe.isDataDriven())&&z.hasPaintOverride(this.layout,K)},z.hasPaintOverride=function(K,ce){var xe=K.get("text-field"),Ae=Rp.paint.properties[ce],Re=!1,We=function(kt){for(var Xt=0,cn=kt;Xt<cn.length;Xt+=1)if(Ae.overrides&&Ae.overrides.hasOverride(cn[Xt]))return void(Re=!0)};if("constant"===xe.value.kind&&xe.value.value instanceof Un)We(xe.value.value.sections);else if("source"===xe.value.kind){var ot=function(kt){Re||(kt instanceof ti&&rr(kt.value)===Lt?We(kt.value.sections):kt instanceof Rn?We(kt.sections):kt.eachChild(ot))},bt=xe.value;bt._styleExpression&&ot(bt._styleExpression.expression)}return Re},z}(vl),zy={paint:new nl({"background-color":new Ri(Be.paint_background["background-color"]),"background-pattern":new ou(Be.paint_background["background-pattern"]),"background-opacity":new Ri(Be.paint_background["background-opacity"])})},p0=function(E){function z(K){E.call(this,K,zy)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z}(vl),Ny={paint:new nl({"raster-opacity":new Ri(Be.paint_raster["raster-opacity"]),"raster-hue-rotate":new Ri(Be.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Ri(Be.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Ri(Be.paint_raster["raster-brightness-max"]),"raster-saturation":new Ri(Be.paint_raster["raster-saturation"]),"raster-contrast":new Ri(Be.paint_raster["raster-contrast"]),"raster-resampling":new Ri(Be.paint_raster["raster-resampling"]),"raster-fade-duration":new Ri(Be.paint_raster["raster-fade-duration"])})},g0=function(E){function z(K){E.call(this,K,Ny)}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z}(vl),By=function(E){function z(K){E.call(this,K,{}),this.implementation=K}return E&&(z.__proto__=E),(z.prototype=Object.create(E&&E.prototype)).constructor=z,z.prototype.is3D=function(){return"3d"===this.implementation.renderingMode},z.prototype.hasOffscreenPass=function(){return void 0!==this.implementation.prerender},z.prototype.recalculate=function(){},z.prototype.updateTransitions=function(){},z.prototype.hasTransition=function(){},z.prototype.serialize=function(){},z.prototype.onAdd=function(K){this.implementation.onAdd&&this.implementation.onAdd(K,K.painter.context.gl)},z.prototype.onRemove=function(K){this.implementation.onRemove&&this.implementation.onRemove(K,K.painter.context.gl)},z}(vl),jy={circle:wf,heatmap:jx,hillshade:Ea,fill:rh,"fill-extrusion":by,line:wy,symbol:d0,background:p0,raster:g0},od=self.HTMLImageElement,m0=self.HTMLCanvasElement,y0=self.HTMLVideoElement,sd=self.ImageData,ld=self.ImageBitmap,Xc=function(E,z,K,ce){this.context=E,this.format=K,this.texture=E.gl.createTexture(),this.update(z,ce)};Xc.prototype.update=function(E,z,K){var ce=E.width,xe=E.height,Ae=!(this.size&&this.size[0]===ce&&this.size[1]===xe||K),Re=this.context,We=Re.gl;if(this.useMipmap=Boolean(z&&z.useMipmap),We.bindTexture(We.TEXTURE_2D,this.texture),Re.pixelStoreUnpackFlipY.set(!1),Re.pixelStoreUnpack.set(1),Re.pixelStoreUnpackPremultiplyAlpha.set(this.format===We.RGBA&&(!z||!1!==z.premultiply)),Ae)this.size=[ce,xe],E instanceof od||E instanceof m0||E instanceof y0||E instanceof sd||ld&&E instanceof ld?We.texImage2D(We.TEXTURE_2D,0,this.format,this.format,We.UNSIGNED_BYTE,E):We.texImage2D(We.TEXTURE_2D,0,this.format,ce,xe,0,this.format,We.UNSIGNED_BYTE,E.data);else{var ot=K||{x:0,y:0},bt=ot.x,kt=ot.y;E instanceof od||E instanceof m0||E instanceof y0||E instanceof sd||ld&&E instanceof ld?We.texSubImage2D(We.TEXTURE_2D,0,bt,kt,We.RGBA,We.UNSIGNED_BYTE,E):We.texSubImage2D(We.TEXTURE_2D,0,bt,kt,ce,xe,We.RGBA,We.UNSIGNED_BYTE,E.data)}this.useMipmap&&this.isSizePowerOfTwo()&&We.generateMipmap(We.TEXTURE_2D)},Xc.prototype.bind=function(E,z,K){var ce=this.context.gl;ce.bindTexture(ce.TEXTURE_2D,this.texture),K!==ce.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(K=ce.LINEAR),E!==this.filter&&(ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MAG_FILTER,E),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_MIN_FILTER,K||E),this.filter=E),z!==this.wrap&&(ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_S,z),ce.texParameteri(ce.TEXTURE_2D,ce.TEXTURE_WRAP_T,z),this.wrap=z)},Xc.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},Xc.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var gc=function(E){var z=this;this._callback=E,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){z._triggered=!1,z._callback()})};gc.prototype.trigger=function(){var E=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(function(){E._triggered=!1,E._callback()},0))},gc.prototype.remove=function(){delete this._channel,this._callback=function(){}};var If=function(E,z,K){this.target=E,this.parent=z,this.mapId=K,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},y(["receive","process"],this),this.invoker=new gc(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=L()?E:self};function v0(E,z,K){var ce=2*Math.PI*6378137/256/Math.pow(2,K);return[E*ce-2*Math.PI*6378137/2,z*ce-2*Math.PI*6378137/2]}If.prototype.send=function(E,z,K,ce,xe){var Ae=this;void 0===xe&&(xe=!1);var Re=Math.round(1e18*Math.random()).toString(36).substring(0,10);K&&(this.callbacks[Re]=K);var We=V(this.globalScope)?void 0:[];return this.target.postMessage({id:Re,type:E,hasCallback:!!K,targetMapId:ce,mustQueue:xe,sourceMapId:this.mapId,data:pi(z,We)},We),{cancel:function(){K&&delete Ae.callbacks[Re],Ae.target.postMessage({id:Re,type:"<cancel>",targetMapId:ce,sourceMapId:Ae.mapId})}}},If.prototype.receive=function(E){var z=E.data,K=z.id;if(K&&(!z.targetMapId||this.mapId===z.targetMapId))if("<cancel>"===z.type){delete this.tasks[K];var ce=this.cancelCallbacks[K];delete this.cancelCallbacks[K],ce&&ce()}else L()||z.mustQueue?(this.tasks[K]=z,this.taskQueue.push(K),this.invoker.trigger()):this.processTask(K,z)},If.prototype.process=function(){if(this.taskQueue.length){var E=this.taskQueue.shift(),z=this.tasks[E];delete this.tasks[E],this.taskQueue.length&&this.invoker.trigger(),z&&this.processTask(E,z)}},If.prototype.processTask=function(E,z){var K=this;if("<response>"===z.type){var ce=this.callbacks[E];delete this.callbacks[E],ce&&(z.error?ce(ra(z.error)):ce(null,ra(z.data)))}else{var xe=!1,Ae=V(this.globalScope)?void 0:[],Re=z.hasCallback?function(kt,Xt){xe=!0,delete K.cancelCallbacks[E],K.target.postMessage({id:E,type:"<response>",sourceMapId:K.mapId,error:kt?pi(kt):null,data:pi(Xt,Ae)},Ae)}:function(kt){xe=!0},We=null,ot=ra(z.data);if(this.parent[z.type])We=this.parent[z.type](z.sourceMapId,ot,Re);else if(this.parent.getWorkerSource){var bt=z.type.split(".");We=this.parent.getWorkerSource(z.sourceMapId,bt[0],ot.source)[bt[1]](ot,Re)}else Re(new Error("Could not find function "+z.type));!xe&&We&&We.cancel&&(this.cancelCallbacks[E]=We.cancel)}},If.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var ps=function(E,z){E&&(z?this.setSouthWest(E).setNorthEast(z):4===E.length?this.setSouthWest([E[0],E[1]]).setNorthEast([E[2],E[3]]):this.setSouthWest(E[0]).setNorthEast(E[1]))};ps.prototype.setNorthEast=function(E){return this._ne=E instanceof Ro?new Ro(E.lng,E.lat):Ro.convert(E),this},ps.prototype.setSouthWest=function(E){return this._sw=E instanceof Ro?new Ro(E.lng,E.lat):Ro.convert(E),this},ps.prototype.extend=function(E){var z,K,ce=this._sw,xe=this._ne;if(E instanceof Ro)z=E,K=E;else{if(!(E instanceof ps))return Array.isArray(E)?4===E.length||E.every(Array.isArray)?this.extend(ps.convert(E)):this.extend(Ro.convert(E)):this;if(K=E._ne,!(z=E._sw)||!K)return this}return ce||xe?(ce.lng=Math.min(z.lng,ce.lng),ce.lat=Math.min(z.lat,ce.lat),xe.lng=Math.max(K.lng,xe.lng),xe.lat=Math.max(K.lat,xe.lat)):(this._sw=new Ro(z.lng,z.lat),this._ne=new Ro(K.lng,K.lat)),this},ps.prototype.getCenter=function(){return new Ro((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},ps.prototype.getSouthWest=function(){return this._sw},ps.prototype.getNorthEast=function(){return this._ne},ps.prototype.getNorthWest=function(){return new Ro(this.getWest(),this.getNorth())},ps.prototype.getSouthEast=function(){return new Ro(this.getEast(),this.getSouth())},ps.prototype.getWest=function(){return this._sw.lng},ps.prototype.getSouth=function(){return this._sw.lat},ps.prototype.getEast=function(){return this._ne.lng},ps.prototype.getNorth=function(){return this._ne.lat},ps.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},ps.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},ps.prototype.isEmpty=function(){return!(this._sw&&this._ne)},ps.prototype.contains=function(E){var z=Ro.convert(E),K=z.lng,ce=z.lat,Ae=this._sw.lng<=K&&K<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Ae=this._sw.lng>=K&&K>=this._ne.lng),this._sw.lat<=ce&&ce<=this._ne.lat&&Ae},ps.convert=function(E){return!E||E instanceof ps?E:new ps(E)};var Ro=function(E,z){if(isNaN(E)||isNaN(z))throw new Error("Invalid LngLat object: ("+E+", "+z+")");if(this.lng=+E,this.lat=+z,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ro.prototype.wrap=function(){return new Ro(h(this.lng,-180,180),this.lat)},Ro.prototype.toArray=function(){return[this.lng,this.lat]},Ro.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ro.prototype.distanceTo=function(E){var z=Math.PI/180,K=this.lat*z,ce=E.lat*z,xe=Math.sin(K)*Math.sin(ce)+Math.cos(K)*Math.cos(ce)*Math.cos((E.lng-this.lng)*z);return 6371008.8*Math.acos(Math.min(xe,1))},Ro.prototype.toBounds=function(E){void 0===E&&(E=0);var z=360*E/40075017,K=z/Math.cos(Math.PI/180*this.lat);return new ps(new Ro(this.lng-K,this.lat-z),new Ro(this.lng+K,this.lat+z))},Ro.convert=function(E){if(E instanceof Ro)return E;if(Array.isArray(E)&&(2===E.length||3===E.length))return new Ro(Number(E[0]),Number(E[1]));if(!Array.isArray(E)&&"object"==typeof E&&null!==E)return new Ro(Number("lng"in E?E.lng:E.lon),Number(E.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var x0=2*Math.PI*6371008.8;function Fp(E){return x0*Math.cos(E*Math.PI/180)}function b0(E){return(180+E)/360}function _0(E){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+E*Math.PI/360)))/360}function w0(E,z){return E/Fp(z)}function zp(E){return 360/Math.PI*Math.atan(Math.exp((180-360*E)*Math.PI/180))-90}var mc=function(E,z,K){void 0===K&&(K=0),this.x=+E,this.y=+z,this.z=+K};mc.fromLngLat=function(E,z){void 0===z&&(z=0);var K=Ro.convert(E);return new mc(b0(K.lng),_0(K.lat),w0(z,K.lat))},mc.prototype.toLngLat=function(){return new Ro(360*this.x-180,zp(this.y))},mc.prototype.toAltitude=function(){return this.z*Fp(zp(this.y))},mc.prototype.meterInMercatorCoordinateUnits=function(){return 1/x0*(E=zp(this.y),1/Math.cos(E*Math.PI/180));var E};var $c=function(E,z,K){this.z=E,this.x=z,this.y=K,this.key=Eu(0,E,E,z,K)};$c.prototype.equals=function(E){return this.z===E.z&&this.x===E.x&&this.y===E.y},$c.prototype.url=function(E,z){var K,ce,xe,Ae,Re,We=(ce=this.y,xe=this.z,Ae=v0(256*(K=this.x),256*(ce=Math.pow(2,xe)-ce-1),xe),Re=v0(256*(K+1),256*(ce+1),xe),Ae[0]+","+Ae[1]+","+Re[0]+","+Re[1]),ot=function(bt,kt,Xt){for(var cn,nn="",vn=bt;vn>0;vn--)nn+=(kt&(cn=1<<vn-1)?1:0)+(Xt&cn?2:0);return nn}(this.z,this.x,this.y);return E[(this.x+this.y)%E.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String("tms"===z?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",ot).replace("{bbox-epsg-3857}",We)},$c.prototype.getTilePoint=function(E){var z=Math.pow(2,this.z);return new i(8192*(E.x*z-this.x),8192*(E.y*z-this.y))},$c.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var T0=function(E,z){this.wrap=E,this.canonical=z,this.key=Eu(E,z.z,z.z,z.x,z.y)},gs=function(E,z,K,ce,xe){this.overscaledZ=E,this.wrap=z,this.canonical=new $c(K,+ce,+xe),this.key=Eu(z,E,K,ce,xe)};function Eu(E,z,K,ce,xe){(E*=2)<0&&(E=-1*E-1);var Ae=1<<K;return(Ae*Ae*E+Ae*xe+ce).toString(36)+K.toString(36)+z.toString(36)}gs.prototype.equals=function(E){return this.overscaledZ===E.overscaledZ&&this.wrap===E.wrap&&this.canonical.equals(E.canonical)},gs.prototype.scaledTo=function(E){var z=this.canonical.z-E;return E>this.canonical.z?new gs(E,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new gs(E,this.wrap,E,this.canonical.x>>z,this.canonical.y>>z)},gs.prototype.calculateScaledKey=function(E,z){var K=this.canonical.z-E;return E>this.canonical.z?Eu(this.wrap*+z,E,this.canonical.z,this.canonical.x,this.canonical.y):Eu(this.wrap*+z,E,E,this.canonical.x>>K,this.canonical.y>>K)},gs.prototype.isChildOf=function(E){if(E.wrap!==this.wrap)return!1;var z=this.canonical.z-E.canonical.z;return 0===E.overscaledZ||E.overscaledZ<this.overscaledZ&&E.canonical.x===this.canonical.x>>z&&E.canonical.y===this.canonical.y>>z},gs.prototype.children=function(E){if(this.overscaledZ>=E)return[new gs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var z=this.canonical.z+1,K=2*this.canonical.x,ce=2*this.canonical.y;return[new gs(z,this.wrap,z,K,ce),new gs(z,this.wrap,z,K+1,ce),new gs(z,this.wrap,z,K,ce+1),new gs(z,this.wrap,z,K+1,ce+1)]},gs.prototype.isLessThan=function(E){return this.wrap<E.wrap||!(this.wrap>E.wrap)&&(this.overscaledZ<E.overscaledZ||!(this.overscaledZ>E.overscaledZ)&&(this.canonical.x<E.canonical.x||!(this.canonical.x>E.canonical.x)&&this.canonical.y<E.canonical.y))},gs.prototype.wrapped=function(){return new gs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},gs.prototype.unwrapTo=function(E){return new gs(this.overscaledZ,E,this.canonical.z,this.canonical.x,this.canonical.y)},gs.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},gs.prototype.toUnwrapped=function(){return new T0(this.wrap,this.canonical)},gs.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},gs.prototype.getTilePoint=function(E){return this.canonical.getTilePoint(new mc(E.x-this.wrap,E.y))},br("CanonicalTileID",$c),br("OverscaledTileID",gs,{omit:["posMatrix"]});var ol=function(E,z,K){if(this.uid=E,z.height!==z.width)throw new RangeError("DEM tiles must be square");if(K&&"mapbox"!==K&&"terrarium"!==K)return D('"'+K+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=z.height;var ce=this.dim=z.height-2;this.data=new Uint32Array(z.data.buffer),this.encoding=K||"mapbox";for(var xe=0;xe<ce;xe++)this.data[this._idx(-1,xe)]=this.data[this._idx(0,xe)],this.data[this._idx(ce,xe)]=this.data[this._idx(ce-1,xe)],this.data[this._idx(xe,-1)]=this.data[this._idx(xe,0)],this.data[this._idx(xe,ce)]=this.data[this._idx(xe,ce-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(ce,-1)]=this.data[this._idx(ce-1,0)],this.data[this._idx(-1,ce)]=this.data[this._idx(0,ce-1)],this.data[this._idx(ce,ce)]=this.data[this._idx(ce-1,ce-1)]};ol.prototype.get=function(E,z){var K=new Uint8Array(this.data.buffer),ce=4*this._idx(E,z);return("terrarium"===this.encoding?this._unpackTerrarium:this._unpackMapbox)(K[ce],K[ce+1],K[ce+2])},ol.prototype.getUnpackVector=function(){return"terrarium"===this.encoding?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},ol.prototype._idx=function(E,z){if(E<-1||E>=this.dim+1||z<-1||z>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(z+1)*this.stride+(E+1)},ol.prototype._unpackMapbox=function(E,z,K){return(256*E*256+256*z+K)/10-1e4},ol.prototype._unpackTerrarium=function(E,z,K){return 256*E+z+K/256-32768},ol.prototype.getPixels=function(){return new _l({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},ol.prototype.backfillBorder=function(E,z,K){if(this.dim!==E.dim)throw new Error("dem dimension mismatch");var ce=z*this.dim,xe=z*this.dim+this.dim,Ae=K*this.dim,Re=K*this.dim+this.dim;switch(z){case-1:ce=xe-1;break;case 1:xe=ce+1}switch(K){case-1:Ae=Re-1;break;case 1:Re=Ae+1}for(var We=-z*this.dim,ot=-K*this.dim,bt=Ae;bt<Re;bt++)for(var kt=ce;kt<xe;kt++)this.data[this._idx(kt,bt)]=E.data[this._idx(kt+We,bt+ot)]},br("DEMData",ol);var Np=function(E){this._stringToNumber={},this._numberToString=[];for(var z=0;z<E.length;z++){var K=E[z];this._stringToNumber[K]=z,this._numberToString[z]=K}};Np.prototype.encode=function(E){return this._stringToNumber[E]},Np.prototype.decode=function(E){return this._numberToString[E]};var Bp=function(E,z,K,ce,xe){this.type="Feature",this._vectorTileFeature=E,E._z=z,E._x=K,E._y=ce,this.properties=E.properties,this.id=xe},ud={geometry:{configurable:!0}};ud.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},ud.geometry.set=function(E){this._geometry=E},Bp.prototype.toJSON=function(){var E={geometry:this.geometry};for(var z in this)"_geometry"!==z&&"_vectorTileFeature"!==z&&(E[z]=this[z]);return E},Object.defineProperties(Bp.prototype,ud);var mh=function(){this.state={},this.stateChanges={},this.deletedStates={}};mh.prototype.updateState=function(E,z,K){var ce=String(z);if(this.stateChanges[E]=this.stateChanges[E]||{},this.stateChanges[E][ce]=this.stateChanges[E][ce]||{},p(this.stateChanges[E][ce],K),null===this.deletedStates[E])for(var xe in this.deletedStates[E]={},this.state[E])xe!==ce&&(this.deletedStates[E][xe]=null);else if(this.deletedStates[E]&&null===this.deletedStates[E][ce])for(var Ae in this.deletedStates[E][ce]={},this.state[E][ce])K[Ae]||(this.deletedStates[E][ce][Ae]=null);else for(var Re in K)this.deletedStates[E]&&this.deletedStates[E][ce]&&null===this.deletedStates[E][ce][Re]&&delete this.deletedStates[E][ce][Re]},mh.prototype.removeFeatureState=function(E,z,K){if(null!==this.deletedStates[E]){var ce=String(z);if(this.deletedStates[E]=this.deletedStates[E]||{},K&&void 0!==z)null!==this.deletedStates[E][ce]&&(this.deletedStates[E][ce]=this.deletedStates[E][ce]||{},this.deletedStates[E][ce][K]=null);else if(void 0!==z)if(this.stateChanges[E]&&this.stateChanges[E][ce])for(K in this.deletedStates[E][ce]={},this.stateChanges[E][ce])this.deletedStates[E][ce][K]=null;else this.deletedStates[E][ce]=null;else this.deletedStates[E]=null}},mh.prototype.getState=function(E,z){var K=String(z),Ae=p({},(this.state[E]||{})[K],(this.stateChanges[E]||{})[K]);if(null===this.deletedStates[E])return{};if(this.deletedStates[E]){var Re=this.deletedStates[E][z];if(null===Re)return{};for(var We in Re)delete Ae[We]}return Ae},mh.prototype.initializeTileState=function(E,z){E.setFeatureState(this.state,z)},mh.prototype.coalesceChanges=function(E,z){var K={};for(var ce in this.stateChanges){this.state[ce]=this.state[ce]||{};var xe={};for(var Ae in this.stateChanges[ce])this.state[ce][Ae]||(this.state[ce][Ae]={}),p(this.state[ce][Ae],this.stateChanges[ce][Ae]),xe[Ae]=this.state[ce][Ae];K[ce]=xe}for(var Re in this.deletedStates){this.state[Re]=this.state[Re]||{};var We={};if(null===this.deletedStates[Re])for(var ot in this.state[Re])We[ot]={},this.state[Re][ot]={};else for(var bt in this.deletedStates[Re]){if(null===this.deletedStates[Re][bt])this.state[Re][bt]={};else for(var kt=0,Xt=Object.keys(this.deletedStates[Re][bt]);kt<Xt.length;kt+=1)delete this.state[Re][bt][Xt[kt]];We[bt]=this.state[Re][bt]}K[Re]=K[Re]||{},p(K[Re],We)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(K).length)for(var nn in E)E[nn].setFeatureState(K,z)};var Es=function(E,z){this.tileID=E,this.x=E.canonical.x,this.y=E.canonical.y,this.z=E.canonical.z,this.grid=new Dr(8192,16,0),this.grid3D=new Dr(8192,16,0),this.featureIndexArray=new Pt,this.promoteId=z};function cd(E,z,K,ce,xe){return A(E,function(Ae,Re){var We=z instanceof yl?z.get(Re):null;return We&&We.evaluate?We.evaluate(K,ce,xe):We})}function fd(E){for(var z=1/0,K=1/0,ce=-1/0,xe=-1/0,Ae=0,Re=E;Ae<Re.length;Ae+=1){var We=Re[Ae];z=Math.min(z,We.x),K=Math.min(K,We.y),ce=Math.max(ce,We.x),xe=Math.max(xe,We.y)}return{minX:z,minY:K,maxX:ce,maxY:xe}}function Vy(E,z){return z-E}Es.prototype.insert=function(E,z,K,ce,xe,Ae){var Re=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(K,ce,xe);for(var We=Ae?this.grid3D:this.grid,ot=0;ot<z.length;ot++){for(var bt=z[ot],kt=[1/0,1/0,-1/0,-1/0],Xt=0;Xt<bt.length;Xt++){var cn=bt[Xt];kt[0]=Math.min(kt[0],cn.x),kt[1]=Math.min(kt[1],cn.y),kt[2]=Math.max(kt[2],cn.x),kt[3]=Math.max(kt[3],cn.y)}kt[0]<8192&&kt[1]<8192&&kt[2]>=0&&kt[3]>=0&&We.insert(Re,kt[0],kt[1],kt[2],kt[3])}},Es.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Af.VectorTile(new Hc(this.rawTileData)).layers,this.sourceLayerCoder=new Np(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Es.prototype.query=function(E,z,K,ce){var xe=this;this.loadVTLayers();for(var Ae=E.params||{},Re=8192/E.tileSize/E.scale,We=Ki(Ae.filter),ot=E.queryGeometry,bt=E.queryPadding*Re,kt=fd(ot),Xt=this.grid.query(kt.minX-bt,kt.minY-bt,kt.maxX+bt,kt.maxY+bt),cn=fd(E.cameraQueryGeometry),vn=0,Pn=this.grid3D.query(cn.minX-bt,cn.minY-bt,cn.maxX+bt,cn.maxY+bt,function(Pr,Br,ui,ni){return function(yi,Ei,Pi,_i,Ui){for(var zi=0,Li=yi;zi<Li.length;zi+=1){var za=Li[zi];if(Ei<=za.x&&Pi<=za.y&&_i>=za.x&&Ui>=za.y)return!0}var La=[new i(Ei,Pi),new i(Ei,Ui),new i(_i,Ui),new i(_i,Pi)];if(yi.length>2)for(var Ha=0,$i=La;Ha<$i.length;Ha+=1)if(xl(yi,$i[Ha]))return!0;for(var Ia=0;Ia<yi.length-1;Ia++)if(qu(yi[Ia],yi[Ia+1],La))return!0;return!1}(E.cameraQueryGeometry,Pr-bt,Br-bt,ui+bt,ni+bt)});vn<Pn.length;vn+=1)Xt.push(Pn[vn]);Xt.sort(Vy);for(var Yn,ar={},lr=function(Pr){var Br=Xt[Pr];if(Br!==Yn){Yn=Br;var ui=xe.featureIndexArray.get(Br),ni=null;xe.loadMatchingFeature(ar,ui.bucketIndex,ui.sourceLayerIndex,ui.featureIndex,We,Ae.layers,Ae.availableImages,z,K,ce,function(yi,Ei,Pi){return ni||(ni=xo(yi)),Ei.queryIntersectsFeature(ot,yi,Pi,ni,xe.z,E.transform,Re,E.pixelPosMatrix)})}},mr=0;mr<Xt.length;mr++)lr(mr);return ar},Es.prototype.loadMatchingFeature=function(E,z,K,ce,xe,Ae,Re,We,ot,bt,kt){var Xt=this.bucketLayerIDs[z];if(!Ae||function(ui,ni){for(var yi=0;yi<ui.length;yi++)if(ni.indexOf(ui[yi])>=0)return!0;return!1}(Ae,Xt)){var cn=this.sourceLayerCoder.decode(K),nn=this.vtLayers[cn].feature(ce);if(xe.filter(new Qa(this.tileID.overscaledZ),nn))for(var vn=this.getId(nn,cn),Pn=0;Pn<Xt.length;Pn++){var Xn=Xt[Pn];if(!(Ae&&Ae.indexOf(Xn)<0)){var Yn=We[Xn];if(Yn){var ar={};void 0!==vn&&bt&&(ar=bt.getState(Yn.sourceLayer||"_geojsonTileLayer",vn));var lr=ot[Xn];lr.paint=cd(lr.paint,Yn.paint,nn,ar,Re),lr.layout=cd(lr.layout,Yn.layout,nn,ar,Re);var mr=!kt||kt(nn,Yn,ar);if(mr){var Pr=new Bp(nn,this.z,this.x,this.y,vn);Pr.layer=lr;var Br=E[Xn];void 0===Br&&(Br=E[Xn]=[]),Br.push({featureIndex:ce,feature:Pr,intersectionZ:mr})}}}}}},Es.prototype.lookupSymbolFeatures=function(E,z,K,ce,xe,Ae,Re,We){var ot={};this.loadVTLayers();for(var bt=Ki(xe),kt=0,Xt=E;kt<Xt.length;kt+=1)this.loadMatchingFeature(ot,K,ce,Xt[kt],bt,Ae,Re,We,z);return ot},Es.prototype.hasLayer=function(E){for(var z=0,K=this.bucketLayerIDs;z<K.length;z+=1)for(var ce=0,xe=K[z];ce<xe.length;ce+=1)if(E===xe[ce])return!0;return!1},Es.prototype.getId=function(E,z){var K=E.id;return this.promoteId&&"boolean"==typeof(K=E.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[z]])&&(K=Number(K)),K},br("FeatureIndex",Es,{omit:["rawTileData","sourceLayerCoder"]});var Ts=function(E,z){this.tileID=E,this.uid=g(),this.uses=0,this.tileSize=z,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Ts.prototype.registerFadeDuration=function(E){var z=E+this.timeAdded;z<G.now()||this.fadeEndTime&&z<this.fadeEndTime||(this.fadeEndTime=z)},Ts.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},Ts.prototype.loadVectorData=function(E,z,K){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",E){for(var ce in E.featureIndex&&(this.latestFeatureIndex=E.featureIndex,E.rawTileData?(this.latestRawTileData=E.rawTileData,this.latestFeatureIndex.rawTileData=E.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=E.collisionBoxArray,this.buckets=function(bt,kt){var Xt={};if(!kt)return Xt;for(var cn=function(){var Pn=vn[nn],Xn=Pn.layerIds.map(function(mr){return kt.getLayer(mr)}).filter(Boolean);if(0!==Xn.length){Pn.layers=Xn,Pn.stateDependentLayerIds&&(Pn.stateDependentLayers=Pn.stateDependentLayerIds.map(function(mr){return Xn.filter(function(Pr){return Pr.id===mr})[0]}));for(var Yn=0,ar=Xn;Yn<ar.length;Yn+=1)Xt[ar[Yn].id]=Pn}},nn=0,vn=bt;nn<vn.length;nn+=1)cn();return Xt}(E.buckets,z.style),this.hasSymbolBuckets=!1,this.buckets){var xe=this.buckets[ce];if(xe instanceof Ya){if(this.hasSymbolBuckets=!0,!K)break;xe.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var Ae in this.buckets){var Re=this.buckets[Ae];if(Re instanceof Ya&&Re.hasRTLText){this.hasRTLText=!0,bs.isLoading()||bs.isLoaded()||"deferred"!==ts()||la();break}}for(var We in this.queryPadding=0,this.buckets){var ot=this.buckets[We];this.queryPadding=Math.max(this.queryPadding,z.style.getLayer(We).queryRadius(ot))}E.imageAtlas&&(this.imageAtlas=E.imageAtlas),E.glyphAtlasImage&&(this.glyphAtlasImage=E.glyphAtlasImage)}else this.collisionBoxArray=new ke},Ts.prototype.unloadVectorData=function(){for(var E in this.buckets)this.buckets[E].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ts.prototype.getBucket=function(E){return this.buckets[E.id]},Ts.prototype.upload=function(E){for(var z in this.buckets){var K=this.buckets[z];K.uploadPending()&&K.upload(E)}var ce=E.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new Xc(E,this.imageAtlas.image,ce.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new Xc(E,this.glyphAtlasImage,ce.ALPHA),this.glyphAtlasImage=null)},Ts.prototype.prepare=function(E){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(E,this.imageAtlasTexture)},Ts.prototype.queryRenderedFeatures=function(E,z,K,ce,xe,Ae,Re,We,ot,bt){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ce,cameraQueryGeometry:xe,scale:Ae,tileSize:this.tileSize,pixelPosMatrix:bt,transform:We,params:Re,queryPadding:this.queryPadding*ot},E,z,K):{}},Ts.prototype.querySourceFeatures=function(E,z){var K=this.latestFeatureIndex;if(K&&K.rawTileData){var ce=K.loadVTLayers(),xe=z?z.sourceLayer:"",Ae=ce._geojsonTileLayer||ce[xe];if(Ae)for(var Re=Ki(z&&z.filter),We=this.tileID.canonical,ot=We.z,bt=We.x,kt=We.y,Xt={z:ot,x:bt,y:kt},cn=0;cn<Ae.length;cn++){var nn=Ae.feature(cn);if(Re.filter(new Qa(this.tileID.overscaledZ),nn)){var vn=K.getId(nn,xe),Pn=new Bp(nn,ot,bt,kt,vn);Pn.tile=Xt,E.push(Pn)}}}},Ts.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},Ts.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ts.prototype.setExpiryData=function(E){var z=this.expirationTime;if(E.cacheControl){var K=I(E.cacheControl);K["max-age"]&&(this.expirationTime=Date.now()+1e3*K["max-age"])}else E.expires&&(this.expirationTime=new Date(E.expires).getTime());if(this.expirationTime){var ce=Date.now(),xe=!1;if(this.expirationTime>ce)xe=!1;else if(z)if(this.expirationTime<z)xe=!0;else{var Ae=this.expirationTime-z;Ae?this.expirationTime=ce+Math.max(Ae,3e4):xe=!0}else xe=!0;xe?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ts.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},Ts.prototype.setFeatureState=function(E,z){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&0!==Object.keys(E).length){var K=this.latestFeatureIndex.loadVTLayers();for(var ce in this.buckets)if(z.style.hasLayer(ce)){var xe=this.buckets[ce],Ae=xe.layers[0].sourceLayer||"_geojsonTileLayer",Re=K[Ae],We=E[Ae];if(Re&&We&&0!==Object.keys(We).length){xe.update(We,Re,this.imageAtlas&&this.imageAtlas.patternPositions||{});var ot=z&&z.style&&z.style.getLayer(ce);ot&&(this.queryPadding=Math.max(this.queryPadding,ot.queryRadius(xe)))}}}},Ts.prototype.holdingForFade=function(){return void 0!==this.symbolFadeHoldUntil},Ts.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<G.now()},Ts.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ts.prototype.setHoldDuration=function(E){this.symbolFadeHoldUntil=G.now()+E},Ts.prototype.setDependencies=function(E,z){for(var K={},ce=0,xe=z;ce<xe.length;ce+=1)K[xe[ce]]=!0;this.dependencies[E]=K},Ts.prototype.hasDependency=function(E,z){for(var K=0,ce=E;K<ce.length;K+=1){var Ae=this.dependencies[ce[K]];if(Ae)for(var Re=0,We=z;Re<We.length;Re+=1)if(Ae[We[Re]])return!0}return!1};var uu=self.performance,jp=function(E){this._marks={start:[E.url,"start"].join("#"),end:[E.url,"end"].join("#"),measure:E.url.toString()},uu.mark(this._marks.start)};jp.prototype.finish=function(){uu.mark(this._marks.end);var E=uu.getEntriesByName(this._marks.measure);return 0===E.length&&(uu.measure(this._marks.measure,this._marks.start,this._marks.end),E=uu.getEntriesByName(this._marks.measure),uu.clearMarks(this._marks.start),uu.clearMarks(this._marks.end),uu.clearMeasures(this._marks.measure)),E},e.Actor=If,e.AlphaImage=lu,e.CanonicalTileID=$c,e.CollisionBoxArray=ke,e.Color=Tn,e.DEMData=ol,e.DataConstantProperty=Ri,e.DictionaryCoder=Np,e.EXTENT=8192,e.ErrorEvent=ze,e.EvaluationParameters=Qa,e.Event=Ie,e.Evented=Ve,e.FeatureIndex=Es,e.FillBucket=Jl,e.FillExtrusionBucket=Ql,e.ImageAtlas=uh,e.ImagePosition=Qh,e.LineBucket=rl,e.LngLat=Ro,e.LngLatBounds=ps,e.MercatorCoordinate=mc,e.ONE_EM=24,e.OverscaledTileID=gs,e.Point=i,e.Point$1=i,e.Properties=nl,e.Protobuf=Hc,e.RGBAImage=_l,e.RequestManager=ue,e.RequestPerformance=jp,e.ResourceType=Ct,e.SegmentVector=Zt,e.SourceFeatureState=mh,e.StructArrayLayout1ui2=X,e.StructArrayLayout2f1f2i16=hc,e.StructArrayLayout2i4=ei,e.StructArrayLayout3ui6=$o,e.StructArrayLayout4i8=ea,e.SymbolBucket=Ya,e.Texture=Xc,e.Tile=Ts,e.Transitionable=Dl,e.Uniform1f=cr,e.Uniform1i=Oi,e.Uniform2f=Hr,e.Uniform3f=bi,e.Uniform4f=mi,e.UniformColor=wi,e.UniformMatrix4f=ca,e.UnwrappedTileID=T0,e.ValidationError=at,e.WritingMode=Pl,e.ZoomHistory=ma,e.add=function(E,z,K){return E[0]=z[0]+K[0],E[1]=z[1]+K[1],E[2]=z[2]+K[2],E},e.addDynamicAttributes=gh,e.asyncAll=function(E,z,K){if(!E.length)return K(null,[]);var ce=E.length,xe=new Array(E.length),Ae=null;E.forEach(function(Re,We){z(Re,function(ot,bt){ot&&(Ae=ot),xe[We]=bt,0==--ce&&K(Ae,xe)})})},e.bezier=u,e.bindAll=y,e.browser=G,e.cacheEntryPossiblyAdded=function(E){++ct>Ke&&(E.getActor().send("enforceCacheSizeLimit",Ge),ct=0)},e.clamp=c,e.clearTileCache=function(E){var z=self.caches.delete("mapbox-tiles");E&&z.catch(E).then(function(){return E()})},e.clipLine=s0,e.clone=function(E){var z=new bl(16);return z[0]=E[0],z[1]=E[1],z[2]=E[2],z[3]=E[3],z[4]=E[4],z[5]=E[5],z[6]=E[6],z[7]=E[7],z[8]=E[8],z[9]=E[9],z[10]=E[10],z[11]=E[11],z[12]=E[12],z[13]=E[13],z[14]=E[14],z[15]=E[15],z},e.clone$1=C,e.clone$2=function(E){var z=new bl(3);return z[0]=E[0],z[1]=E[1],z[2]=E[2],z},e.collisionCircleLayout=Ay,e.config=W,e.create=function(){var E=new bl(16);return bl!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=0,E[12]=0,E[13]=0,E[14]=0),E[0]=1,E[5]=1,E[10]=1,E[15]=1,E},e.create$1=function(){var E=new bl(9);return bl!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[5]=0,E[6]=0,E[7]=0),E[0]=1,E[4]=1,E[8]=1,E},e.create$2=function(){var E=new bl(4);return bl!=Float32Array&&(E[1]=0,E[2]=0),E[0]=1,E[3]=1,E},e.createCommonjsModule=o,e.createExpression=ln,e.createLayout=Za,e.createStyleLayer=function(E){return"custom"===E.type?new By(E):new jy[E.type](E)},e.cross=function(E,z,K){var ce=z[0],xe=z[1],Ae=z[2],Re=K[0],We=K[1],ot=K[2];return E[0]=xe*ot-Ae*We,E[1]=Ae*Re-ce*ot,E[2]=ce*We-xe*Re,E},e.deepEqual=function E(z,K){if(Array.isArray(z)){if(!Array.isArray(K)||z.length!==K.length)return!1;for(var ce=0;ce<z.length;ce++)if(!E(z[ce],K[ce]))return!1;return!0}if("object"==typeof z&&null!==z&&null!==K){if("object"!=typeof K||Object.keys(z).length!==Object.keys(K).length)return!1;for(var xe in z)if(!E(z[xe],K[xe]))return!1;return!0}return z===K},e.dot=function(E,z){return E[0]*z[0]+E[1]*z[1]+E[2]*z[2]},e.dot$1=function(E,z){return E[0]*z[0]+E[1]*z[1]+E[2]*z[2]+E[3]*z[3]},e.ease=s,e.emitValidationErrors=Wr,e.endsWith=M,e.enforceCacheSizeLimit=function(E){lt(),Fe&&Fe.then(function(z){z.keys().then(function(K){for(var ce=0;ce<K.length-E;ce++)z.delete(K[ce])})})},e.evaluateSizeForFeature=Dy,e.evaluateSizeForZoom=rd,e.evaluateVariableOffset=u0,e.evented=Mo,e.extend=p,e.featureFilter=Ki,e.filterObject=k,e.fromRotation=function(E,z){var K=Math.sin(z),ce=Math.cos(z);return E[0]=ce,E[1]=K,E[2]=0,E[3]=-K,E[4]=ce,E[5]=0,E[6]=0,E[7]=0,E[8]=1,E},e.getAnchorAlignment=nd,e.getAnchorJustification=Pp,e.getArrayBuffer=Ot,e.getImage=Qe,e.getJSON=function(E,z){return ut(p(E,{type:"json"}),z)},e.getRTLTextPluginStatus=ts,e.getReferrer=zt,e.getVideo=function(E,z){var K,ce,xe=self.document.createElement("video");xe.muted=!0,xe.onloadstart=function(){z(null,xe)};for(var Ae=0;Ae<E.length;Ae++){var Re=self.document.createElement("source");K=E[Ae],ce=void 0,(ce=self.document.createElement("a")).href=K,(ce.protocol!==self.document.location.protocol||ce.host!==self.document.location.host)&&(xe.crossOrigin="Anonymous"),Re.src=E[Ae],xe.appendChild(Re)}return{cancel:function(){}}},e.identity=_f,e.invert=function(E,z){var K=z[0],ce=z[1],xe=z[2],Ae=z[3],Re=z[4],We=z[5],ot=z[6],bt=z[7],kt=z[8],Xt=z[9],cn=z[10],nn=z[11],vn=z[12],Pn=z[13],Xn=z[14],Yn=z[15],ar=K*We-ce*Re,lr=K*ot-xe*Re,mr=K*bt-Ae*Re,Pr=ce*ot-xe*We,Br=ce*bt-Ae*We,ui=xe*bt-Ae*ot,ni=kt*Pn-Xt*vn,yi=kt*Xn-cn*vn,Ei=kt*Yn-nn*vn,Pi=Xt*Xn-cn*Pn,_i=Xt*Yn-nn*Pn,Ui=cn*Yn-nn*Xn,zi=ar*Ui-lr*_i+mr*Pi+Pr*Ei-Br*yi+ui*ni;return zi?(E[0]=(We*Ui-ot*_i+bt*Pi)*(zi=1/zi),E[1]=(xe*_i-ce*Ui-Ae*Pi)*zi,E[2]=(Pn*ui-Xn*Br+Yn*Pr)*zi,E[3]=(cn*Br-Xt*ui-nn*Pr)*zi,E[4]=(ot*Ei-Re*Ui-bt*yi)*zi,E[5]=(K*Ui-xe*Ei+Ae*yi)*zi,E[6]=(Xn*mr-vn*ui-Yn*lr)*zi,E[7]=(kt*ui-cn*mr+nn*lr)*zi,E[8]=(Re*_i-We*Ei+bt*ni)*zi,E[9]=(ce*Ei-K*_i-Ae*ni)*zi,E[10]=(vn*Br-Pn*mr+Yn*ar)*zi,E[11]=(Xt*mr-kt*Br-nn*ar)*zi,E[12]=(We*yi-Re*Pi-ot*ni)*zi,E[13]=(K*Pi-ce*yi+xe*ni)*zi,E[14]=(Pn*lr-vn*Pr-Xn*ar)*zi,E[15]=(kt*Pr-Xt*lr+cn*ar)*zi,E):null},e.isChar=$r,e.isMapboxURL=de,e.keysDifference=function(E,z){var K=[];for(var ce in E)ce in z||K.push(ce);return K},e.makeRequest=ut,e.mapObject=A,e.mercatorXfromLng=b0,e.mercatorYfromLat=_0,e.mercatorZfromAltitude=w0,e.mul=dp,e.multiply=Ic,e.mvt=Af,e.normalize=function(E,z){var K=z[0],ce=z[1],xe=z[2],Ae=K*K+ce*ce+xe*xe;return Ae>0&&(Ae=1/Math.sqrt(Ae)),E[0]=z[0]*Ae,E[1]=z[1]*Ae,E[2]=z[2]*Ae,E},e.number=gi,e.offscreenCanvasSupported=xt,e.ortho=function(E,z,K,ce,xe,Ae,Re){var We=1/(z-K),ot=1/(ce-xe),bt=1/(Ae-Re);return E[0]=-2*We,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=-2*ot,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=2*bt,E[11]=0,E[12]=(z+K)*We,E[13]=(xe+ce)*ot,E[14]=(Re+Ae)*bt,E[15]=1,E},e.parseGlyphPBF=function(E){return new Hc(E).readFields(Su,[])},e.pbf=Hc,e.performSymbolLayout=function(E,z,K,ce,xe,Ae,Re){E.createArrays(),E.tilePixelRatio=8192/(512*E.overscaling),E.compareText={},E.iconsNeedLinear=!1;var ot=E.layers[0].layout,bt=E.layers[0]._unevaluatedLayout._values,kt={};if("composite"===E.textSizeData.kind){var Xt=E.textSizeData,nn=Xt.maxZoom;kt.compositeTextSizes=[bt["text-size"].possiblyEvaluate(new Qa(Xt.minZoom),Re),bt["text-size"].possiblyEvaluate(new Qa(nn),Re)]}if("composite"===E.iconSizeData.kind){var vn=E.iconSizeData,Xn=vn.maxZoom;kt.compositeIconSizes=[bt["icon-size"].possiblyEvaluate(new Qa(vn.minZoom),Re),bt["icon-size"].possiblyEvaluate(new Qa(Xn),Re)]}kt.layoutTextSize=bt["text-size"].possiblyEvaluate(new Qa(E.zoom+1),Re),kt.layoutIconSize=bt["icon-size"].possiblyEvaluate(new Qa(E.zoom+1),Re),kt.textMaxSize=bt["text-size"].possiblyEvaluate(new Qa(18));for(var Yn=24*ot.get("text-line-height"),ar="map"===ot.get("text-rotation-alignment")&&"point"!==ot.get("symbol-placement"),lr=ot.get("text-keep-upright"),mr=ot.get("text-size"),Pr=function(){var ni=ui[Br],yi=ot.get("text-font").evaluate(ni,{},Re).join(","),Ei=mr.evaluate(ni,{},Re),Pi=kt.layoutTextSize.evaluate(ni,{},Re),_i=kt.layoutIconSize.evaluate(ni,{},Re),Ui={horizontal:{},vertical:void 0},zi=ni.text,Li=[0,0];if(zi){var za=zi.toString(),La=24*ot.get("text-letter-spacing").evaluate(ni,{},Re),Ha=function(Aa){for(var Ga=0,Jo=Aa;Ga<Jo.length;Ga+=1)if(!da(Jo[Ga].charCodeAt(0)))return!1;return!0}(za)?La:0,$i=ot.get("text-anchor").evaluate(ni,{},Re),Ia=ot.get("text-variable-anchor");if(!Ia){var wo=ot.get("text-radial-offset").evaluate(ni,{},Re);Li=wo?u0($i,[24*wo,Ip]):ot.get("text-offset").evaluate(ni,{},Re).map(function(Aa){return 24*Aa})}var so=ar?"center":ot.get("text-justify").evaluate(ni,{},Re),So=ot.get("symbol-placement"),lo="point"===So?24*ot.get("text-max-width").evaluate(ni,{},Re):0,Wo=function(){E.allowVerticalPlacement&&Ta(za)&&(Ui.vertical=ed(zi,z,K,xe,yi,lo,Yn,$i,"left",Ha,Li,Pl.vertical,!0,So,Pi,Ei))};if(!ar&&Ia){for(var Fo="auto"===so?Ia.map(function(Aa){return Pp(Aa)}):[so],js=!1,Ds=0;Ds<Fo.length;Ds++){var Vs=Fo[Ds];if(!Ui.horizontal[Vs])if(js)Ui.horizontal[Vs]=Ui.horizontal[0];else{var sl=ed(zi,z,K,xe,yi,lo,Yn,"center",Vs,Ha,Li,Pl.horizontal,!1,So,Pi,Ei);sl&&(Ui.horizontal[Vs]=sl,js=1===sl.positionedLines.length)}}Wo()}else{"auto"===so&&(so=Pp($i));var Us=ed(zi,z,K,xe,yi,lo,Yn,$i,so,Ha,Li,Pl.horizontal,!1,So,Pi,Ei);Us&&(Ui.horizontal[so]=Us),Wo(),Ta(za)&&ar&&lr&&(Ui.vertical=ed(zi,z,K,xe,yi,lo,Yn,$i,so,Ha,Li,Pl.vertical,!1,So,Pi,Ei))}}var Aa,Ga,to,wl,Ks,as=void 0,$s=!1;if(ni.icon&&ni.icon.name){var is=ce[ni.icon.name];is&&(Aa=xe[ni.icon.name],Ga=ot.get("icon-offset").evaluate(ni,{},Re),to=nd(ot.get("icon-anchor").evaluate(ni,{},Re)),as={image:Aa,top:Ks=Ga[1]-Aa.displaySize[1]*to.verticalAlign,bottom:Ks+Aa.displaySize[1],left:wl=Ga[0]-Aa.displaySize[0]*to.horizontalAlign,right:wl+Aa.displaySize[0]},$s=is.sdf,void 0===E.sdfIcons?E.sdfIcons=is.sdf:E.sdfIcons!==is.sdf&&D("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(is.pixelRatio!==E.pixelRatio||0!==ot.get("icon-rotate").constantOr(1))&&(E.iconsNeedLinear=!0))}var As=f0(Ui.horizontal)||Ui.vertical;E.iconsInText=!!As&&As.iconsInText,(As||as)&&function(Aa,Ga,Jo,to,Yo,Eo,Xa,Qo,wl,Ol,Ks){var Au=Eo.textMaxSize.evaluate(Ga,{});void 0===Au&&(Au=Xa);var Xu,Ls=Aa.layers[0].layout,ha=Ls.get("icon-offset").evaluate(Ga,{},Ks),er=f0(Jo.horizontal),cu=Xa/24,hd=Aa.tilePixelRatio*cu,$u=Aa.tilePixelRatio*Au/24,Gl=Aa.tilePixelRatio*Qo,yc=Aa.tilePixelRatio*Ls.get("symbol-spacing"),dd=Ls.get("text-padding")*Aa.tilePixelRatio,Pf=Ls.get("icon-padding")*Aa.tilePixelRatio,fu=Ls.get("text-max-angle")/180*Math.PI,Of="map"===Ls.get("text-rotation-alignment")&&"point"!==Ls.get("symbol-placement"),Ku="map"===Ls.get("icon-rotation-alignment")&&"point"!==Ls.get("symbol-placement"),vc=Ls.get("symbol-placement"),Vp=yc/2,Kc=Ls.get("icon-text-fit");to&&"none"!==Kc&&(Aa.allowVerticalPlacement&&Jo.vertical&&(Xu=Sp(to,Jo.vertical,Kc,Ls.get("icon-text-fit-padding"),ha,cu)),er&&(to=Sp(to,er,Kc,Ls.get("icon-text-fit-padding"),ha,cu)));var Jc=function($x,yd){yd.x<0||yd.x>=8192||yd.y<0||yd.y>=8192||function(os,ll,Gp,bc,vd,xd,bh,hu,bd,du,_h,_d,wh,S0,jf,E0,D0,Vf,rf,wd,Js,_c,af,Du,L0){var Td,Ju,wc,sf,Qu,Uf=os.addToLineVertexArray(ll,Gp),qp=0,Gy=0,Wp=0,Yp=0,Zp=-1,Ad=-1,ec={},I0=Vn(""),Rl=0,Xp=0;if(void 0===hu._unevaluatedLayout.getValue("text-radial-offset")?(Rl=(Td=hu.layout.get("text-offset").evaluate(Js,{},Du).map(function(Sd){return 24*Sd}))[0],Xp=Td[1]):(Rl=24*hu.layout.get("text-radial-offset").evaluate(Js,{},Du),Xp=Ip),os.allowVerticalPlacement&&bc.vertical){var P0=hu.layout.get("text-rotate").evaluate(Js,{},Du)+90;sf=new ad(bd,ll,du,_h,_d,bc.vertical,wh,S0,jf,P0),bh&&(Qu=new ad(bd,ll,du,_h,_d,bh,D0,Vf,jf,P0))}if(vd){var O0=hu.layout.get("icon-rotate").evaluate(Js,{}),$p="none"!==hu.layout.get("icon-text-fit"),qy=l0(vd,O0,af,$p),Kp=bh?l0(bh,O0,af,$p):void 0;wc=new ad(bd,ll,du,_h,_d,vd,D0,Vf,!1,O0),qp=4*qy.length;var Md=os.iconSizeData,Hf=null;"source"===Md.kind?(Hf=[128*hu.layout.get("icon-size").evaluate(Js,{})])[0]>32640&&D(os.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):"composite"===Md.kind&&((Hf=[128*_c.compositeIconSizes[0].evaluate(Js,{},Du),128*_c.compositeIconSizes[1].evaluate(Js,{},Du)])[0]>32640||Hf[1]>32640)&&D(os.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),os.addSymbols(os.icon,qy,Hf,wd,rf,Js,!1,ll,Uf.lineStartIndex,Uf.lineLength,-1,Du),Zp=os.icon.placedSymbolArray.length-1,Kp&&(Gy=4*Kp.length,os.addSymbols(os.icon,Kp,Hf,wd,rf,Js,Pl.vertical,ll,Uf.lineStartIndex,Uf.lineLength,-1,Du),Ad=os.icon.placedSymbolArray.length-1)}for(var R0 in bc.horizontal){var kd=bc.horizontal[R0];if(!Ju){I0=Vn(kd.text);var Wy=hu.layout.get("text-rotate").evaluate(Js,{},Du);Ju=new ad(bd,ll,du,_h,_d,kd,wh,S0,jf,Wy)}var Jp=1===kd.positionedLines.length;if(Wp+=c0(os,ll,kd,xd,hu,jf,Js,E0,Uf,bc.vertical?Pl.horizontal:Pl.horizontalOnly,Jp?Object.keys(bc.horizontal):[R0],ec,Zp,_c,Du),Jp)break}bc.vertical&&(Yp+=c0(os,ll,bc.vertical,xd,hu,jf,Js,E0,Uf,Pl.vertical,["vertical"],ec,Ad,_c,Du));var Yy=Ju?Ju.boxStartIndex:os.collisionBoxArray.length,F0=Ju?Ju.boxEndIndex:os.collisionBoxArray.length,Zy=sf?sf.boxStartIndex:os.collisionBoxArray.length,Xy=sf?sf.boxEndIndex:os.collisionBoxArray.length,z0=wc?wc.boxStartIndex:os.collisionBoxArray.length,N0=wc?wc.boxEndIndex:os.collisionBoxArray.length,$y=Qu?Qu.boxStartIndex:os.collisionBoxArray.length,Lu=Qu?Qu.boxEndIndex:os.collisionBoxArray.length,pu=-1,Cd=function(Sd,Qp){return Sd&&Sd.circleDiameter?Math.max(Sd.circleDiameter,Qp):Qp};pu=Cd(Ju,pu),pu=Cd(sf,pu),pu=Cd(wc,pu);var B0=(pu=Cd(Qu,pu))>-1?1:0;B0&&(pu*=L0/24),os.glyphOffsetArray.length>=Ya.MAX_GLYPHS&&D("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==Js.sortKey&&os.addToSortKeyRanges(os.symbolInstances.length,Js.sortKey),os.symbolInstances.emplaceBack(ll.x,ll.y,ec.right>=0?ec.right:-1,ec.center>=0?ec.center:-1,ec.left>=0?ec.left:-1,ec.vertical||-1,Zp,Ad,I0,Yy,F0,Zy,Xy,z0,N0,$y,Lu,du,Wp,Yp,qp,Gy,B0,0,wh,Rl,Xp,pu)}(Aa,yd,$x,Jo,to,Yo,Xu,Aa.layers[0],Aa.collisionBoxArray,Ga.index,Ga.sourceLayerIndex,Aa.index,hd,dd,Of,wl,Gl,Pf,Ku,ha,Ga,Eo,Ol,Ks,Xa)};if("line"===vc)for(var xc=0,Qc=s0(Ga.geometry,0,0,8192,8192);xc<Qc.length;xc+=1)for(var Rf=Qc[xc],ef=0,Up=Oy(Rf,yc,fu,Jo.vertical||er,to,24,$u,Aa.overscaling,8192);ef<Up.length;ef+=1){var yh=Up[ef];er&&Yx(Aa,er.text,Vp,yh)||Jc(Rf,yh)}else if("line-center"===vc)for(var vh=0,gd=Ga.geometry;vh<gd.length;vh+=1){var tf=gd[vh];if(tf.length>1){var xh=Py(tf,fu,Jo.vertical||er,to,24,$u);xh&&Jc(tf,xh)}}else if("Polygon"===Ga.type)for(var zf=0,Hp=bp(Ga.geometry,0);zf<Hp.length;zf+=1){var nf=Hp[zf],Nf=Fy(nf,16);Jc(nf[0],new ch(Nf.x,Nf.y,0))}else if("LineString"===Ga.type)for(var Bf=0,md=Ga.geometry;Bf<md.length;Bf+=1){var A0=md[Bf];Jc(A0,new ch(A0[0].x,A0[0].y,0))}else if("Point"===Ga.type)for(var M0=0,Uy=Ga.geometry;M0<Uy.length;M0+=1)for(var k0=0,Hy=Uy[M0];k0<Hy.length;k0+=1){var C0=Hy[k0];Jc([C0],new ch(C0.x,C0.y,0))}}(E,ni,Ui,as,ce,kt,Pi,_i,Li,$s,Re)},Br=0,ui=E.features;Br<ui.length;Br+=1)Pr();Ae&&E.generateCollisionDebugBuffers()},e.perspective=function(E,z,K,ce,xe){var Ae,Re=1/Math.tan(z/2);return E[0]=Re/K,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=Re,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=-1,E[12]=0,E[13]=0,E[15]=0,null!=xe&&xe!==1/0?(E[10]=(xe+ce)*(Ae=1/(ce-xe)),E[14]=2*xe*ce*Ae):(E[10]=-1,E[14]=-2*ce),E},e.pick=function(E,z){for(var K={},ce=0;ce<z.length;ce++){var xe=z[ce];xe in E&&(K[xe]=E[xe])}return K},e.plugin=bs,e.polygonIntersectsPolygon=ds,e.postMapLoadEvent=je,e.postTurnstileEvent=Ee,e.potpack=t0,e.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],e.register=br,e.registerForPluginStateChange=function(E){return E({pluginStatus:Ji,pluginURL:po}),Mo.on("pluginStateChange",E),E},e.rotate=function(E,z,K){var ce=z[0],xe=z[1],Ae=z[2],Re=z[3],We=Math.sin(K),ot=Math.cos(K);return E[0]=ce*ot+Ae*We,E[1]=xe*ot+Re*We,E[2]=ce*-We+Ae*ot,E[3]=xe*-We+Re*ot,E},e.rotateX=function(E,z,K){var ce=Math.sin(K),xe=Math.cos(K),Ae=z[4],Re=z[5],We=z[6],ot=z[7],bt=z[8],kt=z[9],Xt=z[10],cn=z[11];return z!==E&&(E[0]=z[0],E[1]=z[1],E[2]=z[2],E[3]=z[3],E[12]=z[12],E[13]=z[13],E[14]=z[14],E[15]=z[15]),E[4]=Ae*xe+bt*ce,E[5]=Re*xe+kt*ce,E[6]=We*xe+Xt*ce,E[7]=ot*xe+cn*ce,E[8]=bt*xe-Ae*ce,E[9]=kt*xe-Re*ce,E[10]=Xt*xe-We*ce,E[11]=cn*xe-ot*ce,E},e.rotateZ=function(E,z,K){var ce=Math.sin(K),xe=Math.cos(K),Ae=z[0],Re=z[1],We=z[2],ot=z[3],bt=z[4],kt=z[5],Xt=z[6],cn=z[7];return z!==E&&(E[8]=z[8],E[9]=z[9],E[10]=z[10],E[11]=z[11],E[12]=z[12],E[13]=z[13],E[14]=z[14],E[15]=z[15]),E[0]=Ae*xe+bt*ce,E[1]=Re*xe+kt*ce,E[2]=We*xe+Xt*ce,E[3]=ot*xe+cn*ce,E[4]=bt*xe-Ae*ce,E[5]=kt*xe-Re*ce,E[6]=Xt*xe-We*ce,E[7]=cn*xe-ot*ce,E},e.scale=function(E,z,K){var ce=K[0],xe=K[1],Ae=K[2];return E[0]=z[0]*ce,E[1]=z[1]*ce,E[2]=z[2]*ce,E[3]=z[3]*ce,E[4]=z[4]*xe,E[5]=z[5]*xe,E[6]=z[6]*xe,E[7]=z[7]*xe,E[8]=z[8]*Ae,E[9]=z[9]*Ae,E[10]=z[10]*Ae,E[11]=z[11]*Ae,E[12]=z[12],E[13]=z[13],E[14]=z[14],E[15]=z[15],E},e.scale$1=function(E,z,K){return E[0]=z[0]*K,E[1]=z[1]*K,E[2]=z[2]*K,E[3]=z[3]*K,E},e.scale$2=function(E,z,K){return E[0]=z[0]*K,E[1]=z[1]*K,E[2]=z[2]*K,E},e.setCacheLimits=function(E,z){Ge=E,Ke=z},e.setRTLTextPlugin=function(E,z,K){if(void 0===K&&(K=!1),Ji===ja||Ji===Vo||Ji===kl)throw new Error("setRTLTextPlugin cannot be called multiple times.");po=G.resolveURL(E),Ji=ja,fs=z,Qi(),K||la()},e.sphericalToCartesian=function(E){var z=E[0],K=E[1],ce=E[2];return K+=90,K*=Math.PI/180,ce*=Math.PI/180,{x:z*Math.cos(K)*Math.sin(ce),y:z*Math.sin(K)*Math.sin(ce),z:z*Math.cos(ce)}},e.sqrLen=function(E){var z=E[0],K=E[1];return z*z+K*K},e.styleSpec=Be,e.sub=function(E,z,K){return E[0]=z[0]-K[0],E[1]=z[1]-K[1],E[2]=z[2]-K[2],E},e.symbolSize=Ep,e.transformMat3=function(E,z,K){var ce=z[0],xe=z[1],Ae=z[2];return E[0]=ce*K[0]+xe*K[3]+Ae*K[6],E[1]=ce*K[1]+xe*K[4]+Ae*K[7],E[2]=ce*K[2]+xe*K[5]+Ae*K[8],E},e.transformMat4=Wu,e.translate=function(E,z,K){var ce,xe,Ae,Re,We,ot,bt,kt,Xt,cn,nn,vn,Pn=K[0],Xn=K[1],Yn=K[2];return z===E?(E[12]=z[0]*Pn+z[4]*Xn+z[8]*Yn+z[12],E[13]=z[1]*Pn+z[5]*Xn+z[9]*Yn+z[13],E[14]=z[2]*Pn+z[6]*Xn+z[10]*Yn+z[14],E[15]=z[3]*Pn+z[7]*Xn+z[11]*Yn+z[15]):(xe=z[1],Ae=z[2],Re=z[3],We=z[4],ot=z[5],bt=z[6],kt=z[7],Xt=z[8],cn=z[9],nn=z[10],vn=z[11],E[0]=ce=z[0],E[1]=xe,E[2]=Ae,E[3]=Re,E[4]=We,E[5]=ot,E[6]=bt,E[7]=kt,E[8]=Xt,E[9]=cn,E[10]=nn,E[11]=vn,E[12]=ce*Pn+We*Xn+Xt*Yn+z[12],E[13]=xe*Pn+ot*Xn+cn*Yn+z[13],E[14]=Ae*Pn+bt*Xn+nn*Yn+z[14],E[15]=Re*Pn+kt*Xn+vn*Yn+z[15]),E},e.triggerPluginCompletionEvent=Ns,e.uniqueId=g,e.validateCustomStyleLayer=function(E){var z=[],K=E.id;return void 0===K&&z.push({message:"layers."+K+': missing required property "id"'}),void 0===E.render&&z.push({message:"layers."+K+': missing required method "render"'}),E.renderingMode&&"2d"!==E.renderingMode&&"3d"!==E.renderingMode&&z.push({message:"layers."+K+': property "renderingMode" must be either "2d" or "3d"'}),z},e.validateLight=Er,e.validateStyle=vr,e.values=function(E){var z=[];for(var K in E)z.push(E[K]);return z},e.vectorTile=Af,e.version="1.10.1",e.warnOnce=D,e.webpSupported=ie,e.window=self,e.wrap=h}),b(0,function(e){function o(Ie){var ze=typeof Ie;if("number"===ze||"boolean"===ze||"string"===ze||null==Ie)return JSON.stringify(Ie);if(Array.isArray(Ie)){for(var Ve="[",Be=0,at=Ie;Be<at.length;Be+=1)Ve+=o(at[Be])+",";return Ve+"]"}for(var gt=Object.keys(Ie).sort(),wt="{",_t=0;_t<gt.length;_t++)wt+=JSON.stringify(gt[_t])+":"+o(Ie[gt[_t]])+",";return wt+"}"}function a(Ie){for(var ze="",Ve=0,Be=e.refProperties;Ve<Be.length;Ve+=1)ze+="/"+o(Ie[Be[Ve]]);return ze}var l=function(Ie){this.keyCache={},Ie&&this.replace(Ie)};l.prototype.replace=function(Ie){this._layerConfigs={},this._layers={},this.update(Ie,[])},l.prototype.update=function(Ie,ze){for(var Ve=this,Be=0,at=Ie;Be<at.length;Be+=1){var gt=at[Be];this._layerConfigs[gt.id]=gt;var wt=this._layers[gt.id]=e.createStyleLayer(gt);wt._featureFilter=e.featureFilter(wt.filter),this.keyCache[gt.id]&&delete this.keyCache[gt.id]}for(var _t=0,Rt=ze;_t<Rt.length;_t+=1){var yt=Rt[_t];delete this.keyCache[yt],delete this._layerConfigs[yt],delete this._layers[yt]}this.familiesBySource={};for(var Vt=0,Nt=function(vt,Lt){for(var Gt={},Kt=0;Kt<vt.length;Kt++){var _n=Lt&&Lt[vt[Kt].id]||a(vt[Kt]);Lt&&(Lt[vt[Kt].id]=_n);var en=Gt[_n];en||(en=Gt[_n]=[]),en.push(vt[Kt])}var on=[];for(var wn in Gt)on.push(Gt[wn]);return on}(e.values(this._layerConfigs),this.keyCache);Vt<Nt.length;Vt+=1){var rt=Nt[Vt].map(function(vt){return Ve._layers[vt.id]}),Tt=rt[0];if("none"!==Tt.visibility){var Ut=Tt.source||"",Wt=this.familiesBySource[Ut];Wt||(Wt=this.familiesBySource[Ut]={});var sn=Tt.sourceLayer||"_geojsonTileLayer",He=Wt[sn];He||(He=Wt[sn]=[]),He.push(rt)}}};var i=function(Ie){var ze={},Ve=[];for(var Be in Ie){var at=Ie[Be],gt=ze[Be]={};for(var wt in at){var _t=at[+wt];if(_t&&0!==_t.bitmap.width&&0!==_t.bitmap.height){var Rt={x:0,y:0,w:_t.bitmap.width+2,h:_t.bitmap.height+2};Ve.push(Rt),gt[wt]={rect:Rt,metrics:_t.metrics}}}}var yt=e.potpack(Ve),rt=new e.AlphaImage({width:yt.w||1,height:yt.h||1});for(var Tt in Ie){var Ut=Ie[Tt];for(var Wt in Ut){var sn=Ut[+Wt];if(sn&&0!==sn.bitmap.width&&0!==sn.bitmap.height){var He=ze[Tt][Wt].rect;e.AlphaImage.copy(sn.bitmap,rt,{x:0,y:0},{x:He.x+1,y:He.y+1},sn.bitmap)}}}this.image=rt,this.positions=ze};e.register("GlyphAtlas",i);var d=function(Ie){this.tileID=new e.OverscaledTileID(Ie.tileID.overscaledZ,Ie.tileID.wrap,Ie.tileID.canonical.z,Ie.tileID.canonical.x,Ie.tileID.canonical.y),this.uid=Ie.uid,this.zoom=Ie.zoom,this.pixelRatio=Ie.pixelRatio,this.tileSize=Ie.tileSize,this.source=Ie.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=Ie.showCollisionBoxes,this.collectResourceTiming=!!Ie.collectResourceTiming,this.returnDependencies=!!Ie.returnDependencies,this.promoteId=Ie.promoteId};function u(Ie,ze,Ve){for(var Be=new e.EvaluationParameters(ze),at=0,gt=Ie;at<gt.length;at+=1)gt[at].recalculate(Be,Ve)}function s(Ie,ze){var Ve=e.getArrayBuffer(Ie.request,function(Be,at,gt,wt){Be?ze(Be):at&&ze(null,{vectorTile:new e.vectorTile.VectorTile(new e.pbf(at)),rawData:at,cacheControl:gt,expires:wt})});return function(){Ve.cancel(),ze()}}d.prototype.parse=function(Ie,ze,Ve,Be,at){var gt=this;this.status="parsing",this.data=Ie,this.collisionBoxArray=new e.CollisionBoxArray;var wt=new e.DictionaryCoder(Object.keys(Ie.layers).sort()),_t=new e.FeatureIndex(this.tileID,this.promoteId);_t.bucketLayerIDs=[];var Rt,yt,Vt,Nt,rt={},Tt={featureIndex:_t,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ve},Ut=ze.familiesBySource[this.source];for(var Wt in Ut){var sn=Ie.layers[Wt];if(sn){1===sn.version&&e.warnOnce('Vector tile source "'+this.source+'" layer "'+Wt+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var He=wt.encode(Wt),vt=[],Lt=0;Lt<sn.length;Lt++){var Gt=sn.feature(Lt),Kt=_t.getId(Gt,Wt);vt.push({feature:Gt,id:Kt,index:Lt,sourceLayerIndex:He})}for(var _n=0,en=Ut[Wt];_n<en.length;_n+=1){var on=en[_n],wn=on[0];wn.minzoom&&this.zoom<Math.floor(wn.minzoom)||wn.maxzoom&&this.zoom>=wn.maxzoom||"none"!==wn.visibility&&(u(on,this.zoom,Ve),(rt[wn.id]=wn.createBucket({index:_t.bucketLayerIDs.length,layers:on,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:He,sourceID:this.source})).populate(vt,Tt,this.tileID.canonical),_t.bucketLayerIDs.push(on.map(function(En){return En.id})))}}}var On=e.mapObject(Tt.glyphDependencies,function(En){return Object.keys(En).map(Number)});Object.keys(On).length?Be.send("getGlyphs",{uid:this.uid,stacks:On},function(En,Un){Rt||(Rt=En,yt=Un,pn.call(gt))}):yt={};var Dn=Object.keys(Tt.iconDependencies);Dn.length?Be.send("getImages",{icons:Dn,source:this.source,tileID:this.tileID,type:"icons"},function(En,Un){Rt||(Rt=En,Vt=Un,pn.call(gt))}):Vt={};var Tn=Object.keys(Tt.patternDependencies);function pn(){if(Rt)return at(Rt);if(yt&&Vt&&Nt){var En=new i(yt),Un=new e.ImageAtlas(Vt,Nt);for(var In in rt){var sr=rt[In];sr instanceof e.SymbolBucket?(u(sr.layers,this.zoom,Ve),e.performSymbolLayout(sr,yt,En.positions,Vt,Un.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):sr.hasPattern&&(sr instanceof e.LineBucket||sr instanceof e.FillBucket||sr instanceof e.FillExtrusionBucket)&&(u(sr.layers,this.zoom,Ve),sr.addFeatures(Tt,this.tileID.canonical,Un.patternPositions))}this.status="done",at(null,{buckets:e.values(rt).filter(function(fr){return!fr.isEmpty()}),featureIndex:_t,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:En.image,imageAtlas:Un,glyphMap:this.returnDependencies?yt:null,iconMap:this.returnDependencies?Vt:null,glyphPositions:this.returnDependencies?En.positions:null})}}Tn.length?Be.send("getImages",{icons:Tn,source:this.source,tileID:this.tileID,type:"patterns"},function(En,Un){Rt||(Rt=En,Nt=Un,pn.call(gt))}):Nt={},pn.call(this)};var c=function(Ie,ze,Ve,Be){this.actor=Ie,this.layerIndex=ze,this.availableImages=Ve,this.loadVectorData=Be||s,this.loading={},this.loaded={}};c.prototype.loadTile=function(Ie,ze){var Ve=this,Be=Ie.uid;this.loading||(this.loading={});var at=!!(Ie&&Ie.request&&Ie.request.collectResourceTiming)&&new e.RequestPerformance(Ie.request),gt=this.loading[Be]=new d(Ie);gt.abort=this.loadVectorData(Ie,function(wt,_t){if(delete Ve.loading[Be],wt||!_t)return gt.status="done",Ve.loaded[Be]=gt,ze(wt);var Rt=_t.rawData,yt={};_t.expires&&(yt.expires=_t.expires),_t.cacheControl&&(yt.cacheControl=_t.cacheControl);var Vt={};if(at){var Nt=at.finish();Nt&&(Vt.resourceTiming=JSON.parse(JSON.stringify(Nt)))}gt.vectorTile=_t.vectorTile,gt.parse(_t.vectorTile,Ve.layerIndex,Ve.availableImages,Ve.actor,function(rt,Tt){if(rt||!Tt)return ze(rt);ze(null,e.extend({rawTileData:Rt.slice(0)},Tt,yt,Vt))}),Ve.loaded=Ve.loaded||{},Ve.loaded[Be]=gt})},c.prototype.reloadTile=function(Ie,ze){var Ve=this,Be=this.loaded,at=Ie.uid,gt=this;if(Be&&Be[at]){var wt=Be[at];wt.showCollisionBoxes=Ie.showCollisionBoxes;var _t=function(Rt,yt){var Vt=wt.reloadCallback;Vt&&(delete wt.reloadCallback,wt.parse(wt.vectorTile,gt.layerIndex,Ve.availableImages,gt.actor,Vt)),ze(Rt,yt)};"parsing"===wt.status?wt.reloadCallback=_t:"done"===wt.status&&(wt.vectorTile?wt.parse(wt.vectorTile,this.layerIndex,this.availableImages,this.actor,_t):_t())}},c.prototype.abortTile=function(Ie,ze){var Ve=this.loading,Be=Ie.uid;Ve&&Ve[Be]&&Ve[Be].abort&&(Ve[Be].abort(),delete Ve[Be]),ze()},c.prototype.removeTile=function(Ie,ze){var Ve=this.loaded,Be=Ie.uid;Ve&&Ve[Be]&&delete Ve[Be],ze()};var h=e.window.ImageBitmap,p=function(){this.loaded={}};p.prototype.loadTile=function(Ie,ze){var Ve=Ie.uid,Be=Ie.encoding,at=Ie.rawImageData,gt=h&&at instanceof h?this.getImageData(at):at,wt=new e.DEMData(Ve,gt,Be);this.loaded=this.loaded||{},this.loaded[Ve]=wt,ze(null,wt)},p.prototype.getImageData=function(Ie){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(Ie.width,Ie.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=Ie.width,this.offscreenCanvas.height=Ie.height,this.offscreenCanvasContext.drawImage(Ie,0,0,Ie.width,Ie.height);var ze=this.offscreenCanvasContext.getImageData(-1,-1,Ie.width+2,Ie.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new e.RGBAImage({width:ze.width,height:ze.height},ze.data)},p.prototype.removeTile=function(Ie){var ze=this.loaded,Ve=Ie.uid;ze&&ze[Ve]&&delete ze[Ve]};var v=function Ie(ze,Ve){var Be,at=ze&&ze.type;if("FeatureCollection"===at)for(Be=0;Be<ze.features.length;Be++)Ie(ze.features[Be],Ve);else if("GeometryCollection"===at)for(Be=0;Be<ze.geometries.length;Be++)Ie(ze.geometries[Be],Ve);else if("Feature"===at)Ie(ze.geometry,Ve);else if("Polygon"===at)g(ze.coordinates,Ve);else if("MultiPolygon"===at)for(Be=0;Be<ze.coordinates.length;Be++)g(ze.coordinates[Be],Ve);return ze};function g(Ie,ze){if(0!==Ie.length){f(Ie[0],ze);for(var Ve=1;Ve<Ie.length;Ve++)f(Ie[Ve],!ze)}}function f(Ie,ze){for(var Ve=0,Be=0,at=Ie.length,gt=at-1;Be<at;gt=Be++)Ve+=(Ie[Be][0]-Ie[gt][0])*(Ie[gt][1]+Ie[Be][1]);Ve>=0!=!!ze&&Ie.reverse()}var w=e.vectorTile.VectorTileFeature.prototype.toGeoJSON,y=function(Ie){this._feature=Ie,this.extent=e.EXTENT,this.type=Ie.type,this.properties=Ie.tags,"id"in Ie&&!isNaN(Ie.id)&&(this.id=parseInt(Ie.id,10))};y.prototype.loadGeometry=function(){if(1===this._feature.type){for(var Ie=[],ze=0,Ve=this._feature.geometry;ze<Ve.length;ze+=1){var Be=Ve[ze];Ie.push([new e.Point$1(Be[0],Be[1])])}return Ie}for(var at=[],gt=0,wt=this._feature.geometry;gt<wt.length;gt+=1){for(var _t=[],Rt=0,yt=wt[gt];Rt<yt.length;Rt+=1){var Vt=yt[Rt];_t.push(new e.Point$1(Vt[0],Vt[1]))}at.push(_t)}return at},y.prototype.toGeoJSON=function(Ie,ze,Ve){return w.call(this,Ie,ze,Ve)};var M=function(Ie){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=e.EXTENT,this.length=Ie.length,this._features=Ie};M.prototype.feature=function(Ie){return new y(this._features[Ie])};var A=e.vectorTile.VectorTileFeature,k=C;function C(Ie,ze){this.options=ze||{},this.features=Ie,this.length=Ie.length}function P(Ie,ze){this.id="number"==typeof Ie.id?Ie.id:void 0,this.type=Ie.type,this.rawGeometry=1===Ie.type?[Ie.geometry]:Ie.geometry,this.properties=Ie.tags,this.extent=ze||4096}C.prototype.feature=function(Ie){return new P(this.features[Ie],this.options.extent)},P.prototype.loadGeometry=function(){var Ie=this.rawGeometry;this.geometry=[];for(var ze=0;ze<Ie.length;ze++){for(var Ve=Ie[ze],Be=[],at=0;at<Ve.length;at++)Be.push(new e.Point$1(Ve[at][0],Ve[at][1]));this.geometry.push(Be)}return this.geometry},P.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Ie=this.geometry,ze=1/0,Ve=-1/0,Be=1/0,at=-1/0,gt=0;gt<Ie.length;gt++)for(var wt=Ie[gt],_t=0;_t<wt.length;_t++){var Rt=wt[_t];ze=Math.min(ze,Rt.x),Ve=Math.max(Ve,Rt.x),Be=Math.min(Be,Rt.y),at=Math.max(at,Rt.y)}return[ze,Be,Ve,at]},P.prototype.toGeoJSON=A.prototype.toGeoJSON;var D=I,L=k;function I(Ie){var ze=new e.pbf;return function(Ve,Be){for(var at in Ve.layers)Be.writeMessage(3,B,Ve.layers[at])}(Ie,ze),ze.finish()}function B(Ie,ze){var Ve;ze.writeVarintField(15,Ie.version||1),ze.writeStringField(1,Ie.name||""),ze.writeVarintField(5,Ie.extent||4096);var Be={keys:[],values:[],keycache:{},valuecache:{}};for(Ve=0;Ve<Ie.length;Ve++)Be.feature=Ie.feature(Ve),ze.writeMessage(2,V,Be);var at=Be.keys;for(Ve=0;Ve<at.length;Ve++)ze.writeStringField(3,at[Ve]);var gt=Be.values;for(Ve=0;Ve<gt.length;Ve++)ze.writeMessage(4,$,gt[Ve])}function V(Ie,ze){var Ve=Ie.feature;void 0!==Ve.id&&ze.writeVarintField(1,Ve.id),ze.writeMessage(2,Z,Ie),ze.writeVarintField(3,Ve.type),ze.writeMessage(4,J,Ve)}function Z(Ie,ze){var Ve=Ie.feature,Be=Ie.keys,at=Ie.values,gt=Ie.keycache,wt=Ie.valuecache;for(var _t in Ve.properties){var Rt=gt[_t];void 0===Rt&&(Be.push(_t),gt[_t]=Rt=Be.length-1),ze.writeVarint(Rt);var yt=Ve.properties[_t],Vt=typeof yt;"string"!==Vt&&"boolean"!==Vt&&"number"!==Vt&&(yt=JSON.stringify(yt));var Nt=Vt+":"+yt,rt=wt[Nt];void 0===rt&&(at.push(yt),wt[Nt]=rt=at.length-1),ze.writeVarint(rt)}}function Y(Ie,ze){return(ze<<3)+(7&Ie)}function ee(Ie){return Ie<<1^Ie>>31}function J(Ie,ze){for(var Ve=Ie.loadGeometry(),Be=Ie.type,at=0,gt=0,wt=Ve.length,_t=0;_t<wt;_t++){var Rt=Ve[_t],yt=1;1===Be&&(yt=Rt.length),ze.writeVarint(Y(1,yt));for(var Vt=3===Be?Rt.length-1:Rt.length,Nt=0;Nt<Vt;Nt++){1===Nt&&1!==Be&&ze.writeVarint(Y(2,Vt-1));var rt=Rt[Nt].x-at,Tt=Rt[Nt].y-gt;ze.writeVarint(ee(rt)),ze.writeVarint(ee(Tt)),at+=rt,gt+=Tt}3===Be&&ze.writeVarint(Y(7,1))}}function $(Ie,ze){var Ve=typeof Ie;"string"===Ve?ze.writeStringField(1,Ie):"boolean"===Ve?ze.writeBooleanField(7,Ie):"number"===Ve&&(Ie%1!=0?ze.writeDoubleField(3,Ie):Ie<0?ze.writeSVarintField(6,Ie):ze.writeVarintField(5,Ie))}function Q(Ie,ze,Ve,Be,at,gt){if(!(at-Be<=Ve)){var wt=Be+at>>1;(function _t(Rt,yt,Vt,Nt,rt,Tt){for(;rt>Nt;){if(rt-Nt>600){var Ut=rt-Nt+1,Wt=Vt-Nt+1,sn=Math.log(Ut),He=.5*Math.exp(2*sn/3),vt=.5*Math.sqrt(sn*He*(Ut-He)/Ut)*(Wt-Ut/2<0?-1:1);_t(Rt,yt,Vt,Math.max(Nt,Math.floor(Vt-Wt*He/Ut+vt)),Math.min(rt,Math.floor(Vt+(Ut-Wt)*He/Ut+vt)),Tt)}var Kt=yt[2*Vt+Tt],_n=Nt,en=rt;for(se(Rt,yt,Nt,Vt),yt[2*rt+Tt]>Kt&&se(Rt,yt,Nt,rt);_n<en;){for(se(Rt,yt,_n,en),_n++,en--;yt[2*_n+Tt]<Kt;)_n++;for(;yt[2*en+Tt]>Kt;)en--}yt[2*Nt+Tt]===Kt?se(Rt,yt,Nt,en):se(Rt,yt,++en,rt),en<=Vt&&(Nt=en+1),Vt<=en&&(rt=en-1)}})(Ie,ze,wt,Be,at,gt%2),Q(Ie,ze,Ve,Be,wt-1,gt+1),Q(Ie,ze,Ve,wt+1,at,gt+1)}}function se(Ie,ze,Ve,Be){j(Ie,Ve,Be),j(ze,2*Ve,2*Be),j(ze,2*Ve+1,2*Be+1)}function j(Ie,ze,Ve){var Be=Ie[ze];Ie[ze]=Ie[Ve],Ie[Ve]=Be}function G(Ie,ze,Ve,Be){var at=Ie-Ve,gt=ze-Be;return at*at+gt*gt}D.fromVectorTileJs=I,D.fromGeojsonVt=function(Ie,ze){ze=ze||{};var Ve={};for(var Be in Ie)Ve[Be]=new k(Ie[Be].features,ze),Ve[Be].name=Be,Ve[Be].version=ze.version,Ve[Be].extent=ze.extent;return I({layers:Ve})},D.GeoJSONWrapper=L;var W=function(Ie){return Ie[0]},ie=function(Ie){return Ie[1]},q=function(Ie,ze,Ve,Be,at){void 0===ze&&(ze=W),void 0===Ve&&(Ve=ie),void 0===Be&&(Be=64),void 0===at&&(at=Float64Array),this.nodeSize=Be,this.points=Ie;for(var gt=Ie.length<65536?Uint16Array:Uint32Array,wt=this.ids=new gt(Ie.length),_t=this.coords=new at(2*Ie.length),Rt=0;Rt<Ie.length;Rt++)wt[Rt]=Rt,_t[2*Rt]=ze(Ie[Rt]),_t[2*Rt+1]=Ve(Ie[Rt]);Q(wt,_t,Be,0,wt.length-1,0)};q.prototype.range=function(Ie,ze,Ve,Be){return function(at,gt,wt,_t,Rt,yt,Vt){for(var Nt,rt,Tt=[0,at.length-1,0],Ut=[];Tt.length;){var Wt=Tt.pop(),sn=Tt.pop(),He=Tt.pop();if(sn-He<=Vt)for(var vt=He;vt<=sn;vt++)rt=gt[2*vt+1],(Nt=gt[2*vt])>=wt&&Nt<=Rt&&rt>=_t&&rt<=yt&&Ut.push(at[vt]);else{var Lt=Math.floor((He+sn)/2);rt=gt[2*Lt+1],(Nt=gt[2*Lt])>=wt&&Nt<=Rt&&rt>=_t&&rt<=yt&&Ut.push(at[Lt]);var Gt=(Wt+1)%2;(0===Wt?wt<=Nt:_t<=rt)&&(Tt.push(He),Tt.push(Lt-1),Tt.push(Gt)),(0===Wt?Rt>=Nt:yt>=rt)&&(Tt.push(Lt+1),Tt.push(sn),Tt.push(Gt))}}return Ut}(this.ids,this.coords,Ie,ze,Ve,Be,this.nodeSize)},q.prototype.within=function(Ie,ze,Ve){return function(Be,at,gt,wt,_t,Rt){for(var yt=[0,Be.length-1,0],Vt=[],Nt=_t*_t;yt.length;){var rt=yt.pop(),Tt=yt.pop(),Ut=yt.pop();if(Tt-Ut<=Rt)for(var Wt=Ut;Wt<=Tt;Wt++)G(at[2*Wt],at[2*Wt+1],gt,wt)<=Nt&&Vt.push(Be[Wt]);else{var sn=Math.floor((Ut+Tt)/2),He=at[2*sn],vt=at[2*sn+1];G(He,vt,gt,wt)<=Nt&&Vt.push(Be[sn]);var Lt=(rt+1)%2;(0===rt?gt-_t<=He:wt-_t<=vt)&&(yt.push(Ut),yt.push(sn-1),yt.push(Lt)),(0===rt?gt+_t>=He:wt+_t>=vt)&&(yt.push(sn+1),yt.push(Tt),yt.push(Lt))}}return Vt}(this.ids,this.coords,Ie,ze,Ve,this.nodeSize)};var te={minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(Ie){return Ie}},ne=function(Ie){this.options=we(Object.create(te),Ie),this.trees=new Array(this.options.maxZoom+1)};function le(Ie,ze,Ve,Be,at){return{x:Ie,y:ze,zoom:1/0,id:Ve,parentId:-1,numPoints:Be,properties:at}}function ue(Ie,ze){var Ve=Ie.geometry.coordinates,at=Ve[1];return{x:be(Ve[0]),y:ge(at),zoom:1/0,index:ze,parentId:-1}}function de(Ie){return{type:"Feature",id:Ie.id,properties:he(Ie),geometry:{type:"Point",coordinates:[(Be=Ie.x,360*(Be-.5)),(ze=Ie.y,Ve=(180-360*ze)*Math.PI/180,360*Math.atan(Math.exp(Ve))/Math.PI-90)]}};var ze,Ve,Be}function he(Ie){var ze=Ie.numPoints,Ve=ze>=1e4?Math.round(ze/1e3)+"k":ze>=1e3?Math.round(ze/100)/10+"k":ze;return we(we({},Ie.properties),{cluster:!0,cluster_id:Ie.id,point_count:ze,point_count_abbreviated:Ve})}function be(Ie){return Ie/360+.5}function ge(Ie){var ze=Math.sin(Ie*Math.PI/180),Ve=.5-.25*Math.log((1+ze)/(1-ze))/Math.PI;return Ve<0?0:Ve>1?1:Ve}function we(Ie,ze){for(var Ve in ze)Ie[Ve]=ze[Ve];return Ie}function Ce(Ie){return Ie.x}function De(Ie){return Ie.y}function Se(Ie,ze,Ve,Be,at,gt){var wt=at-Ve,_t=gt-Be;if(0!==wt||0!==_t){var Rt=((Ie-Ve)*wt+(ze-Be)*_t)/(wt*wt+_t*_t);Rt>1?(Ve=at,Be=gt):Rt>0&&(Ve+=wt*Rt,Be+=_t*Rt)}return(wt=Ie-Ve)*wt+(_t=ze-Be)*_t}function Fe(Ie,ze,Ve,Be){var at={id:void 0===Ie?null:Ie,type:ze,geometry:Ve,tags:Be,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(gt){var wt=gt.geometry,_t=gt.type;if("Point"===_t||"MultiPoint"===_t||"LineString"===_t)ve(gt,wt);else if("Polygon"===_t||"MultiLineString"===_t)for(var Rt=0;Rt<wt.length;Rt++)ve(gt,wt[Rt]);else if("MultiPolygon"===_t)for(Rt=0;Rt<wt.length;Rt++)for(var yt=0;yt<wt[Rt].length;yt++)ve(gt,wt[Rt][yt])}(at),at}function ve(Ie,ze){for(var Ve=0;Ve<ze.length;Ve+=3)Ie.minX=Math.min(Ie.minX,ze[Ve]),Ie.minY=Math.min(Ie.minY,ze[Ve+1]),Ie.maxX=Math.max(Ie.maxX,ze[Ve]),Ie.maxY=Math.max(Ie.maxY,ze[Ve+1])}function Te(Ie,ze,Ve,Be){if(ze.geometry){var at=ze.geometry.coordinates,gt=ze.geometry.type,wt=Math.pow(Ve.tolerance/((1<<Ve.maxZoom)*Ve.extent),2),_t=[],Rt=ze.id;if(Ve.promoteId?Rt=ze.properties[Ve.promoteId]:Ve.generateId&&(Rt=Be||0),"Point"===gt)Le(at,_t);else if("MultiPoint"===gt)for(var yt=0;yt<at.length;yt++)Le(at[yt],_t);else if("LineString"===gt)Ee(at,_t,wt,!1);else if("MultiLineString"===gt){if(Ve.lineMetrics){for(yt=0;yt<at.length;yt++)Ee(at[yt],_t=[],wt,!1),Ie.push(Fe(Rt,"LineString",_t,ze.properties));return}Pe(at,_t,wt,!1)}else if("Polygon"===gt)Pe(at,_t,wt,!0);else{if("MultiPolygon"!==gt){if("GeometryCollection"===gt){for(yt=0;yt<ze.geometry.geometries.length;yt++)Te(Ie,{id:Rt,geometry:ze.geometry.geometries[yt],properties:ze.properties},Ve,Be);return}throw new Error("Input data is not a valid GeoJSON object.")}for(yt=0;yt<at.length;yt++){var Vt=[];Pe(at[yt],Vt,wt,!0),_t.push(Vt)}}Ie.push(Fe(Rt,gt,_t,ze.properties))}}function Le(Ie,ze){ze.push(je(Ie[0])),ze.push(Ge(Ie[1])),ze.push(0)}function Ee(Ie,ze,Ve,Be){for(var at,gt,wt=0,_t=0;_t<Ie.length;_t++){var Rt=je(Ie[_t][0]),yt=Ge(Ie[_t][1]);ze.push(Rt),ze.push(yt),ze.push(0),_t>0&&(wt+=Be?(at*yt-Rt*gt)/2:Math.sqrt(Math.pow(Rt-at,2)+Math.pow(yt-gt,2))),at=Rt,gt=yt}var Vt=ze.length-3;ze[2]=1,function Nt(rt,Tt,Ut,Wt){for(var sn,He=Wt,vt=Ut-Tt>>1,Lt=Ut-Tt,Gt=rt[Tt],Kt=rt[Tt+1],_n=rt[Ut],en=rt[Ut+1],on=Tt+3;on<Ut;on+=3){var wn=Se(rt[on],rt[on+1],Gt,Kt,_n,en);if(wn>He)sn=on,He=wn;else if(wn===He){var On=Math.abs(on-vt);On<Lt&&(sn=on,Lt=On)}}He>Wt&&(sn-Tt>3&&Nt(rt,Tt,sn,Wt),rt[sn+2]=He,Ut-sn>3&&Nt(rt,sn,Ut,Wt))}(ze,0,Vt,Ve),ze[Vt+2]=1,ze.size=Math.abs(wt),ze.start=0,ze.end=ze.size}function Pe(Ie,ze,Ve,Be){for(var at=0;at<Ie.length;at++){var gt=[];Ee(Ie[at],gt,Ve,Be),ze.push(gt)}}function je(Ie){return Ie/360+.5}function Ge(Ie){var ze=Math.sin(Ie*Math.PI/180),Ve=.5-.25*Math.log((1+ze)/(1-ze))/Math.PI;return Ve<0?0:Ve>1?1:Ve}function Ke(Ie,ze,Ve,Be,at,gt,wt,_t){if(Be/=ze,gt>=(Ve/=ze)&&wt<Be)return Ie;if(wt<Ve||gt>=Be)return null;for(var Rt=[],yt=0;yt<Ie.length;yt++){var Vt=Ie[yt],Nt=Vt.geometry,rt=Vt.type,Tt=0===at?Vt.minX:Vt.minY,Ut=0===at?Vt.maxX:Vt.maxY;if(Tt>=Ve&&Ut<Be)Rt.push(Vt);else if(!(Ut<Ve||Tt>=Be)){var Wt=[];if("Point"===rt||"MultiPoint"===rt)lt(Nt,Wt,Ve,Be,at);else if("LineString"===rt)Ue(Nt,Wt,Ve,Be,at,!1,_t.lineMetrics);else if("MultiLineString"===rt)et(Nt,Wt,Ve,Be,at,!1);else if("Polygon"===rt)et(Nt,Wt,Ve,Be,at,!0);else if("MultiPolygon"===rt)for(var sn=0;sn<Nt.length;sn++){var He=[];et(Nt[sn],He,Ve,Be,at,!0),He.length&&Wt.push(He)}if(Wt.length){if(_t.lineMetrics&&"LineString"===rt){for(sn=0;sn<Wt.length;sn++)Rt.push(Fe(Vt.id,rt,Wt[sn],Vt.tags));continue}"LineString"!==rt&&"MultiLineString"!==rt||(1===Wt.length?(rt="LineString",Wt=Wt[0]):rt="MultiLineString"),"Point"!==rt&&"MultiPoint"!==rt||(rt=3===Wt.length?"Point":"MultiPoint"),Rt.push(Fe(Vt.id,rt,Wt,Vt.tags))}}}return Rt.length?Rt:null}function lt(Ie,ze,Ve,Be,at){for(var gt=0;gt<Ie.length;gt+=3){var wt=Ie[gt+at];wt>=Ve&&wt<=Be&&(ze.push(Ie[gt]),ze.push(Ie[gt+1]),ze.push(Ie[gt+2]))}}function Ue(Ie,ze,Ve,Be,at,gt,wt){for(var _t,Rt,yt=$e(Ie),Vt=0===at?ct:xt,Nt=Ie.start,rt=0;rt<Ie.length-3;rt+=3){var Tt=Ie[rt],Ut=Ie[rt+1],Wt=Ie[rt+2],sn=Ie[rt+3],He=Ie[rt+4],vt=0===at?Tt:Ut,Lt=0===at?sn:He,Gt=!1;wt&&(_t=Math.sqrt(Math.pow(Tt-sn,2)+Math.pow(Ut-He,2))),vt<Ve?Lt>Ve&&(Rt=Vt(yt,Tt,Ut,sn,He,Ve),wt&&(yt.start=Nt+_t*Rt)):vt>Be?Lt<Be&&(Rt=Vt(yt,Tt,Ut,sn,He,Be),wt&&(yt.start=Nt+_t*Rt)):tt(yt,Tt,Ut,Wt),Lt<Ve&&vt>=Ve&&(Rt=Vt(yt,Tt,Ut,sn,He,Ve),Gt=!0),Lt>Be&&vt<=Be&&(Rt=Vt(yt,Tt,Ut,sn,He,Be),Gt=!0),!gt&&Gt&&(wt&&(yt.end=Nt+_t*Rt),ze.push(yt),yt=$e(Ie)),wt&&(Nt+=_t)}var Kt=Ie.length-3;Tt=Ie[Kt],Ut=Ie[Kt+1],Wt=Ie[Kt+2],(vt=0===at?Tt:Ut)>=Ve&&vt<=Be&&tt(yt,Tt,Ut,Wt),Kt=yt.length-3,gt&&Kt>=3&&(yt[Kt]!==yt[0]||yt[Kt+1]!==yt[1])&&tt(yt,yt[0],yt[1],yt[2]),yt.length&&ze.push(yt)}function $e(Ie){var ze=[];return ze.size=Ie.size,ze.start=Ie.start,ze.end=Ie.end,ze}function et(Ie,ze,Ve,Be,at,gt){for(var wt=0;wt<Ie.length;wt++)Ue(Ie[wt],ze,Ve,Be,at,gt,!1)}function tt(Ie,ze,Ve,Be){Ie.push(ze),Ie.push(Ve),Ie.push(Be)}function ct(Ie,ze,Ve,Be,at,gt){var wt=(gt-ze)/(Be-ze);return Ie.push(gt),Ie.push(Ve+(at-Ve)*wt),Ie.push(1),wt}function xt(Ie,ze,Ve,Be,at,gt){var wt=(gt-Ve)/(at-Ve);return Ie.push(ze+(Be-ze)*wt),Ie.push(gt),Ie.push(1),wt}function Ct(Ie,ze){for(var Ve=[],Be=0;Be<Ie.length;Be++){var at,gt=Ie[Be],wt=gt.type;if("Point"===wt||"MultiPoint"===wt||"LineString"===wt)at=Ht(gt.geometry,ze);else if("MultiLineString"===wt||"Polygon"===wt){at=[];for(var _t=0;_t<gt.geometry.length;_t++)at.push(Ht(gt.geometry[_t],ze))}else if("MultiPolygon"===wt)for(at=[],_t=0;_t<gt.geometry.length;_t++){for(var Rt=[],yt=0;yt<gt.geometry[_t].length;yt++)Rt.push(Ht(gt.geometry[_t][yt],ze));at.push(Rt)}Ve.push(Fe(gt.id,wt,at,gt.tags))}return Ve}function Ht(Ie,ze){var Ve=[];Ve.size=Ie.size,void 0!==Ie.start&&(Ve.start=Ie.start,Ve.end=Ie.end);for(var Be=0;Be<Ie.length;Be+=3)Ve.push(Ie[Be]+ze,Ie[Be+1],Ie[Be+2]);return Ve}function zt(Ie,ze){if(Ie.transformed)return Ie;var Ve,Be,at,gt=1<<Ie.z,wt=Ie.x,_t=Ie.y;for(Ve=0;Ve<Ie.features.length;Ve++){var Rt=Ie.features[Ve],yt=Rt.geometry,Vt=Rt.type;if(Rt.geometry=[],1===Vt)for(Be=0;Be<yt.length;Be+=2)Rt.geometry.push(ht(yt[Be],yt[Be+1],ze,gt,wt,_t));else for(Be=0;Be<yt.length;Be++){var Nt=[];for(at=0;at<yt[Be].length;at+=2)Nt.push(ht(yt[Be][at],yt[Be][at+1],ze,gt,wt,_t));Rt.geometry.push(Nt)}}return Ie.transformed=!0,Ie}function ht(Ie,ze,Ve,Be,at,gt){return[Math.round(Ve*(Ie*Be-at)),Math.round(Ve*(ze*Be-gt))]}function ut(Ie,ze,Ve,Be,at){for(var gt=ze===at.maxZoom?0:at.tolerance/((1<<ze)*at.extent),wt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ve,y:Be,z:ze,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},_t=0;_t<Ie.length;_t++){wt.numFeatures++,Ot(wt,Ie[_t],gt,at);var Rt=Ie[_t].minX,yt=Ie[_t].minY,Vt=Ie[_t].maxX,Nt=Ie[_t].maxY;Rt<wt.minX&&(wt.minX=Rt),yt<wt.minY&&(wt.minY=yt),Vt>wt.maxX&&(wt.maxX=Vt),Nt>wt.maxY&&(wt.maxY=Nt)}return wt}function Ot(Ie,ze,Ve,Be){var at=ze.geometry,gt=ze.type,wt=[];if("Point"===gt||"MultiPoint"===gt)for(var _t=0;_t<at.length;_t+=3)wt.push(at[_t]),wt.push(at[_t+1]),Ie.numPoints++,Ie.numSimplified++;else if("LineString"===gt)tn(wt,at,Ie,Ve,!1,!1);else if("MultiLineString"===gt||"Polygon"===gt)for(_t=0;_t<at.length;_t++)tn(wt,at[_t],Ie,Ve,"Polygon"===gt,0===_t);else if("MultiPolygon"===gt)for(var Rt=0;Rt<at.length;Rt++){var yt=at[Rt];for(_t=0;_t<yt.length;_t++)tn(wt,yt[_t],Ie,Ve,!0,0===_t)}if(wt.length){var Vt=ze.tags||null;if("LineString"===gt&&Be.lineMetrics){for(var Nt in Vt={},ze.tags)Vt[Nt]=ze.tags[Nt];Vt.mapbox_clip_start=at.start/at.size,Vt.mapbox_clip_end=at.end/at.size}var rt={geometry:wt,type:"Polygon"===gt||"MultiPolygon"===gt?3:"LineString"===gt||"MultiLineString"===gt?2:1,tags:Vt};null!==ze.id&&(rt.id=ze.id),Ie.features.push(rt)}}function tn(Ie,ze,Ve,Be,at,gt){var wt=Be*Be;if(Be>0&&ze.size<(at?wt:Be))Ve.numPoints+=ze.length/3;else{for(var _t=[],Rt=0;Rt<ze.length;Rt+=3)(0===Be||ze[Rt+2]>wt)&&(Ve.numSimplified++,_t.push(ze[Rt]),_t.push(ze[Rt+1])),Ve.numPoints++;at&&function(yt,Vt){for(var Nt=0,rt=0,Tt=yt.length,Ut=Tt-2;rt<Tt;Ut=rt,rt+=2)Nt+=(yt[rt]-yt[Ut])*(yt[rt+1]+yt[Ut+1]);if(Nt>0===Vt)for(rt=0,Tt=yt.length;rt<Tt/2;rt+=2){var Wt=yt[rt],sn=yt[rt+1];yt[rt]=yt[Tt-2-rt],yt[rt+1]=yt[Tt-1-rt],yt[Tt-2-rt]=Wt,yt[Tt-1-rt]=sn}}(_t,gt),Ie.push(_t)}}function un(Ie,ze){var Ve=(ze=this.options=function(at,gt){for(var wt in gt)at[wt]=gt[wt];return at}(Object.create(this.options),ze)).debug;if(Ve&&console.time("preprocess data"),ze.maxZoom<0||ze.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ze.promoteId&&ze.generateId)throw new Error("promoteId and generateId cannot be used together.");var at,gt,wt,_t,Rt,yt,Be=function(at,gt){var wt=[];if("FeatureCollection"===at.type)for(var _t=0;_t<at.features.length;_t++)Te(wt,at.features[_t],gt,_t);else Te(wt,"Feature"===at.type?at:{geometry:at},gt);return wt}(Ie,ze);this.tiles={},this.tileCoords=[],Ve&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ze.indexMaxZoom,ze.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(at=Be,gt=ze,wt=gt.buffer/gt.extent,_t=at,Rt=Ke(at,1,-1-wt,wt,0,-1,2,gt),yt=Ke(at,1,1-wt,2+wt,0,-1,2,gt),(Rt||yt)&&(_t=Ke(at,1,-wt,1+wt,0,-1,2,gt)||[],Rt&&(_t=Ct(Rt,1).concat(_t)),yt&&(_t=_t.concat(Ct(yt,-1)))),Be=_t).length&&this.splitTile(Be,0,0,0),Ve&&(Be.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function Ze(Ie,ze,Ve){return 32*((1<<Ie)*Ve+ze)+Ie}function Qe(Ie,ze){var Ve=Ie.tileID.canonical;if(!this._geoJSONIndex)return ze(null,null);var Be=this._geoJSONIndex.getTile(Ve.z,Ve.x,Ve.y);if(!Be)return ze(null,null);var at=new M(Be.features),gt=D(at);0===gt.byteOffset&&gt.byteLength===gt.buffer.byteLength||(gt=new Uint8Array(gt)),ze(null,{vectorTile:at,rawData:gt.buffer})}ne.prototype.load=function(Ie){var ze=this.options,Ve=ze.log,Be=ze.minZoom,at=ze.maxZoom,gt=ze.nodeSize;Ve&&console.time("total time");var wt="prepare "+Ie.length+" points";Ve&&console.time(wt),this.points=Ie;for(var _t=[],Rt=0;Rt<Ie.length;Rt++)Ie[Rt].geometry&&_t.push(ue(Ie[Rt],Rt));this.trees[at+1]=new q(_t,Ce,De,gt,Float32Array),Ve&&console.timeEnd(wt);for(var yt=at;yt>=Be;yt--){var Vt=+Date.now();_t=this._cluster(_t,yt),this.trees[yt]=new q(_t,Ce,De,gt,Float32Array),Ve&&console.log("z%d: %d clusters in %dms",yt,_t.length,+Date.now()-Vt)}return Ve&&console.timeEnd("total time"),this},ne.prototype.getClusters=function(Ie,ze){var Ve=((Ie[0]+180)%360+360)%360-180,Be=Math.max(-90,Math.min(90,Ie[1])),at=180===Ie[2]?180:((Ie[2]+180)%360+360)%360-180,gt=Math.max(-90,Math.min(90,Ie[3]));if(Ie[2]-Ie[0]>=360)Ve=-180,at=180;else if(Ve>at){var wt=this.getClusters([Ve,Be,180,gt],ze),_t=this.getClusters([-180,Be,at,gt],ze);return wt.concat(_t)}for(var Rt=this.trees[this._limitZoom(ze)],yt=[],Vt=0,Nt=Rt.range(be(Ve),ge(gt),be(at),ge(Be));Vt<Nt.length;Vt+=1){var Tt=Rt.points[Nt[Vt]];yt.push(Tt.numPoints?de(Tt):this.points[Tt.index])}return yt},ne.prototype.getChildren=function(Ie){var ze=this._getOriginId(Ie),Ve=this._getOriginZoom(Ie),Be="No cluster with the specified id.",at=this.trees[Ve];if(!at)throw new Error(Be);var gt=at.points[ze];if(!gt)throw new Error(Be);for(var wt=this.options.radius/(this.options.extent*Math.pow(2,Ve-1)),_t=[],Rt=0,yt=at.within(gt.x,gt.y,wt);Rt<yt.length;Rt+=1){var Nt=at.points[yt[Rt]];Nt.parentId===Ie&&_t.push(Nt.numPoints?de(Nt):this.points[Nt.index])}if(0===_t.length)throw new Error(Be);return _t},ne.prototype.getLeaves=function(Ie,ze,Ve){var Be=[];return this._appendLeaves(Be,Ie,ze=ze||10,Ve=Ve||0,0),Be},ne.prototype.getTile=function(Ie,ze,Ve){var Be=this.trees[this._limitZoom(Ie)],at=Math.pow(2,Ie),gt=this.options,_t=gt.radius/gt.extent,Rt=(Ve-_t)/at,yt=(Ve+1+_t)/at,Vt={features:[]};return this._addTileFeatures(Be.range((ze-_t)/at,Rt,(ze+1+_t)/at,yt),Be.points,ze,Ve,at,Vt),0===ze&&this._addTileFeatures(Be.range(1-_t/at,Rt,1,yt),Be.points,at,Ve,at,Vt),ze===at-1&&this._addTileFeatures(Be.range(0,Rt,_t/at,yt),Be.points,-1,Ve,at,Vt),Vt.features.length?Vt:null},ne.prototype.getClusterExpansionZoom=function(Ie){for(var ze=this._getOriginZoom(Ie)-1;ze<=this.options.maxZoom;){var Ve=this.getChildren(Ie);if(ze++,1!==Ve.length)break;Ie=Ve[0].properties.cluster_id}return ze},ne.prototype._appendLeaves=function(Ie,ze,Ve,Be,at){for(var gt=0,wt=this.getChildren(ze);gt<wt.length;gt+=1){var _t=wt[gt],Rt=_t.properties;if(Rt&&Rt.cluster?at+Rt.point_count<=Be?at+=Rt.point_count:at=this._appendLeaves(Ie,Rt.cluster_id,Ve,Be,at):at<Be?at++:Ie.push(_t),Ie.length===Ve)break}return at},ne.prototype._addTileFeatures=function(Ie,ze,Ve,Be,at,gt){for(var wt=0,_t=Ie;wt<_t.length;wt+=1){var Rt=ze[_t[wt]],yt=Rt.numPoints,Vt={type:1,geometry:[[Math.round(this.options.extent*(Rt.x*at-Ve)),Math.round(this.options.extent*(Rt.y*at-Be))]],tags:yt?he(Rt):this.points[Rt.index].properties},Nt=void 0;yt?Nt=Rt.id:this.options.generateId?Nt=Rt.index:this.points[Rt.index].id&&(Nt=this.points[Rt.index].id),void 0!==Nt&&(Vt.id=Nt),gt.features.push(Vt)}},ne.prototype._limitZoom=function(Ie){return Math.max(this.options.minZoom,Math.min(Ie,this.options.maxZoom+1))},ne.prototype._cluster=function(Ie,ze){for(var Ve=[],Be=this.options,wt=Be.reduce,_t=Be.radius/(Be.extent*Math.pow(2,ze)),Rt=0;Rt<Ie.length;Rt++){var yt=Ie[Rt];if(!(yt.zoom<=ze)){yt.zoom=ze;for(var Vt=this.trees[ze+1],Nt=Vt.within(yt.x,yt.y,_t),rt=yt.numPoints||1,Tt=yt.x*rt,Ut=yt.y*rt,Wt=wt&&rt>1?this._map(yt,!0):null,sn=(Rt<<5)+(ze+1)+this.points.length,He=0,vt=Nt;He<vt.length;He+=1){var Gt=Vt.points[vt[He]];if(!(Gt.zoom<=ze)){Gt.zoom=ze;var Kt=Gt.numPoints||1;Tt+=Gt.x*Kt,Ut+=Gt.y*Kt,rt+=Kt,Gt.parentId=sn,wt&&(Wt||(Wt=this._map(yt,!0)),wt(Wt,this._map(Gt)))}}1===rt?Ve.push(yt):(yt.parentId=sn,Ve.push(le(Tt/rt,Ut/rt,sn,rt,Wt)))}}return Ve},ne.prototype._getOriginId=function(Ie){return Ie-this.points.length>>5},ne.prototype._getOriginZoom=function(Ie){return(Ie-this.points.length)%32},ne.prototype._map=function(Ie,ze){if(Ie.numPoints)return ze?we({},Ie.properties):Ie.properties;var Ve=this.points[Ie.index].properties,Be=this.options.map(Ve);return ze&&Be===Ve?we({},Be):Be},un.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},un.prototype.splitTile=function(Ie,ze,Ve,Be,at,gt,wt){for(var _t=[Ie,ze,Ve,Be],Rt=this.options,yt=Rt.debug;_t.length;){Be=_t.pop(),Ve=_t.pop(),ze=_t.pop(),Ie=_t.pop();var Vt=1<<ze,Nt=Ze(ze,Ve,Be),rt=this.tiles[Nt];if(!rt&&(yt>1&&console.time("creation"),rt=this.tiles[Nt]=ut(Ie,ze,Ve,Be,Rt),this.tileCoords.push({z:ze,x:Ve,y:Be}),yt)){yt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ze,Ve,Be,rt.numFeatures,rt.numPoints,rt.numSimplified),console.timeEnd("creation"));var Tt="z"+ze;this.stats[Tt]=(this.stats[Tt]||0)+1,this.total++}if(rt.source=Ie,at){if(ze===Rt.maxZoom||ze===at)continue;var Ut=1<<at-ze;if(Ve!==Math.floor(gt/Ut)||Be!==Math.floor(wt/Ut))continue}else if(ze===Rt.indexMaxZoom||rt.numPoints<=Rt.indexMaxPoints)continue;if(rt.source=null,0!==Ie.length){yt>1&&console.time("clipping");var Wt,sn,He,vt,Lt,Gt,Kt=.5*Rt.buffer/Rt.extent,_n=.5-Kt,en=.5+Kt,on=1+Kt;Wt=sn=He=vt=null,Lt=Ke(Ie,Vt,Ve-Kt,Ve+en,0,rt.minX,rt.maxX,Rt),Gt=Ke(Ie,Vt,Ve+_n,Ve+on,0,rt.minX,rt.maxX,Rt),Ie=null,Lt&&(Wt=Ke(Lt,Vt,Be-Kt,Be+en,1,rt.minY,rt.maxY,Rt),sn=Ke(Lt,Vt,Be+_n,Be+on,1,rt.minY,rt.maxY,Rt),Lt=null),Gt&&(He=Ke(Gt,Vt,Be-Kt,Be+en,1,rt.minY,rt.maxY,Rt),vt=Ke(Gt,Vt,Be+_n,Be+on,1,rt.minY,rt.maxY,Rt),Gt=null),yt>1&&console.timeEnd("clipping"),_t.push(Wt||[],ze+1,2*Ve,2*Be),_t.push(sn||[],ze+1,2*Ve,2*Be+1),_t.push(He||[],ze+1,2*Ve+1,2*Be),_t.push(vt||[],ze+1,2*Ve+1,2*Be+1)}}},un.prototype.getTile=function(Ie,ze,Ve){var Be=this.options,at=Be.extent,gt=Be.debug;if(Ie<0||Ie>24)return null;var wt=1<<Ie,_t=Ze(Ie,ze=(ze%wt+wt)%wt,Ve);if(this.tiles[_t])return zt(this.tiles[_t],at);gt>1&&console.log("drilling down to z%d-%d-%d",Ie,ze,Ve);for(var Rt,yt=Ie,Vt=ze,Nt=Ve;!Rt&&yt>0;)yt--,Vt=Math.floor(Vt/2),Nt=Math.floor(Nt/2),Rt=this.tiles[Ze(yt,Vt,Nt)];return Rt&&Rt.source?(gt>1&&console.log("found parent tile z%d-%d-%d",yt,Vt,Nt),gt>1&&console.time("drilling down"),this.splitTile(Rt.source,yt,Vt,Nt,Ie,ze,Ve),gt>1&&console.timeEnd("drilling down"),this.tiles[_t]?zt(this.tiles[_t],at):null):null};var qe=function(Ie){function ze(Ve,Be,at,gt){Ie.call(this,Ve,Be,at,Qe),gt&&(this.loadGeoJSON=gt)}return Ie&&(ze.__proto__=Ie),(ze.prototype=Object.create(Ie&&Ie.prototype)).constructor=ze,ze.prototype.loadData=function(Ve,Be){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Be,this._pendingLoadDataParams=Ve,this._state&&"Idle"!==this._state?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},ze.prototype._loadData=function(){var Ve=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Be=this._pendingCallback,at=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var gt=!!(at&&at.request&&at.request.collectResourceTiming)&&new e.RequestPerformance(at.request);this.loadGeoJSON(at,function(wt,_t){if(wt||!_t)return Be(wt);if("object"!=typeof _t)return Be(new Error("Input data given to '"+at.source+"' is not a valid GeoJSON object."));v(_t,!0);try{Ve._geoJSONIndex=at.cluster?new ne(function(Vt){var Nt=Vt.superclusterOptions,rt=Vt.clusterProperties;if(!rt||!Nt)return Nt;for(var Tt={},Ut={},Wt={accumulated:null,zoom:0},sn={properties:null},He=Object.keys(rt),vt=0,Lt=He;vt<Lt.length;vt+=1){var Gt=Lt[vt],Kt=rt[Gt],_n=Kt[0],on=e.createExpression(Kt[1]),wn=e.createExpression("string"==typeof _n?[_n,["accumulated"],["get",Gt]]:_n);Tt[Gt]=on.value,Ut[Gt]=wn.value}return Nt.map=function(On){sn.properties=On;for(var Dn={},Tn=0,pn=He;Tn<pn.length;Tn+=1){var En=pn[Tn];Dn[En]=Tt[En].evaluate(Wt,sn)}return Dn},Nt.reduce=function(On,Dn){sn.properties=Dn;for(var Tn=0,pn=He;Tn<pn.length;Tn+=1){var En=pn[Tn];Wt.accumulated=On[En],On[En]=Ut[En].evaluate(Wt,sn)}},Nt}(at)).load(_t.features):new un(Vt=_t,at.geojsonVtOptions)}catch(Vt){return Be(Vt)}var Vt;Ve.loaded={};var Rt={};if(gt){var yt=gt.finish();yt&&(Rt.resourceTiming={},Rt.resourceTiming[at.source]=JSON.parse(JSON.stringify(yt)))}Be(null,Rt)})}},ze.prototype.coalesce=function(){"Coalescing"===this._state?this._state="Idle":"NeedsLoadData"===this._state&&(this._state="Coalescing",this._loadData())},ze.prototype.reloadTile=function(Ve,Be){var at=this.loaded;return at&&at[Ve.uid]?Ie.prototype.reloadTile.call(this,Ve,Be):this.loadTile(Ve,Be)},ze.prototype.loadGeoJSON=function(Ve,Be){if(Ve.request)e.getJSON(Ve.request,Be);else{if("string"!=typeof Ve.data)return Be(new Error("Input data given to '"+Ve.source+"' is not a valid GeoJSON object."));try{return Be(null,JSON.parse(Ve.data))}catch(at){return Be(new Error("Input data given to '"+Ve.source+"' is not a valid GeoJSON object."))}}},ze.prototype.removeSource=function(Ve,Be){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Be()},ze.prototype.getClusterExpansionZoom=function(Ve,Be){try{Be(null,this._geoJSONIndex.getClusterExpansionZoom(Ve.clusterId))}catch(at){Be(at)}},ze.prototype.getClusterChildren=function(Ve,Be){try{Be(null,this._geoJSONIndex.getChildren(Ve.clusterId))}catch(at){Be(at)}},ze.prototype.getClusterLeaves=function(Ve,Be){try{Be(null,this._geoJSONIndex.getLeaves(Ve.clusterId,Ve.limit,Ve.offset))}catch(at){Be(at)}},ze}(c),it=function(Ie){var ze=this;this.self=Ie,this.actor=new e.Actor(Ie,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:c,geojson:qe},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ve,Be){if(ze.workerSourceTypes[Ve])throw new Error('Worker source with name "'+Ve+'" already registered.');ze.workerSourceTypes[Ve]=Be},this.self.registerRTLTextPlugin=function(Ve){if(e.plugin.isParsed())throw new Error("RTL text plugin already registered.");e.plugin.applyArabicShaping=Ve.applyArabicShaping,e.plugin.processBidirectionalText=Ve.processBidirectionalText,e.plugin.processStyledBidirectionalText=Ve.processStyledBidirectionalText}};return it.prototype.setReferrer=function(Ie,ze){this.referrer=ze},it.prototype.setImages=function(Ie,ze,Ve){for(var Be in this.availableImages[Ie]=ze,this.workerSources[Ie]){var at=this.workerSources[Ie][Be];for(var gt in at)at[gt].availableImages=ze}Ve()},it.prototype.setLayers=function(Ie,ze,Ve){this.getLayerIndex(Ie).replace(ze),Ve()},it.prototype.updateLayers=function(Ie,ze,Ve){this.getLayerIndex(Ie).update(ze.layers,ze.removedIds),Ve()},it.prototype.loadTile=function(Ie,ze,Ve){this.getWorkerSource(Ie,ze.type,ze.source).loadTile(ze,Ve)},it.prototype.loadDEMTile=function(Ie,ze,Ve){this.getDEMWorkerSource(Ie,ze.source).loadTile(ze,Ve)},it.prototype.reloadTile=function(Ie,ze,Ve){this.getWorkerSource(Ie,ze.type,ze.source).reloadTile(ze,Ve)},it.prototype.abortTile=function(Ie,ze,Ve){this.getWorkerSource(Ie,ze.type,ze.source).abortTile(ze,Ve)},it.prototype.removeTile=function(Ie,ze,Ve){this.getWorkerSource(Ie,ze.type,ze.source).removeTile(ze,Ve)},it.prototype.removeDEMTile=function(Ie,ze){this.getDEMWorkerSource(Ie,ze.source).removeTile(ze)},it.prototype.removeSource=function(Ie,ze,Ve){if(this.workerSources[Ie]&&this.workerSources[Ie][ze.type]&&this.workerSources[Ie][ze.type][ze.source]){var Be=this.workerSources[Ie][ze.type][ze.source];delete this.workerSources[Ie][ze.type][ze.source],void 0!==Be.removeSource?Be.removeSource(ze,Ve):Ve()}},it.prototype.loadWorkerSource=function(Ie,ze,Ve){try{this.self.importScripts(ze.url),Ve()}catch(Be){Ve(Be.toString())}},it.prototype.syncRTLPluginState=function(Ie,ze,Ve){try{e.plugin.setState(ze);var Be=e.plugin.getPluginURL();if(e.plugin.isLoaded()&&!e.plugin.isParsed()&&null!=Be){this.self.importScripts(Be);var at=e.plugin.isParsed();Ve(at?void 0:new Error("RTL Text Plugin failed to import scripts from "+Be),at)}}catch(gt){Ve(gt.toString())}},it.prototype.getAvailableImages=function(Ie){var ze=this.availableImages[Ie];return ze||(ze=[]),ze},it.prototype.getLayerIndex=function(Ie){var ze=this.layerIndexes[Ie];return ze||(ze=this.layerIndexes[Ie]=new l),ze},it.prototype.getWorkerSource=function(Ie,ze,Ve){var Be=this;return this.workerSources[Ie]||(this.workerSources[Ie]={}),this.workerSources[Ie][ze]||(this.workerSources[Ie][ze]={}),this.workerSources[Ie][ze][Ve]||(this.workerSources[Ie][ze][Ve]=new this.workerSourceTypes[ze]({send:function(gt,wt,_t){Be.actor.send(gt,wt,_t,Ie)}},this.getLayerIndex(Ie),this.getAvailableImages(Ie))),this.workerSources[Ie][ze][Ve]},it.prototype.getDEMWorkerSource=function(Ie,ze){return this.demWorkerSources[Ie]||(this.demWorkerSources[Ie]={}),this.demWorkerSources[Ie][ze]||(this.demWorkerSources[Ie][ze]=new p),this.demWorkerSources[Ie][ze]},it.prototype.enforceCacheSizeLimit=function(Ie,ze){e.enforceCacheSizeLimit(ze)},"undefined"!=typeof WorkerGlobalScope&&void 0!==e.window&&e.window instanceof WorkerGlobalScope&&(e.window.worker=new it(e.window)),it}),b(0,function(e){var o=e.createCommonjsModule(function(O){function N(fe){return!H(fe)}function H(fe){return"undefined"==typeof window||"undefined"==typeof document?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var me,_e,ke=new Blob([""],{type:"text/javascript"}),Oe=URL.createObjectURL(ke);try{_e=new Worker(Oe),me=!0}catch(Xe){me=!1}return _e&&_e.terminate(),URL.revokeObjectURL(Oe),me}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var me=document.createElement("canvas");me.width=me.height=1;var _e=me.getContext("2d");if(!_e)return!1;var ke=_e.getImageData(0,0,1,1);return ke&&ke.width===me.width}()?(void 0===X[me=fe&&fe.failIfMajorPerformanceCaveat]&&(X[me]=function(_e){var Xe,nt,dt,ke=(Xe=_e,nt=document.createElement("canvas"),(dt=Object.create(N.webGLContextAttributes)).failIfMajorPerformanceCaveat=Xe,nt.probablySupportsContext?nt.probablySupportsContext("webgl",dt)||nt.probablySupportsContext("experimental-webgl",dt):nt.supportsContext?nt.supportsContext("webgl",dt)||nt.supportsContext("experimental-webgl",dt):nt.getContext("webgl",dt)||nt.getContext("experimental-webgl",dt));if(!ke)return!1;var Oe=ke.createShader(ke.VERTEX_SHADER);return!(!Oe||ke.isContextLost())&&(ke.shaderSource(Oe,"void main() {}"),ke.compileShader(Oe),!0===ke.getShaderParameter(Oe,ke.COMPILE_STATUS))}(me)),X[me]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var me}O.exports?O.exports=N:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=N,window.mapboxgl.notSupportedReason=H);var X={};N.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}}),a={create:function(O,N,H){var X=e.window.document.createElement(O);return void 0!==N&&(X.className=N),H&&H.appendChild(X),X},createNS:function(O,N){return e.window.document.createElementNS(O,N)}},l=e.window.document.documentElement.style;function i(O){if(!l)return O[0];for(var N=0;N<O.length;N++)if(O[N]in l)return O[N];return O[0]}var d,u=i(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);a.disableDrag=function(){l&&u&&(d=l[u],l[u]="none")},a.enableDrag=function(){l&&u&&(l[u]=d)};var s=i(["transform","WebkitTransform"]);a.setTransform=function(O,N){O.style[s]=N};var c=!1;try{var h=Object.defineProperty({},"passive",{get:function(){c=!0}});e.window.addEventListener("test",h,h),e.window.removeEventListener("test",h,h)}catch(O){c=!1}a.addEventListener=function(O,N,H,X){void 0===X&&(X={}),O.addEventListener(N,H,"passive"in X&&c?X:X.capture)},a.removeEventListener=function(O,N,H,X){void 0===X&&(X={}),O.removeEventListener(N,H,"passive"in X&&c?X:X.capture)};var p=function(O){O.preventDefault(),O.stopPropagation(),e.window.removeEventListener("click",p,!0)};function v(O){var N=O.userImage;return!!(N&&N.render&&N.render())&&(O.data.replace(new Uint8Array(N.data.buffer)),!0)}a.suppressClick=function(){e.window.addEventListener("click",p,!0),e.window.setTimeout(function(){e.window.removeEventListener("click",p,!0)},0)},a.mousePos=function(O,N){var H=O.getBoundingClientRect();return new e.Point(N.clientX-H.left-O.clientLeft,N.clientY-H.top-O.clientTop)},a.touchPos=function(O,N){for(var H=O.getBoundingClientRect(),X=[],fe=0;fe<N.length;fe++)X.push(new e.Point(N[fe].clientX-H.left-O.clientLeft,N[fe].clientY-H.top-O.clientTop));return X},a.mouseButton=function(O){return void 0!==e.window.InstallTrigger&&2===O.button&&O.ctrlKey&&e.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:O.button},a.remove=function(O){O.parentNode&&O.parentNode.removeChild(O)};var g=function(O){function N(){O.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new e.RGBAImage({width:1,height:1}),this.dirty=!0}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.isLoaded=function(){return this.loaded},N.prototype.setLoaded=function(H){if(this.loaded!==H&&(this.loaded=H,H)){for(var X=0,fe=this.requestors;X<fe.length;X+=1){var me=fe[X];this._notify(me.ids,me.callback)}this.requestors=[]}},N.prototype.getImage=function(H){return this.images[H]},N.prototype.addImage=function(H,X){this._validate(H,X)&&(this.images[H]=X)},N.prototype._validate=function(H,X){var fe=!0;return this._validateStretch(X.stretchX,X.data&&X.data.width)||(this.fire(new e.ErrorEvent(new Error('Image "'+H+'" has invalid "stretchX" value'))),fe=!1),this._validateStretch(X.stretchY,X.data&&X.data.height)||(this.fire(new e.ErrorEvent(new Error('Image "'+H+'" has invalid "stretchY" value'))),fe=!1),this._validateContent(X.content,X)||(this.fire(new e.ErrorEvent(new Error('Image "'+H+'" has invalid "content" value'))),fe=!1),fe},N.prototype._validateStretch=function(H,X){if(!H)return!0;for(var fe=0,me=0,_e=H;me<_e.length;me+=1){var ke=_e[me];if(ke[0]<fe||ke[1]<ke[0]||X<ke[1])return!1;fe=ke[1]}return!0},N.prototype._validateContent=function(H,X){return!(H&&(4!==H.length||H[0]<0||X.data.width<H[0]||H[1]<0||X.data.height<H[1]||H[2]<0||X.data.width<H[2]||H[3]<0||X.data.height<H[3]||H[2]<H[0]||H[3]<H[1]))},N.prototype.updateImage=function(H,X){X.version=this.images[H].version+1,this.images[H]=X,this.updatedImages[H]=!0},N.prototype.removeImage=function(H){var X=this.images[H];delete this.images[H],delete this.patterns[H],X.userImage&&X.userImage.onRemove&&X.userImage.onRemove()},N.prototype.listImages=function(){return Object.keys(this.images)},N.prototype.getImages=function(H,X){var fe=!0;if(!this.isLoaded())for(var me=0,_e=H;me<_e.length;me+=1)this.images[_e[me]]||(fe=!1);this.isLoaded()||fe?this._notify(H,X):this.requestors.push({ids:H,callback:X})},N.prototype._notify=function(H,X){for(var fe={},me=0,_e=H;me<_e.length;me+=1){var ke=_e[me];this.images[ke]||this.fire(new e.Event("styleimagemissing",{id:ke}));var Oe=this.images[ke];Oe?fe[ke]={data:Oe.data.clone(),pixelRatio:Oe.pixelRatio,sdf:Oe.sdf,version:Oe.version,stretchX:Oe.stretchX,stretchY:Oe.stretchY,content:Oe.content,hasRenderCallback:Boolean(Oe.userImage&&Oe.userImage.render)}:e.warnOnce('Image "'+ke+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}X(null,fe)},N.prototype.getPixelSize=function(){var H=this.atlasImage;return{width:H.width,height:H.height}},N.prototype.getPattern=function(H){var X=this.patterns[H],fe=this.getImage(H);if(!fe)return null;if(X&&X.position.version===fe.version)return X.position;if(X)X.position.version=fe.version;else{var me={w:fe.data.width+2,h:fe.data.height+2,x:0,y:0},_e=new e.ImagePosition(me,fe);this.patterns[H]={bin:me,position:_e}}return this._updatePatternAtlas(),this.patterns[H].position},N.prototype.bind=function(H){var X=H.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new e.Texture(H,this.atlasImage,X.RGBA),this.atlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE)},N.prototype._updatePatternAtlas=function(){var H=[];for(var X in this.patterns)H.push(this.patterns[X].bin);var fe=e.potpack(H),me=fe.w,_e=fe.h,ke=this.atlasImage;for(var Oe in ke.resize({width:me||1,height:_e||1}),this.patterns){var Xe=this.patterns[Oe].bin,nt=Xe.x+1,dt=Xe.y+1,Dt=this.images[Oe].data,Ft=Dt.width,It=Dt.height;e.RGBAImage.copy(Dt,ke,{x:0,y:0},{x:nt,y:dt},{width:Ft,height:It}),e.RGBAImage.copy(Dt,ke,{x:0,y:It-1},{x:nt,y:dt-1},{width:Ft,height:1}),e.RGBAImage.copy(Dt,ke,{x:0,y:0},{x:nt,y:dt+It},{width:Ft,height:1}),e.RGBAImage.copy(Dt,ke,{x:Ft-1,y:0},{x:nt-1,y:dt},{width:1,height:It}),e.RGBAImage.copy(Dt,ke,{x:0,y:0},{x:nt+Ft,y:dt},{width:1,height:It})}this.dirty=!0},N.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},N.prototype.dispatchRenderCallbacks=function(H){for(var X=0,fe=H;X<fe.length;X+=1){var me=fe[X];if(!this.callbackDispatchedThisFrame[me]){this.callbackDispatchedThisFrame[me]=!0;var _e=this.images[me];v(_e)&&this.updateImage(me,_e)}}},N}(e.Evented),f=M,w=M,y=1e20;function M(O,N,H,X,fe,me){this.fontSize=O||24,this.buffer=void 0===N?3:N,this.cutoff=X||.25,this.fontFamily=fe||"sans-serif",this.fontWeight=me||"normal",this.radius=H||8;var _e=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=_e,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(_e*_e),this.gridInner=new Float64Array(_e*_e),this.f=new Float64Array(_e),this.d=new Float64Array(_e),this.z=new Float64Array(_e+1),this.v=new Int16Array(_e),this.middle=Math.round(_e/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function A(O,N,H,X,fe,me,_e){for(var ke=0;ke<N;ke++){for(var Oe=0;Oe<H;Oe++)X[Oe]=O[Oe*N+ke];for(k(X,fe,me,_e,H),Oe=0;Oe<H;Oe++)O[Oe*N+ke]=fe[Oe]}for(Oe=0;Oe<H;Oe++){for(ke=0;ke<N;ke++)X[ke]=O[Oe*N+ke];for(k(X,fe,me,_e,N),ke=0;ke<N;ke++)O[Oe*N+ke]=Math.sqrt(fe[ke])}}function k(O,N,H,X,fe){H[0]=0,X[0]=-y,X[1]=+y;for(var me=1,_e=0;me<fe;me++){for(var ke=(O[me]+me*me-(O[H[_e]]+H[_e]*H[_e]))/(2*me-2*H[_e]);ke<=X[_e];)_e--,ke=(O[me]+me*me-(O[H[_e]]+H[_e]*H[_e]))/(2*me-2*H[_e]);H[++_e]=me,X[_e]=ke,X[_e+1]=+y}for(me=0,_e=0;me<fe;me++){for(;X[_e+1]<me;)_e++;N[me]=(me-H[_e])*(me-H[_e])+O[H[_e]]}}M.prototype.draw=function(O){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(O,this.buffer,this.middle);for(var N=this.ctx.getImageData(0,0,this.size,this.size),H=new Uint8ClampedArray(this.size*this.size),X=0;X<this.size*this.size;X++){var fe=N.data[4*X+3]/255;this.gridOuter[X]=1===fe?0:0===fe?y:Math.pow(Math.max(0,.5-fe),2),this.gridInner[X]=1===fe?y:0===fe?0:Math.pow(Math.max(0,fe-.5),2)}for(A(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),A(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),X=0;X<this.size*this.size;X++)H[X]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[X]-this.gridInner[X])/this.radius+this.cutoff))));return H},f.default=w;var C=function(O,N){this.requestManager=O,this.localIdeographFontFamily=N,this.entries={}};C.prototype.setURL=function(O){this.url=O},C.prototype.getGlyphs=function(O,N){var H=this,X=[];for(var fe in O)for(var me=0,_e=O[fe];me<_e.length;me+=1)X.push({stack:fe,id:_e[me]});e.asyncAll(X,function(Oe,Xe){var nt=Oe.stack,dt=Oe.id,Dt=H.entries[nt];Dt||(Dt=H.entries[nt]={glyphs:{},requests:{},ranges:{}});var Ft=Dt.glyphs[dt];if(void 0===Ft){if(Ft=H._tinySDF(Dt,nt,dt))return Dt.glyphs[dt]=Ft,void Xe(null,{stack:nt,id:dt,glyph:Ft});var It=Math.floor(dt/256);if(256*It>65535)Xe(new Error("glyphs > 65535 not supported"));else if(Dt.ranges[It])Xe(null,{stack:nt,id:dt,glyph:Ft});else{var Pt=Dt.requests[It];Pt||(Pt=Dt.requests[It]=[],C.loadGlyphRange(nt,It,H.url,H.requestManager,function(Et,Zt){if(Zt){for(var qt in Zt)H._doesCharSupportLocalGlyph(+qt)||(Dt.glyphs[+qt]=Zt[+qt]);Dt.ranges[It]=!0}for(var $t=0,yn=Pt;$t<yn.length;$t+=1)(0,yn[$t])(Et,Zt);delete Dt.requests[It]})),Pt.push(function(Et,Zt){Et?Xe(Et):Zt&&Xe(null,{stack:nt,id:dt,glyph:Zt[dt]||null})})}}else Xe(null,{stack:nt,id:dt,glyph:Ft})},function(Oe,Xe){if(Oe)N(Oe);else if(Xe){for(var nt={},dt=0,Dt=Xe;dt<Dt.length;dt+=1){var Ft=Dt[dt],It=Ft.stack,Pt=Ft.id,Et=Ft.glyph;(nt[It]||(nt[It]={}))[Pt]=Et&&{id:Et.id,bitmap:Et.bitmap.clone(),metrics:Et.metrics}}N(null,nt)}})},C.prototype._doesCharSupportLocalGlyph=function(O){return!!this.localIdeographFontFamily&&(e.isChar["CJK Unified Ideographs"](O)||e.isChar["Hangul Syllables"](O)||e.isChar.Hiragana(O)||e.isChar.Katakana(O))},C.prototype._tinySDF=function(O,N,H){var X=this.localIdeographFontFamily;if(X&&this._doesCharSupportLocalGlyph(H)){var fe=O.tinySDF;if(!fe){var me="400";/bold/i.test(N)?me="900":/medium/i.test(N)?me="500":/light/i.test(N)&&(me="200"),fe=O.tinySDF=new C.TinySDF(24,3,8,.25,X,me)}return{id:H,bitmap:new e.AlphaImage({width:30,height:30},fe.draw(String.fromCharCode(H))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},C.loadGlyphRange=function(O,N,H,X,fe){var me=256*N,_e=me+255,ke=X.transformRequest(X.normalizeGlyphsURL(H).replace("{fontstack}",O).replace("{range}",me+"-"+_e),e.ResourceType.Glyphs);e.getArrayBuffer(ke,function(Oe,Xe){if(Oe)fe(Oe);else if(Xe){for(var nt={},dt=0,Dt=e.parseGlyphPBF(Xe);dt<Dt.length;dt+=1){var Ft=Dt[dt];nt[Ft.id]=Ft}fe(null,nt)}})},C.TinySDF=f;var P=function(){this.specification=e.styleSpec.light.position};P.prototype.possiblyEvaluate=function(O,N){return e.sphericalToCartesian(O.expression.evaluate(N))},P.prototype.interpolate=function(O,N,H){return{x:e.number(O.x,N.x,H),y:e.number(O.y,N.y,H),z:e.number(O.z,N.z,H)}};var D=new e.Properties({anchor:new e.DataConstantProperty(e.styleSpec.light.anchor),position:new P,color:new e.DataConstantProperty(e.styleSpec.light.color),intensity:new e.DataConstantProperty(e.styleSpec.light.intensity)}),F=function(O){function N(H){O.call(this),this._transitionable=new e.Transitionable(D),this.setLight(H),this._transitioning=this._transitionable.untransitioned()}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getLight=function(){return this._transitionable.serialize()},N.prototype.setLight=function(H,X){if(void 0===X&&(X={}),!this._validate(e.validateLight,H,X))for(var fe in H){var me=H[fe];e.endsWith(fe,"-transition")?this._transitionable.setTransition(fe.slice(0,-"-transition".length),me):this._transitionable.setValue(fe,me)}},N.prototype.updateTransitions=function(H){this._transitioning=this._transitionable.transitioned(H,this._transitioning)},N.prototype.hasTransition=function(){return this._transitioning.hasTransition()},N.prototype.recalculate=function(H){this.properties=this._transitioning.possiblyEvaluate(H)},N.prototype._validate=function(H,X,fe){return(!fe||!1!==fe.validate)&&e.emitValidationErrors(this,H.call(e.validateStyle,e.extend({value:X,style:{glyphs:!0,sprite:!0},styleSpec:e.styleSpec})))},N}(e.Evented),R=function(O,N){this.width=O,this.height=N,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};R.prototype.getDash=function(O,N){var H=O.join(",")+String(N);return this.dashEntry[H]||(this.dashEntry[H]=this.addDash(O,N)),this.dashEntry[H]},R.prototype.getDashRanges=function(O,N,H){var X=[],fe=O.length%2==1?-O[O.length-1]*H:0,me=O[0]*H,_e=!0;X.push({left:fe,right:me,isDash:_e,zeroLength:0===O[0]});for(var ke=O[0],Oe=1;Oe<O.length;Oe++){var Xe=O[Oe];fe=ke*H,me=(ke+=Xe)*H,X.push({left:fe,right:me,isDash:_e=!_e,zeroLength:0===Xe})}return X},R.prototype.addRoundDash=function(O,N,H){for(var X=N/2,fe=-H;fe<=H;fe++)for(var _e=this.width*(this.nextRow+H+fe),ke=0,Oe=O[ke],Xe=0;Xe<this.width;Xe++){Xe/Oe.right>1&&(Oe=O[++ke]);var nt=Math.abs(Xe-Oe.left),dt=Math.abs(Xe-Oe.right),Dt=Math.min(nt,dt),Ft=void 0,It=fe/H*(X+1);if(Oe.isDash){var Pt=X-Math.abs(It);Ft=Math.sqrt(Dt*Dt+Pt*Pt)}else Ft=X-Math.sqrt(Dt*Dt+It*It);this.data[_e+Xe]=Math.max(0,Math.min(255,Ft+128))}},R.prototype.addRegularDash=function(O){for(var N=O.length-1;N>=0;--N){var H=O[N],X=O[N+1];H.zeroLength?O.splice(N,1):X&&X.isDash===H.isDash&&(X.left=H.left,O.splice(N,1))}var fe=O[0],me=O[O.length-1];fe.isDash===me.isDash&&(fe.left=me.left-this.width,me.right=fe.right+this.width);for(var _e=this.width*this.nextRow,ke=0,Oe=O[ke],Xe=0;Xe<this.width;Xe++){Xe/Oe.right>1&&(Oe=O[++ke]);var nt=Math.abs(Xe-Oe.left),dt=Math.abs(Xe-Oe.right),Dt=Math.min(nt,dt);this.data[_e+Xe]=Math.max(0,Math.min(255,(Oe.isDash?Dt:-Dt)+128))}},R.prototype.addDash=function(O,N){var H=N?7:0,X=2*H+1;if(this.nextRow+X>this.height)return e.warnOnce("LineAtlas out of space"),null;for(var fe=0,me=0;me<O.length;me++)fe+=O[me];if(0!==fe){var _e=this.width/fe,ke=this.getDashRanges(O,this.width,_e);N?this.addRoundDash(ke,_e,H):this.addRegularDash(ke)}var Oe={y:(this.nextRow+H+.5)/this.height,height:2*H/this.height,width:fe};return this.nextRow+=X,this.dirty=!0,Oe},R.prototype.bind=function(O){var N=O.gl;this.texture?(N.bindTexture(N.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,N.texSubImage2D(N.TEXTURE_2D,0,0,0,this.width,this.height,N.ALPHA,N.UNSIGNED_BYTE,this.data))):(this.texture=N.createTexture(),N.bindTexture(N.TEXTURE_2D,this.texture),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_S,N.REPEAT),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_WRAP_T,N.REPEAT),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MIN_FILTER,N.LINEAR),N.texParameteri(N.TEXTURE_2D,N.TEXTURE_MAG_FILTER,N.LINEAR),N.texImage2D(N.TEXTURE_2D,0,N.ALPHA,this.width,this.height,0,N.ALPHA,N.UNSIGNED_BYTE,this.data))};var L=function O(N,H){this.workerPool=N,this.actors=[],this.currentActor=0,this.id=e.uniqueId();for(var X=this.workerPool.acquire(this.id),fe=0;fe<X.length;fe++){var _e=new O.Actor(X[fe],H,this.id);_e.name="Worker "+fe,this.actors.push(_e)}};function I(O,N,H){var X=function(fe,me){if(fe)return H(fe);if(me){var _e=e.pick(e.extend(me,O),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);me.vector_layers&&(_e.vectorLayers=me.vector_layers,_e.vectorLayerIds=_e.vectorLayers.map(function(ke){return ke.id})),_e.tiles=N.canonicalizeTileset(_e,O.url),H(null,_e)}};return O.url?e.getJSON(N.transformRequest(N.normalizeSourceURL(O.url),e.ResourceType.Source),X):e.browser.frame(function(){return X(null,O)})}L.prototype.broadcast=function(O,N,H){e.asyncAll(this.actors,function(X,fe){X.send(O,N,fe)},H=H||function(){})},L.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},L.prototype.remove=function(){this.actors.forEach(function(O){O.remove()}),this.actors=[],this.workerPool.release(this.id)},L.Actor=e.Actor;var B=function(O,N,H){this.bounds=e.LngLatBounds.convert(this.validateBounds(O)),this.minzoom=N||0,this.maxzoom=H||24};B.prototype.validateBounds=function(O){return Array.isArray(O)&&4===O.length?[Math.max(-180,O[0]),Math.max(-90,O[1]),Math.min(180,O[2]),Math.min(90,O[3])]:[-180,-90,180,90]},B.prototype.contains=function(O){var N=Math.pow(2,O.z),H=Math.floor(e.mercatorXfromLng(this.bounds.getWest())*N),X=Math.floor(e.mercatorYfromLat(this.bounds.getNorth())*N),fe=Math.ceil(e.mercatorXfromLng(this.bounds.getEast())*N),me=Math.ceil(e.mercatorYfromLat(this.bounds.getSouth())*N);return O.x>=H&&O.x<fe&&O.y>=X&&O.y<me};var V=function(O){function N(H,X,fe,me){if(O.call(this),this.id=H,this.dispatcher=fe,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,e.extend(this,e.pick(X,["url","scheme","tileSize","promoteId"])),this._options=e.extend({type:"vector"},X),this._collectResourceTiming=X.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(me)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.load=function(){var H=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,function(X,fe){H._tileJSONRequest=null,H._loaded=!0,X?H.fire(new e.ErrorEvent(X)):fe&&(e.extend(H,fe),fe.bounds&&(H.tileBounds=new B(fe.bounds,H.minzoom,H.maxzoom)),e.postTurnstileEvent(fe.tiles,H.map._requestManager._customAccessToken),e.postMapLoadEvent(fe.tiles,H.map._getMapId(),H.map._requestManager._skuToken,H.map._requestManager._customAccessToken),H.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),H.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},N.prototype.loaded=function(){return this._loaded},N.prototype.hasTile=function(H){return!this.tileBounds||this.tileBounds.contains(H.canonical)},N.prototype.onAdd=function(H){this.map=H,this.load()},N.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},N.prototype.serialize=function(){return e.extend({},this._options)},N.prototype.loadTile=function(H,X){var fe=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme)),me={request:this.map._requestManager.transformRequest(fe,e.ResourceType.Tile),uid:H.uid,tileID:H.tileID,zoom:H.tileID.overscaledZ,tileSize:this.tileSize*H.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function _e(ke,Oe){return delete H.request,H.aborted?X(null):ke&&404!==ke.status?X(ke):(Oe&&Oe.resourceTiming&&(H.resourceTiming=Oe.resourceTiming),this.map._refreshExpiredTiles&&Oe&&H.setExpiryData(Oe),H.loadVectorData(Oe,this.map.painter),e.cacheEntryPossiblyAdded(this.dispatcher),X(null),void(H.reloadCallback&&(this.loadTile(H,H.reloadCallback),H.reloadCallback=null)))}me.request.collectResourceTiming=this._collectResourceTiming,H.actor&&"expired"!==H.state?"loading"===H.state?H.reloadCallback=X:H.request=H.actor.send("reloadTile",me,_e.bind(this)):(H.actor=this.dispatcher.getActor(),H.request=H.actor.send("loadTile",me,_e.bind(this)))},N.prototype.abortTile=function(H){H.request&&(H.request.cancel(),delete H.request),H.actor&&H.actor.send("abortTile",{uid:H.uid,type:this.type,source:this.id},void 0)},N.prototype.unloadTile=function(H){H.unloadVectorData(),H.actor&&H.actor.send("removeTile",{uid:H.uid,type:this.type,source:this.id},void 0)},N.prototype.hasTransition=function(){return!1},N}(e.Evented),Z=function(O){function N(H,X,fe,me){O.call(this),this.id=H,this.dispatcher=fe,this.setEventedParent(me),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=e.extend({type:"raster"},X),e.extend(this,e.pick(X,["url","scheme","tileSize"]))}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.load=function(){var H=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=I(this._options,this.map._requestManager,function(X,fe){H._tileJSONRequest=null,H._loaded=!0,X?H.fire(new e.ErrorEvent(X)):fe&&(e.extend(H,fe),fe.bounds&&(H.tileBounds=new B(fe.bounds,H.minzoom,H.maxzoom)),e.postTurnstileEvent(fe.tiles),e.postMapLoadEvent(fe.tiles,H.map._getMapId(),H.map._requestManager._skuToken),H.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})),H.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})))})},N.prototype.loaded=function(){return this._loaded},N.prototype.onAdd=function(H){this.map=H,this.load()},N.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},N.prototype.serialize=function(){return e.extend({},this._options)},N.prototype.hasTile=function(H){return!this.tileBounds||this.tileBounds.contains(H.canonical)},N.prototype.loadTile=function(H,X){var fe=this,me=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);H.request=e.getImage(this.map._requestManager.transformRequest(me,e.ResourceType.Tile),function(_e,ke){if(delete H.request,H.aborted)H.state="unloaded",X(null);else if(_e)H.state="errored",X(_e);else if(ke){fe.map._refreshExpiredTiles&&H.setExpiryData(ke),delete ke.cacheControl,delete ke.expires;var Oe=fe.map.painter.context,Xe=Oe.gl;H.texture=fe.map.painter.getTileTexture(ke.width),H.texture?H.texture.update(ke,{useMipmap:!0}):(H.texture=new e.Texture(Oe,ke,Xe.RGBA,{useMipmap:!0}),H.texture.bind(Xe.LINEAR,Xe.CLAMP_TO_EDGE,Xe.LINEAR_MIPMAP_NEAREST),Oe.extTextureFilterAnisotropic&&Xe.texParameterf(Xe.TEXTURE_2D,Oe.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Oe.extTextureFilterAnisotropicMax)),H.state="loaded",e.cacheEntryPossiblyAdded(fe.dispatcher),X(null)}})},N.prototype.abortTile=function(H,X){H.request&&(H.request.cancel(),delete H.request),X()},N.prototype.unloadTile=function(H,X){H.texture&&this.map.painter.saveTileTexture(H.texture),X()},N.prototype.hasTransition=function(){return!1},N}(e.Evented),Y=function(O){function N(H,X,fe,me){O.call(this,H,X,fe,me),this.type="raster-dem",this.maxzoom=22,this._options=e.extend({type:"raster-dem"},X),this.encoding=X.encoding||"mapbox"}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},N.prototype.loadTile=function(H,X){var fe=this.map._requestManager.normalizeTileURL(H.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function me(_e,ke){_e&&(H.state="errored",X(_e)),ke&&(H.dem=ke,H.needsHillshadePrepare=!0,H.state="loaded",X(null))}H.request=e.getImage(this.map._requestManager.transformRequest(fe,e.ResourceType.Tile),function(_e,ke){if(delete H.request,H.aborted)H.state="unloaded",X(null);else if(_e)H.state="errored",X(_e);else if(ke){this.map._refreshExpiredTiles&&H.setExpiryData(ke),delete ke.cacheControl,delete ke.expires;var Oe=e.window.ImageBitmap&&ke instanceof e.window.ImageBitmap&&e.offscreenCanvasSupported()?ke:e.browser.getImageData(ke,1),Xe={uid:H.uid,coord:H.tileID,source:this.id,rawImageData:Oe,encoding:this.encoding};H.actor&&"expired"!==H.state||(H.actor=this.dispatcher.getActor(),H.actor.send("loadDEMTile",Xe,me.bind(this)))}}.bind(this)),H.neighboringTiles=this._getNeighboringTiles(H.tileID)},N.prototype._getNeighboringTiles=function(H){var X=H.canonical,fe=Math.pow(2,X.z),me=(X.x-1+fe)%fe,_e=0===X.x?H.wrap-1:H.wrap,ke=(X.x+1+fe)%fe,Oe=X.x+1===fe?H.wrap+1:H.wrap,Xe={};return Xe[new e.OverscaledTileID(H.overscaledZ,_e,X.z,me,X.y).key]={backfilled:!1},Xe[new e.OverscaledTileID(H.overscaledZ,Oe,X.z,ke,X.y).key]={backfilled:!1},X.y>0&&(Xe[new e.OverscaledTileID(H.overscaledZ,_e,X.z,me,X.y-1).key]={backfilled:!1},Xe[new e.OverscaledTileID(H.overscaledZ,H.wrap,X.z,X.x,X.y-1).key]={backfilled:!1},Xe[new e.OverscaledTileID(H.overscaledZ,Oe,X.z,ke,X.y-1).key]={backfilled:!1}),X.y+1<fe&&(Xe[new e.OverscaledTileID(H.overscaledZ,_e,X.z,me,X.y+1).key]={backfilled:!1},Xe[new e.OverscaledTileID(H.overscaledZ,H.wrap,X.z,X.x,X.y+1).key]={backfilled:!1},Xe[new e.OverscaledTileID(H.overscaledZ,Oe,X.z,ke,X.y+1).key]={backfilled:!1}),Xe},N.prototype.unloadTile=function(H){H.demTexture&&this.map.painter.saveTileTexture(H.demTexture),H.fbo&&(H.fbo.destroy(),delete H.fbo),H.dem&&delete H.dem,delete H.neighboringTiles,H.state="unloaded",H.actor&&H.actor.send("removeDEMTile",{uid:H.uid,source:this.id})},N}(Z),ee=function(O){function N(H,X,fe,me){O.call(this),this.id=H,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=fe.getActor(),this.setEventedParent(me),this._data=X.data,this._options=e.extend({},X),this._collectResourceTiming=X.collectResourceTiming,this._resourceTiming=[],void 0!==X.maxzoom&&(this.maxzoom=X.maxzoom),X.type&&(this.type=X.type),X.attribution&&(this.attribution=X.attribution),this.promoteId=X.promoteId;var _e=e.EXTENT/this.tileSize;this.workerOptions=e.extend({source:this.id,cluster:X.cluster||!1,geojsonVtOptions:{buffer:(void 0!==X.buffer?X.buffer:128)*_e,tolerance:(void 0!==X.tolerance?X.tolerance:.375)*_e,extent:e.EXTENT,maxZoom:this.maxzoom,lineMetrics:X.lineMetrics||!1,generateId:X.generateId||!1},superclusterOptions:{maxZoom:void 0!==X.clusterMaxZoom?Math.min(X.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:e.EXTENT,radius:(X.clusterRadius||50)*_e,log:!1,generateId:X.generateId||!1},clusterProperties:X.clusterProperties},X.workerOptions)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.load=function(){var H=this;this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(X){if(X)H.fire(new e.ErrorEvent(X));else{var fe={dataType:"source",sourceDataType:"metadata"};H._collectResourceTiming&&H._resourceTiming&&H._resourceTiming.length>0&&(fe.resourceTiming=H._resourceTiming,H._resourceTiming=[]),H.fire(new e.Event("data",fe))}})},N.prototype.onAdd=function(H){this.map=H,this.load()},N.prototype.setData=function(H){var X=this;return this._data=H,this.fire(new e.Event("dataloading",{dataType:"source"})),this._updateWorkerData(function(fe){if(fe)X.fire(new e.ErrorEvent(fe));else{var me={dataType:"source",sourceDataType:"content"};X._collectResourceTiming&&X._resourceTiming&&X._resourceTiming.length>0&&(me.resourceTiming=X._resourceTiming,X._resourceTiming=[]),X.fire(new e.Event("data",me))}}),this},N.prototype.getClusterExpansionZoom=function(H,X){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:H,source:this.id},X),this},N.prototype.getClusterChildren=function(H,X){return this.actor.send("geojson.getClusterChildren",{clusterId:H,source:this.id},X),this},N.prototype.getClusterLeaves=function(H,X,fe,me){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:H,limit:X,offset:fe},me),this},N.prototype._updateWorkerData=function(H){var X=this;this._loaded=!1;var fe=e.extend({},this.workerOptions),me=this._data;"string"==typeof me?(fe.request=this.map._requestManager.transformRequest(e.browser.resolveURL(me),e.ResourceType.Source),fe.request.collectResourceTiming=this._collectResourceTiming):fe.data=JSON.stringify(me),this.actor.send(this.type+".loadData",fe,function(_e,ke){X._removed||ke&&ke.abandoned||(X._loaded=!0,ke&&ke.resourceTiming&&ke.resourceTiming[X.id]&&(X._resourceTiming=ke.resourceTiming[X.id].slice(0)),X.actor.send(X.type+".coalesce",{source:fe.source},null),H(_e))})},N.prototype.loaded=function(){return this._loaded},N.prototype.loadTile=function(H,X){var fe=this,me=H.actor?"reloadTile":"loadTile";H.actor=this.actor,H.request=this.actor.send(me,{type:this.type,uid:H.uid,tileID:H.tileID,zoom:H.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:e.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},function(ke,Oe){return delete H.request,H.unloadVectorData(),H.aborted?X(null):ke?X(ke):(H.loadVectorData(Oe,fe.map.painter,"reloadTile"===me),X(null))})},N.prototype.abortTile=function(H){H.request&&(H.request.cancel(),delete H.request),H.aborted=!0},N.prototype.unloadTile=function(H){H.unloadVectorData(),this.actor.send("removeTile",{uid:H.uid,type:this.type,source:this.id})},N.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},N.prototype.serialize=function(){return e.extend({},this._options,{type:this.type,data:this._data})},N.prototype.hasTransition=function(){return!1},N}(e.Evented),J=e.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),$=function(O){function N(H,X,fe,me){O.call(this),this.id=H,this.dispatcher=fe,this.coordinates=X.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(me),this.options=X}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.load=function(H,X){var fe=this;this._loaded=!1,this.fire(new e.Event("dataloading",{dataType:"source"})),this.url=this.options.url,e.getImage(this.map._requestManager.transformRequest(this.url,e.ResourceType.Image),function(me,_e){fe._loaded=!0,me?fe.fire(new e.ErrorEvent(me)):_e&&(fe.image=_e,H&&(fe.coordinates=H),X&&X(),fe._finishLoading())})},N.prototype.loaded=function(){return this._loaded},N.prototype.updateImage=function(H){var X=this;return this.image&&H.url?(this.options.url=H.url,this.load(H.coordinates,function(){X.texture=null}),this):this},N.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"metadata"})))},N.prototype.onAdd=function(H){this.map=H,this.load()},N.prototype.setCoordinates=function(H){var X=this;this.coordinates=H;var fe=H.map(e.MercatorCoordinate.fromLngLat);this.tileID=function(_e){for(var ke=1/0,Oe=1/0,Xe=-1/0,nt=-1/0,dt=0,Dt=_e;dt<Dt.length;dt+=1){var Ft=Dt[dt];ke=Math.min(ke,Ft.x),Oe=Math.min(Oe,Ft.y),Xe=Math.max(Xe,Ft.x),nt=Math.max(nt,Ft.y)}var Et=Math.max(Xe-ke,nt-Oe),Zt=Math.max(0,Math.floor(-Math.log(Et)/Math.LN2)),qt=Math.pow(2,Zt);return new e.CanonicalTileID(Zt,Math.floor((ke+Xe)/2*qt),Math.floor((Oe+nt)/2*qt))}(fe),this.minzoom=this.maxzoom=this.tileID.z;var me=fe.map(function(_e){return X.tileID.getTilePoint(_e)._round()});return this._boundsArray=new e.StructArrayLayout4i8,this._boundsArray.emplaceBack(me[0].x,me[0].y,0,0),this._boundsArray.emplaceBack(me[1].x,me[1].y,e.EXTENT,0),this._boundsArray.emplaceBack(me[3].x,me[3].y,0,e.EXTENT),this._boundsArray.emplaceBack(me[2].x,me[2].y,e.EXTENT,e.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new e.Event("data",{dataType:"source",sourceDataType:"content"})),this},N.prototype.prepare=function(){if(0!==Object.keys(this.tiles).length&&this.image){var H=this.map.painter.context,X=H.gl;for(var fe in this.boundsBuffer||(this.boundsBuffer=H.createVertexBuffer(this._boundsArray,J.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new e.Texture(H,this.image,X.RGBA),this.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE)),this.tiles){var me=this.tiles[fe];"loaded"!==me.state&&(me.state="loaded",me.texture=this.texture)}}},N.prototype.loadTile=function(H,X){this.tileID&&this.tileID.equals(H.tileID.canonical)?(this.tiles[String(H.tileID.wrap)]=H,H.buckets={},X(null)):(H.state="errored",X(null))},N.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},N.prototype.hasTransition=function(){return!1},N}(e.Evented),Q=function(O){function N(H,X,fe,me){O.call(this,H,X,fe,me),this.roundZoom=!0,this.type="video",this.options=X}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.load=function(){var H=this;this._loaded=!1;var X=this.options;this.urls=[];for(var fe=0,me=X.urls;fe<me.length;fe+=1)this.urls.push(this.map._requestManager.transformRequest(me[fe],e.ResourceType.Source).url);e.getVideo(this.urls,function(ke,Oe){H._loaded=!0,ke?H.fire(new e.ErrorEvent(ke)):Oe&&(H.video=Oe,H.video.loop=!0,H.video.addEventListener("playing",function(){H.map.triggerRepaint()}),H.map&&H.video.play(),H._finishLoading())})},N.prototype.pause=function(){this.video&&this.video.pause()},N.prototype.play=function(){this.video&&this.video.play()},N.prototype.seek=function(H){if(this.video){var X=this.video.seekable;H<X.start(0)||H>X.end(0)?this.fire(new e.ErrorEvent(new e.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+X.start(0)+" and "+X.end(0)+"-second mark."))):this.video.currentTime=H}},N.prototype.getVideo=function(){return this.video},N.prototype.onAdd=function(H){this.map||(this.map=H,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},N.prototype.prepare=function(){if(!(0===Object.keys(this.tiles).length||this.video.readyState<2)){var H=this.map.painter.context,X=H.gl;for(var fe in this.boundsBuffer||(this.boundsBuffer=H.createVertexBuffer(this._boundsArray,J.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE),X.texSubImage2D(X.TEXTURE_2D,0,0,0,X.RGBA,X.UNSIGNED_BYTE,this.video)):(this.texture=new e.Texture(H,this.video,X.RGBA),this.texture.bind(X.LINEAR,X.CLAMP_TO_EDGE)),this.tiles){var me=this.tiles[fe];"loaded"!==me.state&&(me.state="loaded",me.texture=this.texture)}}},N.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},N.prototype.hasTransition=function(){return this.video&&!this.video.paused},N}($),se=function(O){function N(H,X,fe,me){O.call(this,H,X,fe,me),X.coordinates?Array.isArray(X.coordinates)&&4===X.coordinates.length&&!X.coordinates.some(function(_e){return!Array.isArray(_e)||2!==_e.length||_e.some(function(ke){return"number"!=typeof ke})})||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+H,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+H,null,'missing required property "coordinates"'))),X.animate&&"boolean"!=typeof X.animate&&this.fire(new e.ErrorEvent(new e.ValidationError("sources."+H,null,'optional "animate" property must be a boolean value'))),X.canvas?"string"==typeof X.canvas||X.canvas instanceof e.window.HTMLCanvasElement||this.fire(new e.ErrorEvent(new e.ValidationError("sources."+H,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new e.ErrorEvent(new e.ValidationError("sources."+H,null,'missing required property "canvas"'))),this.options=X,this.animate=void 0===X.animate||X.animate}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof e.window.HTMLCanvasElement?this.options.canvas:e.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new e.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},N.prototype.getCanvas=function(){return this.canvas},N.prototype.onAdd=function(H){this.map=H,this.load(),this.canvas&&this.animate&&this.play()},N.prototype.onRemove=function(){this.pause()},N.prototype.prepare=function(){var H=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,H=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,H=!0),!this._hasInvalidDimensions()&&0!==Object.keys(this.tiles).length){var X=this.map.painter.context,fe=X.gl;for(var me in this.boundsBuffer||(this.boundsBuffer=X.createVertexBuffer(this._boundsArray,J.members)),this.boundsSegments||(this.boundsSegments=e.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(H||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new e.Texture(X,this.canvas,fe.RGBA,{premultiply:!0}),this.tiles){var _e=this.tiles[me];"loaded"!==_e.state&&(_e.state="loaded",_e.texture=this.texture)}}},N.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},N.prototype.hasTransition=function(){return this._playing},N.prototype._hasInvalidDimensions=function(){for(var H=0,X=[this.canvas.width,this.canvas.height];H<X.length;H+=1){var fe=X[H];if(isNaN(fe)||fe<=0)return!0}return!1},N}($),j={vector:V,raster:Z,"raster-dem":Y,geojson:ee,video:Q,image:$,canvas:se};function G(O,N){var H=e.identity([]);return e.translate(H,H,[1,1,0]),e.scale(H,H,[.5*O.width,.5*O.height,1]),e.multiply(H,H,O.calculatePosMatrix(N.toUnwrapped()))}function W(O,N,H,X,fe,me){var _e=function(Pt,Et,Zt){if(Pt)for(var qt=0,$t=Pt;qt<$t.length;qt+=1){var yn=Et[$t[qt]];if(yn&&yn.source===Zt&&"fill-extrusion"===yn.type)return!0}else for(var kn in Et){var Vn=Et[kn];if(Vn.source===Zt&&"fill-extrusion"===Vn.type)return!0}return!1}(fe&&fe.layers,N,O.id),ke=me.maxPitchScaleFactor(),Oe=O.tilesIn(X,ke,_e);Oe.sort(ie);for(var Xe=[],nt=0,dt=Oe;nt<dt.length;nt+=1){var Dt=dt[nt];Xe.push({wrappedTileID:Dt.tileID.wrapped().key,queryResults:Dt.tile.queryRenderedFeatures(N,H,O._state,Dt.queryGeometry,Dt.cameraQueryGeometry,Dt.scale,fe,me,ke,G(O.transform,Dt.tileID))})}var Ft=function(Pt){for(var Et={},Zt={},qt=0,$t=Pt;qt<$t.length;qt+=1){var yn=$t[qt],kn=yn.queryResults,Vn=yn.wrappedTileID,Gn=Zt[Vn]=Zt[Vn]||{};for(var Tr in kn)for(var _r=kn[Tr],Or=Gn[Tr]=Gn[Tr]||{},Sr=Et[Tr]=Et[Tr]||[],hi=0,vi=_r;hi<vi.length;hi+=1){var Oi=vi[hi];Or[Oi.featureIndex]||(Or[Oi.featureIndex]=!0,Sr.push(Oi))}}return Et}(Xe);for(var It in Ft)Ft[It].forEach(function(Pt){var Et=Pt.feature,Zt=O.getFeatureState(Et.layer["source-layer"],Et.id);Et.source=Et.layer.source,Et.layer["source-layer"]&&(Et.sourceLayer=Et.layer["source-layer"]),Et.state=Zt});return Ft}function ie(O,N){var H=O.tileID,X=N.tileID;return H.overscaledZ-X.overscaledZ||H.canonical.y-X.canonical.y||H.wrap-X.wrap||H.canonical.x-X.canonical.x}var q=function(O,N){this.max=O,this.onRemove=N,this.reset()};q.prototype.reset=function(){for(var O in this.data)for(var N=0,H=this.data[O];N<H.length;N+=1){var X=H[N];X.timeout&&clearTimeout(X.timeout),this.onRemove(X.value)}return this.data={},this.order=[],this},q.prototype.add=function(O,N,H){var X=this,fe=O.wrapped().key;void 0===this.data[fe]&&(this.data[fe]=[]);var me={value:N,timeout:void 0};if(void 0!==H&&(me.timeout=setTimeout(function(){X.remove(O,me)},H)),this.data[fe].push(me),this.order.push(fe),this.order.length>this.max){var _e=this._getAndRemoveByKey(this.order[0]);_e&&this.onRemove(_e)}return this},q.prototype.has=function(O){return O.wrapped().key in this.data},q.prototype.getAndRemove=function(O){return this.has(O)?this._getAndRemoveByKey(O.wrapped().key):null},q.prototype._getAndRemoveByKey=function(O){var N=this.data[O].shift();return N.timeout&&clearTimeout(N.timeout),0===this.data[O].length&&delete this.data[O],this.order.splice(this.order.indexOf(O),1),N.value},q.prototype.getByKey=function(O){var N=this.data[O];return N?N[0].value:null},q.prototype.get=function(O){return this.has(O)?this.data[O.wrapped().key][0].value:null},q.prototype.remove=function(O,N){if(!this.has(O))return this;var H=O.wrapped().key,X=void 0===N?0:this.data[H].indexOf(N),fe=this.data[H][X];return this.data[H].splice(X,1),fe.timeout&&clearTimeout(fe.timeout),0===this.data[H].length&&delete this.data[H],this.onRemove(fe.value),this.order.splice(this.order.indexOf(H),1),this},q.prototype.setMaxSize=function(O){for(this.max=O;this.order.length>this.max;){var N=this._getAndRemoveByKey(this.order[0]);N&&this.onRemove(N)}return this},q.prototype.filter=function(O){var N=[];for(var H in this.data)for(var X=0,fe=this.data[H];X<fe.length;X+=1){var me=fe[X];O(me.value)||N.push(me)}for(var _e=0,ke=N;_e<ke.length;_e+=1){var Oe=ke[_e];this.remove(Oe.value.tileID,Oe)}};var te=function(O,N,H){this.context=O;var X=O.gl;this.buffer=X.createBuffer(),this.dynamicDraw=Boolean(H),this.context.unbindVAO(),O.bindElementBuffer.set(this.buffer),X.bufferData(X.ELEMENT_ARRAY_BUFFER,N.arrayBuffer,this.dynamicDraw?X.DYNAMIC_DRAW:X.STATIC_DRAW),this.dynamicDraw||delete N.arrayBuffer};te.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},te.prototype.updateData=function(O){var N=this.context.gl;this.context.unbindVAO(),this.bind(),N.bufferSubData(N.ELEMENT_ARRAY_BUFFER,0,O.arrayBuffer)},te.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ne={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},le=function(O,N,H,X){this.length=N.length,this.attributes=H,this.itemSize=N.bytesPerElement,this.dynamicDraw=X,this.context=O;var fe=O.gl;this.buffer=fe.createBuffer(),O.bindVertexBuffer.set(this.buffer),fe.bufferData(fe.ARRAY_BUFFER,N.arrayBuffer,this.dynamicDraw?fe.DYNAMIC_DRAW:fe.STATIC_DRAW),this.dynamicDraw||delete N.arrayBuffer};le.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},le.prototype.updateData=function(O){var N=this.context.gl;this.bind(),N.bufferSubData(N.ARRAY_BUFFER,0,O.arrayBuffer)},le.prototype.enableAttributes=function(O,N){for(var H=0;H<this.attributes.length;H++){var fe=N.attributes[this.attributes[H].name];void 0!==fe&&O.enableVertexAttribArray(fe)}},le.prototype.setVertexAttribPointers=function(O,N,H){for(var X=0;X<this.attributes.length;X++){var fe=this.attributes[X],me=N.attributes[fe.name];void 0!==me&&O.vertexAttribPointer(me,fe.components,O[ne[fe.type]],!1,this.itemSize,fe.offset+this.itemSize*(H||0))}},le.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var ue=function(O){this.gl=O.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};ue.prototype.get=function(){return this.current},ue.prototype.set=function(O){},ue.prototype.getDefault=function(){return this.default},ue.prototype.setDefault=function(){this.set(this.default)};var de=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return e.Color.transparent},N.prototype.set=function(H){var X=this.current;(H.r!==X.r||H.g!==X.g||H.b!==X.b||H.a!==X.a||this.dirty)&&(this.gl.clearColor(H.r,H.g,H.b,H.a),this.current=H,this.dirty=!1)},N}(ue),he=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return 1},N.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.clearDepth(H),this.current=H,this.dirty=!1)},N}(ue),be=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return 0},N.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.clearStencil(H),this.current=H,this.dirty=!1)},N}(ue),ge=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return[!0,!0,!0,!0]},N.prototype.set=function(H){var X=this.current;(H[0]!==X[0]||H[1]!==X[1]||H[2]!==X[2]||H[3]!==X[3]||this.dirty)&&(this.gl.colorMask(H[0],H[1],H[2],H[3]),this.current=H,this.dirty=!1)},N}(ue),we=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return!0},N.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.depthMask(H),this.current=H,this.dirty=!1)},N}(ue),Ce=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return 255},N.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.stencilMask(H),this.current=H,this.dirty=!1)},N}(ue),De=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},N.prototype.set=function(H){var X=this.current;(H.func!==X.func||H.ref!==X.ref||H.mask!==X.mask||this.dirty)&&(this.gl.stencilFunc(H.func,H.ref,H.mask),this.current=H,this.dirty=!1)},N}(ue),Se=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){var H=this.gl;return[H.KEEP,H.KEEP,H.KEEP]},N.prototype.set=function(H){var X=this.current;(H[0]!==X[0]||H[1]!==X[1]||H[2]!==X[2]||this.dirty)&&(this.gl.stencilOp(H[0],H[1],H[2]),this.current=H,this.dirty=!1)},N}(ue),Fe=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(H){if(H!==this.current||this.dirty){var X=this.gl;H?X.enable(X.STENCIL_TEST):X.disable(X.STENCIL_TEST),this.current=H,this.dirty=!1}},N}(ue),ve=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return[0,1]},N.prototype.set=function(H){var X=this.current;(H[0]!==X[0]||H[1]!==X[1]||this.dirty)&&(this.gl.depthRange(H[0],H[1]),this.current=H,this.dirty=!1)},N}(ue),Te=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(H){if(H!==this.current||this.dirty){var X=this.gl;H?X.enable(X.DEPTH_TEST):X.disable(X.DEPTH_TEST),this.current=H,this.dirty=!1}},N}(ue),Le=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return this.gl.LESS},N.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.depthFunc(H),this.current=H,this.dirty=!1)},N}(ue),Ee=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(H){if(H!==this.current||this.dirty){var X=this.gl;H?X.enable(X.BLEND):X.disable(X.BLEND),this.current=H,this.dirty=!1}},N}(ue),Pe=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){var H=this.gl;return[H.ONE,H.ZERO]},N.prototype.set=function(H){var X=this.current;(H[0]!==X[0]||H[1]!==X[1]||this.dirty)&&(this.gl.blendFunc(H[0],H[1]),this.current=H,this.dirty=!1)},N}(ue),je=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return e.Color.transparent},N.prototype.set=function(H){var X=this.current;(H.r!==X.r||H.g!==X.g||H.b!==X.b||H.a!==X.a||this.dirty)&&(this.gl.blendColor(H.r,H.g,H.b,H.a),this.current=H,this.dirty=!1)},N}(ue),Ge=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return this.gl.FUNC_ADD},N.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.blendEquation(H),this.current=H,this.dirty=!1)},N}(ue),Ke=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(H){if(H!==this.current||this.dirty){var X=this.gl;H?X.enable(X.CULL_FACE):X.disable(X.CULL_FACE),this.current=H,this.dirty=!1}},N}(ue),lt=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return this.gl.BACK},N.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.cullFace(H),this.current=H,this.dirty=!1)},N}(ue),Ue=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return this.gl.CCW},N.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.frontFace(H),this.current=H,this.dirty=!1)},N}(ue),$e=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.useProgram(H),this.current=H,this.dirty=!1)},N}(ue),et=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return this.gl.TEXTURE0},N.prototype.set=function(H){(H!==this.current||this.dirty)&&(this.gl.activeTexture(H),this.current=H,this.dirty=!1)},N}(ue),tt=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){var H=this.gl;return[0,0,H.drawingBufferWidth,H.drawingBufferHeight]},N.prototype.set=function(H){var X=this.current;(H[0]!==X[0]||H[1]!==X[1]||H[2]!==X[2]||H[3]!==X[3]||this.dirty)&&(this.gl.viewport(H[0],H[1],H[2],H[3]),this.current=H,this.dirty=!1)},N}(ue),ct=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(H){if(H!==this.current||this.dirty){var X=this.gl;X.bindFramebuffer(X.FRAMEBUFFER,H),this.current=H,this.dirty=!1}},N}(ue),xt=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(H){if(H!==this.current||this.dirty){var X=this.gl;X.bindRenderbuffer(X.RENDERBUFFER,H),this.current=H,this.dirty=!1}},N}(ue),Ct=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(H){if(H!==this.current||this.dirty){var X=this.gl;X.bindTexture(X.TEXTURE_2D,H),this.current=H,this.dirty=!1}},N}(ue),Ht=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(H){if(H!==this.current||this.dirty){var X=this.gl;X.bindBuffer(X.ARRAY_BUFFER,H),this.current=H,this.dirty=!1}},N}(ue),zt=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(H){var X=this.gl;X.bindBuffer(X.ELEMENT_ARRAY_BUFFER,H),this.current=H,this.dirty=!1},N}(ue),ht=function(O){function N(H){O.call(this,H),this.vao=H.extVertexArrayObject}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N.prototype.set=function(H){this.vao&&(H!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(H),this.current=H,this.dirty=!1)},N}(ue),ut=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return 4},N.prototype.set=function(H){if(H!==this.current||this.dirty){var X=this.gl;X.pixelStorei(X.UNPACK_ALIGNMENT,H),this.current=H,this.dirty=!1}},N}(ue),Ot=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(H){if(H!==this.current||this.dirty){var X=this.gl;X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H),this.current=H,this.dirty=!1}},N}(ue),tn=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return!1},N.prototype.set=function(H){if(H!==this.current||this.dirty){var X=this.gl;X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,H),this.current=H,this.dirty=!1}},N}(ue),un=function(O){function N(H,X){O.call(this,H),this.context=H,this.parent=X}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getDefault=function(){return null},N}(ue),Ze=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.setDirty=function(){this.dirty=!0},N.prototype.set=function(H){if(H!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var X=this.gl;X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,H,0),this.current=H,this.dirty=!1}},N}(un),Qe=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.set=function(H){if(H!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var X=this.gl;X.framebufferRenderbuffer(X.FRAMEBUFFER,X.DEPTH_ATTACHMENT,X.RENDERBUFFER,H),this.current=H,this.dirty=!1}},N}(un),qe=function(O,N,H,X){this.context=O,this.width=N,this.height=H;var me=this.framebuffer=O.gl.createFramebuffer();this.colorAttachment=new Ze(O,me),X&&(this.depthAttachment=new Qe(O,me))};qe.prototype.destroy=function(){var O=this.context.gl,N=this.colorAttachment.get();if(N&&O.deleteTexture(N),this.depthAttachment){var H=this.depthAttachment.get();H&&O.deleteRenderbuffer(H)}O.deleteFramebuffer(this.framebuffer)};var it=function(O,N,H){this.func=O,this.mask=N,this.range=H};it.ReadOnly=!1,it.ReadWrite=!0,it.disabled=new it(519,it.ReadOnly,[0,1]);var Ie=function(O,N,H,X,fe,me){this.test=O,this.ref=N,this.mask=H,this.fail=X,this.depthFail=fe,this.pass=me};Ie.disabled=new Ie({func:519,mask:0},0,0,7680,7680,7680);var ze=function(O,N,H){this.blendFunction=O,this.blendColor=N,this.mask=H};ze.disabled=new ze(ze.Replace=[1,0],e.Color.transparent,[!1,!1,!1,!1]),ze.unblended=new ze(ze.Replace,e.Color.transparent,[!0,!0,!0,!0]),ze.alphaBlended=new ze([1,771],e.Color.transparent,[!0,!0,!0,!0]);var Ve=function(O,N,H){this.enable=O,this.mode=N,this.frontFace=H};Ve.disabled=new Ve(!1,1029,2305),Ve.backCCW=new Ve(!0,1029,2305);var Be=function(O){this.gl=O,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new de(this),this.clearDepth=new he(this),this.clearStencil=new be(this),this.colorMask=new ge(this),this.depthMask=new we(this),this.stencilMask=new Ce(this),this.stencilFunc=new De(this),this.stencilOp=new Se(this),this.stencilTest=new Fe(this),this.depthRange=new ve(this),this.depthTest=new Te(this),this.depthFunc=new Le(this),this.blend=new Ee(this),this.blendFunc=new Pe(this),this.blendColor=new je(this),this.blendEquation=new Ge(this),this.cullFace=new Ke(this),this.cullFaceSide=new lt(this),this.frontFace=new Ue(this),this.program=new $e(this),this.activeTexture=new et(this),this.viewport=new tt(this),this.bindFramebuffer=new ct(this),this.bindRenderbuffer=new xt(this),this.bindTexture=new Ct(this),this.bindVertexBuffer=new Ht(this),this.bindElementBuffer=new zt(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new ht(this),this.pixelStoreUnpack=new ut(this),this.pixelStoreUnpackPremultiplyAlpha=new Ot(this),this.pixelStoreUnpackFlipY=new tn(this),this.extTextureFilterAnisotropic=O.getExtension("EXT_texture_filter_anisotropic")||O.getExtension("MOZ_EXT_texture_filter_anisotropic")||O.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=O.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=O.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(O.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=O.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=O.getExtension("EXT_disjoint_timer_query")};Be.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},Be.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},Be.prototype.createIndexBuffer=function(O,N){return new te(this,O,N)},Be.prototype.createVertexBuffer=function(O,N,H){return new le(this,O,N,H)},Be.prototype.createRenderbuffer=function(O,N,H){var X=this.gl,fe=X.createRenderbuffer();return this.bindRenderbuffer.set(fe),X.renderbufferStorage(X.RENDERBUFFER,O,N,H),this.bindRenderbuffer.set(null),fe},Be.prototype.createFramebuffer=function(O,N,H){return new qe(this,O,N,H)},Be.prototype.clear=function(O){var N=O.color,H=O.depth,X=this.gl,fe=0;N&&(fe|=X.COLOR_BUFFER_BIT,this.clearColor.set(N),this.colorMask.set([!0,!0,!0,!0])),void 0!==H&&(fe|=X.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(H),this.depthMask.set(!0)),X.clear(fe)},Be.prototype.setCullFace=function(O){!1===O.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(O.mode),this.frontFace.set(O.frontFace))},Be.prototype.setDepthMode=function(O){O.func!==this.gl.ALWAYS||O.mask?(this.depthTest.set(!0),this.depthFunc.set(O.func),this.depthMask.set(O.mask),this.depthRange.set(O.range)):this.depthTest.set(!1)},Be.prototype.setStencilMode=function(O){O.test.func!==this.gl.ALWAYS||O.mask?(this.stencilTest.set(!0),this.stencilMask.set(O.mask),this.stencilOp.set([O.fail,O.depthFail,O.pass]),this.stencilFunc.set({func:O.test.func,ref:O.ref,mask:O.test.mask})):this.stencilTest.set(!1)},Be.prototype.setColorMode=function(O){e.deepEqual(O.blendFunction,ze.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(O.blendFunction),this.blendColor.set(O.blendColor)),this.colorMask.set(O.mask)},Be.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var at=function(O){function N(H,X,fe){var me=this;O.call(this),this.id=H,this.dispatcher=fe,this.on("data",function(_e){"source"===_e.dataType&&"metadata"===_e.sourceDataType&&(me._sourceLoaded=!0),me._sourceLoaded&&!me._paused&&"source"===_e.dataType&&"content"===_e.sourceDataType&&(me.reload(),me.transform&&me.update(me.transform))}),this.on("error",function(){me._sourceErrored=!0}),this._source=function(_e,ke,Oe,Xe){var nt=new j[ke.type](_e,ke,Oe,Xe);if(nt.id!==_e)throw new Error("Expected Source id to be "+_e+" instead of "+nt.id);return e.bindAll(["load","abort","unload","serialize","prepare"],nt),nt}(H,X,fe,this),this._tiles={},this._cache=new q(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new e.SourceFeatureState}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.onAdd=function(H){this.map=H,this._maxTileCacheSize=H?H._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(H)},N.prototype.onRemove=function(H){this._source&&this._source.onRemove&&this._source.onRemove(H)},N.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var H in this._tiles){var X=this._tiles[H];if("loaded"!==X.state&&"errored"!==X.state)return!1}return!0},N.prototype.getSource=function(){return this._source},N.prototype.pause=function(){this._paused=!0},N.prototype.resume=function(){if(this._paused){var H=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,H&&this.reload(),this.transform&&this.update(this.transform)}},N.prototype._loadTile=function(H,X){return this._source.loadTile(H,X)},N.prototype._unloadTile=function(H){if(this._source.unloadTile)return this._source.unloadTile(H,function(){})},N.prototype._abortTile=function(H){if(this._source.abortTile)return this._source.abortTile(H,function(){})},N.prototype.serialize=function(){return this._source.serialize()},N.prototype.prepare=function(H){for(var X in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var fe=this._tiles[X];fe.upload(H),fe.prepare(this.map.style.imageManager)}},N.prototype.getIds=function(){return e.values(this._tiles).map(function(H){return H.tileID}).sort(gt).map(function(H){return H.key})},N.prototype.getRenderableIds=function(H){var X=this,fe=[];for(var me in this._tiles)this._isIdRenderable(me,H)&&fe.push(this._tiles[me]);return H?fe.sort(function(_e,ke){var Oe=_e.tileID,Xe=ke.tileID,nt=new e.Point(Oe.canonical.x,Oe.canonical.y)._rotate(X.transform.angle),dt=new e.Point(Xe.canonical.x,Xe.canonical.y)._rotate(X.transform.angle);return Oe.overscaledZ-Xe.overscaledZ||dt.y-nt.y||dt.x-nt.x}).map(function(_e){return _e.tileID.key}):fe.map(function(_e){return _e.tileID}).sort(gt).map(function(_e){return _e.key})},N.prototype.hasRenderableParent=function(H){var X=this.findLoadedParent(H,0);return!!X&&this._isIdRenderable(X.tileID.key)},N.prototype._isIdRenderable=function(H,X){return this._tiles[H]&&this._tiles[H].hasData()&&!this._coveredTiles[H]&&(X||!this._tiles[H].holdingForFade())},N.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var H in this._cache.reset(),this._tiles)"errored"!==this._tiles[H].state&&this._reloadTile(H,"reloading")},N.prototype._reloadTile=function(H,X){var fe=this._tiles[H];fe&&("loading"!==fe.state&&(fe.state=X),this._loadTile(fe,this._tileLoaded.bind(this,fe,H,X)))},N.prototype._tileLoaded=function(H,X,fe,me){if(me)return H.state="errored",void(404!==me.status?this._source.fire(new e.ErrorEvent(me,{tile:H})):this.update(this.transform));H.timeAdded=e.browser.now(),"expired"===fe&&(H.refreshedUponExpiration=!0),this._setTileReloadTimer(X,H),"raster-dem"===this.getSource().type&&H.dem&&this._backfillDEM(H),this._state.initializeTileState(H,this.map?this.map.painter:null),this._source.fire(new e.Event("data",{dataType:"source",tile:H,coord:H.tileID}))},N.prototype._backfillDEM=function(H){for(var X=this.getRenderableIds(),fe=0;fe<X.length;fe++){var me=X[fe];if(H.neighboringTiles&&H.neighboringTiles[me]){var _e=this.getTileByID(me);ke(H,_e),ke(_e,H)}}function ke(Oe,Xe){Oe.needsHillshadePrepare=!0;var nt=Xe.tileID.canonical.x-Oe.tileID.canonical.x,dt=Xe.tileID.canonical.y-Oe.tileID.canonical.y,Dt=Math.pow(2,Oe.tileID.canonical.z),Ft=Xe.tileID.key;0===nt&&0===dt||Math.abs(dt)>1||(Math.abs(nt)>1&&(1===Math.abs(nt+Dt)?nt+=Dt:1===Math.abs(nt-Dt)&&(nt-=Dt)),Xe.dem&&Oe.dem&&(Oe.dem.backfillBorder(Xe.dem,nt,dt),Oe.neighboringTiles&&Oe.neighboringTiles[Ft]&&(Oe.neighboringTiles[Ft].backfilled=!0)))}},N.prototype.getTile=function(H){return this.getTileByID(H.key)},N.prototype.getTileByID=function(H){return this._tiles[H]},N.prototype._retainLoadedChildren=function(H,X,fe,me){for(var _e in this._tiles){var ke=this._tiles[_e];if(!(me[_e]||!ke.hasData()||ke.tileID.overscaledZ<=X||ke.tileID.overscaledZ>fe)){for(var Oe=ke.tileID;ke&&ke.tileID.overscaledZ>X+1;){var Xe=ke.tileID.scaledTo(ke.tileID.overscaledZ-1);(ke=this._tiles[Xe.key])&&ke.hasData()&&(Oe=Xe)}for(var nt=Oe;nt.overscaledZ>X;)if(H[(nt=nt.scaledTo(nt.overscaledZ-1)).key]){me[Oe.key]=Oe;break}}}},N.prototype.findLoadedParent=function(H,X){if(H.key in this._loadedParentTiles){var fe=this._loadedParentTiles[H.key];return fe&&fe.tileID.overscaledZ>=X?fe:null}for(var me=H.overscaledZ-1;me>=X;me--){var _e=H.scaledTo(me),ke=this._getLoadedTile(_e);if(ke)return ke}},N.prototype._getLoadedTile=function(H){var X=this._tiles[H.key];return X&&X.hasData()?X:this._cache.getByKey(H.wrapped().key)},N.prototype.updateCacheSize=function(H){var X=(Math.ceil(H.width/this._source.tileSize)+1)*(Math.ceil(H.height/this._source.tileSize)+1),fe=Math.floor(5*X),me="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,fe):fe;this._cache.setMaxSize(me)},N.prototype.handleWrapJump=function(H){var fe=Math.round((H-(void 0===this._prevLng?H:this._prevLng))/360);if(this._prevLng=H,fe){var me={};for(var _e in this._tiles){var ke=this._tiles[_e];ke.tileID=ke.tileID.unwrapTo(ke.tileID.wrap+fe),me[ke.tileID.key]=ke}for(var Oe in this._tiles=me,this._timers)clearTimeout(this._timers[Oe]),delete this._timers[Oe];for(var Xe in this._tiles)this._setTileReloadTimer(Xe,this._tiles[Xe])}},N.prototype.update=function(H){var X=this;if(this.transform=H,this._sourceLoaded&&!this._paused){var fe;this.updateCacheSize(H),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?fe=H.getVisibleUnwrappedCoordinates(this._source.tileID).map(function(Gn){return new e.OverscaledTileID(Gn.canonical.z,Gn.wrap,Gn.canonical.z,Gn.canonical.x,Gn.canonical.y)}):(fe=H.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(fe=fe.filter(function(Gn){return X._source.hasTile(Gn)}))):fe=[];var me=H.coveringZoomLevel(this._source),_e=Math.max(me-N.maxOverzooming,this._source.minzoom),ke=Math.max(me+N.maxUnderzooming,this._source.minzoom),Oe=this._updateRetainedTiles(fe,me);if(wt(this._source.type)){for(var Xe={},nt={},dt=0,Dt=Object.keys(Oe);dt<Dt.length;dt+=1){var Ft=Dt[dt],It=Oe[Ft],Pt=this._tiles[Ft];if(Pt&&!(Pt.fadeEndTime&&Pt.fadeEndTime<=e.browser.now())){var Et=this.findLoadedParent(It,_e);Et&&(this._addTile(Et.tileID),Xe[Et.tileID.key]=Et.tileID),nt[Ft]=It}}for(var Zt in this._retainLoadedChildren(nt,me,ke,Oe),Xe)Oe[Zt]||(this._coveredTiles[Zt]=!0,Oe[Zt]=Xe[Zt])}for(var qt in Oe)this._tiles[qt].clearFadeHold();for(var $t=0,yn=e.keysDifference(this._tiles,Oe);$t<yn.length;$t+=1){var kn=yn[$t],Vn=this._tiles[kn];Vn.hasSymbolBuckets&&!Vn.holdingForFade()?Vn.setHoldDuration(this.map._fadeDuration):Vn.hasSymbolBuckets&&!Vn.symbolFadeFinished()||this._removeTile(kn)}this._updateLoadedParentTileCache()}},N.prototype.releaseSymbolFadeTiles=function(){for(var H in this._tiles)this._tiles[H].holdingForFade()&&this._removeTile(H)},N.prototype._updateRetainedTiles=function(H,X){for(var fe={},me={},_e=Math.max(X-N.maxOverzooming,this._source.minzoom),ke=Math.max(X+N.maxUnderzooming,this._source.minzoom),Oe={},Xe=0,nt=H;Xe<nt.length;Xe+=1){var dt=nt[Xe],Dt=this._addTile(dt);fe[dt.key]=dt,Dt.hasData()||X<this._source.maxzoom&&(Oe[dt.key]=dt)}this._retainLoadedChildren(Oe,X,ke,fe);for(var Ft=0,It=H;Ft<It.length;Ft+=1){var Pt=It[Ft],Et=this._tiles[Pt.key];if(!Et.hasData()){if(X+1>this._source.maxzoom){var Zt=Pt.children(this._source.maxzoom)[0],qt=this.getTile(Zt);if(qt&&qt.hasData()){fe[Zt.key]=Zt;continue}}else{var $t=Pt.children(this._source.maxzoom);if(fe[$t[0].key]&&fe[$t[1].key]&&fe[$t[2].key]&&fe[$t[3].key])continue}for(var yn=Et.wasRequested(),kn=Pt.overscaledZ-1;kn>=_e;--kn){var Vn=Pt.scaledTo(kn);if(me[Vn.key]||(me[Vn.key]=!0,!(Et=this.getTile(Vn))&&yn&&(Et=this._addTile(Vn)),Et&&(fe[Vn.key]=Vn,yn=Et.wasRequested(),Et.hasData())))break}}}return fe},N.prototype._updateLoadedParentTileCache=function(){for(var H in this._loadedParentTiles={},this._tiles){for(var X=[],fe=void 0,me=this._tiles[H].tileID;me.overscaledZ>0;){if(me.key in this._loadedParentTiles){fe=this._loadedParentTiles[me.key];break}X.push(me.key);var _e=me.scaledTo(me.overscaledZ-1);if(fe=this._getLoadedTile(_e))break;me=_e}for(var ke=0,Oe=X;ke<Oe.length;ke+=1)this._loadedParentTiles[Oe[ke]]=fe}},N.prototype._addTile=function(H){var X=this._tiles[H.key];if(X)return X;(X=this._cache.getAndRemove(H))&&(this._setTileReloadTimer(H.key,X),X.tileID=H,this._state.initializeTileState(X,this.map?this.map.painter:null),this._cacheTimers[H.key]&&(clearTimeout(this._cacheTimers[H.key]),delete this._cacheTimers[H.key],this._setTileReloadTimer(H.key,X)));var fe=Boolean(X);return fe||(X=new e.Tile(H,this._source.tileSize*H.overscaleFactor()),this._loadTile(X,this._tileLoaded.bind(this,X,H.key,X.state))),X?(X.uses++,this._tiles[H.key]=X,fe||this._source.fire(new e.Event("dataloading",{tile:X,coord:X.tileID,dataType:"source"})),X):null},N.prototype._setTileReloadTimer=function(H,X){var fe=this;H in this._timers&&(clearTimeout(this._timers[H]),delete this._timers[H]);var me=X.getExpiryTimeout();me&&(this._timers[H]=setTimeout(function(){fe._reloadTile(H,"expired"),delete fe._timers[H]},me))},N.prototype._removeTile=function(H){var X=this._tiles[H];X&&(X.uses--,delete this._tiles[H],this._timers[H]&&(clearTimeout(this._timers[H]),delete this._timers[H]),X.uses>0||(X.hasData()&&"reloading"!==X.state?this._cache.add(X.tileID,X,X.getExpiryTimeout()):(X.aborted=!0,this._abortTile(X),this._unloadTile(X))))},N.prototype.clearTiles=function(){for(var H in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(H);this._cache.reset()},N.prototype.tilesIn=function(H,X,fe){var me=this,_e=[],ke=this.transform;if(!ke)return _e;for(var Oe=fe?ke.getCameraQueryGeometry(H):H,Xe=H.map(function(kn){return ke.pointCoordinate(kn)}),nt=Oe.map(function(kn){return ke.pointCoordinate(kn)}),dt=this.getIds(),Dt=1/0,Ft=1/0,It=-1/0,Pt=-1/0,Et=0,Zt=nt;Et<Zt.length;Et+=1){var qt=Zt[Et];Dt=Math.min(Dt,qt.x),Ft=Math.min(Ft,qt.y),It=Math.max(It,qt.x),Pt=Math.max(Pt,qt.y)}for(var $t=function(kn){var Vn=me._tiles[dt[kn]];if(!Vn.holdingForFade()){var Gn=Vn.tileID,Tr=Math.pow(2,ke.zoom-Vn.tileID.overscaledZ),_r=X*Vn.queryPadding*e.EXTENT/Vn.tileSize/Tr,Or=[Gn.getTilePoint(new e.MercatorCoordinate(Dt,Ft)),Gn.getTilePoint(new e.MercatorCoordinate(It,Pt))];if(Or[0].x-_r<e.EXTENT&&Or[0].y-_r<e.EXTENT&&Or[1].x+_r>=0&&Or[1].y+_r>=0){var Sr=Xe.map(function(vi){return Gn.getTilePoint(vi)}),hi=nt.map(function(vi){return Gn.getTilePoint(vi)});_e.push({tile:Vn,tileID:Gn,queryGeometry:Sr,cameraQueryGeometry:hi,scale:Tr})}}},yn=0;yn<dt.length;yn++)$t(yn);return _e},N.prototype.getVisibleCoordinates=function(H){for(var X=this,fe=this.getRenderableIds(H).map(function(Oe){return X._tiles[Oe].tileID}),me=0,_e=fe;me<_e.length;me+=1){var ke=_e[me];ke.posMatrix=this.transform.calculatePosMatrix(ke.toUnwrapped())}return fe},N.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(wt(this._source.type))for(var H in this._tiles){var X=this._tiles[H];if(void 0!==X.fadeEndTime&&X.fadeEndTime>=e.browser.now())return!0}return!1},N.prototype.setFeatureState=function(H,X,fe){this._state.updateState(H=H||"_geojsonTileLayer",X,fe)},N.prototype.removeFeatureState=function(H,X,fe){this._state.removeFeatureState(H=H||"_geojsonTileLayer",X,fe)},N.prototype.getFeatureState=function(H,X){return this._state.getState(H=H||"_geojsonTileLayer",X)},N.prototype.setDependencies=function(H,X,fe){var me=this._tiles[H];me&&me.setDependencies(X,fe)},N.prototype.reloadTilesForDependencies=function(H,X){for(var fe in this._tiles)this._tiles[fe].hasDependency(H,X)&&this._reloadTile(fe,"reloading");this._cache.filter(function(me){return!me.hasDependency(H,X)})},N}(e.Evented);function gt(O,N){var H=Math.abs(2*O.wrap)-+(O.wrap<0),X=Math.abs(2*N.wrap)-+(N.wrap<0);return O.overscaledZ-N.overscaledZ||X-H||N.canonical.y-O.canonical.y||N.canonical.x-O.canonical.x}function wt(O){return"raster"===O||"image"===O||"video"===O}function _t(){return new e.window.Worker(pe.workerUrl)}at.maxOverzooming=10,at.maxUnderzooming=3;var Rt="mapboxgl_preloaded_worker_pool",yt=function(){this.active={}};yt.prototype.acquire=function(O){if(!this.workers)for(this.workers=[];this.workers.length<yt.workerCount;)this.workers.push(new _t);return this.active[O]=!0,this.workers.slice()},yt.prototype.release=function(O){delete this.active[O],0===this.numActive()&&(this.workers.forEach(function(N){N.terminate()}),this.workers=null)},yt.prototype.isPreloaded=function(){return!!this.active[Rt]},yt.prototype.numActive=function(){return Object.keys(this.active).length};var Vt,Nt=Math.floor(e.browser.hardwareConcurrency/2);function rt(){return Vt||(Vt=new yt),Vt}function Tt(O,N){var H={};for(var X in O)"ref"!==X&&(H[X]=O[X]);return e.refProperties.forEach(function(fe){fe in N&&(H[fe]=N[fe])}),H}function Ut(O){O=O.slice();for(var N=Object.create(null),H=0;H<O.length;H++)N[O[H].id]=O[H];for(var X=0;X<O.length;X++)"ref"in O[X]&&(O[X]=Tt(O[X],N[O[X].ref]));return O}yt.workerCount=Math.max(Math.min(Nt,6),1);var Wt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function sn(O,N,H){H.push({command:Wt.addSource,args:[O,N[O]]})}function He(O,N,H){N.push({command:Wt.removeSource,args:[O]}),H[O]=!0}function vt(O,N,H,X){He(O,H,X),sn(O,N,H)}function Lt(O,N,H){var X;for(X in O[H])if(O[H].hasOwnProperty(X)&&"data"!==X&&!e.deepEqual(O[H][X],N[H][X]))return!1;for(X in N[H])if(N[H].hasOwnProperty(X)&&"data"!==X&&!e.deepEqual(O[H][X],N[H][X]))return!1;return!0}function Gt(O,N,H,X,fe,me){var _e;for(_e in N=N||{},O=O||{})O.hasOwnProperty(_e)&&(e.deepEqual(O[_e],N[_e])||H.push({command:me,args:[X,_e,N[_e],fe]}));for(_e in N)N.hasOwnProperty(_e)&&!O.hasOwnProperty(_e)&&(e.deepEqual(O[_e],N[_e])||H.push({command:me,args:[X,_e,N[_e],fe]}))}function Kt(O){return O.id}function _n(O,N){return O[N.id]=N,O}var on=function(O,N){this.reset(O,N)};on.prototype.reset=function(O,N){this.points=O||[],this._distances=[0];for(var H=1;H<this.points.length;H++)this._distances[H]=this._distances[H-1]+this.points[H].dist(this.points[H-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(N||0,.5*this.length),this.paddedLength=this.length-2*this.padding},on.prototype.lerp=function(O){if(1===this.points.length)return this.points[0];O=e.clamp(O,0,1);for(var N=1,H=this._distances[N],X=O*this.paddedLength+this.padding;H<X&&N<this._distances.length;)H=this._distances[++N];var fe=N-1,me=this._distances[fe],_e=H-me,ke=_e>0?(X-me)/_e:0;return this.points[fe].mult(1-ke).add(this.points[N].mult(ke))};var wn=function(O,N,H){var X=this.boxCells=[],fe=this.circleCells=[];this.xCellCount=Math.ceil(O/H),this.yCellCount=Math.ceil(N/H);for(var me=0;me<this.xCellCount*this.yCellCount;me++)X.push([]),fe.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=O,this.height=N,this.xScale=this.xCellCount/O,this.yScale=this.yCellCount/N,this.boxUid=0,this.circleUid=0};function On(O,N,H,X,fe){var me=e.create();return N?(e.scale(me,me,[1/fe,1/fe,1]),H||e.rotateZ(me,me,X.angle)):e.multiply(me,X.labelPlaneMatrix,O),me}function Dn(O,N,H,X,fe){if(N){var me=e.clone(O);return e.scale(me,me,[fe,fe,1]),H||e.rotateZ(me,me,-X.angle),me}return X.glCoordMatrix}function Tn(O,N){var H=[O.x,O.y,0,1];pr(H,H,N);var X=H[3];return{point:new e.Point(H[0]/X,H[1]/X),signedDistanceFromCamera:X}}function pn(O,N){return.5+O/N*.5}function En(O,N){var H=O[0]/O[3],X=O[1]/O[3];return H>=-N[0]&&H<=N[0]&&X>=-N[1]&&X<=N[1]}function Un(O,N,H,X,fe,me,_e,ke){var Oe=X?O.textSizeData:O.iconSizeData,Xe=e.evaluateSizeForZoom(Oe,H.transform.zoom),nt=[256/H.width*2+1,256/H.height*2+1],dt=X?O.text.dynamicLayoutVertexArray:O.icon.dynamicLayoutVertexArray;dt.clear();for(var Dt=O.lineVertexArray,Ft=X?O.text.placedSymbolArray:O.icon.placedSymbolArray,It=H.transform.width/H.transform.height,Pt=!1,Et=0;Et<Ft.length;Et++){var Zt=Ft.get(Et);if(Zt.hidden||Zt.writingMode===e.WritingMode.vertical&&!Pt)Ar(Zt.numGlyphs,dt);else{Pt=!1;var qt=[Zt.anchorX,Zt.anchorY,0,1];if(e.transformMat4(qt,qt,N),En(qt,nt)){var yn=pn(H.transform.cameraToCenterDistance,qt[3]),kn=e.evaluateSizeForFeature(Oe,Xe,Zt),Vn=_e?kn/yn:kn*yn,Gn=new e.Point(Zt.anchorX,Zt.anchorY),Tr=Tn(Gn,fe).point,_r={},Or=fr(Zt,Vn,!1,ke,N,fe,me,O.glyphOffsetArray,Dt,dt,Tr,Gn,_r,It);Pt=Or.useVertical,(Or.notEnoughRoom||Pt||Or.needsFlipping&&fr(Zt,Vn,!0,ke,N,fe,me,O.glyphOffsetArray,Dt,dt,Tr,Gn,_r,It).notEnoughRoom)&&Ar(Zt.numGlyphs,dt)}else Ar(Zt.numGlyphs,dt)}}X?O.text.dynamicLayoutVertexBuffer.updateData(dt):O.icon.dynamicLayoutVertexBuffer.updateData(dt)}function In(O,N,H,X,fe,me,_e,ke,Oe,Xe,nt){var dt=ke.glyphStartIndex+ke.numGlyphs,Dt=ke.lineStartIndex,Ft=ke.lineStartIndex+ke.lineLength,It=N.getoffsetX(ke.glyphStartIndex),Pt=N.getoffsetX(dt-1),Et=qr(O*It,H,X,fe,me,_e,ke.segment,Dt,Ft,Oe,Xe,nt);if(!Et)return null;var Zt=qr(O*Pt,H,X,fe,me,_e,ke.segment,Dt,Ft,Oe,Xe,nt);return Zt?{first:Et,last:Zt}:null}function sr(O,N,H,X){return O===e.WritingMode.horizontal&&Math.abs(H.y-N.y)>Math.abs(H.x-N.x)*X?{useVertical:!0}:(O===e.WritingMode.vertical?N.y<H.y:N.x>H.x)?{needsFlipping:!0}:null}function fr(O,N,H,X,fe,me,_e,ke,Oe,Xe,nt,dt,Dt,Ft){var It,Pt=N/24,Et=O.lineOffsetX*Pt,Zt=O.lineOffsetY*Pt;if(O.numGlyphs>1){var qt=O.glyphStartIndex+O.numGlyphs,$t=O.lineStartIndex,yn=O.lineStartIndex+O.lineLength,kn=In(Pt,ke,Et,Zt,H,nt,dt,O,Oe,me,Dt);if(!kn)return{notEnoughRoom:!0};var Vn=Tn(kn.first.point,_e).point,Gn=Tn(kn.last.point,_e).point;if(X&&!H){var Tr=sr(O.writingMode,Vn,Gn,Ft);if(Tr)return Tr}It=[kn.first];for(var _r=O.glyphStartIndex+1;_r<qt-1;_r++)It.push(qr(Pt*ke.getoffsetX(_r),Et,Zt,H,nt,dt,O.segment,$t,yn,Oe,me,Dt));It.push(kn.last)}else{if(X&&!H){var Or=Tn(dt,fe).point,Sr=O.lineStartIndex+O.segment+1,hi=new e.Point(Oe.getx(Sr),Oe.gety(Sr)),vi=Tn(hi,fe),Oi=vi.signedDistanceFromCamera>0?vi.point:rr(dt,hi,Or,1,fe),cr=sr(O.writingMode,Or,Oi,Ft);if(cr)return cr}var Hr=qr(Pt*ke.getoffsetX(O.glyphStartIndex),Et,Zt,H,nt,dt,O.segment,O.lineStartIndex,O.lineStartIndex+O.lineLength,Oe,me,Dt);if(!Hr)return{notEnoughRoom:!0};It=[Hr]}for(var bi=0,mi=It;bi<mi.length;bi+=1){var wi=mi[bi];e.addDynamicAttributes(Xe,wi.point,wi.angle)}return{}}function rr(O,N,H,X,fe){var me=Tn(O.add(O.sub(N)._unit()),fe).point,_e=H.sub(me);return H.add(_e._mult(X/_e.mag()))}function qr(O,N,H,X,fe,me,_e,ke,Oe,Xe,nt,dt){var Dt=X?O-N:O+N,Ft=Dt>0?1:-1,It=0;X&&(Ft*=-1,It=Math.PI),Ft<0&&(It+=Math.PI);for(var Pt=Ft>0?ke+_e:ke+_e+1,Et=fe,Zt=fe,qt=0,$t=0,yn=Math.abs(Dt),kn=[];qt+$t<=yn;){if((Pt+=Ft)<ke||Pt>=Oe)return null;if(Zt=Et,kn.push(Et),void 0===(Et=dt[Pt])){var Vn=new e.Point(Xe.getx(Pt),Xe.gety(Pt)),Gn=Tn(Vn,nt);if(Gn.signedDistanceFromCamera>0)Et=dt[Pt]=Gn.point;else{var Tr=Pt-Ft;Et=rr(0===qt?me:new e.Point(Xe.getx(Tr),Xe.gety(Tr)),Vn,Zt,yn-qt+1,nt)}}qt+=$t,$t=Zt.dist(Et)}var _r=(yn-qt)/$t,Or=Et.sub(Zt),Sr=Or.mult(_r)._add(Zt);Sr._add(Or._unit()._perp()._mult(H*Ft));var hi=It+Math.atan2(Et.y-Zt.y,Et.x-Zt.x);return kn.push(Sr),{point:Sr,angle:hi,path:kn}}wn.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},wn.prototype.insert=function(O,N,H,X,fe){this._forEachCell(N,H,X,fe,this._insertBoxCell,this.boxUid++),this.boxKeys.push(O),this.bboxes.push(N),this.bboxes.push(H),this.bboxes.push(X),this.bboxes.push(fe)},wn.prototype.insertCircle=function(O,N,H,X){this._forEachCell(N-X,H-X,N+X,H+X,this._insertCircleCell,this.circleUid++),this.circleKeys.push(O),this.circles.push(N),this.circles.push(H),this.circles.push(X)},wn.prototype._insertBoxCell=function(O,N,H,X,fe,me){this.boxCells[fe].push(me)},wn.prototype._insertCircleCell=function(O,N,H,X,fe,me){this.circleCells[fe].push(me)},wn.prototype._query=function(O,N,H,X,fe,me){if(H<0||O>this.width||X<0||N>this.height)return!fe&&[];var _e=[];if(O<=0&&N<=0&&this.width<=H&&this.height<=X){if(fe)return!0;for(var ke=0;ke<this.boxKeys.length;ke++)_e.push({key:this.boxKeys[ke],x1:this.bboxes[4*ke],y1:this.bboxes[4*ke+1],x2:this.bboxes[4*ke+2],y2:this.bboxes[4*ke+3]});for(var Oe=0;Oe<this.circleKeys.length;Oe++){var Xe=this.circles[3*Oe],nt=this.circles[3*Oe+1],dt=this.circles[3*Oe+2];_e.push({key:this.circleKeys[Oe],x1:Xe-dt,y1:nt-dt,x2:Xe+dt,y2:nt+dt})}return me?_e.filter(me):_e}return this._forEachCell(O,N,H,X,this._queryCell,_e,{hitTest:fe,seenUids:{box:{},circle:{}}},me),fe?_e.length>0:_e},wn.prototype._queryCircle=function(O,N,H,X,fe){var me=O-H,_e=O+H,ke=N-H,Oe=N+H;if(_e<0||me>this.width||Oe<0||ke>this.height)return!X&&[];var Xe=[];return this._forEachCell(me,ke,_e,Oe,this._queryCellCircle,Xe,{hitTest:X,circle:{x:O,y:N,radius:H},seenUids:{box:{},circle:{}}},fe),X?Xe.length>0:Xe},wn.prototype.query=function(O,N,H,X,fe){return this._query(O,N,H,X,!1,fe)},wn.prototype.hitTest=function(O,N,H,X,fe){return this._query(O,N,H,X,!0,fe)},wn.prototype.hitTestCircle=function(O,N,H,X){return this._queryCircle(O,N,H,!0,X)},wn.prototype._queryCell=function(O,N,H,X,fe,me,_e,ke){var Oe=_e.seenUids,Xe=this.boxCells[fe];if(null!==Xe)for(var nt=this.bboxes,dt=0,Dt=Xe;dt<Dt.length;dt+=1){var Ft=Dt[dt];if(!Oe.box[Ft]){Oe.box[Ft]=!0;var It=4*Ft;if(O<=nt[It+2]&&N<=nt[It+3]&&H>=nt[It+0]&&X>=nt[It+1]&&(!ke||ke(this.boxKeys[Ft]))){if(_e.hitTest)return me.push(!0),!0;me.push({key:this.boxKeys[Ft],x1:nt[It],y1:nt[It+1],x2:nt[It+2],y2:nt[It+3]})}}}var Pt=this.circleCells[fe];if(null!==Pt)for(var Et=this.circles,Zt=0,qt=Pt;Zt<qt.length;Zt+=1){var $t=qt[Zt];if(!Oe.circle[$t]){Oe.circle[$t]=!0;var yn=3*$t;if(this._circleAndRectCollide(Et[yn],Et[yn+1],Et[yn+2],O,N,H,X)&&(!ke||ke(this.circleKeys[$t]))){if(_e.hitTest)return me.push(!0),!0;var kn=Et[yn],Vn=Et[yn+1],Gn=Et[yn+2];me.push({key:this.circleKeys[$t],x1:kn-Gn,y1:Vn-Gn,x2:kn+Gn,y2:Vn+Gn})}}}},wn.prototype._queryCellCircle=function(O,N,H,X,fe,me,_e,ke){var Oe=_e.circle,Xe=_e.seenUids,nt=this.boxCells[fe];if(null!==nt)for(var dt=this.bboxes,Dt=0,Ft=nt;Dt<Ft.length;Dt+=1){var It=Ft[Dt];if(!Xe.box[It]){Xe.box[It]=!0;var Pt=4*It;if(this._circleAndRectCollide(Oe.x,Oe.y,Oe.radius,dt[Pt+0],dt[Pt+1],dt[Pt+2],dt[Pt+3])&&(!ke||ke(this.boxKeys[It])))return me.push(!0),!0}}var Et=this.circleCells[fe];if(null!==Et)for(var Zt=this.circles,qt=0,$t=Et;qt<$t.length;qt+=1){var yn=$t[qt];if(!Xe.circle[yn]){Xe.circle[yn]=!0;var kn=3*yn;if(this._circlesCollide(Zt[kn],Zt[kn+1],Zt[kn+2],Oe.x,Oe.y,Oe.radius)&&(!ke||ke(this.circleKeys[yn])))return me.push(!0),!0}}},wn.prototype._forEachCell=function(O,N,H,X,fe,me,_e,ke){for(var Oe=this._convertToXCellCoord(O),Xe=this._convertToYCellCoord(N),nt=this._convertToXCellCoord(H),dt=this._convertToYCellCoord(X),Dt=Oe;Dt<=nt;Dt++)for(var Ft=Xe;Ft<=dt;Ft++)if(fe.call(this,O,N,H,X,this.xCellCount*Ft+Dt,me,_e,ke))return},wn.prototype._convertToXCellCoord=function(O){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(O*this.xScale)))},wn.prototype._convertToYCellCoord=function(O){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(O*this.yScale)))},wn.prototype._circlesCollide=function(O,N,H,X,fe,me){var _e=X-O,ke=fe-N,Oe=H+me;return Oe*Oe>_e*_e+ke*ke},wn.prototype._circleAndRectCollide=function(O,N,H,X,fe,me,_e){var ke=(me-X)/2,Oe=Math.abs(O-(X+ke));if(Oe>ke+H)return!1;var Xe=(_e-fe)/2,nt=Math.abs(N-(fe+Xe));if(nt>Xe+H)return!1;if(Oe<=ke||nt<=Xe)return!0;var dt=Oe-ke,Dt=nt-Xe;return dt*dt+Dt*Dt<=H*H};var ti=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ar(O,N){for(var H=0;H<O;H++){var X=N.length;N.resize(X+4),N.float32.set(ti,3*X)}}function pr(O,N,H){var X=N[0],fe=N[1];return O[0]=H[0]*X+H[4]*fe+H[12],O[1]=H[1]*X+H[5]*fe+H[13],O[3]=H[3]*X+H[7]*fe+H[15],O}var Fn=function(O,N,H){void 0===N&&(N=new wn(O.width+200,O.height+200,25)),void 0===H&&(H=new wn(O.width+200,O.height+200,25)),this.transform=O,this.grid=N,this.ignoredGrid=H,this.pitchfactor=Math.cos(O._pitch)*O.cameraToCenterDistance,this.screenRightBoundary=O.width+100,this.screenBottomBoundary=O.height+100,this.gridRightBoundary=O.width+200,this.gridBottomBoundary=O.height+200};function Rn(O,N,H){return N*(e.EXTENT/(O.tileSize*Math.pow(2,H-O.tileID.overscaledZ)))}Fn.prototype.placeCollisionBox=function(O,N,H,X,fe){var me=this.projectAndGetPerspectiveRatio(X,O.anchorPointX,O.anchorPointY),_e=H*me.perspectiveRatio,ke=O.x1*_e+me.point.x,Oe=O.y1*_e+me.point.y,Xe=O.x2*_e+me.point.x,nt=O.y2*_e+me.point.y;return!this.isInsideGrid(ke,Oe,Xe,nt)||!N&&this.grid.hitTest(ke,Oe,Xe,nt,fe)?{box:[],offscreen:!1}:{box:[ke,Oe,Xe,nt],offscreen:this.isOffscreen(ke,Oe,Xe,nt)}},Fn.prototype.placeCollisionCircles=function(O,N,H,X,fe,me,_e,ke,Oe,Xe,nt,dt,Dt){var Ft=[],It=new e.Point(N.anchorX,N.anchorY),Pt=Tn(It,me),Et=pn(this.transform.cameraToCenterDistance,Pt.signedDistanceFromCamera),Zt=(Xe?fe/Et:fe*Et)/e.ONE_EM,qt=Tn(It,_e).point,$t=In(Zt,X,N.lineOffsetX*Zt,N.lineOffsetY*Zt,!1,qt,It,N,H,_e,{}),yn=!1,kn=!1,Vn=!0;if($t){for(var Gn=.5*dt*Et+Dt,Tr=new e.Point(-100,-100),_r=new e.Point(this.screenRightBoundary,this.screenBottomBoundary),Or=new on,Sr=$t.first,hi=$t.last,vi=[],Oi=Sr.path.length-1;Oi>=1;Oi--)vi.push(Sr.path[Oi]);for(var cr=1;cr<hi.path.length;cr++)vi.push(hi.path[cr]);var Hr=2.5*Gn;if(ke){var bi=vi.map(function(Ko){return Tn(Ko,ke)});vi=bi.some(function(Ko){return Ko.signedDistanceFromCamera<=0})?[]:bi.map(function(Ko){return Ko.point})}var mi=[];if(vi.length>0){for(var wi=vi[0].clone(),Fi=vi[0].clone(),ca=1;ca<vi.length;ca++)wi.x=Math.min(wi.x,vi[ca].x),wi.y=Math.min(wi.y,vi[ca].y),Fi.x=Math.max(Fi.x,vi[ca].x),Fi.y=Math.max(Fi.y,vi[ca].y);mi=wi.x>=Tr.x&&Fi.x<=_r.x&&wi.y>=Tr.y&&Fi.y<=_r.y?[vi]:Fi.x<Tr.x||wi.x>_r.x||Fi.y<Tr.y||wi.y>_r.y?[]:e.clipLine([vi],Tr.x,Tr.y,_r.x,_r.y)}for(var Ai=0,Zi=mi;Ai<Zi.length;Ai+=1){Or.reset(Zi[Ai],.25*Gn);var ya;ya=Or.length<=.5*Gn?1:Math.ceil(Or.paddedLength/Hr)+1;for(var ta=0;ta<ya;ta++){var ba=ta/Math.max(ya-1,1),Ra=Or.lerp(ba),ro=Ra.x+100,Oo=Ra.y+100;Ft.push(ro,Oo,Gn,0);var ko=ro-Gn,eo=Oo-Gn,Co=ro+Gn,xo=Oo+Gn;if(Vn=Vn&&this.isOffscreen(ko,eo,Co,xo),kn=kn||this.isInsideGrid(ko,eo,Co,xo),!O&&this.grid.hitTestCircle(ro,Oo,Gn,nt)&&(yn=!0,!Oe))return{circles:[],offscreen:!1,collisionDetected:yn}}}}return{circles:!Oe&&yn||!kn?[]:Ft,offscreen:Vn,collisionDetected:yn}},Fn.prototype.queryRenderedSymbols=function(O){if(0===O.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};for(var N=[],H=1/0,X=1/0,fe=-1/0,me=-1/0,_e=0,ke=O;_e<ke.length;_e+=1){var Oe=ke[_e],Xe=new e.Point(Oe.x+100,Oe.y+100);H=Math.min(H,Xe.x),X=Math.min(X,Xe.y),fe=Math.max(fe,Xe.x),me=Math.max(me,Xe.y),N.push(Xe)}for(var nt={},dt={},Dt=0,Ft=this.grid.query(H,X,fe,me).concat(this.ignoredGrid.query(H,X,fe,me));Dt<Ft.length;Dt+=1){var It=Ft[Dt],Pt=It.key;if(void 0===nt[Pt.bucketInstanceId]&&(nt[Pt.bucketInstanceId]={}),!nt[Pt.bucketInstanceId][Pt.featureIndex]){var Et=[new e.Point(It.x1,It.y1),new e.Point(It.x2,It.y1),new e.Point(It.x2,It.y2),new e.Point(It.x1,It.y2)];e.polygonIntersectsPolygon(N,Et)&&(nt[Pt.bucketInstanceId][Pt.featureIndex]=!0,void 0===dt[Pt.bucketInstanceId]&&(dt[Pt.bucketInstanceId]=[]),dt[Pt.bucketInstanceId].push(Pt.featureIndex))}}return dt},Fn.prototype.insertCollisionBox=function(O,N,H,X,fe){(N?this.ignoredGrid:this.grid).insert({bucketInstanceId:H,featureIndex:X,collisionGroupID:fe},O[0],O[1],O[2],O[3])},Fn.prototype.insertCollisionCircles=function(O,N,H,X,fe){for(var me=N?this.ignoredGrid:this.grid,_e={bucketInstanceId:H,featureIndex:X,collisionGroupID:fe},ke=0;ke<O.length;ke+=4)me.insertCircle(_e,O[ke],O[ke+1],O[ke+2])},Fn.prototype.projectAndGetPerspectiveRatio=function(O,N,H){var X=[N,H,0,1];return pr(X,X,O),{point:new e.Point((X[0]/X[3]+1)/2*this.transform.width+100,(-X[1]/X[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/X[3]*.5}},Fn.prototype.isOffscreen=function(O,N,H,X){return H<100||O>=this.screenRightBoundary||X<100||N>this.screenBottomBoundary},Fn.prototype.isInsideGrid=function(O,N,H,X){return H>=0&&O<this.gridRightBoundary&&X>=0&&N<this.gridBottomBoundary},Fn.prototype.getViewportMatrix=function(){var O=e.identity([]);return e.translate(O,O,[-100,-100,0]),O};var hr=function(O,N,H,X){this.opacity=O?Math.max(0,Math.min(1,O.opacity+(O.placed?N:-N))):X&&H?1:0,this.placed=H};hr.prototype.isHidden=function(){return 0===this.opacity&&!this.placed};var ri=function(O,N,H,X,fe){this.text=new hr(O?O.text:null,N,H,fe),this.icon=new hr(O?O.icon:null,N,X,fe)};ri.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var ir=function(O,N,H){this.text=O,this.icon=N,this.skipFade=H},Ur=function(){this.invProjMatrix=e.create(),this.viewportMatrix=e.create(),this.circles=[]},Mr=function(O,N,H,X,fe){this.bucketInstanceId=O,this.featureIndex=N,this.sourceLayerIndex=H,this.bucketIndex=X,this.tileID=fe},wr=function(O){this.crossSourceCollisions=O,this.maxGroupID=0,this.collisionGroups={}};function ii(O,N,H,X,fe){var me=e.getAnchorAlignment(O),_e=-(me.horizontalAlign-.5)*N,ke=-(me.verticalAlign-.5)*H,Oe=e.evaluateVariableOffset(O,X);return new e.Point(_e+Oe[0]*fe,ke+Oe[1]*fe)}function gn(O,N,H,X,fe,me){var _e=O.x1,ke=O.x2,Oe=O.y1,Xe=O.y2,nt=O.anchorPointX,dt=O.anchorPointY,Dt=new e.Point(N,H);return X&&Dt._rotate(fe?me:-me),{x1:_e+Dt.x,y1:Oe+Dt.y,x2:ke+Dt.x,y2:Xe+Dt.y,anchorPointX:nt,anchorPointY:dt}}wr.prototype.get=function(O){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[O]){var N=++this.maxGroupID;this.collisionGroups[O]={ID:N,predicate:function(H){return H.collisionGroupID===N}}}return this.collisionGroups[O]};var jt=function(O,N,H,X){this.transform=O.clone(),this.collisionIndex=new Fn(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=N,this.retainedQueryData={},this.collisionGroups=new wr(H),this.collisionCircleArrays={},this.prevPlacement=X,X&&(X.prevPlacement=void 0),this.placedOrientations={}};function Jt(O,N,H,X,fe){O.emplaceBack(N?1:0,H?1:0,X||0,fe||0),O.emplaceBack(N?1:0,H?1:0,X||0,fe||0),O.emplaceBack(N?1:0,H?1:0,X||0,fe||0),O.emplaceBack(N?1:0,H?1:0,X||0,fe||0)}jt.prototype.getBucketParts=function(O,N,H,X){var fe=H.getBucket(N),me=H.latestFeatureIndex;if(fe&&me&&N.id===fe.layerIds[0]){var _e=H.collisionBoxArray,ke=fe.layers[0].layout,Oe=Math.pow(2,this.transform.zoom-H.tileID.overscaledZ),Xe=H.tileSize/e.EXTENT,nt=this.transform.calculatePosMatrix(H.tileID.toUnwrapped()),dt="map"===ke.get("text-pitch-alignment"),Dt="map"===ke.get("text-rotation-alignment"),Ft=Rn(H,1,this.transform.zoom),It=On(nt,dt,Dt,this.transform,Ft),Pt=null;if(dt){var Et=Dn(nt,dt,Dt,this.transform,Ft);Pt=e.multiply([],this.transform.labelPlaneMatrix,Et)}this.retainedQueryData[fe.bucketInstanceId]=new Mr(fe.bucketInstanceId,me,fe.sourceLayerIndex,fe.index,H.tileID);var Zt={bucket:fe,layout:ke,posMatrix:nt,textLabelPlaneMatrix:It,labelToScreenMatrix:Pt,scale:Oe,textPixelRatio:Xe,holdingForFade:H.holdingForFade(),collisionBoxArray:_e,partiallyEvaluatedTextSize:e.evaluateSizeForZoom(fe.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(fe.sourceID)};if(X)for(var qt=0,$t=fe.sortKeyRanges;qt<$t.length;qt+=1){var yn=$t[qt];O.push({sortKey:yn.sortKey,symbolInstanceStart:yn.symbolInstanceStart,symbolInstanceEnd:yn.symbolInstanceEnd,parameters:Zt})}else O.push({symbolInstanceStart:0,symbolInstanceEnd:fe.symbolInstances.length,parameters:Zt})}},jt.prototype.attemptAnchorPlacement=function(O,N,H,X,fe,me,_e,ke,Oe,Xe,nt,dt,Dt,Ft,It){var Pt,Et=[dt.textOffset0,dt.textOffset1],Zt=ii(O,H,X,Et,fe),qt=this.collisionIndex.placeCollisionBox(gn(N,Zt.x,Zt.y,me,_e,this.transform.angle),nt,ke,Oe,Xe.predicate);if((!It||0!==this.collisionIndex.placeCollisionBox(gn(It,Zt.x,Zt.y,me,_e,this.transform.angle),nt,ke,Oe,Xe.predicate).box.length)&&qt.box.length>0)return this.prevPlacement&&this.prevPlacement.variableOffsets[dt.crossTileID]&&this.prevPlacement.placements[dt.crossTileID]&&this.prevPlacement.placements[dt.crossTileID].text&&(Pt=this.prevPlacement.variableOffsets[dt.crossTileID].anchor),this.variableOffsets[dt.crossTileID]={textOffset:Et,width:H,height:X,anchor:O,textBoxScale:fe,prevAnchor:Pt},this.markUsedJustification(Dt,O,dt,Ft),Dt.allowVerticalPlacement&&(this.markUsedOrientation(Dt,Ft,dt),this.placedOrientations[dt.crossTileID]=Ft),{shift:Zt,placedGlyphBoxes:qt}},jt.prototype.placeLayerBucketPart=function(O,N,H){var X=this,fe=O.parameters,me=fe.bucket,_e=fe.layout,ke=fe.posMatrix,Oe=fe.textLabelPlaneMatrix,Xe=fe.labelToScreenMatrix,nt=fe.textPixelRatio,dt=fe.holdingForFade,Dt=fe.collisionBoxArray,Ft=fe.partiallyEvaluatedTextSize,It=fe.collisionGroup,Pt=_e.get("text-optional"),Et=_e.get("icon-optional"),Zt=_e.get("text-allow-overlap"),qt=_e.get("icon-allow-overlap"),$t="map"===_e.get("text-rotation-alignment"),yn="map"===_e.get("text-pitch-alignment"),kn="none"!==_e.get("icon-text-fit"),Vn="viewport-y"===_e.get("symbol-z-order"),Gn=Zt&&(qt||!me.hasIconData()||Et),Tr=qt&&(Zt||!me.hasTextData()||Pt);!me.collisionArrays&&Dt&&me.deserializeCollisionBoxes(Dt);var _r=function(cr,Hr){if(!N[cr.crossTileID])if(dt)X.placements[cr.crossTileID]=new ir(!1,!1,!1);else{var bi,mi=!1,wi=!1,Fi=!0,ca=null,Ai={box:null,offscreen:null},Zi={box:null,offscreen:null},Xi=null,ya=null,ta=0,ba=0,Ra=0;Hr.textFeatureIndex?ta=Hr.textFeatureIndex:cr.useRuntimeCollisionCircles&&(ta=cr.featureIndex),Hr.verticalTextFeatureIndex&&(ba=Hr.verticalTextFeatureIndex);var ro=Hr.textBox;if(ro){var Oo=function(bo){var ws=e.WritingMode.horizontal;if(me.allowVerticalPlacement&&!bo&&X.prevPlacement){var Zs=X.prevPlacement.placedOrientations[cr.crossTileID];Zs&&(X.placedOrientations[cr.crossTileID]=Zs,X.markUsedOrientation(me,ws=Zs,cr))}return ws},ko=function(bo,ws){if(me.allowVerticalPlacement&&cr.numVerticalGlyphVertices>0&&Hr.verticalTextBox)for(var Zs=0,Lc=me.writingModes;Zs<Lc.length&&(Lc[Zs]===e.WritingMode.vertical?(Ai=ws(),Zi=Ai):Ai=bo(),!(Ai&&Ai.box&&Ai.box.length));Zs+=1);else Ai=bo()};if(_e.get("text-variable-anchor")){var eo=_e.get("text-variable-anchor");if(X.prevPlacement&&X.prevPlacement.variableOffsets[cr.crossTileID]){var Co=X.prevPlacement.variableOffsets[cr.crossTileID];eo.indexOf(Co.anchor)>0&&(eo=eo.filter(function(bo){return bo!==Co.anchor})).unshift(Co.anchor)}var xo=function(bo,ws,Zs){for(var Lc=bo.x2-bo.x1,jh=bo.y2-bo.y1,bl=cr.textBoxScale,_f=kn&&!qt?ws:null,Ic={box:[],offscreen:!1},dp=Zt?2*eo.length:eo.length,Kl=0;Kl<dp;++Kl){var Wu=X.attemptAnchorPlacement(eo[Kl%eo.length],bo,Lc,jh,bl,$t,yn,nt,ke,It,Kl>=eo.length,cr,me,Zs,_f);if(Wu&&(Ic=Wu.placedGlyphBoxes)&&Ic.box&&Ic.box.length){mi=!0,ca=Wu.shift;break}}return Ic};ko(function(){return xo(ro,Hr.iconBox,e.WritingMode.horizontal)},function(){var bo=Hr.verticalTextBox;return me.allowVerticalPlacement&&!(Ai&&Ai.box&&Ai.box.length)&&cr.numVerticalGlyphVertices>0&&bo?xo(bo,Hr.verticalIconBox,e.WritingMode.vertical):{box:null,offscreen:null}}),Ai&&(mi=Ai.box,Fi=Ai.offscreen);var Ko=Oo(Ai&&Ai.box);if(!mi&&X.prevPlacement){var rs=X.prevPlacement.variableOffsets[cr.crossTileID];rs&&(X.variableOffsets[cr.crossTileID]=rs,X.markUsedJustification(me,rs.anchor,cr,Ko))}}else{var ds=function(bo,ws){var Zs=X.collisionIndex.placeCollisionBox(bo,Zt,nt,ke,It.predicate);return Zs&&Zs.box&&Zs.box.length&&(X.markUsedOrientation(me,ws,cr),X.placedOrientations[cr.crossTileID]=ws),Zs};ko(function(){return ds(ro,e.WritingMode.horizontal)},function(){var bo=Hr.verticalTextBox;return me.allowVerticalPlacement&&cr.numVerticalGlyphVertices>0&&bo?ds(bo,e.WritingMode.vertical):{box:null,offscreen:null}}),Oo(Ai&&Ai.box&&Ai.box.length)}}if(mi=(bi=Ai)&&bi.box&&bi.box.length>0,Fi=bi&&bi.offscreen,cr.useRuntimeCollisionCircles){var Bl=me.text.placedSymbolArray.get(cr.centerJustifiedTextSymbolIndex),$l=e.evaluateSizeForFeature(me.textSizeData,Ft,Bl),bf=_e.get("text-padding");Xi=X.collisionIndex.placeCollisionCircles(Zt,Bl,me.lineVertexArray,me.glyphOffsetArray,$l,ke,Oe,Xe,H,yn,It.predicate,cr.collisionCircleDiameter,bf),mi=Zt||Xi.circles.length>0&&!Xi.collisionDetected,Fi=Fi&&Xi.offscreen}if(Hr.iconFeatureIndex&&(Ra=Hr.iconFeatureIndex),Hr.iconBox){var Hu=function(bo){var ws=kn&&ca?gn(bo,ca.x,ca.y,$t,yn,X.transform.angle):bo;return X.collisionIndex.placeCollisionBox(ws,qt,nt,ke,It.predicate)};wi=Zi&&Zi.box&&Zi.box.length&&Hr.verticalIconBox?(ya=Hu(Hr.verticalIconBox)).box.length>0:(ya=Hu(Hr.iconBox)).box.length>0,Fi=Fi&&ya.offscreen}var Ss=Pt||0===cr.numHorizontalGlyphVertices&&0===cr.numVerticalGlyphVertices,Gu=Et||0===cr.numIconVertices;if(Ss||Gu?Gu?Ss||(wi=wi&&mi):mi=wi&&mi:wi=mi=wi&&mi,mi&&bi&&bi.box&&X.collisionIndex.insertCollisionBox(bi.box,_e.get("text-ignore-placement"),me.bucketInstanceId,Zi&&Zi.box&&ba?ba:ta,It.ID),wi&&ya&&X.collisionIndex.insertCollisionBox(ya.box,_e.get("icon-ignore-placement"),me.bucketInstanceId,Ra,It.ID),Xi&&(mi&&X.collisionIndex.insertCollisionCircles(Xi.circles,_e.get("text-ignore-placement"),me.bucketInstanceId,ta,It.ID),H)){var _u=me.bucketInstanceId,xl=X.collisionCircleArrays[_u];void 0===xl&&(xl=X.collisionCircleArrays[_u]=new Ur);for(var qu=0;qu<Xi.circles.length;qu+=4)xl.circles.push(Xi.circles[qu+0]),xl.circles.push(Xi.circles[qu+1]),xl.circles.push(Xi.circles[qu+2]),xl.circles.push(Xi.collisionDetected?1:0)}X.placements[cr.crossTileID]=new ir(mi||Gn,wi||Tr,Fi||me.justReloaded),N[cr.crossTileID]=!0}};if(Vn)for(var Or=me.getSortedSymbolIndexes(this.transform.angle),Sr=Or.length-1;Sr>=0;--Sr){var hi=Or[Sr];_r(me.symbolInstances.get(hi),me.collisionArrays[hi])}else for(var vi=O.symbolInstanceStart;vi<O.symbolInstanceEnd;vi++)_r(me.symbolInstances.get(vi),me.collisionArrays[vi]);if(H&&me.bucketInstanceId in this.collisionCircleArrays){var Oi=this.collisionCircleArrays[me.bucketInstanceId];e.invert(Oi.invProjMatrix,ke),Oi.viewportMatrix=this.collisionIndex.getViewportMatrix()}me.justReloaded=!1},jt.prototype.markUsedJustification=function(O,N,H,X){var fe;fe=X===e.WritingMode.vertical?H.verticalPlacedTextSymbolIndex:{left:H.leftJustifiedTextSymbolIndex,center:H.centerJustifiedTextSymbolIndex,right:H.rightJustifiedTextSymbolIndex}[e.getAnchorJustification(N)];for(var _e=0,ke=[H.leftJustifiedTextSymbolIndex,H.centerJustifiedTextSymbolIndex,H.rightJustifiedTextSymbolIndex,H.verticalPlacedTextSymbolIndex];_e<ke.length;_e+=1){var Oe=ke[_e];Oe>=0&&(O.text.placedSymbolArray.get(Oe).crossTileID=fe>=0&&Oe!==fe?0:H.crossTileID)}},jt.prototype.markUsedOrientation=function(O,N,H){for(var X=N===e.WritingMode.horizontal||N===e.WritingMode.horizontalOnly?N:0,fe=N===e.WritingMode.vertical?N:0,me=0,_e=[H.leftJustifiedTextSymbolIndex,H.centerJustifiedTextSymbolIndex,H.rightJustifiedTextSymbolIndex];me<_e.length;me+=1)O.text.placedSymbolArray.get(_e[me]).placedOrientation=X;H.verticalPlacedTextSymbolIndex&&(O.text.placedSymbolArray.get(H.verticalPlacedTextSymbolIndex).placedOrientation=fe)},jt.prototype.commit=function(O){this.commitTime=O,this.zoomAtLastRecencyCheck=this.transform.zoom;var N=this.prevPlacement,H=!1;this.prevZoomAdjustment=N?N.zoomAdjustment(this.transform.zoom):0;var X=N?N.symbolFadeChange(O):1,fe=N?N.opacities:{},me=N?N.variableOffsets:{},_e=N?N.placedOrientations:{};for(var ke in this.placements){var Oe=this.placements[ke],Xe=fe[ke];Xe?(this.opacities[ke]=new ri(Xe,X,Oe.text,Oe.icon),H=H||Oe.text!==Xe.text.placed||Oe.icon!==Xe.icon.placed):(this.opacities[ke]=new ri(null,X,Oe.text,Oe.icon,Oe.skipFade),H=H||Oe.text||Oe.icon)}for(var nt in fe){var dt=fe[nt];if(!this.opacities[nt]){var Dt=new ri(dt,X,!1,!1);Dt.isHidden()||(this.opacities[nt]=Dt,H=H||dt.text.placed||dt.icon.placed)}}for(var Ft in me)this.variableOffsets[Ft]||!this.opacities[Ft]||this.opacities[Ft].isHidden()||(this.variableOffsets[Ft]=me[Ft]);for(var It in _e)this.placedOrientations[It]||!this.opacities[It]||this.opacities[It].isHidden()||(this.placedOrientations[It]=_e[It]);H?this.lastPlacementChangeTime=O:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=N?N.lastPlacementChangeTime:O)},jt.prototype.updateLayerOpacities=function(O,N){for(var H={},X=0,fe=N;X<fe.length;X+=1){var me=fe[X],_e=me.getBucket(O);_e&&me.latestFeatureIndex&&O.id===_e.layerIds[0]&&this.updateBucketOpacities(_e,H,me.collisionBoxArray)}},jt.prototype.updateBucketOpacities=function(O,N,H){var X=this;O.hasTextData()&&O.text.opacityVertexArray.clear(),O.hasIconData()&&O.icon.opacityVertexArray.clear(),O.hasIconCollisionBoxData()&&O.iconCollisionBox.collisionVertexArray.clear(),O.hasTextCollisionBoxData()&&O.textCollisionBox.collisionVertexArray.clear();var fe=O.layers[0].layout,me=new ri(null,0,!1,!1,!0),_e=fe.get("text-allow-overlap"),ke=fe.get("icon-allow-overlap"),Oe=fe.get("text-variable-anchor"),Xe="map"===fe.get("text-rotation-alignment"),nt="map"===fe.get("text-pitch-alignment"),dt="none"!==fe.get("icon-text-fit"),Dt=new ri(null,0,_e&&(ke||!O.hasIconData()||fe.get("icon-optional")),ke&&(_e||!O.hasTextData()||fe.get("text-optional")),!0);!O.collisionArrays&&H&&(O.hasIconCollisionBoxData()||O.hasTextCollisionBoxData())&&O.deserializeCollisionBoxes(H);for(var Ft=function(Zt,qt,$t){for(var yn=0;yn<qt/4;yn++)Zt.opacityVertexArray.emplaceBack($t)},It=function(Zt){var qt=O.symbolInstances.get(Zt),$t=qt.numHorizontalGlyphVertices,yn=qt.numVerticalGlyphVertices,kn=qt.crossTileID,Gn=X.opacities[kn];N[kn]?Gn=me:Gn||(X.opacities[kn]=Gn=Dt),N[kn]=!0;var _r=qt.numIconVertices>0,Or=X.placedOrientations[qt.crossTileID],Sr=Or===e.WritingMode.vertical,hi=Or===e.WritingMode.horizontal||Or===e.WritingMode.horizontalOnly;if($t>0||yn>0){var vi=Wn(Gn.text);Ft(O.text,$t,Sr?jn:vi),Ft(O.text,yn,hi?jn:vi);var Hr=Gn.text.isHidden();[qt.rightJustifiedTextSymbolIndex,qt.centerJustifiedTextSymbolIndex,qt.leftJustifiedTextSymbolIndex].forEach(function(Ra){Ra>=0&&(O.text.placedSymbolArray.get(Ra).hidden=Hr||Sr?1:0)}),qt.verticalPlacedTextSymbolIndex>=0&&(O.text.placedSymbolArray.get(qt.verticalPlacedTextSymbolIndex).hidden=Hr||hi?1:0);var bi=X.variableOffsets[qt.crossTileID];bi&&X.markUsedJustification(O,bi.anchor,qt,Or);var mi=X.placedOrientations[qt.crossTileID];mi&&(X.markUsedJustification(O,"left",qt,mi),X.markUsedOrientation(O,mi,qt))}if(_r){var wi=Wn(Gn.icon),Fi=!(dt&&qt.verticalPlacedIconSymbolIndex&&Sr);qt.placedIconSymbolIndex>=0&&(Ft(O.icon,qt.numIconVertices,Fi?wi:jn),O.icon.placedSymbolArray.get(qt.placedIconSymbolIndex).hidden=Gn.icon.isHidden()),qt.verticalPlacedIconSymbolIndex>=0&&(Ft(O.icon,qt.numVerticalIconVertices,Fi?jn:wi),O.icon.placedSymbolArray.get(qt.verticalPlacedIconSymbolIndex).hidden=Gn.icon.isHidden())}if(O.hasIconCollisionBoxData()||O.hasTextCollisionBoxData()){var Zi=O.collisionArrays[Zt];if(Zi){var Xi=new e.Point(0,0);if(Zi.textBox||Zi.verticalTextBox){var ya=!0;if(Oe){var ta=X.variableOffsets[kn];ta?(Xi=ii(ta.anchor,ta.width,ta.height,ta.textOffset,ta.textBoxScale),Xe&&Xi._rotate(nt?X.transform.angle:-X.transform.angle)):ya=!1}Zi.textBox&&Jt(O.textCollisionBox.collisionVertexArray,Gn.text.placed,!ya||Sr,Xi.x,Xi.y),Zi.verticalTextBox&&Jt(O.textCollisionBox.collisionVertexArray,Gn.text.placed,!ya||hi,Xi.x,Xi.y)}var ba=Boolean(!hi&&Zi.verticalIconBox);Zi.iconBox&&Jt(O.iconCollisionBox.collisionVertexArray,Gn.icon.placed,ba,dt?Xi.x:0,dt?Xi.y:0),Zi.verticalIconBox&&Jt(O.iconCollisionBox.collisionVertexArray,Gn.icon.placed,!ba,dt?Xi.x:0,dt?Xi.y:0)}}},Pt=0;Pt<O.symbolInstances.length;Pt++)It(Pt);if(O.sortFeatures(this.transform.angle),this.retainedQueryData[O.bucketInstanceId]&&(this.retainedQueryData[O.bucketInstanceId].featureSortOrder=O.featureSortOrder),O.hasTextData()&&O.text.opacityVertexBuffer&&O.text.opacityVertexBuffer.updateData(O.text.opacityVertexArray),O.hasIconData()&&O.icon.opacityVertexBuffer&&O.icon.opacityVertexBuffer.updateData(O.icon.opacityVertexArray),O.hasIconCollisionBoxData()&&O.iconCollisionBox.collisionVertexBuffer&&O.iconCollisionBox.collisionVertexBuffer.updateData(O.iconCollisionBox.collisionVertexArray),O.hasTextCollisionBoxData()&&O.textCollisionBox.collisionVertexBuffer&&O.textCollisionBox.collisionVertexBuffer.updateData(O.textCollisionBox.collisionVertexArray),O.bucketInstanceId in this.collisionCircleArrays){var Et=this.collisionCircleArrays[O.bucketInstanceId];O.placementInvProjMatrix=Et.invProjMatrix,O.placementViewportMatrix=Et.viewportMatrix,O.collisionCircleArray=Et.circles,delete this.collisionCircleArrays[O.bucketInstanceId]}},jt.prototype.symbolFadeChange=function(O){return 0===this.fadeDuration?1:(O-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},jt.prototype.zoomAdjustment=function(O){return Math.max(0,(this.transform.zoom-O)/1.5)},jt.prototype.hasTransitions=function(O){return this.stale||O-this.lastPlacementChangeTime<this.fadeDuration},jt.prototype.stillRecent=function(O,N){var H=this.zoomAtLastRecencyCheck===N?1-this.zoomAdjustment(N):1;return this.zoomAtLastRecencyCheck=N,this.commitTime+this.fadeDuration*H>O},jt.prototype.setStale=function(){this.stale=!0};var An=Math.pow(2,25),Hn=Math.pow(2,24),yr=Math.pow(2,17),gr=Math.pow(2,16),Bn=Math.pow(2,9),Nn=Math.pow(2,8),Zn=Math.pow(2,1);function Wn(O){if(0===O.opacity&&!O.placed)return 0;if(1===O.opacity&&O.placed)return 4294967295;var N=O.placed?1:0,H=Math.floor(127*O.opacity);return H*An+N*Hn+H*yr+N*gr+H*Bn+N*Nn+H*Zn+N}var jn=0,xr=function(O){this._sortAcrossTiles="viewport-y"!==O.layout.get("symbol-z-order")&&void 0!==O.layout.get("symbol-sort-key").constantOr(1),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};xr.prototype.continuePlacement=function(O,N,H,X,fe){for(var me=this._bucketParts;this._currentTileIndex<O.length;)if(N.getBucketParts(me,X,O[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,fe())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,me.sort(function(Oe,Xe){return Oe.sortKey-Xe.sortKey}));this._currentPartIndex<me.length;)if(N.placeLayerBucketPart(me[this._currentPartIndex],this._seenCrossTileIDs,H),this._currentPartIndex++,fe())return!0;return!1};var Ir=function(O,N,H,X,fe,me,_e){this.placement=new jt(O,fe,me,_e),this._currentPlacementIndex=N.length-1,this._forceFullPlacement=H,this._showCollisionBoxes=X,this._done=!1};Ir.prototype.isDone=function(){return this._done},Ir.prototype.continuePlacement=function(O,N,H){for(var X=this,fe=e.browser.now(),me=function(){var Oe=e.browser.now()-fe;return!X._forceFullPlacement&&Oe>2};this._currentPlacementIndex>=0;){var _e=N[O[this._currentPlacementIndex]],ke=this.placement.collisionIndex.transform.zoom;if("symbol"===_e.type&&(!_e.minzoom||_e.minzoom<=ke)&&(!_e.maxzoom||_e.maxzoom>ke)){if(this._inProgressLayer||(this._inProgressLayer=new xr(_e)),this._inProgressLayer.continuePlacement(H[_e.source],this.placement,this._showCollisionBoxes,_e,me))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Ir.prototype.commit=function(O){return this.placement.commit(O),this.placement};var Vr=512/e.EXTENT/2,qn=function(O,N,H){this.tileID=O,this.indexedSymbolInstances={},this.bucketInstanceId=H;for(var X=0;X<N.length;X++){var fe=N.get(X),me=fe.key;this.indexedSymbolInstances[me]||(this.indexedSymbolInstances[me]=[]),this.indexedSymbolInstances[me].push({crossTileID:fe.crossTileID,coord:this.getScaledCoordinates(fe,O)})}};qn.prototype.getScaledCoordinates=function(O,N){var X=Vr/Math.pow(2,N.canonical.z-this.tileID.canonical.z);return{x:Math.floor((N.canonical.x*e.EXTENT+O.anchorX)*X),y:Math.floor((N.canonical.y*e.EXTENT+O.anchorY)*X)}},qn.prototype.findMatches=function(O,N,H){for(var X=this.tileID.canonical.z<N.canonical.z?1:Math.pow(2,this.tileID.canonical.z-N.canonical.z),fe=0;fe<O.length;fe++){var me=O.get(fe);if(!me.crossTileID){var _e=this.indexedSymbolInstances[me.key];if(_e)for(var ke=this.getScaledCoordinates(me,N),Oe=0,Xe=_e;Oe<Xe.length;Oe+=1){var nt=Xe[Oe];if(Math.abs(nt.coord.x-ke.x)<=X&&Math.abs(nt.coord.y-ke.y)<=X&&!H[nt.crossTileID]){H[nt.crossTileID]=!0,me.crossTileID=nt.crossTileID;break}}}}};var jr=function(){this.maxCrossTileID=0};jr.prototype.generate=function(){return++this.maxCrossTileID};var tr=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};tr.prototype.handleWrapJump=function(O){var N=Math.round((O-this.lng)/360);if(0!==N)for(var H in this.indexes){var X=this.indexes[H],fe={};for(var me in X){var _e=X[me];_e.tileID=_e.tileID.unwrapTo(_e.tileID.wrap+N),fe[_e.tileID.key]=_e}this.indexes[H]=fe}this.lng=O},tr.prototype.addBucket=function(O,N,H){if(this.indexes[O.overscaledZ]&&this.indexes[O.overscaledZ][O.key]){if(this.indexes[O.overscaledZ][O.key].bucketInstanceId===N.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(O.overscaledZ,this.indexes[O.overscaledZ][O.key])}for(var X=0;X<N.symbolInstances.length;X++)N.symbolInstances.get(X).crossTileID=0;this.usedCrossTileIDs[O.overscaledZ]||(this.usedCrossTileIDs[O.overscaledZ]={});var fe=this.usedCrossTileIDs[O.overscaledZ];for(var me in this.indexes){var _e=this.indexes[me];if(Number(me)>O.overscaledZ)for(var ke in _e){var Oe=_e[ke];Oe.tileID.isChildOf(O)&&Oe.findMatches(N.symbolInstances,O,fe)}else{var Xe=_e[O.scaledTo(Number(me)).key];Xe&&Xe.findMatches(N.symbolInstances,O,fe)}}for(var nt=0;nt<N.symbolInstances.length;nt++){var dt=N.symbolInstances.get(nt);dt.crossTileID||(dt.crossTileID=H.generate(),fe[dt.crossTileID]=!0)}return void 0===this.indexes[O.overscaledZ]&&(this.indexes[O.overscaledZ]={}),this.indexes[O.overscaledZ][O.key]=new qn(O,N.symbolInstances,N.bucketInstanceId),!0},tr.prototype.removeBucketCrossTileIDs=function(O,N){for(var H in N.indexedSymbolInstances)for(var X=0,fe=N.indexedSymbolInstances[H];X<fe.length;X+=1)delete this.usedCrossTileIDs[O][fe[X].crossTileID]},tr.prototype.removeStaleBuckets=function(O){var N=!1;for(var H in this.indexes){var X=this.indexes[H];for(var fe in X)O[X[fe].bucketInstanceId]||(this.removeBucketCrossTileIDs(H,X[fe]),delete X[fe],N=!0)}return N};var ur=function(){this.layerIndexes={},this.crossTileIDs=new jr,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};ur.prototype.addLayer=function(O,N,H){var X=this.layerIndexes[O.id];void 0===X&&(X=this.layerIndexes[O.id]=new tr);var fe=!1,me={};X.handleWrapJump(H);for(var _e=0,ke=N;_e<ke.length;_e+=1){var Oe=ke[_e],Xe=Oe.getBucket(O);Xe&&O.id===Xe.layerIds[0]&&(Xe.bucketInstanceId||(Xe.bucketInstanceId=++this.maxBucketInstanceId),X.addBucket(Oe.tileID,Xe,this.crossTileIDs)&&(fe=!0),me[Xe.bucketInstanceId]=!0)}return X.removeStaleBuckets(me)&&(fe=!0),fe},ur.prototype.pruneUnusedLayers=function(O){var N={};for(var H in O.forEach(function(X){N[X]=!0}),this.layerIndexes)N[H]||delete this.layerIndexes[H]};var Cr=function(O,N){return e.emitValidationErrors(O,N&&N.filter(function(H){return"source.canvas"!==H.identifier}))},Fr=e.pick(Wt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Zr=e.pick(Wt,["setCenter","setZoom","setBearing","setPitch"]),Ii=function(){var O={},N=e.styleSpec.$version;for(var H in e.styleSpec.$root){var X=e.styleSpec.$root[H];if(X.required){var fe;null!=(fe="version"===H?N:"array"===X.type?[]:{})&&(O[H]=fe)}}return O}(),gi=function(O){function N(H,X){var fe=this;void 0===X&&(X={}),O.call(this),this.map=H,this.dispatcher=new L(rt(),this),this.imageManager=new g,this.imageManager.setEventedParent(this),this.glyphManager=new C(H._requestManager,X.localIdeographFontFamily),this.lineAtlas=new R(256,512),this.crossTileSymbolIndex=new ur,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new e.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",e.getReferrer());var me=this;this._rtlTextPluginCallback=N.registerForPluginStateChange(function(_e){me.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:_e.pluginStatus,pluginURL:_e.pluginURL},function(Oe,Xe){if(e.triggerPluginCompletionEvent(Oe),Xe&&Xe.every(function(dt){return dt}))for(var nt in me.sourceCaches)me.sourceCaches[nt].reload()})}),this.on("data",function(_e){if("source"===_e.dataType&&"metadata"===_e.sourceDataType){var ke=fe.sourceCaches[_e.sourceId];if(ke){var Oe=ke.getSource();if(Oe&&Oe.vectorLayerIds)for(var Xe in fe._layers){var nt=fe._layers[Xe];nt.source===Oe.id&&fe._validateLayer(nt)}}}})}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.loadURL=function(H,X){var fe=this;void 0===X&&(X={}),this.fire(new e.Event("dataloading",{dataType:"style"}));var me="boolean"==typeof X.validate?X.validate:!e.isMapboxURL(H);H=this.map._requestManager.normalizeStyleURL(H,X.accessToken);var _e=this.map._requestManager.transformRequest(H,e.ResourceType.Style);this._request=e.getJSON(_e,function(ke,Oe){fe._request=null,ke?fe.fire(new e.ErrorEvent(ke)):Oe&&fe._load(Oe,me)})},N.prototype.loadJSON=function(H,X){var fe=this;void 0===X&&(X={}),this.fire(new e.Event("dataloading",{dataType:"style"})),this._request=e.browser.frame(function(){fe._request=null,fe._load(H,!1!==X.validate)})},N.prototype.loadEmpty=function(){this.fire(new e.Event("dataloading",{dataType:"style"})),this._load(Ii,!1)},N.prototype._load=function(H,X){if(!X||!Cr(this,e.validateStyle(H))){for(var fe in this._loaded=!0,this.stylesheet=H,H.sources)this.addSource(fe,H.sources[fe],{validate:!1});H.sprite?this._loadSprite(H.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(H.glyphs);var me=Ut(this.stylesheet.layers);this._order=me.map(function(Xe){return Xe.id}),this._layers={},this._serializedLayers={};for(var _e=0,ke=me;_e<ke.length;_e+=1){var Oe=ke[_e];(Oe=e.createStyleLayer(Oe)).setEventedParent(this,{layer:{id:Oe.id}}),this._layers[Oe.id]=Oe,this._serializedLayers[Oe.id]=Oe.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new F(this.stylesheet.light),this.fire(new e.Event("data",{dataType:"style"})),this.fire(new e.Event("style.load"))}},N.prototype._loadSprite=function(H){var X=this;this._spriteRequest=function(fe,me,_e){var ke,Oe,Xe,nt=e.browser.devicePixelRatio>1?"@2x":"",dt=e.getJSON(me.transformRequest(me.normalizeSpriteURL(fe,nt,".json"),e.ResourceType.SpriteJSON),function(It,Pt){dt=null,Xe||(Xe=It,ke=Pt,Ft())}),Dt=e.getImage(me.transformRequest(me.normalizeSpriteURL(fe,nt,".png"),e.ResourceType.SpriteImage),function(It,Pt){Dt=null,Xe||(Xe=It,Oe=Pt,Ft())});function Ft(){if(Xe)_e(Xe);else if(ke&&Oe){var It=e.browser.getImageData(Oe),Pt={};for(var Et in ke){var Zt=ke[Et],qt=Zt.width,$t=Zt.height,yn=Zt.x,kn=Zt.y,Vn=Zt.sdf,Gn=Zt.pixelRatio,Tr=Zt.stretchX,_r=Zt.stretchY,Or=Zt.content,Sr=new e.RGBAImage({width:qt,height:$t});e.RGBAImage.copy(It,Sr,{x:yn,y:kn},{x:0,y:0},{width:qt,height:$t}),Pt[Et]={data:Sr,pixelRatio:Gn,sdf:Vn,stretchX:Tr,stretchY:_r,content:Or}}_e(null,Pt)}}return{cancel:function(){dt&&(dt.cancel(),dt=null),Dt&&(Dt.cancel(),Dt=null)}}}(H,this.map._requestManager,function(fe,me){if(X._spriteRequest=null,fe)X.fire(new e.ErrorEvent(fe));else if(me)for(var _e in me)X.imageManager.addImage(_e,me[_e]);X.imageManager.setLoaded(!0),X._availableImages=X.imageManager.listImages(),X.dispatcher.broadcast("setImages",X._availableImages),X.fire(new e.Event("data",{dataType:"style"}))})},N.prototype._validateLayer=function(H){var X=this.sourceCaches[H.source];if(X){var fe=H.sourceLayer;if(fe){var me=X.getSource();("geojson"===me.type||me.vectorLayerIds&&-1===me.vectorLayerIds.indexOf(fe))&&this.fire(new e.ErrorEvent(new Error('Source layer "'+fe+'" does not exist on source "'+me.id+'" as specified by style layer "'+H.id+'"')))}}},N.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var H in this.sourceCaches)if(!this.sourceCaches[H].loaded())return!1;return!!this.imageManager.isLoaded()},N.prototype._serializeLayers=function(H){for(var X=[],fe=0,me=H;fe<me.length;fe+=1){var ke=this._layers[me[fe]];"custom"!==ke.type&&X.push(ke.serialize())}return X},N.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var H in this.sourceCaches)if(this.sourceCaches[H].hasTransition())return!0;for(var X in this._layers)if(this._layers[X].hasTransition())return!0;return!1},N.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},N.prototype.update=function(H){if(this._loaded){var X=this._changed;if(this._changed){var fe=Object.keys(this._updatedLayers),me=Object.keys(this._removedLayers);for(var _e in(fe.length||me.length)&&this._updateWorkerLayers(fe,me),this._updatedSources){var ke=this._updatedSources[_e];"reload"===ke?this._reloadSource(_e):"clear"===ke&&this._clearSource(_e)}for(var Oe in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[Oe].updateTransitions(H);this.light.updateTransitions(H),this._resetUpdates()}for(var Xe in this.sourceCaches)this.sourceCaches[Xe].used=!1;for(var nt=0,dt=this._order;nt<dt.length;nt+=1){var Ft=this._layers[dt[nt]];Ft.recalculate(H,this._availableImages),!Ft.isHidden(H.zoom)&&Ft.source&&(this.sourceCaches[Ft.source].used=!0)}this.light.recalculate(H),this.z=H.zoom,X&&this.fire(new e.Event("data",{dataType:"style"}))}},N.prototype._updateTilesForChangedImages=function(){var H=Object.keys(this._changedImages);if(H.length){for(var X in this.sourceCaches)this.sourceCaches[X].reloadTilesForDependencies(["icons","patterns"],H);this._changedImages={}}},N.prototype._updateWorkerLayers=function(H,X){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(H),removedIds:X})},N.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},N.prototype.setState=function(H){var X=this;if(this._checkLoaded(),Cr(this,e.validateStyle(H)))return!1;(H=e.clone$1(H)).layers=Ut(H.layers);var fe=function en(O,N){if(!O)return[{command:Wt.setStyle,args:[N]}];var H=[];try{if(!e.deepEqual(O.version,N.version))return[{command:Wt.setStyle,args:[N]}];e.deepEqual(O.center,N.center)||H.push({command:Wt.setCenter,args:[N.center]}),e.deepEqual(O.zoom,N.zoom)||H.push({command:Wt.setZoom,args:[N.zoom]}),e.deepEqual(O.bearing,N.bearing)||H.push({command:Wt.setBearing,args:[N.bearing]}),e.deepEqual(O.pitch,N.pitch)||H.push({command:Wt.setPitch,args:[N.pitch]}),e.deepEqual(O.sprite,N.sprite)||H.push({command:Wt.setSprite,args:[N.sprite]}),e.deepEqual(O.glyphs,N.glyphs)||H.push({command:Wt.setGlyphs,args:[N.glyphs]}),e.deepEqual(O.transition,N.transition)||H.push({command:Wt.setTransition,args:[N.transition]}),e.deepEqual(O.light,N.light)||H.push({command:Wt.setLight,args:[N.light]});var X={},fe=[];!function(_e,ke,Oe,Xe){var nt;for(nt in ke=ke||{},_e=_e||{})_e.hasOwnProperty(nt)&&(ke.hasOwnProperty(nt)||He(nt,Oe,Xe));for(nt in ke)ke.hasOwnProperty(nt)&&(_e.hasOwnProperty(nt)?e.deepEqual(_e[nt],ke[nt])||("geojson"===_e[nt].type&&"geojson"===ke[nt].type&&Lt(_e,ke,nt)?Oe.push({command:Wt.setGeoJSONSourceData,args:[nt,ke[nt].data]}):vt(nt,ke,Oe,Xe)):sn(nt,ke,Oe))}(O.sources,N.sources,fe,X);var me=[];O.layers&&O.layers.forEach(function(_e){X[_e.source]?H.push({command:Wt.removeLayer,args:[_e.id]}):me.push(_e)}),H=H.concat(fe),function(_e,ke,Oe){ke=ke||[];var Xe,nt,dt,Dt,Ft,It,Pt,Et=(_e=_e||[]).map(Kt),Zt=ke.map(Kt),qt=_e.reduce(_n,{}),$t=ke.reduce(_n,{}),yn=Et.slice(),kn=Object.create(null);for(Xe=0,nt=0;Xe<Et.length;Xe++)$t.hasOwnProperty(dt=Et[Xe])?nt++:(Oe.push({command:Wt.removeLayer,args:[dt]}),yn.splice(yn.indexOf(dt,nt),1));for(Xe=0,nt=0;Xe<Zt.length;Xe++)yn[yn.length-1-Xe]!==(dt=Zt[Zt.length-1-Xe])&&(qt.hasOwnProperty(dt)?(Oe.push({command:Wt.removeLayer,args:[dt]}),yn.splice(yn.lastIndexOf(dt,yn.length-nt),1)):nt++,Oe.push({command:Wt.addLayer,args:[$t[dt],It=yn[yn.length-Xe]]}),yn.splice(yn.length-Xe,0,dt),kn[dt]=!0);for(Xe=0;Xe<Zt.length;Xe++)if(Dt=qt[dt=Zt[Xe]],Ft=$t[dt],!kn[dt]&&!e.deepEqual(Dt,Ft))if(e.deepEqual(Dt.source,Ft.source)&&e.deepEqual(Dt["source-layer"],Ft["source-layer"])&&e.deepEqual(Dt.type,Ft.type)){for(Pt in Gt(Dt.layout,Ft.layout,Oe,dt,null,Wt.setLayoutProperty),Gt(Dt.paint,Ft.paint,Oe,dt,null,Wt.setPaintProperty),e.deepEqual(Dt.filter,Ft.filter)||Oe.push({command:Wt.setFilter,args:[dt,Ft.filter]}),e.deepEqual(Dt.minzoom,Ft.minzoom)&&e.deepEqual(Dt.maxzoom,Ft.maxzoom)||Oe.push({command:Wt.setLayerZoomRange,args:[dt,Ft.minzoom,Ft.maxzoom]}),Dt)Dt.hasOwnProperty(Pt)&&"layout"!==Pt&&"paint"!==Pt&&"filter"!==Pt&&"metadata"!==Pt&&"minzoom"!==Pt&&"maxzoom"!==Pt&&(0===Pt.indexOf("paint.")?Gt(Dt[Pt],Ft[Pt],Oe,dt,Pt.slice(6),Wt.setPaintProperty):e.deepEqual(Dt[Pt],Ft[Pt])||Oe.push({command:Wt.setLayerProperty,args:[dt,Pt,Ft[Pt]]}));for(Pt in Ft)Ft.hasOwnProperty(Pt)&&!Dt.hasOwnProperty(Pt)&&"layout"!==Pt&&"paint"!==Pt&&"filter"!==Pt&&"metadata"!==Pt&&"minzoom"!==Pt&&"maxzoom"!==Pt&&(0===Pt.indexOf("paint.")?Gt(Dt[Pt],Ft[Pt],Oe,dt,Pt.slice(6),Wt.setPaintProperty):e.deepEqual(Dt[Pt],Ft[Pt])||Oe.push({command:Wt.setLayerProperty,args:[dt,Pt,Ft[Pt]]}))}else Oe.push({command:Wt.removeLayer,args:[dt]}),It=yn[yn.lastIndexOf(dt)+1],Oe.push({command:Wt.addLayer,args:[Ft,It]})}(me,N.layers,H)}catch(_e){console.warn("Unable to compute style diff:",_e),H=[{command:Wt.setStyle,args:[N]}]}return H}(this.serialize(),H).filter(function(_e){return!(_e.command in Zr)});if(0===fe.length)return!1;var me=fe.filter(function(_e){return!(_e.command in Fr)});if(me.length>0)throw new Error("Unimplemented: "+me.map(function(_e){return _e.command}).join(", ")+".");return fe.forEach(function(_e){"setTransition"!==_e.command&&X[_e.command].apply(X,_e.args)}),this.stylesheet=H,!0},N.prototype.addImage=function(H,X){if(this.getImage(H))return this.fire(new e.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(H,X),this._availableImages=this.imageManager.listImages(),this._changedImages[H]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},N.prototype.updateImage=function(H,X){this.imageManager.updateImage(H,X)},N.prototype.getImage=function(H){return this.imageManager.getImage(H)},N.prototype.removeImage=function(H){if(!this.getImage(H))return this.fire(new e.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(H),this._availableImages=this.imageManager.listImages(),this._changedImages[H]=!0,this._changed=!0,this.fire(new e.Event("data",{dataType:"style"}))},N.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},N.prototype.addSource=function(H,X,fe){var me=this;if(void 0===fe&&(fe={}),this._checkLoaded(),void 0!==this.sourceCaches[H])throw new Error("There is already a source with this ID");if(!X.type)throw new Error("The type property must be defined, but the only the following properties were given: "+Object.keys(X).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(X.type)>=0&&this._validate(e.validateStyle.source,"sources."+H,X,null,fe))){this.map&&this.map._collectResourceTiming&&(X.collectResourceTiming=!0);var _e=this.sourceCaches[H]=new at(H,X,this.dispatcher);_e.style=this,_e.setEventedParent(this,function(){return{isSourceLoaded:me.loaded(),source:_e.serialize(),sourceId:H}}),_e.onAdd(this.map),this._changed=!0}},N.prototype.removeSource=function(H){if(this._checkLoaded(),void 0===this.sourceCaches[H])throw new Error("There is no source with this ID");for(var X in this._layers)if(this._layers[X].source===H)return this.fire(new e.ErrorEvent(new Error('Source "'+H+'" cannot be removed while layer "'+X+'" is using it.')));var fe=this.sourceCaches[H];delete this.sourceCaches[H],delete this._updatedSources[H],fe.fire(new e.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:H})),fe.setEventedParent(null),fe.clearTiles(),fe.onRemove&&fe.onRemove(this.map),this._changed=!0},N.prototype.setGeoJSONSourceData=function(H,X){this._checkLoaded(),this.sourceCaches[H].getSource().setData(X),this._changed=!0},N.prototype.getSource=function(H){return this.sourceCaches[H]&&this.sourceCaches[H].getSource()},N.prototype.addLayer=function(H,X,fe){void 0===fe&&(fe={}),this._checkLoaded();var me=H.id;if(this.getLayer(me))this.fire(new e.ErrorEvent(new Error('Layer with id "'+me+'" already exists on this map')));else{var _e;if("custom"===H.type){if(Cr(this,e.validateCustomStyleLayer(H)))return;_e=e.createStyleLayer(H)}else{if("object"==typeof H.source&&(this.addSource(me,H.source),H=e.clone$1(H),H=e.extend(H,{source:me})),this._validate(e.validateStyle.layer,"layers."+me,H,{arrayIndex:-1},fe))return;_e=e.createStyleLayer(H),this._validateLayer(_e),_e.setEventedParent(this,{layer:{id:me}}),this._serializedLayers[_e.id]=_e.serialize()}var ke=X?this._order.indexOf(X):this._order.length;if(X&&-1===ke)this.fire(new e.ErrorEvent(new Error('Layer with id "'+X+'" does not exist on this map.')));else{if(this._order.splice(ke,0,me),this._layerOrderChanged=!0,this._layers[me]=_e,this._removedLayers[me]&&_e.source&&"custom"!==_e.type){var Oe=this._removedLayers[me];delete this._removedLayers[me],Oe.type!==_e.type?this._updatedSources[_e.source]="clear":(this._updatedSources[_e.source]="reload",this.sourceCaches[_e.source].pause())}this._updateLayer(_e),_e.onAdd&&_e.onAdd(this.map)}}},N.prototype.moveLayer=function(H,X){if(this._checkLoaded(),this._changed=!0,this._layers[H]){if(H!==X){var fe=this._order.indexOf(H);this._order.splice(fe,1);var me=X?this._order.indexOf(X):this._order.length;X&&-1===me?this.fire(new e.ErrorEvent(new Error('Layer with id "'+X+'" does not exist on this map.'))):(this._order.splice(me,0,H),this._layerOrderChanged=!0)}}else this.fire(new e.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be moved.")))},N.prototype.removeLayer=function(H){this._checkLoaded();var X=this._layers[H];if(X){X.setEventedParent(null);var fe=this._order.indexOf(H);this._order.splice(fe,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[H]=X,delete this._layers[H],delete this._serializedLayers[H],delete this._updatedLayers[H],delete this._updatedPaintProps[H],X.onRemove&&X.onRemove(this.map)}else this.fire(new e.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be removed.")))},N.prototype.getLayer=function(H){return this._layers[H]},N.prototype.hasLayer=function(H){return H in this._layers},N.prototype.setLayerZoomRange=function(H,X,fe){this._checkLoaded();var me=this.getLayer(H);me?me.minzoom===X&&me.maxzoom===fe||(null!=X&&(me.minzoom=X),null!=fe&&(me.maxzoom=fe),this._updateLayer(me)):this.fire(new e.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot have zoom extent.")))},N.prototype.setFilter=function(H,X,fe){void 0===fe&&(fe={}),this._checkLoaded();var me=this.getLayer(H);if(me){if(!e.deepEqual(me.filter,X))return null==X?(me.filter=void 0,void this._updateLayer(me)):void(this._validate(e.validateStyle.filter,"layers."+me.id+".filter",X,null,fe)||(me.filter=e.clone$1(X),this._updateLayer(me)))}else this.fire(new e.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be filtered.")))},N.prototype.getFilter=function(H){return e.clone$1(this.getLayer(H).filter)},N.prototype.setLayoutProperty=function(H,X,fe,me){void 0===me&&(me={}),this._checkLoaded();var _e=this.getLayer(H);_e?e.deepEqual(_e.getLayoutProperty(X),fe)||(_e.setLayoutProperty(X,fe,me),this._updateLayer(_e)):this.fire(new e.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be styled.")))},N.prototype.getLayoutProperty=function(H,X){var fe=this.getLayer(H);if(fe)return fe.getLayoutProperty(X);this.fire(new e.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style.")))},N.prototype.setPaintProperty=function(H,X,fe,me){void 0===me&&(me={}),this._checkLoaded();var _e=this.getLayer(H);_e?e.deepEqual(_e.getPaintProperty(X),fe)||(_e.setPaintProperty(X,fe,me)&&this._updateLayer(_e),this._changed=!0,this._updatedPaintProps[H]=!0):this.fire(new e.ErrorEvent(new Error("The layer '"+H+"' does not exist in the map's style and cannot be styled.")))},N.prototype.getPaintProperty=function(H,X){return this.getLayer(H).getPaintProperty(X)},N.prototype.setFeatureState=function(H,X){this._checkLoaded();var fe=H.source,me=H.sourceLayer,_e=this.sourceCaches[fe];if(void 0!==_e){var ke=_e.getSource().type;"geojson"===ke&&me?this.fire(new e.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==ke||me?(void 0===H.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),_e.setFeatureState(me,H.id,X)):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+fe+"' does not exist in the map's style.")))},N.prototype.removeFeatureState=function(H,X){this._checkLoaded();var fe=H.source,me=this.sourceCaches[fe];if(void 0!==me){var _e=me.getSource().type,ke="vector"===_e?H.sourceLayer:void 0;"vector"!==_e||ke?X&&"string"!=typeof H.id&&"number"!=typeof H.id?this.fire(new e.ErrorEvent(new Error("A feature id is requred to remove its specific state property."))):me.removeFeatureState(ke,H.id,X):this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+fe+"' does not exist in the map's style.")))},N.prototype.getFeatureState=function(H){this._checkLoaded();var X=H.source,fe=H.sourceLayer,me=this.sourceCaches[X];if(void 0!==me){if("vector"!==me.getSource().type||fe)return void 0===H.id&&this.fire(new e.ErrorEvent(new Error("The feature id parameter must be provided."))),me.getFeatureState(fe,H.id);this.fire(new e.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new e.ErrorEvent(new Error("The source '"+X+"' does not exist in the map's style.")))},N.prototype.getTransition=function(){return e.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},N.prototype.serialize=function(){return e.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:e.mapObject(this.sourceCaches,function(H){return H.serialize()}),layers:this._serializeLayers(this._order)},function(H){return void 0!==H})},N.prototype._updateLayer=function(H){this._updatedLayers[H.id]=!0,H.source&&!this._updatedSources[H.source]&&"raster"!==this.sourceCaches[H.source].getSource().type&&(this._updatedSources[H.source]="reload",this.sourceCaches[H.source].pause()),this._changed=!0},N.prototype._flattenAndSortRenderedFeatures=function(H){for(var X=this,fe=function(Or){return"fill-extrusion"===X._layers[Or].type},me={},_e=[],ke=this._order.length-1;ke>=0;ke--){var Oe=this._order[ke];if(fe(Oe)){me[Oe]=ke;for(var Xe=0,nt=H;Xe<nt.length;Xe+=1){var dt=nt[Xe][Oe];if(dt)for(var Dt=0,Ft=dt;Dt<Ft.length;Dt+=1)_e.push(Ft[Dt])}}}_e.sort(function(Or,Sr){return Sr.intersectionZ-Or.intersectionZ});for(var Pt=[],Et=this._order.length-1;Et>=0;Et--){var Zt=this._order[Et];if(fe(Zt))for(var qt=_e.length-1;qt>=0;qt--){var $t=_e[qt].feature;if(me[$t.layer.id]<Et)break;Pt.push($t),_e.pop()}else for(var yn=0,kn=H;yn<kn.length;yn+=1){var Vn=kn[yn][Zt];if(Vn)for(var Gn=0,Tr=Vn;Gn<Tr.length;Gn+=1)Pt.push(Tr[Gn].feature)}}return Pt},N.prototype.queryRenderedFeatures=function(H,X,fe){X&&X.filter&&this._validate(e.validateStyle.filter,"queryRenderedFeatures.filter",X.filter,null,X);var me={};if(X&&X.layers){if(!Array.isArray(X.layers))return this.fire(new e.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var _e=0,ke=X.layers;_e<ke.length;_e+=1){var Oe=ke[_e],Xe=this._layers[Oe];if(!Xe)return this.fire(new e.ErrorEvent(new Error("The layer '"+Oe+"' does not exist in the map's style and cannot be queried for features."))),[];me[Xe.source]=!0}}var nt=[];for(var dt in X.availableImages=this._availableImages,this.sourceCaches)X.layers&&!me[dt]||nt.push(W(this.sourceCaches[dt],this._layers,this._serializedLayers,H,X,fe));return this.placement&&nt.push(function(Dt,Ft,It,Pt,Et,Zt,qt){for(var $t={},yn=Zt.queryRenderedSymbols(Pt),kn=[],Vn=0,Gn=Object.keys(yn).map(Number);Vn<Gn.length;Vn+=1)kn.push(qt[Gn[Vn]]);kn.sort(ie);for(var _r=function(){var Oi=Sr[Or],cr=Oi.featureIndex.lookupSymbolFeatures(yn[Oi.bucketInstanceId],Ft,Oi.bucketIndex,Oi.sourceLayerIndex,Et.filter,Et.layers,Et.availableImages,Dt);for(var Hr in cr){var bi=$t[Hr]=$t[Hr]||[],mi=cr[Hr];mi.sort(function(Ai,Zi){var Xi=Oi.featureSortOrder;if(Xi){var ya=Xi.indexOf(Ai.featureIndex);return Xi.indexOf(Zi.featureIndex)-ya}return Zi.featureIndex-Ai.featureIndex});for(var wi=0,Fi=mi;wi<Fi.length;wi+=1)bi.push(Fi[wi])}},Or=0,Sr=kn;Or<Sr.length;Or+=1)_r();var hi=function(Oi){$t[Oi].forEach(function(cr){var Hr=cr.feature,mi=It[Dt[Oi].source].getFeatureState(Hr.layer["source-layer"],Hr.id);Hr.source=Hr.layer.source,Hr.layer["source-layer"]&&(Hr.sourceLayer=Hr.layer["source-layer"]),Hr.state=mi})};for(var vi in $t)hi(vi);return $t}(this._layers,this._serializedLayers,this.sourceCaches,H,X,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(nt)},N.prototype.querySourceFeatures=function(H,X){X&&X.filter&&this._validate(e.validateStyle.filter,"querySourceFeatures.filter",X.filter,null,X);var fe=this.sourceCaches[H];return fe?function(me,_e){for(var ke=me.getRenderableIds().map(function(Ft){return me.getTileByID(Ft)}),Oe=[],Xe={},nt=0;nt<ke.length;nt++){var dt=ke[nt],Dt=dt.tileID.canonical.key;Xe[Dt]||(Xe[Dt]=!0,dt.querySourceFeatures(Oe,_e))}return Oe}(fe,X):[]},N.prototype.addSourceType=function(H,X,fe){return N.getSourceType(H)?fe(new Error('A source type called "'+H+'" already exists.')):(N.setSourceType(H,X),X.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:H,url:X.workerSourceURL},fe):fe(null,null))},N.prototype.getLight=function(){return this.light.getLight()},N.prototype.setLight=function(H,X){void 0===X&&(X={}),this._checkLoaded();var fe=this.light.getLight(),me=!1;for(var _e in H)if(!e.deepEqual(H[_e],fe[_e])){me=!0;break}if(me){var ke={now:e.browser.now(),transition:e.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(H,X),this.light.updateTransitions(ke)}},N.prototype._validate=function(H,X,fe,me,_e){return void 0===_e&&(_e={}),(!_e||!1!==_e.validate)&&Cr(this,H.call(e.validateStyle,e.extend({key:X,style:this.serialize(),value:fe,styleSpec:e.styleSpec},me)))},N.prototype._remove=function(){for(var H in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),e.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[H].setEventedParent(null);for(var X in this.sourceCaches)this.sourceCaches[X].clearTiles(),this.sourceCaches[X].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},N.prototype._clearSource=function(H){this.sourceCaches[H].clearTiles()},N.prototype._reloadSource=function(H){this.sourceCaches[H].resume(),this.sourceCaches[H].reload()},N.prototype._updateSources=function(H){for(var X in this.sourceCaches)this.sourceCaches[X].update(H)},N.prototype._generateCollisionBoxes=function(){for(var H in this.sourceCaches)this._reloadSource(H)},N.prototype._updatePlacement=function(H,X,fe,me,_e){void 0===_e&&(_e=!1);for(var ke=!1,Oe=!1,Xe={},nt=0,dt=this._order;nt<dt.length;nt+=1){var Ft=this._layers[dt[nt]];if("symbol"===Ft.type){if(!Xe[Ft.source]){var It=this.sourceCaches[Ft.source];Xe[Ft.source]=It.getRenderableIds(!0).map(function(yn){return It.getTileByID(yn)}).sort(function(yn,kn){return kn.tileID.overscaledZ-yn.tileID.overscaledZ||(yn.tileID.isLessThan(kn.tileID)?-1:1)})}var Pt=this.crossTileSymbolIndex.addLayer(Ft,Xe[Ft.source],H.center.lng);ke=ke||Pt}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((_e=_e||this._layerOrderChanged||0===fe)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(e.browser.now(),H.zoom))&&(this.pauseablePlacement=new Ir(H,this._order,_e,X,fe,me,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,Xe),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(e.browser.now()),Oe=!0),ke&&this.pauseablePlacement.placement.setStale()),Oe||ke)for(var Et=0,Zt=this._order;Et<Zt.length;Et+=1){var $t=this._layers[Zt[Et]];"symbol"===$t.type&&this.placement.updateLayerOpacities($t,Xe[$t.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(e.browser.now())},N.prototype._releaseSymbolFadeTiles=function(){for(var H in this.sourceCaches)this.sourceCaches[H].releaseSymbolFadeTiles()},N.prototype.getImages=function(H,X,fe){this.imageManager.getImages(X.icons,fe),this._updateTilesForChangedImages();var me=this.sourceCaches[X.source];me&&me.setDependencies(X.tileID.key,X.type,X.icons)},N.prototype.getGlyphs=function(H,X,fe){this.glyphManager.getGlyphs(X.stacks,fe)},N.prototype.getResource=function(H,X,fe){return e.makeRequest(X,fe)},N}(e.Evented);gi.getSourceType=function(O){return j[O]},gi.setSourceType=function(O,N){j[O]=N},gi.registerForPluginStateChange=e.registerForPluginStateChange;var zr=e.createLayout([{name:"a_pos",type:"Int16",components:2}]),Ci=wa("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}"),qi=wa("uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),ki=wa("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Do=wa("varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),$a=wa("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ka=wa("uniform highp float u_intensity;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}"),ga=wa("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Na=wa("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),zo=wa("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Ho=wa("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),Sl=wa("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_FragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);}"),ls=wa("varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),yo=wa("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}"),dl=wa("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),Ba=wa("varying vec4 v_color;void main() {gl_FragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),Ws=wa("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),Os=wa("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform float u_maxzoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggeration=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/ pow(2.0,(u_zoom-u_maxzoom)*exaggeration+19.2562-u_zoom);gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),sa=wa("uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;\n#define PI 3.141592653589793\nvoid main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),vs=wa("uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),Rs=wa("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,vec2(v_lineprogress,0.5));gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define MAX_LINE_DISTANCE 32767.0\n#define scale 0.015873016\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_lineprogress;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_lineprogress=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0/MAX_LINE_DISTANCE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}"),es=wa("uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),pa=wa("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nattribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),oo=wa("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),Zo=wa("uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}"),zl=wa("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),ru=wa("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\ngl_FragColor=vec4(1.0);\n#endif\n}","const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}");function wa(O,N){var H=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,X={};return{fragmentSource:O=O.replace(H,function(fe,me,_e,ke,Oe){return X[Oe]=!0,"define"===me?"\n#ifndef HAS_UNIFORM_u_"+Oe+"\nvarying "+_e+" "+ke+" "+Oe+";\n#else\nuniform "+_e+" "+ke+" u_"+Oe+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+Oe+"\n    "+_e+" "+ke+" "+Oe+" = u_"+Oe+";\n#endif\n"}),vertexSource:N=N.replace(H,function(fe,me,_e,ke,Oe){var Xe="float"===ke?"vec2":"vec4",nt=Oe.match(/color/)?"color":Xe;return X[Oe]?"define"===me?"\n#ifndef HAS_UNIFORM_u_"+Oe+"\nuniform lowp float u_"+Oe+"_t;\nattribute "+_e+" "+Xe+" a_"+Oe+";\nvarying "+_e+" "+ke+" "+Oe+";\n#else\nuniform "+_e+" "+ke+" u_"+Oe+";\n#endif\n":"vec4"===nt?"\n#ifndef HAS_UNIFORM_u_"+Oe+"\n    "+Oe+" = a_"+Oe+";\n#else\n    "+_e+" "+ke+" "+Oe+" = u_"+Oe+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Oe+"\n    "+Oe+" = unpack_mix_"+nt+"(a_"+Oe+", u_"+Oe+"_t);\n#else\n    "+_e+" "+ke+" "+Oe+" = u_"+Oe+";\n#endif\n":"define"===me?"\n#ifndef HAS_UNIFORM_u_"+Oe+"\nuniform lowp float u_"+Oe+"_t;\nattribute "+_e+" "+Xe+" a_"+Oe+";\n#else\nuniform "+_e+" "+ke+" u_"+Oe+";\n#endif\n":"vec4"===nt?"\n#ifndef HAS_UNIFORM_u_"+Oe+"\n    "+_e+" "+ke+" "+Oe+" = a_"+Oe+";\n#else\n    "+_e+" "+ke+" "+Oe+" = u_"+Oe+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+Oe+"\n    "+_e+" "+ke+" "+Oe+" = unpack_mix_"+nt+"(a_"+Oe+", u_"+Oe+"_t);\n#else\n    "+_e+" "+ke+" "+Oe+" = u_"+Oe+";\n#endif\n"})}}var pl=Object.freeze({__proto__:null,prelude:Ci,background:qi,backgroundPattern:ki,circle:Do,clippingMask:$a,heatmap:Ka,heatmapTexture:ga,collisionBox:Na,collisionCircle:zo,debug:Ho,fill:Sl,fillOutline:ls,fillOutlinePattern:yo,fillPattern:dl,fillExtrusion:Ba,fillExtrusionPattern:Ws,hillshadePrepare:Os,hillshade:sa,line:vs,lineGradient:Rs,linePattern:es,lineSDF:pa,raster:oo,symbolIcon:Zo,symbolSDF:zl,symbolTextAndIcon:ru}),El=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};El.prototype.bind=function(O,N,H,X,fe,me,_e,ke){this.context=O;for(var Oe=this.boundPaintVertexBuffers.length!==X.length,Xe=0;!Oe&&Xe<X.length;Xe++)this.boundPaintVertexBuffers[Xe]!==X[Xe]&&(Oe=!0);O.extVertexArrayObject&&this.vao&&this.boundProgram===N&&this.boundLayoutVertexBuffer===H&&!Oe&&this.boundIndexBuffer===fe&&this.boundVertexOffset===me&&this.boundDynamicVertexBuffer===_e&&this.boundDynamicVertexBuffer2===ke?(O.bindVertexArrayOES.set(this.vao),_e&&_e.bind(),fe&&fe.dynamicDraw&&fe.bind(),ke&&ke.bind()):this.freshBind(N,H,X,fe,me,_e,ke)},El.prototype.freshBind=function(O,N,H,X,fe,me,_e){var ke,Oe=O.numAttributes,Xe=this.context,nt=Xe.gl;if(Xe.extVertexArrayObject)this.vao&&this.destroy(),this.vao=Xe.extVertexArrayObject.createVertexArrayOES(),Xe.bindVertexArrayOES.set(this.vao),ke=0,this.boundProgram=O,this.boundLayoutVertexBuffer=N,this.boundPaintVertexBuffers=H,this.boundIndexBuffer=X,this.boundVertexOffset=fe,this.boundDynamicVertexBuffer=me,this.boundDynamicVertexBuffer2=_e;else{ke=Xe.currentNumAttributes||0;for(var dt=Oe;dt<ke;dt++)nt.disableVertexAttribArray(dt)}N.enableAttributes(nt,O);for(var Dt=0,Ft=H;Dt<Ft.length;Dt+=1)Ft[Dt].enableAttributes(nt,O);me&&me.enableAttributes(nt,O),_e&&_e.enableAttributes(nt,O),N.bind(),N.setVertexAttribPointers(nt,O,fe);for(var It=0,Pt=H;It<Pt.length;It+=1){var Et=Pt[It];Et.bind(),Et.setVertexAttribPointers(nt,O,fe)}me&&(me.bind(),me.setVertexAttribPointers(nt,O,fe)),X&&X.bind(),_e&&(_e.bind(),_e.setVertexAttribPointers(nt,O,fe)),Xe.currentNumAttributes=Oe},El.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Go=function(O,N,H,X,fe){var me=O.gl;this.program=me.createProgram();var _e=H?H.defines():[];fe&&_e.push("#define OVERDRAW_INSPECTOR;");var ke=_e.concat(Ci.fragmentSource,N.fragmentSource).join("\n"),Oe=_e.concat(Ci.vertexSource,N.vertexSource).join("\n"),Xe=me.createShader(me.FRAGMENT_SHADER);if(me.isContextLost())this.failedToCreate=!0;else{me.shaderSource(Xe,ke),me.compileShader(Xe),me.attachShader(this.program,Xe);var nt=me.createShader(me.VERTEX_SHADER);if(me.isContextLost())this.failedToCreate=!0;else{me.shaderSource(nt,Oe),me.compileShader(nt),me.attachShader(this.program,nt);for(var dt=H?H.layoutAttributes:[],Dt=0;Dt<dt.length;Dt++)me.bindAttribLocation(this.program,Dt,dt[Dt].name);me.linkProgram(this.program),me.deleteShader(nt),me.deleteShader(Xe),this.numAttributes=me.getProgramParameter(this.program,me.ACTIVE_ATTRIBUTES),this.attributes={};for(var Ft={},It=0;It<this.numAttributes;It++){var Pt=me.getActiveAttrib(this.program,It);Pt&&(this.attributes[Pt.name]=me.getAttribLocation(this.program,Pt.name))}for(var Et=me.getProgramParameter(this.program,me.ACTIVE_UNIFORMS),Zt=0;Zt<Et;Zt++){var qt=me.getActiveUniform(this.program,Zt);qt&&(Ft[qt.name]=me.getUniformLocation(this.program,qt.name))}this.fixedUniforms=X(O,Ft),this.binderUniforms=H?H.getUniforms(O,Ft):[]}}};function vu(O,N,H){var X=1/Rn(H,1,N.transform.tileZoom),fe=Math.pow(2,H.tileID.overscaledZ),me=H.tileSize*Math.pow(2,N.transform.tileZoom)/fe,_e=me*(H.tileID.canonical.x+H.tileID.wrap*fe),ke=me*H.tileID.canonical.y;return{u_image:0,u_texsize:H.imageAtlasTexture.size,u_scale:[X,O.fromScale,O.toScale],u_fade:O.t,u_pixel_coord_upper:[_e>>16,ke>>16],u_pixel_coord_lower:[65535&_e,65535&ke]}}Go.prototype.draw=function(O,N,H,X,fe,me,_e,ke,Oe,Xe,nt,dt,Dt,Ft,It,Pt){var Et,Zt=O.gl;if(!this.failedToCreate){for(var qt in O.program.set(this.program),O.setDepthMode(H),O.setStencilMode(X),O.setColorMode(fe),O.setCullFace(me),this.fixedUniforms)this.fixedUniforms[qt].set(_e[qt]);Ft&&Ft.setUniforms(O,this.binderUniforms,dt,{zoom:Dt});for(var $t=(Et={},Et[Zt.LINES]=2,Et[Zt.TRIANGLES]=3,Et[Zt.LINE_STRIP]=1,Et)[N],yn=0,kn=nt.get();yn<kn.length;yn+=1){var Vn=kn[yn],Gn=Vn.vaos||(Vn.vaos={});(Gn[ke]||(Gn[ke]=new El)).bind(O,this,Oe,Ft?Ft.getPaintVertexBuffers():[],Xe,Vn.vertexOffset,It,Pt),Zt.drawElements(N,Vn.primitiveLength*$t,Zt.UNSIGNED_SHORT,Vn.primitiveOffset*$t*2)}}};var Yl=function(O,N,H,X){var fe=N.style.light,me=fe.properties.get("position"),_e=[me.x,me.y,me.z],ke=e.create$1();"viewport"===fe.properties.get("anchor")&&e.fromRotation(ke,-N.transform.angle),e.transformMat3(_e,_e,ke);var Oe=fe.properties.get("color");return{u_matrix:O,u_lightpos:_e,u_lightintensity:fe.properties.get("intensity"),u_lightcolor:[Oe.r,Oe.g,Oe.b],u_vertical_gradient:+H,u_opacity:X}},iu=function(O,N,H,X,fe,me,_e){return e.extend(Yl(O,N,H,X),vu(me,N,_e),{u_height_factor:-Math.pow(2,fe.overscaledZ)/_e.tileSize/8})},Fs=function(O){return{u_matrix:O}},Pa=function(O,N,H,X){return e.extend(Fs(O),vu(H,N,X))},ml=function(O,N){return{u_matrix:O,u_world:N}},el=function(O,N,H,X,fe){return e.extend(Pa(O,N,H,X),{u_world:fe})},ai=function(O,N,H,X){var fe,me,_e=O.transform;if("map"===X.paint.get("circle-pitch-alignment")){var ke=Rn(H,1,_e.zoom);fe=!0,me=[ke,ke]}else fe=!1,me=_e.pixelsToGLUnits;return{u_camera_to_center_distance:_e.cameraToCenterDistance,u_scale_with_map:+("map"===X.paint.get("circle-pitch-scale")),u_matrix:O.translatePosMatrix(N.posMatrix,H,X.paint.get("circle-translate"),X.paint.get("circle-translate-anchor")),u_pitch_with_map:+fe,u_device_pixel_ratio:e.browser.devicePixelRatio,u_extrude_scale:me}},No=function(O,N,H){var X=Rn(H,1,N.zoom),fe=Math.pow(2,N.zoom-H.tileID.overscaledZ),me=H.tileID.overscaleFactor();return{u_matrix:O,u_camera_to_center_distance:N.cameraToCenterDistance,u_pixels_to_tile_units:X,u_extrude_scale:[N.pixelsToGLUnits[0]/(X*fe),N.pixelsToGLUnits[1]/(X*fe)],u_overscale_factor:me}},Ja=function(O,N,H){return{u_matrix:O,u_inv_matrix:N,u_camera_to_center_distance:H.cameraToCenterDistance,u_viewport_size:[H.width,H.height]}},zs=function(O,N,H){return void 0===H&&(H=1),{u_matrix:O,u_color:N,u_overlay:0,u_overlay_scale:H}},Bo=function(O){return{u_matrix:O}},jo=function(O,N,H,X){return{u_matrix:O,u_extrude_scale:Rn(N,1,H),u_intensity:X}};function Ml(O,N){var H=Math.pow(2,N.canonical.z),X=N.canonical.y;return[new e.MercatorCoordinate(0,X/H).toLngLat().lat,new e.MercatorCoordinate(0,(X+1)/H).toLngLat().lat]}var ks=function(O,N,H){var X=O.transform;return{u_matrix:mt(O,N,H),u_ratio:1/Rn(N,1,X.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_units_to_pixels:[1/X.pixelsToGLUnits[0],1/X.pixelsToGLUnits[1]]}},Da=function(O,N,H){return e.extend(ks(O,N,H),{u_image:0})},Ye=function(O,N,H,X){var fe=O.transform,me=st(N,fe);return{u_matrix:mt(O,N,H),u_texsize:N.imageAtlasTexture.size,u_ratio:1/Rn(N,1,fe.zoom),u_device_pixel_ratio:e.browser.devicePixelRatio,u_image:0,u_scale:[me,X.fromScale,X.toScale],u_fade:X.t,u_units_to_pixels:[1/fe.pixelsToGLUnits[0],1/fe.pixelsToGLUnits[1]]}},Je=function(O,N,H,X,fe){var _e=O.lineAtlas,ke=st(N,O.transform),Oe="round"===H.layout.get("line-cap"),Xe=_e.getDash(X.from,Oe),nt=_e.getDash(X.to,Oe),dt=Xe.width*fe.fromScale,Dt=nt.width*fe.toScale;return e.extend(ks(O,N,H),{u_patternscale_a:[ke/dt,-Xe.height/2],u_patternscale_b:[ke/Dt,-nt.height/2],u_sdfgamma:_e.width/(256*Math.min(dt,Dt)*e.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:Xe.y,u_tex_y_b:nt.y,u_mix:fe.t})};function st(O,N){return 1/Rn(O,1,N.tileZoom)}function mt(O,N,H){return O.translatePosMatrix(N.tileID.posMatrix,N,H.paint.get("line-translate"),H.paint.get("line-translate-anchor"))}var Mt=function(O,N,H,X,fe){return{u_matrix:O,u_tl_parent:N,u_scale_parent:H,u_buffer_scale:1,u_fade_t:X.mix,u_opacity:X.opacity*fe.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:fe.paint.get("raster-brightness-min"),u_brightness_high:fe.paint.get("raster-brightness-max"),u_saturation_factor:(_e=fe.paint.get("raster-saturation"),_e>0?1-1/(1.001-_e):-_e),u_contrast_factor:(me=fe.paint.get("raster-contrast"),me>0?1/(1-me):1+me),u_spin_weights:pt(fe.paint.get("raster-hue-rotate"))};var me,_e};function pt(O){O*=Math.PI/180;var N=Math.sin(O),H=Math.cos(O);return[(2*H+1)/3,(-Math.sqrt(3)*N-H+1)/3,(Math.sqrt(3)*N-H+1)/3]}var St,an=function(O,N,H,X,fe,me,_e,ke,Oe,Xe){var nt=fe.transform;return{u_is_size_zoom_constant:+("constant"===O||"source"===O),u_is_size_feature_constant:+("constant"===O||"camera"===O),u_size_t:N?N.uSizeT:0,u_size:N?N.uSize:0,u_camera_to_center_distance:nt.cameraToCenterDistance,u_pitch:nt.pitch/360*2*Math.PI,u_rotate_symbol:+H,u_aspect_ratio:nt.width/nt.height,u_fade_change:fe.options.fadeDuration?fe.symbolFadeChange:1,u_matrix:me,u_label_plane_matrix:_e,u_coord_matrix:ke,u_is_text:+Oe,u_pitch_with_map:+X,u_texsize:Xe,u_texture:0}},fn=function(O,N,H,X,fe,me,_e,ke,Oe,Xe,nt){var dt=fe.transform;return e.extend(an(O,N,H,X,fe,me,_e,ke,Oe,Xe),{u_gamma_scale:X?Math.cos(dt._pitch)*dt.cameraToCenterDistance:1,u_device_pixel_ratio:e.browser.devicePixelRatio,u_is_halo:+nt})},ln=function(O,N,H,X,fe,me,_e,ke,Oe,Xe){return e.extend(fn(O,N,H,X,fe,me,_e,ke,!0,Oe,!0),{u_texsize_icon:Xe,u_texture_icon:1})},mn=function(O,N,H){return{u_matrix:O,u_opacity:N,u_color:H}},Mn=function(O,N,H,X,fe,me){return e.extend((ke=me,Xe=fe,nt=(Oe=H).imageManager.getPattern((_e=X).from.toString()),dt=Oe.imageManager.getPattern(_e.to.toString()),Ft=(Dt=Oe.imageManager.getPixelSize()).width,It=Dt.height,Pt=Math.pow(2,Xe.tileID.overscaledZ),Zt=(Et=Xe.tileSize*Math.pow(2,Oe.transform.tileZoom)/Pt)*(Xe.tileID.canonical.x+Xe.tileID.wrap*Pt),qt=Et*Xe.tileID.canonical.y,{u_image:0,u_pattern_tl_a:nt.tl,u_pattern_br_a:nt.br,u_pattern_tl_b:dt.tl,u_pattern_br_b:dt.br,u_texsize:[Ft,It],u_mix:ke.t,u_pattern_size_a:nt.displaySize,u_pattern_size_b:dt.displaySize,u_scale_a:ke.fromScale,u_scale_b:ke.toScale,u_tile_units_to_pixels:1/Rn(Xe,1,Oe.transform.tileZoom),u_pixel_coord_upper:[Zt>>16,qt>>16],u_pixel_coord_lower:[65535&Zt,65535&qt]}),{u_matrix:O,u_opacity:N});var _e,ke,Oe,Xe,nt,dt,Dt,Ft,It,Pt,Et,Zt,qt},Sn={fillExtrusion:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_lightpos:new e.Uniform3f(O,N.u_lightpos),u_lightintensity:new e.Uniform1f(O,N.u_lightintensity),u_lightcolor:new e.Uniform3f(O,N.u_lightcolor),u_vertical_gradient:new e.Uniform1f(O,N.u_vertical_gradient),u_opacity:new e.Uniform1f(O,N.u_opacity)}},fillExtrusionPattern:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_lightpos:new e.Uniform3f(O,N.u_lightpos),u_lightintensity:new e.Uniform1f(O,N.u_lightintensity),u_lightcolor:new e.Uniform3f(O,N.u_lightcolor),u_vertical_gradient:new e.Uniform1f(O,N.u_vertical_gradient),u_height_factor:new e.Uniform1f(O,N.u_height_factor),u_image:new e.Uniform1i(O,N.u_image),u_texsize:new e.Uniform2f(O,N.u_texsize),u_pixel_coord_upper:new e.Uniform2f(O,N.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(O,N.u_pixel_coord_lower),u_scale:new e.Uniform3f(O,N.u_scale),u_fade:new e.Uniform1f(O,N.u_fade),u_opacity:new e.Uniform1f(O,N.u_opacity)}},fill:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix)}},fillPattern:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_image:new e.Uniform1i(O,N.u_image),u_texsize:new e.Uniform2f(O,N.u_texsize),u_pixel_coord_upper:new e.Uniform2f(O,N.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(O,N.u_pixel_coord_lower),u_scale:new e.Uniform3f(O,N.u_scale),u_fade:new e.Uniform1f(O,N.u_fade)}},fillOutline:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_world:new e.Uniform2f(O,N.u_world)}},fillOutlinePattern:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_world:new e.Uniform2f(O,N.u_world),u_image:new e.Uniform1i(O,N.u_image),u_texsize:new e.Uniform2f(O,N.u_texsize),u_pixel_coord_upper:new e.Uniform2f(O,N.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(O,N.u_pixel_coord_lower),u_scale:new e.Uniform3f(O,N.u_scale),u_fade:new e.Uniform1f(O,N.u_fade)}},circle:function(O,N){return{u_camera_to_center_distance:new e.Uniform1f(O,N.u_camera_to_center_distance),u_scale_with_map:new e.Uniform1i(O,N.u_scale_with_map),u_pitch_with_map:new e.Uniform1i(O,N.u_pitch_with_map),u_extrude_scale:new e.Uniform2f(O,N.u_extrude_scale),u_device_pixel_ratio:new e.Uniform1f(O,N.u_device_pixel_ratio),u_matrix:new e.UniformMatrix4f(O,N.u_matrix)}},collisionBox:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_camera_to_center_distance:new e.Uniform1f(O,N.u_camera_to_center_distance),u_pixels_to_tile_units:new e.Uniform1f(O,N.u_pixels_to_tile_units),u_extrude_scale:new e.Uniform2f(O,N.u_extrude_scale),u_overscale_factor:new e.Uniform1f(O,N.u_overscale_factor)}},collisionCircle:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_inv_matrix:new e.UniformMatrix4f(O,N.u_inv_matrix),u_camera_to_center_distance:new e.Uniform1f(O,N.u_camera_to_center_distance),u_viewport_size:new e.Uniform2f(O,N.u_viewport_size)}},debug:function(O,N){return{u_color:new e.UniformColor(O,N.u_color),u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_overlay:new e.Uniform1i(O,N.u_overlay),u_overlay_scale:new e.Uniform1f(O,N.u_overlay_scale)}},clippingMask:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix)}},heatmap:function(O,N){return{u_extrude_scale:new e.Uniform1f(O,N.u_extrude_scale),u_intensity:new e.Uniform1f(O,N.u_intensity),u_matrix:new e.UniformMatrix4f(O,N.u_matrix)}},heatmapTexture:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_world:new e.Uniform2f(O,N.u_world),u_image:new e.Uniform1i(O,N.u_image),u_color_ramp:new e.Uniform1i(O,N.u_color_ramp),u_opacity:new e.Uniform1f(O,N.u_opacity)}},hillshade:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_image:new e.Uniform1i(O,N.u_image),u_latrange:new e.Uniform2f(O,N.u_latrange),u_light:new e.Uniform2f(O,N.u_light),u_shadow:new e.UniformColor(O,N.u_shadow),u_highlight:new e.UniformColor(O,N.u_highlight),u_accent:new e.UniformColor(O,N.u_accent)}},hillshadePrepare:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_image:new e.Uniform1i(O,N.u_image),u_dimension:new e.Uniform2f(O,N.u_dimension),u_zoom:new e.Uniform1f(O,N.u_zoom),u_maxzoom:new e.Uniform1f(O,N.u_maxzoom),u_unpack:new e.Uniform4f(O,N.u_unpack)}},line:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_ratio:new e.Uniform1f(O,N.u_ratio),u_device_pixel_ratio:new e.Uniform1f(O,N.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(O,N.u_units_to_pixels)}},lineGradient:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_ratio:new e.Uniform1f(O,N.u_ratio),u_device_pixel_ratio:new e.Uniform1f(O,N.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(O,N.u_units_to_pixels),u_image:new e.Uniform1i(O,N.u_image)}},linePattern:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_texsize:new e.Uniform2f(O,N.u_texsize),u_ratio:new e.Uniform1f(O,N.u_ratio),u_device_pixel_ratio:new e.Uniform1f(O,N.u_device_pixel_ratio),u_image:new e.Uniform1i(O,N.u_image),u_units_to_pixels:new e.Uniform2f(O,N.u_units_to_pixels),u_scale:new e.Uniform3f(O,N.u_scale),u_fade:new e.Uniform1f(O,N.u_fade)}},lineSDF:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_ratio:new e.Uniform1f(O,N.u_ratio),u_device_pixel_ratio:new e.Uniform1f(O,N.u_device_pixel_ratio),u_units_to_pixels:new e.Uniform2f(O,N.u_units_to_pixels),u_patternscale_a:new e.Uniform2f(O,N.u_patternscale_a),u_patternscale_b:new e.Uniform2f(O,N.u_patternscale_b),u_sdfgamma:new e.Uniform1f(O,N.u_sdfgamma),u_image:new e.Uniform1i(O,N.u_image),u_tex_y_a:new e.Uniform1f(O,N.u_tex_y_a),u_tex_y_b:new e.Uniform1f(O,N.u_tex_y_b),u_mix:new e.Uniform1f(O,N.u_mix)}},raster:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_tl_parent:new e.Uniform2f(O,N.u_tl_parent),u_scale_parent:new e.Uniform1f(O,N.u_scale_parent),u_buffer_scale:new e.Uniform1f(O,N.u_buffer_scale),u_fade_t:new e.Uniform1f(O,N.u_fade_t),u_opacity:new e.Uniform1f(O,N.u_opacity),u_image0:new e.Uniform1i(O,N.u_image0),u_image1:new e.Uniform1i(O,N.u_image1),u_brightness_low:new e.Uniform1f(O,N.u_brightness_low),u_brightness_high:new e.Uniform1f(O,N.u_brightness_high),u_saturation_factor:new e.Uniform1f(O,N.u_saturation_factor),u_contrast_factor:new e.Uniform1f(O,N.u_contrast_factor),u_spin_weights:new e.Uniform3f(O,N.u_spin_weights)}},symbolIcon:function(O,N){return{u_is_size_zoom_constant:new e.Uniform1i(O,N.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(O,N.u_is_size_feature_constant),u_size_t:new e.Uniform1f(O,N.u_size_t),u_size:new e.Uniform1f(O,N.u_size),u_camera_to_center_distance:new e.Uniform1f(O,N.u_camera_to_center_distance),u_pitch:new e.Uniform1f(O,N.u_pitch),u_rotate_symbol:new e.Uniform1i(O,N.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(O,N.u_aspect_ratio),u_fade_change:new e.Uniform1f(O,N.u_fade_change),u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(O,N.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(O,N.u_coord_matrix),u_is_text:new e.Uniform1i(O,N.u_is_text),u_pitch_with_map:new e.Uniform1i(O,N.u_pitch_with_map),u_texsize:new e.Uniform2f(O,N.u_texsize),u_texture:new e.Uniform1i(O,N.u_texture)}},symbolSDF:function(O,N){return{u_is_size_zoom_constant:new e.Uniform1i(O,N.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(O,N.u_is_size_feature_constant),u_size_t:new e.Uniform1f(O,N.u_size_t),u_size:new e.Uniform1f(O,N.u_size),u_camera_to_center_distance:new e.Uniform1f(O,N.u_camera_to_center_distance),u_pitch:new e.Uniform1f(O,N.u_pitch),u_rotate_symbol:new e.Uniform1i(O,N.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(O,N.u_aspect_ratio),u_fade_change:new e.Uniform1f(O,N.u_fade_change),u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(O,N.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(O,N.u_coord_matrix),u_is_text:new e.Uniform1i(O,N.u_is_text),u_pitch_with_map:new e.Uniform1i(O,N.u_pitch_with_map),u_texsize:new e.Uniform2f(O,N.u_texsize),u_texture:new e.Uniform1i(O,N.u_texture),u_gamma_scale:new e.Uniform1f(O,N.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(O,N.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(O,N.u_is_halo)}},symbolTextAndIcon:function(O,N){return{u_is_size_zoom_constant:new e.Uniform1i(O,N.u_is_size_zoom_constant),u_is_size_feature_constant:new e.Uniform1i(O,N.u_is_size_feature_constant),u_size_t:new e.Uniform1f(O,N.u_size_t),u_size:new e.Uniform1f(O,N.u_size),u_camera_to_center_distance:new e.Uniform1f(O,N.u_camera_to_center_distance),u_pitch:new e.Uniform1f(O,N.u_pitch),u_rotate_symbol:new e.Uniform1i(O,N.u_rotate_symbol),u_aspect_ratio:new e.Uniform1f(O,N.u_aspect_ratio),u_fade_change:new e.Uniform1f(O,N.u_fade_change),u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_label_plane_matrix:new e.UniformMatrix4f(O,N.u_label_plane_matrix),u_coord_matrix:new e.UniformMatrix4f(O,N.u_coord_matrix),u_is_text:new e.Uniform1i(O,N.u_is_text),u_pitch_with_map:new e.Uniform1i(O,N.u_pitch_with_map),u_texsize:new e.Uniform2f(O,N.u_texsize),u_texsize_icon:new e.Uniform2f(O,N.u_texsize_icon),u_texture:new e.Uniform1i(O,N.u_texture),u_texture_icon:new e.Uniform1i(O,N.u_texture_icon),u_gamma_scale:new e.Uniform1f(O,N.u_gamma_scale),u_device_pixel_ratio:new e.Uniform1f(O,N.u_device_pixel_ratio),u_is_halo:new e.Uniform1i(O,N.u_is_halo)}},background:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_opacity:new e.Uniform1f(O,N.u_opacity),u_color:new e.UniformColor(O,N.u_color)}},backgroundPattern:function(O,N){return{u_matrix:new e.UniformMatrix4f(O,N.u_matrix),u_opacity:new e.Uniform1f(O,N.u_opacity),u_image:new e.Uniform1i(O,N.u_image),u_pattern_tl_a:new e.Uniform2f(O,N.u_pattern_tl_a),u_pattern_br_a:new e.Uniform2f(O,N.u_pattern_br_a),u_pattern_tl_b:new e.Uniform2f(O,N.u_pattern_tl_b),u_pattern_br_b:new e.Uniform2f(O,N.u_pattern_br_b),u_texsize:new e.Uniform2f(O,N.u_texsize),u_mix:new e.Uniform1f(O,N.u_mix),u_pattern_size_a:new e.Uniform2f(O,N.u_pattern_size_a),u_pattern_size_b:new e.Uniform2f(O,N.u_pattern_size_b),u_scale_a:new e.Uniform1f(O,N.u_scale_a),u_scale_b:new e.Uniform1f(O,N.u_scale_b),u_pixel_coord_upper:new e.Uniform2f(O,N.u_pixel_coord_upper),u_pixel_coord_lower:new e.Uniform2f(O,N.u_pixel_coord_lower),u_tile_units_to_pixels:new e.Uniform1f(O,N.u_tile_units_to_pixels)}}};function zn(O,N,H,X,fe,me,_e){for(var ke=O.context,Oe=ke.gl,Xe=O.useProgram("collisionBox"),nt=[],dt=0,Dt=0,Ft=0;Ft<X.length;Ft++){var It=X[Ft],Pt=N.getTile(It),Et=Pt.getBucket(H);if(Et){var Zt=It.posMatrix;0===fe[0]&&0===fe[1]||(Zt=O.translatePosMatrix(It.posMatrix,Pt,fe,me));var qt=_e?Et.textCollisionBox:Et.iconCollisionBox,$t=Et.collisionCircleArray;if($t.length>0){var yn=e.create(),kn=Zt;e.mul(yn,Et.placementInvProjMatrix,O.transform.glCoordMatrix),e.mul(yn,yn,Et.placementViewportMatrix),nt.push({circleArray:$t,circleOffset:Dt,transform:kn,invTransform:yn}),Dt=dt+=$t.length/4}qt&&Xe.draw(ke,Oe.LINES,it.disabled,Ie.disabled,O.colorModeForRenderPass(),Ve.disabled,No(Zt,O.transform,Pt),H.id,qt.layoutVertexBuffer,qt.indexBuffer,qt.segments,null,O.transform.zoom,null,null,qt.collisionVertexBuffer)}}if(_e&&nt.length){var Vn=O.useProgram("collisionCircle"),Gn=new e.StructArrayLayout2f1f2i16;Gn.resize(4*dt),Gn._trim();for(var Tr=0,_r=0,Or=nt;_r<Or.length;_r+=1)for(var Sr=Or[_r],hi=0;hi<Sr.circleArray.length/4;hi++){var vi=4*hi,Oi=Sr.circleArray[vi+0],cr=Sr.circleArray[vi+1],Hr=Sr.circleArray[vi+2],bi=Sr.circleArray[vi+3];Gn.emplace(Tr++,Oi,cr,Hr,bi,0),Gn.emplace(Tr++,Oi,cr,Hr,bi,1),Gn.emplace(Tr++,Oi,cr,Hr,bi,2),Gn.emplace(Tr++,Oi,cr,Hr,bi,3)}(!St||St.length<2*dt)&&(St=function(Xi){var ya=2*Xi,ta=new e.StructArrayLayout3ui6;ta.resize(ya),ta._trim();for(var ba=0;ba<ya;ba++){var Ra=6*ba;ta.uint16[Ra+0]=4*ba+0,ta.uint16[Ra+1]=4*ba+1,ta.uint16[Ra+2]=4*ba+2,ta.uint16[Ra+3]=4*ba+2,ta.uint16[Ra+4]=4*ba+3,ta.uint16[Ra+5]=4*ba+0}return ta}(dt));for(var mi=ke.createIndexBuffer(St,!0),wi=ke.createVertexBuffer(Gn,e.collisionCircleLayout.members,!0),Fi=0,ca=nt;Fi<ca.length;Fi+=1){var Ai=ca[Fi],Zi=Ja(Ai.transform,Ai.invTransform,O.transform);Vn.draw(ke,Oe.TRIANGLES,it.disabled,Ie.disabled,O.colorModeForRenderPass(),Ve.disabled,Zi,H.id,wi,mi,e.SegmentVector.simpleSegment(0,2*Ai.circleOffset,Ai.circleArray.length,Ai.circleArray.length/2),null,O.transform.zoom,null,null,null)}wi.destroy(),mi.destroy()}}var $n=e.identity(new Float32Array(16));function or(O,N,H,X,fe,me){var _e=e.getAnchorAlignment(O),ke=-(_e.horizontalAlign-.5)*N,Oe=-(_e.verticalAlign-.5)*H,Xe=e.evaluateVariableOffset(O,X);return new e.Point((ke/fe+Xe[0])*me,(Oe/fe+Xe[1])*me)}function Lr(O,N,H,X,fe,me,_e,ke,Oe,Xe,nt){var dt=O.text.placedSymbolArray,Dt=O.text.dynamicLayoutVertexArray,Ft=O.icon.dynamicLayoutVertexArray,It={};Dt.clear();for(var Pt=0;Pt<dt.length;Pt++){var Et=dt.get(Pt),qt=Et.hidden||!Et.crossTileID||O.allowVerticalPlacement&&!Et.placedOrientation?null:X[Et.crossTileID];if(qt){var $t=new e.Point(Et.anchorX,Et.anchorY),yn=Tn($t,H?ke:_e),kn=pn(me.cameraToCenterDistance,yn.signedDistanceFromCamera),Vn=fe.evaluateSizeForFeature(O.textSizeData,Xe,Et)*kn/e.ONE_EM;H&&(Vn*=O.tilePixelRatio/Oe);for(var _r=or(qt.anchor,qt.width,qt.height,qt.textOffset,qt.textBoxScale,Vn),Or=H?Tn($t.add(_r),_e).point:yn.point.add(N?_r.rotate(-me.angle):_r),Sr=O.allowVerticalPlacement&&Et.placedOrientation===e.WritingMode.vertical?Math.PI/2:0,hi=0;hi<Et.numGlyphs;hi++)e.addDynamicAttributes(Dt,Or,Sr);nt&&Et.associatedIconIndex>=0&&(It[Et.associatedIconIndex]={shiftedAnchor:Or,angle:Sr})}else Ar(Et.numGlyphs,Dt)}if(nt){Ft.clear();for(var vi=O.icon.placedSymbolArray,Oi=0;Oi<vi.length;Oi++){var cr=vi.get(Oi);if(cr.hidden)Ar(cr.numGlyphs,Ft);else{var Hr=It[Oi];if(Hr)for(var bi=0;bi<cr.numGlyphs;bi++)e.addDynamicAttributes(Ft,Hr.shiftedAnchor,Hr.angle);else Ar(cr.numGlyphs,Ft)}}O.icon.dynamicLayoutVertexBuffer.updateData(Ft)}O.text.dynamicLayoutVertexBuffer.updateData(Dt)}function Kr(O,N,H){return H.iconsInText&&N?"symbolTextAndIcon":O?"symbolSDF":"symbolIcon"}function oi(O,N,H,X,fe,me,_e,ke,Oe,Xe,nt,dt){for(var Dt=O.context,Ft=Dt.gl,It=O.transform,Pt="map"===ke,Et="map"===Oe,Zt=Pt&&"point"!==H.layout.get("symbol-placement"),qt=Pt&&!Et&&!Zt,$t=void 0!==H.layout.get("symbol-sort-key").constantOr(1),yn=O.depthModeForSublayer(0,it.ReadOnly),kn=H.layout.get("text-variable-anchor"),Vn=[],Gn=0,Tr=X;Gn<Tr.length;Gn+=1){var _r=Tr[Gn],Or=N.getTile(_r),Sr=Or.getBucket(H);if(Sr){var hi=fe?Sr.text:Sr.icon;if(hi&&hi.segments.get().length){var vi=hi.programConfigurations.get(H.id),Oi=fe||Sr.sdfIcons,cr=fe?Sr.textSizeData:Sr.iconSizeData,Hr=Et||0!==It.pitch,bi=O.useProgram(Kr(Oi,fe,Sr),vi),mi=e.evaluateSizeForZoom(cr,It.zoom),wi=void 0,Fi=[0,0],ca=void 0,Ai=void 0,Zi=null,Xi=void 0;if(fe)ca=Or.glyphAtlasTexture,Ai=Ft.LINEAR,wi=Or.glyphAtlasTexture.size,Sr.iconsInText&&(Fi=Or.imageAtlasTexture.size,Zi=Or.imageAtlasTexture,Xi=Hr||O.options.rotating||O.options.zooming||"composite"===cr.kind||"camera"===cr.kind?Ft.LINEAR:Ft.NEAREST);else{var ta=1!==H.layout.get("icon-size").constantOr(0)||Sr.iconsNeedLinear;ca=Or.imageAtlasTexture,Ai=Oi||O.options.rotating||O.options.zooming||ta||Hr?Ft.LINEAR:Ft.NEAREST,wi=Or.imageAtlasTexture.size}var ba=Rn(Or,1,O.transform.zoom),Ra=On(_r.posMatrix,Et,Pt,O.transform,ba),ro=Dn(_r.posMatrix,Et,Pt,O.transform,ba),Oo=kn&&Sr.hasTextData(),ko="none"!==H.layout.get("icon-text-fit")&&Oo&&Sr.hasIconData();Zt&&Un(Sr,_r.posMatrix,O,fe,Ra,ro,Et,Xe);var eo=O.translatePosMatrix(_r.posMatrix,Or,me,_e),Co=Zt||fe&&kn||ko?$n:Ra,xo=O.translatePosMatrix(ro,Or,me,_e,!0),Ko=Oi&&0!==H.paint.get(fe?"text-halo-width":"icon-halo-width").constantOr(1),rs={program:bi,buffers:hi,uniformValues:Oi?Sr.iconsInText?ln(cr.kind,mi,qt,Et,O,eo,Co,xo,wi,Fi):fn(cr.kind,mi,qt,Et,O,eo,Co,xo,fe,wi,!0):an(cr.kind,mi,qt,Et,O,eo,Co,xo,fe,wi),atlasTexture:ca,atlasTextureIcon:Zi,atlasInterpolation:Ai,atlasInterpolationIcon:Xi,isSDF:Oi,hasHalo:Ko};if($t)for(var ds=0,Bl=hi.segments.get();ds<Bl.length;ds+=1){var $l=Bl[ds];Vn.push({segments:new e.SegmentVector([$l]),sortKey:$l.sortKey,state:rs})}else Vn.push({segments:hi.segments,sortKey:0,state:rs})}}}$t&&Vn.sort(function(_u,xl){return _u.sortKey-xl.sortKey});for(var bf=0,Uu=Vn;bf<Uu.length;bf+=1){var Hu=Uu[bf],Ss=Hu.state;if(Dt.activeTexture.set(Ft.TEXTURE0),Ss.atlasTexture.bind(Ss.atlasInterpolation,Ft.CLAMP_TO_EDGE),Ss.atlasTextureIcon&&(Dt.activeTexture.set(Ft.TEXTURE1),Ss.atlasTextureIcon&&Ss.atlasTextureIcon.bind(Ss.atlasInterpolationIcon,Ft.CLAMP_TO_EDGE)),Ss.isSDF){var Gu=Ss.uniformValues;Ss.hasHalo&&(Gu.u_is_halo=1,fi(Ss.buffers,Hu.segments,H,O,Ss.program,yn,nt,dt,Gu)),Gu.u_is_halo=0}fi(Ss.buffers,Hu.segments,H,O,Ss.program,yn,nt,dt,Ss.uniformValues)}}function fi(O,N,H,X,fe,me,_e,ke,Oe){var Xe=X.context;fe.draw(Xe,Xe.gl.TRIANGLES,me,_e,ke,Ve.disabled,Oe,H.id,O.layoutVertexBuffer,O.indexBuffer,N,H.paint,X.transform.zoom,O.programConfigurations.get(H.id),O.dynamicLayoutVertexBuffer,O.opacityVertexBuffer)}function Qr(O,N,H,X,fe,me,_e){var ke,Oe,Xe,nt,dt,Dt=O.context.gl,Ft=H.paint.get("fill-pattern"),It=Ft&&Ft.constantOr(1),Pt=H.getCrossfadeParameters();_e?(Oe=It&&!H.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ke=Dt.LINES):(Oe=It?"fillPattern":"fill",ke=Dt.TRIANGLES);for(var Et=0,Zt=X;Et<Zt.length;Et+=1){var qt=Zt[Et],$t=N.getTile(qt);if(!It||$t.patternsLoaded()){var yn=$t.getBucket(H);if(yn){var kn=yn.programConfigurations.get(H.id),Vn=O.useProgram(Oe,kn);It&&(O.context.activeTexture.set(Dt.TEXTURE0),$t.imageAtlasTexture.bind(Dt.LINEAR,Dt.CLAMP_TO_EDGE),kn.updatePaintBuffers(Pt));var Gn=Ft.constantOr(null);if(Gn&&$t.imageAtlas){var Tr=$t.imageAtlas,_r=Tr.patternPositions[Gn.to.toString()],Or=Tr.patternPositions[Gn.from.toString()];_r&&Or&&kn.setConstantPatternPositions(_r,Or)}var Sr=O.translatePosMatrix(qt.posMatrix,$t,H.paint.get("fill-translate"),H.paint.get("fill-translate-anchor"));if(_e){nt=yn.indexBuffer2,dt=yn.segments2;var hi=[Dt.drawingBufferWidth,Dt.drawingBufferHeight];Xe="fillOutlinePattern"===Oe&&It?el(Sr,O,Pt,$t,hi):ml(Sr,hi)}else nt=yn.indexBuffer,dt=yn.segments,Xe=It?Pa(Sr,O,Pt,$t):Fs(Sr);Vn.draw(O.context,ke,fe,O.stencilModeForClipping(qt),me,Ve.disabled,Xe,H.id,yn.layoutVertexBuffer,nt,dt,H.paint,O.transform.zoom,kn)}}}}function ji(O,N,H,X,fe,me,_e){for(var ke=O.context,Oe=ke.gl,Xe=H.paint.get("fill-extrusion-pattern"),nt=Xe.constantOr(1),dt=H.getCrossfadeParameters(),Dt=H.paint.get("fill-extrusion-opacity"),Ft=0,It=X;Ft<It.length;Ft+=1){var Pt=It[Ft],Et=N.getTile(Pt),Zt=Et.getBucket(H);if(Zt){var qt=Zt.programConfigurations.get(H.id),$t=O.useProgram(nt?"fillExtrusionPattern":"fillExtrusion",qt);nt&&(O.context.activeTexture.set(Oe.TEXTURE0),Et.imageAtlasTexture.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE),qt.updatePaintBuffers(dt));var yn=Xe.constantOr(null);if(yn&&Et.imageAtlas){var kn=Et.imageAtlas,Vn=kn.patternPositions[yn.to.toString()],Gn=kn.patternPositions[yn.from.toString()];Vn&&Gn&&qt.setConstantPatternPositions(Vn,Gn)}var Tr=O.translatePosMatrix(Pt.posMatrix,Et,H.paint.get("fill-extrusion-translate"),H.paint.get("fill-extrusion-translate-anchor")),_r=H.paint.get("fill-extrusion-vertical-gradient"),Or=nt?iu(Tr,O,_r,Dt,Pt,dt,Et):Yl(Tr,O,_r,Dt);$t.draw(ke,ke.gl.TRIANGLES,fe,me,_e,Ve.backCCW,Or,H.id,Zt.layoutVertexBuffer,Zt.indexBuffer,Zt.segments,H.paint,O.transform.zoom,qt)}}}function Ki(O,N,H,X,fe,me){var _e=O.context,ke=_e.gl,Oe=N.fbo;if(Oe){var Xe=O.useProgram("hillshade");_e.activeTexture.set(ke.TEXTURE0),ke.bindTexture(ke.TEXTURE_2D,Oe.colorAttachment.get());var nt=function(dt,Dt,Ft){var It=Ft.paint.get("hillshade-shadow-color"),Pt=Ft.paint.get("hillshade-highlight-color"),Et=Ft.paint.get("hillshade-accent-color"),Zt=Ft.paint.get("hillshade-illumination-direction")*(Math.PI/180);"viewport"===Ft.paint.get("hillshade-illumination-anchor")&&(Zt-=dt.transform.angle);var qt=!dt.options.moving;return{u_matrix:dt.transform.calculatePosMatrix(Dt.tileID.toUnwrapped(),qt),u_image:0,u_latrange:Ml(0,Dt.tileID),u_light:[Ft.paint.get("hillshade-exaggeration"),Zt],u_shadow:It,u_highlight:Pt,u_accent:Et}}(O,N,H);Xe.draw(_e,ke.TRIANGLES,X,fe,me,Ve.disabled,nt,H.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments)}}function fa(O,N,H,X,fe,me,_e){var Et,Zt,qt,$t,yn,ke=O.context,Oe=ke.gl,Xe=N.dem;if(Xe&&Xe.data){var nt=Xe.dim,dt=Xe.stride,Dt=Xe.getPixels();if(ke.activeTexture.set(Oe.TEXTURE1),ke.pixelStoreUnpackPremultiplyAlpha.set(!1),N.demTexture=N.demTexture||O.getTileTexture(dt),N.demTexture){var Ft=N.demTexture;Ft.update(Dt,{premultiply:!1}),Ft.bind(Oe.NEAREST,Oe.CLAMP_TO_EDGE)}else N.demTexture=new e.Texture(ke,Dt,Oe.RGBA,{premultiply:!1}),N.demTexture.bind(Oe.NEAREST,Oe.CLAMP_TO_EDGE);ke.activeTexture.set(Oe.TEXTURE0);var It=N.fbo;if(!It){var Pt=new e.Texture(ke,{width:nt,height:nt,data:null},Oe.RGBA);Pt.bind(Oe.LINEAR,Oe.CLAMP_TO_EDGE),(It=N.fbo=ke.createFramebuffer(nt,nt,!0)).colorAttachment.set(Pt.texture)}ke.bindFramebuffer.set(It.framebuffer),ke.viewport.set([0,0,nt,nt]),O.useProgram("hillshadePrepare").draw(ke,Oe.TRIANGLES,fe,me,_e,Ve.disabled,(Et=N.tileID,qt=X,$t=(Zt=Xe).stride,yn=e.create(),e.ortho(yn,0,e.EXTENT,-e.EXTENT,0,0,1),e.translate(yn,yn,[0,-e.EXTENT,0]),{u_matrix:yn,u_image:1,u_dimension:[$t,$t],u_zoom:Et.overscaledZ,u_maxzoom:qt,u_unpack:Zt.getUnpackVector()}),H.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments),N.needsHillshadePrepare=!1}}function Vi(O,N,H,X,fe){var me=X.paint.get("raster-fade-duration");if(me>0){var _e=e.browser.now(),ke=(_e-O.timeAdded)/me,Oe=N?(_e-N.timeAdded)/me:-1,Xe=H.getSource(),nt=fe.coveringZoomLevel({tileSize:Xe.tileSize,roundZoom:Xe.roundZoom}),dt=!N||Math.abs(N.tileID.overscaledZ-nt)>Math.abs(O.tileID.overscaledZ-nt),Dt=dt&&O.refreshedUponExpiration?1:e.clamp(dt?ke:1-Oe,0,1);return O.refreshedUponExpiration&&ke>=1&&(O.refreshedUponExpiration=!1),N?{opacity:1,mix:1-Dt}:{opacity:Dt,mix:0}}return{opacity:1,mix:0}}var Oa=new e.Color(1,0,0,1),Lo=new e.Color(0,1,0,1),Ua=new e.Color(0,0,1,1),Sa=new e.Color(1,0,1,1),Wa=new e.Color(0,1,1,1);function Io(O,N,H,X){us(O,0,N+H/2,O.transform.width,H,X)}function ho(O,N,H,X){us(O,N-H/2,0,H,O.transform.height,X)}function us(O,N,H,X,fe,me){var _e=O.context,ke=_e.gl;ke.enable(ke.SCISSOR_TEST),ke.scissor(N*e.browser.devicePixelRatio,H*e.browser.devicePixelRatio,X*e.browser.devicePixelRatio,fe*e.browser.devicePixelRatio),_e.clear({color:me}),ke.disable(ke.SCISSOR_TEST)}function xs(O,N,H){var X=O.context,fe=X.gl,me=H.posMatrix,_e=O.useProgram("debug"),ke=it.disabled,Oe=Ie.disabled,Xe=O.colorModeForRenderPass();X.activeTexture.set(fe.TEXTURE0),O.emptyTexture.bind(fe.LINEAR,fe.CLAMP_TO_EDGE),_e.draw(X,fe.LINE_STRIP,ke,Oe,Xe,Ve.disabled,zs(me,e.Color.red),"$debug",O.debugBuffer,O.tileBorderIndexBuffer,O.debugSegments);var nt=N.getTileByID(H.key).latestRawTileData,Dt=Math.floor((nt&&nt.byteLength||0)/1024),Ft=N.getTile(H).tileSize,It=512/Math.min(Ft,512)*(H.overscaledZ/O.transform.zoom)*.5,Pt=H.canonical.toString();H.overscaledZ!==H.canonical.z&&(Pt+=" => "+H.overscaledZ),function(Et,Zt){Et.initDebugOverlayCanvas();var qt=Et.debugOverlayCanvas,$t=Et.context.gl,yn=Et.debugOverlayCanvas.getContext("2d");yn.clearRect(0,0,qt.width,qt.height),yn.shadowColor="white",yn.shadowBlur=2,yn.lineWidth=1.5,yn.strokeStyle="white",yn.textBaseline="top",yn.font="bold 36px Open Sans, sans-serif",yn.fillText(Zt,5,5),yn.strokeText(Zt,5,5),Et.debugOverlayTexture.update(qt),Et.debugOverlayTexture.bind($t.LINEAR,$t.CLAMP_TO_EDGE)}(O,Pt+" "+Dt+"kb"),_e.draw(X,fe.TRIANGLES,ke,Oe,ze.alphaBlended,Ve.disabled,zs(me,e.Color.transparent,It),"$debug",O.debugBuffer,O.quadTriangleIndexBuffer,O.debugSegments)}var cs={symbol:function(O,N,H,X,fe){if("translucent"===O.renderPass){var me=Ie.disabled,_e=O.colorModeForRenderPass();H.layout.get("text-variable-anchor")&&function(ke,Oe,Xe,nt,dt,Dt,Ft){for(var It=Oe.transform,Pt="map"===dt,Et="map"===Dt,Zt=0,qt=ke;Zt<qt.length;Zt+=1){var $t=qt[Zt],yn=nt.getTile($t),kn=yn.getBucket(Xe);if(kn&&kn.text&&kn.text.segments.get().length){var Gn=e.evaluateSizeForZoom(kn.textSizeData,It.zoom),Tr=Rn(yn,1,Oe.transform.zoom),_r=On($t.posMatrix,Et,Pt,Oe.transform,Tr),Or="none"!==Xe.layout.get("icon-text-fit")&&kn.hasIconData();if(Gn){var Sr=Math.pow(2,It.zoom-yn.tileID.overscaledZ);Lr(kn,Pt,Et,Ft,e.symbolSize,It,_r,$t.posMatrix,Sr,Gn,Or)}}}}(X,O,H,N,H.layout.get("text-rotation-alignment"),H.layout.get("text-pitch-alignment"),fe),0!==H.paint.get("icon-opacity").constantOr(1)&&oi(O,N,H,X,!1,H.paint.get("icon-translate"),H.paint.get("icon-translate-anchor"),H.layout.get("icon-rotation-alignment"),H.layout.get("icon-pitch-alignment"),H.layout.get("icon-keep-upright"),me,_e),0!==H.paint.get("text-opacity").constantOr(1)&&oi(O,N,H,X,!0,H.paint.get("text-translate"),H.paint.get("text-translate-anchor"),H.layout.get("text-rotation-alignment"),H.layout.get("text-pitch-alignment"),H.layout.get("text-keep-upright"),me,_e),N.map.showCollisionBoxes&&(zn(O,N,H,X,H.paint.get("text-translate"),H.paint.get("text-translate-anchor"),!0),zn(O,N,H,X,H.paint.get("icon-translate"),H.paint.get("icon-translate-anchor"),!1))}},circle:function(O,N,H,X){if("translucent"===O.renderPass){var fe=H.paint.get("circle-opacity"),me=H.paint.get("circle-stroke-width"),_e=H.paint.get("circle-stroke-opacity"),ke=void 0!==H.layout.get("circle-sort-key").constantOr(1);if(0!==fe.constantOr(1)||0!==me.constantOr(1)&&0!==_e.constantOr(1)){for(var Oe=O.context,Xe=Oe.gl,nt=O.depthModeForSublayer(0,it.ReadOnly),dt=Ie.disabled,Dt=O.colorModeForRenderPass(),Ft=[],It=0;It<X.length;It++){var Pt=X[It],Et=N.getTile(Pt),Zt=Et.getBucket(H);if(Zt){var qt=Zt.programConfigurations.get(H.id),$t={programConfiguration:qt,program:O.useProgram("circle",qt),layoutVertexBuffer:Zt.layoutVertexBuffer,indexBuffer:Zt.indexBuffer,uniformValues:ai(O,Pt,Et,H)};if(ke)for(var yn=0,kn=Zt.segments.get();yn<kn.length;yn+=1){var Vn=kn[yn];Ft.push({segments:new e.SegmentVector([Vn]),sortKey:Vn.sortKey,state:$t})}else Ft.push({segments:Zt.segments,sortKey:0,state:$t})}}ke&&Ft.sort(function(bi,mi){return bi.sortKey-mi.sortKey});for(var Gn=0,Tr=Ft;Gn<Tr.length;Gn+=1){var _r=Tr[Gn],Or=_r.state;Or.program.draw(Oe,Xe.TRIANGLES,nt,dt,Dt,Ve.disabled,Or.uniformValues,H.id,Or.layoutVertexBuffer,Or.indexBuffer,_r.segments,H.paint,O.transform.zoom,Or.programConfiguration)}}}},heatmap:function(O,N,H,X){if(0!==H.paint.get("heatmap-opacity"))if("offscreen"===O.renderPass){var fe=O.context,me=fe.gl,_e=Ie.disabled,ke=new ze([me.ONE,me.ONE],e.Color.transparent,[!0,!0,!0,!0]);(function(Pt,Et,Zt){var qt=Pt.gl;Pt.activeTexture.set(qt.TEXTURE1),Pt.viewport.set([0,0,Et.width/4,Et.height/4]);var kn,Vn,Gn,Tr,_r,$t=Zt.heatmapFbo;if($t)qt.bindTexture(qt.TEXTURE_2D,$t.colorAttachment.get()),Pt.bindFramebuffer.set($t.framebuffer);else{var yn=qt.createTexture();qt.bindTexture(qt.TEXTURE_2D,yn),qt.texParameteri(qt.TEXTURE_2D,qt.TEXTURE_WRAP_S,qt.CLAMP_TO_EDGE),qt.texParameteri(qt.TEXTURE_2D,qt.TEXTURE_WRAP_T,qt.CLAMP_TO_EDGE),qt.texParameteri(qt.TEXTURE_2D,qt.TEXTURE_MIN_FILTER,qt.LINEAR),qt.texParameteri(qt.TEXTURE_2D,qt.TEXTURE_MAG_FILTER,qt.LINEAR),Gn=yn,Tr=$t=Zt.heatmapFbo=Pt.createFramebuffer(Et.width/4,Et.height/4,!1),(_r=(kn=Pt).gl).texImage2D(_r.TEXTURE_2D,0,_r.RGBA,(Vn=Et).width/4,Vn.height/4,0,_r.RGBA,kn.extRenderToTextureHalfFloat?kn.extTextureHalfFloat.HALF_FLOAT_OES:_r.UNSIGNED_BYTE,null),Tr.colorAttachment.set(Gn)}})(fe,O,H),fe.clear({color:e.Color.transparent});for(var Oe=0;Oe<X.length;Oe++){var Xe=X[Oe];if(!N.hasRenderableParent(Xe)){var nt=N.getTile(Xe),dt=nt.getBucket(H);if(dt){var Dt=dt.programConfigurations.get(H.id);O.useProgram("heatmap",Dt).draw(fe,me.TRIANGLES,it.disabled,_e,ke,Ve.disabled,jo(Xe.posMatrix,nt,O.transform.zoom,H.paint.get("heatmap-intensity")),H.id,dt.layoutVertexBuffer,dt.indexBuffer,dt.segments,H.paint,O.transform.zoom,Dt)}}}fe.viewport.set([0,0,O.width,O.height])}else"translucent"===O.renderPass&&(O.context.setColorMode(O.colorModeForRenderPass()),function(Pt,Et){var Zt=Pt.context,qt=Zt.gl,$t=Et.heatmapFbo;if($t){Zt.activeTexture.set(qt.TEXTURE0),qt.bindTexture(qt.TEXTURE_2D,$t.colorAttachment.get()),Zt.activeTexture.set(qt.TEXTURE1);var yn=Et.colorRampTexture;yn||(yn=Et.colorRampTexture=new e.Texture(Zt,Et.colorRamp,qt.RGBA)),yn.bind(qt.LINEAR,qt.CLAMP_TO_EDGE),Pt.useProgram("heatmapTexture").draw(Zt,qt.TRIANGLES,it.disabled,Ie.disabled,Pt.colorModeForRenderPass(),Ve.disabled,function(kn,Vn,Gn,Tr){var _r=e.create();e.ortho(_r,0,kn.width,kn.height,0,0,1);var Or=kn.context.gl;return{u_matrix:_r,u_world:[Or.drawingBufferWidth,Or.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Vn.paint.get("heatmap-opacity")}}(Pt,Et),Et.id,Pt.viewportBuffer,Pt.quadTriangleIndexBuffer,Pt.viewportSegments,Et.paint,Pt.transform.zoom)}}(O,H))},line:function(O,N,H,X){if("translucent"===O.renderPass){var fe=H.paint.get("line-opacity"),me=H.paint.get("line-width");if(0!==fe.constantOr(1)&&0!==me.constantOr(1)){var _e=O.depthModeForSublayer(0,it.ReadOnly),ke=O.colorModeForRenderPass(),Oe=H.paint.get("line-dasharray"),Xe=H.paint.get("line-pattern"),nt=Xe.constantOr(1),dt=H.paint.get("line-gradient"),Dt=H.getCrossfadeParameters(),Ft=nt?"linePattern":Oe?"lineSDF":dt?"lineGradient":"line",It=O.context,Pt=It.gl,Et=!0;if(dt){It.activeTexture.set(Pt.TEXTURE0);var Zt=H.gradientTexture;if(!H.gradient)return;Zt||(Zt=H.gradientTexture=new e.Texture(It,H.gradient,Pt.RGBA)),Zt.bind(Pt.LINEAR,Pt.CLAMP_TO_EDGE)}for(var qt=0,$t=X;qt<$t.length;qt+=1){var yn=$t[qt],kn=N.getTile(yn);if(!nt||kn.patternsLoaded()){var Vn=kn.getBucket(H);if(Vn){var Gn=Vn.programConfigurations.get(H.id),Tr=O.context.program.get(),_r=O.useProgram(Ft,Gn),Or=Et||_r.program!==Tr,Sr=Xe.constantOr(null);if(Sr&&kn.imageAtlas){var hi=kn.imageAtlas,vi=hi.patternPositions[Sr.to.toString()],Oi=hi.patternPositions[Sr.from.toString()];vi&&Oi&&Gn.setConstantPatternPositions(vi,Oi)}var cr=nt?Ye(O,kn,H,Dt):Oe?Je(O,kn,H,Oe,Dt):dt?Da(O,kn,H):ks(O,kn,H);nt?(It.activeTexture.set(Pt.TEXTURE0),kn.imageAtlasTexture.bind(Pt.LINEAR,Pt.CLAMP_TO_EDGE),Gn.updatePaintBuffers(Dt)):Oe&&(Or||O.lineAtlas.dirty)&&(It.activeTexture.set(Pt.TEXTURE0),O.lineAtlas.bind(It)),_r.draw(It,Pt.TRIANGLES,_e,O.stencilModeForClipping(yn),ke,Ve.disabled,cr,H.id,Vn.layoutVertexBuffer,Vn.indexBuffer,Vn.segments,H.paint,O.transform.zoom,Gn),Et=!1}}}}}},fill:function(O,N,H,X){var fe=H.paint.get("fill-color"),me=H.paint.get("fill-opacity");if(0!==me.constantOr(1)){var _e=O.colorModeForRenderPass(),ke=H.paint.get("fill-pattern"),Oe=O.opaquePassEnabledForLayer()&&!ke.constantOr(1)&&1===fe.constantOr(e.Color.transparent).a&&1===me.constantOr(0)?"opaque":"translucent";if(O.renderPass===Oe){var Xe=O.depthModeForSublayer(1,"opaque"===O.renderPass?it.ReadWrite:it.ReadOnly);Qr(O,N,H,X,Xe,_e,!1)}if("translucent"===O.renderPass&&H.paint.get("fill-antialias")){var nt=O.depthModeForSublayer(H.getPaintProperty("fill-outline-color")?2:0,it.ReadOnly);Qr(O,N,H,X,nt,_e,!0)}}},"fill-extrusion":function(O,N,H,X){var fe=H.paint.get("fill-extrusion-opacity");if(0!==fe&&"translucent"===O.renderPass){var me=new it(O.context.gl.LEQUAL,it.ReadWrite,O.depthRangeFor3D);if(1!==fe||H.paint.get("fill-extrusion-pattern").constantOr(1))ji(O,N,H,X,me,Ie.disabled,ze.disabled),ji(O,N,H,X,me,O.stencilModeFor3D(),O.colorModeForRenderPass());else{var _e=O.colorModeForRenderPass();ji(O,N,H,X,me,Ie.disabled,_e)}}},hillshade:function(O,N,H,X){if("offscreen"===O.renderPass||"translucent"===O.renderPass){for(var fe=O.context,me=N.getSource().maxzoom,_e=O.depthModeForSublayer(0,it.ReadOnly),ke=O.colorModeForRenderPass(),Oe="translucent"===O.renderPass?O.stencilConfigForOverlap(X):[{},X],Xe=Oe[0],nt=0,dt=Oe[1];nt<dt.length;nt+=1){var Dt=dt[nt],Ft=N.getTile(Dt);Ft.needsHillshadePrepare&&"offscreen"===O.renderPass?fa(O,Ft,H,me,_e,Ie.disabled,ke):"translucent"===O.renderPass&&Ki(O,Ft,H,_e,Xe[Dt.overscaledZ],ke)}fe.viewport.set([0,0,O.width,O.height])}},raster:function(O,N,H,X){if("translucent"===O.renderPass&&0!==H.paint.get("raster-opacity")&&X.length)for(var fe=O.context,me=fe.gl,_e=N.getSource(),ke=O.useProgram("raster"),Oe=O.colorModeForRenderPass(),Xe=_e instanceof $?[{},X]:O.stencilConfigForOverlap(X),nt=Xe[0],dt=Xe[1],Dt=dt[dt.length-1].overscaledZ,Ft=!O.options.moving,It=0,Pt=dt;It<Pt.length;It+=1){var Et=Pt[It],Zt=O.depthModeForSublayer(Et.overscaledZ-Dt,1===H.paint.get("raster-opacity")?it.ReadWrite:it.ReadOnly,me.LESS),qt=N.getTile(Et),$t=O.transform.calculatePosMatrix(Et.toUnwrapped(),Ft);qt.registerFadeDuration(H.paint.get("raster-fade-duration"));var yn=N.findLoadedParent(Et,0),kn=Vi(qt,yn,N,H,O.transform),Vn=void 0,Gn=void 0,Tr="nearest"===H.paint.get("raster-resampling")?me.NEAREST:me.LINEAR;fe.activeTexture.set(me.TEXTURE0),qt.texture.bind(Tr,me.CLAMP_TO_EDGE,me.LINEAR_MIPMAP_NEAREST),fe.activeTexture.set(me.TEXTURE1),yn?(yn.texture.bind(Tr,me.CLAMP_TO_EDGE,me.LINEAR_MIPMAP_NEAREST),Vn=Math.pow(2,yn.tileID.overscaledZ-qt.tileID.overscaledZ),Gn=[qt.tileID.canonical.x*Vn%1,qt.tileID.canonical.y*Vn%1]):qt.texture.bind(Tr,me.CLAMP_TO_EDGE,me.LINEAR_MIPMAP_NEAREST);var _r=Mt($t,Gn||[0,0],Vn||1,kn,H);_e instanceof $?ke.draw(fe,me.TRIANGLES,Zt,Ie.disabled,Oe,Ve.disabled,_r,H.id,_e.boundsBuffer,O.quadTriangleIndexBuffer,_e.boundsSegments):ke.draw(fe,me.TRIANGLES,Zt,nt[Et.overscaledZ],Oe,Ve.disabled,_r,H.id,O.rasterBoundsBuffer,O.quadTriangleIndexBuffer,O.rasterBoundsSegments)}},background:function(O,N,H){var X=H.paint.get("background-color"),fe=H.paint.get("background-opacity");if(0!==fe){var me=O.context,_e=me.gl,ke=O.transform,Oe=ke.tileSize,Xe=H.paint.get("background-pattern");if(!O.isPatternMissing(Xe)){var nt=!Xe&&1===X.a&&1===fe&&O.opaquePassEnabledForLayer()?"opaque":"translucent";if(O.renderPass===nt){var dt=Ie.disabled,Dt=O.depthModeForSublayer(0,"opaque"===nt?it.ReadWrite:it.ReadOnly),Ft=O.colorModeForRenderPass(),It=O.useProgram(Xe?"backgroundPattern":"background"),Pt=ke.coveringTiles({tileSize:Oe});Xe&&(me.activeTexture.set(_e.TEXTURE0),O.imageManager.bind(O.context));for(var Et=H.getCrossfadeParameters(),Zt=0,qt=Pt;Zt<qt.length;Zt+=1){var $t=qt[Zt],yn=O.transform.calculatePosMatrix($t.toUnwrapped()),kn=Xe?Mn(yn,fe,O,Xe,{tileID:$t,tileSize:Oe},Et):mn(yn,fe,X);It.draw(me,_e.TRIANGLES,Dt,dt,Ft,Ve.disabled,kn,H.id,O.tileExtentBuffer,O.quadTriangleIndexBuffer,O.tileExtentSegments)}}}}},debug:function(O,N,H){for(var X=0;X<H.length;X++)xs(O,N,H[X])},custom:function(O,N,H){var X=O.context,fe=H.implementation;if("offscreen"===O.renderPass){var me=fe.prerender;me&&(O.setCustomLayerDefaults(),X.setColorMode(O.colorModeForRenderPass()),me.call(fe,X.gl,O.transform.customLayerMatrix()),X.setDirty(),O.setBaseState())}else if("translucent"===O.renderPass){O.setCustomLayerDefaults(),X.setColorMode(O.colorModeForRenderPass()),X.setStencilMode(Ie.disabled);var _e="3d"===fe.renderingMode?new it(O.context.gl.LEQUAL,it.ReadWrite,O.depthRangeFor3D):O.depthModeForSublayer(0,it.ReadOnly);X.setDepthMode(_e),fe.render(X.gl,O.transform.customLayerMatrix()),X.setDirty(),O.setBaseState(),X.bindFramebuffer.set(null)}}},ka=function(O,N){this.context=new Be(O),this.transform=N,this._tileTextures={},this.setup(),this.numSublayers=at.maxUnderzooming+at.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new ur,this.gpuTimers={}};ka.prototype.resize=function(O,N){if(this.width=O*e.browser.devicePixelRatio,this.height=N*e.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var H=0,X=this.style._order;H<X.length;H+=1)this.style._layers[X[H]].resize()},ka.prototype.setup=function(){var O=this.context,N=new e.StructArrayLayout2i4;N.emplaceBack(0,0),N.emplaceBack(e.EXTENT,0),N.emplaceBack(0,e.EXTENT),N.emplaceBack(e.EXTENT,e.EXTENT),this.tileExtentBuffer=O.createVertexBuffer(N,zr.members),this.tileExtentSegments=e.SegmentVector.simpleSegment(0,0,4,2);var H=new e.StructArrayLayout2i4;H.emplaceBack(0,0),H.emplaceBack(e.EXTENT,0),H.emplaceBack(0,e.EXTENT),H.emplaceBack(e.EXTENT,e.EXTENT),this.debugBuffer=O.createVertexBuffer(H,zr.members),this.debugSegments=e.SegmentVector.simpleSegment(0,0,4,5);var X=new e.StructArrayLayout4i8;X.emplaceBack(0,0,0,0),X.emplaceBack(e.EXTENT,0,e.EXTENT,0),X.emplaceBack(0,e.EXTENT,0,e.EXTENT),X.emplaceBack(e.EXTENT,e.EXTENT,e.EXTENT,e.EXTENT),this.rasterBoundsBuffer=O.createVertexBuffer(X,J.members),this.rasterBoundsSegments=e.SegmentVector.simpleSegment(0,0,4,2);var fe=new e.StructArrayLayout2i4;fe.emplaceBack(0,0),fe.emplaceBack(1,0),fe.emplaceBack(0,1),fe.emplaceBack(1,1),this.viewportBuffer=O.createVertexBuffer(fe,zr.members),this.viewportSegments=e.SegmentVector.simpleSegment(0,0,4,2);var me=new e.StructArrayLayout1ui2;me.emplaceBack(0),me.emplaceBack(1),me.emplaceBack(3),me.emplaceBack(2),me.emplaceBack(0),this.tileBorderIndexBuffer=O.createIndexBuffer(me);var _e=new e.StructArrayLayout3ui6;_e.emplaceBack(0,1,2),_e.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=O.createIndexBuffer(_e),this.emptyTexture=new e.Texture(O,{width:1,height:1,data:new Uint8Array([0,0,0,0])},O.gl.RGBA);var ke=this.context.gl;this.stencilClearMode=new Ie({func:ke.ALWAYS,mask:0},0,255,ke.ZERO,ke.ZERO,ke.ZERO)},ka.prototype.clearStencil=function(){var O=this.context,N=O.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var H=e.create();e.ortho(H,0,this.width,this.height,0,0,1),e.scale(H,H,[N.drawingBufferWidth,N.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(O,N.TRIANGLES,it.disabled,this.stencilClearMode,ze.disabled,Ve.disabled,Bo(H),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ka.prototype._renderTileClippingMasks=function(O,N){if(this.currentStencilSource!==O.source&&O.isTileClipped()&&N&&N.length){this.currentStencilSource=O.source;var H=this.context,X=H.gl;this.nextStencilID+N.length>256&&this.clearStencil(),H.setColorMode(ze.disabled),H.setDepthMode(it.disabled);var fe=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var me=0,_e=N;me<_e.length;me+=1){var ke=_e[me],Oe=this._tileClippingMaskIDs[ke.key]=this.nextStencilID++;fe.draw(H,X.TRIANGLES,it.disabled,new Ie({func:X.ALWAYS,mask:0},Oe,255,X.KEEP,X.KEEP,X.REPLACE),ze.disabled,Ve.disabled,Bo(ke.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ka.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var O=this.nextStencilID++,N=this.context.gl;return new Ie({func:N.NOTEQUAL,mask:255},O,255,N.KEEP,N.KEEP,N.REPLACE)},ka.prototype.stencilModeForClipping=function(O){var N=this.context.gl;return new Ie({func:N.EQUAL,mask:255},this._tileClippingMaskIDs[O.key],0,N.KEEP,N.KEEP,N.REPLACE)},ka.prototype.stencilConfigForOverlap=function(O){var N,H=this.context.gl,X=O.sort(function(Oe,Xe){return Xe.overscaledZ-Oe.overscaledZ}),fe=X[X.length-1].overscaledZ,me=X[0].overscaledZ-fe+1;if(me>1){this.currentStencilSource=void 0,this.nextStencilID+me>256&&this.clearStencil();for(var _e={},ke=0;ke<me;ke++)_e[ke+fe]=new Ie({func:H.GEQUAL,mask:255},ke+this.nextStencilID,255,H.KEEP,H.KEEP,H.REPLACE);return this.nextStencilID+=me,[_e,X]}return[(N={},N[fe]=Ie.disabled,N),X]},ka.prototype.colorModeForRenderPass=function(){var O=this.context.gl;return this._showOverdrawInspector?new ze([O.CONSTANT_COLOR,O.ONE],new e.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):"opaque"===this.renderPass?ze.unblended:ze.alphaBlended},ka.prototype.depthModeForSublayer=function(O,N,H){if(!this.opaquePassEnabledForLayer())return it.disabled;var X=1-((1+this.currentLayer)*this.numSublayers+O)*this.depthEpsilon;return new it(H||this.context.gl.LEQUAL,N,[X,X])},ka.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ka.prototype.render=function(O,N){var H=this;this.style=O,this.options=N,this.lineAtlas=O.lineAtlas,this.imageManager=O.imageManager,this.glyphManager=O.glyphManager,this.symbolFadeChange=O.placement.symbolFadeChange(e.browser.now()),this.imageManager.beginFrame();var X=this.style._order,fe=this.style.sourceCaches;for(var me in fe){var _e=fe[me];_e.used&&_e.prepare(this.context)}var ke,Oe,Xe={},nt={},dt={};for(var Dt in fe){var Ft=fe[Dt];Xe[Dt]=Ft.getVisibleCoordinates(),nt[Dt]=Xe[Dt].slice().reverse(),dt[Dt]=Ft.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var It=0;It<X.length;It++)if(this.style._layers[X[It]].is3D()){this.opaquePassCutoff=It;break}this.renderPass="offscreen";for(var Et=0,Zt=X;Et<Zt.length;Et+=1){var $t=this.style._layers[Zt[Et]];if($t.hasOffscreenPass()&&!$t.isHidden(this.transform.zoom)){var yn=nt[$t.source];("custom"===$t.type||yn.length)&&this.renderLayer(this,fe[$t.source],$t,yn)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:N.showOverdrawInspector?e.Color.black:e.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=N.showOverdrawInspector,this.depthRangeFor3D=[0,1-(O._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=X.length-1;this.currentLayer>=0;this.currentLayer--){var kn=this.style._layers[X[this.currentLayer]],Vn=fe[kn.source],Gn=Xe[kn.source];this._renderTileClippingMasks(kn,Gn),this.renderLayer(this,Vn,kn,Gn)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<X.length;this.currentLayer++){var Tr=this.style._layers[X[this.currentLayer]],_r=fe[Tr.source],Or=("symbol"===Tr.type?dt:nt)[Tr.source];this._renderTileClippingMasks(Tr,Xe[Tr.source]),this.renderLayer(this,_r,Tr,Or)}this.options.showTileBoundaries&&(e.values(this.style._layers).forEach(function(Sr){Sr.source&&!Sr.isHidden(H.transform.zoom)&&(Sr.source!==(Oe&&Oe.id)&&(Oe=H.style.sourceCaches[Sr.source]),(!ke||ke.getSource().maxzoom<Oe.getSource().maxzoom)&&(ke=Oe))}),ke&&cs.debug(this,ke,ke.getVisibleCoordinates())),this.options.showPadding&&function fo(O){var N=O.transform.padding;Io(O,O.transform.height-(N.top||0),3,Oa),Io(O,N.bottom||0,3,Lo),ho(O,N.left||0,3,Ua),ho(O,O.transform.width-(N.right||0),3,Sa);var X,fe,me,_e,H=O.transform.centerPoint;us(X=O,(fe=H.x)-1,(me=O.transform.height-H.y)-10,2,20,_e=Wa),us(X,fe-10,me-1,20,2,_e)}(this),this.context.setDefault()},ka.prototype.renderLayer=function(O,N,H,X){H.isHidden(this.transform.zoom)||("background"===H.type||"custom"===H.type||X.length)&&(this.id=H.id,this.gpuTimingStart(H),cs[H.type](O,N,H,X,this.style.placement.variableOffsets),this.gpuTimingEnd())},ka.prototype.gpuTimingStart=function(O){if(this.options.gpuTiming){var N=this.context.extTimerQuery,H=this.gpuTimers[O.id];H||(H=this.gpuTimers[O.id]={calls:0,cpuTime:0,query:N.createQueryEXT()}),H.calls++,N.beginQueryEXT(N.TIME_ELAPSED_EXT,H.query)}},ka.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var O=this.context.extTimerQuery;O.endQueryEXT(O.TIME_ELAPSED_EXT)}},ka.prototype.collectGpuTimers=function(){var O=this.gpuTimers;return this.gpuTimers={},O},ka.prototype.queryGpuTimers=function(O){var N={};for(var H in O){var X=O[H],fe=this.context.extTimerQuery,me=fe.getQueryObjectEXT(X.query,fe.QUERY_RESULT_EXT)/1e6;fe.deleteQueryEXT(X.query),N[H]=me}return N},ka.prototype.translatePosMatrix=function(O,N,H,X,fe){if(!H[0]&&!H[1])return O;var me=fe?"map"===X?this.transform.angle:0:"viewport"===X?-this.transform.angle:0;if(me){var _e=Math.sin(me),ke=Math.cos(me);H=[H[0]*ke-H[1]*_e,H[0]*_e+H[1]*ke]}var Oe=[fe?H[0]:Rn(N,H[0],this.transform.zoom),fe?H[1]:Rn(N,H[1],this.transform.zoom),0],Xe=new Float32Array(16);return e.translate(Xe,O,Oe),Xe},ka.prototype.saveTileTexture=function(O){var N=this._tileTextures[O.size[0]];N?N.push(O):this._tileTextures[O.size[0]]=[O]},ka.prototype.getTileTexture=function(O){var N=this._tileTextures[O];return N&&N.length>0?N.pop():null},ka.prototype.isPatternMissing=function(O){if(!O)return!1;if(!O.from||!O.to)return!0;var N=this.imageManager.getPattern(O.from.toString()),H=this.imageManager.getPattern(O.to.toString());return!N||!H},ka.prototype.useProgram=function(O,N){this.cache=this.cache||{};var H=""+O+(N?N.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[H]||(this.cache[H]=new Go(this.context,pl[O],N,Sn[O],this._showOverdrawInspector)),this.cache[H]},ka.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ka.prototype.setBaseState=function(){var O=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(O.FUNC_ADD)},ka.prototype.initDebugOverlayCanvas=function(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=e.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new e.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},ka.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var At=function(O,N){this.points=O,this.planes=N};At.fromInvProjectionMatrix=function(O,N,H){var X=Math.pow(2,H),fe=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(function(_e){return e.transformMat4([],_e,O)}).map(function(_e){return e.scale$1([],_e,1/_e[3]/N*X)}),me=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(function(_e){var ke=e.sub([],fe[_e[0]],fe[_e[1]]),Oe=e.sub([],fe[_e[2]],fe[_e[1]]),Xe=e.normalize([],e.cross([],ke,Oe)),nt=-e.dot(Xe,fe[_e[1]]);return Xe.concat(nt)});return new At(fe,me)};var Yt=function(O,N){this.min=O,this.max=N,this.center=e.scale$2([],e.add([],this.min,this.max),.5)};Yt.prototype.quadrant=function(O){for(var N=[O%2==0,O<2],H=e.clone$2(this.min),X=e.clone$2(this.max),fe=0;fe<N.length;fe++)H[fe]=N[fe]?this.min[fe]:this.center[fe],X[fe]=N[fe]?this.center[fe]:this.max[fe];return X[2]=this.max[2],new Yt(H,X)},Yt.prototype.distanceX=function(O){return Math.max(Math.min(this.max[0],O[0]),this.min[0])-O[0]},Yt.prototype.distanceY=function(O){return Math.max(Math.min(this.max[1],O[1]),this.min[1])-O[1]},Yt.prototype.intersects=function(O){for(var N=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],H=!0,X=0;X<O.planes.length;X++){for(var fe=O.planes[X],me=0,_e=0;_e<N.length;_e++)me+=e.dot$1(fe,N[_e])>=0;if(0===me)return 0;me!==N.length&&(H=!1)}if(H)return 2;for(var ke=0;ke<3;ke++){for(var Oe=Number.MAX_VALUE,Xe=-Number.MAX_VALUE,nt=0;nt<O.points.length;nt++){var dt=O.points[nt][ke]-this.min[ke];Oe=Math.min(Oe,dt),Xe=Math.max(Xe,dt)}if(Xe<0||Oe>this.max[ke]-this.min[ke])return 0}return 1};var xn=function(O,N,H,X){if(void 0===O&&(O=0),void 0===N&&(N=0),void 0===H&&(H=0),void 0===X&&(X=0),isNaN(O)||O<0||isNaN(N)||N<0||isNaN(H)||H<0||isNaN(X)||X<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=O,this.bottom=N,this.left=H,this.right=X};xn.prototype.interpolate=function(O,N,H){return null!=N.top&&null!=O.top&&(this.top=e.number(O.top,N.top,H)),null!=N.bottom&&null!=O.bottom&&(this.bottom=e.number(O.bottom,N.bottom,H)),null!=N.left&&null!=O.left&&(this.left=e.number(O.left,N.left,H)),null!=N.right&&null!=O.right&&(this.right=e.number(O.right,N.right,H)),this},xn.prototype.getCenter=function(O,N){var H=e.clamp((this.left+O-this.right)/2,0,O),X=e.clamp((this.top+N-this.bottom)/2,0,N);return new e.Point(H,X)},xn.prototype.equals=function(O){return this.top===O.top&&this.bottom===O.bottom&&this.left===O.left&&this.right===O.right},xn.prototype.clone=function(){return new xn(this.top,this.bottom,this.left,this.right)},xn.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var rn=function(O,N,H,X,fe){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=void 0===fe||fe,this._minZoom=O||0,this._maxZoom=N||22,this._minPitch=null==H?0:H,this._maxPitch=null==X?60:X,this.setMaxBounds(),this.width=0,this.height=0,this._center=new e.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new xn,this._posMatrixCache={},this._alignedPosMatrixCache={}},bn={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};rn.prototype.clone=function(){var O=new rn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return O.tileSize=this.tileSize,O.latRange=this.latRange,O.width=this.width,O.height=this.height,O._center=this._center,O.zoom=this.zoom,O.angle=this.angle,O._fov=this._fov,O._pitch=this._pitch,O._unmodified=this._unmodified,O._edgeInsets=this._edgeInsets.clone(),O._calcMatrices(),O},bn.minZoom.get=function(){return this._minZoom},bn.minZoom.set=function(O){this._minZoom!==O&&(this._minZoom=O,this.zoom=Math.max(this.zoom,O))},bn.maxZoom.get=function(){return this._maxZoom},bn.maxZoom.set=function(O){this._maxZoom!==O&&(this._maxZoom=O,this.zoom=Math.min(this.zoom,O))},bn.minPitch.get=function(){return this._minPitch},bn.minPitch.set=function(O){this._minPitch!==O&&(this._minPitch=O,this.pitch=Math.max(this.pitch,O))},bn.maxPitch.get=function(){return this._maxPitch},bn.maxPitch.set=function(O){this._maxPitch!==O&&(this._maxPitch=O,this.pitch=Math.min(this.pitch,O))},bn.renderWorldCopies.get=function(){return this._renderWorldCopies},bn.renderWorldCopies.set=function(O){void 0===O?O=!0:null===O&&(O=!1),this._renderWorldCopies=O},bn.worldSize.get=function(){return this.tileSize*this.scale},bn.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},bn.size.get=function(){return new e.Point(this.width,this.height)},bn.bearing.get=function(){return-this.angle/Math.PI*180},bn.bearing.set=function(O){var N=-e.wrap(O,-180,180)*Math.PI/180;this.angle!==N&&(this._unmodified=!1,this.angle=N,this._calcMatrices(),this.rotationMatrix=e.create$2(),e.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},bn.pitch.get=function(){return this._pitch/Math.PI*180},bn.pitch.set=function(O){var N=e.clamp(O,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==N&&(this._unmodified=!1,this._pitch=N,this._calcMatrices())},bn.fov.get=function(){return this._fov/Math.PI*180},bn.fov.set=function(O){O=Math.max(.01,Math.min(60,O)),this._fov!==O&&(this._unmodified=!1,this._fov=O/180*Math.PI,this._calcMatrices())},bn.zoom.get=function(){return this._zoom},bn.zoom.set=function(O){var N=Math.min(Math.max(O,this.minZoom),this.maxZoom);this._zoom!==N&&(this._unmodified=!1,this._zoom=N,this.scale=this.zoomScale(N),this.tileZoom=Math.floor(N),this.zoomFraction=N-this.tileZoom,this._constrain(),this._calcMatrices())},bn.center.get=function(){return this._center},bn.center.set=function(O){O.lat===this._center.lat&&O.lng===this._center.lng||(this._unmodified=!1,this._center=O,this._constrain(),this._calcMatrices())},bn.padding.get=function(){return this._edgeInsets.toJSON()},bn.padding.set=function(O){this._edgeInsets.equals(O)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,O,1),this._calcMatrices())},bn.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},rn.prototype.isPaddingEqual=function(O){return this._edgeInsets.equals(O)},rn.prototype.interpolatePadding=function(O,N,H){this._unmodified=!1,this._edgeInsets.interpolate(O,N,H),this._constrain(),this._calcMatrices()},rn.prototype.coveringZoomLevel=function(O){var N=(O.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/O.tileSize));return Math.max(0,N)},rn.prototype.getVisibleUnwrappedCoordinates=function(O){var N=[new e.UnwrappedTileID(0,O)];if(this._renderWorldCopies)for(var H=this.pointCoordinate(new e.Point(0,0)),X=this.pointCoordinate(new e.Point(this.width,0)),fe=this.pointCoordinate(new e.Point(this.width,this.height)),me=this.pointCoordinate(new e.Point(0,this.height)),_e=Math.floor(Math.min(H.x,X.x,fe.x,me.x)),ke=Math.floor(Math.max(H.x,X.x,fe.x,me.x)),Oe=_e-1;Oe<=ke+1;Oe++)0!==Oe&&N.push(new e.UnwrappedTileID(Oe,O));return N},rn.prototype.coveringTiles=function(O){var N=this.coveringZoomLevel(O),H=N;if(void 0!==O.minzoom&&N<O.minzoom)return[];void 0!==O.maxzoom&&N>O.maxzoom&&(N=O.maxzoom);var X=e.MercatorCoordinate.fromLngLat(this.center),fe=Math.pow(2,N),me=[fe*X.x,fe*X.y,0],_e=At.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,N),ke=O.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(ke=N);var Oe=function(Or){return{aabb:new Yt([Or*fe,0,0],[(Or+1)*fe,fe,0]),zoom:0,x:0,y:0,wrap:Or,fullyVisible:!1}},Xe=[],nt=[],dt=N,Dt=O.reparseOverscaled?H:N;if(this._renderWorldCopies)for(var Ft=1;Ft<=3;Ft++)Xe.push(Oe(-Ft)),Xe.push(Oe(Ft));for(Xe.push(Oe(0));Xe.length>0;){var It=Xe.pop(),Pt=It.x,Et=It.y,Zt=It.fullyVisible;if(!Zt){var qt=It.aabb.intersects(_e);if(0===qt)continue;Zt=2===qt}var $t=It.aabb.distanceX(me),yn=It.aabb.distanceY(me),kn=Math.max(Math.abs($t),Math.abs(yn));if(It.zoom===dt||kn>3+(1<<dt-It.zoom)-2&&It.zoom>=ke)nt.push({tileID:new e.OverscaledTileID(It.zoom===dt?Dt:It.zoom,It.wrap,It.zoom,Pt,Et),distanceSq:e.sqrLen([me[0]-.5-Pt,me[1]-.5-Et])});else for(var Gn=0;Gn<4;Gn++){var Tr=(Pt<<1)+Gn%2,_r=(Et<<1)+(Gn>>1);Xe.push({aabb:It.aabb.quadrant(Gn),zoom:It.zoom+1,x:Tr,y:_r,wrap:It.wrap,fullyVisible:Zt})}}return nt.sort(function(Or,Sr){return Or.distanceSq-Sr.distanceSq}).map(function(Or){return Or.tileID})},rn.prototype.resize=function(O,N){this.width=O,this.height=N,this.pixelsToGLUnits=[2/O,-2/N],this._constrain(),this._calcMatrices()},bn.unmodified.get=function(){return this._unmodified},rn.prototype.zoomScale=function(O){return Math.pow(2,O)},rn.prototype.scaleZoom=function(O){return Math.log(O)/Math.LN2},rn.prototype.project=function(O){var N=e.clamp(O.lat,-this.maxValidLatitude,this.maxValidLatitude);return new e.Point(e.mercatorXfromLng(O.lng)*this.worldSize,e.mercatorYfromLat(N)*this.worldSize)},rn.prototype.unproject=function(O){return new e.MercatorCoordinate(O.x/this.worldSize,O.y/this.worldSize).toLngLat()},bn.point.get=function(){return this.project(this.center)},rn.prototype.setLocationAtPoint=function(O,N){var H=this.pointCoordinate(N),X=this.pointCoordinate(this.centerPoint),fe=this.locationCoordinate(O),me=new e.MercatorCoordinate(fe.x-(H.x-X.x),fe.y-(H.y-X.y));this.center=this.coordinateLocation(me),this._renderWorldCopies&&(this.center=this.center.wrap())},rn.prototype.locationPoint=function(O){return this.coordinatePoint(this.locationCoordinate(O))},rn.prototype.pointLocation=function(O){return this.coordinateLocation(this.pointCoordinate(O))},rn.prototype.locationCoordinate=function(O){return e.MercatorCoordinate.fromLngLat(O)},rn.prototype.coordinateLocation=function(O){return O.toLngLat()},rn.prototype.pointCoordinate=function(O){var N=[O.x,O.y,0,1],H=[O.x,O.y,1,1];e.transformMat4(N,N,this.pixelMatrixInverse),e.transformMat4(H,H,this.pixelMatrixInverse);var X=N[3],fe=H[3],ke=N[1]/X,Oe=H[1]/fe,Xe=N[2]/X,nt=H[2]/fe,dt=Xe===nt?0:(0-Xe)/(nt-Xe);return new e.MercatorCoordinate(e.number(N[0]/X,H[0]/fe,dt)/this.worldSize,e.number(ke,Oe,dt)/this.worldSize)},rn.prototype.coordinatePoint=function(O){var N=[O.x*this.worldSize,O.y*this.worldSize,0,1];return e.transformMat4(N,N,this.pixelMatrix),new e.Point(N[0]/N[3],N[1]/N[3])},rn.prototype.getBounds=function(){return(new e.LngLatBounds).extend(this.pointLocation(new e.Point(0,0))).extend(this.pointLocation(new e.Point(this.width,0))).extend(this.pointLocation(new e.Point(this.width,this.height))).extend(this.pointLocation(new e.Point(0,this.height)))},rn.prototype.getMaxBounds=function(){return this.latRange&&2===this.latRange.length&&this.lngRange&&2===this.lngRange.length?new e.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},rn.prototype.setMaxBounds=function(O){O?(this.lngRange=[O.getWest(),O.getEast()],this.latRange=[O.getSouth(),O.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},rn.prototype.calculatePosMatrix=function(O,N){void 0===N&&(N=!1);var H=O.key,X=N?this._alignedPosMatrixCache:this._posMatrixCache;if(X[H])return X[H];var fe=O.canonical,me=this.worldSize/this.zoomScale(fe.z),_e=fe.x+Math.pow(2,fe.z)*O.wrap,ke=e.identity(new Float64Array(16));return e.translate(ke,ke,[_e*me,fe.y*me,0]),e.scale(ke,ke,[me/e.EXTENT,me/e.EXTENT,1]),e.multiply(ke,N?this.alignedProjMatrix:this.projMatrix,ke),X[H]=new Float32Array(ke),X[H]},rn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},rn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var O,N,H,X,fe=-90,me=90,_e=-180,ke=180,Oe=this.size,Xe=this._unmodified;if(this.latRange){var nt=this.latRange;fe=e.mercatorYfromLat(nt[1])*this.worldSize,O=(me=e.mercatorYfromLat(nt[0])*this.worldSize)-fe<Oe.y?Oe.y/(me-fe):0}if(this.lngRange){var dt=this.lngRange;_e=e.mercatorXfromLng(dt[0])*this.worldSize,N=(ke=e.mercatorXfromLng(dt[1])*this.worldSize)-_e<Oe.x?Oe.x/(ke-_e):0}var Dt=this.point,Ft=Math.max(N||0,O||0);if(Ft)return this.center=this.unproject(new e.Point(N?(ke+_e)/2:Dt.x,O?(me+fe)/2:Dt.y)),this.zoom+=this.scaleZoom(Ft),this._unmodified=Xe,void(this._constraining=!1);if(this.latRange){var It=Dt.y,Pt=Oe.y/2;It-Pt<fe&&(X=fe+Pt),It+Pt>me&&(X=me-Pt)}if(this.lngRange){var Et=Dt.x,Zt=Oe.x/2;Et-Zt<_e&&(H=_e+Zt),Et+Zt>ke&&(H=ke-Zt)}void 0===H&&void 0===X||(this.center=this.unproject(new e.Point(void 0!==H?H:Dt.x,void 0!==X?X:Dt.y))),this._unmodified=Xe,this._constraining=!1}},rn.prototype._calcMatrices=function(){if(this.height){var N=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var H=Math.PI/2+this._pitch,X=this._fov*(.5+N.y/this.height),fe=Math.sin(X)*this.cameraToCenterDistance/Math.sin(e.clamp(Math.PI-H-X,.01,Math.PI-.01)),me=this.point,_e=me.x,ke=me.y,Oe=1.01*(Math.cos(Math.PI/2-this._pitch)*fe+this.cameraToCenterDistance),Xe=this.height/50,nt=new Float64Array(16);e.perspective(nt,this._fov,this.width/this.height,Xe,Oe),nt[8]=2*-N.x/this.width,nt[9]=2*N.y/this.height,e.scale(nt,nt,[1,-1,1]),e.translate(nt,nt,[0,0,-this.cameraToCenterDistance]),e.rotateX(nt,nt,this._pitch),e.rotateZ(nt,nt,this.angle),e.translate(nt,nt,[-_e,-ke,0]),this.mercatorMatrix=e.scale([],nt,[this.worldSize,this.worldSize,this.worldSize]),e.scale(nt,nt,[1,1,e.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=nt,this.invProjMatrix=e.invert([],this.projMatrix);var dt=this.width%2/2,Dt=this.height%2/2,Ft=Math.cos(this.angle),It=Math.sin(this.angle),Pt=_e-Math.round(_e)+Ft*dt+It*Dt,Et=ke-Math.round(ke)+Ft*Dt+It*dt,Zt=new Float64Array(nt);if(e.translate(Zt,Zt,[Pt>.5?Pt-1:Pt,Et>.5?Et-1:Et,0]),this.alignedProjMatrix=Zt,nt=e.create(),e.scale(nt,nt,[this.width/2,-this.height/2,1]),e.translate(nt,nt,[1,-1,0]),this.labelPlaneMatrix=nt,nt=e.create(),e.scale(nt,nt,[1,-1,1]),e.translate(nt,nt,[-1,-1,0]),e.scale(nt,nt,[2/this.width,2/this.height,1]),this.glCoordMatrix=nt,this.pixelMatrix=e.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!(nt=e.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=nt,this._posMatrixCache={},this._alignedPosMatrixCache={}}},rn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var O=this.pointCoordinate(new e.Point(0,0)),N=[O.x*this.worldSize,O.y*this.worldSize,0,1];return e.transformMat4(N,N,this.pixelMatrix)[3]/this.cameraToCenterDistance},rn.prototype.getCameraPoint=function(){var N=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new e.Point(0,N))},rn.prototype.getCameraQueryGeometry=function(O){var N=this.getCameraPoint();if(1===O.length)return[O[0],N];for(var H=N.x,X=N.y,fe=N.x,me=N.y,_e=0,ke=O;_e<ke.length;_e+=1){var Oe=ke[_e];H=Math.min(H,Oe.x),X=Math.min(X,Oe.y),fe=Math.max(fe,Oe.x),me=Math.max(me,Oe.y)}return[new e.Point(H,X),new e.Point(fe,X),new e.Point(fe,me),new e.Point(H,me),new e.Point(H,X)]},Object.defineProperties(rn.prototype,bn);var Kn=function(O){var N,X,fe,me;this._hashName=O&&encodeURIComponent(O),e.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(N=this._updateHashUnthrottled.bind(this),300,X=!1,fe=null,me=function(){fe=null,X&&(N(),fe=setTimeout(me,300),X=!1)},function(){return X=!0,fe||me(),fe})};Kn.prototype.addTo=function(O){return this._map=O,e.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},Kn.prototype.remove=function(){return e.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},Kn.prototype.getHashString=function(O){var N=this._map.getCenter(),H=Math.round(100*this._map.getZoom())/100,X=Math.ceil((H*Math.LN2+Math.log(512/360/.5))/Math.LN10),fe=Math.pow(10,X),me=Math.round(N.lng*fe)/fe,_e=Math.round(N.lat*fe)/fe,ke=this._map.getBearing(),Oe=this._map.getPitch(),Xe="";if(Xe+=O?"/"+me+"/"+_e+"/"+H:H+"/"+_e+"/"+me,(ke||Oe)&&(Xe+="/"+Math.round(10*ke)/10),Oe&&(Xe+="/"+Math.round(Oe)),this._hashName){var nt=this._hashName,dt=!1,Dt=e.window.location.hash.slice(1).split("&").map(function(Ft){var It=Ft.split("=")[0];return It===nt?(dt=!0,It+"="+Xe):Ft}).filter(function(Ft){return Ft});return dt||Dt.push(nt+"="+Xe),"#"+Dt.join("&")}return"#"+Xe},Kn.prototype._getCurrentHash=function(){var O,N=this,H=e.window.location.hash.replace("#","");return this._hashName?(H.split("&").map(function(X){return X.split("=")}).forEach(function(X){X[0]===N._hashName&&(O=X)}),(O&&O[1]||"").split("/")):H.split("/")},Kn.prototype._onHashChange=function(){var O=this._getCurrentHash();if(O.length>=3&&!O.some(function(H){return isNaN(H)})){var N=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(O[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+O[2],+O[1]],zoom:+O[0],bearing:N,pitch:+(O[4]||0)}),!0}return!1},Kn.prototype._updateHashUnthrottled=function(){var O=this.getHashString();try{e.window.history.replaceState(e.window.history.state,"",O)}catch(N){}};var nr={linearity:.3,easing:e.bezier(0,0,.3,1)},vr=e.extend({deceleration:2500,maxSpeed:1400},nr),Er=e.extend({deceleration:20,maxSpeed:1400},nr),kr=e.extend({deceleration:1e3,maxSpeed:360},nr),Rr=e.extend({deceleration:1e3,maxSpeed:90},nr),Wr=function(O){this._map=O,this.clear()};function Dr(O,N){(!O.duration||O.duration<N.duration)&&(O.duration=N.duration,O.easing=N.easing)}function Yr(O,N,H){var X=H.maxSpeed,fe=H.linearity,me=H.deceleration,_e=e.clamp(O*fe/(N/1e3),-X,X),ke=Math.abs(_e)/(me*fe);return{easing:H.easing,duration:1e3*ke,amount:_e*(ke/2)}}Wr.prototype.clear=function(){this._inertiaBuffer=[]},Wr.prototype.record=function(O){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:e.browser.now(),settings:O})},Wr.prototype._drainInertiaBuffer=function(){for(var O=this._inertiaBuffer,N=e.browser.now();O.length>0&&N-O[0].time>160;)O.shift()},Wr.prototype._onMoveEnd=function(O){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var N={zoom:0,bearing:0,pitch:0,pan:new e.Point(0,0),pinchAround:void 0,around:void 0},H=0,X=this._inertiaBuffer;H<X.length;H+=1){var fe=X[H].settings;N.zoom+=fe.zoomDelta||0,N.bearing+=fe.bearingDelta||0,N.pitch+=fe.pitchDelta||0,fe.panDelta&&N.pan._add(fe.panDelta),fe.around&&(N.around=fe.around),fe.pinchAround&&(N.pinchAround=fe.pinchAround)}var me=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,_e={};if(N.pan.mag()){var ke=Yr(N.pan.mag(),me,e.extend({},vr,O||{}));_e.offset=N.pan.mult(ke.amount/N.pan.mag()),_e.center=this._map.transform.center,Dr(_e,ke)}if(N.zoom){var Oe=Yr(N.zoom,me,Er);_e.zoom=this._map.transform.zoom+Oe.amount,Dr(_e,Oe)}if(N.bearing){var Xe=Yr(N.bearing,me,kr);_e.bearing=this._map.transform.bearing+e.clamp(Xe.amount,-179,179),Dr(_e,Xe)}if(N.pitch){var nt=Yr(N.pitch,me,Rr);_e.pitch=this._map.transform.pitch+nt.amount,Dr(_e,nt)}if(_e.zoom||_e.bearing){var dt=void 0===N.pinchAround?N.around:N.pinchAround;_e.around=dt?this._map.unproject(dt):this._map.getCenter()}return this.clear(),e.extend(_e,{noMoveStart:!0})}};var si=function(O){function N(X,fe,me,_e){void 0===_e&&(_e={});var ke=a.mousePos(fe.getCanvasContainer(),me),Oe=fe.unproject(ke);O.call(this,X,e.extend({point:ke,lngLat:Oe,originalEvent:me},_e)),this._defaultPrevented=!1,this.target=fe}O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N;var H={defaultPrevented:{configurable:!0}};return N.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(N.prototype,H),N}(e.Event),di=function(O){function N(X,fe,me){var _e="touchend"===X?me.changedTouches:me.touches,ke=a.touchPos(fe.getCanvasContainer(),_e),Oe=ke.map(function(dt){return fe.unproject(dt)}),Xe=ke.reduce(function(dt,Dt,Ft,It){return dt.add(Dt.div(It.length))},new e.Point(0,0)),nt=fe.unproject(Xe);O.call(this,X,{points:ke,point:Xe,lngLats:Oe,lngLat:nt,originalEvent:me}),this._defaultPrevented=!1}O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N;var H={defaultPrevented:{configurable:!0}};return N.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(N.prototype,H),N}(e.Event),Di=function(O){function N(X,fe,me){O.call(this,X,{originalEvent:me}),this._defaultPrevented=!1}O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N;var H={defaultPrevented:{configurable:!0}};return N.prototype.preventDefault=function(){this._defaultPrevented=!0},H.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(N.prototype,H),N}(e.Event),br=function(O,N){this._map=O,this._clickTolerance=N.clickTolerance};br.prototype.reset=function(){delete this._mousedownPos},br.prototype.wheel=function(O){return this._firePreventable(new Di(O.type,this._map,O))},br.prototype.mousedown=function(O,N){return this._mousedownPos=N,this._firePreventable(new si(O.type,this._map,O))},br.prototype.mouseup=function(O){this._map.fire(new si(O.type,this._map,O))},br.prototype.click=function(O,N){this._mousedownPos&&this._mousedownPos.dist(N)>=this._clickTolerance||this._map.fire(new si(O.type,this._map,O))},br.prototype.dblclick=function(O){return this._firePreventable(new si(O.type,this._map,O))},br.prototype.mouseover=function(O){this._map.fire(new si(O.type,this._map,O))},br.prototype.mouseout=function(O){this._map.fire(new si(O.type,this._map,O))},br.prototype.touchstart=function(O){return this._firePreventable(new di(O.type,this._map,O))},br.prototype.touchmove=function(O){this._map.fire(new di(O.type,this._map,O))},br.prototype.touchend=function(O){this._map.fire(new di(O.type,this._map,O))},br.prototype.touchcancel=function(O){this._map.fire(new di(O.type,this._map,O))},br.prototype._firePreventable=function(O){if(this._map.fire(O),O.defaultPrevented)return{}},br.prototype.isEnabled=function(){return!0},br.prototype.isActive=function(){return!1},br.prototype.enable=function(){},br.prototype.disable=function(){};var Si=function(O){this._map=O};Si.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},Si.prototype.mousemove=function(O){this._map.fire(new si(O.type,this._map,O))},Si.prototype.mousedown=function(){this._delayContextMenu=!0},Si.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new si("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},Si.prototype.contextmenu=function(O){this._delayContextMenu?this._contextMenuEvent=O:this._map.fire(new si(O.type,this._map,O)),this._map.listens("contextmenu")&&O.preventDefault()},Si.prototype.isEnabled=function(){return!0},Si.prototype.isActive=function(){return!1},Si.prototype.enable=function(){},Si.prototype.disable=function(){};var Jr=function(O,N){this._map=O,this._el=O.getCanvasContainer(),this._container=O.getContainer(),this._clickTolerance=N.clickTolerance||1};function ci(O,N){for(var H={},X=0;X<O.length;X++)H[O[X].identifier]=N[X];return H}Jr.prototype.isEnabled=function(){return!!this._enabled},Jr.prototype.isActive=function(){return!!this._active},Jr.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Jr.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Jr.prototype.mousedown=function(O,N){this.isEnabled()&&O.shiftKey&&0===O.button&&(a.disableDrag(),this._startPos=this._lastPos=N,this._active=!0)},Jr.prototype.mousemoveWindow=function(O,N){if(this._active){var H=N;if(!(this._lastPos.equals(H)||!this._box&&H.dist(this._startPos)<this._clickTolerance)){var X=this._startPos;this._lastPos=H,this._box||(this._box=a.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",O));var fe=Math.min(X.x,H.x),me=Math.max(X.x,H.x),_e=Math.min(X.y,H.y),ke=Math.max(X.y,H.y);a.setTransform(this._box,"translate("+fe+"px,"+_e+"px)"),this._box.style.width=me-fe+"px",this._box.style.height=ke-_e+"px"}}},Jr.prototype.mouseupWindow=function(O,N){var H=this;if(this._active&&0===O.button){var X=this._startPos,fe=N;if(this.reset(),a.suppressClick(),X.x!==fe.x||X.y!==fe.y)return this._map.fire(new e.Event("boxzoomend",{originalEvent:O})),{cameraAnimation:function(me){return me.fitScreenCoordinates(X,fe,H._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",O)}},Jr.prototype.keydown=function(O){this._active&&27===O.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",O))},Jr.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(a.remove(this._box),this._box=null),a.enableDrag(),delete this._startPos,delete this._lastPos},Jr.prototype._fireEvent=function(O,N){return this._map.fire(new e.Event(O,{originalEvent:N}))};var pi=function(O){this.reset(),this.numTouches=O.numTouches};pi.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},pi.prototype.touchstart=function(O,N,H){(this.centroid||H.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=O.timeStamp),H.length===this.numTouches&&(this.centroid=function(X){for(var fe=new e.Point(0,0),me=0,_e=X;me<_e.length;me+=1)fe._add(_e[me]);return fe.div(X.length)}(N),this.touches=ci(H,N)))},pi.prototype.touchmove=function(O,N,H){if(!this.aborted&&this.centroid){var X=ci(H,N);for(var fe in this.touches){var _e=X[fe];(!_e||_e.dist(this.touches[fe])>30)&&(this.aborted=!0)}}},pi.prototype.touchend=function(O,N,H){if((!this.centroid||O.timeStamp-this.startTime>500)&&(this.aborted=!0),0===H.length){var X=!this.aborted&&this.centroid;if(this.reset(),X)return X}};var ra=function(O){this.singleTap=new pi(O),this.numTaps=O.numTaps,this.reset()};ra.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},ra.prototype.touchstart=function(O,N,H){this.singleTap.touchstart(O,N,H)},ra.prototype.touchmove=function(O,N,H){this.singleTap.touchmove(O,N,H)},ra.prototype.touchend=function(O,N,H){var X=this.singleTap.touchend(O,N,H);if(X){var fe=O.timeStamp-this.lastTime<500,me=!this.lastTap||this.lastTap.dist(X)<30;if(fe&&me||this.reset(),this.count++,this.lastTime=O.timeStamp,this.lastTap=X,this.count===this.numTaps)return this.reset(),X}};var ma=function(){this._zoomIn=new ra({numTouches:1,numTaps:2}),this._zoomOut=new ra({numTouches:2,numTaps:1}),this.reset()};ma.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},ma.prototype.touchstart=function(O,N,H){this._zoomIn.touchstart(O,N,H),this._zoomOut.touchstart(O,N,H)},ma.prototype.touchmove=function(O,N,H){this._zoomIn.touchmove(O,N,H),this._zoomOut.touchmove(O,N,H)},ma.prototype.touchend=function(O,N,H){var X=this,fe=this._zoomIn.touchend(O,N,H),me=this._zoomOut.touchend(O,N,H);return fe?(this._active=!0,O.preventDefault(),setTimeout(function(){return X.reset()},0),{cameraAnimation:function(_e){return _e.easeTo({duration:300,zoom:_e.getZoom()+1,around:_e.unproject(fe)},{originalEvent:O})}}):me?(this._active=!0,O.preventDefault(),setTimeout(function(){return X.reset()},0),{cameraAnimation:function(_e){return _e.easeTo({duration:300,zoom:_e.getZoom()-1,around:_e.unproject(me)},{originalEvent:O})}}):void 0},ma.prototype.touchcancel=function(){this.reset()},ma.prototype.enable=function(){this._enabled=!0},ma.prototype.disable=function(){this._enabled=!1,this.reset()},ma.prototype.isEnabled=function(){return this._enabled},ma.prototype.isActive=function(){return this._active};var $r=function(O){this.reset(),this._clickTolerance=O.clickTolerance||1};$r.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},$r.prototype._correctButton=function(O,N){return!1},$r.prototype._move=function(O,N){return{}},$r.prototype.mousedown=function(O,N){if(!this._lastPoint){var H=a.mouseButton(O);this._correctButton(O,H)&&(this._lastPoint=N,this._eventButton=H)}},$r.prototype.mousemoveWindow=function(O,N){var H=this._lastPoint;if(H&&(O.preventDefault(),this._moved||!(N.dist(H)<this._clickTolerance)))return this._moved=!0,this._lastPoint=N,this._move(H,N)},$r.prototype.mouseupWindow=function(O){a.mouseButton(O)===this._eventButton&&(this._moved&&a.suppressClick(),this.reset())},$r.prototype.enable=function(){this._enabled=!0},$r.prototype.disable=function(){this._enabled=!1,this.reset()},$r.prototype.isEnabled=function(){return this._enabled},$r.prototype.isActive=function(){return this._active};var Ta=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.mousedown=function(H,X){O.prototype.mousedown.call(this,H,X),this._lastPoint&&(this._active=!0)},N.prototype._correctButton=function(H,X){return 0===X&&!H.ctrlKey},N.prototype._move=function(H,X){return{around:X,panDelta:X.sub(H)}},N}($r),da=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype._correctButton=function(H,X){return 0===X&&H.ctrlKey||2===X},N.prototype._move=function(H,X){var fe=.8*(X.x-H.x);if(fe)return this._active=!0,{bearingDelta:fe}},N.prototype.contextmenu=function(H){H.preventDefault()},N}($r),Wi=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype._correctButton=function(H,X){return 0===X&&H.ctrlKey||2===X},N.prototype._move=function(H,X){var fe=-.5*(X.y-H.y);if(fe)return this._active=!0,{pitchDelta:fe}},N.prototype.contextmenu=function(H){H.preventDefault()},N}($r),va=function(O){this._minTouches=1,this._clickTolerance=O.clickTolerance||1,this.reset()};va.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new e.Point(0,0)},va.prototype.touchstart=function(O,N,H){return this._calculateTransform(O,N,H)},va.prototype.touchmove=function(O,N,H){if(this._active)return O.preventDefault(),this._calculateTransform(O,N,H)},va.prototype.touchend=function(O,N,H){this._calculateTransform(O,N,H),this._active&&H.length<this._minTouches&&this.reset()},va.prototype.touchcancel=function(){this.reset()},va.prototype._calculateTransform=function(O,N,H){H.length>0&&(this._active=!0);var X=ci(H,N),fe=new e.Point(0,0),me=new e.Point(0,0),_e=0;for(var ke in X){var Oe=X[ke],Xe=this._touches[ke];Xe&&(fe._add(Oe),me._add(Oe.sub(Xe)),_e++,X[ke]=Oe)}if(this._touches=X,!(_e<this._minTouches)&&me.mag()){var nt=me.div(_e);if(this._sum._add(nt),!(this._sum.mag()<this._clickTolerance))return{around:fe.div(_e),panDelta:nt}}},va.prototype.enable=function(){this._enabled=!0},va.prototype.disable=function(){this._enabled=!1,this.reset()},va.prototype.isEnabled=function(){return this._enabled},va.prototype.isActive=function(){return this._active};var ua=function(){this.reset()};function xa(O,N,H){for(var X=0;X<O.length;X++)if(O[X].identifier===H)return N[X]}function Mi(O,N){return Math.log(O/N)/Math.LN2}ua.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},ua.prototype._start=function(O){},ua.prototype._move=function(O,N,H){return{}},ua.prototype.touchstart=function(O,N,H){this._firstTwoTouches||H.length<2||(this._firstTwoTouches=[H[0].identifier,H[1].identifier],this._start([N[0],N[1]]))},ua.prototype.touchmove=function(O,N,H){if(this._firstTwoTouches){O.preventDefault();var X=this._firstTwoTouches,me=X[1],_e=xa(H,N,X[0]),ke=xa(H,N,me);if(_e&&ke){var Oe=this._aroundCenter?null:_e.add(ke).div(2);return this._move([_e,ke],Oe,O)}}},ua.prototype.touchend=function(O,N,H){if(this._firstTwoTouches){var X=this._firstTwoTouches,me=X[1],_e=xa(H,N,X[0]),ke=xa(H,N,me);_e&&ke||(this._active&&a.suppressClick(),this.reset())}},ua.prototype.touchcancel=function(){this.reset()},ua.prototype.enable=function(O){this._enabled=!0,this._aroundCenter=!!O&&"center"===O.around},ua.prototype.disable=function(){this._enabled=!1,this.reset()},ua.prototype.isEnabled=function(){return this._enabled},ua.prototype.isActive=function(){return this._active};var ja=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.reset=function(){O.prototype.reset.call(this),delete this._distance,delete this._startDistance},N.prototype._start=function(H){this._startDistance=this._distance=H[0].dist(H[1])},N.prototype._move=function(H,X){var fe=this._distance;if(this._distance=H[0].dist(H[1]),this._active||!(Math.abs(Mi(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Mi(this._distance,fe),pinchAround:X}},N}(ua);function Vo(O,N){return 180*O.angleWith(N)/Math.PI}var kl=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.reset=function(){O.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},N.prototype._start=function(H){this._startVector=this._vector=H[0].sub(H[1]),this._minDiameter=H[0].dist(H[1])},N.prototype._move=function(H,X){var fe=this._vector;if(this._vector=H[0].sub(H[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Vo(this._vector,fe),pinchAround:X}},N.prototype._isBelowThreshold=function(H){this._minDiameter=Math.min(this._minDiameter,H.mag());var X=25/(Math.PI*this._minDiameter)*360,fe=Vo(H,this._startVector);return Math.abs(fe)<X},N}(ua);function tl(O){return Math.abs(O.y)>Math.abs(O.x)}var fs=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.reset=function(){O.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},N.prototype._start=function(H){this._lastPoints=H,tl(H[0].sub(H[1]))&&(this._valid=!1)},N.prototype._move=function(H,X,fe){var me=H[0].sub(this._lastPoints[0]),_e=H[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(me,_e,fe.timeStamp),this._valid)return this._lastPoints=H,this._active=!0,{pitchDelta:(me.y+_e.y)/2*-.5}},N.prototype.gestureBeginsVertically=function(H,X,fe){if(void 0!==this._valid)return this._valid;var me=H.mag()>=2,_e=X.mag()>=2;if(me||_e){if(!me||!_e)return void 0===this._firstMove&&(this._firstMove=fe),fe-this._firstMove<100&&void 0;var ke=H.y>0==X.y>0;return tl(H)&&tl(X)&&ke}},N}(ua),Ji={panStep:100,bearingStep:15,pitchStep:10},po=function(){var O=Ji;this._panStep=O.panStep,this._bearingStep=O.bearingStep,this._pitchStep=O.pitchStep};function Ns(O){return O*(2-O)}po.prototype.reset=function(){this._active=!1},po.prototype.keydown=function(O){var N=this;if(!(O.altKey||O.ctrlKey||O.metaKey)){var H=0,X=0,fe=0,me=0,_e=0;switch(O.keyCode){case 61:case 107:case 171:case 187:H=1;break;case 189:case 109:case 173:H=-1;break;case 37:O.shiftKey?X=-1:(O.preventDefault(),me=-1);break;case 39:O.shiftKey?X=1:(O.preventDefault(),me=1);break;case 38:O.shiftKey?fe=1:(O.preventDefault(),_e=-1);break;case 40:O.shiftKey?fe=-1:(O.preventDefault(),_e=1);break;default:return}return{cameraAnimation:function(ke){var Oe=ke.getZoom();ke.easeTo({duration:300,easeId:"keyboardHandler",easing:Ns,zoom:H?Math.round(Oe)+H*(O.shiftKey?2:1):Oe,bearing:ke.getBearing()+X*N._bearingStep,pitch:ke.getPitch()+fe*N._pitchStep,offset:[-me*N._panStep,-_e*N._panStep],center:ke.getCenter()},{originalEvent:O})}}}},po.prototype.enable=function(){this._enabled=!0},po.prototype.disable=function(){this._enabled=!1,this.reset()},po.prototype.isEnabled=function(){return this._enabled},po.prototype.isActive=function(){return this._active};var Qi=function(O,N){this._map=O,this._el=O.getCanvasContainer(),this._handler=N,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,e.bindAll(["_onWheel","_onTimeout","_onScrollFrame","_onScrollFinished"],this)};Qi.prototype.setZoomRate=function(O){this._defaultZoomRate=O},Qi.prototype.setWheelZoomRate=function(O){this._wheelZoomRate=O},Qi.prototype.isEnabled=function(){return!!this._enabled},Qi.prototype.isActive=function(){return!!this._active||void 0!==this._finishTimeout},Qi.prototype.isZooming=function(){return!!this._zooming},Qi.prototype.enable=function(O){this.isEnabled()||(this._enabled=!0,this._aroundCenter=O&&"center"===O.around)},Qi.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Qi.prototype.wheel=function(O){if(this.isEnabled()){var N=O.deltaMode===e.window.WheelEvent.DOM_DELTA_LINE?40*O.deltaY:O.deltaY,H=e.browser.now(),X=H-(this._lastWheelEventTime||0);this._lastWheelEventTime=H,0!==N&&N%4.000244140625==0?this._type="wheel":0!==N&&Math.abs(N)<4?this._type="trackpad":X>400?(this._type=null,this._lastValue=N,this._timeout=setTimeout(this._onTimeout,40,O)):this._type||(this._type=Math.abs(X*N)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,N+=this._lastValue)),O.shiftKey&&N&&(N/=4),this._type&&(this._lastWheelEvent=O,this._delta-=N,this._active||this._start(O)),O.preventDefault()}},Qi.prototype._onTimeout=function(O){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(O)},Qi.prototype._start=function(O){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var N=a.mousePos(this._el,O);this._around=e.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(N)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},Qi.prototype.renderFrame=function(){return this._onScrollFrame()},Qi.prototype._onScrollFrame=function(){var O=this;if(this._frameId&&(this._frameId=null,this.isActive())){var N=this._map.transform;if(0!==this._delta){var H="wheel"===this._type&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,X=2/(1+Math.exp(-Math.abs(this._delta*H)));this._delta<0&&0!==X&&(X=1/X);var fe="number"==typeof this._targetZoom?N.zoomScale(this._targetZoom):N.scale;this._targetZoom=Math.min(N.maxZoom,Math.max(N.minZoom,N.scaleZoom(fe*X))),"wheel"===this._type&&(this._startZoom=N.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var me,_e="number"==typeof this._targetZoom?this._targetZoom:N.zoom,ke=this._startZoom,Oe=this._easing,Xe=!1;if("wheel"===this._type&&ke&&Oe){var nt=Math.min((e.browser.now()-this._lastWheelEventTime)/200,1),dt=Oe(nt);me=e.number(ke,_e,dt),nt<1?this._frameId||(this._frameId=!0):Xe=!0}else me=_e,Xe=!0;return this._active=!0,Xe&&(this._active=!1,this._finishTimeout=setTimeout(function(){O._zooming=!1,O._handler._triggerRenderFrame(),delete O._targetZoom,delete O._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!Xe,zoomDelta:me-N.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},Qi.prototype._smoothOutEasing=function(O){var N=e.ease;if(this._prevEase){var H=this._prevEase,X=(e.browser.now()-H.start)/H.duration,fe=H.easing(X+.01)-H.easing(X),me=.27/Math.sqrt(fe*fe+1e-4)*.01,_e=Math.sqrt(.0729-me*me);N=e.bezier(me,_e,.25,1)}return this._prevEase={start:e.browser.now(),duration:O,easing:N},N},Qi.prototype.reset=function(){this._active=!1};var Mo=function(O,N){this._clickZoom=O,this._tapZoom=N};Mo.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},Mo.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},Mo.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},Mo.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var ts=function(){this.reset()};ts.prototype.reset=function(){this._active=!1},ts.prototype.dblclick=function(O,N){return O.preventDefault(),{cameraAnimation:function(H){H.easeTo({duration:300,zoom:H.getZoom()+(O.shiftKey?-1:1),around:H.unproject(N)},{originalEvent:O})}}},ts.prototype.enable=function(){this._enabled=!0},ts.prototype.disable=function(){this._enabled=!1,this.reset()},ts.prototype.isEnabled=function(){return this._enabled},ts.prototype.isActive=function(){return this._active};var la=function(){this._tap=new ra({numTouches:1,numTaps:1}),this.reset()};la.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},la.prototype.touchstart=function(O,N,H){this._swipePoint||(this._tapTime&&O.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?H.length>0&&(this._swipePoint=N[0],this._swipeTouch=H[0].identifier):this._tap.touchstart(O,N,H))},la.prototype.touchmove=function(O,N,H){if(this._tapTime){if(this._swipePoint){if(H[0].identifier!==this._swipeTouch)return;var X=N[0],fe=X.y-this._swipePoint.y;return this._swipePoint=X,O.preventDefault(),this._active=!0,{zoomDelta:fe/128}}}else this._tap.touchmove(O,N,H)},la.prototype.touchend=function(O,N,H){this._tapTime?this._swipePoint&&0===H.length&&this.reset():this._tap.touchend(O,N,H)&&(this._tapTime=O.timeStamp)},la.prototype.touchcancel=function(){this.reset()},la.prototype.enable=function(){this._enabled=!0},la.prototype.disable=function(){this._enabled=!1,this.reset()},la.prototype.isEnabled=function(){return this._enabled},la.prototype.isActive=function(){return this._active};var bs=function(O,N,H){this._el=O,this._mousePan=N,this._touchPan=H};bs.prototype.enable=function(O){this._inertiaOptions=O||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},bs.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},bs.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},bs.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Qa=function(O,N,H){this._pitchWithRotate=O.pitchWithRotate,this._mouseRotate=N,this._mousePitch=H};Qa.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Qa.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Qa.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Qa.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Xo=function(O,N,H,X){this._el=O,this._touchZoom=N,this._touchRotate=H,this._tapDragZoom=X,this._rotationDisabled=!1,this._enabled=!0};Xo.prototype.enable=function(O){this._touchZoom.enable(O),this._rotationDisabled||this._touchRotate.enable(O),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Xo.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Xo.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Xo.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Xo.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Xo.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var ns=function(O){return O.zoom||O.drag||O.pitch||O.rotate},Dl=function(O){function N(){O.apply(this,arguments)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N}(e.Event);function au(O){return O.panDelta&&O.panDelta.mag()||O.zoomDelta||O.bearingDelta||O.pitchDelta}var vo=function(O,N){this._map=O,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Wr(O),this._bearingSnap=N.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(N),e.bindAll(["handleEvent","handleWindowEvent"],this);var H=this._el;this._listeners=[[H,"touchstart",{passive:!1}],[H,"touchmove",{passive:!1}],[H,"touchend",void 0],[H,"touchcancel",void 0],[H,"mousedown",void 0],[H,"mousemove",void 0],[H,"mouseup",void 0],[e.window.document,"mousemove",{capture:!0}],[e.window.document,"mouseup",void 0],[H,"mouseover",void 0],[H,"mouseout",void 0],[H,"dblclick",void 0],[H,"click",void 0],[H,"keydown",{capture:!1}],[H,"keyup",void 0],[H,"wheel",{passive:!1}],[H,"contextmenu",void 0],[e.window,"blur",void 0]];for(var X=0,fe=this._listeners;X<fe.length;X+=1){var me=fe[X],_e=me[0];a.addEventListener(_e,me[1],_e===e.window.document?this.handleWindowEvent:this.handleEvent,me[2])}};vo.prototype.destroy=function(){for(var O=0,N=this._listeners;O<N.length;O+=1){var H=N[O],X=H[0];a.removeEventListener(X,H[1],X===e.window.document?this.handleWindowEvent:this.handleEvent,H[2])}},vo.prototype._addDefaultHandlers=function(O){var N=this._map,H=N.getCanvasContainer();this._add("mapEvent",new br(N,O));var X=N.boxZoom=new Jr(N,O);this._add("boxZoom",X);var fe=new ma,me=new ts;N.doubleClickZoom=new Mo(me,fe),this._add("tapZoom",fe),this._add("clickZoom",me);var _e=new la;this._add("tapDragZoom",_e);var ke=N.touchPitch=new fs;this._add("touchPitch",ke);var Oe=new da(O),Xe=new Wi(O);N.dragRotate=new Qa(O,Oe,Xe),this._add("mouseRotate",Oe,["mousePitch"]),this._add("mousePitch",Xe,["mouseRotate"]);var nt=new Ta(O),dt=new va(O);N.dragPan=new bs(H,nt,dt),this._add("mousePan",nt),this._add("touchPan",dt,["touchZoom","touchRotate"]);var Dt=new kl,Ft=new ja;N.touchZoomRotate=new Xo(H,Ft,Dt,_e),this._add("touchRotate",Dt,["touchPan","touchZoom"]),this._add("touchZoom",Ft,["touchPan","touchRotate"]);var It=N.scrollZoom=new Qi(N,this);this._add("scrollZoom",It,["mousePan"]);var Pt=N.keyboard=new po;this._add("keyboard",Pt),this._add("blockableMapEvent",new Si(N));for(var Et=0,Zt=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];Et<Zt.length;Et+=1){var qt=Zt[Et];O.interactive&&O[qt]&&N[qt].enable(O[qt])}},vo.prototype._add=function(O,N,H){this._handlers.push({handlerName:O,handler:N,allowed:H}),this._handlersById[O]=N},vo.prototype.stop=function(){if(!this._updatingCamera){for(var O=0,N=this._handlers;O<N.length;O+=1)N[O].handler.reset();this._inertia.clear(),this._fireEvents({},{}),this._changes=[]}},vo.prototype.isActive=function(){for(var O=0,N=this._handlers;O<N.length;O+=1)if(N[O].handler.isActive())return!0;return!1},vo.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},vo.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},vo.prototype.isMoving=function(){return Boolean(ns(this._eventsInProgress))||this.isZooming()},vo.prototype._blockedByActive=function(O,N,H){for(var X in O)if(X!==H&&(!N||N.indexOf(X)<0))return!0;return!1},vo.prototype.handleWindowEvent=function(O){this.handleEvent(O,O.type+"Window")},vo.prototype._getMapTouches=function(O){for(var N=[],H=0,X=O;H<X.length;H+=1){var fe=X[H];this._el.contains(fe.target)&&N.push(fe)}return N},vo.prototype.handleEvent=function(O,N){if("blur"!==O.type){this._updatingCamera=!0;for(var H="renderFrame"===O.type?void 0:O,X={needsRenderFrame:!1},fe={},me={},_e=O.touches?this._getMapTouches(O.touches):void 0,ke=_e?a.touchPos(this._el,_e):a.mousePos(this._el,O),Oe=0,Xe=this._handlers;Oe<Xe.length;Oe+=1){var nt=Xe[Oe],dt=nt.handlerName,Dt=nt.handler,Ft=nt.allowed;if(Dt.isEnabled()){var It=void 0;this._blockedByActive(me,Ft,dt)?Dt.reset():Dt[N||O.type]&&(It=Dt[N||O.type](O,ke,_e),this.mergeHandlerResult(X,fe,It,dt,H),It&&It.needsRenderFrame&&this._triggerRenderFrame()),(It||Dt.isActive())&&(me[dt]=Dt)}}var Pt={};for(var Et in this._previousActiveHandlers)me[Et]||(Pt[Et]=H);this._previousActiveHandlers=me,(Object.keys(Pt).length||au(X))&&(this._changes.push([X,fe,Pt]),this._triggerRenderFrame()),(Object.keys(me).length||au(X))&&this._map._stop(!0),this._updatingCamera=!1;var Zt=X.cameraAnimation;Zt&&(this._inertia.clear(),this._fireEvents({},{}),this._changes=[],Zt(this._map))}else this.stop()},vo.prototype.mergeHandlerResult=function(O,N,H,X,fe){if(H){e.extend(O,H);var me={handlerName:X,originalEvent:H.originalEvent||fe};void 0!==H.zoomDelta&&(N.zoom=me),void 0!==H.panDelta&&(N.drag=me),void 0!==H.pitchDelta&&(N.pitch=me),void 0!==H.bearingDelta&&(N.rotate=me)}},vo.prototype._applyChanges=function(){for(var O={},N={},H={},X=0,fe=this._changes;X<fe.length;X+=1){var me=fe[X],_e=me[0],ke=me[1],Oe=me[2];_e.panDelta&&(O.panDelta=(O.panDelta||new e.Point(0,0))._add(_e.panDelta)),_e.zoomDelta&&(O.zoomDelta=(O.zoomDelta||0)+_e.zoomDelta),_e.bearingDelta&&(O.bearingDelta=(O.bearingDelta||0)+_e.bearingDelta),_e.pitchDelta&&(O.pitchDelta=(O.pitchDelta||0)+_e.pitchDelta),void 0!==_e.around&&(O.around=_e.around),void 0!==_e.pinchAround&&(O.pinchAround=_e.pinchAround),_e.noInertia&&(O.noInertia=_e.noInertia),e.extend(N,ke),e.extend(H,Oe)}this._updateMapTransform(O,N,H),this._changes=[]},vo.prototype._updateMapTransform=function(O,N,H){var X=this._map,fe=X.transform;if(!au(O))return this._fireEvents(N,H);var me=O.panDelta,_e=O.zoomDelta,ke=O.bearingDelta,Oe=O.pitchDelta,Xe=O.around,nt=O.pinchAround;void 0!==nt&&(Xe=nt),X._stop(!0),Xe=Xe||X.transform.centerPoint;var dt=fe.pointLocation(me?Xe.sub(me):Xe);ke&&(fe.bearing+=ke),Oe&&(fe.pitch+=Oe),_e&&(fe.zoom+=_e),fe.setLocationAtPoint(dt,Xe),this._map._update(),O.noInertia||this._inertia.record(O),this._fireEvents(N,H)},vo.prototype._fireEvents=function(O,N){var H=this,X=ns(this._eventsInProgress),fe=ns(O),me={};for(var _e in O)this._eventsInProgress[_e]||(me[_e+"start"]=O[_e].originalEvent),this._eventsInProgress[_e]=O[_e];for(var Oe in!X&&fe&&this._fireEvent("movestart",fe.originalEvent),me)this._fireEvent(Oe,me[Oe]);for(var Xe in O.rotate&&(this._bearingChanged=!0),fe&&this._fireEvent("move",fe.originalEvent),O)this._fireEvent(Xe,O[Xe].originalEvent);var dt,Dt={};for(var Ft in this._eventsInProgress){var It=this._eventsInProgress[Ft],Pt=It.handlerName,Et=It.originalEvent;this._handlersById[Pt].isActive()||(delete this._eventsInProgress[Ft],Dt[Ft+"end"]=dt=N[Pt]||Et)}for(var Zt in Dt)this._fireEvent(Zt,Dt[Zt]);var qt=ns(this._eventsInProgress);if((X||fe)&&!qt){this._updatingCamera=!0;var $t=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),yn=function(kn){return 0!==kn&&-H._bearingSnap<kn&&kn<H._bearingSnap};$t?(yn($t.bearing||this._map.getBearing())&&($t.bearing=0),this._map.easeTo($t,{originalEvent:dt})):(this._map.fire(new e.Event("moveend",{originalEvent:dt})),yn(this._map.getBearing())&&this._map.resetNorth()),this._bearingChanged=!1,this._updatingCamera=!1}},vo.prototype._fireEvent=function(O,N){this._map.fire(new e.Event(O,N?{originalEvent:N}:{}))},vo.prototype._triggerRenderFrame=function(){var O=this;void 0===this._frameId&&(this._frameId=this._map._requestRenderFrame(function(N){delete O._frameId,O.handleEvent(new Dl("renderFrame",{timeStamp:N})),O._applyChanges()}))};var _s=function(O){function N(H,X){O.call(this),this._moving=!1,this._zooming=!1,this.transform=H,this._bearingSnap=X.bearingSnap,e.bindAll(["_renderFrameCallback"],this)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.getCenter=function(){return new e.LngLat(this.transform.center.lng,this.transform.center.lat)},N.prototype.setCenter=function(H,X){return this.jumpTo({center:H},X)},N.prototype.panBy=function(H,X,fe){return H=e.Point.convert(H).mult(-1),this.panTo(this.transform.center,e.extend({offset:H},X),fe)},N.prototype.panTo=function(H,X,fe){return this.easeTo(e.extend({center:H},X),fe)},N.prototype.getZoom=function(){return this.transform.zoom},N.prototype.setZoom=function(H,X){return this.jumpTo({zoom:H},X),this},N.prototype.zoomTo=function(H,X,fe){return this.easeTo(e.extend({zoom:H},X),fe)},N.prototype.zoomIn=function(H,X){return this.zoomTo(this.getZoom()+1,H,X),this},N.prototype.zoomOut=function(H,X){return this.zoomTo(this.getZoom()-1,H,X),this},N.prototype.getBearing=function(){return this.transform.bearing},N.prototype.setBearing=function(H,X){return this.jumpTo({bearing:H},X),this},N.prototype.getPadding=function(){return this.transform.padding},N.prototype.setPadding=function(H,X){return this.jumpTo({padding:H},X),this},N.prototype.rotateTo=function(H,X,fe){return this.easeTo(e.extend({bearing:H},X),fe)},N.prototype.resetNorth=function(H,X){return this.rotateTo(0,e.extend({duration:1e3},H),X),this},N.prototype.resetNorthPitch=function(H,X){return this.easeTo(e.extend({bearing:0,pitch:0,duration:1e3},H),X),this},N.prototype.snapToNorth=function(H,X){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(H,X):this},N.prototype.getPitch=function(){return this.transform.pitch},N.prototype.setPitch=function(H,X){return this.jumpTo({pitch:H},X),this},N.prototype.cameraForBounds=function(H,X){return H=e.LngLatBounds.convert(H),this._cameraForBoxAndBearing(H.getNorthWest(),H.getSouthEast(),0,X)},N.prototype._cameraForBoxAndBearing=function(H,X,fe,me){var _e={top:0,bottom:0,right:0,left:0};if("number"==typeof(me=e.extend({padding:_e,offset:[0,0],maxZoom:this.transform.maxZoom},me)).padding){var ke=me.padding;me.padding={top:ke,bottom:ke,right:ke,left:ke}}me.padding=e.extend(_e,me.padding);var Oe=this.transform,Xe=Oe.padding,nt=Oe.project(e.LngLat.convert(H)),dt=Oe.project(e.LngLat.convert(X)),Dt=nt.rotate(-fe*Math.PI/180),Ft=dt.rotate(-fe*Math.PI/180),It=new e.Point(Math.max(Dt.x,Ft.x),Math.max(Dt.y,Ft.y)),Pt=new e.Point(Math.min(Dt.x,Ft.x),Math.min(Dt.y,Ft.y)),Et=It.sub(Pt),Zt=(Oe.width-(Xe.left+Xe.right+me.padding.left+me.padding.right))/Et.x,qt=(Oe.height-(Xe.top+Xe.bottom+me.padding.top+me.padding.bottom))/Et.y;if(!(qt<0||Zt<0)){var $t=Math.min(Oe.scaleZoom(Oe.scale*Math.min(Zt,qt)),me.maxZoom),yn=e.Point.convert(me.offset),Gn=new e.Point(yn.x+(me.padding.left-me.padding.right)/2,yn.y+(me.padding.top-me.padding.bottom)/2).mult(Oe.scale/Oe.zoomScale($t));return{center:Oe.unproject(nt.add(dt).div(2).sub(Gn)),zoom:$t,bearing:fe}}e.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},N.prototype.fitBounds=function(H,X,fe){return this._fitInternal(this.cameraForBounds(H,X),X,fe)},N.prototype.fitScreenCoordinates=function(H,X,fe,me,_e){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(e.Point.convert(H)),this.transform.pointLocation(e.Point.convert(X)),fe,me),me,_e)},N.prototype._fitInternal=function(H,X,fe){return H?(delete(X=e.extend(H,X)).padding,X.linear?this.easeTo(X,fe):this.flyTo(X,fe)):this},N.prototype.jumpTo=function(H,X){this.stop();var fe=this.transform,me=!1,_e=!1,ke=!1;return"zoom"in H&&fe.zoom!==+H.zoom&&(me=!0,fe.zoom=+H.zoom),void 0!==H.center&&(fe.center=e.LngLat.convert(H.center)),"bearing"in H&&fe.bearing!==+H.bearing&&(_e=!0,fe.bearing=+H.bearing),"pitch"in H&&fe.pitch!==+H.pitch&&(ke=!0,fe.pitch=+H.pitch),null==H.padding||fe.isPaddingEqual(H.padding)||(fe.padding=H.padding),this.fire(new e.Event("movestart",X)).fire(new e.Event("move",X)),me&&this.fire(new e.Event("zoomstart",X)).fire(new e.Event("zoom",X)).fire(new e.Event("zoomend",X)),_e&&this.fire(new e.Event("rotatestart",X)).fire(new e.Event("rotate",X)).fire(new e.Event("rotateend",X)),ke&&this.fire(new e.Event("pitchstart",X)).fire(new e.Event("pitch",X)).fire(new e.Event("pitchend",X)),this.fire(new e.Event("moveend",X))},N.prototype.easeTo=function(H,X){var fe=this;this._stop(!1,H.easeId),(!1===(H=e.extend({offset:[0,0],duration:500,easing:e.ease},H)).animate||!H.essential&&e.browser.prefersReducedMotion)&&(H.duration=0);var me=this.transform,_e=this.getZoom(),ke=this.getBearing(),Oe=this.getPitch(),Xe=this.getPadding(),nt="zoom"in H?+H.zoom:_e,dt="bearing"in H?this._normalizeBearing(H.bearing,ke):ke,Dt="pitch"in H?+H.pitch:Oe,Ft="padding"in H?H.padding:me.padding,It=e.Point.convert(H.offset),Pt=me.centerPoint.add(It),Et=me.pointLocation(Pt),Zt=e.LngLat.convert(H.center||Et);this._normalizeCenter(Zt);var qt,$t,yn=me.project(Et),kn=me.project(Zt).sub(yn),Vn=me.zoomScale(nt-_e);H.around&&(qt=e.LngLat.convert(H.around),$t=me.locationPoint(qt));var Gn={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||nt!==_e,this._rotating=this._rotating||ke!==dt,this._pitching=this._pitching||Dt!==Oe,this._padding=!me.isPaddingEqual(Ft),this._easeId=H.easeId,this._prepareEase(X,H.noMoveStart,Gn),clearTimeout(this._easeEndTimeoutID),this._ease(function(Tr){if(fe._zooming&&(me.zoom=e.number(_e,nt,Tr)),fe._rotating&&(me.bearing=e.number(ke,dt,Tr)),fe._pitching&&(me.pitch=e.number(Oe,Dt,Tr)),fe._padding&&(me.interpolatePadding(Xe,Ft,Tr),Pt=me.centerPoint.add(It)),qt)me.setLocationAtPoint(qt,$t);else{var _r=me.zoomScale(me.zoom-_e),Or=nt>_e?Math.min(2,Vn):Math.max(.5,Vn),Sr=Math.pow(Or,1-Tr),hi=me.unproject(yn.add(kn.mult(Tr*Sr)).mult(_r));me.setLocationAtPoint(me.renderWorldCopies?hi.wrap():hi,Pt)}fe._fireMoveEvents(X)},function(Tr){fe._afterEase(X,Tr)},H),this},N.prototype._prepareEase=function(H,X,fe){void 0===fe&&(fe={}),this._moving=!0,X||fe.moving||this.fire(new e.Event("movestart",H)),this._zooming&&!fe.zooming&&this.fire(new e.Event("zoomstart",H)),this._rotating&&!fe.rotating&&this.fire(new e.Event("rotatestart",H)),this._pitching&&!fe.pitching&&this.fire(new e.Event("pitchstart",H))},N.prototype._fireMoveEvents=function(H){this.fire(new e.Event("move",H)),this._zooming&&this.fire(new e.Event("zoom",H)),this._rotating&&this.fire(new e.Event("rotate",H)),this._pitching&&this.fire(new e.Event("pitch",H))},N.prototype._afterEase=function(H,X){if(!this._easeId||!X||this._easeId!==X){delete this._easeId;var fe=this._zooming,me=this._rotating,_e=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,fe&&this.fire(new e.Event("zoomend",H)),me&&this.fire(new e.Event("rotateend",H)),_e&&this.fire(new e.Event("pitchend",H)),this.fire(new e.Event("moveend",H))}},N.prototype.flyTo=function(H,X){var fe=this;if(!H.essential&&e.browser.prefersReducedMotion){var me=e.pick(H,["center","zoom","bearing","pitch","around"]);return this.jumpTo(me,X)}this.stop(),H=e.extend({offset:[0,0],speed:1.2,curve:1.42,easing:e.ease},H);var _e=this.transform,ke=this.getZoom(),Oe=this.getBearing(),Xe=this.getPitch(),nt=this.getPadding(),dt="zoom"in H?e.clamp(+H.zoom,_e.minZoom,_e.maxZoom):ke,Dt="bearing"in H?this._normalizeBearing(H.bearing,Oe):Oe,Ft="pitch"in H?+H.pitch:Xe,It="padding"in H?H.padding:_e.padding,Pt=_e.zoomScale(dt-ke),Et=e.Point.convert(H.offset),Zt=_e.centerPoint.add(Et),qt=_e.pointLocation(Zt),$t=e.LngLat.convert(H.center||qt);this._normalizeCenter($t);var yn=_e.project(qt),kn=_e.project($t).sub(yn),Vn=H.curve,Gn=Math.max(_e.width,_e.height),Tr=Gn/Pt,_r=kn.mag();if("minZoom"in H){var Or=e.clamp(Math.min(H.minZoom,ke,dt),_e.minZoom,_e.maxZoom),Sr=Gn/_e.zoomScale(Or-ke);Vn=Math.sqrt(Sr/_r*2)}var hi=Vn*Vn;function vi(Ai){var Zi=(Tr*Tr-Gn*Gn+(Ai?-1:1)*hi*hi*_r*_r)/(2*(Ai?Tr:Gn)*hi*_r);return Math.log(Math.sqrt(Zi*Zi+1)-Zi)}function Oi(Ai){return(Math.exp(Ai)-Math.exp(-Ai))/2}function cr(Ai){return(Math.exp(Ai)+Math.exp(-Ai))/2}var Hr=vi(0),bi=function(Ai){return cr(Hr)/cr(Hr+Vn*Ai)},mi=function(Ai){return Gn*((cr(Hr)*(Oi(Zi=Hr+Vn*Ai)/cr(Zi))-Oi(Hr))/hi)/_r;var Zi},wi=(vi(1)-Hr)/Vn;if(Math.abs(_r)<1e-6||!isFinite(wi)){if(Math.abs(Gn-Tr)<1e-6)return this.easeTo(H,X);var Fi=Tr<Gn?-1:1;wi=Math.abs(Math.log(Tr/Gn))/Vn,mi=function(){return 0},bi=function(Ai){return Math.exp(Fi*Vn*Ai)}}return H.duration="duration"in H?+H.duration:1e3*wi/("screenSpeed"in H?+H.screenSpeed/Vn:+H.speed),H.maxDuration&&H.duration>H.maxDuration&&(H.duration=0),this._zooming=!0,this._rotating=Oe!==Dt,this._pitching=Ft!==Xe,this._padding=!_e.isPaddingEqual(It),this._prepareEase(X,!1),this._ease(function(Ai){var Zi=Ai*wi,Xi=1/bi(Zi);_e.zoom=1===Ai?dt:ke+_e.scaleZoom(Xi),fe._rotating&&(_e.bearing=e.number(Oe,Dt,Ai)),fe._pitching&&(_e.pitch=e.number(Xe,Ft,Ai)),fe._padding&&(_e.interpolatePadding(nt,It,Ai),Zt=_e.centerPoint.add(Et));var ya=1===Ai?$t:_e.unproject(yn.add(kn.mult(mi(Zi))).mult(Xi));_e.setLocationAtPoint(_e.renderWorldCopies?ya.wrap():ya,Zt),fe._fireMoveEvents(X)},function(){return fe._afterEase(X)},H),this},N.prototype.isEasing=function(){return!!this._easeFrameId},N.prototype.stop=function(){return this._stop()},N.prototype._stop=function(H,X){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var fe=this._onEaseEnd;delete this._onEaseEnd,fe.call(this,X)}if(!H){var me=this.handlers;me&&me.stop()}return this},N.prototype._ease=function(H,X,fe){!1===fe.animate||0===fe.duration?(H(1),X()):(this._easeStart=e.browser.now(),this._easeOptions=fe,this._onEaseFrame=H,this._onEaseEnd=X,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},N.prototype._renderFrameCallback=function(){var H=Math.min((e.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(H)),H<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},N.prototype._normalizeBearing=function(H,X){H=e.wrap(H,-180,180);var fe=Math.abs(H-X);return Math.abs(H-360-X)<fe&&(H-=360),Math.abs(H+360-X)<fe&&(H+=360),H},N.prototype._normalizeCenter=function(H){var X=this.transform;if(X.renderWorldCopies&&!X.lngRange){var fe=H.lng-X.center.lng;H.lng+=fe>180?-360:fe<-180?360:0}},N}(e.Evented),Uo=function(O){void 0===O&&(O={}),this.options=O,e.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};Uo.prototype.getDefaultPosition=function(){return"bottom-right"},Uo.prototype.onAdd=function(O){var N=this.options&&this.options.compact;return this._map=O,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._innerContainer=a.create("div","mapboxgl-ctrl-attrib-inner",this._container),N&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===N&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Uo.prototype.onRemove=function(){a.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Uo.prototype._updateEditLink=function(){var O=this._editLink;O||(O=this._editLink=this._container.querySelector(".mapbox-improve-map"));var N=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||e.config.ACCESS_TOKEN}];if(O){var H=N.reduce(function(X,fe,me){return fe.value&&(X+=fe.key+"="+fe.value+(me<N.length-1?"&":"")),X},"?");O.href=e.config.FEEDBACK_URL+"/"+H+(this._map._hash?this._map._hash.getHashString(!0):""),O.rel="noopener nofollow"}},Uo.prototype._updateData=function(O){!O||"metadata"!==O.sourceDataType&&"style"!==O.dataType||(this._updateAttributions(),this._updateEditLink())},Uo.prototype._updateAttributions=function(){if(this._map.style){var O=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?O=O.concat(this.options.customAttribution.map(function(ke){return"string"!=typeof ke?"":ke})):"string"==typeof this.options.customAttribution&&O.push(this.options.customAttribution)),this._map.style.stylesheet){var N=this._map.style.stylesheet;this.styleOwner=N.owner,this.styleId=N.id}var H=this._map.style.sourceCaches;for(var X in H){var fe=H[X];if(fe.used){var me=fe.getSource();me.attribution&&O.indexOf(me.attribution)<0&&O.push(me.attribution)}}O.sort(function(ke,Oe){return ke.length-Oe.length});var _e=(O=O.filter(function(ke,Oe){for(var Xe=Oe+1;Xe<O.length;Xe++)if(O[Xe].indexOf(ke)>=0)return!1;return!0})).join(" | ");_e!==this._attribHTML&&(this._attribHTML=_e,O.length?(this._innerContainer.innerHTML=_e,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Uo.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")};var yl=function(){e.bindAll(["_updateLogo"],this),e.bindAll(["_updateCompact"],this)};yl.prototype.onAdd=function(O){this._map=O,this._container=a.create("div","mapboxgl-ctrl");var N=a.create("a","mapboxgl-ctrl-logo");return N.target="_blank",N.rel="noopener nofollow",N.href="https://www.mapbox.com/",N.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),N.setAttribute("rel","noopener nofollow"),this._container.appendChild(N),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},yl.prototype.onRemove=function(){a.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},yl.prototype.getDefaultPosition=function(){return"bottom-left"},yl.prototype._updateLogo=function(O){O&&"metadata"!==O.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},yl.prototype._logoRequired=function(){if(this._map.style){var O=this._map.style.sourceCaches;for(var N in O)if(O[N].getSource().mapbox_logo)return!0;return!1}},yl.prototype._updateCompact=function(){var O=this._container.children;if(O.length){var N=O[0];this._map.getCanvasContainer().offsetWidth<250?N.classList.add("mapboxgl-compact"):N.classList.remove("mapboxgl-compact")}};var Ri=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};Ri.prototype.add=function(O){var N=++this._id;return this._queue.push({callback:O,id:N,cancelled:!1}),N},Ri.prototype.remove=function(O){for(var N=this._currentlyRunning,H=0,X=N?this._queue.concat(N):this._queue;H<X.length;H+=1){var fe=X[H];if(fe.id===O)return void(fe.cancelled=!0)}},Ri.prototype.run=function(O){void 0===O&&(O=0);var N=this._currentlyRunning=this._queue;this._queue=[];for(var H=0,X=N;H<X.length;H+=1){var fe=X[H];if(!fe.cancelled&&(fe.callback(O),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},Ri.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Yi={"FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},xu=e.window.HTMLImageElement,ou=e.window.HTMLElement,ia=e.window.ImageBitmap,nl={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},vl=function(O){function N(X){var fe=this;if(null!=(X=e.extend({},nl,X)).minZoom&&null!=X.maxZoom&&X.minZoom>X.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=X.minPitch&&null!=X.maxPitch&&X.minPitch>X.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=X.minPitch&&X.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=X.maxPitch&&X.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var me=new rn(X.minZoom,X.maxZoom,X.minPitch,X.maxPitch,X.renderWorldCopies);if(O.call(this,me,X),this._interactive=X.interactive,this._maxTileCacheSize=X.maxTileCacheSize,this._failIfMajorPerformanceCaveat=X.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=X.preserveDrawingBuffer,this._antialias=X.antialias,this._trackResize=X.trackResize,this._bearingSnap=X.bearingSnap,this._refreshExpiredTiles=X.refreshExpiredTiles,this._fadeDuration=X.fadeDuration,this._crossSourceCollisions=X.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=X.collectResourceTiming,this._renderTaskQueue=new Ri,this._controls=[],this._mapId=e.uniqueId(),this._locale=e.extend({},Yi,X.locale),this._requestManager=new e.RequestManager(X.transformRequest,X.accessToken),"string"==typeof X.container){if(this._container=e.window.document.getElementById(X.container),!this._container)throw new Error("Container '"+X.container+"' not found.")}else{if(!(X.container instanceof ou))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=X.container}if(X.maxBounds&&this.setMaxBounds(X.maxBounds),e.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),void 0===this.painter)throw new Error("Failed to initialize WebGL.");this.on("move",function(){return fe._update(!1)}),this.on("moveend",function(){return fe._update(!1)}),this.on("zoom",function(){return fe._update(!0)}),void 0!==e.window&&(e.window.addEventListener("online",this._onWindowOnline,!1),e.window.addEventListener("resize",this._onWindowResize,!1)),this.handlers=new vo(this,X),this._hash=X.hash&&new Kn("string"==typeof X.hash&&X.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:X.center,zoom:X.zoom,bearing:X.bearing,pitch:X.pitch}),X.bounds&&(this.resize(),this.fitBounds(X.bounds,e.extend({},X.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=X.localIdeographFontFamily,X.style&&this.setStyle(X.style,{localIdeographFontFamily:X.localIdeographFontFamily}),X.attributionControl&&this.addControl(new Uo({customAttribution:X.customAttribution})),this.addControl(new yl,X.logoPosition),this.on("style.load",function(){fe.transform.unmodified&&fe.jumpTo(fe.style.stylesheet)}),this.on("data",function(ke){fe._update("style"===ke.dataType),fe.fire(new e.Event(ke.dataType+"data",ke))}),this.on("dataloading",function(ke){fe.fire(new e.Event(ke.dataType+"dataloading",ke))})}O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N;var H={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return N.prototype._getMapId=function(){return this._mapId},N.prototype.addControl=function(X,fe){if(void 0===fe&&X.getDefaultPosition&&(fe=X.getDefaultPosition()),void 0===fe&&(fe="top-right"),!X||!X.onAdd)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var me=X.onAdd(this);this._controls.push(X);var _e=this._controlPositions[fe];return-1!==fe.indexOf("bottom")?_e.insertBefore(me,_e.firstChild):_e.appendChild(me),this},N.prototype.removeControl=function(X){if(!X||!X.onRemove)return this.fire(new e.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var fe=this._controls.indexOf(X);return fe>-1&&this._controls.splice(fe,1),X.onRemove(this),this},N.prototype.resize=function(X){var fe=this._containerDimensions(),me=fe[0],_e=fe[1];this._resizeCanvas(me,_e),this.transform.resize(me,_e),this.painter.resize(me,_e);var ke=!this._moving;return ke&&(this.stop(),this.fire(new e.Event("movestart",X)).fire(new e.Event("move",X))),this.fire(new e.Event("resize",X)),ke&&this.fire(new e.Event("moveend",X)),this},N.prototype.getBounds=function(){return this.transform.getBounds()},N.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},N.prototype.setMaxBounds=function(X){return this.transform.setMaxBounds(e.LngLatBounds.convert(X)),this._update()},N.prototype.setMinZoom=function(X){if((X=null==X?-2:X)>=-2&&X<=this.transform.maxZoom)return this.transform.minZoom=X,this._update(),this.getZoom()<X&&this.setZoom(X),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},N.prototype.getMinZoom=function(){return this.transform.minZoom},N.prototype.setMaxZoom=function(X){if((X=null==X?22:X)>=this.transform.minZoom)return this.transform.maxZoom=X,this._update(),this.getZoom()>X&&this.setZoom(X),this;throw new Error("maxZoom must be greater than the current minZoom")},N.prototype.getMaxZoom=function(){return this.transform.maxZoom},N.prototype.setMinPitch=function(X){if((X=null==X?0:X)<0)throw new Error("minPitch must be greater than or equal to 0");if(X>=0&&X<=this.transform.maxPitch)return this.transform.minPitch=X,this._update(),this.getPitch()<X&&this.setPitch(X),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},N.prototype.getMinPitch=function(){return this.transform.minPitch},N.prototype.setMaxPitch=function(X){if((X=null==X?60:X)>60)throw new Error("maxPitch must be less than or equal to 60");if(X>=this.transform.minPitch)return this.transform.maxPitch=X,this._update(),this.getPitch()>X&&this.setPitch(X),this;throw new Error("maxPitch must be greater than the current minPitch")},N.prototype.getMaxPitch=function(){return this.transform.maxPitch},N.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},N.prototype.setRenderWorldCopies=function(X){return this.transform.renderWorldCopies=X,this._update()},N.prototype.project=function(X){return this.transform.locationPoint(e.LngLat.convert(X))},N.prototype.unproject=function(X){return this.transform.pointLocation(e.Point.convert(X))},N.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},N.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},N.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},N.prototype._createDelegatedListener=function(X,fe,me){var _e,ke=this;if("mouseenter"===X||"mouseover"===X){var Oe=!1;return{layer:fe,listener:me,delegates:{mousemove:function(nt){var dt=ke.getLayer(fe)?ke.queryRenderedFeatures(nt.point,{layers:[fe]}):[];dt.length?Oe||(Oe=!0,me.call(ke,new si(X,ke,nt.originalEvent,{features:dt}))):Oe=!1},mouseout:function(){Oe=!1}}}}if("mouseleave"===X||"mouseout"===X){var Xe=!1;return{layer:fe,listener:me,delegates:{mousemove:function(nt){(ke.getLayer(fe)?ke.queryRenderedFeatures(nt.point,{layers:[fe]}):[]).length?Xe=!0:Xe&&(Xe=!1,me.call(ke,new si(X,ke,nt.originalEvent)))},mouseout:function(nt){Xe&&(Xe=!1,me.call(ke,new si(X,ke,nt.originalEvent)))}}}}return{layer:fe,listener:me,delegates:(_e={},_e[X]=function(nt){var dt=ke.getLayer(fe)?ke.queryRenderedFeatures(nt.point,{layers:[fe]}):[];dt.length&&(nt.features=dt,me.call(ke,nt),delete nt.features)},_e)}},N.prototype.on=function(X,fe,me){if(void 0===me)return O.prototype.on.call(this,X,fe);var _e=this._createDelegatedListener(X,fe,me);for(var ke in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[X]=this._delegatedListeners[X]||[],this._delegatedListeners[X].push(_e),_e.delegates)this.on(ke,_e.delegates[ke]);return this},N.prototype.once=function(X,fe,me){if(void 0===me)return O.prototype.once.call(this,X,fe);var _e=this._createDelegatedListener(X,fe,me);for(var ke in _e.delegates)this.once(ke,_e.delegates[ke]);return this},N.prototype.off=function(X,fe,me){var _e=this;return void 0===me?O.prototype.off.call(this,X,fe):(this._delegatedListeners&&this._delegatedListeners[X]&&function(ke){for(var Oe=ke[X],Xe=0;Xe<Oe.length;Xe++){var nt=Oe[Xe];if(nt.layer===fe&&nt.listener===me){for(var dt in nt.delegates)_e.off(dt,nt.delegates[dt]);return Oe.splice(Xe,1),_e}}}(this._delegatedListeners),this)},N.prototype.queryRenderedFeatures=function(X,fe){if(!this.style)return[];var me;if(void 0!==fe||void 0===X||X instanceof e.Point||Array.isArray(X)||(fe=X,X=void 0),fe=fe||{},(X=X||[[0,0],[this.transform.width,this.transform.height]])instanceof e.Point||"number"==typeof X[0])me=[e.Point.convert(X)];else{var _e=e.Point.convert(X[0]),ke=e.Point.convert(X[1]);me=[_e,new e.Point(ke.x,_e.y),ke,new e.Point(_e.x,ke.y),_e]}return this.style.queryRenderedFeatures(me,fe,this.transform)},N.prototype.querySourceFeatures=function(X,fe){return this.style.querySourceFeatures(X,fe)},N.prototype.setStyle=function(X,fe){return!1!==(fe=e.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},fe)).diff&&fe.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&X?(this._diffStyle(X,fe),this):(this._localIdeographFontFamily=fe.localIdeographFontFamily,this._updateStyle(X,fe))},N.prototype._getUIString=function(X){var fe=this._locale[X];if(null==fe)throw new Error("Missing UI string '"+X+"'");return fe},N.prototype._updateStyle=function(X,fe){return this.style&&(this.style.setEventedParent(null),this.style._remove()),X?(this.style=new gi(this,fe||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof X?this.style.loadURL(X):this.style.loadJSON(X),this):(delete this.style,this)},N.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new gi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},N.prototype._diffStyle=function(X,fe){var me=this;if("string"==typeof X){var _e=this._requestManager.normalizeStyleURL(X),ke=this._requestManager.transformRequest(_e,e.ResourceType.Style);e.getJSON(ke,function(Oe,Xe){Oe?me.fire(new e.ErrorEvent(Oe)):Xe&&me._updateDiff(Xe,fe)})}else"object"==typeof X&&this._updateDiff(X,fe)},N.prototype._updateDiff=function(X,fe){try{this.style.setState(X)&&this._update(!0)}catch(me){e.warnOnce("Unable to perform style diff: "+(me.message||me.error||me)+".  Rebuilding the style from scratch."),this._updateStyle(X,fe)}},N.prototype.getStyle=function(){if(this.style)return this.style.serialize()},N.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():e.warnOnce("There is no style added to the map.")},N.prototype.addSource=function(X,fe){return this._lazyInitEmptyStyle(),this.style.addSource(X,fe),this._update(!0)},N.prototype.isSourceLoaded=function(X){var fe=this.style&&this.style.sourceCaches[X];if(void 0!==fe)return fe.loaded();this.fire(new e.ErrorEvent(new Error("There is no source with ID '"+X+"'")))},N.prototype.areTilesLoaded=function(){var X=this.style&&this.style.sourceCaches;for(var fe in X){var me=X[fe]._tiles;for(var _e in me){var ke=me[_e];if("loaded"!==ke.state&&"errored"!==ke.state)return!1}}return!0},N.prototype.addSourceType=function(X,fe,me){return this._lazyInitEmptyStyle(),this.style.addSourceType(X,fe,me)},N.prototype.removeSource=function(X){return this.style.removeSource(X),this._update(!0)},N.prototype.getSource=function(X){return this.style.getSource(X)},N.prototype.addImage=function(X,fe,me){void 0===me&&(me={});var _e=me.pixelRatio;void 0===_e&&(_e=1);var ke=me.sdf;void 0===ke&&(ke=!1);var Oe=me.stretchX,Xe=me.stretchY,nt=me.content;if(this._lazyInitEmptyStyle(),fe instanceof xu||ia&&fe instanceof ia){var dt=e.browser.getImageData(fe);this.style.addImage(X,{data:new e.RGBAImage({width:dt.width,height:dt.height},dt.data),pixelRatio:_e,stretchX:Oe,stretchY:Xe,content:nt,sdf:ke,version:0})}else{if(void 0===fe.width||void 0===fe.height)return this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var qt=fe;this.style.addImage(X,{data:new e.RGBAImage({width:fe.width,height:fe.height},new Uint8Array(fe.data)),pixelRatio:_e,stretchX:Oe,stretchY:Xe,content:nt,sdf:ke,version:0,userImage:qt}),qt.onAdd&&qt.onAdd(this,X)}},N.prototype.updateImage=function(X,fe){var me=this.style.getImage(X);if(!me)return this.fire(new e.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var _e=fe instanceof xu||ia&&fe instanceof ia?e.browser.getImageData(fe):fe,ke=_e.width,Oe=_e.height,Xe=_e.data;return void 0===ke||void 0===Oe?this.fire(new e.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):ke!==me.data.width||Oe!==me.data.height?this.fire(new e.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(me.data.replace(Xe,!(fe instanceof xu||ia&&fe instanceof ia)),void this.style.updateImage(X,me))},N.prototype.hasImage=function(X){return X?!!this.style.getImage(X):(this.fire(new e.ErrorEvent(new Error("Missing required image id"))),!1)},N.prototype.removeImage=function(X){this.style.removeImage(X)},N.prototype.loadImage=function(X,fe){e.getImage(this._requestManager.transformRequest(X,e.ResourceType.Image),fe)},N.prototype.listImages=function(){return this.style.listImages()},N.prototype.addLayer=function(X,fe){return this._lazyInitEmptyStyle(),this.style.addLayer(X,fe),this._update(!0)},N.prototype.moveLayer=function(X,fe){return this.style.moveLayer(X,fe),this._update(!0)},N.prototype.removeLayer=function(X){return this.style.removeLayer(X),this._update(!0)},N.prototype.getLayer=function(X){return this.style.getLayer(X)},N.prototype.setLayerZoomRange=function(X,fe,me){return this.style.setLayerZoomRange(X,fe,me),this._update(!0)},N.prototype.setFilter=function(X,fe,me){return void 0===me&&(me={}),this.style.setFilter(X,fe,me),this._update(!0)},N.prototype.getFilter=function(X){return this.style.getFilter(X)},N.prototype.setPaintProperty=function(X,fe,me,_e){return void 0===_e&&(_e={}),this.style.setPaintProperty(X,fe,me,_e),this._update(!0)},N.prototype.getPaintProperty=function(X,fe){return this.style.getPaintProperty(X,fe)},N.prototype.setLayoutProperty=function(X,fe,me,_e){return void 0===_e&&(_e={}),this.style.setLayoutProperty(X,fe,me,_e),this._update(!0)},N.prototype.getLayoutProperty=function(X,fe){return this.style.getLayoutProperty(X,fe)},N.prototype.setLight=function(X,fe){return void 0===fe&&(fe={}),this._lazyInitEmptyStyle(),this.style.setLight(X,fe),this._update(!0)},N.prototype.getLight=function(){return this.style.getLight()},N.prototype.setFeatureState=function(X,fe){return this.style.setFeatureState(X,fe),this._update()},N.prototype.removeFeatureState=function(X,fe){return this.style.removeFeatureState(X,fe),this._update()},N.prototype.getFeatureState=function(X){return this.style.getFeatureState(X)},N.prototype.getContainer=function(){return this._container},N.prototype.getCanvasContainer=function(){return this._canvasContainer},N.prototype.getCanvas=function(){return this._canvas},N.prototype._containerDimensions=function(){var X=0,fe=0;return this._container&&(X=this._container.clientWidth||400,fe=this._container.clientHeight||300),[X,fe]},N.prototype._detectMissingCSS=function(){"rgb(250, 128, 114)"!==e.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")&&e.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},N.prototype._setupContainer=function(){var X=this._container;X.classList.add("mapboxgl-map"),(this._missingCSSCanary=a.create("div","mapboxgl-canary",X)).style.visibility="hidden",this._detectMissingCSS();var fe=this._canvasContainer=a.create("div","mapboxgl-canvas-container",X);this._interactive&&fe.classList.add("mapboxgl-interactive"),this._canvas=a.create("canvas","mapboxgl-canvas",fe),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var me=this._containerDimensions();this._resizeCanvas(me[0],me[1]);var _e=this._controlContainer=a.create("div","mapboxgl-control-container",X),ke=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(Oe){ke[Oe]=a.create("div","mapboxgl-ctrl-"+Oe,_e)})},N.prototype._resizeCanvas=function(X,fe){var me=e.browser.devicePixelRatio||1;this._canvas.width=me*X,this._canvas.height=me*fe,this._canvas.style.width=X+"px",this._canvas.style.height=fe+"px"},N.prototype._setupPainter=function(){var X=e.extend({},o.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),fe=this._canvas.getContext("webgl",X)||this._canvas.getContext("experimental-webgl",X);fe?(this.painter=new ka(fe,this.transform),e.webpSupported.testSupport(fe)):this.fire(new e.ErrorEvent(new Error("Failed to initialize WebGL")))},N.prototype._contextLost=function(X){X.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new e.Event("webglcontextlost",{originalEvent:X}))},N.prototype._contextRestored=function(X){this._setupPainter(),this.resize(),this._update(),this.fire(new e.Event("webglcontextrestored",{originalEvent:X}))},N.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},N.prototype._update=function(X){return this.style?(this._styleDirty=this._styleDirty||X,this._sourcesDirty=!0,this.triggerRepaint(),this):this},N.prototype._requestRenderFrame=function(X){return this._update(),this._renderTaskQueue.add(X)},N.prototype._cancelRenderFrame=function(X){this._renderTaskQueue.remove(X)},N.prototype._render=function(X){var fe,me=this,_e=0,ke=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(fe=ke.createQueryEXT(),ke.beginQueryEXT(ke.TIME_ELAPSED_EXT,fe),_e=e.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(X),!this._removed){var Oe=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var Xe=this.transform.zoom,nt=e.browser.now();this.style.zoomHistory.update(Xe,nt);var dt=new e.EvaluationParameters(Xe,{now:nt,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),Dt=dt.crossFadingFactor();1===Dt&&Dt===this._crossFadingFactor||(Oe=!0,this._crossFadingFactor=Dt),this.style.update(dt)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new e.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new e.Event("load"))),this.style&&(this.style.hasTransitions()||Oe)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var Ft=e.browser.now()-_e;ke.endQueryEXT(ke.TIME_ELAPSED_EXT,fe),setTimeout(function(){var Pt=ke.getQueryObjectEXT(fe,ke.QUERY_RESULT_EXT)/1e6;ke.deleteQueryEXT(fe),me.fire(new e.Event("gpu-timing-frame",{cpuTime:Ft,gpuTime:Pt}))},50)}if(this.listens("gpu-timing-layer")){var It=this.painter.collectGpuTimers();setTimeout(function(){var Pt=me.painter.queryGpuTimers(It);me.fire(new e.Event("gpu-timing-layer",{layerTimes:Pt}))},50)}return this._sourcesDirty||this._styleDirty||this._placementDirty||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&(this._fullyLoaded||(this._fullyLoaded=!0),this.fire(new e.Event("idle"))),this}},N.prototype.remove=function(){this._hash&&this._hash.remove();for(var X=0,fe=this._controls;X<fe.length;X+=1)fe[X].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),void 0!==e.window&&(e.window.removeEventListener("resize",this._onWindowResize,!1),e.window.removeEventListener("online",this._onWindowOnline,!1));var me=this.painter.context.gl.getExtension("WEBGL_lose_context");me&&me.loseContext(),fc(this._canvasContainer),fc(this._controlContainer),fc(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new e.Event("remove"))},N.prototype.triggerRepaint=function(){var X=this;this.style&&!this._frame&&(this._frame=e.browser.frame(function(fe){X._frame=null,X._render(fe)}))},N.prototype._onWindowOnline=function(){this._update()},N.prototype._onWindowResize=function(X){this._trackResize&&this.resize({originalEvent:X})._update()},H.showTileBoundaries.get=function(){return!!this._showTileBoundaries},H.showTileBoundaries.set=function(X){this._showTileBoundaries!==X&&(this._showTileBoundaries=X,this._update())},H.showPadding.get=function(){return!!this._showPadding},H.showPadding.set=function(X){this._showPadding!==X&&(this._showPadding=X,this._update())},H.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},H.showCollisionBoxes.set=function(X){this._showCollisionBoxes!==X&&(this._showCollisionBoxes=X,X?this.style._generateCollisionBoxes():this._update())},H.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},H.showOverdrawInspector.set=function(X){this._showOverdrawInspector!==X&&(this._showOverdrawInspector=X,this._update())},H.repaint.get=function(){return!!this._repaint},H.repaint.set=function(X){this._repaint!==X&&(this._repaint=X,this.triggerRepaint())},H.vertices.get=function(){return!!this._vertices},H.vertices.set=function(X){this._vertices=X,this._update()},N.prototype._setCacheLimits=function(X,fe){e.setCacheLimits(X,fe)},H.version.get=function(){return e.version},Object.defineProperties(N.prototype,H),N}(_s);function fc(O){O.parentNode&&O.parentNode.removeChild(O)}var bu={showCompass:!0,showZoom:!0,visualizePitch:!1},Fa=function(O){var N=this;this.options=e.extend({},bu,O),this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(H){return H.preventDefault()}),this.options.showZoom&&(e.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",function(H){return N._map.zoomIn({},{originalEvent:H})}),a.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",function(H){return N._map.zoomOut({},{originalEvent:H})}),a.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(e.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",function(H){N.options.visualizePitch?N._map.resetNorthPitch({},{originalEvent:H}):N._map.resetNorth({},{originalEvent:H})}),this._compassIcon=a.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};Fa.prototype._updateZoomButtons=function(){var O=this._map.getZoom();this._zoomInButton.disabled=O===this._map.getMaxZoom(),this._zoomOutButton.disabled=O===this._map.getMinZoom()},Fa.prototype._rotateCompassArrow=function(){var O=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=O},Fa.prototype.onAdd=function(O){return this._map=O,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Za(this._map,this._compass,this.options.visualizePitch)),this._container},Fa.prototype.onRemove=function(){a.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},Fa.prototype._createButton=function(O,N){var H=a.create("button",O,this._container);return H.type="button",H.addEventListener("click",N),H},Fa.prototype._setButtonTitle=function(O,N){var H=this._map._getUIString("NavigationControl."+N);O.title=H,O.setAttribute("aria-label",H)};var Za=function(O,N,H){void 0===H&&(H=!1),this._clickTolerance=10,this.element=N,this.mouseRotate=new da({clickTolerance:O.dragRotate._mouseRotate._clickTolerance}),this.map=O,H&&(this.mousePitch=new Wi({clickTolerance:O.dragRotate._mousePitch._clickTolerance})),e.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),a.addEventListener(N,"mousedown",this.mousedown),a.addEventListener(N,"touchstart",this.touchstart,{passive:!1}),a.addEventListener(N,"touchmove",this.touchmove),a.addEventListener(N,"touchend",this.touchend),a.addEventListener(N,"touchcancel",this.reset)};function Zl(O,N,H){if(O=new e.LngLat(O.lng,O.lat),N){var X=new e.LngLat(O.lng-360,O.lat),fe=new e.LngLat(O.lng+360,O.lat),me=H.locationPoint(O).distSqr(N);H.locationPoint(X).distSqr(N)<me?O=X:H.locationPoint(fe).distSqr(N)<me&&(O=fe)}for(;Math.abs(O.lng-H.center.lng)>180;){var _e=H.locationPoint(O);if(_e.x>=0&&_e.y>=0&&_e.x<=H.width&&_e.y<=H.height)break;O.lng>H.center.lng?O.lng-=360:O.lng+=360}return O}Za.prototype.down=function(O,N){this.mouseRotate.mousedown(O,N),this.mousePitch&&this.mousePitch.mousedown(O,N),a.disableDrag()},Za.prototype.move=function(O,N){var H=this.map,X=this.mouseRotate.mousemoveWindow(O,N);if(X&&X.bearingDelta&&H.setBearing(H.getBearing()+X.bearingDelta),this.mousePitch){var fe=this.mousePitch.mousemoveWindow(O,N);fe&&fe.pitchDelta&&H.setPitch(H.getPitch()+fe.pitchDelta)}},Za.prototype.off=function(){var O=this.element;a.removeEventListener(O,"mousedown",this.mousedown),a.removeEventListener(O,"touchstart",this.touchstart,{passive:!1}),a.removeEventListener(O,"touchmove",this.touchmove),a.removeEventListener(O,"touchend",this.touchend),a.removeEventListener(O,"touchcancel",this.reset),this.offTemp()},Za.prototype.offTemp=function(){a.enableDrag(),a.removeEventListener(e.window,"mousemove",this.mousemove),a.removeEventListener(e.window,"mouseup",this.mouseup)},Za.prototype.mousedown=function(O){this.down(e.extend({},O,{ctrlKey:!0,preventDefault:function(){return O.preventDefault()}}),a.mousePos(this.element,O)),a.addEventListener(e.window,"mousemove",this.mousemove),a.addEventListener(e.window,"mouseup",this.mouseup)},Za.prototype.mousemove=function(O){this.move(O,a.mousePos(this.element,O))},Za.prototype.mouseup=function(O){this.mouseRotate.mouseupWindow(O),this.mousePitch&&this.mousePitch.mouseupWindow(O),this.offTemp()},Za.prototype.touchstart=function(O){1!==O.targetTouches.length?this.reset():(this._startPos=this._lastPos=a.touchPos(this.element,O.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return O.preventDefault()}},this._startPos))},Za.prototype.touchmove=function(O){1!==O.targetTouches.length?this.reset():(this._lastPos=a.touchPos(this.element,O.targetTouches)[0],this.move({preventDefault:function(){return O.preventDefault()}},this._lastPos))},Za.prototype.touchend=function(O){0===O.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Za.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var ei={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function ea(O,N,H){var X=O.classList;for(var fe in ei)X.remove("mapboxgl-"+H+"-anchor-"+fe);X.add("mapboxgl-"+H+"-anchor-"+N)}var Ys,Po=function(O){function N(H,X){var fe=this;if(O.call(this),(H instanceof e.window.HTMLElement||X)&&(H=e.extend({element:H},X)),e.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=H&&H.anchor||"center",this._color=H&&H.color||"#3FB1CE",this._draggable=H&&H.draggable||!1,this._state="inactive",this._rotation=H&&H.rotation||0,this._rotationAlignment=H&&H.rotationAlignment||"auto",this._pitchAlignment=H&&H.pitchAlignment&&"auto"!==H.pitchAlignment?H.pitchAlignment:this._rotationAlignment,H&&H.element)this._element=H.element,this._offset=e.Point.convert(H&&H.offset||[0,0]);else{this._defaultMarker=!0,this._element=a.create("div"),this._element.setAttribute("aria-label","Map marker");var me=a.createNS("http://www.w3.org/2000/svg","svg");me.setAttributeNS(null,"display","block"),me.setAttributeNS(null,"height","41px"),me.setAttributeNS(null,"width","27px"),me.setAttributeNS(null,"viewBox","0 0 27 41");var _e=a.createNS("http://www.w3.org/2000/svg","g");_e.setAttributeNS(null,"stroke","none"),_e.setAttributeNS(null,"stroke-width","1"),_e.setAttributeNS(null,"fill","none"),_e.setAttributeNS(null,"fill-rule","evenodd");var ke=a.createNS("http://www.w3.org/2000/svg","g");ke.setAttributeNS(null,"fill-rule","nonzero");var Oe=a.createNS("http://www.w3.org/2000/svg","g");Oe.setAttributeNS(null,"transform","translate(3.0, 29.0)"),Oe.setAttributeNS(null,"fill","#000000");for(var Xe=0,nt=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];Xe<nt.length;Xe+=1){var dt=nt[Xe],Dt=a.createNS("http://www.w3.org/2000/svg","ellipse");Dt.setAttributeNS(null,"opacity","0.04"),Dt.setAttributeNS(null,"cx","10.5"),Dt.setAttributeNS(null,"cy","5.80029008"),Dt.setAttributeNS(null,"rx",dt.rx),Dt.setAttributeNS(null,"ry",dt.ry),Oe.appendChild(Dt)}var Ft=a.createNS("http://www.w3.org/2000/svg","g");Ft.setAttributeNS(null,"fill",this._color);var It=a.createNS("http://www.w3.org/2000/svg","path");It.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Ft.appendChild(It);var Pt=a.createNS("http://www.w3.org/2000/svg","g");Pt.setAttributeNS(null,"opacity","0.25"),Pt.setAttributeNS(null,"fill","#000000");var Et=a.createNS("http://www.w3.org/2000/svg","path");Et.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),Pt.appendChild(Et);var Zt=a.createNS("http://www.w3.org/2000/svg","g");Zt.setAttributeNS(null,"transform","translate(6.0, 7.0)"),Zt.setAttributeNS(null,"fill","#FFFFFF");var qt=a.createNS("http://www.w3.org/2000/svg","g");qt.setAttributeNS(null,"transform","translate(8.0, 8.0)");var $t=a.createNS("http://www.w3.org/2000/svg","circle");$t.setAttributeNS(null,"fill","#000000"),$t.setAttributeNS(null,"opacity","0.25"),$t.setAttributeNS(null,"cx","5.5"),$t.setAttributeNS(null,"cy","5.5"),$t.setAttributeNS(null,"r","5.4999962");var yn=a.createNS("http://www.w3.org/2000/svg","circle");yn.setAttributeNS(null,"fill","#FFFFFF"),yn.setAttributeNS(null,"cx","5.5"),yn.setAttributeNS(null,"cy","5.5"),yn.setAttributeNS(null,"r","5.4999962"),qt.appendChild($t),qt.appendChild(yn),ke.appendChild(Oe),ke.appendChild(Ft),ke.appendChild(Pt),ke.appendChild(Zt),ke.appendChild(qt),me.appendChild(ke),this._element.appendChild(me),this._offset=e.Point.convert(H&&H.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",function(kn){kn.preventDefault()}),this._element.addEventListener("mousedown",function(kn){kn.preventDefault()}),this._element.addEventListener("focus",function(){var kn=fe._map.getContainer();kn.scrollTop=0,kn.scrollLeft=0}),ea(this._element,this._anchor,"marker"),this._popup=null}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.addTo=function(H){return this.remove(),this._map=H,H.getCanvasContainer().appendChild(this._element),H.on("move",this._update),H.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},N.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),a.remove(this._element),this._popup&&this._popup.remove(),this},N.prototype.getLngLat=function(){return this._lngLat},N.prototype.setLngLat=function(H){return this._lngLat=e.LngLat.convert(H),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},N.prototype.getElement=function(){return this._element},N.prototype.setPopup=function(H){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),H){if(!("offset"in H.options)){var X=Math.sqrt(Math.pow(13.5,2)/2);H.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[X,-1*(24.6+X)],"bottom-right":[-X,-1*(24.6+X)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=H,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},N.prototype._onKeyPress=function(H){var X=H.code,fe=H.charCode||H.keyCode;"Space"!==X&&"Enter"!==X&&32!==fe&&13!==fe||this.togglePopup()},N.prototype._onMapClick=function(H){var X=H.originalEvent.target,fe=this._element;this._popup&&(X===fe||fe.contains(X))&&this.togglePopup()},N.prototype.getPopup=function(){return this._popup},N.prototype.togglePopup=function(){var H=this._popup;return H?(H.isOpen()?H.remove():H.addTo(this._map),this):this},N.prototype._update=function(H){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=Zl(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var X="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?X="rotateZ("+this._rotation+"deg)":"map"===this._rotationAlignment&&(X="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var fe="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?fe="rotateX(0deg)":"map"===this._pitchAlignment&&(fe="rotateX("+this._map.getPitch()+"deg)"),H&&"moveend"!==H.type||(this._pos=this._pos.round()),a.setTransform(this._element,ei[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+fe+" "+X)}},N.prototype.getOffset=function(){return this._offset},N.prototype.setOffset=function(H){return this._offset=e.Point.convert(H),this._update(),this},N.prototype._onMove=function(H){this._pos=H.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new e.Event("dragstart"))),this.fire(new e.Event("drag"))},N.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new e.Event("dragend")),this._state="inactive"},N.prototype._addDragHandler=function(H){this._element.contains(H.originalEvent.target)&&(H.preventDefault(),this._positionDelta=H.point.sub(this._pos).add(this._offset),this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},N.prototype.setDraggable=function(H){return this._draggable=!!H,this._map&&(H?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},N.prototype.isDraggable=function(){return this._draggable},N.prototype.setRotation=function(H){return this._rotation=H||0,this._update(),this},N.prototype.getRotation=function(){return this._rotation},N.prototype.setRotationAlignment=function(H){return this._rotationAlignment=H||"auto",this._update(),this},N.prototype.getRotationAlignment=function(){return this._rotationAlignment},N.prototype.setPitchAlignment=function(H){return this._pitchAlignment=H&&"auto"!==H?H:this._rotationAlignment,this._update(),this},N.prototype.getPitchAlignment=function(){return this._pitchAlignment},N}(e.Evented),Xl={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Ll=0,hs=!1,ku=function(O){function N(H){O.call(this),this.options=e.extend({},Xl,H),e.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.onAdd=function(H){var X;return this._map=H,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),X=this._setupUI,void 0!==Ys?X(Ys):void 0!==e.window.navigator.permissions?e.window.navigator.permissions.query({name:"geolocation"}).then(function(fe){X(Ys="denied"!==fe.state)}):X(Ys=!!e.window.navigator.geolocation),this._container},N.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),a.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ll=0,hs=!1},N.prototype._isOutOfMapMaxBounds=function(H){var X=this._map.getMaxBounds(),fe=H.coords;return X&&(fe.longitude<X.getWest()||fe.longitude>X.getEast()||fe.latitude<X.getSouth()||fe.latitude>X.getNorth())},N.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},N.prototype._onSuccess=function(H){if(this._map){if(this._isOutOfMapMaxBounds(H))return this._setErrorState(),this.fire(new e.Event("outofmaxbounds",H)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=H,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(H),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(H),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("geolocate",H)),this._finish()}},N.prototype._updateCamera=function(H){var X=new e.LngLat(H.coords.longitude,H.coords.latitude),fe=H.coords.accuracy,me=this._map.getBearing(),_e=e.extend({bearing:me},this.options.fitBoundsOptions);this._map.fitBounds(X.toBounds(fe),_e,{geolocateSource:!0})},N.prototype._updateMarker=function(H){if(H){var X=new e.LngLat(H.coords.longitude,H.coords.latitude);this._accuracyCircleMarker.setLngLat(X).addTo(this._map),this._userLocationDotMarker.setLngLat(X).addTo(this._map),this._accuracy=H.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},N.prototype._updateCircleRadius=function(){var H=this._map._container.clientHeight/2,X=this._map.unproject([0,H]),fe=this._map.unproject([1,H]),me=X.distanceTo(fe),_e=Math.ceil(2*this._accuracy/me);this._circleElement.style.width=_e+"px",this._circleElement.style.height=_e+"px"},N.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},N.prototype._onError=function(H){if(this._map){if(this.options.trackUserLocation)if(1===H.code){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var X=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=X,this._geolocateButton.setAttribute("aria-label",X),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===H.code&&hs)return;this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new e.Event("error",H)),this._finish()}},N.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},N.prototype._setupUI=function(H){var X=this;if(this._container.addEventListener("contextmenu",function(_e){return _e.preventDefault()}),this._geolocateButton=a.create("button","mapboxgl-ctrl-geolocate",this._container),a.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",!1===H){e.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var fe=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=fe,this._geolocateButton.setAttribute("aria-label",fe)}else{var me=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=me,this._geolocateButton.setAttribute("aria-label",me)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new Po(this._dotElement),this._circleElement=a.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Po({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",function(_e){_e.geolocateSource||"ACTIVE_LOCK"!==X._watchState||_e.originalEvent&&"resize"===_e.originalEvent.type||(X._watchState="BACKGROUND",X._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),X._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),X.fire(new e.Event("trackuserlocationend")))})},N.prototype.trigger=function(){if(!this._setup)return e.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new e.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ll--,hs=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new e.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new e.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){var H;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Ll>1?(H={maximumAge:6e5,timeout:0},hs=!0):(H=this.options.positionOptions,hs=!1),this._geolocationWatchID=e.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,H)}}else e.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},N.prototype._clearWatch=function(){e.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},N}(e.Evented),Vu={maxWidth:100,unit:"metric"},su=function(O){this.options=e.extend({},Vu,O),e.bindAll(["_onMove","setUnit"],this)};function hc(O,N,H){var X=H&&H.maxWidth||100,fe=O._container.clientHeight/2,me=O.unproject([0,fe]),_e=O.unproject([X,fe]),ke=me.distanceTo(_e);if(H&&"imperial"===H.unit){var Oe=3.2808*ke;Oe>5280?Nl(N,X,Oe/5280,O._getUIString("ScaleControl.Miles")):Nl(N,X,Oe,O._getUIString("ScaleControl.Feet"))}else H&&"nautical"===H.unit?Nl(N,X,ke/1852,O._getUIString("ScaleControl.NauticalMiles")):ke>=1e3?Nl(N,X,ke/1e3,O._getUIString("ScaleControl.Kilometers")):Nl(N,X,ke,O._getUIString("ScaleControl.Meters"))}function Nl(O,N,H,X){var fe,me,_e,Xe,nt,ke=(fe=H,(me=Math.pow(10,(""+Math.floor(fe)).length-1))*(_e=(_e=fe/me)>=10?10:_e>=5?5:_e>=3?3:_e>=2?2:_e>=1?1:(Xe=_e,nt=Math.pow(10,Math.ceil(-Math.log(Xe)/Math.LN10)),Math.round(Xe*nt)/nt)));O.style.width=N*(ke/H)+"px",O.innerHTML=ke+"&nbsp;"+X}su.prototype.getDefaultPosition=function(){return"bottom-left"},su.prototype._onMove=function(){hc(this._map,this._container,this.options)},su.prototype.onAdd=function(O){return this._map=O,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",O.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},su.prototype.onRemove=function(){a.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},su.prototype.setUnit=function(O){this.options.unit=O,hc(this._map,this._container,this.options)};var $o=function(O){this._fullscreen=!1,O&&O.container&&(O.container instanceof e.window.HTMLElement?this._container=O.container:e.warnOnce("Full screen control 'container' must be a DOM element.")),e.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in e.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in e.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in e.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in e.window.document&&(this._fullscreenchange="MSFullscreenChange")};$o.prototype.onAdd=function(O){return this._map=O,this._container||(this._container=this._map.getContainer()),this._controlContainer=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",e.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},$o.prototype.onRemove=function(){a.remove(this._controlContainer),this._map=null,e.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},$o.prototype._checkFullscreenSupport=function(){return!!(e.window.document.fullscreenEnabled||e.window.document.mozFullScreenEnabled||e.window.document.msFullscreenEnabled||e.window.document.webkitFullscreenEnabled)},$o.prototype._setupUI=function(){var O=this._fullscreenButton=a.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);a.create("span","mapboxgl-ctrl-icon",O).setAttribute("aria-hidden",!0),O.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),e.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},$o.prototype._updateTitle=function(){var O=this._getTitle();this._fullscreenButton.setAttribute("aria-label",O),this._fullscreenButton.title=O},$o.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},$o.prototype._isFullscreen=function(){return this._fullscreen},$o.prototype._changeIcon=function(){(e.window.document.fullscreenElement||e.window.document.mozFullScreenElement||e.window.document.webkitFullscreenElement||e.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},$o.prototype._onClickFullscreen=function(){this._isFullscreen()?e.window.document.exitFullscreen?e.window.document.exitFullscreen():e.window.document.mozCancelFullScreen?e.window.document.mozCancelFullScreen():e.window.document.msExitFullscreen?e.window.document.msExitFullscreen():e.window.document.webkitCancelFullScreen&&e.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Cs={closeButton:!0,closeOnClick:!0,className:"",maxWidth:"240px"},Il=function(O){function N(H){O.call(this),this.options=e.extend(Object.create(Cs),H),e.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return O&&(N.__proto__=O),(N.prototype=Object.create(O&&O.prototype)).constructor=N,N.prototype.addTo=function(H){return this._map&&this.remove(),this._map=H,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new e.Event("open")),this},N.prototype.isOpen=function(){return!!this._map},N.prototype.remove=function(){return this._content&&a.remove(this._content),this._container&&(a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new e.Event("close")),this},N.prototype.getLngLat=function(){return this._lngLat},N.prototype.setLngLat=function(H){return this._lngLat=e.LngLat.convert(H),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},N.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},N.prototype.getElement=function(){return this._container},N.prototype.setText=function(H){return this.setDOMContent(e.window.document.createTextNode(H))},N.prototype.setHTML=function(H){var X,fe=e.window.document.createDocumentFragment(),me=e.window.document.createElement("body");for(me.innerHTML=H;X=me.firstChild;)fe.appendChild(X);return this.setDOMContent(fe)},N.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},N.prototype.setMaxWidth=function(H){return this.options.maxWidth=H,this._update(),this},N.prototype.setDOMContent=function(H){return this._createContent(),this._content.appendChild(H),this._update(),this},N.prototype.addClassName=function(H){this._container&&this._container.classList.add(H)},N.prototype.removeClassName=function(H){this._container&&this._container.classList.remove(H)},N.prototype.toggleClassName=function(H){if(this._container)return this._container.classList.toggle(H)},N.prototype._createContent=function(){this._content&&a.remove(this._content),this._content=a.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=a.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},N.prototype._onMouseUp=function(H){this._update(H.point)},N.prototype._onMouseMove=function(H){this._update(H.point)},N.prototype._onDrag=function(H){this._update(H.point)},N.prototype._update=function(H){var X=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=a.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=a.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach(function(Dt){return X._container.classList.add(Dt)}),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Zl(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||H)){var me=this._pos=this._trackPointer&&H?H:this._map.project(this._lngLat),_e=this.options.anchor,ke=function Dt(Ft){if(Ft){if("number"==typeof Ft){var It=Math.round(Math.sqrt(.5*Math.pow(Ft,2)));return{center:new e.Point(0,0),top:new e.Point(0,Ft),"top-left":new e.Point(It,It),"top-right":new e.Point(-It,It),bottom:new e.Point(0,-Ft),"bottom-left":new e.Point(It,-It),"bottom-right":new e.Point(-It,-It),left:new e.Point(Ft,0),right:new e.Point(-Ft,0)}}if(Ft instanceof e.Point||Array.isArray(Ft)){var Pt=e.Point.convert(Ft);return{center:Pt,top:Pt,"top-left":Pt,"top-right":Pt,bottom:Pt,"bottom-left":Pt,"bottom-right":Pt,left:Pt,right:Pt}}return{center:e.Point.convert(Ft.center||[0,0]),top:e.Point.convert(Ft.top||[0,0]),"top-left":e.Point.convert(Ft["top-left"]||[0,0]),"top-right":e.Point.convert(Ft["top-right"]||[0,0]),bottom:e.Point.convert(Ft.bottom||[0,0]),"bottom-left":e.Point.convert(Ft["bottom-left"]||[0,0]),"bottom-right":e.Point.convert(Ft["bottom-right"]||[0,0]),left:e.Point.convert(Ft.left||[0,0]),right:e.Point.convert(Ft.right||[0,0])}}return Dt(new e.Point(0,0))}(this.options.offset);if(!_e){var Oe,Xe=this._container.offsetWidth,nt=this._container.offsetHeight;Oe=me.y+ke.bottom.y<nt?["top"]:me.y>this._map.transform.height-nt?["bottom"]:[],me.x<Xe/2?Oe.push("left"):me.x>this._map.transform.width-Xe/2&&Oe.push("right"),_e=0===Oe.length?"bottom":Oe.join("-")}var dt=me.add(ke[_e]).round();a.setTransform(this._container,ei[_e]+" translate("+dt.x+"px,"+dt.y+"px)"),ea(this._container,_e,"popup")}},N.prototype._onClose=function(){this.remove()},N}(e.Evented),pe={version:e.version,supported:o,setRTLTextPlugin:e.setRTLTextPlugin,getRTLTextPluginStatus:e.getRTLTextPluginStatus,Map:vl,NavigationControl:Fa,GeolocateControl:ku,AttributionControl:Uo,ScaleControl:su,FullscreenControl:$o,Popup:Il,Marker:Po,Style:gi,LngLat:e.LngLat,LngLatBounds:e.LngLatBounds,Point:e.Point,MercatorCoordinate:e.MercatorCoordinate,Evented:e.Evented,config:e.config,prewarm:function(){rt().acquire(Rt)},clearPrewarmedResources:function(){var O=Vt;O&&(O.isPreloaded()&&1===O.numActive()?(O.release(Rt),Vt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return e.config.ACCESS_TOKEN},set accessToken(O){e.config.ACCESS_TOKEN=O},get baseApiUrl(){return e.config.API_URL},set baseApiUrl(O){e.config.API_URL=O},get workerCount(){return yt.workerCount},set workerCount(O){yt.workerCount=O},get maxParallelImageRequests(){return e.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(O){e.config.MAX_PARALLEL_IMAGE_REQUESTS=O},clearStorage:function(O){e.clearTileCache(O)},workerUrl:""};return pe}),T},"object"==typeof ae&&void 0!==oe?oe.exports=x():(m=m||self).mapboxgl=x()},{}],240:[function(_,oe,ae){"use strict";oe.exports=Math.log2||function(m){return Math.log(m)*Math.LOG2E}},{}],241:[function(_,oe,ae){"use strict";oe.exports=function(x,T){T||(T=x,x=window);var b=0,e=0,o=0,a={shift:!1,alt:!1,control:!1,meta:!1},l=!1;function i(w){var y=!1;return"altKey"in w&&(y=y||w.altKey!==a.alt,a.alt=!!w.altKey),"shiftKey"in w&&(y=y||w.shiftKey!==a.shift,a.shift=!!w.shiftKey),"ctrlKey"in w&&(y=y||w.ctrlKey!==a.control,a.control=!!w.ctrlKey),"metaKey"in w&&(y=y||w.metaKey!==a.meta,a.meta=!!w.metaKey),y}function d(w,y){var M=m.x(y),A=m.y(y);"buttons"in y&&(w=0|y.buttons),(w!==b||M!==e||A!==o||i(y))&&(b=0|w,e=M||0,o=A||0,T&&T(b,e,o,a))}function u(w){d(0,w)}function s(){(b||e||o||a.shift||a.alt||a.meta||a.control)&&(e=o=0,b=0,a.shift=a.alt=a.control=a.meta=!1,T&&T(0,0,0,a))}function c(w){i(w)&&T&&T(b,e,o,a)}function h(w){0===m.buttons(w)?d(0,w):d(b,w)}function p(w){d(b|m.buttons(w),w)}function v(w){d(b&~m.buttons(w),w)}function g(){l||(l=!0,x.addEventListener("mousemove",h),x.addEventListener("mousedown",p),x.addEventListener("mouseup",v),x.addEventListener("mouseleave",u),x.addEventListener("mouseenter",u),x.addEventListener("mouseout",u),x.addEventListener("mouseover",u),x.addEventListener("blur",s),x.addEventListener("keyup",c),x.addEventListener("keydown",c),x.addEventListener("keypress",c),x!==window&&(window.addEventListener("blur",s),window.addEventListener("keyup",c),window.addEventListener("keydown",c),window.addEventListener("keypress",c)))}g();var f={element:x};return Object.defineProperties(f,{enabled:{get:function(){return l},set:function(w){w?g():!l||(l=!1,x.removeEventListener("mousemove",h),x.removeEventListener("mousedown",p),x.removeEventListener("mouseup",v),x.removeEventListener("mouseleave",u),x.removeEventListener("mouseenter",u),x.removeEventListener("mouseout",u),x.removeEventListener("mouseover",u),x.removeEventListener("blur",s),x.removeEventListener("keyup",c),x.removeEventListener("keydown",c),x.removeEventListener("keypress",c),x!==window&&(window.removeEventListener("blur",s),window.removeEventListener("keyup",c),window.removeEventListener("keydown",c),window.removeEventListener("keypress",c)))},enumerable:!0},buttons:{get:function(){return b},enumerable:!0},x:{get:function(){return e},enumerable:!0},y:{get:function(){return o},enumerable:!0},mods:{get:function(){return a},enumerable:!0}}),f};var m=_("mouse-event")},{"mouse-event":243}],242:[function(_,oe,ae){var m={left:0,top:0};oe.exports=function(x,T,b){T=T||x.currentTarget||x.srcElement,Array.isArray(b)||(b=[0,0]);var l,e=x.clientX||0,o=x.clientY||0,a=(l=T)===window||l===document||l===document.body?m:l.getBoundingClientRect();return b[0]=e-a.left,b[1]=o-a.top,b}},{}],243:[function(_,oe,ae){"use strict";function m(x){return x.target||x.srcElement||window}ae.buttons=function(x){if("object"==typeof x){if("buttons"in x)return x.buttons;if("which"in x){if(2===(T=x.which))return 4;if(3===T)return 2;if(T>0)return 1<<T-1}else if("button"in x){var T;if(1===(T=x.button))return 4;if(2===T)return 2;if(T>=0)return 1<<T}}return 0},ae.element=m,ae.x=function(x){if("object"==typeof x){if("offsetX"in x)return x.offsetX;var T=m(x).getBoundingClientRect();return x.clientX-T.left}return 0},ae.y=function(x){if("object"==typeof x){if("offsetY"in x)return x.offsetY;var T=m(x).getBoundingClientRect();return x.clientY-T.top}return 0}},{}],244:[function(_,oe,ae){"use strict";var m=_("to-px");oe.exports=function(x,T,b){"function"==typeof x&&(b=!!T,T=x,x=window);var e=m("ex",x),o=function(a){b&&a.preventDefault();var l=a.deltaX||0,i=a.deltaY||0,d=a.deltaZ||0,u=1;switch(a.deltaMode){case 1:u=e;break;case 2:u=window.innerHeight}if(i*=u,d*=u,(l*=u)||i||d)return T(l,i,d,a)};return x.addEventListener("wheel",o),o}},{"to-px":314}],245:[function(_,oe,ae){(function(m,x){(function(){var T,b,e;e=function(){"use strict";var T,b,e,o=Object.prototype.toString,a=void 0!==x?function(w){return x(w)}:setTimeout;try{Object.defineProperty({},"x",{}),T=function(w,y,M,A){return Object.defineProperty(w,y,{value:M,writable:!0,configurable:!1!==A})}}catch(w){T=function(y,M,A){return y[M]=A,y}}function l(w,y){e.add(w,y),b||(b=a(e.drain))}function i(w){var y,M=typeof w;return null==w||"object"!=M&&"function"!=M||(y=w.then),"function"==typeof y&&y}function d(){for(var w=0;w<this.chain.length;w++)u(this,1===this.state?this.chain[w].success:this.chain[w].failure,this.chain[w]);this.chain.length=0}function u(w,y,M){var A,k;try{!1===y?M.reject(w.msg):(A=!0===y?w.msg:y.call(void 0,w.msg))===M.promise?M.reject(TypeError("Promise-chain cycle")):(k=i(A))?k.call(A,M.resolve,M.reject):M.resolve(A)}catch(C){M.reject(C)}}function s(w){var y,M=this;if(!M.triggered){M.triggered=!0,M.def&&(M=M.def);try{(y=i(w))?l(function(){var A=new p(M);try{y.call(w,function(){s.apply(A,arguments)},function(){c.apply(A,arguments)})}catch(k){c.call(A,k)}}):(M.msg=w,M.state=1,M.chain.length>0&&l(d,M))}catch(A){c.call(new p(M),A)}}}function c(w){var y=this;y.triggered||(y.triggered=!0,y.def&&(y=y.def),y.msg=w,y.state=2,y.chain.length>0&&l(d,y))}function h(w,y,M,A){for(var k=0;k<y.length;k++)!function(C){w.resolve(y[C]).then(function(P){M(C,P)},A)}(k)}function p(w){this.def=w,this.triggered=!1}function v(w){this.promise=w,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function g(w){if("function"!=typeof w)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var y=new v(this);this.then=function(M,A){var k={success:"function"!=typeof M||M,failure:"function"==typeof A&&A};return k.promise=new this.constructor(function(C,P){if("function"!=typeof C||"function"!=typeof P)throw TypeError("Not a function");k.resolve=C,k.reject=P}),y.chain.push(k),0!==y.state&&l(d,y),k.promise},this.catch=function(M){return this.then(void 0,M)};try{w.call(void 0,function(M){s.call(y,M)},function(M){c.call(y,M)})}catch(M){c.call(y,M)}}e=function(){var w,y,M;function A(k,C){this.fn=k,this.self=C,this.next=void 0}return{add:function(k,C){M=new A(k,C),y?y.next=M:w=M,y=M,M=void 0},drain:function(){var k=w;for(w=y=b=void 0;k;)k.fn.call(k.self),k=k.next}}}();var f=T({},"constructor",g,!1);return g.prototype=f,T(f,"__NPO__",0,!1),T(g,"resolve",function(w){return w&&"object"==typeof w&&1===w.__NPO__?w:new this(function(y,M){if("function"!=typeof y||"function"!=typeof M)throw TypeError("Not a function");y(w)})}),T(g,"reject",function(w){return new this(function(y,M){if("function"!=typeof y||"function"!=typeof M)throw TypeError("Not a function");M(w)})}),T(g,"all",function(w){var y=this;return"[object Array]"!=o.call(w)?y.reject(TypeError("Not an array")):0===w.length?y.resolve([]):new y(function(M,A){if("function"!=typeof M||"function"!=typeof A)throw TypeError("Not a function");var k=w.length,C=Array(k),P=0;h(y,w,function(D,F){C[D]=F,++P===k&&M(C)},A)})}),T(g,"race",function(w){var y=this;return"[object Array]"!=o.call(w)?y.reject(TypeError("Not an array")):new y(function(M,A){if("function"!=typeof M||"function"!=typeof A)throw TypeError("Not a function");h(y,w,function(k,C){M(C)},A)})}),g},(b=void 0!==m?m:this)[T="Promise"]=b[T]||e(),void 0!==oe&&oe.exports&&(oe.exports=b[T])}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},_("timers").setImmediate)},{timers:311}],246:[function(_,oe,ae){var m=Math.PI,x=a(120);function T(l,i,d,u){return["C",l,i,d,u,d,u]}function b(l,i,d,u,s,c){return["C",l/3+2/3*d,i/3+2/3*u,s/3+2/3*d,c/3+2/3*u,s,c]}function e(l,i,d,u,s,c,h,p,v,g){if(g)F=g[0],R=g[1],P=g[2],D=g[3];else{var f=o(l,i,-s);i=f.y;var w=((l=f.x)-(p=(f=o(p,v,-s)).x))/2,y=(i-(v=f.y))/2,M=w*w/(d*d)+y*y/(u*u);M>1&&(d*=M=Math.sqrt(M),u*=M);var A=d*d,k=u*u,C=(c==h?-1:1)*Math.sqrt(Math.abs((A*k-A*y*y-k*w*w)/(A*y*y+k*w*w)));C==1/0&&(C=1);var P=C*d*y/u+(l+p)/2,D=C*-u*w/d+(i+v)/2,F=Math.asin(((i-D)/u).toFixed(9)),R=Math.asin(((v-D)/u).toFixed(9));(F=l<P?m-F:F)<0&&(F=2*m+F),(R=p<P?m-R:R)<0&&(R=2*m+R),h&&F>R&&(F-=2*m),!h&&R>F&&(R-=2*m)}if(Math.abs(R-F)>x){var L=R,I=p,B=v;R=F+x*(h&&R>F?1:-1);var V=e(p=P+d*Math.cos(R),v=D+u*Math.sin(R),d,u,s,0,h,I,B,[R,L,P,D])}var Z=Math.tan((R-F)/4),Y=4/3*d*Z,ee=4/3*u*Z,J=[2*l-(l+Y*Math.sin(F)),2*i-(i-ee*Math.cos(F)),p+Y*Math.sin(R),v-ee*Math.cos(R),p,v];if(g)return J;V&&(J=J.concat(V));for(var $=0;$<J.length;){var Q=o(J[$],J[$+1],s);J[$++]=Q.x,J[$++]=Q.y}return J}function o(l,i,d){return{x:l*Math.cos(d)-i*Math.sin(d),y:l*Math.sin(d)+i*Math.cos(d)}}function a(l){return l*(m/180)}oe.exports=function(l){for(var i,d=[],u=0,s=0,c=0,h=0,p=null,v=null,g=0,f=0,w=0,y=l.length;w<y;w++){var M=l[w],A=M[0];switch(A){case"M":c=M[1],h=M[2];break;case"A":(M=e(g,f,M[1],M[2],a(M[3]),M[4],M[5],M[6],M[7])).unshift("C"),M.length>7&&(d.push(M.splice(0,7)),M.unshift("C"));break;case"S":var k=g,C=f;"C"!=i&&"S"!=i||(k+=k-u,C+=C-s),M=["C",k,C,M[1],M[2],M[3],M[4]];break;case"T":"Q"==i||"T"==i?(p=2*g-p,v=2*f-v):(p=g,v=f),M=b(g,f,p,v,M[1],M[2]);break;case"Q":p=M[1],v=M[2],M=b(g,f,M[1],M[2],M[3],M[4]);break;case"L":M=T(g,f,M[1],M[2]);break;case"H":M=T(g,f,M[1],f);break;case"V":M=T(g,f,g,M[1]);break;case"Z":M=T(g,f,c,h)}i=A,g=M[M.length-2],f=M[M.length-1],M.length>4?(u=M[M.length-4],s=M[M.length-3]):(u=g,s=f),d.push(M)}return d}},{}],247:[function(_,oe,ae){"use strict";var m=Object.getOwnPropertySymbols,x=Object.prototype.hasOwnProperty,T=Object.prototype.propertyIsEnumerable;function b(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}oe.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var o={},a=0;a<10;a++)o["_"+String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(o).map(function(i){return o[i]}).join(""))return!1;var l={};return"abcdefghijklmnopqrst".split("").forEach(function(i){l[i]=i}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},l)).join("")}catch(i){return!1}}()?Object.assign:function(e,o){for(var a,l,i=b(e),d=1;d<arguments.length;d++){for(var u in a=Object(arguments[d]))x.call(a,u)&&(i[u]=a[u]);if(m){l=m(a);for(var s=0;s<l.length;s++)T.call(a,l[s])&&(i[l[s]]=a[l[s]])}}return i}},{}],248:[function(_,oe,ae){"use strict";function m(b,e){if("string"!=typeof b)return[b];var o=[b];"string"==typeof e||Array.isArray(e)?e={brackets:e}:e||(e={});var a=e.brackets?Array.isArray(e.brackets)?e.brackets:[e.brackets]:["{}","[]","()"],l=e.escape||"___",i=!!e.flat;a.forEach(function(u){var s=new RegExp(["\\",u[0],"[^\\",u[0],"\\",u[1],"]*\\",u[1]].join("")),c=[];function h(p,v,g){var f=o.push(p.slice(u[0].length,-u[1].length))-1;return c.push(f),l+f+l}o.forEach(function(p,v){for(var g,f=0;p!=g;)if(g=p,p=p.replace(s,h),f++>1e4)throw Error("References have circular dependency. Please, check them.");o[v]=p}),c=c.reverse(),o=o.map(function(p){return c.forEach(function(v){p=p.replace(new RegExp("(\\"+l+v+"\\"+l+")","g"),u[0]+"$1"+u[1])}),p})});var d=new RegExp("\\"+l+"([0-9]+)\\"+l);return i?o:function u(s,c,h){for(var p,v=[],g=0;p=d.exec(s);){if(g++>1e4)throw Error("Circular references in parenthesis");v.push(s.slice(0,p.index)),v.push(u(c[p[1]],c)),s=s.slice(p.index+p[0].length)}return v.push(s),v}(o[0],o)}function x(b,e){if(e&&e.flat){var o,a=e&&e.escape||"___",l=b[0];if(!l)return"";for(var i=new RegExp("\\"+a+"([0-9]+)\\"+a),d=0;l!=o;){if(d++>1e4)throw Error("Circular references in "+b);o=l,l=l.replace(i,u)}return l}return b.reduce(function s(c,h){return Array.isArray(h)&&(h=h.reduce(s,"")),c+h},"");function u(s,c){if(null==b[c])throw Error("Reference "+c+"is undefined");return b[c]}}function T(b,e){return Array.isArray(b)?x(b,e):m(b,e)}T.parse=m,T.stringify=x,oe.exports=T},{}],249:[function(_,oe,ae){"use strict";var m=_("pick-by-alias");oe.exports=function(x){var T;return arguments.length>1&&(x=arguments),"string"==typeof x?x=x.split(/\s/).map(parseFloat):"number"==typeof x&&(x=[x]),x.length&&"number"==typeof x[0]?T=1===x.length?{width:x[0],height:x[0],x:0,y:0}:2===x.length?{width:x[0],height:x[1],x:0,y:0}:{x:x[0],y:x[1],width:x[2]-x[0]||0,height:x[3]-x[1]||0}:x&&((T={x:(x=m(x,{left:"x l left Left",top:"y t top Top",width:"w width W Width",height:"h height W Width",bottom:"b bottom Bottom",right:"r right Right"})).left||0,y:x.top||0}).width=null==x.width?x.right?x.right-T.x:0:x.width,T.height=null==x.height?x.bottom?x.bottom-T.y:0:x.height),T}},{"pick-by-alias":253}],250:[function(_,oe,ae){oe.exports=function(b){var e=[];return b.replace(x,function(o,a,l){var u,i=a.toLowerCase();for(u=void 0,l=(u=l.match(T))?u.map(Number):[],"m"==i&&l.length>2&&(e.push([a].concat(l.splice(0,2))),i="l",a="m"==a?"l":"L");;){if(l.length==m[i])return l.unshift(a),e.push(l);if(l.length<m[i])throw new Error("malformed path data");e.push([a].concat(l.splice(0,m[i])))}}),e};var m={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},x=/([astvzqmhlc])([^astvzqmhlc]*)/gi,T=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},{}],251:[function(_,oe,ae){oe.exports=function(m,x){x||(x=[0,""]),m=String(m);var T=parseFloat(m,10);return x[0]=T,x[1]=m.match(/[\d.\-\+]*\s*(.*)/)[1]||"",x}},{}],252:[function(_,oe,ae){(function(m){(function(){(function(){var x,T,b,e,o,a;"undefined"!=typeof performance&&null!==performance&&performance.now?oe.exports=function(){return performance.now()}:null!=m&&m.hrtime?(oe.exports=function(){return(x()-o)/1e6},T=m.hrtime,e=(x=function(){var l;return 1e9*(l=T())[0]+l[1]})(),a=1e9*m.uptime(),o=e-a):Date.now?(oe.exports=function(){return Date.now()-b},b=Date.now()):(oe.exports=function(){return(new Date).getTime()-b},b=(new Date).getTime())}).call(this)}).call(this)}).call(this,_("_process"))},{_process:277}],253:[function(_,oe,ae){"use strict";oe.exports=function(T,b,e){var o,a,l={};if("string"==typeof b&&(b=x(b)),Array.isArray(b)){var i={};for(a=0;a<b.length;a++)i[b[a]]=!0;b=i}for(o in b)b[o]=x(b[o]);var d={};for(o in b){var u=b[o];if(Array.isArray(u))for(a=0;a<u.length;a++){var s=u[a];if(e&&(d[s]=!0),s in T){if(l[o]=T[s],e)for(var c=a;c<u.length;c++)d[u[c]]=!0;break}}else o in T&&(b[o]&&(l[o]=T[o]),e&&(d[o]=!0))}if(e)for(o in T)d[o]||(l[o]=T[o]);return l};var m={};function x(T){return m[T]?m[T]:("string"==typeof T&&(T=m[T]=T.split(/\s*,\s*|\s+/)),T)}},{}],254:[function(_,oe,ae){var m,x=_("./lib/build-log"),T=_("./lib/epsilon"),b=_("./lib/intersecter"),e=_("./lib/segment-chainer"),o=_("./lib/segment-selector"),a=_("./lib/geojson"),l=!1,i=T();function d(u,s,c){var h=m.segments(u),p=m.segments(s),v=c(m.combine(h,p));return m.polygon(v)}m={buildLog:function(u){return!0===u?l=x():!1===u&&(l=!1),!1!==l&&l.list},epsilon:function(u){return i.epsilon(u)},segments:function(u){var s=b(!0,i,l);return u.regions.forEach(s.addRegion),{segments:s.calculate(u.inverted),inverted:u.inverted}},combine:function(u,s){return{combined:b(!1,i,l).calculate(u.segments,u.inverted,s.segments,s.inverted),inverted1:u.inverted,inverted2:s.inverted}},selectUnion:function(u){return{segments:o.union(u.combined,l),inverted:u.inverted1||u.inverted2}},selectIntersect:function(u){return{segments:o.intersect(u.combined,l),inverted:u.inverted1&&u.inverted2}},selectDifference:function(u){return{segments:o.difference(u.combined,l),inverted:u.inverted1&&!u.inverted2}},selectDifferenceRev:function(u){return{segments:o.differenceRev(u.combined,l),inverted:!u.inverted1&&u.inverted2}},selectXor:function(u){return{segments:o.xor(u.combined,l),inverted:u.inverted1!==u.inverted2}},polygon:function(u){return{regions:e(u.segments,i,l),inverted:u.inverted}},polygonFromGeoJSON:function(u){return a.toPolygon(m,u)},polygonToGeoJSON:function(u){return a.fromPolygon(m,i,u)},union:function(u,s){return d(u,s,m.selectUnion)},intersect:function(u,s){return d(u,s,m.selectIntersect)},difference:function(u,s){return d(u,s,m.selectDifference)},differenceRev:function(u,s){return d(u,s,m.selectDifferenceRev)},xor:function(u,s){return d(u,s,m.selectXor)}},"object"==typeof window&&(window.PolyBool=m),oe.exports=m},{"./lib/build-log":255,"./lib/epsilon":256,"./lib/geojson":257,"./lib/intersecter":258,"./lib/segment-chainer":260,"./lib/segment-selector":261}],255:[function(_,oe,ae){oe.exports=function(){var m,x=0,T=!1;function b(e,o){return m.list.push({type:e,data:o?JSON.parse(JSON.stringify(o)):void 0}),m}return m={list:[],segmentId:function(){return x++},checkIntersection:function(e,o){return b("check",{seg1:e,seg2:o})},segmentChop:function(e,o){return b("div_seg",{seg:e,pt:o}),b("chop",{seg:e,pt:o})},statusRemove:function(e){return b("pop_seg",{seg:e})},segmentUpdate:function(e){return b("seg_update",{seg:e})},segmentNew:function(e,o){return b("new_seg",{seg:e,primary:o})},segmentRemove:function(e){return b("rem_seg",{seg:e})},tempStatus:function(e,o,a){return b("temp_status",{seg:e,above:o,below:a})},rewind:function(e){return b("rewind",{seg:e})},status:function(e,o,a){return b("status",{seg:e,above:o,below:a})},vert:function(e){return e===T?m:(T=e,b("vert",{x:e}))},log:function(e){return"string"!=typeof e&&(e=JSON.stringify(e,!1,"  ")),b("log",{txt:e})},reset:function(){return b("reset")},selected:function(e){return b("selected",{segs:e})},chainStart:function(e){return b("chain_start",{seg:e})},chainRemoveHead:function(e,o){return b("chain_rem_head",{index:e,pt:o})},chainRemoveTail:function(e,o){return b("chain_rem_tail",{index:e,pt:o})},chainNew:function(e,o){return b("chain_new",{pt1:e,pt2:o})},chainMatch:function(e){return b("chain_match",{index:e})},chainClose:function(e){return b("chain_close",{index:e})},chainAddHead:function(e,o){return b("chain_add_head",{index:e,pt:o})},chainAddTail:function(e,o){return b("chain_add_tail",{index:e,pt:o})},chainConnect:function(e,o){return b("chain_con",{index1:e,index2:o})},chainReverse:function(e){return b("chain_rev",{index:e})},chainJoin:function(e,o){return b("chain_join",{index1:e,index2:o})},done:function(){return b("done")}}}},{}],256:[function(_,oe,ae){oe.exports=function(m){"number"!=typeof m&&(m=1e-10);var x={epsilon:function(T){return"number"==typeof T&&(m=T),m},pointAboveOrOnLine:function(T,b,e){var o=b[0],a=b[1];return(e[0]-o)*(T[1]-a)-(e[1]-a)*(T[0]-o)>=-m},pointBetween:function(T,b,e){var a=e[0]-b[0],i=e[1]-b[1],d=(T[0]-b[0])*a+(T[1]-b[1])*i;return!(d<m||d-(a*a+i*i)>-m)},pointsSameX:function(T,b){return Math.abs(T[0]-b[0])<m},pointsSameY:function(T,b){return Math.abs(T[1]-b[1])<m},pointsSame:function(T,b){return x.pointsSameX(T,b)&&x.pointsSameY(T,b)},pointsCompare:function(T,b){return x.pointsSameX(T,b)?x.pointsSameY(T,b)?0:T[1]<b[1]?-1:1:T[0]<b[0]?-1:1},pointsCollinear:function(T,b,e){return Math.abs((T[0]-b[0])*(b[1]-e[1])-(b[0]-e[0])*(T[1]-b[1]))<m},linesIntersect:function(T,b,e,o){var a=b[0]-T[0],l=b[1]-T[1],i=o[0]-e[0],d=o[1]-e[1],u=a*d-l*i;if(Math.abs(u)<m)return!1;var s=T[0]-e[0],c=T[1]-e[1],h=(i*c-d*s)/u,p=(a*c-l*s)/u,v={alongA:0,alongB:0,pt:[T[0]+h*a,T[1]+h*l]};return v.alongA=h<=-m?-2:h<m?-1:h-1<=-m?0:h-1<m?1:2,v.alongB=p<=-m?-2:p<m?-1:p-1<=-m?0:p-1<m?1:2,v},pointInsideRegion:function(T,b){for(var e=T[0],o=T[1],a=b[b.length-1][0],l=b[b.length-1][1],i=!1,d=0;d<b.length;d++){var u=b[d][0],s=b[d][1];s-o>m!=l-o>m&&(a-u)*(o-s)/(l-s)+u-e>m&&(i=!i),a=u,l=s}return i}};return x}},{}],257:[function(_,oe,ae){oe.exports={toPolygon:function(x,T){function b(a){if(a.length<=0)return x.segments({inverted:!1,regions:[]});function l(u){var s=u.slice(0,u.length-1);return x.segments({inverted:!1,regions:[s]})}for(var i=l(a[0]),d=1;d<a.length;d++)i=x.selectDifference(x.combine(i,l(a[d])));return i}if("Polygon"===T.type)return x.polygon(b(T.coordinates));if("MultiPolygon"===T.type){for(var e=x.segments({inverted:!1,regions:[]}),o=0;o<T.coordinates.length;o++)e=x.selectUnion(x.combine(e,b(T.coordinates[o])));return x.polygon(e)}throw new Error("PolyBool: Cannot convert GeoJSON object to PolyBool polygon")},fromPolygon:function(x,T,b){function e(p,v){return T.pointInsideRegion([.5*(p[0][0]+p[1][0]),.5*(p[0][1]+p[1][1])],v)}function o(p){return{region:p,children:[]}}b=x.polygon(x.segments(b));var a=o(null);function l(p,v){for(var g=0;g<p.children.length;g++)if(e(v,(w=p.children[g]).region))return void l(w,v);var f=o(v);for(g=0;g<p.children.length;g++){var w;e((w=p.children[g]).region,v)&&(f.children.push(w),p.children.splice(g,1),g--)}p.children.push(f)}for(var i=0;i<b.regions.length;i++){var d=b.regions[i];d.length<3||l(a,d)}function u(p,v){for(var g=0,f=p[p.length-1][0],w=p[p.length-1][1],y=[],M=0;M<p.length;M++){var A=p[M][0],k=p[M][1];y.push([A,k]),g+=k*f-A*w,f=A,w=k}return g<0!==v&&y.reverse(),y.push([y[0][0],y[0][1]]),y}var s=[];function c(p){var v=[u(p.region,!1)];s.push(v);for(var g=0;g<p.children.length;g++)v.push(h(p.children[g]))}function h(p){for(var v=0;v<p.children.length;v++)c(p.children[v]);return u(p.region,!0)}for(i=0;i<a.children.length;i++)c(a.children[i]);return s.length<=0?{type:"Polygon",coordinates:[]}:1==s.length?{type:"Polygon",coordinates:s[0]}:{type:"MultiPolygon",coordinates:s}}}},{}],258:[function(_,oe,ae){var m=_("./linked-list");oe.exports=function(x,T,b){function e(u,s,c){return{id:b?b.segmentId():-1,start:u,end:s,myFill:{above:c.myFill.above,below:c.myFill.below},otherFill:null}}var o=m.create();function a(u,s){o.insertBefore(u,function(c){return h=u.isStart,v=s,g=c.isStart,w=c.other.pt,(0!==(y=T.pointsCompare(u.pt,f=c.pt))?y:T.pointsSame(v,w)?0:h!==g?h?1:-1:T.pointAboveOrOnLine(v,g?f:w,g?w:f)?1:-1)<0;var h,v,g,f,w,y})}function l(u,s){var h,v,c=(a(v=m.node({isStart:!0,pt:(h=u).start,seg:h,primary:s,other:null,status:null}),h.end),v);return function(h,p,v){var g=m.node({isStart:!1,pt:p.end,seg:p,primary:v,other:h,status:null});h.other=g,a(g,h.pt)}(c,u,s),c}function i(u,s){var h,p,c=e(s,u.seg.end,u.seg);return h=u,p=s,b&&b.segmentChop(h.seg,p),h.other.remove(),h.seg.end=p,h.other.pt=p,a(h.other,h.pt),l(c,u.primary)}function d(u,s){var c=m.create();function h(F){return c.findTransition(function(R){var L,I,B,V,Z,Y;return V=(L=F).seg.end,(T.pointsCollinear(B=L.seg.start,Z=(I=R.ev).seg.start,Y=I.seg.end)?T.pointsCollinear(V,Z,Y)||T.pointAboveOrOnLine(V,Z,Y)?1:-1:T.pointAboveOrOnLine(B,Z,Y)?1:-1)>0})}function p(F,R){var L=F.seg,I=R.seg,B=L.start,V=L.end,Z=I.start,Y=I.end;b&&b.checkIntersection(L,I);var ee=T.linesIntersect(B,V,Z,Y);if(!1===ee){if(!T.pointsCollinear(B,V,Z)||T.pointsSame(B,Y)||T.pointsSame(V,Z))return!1;var J=T.pointsSame(B,Z),$=T.pointsSame(V,Y);if(J&&$)return R;var Q=!J&&T.pointBetween(B,Z,Y),se=!$&&T.pointBetween(V,Z,Y);if(J)return se?i(R,V):i(F,Y),R;Q&&($||(se?i(R,V):i(F,Y)),i(R,B))}else 0===ee.alongA&&(-1===ee.alongB?i(F,Z):0===ee.alongB?i(F,ee.pt):1===ee.alongB&&i(F,Y)),0===ee.alongB&&(-1===ee.alongA?i(R,B):0===ee.alongA?i(R,ee.pt):1===ee.alongA&&i(R,V));return!1}for(var v=[];!o.isEmpty();){var g=o.getHead();if(b&&b.vert(g.pt[0]),g.isStart){let F=function(){if(w){var R=p(g,w);if(R)return R}return!!y&&p(g,y)};b&&b.segmentNew(g.seg,g.primary);var f=h(g),w=f.before?f.before.ev:null,y=f.after?f.after.ev:null;b&&b.tempStatus(g.seg,!!w&&w.seg,!!y&&y.seg);var M,k,A=F();if(A&&(x?(k=null===g.seg.myFill.below||g.seg.myFill.above!==g.seg.myFill.below)&&(A.seg.myFill.above=!A.seg.myFill.above):A.seg.otherFill=g.seg.myFill,b&&b.segmentUpdate(A.seg),g.other.remove(),g.remove()),o.getHead()!==g){b&&b.rewind(g.seg);continue}x?(k=null===g.seg.myFill.below||g.seg.myFill.above!==g.seg.myFill.below,g.seg.myFill.below=y?y.seg.myFill.above:u,g.seg.myFill.above=k?!g.seg.myFill.below:g.seg.myFill.below):null===g.seg.otherFill&&(g.seg.otherFill={above:M=y?g.primary===y.primary?y.seg.otherFill.above:y.seg.myFill.above:g.primary?s:u,below:M}),b&&b.status(g.seg,!!w&&w.seg,!!y&&y.seg),g.other.status=f.insert(m.node({ev:g}))}else{var C=g.status;if(null===C)throw new Error("PolyBool: Zero-length segment detected; your epsilon is probably too small or too large");if(c.exists(C.prev)&&c.exists(C.next)&&p(C.prev.ev,C.next.ev),b&&b.statusRemove(C.ev.seg),C.remove(),!g.primary){var P=g.seg.myFill;g.seg.myFill=g.seg.otherFill,g.seg.otherFill=P}v.push(g.seg)}o.getHead().remove()}return b&&b.done(),v}return x?{addRegion:function(u){for(var s,c,h,p=u[u.length-1],v=0;v<u.length;v++){var g=T.pointsCompare(s=p,p=u[v]);0!==g&&l((c=g<0?s:p,h=g<0?p:s,{id:b?b.segmentId():-1,start:c,end:h,myFill:{above:null,below:null},otherFill:null}),!0)}},calculate:function(u){return d(u,!1)}}:{calculate:function(u,s,c,h){return u.forEach(function(p){l(e(p.start,p.end,p),!0)}),c.forEach(function(p){l(e(p.start,p.end,p),!1)}),d(s,h)}}}},{"./linked-list":259}],259:[function(_,oe,ae){oe.exports={create:function(){var m={root:{root:!0,next:null},exists:function(x){return null!==x&&x!==m.root},isEmpty:function(){return null===m.root.next},getHead:function(){return m.root.next},insertBefore:function(x,T){for(var b=m.root,e=m.root.next;null!==e;){if(T(e))return x.prev=e.prev,x.next=e,e.prev.next=x,void(e.prev=x);b=e,e=e.next}b.next=x,x.prev=b,x.next=null},findTransition:function(x){for(var T=m.root,b=m.root.next;null!==b&&!x(b);)T=b,b=b.next;return{before:T===m.root?null:T,after:b,insert:function(e){return e.prev=T,e.next=b,T.next=e,null!==b&&(b.prev=e),e}}}};return m},node:function(m){return m.prev=null,m.next=null,m.remove=function(){m.prev.next=m.next,m.next&&(m.next.prev=m.prev),m.prev=null,m.next=null},m}}},{}],260:[function(_,oe,ae){oe.exports=function(m,x,T){var b=[],e=[];return m.forEach(function(o){var a=o.start,l=o.end;if(x.pointsSame(a,l))console.warn("PolyBool: Warning: Zero-length segment detected; your epsilon is probably too small or too large");else{T&&T.chainStart(o);for(var i={index:0,matches_head:!1,matches_pt1:!1},d={index:0,matches_head:!1,matches_pt1:!1},u=i,s=0;s<b.length;s++){var c=(f=b[s])[0],h=f[f.length-1];if(x.pointsSame(c,a)){if(D(s,!0,!0))break}else if(x.pointsSame(c,l)){if(D(s,!0,!1))break}else if(x.pointsSame(h,a)){if(D(s,!1,!0))break}else if(x.pointsSame(h,l)&&D(s,!1,!1))break}if(u===i)return b.push([a,l]),void(T&&T.chainNew(a,l));if(u===d){T&&T.chainMatch(i.index);var p=i.index,v=i.matches_pt1?l:a,g=i.matches_head,f=b[p],w=g?f[0]:f[f.length-1],y=g?f[1]:f[f.length-2],M=g?f[f.length-1]:f[0],A=g?f[f.length-2]:f[1];return x.pointsCollinear(y,w,v)&&(g?(T&&T.chainRemoveHead(i.index,v),f.shift()):(T&&T.chainRemoveTail(i.index,v),f.pop()),w=y),x.pointsSame(M,v)?(b.splice(p,1),x.pointsCollinear(A,M,w)&&(g?(T&&T.chainRemoveTail(i.index,w),f.pop()):(T&&T.chainRemoveHead(i.index,w),f.shift())),T&&T.chainClose(i.index),void e.push(f)):void(g?(T&&T.chainAddHead(i.index,v),f.unshift(v)):(T&&T.chainAddTail(i.index,v),f.push(v)))}var k=i.index,C=d.index;T&&T.chainConnect(k,C);var P=b[k].length<b[C].length;i.matches_head?d.matches_head?P?(F(k),R(k,C)):(F(C),R(C,k)):R(C,k):d.matches_head?R(k,C):P?(F(k),R(C,k)):(F(C),R(k,C))}function D(L,I,B){return u.index=L,u.matches_head=I,u.matches_pt1=B,u===i?(u=d,!1):(u=null,!0)}function F(L){T&&T.chainReverse(L),b[L].reverse()}function R(L,I){var B=b[L],V=b[I],Z=B[B.length-1],Y=B[B.length-2],ee=V[0],J=V[1];x.pointsCollinear(Y,Z,ee)&&(T&&T.chainRemoveTail(L,Z),B.pop(),Z=Y),x.pointsCollinear(Z,ee,J)&&(T&&T.chainRemoveHead(I,ee),V.shift()),T&&T.chainJoin(L,I),b[L]=B.concat(V),b.splice(I,1)}}),e}},{}],261:[function(_,oe,ae){function m(T,b,e){var o=[];return T.forEach(function(a){var l=(a.myFill.above?8:0)+(a.myFill.below?4:0)+(a.otherFill&&a.otherFill.above?2:0)+(a.otherFill&&a.otherFill.below?1:0);0!==b[l]&&o.push({id:e?e.segmentId():-1,start:a.start,end:a.end,myFill:{above:1===b[l],below:2===b[l]},otherFill:null})}),e&&e.selected(o),o}oe.exports={union:function(T,b){return m(T,[0,2,1,0,2,2,0,0,1,0,1,0,0,0,0,0],b)},intersect:function(T,b){return m(T,[0,0,0,0,0,2,0,2,0,0,1,1,0,2,1,0],b)},difference:function(T,b){return m(T,[0,0,0,0,2,0,2,0,1,1,0,0,0,1,2,0],b)},differenceRev:function(T,b){return m(T,[0,2,1,0,0,0,1,1,0,2,0,2,0,0,0,0],b)},xor:function(T,b){return m(T,[0,2,1,0,2,0,0,1,1,0,0,2,0,1,2,0],b)}}},{}],262:[function(_,oe,ae){"use strict";var m=_("stream").Transform,x=_("stream-parser");function T(){m.call(this,{readableObjectMode:!0})}function b(e,o,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack||"",this.name=this.constructor.name,this.message=e,o&&(this.code=o),a&&(this.statusCode=a)}(T.prototype=Object.create(m.prototype)).constructor=T,x(T.prototype),ae.ParserStream=T,ae.sliceEq=function(e,o,a){for(var l=o,i=0;i<a.length;)if(e[l++]!==a[i++])return!1;return!0},ae.str2arr=function(e,o){var a=[],l=0;if(o&&"hex"===o)for(;l<e.length;)a.push(parseInt(e.slice(l,l+2),16)),l+=2;else for(;l<e.length;l++)a.push(255&e.charCodeAt(l));return a},ae.readUInt16LE=function(e,o){return e[o]|e[o+1]<<8},ae.readUInt16BE=function(e,o){return e[o+1]|e[o]<<8},ae.readUInt32LE=function(e,o){return e[o]|e[o+1]<<8|e[o+2]<<16|16777216*e[o+3]},ae.readUInt32BE=function(e,o){return e[o+3]|e[o+2]<<8|e[o+1]<<16|16777216*e[o]},(b.prototype=Object.create(Error.prototype)).constructor=b,ae.ProbeError=b},{stream:285,"stream-parser":301}],263:[function(_,oe,ae){"use strict";function m(b,e){var o=new Error(b);return o.code=e,o}function x(b){try{return decodeURIComponent(escape(b))}catch(e){return b}}function T(b,e,o){this.input=b.subarray(e,o),this.start=e;var a=String.fromCharCode.apply(null,this.input.subarray(0,4));if("II*\0"!==a&&"MM\0*"!==a)throw m("invalid TIFF signature","EBADDATA");this.big_endian="M"===a[0]}T.prototype.each=function(b){this.aborted=!1;var e=this.read_uint32(4);for(this.ifds_to_read=[{id:0,offset:e}];this.ifds_to_read.length>0&&!this.aborted;){var o=this.ifds_to_read.shift();o.offset&&this.scan_ifd(o.id,o.offset,b)}},T.prototype.read_uint16=function(b){var e=this.input;if(b+2>e.length)throw m("unexpected EOF","EBADDATA");return this.big_endian?256*e[b]+e[b+1]:e[b]+256*e[b+1]},T.prototype.read_uint32=function(b){var e=this.input;if(b+4>e.length)throw m("unexpected EOF","EBADDATA");return this.big_endian?16777216*e[b]+65536*e[b+1]+256*e[b+2]+e[b+3]:e[b]+256*e[b+1]+65536*e[b+2]+16777216*e[b+3]},T.prototype.is_subifd_link=function(b,e){return 0===b&&34665===e||0===b&&34853===e||34665===b&&40965===e},T.prototype.exif_format_length=function(b){switch(b){case 1:case 2:case 6:case 7:return 1;case 3:case 8:return 2;case 4:case 9:case 11:return 4;case 5:case 10:case 12:return 8;default:return 0}},T.prototype.exif_format_read=function(b,e){var o;switch(b){case 1:case 2:return this.input[e];case 6:return(o=this.input[e])|33554430*(128&o);case 3:return this.read_uint16(e);case 8:return(o=this.read_uint16(e))|131070*(32768&o);case 4:return this.read_uint32(e);case 9:return 0|this.read_uint32(e);default:return null}},T.prototype.scan_ifd=function(b,e,o){var a=this.read_uint16(e);e+=2;for(var l=0;l<a;l++){var i=this.read_uint16(e),d=this.read_uint16(e+2),u=this.read_uint32(e+4),s=this.exif_format_length(d),c=u*s,h=c<=4?e+8:this.read_uint32(e+8),p=!1;if(h+c>this.input.length)throw m("unexpected EOF","EBADDATA");for(var v=[],g=h,f=0;f<u;f++,g+=s){var w=this.exif_format_read(d,g);if(null===w){v=null;break}v.push(w)}if(Array.isArray(v)&&2===d&&(v=x(String.fromCharCode.apply(null,v)))&&"\0"===v[v.length-1]&&(v=v.slice(0,-1)),this.is_subifd_link(b,i)&&Array.isArray(v)&&Number.isInteger(v[0])&&v[0]>0&&(this.ifds_to_read.push({id:i,offset:v[0]}),p=!0),!1===o({is_big_endian:this.big_endian,ifd:b,tag:i,format:d,count:u,entry_offset:e+this.start,data_length:c,data_offset:h+this.start,value:v,is_subifd_link:p}))return void(this.aborted=!0);e+=12}0===b&&this.ifds_to_read.push({id:1,offset:this.read_uint32(e)})},oe.exports.ExifParser=T,oe.exports.get_orientation=function(b){var e=0;try{return new T(b,0,b.length).each(function(o){if(0===o.ifd&&274===o.tag&&Array.isArray(o.value))return e=o.value[0],!1}),e}catch(o){return-1}}},{}],264:[function(_,oe,ae){"use strict";var m=_("./common").readUInt16BE,x=_("./common").readUInt32BE;function T(i,d){if(i.length<4+d)return null;var u=x(i,d);return i.length<u+d||u<8?null:{boxtype:String.fromCharCode.apply(null,i.slice(d+4,d+8)),data:i.slice(d+8,d+u),end:d+u}}function b(i,d){for(var u=0;;){var s=T(i,u);if(!s)break;switch(s.boxtype){case"ispe":d.sizes.push({width:x(s.data,4),height:x(s.data,8)});break;case"irot":d.transforms.push({type:"irot",value:3&s.data[0]});break;case"imir":d.transforms.push({type:"imir",value:1&s.data[0]})}u=s.end}}function e(i,d,u){for(var s=0,c=0;c<u;c++)s=256*s+(i[d+c]||0);return s}function o(i,d){for(var u=i[4]>>4&15,s=15&i[4],c=i[5]>>4&15,h=m(i,6),p=8,v=0;v<h;v++){var g=m(i,p),f=m(i,p+=2),w=e(i,p+=2,c),y=m(i,p+=c);if(p+=2,0===f&&1===y){var M=e(i,p,u),A=e(i,p+u,s);d.item_loc[g]={length:A,offset:M+w}}p+=y*(u+s)}}function a(i,d){for(var u=m(i,4),s=6,c=0;c<u;c++){var h=T(i,s);if(!h)break;if("infe"===h.boxtype){for(var p=m(h.data,4),v="",g=8;g<h.data.length&&h.data[g];g++)v+=String.fromCharCode(h.data[g]);d.item_inf[v]=p}s=h.end}}function l(i,d){for(var u=0;;){var s=T(i,u);if(!s)break;"ipco"===s.boxtype&&b(s.data,d),u=s.end}}oe.exports.unbox=T,oe.exports.readSizeFromMeta=function(i){var d={sizes:[],transforms:[],item_inf:{},item_loc:{}};if(function(g,f){for(var w=4;;){var y=T(g,w);if(!y)break;"iprp"===y.boxtype&&l(y.data,f),"iloc"===y.boxtype&&o(y.data,f),"iinf"===y.boxtype&&a(y.data,f),w=y.end}}(i,d),d.sizes.length){var u,s,c,h=(s=(u=d.sizes).reduce(function(g,f){return g.width>f.width||g.width===f.width&&g.height>f.height?g:f}),c=u.reduce(function(g,f){return g.height>f.height||g.height===f.height&&g.width>f.width?g:f}),s.width>c.height||s.width===c.height&&s.height>c.width?s:c),p=1;d.transforms.forEach(function(g){var f={1:6,2:5,3:8,4:7,5:4,6:3,7:2,8:1},w={1:4,2:3,3:2,4:1,5:6,6:5,7:8,8:7};if("imir"===g.type&&(p=0===g.value?w[p]:f[p=f[p=w[p]]]),"irot"===g.type)for(var y=0;y<g.value;y++)p=f[p]});var v=null;return d.item_inf.Exif&&(v=d.item_loc[d.item_inf.Exif]),{width:h.width,height:h.height,orientation:d.transforms.length?p:null,variants:d.sizes,exif_location:v}}},oe.exports.getMimeType=function(i){var d=String.fromCharCode.apply(null,i.slice(0,4)),u={};u[d]=!0;for(var s=8;s<i.length;s+=4)u[String.fromCharCode.apply(null,i.slice(s,s+4))]=!0;if(u.mif1||u.msf1||u.miaf)return"avif"===d||"avis"===d||"avio"===d?{type:"avif",mime:"image/avif"}:"heic"===d||"heix"===d?{type:"heic",mime:"image/heic"}:"hevc"===d||"hevx"===d?{type:"heic",mime:"image/heic-sequence"}:u.avif||u.avis?{type:"avif",mime:"image/avif"}:u.heic||u.heix||u.hevc||u.hevx||u.heis?u.msf1?{type:"heif",mime:"image/heif-sequence"}:{type:"heif",mime:"image/heif"}:{type:"avif",mime:"image/avif"}}},{"./common":262}],265:[function(_,oe,ae){"use strict";var m=_("../common").str2arr,x=_("../common").sliceEq,T=_("../common").readUInt32BE,b=_("../miaf_utils"),e=_("../exif_utils"),o=m("ftyp");oe.exports=function(a){if(x(a,4,o)){var l=b.unbox(a,0);if(l){var i=b.getMimeType(l.data);if(i){for(var d,u=l.end;;){var s=b.unbox(a,u);if(!s)break;if(u=s.end,"mdat"===s.boxtype)return;if("meta"===s.boxtype){d=s.data;break}}if(d){var c=b.readSizeFromMeta(d);if(c){var h={width:c.width,height:c.height,type:i.type,mime:i.mime,wUnits:"px",hUnits:"px"};if(c.variants.length>1&&(h.variants=c.variants),c.orientation&&(h.orientation=c.orientation),c.exif_location&&c.exif_location.offset+c.exif_location.length<=a.length){var p=T(a,c.exif_location.offset),v=a.slice(c.exif_location.offset+p+4,c.exif_location.offset+c.exif_location.length),g=e.get_orientation(v);g>0&&(h.orientation=g)}return h}}}}}}},{"../common":262,"../exif_utils":263,"../miaf_utils":264}],266:[function(_,oe,ae){"use strict";var m=_("../common").str2arr,x=_("../common").sliceEq,T=_("../common").readUInt16LE,b=m("BM");oe.exports=function(e){if(!(e.length<26)&&x(e,0,b))return{width:T(e,18),height:T(e,22),type:"bmp",mime:"image/bmp",wUnits:"px",hUnits:"px"}}},{"../common":262}],267:[function(_,oe,ae){"use strict";var m=_("../common").str2arr,x=_("../common").sliceEq,T=_("../common").readUInt16LE,b=m("GIF87a"),e=m("GIF89a");oe.exports=function(o){if(!(o.length<10)&&(x(o,0,b)||x(o,0,e)))return{width:T(o,6),height:T(o,8),type:"gif",mime:"image/gif",wUnits:"px",hUnits:"px"}}},{"../common":262}],268:[function(_,oe,ae){"use strict";var m=_("../common").readUInt16LE;oe.exports=function(x){var T=m(x,0),b=m(x,2),e=m(x,4);if(0===T&&1===b&&e){for(var o=[],a={width:0,height:0},l=0;l<e;l++){var i=x[6+16*l]||256,d=x[6+16*l+1]||256,u={width:i,height:d};o.push(u),(i>a.width||d>a.height)&&(a=u)}return{width:a.width,height:a.height,variants:o,type:"ico",mime:"image/x-icon",wUnits:"px",hUnits:"px"}}}},{"../common":262}],269:[function(_,oe,ae){"use strict";var m=_("../common").readUInt16BE,x=_("../common").str2arr,T=_("../common").sliceEq,b=_("../exif_utils"),e=x("Exif\0\0");oe.exports=function(o){if(!(o.length<2)&&255===o[0]&&216===o[1]&&255===o[2])for(var a=2;;){for(;;){if(o.length-a<2)return;if(255===o[a++])break}for(var l,i,d=o[a++];255===d;)d=o[a++];if(208<=d&&d<=217||1===d)l=0;else{if(!(192<=d&&d<=254)||o.length-a<2)return;l=m(o,a)-2,a+=2}if(217===d||218===d)return;if(225===d&&l>=10&&T(o,a,e)&&(i=b.get_orientation(o.slice(a+6,a+l))),l>=5&&192<=d&&d<=207&&196!==d&&200!==d&&204!==d){if(o.length-a<l)return;var u={width:m(o,a+3),height:m(o,a+1),type:"jpg",mime:"image/jpeg",wUnits:"px",hUnits:"px"};return i>0&&(u.orientation=i),u}a+=l}}},{"../common":262,"../exif_utils":263}],270:[function(_,oe,ae){"use strict";var m=_("../common").str2arr,x=_("../common").sliceEq,T=_("../common").readUInt32BE,b=m("\x89PNG\r\n\x1a\n"),e=m("IHDR");oe.exports=function(o){if(!(o.length<24)&&x(o,0,b)&&x(o,12,e))return{width:T(o,16),height:T(o,20),type:"png",mime:"image/png",wUnits:"px",hUnits:"px"}}},{"../common":262}],271:[function(_,oe,ae){"use strict";var m=_("../common").str2arr,x=_("../common").sliceEq,T=_("../common").readUInt32BE,b=m("8BPS\0\x01");oe.exports=function(e){if(!(e.length<22)&&x(e,0,b))return{width:T(e,18),height:T(e,14),type:"psd",mime:"image/vnd.adobe.photoshop",wUnits:"px",hUnits:"px"}}},{"../common":262}],272:[function(_,oe,ae){"use strict";function m(i){return"number"==typeof i&&isFinite(i)&&i>0}var x=/<[-_.:a-zA-Z0-9][^>]*>/,T=/^<([-_.:a-zA-Z0-9]+:)?svg\s/,b=/[^-]\bwidth="([^%]+?)"|[^-]\bwidth='([^%]+?)'/,e=/\bheight="([^%]+?)"|\bheight='([^%]+?)'/,o=/\bview[bB]ox="(.+?)"|\bview[bB]ox='(.+?)'/,a=/in$|mm$|cm$|pt$|pc$|px$|em$|ex$/;function l(i){return a.test(i)?i.match(a)[0]:"px"}oe.exports=function(i){if(function(M){var A,k=0,C=M.length;for(239===M[0]&&187===M[1]&&191===M[2]&&(k=3);k<C&&(32===(A=M[k])||9===A||13===A||10===A);)k++;return k!==C&&60===M[k]}(i)){for(var d="",u=0;u<i.length;u++)d+=String.fromCharCode(i[u]);var s=(d.match(x)||[""])[0];if(T.test(s)){var c=(A=(M=s).match(b),k=M.match(e),C=M.match(o),{width:A&&(A[1]||A[2]),height:k&&(k[1]||k[2]),viewbox:C&&(C[1]||C[2])}),h=parseFloat(c.width),p=parseFloat(c.height);if(c.width&&c.height)return m(h)&&m(p)?{width:h,height:p,type:"svg",mime:"image/svg+xml",wUnits:l(c.width),hUnits:l(c.height)}:void 0;var v=(c.viewbox||"").split(" "),g={width:v[2],height:v[3]},f=parseFloat(g.width),w=parseFloat(g.height);if(m(f)&&m(w)&&l(g.width)===l(g.height)){var y=f/w;return c.width?m(h)?{width:h,height:h/y,type:"svg",mime:"image/svg+xml",wUnits:l(c.width),hUnits:l(c.width)}:void 0:c.height?m(p)?{width:p*y,height:p,type:"svg",mime:"image/svg+xml",wUnits:l(c.height),hUnits:l(c.height)}:void 0:{width:f,height:w,type:"svg",mime:"image/svg+xml",wUnits:l(g.width),hUnits:l(g.height)}}}}var M,A,k,C}},{}],273:[function(_,oe,ae){"use strict";var m=_("../common").str2arr,x=_("../common").sliceEq,T=_("../common").readUInt16LE,b=_("../common").readUInt16BE,e=_("../common").readUInt32LE,o=_("../common").readUInt32BE,a=m("II*\0"),l=m("MM\0*");function i(s,c,h){return h?b(s,c):T(s,c)}function d(s,c,h){return h?o(s,c):e(s,c)}function u(s,c,h){var p=i(s,c+2,h);return 1!==d(s,c+4,h)||3!==p&&4!==p?null:3===p?i(s,c+8,h):d(s,c+8,h)}oe.exports=function(s){if(!(s.length<8)&&(x(s,0,a)||x(s,0,l))){var c=77===s[0],h=d(s,4,c)-8;if(!(h<0)){var p=h+8;if(!(s.length-p<2)){var v=12*i(s,p+0,c);if(!(v<=0||(p+=2,s.length-p<v))){var g,f,w,y;for(g=0;g<v;g+=12)256===(y=i(s,p+g,c))?f=u(s,p+g,c):257===y&&(w=u(s,p+g,c));return f&&w?{width:f,height:w,type:"tiff",mime:"image/tiff",wUnits:"px",hUnits:"px"}:void 0}}}}}},{"../common":262}],274:[function(_,oe,ae){"use strict";var m=_("../common").str2arr,x=_("../common").sliceEq,T=_("../common").readUInt16LE,b=_("../common").readUInt32LE,e=_("../exif_utils"),o=m("RIFF"),a=m("WEBP");function l(u,s){if(157===u[s+3]&&1===u[s+4]&&42===u[s+5])return{width:16383&T(u,s+6),height:16383&T(u,s+8),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}function i(u,s){if(47===u[s]){var c=b(u,s+1);return{width:1+(16383&c),height:1+(c>>14&16383),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}}function d(u,s){return{width:1+(u[s+6]<<16|u[s+5]<<8|u[s+4]),height:1+(u[s+9]<<s|u[s+8]<<8|u[s+7]),type:"webp",mime:"image/webp",wUnits:"px",hUnits:"px"}}oe.exports=function(u){if(!(u.length<16)&&(x(u,0,o)||x(u,8,a))){var s=12,c=null,h=0,p=b(u,4)+8;if(!(p>u.length)){for(;s+8<p;)if(0!==u[s]){var v=String.fromCharCode.apply(null,u.slice(s,s+4)),g=b(u,s+4);"VP8 "===v&&g>=10?c=c||l(u,s+8):"VP8L"===v&&g>=9?c=c||i(u,s+8):"VP8X"===v&&g>=10?c=c||d(u,s+8):"EXIF"===v&&(h=e.get_orientation(u.slice(s+8,s+8+g)),s=1/0),s+=8+g}else s++;if(c)return h>0&&(c.orientation=h),c}}}},{"../common":262,"../exif_utils":263}],275:[function(_,oe,ae){"use strict";oe.exports={avif:_("./parse_sync/avif"),bmp:_("./parse_sync/bmp"),gif:_("./parse_sync/gif"),ico:_("./parse_sync/ico"),jpeg:_("./parse_sync/jpeg"),png:_("./parse_sync/png"),psd:_("./parse_sync/psd"),svg:_("./parse_sync/svg"),tiff:_("./parse_sync/tiff"),webp:_("./parse_sync/webp")}},{"./parse_sync/avif":265,"./parse_sync/bmp":266,"./parse_sync/gif":267,"./parse_sync/ico":268,"./parse_sync/jpeg":269,"./parse_sync/png":270,"./parse_sync/psd":271,"./parse_sync/svg":272,"./parse_sync/tiff":273,"./parse_sync/webp":274}],276:[function(_,oe,ae){"use strict";var m=_("./lib/parsers_sync");oe.exports=function(x){return function(T){for(var b=Object.keys(m),e=0;e<b.length;e++){var o=m[b[e]](T);if(o)return o}return null}(x)},oe.exports.parsers=m},{"./lib/parsers_sync":275}],277:[function(_,oe,ae){var m,x,T=oe.exports={};function b(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function o(p){if(m===setTimeout)return setTimeout(p,0);if((m===b||!m)&&setTimeout)return m=setTimeout,setTimeout(p,0);try{return m(p,0)}catch(v){try{return m.call(null,p,0)}catch(g){return m.call(this,p,0)}}}!function(){try{m="function"==typeof setTimeout?setTimeout:b}catch(p){m=b}try{x="function"==typeof clearTimeout?clearTimeout:e}catch(p){x=e}}();var a,l=[],i=!1,d=-1;function u(){i&&a&&(i=!1,a.length?l=a.concat(l):d=-1,l.length&&s())}function s(){if(!i){var p=o(u);i=!0;for(var v=l.length;v;){for(a=l,l=[];++d<v;)a&&a[d].run();d=-1,v=l.length}a=null,i=!1,function(g){if(x===clearTimeout)return clearTimeout(g);if((x===e||!x)&&clearTimeout)return x=clearTimeout,clearTimeout(g);try{x(g)}catch(f){try{return x.call(null,g)}catch(w){return x.call(this,g)}}}(p)}}function c(p,v){this.fun=p,this.array=v}function h(){}T.nextTick=function(p){var v=new Array(arguments.length-1);if(arguments.length>1)for(var g=1;g<arguments.length;g++)v[g-1]=arguments[g];l.push(new c(p,v)),1!==l.length||i||o(s)},c.prototype.run=function(){this.fun.apply(null,this.array)},T.title="browser",T.browser=!0,T.env={},T.argv=[],T.version="",T.versions={},T.on=h,T.addListener=h,T.once=h,T.off=h,T.removeListener=h,T.removeAllListeners=h,T.emit=h,T.prependListener=h,T.prependOnceListener=h,T.listeners=function(p){return[]},T.binding=function(p){throw new Error("process.binding is not supported")},T.cwd=function(){return"/"},T.chdir=function(p){throw new Error("process.chdir is not supported")},T.umask=function(){return 0}},{}],278:[function(_,oe,ae){(function(m){(function(){for(var x=_("performance-now"),T="undefined"==typeof window?m:window,b=["moz","webkit"],e="AnimationFrame",o=T["request"+e],a=T["cancel"+e]||T["cancelRequest"+e],l=0;!o&&l<b.length;l++)o=T[b[l]+"Request"+e],a=T[b[l]+"Cancel"+e]||T[b[l]+"CancelRequest"+e];if(!o||!a){var i=0,d=0,u=[];o=function(s){if(0===u.length){var c=x(),h=Math.max(0,1e3/60-(c-i));i=h+c,setTimeout(function(){var p=u.slice(0);u.length=0;for(var v=0;v<p.length;v++)if(!p[v].cancelled)try{p[v].callback(i)}catch(g){setTimeout(function(){throw g},0)}},Math.round(h))}return u.push({handle:++d,callback:s,cancelled:!1}),d},a=function(s){for(var c=0;c<u.length;c++)u[c].handle===s&&(u[c].cancelled=!0)}}oe.exports=function(s){return o.call(T,s)},oe.exports.cancel=function(){a.apply(T,arguments)},oe.exports.polyfill=function(s){s||(s=T),s.requestAnimationFrame=o,s.cancelAnimationFrame=a}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"performance-now":252}],279:[function(_,oe,ae){"use strict";var m=_("array-bounds"),x=_("color-normalize"),T=_("update-diff"),b=_("pick-by-alias"),e=_("object-assign"),o=_("flatten-vertex-data"),a=_("to-float32"),l=a.float32,i=a.fract32;oe.exports=function(u,s){if("function"==typeof u?(s||(s={}),s.regl=u):s=u,s.length&&(s.positions=s),!(u=s.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");var c,h,p,v,g,f,w=u._gl,y={color:"black",capSize:5,lineWidth:1,opacity:1,viewport:null,range:null,offset:0,count:0,bounds:null,positions:[],errors:[]},M=[];return v=u.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array(0)}),h=u.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),p=u.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),g=u.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)}),f=u.buffer({usage:"static",type:"float",data:d}),P(s),c=u({vert:"\n\t\tprecision highp float;\n\n\t\tattribute vec2 position, positionFract;\n\t\tattribute vec4 error;\n\t\tattribute vec4 color;\n\n\t\tattribute vec2 direction, lineOffset, capOffset;\n\n\t\tuniform vec4 viewport;\n\t\tuniform float lineWidth, capSize;\n\t\tuniform vec2 scale, scaleFract, translate, translateFract;\n\n\t\tvarying vec4 fragColor;\n\n\t\tvoid main() {\n\t\t\tfragColor = color / 255.;\n\n\t\t\tvec2 pixelOffset = lineWidth * lineOffset + (capSize + lineWidth) * capOffset;\n\n\t\t\tvec2 dxy = -step(.5, direction.xy) * error.xz + step(direction.xy, vec2(-.5)) * error.yw;\n\n\t\t\tvec2 position = position + dxy;\n\n\t\t\tvec2 pos = (position + translate) * scale\n\t\t\t\t+ (positionFract + translateFract) * scale\n\t\t\t\t+ (position + translate) * scaleFract\n\t\t\t\t+ (positionFract + translateFract) * scaleFract;\n\n\t\t\tpos += pixelOffset / viewport.zw;\n\n\t\t\tgl_Position = vec4(pos * 2. - 1., 0, 1);\n\t\t}\n\t\t",frag:"\n\t\tprecision highp float;\n\n\t\tvarying vec4 fragColor;\n\n\t\tuniform float opacity;\n\n\t\tvoid main() {\n\t\t\tgl_FragColor = fragColor;\n\t\t\tgl_FragColor.a *= opacity;\n\t\t}\n\t\t",uniforms:{range:u.prop("range"),lineWidth:u.prop("lineWidth"),capSize:u.prop("capSize"),opacity:u.prop("opacity"),scale:u.prop("scale"),translate:u.prop("translate"),scaleFract:u.prop("scaleFract"),translateFract:u.prop("translateFract"),viewport:function(F,R){return[R.viewport.x,R.viewport.y,F.viewportWidth,F.viewportHeight]}},attributes:{color:{buffer:v,offset:function(F,R){return 4*R.offset},divisor:1},position:{buffer:h,offset:function(F,R){return 8*R.offset},divisor:1},positionFract:{buffer:p,offset:function(F,R){return 8*R.offset},divisor:1},error:{buffer:g,offset:function(F,R){return 16*R.offset},divisor:1},direction:{buffer:f,stride:24,offset:0},lineOffset:{buffer:f,stride:24,offset:8},capOffset:{buffer:f,stride:24,offset:16}},primitive:"triangles",blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:!1},scissor:{enable:!0,box:u.prop("viewport")},viewport:u.prop("viewport"),stencil:!1,instances:u.prop("count"),count:d.length}),e(A,{update:P,draw:k,destroy:D,regl:u,gl:w,canvas:w.canvas,groups:M}),A;function A(F){F?P(F):null===F&&D(),k()}function k(F){if("number"==typeof F)return C(F);F&&!Array.isArray(F)&&(F=[F]),u._refresh(),M.forEach(function(R,L){R&&(F&&(R.draw=!!F[L]),R.draw?C(L):R.draw=!0)})}function C(F){"number"==typeof F&&(F=M[F]),null!=F&&F&&F.count&&F.color&&F.opacity&&F.positions&&F.positions.length>1&&(F.scaleRatio=[F.scale[0]*F.viewport.width,F.scale[1]*F.viewport.height],c(F),F.after&&F.after(F))}function P(F){if(F){null!=F.length?"number"==typeof F[0]&&(F=[{positions:F}]):Array.isArray(F)||(F=[F]);var R=0,L=0;if(A.groups=M=F.map(function(J,$){var Q=M[$];return J&&("function"==typeof J?J={after:J}:"number"==typeof J[0]&&(J={positions:J}),J=b(J,{color:"color colors fill",capSize:"capSize cap capsize cap-size",lineWidth:"lineWidth line-width width line thickness",opacity:"opacity alpha",range:"range dataBox",viewport:"viewport viewBox",errors:"errors error",positions:"positions position data points"}),Q||(M[$]=Q={id:$,scale:null,translate:null,scaleFract:null,translateFract:null,draw:!0},J=e({},y,J)),T(Q,J,[{lineWidth:function(se){return.5*+se},capSize:function(se){return.5*+se},opacity:parseFloat,errors:function(se){return se=o(se),L+=se.length,se},positions:function(se,j){return se=o(se,"float64"),j.count=Math.floor(se.length/2),j.bounds=m(se,2),j.offset=R,R+=j.count,se}},{color:function(se,j){var G=j.count;if(se||(se="transparent"),!Array.isArray(se)||"number"==typeof se[0]){var W=se;se=Array(G);for(var ie=0;ie<G;ie++)se[ie]=W}if(se.length<G)throw Error("Not enough colors");for(var q=new Uint8Array(4*G),te=0;te<G;te++){var ne=x(se[te],"uint8");q.set(ne,4*te)}return q},range:function(se,j,G){return se||(se=j.bounds),j.scale=[1/(se[2]-se[0]),1/(se[3]-se[1])],j.translate=[-se[0],-se[1]],j.scaleFract=i(j.scale),j.translateFract=i(j.translate),se},viewport:function(se){var j;return Array.isArray(se)?j={x:se[0],y:se[1],width:se[2]-se[0],height:se[3]-se[1]}:se?((j={x:se.x||se.left||0,y:se.y||se.top||0}).width=se.right?se.right-j.x:se.w||se.width||0,j.height=se.bottom?se.bottom-j.y:se.h||se.height||0):j={x:0,y:0,width:w.drawingBufferWidth,height:w.drawingBufferHeight},j}}])),Q}),R||L){var I=M.reduce(function(J,$,Q){return J+($?$.count:0)},0),B=new Float64Array(2*I),V=new Uint8Array(4*I),Z=new Float32Array(4*I);M.forEach(function(J,$){if(J){var Q=J.positions,j=J.offset,W=J.errors;J.count&&(V.set(J.color,4*j),Z.set(W,4*j),B.set(Q,2*j))}});var Y=l(B);h(Y);var ee=i(B,Y);p(ee),v(V),g(Z)}}}function D(){h.destroy(),p.destroy(),v.destroy(),g.destroy(),f.destroy()}};var d=[[1,0,0,1,0,0],[1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,-1,0,0],[-1,0,0,1,0,0],[1,0,0,1,0,0],[1,0,-1,0,0,1],[1,0,-1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,-1],[1,0,1,0,0,1],[1,0,-1,0,0,1],[-1,0,-1,0,0,1],[-1,0,-1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,-1],[-1,0,1,0,0,1],[-1,0,-1,0,0,1],[0,1,1,0,0,0],[0,1,-1,0,0,0],[0,-1,-1,0,0,0],[0,-1,-1,0,0,0],[0,1,1,0,0,0],[0,-1,1,0,0,0],[0,1,0,-1,1,0],[0,1,0,-1,-1,0],[0,1,0,1,-1,0],[0,1,0,1,1,0],[0,1,0,-1,1,0],[0,1,0,1,-1,0],[0,-1,0,-1,1,0],[0,-1,0,-1,-1,0],[0,-1,0,1,-1,0],[0,-1,0,1,1,0],[0,-1,0,-1,1,0],[0,-1,0,1,-1,0]]},{"array-bounds":71,"color-normalize":89,"flatten-vertex-data":191,"object-assign":247,"pick-by-alias":253,"to-float32":313,"update-diff":329}],280:[function(_,oe,ae){"use strict";var m=_("color-normalize"),x=_("array-bounds"),T=_("object-assign"),b=_("glslify"),e=_("pick-by-alias"),o=_("flatten-vertex-data"),a=_("earcut"),l=_("array-normalize"),i=_("to-float32"),d=i.float32,u=i.fract32,s=_("es6-weak-map"),c=_("parse-rect"),h=_("array-find-index");function p(v,g){if(!(this instanceof p))return new p(v,g);if("function"==typeof v?(g||(g={}),g.regl=v):g=v,g.length&&(g.positions=g),!(v=g.regl).hasExtension("ANGLE_instanced_arrays"))throw Error("regl-error2d: `ANGLE_instanced_arrays` extension should be enabled");this.gl=v._gl,this.regl=v,this.passes=[],this.shaders=p.shaders.has(v)?p.shaders.get(v):p.shaders.set(v,p.createShaders(v)).get(v),this.update(g)}oe.exports=p,p.dashMult=2,p.maxPatternLength=256,p.precisionThreshold=3e6,p.maxPoints=1e4,p.maxLines=2048,p.shaders=new s,p.createShaders=function(v){var g,f=v.buffer({usage:"static",type:"float",data:[0,1,0,0,1,1,1,0]}),w={primitive:"triangle strip",instances:v.prop("count"),count:4,offset:0,uniforms:{miterMode:function(M,A){return"round"===A.join?2:1},miterLimit:v.prop("miterLimit"),scale:v.prop("scale"),scaleFract:v.prop("scaleFract"),translateFract:v.prop("translateFract"),translate:v.prop("translate"),thickness:v.prop("thickness"),dashTexture:v.prop("dashTexture"),opacity:v.prop("opacity"),pixelRatio:v.context("pixelRatio"),id:v.prop("id"),dashLength:v.prop("dashLength"),viewport:function(M,A){return[A.viewport.x,A.viewport.y,M.viewportWidth,M.viewportHeight]},depth:v.prop("depth")},blend:{enable:!0,color:[0,0,0,0],equation:{rgb:"add",alpha:"add"},func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},depth:{enable:function(M,A){return!A.overlay}},stencil:{enable:!1},scissor:{enable:!0,box:v.prop("viewport")},viewport:v.prop("viewport")},y=v(T({vert:b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, aCoordFract, bCoordFract;\nattribute vec4 color;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvec2 project(vec2 position, vec2 positionFract, vec2 scale, vec2 scaleFract, vec2 translate, vec2 translateFract) {\n\t// the order is important\n\treturn position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n}\n\nvoid main() {\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineOffset = lineTop * 2. - 1.;\n\n\tvec2 diff = (bCoord + bCoordFract - aCoord - aCoordFract);\n\ttangent = normalize(diff * scale * viewport.zw);\n\tvec2 normal = vec2(-tangent.y, tangent.x);\n\n\tvec2 position = project(aCoord, aCoordFract, scale, scaleFract, translate, translateFract) * lineStart\n\t\t+ project(bCoord, bCoordFract, scale, scaleFract, translate, translateFract) * lineEnd\n\n\t\t+ thickness * normal * .5 * lineOffset / viewport.zw;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n}\n"]),frag:b(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\n\nvoid main() {\n\tfloat alpha = 1.;\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:f,divisor:0,stride:8,offset:0},lineTop:{buffer:f,divisor:0,stride:8,offset:4},aCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:16,divisor:1},aCoordFract:{buffer:v.prop("positionFractBuffer"),stride:8,offset:8,divisor:1},bCoordFract:{buffer:v.prop("positionFractBuffer"),stride:8,offset:16,divisor:1},color:{buffer:v.prop("colorBuffer"),stride:4,offset:0,divisor:1}}},w));try{g=v(T({cull:{enable:!0,face:"back"},vert:b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 aCoord, bCoord, nextCoord, prevCoord;\nattribute vec4 aColor, bColor;\nattribute float lineEnd, lineTop;\n\nuniform vec2 scale, translate;\nuniform float thickness, pixelRatio, id, depth;\nuniform vec4 viewport;\nuniform float miterLimit, miterMode;\n\nvarying vec4 fragColor;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 tangent;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nconst float REVERSE_THRESHOLD = -.875;\nconst float MIN_DIFF = 1e-6;\n\n// TODO: possible optimizations: avoid overcalculating all for vertices and calc just one instead\n// TODO: precalculate dot products, normalize things beforehead etc.\n// TODO: refactor to rectangular algorithm\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nbool isNaN( float val ){\n  return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\n\nvoid main() {\n\tvec2 aCoord = aCoord, bCoord = bCoord, prevCoord = prevCoord, nextCoord = nextCoord;\n\n  vec2 adjustedScale;\n  adjustedScale.x = (abs(scale.x) < MIN_DIFF) ? MIN_DIFF : scale.x;\n  adjustedScale.y = (abs(scale.y) < MIN_DIFF) ? MIN_DIFF : scale.y;\n\n  vec2 scaleRatio = adjustedScale * viewport.zw;\n\tvec2 normalWidth = thickness / scaleRatio;\n\n\tfloat lineStart = 1. - lineEnd;\n\tfloat lineBot = 1. - lineTop;\n\n\tfragColor = (lineStart * aColor + lineEnd * bColor) / 255.;\n\n\tif (isNaN(aCoord.x) || isNaN(aCoord.y) || isNaN(bCoord.x) || isNaN(bCoord.y)) return;\n\n\tif (aCoord == prevCoord) prevCoord = aCoord + normalize(bCoord - aCoord);\n\tif (bCoord == nextCoord) nextCoord = bCoord - normalize(bCoord - aCoord);\n\n\tvec2 prevDiff = aCoord - prevCoord;\n\tvec2 currDiff = bCoord - aCoord;\n\tvec2 nextDiff = nextCoord - bCoord;\n\n\tvec2 prevTangent = normalize(prevDiff * scaleRatio);\n\tvec2 currTangent = normalize(currDiff * scaleRatio);\n\tvec2 nextTangent = normalize(nextDiff * scaleRatio);\n\n\tvec2 prevNormal = vec2(-prevTangent.y, prevTangent.x);\n\tvec2 currNormal = vec2(-currTangent.y, currTangent.x);\n\tvec2 nextNormal = vec2(-nextTangent.y, nextTangent.x);\n\n\tvec2 startJoinDirection = normalize(prevTangent - currTangent);\n\tvec2 endJoinDirection = normalize(currTangent - nextTangent);\n\n\t// collapsed/unidirectional segment cases\n\t// FIXME: there should be more elegant solution\n\tvec2 prevTanDiff = abs(prevTangent - currTangent);\n\tvec2 nextTanDiff = abs(nextTangent - currTangent);\n\tif (max(prevTanDiff.x, prevTanDiff.y) < MIN_DIFF) {\n\t\tstartJoinDirection = currNormal;\n\t}\n\tif (max(nextTanDiff.x, nextTanDiff.y) < MIN_DIFF) {\n\t\tendJoinDirection = currNormal;\n\t}\n\tif (aCoord == bCoord) {\n\t\tendJoinDirection = startJoinDirection;\n\t\tcurrNormal = prevNormal;\n\t\tcurrTangent = prevTangent;\n\t}\n\n\ttangent = currTangent;\n\n\t//calculate join shifts relative to normals\n\tfloat startJoinShift = dot(currNormal, startJoinDirection);\n\tfloat endJoinShift = dot(currNormal, endJoinDirection);\n\n\tfloat startMiterRatio = abs(1. / startJoinShift);\n\tfloat endMiterRatio = abs(1. / endJoinShift);\n\n\tvec2 startJoin = startJoinDirection * startMiterRatio;\n\tvec2 endJoin = endJoinDirection * endMiterRatio;\n\n\tvec2 startTopJoin, startBotJoin, endTopJoin, endBotJoin;\n\tstartTopJoin = sign(startJoinShift) * startJoin * .5;\n\tstartBotJoin = -startTopJoin;\n\n\tendTopJoin = sign(endJoinShift) * endJoin * .5;\n\tendBotJoin = -endTopJoin;\n\n\tvec2 aTopCoord = aCoord + normalWidth * startTopJoin;\n\tvec2 bTopCoord = bCoord + normalWidth * endTopJoin;\n\tvec2 aBotCoord = aCoord + normalWidth * startBotJoin;\n\tvec2 bBotCoord = bCoord + normalWidth * endBotJoin;\n\n\t//miter anti-clipping\n\tfloat baClipping = distToLine(bCoord, aCoord, aBotCoord) / dot(normalize(normalWidth * endBotJoin), normalize(normalWidth.yx * vec2(-startBotJoin.y, startBotJoin.x)));\n\tfloat abClipping = distToLine(aCoord, bCoord, bTopCoord) / dot(normalize(normalWidth * startBotJoin), normalize(normalWidth.yx * vec2(-endBotJoin.y, endBotJoin.x)));\n\n\t//prevent close to reverse direction switch\n\tbool prevReverse = dot(currTangent, prevTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, prevNormal)) * min(length(prevDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\tbool nextReverse = dot(currTangent, nextTangent) <= REVERSE_THRESHOLD && abs(dot(currTangent, nextNormal)) * min(length(nextDiff), length(currDiff)) <  length(normalWidth * currNormal);\n\n\tif (prevReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * startJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / startMiterRatio, 1.);\n\t\taBotCoord = aCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\taTopCoord = aCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!nextReverse && baClipping > 0. && baClipping < length(normalWidth * endBotJoin)) {\n\t\t//handle miter clipping\n\t\tbTopCoord -= normalWidth * endTopJoin;\n\t\tbTopCoord += normalize(endTopJoin * normalWidth) * baClipping;\n\t}\n\n\tif (nextReverse) {\n\t\t//make join rectangular\n\t\tvec2 miterShift = normalWidth * endJoinDirection * miterLimit * .5;\n\t\tfloat normalAdjust = 1. - min(miterLimit / endMiterRatio, 1.);\n\t\tbBotCoord = bCoord + miterShift - normalAdjust * normalWidth * currNormal * .5;\n\t\tbTopCoord = bCoord + miterShift + normalAdjust * normalWidth * currNormal * .5;\n\t}\n\telse if (!prevReverse && abClipping > 0. && abClipping < length(normalWidth * startBotJoin)) {\n\t\t//handle miter clipping\n\t\taBotCoord -= normalWidth * startBotJoin;\n\t\taBotCoord += normalize(startBotJoin * normalWidth) * abClipping;\n\t}\n\n\tvec2 aTopPosition = (aTopCoord) * adjustedScale + translate;\n\tvec2 aBotPosition = (aBotCoord) * adjustedScale + translate;\n\n\tvec2 bTopPosition = (bTopCoord) * adjustedScale + translate;\n\tvec2 bBotPosition = (bBotCoord) * adjustedScale + translate;\n\n\t//position is normalized 0..1 coord on the screen\n\tvec2 position = (aTopPosition * lineTop + aBotPosition * lineBot) * lineStart + (bTopPosition * lineTop + bBotPosition * lineBot) * lineEnd;\n\n\tstartCoord = aCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\tendCoord = bCoord * scaleRatio + translate * viewport.zw + viewport.xy;\n\n\tgl_Position = vec4(position  * 2.0 - 1.0, depth, 1);\n\n\tenableStartMiter = step(dot(currTangent, prevTangent), .5);\n\tenableEndMiter = step(dot(currTangent, nextTangent), .5);\n\n\t//bevel miter cutoffs\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * miterLimit * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * miterLimit * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n\n\t//round miter cutoffs\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tvec2 startMiterWidth = vec2(startJoinDirection) * thickness * abs(dot(startJoinDirection, currNormal)) * .5;\n\t\t\tstartCutoff = vec4(aCoord, aCoord);\n\t\t\tstartCutoff.zw += vec2(-startJoinDirection.y, startJoinDirection.x) / scaleRatio;\n\t\t\tstartCutoff = startCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tstartCutoff += viewport.xyxy;\n\t\t\tstartCutoff += startMiterWidth.xyxy;\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tvec2 endMiterWidth = vec2(endJoinDirection) * thickness * abs(dot(endJoinDirection, currNormal)) * .5;\n\t\t\tendCutoff = vec4(bCoord, bCoord);\n\t\t\tendCutoff.zw += vec2(-endJoinDirection.y, endJoinDirection.x)  / scaleRatio;\n\t\t\tendCutoff = endCutoff * scaleRatio.xyxy + translate.xyxy * viewport.zwzw;\n\t\t\tendCutoff += viewport.xyxy;\n\t\t\tendCutoff += endMiterWidth.xyxy;\n\t\t}\n\t}\n}\n"]),frag:b(["precision highp float;\n#define GLSLIFY 1\n\nuniform float dashLength, pixelRatio, thickness, opacity, id, miterMode;\nuniform sampler2D dashTexture;\n\nvarying vec4 fragColor;\nvarying vec2 tangent;\nvarying vec4 startCutoff, endCutoff;\nvarying vec2 startCoord, endCoord;\nvarying float enableStartMiter, enableEndMiter;\n\nfloat distToLine(vec2 p, vec2 a, vec2 b) {\n\tvec2 diff = b - a;\n\tvec2 perp = normalize(vec2(-diff.y, diff.x));\n\treturn dot(p - a, perp);\n}\n\nvoid main() {\n\tfloat alpha = 1., distToStart, distToEnd;\n\tfloat cutoff = thickness * .5;\n\n\t//bevel miter\n\tif (miterMode == 1.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToStart + 1., 0.), 1.);\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < -1.) {\n\t\t\t\tdiscard;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\talpha *= min(max(distToEnd + 1., 0.), 1.);\n\t\t}\n\t}\n\n\t// round miter\n\telse if (miterMode == 2.) {\n\t\tif (enableStartMiter == 1.) {\n\t\t\tdistToStart = distToLine(gl_FragCoord.xy, startCutoff.xy, startCutoff.zw);\n\t\t\tif (distToStart < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - startCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\n\t\tif (enableEndMiter == 1.) {\n\t\t\tdistToEnd = distToLine(gl_FragCoord.xy, endCutoff.xy, endCutoff.zw);\n\t\t\tif (distToEnd < 0.) {\n\t\t\t\tfloat radius = length(gl_FragCoord.xy - endCoord);\n\n\t\t\t\tif(radius > cutoff + .5) {\n\t\t\t\t\tdiscard;\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\talpha -= smoothstep(cutoff - .5, cutoff + .5, radius);\n\t\t\t}\n\t\t}\n\t}\n\n\tfloat t = fract(dot(tangent, gl_FragCoord.xy) / dashLength) * .5 + .25;\n\tfloat dash = texture2D(dashTexture, vec2(t, .5)).r;\n\n\tgl_FragColor = fragColor;\n\tgl_FragColor.a *= alpha * opacity * dash;\n}\n"]),attributes:{lineEnd:{buffer:f,divisor:0,stride:8,offset:0},lineTop:{buffer:f,divisor:0,stride:8,offset:4},aColor:{buffer:v.prop("colorBuffer"),stride:4,offset:0,divisor:1},bColor:{buffer:v.prop("colorBuffer"),stride:4,offset:4,divisor:1},prevCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:0,divisor:1},aCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:8,divisor:1},bCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:16,divisor:1},nextCoord:{buffer:v.prop("positionBuffer"),stride:8,offset:24,divisor:1}}},w))}catch(M){g=y}return{fill:v({primitive:"triangle",elements:function(M,A){return A.triangles},offset:0,vert:b(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec2 position, positionFract;\n\nuniform vec4 color;\nuniform vec2 scale, scaleFract, translate, translateFract;\nuniform float pixelRatio, id;\nuniform vec4 viewport;\nuniform float opacity;\n\nvarying vec4 fragColor;\n\nconst float MAX_LINES = 256.;\n\nvoid main() {\n\tfloat depth = (MAX_LINES - 4. - id) / (MAX_LINES);\n\n\tvec2 position = position * scale + translate\n       + positionFract * scale + translateFract\n       + position * scaleFract\n       + positionFract * scaleFract;\n\n\tgl_Position = vec4(position * 2.0 - 1.0, depth, 1);\n\n\tfragColor = color / 255.;\n\tfragColor.a *= opacity;\n}\n"]),frag:b(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n\tgl_FragColor = fragColor;\n}\n"]),uniforms:{scale:v.prop("scale"),color:v.prop("fill"),scaleFract:v.prop("scaleFract"),translateFract:v.prop("translateFract"),translate:v.prop("translate"),opacity:v.prop("opacity"),pixelRatio:v.context("pixelRatio"),id:v.prop("id"),viewport:function(M,A){return[A.viewport.x,A.viewport.y,M.viewportWidth,M.viewportHeight]}},attributes:{position:{buffer:v.prop("positionBuffer"),stride:8,offset:8},positionFract:{buffer:v.prop("positionFractBuffer"),stride:8,offset:8}},blend:w.blend,depth:{enable:!1},scissor:w.scissor,stencil:w.stencil,viewport:w.viewport}),rect:y,miter:g}},p.defaults={dashes:null,join:"miter",miterLimit:1,thickness:10,cap:"square",color:"black",opacity:1,overlay:!1,viewport:null,range:null,close:!1,fill:null},p.prototype.render=function(){for(var v,g=[],f=arguments.length;f--;)g[f]=arguments[f];g.length&&(v=this).update.apply(v,g),this.draw()},p.prototype.draw=function(){for(var v=this,g=[],f=arguments.length;f--;)g[f]=arguments[f];return(g.length?g:this.passes).forEach(function(w,y){var M;if(w&&Array.isArray(w))return(M=v).draw.apply(M,w);"number"==typeof w&&(w=v.passes[w]),w&&w.count>1&&w.opacity&&(v.regl._refresh(),w.fill&&w.triangles&&w.triangles.length>2&&v.shaders.fill(w),w.thickness&&(w.scale[0]*w.viewport.width>p.precisionThreshold||w.scale[1]*w.viewport.height>p.precisionThreshold||"rect"===w.join||!w.join&&(w.thickness<=2||w.count>=p.maxPoints)?v.shaders.rect(w):v.shaders.miter(w)))}),this},p.prototype.update=function(v){var g=this;if(v){null!=v.length?"number"==typeof v[0]&&(v=[{positions:v}]):Array.isArray(v)||(v=[v]);var f=this.regl,w=this.gl;if(v.forEach(function(C,P){var D=g.passes[P];if(void 0!==C)if(null!==C){if("number"==typeof C[0]&&(C={positions:C}),C=e(C,{positions:"positions points data coords",thickness:"thickness lineWidth lineWidths line-width linewidth width stroke-width strokewidth strokeWidth",join:"lineJoin linejoin join type mode",miterLimit:"miterlimit miterLimit",dashes:"dash dashes dasharray dash-array dashArray",color:"color colour stroke colors colours stroke-color strokeColor",fill:"fill fill-color fillColor",opacity:"alpha opacity",overlay:"overlay crease overlap intersect",close:"closed close closed-path closePath",range:"range dataBox",viewport:"viewport viewBox",hole:"holes hole hollow",splitNull:"splitNull"}),D||(g.passes[P]=D={id:P,scale:null,scaleFract:null,translate:null,translateFract:null,count:0,hole:[],depth:0,dashLength:1,dashTexture:f.texture({channels:1,data:new Uint8Array([255]),width:1,height:1,mag:"linear",min:"linear"}),colorBuffer:f.buffer({usage:"dynamic",type:"uint8",data:new Uint8Array}),positionBuffer:f.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),positionFractBuffer:f.buffer({usage:"dynamic",type:"float",data:new Uint8Array})},C=T({},p.defaults,C)),null!=C.thickness&&(D.thickness=parseFloat(C.thickness)),null!=C.opacity&&(D.opacity=parseFloat(C.opacity)),null!=C.miterLimit&&(D.miterLimit=parseFloat(C.miterLimit)),null!=C.overlay&&(D.overlay=!!C.overlay,P<p.maxLines&&(D.depth=2*(p.maxLines-1-P%p.maxLines)/p.maxLines-1)),null!=C.join&&(D.join=C.join),null!=C.hole&&(D.hole=C.hole),null!=C.fill&&(D.fill=C.fill?m(C.fill,"uint8"):null),null!=C.viewport&&(D.viewport=c(C.viewport)),D.viewport||(D.viewport=c([w.drawingBufferWidth,w.drawingBufferHeight])),null!=C.close&&(D.close=C.close),null===C.positions&&(C.positions=[]),C.positions){var F,R;if(C.positions.x&&C.positions.y){var L=C.positions.x,I=C.positions.y;R=D.count=Math.max(L.length,I.length),F=new Float64Array(2*R);for(var B=0;B<R;B++)F[2*B]=L[B],F[2*B+1]=I[B]}else F=o(C.positions,"float64"),R=D.count=Math.floor(F.length/2);var V=D.bounds=x(F,2);if(D.fill){for(var Z=[],Y={},ee=0,J=0,$=0,Q=D.count;J<Q;J++){var se=F[2*J],j=F[2*J+1];isNaN(se)||isNaN(j)||null==se||null==j?(se=F[2*ee],j=F[2*ee+1],Y[J]=ee):ee=J,Z[$++]=se,Z[$++]=j}if(C.splitNull){D.count-1 in Y||(Y[D.count]=D.count-1);var G=Object.keys(Y).map(Number).sort(function(Ot,tn){return Ot-tn}),W=[],ie=0,q=null!=D.hole?D.hole[0]:null;if(null!=q){var te=h(G,function(Ot){return Ot>=q});(G=G.slice(0,te)).push(q)}for(var ne=function(Ot){var tn=Z.slice(2*ie,2*G[Ot]).concat(q?Z.slice(2*q):[]),un=(D.hole||[]).map(function(Qe){return Qe-q+(G[Ot]-ie)}),Ze=a(tn,un);Ze=Ze.map(function(Qe){return Qe+ie+(Qe+ie<G[Ot]?0:q-G[Ot])}),W.push.apply(W,Ze),ie=G[Ot]+1},le=0;le<G.length;le++)ne(le);for(var ue=0,de=W.length;ue<de;ue++)null!=Y[W[ue]]&&(W[ue]=Y[W[ue]]);D.triangles=W}else{for(var he=a(Z,D.hole||[]),be=0,ge=he.length;be<ge;be++)null!=Y[he[be]]&&(he[be]=Y[he[be]]);D.triangles=he}}var we=new Float64Array(F);l(we,2,V);var Ce=new Float64Array(2*R+6);D.close?F[0]===F[2*R-2]&&F[1]===F[2*R-1]?(Ce[0]=we[2*R-4],Ce[1]=we[2*R-3]):(Ce[0]=we[2*R-2],Ce[1]=we[2*R-1]):(Ce[0]=we[0],Ce[1]=we[1]),Ce.set(we,2),D.close?F[0]===F[2*R-2]&&F[1]===F[2*R-1]?(Ce[2*R+2]=we[2],Ce[2*R+3]=we[3],D.count-=1):(Ce[2*R+2]=we[0],Ce[2*R+3]=we[1],Ce[2*R+4]=we[2],Ce[2*R+5]=we[3]):(Ce[2*R+2]=we[2*R-2],Ce[2*R+3]=we[2*R-1],Ce[2*R+4]=we[2*R-2],Ce[2*R+5]=we[2*R-1]);var De=d(Ce);D.positionBuffer(De);var Se=u(Ce,De);D.positionFractBuffer(Se)}if(C.range?D.range=C.range:D.range||(D.range=D.bounds),(C.range||C.positions)&&D.count){var Fe=D.bounds,Le=D.range[2]-D.range[0],Ee=D.range[3]-D.range[1];D.scale=[(Fe[2]-Fe[0])/Le,(Fe[3]-Fe[1])/Ee],D.translate=[-D.range[0]/Le+Fe[0]/Le||0,-D.range[1]/Ee+Fe[1]/Ee||0],D.scaleFract=u(D.scale),D.translateFract=u(D.translate)}if(C.dashes){var Pe,je=0;if(!C.dashes||C.dashes.length<2)je=1,Pe=new Uint8Array([255,255,255,255,255,255,255,255]);else{je=0;for(var Ge=0;Ge<C.dashes.length;++Ge)je+=C.dashes[Ge];Pe=new Uint8Array(je*p.dashMult);for(var Ke=0,lt=255,Ue=0;Ue<2;Ue++)for(var $e=0;$e<C.dashes.length;++$e){for(var et=0,tt=C.dashes[$e]*p.dashMult*.5;et<tt;++et)Pe[Ke++]=lt;lt^=255}}D.dashLength=je,D.dashTexture({channels:1,data:Pe,width:Pe.length,height:1,mag:"linear",min:"linear"},0,0)}if(C.color){var ct=D.count,xt=C.color;xt||(xt="transparent");var Ct=new Uint8Array(4*ct+4);if(Array.isArray(xt)&&"number"!=typeof xt[0]){for(var Ht=0;Ht<ct;Ht++){var zt=m(xt[Ht],"uint8");Ct.set(zt,4*Ht)}Ct.set(m(xt[0],"uint8"),4*ct)}else for(var ht=m(xt,"uint8"),ut=0;ut<ct+1;ut++)Ct.set(ht,4*ut);D.colorBuffer({usage:"dynamic",type:"uint8",data:Ct})}}else g.passes[P]=null}),v.length<this.passes.length){for(var y=v.length;y<this.passes.length;y++){var M=this.passes[y];M&&(M.colorBuffer.destroy(),M.positionBuffer.destroy(),M.dashTexture.destroy())}this.passes.length=v.length}for(var A=[],k=0;k<this.passes.length;k++)null!==this.passes[k]&&A.push(this.passes[k]);return this.passes=A,this}},p.prototype.destroy=function(){return this.passes.forEach(function(v){v.colorBuffer.destroy(),v.positionBuffer.destroy(),v.dashTexture.destroy()}),this.passes.length=0,this}},{"array-bounds":71,"array-find-index":72,"array-normalize":73,"color-normalize":89,earcut:129,"es6-weak-map":183,"flatten-vertex-data":191,glslify:227,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313}],281:[function(_,oe,ae){"use strict";function m(y,M){return function(A){if(Array.isArray(A))return A}(y)||function(A,k){var C=null==A?null:"undefined"!=typeof Symbol&&A[Symbol.iterator]||A["@@iterator"];if(null!=C){var P,D,F=[],R=!0,L=!1;try{for(C=C.call(A);!(R=(P=C.next()).done)&&(F.push(P.value),!k||F.length!==k);R=!0);}catch(I){L=!0,D=I}finally{try{R||null==C.return||C.return()}finally{if(L)throw D}}return F}}(y,M)||T(y,M)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(y){return function(M){if(Array.isArray(M))return b(M)}(y)||function(M){if("undefined"!=typeof Symbol&&null!=M[Symbol.iterator]||null!=M["@@iterator"])return Array.from(M)}(y)||T(y)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(y,M){if(y){if("string"==typeof y)return b(y,M);var A=Object.prototype.toString.call(y).slice(8,-1);return"Object"===A&&y.constructor&&(A=y.constructor.name),"Map"===A||"Set"===A?Array.from(y):"Arguments"===A||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(A)?b(y,M):void 0}}function b(y,M){(null==M||M>y.length)&&(M=y.length);for(var A=0,k=new Array(M);A<M;A++)k[A]=y[A];return k}var e=_("color-normalize"),o=_("array-bounds"),a=_("color-id"),l=_("@plotly/point-cluster"),i=_("object-assign"),d=_("glslify"),u=_("pick-by-alias"),s=_("update-diff"),c=_("flatten-vertex-data"),h=_("is-iexplorer"),p=_("to-float32"),v=_("parse-rect"),g=f;function f(y,M){var A=this;if(!(this instanceof f))return new f(y,M);"function"==typeof y?(M||(M={}),M.regl=y):(M=y,y=null),M&&M.length&&(M.positions=M);var k,C=(y=M.regl)._gl,P=[];this.tooManyColors=h,k=y.texture({data:new Uint8Array(1020),width:255,height:1,type:"uint8",format:"rgba",wrapS:"clamp",wrapT:"clamp",mag:"nearest",min:"nearest"}),i(this,{regl:y,gl:C,groups:[],markerCache:[null],markerTextures:[null],palette:P,paletteIds:{},paletteTexture:k,maxColors:255,maxSize:100,canvas:C.canvas}),this.update(M);var D={uniforms:{constPointSize:!!M.constPointSize,opacity:y.prop("opacity"),paletteSize:function(L,I){return[A.tooManyColors?0:255,k.height]},pixelRatio:y.context("pixelRatio"),scale:y.prop("scale"),scaleFract:y.prop("scaleFract"),translate:y.prop("translate"),translateFract:y.prop("translateFract"),markerTexture:y.prop("markerTexture"),paletteTexture:k},attributes:{x:function(L,I){return I.xAttr||{buffer:I.positionBuffer,stride:8,offset:0}},y:function(L,I){return I.yAttr||{buffer:I.positionBuffer,stride:8,offset:4}},xFract:function(L,I){return I.xAttr?{constant:[0,0]}:{buffer:I.positionFractBuffer,stride:8,offset:0}},yFract:function(L,I){return I.yAttr?{constant:[0,0]}:{buffer:I.positionFractBuffer,stride:8,offset:4}},size:function(L,I){return I.size.length?{buffer:I.sizeBuffer,stride:2,offset:0}:{constant:[Math.round(255*I.size/A.maxSize)]}},borderSize:function(L,I){return I.borderSize.length?{buffer:I.sizeBuffer,stride:2,offset:1}:{constant:[Math.round(255*I.borderSize/A.maxSize)]}},colorId:function(L,I){return I.color.length?{buffer:I.colorBuffer,stride:A.tooManyColors?8:4,offset:0}:{constant:A.tooManyColors?P.slice(4*I.color,4*I.color+4):[I.color]}},borderColorId:function(L,I){return I.borderColor.length?{buffer:I.colorBuffer,stride:A.tooManyColors?8:4,offset:A.tooManyColors?4:2}:{constant:A.tooManyColors?P.slice(4*I.borderColor,4*I.borderColor+4):[I.borderColor]}},isActive:function(L,I){return!0===I.activation?{constant:[1]}:I.activation?I.activation:{constant:[0]}}},blend:{enable:!0,color:[0,0,0,1],func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:"one minus dst alpha",dstAlpha:"one"}},scissor:{enable:!0,box:y.prop("viewport")},viewport:y.prop("viewport"),stencil:{enable:!1},depth:{enable:!1},elements:y.prop("elements"),count:y.prop("count"),offset:y.prop("offset"),primitive:"points"},F=i({},D);F.frag=d(["precision highp float;\n#define GLSLIFY 1\n\nuniform float opacity;\nuniform sampler2D markerTexture;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat smoothStep(float x, float y) {\n  return 1.0 / (1.0 + exp(50.0*(x - y)));\n}\n\nvoid main() {\n  float dist = texture2D(markerTexture, gl_PointCoord).r, delta = fragWidth;\n\n  // max-distance alpha\n  if (dist < 0.003) discard;\n\n  // null-border case\n  if (fragBorderColorLevel == fragColorLevel || fragBorderColor.a == 0.) {\n    float colorAmt = smoothstep(.5 - delta, .5 + delta, dist);\n    gl_FragColor = vec4(fragColor.rgb, colorAmt * fragColor.a * opacity);\n  }\n  else {\n    float borderColorAmt = smoothstep(fragBorderColorLevel - delta, fragBorderColorLevel + delta, dist);\n    float colorAmt = smoothstep(fragColorLevel - delta, fragColorLevel + delta, dist);\n\n    vec4 color = fragBorderColor;\n    color.a *= borderColorAmt;\n    color = mix(color, fragColor, colorAmt);\n    color.a *= opacity;\n\n    gl_FragColor = color;\n  }\n\n}\n"]),F.vert=d(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 scale, scaleFract, translate, translateFract, paletteSize;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\nconst float borderLevel = .5;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragPointSize, fragBorderRadius, fragWidth, fragBorderColorLevel, fragColorLevel;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = 2. * size * pointSizeScale;\n  fragPointSize = size * pixelRatio;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragColor = color;\n  fragBorderColor = borderColor;\n  fragWidth = 1. / gl_PointSize;\n\n  fragBorderColorLevel = clamp(borderLevel - borderLevel * borderSize / size, 0., 1.);\n  fragColorLevel = clamp(borderLevel + (1. - borderLevel) * borderSize / size, 0., 1.);\n}"]),this.drawMarker=y(F);var R=i({},D);R.frag=d(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nuniform float opacity;\n\nfloat smoothStep(float edge0, float edge1, float x) {\n\tfloat t;\n\tt = clamp((x - edge0) / (edge1 - edge0), 0.0, 1.0);\n\treturn t * t * (3.0 - 2.0 * t);\n}\n\nvoid main() {\n\tfloat radius, alpha = 1.0, delta = fragWidth;\n\n\tradius = length(2.0 * gl_PointCoord.xy - 1.0);\n\n\tif (radius > 1.0 + delta) {\n\t\tdiscard;\n\t}\n\n\talpha -= smoothstep(1.0 - delta, 1.0 + delta, radius);\n\n\tfloat borderRadius = fragBorderRadius;\n\tfloat ratio = smoothstep(borderRadius - delta, borderRadius + delta, radius);\n\tvec4 color = mix(fragColor, fragBorderColor, ratio);\n\tcolor.a *= alpha * opacity;\n\tgl_FragColor = color;\n}\n"]),R.vert=d(["precision highp float;\n#define GLSLIFY 1\n\nattribute float x, y, xFract, yFract;\nattribute float size, borderSize;\nattribute vec4 colorId, borderColorId;\nattribute float isActive;\n\nuniform bool constPointSize;\nuniform float pixelRatio;\nuniform vec2 paletteSize, scale, scaleFract, translate, translateFract;\nuniform sampler2D paletteTexture;\n\nconst float maxSize = 100.;\n\nvarying vec4 fragColor, fragBorderColor;\nvarying float fragBorderRadius, fragWidth;\n\nfloat pointSizeScale = (constPointSize) ? 2. : pixelRatio;\n\nbool isDirect = (paletteSize.x < 1.);\n\nvec4 getColor(vec4 id) {\n  return isDirect ? id / 255. : texture2D(paletteTexture,\n    vec2(\n      (id.x + .5) / paletteSize.x,\n      (id.y + .5) / paletteSize.y\n    )\n  );\n}\n\nvoid main() {\n  // ignore inactive points\n  if (isActive == 0.) return;\n\n  vec2 position = vec2(x, y);\n  vec2 positionFract = vec2(xFract, yFract);\n\n  vec4 color = getColor(colorId);\n  vec4 borderColor = getColor(borderColorId);\n\n  float size = size * maxSize / 255.;\n  float borderSize = borderSize * maxSize / 255.;\n\n  gl_PointSize = (size + borderSize) * pointSizeScale;\n\n  vec2 pos = (position + translate) * scale\n      + (positionFract + translateFract) * scale\n      + (position + translate) * scaleFract\n      + (positionFract + translateFract) * scaleFract;\n\n  gl_Position = vec4(pos * 2. - 1., 0., 1.);\n\n  fragBorderRadius = 1. - 2. * borderSize / (size + borderSize);\n  fragColor = color;\n  fragBorderColor = borderColor.a == 0. || borderSize == 0. ? vec4(color.rgb, 0.) : borderColor;\n  fragWidth = 1. / gl_PointSize;\n}\n"]),h&&(R.frag=R.frag.replace("smoothstep","smoothStep"),F.frag=F.frag.replace("smoothstep","smoothStep")),this.drawCircle=y(R)}f.defaults={color:"black",borderColor:"transparent",borderSize:0,size:12,opacity:1,marker:void 0,viewport:null,range:null,pixelSize:null,count:0,offset:0,bounds:null,positions:[],snap:1e4},f.prototype.render=function(){return arguments.length&&this.update.apply(this,arguments),this.draw(),this},f.prototype.draw=function(){for(var y=this,M=arguments.length,A=new Array(M),k=0;k<M;k++)A[k]=arguments[k];var C=this.groups;if(1===A.length&&Array.isArray(A[0])&&(null===A[0][0]||Array.isArray(A[0][0]))&&(A=A[0]),this.regl._refresh(),A.length)for(var P=0;P<A.length;P++)this.drawItem(P,A[P]);else C.forEach(function(D,F){y.drawItem(F)});return this},f.prototype.drawItem=function(y,M){var A=this.groups,k=A[y];if("number"==typeof M&&(y=M,k=A[M],M=null),k&&k.count&&k.opacity){k.activation[0]&&this.drawCircle(this.getMarkerDrawOptions(0,k,M));for(var C=[],P=1;P<k.activation.length;P++)k.activation[P]&&(!0===k.activation[P]||k.activation[P].data.length)&&C.push.apply(C,x(this.getMarkerDrawOptions(P,k,M)));C.length&&this.drawMarker(C)}},f.prototype.getMarkerDrawOptions=function(y,M,A){var k=M.range,C=M.tree,P=M.viewport,D=M.activation,F=M.selectionBuffer,R=M.count;if(!C)return A?[i({},M,{markerTexture:this.markerTextures[y],activation:D[y],count:A.length,elements:A,offset:0})]:[i({},M,{markerTexture:this.markerTextures[y],activation:D[y],offset:0})];var L=[],I=C.range(k,{lod:!0,px:[(k[2]-k[0])/P.width,(k[3]-k[1])/P.height]});if(A){for(var B=D[y].data,V=new Uint8Array(R),Z=0;Z<A.length;Z++){var Y=A[Z];V[Y]=B?B[Y]:1}F.subdata(V)}for(var ee=I.length;ee--;){var J=m(I[ee],2),$=J[0];L.push(i({},M,{markerTexture:this.markerTextures[y],activation:A?F:D[y],offset:$,count:J[1]-$}))}return L},f.prototype.update=function(){for(var y=this,M=arguments.length,A=new Array(M),k=0;k<M;k++)A[k]=arguments[k];if(A.length){1===A.length&&Array.isArray(A[0])&&(A=A[0]);var C=this.groups,P=this.gl,D=this.regl,F=this.maxSize,R=this.maxColors,L=this.palette;this.groups=C=A.map(function(I,B){var V=C[B];if(void 0===I)return V;null===I?I={positions:null}:"function"==typeof I?I={ondraw:I}:"number"==typeof I[0]&&(I={positions:I}),null===(I=u(I,{positions:"positions data points",snap:"snap cluster lod tree",size:"sizes size radius",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",color:"colors color fill fill-color fillColor",borderColor:"borderColors borderColor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range dataBox databox",viewport:"viewport viewPort viewBox viewbox",opacity:"opacity alpha transparency",bounds:"bound bounds boundaries limits",tooManyColors:"tooManyColors palette paletteMode optimizePalette enablePalette"})).positions&&(I.positions=[]),null!=I.tooManyColors&&(y.tooManyColors=I.tooManyColors),V||(C[B]=V={id:B,scale:null,translate:null,scaleFract:null,translateFract:null,activation:[],selectionBuffer:D.buffer({data:new Uint8Array(0),usage:"stream",type:"uint8"}),sizeBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),colorBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"uint8"}),positionBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"}),positionFractBuffer:D.buffer({data:new Uint8Array(0),usage:"dynamic",type:"float"})},I=i({},f.defaults,I)),I.positions&&!("marker"in I)&&(I.marker=V.marker,delete V.marker),I.marker&&!("positions"in I)&&(I.positions=V.positions,delete V.positions);var Z=0,Y=0;if(s(V,I,[{snap:!0,size:function(ge,we){return null==ge&&(ge=f.defaults.size),Z+=ge&&ge.length?1:0,ge},borderSize:function(ge,we){return null==ge&&(ge=f.defaults.borderSize),Z+=ge&&ge.length?1:0,ge},opacity:parseFloat,color:function(ge,we){return null==ge&&(ge=f.defaults.color),ge=y.updateColor(ge),Y++,ge},borderColor:function(ge,we){return null==ge&&(ge=f.defaults.borderColor),ge=y.updateColor(ge),Y++,ge},bounds:function(ge,we,Ce){return"range"in Ce||(Ce.range=null),ge},positions:function(ge,we,Ce){var De=we.snap,Se=we.positionBuffer,Fe=we.positionFractBuffer,ve=we.selectionBuffer;if(ge.x||ge.y)return we.xAttr=ge.x.length?{buffer:D.buffer(ge.x),offset:0,stride:4,count:ge.x.length}:{buffer:ge.x.buffer,offset:4*ge.x.offset||0,stride:4*(ge.x.stride||1),count:ge.x.count},we.yAttr=ge.y.length?{buffer:D.buffer(ge.y),offset:0,stride:4,count:ge.y.length}:{buffer:ge.y.buffer,offset:4*ge.y.offset||0,stride:4*(ge.y.stride||1),count:ge.y.count},we.count=Math.max(we.xAttr.count,we.yAttr.count),ge;ge=c(ge,"float64");var Te=we.count=Math.floor(ge.length/2),Le=we.bounds=Te?o(ge,2):null;if(Ce.range||we.range||(delete we.range,Ce.range=Le),Ce.marker||we.marker||(delete we.marker,Ce.marker=null),De&&(!0===De||Te>De)?we.tree=l(ge,{bounds:Le}):De&&De.length&&(we.tree=De),we.tree){var Ee={primitive:"points",usage:"static",data:we.tree,type:"uint32"};we.elements?we.elements(Ee):we.elements=D.elements(Ee)}var Pe=p.float32(ge);return Se({data:Pe,usage:"dynamic"}),Fe({data:p.fract32(ge,Pe),usage:"dynamic"}),ve({data:new Uint8Array(Te),type:"uint8",usage:"stream"}),ge}},{marker:function(ge,we,Ce){var De=we.activation;if(De.forEach(function(Pe){return Pe&&Pe.destroy&&Pe.destroy()}),De.length=0,ge&&"number"!=typeof ge[0]){for(var Se=[],Fe=0,ve=Math.min(ge.length,we.count);Fe<ve;Fe++){var Te=y.addMarker(ge[Fe]);Se[Te]||(Se[Te]=new Uint8Array(we.count)),Se[Te][Fe]=1}for(var Le=0;Le<Se.length;Le++)if(Se[Le]){var Ee={data:Se[Le],type:"uint8",usage:"static"};De[Le]?De[Le](Ee):De[Le]=D.buffer(Ee),De[Le].data=Se[Le]}}else De[y.addMarker(ge)]=!0;return ge},range:function(ge,we,Ce){var De=we.bounds;if(De)return ge||(ge=De),we.scale=[1/(ge[2]-ge[0]),1/(ge[3]-ge[1])],we.translate=[-ge[0],-ge[1]],we.scaleFract=p.fract(we.scale),we.translateFract=p.fract(we.translate),ge},viewport:function(ge){return v(ge||[P.drawingBufferWidth,P.drawingBufferHeight])}}]),Z){var J=V.count,$=V.size,Q=V.borderSize,se=V.sizeBuffer,j=new Uint8Array(2*J);if($.length||Q.length)for(var G=0;G<J;G++)j[2*G]=Math.round(255*(null==$[G]?$:$[G])/F),j[2*G+1]=Math.round(255*(null==Q[G]?Q:Q[G])/F);se({data:j,usage:"dynamic"})}if(Y){var W,q=V.count,te=V.color,ne=V.borderColor,le=V.colorBuffer;if(y.tooManyColors){if(te.length||ne.length){W=new Uint8Array(8*q);for(var ue=0;ue<q;ue++){var de=te[ue];W[8*ue]=L[4*de],W[8*ue+1]=L[4*de+1],W[8*ue+2]=L[4*de+2],W[8*ue+3]=L[4*de+3];var he=ne[ue];W[8*ue+4]=L[4*he],W[8*ue+5]=L[4*he+1],W[8*ue+6]=L[4*he+2],W[8*ue+7]=L[4*he+3]}}}else if(te.length||ne.length){W=new Uint8Array(4*q+2);for(var be=0;be<q;be++)null!=te[be]&&(W[4*be]=te[be]%R,W[4*be+1]=Math.floor(te[be]/R)),null!=ne[be]&&(W[4*be+2]=ne[be]%R,W[4*be+3]=Math.floor(ne[be]/R))}le({data:W||new Uint8Array(0),type:"uint8",usage:"dynamic"})}return V})}},f.prototype.addMarker=function(y){var M,A=this.markerTextures,k=this.regl,C=this.markerCache,P=null==y?0:C.indexOf(y);if(P>=0)return P;if(y instanceof Uint8Array||y instanceof Uint8ClampedArray)M=y;else{M=new Uint8Array(y.length);for(var D=0,F=y.length;D<F;D++)M[D]=255*y[D]}var R=Math.floor(Math.sqrt(M.length));return P=A.length,C.push(y),A.push(k.texture({channels:1,data:M,radius:R,mag:"linear",min:"linear"})),P},f.prototype.updateColor=function(y){var M=this.paletteIds,A=this.palette,k=this.maxColors;Array.isArray(y)||(y=[y]);var C=[];if("number"==typeof y[0]){var P=[];if(Array.isArray(y))for(var D=0;D<y.length;D+=4)P.push(y.slice(D,D+4));else for(var F=0;F<y.length;F+=4)P.push(y.subarray(F,F+4));y=P}for(var R=0;R<y.length;R++){var L=y[R];L=e(L,"uint8");var I=a(L,!1);if(null==M[I]){var B=A.length;M[I]=Math.floor(B/4),A[B]=L[0],A[B+1]=L[1],A[B+2]=L[2],A[B+3]=L[3]}C[R]=M[I]}return!this.tooManyColors&&A.length>4*k&&(this.tooManyColors=!0),this.updatePalette(A),1===C.length?C[0]:C},f.prototype.updatePalette=function(y){if(!this.tooManyColors){var M=this.maxColors,A=this.paletteTexture,k=Math.ceil(.25*y.length/M);if(k>1)for(var C=.25*(y=y.slice()).length%M;C<k*M;C++)y.push(0,0,0,0);A.height<k&&A.resize(M,k),A.subimage({width:Math.min(.25*y.length,M),height:k,data:y},0,0)}},f.prototype.destroy=function(){return this.groups.forEach(function(y){y.sizeBuffer.destroy(),y.positionBuffer.destroy(),y.positionFractBuffer.destroy(),y.colorBuffer.destroy(),y.activation.forEach(function(M){return M&&M.destroy&&M.destroy()}),y.selectionBuffer.destroy(),y.elements&&y.elements.destroy()}),this.groups.length=0,this.paletteTexture.destroy(),this.markerTextures.forEach(function(y){return y&&y.destroy&&y.destroy()}),this};var w=_("object-assign");oe.exports=function(y,M){var A=new g(y,M),k=A.render.bind(A);return w(k,{render:k,update:A.update.bind(A),draw:A.draw.bind(A),destroy:A.destroy.bind(A),regl:A.regl,gl:A.gl,canvas:A.gl.canvas,groups:A.groups,markers:A.markerCache,palette:A.palette}),k}},{"@plotly/point-cluster":59,"array-bounds":71,"color-id":87,"color-normalize":89,"flatten-vertex-data":191,glslify:227,"is-iexplorer":233,"object-assign":247,"parse-rect":249,"pick-by-alias":253,"to-float32":313,"update-diff":329}],282:[function(_,oe,ae){"use strict";var m=_("regl-scatter2d"),x=_("pick-by-alias"),T=_("array-bounds"),b=_("raf"),e=_("array-range"),o=_("parse-rect"),a=_("flatten-vertex-data");function l(s,c){if(!(this instanceof l))return new l(s,c);this.traces=[],this.passes={},this.regl=s,this.scatter=m(s),this.canvas=this.scatter.canvas}function i(s,c,h){return(null!=s.id?s.id:s)<<16|(255&c)<<8|255&h}function d(s,c,h){var p,v,g,f,w=s[c],y=s[h];return w.length>2?(p=w[1],v=w[3]):w.length?(p=w[0],v=w[1]):(p=w.y,v=w.y+w.height),y.length>2?(g=y[0],f=y[2]):y.length?(g=y[0],f=y[1]):(g=y.x,f=y.x+y.width),[g,p,f,v]}function u(s){if("number"==typeof s)return[s,s,s,s];if(2===s.length)return[s[0],s[1],s[0],s[1]];var c=o(s);return[c.x,c.y,c.x+c.width,c.y+c.height]}oe.exports=l,l.prototype.render=function(){for(var s,c=this,h=[],p=arguments.length;p--;)h[p]=arguments[p];return h.length&&(s=this).update.apply(s,h),this.regl.attributes.preserveDrawingBuffer?this.draw():(this.dirty?null==this.planned&&(this.planned=b(function(){c.draw(),c.dirty=!0,c.planned=null})):(this.draw(),this.dirty=!0,b(function(){c.dirty=!1})),this)},l.prototype.update=function(){for(var s,c=[],h=arguments.length;h--;)c[h]=arguments[h];if(c.length){for(var p=0;p<c.length;p++)this.updateItem(p,c[p]);this.traces=this.traces.filter(Boolean);for(var v=[],g=0,f=0;f<this.traces.length;f++){for(var w=this.traces[f],y=this.traces[f].passes,M=0;M<y.length;M++)v.push(this.passes[y[M]]);w.passOffset=g,g+=w.passes.length}return(s=this.scatter).update.apply(s,v),this}},l.prototype.updateItem=function(s,c){var h=this.regl;if(null===c)return this.traces[s]=null,this;if(!c)return this;var p,v=x(c,{data:"data items columns rows values dimensions samples x",snap:"snap cluster",size:"sizes size radius",color:"colors color fill fill-color fillColor",opacity:"opacity alpha transparency opaque",borderSize:"borderSizes borderSize border-size bordersize borderWidth borderWidths border-width borderwidth stroke-width strokeWidth strokewidth outline",borderColor:"borderColors borderColor bordercolor stroke stroke-color strokeColor",marker:"markers marker shape",range:"range ranges databox dataBox",viewport:"viewport viewBox viewbox",domain:"domain domains area areas",padding:"pad padding paddings pads margin margins",transpose:"transpose transposed",diagonal:"diagonal diag showDiagonal",upper:"upper up top upperhalf upperHalf showupperhalf showUpper showUpperHalf",lower:"lower low bottom lowerhalf lowerHalf showlowerhalf showLowerHalf showLower"}),g=this.traces[s]||(this.traces[s]={id:s,buffer:h.buffer({usage:"dynamic",type:"float",data:new Uint8Array}),color:"black",marker:null,size:12,borderColor:"transparent",borderSize:1,viewport:o([h._gl.drawingBufferWidth,h._gl.drawingBufferHeight]),padding:[0,0,0,0],opacity:1,diagonal:!0,upper:!0,lower:!0});if(null!=v.color&&(g.color=v.color),null!=v.size&&(g.size=v.size),null!=v.marker&&(g.marker=v.marker),null!=v.borderColor&&(g.borderColor=v.borderColor),null!=v.borderSize&&(g.borderSize=v.borderSize),null!=v.opacity&&(g.opacity=v.opacity),v.viewport&&(g.viewport=o(v.viewport)),null!=v.diagonal&&(g.diagonal=v.diagonal),null!=v.upper&&(g.upper=v.upper),null!=v.lower&&(g.lower=v.lower),v.data){g.buffer(a(v.data)),g.columns=v.data.length,g.count=v.data[0].length,g.bounds=[];for(var f=0;f<g.columns;f++)g.bounds[f]=T(v.data[f],1)}v.range&&(g.range=v.range,p=g.range&&"number"!=typeof g.range[0]),v.domain&&(g.domain=v.domain);var w=!1;null!=v.padding&&(Array.isArray(v.padding)&&v.padding.length===g.columns&&"number"==typeof v.padding[v.padding.length-1]?(g.padding=v.padding.map(u),w=!0):g.padding=u(v.padding));var y=g.columns,M=g.count,A=g.viewport.width,k=g.viewport.height,C=g.viewport.x,P=g.viewport.y,D=A/y,F=k/y;g.passes=[];for(var R=0;R<y;R++)for(var L=0;L<y;L++)if((g.diagonal||L!==R)&&(g.upper||!(R>L))&&(g.lower||!(R<L))){var I=i(g.id,R,L),B=this.passes[I]||(this.passes[I]={});if(v.data&&(B.positions=v.transpose?{x:{buffer:g.buffer,offset:L,count:M,stride:y},y:{buffer:g.buffer,offset:R,count:M,stride:y}}:{x:{buffer:g.buffer,offset:L*M,count:M},y:{buffer:g.buffer,offset:R*M,count:M}},B.bounds=d(g.bounds,R,L)),v.domain||v.viewport||v.data){var V=w?d(g.padding,R,L):g.padding;if(g.domain){var Z=d(g.domain,R,L);B.viewport=[C+Z[0]*A+V[0],P+Z[1]*k+V[1],C+Z[2]*A-V[2],P+Z[3]*k-V[3]]}else B.viewport=[C+L*D+D*V[0],P+R*F+F*V[1],C+(L+1)*D-D*V[2],P+(R+1)*F-F*V[3]]}v.color&&(B.color=g.color),v.size&&(B.size=g.size),v.marker&&(B.marker=g.marker),v.borderSize&&(B.borderSize=g.borderSize),v.borderColor&&(B.borderColor=g.borderColor),v.opacity&&(B.opacity=g.opacity),v.range&&(B.range=p?d(g.range,R,L):g.range||B.bounds),g.passes.push(I)}return this},l.prototype.draw=function(){for(var s,c=[],h=arguments.length;h--;)c[h]=arguments[h];if(c.length){for(var p=[],v=0;v<c.length;v++)if("number"==typeof c[v]){var g=this.traces[c[v]],w=g.passOffset;p.push.apply(p,e(w,w+g.passes.length))}else if(c[v].length){var y=c[v],M=this.traces[v],A=M.passes,k=M.passOffset;A=A.map(function(C,P){p[k+P]=y})}(s=this.scatter).draw.apply(s,p)}else this.scatter.draw();return this},l.prototype.destroy=function(){return this.traces.forEach(function(s){s.buffer&&s.buffer.destroy&&s.buffer.destroy()}),this.traces=null,this.passes=null,this.scatter.destroy(),this}},{"array-bounds":71,"array-range":74,"flatten-vertex-data":191,"parse-rect":249,"pick-by-alias":253,raf:278,"regl-scatter2d":281}],283:[function(_,oe,ae){var x;x=function(){function m(qe,it){this.id=W++,this.type=qe,this.data=it}function x(qe){return"["+function it(Ie){if(0===Ie.length)return[];var ze=Ie.charAt(0),Ve=Ie.charAt(Ie.length-1);if(1<Ie.length&&ze===Ve&&('"'===ze||"'"===ze))return['"'+Ie.substr(1,Ie.length-2).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];if(ze=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(Ie))return it(Ie.substr(0,ze.index)).concat(it(ze[1])).concat(it(Ie.substr(ze.index+ze[0].length)));if(1===(ze=Ie.split(".")).length)return['"'+Ie.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'];for(Ie=[],Ve=0;Ve<ze.length;++Ve)Ie=Ie.concat(it(ze[Ve]));return Ie}(qe).join("][")+"]"}function T(qe){return"string"==typeof qe?qe.split():qe}function b(qe){return"string"==typeof qe?document.querySelector(qe):qe}function o(qe,it){for(var Ie=Array(qe),ze=0;ze<qe;++ze)Ie[ze]=it(ze);return Ie}function a(qe){var it,Ie;return it=(65535<qe)<<4,it|=Ie=(255<(qe>>>=it))<<3,(it|=Ie=(15<(qe>>>=Ie))<<2)|(Ie=(3<(qe>>>=Ie))<<1)|qe>>>Ie>>1}function l(){function qe(ze){e:{for(var Ve=16;268435456>=Ve;Ve*=16)if(ze<=Ve){ze=Ve;break e}ze=0}return 0<(Ve=Ie[a(ze)>>2]).length?Ve.pop():new ArrayBuffer(ze)}function it(ze){Ie[a(ze.byteLength)>>2].push(ze)}var Ie=o(8,function(){return[]});return{alloc:qe,free:it,allocType:function(ze,Ve){var Be=null;switch(ze){case 5120:Be=new Int8Array(qe(Ve),0,Ve);break;case 5121:Be=new Uint8Array(qe(Ve),0,Ve);break;case 5122:Be=new Int16Array(qe(2*Ve),0,Ve);break;case 5123:Be=new Uint16Array(qe(2*Ve),0,Ve);break;case 5124:Be=new Int32Array(qe(4*Ve),0,Ve);break;case 5125:Be=new Uint32Array(qe(4*Ve),0,Ve);break;case 5126:Be=new Float32Array(qe(4*Ve),0,Ve);break;default:return null}return Be.length!==Ve?Be.subarray(0,Ve):Be},freeType:function(ze){it(ze.buffer)}}}function i(qe){return!!qe&&"object"==typeof qe&&Array.isArray(qe.shape)&&Array.isArray(qe.stride)&&"number"==typeof qe.offset&&qe.shape.length===qe.stride.length&&(Array.isArray(qe.data)||ue(qe.data))}function d(qe,it,Ie,ze,Ve,Be){for(var at=0;at<it;++at)for(var gt=qe[at],wt=0;wt<Ie;++wt)for(var _t=gt[wt],Rt=0;Rt<ze;++Rt)Ve[Be++]=_t[Rt]}function u(qe){return 0|be[Object.prototype.toString.call(qe)]}function s(qe,it){for(var Ie=0;Ie<it.length;++Ie)qe[Ie]=it[Ie]}function c(qe,it,Ie,ze,Ve,Be,at){for(var gt=0,wt=0;wt<Ie;++wt)for(var _t=0;_t<ze;++_t)qe[gt++]=it[Ve*wt+Be*_t+at]}function v(qe){for(var it=ne.allocType(5123,qe.length),Ie=0;Ie<qe.length;++Ie)if(isNaN(qe[Ie]))it[Ie]=65535;else if(1/0===qe[Ie])it[Ie]=31744;else if(-1/0===qe[Ie])it[Ie]=64512;else{ve[0]=qe[Ie];var ze=(Be=Te[0])>>>31<<15,Ve=(Be<<1>>>24)-127,Be=Be>>13&1023;it[Ie]=-24>Ve?ze:-14>Ve?ze+(Be+1024>>-14-Ve):15<Ve?ze+31744:ze+(Ve+15<<10)+Be}return it}function g(qe){return Array.isArray(qe)||ue(qe)}function f(qe){return"[object "+qe+"]"}function w(qe){return Array.isArray(qe)&&(0===qe.length||"number"==typeof qe[0])}function y(qe){return!(!Array.isArray(qe)||0===qe.length||!g(qe[0]))}function M(qe){return Object.prototype.toString.call(qe)}function A(qe){if(!qe)return!1;var it=M(qe);return 0<=et.indexOf(it)||w(qe)||y(qe)||i(qe)}function k(qe,it){36193===qe.type?(qe.data=v(it),ne.freeType(it)):qe.data=it}function C(qe,it,Ie,ze,Ve,Be){if(qe=void 0!==ct[qe]?ct[qe]:Pe[qe]*tt[it],Be&&(qe*=6),Ve){for(ze=0;1<=Ie;)ze+=qe*Ie*Ie,Ie/=2;return ze}return qe*Ie*ze}function F(){this.w=this.z=this.y=this.x=this.state=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=5126,this.divisor=this.stride=this.offset=0}function B(qe){return Array.prototype.slice.call(qe)}function V(qe){return B(qe).join("")}function Z(qe){return Array.isArray(qe)||ue(qe)||i(qe)}function Y(qe){return qe.sort(function(it,Ie){return"viewport"===it?-1:"viewport"===Ie?1:it<Ie?-1:1})}function ee(qe,it,Ie,ze){this.thisDep=qe,this.contextDep=it,this.propDep=Ie,this.append=ze}function J(qe){return qe&&!(qe.thisDep||qe.contextDep||qe.propDep)}function $(qe){return new ee(!1,!1,!1,qe)}function Q(qe,it){var Ie=qe.type;if(0===Ie)return new ee(!0,1<=(Ie=qe.data.length),2<=Ie,it);if(4===Ie)return new ee((Ie=qe.data).thisDep,Ie.contextDep,Ie.propDep,it);if(5===Ie)return new ee(!1,!1,!1,it);if(6===Ie){for(var ze=Ie=!1,Ve=!1,Be=0;Be<qe.data.length;++Be){var at=qe.data[Be];1===at.type?Ve=!0:2===at.type?ze=!0:3===at.type?Ie=!0:0===at.type?(Ie=!0,1<=(at=at.data)&&(ze=!0),2<=at&&(Ve=!0)):4===at.type&&(Ie=Ie||at.data.thisDep,ze=ze||at.data.contextDep,Ve=Ve||at.data.propDep)}return new ee(Ie,ze,Ve,it)}return new ee(3===Ie,2===Ie,1===Ie,it)}function se(qe,it,Ie,ze,Ve,Be,at,gt,wt,_t,Rt,yt,Vt,Nt,rt){function Tt(jt){return jt.replace(".","_")}function Ut(jt,Jt,An){var Hn=Tt(jt);ir.push(jt),ri[Hn]=hr[Hn]=!!An,Ur[Hn]=Jt}function Wt(jt,Jt,An){var Hn=Tt(jt);ir.push(jt),Array.isArray(An)?(hr[Hn]=An.slice(),ri[Hn]=An.slice()):hr[Hn]=ri[Hn]=An,Mr[Hn]=Jt}function sn(){var jt=function(){function Wn(){var tr=[],ur=[];return G(function(){tr.push.apply(tr,B(arguments))},{def:function(){var Cr="v"+xr++;return ur.push(Cr),0<arguments.length&&(tr.push(Cr,"="),tr.push.apply(tr,B(arguments)),tr.push(";")),Cr},toString:function(){return V([0<ur.length?"var "+ur.join(",")+";":"",V(tr)])}})}function jn(){function tr(Ii,gi){Cr(Ii,gi,"=",ur.def(Ii,gi),";")}var ur=Wn(),Cr=Wn(),Fr=ur.toString,Zr=Cr.toString;return G(function(){ur.apply(ur,B(arguments))},{def:ur.def,entry:ur,exit:Cr,save:tr,set:function(Ii,gi,zr){tr(Ii,gi),ur(Ii,gi,"=",zr,";")},toString:function(){return Fr()+Zr()}})}var xr=0,Ir=[],Vr=[],qn=Wn(),jr={};return{global:qn,link:function(tr){for(var ur=0;ur<Vr.length;++ur)if(Vr[ur]===tr)return Ir[ur];return ur="g"+xr++,Ir.push(ur),Vr.push(tr),ur},block:Wn,proc:function(tr,ur){function Cr(){var gi="a"+Fr.length;return Fr.push(gi),gi}var Fr=[];ur=ur||0;for(var Zr=0;Zr<ur;++Zr)Cr();var Ii=(Zr=jn()).toString;return jr[tr]=G(Zr,{arg:Cr,toString:function(){return V(["function(",Fr.join(),"){",Ii(),"}"])}})},scope:jn,cond:function(){var tr=V(arguments),ur=jn(),Cr=jn(),Fr=ur.toString,Zr=Cr.toString;return G(ur,{then:function(){return ur.apply(ur,B(arguments)),this},else:function(){return Cr.apply(Cr,B(arguments)),this},toString:function(){var Ii=Zr();return Ii&&(Ii="else{"+Ii+"}"),V(["if(",tr,"){",Fr(),"}",Ii])}})},compile:function(){var tr=['"use strict";',qn,"return {"];Object.keys(jr).forEach(function(Cr){tr.push('"',Cr,'":',jr[Cr].toString(),",")}),tr.push("}");var ur=V(tr).replace(/;/g,";\n").replace(/}/g,"}\n").replace(/{/g,"{\n");return Function.apply(null,Ir.concat(ur)).apply(null,Vr)}}}(),Jt=jt.link,An=jt.global;jt.id=gn++,jt.batchId="0";var Hn=Jt(wr),yr=jt.shared={props:"a0"};Object.keys(wr).forEach(function(Wn){yr[Wn]=An.def(Hn,".",Wn)});var gr=jt.next={},Bn=jt.current={};Object.keys(Mr).forEach(function(Wn){Array.isArray(hr[Wn])&&(gr[Wn]=An.def(yr.next,".",Wn),Bn[Wn]=An.def(yr.current,".",Wn))});var Nn=jt.constants={};Object.keys(ii).forEach(function(Wn){Nn[Wn]=An.def(JSON.stringify(ii[Wn]))}),jt.invoke=function(Wn,jn){switch(jn.type){case 0:var xr=["this",yr.context,yr.props,jt.batchId];return Wn.def(Jt(jn.data),".call(",xr.slice(0,Math.max(jn.data.length+1,4)),")");case 1:return Wn.def(yr.props,jn.data);case 2:return Wn.def(yr.context,jn.data);case 3:return Wn.def("this",jn.data);case 4:return jn.data.append(jt,Wn),jn.data.ref;case 5:return jn.data.toString();case 6:return jn.data.map(function(Ir){return jt.invoke(Wn,Ir)})}},jt.attribCache={};var Zn={};return jt.scopeAttrib=function(Wn){if((Wn=it.id(Wn))in Zn)return Zn[Wn];var jn=_t.scope[Wn];return jn||(jn=_t.scope[Wn]=new ti),Zn[Wn]=Jt(jn)},jt}function Kt(jt,Jt,An,Hn,yr){function gr(jr){var tr=Nn[jr];tr&&(Wn[jr]=tr)}var jr,ur,Cr,Fr,Bn=function(jr,tr){if("string"==typeof(ur=jr.static).frag&&"string"==typeof ur.vert){if(0<Object.keys(tr.dynamic).length)return null;var ur=tr.static,Cr=Object.keys(ur);if(0<Cr.length&&"number"==typeof ur[Cr[0]]){for(var Fr=[],Zr=0;Zr<Cr.length;++Zr)Fr.push([0|ur[Cr[Zr]],Cr[Zr]]);return Fr}}return null}(jt,Jt),Nn=function(jr,tr,ur){function Cr(gi){if(gi in Fr){var zr=Fr[gi];gi=!0;var Ci,qi,ki=0|zr.x,Do=0|zr.y;return"width"in zr?Ci=0|zr.width:gi=!1,"height"in zr?qi=0|zr.height:gi=!1,new ee(!gi&&tr&&tr.thisDep,!gi&&tr&&tr.contextDep,!gi&&tr&&tr.propDep,function(Ka,ga){var Na=Ka.shared.context,zo=Ci;"width"in zr||(zo=ga.def(Na,".","framebufferWidth","-",ki));var Ho=qi;return"height"in zr||(Ho=ga.def(Na,".","framebufferHeight","-",Do)),[ki,Do,zo,Ho]})}if(gi in Zr){var $a=Zr[gi];return gi=Q($a,function(Ka,ga){var Na=Ka.invoke(ga,$a),zo=Ka.shared.context,Ho=ga.def(Na,".x|0"),Sl=ga.def(Na,".y|0");return[Ho,Sl,ga.def('"width" in ',Na,"?",Na,".width|0:","(",zo,".","framebufferWidth","-",Ho,")"),Na=ga.def('"height" in ',Na,"?",Na,".height|0:","(",zo,".","framebufferHeight","-",Sl,")")]}),tr&&(gi.thisDep=gi.thisDep||tr.thisDep,gi.contextDep=gi.contextDep||tr.contextDep,gi.propDep=gi.propDep||tr.propDep),gi}return tr?new ee(tr.thisDep,tr.contextDep,tr.propDep,function(Ka,ga){var Na=Ka.shared.context;return[0,0,ga.def(Na,".","framebufferWidth"),ga.def(Na,".","framebufferHeight")]}):null}var Fr=jr.static,Zr=jr.dynamic;if(jr=Cr("viewport")){var Ii=jr;jr=new ee(jr.thisDep,jr.contextDep,jr.propDep,function(gi,zr){var Ci=Ii.append(gi,zr),qi=gi.shared.context;return zr.set(qi,".viewportWidth",Ci[2]),zr.set(qi,".viewportHeight",Ci[3]),Ci})}return{viewport:jr,scissor_box:Cr("scissor.box")}}(jt,xr=function He(jt,Jt){var An=jt.static,Hn=jt.dynamic;if("framebuffer"in An){var yr=An.framebuffer;return yr?(yr=gt.getFramebuffer(yr),$(function(Bn,Nn){var Zn=Bn.link(yr),Wn=Bn.shared;return Nn.set(Wn.framebuffer,".next",Zn),Nn.set(Wn=Wn.context,".framebufferWidth",Zn+".width"),Nn.set(Wn,".framebufferHeight",Zn+".height"),Zn})):$(function(Bn,Nn){var Zn=Bn.shared;return Nn.set(Zn.framebuffer,".next","null"),Nn.set(Zn=Zn.context,".framebufferWidth",Zn+".drawingBufferWidth"),Nn.set(Zn,".framebufferHeight",Zn+".drawingBufferHeight"),"null"})}if("framebuffer"in Hn){var gr=Hn.framebuffer;return Q(gr,function(Bn,Nn){var Zn=Bn.invoke(Nn,gr),Wn=Bn.shared,jn=Wn.framebuffer;return Zn=Nn.def(jn,".getFramebuffer(",Zn,")"),Nn.set(jn,".next",Zn),Nn.set(Wn=Wn.context,".framebufferWidth",Zn+"?"+Zn+".width:"+Wn+".drawingBufferWidth"),Nn.set(Wn,".framebufferHeight",Zn+"?"+Zn+".height:"+Wn+".drawingBufferHeight"),Zn})}return null}(jt)),Zn=function Lt(jt,Jt){function An(qn,jr){if(qn in Hn){var tr=0|Hn[qn];return jr?gr.offset=tr:gr.instances=tr,$(function(Cr,Fr){return jr&&(Cr.OFFSET=tr),tr})}if(qn in yr){var ur=yr[qn];return Q(ur,function(Cr,Fr){var Zr=Cr.invoke(Fr,ur);return jr&&(Cr.OFFSET=Zr),Zr})}if(jr){if(Zn)return $(function(Cr,Fr){return Cr.OFFSET=0});if(Bn)return new ee(Nn.thisDep,Nn.contextDep,Nn.propDep,function(Cr,Fr){return Fr.def(Cr.shared.vao+".currentVAO?"+Cr.shared.vao+".currentVAO.offset:0")})}else if(Bn)return new ee(Nn.thisDep,Nn.contextDep,Nn.propDep,function(Cr,Fr){return Fr.def(Cr.shared.vao+".currentVAO?"+Cr.shared.vao+".currentVAO.instances:-1")});return null}var Hn=jt.static,yr=jt.dynamic,gr={},Bn=!1,Nn=function(){if("vao"in Hn){var qn=Hn.vao;return null!==qn&&null===_t.getVAO(qn)&&(qn=_t.createVAO(qn)),Bn=!0,gr.vao=qn,$(function(tr){var ur=_t.getVAO(qn);return ur?tr.link(ur):"null"})}if("vao"in yr){Bn=!0;var jr=yr.vao;return Q(jr,function(tr,ur){var Cr=tr.invoke(ur,jr);return ur.def(tr.shared.vao+".getVAO("+Cr+")")})}return null}(),Zn=!1,Wn=function(){if("elements"in Hn){var qn=Hn.elements;if(gr.elements=qn,Z(qn)){var jr=gr.elements=Be.create(qn,!0);qn=Be.getElements(jr),Zn=!0}else qn&&(qn=Be.getElements(qn),Zn=!0);return(jr=$(function(ur,Cr){if(qn){var Fr=ur.link(qn);return ur.ELEMENTS=Fr}return ur.ELEMENTS=null})).value=qn,jr}if("elements"in yr){Zn=!0;var tr=yr.elements;return Q(tr,function(ur,Cr){var Fr=(Zr=ur.shared).isBufferArgs,Zr=Zr.elements,Ii=ur.invoke(Cr,tr),gi=Cr.def("null");return Fr=Cr.def(Fr,"(",Ii,")"),Ii=ur.cond(Fr).then(gi,"=",Zr,".createStream(",Ii,");").else(gi,"=",Zr,".getElements(",Ii,");"),Cr.entry(Ii),Cr.exit(ur.cond(Fr).then(Zr,".destroyStream(",gi,");")),ur.ELEMENTS=gi})}return Bn?new ee(Nn.thisDep,Nn.contextDep,Nn.propDep,function(ur,Cr){return Cr.def(ur.shared.vao+".currentVAO?"+ur.shared.elements+".getElements("+ur.shared.vao+".currentVAO.elements):null")}):null}(),jn=An("offset",!0),xr=function(){if("primitive"in Hn){var qn=Hn.primitive;return gr.primitive=qn,$(function(tr,ur){return Fe[qn]})}if("primitive"in yr){var jr=yr.primitive;return Q(jr,function(tr,ur){var Cr=tr.constants.primTypes,Fr=tr.invoke(ur,jr);return ur.def(Cr,"[",Fr,"]")})}return Zn?J(Wn)?$(Wn.value?function(tr,ur){return ur.def(tr.ELEMENTS,".primType")}:function(){return 4}):new ee(Wn.thisDep,Wn.contextDep,Wn.propDep,function(tr,ur){var Cr=tr.ELEMENTS;return ur.def(Cr,"?",Cr,".primType:",4)}):Bn?new ee(Nn.thisDep,Nn.contextDep,Nn.propDep,function(tr,ur){return ur.def(tr.shared.vao+".currentVAO?"+tr.shared.vao+".currentVAO.primitive:4")}):null}(),Ir=function(){if("count"in Hn){var qn=0|Hn.count;return gr.count=qn,$(function(){return qn})}if("count"in yr){var jr=yr.count;return Q(jr,function(tr,ur){return tr.invoke(ur,jr)})}return Zn?J(Wn)?Wn?jn?new ee(jn.thisDep,jn.contextDep,jn.propDep,function(tr,ur){return ur.def(tr.ELEMENTS,".vertCount-",tr.OFFSET)}):$(function(tr,ur){return ur.def(tr.ELEMENTS,".vertCount")}):$(function(){return-1}):new ee(Wn.thisDep||jn.thisDep,Wn.contextDep||jn.contextDep,Wn.propDep||jn.propDep,function(tr,ur){var Cr=tr.ELEMENTS;return tr.OFFSET?ur.def(Cr,"?",Cr,".vertCount-",tr.OFFSET,":-1"):ur.def(Cr,"?",Cr,".vertCount:-1")}):Bn?new ee(Nn.thisDep,Nn.contextDep,Nn.propDep,function(tr,ur){return ur.def(tr.shared.vao,".currentVAO?",tr.shared.vao,".currentVAO.count:-1")}):null}(),Vr=An("instances",!1);return{elements:Wn,primitive:xr,count:Ir,instances:Vr,offset:jn,vao:Nn,vaoActive:Bn,elementsActive:Zn,static:gr}}(jt),Wn=(ur=(jr=jt).static,Cr=jr.dynamic,Fr={},ir.forEach(function(Zr){function Ii(zr,Ci){if(Zr in ur){var qi=zr(ur[Zr]);Fr[gi]=$(function(){return qi})}else if(Zr in Cr){var ki=Cr[Zr];Fr[gi]=Q(ki,function(Do,$a){return Ci(Do,$a,Do.invoke($a,ki))})}}var gi=Tt(Zr);switch(Zr){case"cull.enable":case"blend.enable":case"dither":case"stencil.enable":case"depth.enable":case"scissor.enable":case"polygonOffset.enable":case"sample.alpha":case"sample.enable":case"depth.mask":case"lineWidth":return Ii(function(zr){return zr},function(zr,Ci,qi){return qi});case"depth.func":return Ii(function(zr){return tn[zr]},function(zr,Ci,qi){return Ci.def(zr.constants.compareFuncs,"[",qi,"]")});case"depth.range":return Ii(function(zr){return zr},function(zr,Ci,qi){return[Ci.def("+",qi,"[0]"),Ci=Ci.def("+",qi,"[1]")]});case"blend.func":return Ii(function(zr){return[Ot["srcRGB"in zr?zr.srcRGB:zr.src],Ot["dstRGB"in zr?zr.dstRGB:zr.dst],Ot["srcAlpha"in zr?zr.srcAlpha:zr.src],Ot["dstAlpha"in zr?zr.dstAlpha:zr.dst]]},function(zr,Ci,qi){function ki(ga,Na){return Ci.def('"',ga,Na,'" in ',qi,"?",qi,".",ga,Na,":",qi,".",ga)}zr=zr.constants.blendFuncs;var Do=ki("src","RGB"),$a=ki("dst","RGB"),Ka=(Do=Ci.def(zr,"[",Do,"]"),Ci.def(zr,"[",ki("src","Alpha"),"]"));return[Do,$a=Ci.def(zr,"[",$a,"]"),Ka,zr=Ci.def(zr,"[",ki("dst","Alpha"),"]")]});case"blend.equation":return Ii(function(zr){return"string"==typeof zr?[Ar[zr],Ar[zr]]:"object"==typeof zr?[Ar[zr.rgb],Ar[zr.alpha]]:void 0},function(zr,Ci,qi){var ki=zr.constants.blendEquations,Do=Ci.def(),$a=Ci.def();return(zr=zr.cond("typeof ",qi,'==="string"')).then(Do,"=",$a,"=",ki,"[",qi,"];"),zr.else(Do,"=",ki,"[",qi,".rgb];",$a,"=",ki,"[",qi,".alpha];"),Ci(zr),[Do,$a]});case"blend.color":return Ii(function(zr){return o(4,function(Ci){return+zr[Ci]})},function(zr,Ci,qi){return o(4,function(ki){return Ci.def("+",qi,"[",ki,"]")})});case"stencil.mask":return Ii(function(zr){return 0|zr},function(zr,Ci,qi){return Ci.def(qi,"|0")});case"stencil.func":return Ii(function(zr){return[tn[zr.cmp||"keep"],zr.ref||0,"mask"in zr?zr.mask:-1]},function(zr,Ci,qi){return[zr=Ci.def('"cmp" in ',qi,"?",zr.constants.compareFuncs,"[",qi,".cmp]",":",7680),Ci.def(qi,".ref|0"),Ci=Ci.def('"mask" in ',qi,"?",qi,".mask|0:-1")]});case"stencil.opFront":case"stencil.opBack":return Ii(function(zr){return["stencil.opBack"===Zr?1029:1028,un[zr.fail||"keep"],un[zr.zfail||"keep"],un[zr.zpass||"keep"]]},function(zr,Ci,qi){function ki($a){return Ci.def('"',$a,'" in ',qi,"?",Do,"[",qi,".",$a,"]:",7680)}var Do=zr.constants.stencilOps;return["stencil.opBack"===Zr?1029:1028,ki("fail"),ki("zfail"),ki("zpass")]});case"polygonOffset.offset":return Ii(function(zr){return[0|zr.factor,0|zr.units]},function(zr,Ci,qi){return[Ci.def(qi,".factor|0"),Ci=Ci.def(qi,".units|0")]});case"cull.face":return Ii(function(zr){var Ci=0;return"front"===zr?Ci=1028:"back"===zr&&(Ci=1029),Ci},function(zr,Ci,qi){return Ci.def(qi,'==="front"?',1028,":",1029)});case"frontFace":return Ii(function(zr){return Ze[zr]},function(zr,Ci,qi){return Ci.def(qi+'==="cw"?2304:2305')});case"colorMask":return Ii(function(zr){return zr.map(function(Ci){return!!Ci})},function(zr,Ci,qi){return o(4,function(ki){return"!!"+qi+"["+ki+"]"})});case"sample.coverage":return Ii(function(zr){return["value"in zr?zr.value:1,!!zr.invert]},function(zr,Ci,qi){return[Ci.def('"value" in ',qi,"?+",qi,".value:1"),Ci=Ci.def("!!",qi,".invert")]})}}),Fr),jn=function vt(jt,Jt,An){function Hn(Wn){if(Wn in yr){var jn=it.id(yr[Wn]);return(Wn=$(function(){return jn})).id=jn,Wn}if(Wn in gr){var xr=gr[Wn];return Q(xr,function(Ir,Vr){var qn=Ir.invoke(Vr,xr);return Vr.def(Ir.shared.strings,".id(",qn,")")})}return null}var yr=jt.static,gr=jt.dynamic,Bn=Hn("frag"),Nn=Hn("vert"),Zn=null;return J(Bn)&&J(Nn)?(Zn=Rt.program(Nn.id,Bn.id,null,An),jt=$(function(Wn,jn){return Wn.link(Zn)})):jt=new ee(Bn&&Bn.thisDep||Nn&&Nn.thisDep,Bn&&Bn.contextDep||Nn&&Nn.contextDep,Bn&&Bn.propDep||Nn&&Nn.propDep,function(Wn,jn){var xr,Ir,Vr=Wn.shared.shader;return xr=Bn?Bn.append(Wn,jn):jn.def(Vr,".","frag"),Ir=Nn?Nn.append(Wn,jn):jn.def(Vr,".","vert"),jn.def(Vr+".program("+Ir+","+xr+")")}),{frag:Bn,vert:Nn,progVar:jt,program:Zn}}(jt,0,Bn);gr("viewport"),gr(Tt("scissor.box"));var xr,Ir=0<Object.keys(Wn).length;if((xr={framebuffer:xr,draw:Zn,shader:jn,state:Wn,dirty:Ir,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}}).profile=function(jr){var tr,ur=jr.static;if(jr=jr.dynamic,"profile"in ur){var Cr=!!ur.profile;(tr=$(function(Zr,Ii){return Cr})).enable=Cr}else if("profile"in jr){var Fr=jr.profile;tr=Q(Fr,function(Zr,Ii){return Zr.invoke(Ii,Fr)})}return tr}(jt),xr.uniforms=function(jr,tr){var ur=jr.static,Cr=jr.dynamic,Fr={};return Object.keys(ur).forEach(function(Zr){var Ii,gi=ur[Zr];if("number"==typeof gi||"boolean"==typeof gi)Ii=$(function(){return gi});else if("function"==typeof gi){var zr=gi._reglType;"texture2d"===zr||"textureCube"===zr?Ii=$(function(Ci){return Ci.link(gi)}):"framebuffer"!==zr&&"framebufferCube"!==zr||(Ii=$(function(Ci){return Ci.link(gi.color[0])}))}else g(gi)&&(Ii=$(function(Ci){return Ci.global.def("[",o(gi.length,function(qi){return gi[qi]}),"]")}));Ii.value=gi,Fr[Zr]=Ii}),Object.keys(Cr).forEach(function(Zr){var Ii=Cr[Zr];Fr[Zr]=Q(Ii,function(gi,zr){return gi.invoke(zr,Ii)})}),Fr}(An),xr.drawVAO=xr.scopeVAO=Zn.vao,!xr.drawVAO&&jn.program&&!Bn&&Ie.angle_instanced_arrays&&Zn.static.elements){var Vr=!0;if(jt=jn.program.attributes.map(function(jr){return jr=Jt.static[jr],Vr=Vr&&!!jr,jr}),Vr&&0<jt.length){var qn=_t.getVAO(_t.createVAO({attributes:jt,elements:Zn.static.elements}));xr.drawVAO=new ee(null,null,null,function(jr,tr){return jr.link(qn)}),xr.useVAO=!0}}return Bn?xr.useVAO=!0:xr.attributes=function Gt(jt,Jt){var An=jt.static,Hn=jt.dynamic,yr={};return Object.keys(An).forEach(function(gr){var Bn=An[gr],Nn=it.id(gr),Zn=new ti;if(Z(Bn))Zn.state=1,Zn.buffer=Ve.getBuffer(Ve.create(Bn,34962,!1,!0)),Zn.type=0;else if(jn=Ve.getBuffer(Bn))Zn.state=1,Zn.buffer=jn,Zn.type=0;else if("constant"in Bn){var Wn=Bn.constant;Zn.buffer="null",Zn.state=2,"number"==typeof Wn?Zn.x=Wn:ht.forEach(function(tr,ur){ur<Wn.length&&(Zn[tr]=Wn[ur])})}else{var jn=Z(Bn.buffer)?Ve.getBuffer(Ve.create(Bn.buffer,34962,!1,!0)):Ve.getBuffer(Bn.buffer),xr=0|Bn.offset,Ir=0|Bn.stride,Vr=0|Bn.size,qn=!!Bn.normalized,jr=0;"type"in Bn&&(jr=ge[Bn.type]),Bn=0|Bn.divisor,Zn.buffer=jn,Zn.state=1,Zn.size=Vr,Zn.normalized=qn,Zn.type=jr||jn.dtype,Zn.offset=xr,Zn.stride=Ir,Zn.divisor=Bn}yr[gr]=$(function(tr,ur){var Cr=tr.attribCache;if(Nn in Cr)return Cr[Nn];var Fr={isStream:!1};return Object.keys(Zn).forEach(function(Zr){Fr[Zr]=Zn[Zr]}),Zn.buffer&&(Fr.buffer=tr.link(Zn.buffer),Fr.type=Fr.type||Fr.buffer+".dtype"),Cr[Nn]=Fr})}),Object.keys(Hn).forEach(function(gr){var Bn=Hn[gr];yr[gr]=Q(Bn,function(Nn,Zn){function Wn(Cr){Zn(qn[Cr],"=",jn,".",Cr,"|0;")}var jn=Nn.invoke(Zn,Bn),xr=Nn.shared,Ir=Nn.constants,Vr=xr.isBufferArgs,qn=(xr=xr.buffer,{isStream:Zn.def(!1)}),jr=new ti;jr.state=1,Object.keys(jr).forEach(function(Cr){qn[Cr]=Zn.def(""+jr[Cr])});var tr=qn.buffer,ur=qn.type;return Zn("if(",Vr,"(",jn,")){",qn.isStream,"=true;",tr,"=",xr,".createStream(",34962,",",jn,");",ur,"=",tr,".dtype;","}else{",tr,"=",xr,".getBuffer(",jn,");","if(",tr,"){",ur,"=",tr,".dtype;",'}else if("constant" in ',jn,"){",qn.state,"=",2,";","if(typeof "+jn+'.constant === "number"){',qn[ht[0]],"=",jn,".constant;",ht.slice(1).map(function(Cr){return qn[Cr]}).join("="),"=0;","}else{",ht.map(function(Cr,Fr){return qn[Cr]+"="+jn+".constant.length>"+Fr+"?"+jn+".constant["+Fr+"]:0;"}).join(""),"}}else{","if(",Vr,"(",jn,".buffer)){",tr,"=",xr,".createStream(",34962,",",jn,".buffer);","}else{",tr,"=",xr,".getBuffer(",jn,".buffer);","}",ur,'="type" in ',jn,"?",Ir.glTypes,"[",jn,".type]:",tr,".dtype;",qn.normalized,"=!!",jn,".normalized;"),Wn("size"),Wn("offset"),Wn("stride"),Wn("divisor"),Zn("}}"),Zn.exit("if(",qn.isStream,"){",xr,".destroyStream(",tr,");","}"),qn})}),yr}(Jt),xr.context=function(jr){var tr=jr.static,ur=jr.dynamic,Cr={};return Object.keys(tr).forEach(function(Fr){var Zr=tr[Fr];Cr[Fr]=$(function(Ii,gi){return"number"==typeof Zr||"boolean"==typeof Zr?""+Zr:Ii.link(Zr)})}),Object.keys(ur).forEach(function(Fr){var Zr=ur[Fr];Cr[Fr]=Q(Zr,function(Ii,gi){return Ii.invoke(gi,Zr)})}),Cr}(Hn),xr}function _n(jt,Jt,An){var Hn=jt.shared.context,yr=jt.scope();Object.keys(An).forEach(function(gr){Jt.save(Hn,"."+gr);var Bn=An[gr].append(jt,Jt);Array.isArray(Bn)?yr(Hn,".",gr,"=[",Bn.join(),"];"):yr(Hn,".",gr,"=",Bn,";")}),Jt(yr)}function en(jt,Jt,An,Hn){var yr,gr=(Nn=jt.shared).gl,Bn=Nn.framebuffer;Fn&&(yr=Jt.def(Nn.extensions,".webgl_draw_buffers"));var Nn=(Zn=jt.constants).drawBuffer,Zn=Zn.backBuffer;jt=An?An.append(jt,Jt):Jt.def(Bn,".next"),Hn||Jt("if(",jt,"!==",Bn,".cur){"),Jt("if(",jt,"){",gr,".bindFramebuffer(",36160,",",jt,".framebuffer);"),Fn&&Jt(yr,".drawBuffersWEBGL(",Nn,"[",jt,".colorAttachments.length]);"),Jt("}else{",gr,".bindFramebuffer(",36160,",null);"),Fn&&Jt(yr,".drawBuffersWEBGL(",Zn,");"),Jt("}",Bn,".cur=",jt,";"),Hn||Jt("}")}function on(jt,Jt,An){var Hn=jt.shared,yr=Hn.gl,gr=jt.current,Bn=jt.next,Nn=Hn.current,Zn=Hn.next,Wn=jt.cond(Nn,".dirty");ir.forEach(function(jn){var xr,Ir;if(!((jn=Tt(jn))in An.state))if(jn in Bn){xr=Bn[jn],Ir=gr[jn];var Vr=o(hr[jn].length,function(qn){return Wn.def(xr,"[",qn,"]")});Wn(jt.cond(Vr.map(function(qn,jr){return qn+"!=="+Ir+"["+jr+"]"}).join("||")).then(yr,".",Mr[jn],"(",Vr,");",Vr.map(function(qn,jr){return Ir+"["+jr+"]="+qn}).join(";"),";"))}else xr=Wn.def(Zn,".",jn),Vr=jt.cond(xr,"!==",Nn,".",jn),Wn(Vr),jn in Ur?Vr(jt.cond(xr).then(yr,".enable(",Ur[jn],");").else(yr,".disable(",Ur[jn],");"),Nn,".",jn,"=",xr,";"):Vr(yr,".",Mr[jn],"(",xr,");",Nn,".",jn,"=",xr,";")}),0===Object.keys(An.state).length&&Wn(Nn,".dirty=false;"),Jt(Wn)}function wn(jt,Jt,An,Hn){var yr=jt.shared,gr=jt.current,Bn=yr.current,Nn=yr.gl;Y(Object.keys(An)).forEach(function(Zn){var Wn=An[Zn];if(!Hn||Hn(Wn)){var jn=Wn.append(jt,Jt);if(Ur[Zn]){var xr=Ur[Zn];J(Wn)?Jt(Nn,jn?".enable(":".disable(",xr,");"):Jt(jt.cond(jn).then(Nn,".enable(",xr,");").else(Nn,".disable(",xr,");")),Jt(Bn,".",Zn,"=",jn,";")}else if(g(jn)){var Ir=gr[Zn];Jt(Nn,".",Mr[Zn],"(",jn,");",jn.map(function(Vr,qn){return Ir+"["+qn+"]="+Vr}).join(";"),";")}else Jt(Nn,".",Mr[Zn],"(",jn,");",Bn,".",Zn,"=",jn,";")}})}function On(jt,Jt){pr&&(jt.instancing=Jt.def(jt.shared.extensions,".angle_instanced_arrays"))}function Dn(jt,Jt,An,Hn,yr){function gr(){return"undefined"==typeof performance?"Date.now()":"performance.now()"}function Bn(jr){jr(Wn=Jt.def(),"=",gr(),";"),"string"==typeof yr?jr(Ir,".count+=",yr,";"):jr(Ir,".count++;"),Nt&&(Hn?jr(jn=Jt.def(),"=",qn,".getNumPendingQueries();"):jr(qn,".beginQuery(",Ir,");"))}function Nn(jr){jr(Ir,".cpuTime+=",gr(),"-",Wn,";"),Nt&&(Hn?jr(qn,".pushScopeStats(",jn,",",qn,".getNumPendingQueries(),",Ir,");"):jr(qn,".endQuery();"))}function Zn(jr){var tr=Jt.def(Vr,".profile");Jt(Vr,".profile=",jr,";"),Jt.exit(Vr,".profile=",tr,";")}var Wn,jn,xr=jt.shared,Ir=jt.stats,Vr=xr.current,qn=xr.timer;if(An=An.profile){if(J(An))return void(An.enable?(Bn(Jt),Nn(Jt.exit),Zn("true")):Zn("false"));Zn(An=An.append(jt,Jt))}else An=Jt.def(Vr,".profile");Bn(xr=jt.block()),Jt("if(",An,"){",xr,"}"),Nn(jt=jt.block()),Jt.exit("if(",An,"){",jt,"}")}function Tn(jt,Jt,An,Hn,yr){var Bn=jt.shared;Hn.forEach(function(Nn){var Zn,Wn=Nn.name,jn=An.attributes[Wn];if(jn){if(!yr(jn))return;Zn=jn.append(jt,Jt)}else{if(!yr(Qe))return;var xr=jt.scopeAttrib(Wn);Zn={},Object.keys(new ti).forEach(function(Ir){Zn[Ir]=Jt.def(xr,".",Ir)})}!function gr(Nn,Zn,Wn){function jn(){Jt("if(!",qn,".buffer){",Ir,".enableVertexAttribArray(",Vr,");}");var Cr,Fr=Wn.type;Cr=Wn.size?Jt.def(Wn.size,"||",Zn):Zn,Jt("if(",qn,".type!==",Fr,"||",qn,".size!==",Cr,"||",ur.map(function(Zr){return qn+"."+Zr+"!=="+Wn[Zr]}).join("||"),"){",Ir,".bindBuffer(",34962,",",jr,".buffer);",Ir,".vertexAttribPointer(",[Vr,Cr,Fr,Wn.normalized,Wn.stride,Wn.offset],");",qn,".type=",Fr,";",qn,".size=",Cr,";",ur.map(function(Zr){return qn+"."+Zr+"="+Wn[Zr]+";"}).join(""),"}"),pr&&Jt("if(",qn,".divisor!==",Fr=Wn.divisor,"){",jt.instancing,".vertexAttribDivisorANGLE(",[Vr,Fr],");",qn,".divisor=",Fr,";}")}function xr(){Jt("if(",qn,".buffer){",Ir,".disableVertexAttribArray(",Vr,");",qn,".buffer=null;","}if(",ht.map(function(Cr,Fr){return qn+"."+Cr+"!=="+tr[Fr]}).join("||"),"){",Ir,".vertexAttrib4f(",Vr,",",tr,");",ht.map(function(Cr,Fr){return qn+"."+Cr+"="+tr[Fr]+";"}).join(""),"}")}var Ir=Bn.gl,Vr=Jt.def(Nn,".location"),qn=Jt.def(Bn.attributes,"[",Vr,"]"),jr=Wn.buffer,tr=[Wn.x,Wn.y,Wn.z,Wn.w],ur=["buffer","normalized","offset","stride"];1===(Nn=Wn.state)?jn():2===Nn?xr():(Jt("if(",Nn,"===",1,"){"),jn(),Jt("}else{"),xr(),Jt("}"))}(jt.link(Nn),function(Ir){switch(Ir){case 35664:case 35667:case 35671:return 2;case 35665:case 35668:case 35672:return 3;case 35666:case 35669:case 35673:return 4;default:return 1}}(Nn.info.type),Zn)})}function pn(jt,Jt,An,Hn,yr,gr){for(var Bn,Nn=jt.shared,Zn=Nn.gl,Wn={},jn=0;jn<Hn.length;++jn){var xr=(ur=Hn[jn]).name,Ir=ur.info.type,Vr=ur.info.size,qn=An.uniforms[xr];if(1<Vr){if(!qn)continue;var jr=xr.replace("[0]","");if(Wn[jr])continue;Wn[jr]=1}var tr,ur=jt.link(ur)+".location";if(qn){if(!yr(qn))continue;if(J(qn)){if(xr=qn.value,35678===Ir||35680===Ir)Jt(Zn,".uniform1i(",ur,",",(Ir=jt.link(xr._texture||xr.color[0]._texture))+".bind());"),Jt.exit(Ir,".unbind();");else if(35674===Ir||35675===Ir||35676===Ir)Vr=jt.global.def("new Float32Array(["+Array.prototype.slice.call(xr)+"])"),xr=2,35675===Ir?xr=3:35676===Ir&&(xr=4),Jt(Zn,".uniformMatrix",xr,"fv(",ur,",false,",Vr,");");else{switch(Ir){case 5126:Bn="1f";break;case 35664:Bn="2f";break;case 35665:Bn="3f";break;case 35666:Bn="4f";break;case 35670:case 5124:Bn="1i";break;case 35671:case 35667:Bn="2i";break;case 35672:case 35668:Bn="3i";break;case 35673:case 35669:Bn="4i"}1<Vr?(Bn+="v",xr=jt.global.def("["+Array.prototype.slice.call(xr)+"]")):xr=g(xr)?Array.prototype.slice.call(xr):xr,Jt(Zn,".uniform",Bn,"(",ur,",",xr,");")}continue}tr=qn.append(jt,Jt)}else{if(!yr(Qe))continue;tr=Jt.def(Nn.uniforms,"[",it.id(xr),"]")}switch(35678===Ir?Jt("if(",tr,"&&",tr,'._reglType==="framebuffer"){',tr,"=",tr,".color[0];","}"):35680===Ir&&Jt("if(",tr,"&&",tr,'._reglType==="framebufferCube"){',tr,"=",tr,".color[0];","}"),xr=1,Ir){case 35678:case 35680:Ir=Jt.def(tr,"._texture"),Jt(Zn,".uniform1i(",ur,",",Ir,".bind());"),Jt.exit(Ir,".unbind();");continue;case 5124:case 35670:Bn="1i";break;case 35667:case 35671:Bn="2i",xr=2;break;case 35668:case 35672:Bn="3i",xr=3;break;case 35669:case 35673:Bn="4i",xr=4;break;case 5126:Bn="1f";break;case 35664:Bn="2f",xr=2;break;case 35665:Bn="3f",xr=3;break;case 35666:Bn="4f",xr=4;break;case 35674:Bn="Matrix2fv";break;case 35675:Bn="Matrix3fv";break;case 35676:Bn="Matrix4fv"}if(-1===Bn.indexOf("Matrix")&&1<Vr&&(Bn+="v",xr=1),"M"===Bn.charAt(0)){Jt(Zn,".uniform",Bn,"(",ur,","),ur=Math.pow(Ir-35674+2,2);var Cr=jt.global.def("new Float32Array(",ur,")");Array.isArray(tr)?Jt("false,(",o(ur,function(Zr){return Cr+"["+Zr+"]="+tr[Zr]}),",",Cr,")"):Jt("false,(Array.isArray(",tr,")||",tr," instanceof Float32Array)?",tr,":(",o(ur,function(Zr){return Cr+"["+Zr+"]="+tr+"["+Zr+"]"}),",",Cr,")"),Jt(");")}else{if(1<xr){Ir=[];var Fr=[];for(Vr=0;Vr<xr;++Vr)Array.isArray(tr)?Fr.push(tr[Vr]):Fr.push(Jt.def(tr+"["+Vr+"]")),gr&&Ir.push(Jt.def());gr&&Jt("if(!",jt.batchId,"||",Ir.map(function(Zr,Ii){return Zr+"!=="+Fr[Ii]}).join("||"),"){",Ir.map(function(Zr,Ii){return Zr+"="+Fr[Ii]+";"}).join("")),Jt(Zn,".uniform",Bn,"(",ur,",",Fr.join(","),");")}else gr&&(Ir=Jt.def(),Jt("if(!",jt.batchId,"||",Ir,"!==",tr,"){",Ir,"=",tr,";")),Jt(Zn,".uniform",Bn,"(",ur,",",tr,");");gr&&Jt("}")}}}function En(jt,Jt,An,Hn){function yr(Fr){var Zr=Ir[Fr];return Zr?Zr.append(jt,Zr.contextDep&&Hn.contextDynamic||Zr.propDep?An:Jt):Jt.def(xr,".",Fr)}function gr(){function Fr(){An(Zn,".drawElementsInstancedANGLE(",[qn,tr,ur,jr+"<<(("+ur+"-5121)>>1)",Nn],");")}function Zr(){An(Zn,".drawArraysInstancedANGLE(",[qn,jr,tr,Nn],");")}Vr&&"null"!==Vr?Cr?Fr():(An("if(",Vr,"){"),Fr(),An("}else{"),Zr(),An("}")):Zr()}function Bn(){function Fr(){An(jn+".drawElements("+[qn,tr,ur,jr+"<<(("+ur+"-5121)>>1)"]+");")}function Zr(){An(jn+".drawArrays("+[qn,jr,tr]+");")}Vr&&"null"!==Vr?Cr?Fr():(An("if(",Vr,"){"),Fr(),An("}else{"),Zr(),An("}")):Zr()}var Nn,Zn,Fr,Zr,Wn=jt.shared,jn=Wn.gl,xr=Wn.draw,Ir=Hn.draw,Vr=(Zr=Jt,(Fr=Ir.elements)?((Fr.contextDep&&Hn.contextDynamic||Fr.propDep)&&(Zr=An),Fr=Fr.append(jt,Zr),Ir.elementsActive&&Zr("if("+Fr+")"+jn+".bindBuffer(34963,"+Fr+".buffer.buffer);")):(Fr=Zr.def(),Zr(Fr,"=",xr,".","elements",";","if(",Fr,"){",jn,".bindBuffer(",34963,",",Fr,".buffer.buffer);}","else if(",Wn.vao,".currentVAO){",Fr,"=",jt.shared.elements+".getElements("+Wn.vao,".currentVAO.elements);",Rn?"":"if("+Fr+")"+jn+".bindBuffer(34963,"+Fr+".buffer.buffer);","}")),Fr),qn=yr("primitive"),jr=yr("offset"),tr=function(){var Fr=Ir.count,Zr=Jt;return Fr?((Fr.contextDep&&Hn.contextDynamic||Fr.propDep)&&(Zr=An),Fr=Fr.append(jt,Zr)):Fr=Zr.def(xr,".","count"),Fr}();if("number"==typeof tr){if(0===tr)return}else An("if(",tr,"){"),An.exit("}");pr&&(Nn=yr("instances"),Zn=jt.instancing);var ur=Vr+".type",Cr=Ir.elements&&J(Ir.elements)&&!Ir.vaoActive;pr&&("number"!=typeof Nn||0<=Nn)?"string"==typeof Nn?(An("if(",Nn,">0){"),gr(),An("}else if(",Nn,"<0){"),Bn(),An("}")):gr():Bn()}function Un(jt,Jt,An,Hn,yr){return yr=(Jt=sn()).proc("body",yr),pr&&(Jt.instancing=yr.def(Jt.shared.extensions,".angle_instanced_arrays")),jt(Jt,yr,An,Hn),Jt.compile().body}function In(jt,Jt,An,Hn){On(jt,Jt),An.useVAO?An.drawVAO?Jt(jt.shared.vao,".setVAO(",An.drawVAO.append(jt,Jt),");"):Jt(jt.shared.vao,".setVAO(",jt.shared.vao,".targetVAO);"):(Jt(jt.shared.vao,".setVAO(null);"),Tn(jt,Jt,An,Hn.attributes,function(){return!0})),pn(jt,Jt,An,Hn.uniforms,function(){return!0},!1),En(jt,Jt,Jt,An)}function sr(jt,Jt,An,Hn){function yr(){return!0}jt.batchId="a1",On(jt,Jt),Tn(jt,Jt,An,Hn.attributes,yr),pn(jt,Jt,An,Hn.uniforms,yr,!1),En(jt,Jt,Jt,An)}function fr(jt,Jt,An,Hn){function yr(xr){return xr.contextDep&&Bn||xr.propDep}function gr(xr){return!yr(xr)}On(jt,Jt);var Bn=An.contextDep,Nn=Jt.def(),Zn=Jt.def();jt.shared.props=Zn,jt.batchId=Nn;var Wn=jt.scope(),jn=jt.scope();Jt(Wn.entry,"for(",Nn,"=0;",Nn,"<","a1",";++",Nn,"){",Zn,"=","a0","[",Nn,"];",jn,"}",Wn.exit),An.needsContext&&_n(jt,jn,An.context),An.needsFramebuffer&&en(jt,jn,An.framebuffer),wn(jt,jn,An.state,yr),An.profile&&yr(An.profile)&&Dn(jt,jn,An,!1,!0),Hn?(An.useVAO?An.drawVAO?yr(An.drawVAO)?jn(jt.shared.vao,".setVAO(",An.drawVAO.append(jt,jn),");"):Wn(jt.shared.vao,".setVAO(",An.drawVAO.append(jt,Wn),");"):Wn(jt.shared.vao,".setVAO(",jt.shared.vao,".targetVAO);"):(Wn(jt.shared.vao,".setVAO(null);"),Tn(jt,Wn,An,Hn.attributes,gr),Tn(jt,jn,An,Hn.attributes,yr)),pn(jt,Wn,An,Hn.uniforms,gr,!1),pn(jt,jn,An,Hn.uniforms,yr,!0),En(jt,Wn,jn,An)):(Jt=jt.global.def("{}"),Hn=An.shader.progVar.append(jt,jn),Zn=jn.def(Hn,".id"),Wn=jn.def(Jt,"[",Zn,"]"),jn(jt.shared.gl,".useProgram(",Hn,".program);","if(!",Wn,"){",Wn,"=",Jt,"[",Zn,"]=",jt.link(function(xr){return Un(sr,jt,An,xr,2)}),"(",Hn,");}",Wn,".call(this,a0[",Nn,"],",Nn,");"))}function qr(jt,Jt,An){var Hn=Jt.static[An];if(Hn&&function(jn){if("object"==typeof jn&&!g(jn)){for(var xr=Object.keys(jn),Ir=0;Ir<xr.length;++Ir)if(ie.isDynamic(jn[xr[Ir]]))return!0;return!1}}(Hn)){var yr=jt.global,gr=Object.keys(Hn),Bn=!1,Nn=!1,Zn=!1,Wn=jt.global.def("{}");gr.forEach(function(jn){var xr=Hn[jn];if(ie.isDynamic(xr))"function"==typeof xr&&(xr=Hn[jn]=ie.unbox(xr)),jn=Q(xr,null),Bn=Bn||jn.thisDep,Zn=Zn||jn.propDep,Nn=Nn||jn.contextDep;else{switch(yr(Wn,".",jn,"="),typeof xr){case"number":yr(xr);break;case"string":yr('"',xr,'"');break;case"object":Array.isArray(xr)&&yr("[",xr.join(),"]");break;default:yr(jt.link(xr))}yr(";")}}),Jt.dynamic[An]=new ie.DynamicVariable(4,{thisDep:Bn,contextDep:Nn,propDep:Zn,ref:Wn,append:function(jn,xr){gr.forEach(function(Ir){var Vr=Hn[Ir];ie.isDynamic(Vr)&&(Vr=jn.invoke(xr,Vr),xr(Wn,".",Ir,"=",Vr,";"))})}}),delete Jt.static[An]}}var ti=_t.Record,Ar={add:32774,subtract:32778,"reverse subtract":32779};Ie.ext_blend_minmax&&(Ar.min=32775,Ar.max=32776);var pr=Ie.angle_instanced_arrays,Fn=Ie.webgl_draw_buffers,Rn=Ie.oes_vertex_array_object,hr={dirty:!0,profile:rt.profile},ri={},ir=[],Ur={},Mr={};Ut("dither",3024),Ut("blend.enable",3042),Wt("blend.color","blendColor",[0,0,0,0]),Wt("blend.equation","blendEquationSeparate",[32774,32774]),Wt("blend.func","blendFuncSeparate",[1,0,1,0]),Ut("depth.enable",2929,!0),Wt("depth.func","depthFunc",513),Wt("depth.range","depthRange",[0,1]),Wt("depth.mask","depthMask",!0),Wt("colorMask","colorMask",[!0,!0,!0,!0]),Ut("cull.enable",2884),Wt("cull.face","cullFace",1029),Wt("frontFace","frontFace",2305),Wt("lineWidth","lineWidth",1),Ut("polygonOffset.enable",32823),Wt("polygonOffset.offset","polygonOffset",[0,0]),Ut("sample.alpha",32926),Ut("sample.enable",32928),Wt("sample.coverage","sampleCoverage",[1,!1]),Ut("stencil.enable",2960),Wt("stencil.mask","stencilMask",-1),Wt("stencil.func","stencilFunc",[519,0,-1]),Wt("stencil.opFront","stencilOpSeparate",[1028,7680,7680,7680]),Wt("stencil.opBack","stencilOpSeparate",[1029,7680,7680,7680]),Ut("scissor.enable",3089),Wt("scissor.box","scissor",[0,0,qe.drawingBufferWidth,qe.drawingBufferHeight]),Wt("viewport","viewport",[0,0,qe.drawingBufferWidth,qe.drawingBufferHeight]);var wr={gl:qe,context:Vt,strings:it,next:ri,current:hr,draw:yt,elements:Be,buffer:Ve,shader:Rt,attributes:_t.state,vao:_t,uniforms:wt,framebuffer:gt,extensions:Ie,timer:Nt,isBufferArgs:Z},ii={primTypes:Fe,compareFuncs:tn,blendFuncs:Ot,blendEquations:Ar,stencilOps:un,glTypes:ge,orientationType:Ze};Fn&&(ii.backBuffer=[1029],ii.drawBuffer=o(ze.maxDrawbuffers,function(jt){return 0===jt?[0]:o(jt,function(Jt){return 36064+Jt})}));var gn=0;return{next:ri,current:hr,procs:function(){var jt=sn(),Jt=jt.proc("poll"),An=jt.proc("refresh"),Hn=jt.block();Jt(Hn),An(Hn);var yr,gr=jt.shared,Bn=gr.gl,Nn=gr.next,Zn=gr.current;Hn(Zn,".dirty=false;"),en(jt,Jt),en(jt,An,null,!0),pr&&(yr=jt.link(pr)),Ie.oes_vertex_array_object&&An(jt.link(Ie.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Wn=0;Wn<ze.maxAttributes;++Wn){var jn=An.def(gr.attributes,"[",Wn,"]"),xr=jt.cond(jn,".buffer");xr.then(Bn,".enableVertexAttribArray(",Wn,");",Bn,".bindBuffer(",34962,",",jn,".buffer.buffer);",Bn,".vertexAttribPointer(",Wn,",",jn,".size,",jn,".type,",jn,".normalized,",jn,".stride,",jn,".offset);").else(Bn,".disableVertexAttribArray(",Wn,");",Bn,".vertexAttrib4f(",Wn,",",jn,".x,",jn,".y,",jn,".z,",jn,".w);",jn,".buffer=null;"),An(xr),pr&&An(yr,".vertexAttribDivisorANGLE(",Wn,",",jn,".divisor);")}return An(jt.shared.vao,".currentVAO=null;",jt.shared.vao,".setVAO(",jt.shared.vao,".targetVAO);"),Object.keys(Ur).forEach(function(Ir){var Vr=Ur[Ir],qn=Hn.def(Nn,".",Ir),jr=jt.block();jr("if(",qn,"){",Bn,".enable(",Vr,")}else{",Bn,".disable(",Vr,")}",Zn,".",Ir,"=",qn,";"),An(jr),Jt("if(",qn,"!==",Zn,".",Ir,"){",jr,"}")}),Object.keys(Mr).forEach(function(Ir){var Vr,qn,jr=Mr[Ir],tr=hr[Ir],ur=jt.block();ur(Bn,".",jr,"("),g(tr)?(jr=tr.length,Vr=jt.global.def(Nn,".",Ir),qn=jt.global.def(Zn,".",Ir),ur(o(jr,function(Cr){return Vr+"["+Cr+"]"}),");",o(jr,function(Cr){return qn+"["+Cr+"]="+Vr+"["+Cr+"];"}).join("")),Jt("if(",o(jr,function(Cr){return Vr+"["+Cr+"]!=="+qn+"["+Cr+"]"}).join("||"),"){",ur,"}")):(Vr=Hn.def(Nn,".",Ir),qn=Hn.def(Zn,".",Ir),ur(Vr,");",Zn,".",Ir,"=",Vr,";"),Jt("if(",Vr,"!==",qn,"){",ur,"}")),An(ur)}),jt.compile()}(),compile:function(jt,Jt,An,Hn,yr){var gr=sn();gr.stats=gr.link(yr),Object.keys(Jt.static).forEach(function(Nn){qr(gr,Jt,Nn)}),ut.forEach(function(Nn){qr(gr,jt,Nn)});var Bn=Kt(jt,Jt,An,Hn);return function(Nn,Zn){var Wn=Nn.proc("draw",1);On(Nn,Wn),_n(Nn,Wn,Zn.context),en(Nn,Wn,Zn.framebuffer),on(Nn,Wn,Zn),wn(Nn,Wn,Zn.state),Dn(Nn,Wn,Zn,!1,!0);var jn=Zn.shader.progVar.append(Nn,Wn);if(Wn(Nn.shared.gl,".useProgram(",jn,".program);"),Zn.shader.program)In(Nn,Wn,Zn,Zn.shader.program);else{Wn(Nn.shared.vao,".setVAO(null);");var xr=Nn.global.def("{}"),Ir=Wn.def(jn,".id"),Vr=Wn.def(xr,"[",Ir,"]");Wn(Nn.cond(Vr).then(Vr,".call(this,a0);").else(Vr,"=",xr,"[",Ir,"]=",Nn.link(function(qn){return Un(In,Nn,Zn,qn,1)}),"(",jn,");",Vr,".call(this,a0);"))}0<Object.keys(Zn.state).length&&Wn(Nn.shared.current,".dirty=true;"),Nn.shared.vao&&Wn(Nn.shared.vao,".setVAO(null);")}(gr,Bn),function rr(jt,Jt){function An(Bn){var Nn=Jt.shader[Bn];Nn&&Hn.set(yr.shader,"."+Bn,Nn.append(jt,Hn))}var Hn=jt.proc("scope",3);jt.batchId="a2";var yr=jt.shared,gr=yr.current;_n(jt,Hn,Jt.context),Jt.framebuffer&&Jt.framebuffer.append(jt,Hn),Y(Object.keys(Jt.state)).forEach(function(Bn){var Nn=Jt.state[Bn].append(jt,Hn);g(Nn)?Nn.forEach(function(Zn,Wn){Hn.set(jt.next[Bn],"["+Wn+"]",Zn)}):Hn.set(yr.next,"."+Bn,Nn)}),Dn(jt,Hn,Jt,!0,!0),["elements","offset","count","instances","primitive"].forEach(function(Bn){var Nn=Jt.draw[Bn];Nn&&Hn.set(yr.draw,"."+Bn,""+Nn.append(jt,Hn))}),Object.keys(Jt.uniforms).forEach(function(Bn){var Nn=Jt.uniforms[Bn].append(jt,Hn);Array.isArray(Nn)&&(Nn="["+Nn.join()+"]"),Hn.set(yr.uniforms,"["+it.id(Bn)+"]",Nn)}),Object.keys(Jt.attributes).forEach(function(Bn){var Nn=Jt.attributes[Bn].append(jt,Hn),Zn=jt.scopeAttrib(Bn);Object.keys(new ti).forEach(function(Wn){Hn.set(Zn,"."+Wn,Nn[Wn])})}),Jt.scopeVAO&&Hn.set(yr.vao,".targetVAO",Jt.scopeVAO.append(jt,Hn)),An("vert"),An("frag"),0<Object.keys(Jt.state).length&&(Hn(gr,".dirty=true;"),Hn.exit(gr,".dirty=true;")),Hn("a1(",jt.shared.context,",a0,",jt.batchId,");")}(gr,Bn),function(Nn,Zn){function Wn(tr){return tr.contextDep&&xr||tr.propDep}var jn=Nn.proc("batch",2);Nn.batchId="0",On(Nn,jn);var xr=!1,Ir=!0;Object.keys(Zn.context).forEach(function(tr){xr=xr||Zn.context[tr].propDep}),xr||(_n(Nn,jn,Zn.context),Ir=!1);var Vr=!1;if((qn=Zn.framebuffer)?(qn.propDep?xr=Vr=!0:qn.contextDep&&xr&&(Vr=!0),Vr||en(Nn,jn,qn)):en(Nn,jn,null),Zn.state.viewport&&Zn.state.viewport.propDep&&(xr=!0),on(Nn,jn,Zn),wn(Nn,jn,Zn.state,function(tr){return!Wn(tr)}),Zn.profile&&Wn(Zn.profile)||Dn(Nn,jn,Zn,!1,"a1"),Zn.contextDep=xr,Zn.needsContext=Ir,Zn.needsFramebuffer=Vr,(Ir=Zn.shader.progVar).contextDep&&xr||Ir.propDep)fr(Nn,jn,Zn,null);else if(Ir=Ir.append(Nn,jn),jn(Nn.shared.gl,".useProgram(",Ir,".program);"),Zn.shader.program)fr(Nn,jn,Zn,Zn.shader.program);else{jn(Nn.shared.vao,".setVAO(null);");var qn=Nn.global.def("{}"),jr=(Vr=jn.def(Ir,".id"),jn.def(qn,"[",Vr,"]"));jn(Nn.cond(jr).then(jr,".call(this,a0,a1);").else(jr,"=",qn,"[",Vr,"]=",Nn.link(function(tr){return Un(fr,Nn,Zn,tr,2)}),"(",Ir,");",jr,".call(this,a0,a1);"))}0<Object.keys(Zn.state).length&&jn(Nn.shared.current,".dirty=true;"),Nn.shared.vao&&jn(Nn.shared.vao,".setVAO(null);")}(gr,Bn),G(gr.compile(),{destroy:function(){Bn.shader.program.destroy()}})}}}function j(qe,it){for(var Ie=0;Ie<qe.length;++Ie)if(qe[Ie]===it)return Ie;return-1}var G=function(qe,it){for(var Ie=Object.keys(it),ze=0;ze<Ie.length;++ze)qe[Ie[ze]]=it[Ie[ze]];return qe},W=0,ie={DynamicVariable:m,define:function(qe,it){return new m(qe,x(it+""))},isDynamic:function(qe){return"function"==typeof qe&&!qe._reglType||qe instanceof m},unbox:function qe(it,Ie){return"function"==typeof it?new m(0,it):"number"==typeof it||"boolean"==typeof it?new m(5,it):Array.isArray(it)?new m(6,it.map(function(ze,Ve){return qe(ze,Ie+"["+Ve+"]")})):it instanceof m?it:void 0},accessor:x},q={next:"function"==typeof requestAnimationFrame?function(qe){return requestAnimationFrame(qe)}:function(qe){return setTimeout(qe,16)},cancel:"function"==typeof cancelAnimationFrame?function(qe){return cancelAnimationFrame(qe)}:clearTimeout},te="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return+new Date},ne=l();ne.zero=l();var ue=function(qe){return qe instanceof Uint8Array||qe instanceof Uint16Array||qe instanceof Uint32Array||qe instanceof Int8Array||qe instanceof Int16Array||qe instanceof Int32Array||qe instanceof Float32Array||qe instanceof Float64Array||qe instanceof Uint8ClampedArray},de=function(qe){return Object.keys(qe).map(function(it){return qe[it]})},he={shape:function(qe){for(var it=[];qe.length;qe=qe[0])it.push(qe.length);return it},flatten:function(qe,it,Ie,ze){var Ve=1;if(it.length)for(var Be=0;Be<it.length;++Be)Ve*=it[Be];else Ve=0;switch(Ie=ze||ne.allocType(Ie,Ve),it.length){case 0:break;case 1:for(ze=it[0],it=0;it<ze;++it)Ie[it]=qe[it];break;case 2:for(ze=it[0],it=it[1],Be=Ve=0;Be<ze;++Be)for(var at=qe[Be],gt=0;gt<it;++gt)Ie[Ve++]=at[gt];break;case 3:d(qe,it[0],it[1],it[2],Ie,0);break;default:!function wt(_t,Rt,yt,Vt,Nt){for(var rt=1,Tt=yt+1;Tt<Rt.length;++Tt)rt*=Rt[Tt];var Ut=Rt[yt];if(Rt.length-yt==4){var Wt=Rt[yt+1],sn=Rt[yt+2];for(Rt=Rt[yt+3],Tt=0;Tt<Ut;++Tt)d(_t[Tt],Wt,sn,Rt,Vt,Nt),Nt+=rt}else for(Tt=0;Tt<Ut;++Tt)wt(_t[Tt],Rt,yt+1,Vt,Nt),Nt+=rt}(qe,it,0,Ie,0)}return Ie}},be={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},ge={int8:5120,int16:5122,int32:5124,uint8:5121,uint16:5123,uint32:5125,float:5126,float32:5126},we={dynamic:35048,stream:35040,static:35044},Ce=he.flatten,De=he.shape,Se=[];Se[5120]=1,Se[5122]=2,Se[5124]=4,Se[5121]=1,Se[5123]=2,Se[5125]=4,Se[5126]=4;var Fe={points:0,point:0,lines:1,line:1,triangles:4,triangle:4,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},ve=new Float32Array(1),Te=new Uint32Array(ve.buffer),Le=[9984,9986,9985,9987],Ee=[0,6409,6410,6407,6408],Pe={};Pe[6409]=Pe[6406]=Pe[6402]=1,Pe[34041]=Pe[6410]=2,Pe[6407]=Pe[35904]=3,Pe[6408]=Pe[35906]=4;var je=f("HTMLCanvasElement"),Ge=f("OffscreenCanvas"),Ke=f("CanvasRenderingContext2D"),lt=f("ImageBitmap"),Ue=f("HTMLImageElement"),$e=f("HTMLVideoElement"),et=Object.keys(be).concat([je,Ge,Ke,lt,Ue,$e]),tt=[];tt[5121]=1,tt[5126]=4,tt[36193]=2,tt[5123]=2,tt[5125]=4;var ct=[];ct[32854]=2,ct[32855]=2,ct[36194]=2,ct[34041]=4,ct[33776]=.5,ct[33777]=.5,ct[33778]=1,ct[33779]=1,ct[35986]=.5,ct[35987]=1,ct[34798]=1,ct[35840]=.5,ct[35841]=.25,ct[35842]=.5,ct[35843]=.25,ct[36196]=.5;var xt=[];xt[32854]=2,xt[32855]=2,xt[36194]=2,xt[33189]=2,xt[36168]=1,xt[34041]=4,xt[35907]=4,xt[34836]=16,xt[34842]=8,xt[34843]=6;var Ht=[];Ht[6408]=4,Ht[6407]=3;var zt=[];zt[5121]=1,zt[5126]=4,zt[36193]=2;var ht=["x","y","z","w"],ut="blend.func blend.equation stencil.func stencil.opFront stencil.opBack sample.coverage viewport scissor.box polygonOffset.offset".split(" "),Ot={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},tn={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},un={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},Ze={cw:2304,ccw:2305},Qe=new ee(!1,!1,!1,function(){});return function(qe){function it(){if(0===sr.length)He&&He.update(),ti=null;else{ti=q.next(it),Rt();for(var pr=sr.length-1;0<=pr;--pr){var Fn=sr[pr];Fn&&Fn(Kt,null,0)}Nt.flush(),He&&He.update()}}function Ie(){!ti&&0<sr.length&&(ti=q.next(it))}function ze(){ti&&(q.cancel(it),ti=null)}function Ve(pr){pr.preventDefault(),ze(),fr.forEach(function(Fn){Fn()})}function Be(pr){Nt.getError(),Tt.restore(),On.restore(),en.restore(),Dn.restore(),Tn.restore(),pn.restore(),wn.restore(),He&&He.restore(),En.procs.refresh(),Ie(),rr.forEach(function(Fn){Fn()})}function at(pr){function Fn(jt,Jt){var An={},Hn={};return Object.keys(jt).forEach(function(yr){var gr=jt[yr];if(ie.isDynamic(gr))Hn[yr]=ie.unbox(gr,yr);else{if(Jt&&Array.isArray(gr))for(var Bn=0;Bn<gr.length;++Bn)if(ie.isDynamic(gr[Bn]))return void(Hn[yr]=ie.unbox(gr,yr));An[yr]=gr}}),{dynamic:Hn,static:An}}var Rn=Fn(pr.context||{},!0),hr=Fn(pr.uniforms||{},!0),ri=Fn(pr.attributes||{},!1);pr=Fn(function(jt){function Jt(Hn){if(Hn in An){var yr=An[Hn];delete An[Hn],Object.keys(yr).forEach(function(gr){An[Hn+"."+gr]=yr[gr]})}}var An=G({},jt);return delete An.uniforms,delete An.attributes,delete An.context,delete An.vao,"stencil"in An&&An.stencil.op&&(An.stencil.opBack=An.stencil.opFront=An.stencil.op,delete An.stencil.op),Jt("blend"),Jt("depth"),Jt("cull"),Jt("stencil"),Jt("polygonOffset"),Jt("scissor"),Jt("sample"),"vao"in jt&&(An.vao=jt.vao),An}(pr),!1);var ir={gpuTime:0,cpuTime:0,count:0},Ur=En.compile(pr,ri,hr,Rn,ir),Mr=Ur.draw,wr=Ur.batch,ii=Ur.scope,gn=[];return G(function(jt,Jt){var An;if("function"==typeof jt)return ii.call(this,null,jt,0);if("function"==typeof Jt)if("number"==typeof jt)for(An=0;An<jt;++An)ii.call(this,null,Jt,An);else{if(!Array.isArray(jt))return ii.call(this,jt,Jt,0);for(An=0;An<jt.length;++An)ii.call(this,jt[An],Jt,An)}else if("number"==typeof jt){if(0<jt)return wr.call(this,function(Hn){for(;gn.length<Hn;)gn.push(null);return gn}(0|jt),0|jt)}else{if(!Array.isArray(jt))return Mr.call(this,jt);if(jt.length)return wr.call(this,jt,jt.length)}},{stats:ir,destroy:function(){Ur.destroy()}})}function gt(pr,Fn){var Rn=0;En.procs.poll();var hr=Fn.color;hr&&(Nt.clearColor(+hr[0]||0,+hr[1]||0,+hr[2]||0,+hr[3]||0),Rn|=16384),"depth"in Fn&&(Nt.clearDepth(+Fn.depth),Rn|=256),"stencil"in Fn&&(Nt.clearStencil(0|Fn.stencil),Rn|=1024),Nt.clear(Rn)}function wt(pr){return sr.push(pr),Ie(),{cancel:function(){var Fn=j(sr,pr);sr[Fn]=function Rn(){var hr=j(sr,Rn);sr[hr]=sr[sr.length-1],--sr.length,0>=sr.length&&ze()}}}}function _t(){var pr=Un.viewport,Fn=Un.scissor_box;pr[0]=pr[1]=Fn[0]=Fn[1]=0,Kt.viewportWidth=Kt.framebufferWidth=Kt.drawingBufferWidth=pr[2]=Fn[2]=Nt.drawingBufferWidth,Kt.viewportHeight=Kt.framebufferHeight=Kt.drawingBufferHeight=pr[3]=Fn[3]=Nt.drawingBufferHeight}function Rt(){Kt.tick+=1,Kt.time=Vt(),_t(),En.procs.poll()}function yt(){Dn.refresh(),_t(),En.procs.refresh(),He&&He.update()}function Vt(){return(te()-vt)/1e3}if(!(qe=function e(qe){var it,Ie,ze,Ve,Be=qe||{};qe={};var at=[],gt=[],wt="undefined"==typeof window?1:window.devicePixelRatio,_t=!1,Rt=function(Vt){},yt=function(){};if("string"==typeof Be?it=document.querySelector(Be):"object"==typeof Be&&("string"==typeof Be.nodeName&&"function"==typeof Be.appendChild&&"function"==typeof Be.getBoundingClientRect?it=Be:"function"==typeof Be.drawArrays||"function"==typeof Be.drawElements?ze=(Ve=Be).canvas:("gl"in Be?Ve=Be.gl:"canvas"in Be?ze=b(Be.canvas):"container"in Be&&(Ie=b(Be.container)),"attributes"in Be&&(qe=Be.attributes),"extensions"in Be&&(at=T(Be.extensions)),"optionalExtensions"in Be&&(gt=T(Be.optionalExtensions)),"onDone"in Be&&(Rt=Be.onDone),"profile"in Be&&(_t=!!Be.profile),"pixelRatio"in Be&&(wt=+Be.pixelRatio))),it&&("canvas"===it.nodeName.toLowerCase()?ze=it:Ie=it),!Ve){if(!ze){if(!(it=function(Vt,Nt,rt){function Tt(){var sn=window.innerWidth,He=window.innerHeight;Vt!==document.body&&(sn=(He=Wt.getBoundingClientRect()).right-He.left,He=He.bottom-He.top),Wt.width=rt*sn,Wt.height=rt*He}var Ut,Wt=document.createElement("canvas");return G(Wt.style,{border:0,margin:0,padding:0,top:0,left:0,width:"100%",height:"100%"}),Vt.appendChild(Wt),Vt===document.body&&(Wt.style.position="absolute",G(Vt.style,{margin:0,padding:0})),Vt!==document.body&&"function"==typeof ResizeObserver?(Ut=new ResizeObserver(function(){setTimeout(Tt)})).observe(Vt):window.addEventListener("resize",Tt,!1),Tt(),{canvas:Wt,onDestroy:function(){Ut?Ut.disconnect():window.removeEventListener("resize",Tt),Vt.removeChild(Wt)}}}(Ie||document.body,0,wt)))return null;ze=it.canvas,yt=it.onDestroy}void 0===qe.premultipliedAlpha&&(qe.premultipliedAlpha=!0),Ve=function(Vt,Nt){function rt(Tt){try{return Vt.getContext(Tt,Nt)}catch(Ut){return null}}return rt("webgl")||rt("experimental-webgl")||rt("webgl-experimental")}(ze,qe)}return Ve?{gl:Ve,canvas:ze,container:Ie,extensions:at,optionalExtensions:gt,pixelRatio:wt,profile:_t,onDone:Rt,onDestroy:yt}:(yt(),Rt("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}(qe)))return null;var Nt=qe.gl,rt=Nt.getContextAttributes();Nt.isContextLost();var Tt=function(pr,Fn){function Rn(Ur){var Mr;Ur=Ur.toLowerCase();try{Mr=hr[Ur]=pr.getExtension(Ur)}catch(wr){}return!!Mr}for(var hr={},ri=0;ri<Fn.extensions.length;++ri){var ir=Fn.extensions[ri];if(!Rn(ir))return Fn.onDestroy(),Fn.onDone('"'+ir+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Fn.optionalExtensions.forEach(Rn),{extensions:hr,restore:function(){Object.keys(hr).forEach(function(Ur){if(hr[Ur]&&!Rn(Ur))throw Error("(regl): error restoring extension "+Ur)})}}}(Nt,qe);if(!Tt)return null;var pr,Fn,Ut=(pr={"":0},Fn=[""],{id:function(Rn){var hr=pr[Rn];return hr||(hr=pr[Rn]=Fn.length,Fn.push(Rn),hr)},str:function(Rn){return Fn[Rn]}}),Wt={vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0},sn=Tt.extensions,He=function(pr,Fn){function Rn(){this.endQueryIndex=this.startQueryIndex=-1,this.sum=0,this.stats=null}function hr(gn,jt,Jt){var An=Ur.pop()||new Rn;An.startQueryIndex=gn,An.endQueryIndex=jt,An.sum=0,An.stats=Jt,Mr.push(An)}if(!Fn.ext_disjoint_timer_query)return null;var ri=[],ir=[],Ur=[],Mr=[],wr=[],ii=[];return{beginQuery:function(gn){var jt=ri.pop()||Fn.ext_disjoint_timer_query.createQueryEXT();Fn.ext_disjoint_timer_query.beginQueryEXT(35007,jt),ir.push(jt),hr(ir.length-1,ir.length,gn)},endQuery:function(){Fn.ext_disjoint_timer_query.endQueryEXT(35007)},pushScopeStats:hr,update:function(){var gn,jt;if(0!==(gn=ir.length)){ii.length=Math.max(ii.length,gn+1),wr.length=Math.max(wr.length,gn+1),wr[0]=0;var Jt=ii[0]=0;for(jt=gn=0;jt<ir.length;++jt){var An=ir[jt];Fn.ext_disjoint_timer_query.getQueryObjectEXT(An,34919)?(Jt+=Fn.ext_disjoint_timer_query.getQueryObjectEXT(An,34918),ri.push(An)):ir[gn++]=An,wr[jt+1]=Jt,ii[jt+1]=gn}for(ir.length=gn,jt=gn=0;jt<Mr.length;++jt){var Hn=(Jt=Mr[jt]).startQueryIndex;Jt.sum+=wr[An=Jt.endQueryIndex]-wr[Hn],(An=ii[An])===(Hn=ii[Hn])?(Jt.stats.gpuTime+=Jt.sum/1e6,Ur.push(Jt)):(Jt.startQueryIndex=Hn,Jt.endQueryIndex=An,Mr[gn++]=Jt)}Mr.length=gn}},getNumPendingQueries:function(){return ir.length},clear:function(){ri.push.apply(ri,ir);for(var gn=0;gn<ri.length;gn++)Fn.ext_disjoint_timer_query.deleteQueryEXT(ri[gn]);ir.length=0,ri.length=0},restore:function(){ir.length=0,ri.length=0}}}(0,sn),vt=te(),Lt=Nt.drawingBufferWidth,Gt=Nt.drawingBufferHeight,Kt={tick:0,time:0,viewportWidth:Lt,viewportHeight:Gt,framebufferWidth:Lt,framebufferHeight:Gt,drawingBufferWidth:Lt,drawingBufferHeight:Gt,pixelRatio:qe.pixelRatio},_n=(Lt={elements:null,primitive:4,count:-1,offset:0,instances:-1},function(qe,it){var Ie=1;it.ext_texture_filter_anisotropic&&(Ie=qe.getParameter(34047));var ze=1,Ve=1;it.webgl_draw_buffers&&(ze=qe.getParameter(34852),Ve=qe.getParameter(36063));var Be=!!it.oes_texture_float;if(Be){Be=qe.createTexture(),qe.bindTexture(3553,Be),qe.texImage2D(3553,0,6408,1,1,0,6408,5126,null);var at=qe.createFramebuffer();if(qe.bindFramebuffer(36160,at),qe.framebufferTexture2D(36160,36064,3553,Be,0),qe.bindTexture(3553,null),36053!==qe.checkFramebufferStatus(36160))Be=!1;else{qe.viewport(0,0,1,1),qe.clearColor(1,0,0,1),qe.clear(16384);var gt=ne.allocType(5126,4);qe.readPixels(0,0,1,1,6408,5126,gt),qe.getError()?Be=!1:(qe.deleteFramebuffer(at),qe.deleteTexture(Be),Be=1===gt[0]),ne.freeType(gt)}}return gt=!0,"undefined"!=typeof navigator&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent))||(gt=qe.createTexture(),at=ne.allocType(5121,36),qe.activeTexture(33984),qe.bindTexture(34067,gt),qe.texImage2D(34069,0,6408,3,3,0,6408,5121,at),ne.freeType(at),qe.bindTexture(34067,null),qe.deleteTexture(gt),gt=!qe.getError()),{colorBits:[qe.getParameter(3410),qe.getParameter(3411),qe.getParameter(3412),qe.getParameter(3413)],depthBits:qe.getParameter(3414),stencilBits:qe.getParameter(3415),subpixelBits:qe.getParameter(3408),extensions:Object.keys(it).filter(function(wt){return!!it[wt]}),maxAnisotropic:Ie,maxDrawbuffers:ze,maxColorAttachments:Ve,pointSizeDims:qe.getParameter(33901),lineWidthDims:qe.getParameter(33902),maxViewportDims:qe.getParameter(3386),maxCombinedTextureUnits:qe.getParameter(35661),maxCubeMapSize:qe.getParameter(34076),maxRenderbufferSize:qe.getParameter(34024),maxTextureUnits:qe.getParameter(34930),maxTextureSize:qe.getParameter(3379),maxAttributes:qe.getParameter(34921),maxVertexUniforms:qe.getParameter(36347),maxVertexTextureUnits:qe.getParameter(35660),maxVaryingVectors:qe.getParameter(36348),maxFragmentUniforms:qe.getParameter(36349),glsl:qe.getParameter(35724),renderer:qe.getParameter(7937),vendor:qe.getParameter(7936),version:qe.getParameter(7938),readFloat:Be,npotTextureCube:gt}}(Nt,sn)),en=function h(qe,it,Ie,ze){function Ve(yt){this.id=wt++,this.buffer=qe.createBuffer(),this.type=yt,this.usage=35044,this.byteLength=0,this.dimension=1,this.dtype=5121,this.persistentData=null,Ie.profile&&(this.stats={size:0})}function Be(yt,Vt,Nt){yt.byteLength=Vt.byteLength,qe.bufferData(yt.type,Vt,Nt)}function at(yt,Vt,Nt,rt,Tt,Ut){if(yt.usage=Nt,Array.isArray(Vt)){if(yt.dtype=rt||5126,0<Vt.length)if(Array.isArray(Vt[0])){Tt=De(Vt);for(var Wt=rt=1;Wt<Tt.length;++Wt)rt*=Tt[Wt];yt.dimension=rt,Be(yt,Vt=Ce(Vt,Tt,yt.dtype),Nt),Ut?yt.persistentData=Vt:ne.freeType(Vt)}else"number"==typeof Vt[0]?(yt.dimension=Tt,s(Tt=ne.allocType(yt.dtype,Vt.length),Vt),Be(yt,Tt,Nt),Ut?yt.persistentData=Tt:ne.freeType(Tt)):ue(Vt[0])&&(yt.dimension=Vt[0].length,yt.dtype=rt||u(Vt[0])||5126,Be(yt,Vt=Ce(Vt,[Vt.length,Vt[0].length],yt.dtype),Nt),Ut?yt.persistentData=Vt:ne.freeType(Vt))}else if(ue(Vt))yt.dtype=rt||u(Vt),yt.dimension=Tt,Be(yt,Vt,Nt),Ut&&(yt.persistentData=new Uint8Array(new Uint8Array(Vt.buffer)));else if(i(Vt)){var sn=Vt.stride,He=(Wt=Vt.offset,0),vt=0,Lt=0,Gt=0;1===(Tt=Vt.shape).length?(He=Tt[0],vt=1,Lt=sn[0],Gt=0):2===Tt.length&&(He=Tt[0],vt=Tt[1],Lt=sn[0],Gt=sn[1]),yt.dtype=rt||u(Vt.data)||5126,yt.dimension=vt,c(Tt=ne.allocType(yt.dtype,He*vt),Vt.data,He,vt,Lt,Gt,Wt),Be(yt,Tt,Nt),Ut?yt.persistentData=Tt:ne.freeType(Tt)}else Vt instanceof ArrayBuffer&&(yt.dtype=5121,yt.dimension=Tt,Be(yt,Vt,Nt),Ut&&(yt.persistentData=new Uint8Array(new Uint8Array(Vt))))}function gt(yt){it.bufferCount--,ze(yt),qe.deleteBuffer(yt.buffer),yt.buffer=null,delete _t[yt.id]}var wt=0,_t={};Ve.prototype.bind=function(){qe.bindBuffer(this.type,this.buffer)},Ve.prototype.destroy=function(){gt(this)};var Rt=[];return Ie.profile&&(it.getTotalBufferSize=function(){var yt=0;return Object.keys(_t).forEach(function(Vt){yt+=_t[Vt].stats.size}),yt}),{create:function(yt,Vt,Nt,rt){function Tt(Wt){var sn=35044,He=null,vt=0,Lt=0,Gt=1;return Array.isArray(Wt)||ue(Wt)||i(Wt)||Wt instanceof ArrayBuffer?He=Wt:"number"==typeof Wt?vt=0|Wt:Wt&&("data"in Wt&&(He=Wt.data),"usage"in Wt&&(sn=we[Wt.usage]),"type"in Wt&&(Lt=ge[Wt.type]),"dimension"in Wt&&(Gt=0|Wt.dimension),"length"in Wt&&(vt=0|Wt.length)),Ut.bind(),He?at(Ut,He,sn,Lt,Gt,rt):(vt&&qe.bufferData(Ut.type,vt,sn),Ut.dtype=Lt||5121,Ut.usage=sn,Ut.dimension=Gt,Ut.byteLength=vt),Ie.profile&&(Ut.stats.size=Ut.byteLength*Se[Ut.dtype]),Tt}it.bufferCount++;var Ut=new Ve(Vt);return _t[Ut.id]=Ut,Nt||Tt(yt),Tt._reglType="buffer",Tt._buffer=Ut,Tt.subdata=function(Wt,sn){var He,vt=0|(sn||0);if(Ut.bind(),ue(Wt)||Wt instanceof ArrayBuffer)qe.bufferSubData(Ut.type,vt,Wt);else if(Array.isArray(Wt)){if(0<Wt.length)if("number"==typeof Wt[0]){var Lt=ne.allocType(Ut.dtype,Wt.length);s(Lt,Wt),qe.bufferSubData(Ut.type,vt,Lt),ne.freeType(Lt)}else(Array.isArray(Wt[0])||ue(Wt[0]))&&(He=De(Wt),Lt=Ce(Wt,He,Ut.dtype),qe.bufferSubData(Ut.type,vt,Lt),ne.freeType(Lt))}else if(i(Wt)){var Gt=Wt.stride,Kt=Lt=0,_n=0,en=0;1===(He=Wt.shape).length?(Lt=He[0],Kt=1,_n=Gt[0],en=0):2===He.length&&(Lt=He[0],Kt=He[1],_n=Gt[0],en=Gt[1]),He=Array.isArray(Wt.data)?Ut.dtype:u(Wt.data),c(He=ne.allocType(He,Lt*Kt),Wt.data,Lt,Kt,_n,en,Wt.offset),qe.bufferSubData(Ut.type,vt,He),ne.freeType(He)}return Tt},Ie.profile&&(Tt.stats=Ut.stats),Tt.destroy=function(){gt(Ut)},Tt},createStream:function(yt,Vt){var Nt=Rt.pop();return Nt||(Nt=new Ve(yt)),Nt.bind(),at(Nt,Vt,35040,0,1,!1),Nt},destroyStream:function(yt){Rt.push(yt)},clear:function(){de(_t).forEach(gt),Rt.forEach(gt)},getBuffer:function(yt){return yt&&yt._buffer instanceof Ve?yt._buffer:null},restore:function(){de(_t).forEach(function(yt){yt.buffer=qe.createBuffer(),qe.bindBuffer(yt.type,yt.buffer),qe.bufferData(yt.type,yt.persistentData||yt.byteLength,yt.usage)})},_initBuffer:at}}(Nt,Wt,qe,function(pr){return wn.destroyBuffer(pr)}),on=function p(qe,it,Ie,ze){function Ve(yt){this.id=wt++,gt[this.id]=this,this.buffer=yt,this.primType=4,this.type=this.vertCount=0}function Be(yt,Vt,Nt,rt,Tt,Ut,Wt){var sn;if(yt.buffer.bind(),Vt?((sn=Wt)||ue(Vt)&&(!i(Vt)||ue(Vt.data))||(sn=it.oes_element_index_uint?5125:5123),Ie._initBuffer(yt.buffer,Vt,Nt,sn,3)):(qe.bufferData(34963,Ut,Nt),yt.buffer.dtype=sn||5121,yt.buffer.usage=Nt,yt.buffer.dimension=3,yt.buffer.byteLength=Ut),sn=Wt,!Wt){switch(yt.buffer.dtype){case 5121:case 5120:sn=5121;break;case 5123:case 5122:sn=5123;break;case 5125:case 5124:sn=5125}yt.buffer.dtype=sn}yt.type=sn,0>(Vt=Tt)&&(Vt=yt.buffer.byteLength,5123===sn?Vt>>=1:5125===sn&&(Vt>>=2)),yt.vertCount=Vt,Vt=rt,0>rt&&(Vt=4,1===(rt=yt.buffer.dimension)&&(Vt=0),2===rt&&(Vt=1),3===rt&&(Vt=4)),yt.primType=Vt}function at(yt){ze.elementsCount--,delete gt[yt.id],yt.buffer.destroy(),yt.buffer=null}var gt={},wt=0,_t={uint8:5121,uint16:5123};it.oes_element_index_uint&&(_t.uint32=5125),Ve.prototype.bind=function(){this.buffer.bind()};var Rt=[];return{create:function(yt,Vt){function Nt(Ut){if(Ut)if("number"==typeof Ut)rt(Ut),Tt.primType=4,Tt.vertCount=0|Ut,Tt.type=5121;else{var Wt=null,sn=35044,He=-1,vt=-1,Lt=0,Gt=0;Array.isArray(Ut)||ue(Ut)||i(Ut)?Wt=Ut:("data"in Ut&&(Wt=Ut.data),"usage"in Ut&&(sn=we[Ut.usage]),"primitive"in Ut&&(He=Fe[Ut.primitive]),"count"in Ut&&(vt=0|Ut.count),"type"in Ut&&(Gt=_t[Ut.type]),"length"in Ut?Lt=0|Ut.length:(Lt=vt,5123===Gt||5122===Gt?Lt*=2:5125!==Gt&&5124!==Gt||(Lt*=4))),Be(Tt,Wt,sn,He,vt,Lt,Gt)}else rt(),Tt.primType=4,Tt.vertCount=0,Tt.type=5121;return Nt}var rt=Ie.create(null,34963,!0),Tt=new Ve(rt._buffer);return ze.elementsCount++,Nt(yt),Nt._reglType="elements",Nt._elements=Tt,Nt.subdata=function(Ut,Wt){return rt.subdata(Ut,Wt),Nt},Nt.destroy=function(){at(Tt)},Nt},createStream:function(yt){var Vt=Rt.pop();return Vt||(Vt=new Ve(Ie.create(null,34963,!0,!1)._buffer)),Be(Vt,yt,35040,-1,-1,0,0),Vt},destroyStream:function(yt){Rt.push(yt)},getElements:function(yt){return"function"==typeof yt&&yt._elements instanceof Ve?yt._elements:null},clear:function(){de(gt).forEach(at)}}}(Nt,sn,en,Wt),wn=function R(qe,it,Ie,ze,Ve,Be,at){function gt(){this.id=++Rt,this.attributes=[],this.elements=null,this.ownsElements=!1,this.offset=this.count=0,this.instances=-1,this.primitive=4;var Nt=it.oes_vertex_array_object;this.vao=Nt?Nt.createVertexArrayOES():null,yt[this.id]=this,this.buffers=[]}var wt=Ie.maxAttributes,_t=Array(wt);for(Ie=0;Ie<wt;++Ie)_t[Ie]=new F;var Rt=0,yt={},Vt={Record:F,scope:{},state:_t,currentVAO:null,targetVAO:null,restore:it.oes_vertex_array_object?function(){it.oes_vertex_array_object&&de(yt).forEach(function(Nt){Nt.refresh()})}:function(){},createVAO:function(Nt){function rt(Ut){var Wt;Array.isArray(Ut)?(Wt=Ut,Tt.elements&&Tt.ownsElements&&Tt.elements.destroy(),Tt.elements=null,Tt.ownsElements=!1,Tt.offset=0,Tt.count=0,Tt.instances=-1,Tt.primitive=4):(Ut.elements?(Wt=Ut.elements,Tt.ownsElements?("function"==typeof Wt&&"elements"===Wt._reglType?Tt.elements.destroy():Tt.elements(Wt),Tt.ownsElements=!1):Be.getElements(Ut.elements)?(Tt.elements=Ut.elements,Tt.ownsElements=!1):(Tt.elements=Be.create(Ut.elements),Tt.ownsElements=!0)):(Tt.elements=null,Tt.ownsElements=!1),Wt=Ut.attributes,Tt.offset=0,Tt.count=-1,Tt.instances=-1,Tt.primitive=4,Tt.elements&&(Tt.count=Tt.elements._elements.vertCount,Tt.primitive=Tt.elements._elements.primType),"offset"in Ut&&(Tt.offset=0|Ut.offset),"count"in Ut&&(Tt.count=0|Ut.count),"instances"in Ut&&(Tt.instances=0|Ut.instances),"primitive"in Ut&&(Tt.primitive=Fe[Ut.primitive])),Ut={};var sn=Tt.attributes;sn.length=Wt.length;for(var He=0;He<Wt.length;++He){var vt,Lt=Wt[He],Gt=sn[He]=new F,Kt=Lt.data||Lt;Array.isArray(Kt)||ue(Kt)||i(Kt)?(Tt.buffers[He]&&(vt=Tt.buffers[He],ue(Kt)&&vt._buffer.byteLength>=Kt.byteLength?vt.subdata(Kt):(vt.destroy(),Tt.buffers[He]=null)),Tt.buffers[He]||(vt=Tt.buffers[He]=Ve.create(Lt,34962,!1,!0)),Gt.buffer=Ve.getBuffer(vt),Gt.size=0|Gt.buffer.dimension,Gt.normalized=!1,Gt.type=Gt.buffer.dtype,Gt.offset=0,Gt.stride=0,Gt.divisor=0,Gt.state=1,Ut[He]=1):Ve.getBuffer(Lt)?(Gt.buffer=Ve.getBuffer(Lt),Gt.size=0|Gt.buffer.dimension,Gt.normalized=!1,Gt.type=Gt.buffer.dtype,Gt.offset=0,Gt.stride=0,Gt.divisor=0,Gt.state=1):Ve.getBuffer(Lt.buffer)?(Gt.buffer=Ve.getBuffer(Lt.buffer),Gt.size=0|(+Lt.size||Gt.buffer.dimension),Gt.normalized=!!Lt.normalized||!1,Gt.type="type"in Lt?ge[Lt.type]:Gt.buffer.dtype,Gt.offset=0|(Lt.offset||0),Gt.stride=0|(Lt.stride||0),Gt.divisor=0|(Lt.divisor||0),Gt.state=1):"x"in Lt&&(Gt.x=+Lt.x||0,Gt.y=+Lt.y||0,Gt.z=+Lt.z||0,Gt.w=+Lt.w||0,Gt.state=2)}for(vt=0;vt<Tt.buffers.length;++vt)!Ut[vt]&&Tt.buffers[vt]&&(Tt.buffers[vt].destroy(),Tt.buffers[vt]=null);return Tt.refresh(),rt}var Tt=new gt;return ze.vaoCount+=1,rt.destroy=function(){for(var Ut=0;Ut<Tt.buffers.length;++Ut)Tt.buffers[Ut]&&Tt.buffers[Ut].destroy();Tt.buffers.length=0,Tt.ownsElements&&(Tt.elements.destroy(),Tt.elements=null,Tt.ownsElements=!1),Tt.destroy()},rt._vao=Tt,rt._reglType="vao",rt(Nt)},getVAO:function(Nt){return"function"==typeof Nt&&Nt._vao?Nt._vao:null},destroyBuffer:function(Nt){for(var rt=0;rt<_t.length;++rt){var Tt=_t[rt];Tt.buffer===Nt&&(qe.disableVertexAttribArray(rt),Tt.buffer=null)}},setVAO:it.oes_vertex_array_object?function(Nt){Nt!==Vt.currentVAO&&(it.oes_vertex_array_object.bindVertexArrayOES(Nt?Nt.vao:null),Vt.currentVAO=Nt)}:function(Nt){if(Nt!==Vt.currentVAO){if(Nt)Nt.bindAttrs();else{for(var rt=it.angle_instanced_arrays,Tt=0;Tt<_t.length;++Tt){var Ut=_t[Tt];Ut.buffer?(qe.enableVertexAttribArray(Tt),Ut.buffer.bind(),qe.vertexAttribPointer(Tt,Ut.size,Ut.type,Ut.normalized,Ut.stride,Ut.offfset),rt&&Ut.divisor&&rt.vertexAttribDivisorANGLE(Tt,Ut.divisor)):(qe.disableVertexAttribArray(Tt),qe.vertexAttrib4f(Tt,Ut.x,Ut.y,Ut.z,Ut.w))}qe.bindBuffer(34963,at.elements?at.elements.buffer.buffer:null)}Vt.currentVAO=Nt}},clear:it.oes_vertex_array_object?function(){de(yt).forEach(function(Nt){Nt.destroy()})}:function(){}};return gt.prototype.bindAttrs=function(){for(var Nt=it.angle_instanced_arrays,rt=this.attributes,Tt=0;Tt<rt.length;++Tt){var Ut=rt[Tt];Ut.buffer?(qe.enableVertexAttribArray(Tt),qe.bindBuffer(34962,Ut.buffer.buffer),qe.vertexAttribPointer(Tt,Ut.size,Ut.type,Ut.normalized,Ut.stride,Ut.offset),Nt&&Ut.divisor&&Nt.vertexAttribDivisorANGLE(Tt,Ut.divisor)):(qe.disableVertexAttribArray(Tt),qe.vertexAttrib4f(Tt,Ut.x,Ut.y,Ut.z,Ut.w))}for(Nt=rt.length;Nt<wt;++Nt)qe.disableVertexAttribArray(Nt);(Nt=Be.getElements(this.elements))?qe.bindBuffer(34963,Nt.buffer.buffer):qe.bindBuffer(34963,null)},gt.prototype.refresh=function(){var Nt=it.oes_vertex_array_object;Nt&&(Nt.bindVertexArrayOES(this.vao),this.bindAttrs(),Vt.currentVAO=null,Nt.bindVertexArrayOES(null))},gt.prototype.destroy=function(){if(this.vao){var Nt=it.oes_vertex_array_object;this===Vt.currentVAO&&(Vt.currentVAO=null,Nt.bindVertexArrayOES(null)),Nt.deleteVertexArrayOES(this.vao),this.vao=null}this.ownsElements&&(this.elements.destroy(),this.elements=null,this.ownsElements=!1),yt[this.id]&&(delete yt[this.id],--ze.vaoCount)},Vt}(Nt,sn,_n,Wt,en,on,Lt),On=function L(qe,it,Ie,ze){function Ve(rt,Tt,Ut,Wt){this.name=rt,this.id=Tt,this.location=Ut,this.info=Wt}function Be(rt,Tt){for(var Ut=0;Ut<rt.length;++Ut)if(rt[Ut].id===Tt.id)return void(rt[Ut].location=Tt.location);rt.push(Tt)}function at(rt,Tt,Ut){if(!(sn=(Ut=35632===rt?_t:Rt)[Tt])){var Wt=it.str(Tt),sn=qe.createShader(rt);qe.shaderSource(sn,Wt),qe.compileShader(sn),Ut[Tt]=sn}return sn}function gt(rt,Tt){this.id=Nt++,this.fragId=rt,this.vertId=Tt,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,ze.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function wt(rt,Tt,Ut){var Wt;Wt=at(35632,rt.fragId);var sn=at(35633,rt.vertId);if(Tt=rt.program=qe.createProgram(),qe.attachShader(Tt,Wt),qe.attachShader(Tt,sn),Ut)for(Wt=0;Wt<Ut.length;++Wt)qe.bindAttribLocation(Tt,(sn=Ut[Wt])[0],sn[1]);qe.linkProgram(Tt),sn=qe.getProgramParameter(Tt,35718),ze.profile&&(rt.stats.uniformsCount=sn);var He=rt.uniforms;for(Wt=0;Wt<sn;++Wt)if(Ut=qe.getActiveUniform(Tt,Wt)){if(1<Ut.size)for(var vt=0;vt<Ut.size;++vt){var Lt=Ut.name.replace("[0]","["+vt+"]");Be(He,new Ve(Lt,it.id(Lt),qe.getUniformLocation(Tt,Lt),Ut))}vt=Ut.name,1<Ut.size&&(vt=vt.replace("[0]","")),Be(He,new Ve(vt,it.id(vt),qe.getUniformLocation(Tt,vt),Ut))}for(sn=qe.getProgramParameter(Tt,35721),ze.profile&&(rt.stats.attributesCount=sn),rt=rt.attributes,Wt=0;Wt<sn;++Wt)(Ut=qe.getActiveAttrib(Tt,Wt))&&Be(rt,new Ve(Ut.name,it.id(Ut.name),qe.getAttribLocation(Tt,Ut.name),Ut))}var _t={},Rt={},yt={},Vt=[],Nt=0;return ze.profile&&(Ie.getMaxUniformsCount=function(){var rt=0;return Vt.forEach(function(Tt){Tt.stats.uniformsCount>rt&&(rt=Tt.stats.uniformsCount)}),rt},Ie.getMaxAttributesCount=function(){var rt=0;return Vt.forEach(function(Tt){Tt.stats.attributesCount>rt&&(rt=Tt.stats.attributesCount)}),rt}),{clear:function(){var rt=qe.deleteShader.bind(qe);de(_t).forEach(rt),_t={},de(Rt).forEach(rt),Rt={},Vt.forEach(function(Tt){qe.deleteProgram(Tt.program)}),Vt.length=0,yt={},Ie.shaderCount=0},program:function(rt,Tt,Ut,Wt){var sn=yt[Tt];sn||(sn=yt[Tt]={});var He=sn[rt];if(He&&(He.refCount++,!Wt))return He;var vt=new gt(Tt,rt);return Ie.shaderCount++,wt(vt,Ut,Wt),He||(sn[rt]=vt),Vt.push(vt),G(vt,{destroy:function(){if(vt.refCount--,0>=vt.refCount){qe.deleteProgram(vt.program);var Lt=Vt.indexOf(vt);Vt.splice(Lt,1),Ie.shaderCount--}0>=sn[vt.vertId].refCount&&(qe.deleteShader(Rt[vt.vertId]),delete Rt[vt.vertId],delete yt[vt.fragId][vt.vertId]),Object.keys(yt[vt.fragId]).length||(qe.deleteShader(_t[vt.fragId]),delete _t[vt.fragId],delete yt[vt.fragId])}})},restore:function(){_t={},Rt={};for(var rt=0;rt<Vt.length;++rt)wt(Vt[rt],null,Vt[rt].attributes.map(function(Tt){return[Tt.location,Tt.name]}))},shader:at,frag:-1,vert:-1}}(Nt,Ut,Wt,qe),Dn=function P(qe,it,Ie,ze,Ve,Be,at){function gt(){this.format=this.internalformat=6408,this.type=5121,this.flipY=this.premultiplyAlpha=this.compressed=!1,this.unpackAlignment=1,this.colorSpace=37444,this.channels=this.height=this.width=0}function wt(gn,jt){gn.internalformat=jt.internalformat,gn.format=jt.format,gn.type=jt.type,gn.compressed=jt.compressed,gn.premultiplyAlpha=jt.premultiplyAlpha,gn.flipY=jt.flipY,gn.unpackAlignment=jt.unpackAlignment,gn.colorSpace=jt.colorSpace,gn.width=jt.width,gn.height=jt.height,gn.channels=jt.channels}function _t(gn,jt){if("object"==typeof jt&&jt){"premultiplyAlpha"in jt&&(gn.premultiplyAlpha=jt.premultiplyAlpha),"flipY"in jt&&(gn.flipY=jt.flipY),"alignment"in jt&&(gn.unpackAlignment=jt.alignment),"colorSpace"in jt&&(gn.colorSpace=Un[jt.colorSpace]),"type"in jt&&(gn.type=In[jt.type]);var Jt=gn.width,An=gn.height,Hn=gn.channels,yr=!1;"shape"in jt?(Jt=jt.shape[0],An=jt.shape[1],3===jt.shape.length&&(Hn=jt.shape[2],yr=!0)):("radius"in jt&&(Jt=An=jt.radius),"width"in jt&&(Jt=jt.width),"height"in jt&&(An=jt.height),"channels"in jt&&(Hn=jt.channels,yr=!0)),gn.width=0|Jt,gn.height=0|An,gn.channels=0|Hn,Jt=!1,"format"in jt&&(An=gn.internalformat=sr[Jt=jt.format],gn.format=hr[An],Jt in In&&!("type"in jt)&&(gn.type=In[Jt]),Jt in fr&&(gn.compressed=!0),Jt=!0),!yr&&Jt?gn.channels=Pe[gn.format]:yr&&!Jt&&gn.channels!==Ee[gn.format]&&(gn.format=gn.internalformat=Ee[gn.channels])}}function Rt(gn){qe.pixelStorei(37440,gn.flipY),qe.pixelStorei(37441,gn.premultiplyAlpha),qe.pixelStorei(37443,gn.colorSpace),qe.pixelStorei(3317,gn.unpackAlignment)}function yt(){gt.call(this),this.yOffset=this.xOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function Vt(gn,jt){var Jt=null;if(A(jt)?Jt=jt:jt&&(_t(gn,jt),"x"in jt&&(gn.xOffset=0|jt.x),"y"in jt&&(gn.yOffset=0|jt.y),A(jt.data)&&(Jt=jt.data)),jt.copy){var An=Ve.viewportWidth,Hn=Ve.viewportHeight;gn.width=gn.width||An-gn.xOffset,gn.height=gn.height||Hn-gn.yOffset,gn.needsCopy=!0}else if(Jt){if(ue(Jt))gn.channels=gn.channels||4,gn.data=Jt,"type"in jt||5121!==gn.type||(gn.type=0|be[Object.prototype.toString.call(Jt)]);else if(w(Jt)){switch(gn.channels=gn.channels||4,Hn=(An=Jt).length,gn.type){case 5121:case 5123:case 5125:case 5126:(Hn=ne.allocType(gn.type,Hn)).set(An),gn.data=Hn;break;case 36193:gn.data=v(An)}gn.alignment=1,gn.needsFree=!0}else if(i(Jt)){An=Jt.data,Array.isArray(An)||5121!==gn.type||(gn.type=0|be[Object.prototype.toString.call(An)]);var yr,gr,Bn,Nn,Zn=Jt.stride;3===(Hn=Jt.shape).length?(Bn=Hn[2],Nn=Zn[2]):Nn=Bn=1,yr=Hn[0],gr=Hn[1],Hn=Zn[0],Zn=Zn[1],gn.alignment=1,gn.width=yr,gn.height=gr,gn.channels=Bn,gn.format=gn.internalformat=Ee[Bn],gn.needsFree=!0,yr=Nn,Jt=Jt.offset;for(var Wn=ne.allocType(36193===gn.type?5126:gn.type,(Bn=gn.width)*(Nn=gn.height)*(gr=gn.channels)),jn=0,xr=0;xr<Nn;++xr)for(var Ir=0;Ir<Bn;++Ir)for(var Vr=0;Vr<gr;++Vr)Wn[jn++]=An[Hn*Ir+Zn*xr+yr*Vr+Jt];k(gn,Wn)}else if(M(Jt)===je||M(Jt)===Ge||M(Jt)===Ke)gn.element=M(Jt)===je||M(Jt)===Ge?Jt:Jt.canvas,gn.width=gn.element.width,gn.height=gn.element.height,gn.channels=4;else if(M(Jt)===lt)gn.element=Jt,gn.width=Jt.width,gn.height=Jt.height,gn.channels=4;else if(M(Jt)===Ue)gn.element=Jt,gn.width=Jt.naturalWidth,gn.height=Jt.naturalHeight,gn.channels=4;else if(M(Jt)===$e)gn.element=Jt,gn.width=Jt.videoWidth,gn.height=Jt.videoHeight,gn.channels=4;else if(y(Jt)){for(An=gn.width||Jt[0].length,Hn=gn.height||Jt.length,Zn=gn.channels,Zn=g(Jt[0][0])?Zn||Jt[0][0].length:Zn||1,yr=he.shape(Jt),Bn=1,Nn=0;Nn<yr.length;++Nn)Bn*=yr[Nn];Bn=ne.allocType(36193===gn.type?5126:gn.type,Bn),he.flatten(Jt,yr,"",Bn),k(gn,Bn),gn.alignment=1,gn.width=An,gn.height=Hn,gn.channels=Zn,gn.format=gn.internalformat=Ee[Zn],gn.needsFree=!0}}else gn.width=gn.width||1,gn.height=gn.height||1,gn.channels=gn.channels||4}function Nt(gn,jt,Jt,An,Hn){var yr=gn.element,gr=gn.data,Bn=gn.internalformat,Nn=gn.format,Zn=gn.type,Wn=gn.width,jn=gn.height;Rt(gn),yr?qe.texSubImage2D(jt,Hn,Jt,An,Nn,Zn,yr):gn.compressed?qe.compressedTexSubImage2D(jt,Hn,Jt,An,Bn,Wn,jn,gr):gn.needsCopy?(ze(),qe.copyTexSubImage2D(jt,Hn,Jt,An,gn.xOffset,gn.yOffset,Wn,jn)):qe.texSubImage2D(jt,Hn,Jt,An,Wn,jn,Nn,Zn,gr)}function rt(){return ri.pop()||new yt}function Tt(gn){gn.needsFree&&ne.freeType(gn.data),yt.call(gn),ri.push(gn)}function Ut(){gt.call(this),this.genMipmaps=!1,this.mipmapHint=4352,this.mipmask=0,this.images=Array(16)}function Wt(gn,jt,Jt){var An=gn.images[0]=rt();gn.mipmask=1,An.width=gn.width=jt,An.height=gn.height=Jt,An.channels=gn.channels=4}function sn(gn,jt){var Jt=null;if(A(jt))wt(Jt=gn.images[0]=rt(),gn),Vt(Jt,jt),gn.mipmask=1;else if(_t(gn,jt),Array.isArray(jt.mipmap))for(var An=jt.mipmap,Hn=0;Hn<An.length;++Hn)wt(Jt=gn.images[Hn]=rt(),gn),Jt.width>>=Hn,Jt.height>>=Hn,Vt(Jt,An[Hn]),gn.mipmask|=1<<Hn;else wt(Jt=gn.images[0]=rt(),gn),Vt(Jt,jt),gn.mipmask=1;wt(gn,gn.images[0])}function He(gn,jt){for(var Jt=gn.images,An=0;An<Jt.length&&Jt[An];++An){var Hn=Jt[An],yr=jt,gr=An,Bn=Hn.element,Nn=Hn.data,Zn=Hn.internalformat,Wn=Hn.format,jn=Hn.type,xr=Hn.width,Ir=Hn.height;Rt(Hn),Bn?qe.texImage2D(yr,gr,Wn,Wn,jn,Bn):Hn.compressed?qe.compressedTexImage2D(yr,gr,Zn,xr,Ir,0,Nn):Hn.needsCopy?(ze(),qe.copyTexImage2D(yr,gr,Wn,Hn.xOffset,Hn.yOffset,xr,Ir,0)):qe.texImage2D(yr,gr,Wn,xr,Ir,0,Wn,jn,Nn||null)}}function vt(){var gn=ir.pop()||new Ut;gt.call(gn);for(var jt=gn.mipmask=0;16>jt;++jt)gn.images[jt]=null;return gn}function Lt(gn){for(var jt=gn.images,Jt=0;Jt<jt.length;++Jt)jt[Jt]&&Tt(jt[Jt]),jt[Jt]=null;ir.push(gn)}function Gt(){this.magFilter=this.minFilter=9728,this.wrapT=this.wrapS=33071,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=4352}function Kt(gn,jt){"min"in jt&&(gn.minFilter=En[jt.min],0<=Le.indexOf(gn.minFilter)&&!("faces"in jt)&&(gn.genMipmaps=!0)),"mag"in jt&&(gn.magFilter=pn[jt.mag]);var Jt=gn.wrapS,An=gn.wrapT;if("wrap"in jt){var Hn=jt.wrap;"string"==typeof Hn?Jt=An=Tn[Hn]:Array.isArray(Hn)&&(Jt=Tn[Hn[0]],An=Tn[Hn[1]])}else"wrapS"in jt&&(Jt=Tn[jt.wrapS]),"wrapT"in jt&&(An=Tn[jt.wrapT]);if(gn.wrapS=Jt,gn.wrapT=An,"anisotropic"in jt&&(gn.anisotropic=jt.anisotropic),"mipmap"in jt){switch(Jt=!1,typeof jt.mipmap){case"string":gn.mipmapHint=Dn[jt.mipmap],Jt=gn.genMipmaps=!0;break;case"boolean":Jt=gn.genMipmaps=jt.mipmap;break;case"object":gn.genMipmaps=!1,Jt=!0}!Jt||"min"in jt||(gn.minFilter=9984)}}function _n(gn,jt){qe.texParameteri(jt,10241,gn.minFilter),qe.texParameteri(jt,10240,gn.magFilter),qe.texParameteri(jt,10242,gn.wrapS),qe.texParameteri(jt,10243,gn.wrapT),it.ext_texture_filter_anisotropic&&qe.texParameteri(jt,34046,gn.anisotropic),gn.genMipmaps&&(qe.hint(33170,gn.mipmapHint),qe.generateMipmap(jt))}function en(gn){gt.call(this),this.mipmask=0,this.internalformat=6408,this.id=Ur++,this.refCount=1,this.target=gn,this.texture=qe.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new Gt,at.profile&&(this.stats={size:0})}function on(gn){qe.activeTexture(33984),qe.bindTexture(gn.target,gn.texture)}function wn(){var gn=ii[0];gn?qe.bindTexture(gn.target,gn.texture):qe.bindTexture(3553,null)}function On(gn){var jt=gn.texture,Jt=gn.unit,An=gn.target;0<=Jt&&(qe.activeTexture(33984+Jt),qe.bindTexture(An,null),ii[Jt]=null),qe.deleteTexture(jt),gn.texture=null,gn.params=null,gn.pixels=null,gn.refCount=0,delete Mr[gn.id],Be.textureCount--}var Dn={"don't care":4352,"dont care":4352,nice:4354,fast:4353},Tn={repeat:10497,clamp:33071,mirror:33648},pn={nearest:9728,linear:9729},En=G({mipmap:9987,"nearest mipmap nearest":9984,"linear mipmap nearest":9985,"nearest mipmap linear":9986,"linear mipmap linear":9987},pn),Un={none:0,browser:37444},In={uint8:5121,rgba4:32819,rgb565:33635,"rgb5 a1":32820},sr={alpha:6406,luminance:6409,"luminance alpha":6410,rgb:6407,rgba:6408,rgba4:32854,"rgb5 a1":32855,rgb565:36194},fr={};it.ext_srgb&&(sr.srgb=35904,sr.srgba=35906),it.oes_texture_float&&(In.float32=In.float=5126),it.oes_texture_half_float&&(In.float16=In["half float"]=36193),it.webgl_depth_texture&&(G(sr,{depth:6402,"depth stencil":34041}),G(In,{uint16:5123,uint32:5125,"depth stencil":34042})),it.webgl_compressed_texture_s3tc&&G(fr,{"rgb s3tc dxt1":33776,"rgba s3tc dxt1":33777,"rgba s3tc dxt3":33778,"rgba s3tc dxt5":33779}),it.webgl_compressed_texture_atc&&G(fr,{"rgb atc":35986,"rgba atc explicit alpha":35987,"rgba atc interpolated alpha":34798}),it.webgl_compressed_texture_pvrtc&&G(fr,{"rgb pvrtc 4bppv1":35840,"rgb pvrtc 2bppv1":35841,"rgba pvrtc 4bppv1":35842,"rgba pvrtc 2bppv1":35843}),it.webgl_compressed_texture_etc1&&(fr["rgb etc1"]=36196);var rr=Array.prototype.slice.call(qe.getParameter(34467));Object.keys(fr).forEach(function(gn){var jt=fr[gn];0<=rr.indexOf(jt)&&(sr[gn]=jt)});var qr=Object.keys(sr);Ie.textureFormats=qr;var ti=[];Object.keys(sr).forEach(function(gn){ti[sr[gn]]=gn});var Ar=[];Object.keys(In).forEach(function(gn){Ar[In[gn]]=gn});var pr=[];Object.keys(pn).forEach(function(gn){pr[pn[gn]]=gn});var Fn=[];Object.keys(En).forEach(function(gn){Fn[En[gn]]=gn});var Rn=[];Object.keys(Tn).forEach(function(gn){Rn[Tn[gn]]=gn});var hr=qr.reduce(function(gn,jt){var Jt=sr[jt];return gn[Jt]=6409===Jt||6406===Jt||6409===Jt||6410===Jt||6402===Jt||34041===Jt||it.ext_srgb&&(35904===Jt||35906===Jt)?Jt:32855===Jt||0<=jt.indexOf("rgba")?6408:6407,gn},{}),ri=[],ir=[],Ur=0,Mr={},wr=Ie.maxTextureUnits,ii=Array(wr).map(function(){return null});return G(en.prototype,{bind:function(){this.bindCount+=1;var gn=this.unit;if(0>gn){for(var jt=0;jt<wr;++jt){var Jt=ii[jt];if(Jt){if(0<Jt.bindCount)continue;Jt.unit=-1}ii[jt]=this,gn=jt;break}at.profile&&Be.maxTextureUnits<gn+1&&(Be.maxTextureUnits=gn+1),this.unit=gn,qe.activeTexture(33984+gn),qe.bindTexture(this.target,this.texture)}return gn},unbind:function(){--this.bindCount},decRef:function(){0>=--this.refCount&&On(this)}}),at.profile&&(Be.getTotalTextureSize=function(){var gn=0;return Object.keys(Mr).forEach(function(jt){gn+=Mr[jt].stats.size}),gn}),{create2D:function(gn,jt){function Jt(Hn,yr){var gr=An.texInfo;Gt.call(gr);var Bn=vt();return"number"==typeof Hn?Wt(Bn,0|Hn,"number"==typeof yr?0|yr:0|Hn):Hn?(Kt(gr,Hn),sn(Bn,Hn)):Wt(Bn,1,1),gr.genMipmaps&&(Bn.mipmask=(Bn.width<<1)-1),An.mipmask=Bn.mipmask,wt(An,Bn),An.internalformat=Bn.internalformat,Jt.width=Bn.width,Jt.height=Bn.height,on(An),He(Bn,3553),_n(gr,3553),wn(),Lt(Bn),at.profile&&(An.stats.size=C(An.internalformat,An.type,Bn.width,Bn.height,gr.genMipmaps,!1)),Jt.format=ti[An.internalformat],Jt.type=Ar[An.type],Jt.mag=pr[gr.magFilter],Jt.min=Fn[gr.minFilter],Jt.wrapS=Rn[gr.wrapS],Jt.wrapT=Rn[gr.wrapT],Jt}var An=new en(3553);return Mr[An.id]=An,Be.textureCount++,Jt(gn,jt),Jt.subimage=function(Hn,yr,gr,Bn){yr|=0,gr|=0,Bn|=0;var Nn=rt();return wt(Nn,An),Nn.width=0,Nn.height=0,Vt(Nn,Hn),Nn.width=Nn.width||(An.width>>Bn)-yr,Nn.height=Nn.height||(An.height>>Bn)-gr,on(An),Nt(Nn,3553,yr,gr,Bn),wn(),Tt(Nn),Jt},Jt.resize=function(Hn,yr){var gr=0|Hn,Bn=0|yr||gr;if(gr===An.width&&Bn===An.height)return Jt;Jt.width=An.width=gr,Jt.height=An.height=Bn,on(An);for(var Nn=0;An.mipmask>>Nn;++Nn){var Zn=gr>>Nn,Wn=Bn>>Nn;if(!Zn||!Wn)break;qe.texImage2D(3553,Nn,An.format,Zn,Wn,0,An.format,An.type,null)}return wn(),at.profile&&(An.stats.size=C(An.internalformat,An.type,gr,Bn,!1,!1)),Jt},Jt._reglType="texture2d",Jt._texture=An,at.profile&&(Jt.stats=An.stats),Jt.destroy=function(){An.decRef()},Jt},createCube:function(gn,jt,Jt,An,Hn,yr){function gr(Zn,Wn,jn,xr,Ir,Vr){var qn,jr=Bn.texInfo;for(Gt.call(jr),qn=0;6>qn;++qn)Nn[qn]=vt();if("number"!=typeof Zn&&Zn){if("object"==typeof Zn)if(Wn)sn(Nn[0],Zn),sn(Nn[1],Wn),sn(Nn[2],jn),sn(Nn[3],xr),sn(Nn[4],Ir),sn(Nn[5],Vr);else if(Kt(jr,Zn),_t(Bn,Zn),"faces"in Zn)for(Zn=Zn.faces,qn=0;6>qn;++qn)wt(Nn[qn],Bn),sn(Nn[qn],Zn[qn]);else for(qn=0;6>qn;++qn)sn(Nn[qn],Zn)}else for(Zn=0|Zn||1,qn=0;6>qn;++qn)Wt(Nn[qn],Zn,Zn);for(wt(Bn,Nn[0]),Bn.mipmask=jr.genMipmaps?(Nn[0].width<<1)-1:Nn[0].mipmask,Bn.internalformat=Nn[0].internalformat,gr.width=Nn[0].width,gr.height=Nn[0].height,on(Bn),qn=0;6>qn;++qn)He(Nn[qn],34069+qn);for(_n(jr,34067),wn(),at.profile&&(Bn.stats.size=C(Bn.internalformat,Bn.type,gr.width,gr.height,jr.genMipmaps,!0)),gr.format=ti[Bn.internalformat],gr.type=Ar[Bn.type],gr.mag=pr[jr.magFilter],gr.min=Fn[jr.minFilter],gr.wrapS=Rn[jr.wrapS],gr.wrapT=Rn[jr.wrapT],qn=0;6>qn;++qn)Lt(Nn[qn]);return gr}var Bn=new en(34067);Mr[Bn.id]=Bn,Be.cubeCount++;var Nn=Array(6);return gr(gn,jt,Jt,An,Hn,yr),gr.subimage=function(Zn,Wn,jn,xr,Ir){jn|=0,xr|=0,Ir|=0;var Vr=rt();return wt(Vr,Bn),Vr.width=0,Vr.height=0,Vt(Vr,Wn),Vr.width=Vr.width||(Bn.width>>Ir)-jn,Vr.height=Vr.height||(Bn.height>>Ir)-xr,on(Bn),Nt(Vr,34069+Zn,jn,xr,Ir),wn(),Tt(Vr),gr},gr.resize=function(Zn){if((Zn|=0)!==Bn.width){gr.width=Bn.width=Zn,gr.height=Bn.height=Zn,on(Bn);for(var Wn=0;6>Wn;++Wn)for(var jn=0;Bn.mipmask>>jn;++jn)qe.texImage2D(34069+Wn,jn,Bn.format,Zn>>jn,Zn>>jn,0,Bn.format,Bn.type,null);return wn(),at.profile&&(Bn.stats.size=C(Bn.internalformat,Bn.type,gr.width,gr.height,!1,!0)),gr}},gr._reglType="textureCube",gr._texture=Bn,at.profile&&(gr.stats=Bn.stats),gr.destroy=function(){Bn.decRef()},gr},clear:function(){for(var gn=0;gn<wr;++gn)qe.activeTexture(33984+gn),qe.bindTexture(3553,null),ii[gn]=null;de(Mr).forEach(On),Be.cubeCount=0,Be.textureCount=0},getTexture:function(gn){return null},restore:function(){for(var gn=0;gn<wr;++gn){var jt=ii[gn];jt&&(jt.bindCount=0,jt.unit=-1,ii[gn]=null)}de(Mr).forEach(function(Jt){Jt.texture=qe.createTexture(),qe.bindTexture(Jt.target,Jt.texture);for(var An=0;32>An;++An)if(0!=(Jt.mipmask&1<<An))if(3553===Jt.target)qe.texImage2D(3553,An,Jt.internalformat,Jt.width>>An,Jt.height>>An,0,Jt.internalformat,Jt.type,null);else for(var Hn=0;6>Hn;++Hn)qe.texImage2D(34069+Hn,An,Jt.internalformat,Jt.width>>An,Jt.height>>An,0,Jt.internalformat,Jt.type,null);_n(Jt.texInfo,Jt.target)})},refresh:function(){for(var gn=0;gn<wr;++gn){var jt=ii[gn];jt&&(jt.bindCount=0,jt.unit=-1,ii[gn]=null),qe.activeTexture(33984+gn),qe.bindTexture(3553,null),qe.bindTexture(34067,null)}}}}(Nt,sn,_n,function(){En.procs.poll()},Kt,Wt,qe),Tn=function(qe,it,Ie,ze,Ve){function Be(yt){this.id=_t++,this.refCount=1,this.renderbuffer=yt,this.format=32854,this.height=this.width=0,Ve.profile&&(this.stats={size:0})}function at(yt){var Vt=yt.renderbuffer;qe.bindRenderbuffer(36161,null),qe.deleteRenderbuffer(Vt),yt.renderbuffer=null,yt.refCount=0,delete Rt[yt.id],ze.renderbufferCount--}var gt={rgba4:32854,rgb565:36194,"rgb5 a1":32855,depth:33189,stencil:36168,"depth stencil":34041};it.ext_srgb&&(gt.srgba=35907),it.ext_color_buffer_half_float&&(gt.rgba16f=34842,gt.rgb16f=34843),it.webgl_color_buffer_float&&(gt.rgba32f=34836);var wt=[];Object.keys(gt).forEach(function(yt){wt[gt[yt]]=yt});var _t=0,Rt={};return Be.prototype.decRef=function(){0>=--this.refCount&&at(this)},Ve.profile&&(ze.getTotalRenderbufferSize=function(){var yt=0;return Object.keys(Rt).forEach(function(Vt){yt+=Rt[Vt].stats.size}),yt}),{create:function(yt,Vt){function Nt(Tt,Ut){var Wt=0,sn=0,He=32854;if("object"==typeof Tt&&Tt?("shape"in Tt?(Wt=0|(sn=Tt.shape)[0],sn=0|sn[1]):("radius"in Tt&&(Wt=sn=0|Tt.radius),"width"in Tt&&(Wt=0|Tt.width),"height"in Tt&&(sn=0|Tt.height)),"format"in Tt&&(He=gt[Tt.format])):"number"==typeof Tt?(Wt=0|Tt,sn="number"==typeof Ut?0|Ut:Wt):Tt||(Wt=sn=1),Wt!==rt.width||sn!==rt.height||He!==rt.format)return Nt.width=rt.width=Wt,Nt.height=rt.height=sn,rt.format=He,qe.bindRenderbuffer(36161,rt.renderbuffer),qe.renderbufferStorage(36161,He,Wt,sn),Ve.profile&&(rt.stats.size=xt[rt.format]*rt.width*rt.height),Nt.format=wt[rt.format],Nt}var rt=new Be(qe.createRenderbuffer());return Rt[rt.id]=rt,ze.renderbufferCount++,Nt(yt,Vt),Nt.resize=function(Tt,Ut){var Wt=0|Tt,sn=0|Ut||Wt;return Wt===rt.width&&sn===rt.height||(Nt.width=rt.width=Wt,Nt.height=rt.height=sn,qe.bindRenderbuffer(36161,rt.renderbuffer),qe.renderbufferStorage(36161,rt.format,Wt,sn),Ve.profile&&(rt.stats.size=xt[rt.format]*rt.width*rt.height)),Nt},Nt._reglType="renderbuffer",Nt._renderbuffer=rt,Ve.profile&&(Nt.stats=rt.stats),Nt.destroy=function(){rt.decRef()},Nt},clear:function(){de(Rt).forEach(at)},restore:function(){de(Rt).forEach(function(yt){yt.renderbuffer=qe.createRenderbuffer(),qe.bindRenderbuffer(36161,yt.renderbuffer),qe.renderbufferStorage(36161,yt.format,yt.width,yt.height)}),qe.bindRenderbuffer(36161,null)}}}(Nt,sn,0,Wt,qe),pn=function D(qe,it,Ie,ze,Ve,Be){function at(en,on,wn){this.target=en,this.texture=on,this.renderbuffer=wn;var On=en=0;on?(en=on.width,On=on.height):wn&&(en=wn.width,On=wn.height),this.width=en,this.height=On}function gt(en){en&&(en.texture&&en.texture._texture.decRef(),en.renderbuffer&&en.renderbuffer._renderbuffer.decRef())}function wt(en,on,wn){en&&(en.texture?en.texture._texture.refCount+=1:en.renderbuffer._renderbuffer.refCount+=1)}function _t(en,on){on&&(on.texture?qe.framebufferTexture2D(36160,en,on.target,on.texture._texture.texture,0):qe.framebufferRenderbuffer(36160,en,36161,on.renderbuffer._renderbuffer.renderbuffer))}function Rt(en){var on=3553,wn=null,On=null,Dn=en;return"object"==typeof en&&(Dn=en.data,"target"in en&&(on=0|en.target)),"texture2d"===(en=Dn._reglType)||"textureCube"===en?wn=Dn:"renderbuffer"===en&&(On=Dn,on=36161),new at(on,wn,On)}function yt(en,on,wn,On,Dn){return wn?((en=ze.create2D({width:en,height:on,format:On,type:Dn}))._texture.refCount=0,new at(3553,en,null)):((en=Ve.create({width:en,height:on,format:On}))._renderbuffer.refCount=0,new at(36161,null,en))}function Vt(en){return en&&(en.texture||en.renderbuffer)}function Nt(en,on,wn){en&&(en.texture?en.texture.resize(on,wn):en.renderbuffer&&en.renderbuffer.resize(on,wn),en.width=on,en.height=wn)}function rt(){this.id=Kt++,_n[this.id]=this,this.framebuffer=qe.createFramebuffer(),this.height=this.width=0,this.colorAttachments=[],this.depthStencilAttachment=this.stencilAttachment=this.depthAttachment=null}function Tt(en){en.colorAttachments.forEach(gt),gt(en.depthAttachment),gt(en.stencilAttachment),gt(en.depthStencilAttachment)}function Ut(en){qe.deleteFramebuffer(en.framebuffer),en.framebuffer=null,Be.framebufferCount--,delete _n[en.id]}function Wt(en){var on;qe.bindFramebuffer(36160,en.framebuffer);var wn=en.colorAttachments;for(on=0;on<wn.length;++on)_t(36064+on,wn[on]);for(on=wn.length;on<Ie.maxColorAttachments;++on)qe.framebufferTexture2D(36160,36064+on,3553,null,0);qe.framebufferTexture2D(36160,33306,3553,null,0),qe.framebufferTexture2D(36160,36096,3553,null,0),qe.framebufferTexture2D(36160,36128,3553,null,0),_t(36096,en.depthAttachment),_t(36128,en.stencilAttachment),_t(33306,en.depthStencilAttachment),qe.checkFramebufferStatus(36160),qe.isContextLost(),qe.bindFramebuffer(36160,He.next?He.next.framebuffer:null),He.cur=He.next,qe.getError()}function sn(en,on){function wn(Dn,Tn){var pn,En=0,Un=0,In=!0,sr=!0;pn=null;var fr=!0,rr="rgba",qr="uint8",ti=1,Ar=null,pr=null,Fn=null,Rn=!1;"number"==typeof Dn?(En=0|Dn,Un=0|Tn||En):Dn?("shape"in Dn?(En=(Un=Dn.shape)[0],Un=Un[1]):("radius"in Dn&&(En=Un=Dn.radius),"width"in Dn&&(En=Dn.width),"height"in Dn&&(Un=Dn.height)),("color"in Dn||"colors"in Dn)&&(pn=Dn.color||Dn.colors,Array.isArray(pn)),pn||("colorCount"in Dn&&(ti=0|Dn.colorCount),"colorTexture"in Dn&&(fr=!!Dn.colorTexture,rr="rgba4"),"colorType"in Dn&&(qr=Dn.colorType,!fr)&&("half float"===qr||"float16"===qr?rr="rgba16f":"float"!==qr&&"float32"!==qr||(rr="rgba32f")),"colorFormat"in Dn&&(0<=vt.indexOf(rr=Dn.colorFormat)?fr=!0:0<=Lt.indexOf(rr)&&(fr=!1))),("depthTexture"in Dn||"depthStencilTexture"in Dn)&&(Rn=!(!Dn.depthTexture&&!Dn.depthStencilTexture)),"depth"in Dn&&("boolean"==typeof Dn.depth?In=Dn.depth:(Ar=Dn.depth,sr=!1)),"stencil"in Dn&&("boolean"==typeof Dn.stencil?sr=Dn.stencil:(pr=Dn.stencil,In=!1)),"depthStencil"in Dn&&("boolean"==typeof Dn.depthStencil?In=sr=Dn.depthStencil:(Fn=Dn.depthStencil,sr=In=!1))):En=Un=1;var hr=null,ri=null,ir=null,Ur=null;if(Array.isArray(pn))hr=pn.map(Rt);else if(pn)hr=[Rt(pn)];else for(hr=Array(ti),pn=0;pn<ti;++pn)hr[pn]=yt(En,Un,fr,rr,qr);for(En=En||hr[0].width,Un=Un||hr[0].height,Ar?ri=Rt(Ar):In&&!sr&&(ri=yt(En,Un,Rn,"depth","uint32")),pr?ir=Rt(pr):sr&&!In&&(ir=yt(En,Un,!1,"stencil","uint8")),Fn?Ur=Rt(Fn):!Ar&&!pr&&sr&&In&&(Ur=yt(En,Un,Rn,"depth stencil","depth stencil")),In=null,pn=0;pn<hr.length;++pn)wt(hr[pn]),hr[pn]&&hr[pn].texture&&(sr=Ht[hr[pn].texture._texture.format]*zt[hr[pn].texture._texture.type],null===In&&(In=sr));return wt(ri),wt(ir),wt(Ur),Tt(On),On.width=En,On.height=Un,On.colorAttachments=hr,On.depthAttachment=ri,On.stencilAttachment=ir,On.depthStencilAttachment=Ur,wn.color=hr.map(Vt),wn.depth=Vt(ri),wn.stencil=Vt(ir),wn.depthStencil=Vt(Ur),wn.width=On.width,wn.height=On.height,Wt(On),wn}var On=new rt;return Be.framebufferCount++,wn(en,on),G(wn,{resize:function(Dn,Tn){var pn=Math.max(0|Dn,1),En=Math.max(0|Tn||pn,1);if(pn===On.width&&En===On.height)return wn;for(var Un=On.colorAttachments,In=0;In<Un.length;++In)Nt(Un[In],pn,En);return Nt(On.depthAttachment,pn,En),Nt(On.stencilAttachment,pn,En),Nt(On.depthStencilAttachment,pn,En),On.width=wn.width=pn,On.height=wn.height=En,Wt(On),wn},_reglType:"framebuffer",_framebuffer:On,destroy:function(){Ut(On),Tt(On)},use:function(Dn){He.setFBO({framebuffer:wn},Dn)}})}var He={cur:null,next:null,dirty:!1,setFBO:null},vt=["rgba"],Lt=["rgba4","rgb565","rgb5 a1"];it.ext_srgb&&Lt.push("srgba"),it.ext_color_buffer_half_float&&Lt.push("rgba16f","rgb16f"),it.webgl_color_buffer_float&&Lt.push("rgba32f");var Gt=["uint8"];it.oes_texture_half_float&&Gt.push("half float","float16"),it.oes_texture_float&&Gt.push("float","float32");var Kt=0,_n={};return G(He,{getFramebuffer:function(en){return"function"==typeof en&&"framebuffer"===en._reglType&&(en=en._framebuffer)instanceof rt?en:null},create:sn,createCube:function(en){function on(On){var Dn,Tn={color:null},pn=0,En=null;Dn="rgba";var Un="uint8",In=1;if("number"==typeof On?pn=0|On:On?("shape"in On?pn=On.shape[0]:("radius"in On&&(pn=0|On.radius),"width"in On?pn=0|On.width:"height"in On&&(pn=0|On.height)),("color"in On||"colors"in On)&&(En=On.color||On.colors,Array.isArray(En)),En||("colorCount"in On&&(In=0|On.colorCount),"colorType"in On&&(Un=On.colorType),"colorFormat"in On&&(Dn=On.colorFormat)),"depth"in On&&(Tn.depth=On.depth),"stencil"in On&&(Tn.stencil=On.stencil),"depthStencil"in On&&(Tn.depthStencil=On.depthStencil)):pn=1,En)if(Array.isArray(En))for(On=[],Dn=0;Dn<En.length;++Dn)On[Dn]=En[Dn];else On=[En];else for(On=Array(In),En={radius:pn,format:Dn,type:Un},Dn=0;Dn<In;++Dn)On[Dn]=ze.createCube(En);for(Tn.color=Array(On.length),Dn=0;Dn<On.length;++Dn)In=On[Dn],pn=pn||In.width,Tn.color[Dn]={target:34069,data:On[Dn]};for(Dn=0;6>Dn;++Dn){for(In=0;In<On.length;++In)Tn.color[In].target=34069+Dn;0<Dn&&(Tn.depth=wn[0].depth,Tn.stencil=wn[0].stencil,Tn.depthStencil=wn[0].depthStencil),wn[Dn]?wn[Dn](Tn):wn[Dn]=sn(Tn)}return G(on,{width:pn,height:pn,color:On})}var wn=Array(6);return on(en),G(on,{faces:wn,resize:function(On){var Dn=0|On;if(Dn===on.width)return on;var Tn=on.color;for(On=0;On<Tn.length;++On)Tn[On].resize(Dn);for(On=0;6>On;++On)wn[On].resize(Dn);return on.width=on.height=Dn,on},_reglType:"framebufferCube",destroy:function(){wn.forEach(function(On){On.destroy()})}})},clear:function(){de(_n).forEach(Ut)},restore:function(){He.cur=null,He.next=null,He.dirty=!0,de(_n).forEach(function(en){en.framebuffer=qe.createFramebuffer(),Wt(en)})}})}(Nt,sn,_n,Dn,Tn,Wt),En=se(Nt,Ut,sn,_n,en,on,0,pn,{},wn,On,Lt,Kt,He,qe),Un=(Ut=function I(qe,it,Ie,ze,Ve,Be,at){function gt(wt){var _t;_t=null===it.next?5121:it.next.colorAttachments[0].texture._texture.type;var Rt=0,yt=0,Vt=ze.framebufferWidth,Nt=ze.framebufferHeight,rt=null;return ue(wt)?rt=wt:wt&&(Rt=0|wt.x,yt=0|wt.y,Vt=0|(wt.width||ze.framebufferWidth-Rt),Nt=0|(wt.height||ze.framebufferHeight-yt),rt=wt.data||null),Ie(),wt=Vt*Nt*4,rt||(5121===_t?rt=new Uint8Array(wt):5126===_t&&(rt=rt||new Float32Array(wt))),qe.pixelStorei(3333,4),qe.readPixels(Rt,yt,Vt,Nt,6408,_t,rt),rt}return function(wt){return wt&&"framebuffer"in wt?(it.setFBO({framebuffer:(_t=wt).framebuffer},function(){Rt=gt(_t)}),Rt):gt(wt);var _t,Rt}}(Nt,pn,En.procs.poll,Kt),En.next),In=Nt.canvas,sr=[],fr=[],rr=[],qr=[qe.onDestroy],ti=null;In&&(In.addEventListener("webglcontextlost",Ve,!1),In.addEventListener("webglcontextrestored",Be,!1));var Ar=pn.setFBO=at({framebuffer:ie.define.call(null,1,"framebuffer")});return yt(),rt=G(at,{clear:function(pr){if("framebuffer"in pr)if(pr.framebuffer&&"framebufferCube"===pr.framebuffer_reglType)for(var Fn=0;6>Fn;++Fn)Ar(G({framebuffer:pr.framebuffer.faces[Fn]},pr),gt);else Ar(pr,gt);else gt(0,pr)},prop:ie.define.bind(null,1),context:ie.define.bind(null,2),this:ie.define.bind(null,3),draw:at({}),buffer:function(pr){return en.create(pr,34962,!1,!1)},elements:function(pr){return on.create(pr,!1)},texture:Dn.create2D,cube:Dn.createCube,renderbuffer:Tn.create,framebuffer:pn.create,framebufferCube:pn.createCube,vao:wn.createVAO,attributes:rt,frame:wt,on:function(pr,Fn){var Rn;switch(pr){case"frame":return wt(Fn);case"lost":Rn=fr;break;case"restore":Rn=rr;break;case"destroy":Rn=qr}return Rn.push(Fn),{cancel:function(){for(var hr=0;hr<Rn.length;++hr)if(Rn[hr]===Fn){Rn[hr]=Rn[Rn.length-1],Rn.pop();break}}}},limits:_n,hasExtension:function(pr){return 0<=_n.extensions.indexOf(pr.toLowerCase())},read:Ut,destroy:function(){sr.length=0,ze(),In&&(In.removeEventListener("webglcontextlost",Ve),In.removeEventListener("webglcontextrestored",Be)),On.clear(),pn.clear(),Tn.clear(),wn.clear(),Dn.clear(),on.clear(),en.clear(),He&&He.clear(),qr.forEach(function(pr){pr()})},_gl:Nt,_refresh:yt,poll:function(){Rt(),He&&He.update()},now:Vt,stats:Wt}),qe.onDone(null,rt),rt}},"object"==typeof ae&&void 0!==oe?oe.exports=x():this.createREGL=x()},{}],284:[function(_,oe,ae){var m=_("buffer"),x=m.Buffer;function T(e,o){for(var a in e)o[a]=e[a]}function b(e,o,a){return x(e,o,a)}x.from&&x.alloc&&x.allocUnsafe&&x.allocUnsafeSlow?oe.exports=m:(T(m,ae),ae.Buffer=b),b.prototype=Object.create(x.prototype),T(x,b),b.from=function(e,o,a){if("number"==typeof e)throw new TypeError("Argument must not be a number");return x(e,o,a)},b.alloc=function(e,o,a){if("number"!=typeof e)throw new TypeError("Argument must be a number");var l=x(e);return void 0!==o?"string"==typeof a?l.fill(o,a):l.fill(o):l.fill(0),l},b.allocUnsafe=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return x(e)},b.allocUnsafeSlow=function(e){if("number"!=typeof e)throw new TypeError("Argument must be a number");return m.SlowBuffer(e)}},{buffer:85}],285:[function(_,oe,ae){oe.exports=x;var m=_("events").EventEmitter;function x(){m.call(this)}_("inherits")(x,m),x.Readable=_("readable-stream/lib/_stream_readable.js"),x.Writable=_("readable-stream/lib/_stream_writable.js"),x.Duplex=_("readable-stream/lib/_stream_duplex.js"),x.Transform=_("readable-stream/lib/_stream_transform.js"),x.PassThrough=_("readable-stream/lib/_stream_passthrough.js"),x.finished=_("readable-stream/lib/internal/streams/end-of-stream.js"),x.pipeline=_("readable-stream/lib/internal/streams/pipeline.js"),x.Stream=x,x.prototype.pipe=function(T,b){var e=this;function o(c){T.writable&&!1===T.write(c)&&e.pause&&e.pause()}function a(){e.readable&&e.resume&&e.resume()}e.on("data",o),T.on("drain",a),T._isStdio||b&&!1===b.end||(e.on("end",i),e.on("close",d));var l=!1;function i(){l||(l=!0,T.end())}function d(){l||(l=!0,"function"==typeof T.destroy&&T.destroy())}function u(c){if(s(),0===m.listenerCount(this,"error"))throw c}function s(){e.removeListener("data",o),T.removeListener("drain",a),e.removeListener("end",i),e.removeListener("close",d),e.removeListener("error",u),T.removeListener("error",u),e.removeListener("end",s),e.removeListener("close",s),T.removeListener("close",s)}return e.on("error",u),T.on("error",u),e.on("end",s),e.on("close",s),T.on("close",s),T.emit("pipe",e),T}},{events:84,inherits:231,"readable-stream/lib/_stream_duplex.js":287,"readable-stream/lib/_stream_passthrough.js":288,"readable-stream/lib/_stream_readable.js":289,"readable-stream/lib/_stream_transform.js":290,"readable-stream/lib/_stream_writable.js":291,"readable-stream/lib/internal/streams/end-of-stream.js":295,"readable-stream/lib/internal/streams/pipeline.js":297}],286:[function(_,oe,ae){"use strict";var m={};function x(b,e,o){o||(o=Error);var a=function(l){var i,d;function u(s,c,h){return l.call(this,"string"==typeof e?e:e(s,c,h))||this}return d=l,(i=u).prototype=Object.create(d.prototype),i.prototype.constructor=i,i.__proto__=d,u}(o);a.prototype.name=o.name,a.prototype.code=b,m[b]=a}function T(b,e){if(Array.isArray(b)){var o=b.length;return b=b.map(function(a){return String(a)}),o>2?"one of ".concat(e," ").concat(b.slice(0,o-1).join(", "),", or ")+b[o-1]:2===o?"one of ".concat(e," ").concat(b[0]," or ").concat(b[1]):"of ".concat(e," ").concat(b[0])}return"of ".concat(e," ").concat(String(b))}x("ERR_INVALID_OPT_VALUE",function(b,e){return'The value "'+e+'" is invalid for option "'+b+'"'},TypeError),x("ERR_INVALID_ARG_TYPE",function(b,e,o){var a,d,s,h;if("string"==typeof e&&"not "===e.substr(0,"not ".length)?(a="must not be",e=e.replace(/^not /,"")):a="must be",s=b,(void 0===h||h>s.length)&&(h=s.length)," argument"===s.substring(h-" argument".length,h))d="The ".concat(b," ").concat(a," ").concat(T(e,"type"));else{var u=function(s,c,h){return"number"!=typeof h&&(h=0),!(h+".".length>s.length)&&-1!==s.indexOf(".",h)}(b)?"property":"argument";d='The "'.concat(b,'" ').concat(u," ").concat(a," ").concat(T(e,"type"))}return d+". Received type ".concat(typeof o)},TypeError),x("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),x("ERR_METHOD_NOT_IMPLEMENTED",function(b){return"The "+b+" method is not implemented"}),x("ERR_STREAM_PREMATURE_CLOSE","Premature close"),x("ERR_STREAM_DESTROYED",function(b){return"Cannot call "+b+" after a stream was destroyed"}),x("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),x("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),x("ERR_STREAM_WRITE_AFTER_END","write after end"),x("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),x("ERR_UNKNOWN_ENCODING",function(b){return"Unknown encoding: "+b},TypeError),x("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),oe.exports.codes=m},{}],287:[function(_,oe,ae){(function(m){(function(){"use strict";var x=Object.keys||function(u){var s=[];for(var c in u)s.push(c);return s};oe.exports=l;var T=_("./_stream_readable"),b=_("./_stream_writable");_("inherits")(l,T);for(var e=x(b.prototype),o=0;o<e.length;o++){var a=e[o];l.prototype[a]||(l.prototype[a]=b.prototype[a])}function l(u){if(!(this instanceof l))return new l(u);T.call(this,u),b.call(this,u),this.allowHalfOpen=!0,u&&(!1===u.readable&&(this.readable=!1),!1===u.writable&&(this.writable=!1),!1===u.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",i)))}function i(){this._writableState.ended||m.nextTick(d,this)}function d(u){u.end()}Object.defineProperty(l.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(l.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(l.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(l.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(u){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=u,this._writableState.destroyed=u)}})}).call(this)}).call(this,_("_process"))},{"./_stream_readable":289,"./_stream_writable":291,_process:277,inherits:231}],288:[function(_,oe,ae){"use strict";oe.exports=x;var m=_("./_stream_transform");function x(T){if(!(this instanceof x))return new x(T);m.call(this,T)}_("inherits")(x,m),x.prototype._transform=function(T,b,e){e(null,T)}},{"./_stream_transform":290,inherits:231}],289:[function(_,oe,ae){(function(m,x){(function(){"use strict";var T;oe.exports=C,C.ReadableState=k,_("events");var l,b=function(j,G){return j.listeners(G).length},e=_("./internal/streams/stream"),o=_("buffer").Buffer,a=x.Uint8Array||function(){},i=_("util");l=i&&i.debuglog?i.debuglog("stream"):function(){};var d,u,s,c=_("./internal/streams/buffer_list"),h=_("./internal/streams/destroy"),p=_("./internal/streams/state").getHighWaterMark,v=_("../errors").codes,g=v.ERR_INVALID_ARG_TYPE,f=v.ERR_STREAM_PUSH_AFTER_EOF,w=v.ERR_METHOD_NOT_IMPLEMENTED,y=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;_("inherits")(C,e);var M=h.errorOrDestroy,A=["error","close","destroy","pause","resume"];function k(j,G,W){T=T||_("./_stream_duplex"),"boolean"!=typeof W&&(W=G instanceof T),this.objectMode=!!(j=j||{}).objectMode,W&&(this.objectMode=this.objectMode||!!j.readableObjectMode),this.highWaterMark=p(this,j,"readableHighWaterMark",W),this.buffer=new c,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==j.emitClose,this.autoDestroy=!!j.autoDestroy,this.destroyed=!1,this.defaultEncoding=j.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,j.encoding&&(d||(d=_("string_decoder/").StringDecoder),this.decoder=new d(j.encoding),this.encoding=j.encoding)}function C(j){if(T=T||_("./_stream_duplex"),!(this instanceof C))return new C(j);this._readableState=new k(j,this,this instanceof T),this.readable=!0,j&&("function"==typeof j.read&&(this._read=j.read),"function"==typeof j.destroy&&(this._destroy=j.destroy)),e.call(this)}function P(j,G,W,ie,q){l("readableAddChunk",G);var te,le,ue,de,he,ne=j._readableState;if(null===G)ne.reading=!1,function(le,ue){if(l("onEofChunk"),!ue.ended){if(ue.decoder){var de=ue.decoder.end();de&&de.length&&(ue.buffer.push(de),ue.length+=ue.objectMode?1:de.length)}ue.ended=!0,ue.sync?R(le):(ue.needReadable=!1,ue.emittedReadable||(ue.emittedReadable=!0,L(le)))}}(j,ne);else if(q||(le=ne,o.isBuffer(he=ue=G)||he instanceof a||"string"==typeof ue||void 0===ue||le.objectMode||(de=new g("chunk",["string","Buffer","Uint8Array"],ue)),te=de),te)M(j,te);else if(ne.objectMode||G&&G.length>0)if("string"==typeof G||ne.objectMode||Object.getPrototypeOf(G)===o.prototype||(G=function(le){return o.from(le)}(G)),ie)ne.endEmitted?M(j,new y):D(j,ne,G,!0);else if(ne.ended)M(j,new f);else{if(ne.destroyed)return!1;ne.reading=!1,ne.decoder&&!W?(G=ne.decoder.write(G),ne.objectMode||0!==G.length?D(j,ne,G,!1):I(j,ne)):D(j,ne,G,!1)}else ie||(ne.reading=!1,I(j,ne));return!ne.ended&&(ne.length<ne.highWaterMark||0===ne.length)}function D(j,G,W,ie){G.flowing&&0===G.length&&!G.sync?(G.awaitDrain=0,j.emit("data",W)):(G.length+=G.objectMode?1:W.length,ie?G.buffer.unshift(W):G.buffer.push(W),G.needReadable&&R(j)),I(j,G)}function F(j,G){return j<=0||0===G.length&&G.ended?0:G.objectMode?1:j!=j?G.flowing&&G.length?G.buffer.head.data.length:G.length:(j>G.highWaterMark&&(G.highWaterMark=((W=j)>=1073741824?W=1073741824:(W--,W|=W>>>1,W|=W>>>2,W|=W>>>4,W|=W>>>8,W|=W>>>16,W++),W)),j<=G.length?j:G.ended?G.length:(G.needReadable=!0,0));var W}function R(j){var G=j._readableState;l("emitReadable",G.needReadable,G.emittedReadable),G.needReadable=!1,G.emittedReadable||(l("emitReadable",G.flowing),G.emittedReadable=!0,m.nextTick(L,j))}function L(j){var G=j._readableState;l("emitReadable_",G.destroyed,G.length,G.ended),G.destroyed||!G.length&&!G.ended||(j.emit("readable"),G.emittedReadable=!1),G.needReadable=!G.flowing&&!G.ended&&G.length<=G.highWaterMark,ee(j)}function I(j,G){G.readingMore||(G.readingMore=!0,m.nextTick(B,j,G))}function B(j,G){for(;!G.reading&&!G.ended&&(G.length<G.highWaterMark||G.flowing&&0===G.length);){var W=G.length;if(l("maybeReadMore read 0"),j.read(0),W===G.length)break}G.readingMore=!1}function V(j){var G=j._readableState;G.readableListening=j.listenerCount("readable")>0,G.resumeScheduled&&!G.paused?G.flowing=!0:j.listenerCount("data")>0&&j.resume()}function Z(j){l("readable nexttick read 0"),j.read(0)}function Y(j,G){l("resume",G.reading),G.reading||j.read(0),G.resumeScheduled=!1,j.emit("resume"),ee(j),G.flowing&&!G.reading&&j.read(0)}function ee(j){var G=j._readableState;for(l("flow",G.flowing);G.flowing&&null!==j.read(););}function J(j,G){return 0===G.length?null:(G.objectMode?W=G.buffer.shift():!j||j>=G.length?(W=G.decoder?G.buffer.join(""):1===G.buffer.length?G.buffer.first():G.buffer.concat(G.length),G.buffer.clear()):W=G.buffer.consume(j,G.decoder),W);var W}function $(j){var G=j._readableState;l("endReadable",G.endEmitted),G.endEmitted||(G.ended=!0,m.nextTick(Q,G,j))}function Q(j,G){if(l("endReadableNT",j.endEmitted,j.length),!j.endEmitted&&0===j.length&&(j.endEmitted=!0,G.readable=!1,G.emit("end"),j.autoDestroy)){var W=G._writableState;(!W||W.autoDestroy&&W.finished)&&G.destroy()}}function se(j,G){for(var W=0,ie=j.length;W<ie;W++)if(j[W]===G)return W;return-1}Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(j){this._readableState&&(this._readableState.destroyed=j)}}),C.prototype.destroy=h.destroy,C.prototype._undestroy=h.undestroy,C.prototype._destroy=function(j,G){G(j)},C.prototype.push=function(j,G){var W,ie=this._readableState;return ie.objectMode?W=!0:"string"==typeof j&&((G=G||ie.defaultEncoding)!==ie.encoding&&(j=o.from(j,G),G=""),W=!0),P(this,j,G,!1,W)},C.prototype.unshift=function(j){return P(this,j,null,!0,!1)},C.prototype.isPaused=function(){return!1===this._readableState.flowing},C.prototype.setEncoding=function(j){d||(d=_("string_decoder/").StringDecoder);var G=new d(j);this._readableState.decoder=G,this._readableState.encoding=this._readableState.decoder.encoding;for(var W=this._readableState.buffer.head,ie="";null!==W;)ie+=G.write(W.data),W=W.next;return this._readableState.buffer.clear(),""!==ie&&this._readableState.buffer.push(ie),this._readableState.length=ie.length,this},C.prototype.read=function(j){l("read",j),j=parseInt(j,10);var G=this._readableState,W=j;if(0!==j&&(G.emittedReadable=!1),0===j&&G.needReadable&&((0!==G.highWaterMark?G.length>=G.highWaterMark:G.length>0)||G.ended))return l("read: emitReadable",G.length,G.ended),0===G.length&&G.ended?$(this):R(this),null;if(0===(j=F(j,G))&&G.ended)return 0===G.length&&$(this),null;var ie,q=G.needReadable;return l("need readable",q),(0===G.length||G.length-j<G.highWaterMark)&&l("length less than watermark",q=!0),G.ended||G.reading?l("reading or ended",q=!1):q&&(l("do read"),G.reading=!0,G.sync=!0,0===G.length&&(G.needReadable=!0),this._read(G.highWaterMark),G.sync=!1,G.reading||(j=F(W,G))),null===(ie=j>0?J(j,G):null)?(G.needReadable=G.length<=G.highWaterMark,j=0):(G.length-=j,G.awaitDrain=0),0===G.length&&(G.ended||(G.needReadable=!0),W!==j&&G.ended&&$(this)),null!==ie&&this.emit("data",ie),ie},C.prototype._read=function(j){M(this,new w("_read()"))},C.prototype.pipe=function(j,G){var W=this,ie=this._readableState;switch(ie.pipesCount){case 0:ie.pipes=j;break;case 1:ie.pipes=[ie.pipes,j];break;default:ie.pipes.push(j)}ie.pipesCount+=1,l("pipe count=%d opts=%j",ie.pipesCount,G);var q=G&&!1===G.end||j===m.stdout||j===m.stderr?we:ne;function ne(){l("onend"),j.end()}ie.endEmitted?m.nextTick(q):W.once("end",q),j.on("unpipe",function te(Ce,De){l("onunpipe"),Ce===W&&De&&!1===De.hasUnpiped&&(De.hasUnpiped=!0,l("cleanup"),j.removeListener("close",be),j.removeListener("finish",ge),j.removeListener("drain",le),j.removeListener("error",he),j.removeListener("unpipe",te),W.removeListener("end",ne),W.removeListener("end",we),W.removeListener("data",de),ue=!0,!ie.awaitDrain||j._writableState&&!j._writableState.needDrain||le())});var Ce,le=(Ce=W,function(){var De=Ce._readableState;l("pipeOnDrain",De.awaitDrain),De.awaitDrain&&De.awaitDrain--,0===De.awaitDrain&&b(Ce,"data")&&(De.flowing=!0,ee(Ce))});j.on("drain",le);var ue=!1;function de(Ce){l("ondata");var De=j.write(Ce);l("dest.write",De),!1===De&&((1===ie.pipesCount&&ie.pipes===j||ie.pipesCount>1&&-1!==se(ie.pipes,j))&&!ue&&(l("false write response, pause",ie.awaitDrain),ie.awaitDrain++),W.pause())}function he(Ce){l("onerror",Ce),we(),j.removeListener("error",he),0===b(j,"error")&&M(j,Ce)}function be(){j.removeListener("finish",ge),we()}function ge(){l("onfinish"),j.removeListener("close",be),we()}function we(){l("unpipe"),W.unpipe(j)}return W.on("data",de),function(Ce,De,Se){if("function"==typeof Ce.prependListener)return Ce.prependListener(De,Se);Ce._events&&Ce._events[De]?Array.isArray(Ce._events[De])?Ce._events[De].unshift(Se):Ce._events[De]=[Se,Ce._events[De]]:Ce.on(De,Se)}(j,"error",he),j.once("close",be),j.once("finish",ge),j.emit("pipe",W),ie.flowing||(l("pipe resume"),W.resume()),j},C.prototype.unpipe=function(j){var G=this._readableState,W={hasUnpiped:!1};if(0===G.pipesCount)return this;if(1===G.pipesCount)return j&&j!==G.pipes||(j||(j=G.pipes),G.pipes=null,G.pipesCount=0,G.flowing=!1,j&&j.emit("unpipe",this,W)),this;if(!j){var ie=G.pipes,q=G.pipesCount;G.pipes=null,G.pipesCount=0,G.flowing=!1;for(var te=0;te<q;te++)ie[te].emit("unpipe",this,{hasUnpiped:!1});return this}var ne=se(G.pipes,j);return-1===ne||(G.pipes.splice(ne,1),G.pipesCount-=1,1===G.pipesCount&&(G.pipes=G.pipes[0]),j.emit("unpipe",this,W)),this},C.prototype.addListener=C.prototype.on=function(j,G){var W=e.prototype.on.call(this,j,G),ie=this._readableState;return"data"===j?(ie.readableListening=this.listenerCount("readable")>0,!1!==ie.flowing&&this.resume()):"readable"===j&&(ie.endEmitted||ie.readableListening||(ie.readableListening=ie.needReadable=!0,ie.flowing=!1,ie.emittedReadable=!1,l("on readable",ie.length,ie.reading),ie.length?R(this):ie.reading||m.nextTick(Z,this))),W},C.prototype.removeListener=function(j,G){var W=e.prototype.removeListener.call(this,j,G);return"readable"===j&&m.nextTick(V,this),W},C.prototype.removeAllListeners=function(j){var G=e.prototype.removeAllListeners.apply(this,arguments);return"readable"!==j&&void 0!==j||m.nextTick(V,this),G},C.prototype.resume=function(){var W,j=this._readableState;return j.flowing||(l("resume"),j.flowing=!j.readableListening,this,(W=j).resumeScheduled||(W.resumeScheduled=!0,m.nextTick(Y,this,W))),j.paused=!1,this},C.prototype.pause=function(){return l("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(l("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},C.prototype.wrap=function(j){var G=this,W=this._readableState,ie=!1;for(var q in j.on("end",function(){if(l("wrapped end"),W.decoder&&!W.ended){var ne=W.decoder.end();ne&&ne.length&&G.push(ne)}G.push(null)}),j.on("data",function(ne){l("wrapped data"),W.decoder&&(ne=W.decoder.write(ne)),W.objectMode&&null==ne||(W.objectMode||ne&&ne.length)&&(G.push(ne)||(ie=!0,j.pause()))}),j)void 0===this[q]&&"function"==typeof j[q]&&(this[q]=function(ne){return function(){return j[ne].apply(j,arguments)}}(q));for(var te=0;te<A.length;te++)j.on(A[te],this.emit.bind(this,A[te]));return this._read=function(ne){l("wrapped _read",ne),ie&&(ie=!1,j.resume())},this},"function"==typeof Symbol&&(C.prototype[Symbol.asyncIterator]=function(){return void 0===u&&(u=_("./internal/streams/async_iterator")),u(this)}),Object.defineProperty(C.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(C.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(C.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(j){this._readableState&&(this._readableState.flowing=j)}}),C._fromList=J,Object.defineProperty(C.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(C.from=function(j,G){return void 0===s&&(s=_("./internal/streams/from")),s(C,j,G)})}).call(this)}).call(this,_("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/async_iterator":292,"./internal/streams/buffer_list":293,"./internal/streams/destroy":294,"./internal/streams/from":296,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,events:84,inherits:231,"string_decoder/":300,util:83}],290:[function(_,oe,ae){"use strict";oe.exports=l;var m=_("../errors").codes,x=m.ERR_METHOD_NOT_IMPLEMENTED,T=m.ERR_MULTIPLE_CALLBACK,b=m.ERR_TRANSFORM_ALREADY_TRANSFORMING,e=m.ERR_TRANSFORM_WITH_LENGTH_0,o=_("./_stream_duplex");function a(u,s){var c=this._transformState;c.transforming=!1;var h=c.writecb;if(null===h)return this.emit("error",new T);c.writechunk=null,c.writecb=null,null!=s&&this.push(s),h(u);var p=this._readableState;p.reading=!1,(p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}function l(u){if(!(this instanceof l))return new l(u);o.call(this,u),this._transformState={afterTransform:a.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,u&&("function"==typeof u.transform&&(this._transform=u.transform),"function"==typeof u.flush&&(this._flush=u.flush)),this.on("prefinish",i)}function i(){var u=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush(function(s,c){d(u,s,c)})}function d(u,s,c){if(s)return u.emit("error",s);if(null!=c&&u.push(c),u._writableState.length)throw new e;if(u._transformState.transforming)throw new b;return u.push(null)}_("inherits")(l,o),l.prototype.push=function(u,s){return this._transformState.needTransform=!1,o.prototype.push.call(this,u,s)},l.prototype._transform=function(u,s,c){c(new x("_transform()"))},l.prototype._write=function(u,s,c){var h=this._transformState;if(h.writecb=c,h.writechunk=u,h.writeencoding=s,!h.transforming){var p=this._readableState;(h.needTransform||p.needReadable||p.length<p.highWaterMark)&&this._read(p.highWaterMark)}},l.prototype._read=function(u){var s=this._transformState;null===s.writechunk||s.transforming?s.needTransform=!0:(s.transforming=!0,this._transform(s.writechunk,s.writeencoding,s.afterTransform))},l.prototype._destroy=function(u,s){o.prototype._destroy.call(this,u,function(c){s(c)})}},{"../errors":286,"./_stream_duplex":287,inherits:231}],291:[function(_,oe,ae){(function(m,x){(function(){"use strict";function T(B){var V=this;this.next=null,this.entry=null,this.finish=function(){!function(Z,Y,ee){var J=Z.entry;for(Z.entry=null;J;){var $=J.callback;Y.pendingcb--,$(undefined),J=J.next}Y.corkedRequestsFree.next=Z}(V,B)}}var b;oe.exports=C,C.WritableState=k;var i,e={deprecate:_("util-deprecate")},o=_("./internal/streams/stream"),a=_("buffer").Buffer,l=x.Uint8Array||function(){},d=_("./internal/streams/destroy"),u=_("./internal/streams/state").getHighWaterMark,s=_("../errors").codes,c=s.ERR_INVALID_ARG_TYPE,h=s.ERR_METHOD_NOT_IMPLEMENTED,p=s.ERR_MULTIPLE_CALLBACK,v=s.ERR_STREAM_CANNOT_PIPE,g=s.ERR_STREAM_DESTROYED,f=s.ERR_STREAM_NULL_VALUES,w=s.ERR_STREAM_WRITE_AFTER_END,y=s.ERR_UNKNOWN_ENCODING,M=d.errorOrDestroy;function A(){}function k(B,V,Z){b=b||_("./_stream_duplex"),"boolean"!=typeof Z&&(Z=V instanceof b),this.objectMode=!!(B=B||{}).objectMode,Z&&(this.objectMode=this.objectMode||!!B.writableObjectMode),this.highWaterMark=u(this,B,"writableHighWaterMark",Z),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1,this.decodeStrings=!(!1===B.decodeStrings),this.defaultEncoding=B.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(ee){!function(J,$){var W,Q=J._writableState,se=Q.sync,j=Q.writecb;if("function"!=typeof j)throw new p;if((W=Q).writing=!1,W.writecb=null,W.length-=W.writelen,W.writelen=0,$)!function(W,ie,q,te,ne){--ie.pendingcb,q?(m.nextTick(ne,te),m.nextTick(I,W,ie),W._writableState.errorEmitted=!0,M(W,te)):(ne(te),W._writableState.errorEmitted=!0,M(W,te),I(W,ie))}(J,Q,se,$,j);else{var G=R(Q)||J.destroyed;G||Q.corked||Q.bufferProcessing||!Q.bufferedRequest||F(J,Q),se?m.nextTick(D,J,Q,G,j):D(J,Q,G,j)}}(V,ee)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==B.emitClose,this.autoDestroy=!!B.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new T(this)}function C(B){var V=this instanceof(b=b||_("./_stream_duplex"));if(!V&&!i.call(C,this))return new C(B);this._writableState=new k(B,this,V),this.writable=!0,B&&("function"==typeof B.write&&(this._write=B.write),"function"==typeof B.writev&&(this._writev=B.writev),"function"==typeof B.destroy&&(this._destroy=B.destroy),"function"==typeof B.final&&(this._final=B.final)),o.call(this)}function P(B,V,Z,Y,ee,J,$){V.writelen=Y,V.writecb=$,V.writing=!0,V.sync=!0,V.destroyed?V.onwrite(new g("write")):Z?B._writev(ee,V.onwrite):B._write(ee,J,V.onwrite),V.sync=!1}function D(B,V,Z,Y){var ee,J;Z||(ee=B,0===(J=V).length&&J.needDrain&&(J.needDrain=!1,ee.emit("drain"))),V.pendingcb--,Y(),I(B,V)}function F(B,V){V.bufferProcessing=!0;var Z=V.bufferedRequest;if(B._writev&&Z&&Z.next){var ee=new Array(V.bufferedRequestCount),J=V.corkedRequestsFree;J.entry=Z;for(var $=0,Q=!0;Z;)ee[$]=Z,Z.isBuf||(Q=!1),Z=Z.next,$+=1;ee.allBuffers=Q,P(B,V,!0,V.length,ee,"",J.finish),V.pendingcb++,V.lastBufferedRequest=null,J.next?(V.corkedRequestsFree=J.next,J.next=null):V.corkedRequestsFree=new T(V),V.bufferedRequestCount=0}else{for(;Z;){var se=Z.chunk;if(P(B,V,!1,V.objectMode?1:se.length,se,Z.encoding,Z.callback),Z=Z.next,V.bufferedRequestCount--,V.writing)break}null===Z&&(V.lastBufferedRequest=null)}V.bufferedRequest=Z,V.bufferProcessing=!1}function R(B){return B.ending&&0===B.length&&null===B.bufferedRequest&&!B.finished&&!B.writing}function L(B,V){B._final(function(Z){V.pendingcb--,Z&&M(B,Z),V.prefinished=!0,B.emit("prefinish"),I(B,V)})}function I(B,V){var ee,J,Z=R(V);if(Z&&(ee=B,(J=V).prefinished||J.finalCalled||("function"!=typeof ee._final||J.destroyed?(J.prefinished=!0,ee.emit("prefinish")):(J.pendingcb++,J.finalCalled=!0,m.nextTick(L,ee,J))),0===V.pendingcb&&(V.finished=!0,B.emit("finish"),V.autoDestroy))){var Y=B._readableState;(!Y||Y.autoDestroy&&Y.endEmitted)&&B.destroy()}return Z}_("inherits")(C,o),k.prototype.getBuffer=function(){for(var B=this.bufferedRequest,V=[];B;)V.push(B),B=B.next;return V},function(){try{Object.defineProperty(k.prototype,"buffer",{get:e.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(B){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(i=Function.prototype[Symbol.hasInstance],Object.defineProperty(C,Symbol.hasInstance,{value:function(B){return!!i.call(this,B)||this===C&&B&&B._writableState instanceof k}})):i=function(B){return B instanceof this},C.prototype.pipe=function(){M(this,new v)},C.prototype.write=function(B,V,Z){var Y,Q,se,j,ee=this._writableState,J=!1,$=!ee.objectMode&&(a.isBuffer(Y=B)||Y instanceof l);return $&&!a.isBuffer(B)&&(B=a.from(B)),"function"==typeof V&&(Z=V,V=null),$?V="buffer":V||(V=ee.defaultEncoding),"function"!=typeof Z&&(Z=A),ee.ending?(Q=this,se=Z,j=new w,M(Q,j),m.nextTick(se,j)):($||function(Q,se,j,G){var W;return null===j?W=new f:"string"==typeof j||se.objectMode||(W=new c("chunk",["string","Buffer"],j)),!W||(M(Q,W),m.nextTick(G,W),!1)}(this,ee,B,Z))&&(ee.pendingcb++,J=function(Q,se,j,G,W,ie){if(!j){var q=(de=G,(ue=se).objectMode||!1===ue.decodeStrings||"string"!=typeof de||(de=a.from(de,W)),de);G!==q&&(j=!0,W="buffer",G=q)}var ue,de,te=se.objectMode?1:G.length;se.length+=te;var ne=se.length<se.highWaterMark;if(ne||(se.needDrain=!0),se.writing||se.corked){var le=se.lastBufferedRequest;se.lastBufferedRequest={chunk:G,encoding:W,isBuf:j,callback:ie,next:null},le?le.next=se.lastBufferedRequest:se.bufferedRequest=se.lastBufferedRequest,se.bufferedRequestCount+=1}else P(Q,se,!1,te,G,W,ie);return ne}(this,ee,$,B,V,Z)),J},C.prototype.cork=function(){this._writableState.corked++},C.prototype.uncork=function(){var B=this._writableState;B.corked&&(B.corked--,B.writing||B.corked||B.bufferProcessing||!B.bufferedRequest||F(this,B))},C.prototype.setDefaultEncoding=function(B){if("string"==typeof B&&(B=B.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((B+"").toLowerCase())>-1))throw new y(B);return this._writableState.defaultEncoding=B,this},Object.defineProperty(C.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(C.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),C.prototype._write=function(B,V,Z){Z(new h("_write()"))},C.prototype._writev=null,C.prototype.end=function(B,V,Z){var J,$,Y=this._writableState;return"function"==typeof B?(Z=B,B=null,V=null):"function"==typeof V&&(Z=V,V=null),null!=B&&this.write(B,V),Y.corked&&(Y.corked=1,this.uncork()),Y.ending||(this,$=Z,(J=Y).ending=!0,I(this,J),$&&(J.finished?m.nextTick($):this.once("finish",$)),J.ended=!0,this.writable=!1),this},Object.defineProperty(C.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(C.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(B){this._writableState&&(this._writableState.destroyed=B)}}),C.prototype.destroy=d.destroy,C.prototype._undestroy=d.undestroy,C.prototype._destroy=function(B,V){V(B)}}).call(this)}).call(this,_("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../errors":286,"./_stream_duplex":287,"./internal/streams/destroy":294,"./internal/streams/state":298,"./internal/streams/stream":299,_process:277,buffer:85,inherits:231,"util-deprecate":330}],292:[function(_,oe,ae){(function(m){(function(){"use strict";var x;function T(g,f,w){return f in g?Object.defineProperty(g,f,{value:w,enumerable:!0,configurable:!0,writable:!0}):g[f]=w,g}var b=_("./end-of-stream"),e=Symbol("lastResolve"),o=Symbol("lastReject"),a=Symbol("error"),l=Symbol("ended"),i=Symbol("lastPromise"),d=Symbol("handlePromise"),u=Symbol("stream");function s(g,f){return{value:g,done:f}}function c(g){var f=g[e];if(null!==f){var w=g[u].read();null!==w&&(g[i]=null,g[e]=null,g[o]=null,f(s(w,!1)))}}function h(g){m.nextTick(c,g)}var p=Object.getPrototypeOf(function(){}),v=Object.setPrototypeOf((T(x={get stream(){return this[u]},next:function(){var g=this,f=this[a];if(null!==f)return Promise.reject(f);if(this[l])return Promise.resolve(s(void 0,!0));if(this[u].destroyed)return new Promise(function(A,k){m.nextTick(function(){g[a]?k(g[a]):A(s(void 0,!0))})});var w,A,k,y=this[i];if(y)w=new Promise((A=y,k=this,function(C,P){A.then(function(){k[l]?C(s(void 0,!0)):k[d](C,P)},P)}));else{var M=this[u].read();if(null!==M)return Promise.resolve(s(M,!1));w=new Promise(this[d])}return this[i]=w,w}},Symbol.asyncIterator,function(){return this}),T(x,"return",function(){var g=this;return new Promise(function(f,w){g[u].destroy(null,function(y){y?w(y):f(s(void 0,!0))})})}),x),p);oe.exports=function(g){var f,w=Object.create(v,(T(f={},u,{value:g,writable:!0}),T(f,e,{value:null,writable:!0}),T(f,o,{value:null,writable:!0}),T(f,a,{value:null,writable:!0}),T(f,l,{value:g._readableState.endEmitted,writable:!0}),T(f,d,{value:function(y,M){var A=w[u].read();A?(w[i]=null,w[e]=null,w[o]=null,y(s(A,!1))):(w[e]=y,w[o]=M)},writable:!0}),f));return w[i]=null,b(g,function(y){if(y&&"ERR_STREAM_PREMATURE_CLOSE"!==y.code){var M=w[o];return null!==M&&(w[i]=null,w[e]=null,w[o]=null,M(y)),void(w[a]=y)}var A=w[e];null!==A&&(w[i]=null,w[e]=null,w[o]=null,A(s(void 0,!0))),w[l]=!0}),g.on("readable",h.bind(null,w)),w}}).call(this)}).call(this,_("_process"))},{"./end-of-stream":295,_process:277}],293:[function(_,oe,ae){"use strict";function m(a,l){var i=Object.keys(a);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(a);l&&(d=d.filter(function(u){return Object.getOwnPropertyDescriptor(a,u).enumerable})),i.push.apply(i,d)}return i}function x(a,l,i){return l in a?Object.defineProperty(a,l,{value:i,enumerable:!0,configurable:!0,writable:!0}):a[l]=i,a}function T(a,l){for(var i=0;i<l.length;i++){var d=l[i];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}var b=_("buffer").Buffer,e=_("util").inspect,o=e&&e.custom||"inspect";oe.exports=function(){function a(){(function(u,s){if(!(u instanceof s))throw new TypeError("Cannot call a class as a function")})(this,a),this.head=null,this.tail=null,this.length=0}var l,i;return l=a,(i=[{key:"push",value:function(u){var s={data:u,next:null};this.length>0?this.tail.next=s:this.head=s,this.tail=s,++this.length}},{key:"unshift",value:function(u){var s={data:u,next:this.head};0===this.length&&(this.tail=s),this.head=s,++this.length}},{key:"shift",value:function(){if(0!==this.length){var u=this.head.data;return this.head=1===this.length?this.tail=null:this.head.next,--this.length,u}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(u){if(0===this.length)return"";for(var s=this.head,c=""+s.data;s=s.next;)c+=u+s.data;return c}},{key:"concat",value:function(u){if(0===this.length)return b.alloc(0);for(var p=b.allocUnsafe(u>>>0),v=this.head,g=0;v;)b.prototype.copy.call(v.data,p,g),g+=v.data.length,v=v.next;return p}},{key:"consume",value:function(u,s){var c;return u<this.head.data.length?(c=this.head.data.slice(0,u),this.head.data=this.head.data.slice(u)):c=u===this.head.data.length?this.shift():s?this._getString(u):this._getBuffer(u),c}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(u){var s=this.head,c=1,h=s.data;for(u-=h.length;s=s.next;){var p=s.data,v=u>p.length?p.length:u;if(h+=v===p.length?p:p.slice(0,u),0==(u-=v)){v===p.length?(++c,this.head=s.next?s.next:this.tail=null):(this.head=s,s.data=p.slice(v));break}++c}return this.length-=c,h}},{key:"_getBuffer",value:function(u){var s=b.allocUnsafe(u),c=this.head,h=1;for(c.data.copy(s),u-=c.data.length;c=c.next;){var p=c.data,v=u>p.length?p.length:u;if(p.copy(s,s.length-u,0,v),0==(u-=v)){v===p.length?(++h,this.head=c.next?c.next:this.tail=null):(this.head=c,c.data=p.slice(v));break}++h}return this.length-=h,s}},{key:o,value:function(u,s){return e(this,function(c){for(var h=1;h<arguments.length;h++){var p=null!=arguments[h]?arguments[h]:{};h%2?m(Object(p),!0).forEach(function(v){x(c,v,p[v])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(p)):m(Object(p)).forEach(function(v){Object.defineProperty(c,v,Object.getOwnPropertyDescriptor(p,v))})}return c}({},s,{depth:0,customInspect:!1}))}}])&&T(l.prototype,i),a}()},{buffer:85,util:83}],294:[function(_,oe,ae){(function(m){(function(){"use strict";function x(e,o){b(e,o),T(e)}function T(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function b(e,o){e.emit("error",o)}oe.exports={destroy:function(e,o){var a=this;return this._readableState&&this._readableState.destroyed||this._writableState&&this._writableState.destroyed?(o?o(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,m.nextTick(b,this,e)):m.nextTick(b,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(d){!o&&d?a._writableState?a._writableState.errorEmitted?m.nextTick(T,a):(a._writableState.errorEmitted=!0,m.nextTick(x,a,d)):m.nextTick(x,a,d):o?(m.nextTick(T,a),o(d)):m.nextTick(T,a)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,o){var a=e._readableState,l=e._writableState;a&&a.autoDestroy||l&&l.autoDestroy?e.destroy(o):e.emit("error",o)}}}).call(this)}).call(this,_("_process"))},{_process:277}],295:[function(_,oe,ae){"use strict";var m=_("../../../errors").codes.ERR_STREAM_PREMATURE_CLOSE;function x(){}oe.exports=function T(b,e,o){if("function"==typeof e)return T(b,null,e);var g,f;e||(e={}),g=o||x,f=!1,o=function(){if(!f){f=!0;for(var w=arguments.length,y=new Array(w),M=0;M<w;M++)y[M]=arguments[M];g.apply(this,y)}};var a=e.readable||!1!==e.readable&&b.readable,l=e.writable||!1!==e.writable&&b.writable,i=function(){b.writable||u()},d=b._writableState&&b._writableState.finished,u=function(){l=!1,d=!0,a||o.call(b)},s=b._readableState&&b._readableState.endEmitted,c=function(){a=!1,s=!0,l||o.call(b)},h=function(g){o.call(b,g)},p=function(){var g;return a&&!s?(b._readableState&&b._readableState.ended||(g=new m),o.call(b,g)):l&&!d?(b._writableState&&b._writableState.ended||(g=new m),o.call(b,g)):void 0},v=function(){b.req.on("finish",u)};return function(g){return g.setHeader&&"function"==typeof g.abort}(b)?(b.on("complete",u),b.on("abort",p),b.req?v():b.on("request",v)):l&&!b._writableState&&(b.on("end",i),b.on("close",i)),b.on("end",c),b.on("finish",u),!1!==e.error&&b.on("error",h),b.on("close",p),function(){b.removeListener("complete",u),b.removeListener("abort",p),b.removeListener("request",v),b.req&&b.req.removeListener("finish",u),b.removeListener("end",i),b.removeListener("close",i),b.removeListener("finish",u),b.removeListener("end",c),b.removeListener("error",h),b.removeListener("close",p)}}},{"../../../errors":286}],296:[function(_,oe,ae){oe.exports=function(){throw new Error("Readable.from is not available in the browser")}},{}],297:[function(_,oe,ae){"use strict";var m,x=_("../../../errors").codes,T=x.ERR_MISSING_ARGS,b=x.ERR_STREAM_DESTROYED;function e(d){if(d)throw d}function o(d,u,s,c){var v,g;v=c,g=!1,c=function(){g||(g=!0,v.apply(void 0,arguments))};var h=!1;d.on("close",function(){h=!0}),void 0===m&&(m=_("./end-of-stream")),m(d,{readable:u,writable:s},function(v){if(v)return c(v);h=!0,c()});var p=!1;return function(v){if(!h&&!p)return p=!0,function(g){return g.setHeader&&"function"==typeof g.abort}(d)?d.abort():"function"==typeof d.destroy?d.destroy():void c(v||new b("pipe"))}}function a(d){d()}function l(d,u){return d.pipe(u)}function i(d){return d.length?"function"!=typeof d[d.length-1]?e:d.pop():e}oe.exports=function(){for(var d=arguments.length,u=new Array(d),s=0;s<d;s++)u[s]=arguments[s];var c,h=i(u);if(Array.isArray(u[0])&&(u=u[0]),u.length<2)throw new T("streams");var p=u.map(function(v,g){var f=g<u.length-1;return o(v,f,g>0,function(w){c||(c=w),w&&p.forEach(a),f||(p.forEach(a),h(c))})});return u.reduce(l)}},{"../../../errors":286,"./end-of-stream":295}],298:[function(_,oe,ae){"use strict";var m=_("../../../errors").codes.ERR_INVALID_OPT_VALUE;oe.exports={getHighWaterMark:function(x,T,b,e){var a,o=null!=(a=T).highWaterMark?a.highWaterMark:e?a[b]:null;if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new m(e?b:"highWaterMark",o);return Math.floor(o)}return x.objectMode?16:16384}}},{"../../../errors":286}],299:[function(_,oe,ae){oe.exports=_("events").EventEmitter},{events:84}],300:[function(_,oe,ae){"use strict";var m=_("safe-buffer").Buffer,x=m.isEncoding||function(s){switch((s=""+s)&&s.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function T(s){var c;switch(this.encoding=function(h){var p=function(v){if(!v)return"utf8";for(var g;;)switch(v){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return v;default:if(g)return;v=(""+v).toLowerCase(),g=!0}}(h);if("string"!=typeof p&&(m.isEncoding===x||!x(h)))throw new Error("Unknown encoding: "+h);return p||h}(s),this.encoding){case"utf16le":this.text=o,this.end=a,c=4;break;case"utf8":this.fillLast=e,c=4;break;case"base64":this.text=l,this.end=i,c=3;break;default:return this.write=d,void(this.end=u)}this.lastNeed=0,this.lastTotal=0,this.lastChar=m.allocUnsafe(c)}function b(s){return s<=127?0:s>>5==6?2:s>>4==14?3:s>>3==30?4:s>>6==2?-1:-2}function e(s){var c=this.lastTotal-this.lastNeed,h=function(p,v,g){if(128!=(192&v[0]))return p.lastNeed=0,"\ufffd";if(p.lastNeed>1&&v.length>1){if(128!=(192&v[1]))return p.lastNeed=1,"\ufffd";if(p.lastNeed>2&&v.length>2&&128!=(192&v[2]))return p.lastNeed=2,"\ufffd"}}(this,s);return void 0!==h?h:this.lastNeed<=s.length?(s.copy(this.lastChar,c,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(s.copy(this.lastChar,c,0,s.length),void(this.lastNeed-=s.length))}function o(s,c){if((s.length-c)%2==0){var h=s.toString("utf16le",c);if(h){var p=h.charCodeAt(h.length-1);if(p>=55296&&p<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1],h.slice(0,-1)}return h}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=s[s.length-1],s.toString("utf16le",c,s.length-1)}function a(s){var c=s&&s.length?this.write(s):"";return this.lastNeed?c+this.lastChar.toString("utf16le",0,this.lastTotal-this.lastNeed):c}function l(s,c){var h=(s.length-c)%3;return 0===h?s.toString("base64",c):(this.lastNeed=3-h,this.lastTotal=3,1===h?this.lastChar[0]=s[s.length-1]:(this.lastChar[0]=s[s.length-2],this.lastChar[1]=s[s.length-1]),s.toString("base64",c,s.length-h))}function i(s){var c=s&&s.length?this.write(s):"";return this.lastNeed?c+this.lastChar.toString("base64",0,3-this.lastNeed):c}function d(s){return s.toString(this.encoding)}function u(s){return s&&s.length?this.write(s):""}ae.StringDecoder=T,T.prototype.write=function(s){if(0===s.length)return"";var c,h;if(this.lastNeed){if(void 0===(c=this.fillLast(s)))return"";h=this.lastNeed,this.lastNeed=0}else h=0;return h<s.length?c?c+this.text(s,h):this.text(s,h):c||""},T.prototype.end=function(s){var c=s&&s.length?this.write(s):"";return this.lastNeed?c+"\ufffd":c},T.prototype.text=function(s,c){var h=function(v,g,f){var w=g.length-1;if(w<f)return 0;var y=b(g[w]);return y>=0?(y>0&&(v.lastNeed=y-1),y):--w<f||-2===y?0:(y=b(g[w]))>=0?(y>0&&(v.lastNeed=y-2),y):--w<f||-2===y?0:(y=b(g[w]))>=0?(y>0&&(2===y?y=0:v.lastNeed=y-3),y):0}(this,s,c);if(!this.lastNeed)return s.toString("utf8",c);this.lastTotal=h;var p=s.length-(h-this.lastNeed);return s.copy(this.lastChar,0,p),s.toString("utf8",c,p)},T.prototype.fillLast=function(s){if(this.lastNeed<=s.length)return s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);s.copy(this.lastChar,this.lastTotal-this.lastNeed,0,s.length),this.lastNeed-=s.length}},{"safe-buffer":284}],301:[function(_,oe,ae){(function(m,x){(function(){var T=_("assert"),b=_("debug")("stream-parser");function e(h){b("initializing parser stream"),h._parserBytesLeft=0,h._parserBuffers=[],h._parserBuffered=0,h._parserState=-1,h._parserCallback=null,"function"==typeof h.push&&(h._parserOutput=h.push.bind(h)),h._parserInit=!0}function o(h,p){T(!this._parserCallback,'there is already a "callback" set!'),T(isFinite(h)&&h>0,'can only buffer a finite number of bytes > 0, got "'+h+'"'),this._parserInit||e(this),b("buffering %o bytes",h),this._parserBytesLeft=h,this._parserCallback=p,this._parserState=0}function a(h,p){T(!this._parserCallback,'there is already a "callback" set!'),T(h>0,'can only skip > 0 bytes, got "'+h+'"'),this._parserInit||e(this),b("skipping %o bytes",h),this._parserBytesLeft=h,this._parserCallback=p,this._parserState=1}function l(h,p){T(!this._parserCallback,'There is already a "callback" set!'),T(h>0,'can only pass through > 0 bytes, got "'+h+'"'),this._parserInit||e(this),b("passing through %o bytes",h),this._parserBytesLeft=h,this._parserCallback=p,this._parserState=2}function i(h,p,v){this._parserInit||e(this),b("write(%o bytes)",h.length),"function"==typeof p&&(v=p),s(this,h,null,v)}function d(h,p,v){this._parserInit||e(this),b("transform(%o bytes)",h.length),"function"!=typeof p&&(p=this._parserOutput),s(this,h,p,v)}function u(h,p,v,g){if(h._parserBytesLeft-=p.length,b("%o bytes left for stream piece",h._parserBytesLeft),0===h._parserState?(h._parserBuffers.push(p),h._parserBuffered+=p.length):2===h._parserState&&v(p),0!==h._parserBytesLeft)return g;var f=h._parserCallback;if(f&&0===h._parserState&&h._parserBuffers.length>1&&(p=x.concat(h._parserBuffers,h._parserBuffered)),0!==h._parserState&&(p=null),h._parserCallback=null,h._parserBuffered=0,h._parserState=-1,h._parserBuffers.splice(0),f){var w=[];p&&w.push(p),v&&w.push(v);var y=f.length>w.length;y&&w.push(c(g));var M=f.apply(h,w);if(!y||g===M)return g}}oe.exports=function(h){var p=h&&"function"==typeof h._transform;if(!(p||h&&"function"==typeof h._write))throw new Error("must pass a Writable or Transform stream in");b("extending Parser into stream"),h._bytes=o,h._skipBytes=a,p&&(h._passthrough=l),p?h._transform=d:h._write=i};var s=c(function h(p,v,g,f){return p._parserBytesLeft<=0?f(new Error("got data but not currently parsing anything")):v.length<=p._parserBytesLeft?function(){return u(p,v,g,f)}:function(){var w=v.slice(0,p._parserBytesLeft);return u(p,w,g,function(y){return y?f(y):v.length>w.length?function(){return h(p,v.slice(w.length),g,f)}:void 0})}});function c(h){return function(){for(var p=h.apply(this,arguments);"function"==typeof p;)p=p();return p}}}).call(this)}).call(this,_("_process"),_("buffer").Buffer)},{_process:277,assert:75,buffer:85,debug:302}],302:[function(_,oe,ae){(function(m){(function(){function x(){var T;try{T=ae.storage.debug}catch(b){}return!T&&void 0!==m&&"env"in m&&(T=m.env.DEBUG),T}(ae=oe.exports=_("./debug")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},ae.formatArgs=function(T){var b=this.useColors;if(T[0]=(b?"%c":"")+this.namespace+(b?" %c":" ")+T[0]+(b?"%c ":" ")+"+"+ae.humanize(this.diff),b){var e="color: "+this.color;T.splice(1,0,e,"color: inherit");var o=0,a=0;T[0].replace(/%[a-zA-Z%]/g,function(l){"%%"!==l&&(o++,"%c"===l&&(a=o))}),T.splice(a,0,e)}},ae.save=function(T){try{null==T?ae.storage.removeItem("debug"):ae.storage.debug=T}catch(b){}},ae.load=x,ae.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},ae.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(T){}}(),ae.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],ae.formatters.j=function(T){try{return JSON.stringify(T)}catch(b){return"[UnexpectedJSONParseError]: "+b.message}},ae.enable(x())}).call(this)}).call(this,_("_process"))},{"./debug":303,_process:277}],303:[function(_,oe,ae){var m;function x(T){function b(){if(b.enabled){var e=b,o=+new Date;e.diff=o-(m||o),e.prev=m,e.curr=o,m=o;for(var l=new Array(arguments.length),i=0;i<l.length;i++)l[i]=arguments[i];l[0]=ae.coerce(l[0]),"string"!=typeof l[0]&&l.unshift("%O");var d=0;l[0]=l[0].replace(/%([a-zA-Z%])/g,function(s,c){if("%%"===s)return s;d++;var h=ae.formatters[c];return"function"==typeof h&&(s=h.call(e,l[d]),l.splice(d,1),d--),s}),ae.formatArgs.call(e,l),(b.log||ae.log||console.log.bind(console)).apply(e,l)}}return b.namespace=T,b.enabled=ae.enabled(T),b.useColors=ae.useColors(),b.color=function(e){var o,a=0;for(o in e)a=(a<<5)-a+e.charCodeAt(o),a|=0;return ae.colors[Math.abs(a)%ae.colors.length]}(T),"function"==typeof ae.init&&ae.init(b),b}(ae=oe.exports=x.debug=x.default=x).coerce=function(T){return T instanceof Error?T.stack||T.message:T},ae.disable=function(){ae.enable("")},ae.enable=function(T){ae.save(T),ae.names=[],ae.skips=[];for(var b=("string"==typeof T?T:"").split(/[\s,]+/),e=b.length,o=0;o<e;o++)b[o]&&("-"===(T=b[o].replace(/\*/g,".*?"))[0]?ae.skips.push(new RegExp("^"+T.substr(1)+"$")):ae.names.push(new RegExp("^"+T+"$")))},ae.enabled=function(T){var b,e;for(b=0,e=ae.skips.length;b<e;b++)if(ae.skips[b].test(T))return!1;for(b=0,e=ae.names.length;b<e;b++)if(ae.names[b].test(T))return!0;return!1},ae.humanize=_("ms"),ae.names=[],ae.skips=[],ae.formatters={}},{ms:304}],304:[function(_,oe,ae){var m=1e3,x=6e4,T=60*x,b=24*T;function e(o,a,l){if(!(o<a))return o<1.5*a?Math.floor(o/a)+" "+l:Math.ceil(o/a)+" "+l+"s"}oe.exports=function(o,a){a=a||{};var l,d,i=typeof o;if("string"===i&&o.length>0)return function(d){if(!((d=String(d)).length>100)){var u=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(d);if(u){var s=parseFloat(u[1]);switch((u[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*b;case"hours":case"hour":case"hrs":case"hr":case"h":return s*T;case"minutes":case"minute":case"mins":case"min":case"m":return s*x;case"seconds":case"second":case"secs":case"sec":case"s":return s*m;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(o);if("number"===i&&!1===isNaN(o))return a.long?e(l=o,b,"day")||e(l,T,"hour")||e(l,x,"minute")||e(l,m,"second")||l+" ms":(d=o)>=b?Math.round(d/b)+"d":d>=T?Math.round(d/T)+"h":d>=x?Math.round(d/x)+"m":d>=m?Math.round(d/m)+"s":d+"ms";throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(o))}},{}],305:[function(_,oe,ae){"use strict";var m=_("parenthesis");oe.exports=function(x,T,b){if(null==x)throw Error("First argument should be a string");if(null==T)throw Error("Separator should be a string or a RegExp");b?("string"==typeof b||Array.isArray(b))&&(b={ignore:b}):b={},null==b.escape&&(b.escape=!0),null==b.ignore?b.ignore=["[]","()","{}","<>",'""',"''","``","\u201c\u201d","\xab\xbb"]:("string"==typeof b.ignore&&(b.ignore=[b.ignore]),b.ignore=b.ignore.map(function(u){return 1===u.length&&(u+=u),u}));var e=m.parse(x,{flat:!0,brackets:b.ignore}),o=e[0].split(T);if(b.escape){for(var a=[],l=0;l<o.length;l++){var i=o[l];"\\"===i[i.length-1]&&"\\"!==i[i.length-2]?(a.push(i+T+o[l+1]),l++):a.push(i)}o=a}for(l=0;l<o.length;l++)e[0]=o[l],o[l]=m.stringify(e,{flat:!0});return o}},{parenthesis:248}],306:[function(_,oe,ae){"use strict";oe.exports=function(m){for(var x=m.length,T=new Array(x),b=new Array(x),e=new Array(x),o=new Array(x),a=new Array(x),l=new Array(x),i=0;i<x;++i)T[i]=-1,b[i]=0,e[i]=!1,o[i]=0,a[i]=-1,l[i]=[];var d,u=0,s=[],c=[];function h(g){var f=[g],w=[g];for(T[g]=b[g]=u,e[g]=!0,u+=1;w.length>0;){var y=m[g=w[w.length-1]];if(o[g]<y.length){for(var M=o[g];M<y.length;++M){var A=y[M];if(T[A]<0){T[A]=b[A]=u,e[A]=!0,u+=1,f.push(A),w.push(A);break}e[A]&&(b[g]=0|Math.min(b[g],b[A])),a[A]>=0&&l[g].push(a[A])}o[g]=M}else{if(b[g]===T[g]){var k=[],C=[],P=0;for(M=f.length-1;M>=0;--M){var D=f[M];if(e[D]=!1,k.push(D),C.push(l[D]),P+=l[D].length,a[D]=s.length,D===g){f.length=M;break}}s.push(k);var F=new Array(P);for(M=0;M<C.length;M++)for(var R=0;R<C[M].length;R++)F[--P]=C[M][R];c.push(F)}w.pop()}}}for(i=0;i<x;++i)T[i]<0&&h(i);for(i=0;i<c.length;i++){var p=c[i];if(0!==p.length){p.sort(function(g,f){return g-f}),d=[p[0]];for(var v=1;v<p.length;v++)p[v]!==p[v-1]&&d.push(p[v]);c[i]=d}}return{components:s,adjacencyList:c}}},{}],307:[function(_,oe,ae){"use strict";Object.defineProperty(ae,"__esModule",{value:!0});var x=2*Math.PI,T=function(o,a,l,i,d,u,s){var c=o.x,h=o.y;return{x:i*(c*=a)-d*(h*=l)+u,y:d*c+i*h+s}},b=function(o,a){var l=1.5707963267948966===a?.551915024494:-1.5707963267948966===a?-.551915024494:4/3*Math.tan(a/4),i=Math.cos(o),d=Math.sin(o),u=Math.cos(o+a),s=Math.sin(o+a);return[{x:i-d*l,y:d+i*l},{x:u+s*l,y:s-u*l},{x:u,y:s}]},e=function(o,a,l,i){var d=o*l+a*i;return d>1&&(d=1),d<-1&&(d=-1),(o*i-a*l<0?-1:1)*Math.acos(d)};ae.default=function(o){var a=o.px,l=o.py,i=o.cx,d=o.cy,u=o.rx,s=o.ry,c=o.xAxisRotation,h=void 0===c?0:c,p=o.largeArcFlag,v=void 0===p?0:p,g=o.sweepFlag,f=void 0===g?0:g,w=[];if(0===u||0===s)return[];var y=Math.sin(h*x/360),M=Math.cos(h*x/360),A=M*(a-i)/2+y*(l-d)/2,k=-y*(a-i)/2+M*(l-d)/2;if(0===A&&0===k)return[];u=Math.abs(u),s=Math.abs(s);var C=Math.pow(A,2)/Math.pow(u,2)+Math.pow(k,2)/Math.pow(s,2);C>1&&(u*=Math.sqrt(C),s*=Math.sqrt(C));var D=function(o,a){if(Array.isArray(o))return o;if(Symbol.iterator in Object(o))return function(l,i){var d=[],u=!0,s=!1,c=void 0;try{for(var h,p=l[Symbol.iterator]();!(u=(h=p.next()).done)&&(d.push(h.value),!i||d.length!==i);u=!0);}catch(v){s=!0,c=v}finally{try{!u&&p.return&&p.return()}finally{if(s)throw c}}return d}(o,a);throw new TypeError("Invalid attempt to destructure non-iterable instance")}(function(Y,ee,J,$,Q,se,j,G,W,ie,q,te){var ne=Math.pow(Q,2),le=Math.pow(se,2),ue=Math.pow(q,2),de=Math.pow(te,2),he=ne*le-ne*de-le*ue;he<0&&(he=0),he/=ne*de+le*ue;var be=(he=Math.sqrt(he)*(j===G?-1:1))*Q/se*te,ge=he*-se/Q*q,we=ie*be-W*ge+(Y+J)/2,Ce=W*be+ie*ge+(ee+$)/2,De=(q-be)/Q,Se=(te-ge)/se,Fe=(-q-be)/Q,ve=(-te-ge)/se,Te=e(1,0,De,Se),Le=e(De,Se,Fe,ve);return 0===G&&Le>0&&(Le-=x),1===G&&Le<0&&(Le+=x),[we,Ce,Te,Le]}(a,l,i,d,u,s,v,f,y,M,A,k),4),F=D[0],R=D[1],L=D[2],I=D[3],B=Math.abs(I)/(x/4);Math.abs(1-B)<1e-7&&(B=1);var V=Math.max(Math.ceil(B),1);I/=V;for(var Z=0;Z<V;Z++)w.push(b(L,I)),L+=I;return w.map(function(Y){var ee=T(Y[0],u,s,M,y,F,R),J=ee.x,$=ee.y,Q=T(Y[1],u,s,M,y,F,R),se=Q.x,j=Q.y,G=T(Y[2],u,s,M,y,F,R);return{x1:J,y1:$,x2:se,y2:j,x:G.x,y:G.y}})},oe.exports=ae.default},{}],308:[function(_,oe,ae){"use strict";var m=_("parse-svg-path"),x=_("abs-svg-path"),T=_("normalize-svg-path"),b=_("is-svg-path"),e=_("assert");oe.exports=function(o){if(Array.isArray(o)&&1===o.length&&"string"==typeof o[0]&&(o=o[0]),"string"==typeof o&&(e(b(o),"String is not an SVG path."),o=m(o)),e(Array.isArray(o),"Argument should be a string or an array of path segments."),o=x(o),!(o=T(o)).length)return[0,0,0,0];for(var a=[1/0,1/0,-1/0,-1/0],l=0,i=o.length;l<i;l++)for(var d=o[l].slice(1),u=0;u<d.length;u+=2)d[u+0]<a[0]&&(a[0]=d[u+0]),d[u+1]<a[1]&&(a[1]=d[u+1]),d[u+0]>a[2]&&(a[2]=d[u+0]),d[u+1]>a[3]&&(a[3]=d[u+1]);return a}},{"abs-svg-path":70,assert:75,"is-svg-path":238,"normalize-svg-path":309,"parse-svg-path":250}],309:[function(_,oe,ae){"use strict";oe.exports=function(b){for(var e,o=[],a=0,l=0,i=0,d=0,u=null,s=null,c=0,h=0,p=0,v=b.length;p<v;p++){var g=b[p],f=g[0];switch(f){case"M":i=g[1],d=g[2];break;case"A":var w=m({px:c,py:h,cx:g[6],cy:g[7],rx:g[1],ry:g[2],xAxisRotation:g[3],largeArcFlag:g[4],sweepFlag:g[5]});if(!w.length)continue;for(var y,M=0;M<w.length;M++)g=["C",(y=w[M]).x1,y.y1,y.x2,y.y2,y.x,y.y],M<w.length-1&&o.push(g);break;case"S":var A=c,k=h;"C"!=e&&"S"!=e||(A+=A-a,k+=k-l),g=["C",A,k,g[1],g[2],g[3],g[4]];break;case"T":"Q"==e||"T"==e?(u=2*c-u,s=2*h-s):(u=c,s=h),g=T(c,h,u,s,g[1],g[2]);break;case"Q":u=g[1],s=g[2],g=T(c,h,g[1],g[2],g[3],g[4]);break;case"L":g=x(c,h,g[1],g[2]);break;case"H":g=x(c,h,g[1],h);break;case"V":g=x(c,h,c,g[1]);break;case"Z":g=x(c,h,i,d)}e=f,c=g[g.length-2],h=g[g.length-1],g.length>4?(a=g[g.length-4],l=g[g.length-3]):(a=c,l=h),o.push(g)}return o};var m=_("svg-arc-to-cubic-bezier");function x(b,e,o,a){return["C",b,e,o,a,o,a]}function T(b,e,o,a,l,i){return["C",b/3+2/3*o,e/3+2/3*a,l/3+2/3*o,i/3+2/3*a,l,i]}},{"svg-arc-to-cubic-bezier":307}],310:[function(_,oe,ae){"use strict";var m,x=_("svg-path-bounds"),T=_("parse-svg-path"),b=_("draw-svg-path"),e=_("is-svg-path"),o=_("bitmap-sdf"),a=document.createElement("canvas"),l=a.getContext("2d");oe.exports=function(i,d){if(!e(i))throw Error("Argument should be valid svg path string");var u,s;d||(d={}),d.shape?(u=d.shape[0],s=d.shape[1]):(u=a.width=d.w||d.width||200,s=a.height=d.h||d.height||200);var c=Math.min(u,s),h=d.stroke||0,p=d.viewbox||d.viewBox||x(i),v=[u/(p[2]-p[0]),s/(p[3]-p[1])],g=Math.min(v[0]||0,v[1]||0)/2;if(l.fillStyle="black",l.fillRect(0,0,u,s),l.fillStyle="white",h&&("number"!=typeof h&&(h=1),l.strokeStyle=h>0?"white":"black",l.lineWidth=Math.abs(h)),l.translate(.5*u,.5*s),l.scale(g,g),function(){if(null!=m)return m;var y=document.createElement("canvas").getContext("2d");if(y.canvas.width=y.canvas.height=1,!window.Path2D)return m=!1;var M=new Path2D("M0,0h1v1h-1v-1Z");y.fillStyle="black",y.fill(M);var A=y.getImageData(0,0,1,1);return m=A&&A.data&&255===A.data[3]}()){var f=new Path2D(i);l.fill(f),h&&l.stroke(f)}else{var w=T(i);b(l,w),l.fill(),h&&l.stroke()}return l.setTransform(1,0,0,1,0,0),o(l,{cutoff:null!=d.cutoff?d.cutoff:.5,radius:null!=d.radius?d.radius:.5*c})}},{"bitmap-sdf":82,"draw-svg-path":126,"is-svg-path":238,"parse-svg-path":250,"svg-path-bounds":308}],311:[function(_,oe,ae){(function(m,x){(function(){var T=_("process/browser.js").nextTick,b=Function.prototype.apply,e=Array.prototype.slice,o={},a=0;function l(i,d){this._id=i,this._clearFn=d}ae.setTimeout=function(){return new l(b.call(setTimeout,window,arguments),clearTimeout)},ae.setInterval=function(){return new l(b.call(setInterval,window,arguments),clearInterval)},ae.clearTimeout=ae.clearInterval=function(i){i.close()},l.prototype.unref=l.prototype.ref=function(){},l.prototype.close=function(){this._clearFn.call(window,this._id)},ae.enroll=function(i,d){clearTimeout(i._idleTimeoutId),i._idleTimeout=d},ae.unenroll=function(i){clearTimeout(i._idleTimeoutId),i._idleTimeout=-1},ae._unrefActive=ae.active=function(i){clearTimeout(i._idleTimeoutId);var d=i._idleTimeout;d>=0&&(i._idleTimeoutId=setTimeout(function(){i._onTimeout&&i._onTimeout()},d))},ae.setImmediate="function"==typeof m?m:function(i){var d=a++,u=!(arguments.length<2)&&e.call(arguments,1);return o[d]=!0,T(function(){o[d]&&(u?i.apply(null,u):i.call(null),ae.clearImmediate(d))}),d},ae.clearImmediate="function"==typeof x?x:function(i){delete o[i]}}).call(this)}).call(this,_("timers").setImmediate,_("timers").clearImmediate)},{"process/browser.js":277,timers:311}],312:[function(_,oe,ae){!function(m){var x=/^\s+/,T=/\s+$/,b=0,e=m.round,o=m.min,a=m.max,l=m.random;function i(W,ie){if(ie=ie||{},(W=W||"")instanceof i)return W;if(!(this instanceof i))return new i(W,ie);var te,Ce,De,ne,le,ue,de,he,be,ge,q=(ne={r:0,g:0,b:0},le=1,ue=null,de=null,he=null,be=!1,ge=!1,"string"==typeof(te=W)&&(te=function(Se){Se=Se.replace(x,"").replace(T,"").toLowerCase();var Fe,ve=!1;if(F[Se])Se=F[Se],ve=!0;else if("transparent"==Se)return{r:0,g:0,b:0,a:0,format:"name"};return(Fe=j.rgb.exec(Se))?{r:Fe[1],g:Fe[2],b:Fe[3]}:(Fe=j.rgba.exec(Se))?{r:Fe[1],g:Fe[2],b:Fe[3],a:Fe[4]}:(Fe=j.hsl.exec(Se))?{h:Fe[1],s:Fe[2],l:Fe[3]}:(Fe=j.hsla.exec(Se))?{h:Fe[1],s:Fe[2],l:Fe[3],a:Fe[4]}:(Fe=j.hsv.exec(Se))?{h:Fe[1],s:Fe[2],v:Fe[3]}:(Fe=j.hsva.exec(Se))?{h:Fe[1],s:Fe[2],v:Fe[3],a:Fe[4]}:(Fe=j.hex8.exec(Se))?{r:V(Fe[1]),g:V(Fe[2]),b:V(Fe[3]),a:J(Fe[4]),format:ve?"name":"hex8"}:(Fe=j.hex6.exec(Se))?{r:V(Fe[1]),g:V(Fe[2]),b:V(Fe[3]),format:ve?"name":"hex"}:(Fe=j.hex4.exec(Se))?{r:V(Fe[1]+""+Fe[1]),g:V(Fe[2]+""+Fe[2]),b:V(Fe[3]+""+Fe[3]),a:J(Fe[4]+""+Fe[4]),format:ve?"name":"hex8"}:!!(Fe=j.hex3.exec(Se))&&{r:V(Fe[1]+""+Fe[1]),g:V(Fe[2]+""+Fe[2]),b:V(Fe[3]+""+Fe[3]),format:ve?"name":"hex"}}(te)),"object"==typeof te&&(G(te.r)&&G(te.g)&&G(te.b)?(Ce=te.g,De=te.b,ne={r:255*I(te.r,255),g:255*I(Ce,255),b:255*I(De,255)},be=!0,ge="%"===String(te.r).substr(-1)?"prgb":"rgb"):G(te.h)&&G(te.s)&&G(te.v)?(ue=Y(te.s),de=Y(te.v),ne=function(Se,Fe,ve){Se=6*I(Se,360),Fe=I(Fe,100),ve=I(ve,100);var Te=m.floor(Se),Le=Se-Te,Ee=ve*(1-Fe),Pe=ve*(1-Le*Fe),je=ve*(1-(1-Le)*Fe),Ge=Te%6;return{r:255*[ve,Pe,Ee,Ee,je,ve][Ge],g:255*[je,ve,ve,Pe,Ee,Ee][Ge],b:255*[Ee,Ee,je,ve,ve,Pe][Ge]}}(te.h,ue,de),be=!0,ge="hsv"):G(te.h)&&G(te.s)&&G(te.l)&&(ue=Y(te.s),he=Y(te.l),ne=function(Se,Fe,ve){var Te,Le,Ee;function Pe(Ke,lt,Ue){return Ue<0&&(Ue+=1),Ue>1&&(Ue-=1),Ue<1/6?Ke+6*(lt-Ke)*Ue:Ue<.5?lt:Ue<2/3?Ke+(lt-Ke)*(2/3-Ue)*6:Ke}if(Se=I(Se,360),Fe=I(Fe,100),ve=I(ve,100),0===Fe)Te=Le=Ee=ve;else{var je=ve<.5?ve*(1+Fe):ve+Fe-ve*Fe,Ge=2*ve-je;Te=Pe(Ge,je,Se+1/3),Le=Pe(Ge,je,Se),Ee=Pe(Ge,je,Se-1/3)}return{r:255*Te,g:255*Le,b:255*Ee}}(te.h,ue,he),be=!0,ge="hsl"),te.hasOwnProperty("a")&&(le=te.a)),le=L(le),{ok:be,format:te.format||ge,r:o(255,a(ne.r,0)),g:o(255,a(ne.g,0)),b:o(255,a(ne.b,0)),a:le});this._originalInput=W,this._r=q.r,this._g=q.g,this._b=q.b,this._a=q.a,this._roundA=e(100*this._a)/100,this._format=ie.format||q.format,this._gradientType=ie.gradientType,this._r<1&&(this._r=e(this._r)),this._g<1&&(this._g=e(this._g)),this._b<1&&(this._b=e(this._b)),this._ok=q.ok,this._tc_id=b++}function d(W,ie,q){W=I(W,255),ie=I(ie,255),q=I(q,255);var te,ne,le=a(W,ie,q),ue=o(W,ie,q),de=(le+ue)/2;if(le==ue)te=ne=0;else{var he=le-ue;switch(ne=de>.5?he/(2-le-ue):he/(le+ue),le){case W:te=(ie-q)/he+(ie<q?6:0);break;case ie:te=(q-W)/he+2;break;case q:te=(W-ie)/he+4}te/=6}return{h:te,s:ne,l:de}}function u(W,ie,q){W=I(W,255),ie=I(ie,255),q=I(q,255);var te,ne,le=a(W,ie,q),ue=o(W,ie,q),de=le,he=le-ue;if(ne=0===le?0:he/le,le==ue)te=0;else{switch(le){case W:te=(ie-q)/he+(ie<q?6:0);break;case ie:te=(q-W)/he+2;break;case q:te=(W-ie)/he+4}te/=6}return{h:te,s:ne,v:de}}function s(W,ie,q,te){var ne=[Z(e(W).toString(16)),Z(e(ie).toString(16)),Z(e(q).toString(16))];return te&&ne[0].charAt(0)==ne[0].charAt(1)&&ne[1].charAt(0)==ne[1].charAt(1)&&ne[2].charAt(0)==ne[2].charAt(1)?ne[0].charAt(0)+ne[1].charAt(0)+ne[2].charAt(0):ne.join("")}function c(W,ie,q,te){return[Z(ee(te)),Z(e(W).toString(16)),Z(e(ie).toString(16)),Z(e(q).toString(16))].join("")}function h(W,ie){ie=0===ie?0:ie||10;var q=i(W).toHsl();return q.s-=ie/100,q.s=B(q.s),i(q)}function p(W,ie){ie=0===ie?0:ie||10;var q=i(W).toHsl();return q.s+=ie/100,q.s=B(q.s),i(q)}function v(W){return i(W).desaturate(100)}function g(W,ie){ie=0===ie?0:ie||10;var q=i(W).toHsl();return q.l+=ie/100,q.l=B(q.l),i(q)}function f(W,ie){ie=0===ie?0:ie||10;var q=i(W).toRgb();return q.r=a(0,o(255,q.r-e(-ie/100*255))),q.g=a(0,o(255,q.g-e(-ie/100*255))),q.b=a(0,o(255,q.b-e(-ie/100*255))),i(q)}function w(W,ie){ie=0===ie?0:ie||10;var q=i(W).toHsl();return q.l-=ie/100,q.l=B(q.l),i(q)}function y(W,ie){var q=i(W).toHsl(),te=(q.h+ie)%360;return q.h=te<0?360+te:te,i(q)}function M(W){var ie=i(W).toHsl();return ie.h=(ie.h+180)%360,i(ie)}function A(W){var ie=i(W).toHsl(),q=ie.h;return[i(W),i({h:(q+120)%360,s:ie.s,l:ie.l}),i({h:(q+240)%360,s:ie.s,l:ie.l})]}function k(W){var ie=i(W).toHsl(),q=ie.h;return[i(W),i({h:(q+90)%360,s:ie.s,l:ie.l}),i({h:(q+180)%360,s:ie.s,l:ie.l}),i({h:(q+270)%360,s:ie.s,l:ie.l})]}function C(W){var ie=i(W).toHsl(),q=ie.h;return[i(W),i({h:(q+72)%360,s:ie.s,l:ie.l}),i({h:(q+216)%360,s:ie.s,l:ie.l})]}function P(W,ie,q){ie=ie||6,q=q||30;var te=i(W).toHsl(),ne=360/q,le=[i(W)];for(te.h=(te.h-(ne*ie>>1)+720)%360;--ie;)te.h=(te.h+ne)%360,le.push(i(te));return le}function D(W,ie){ie=ie||6;for(var q=i(W).toHsv(),te=q.h,ne=q.s,le=q.v,ue=[],de=1/ie;ie--;)ue.push(i({h:te,s:ne,v:le})),le=(le+de)%1;return ue}i.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var W=this.toRgb();return(299*W.r+587*W.g+114*W.b)/1e3},getLuminance:function(){var W,ie,q,te=this.toRgb();return ie=te.g/255,q=te.b/255,.2126*((W=te.r/255)<=.03928?W/12.92:m.pow((W+.055)/1.055,2.4))+.7152*(ie<=.03928?ie/12.92:m.pow((ie+.055)/1.055,2.4))+.0722*(q<=.03928?q/12.92:m.pow((q+.055)/1.055,2.4))},setAlpha:function(W){return this._a=L(W),this._roundA=e(100*this._a)/100,this},toHsv:function(){var W=u(this._r,this._g,this._b);return{h:360*W.h,s:W.s,v:W.v,a:this._a}},toHsvString:function(){var W=u(this._r,this._g,this._b),ie=e(360*W.h),q=e(100*W.s),te=e(100*W.v);return 1==this._a?"hsv("+ie+", "+q+"%, "+te+"%)":"hsva("+ie+", "+q+"%, "+te+"%, "+this._roundA+")"},toHsl:function(){var W=d(this._r,this._g,this._b);return{h:360*W.h,s:W.s,l:W.l,a:this._a}},toHslString:function(){var W=d(this._r,this._g,this._b),ie=e(360*W.h),q=e(100*W.s),te=e(100*W.l);return 1==this._a?"hsl("+ie+", "+q+"%, "+te+"%)":"hsla("+ie+", "+q+"%, "+te+"%, "+this._roundA+")"},toHex:function(W){return s(this._r,this._g,this._b,W)},toHexString:function(W){return"#"+this.toHex(W)},toHex8:function(W){return q=this._g,te=this._b,ne=this._a,le=W,ue=[Z(e(this._r).toString(16)),Z(e(q).toString(16)),Z(e(te).toString(16)),Z(ee(ne))],le&&ue[0].charAt(0)==ue[0].charAt(1)&&ue[1].charAt(0)==ue[1].charAt(1)&&ue[2].charAt(0)==ue[2].charAt(1)&&ue[3].charAt(0)==ue[3].charAt(1)?ue[0].charAt(0)+ue[1].charAt(0)+ue[2].charAt(0)+ue[3].charAt(0):ue.join("");var q,te,ne,le,ue},toHex8String:function(W){return"#"+this.toHex8(W)},toRgb:function(){return{r:e(this._r),g:e(this._g),b:e(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+e(this._r)+", "+e(this._g)+", "+e(this._b)+")":"rgba("+e(this._r)+", "+e(this._g)+", "+e(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:e(100*I(this._r,255))+"%",g:e(100*I(this._g,255))+"%",b:e(100*I(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+e(100*I(this._r,255))+"%, "+e(100*I(this._g,255))+"%, "+e(100*I(this._b,255))+"%)":"rgba("+e(100*I(this._r,255))+"%, "+e(100*I(this._g,255))+"%, "+e(100*I(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(R[s(this._r,this._g,this._b,!0)]||!1)},toFilter:function(W){var ie="#"+c(this._r,this._g,this._b,this._a),q=ie,te=this._gradientType?"GradientType = 1, ":"";if(W){var ne=i(W);q="#"+c(ne._r,ne._g,ne._b,ne._a)}return"progid:DXImageTransform.Microsoft.gradient("+te+"startColorstr="+ie+",endColorstr="+q+")"},toString:function(W){var ie=!!W;W=W||this._format;var q=!1;return ie||!(this._a<1&&this._a>=0)||"hex"!==W&&"hex6"!==W&&"hex3"!==W&&"hex4"!==W&&"hex8"!==W&&"name"!==W?("rgb"===W&&(q=this.toRgbString()),"prgb"===W&&(q=this.toPercentageRgbString()),"hex"!==W&&"hex6"!==W||(q=this.toHexString()),"hex3"===W&&(q=this.toHexString(!0)),"hex4"===W&&(q=this.toHex8String(!0)),"hex8"===W&&(q=this.toHex8String()),"name"===W&&(q=this.toName()),"hsl"===W&&(q=this.toHslString()),"hsv"===W&&(q=this.toHsvString()),q||this.toHexString()):"name"===W&&0===this._a?this.toName():this.toRgbString()},clone:function(){return i(this.toString())},_applyModification:function(W,ie){var q=W.apply(null,[this].concat([].slice.call(ie)));return this._r=q._r,this._g=q._g,this._b=q._b,this.setAlpha(q._a),this},lighten:function(){return this._applyModification(g,arguments)},brighten:function(){return this._applyModification(f,arguments)},darken:function(){return this._applyModification(w,arguments)},desaturate:function(){return this._applyModification(h,arguments)},saturate:function(){return this._applyModification(p,arguments)},greyscale:function(){return this._applyModification(v,arguments)},spin:function(){return this._applyModification(y,arguments)},_applyCombination:function(W,ie){return W.apply(null,[this].concat([].slice.call(ie)))},analogous:function(){return this._applyCombination(P,arguments)},complement:function(){return this._applyCombination(M,arguments)},monochromatic:function(){return this._applyCombination(D,arguments)},splitcomplement:function(){return this._applyCombination(C,arguments)},triad:function(){return this._applyCombination(A,arguments)},tetrad:function(){return this._applyCombination(k,arguments)}},i.fromRatio=function(W,ie){if("object"==typeof W){var q={};for(var te in W)W.hasOwnProperty(te)&&(q[te]="a"===te?W[te]:Y(W[te]));W=q}return i(W,ie)},i.equals=function(W,ie){return!(!W||!ie)&&i(W).toRgbString()==i(ie).toRgbString()},i.random=function(){return i.fromRatio({r:l(),g:l(),b:l()})},i.mix=function(W,ie,q){q=0===q?0:q||50;var te=i(W).toRgb(),ne=i(ie).toRgb(),le=q/100;return i({r:(ne.r-te.r)*le+te.r,g:(ne.g-te.g)*le+te.g,b:(ne.b-te.b)*le+te.b,a:(ne.a-te.a)*le+te.a})},i.readability=function(W,ie){var q=i(W),te=i(ie);return(m.max(q.getLuminance(),te.getLuminance())+.05)/(m.min(q.getLuminance(),te.getLuminance())+.05)},i.isReadable=function(W,ie,q){var te,ne,ue,de,he,le=i.readability(W,ie);switch(ne=!1,(ue=q,"AA"!==(de=((ue=ue||{level:"AA",size:"small"}).level||"AA").toUpperCase())&&"AAA"!==de&&(de="AA"),"small"!==(he=(ue.size||"small").toLowerCase())&&"large"!==he&&(he="small"),te={level:de,size:he}).level+te.size){case"AAsmall":case"AAAlarge":ne=le>=4.5;break;case"AAlarge":ne=le>=3;break;case"AAAsmall":ne=le>=7}return ne},i.mostReadable=function(W,ie,q){var te,ne,le,ue,de=null,he=0;ne=(q=q||{}).includeFallbackColors,le=q.level,ue=q.size;for(var be=0;be<ie.length;be++)(te=i.readability(W,ie[be]))>he&&(he=te,de=i(ie[be]));return i.isReadable(W,de,{level:le,size:ue})||!ne?de:(q.includeFallbackColors=!1,i.mostReadable(W,["#fff","#000"],q))};var F=i.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},R=i.hexNames=function(W){var ie={};for(var q in W)W.hasOwnProperty(q)&&(ie[W[q]]=q);return ie}(F);function L(W){return W=parseFloat(W),(isNaN(W)||W<0||W>1)&&(W=1),W}function I(W,ie){var te;"string"==typeof(te=W)&&-1!=te.indexOf(".")&&1===parseFloat(te)&&(W="100%");var q=function(te){return"string"==typeof te&&-1!=te.indexOf("%")}(W);return W=o(ie,a(0,parseFloat(W))),q&&(W=parseInt(W*ie,10)/100),m.abs(W-ie)<1e-6?1:W%ie/parseFloat(ie)}function B(W){return o(1,a(0,W))}function V(W){return parseInt(W,16)}function Z(W){return 1==W.length?"0"+W:""+W}function Y(W){return W<=1&&(W=100*W+"%"),W}function ee(W){return m.round(255*parseFloat(W)).toString(16)}function J(W){return V(W)/255}var $,Q,se,j=(Q="[\\s|\\(]+("+($="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)")+")[,|\\s]+("+$+")[,|\\s]+("+$+")\\s*\\)?",se="[\\s|\\(]+("+$+")[,|\\s]+("+$+")[,|\\s]+("+$+")[,|\\s]+("+$+")\\s*\\)?",{CSS_UNIT:new RegExp($),rgb:new RegExp("rgb"+Q),rgba:new RegExp("rgba"+se),hsl:new RegExp("hsl"+Q),hsla:new RegExp("hsla"+se),hsv:new RegExp("hsv"+Q),hsva:new RegExp("hsva"+se),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/});function G(W){return!!j.CSS_UNIT.exec(W)}void 0!==oe&&oe.exports?oe.exports=i:window.tinycolor=i}(Math)},{}],313:[function(_,oe,ae){"use strict";oe.exports=x,oe.exports.float32=oe.exports.float=x,oe.exports.fract32=oe.exports.fract=function(T,b){if(T.length){if(T instanceof Float32Array)return new Float32Array(T.length);b instanceof Float32Array||(b=x(T));for(var e=0,o=b.length;e<o;e++)b[e]=T[e]-b[e];return b}return x(T-x(T))};var m=new Float32Array(1);function x(T){return T.length?T instanceof Float32Array?T:new Float32Array(T):(m[0]=T,m[0])}},{}],314:[function(_,oe,ae){"use strict";var m=_("parse-unit");function x(b,e){var o=m(getComputedStyle(b).getPropertyValue(e));return o[0]*T(o[1],b)}function T(b,e){switch(e=e||document.body,b=(b||"px").trim().toLowerCase(),e!==window&&e!==document||(e=document.body),b){case"%":return e.clientHeight/100;case"ch":case"ex":return function(o,a){var l=document.createElement("div");l.style["font-size"]="128"+o,a.appendChild(l);var i=x(l,"font-size")/128;return a.removeChild(l),i}(b,e);case"em":return x(e,"font-size");case"rem":return x(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}oe.exports=T},{"parse-unit":251}],315:[function(_,oe,ae){var m,x;m=this,x=function(m){"use strict";function x(c){return c}function T(c){if(null==c)return x;var h,p,v=c.scale[0],g=c.scale[1],f=c.translate[0],w=c.translate[1];return function(y,M){M||(h=p=0);var A=2,k=y.length,C=new Array(k);for(C[0]=(h+=y[0])*v+f,C[1]=(p+=y[1])*g+w;A<k;)C[A]=y[A],++A;return C}}function b(c){var h,p=T(c.transform),v=1/0,g=v,f=-v,w=-v;function y(A){(A=p(A))[0]<v&&(v=A[0]),A[0]>f&&(f=A[0]),A[1]<g&&(g=A[1]),A[1]>w&&(w=A[1])}function M(A){switch(A.type){case"GeometryCollection":A.geometries.forEach(M);break;case"Point":y(A.coordinates);break;case"MultiPoint":A.coordinates.forEach(y)}}for(h in c.arcs.forEach(function(A){for(var k,C=-1,P=A.length;++C<P;)(k=p(A[C],C))[0]<v&&(v=k[0]),k[0]>f&&(f=k[0]),k[1]<g&&(g=k[1]),k[1]>w&&(w=k[1])}),c.objects)M(c.objects[h]);return[v,g,f,w]}function e(c,h){var p=h.id,v=h.bbox,g=null==h.properties?{}:h.properties,f=o(c,h);return null==p&&null==v?{type:"Feature",properties:g,geometry:f}:null==v?{type:"Feature",id:p,properties:g,geometry:f}:{type:"Feature",id:p,bbox:v,properties:g,geometry:f}}function o(c,h){var p=T(c.transform),v=c.arcs;function g(A,k){k.length&&k.pop();for(var C=v[A<0?~A:A],P=0,D=C.length;P<D;++P)k.push(p(C[P],P));A<0&&function(F,R){for(var L,I=F.length,B=I-R;B<--I;)L=F[B],F[B++]=F[I],F[I]=L}(k,D)}function f(A){return p(A)}function w(A){for(var k=[],C=0,P=A.length;C<P;++C)g(A[C],k);return k.length<2&&k.push(k[0]),k}function y(A){for(var k=w(A);k.length<4;)k.push(k[0]);return k}function M(A){return A.map(y)}return function A(k){var C,P=k.type;switch(P){case"GeometryCollection":return{type:P,geometries:k.geometries.map(A)};case"Point":C=f(k.coordinates);break;case"MultiPoint":C=k.coordinates.map(f);break;case"LineString":C=w(k.arcs);break;case"MultiLineString":C=k.arcs.map(w);break;case"Polygon":C=M(k.arcs);break;case"MultiPolygon":C=k.arcs.map(M);break;default:return null}return{type:P,coordinates:C}}(h)}function a(c,h){var p={},v={},g={},f=[],w=-1;function y(M,A){for(var k in M){var C=M[k];delete A[C.start],delete C.start,delete C.end,C.forEach(function(P){p[P<0?~P:P]=1}),f.push(C)}}return h.forEach(function(M,A){var k,C=c.arcs[M<0?~M:M];C.length<3&&!C[1][0]&&!C[1][1]&&(k=h[++w],h[w]=M,h[A]=k)}),h.forEach(function(M){var A,k,L,I,B,V,C=(V=(B=c.arcs[(L=M)<0?~L:L])[0],c.transform?(I=[0,0],B.forEach(function(Z){I[0]+=Z[0],I[1]+=Z[1]})):I=B[B.length-1],L<0?[I,V]:[V,I]),P=C[0],D=C[1];if(A=g[P])if(delete g[A.end],A.push(M),A.end=D,k=v[D]){delete v[k.start];var F=k===A?A:A.concat(k);v[F.start=A.start]=g[F.end=k.end]=F}else v[A.start]=g[A.end]=A;else if(A=v[D])if(delete v[A.start],A.unshift(M),A.start=P,k=g[P]){delete g[k.end];var R=k===A?A:k.concat(A);v[R.start=k.start]=g[R.end=A.end]=R}else v[A.start]=g[A.end]=A;else v[(A=[M]).start=P]=g[A.end=D]=A}),y(g,v),y(v,g),h.forEach(function(M){p[M<0?~M:M]||f.push([M])}),f}function l(c,h,p){var v,g,f;if(arguments.length>1)v=i(0,h,p);else for(g=0,v=new Array(f=c.arcs.length);g<f;++g)v[g]=g;return{type:"MultiLineString",arcs:a(c,v)}}function i(c,h,p){var v,g=[],f=[];function w(A){var k=A<0?~A:A;(f[k]||(f[k]=[])).push({i:A,g:v})}function y(A){A.forEach(w)}function M(A){A.forEach(y)}return function A(k){switch(v=k,k.type){case"GeometryCollection":k.geometries.forEach(A);break;case"LineString":y(k.arcs);break;case"MultiLineString":case"Polygon":M(k.arcs);break;case"MultiPolygon":k.arcs.forEach(M)}}(h),f.forEach(null==p?function(A){g.push(A[0].i)}:function(A){p(A[0].g,A[A.length-1].g)&&g.push(A[0].i)}),g}function d(c,h){var p={},v=[],g=[];function f(y){y.forEach(function(M){M.forEach(function(A){(p[A=A<0?~A:A]||(p[A]=[])).push(y)})}),v.push(y)}function w(y){return function(M){for(var A,k=-1,C=M.length,P=M[C-1],D=0;++k<C;)D+=(A=P)[0]*(P=M[k])[1]-A[1]*P[0];return Math.abs(D)}(o(c,{type:"Polygon",arcs:[y]}).coordinates[0])}return h.forEach(function y(M){switch(M.type){case"GeometryCollection":M.geometries.forEach(y);break;case"Polygon":f(M.arcs);break;case"MultiPolygon":M.arcs.forEach(f)}}),v.forEach(function(y){if(!y._){var M=[],A=[y];for(y._=1,g.push(M);y=A.pop();)M.push(y),y.forEach(function(k){k.forEach(function(C){p[C<0?~C:C].forEach(function(P){P._||(P._=1,A.push(P))})})})}}),v.forEach(function(y){delete y._}),{type:"MultiPolygon",arcs:g.map(function(y){var M,A=[];if(y.forEach(function(F){F.forEach(function(R){R.forEach(function(L){p[L<0?~L:L].length<2&&A.push(L)})})}),(M=(A=a(c,A)).length)>1)for(var k,C,P=1,D=w(A[0]);P<M;++P)(k=w(A[P]))>D&&(C=A[0],A[0]=A[P],A[P]=C,D=k);return A}).filter(function(y){return y.length>0})}}function u(c,h){for(var p=0,v=c.length;p<v;){var g=p+v>>>1;c[g]<h?p=g+1:v=g}return p}function s(c){if(null==c)return x;var h,p,v=c.scale[0],g=c.scale[1],f=c.translate[0],w=c.translate[1];return function(y,M){M||(h=p=0);var A=2,k=y.length,C=new Array(k),P=Math.round((y[0]-f)/v),D=Math.round((y[1]-w)/g);for(C[0]=P-h,h=P,C[1]=D-p,p=D;A<k;)C[A]=y[A],++A;return C}}m.bbox=b,m.feature=function(c,h){return"string"==typeof h&&(h=c.objects[h]),"GeometryCollection"===h.type?{type:"FeatureCollection",features:h.geometries.map(function(p){return e(c,p)})}:e(c,h)},m.merge=function(c){return o(c,d.apply(this,arguments))},m.mergeArcs=d,m.mesh=function(c){return o(c,l.apply(this,arguments))},m.meshArcs=l,m.neighbors=function(c){var h={},p=c.map(function(){return[]});function v(F,R){F.forEach(function(L){L<0&&(L=~L);var I=h[L];I?I.push(R):h[L]=[R]})}function g(F,R){F.forEach(function(L){v(L,R)})}var f={LineString:v,MultiLineString:g,Polygon:g,MultiPolygon:function(F,R){F.forEach(function(L){g(L,R)})}};for(var w in c.forEach(function F(R,L){"GeometryCollection"===R.type?R.geometries.forEach(function(I){F(I,L)}):R.type in f&&f[R.type](R.arcs,L)}),h)for(var y=h[w],M=y.length,A=0;A<M;++A)for(var k=A+1;k<M;++k){var C,P=y[A],D=y[k];(C=p[P])[w=u(C,D)]!==D&&C.splice(w,0,D),(C=p[D])[w=u(C,P)]!==P&&C.splice(w,0,P)}return p},m.quantize=function(c,h){if(c.transform)throw new Error("already quantized");if(h&&h.scale)y=c.bbox;else{if(!((p=Math.floor(h))>=2))throw new Error("n must be \u22652");var p,v=(y=c.bbox||b(c))[0],g=y[1],f=y[2],w=y[3];h={scale:[f-v?(f-v)/(p-1):1,w-g?(w-g)/(p-1):1],translate:[v,g]}}var y,M,A=s(h),k=c.objects,C={};function P(F){return A(F)}function D(F){var R;switch(F.type){case"GeometryCollection":R={type:"GeometryCollection",geometries:F.geometries.map(D)};break;case"Point":R={type:"Point",coordinates:P(F.coordinates)};break;case"MultiPoint":R={type:"MultiPoint",coordinates:F.coordinates.map(P)};break;default:return F}return null!=F.id&&(R.id=F.id),null!=F.bbox&&(R.bbox=F.bbox),null!=F.properties&&(R.properties=F.properties),R}for(M in k)C[M]=D(k[M]);return{type:"Topology",bbox:y,transform:h,objects:C,arcs:c.arcs.map(function(F){var R,L=0,I=1,B=F.length,V=new Array(B);for(V[0]=A(F[0],0);++L<B;)((R=A(F[L],L))[0]||R[1])&&(V[I++]=R);return 1===I&&(V[I++]=[0,0]),V.length=I,V})}},m.transform=T,m.untransform=s,Object.defineProperty(m,"__esModule",{value:!0})},x("object"==typeof ae&&void 0!==oe?ae:(m=m||self).topojson=m.topojson||{})},{}],316:[function(_,oe,ae){"use strict";var m=_("../prototype/is");oe.exports=function(x){if("function"!=typeof x||!hasOwnProperty.call(x,"length"))return!1;try{if("number"!=typeof x.length||"function"!=typeof x.call||"function"!=typeof x.apply)return!1}catch(T){return!1}return!m(x)}},{"../prototype/is":323}],317:[function(_,oe,ae){"use strict";var m=_("../value/is"),x=_("../object/is"),T=_("../string/coerce"),b=_("./to-short-string"),e=function(o,a){return o.replace("%v",b(a))};oe.exports=function(o,a,l){if(!x(l))throw new TypeError(e(a,o));if(!m(o)){if("default"in l)return l.default;if(l.isOptional)return null}var i=T(l.errorMessage);throw m(i)||(i=a),new TypeError(e(i,o))}},{"../object/is":320,"../string/coerce":324,"../value/is":326,"./to-short-string":319}],318:[function(_,oe,ae){"use strict";oe.exports=function(m){try{return m.toString()}catch(x){try{return String(m)}catch(T){return null}}}},{}],319:[function(_,oe,ae){"use strict";var m=_("./safe-to-string"),x=/[\n\r\u2028\u2029]/g;oe.exports=function(T){var b=m(T);return null===b?"<Non-coercible to string value>":(b.length>100&&(b=b.slice(0,99)+"\u2026"),b=b.replace(x,function(e){switch(e){case"\n":return"\\n";case"\r":return"\\r";case"\u2028":return"\\u2028";case"\u2029":return"\\u2029";default:throw new Error("Unexpected character")}}))}},{"./safe-to-string":318}],320:[function(_,oe,ae){"use strict";var m=_("../value/is"),x={object:!0,function:!0,undefined:!0};oe.exports=function(T){return!!m(T)&&hasOwnProperty.call(x,typeof T)}},{"../value/is":326}],321:[function(_,oe,ae){"use strict";var m=_("../lib/resolve-exception"),x=_("./is");oe.exports=function(T){return x(T)?T:m(T,"%v is not a plain function",arguments[1])}},{"../lib/resolve-exception":317,"./is":322}],322:[function(_,oe,ae){"use strict";var m=_("../function/is"),x=/^\s*class[\s{/}]/,T=Function.prototype.toString;oe.exports=function(b){return!!m(b)&&!x.test(T.call(b))}},{"../function/is":316}],323:[function(_,oe,ae){"use strict";var m=_("../object/is");oe.exports=function(x){if(!m(x))return!1;try{return!!x.constructor&&x.constructor.prototype===x}catch(T){return!1}}},{"../object/is":320}],324:[function(_,oe,ae){"use strict";var m=_("../value/is"),x=_("../object/is"),T=Object.prototype.toString;oe.exports=function(b){if(!m(b))return null;if(x(b)){var e=b.toString;if("function"!=typeof e||e===T)return null}try{return""+b}catch(o){return null}}},{"../object/is":320,"../value/is":326}],325:[function(_,oe,ae){"use strict";var m=_("../lib/resolve-exception"),x=_("./is");oe.exports=function(T){return x(T)?T:m(T,"Cannot use %v",arguments[1])}},{"../lib/resolve-exception":317,"./is":326}],326:[function(_,oe,ae){"use strict";oe.exports=function(m){return null!=m}},{}],327:[function(_,oe,ae){(function(m){(function(){"use strict";var x=_("bit-twiddle"),T=_("dup"),b=_("buffer").Buffer;m.__TYPEDARRAY_POOL||(m.__TYPEDARRAY_POOL={UINT8:T([32,0]),UINT16:T([32,0]),UINT32:T([32,0]),BIGUINT64:T([32,0]),INT8:T([32,0]),INT16:T([32,0]),INT32:T([32,0]),BIGINT64:T([32,0]),FLOAT:T([32,0]),DOUBLE:T([32,0]),DATA:T([32,0]),UINT8C:T([32,0]),BUFFER:T([32,0])});var e="undefined"!=typeof Uint8ClampedArray,o="undefined"!=typeof BigUint64Array,a="undefined"!=typeof BigInt64Array,l=m.__TYPEDARRAY_POOL;l.UINT8C||(l.UINT8C=T([32,0])),l.BIGUINT64||(l.BIGUINT64=T([32,0])),l.BIGINT64||(l.BIGINT64=T([32,0])),l.BUFFER||(l.BUFFER=T([32,0]));var i=l.DATA,d=l.BUFFER;function u(D){if(D){var R=x.log2(D.length||D.byteLength);i[R].push(D)}}function s(D){D=x.nextPow2(D);var F=x.log2(D),R=i[F];return R.length>0?R.pop():new ArrayBuffer(D)}function c(D){return new Uint8Array(s(D),0,D)}function h(D){return new Uint16Array(s(2*D),0,D)}function p(D){return new Uint32Array(s(4*D),0,D)}function v(D){return new Int8Array(s(D),0,D)}function g(D){return new Int16Array(s(2*D),0,D)}function f(D){return new Int32Array(s(4*D),0,D)}function w(D){return new Float32Array(s(4*D),0,D)}function y(D){return new Float64Array(s(8*D),0,D)}function M(D){return e?new Uint8ClampedArray(s(D),0,D):c(D)}function A(D){return o?new BigUint64Array(s(8*D),0,D):null}function k(D){return a?new BigInt64Array(s(8*D),0,D):null}function C(D){return new DataView(s(D),0,D)}function P(D){D=x.nextPow2(D);var F=x.log2(D),R=d[F];return R.length>0?R.pop():new b(D)}ae.free=function(D){if(b.isBuffer(D))d[x.log2(D.length)].push(D);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(D)&&(D=D.buffer),!D)return;var R=0|x.log2(D.length||D.byteLength);i[R].push(D)}},ae.freeUint8=ae.freeUint16=ae.freeUint32=ae.freeBigUint64=ae.freeInt8=ae.freeInt16=ae.freeInt32=ae.freeBigInt64=ae.freeFloat32=ae.freeFloat=ae.freeFloat64=ae.freeDouble=ae.freeUint8Clamped=ae.freeDataView=function(D){u(D.buffer)},ae.freeArrayBuffer=u,ae.freeBuffer=function(D){d[x.log2(D.length)].push(D)},ae.malloc=function(D,F){if(void 0===F||"arraybuffer"===F)return s(D);switch(F){case"uint8":return c(D);case"uint16":return h(D);case"uint32":return p(D);case"int8":return v(D);case"int16":return g(D);case"int32":return f(D);case"float":case"float32":return w(D);case"double":case"float64":return y(D);case"uint8_clamped":return M(D);case"bigint64":return k(D);case"biguint64":return A(D);case"buffer":return P(D);case"data":case"dataview":return C(D);default:return null}return null},ae.mallocArrayBuffer=s,ae.mallocUint8=c,ae.mallocUint16=h,ae.mallocUint32=p,ae.mallocInt8=v,ae.mallocInt16=g,ae.mallocInt32=f,ae.mallocFloat32=ae.mallocFloat=w,ae.mallocFloat64=ae.mallocDouble=y,ae.mallocUint8Clamped=M,ae.mallocBigUint64=A,ae.mallocBigInt64=k,ae.mallocDataView=C,ae.mallocBuffer=P,ae.clearCache=function(){for(var D=0;D<32;++D)l.UINT8[D].length=0,l.UINT16[D].length=0,l.UINT32[D].length=0,l.INT8[D].length=0,l.INT16[D].length=0,l.INT32[D].length=0,l.FLOAT[D].length=0,l.DOUBLE[D].length=0,l.BIGUINT64[D].length=0,l.BIGINT64[D].length=0,l.UINT8C[D].length=0,i[D].length=0,d[D].length=0}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":81,buffer:85,dup:128}],328:[function(_,oe,ae){var m=/[\'\"]/;oe.exports=function(x){return x?(m.test(x.charAt(0))&&(x=x.substr(1)),m.test(x.charAt(x.length-1))&&(x=x.substr(0,x.length-1)),x):""}},{}],329:[function(_,oe,ae){"use strict";oe.exports=function(m,x,T){Array.isArray(T)||(T=[].slice.call(arguments,2));for(var b=0,e=T.length;b<e;b++){var o=T[b];for(var a in o)if((void 0===x[a]||Array.isArray(x[a])||m[a]!==x[a])&&a in x){var l;if(!0===o[a])l=x[a];else if(!1===o[a]||"function"==typeof o[a]&&void 0===(l=o[a](x[a],m,x)))continue;m[a]=l}}return m}},{}],330:[function(_,oe,ae){(function(m){(function(){function x(T){try{if(!m.localStorage)return!1}catch(e){return!1}var b=m.localStorage[T];return null!=b&&"true"===String(b).toLowerCase()}oe.exports=function(T,b){if(x("noDeprecation"))return T;var e=!1;return function(){if(!e){if(x("throwDeprecation"))throw new Error(b);x("traceDeprecation")?console.trace(b):console.warn(b),e=!0}return T.apply(this,arguments)}}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],331:[function(_,oe,ae){var m=_("get-canvas-context");oe.exports=function(x){return m("webgl",x)}},{"get-canvas-context":194}],332:[function(_,oe,ae){var m=_("../main"),x=_("object-assign"),T=m.instance();function b(u){this.local=this.regionalOptions[u||""]||this.regionalOptions[""]}x(b.prototype=new m.baseCalendar,{name:"Chinese",jdEpoch:1721425.5,hasYearZero:!1,minMonth:0,firstMonth:0,minDay:1,regionalOptions:{"":{name:"Chinese",epochs:["BEC","EC"],monthNumbers:function(u,s){if("string"==typeof u){var c=u.match(o);return c?c[0]:""}var h=this._validateYear(u),p=u.month(),v=""+this.toChineseMonth(h,p);return s&&v.length<2&&(v="0"+v),this.isIntercalaryMonth(h,p)&&(v+="i"),v},monthNames:function(u){if("string"==typeof u){var s=u.match(a);return s?s[0]:""}var c=this._validateYear(u),h=u.month(),p=["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"][this.toChineseMonth(c,h)-1];return this.isIntercalaryMonth(c,h)&&(p="\u95f0"+p),p},monthNamesShort:function(u){if("string"==typeof u){var s=u.match(l);return s?s[0]:""}var c=this._validateYear(u),h=u.month(),p=["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"][this.toChineseMonth(c,h)-1];return this.isIntercalaryMonth(c,h)&&(p="\u95f0"+p),p},parseMonth:function(u,s){u=this._validateYear(u);var c,h=parseInt(s);if(isNaN(h))"\u95f0"===s[0]&&(c=!0,s=s.substring(1)),"\u6708"===s[s.length-1]&&(s=s.substring(0,s.length-1)),h=1+["\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c"].indexOf(s);else{var p=s[s.length-1];c="i"===p||"I"===p}return this.toMonthIndex(u,h,c)},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},_validateYear:function(u,s){if(u.year&&(u=u.year()),"number"!=typeof u||u<1888||u>2111)throw s.replace(/\{0\}/,this.local.name);return u},toMonthIndex:function(u,s,c){var h=this.intercalaryMonth(u);if(c&&s!==h||s<1||s>12)throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);return h?!c&&s<=h?s-1:s:s-1},toChineseMonth:function(u,s){u.year&&(s=(u=u.year()).month());var c=this.intercalaryMonth(u);if(s<0||s>(c?12:11))throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);return c?s<c?s+1:s:s+1},intercalaryMonth:function(u){return u=this._validateYear(u),i[u-i[0]]>>13},isIntercalaryMonth:function(u,s){u.year&&(s=(u=u.year()).month());var c=this.intercalaryMonth(u);return!!c&&c===s},leapYear:function(u){return 0!==this.intercalaryMonth(u)},weekOfYear:function(u,s,c){var h,p=this._validateYear(u,m.local.invalidyear),v=d[p-d[0]];(h=T.newDate(v>>9&4095,v>>5&15,31&v)).add(4-(h.dayOfWeek()||7),"d");var y=this.toJD(u,s,c)-h.toJD();return 1+Math.floor(y/7)},monthsInYear:function(u){return this.leapYear(u)?13:12},daysInMonth:function(u,s){u.year&&(s=u.month(),u=u.year()),u=this._validateYear(u);var c=i[u-i[0]];if(s>(c>>13?12:11))throw m.local.invalidMonth.replace(/\{0\}/,this.local.name);return c&1<<12-s?30:29},weekDay:function(u,s,c){return(this.dayOfWeek(u,s,c)||7)<6},toJD:function(u,s,c){var h=this._validate(u,v,c,m.local.invalidDate);u=this._validateYear(h.year()),s=h.month(),c=h.day();var p=this.isIntercalaryMonth(u,s),v=this.toChineseMonth(u,s),g=function(f,w,y,M,A){var k,C,P;if("object"==typeof f)C=f,k=w||{};else{var D;if(!("number"==typeof f&&f>=1888&&f<=2111))throw new Error("Lunar year outside range 1888-2111");if(!("number"==typeof w&&w>=1&&w<=12))throw new Error("Lunar month outside range 1 - 12");if(!("number"==typeof y&&y>=1&&y<=30))throw new Error("Lunar day outside range 1 - 30");"object"==typeof M?(D=!1,k=M):(D=!!M,k={}),C={year:f,month:w,day:y,isIntercalary:D}}P=C.day-1;var F,R=i[C.year-i[0]],L=R>>13;F=L&&(C.month>L||C.isIntercalary)?C.month:C.month-1;for(var I=0;I<F;I++)P+=R&1<<12-I?30:29;var B=d[C.year-d[0]],V=new Date(B>>9&4095,(B>>5&15)-1,(31&B)+P);return k.year=V.getFullYear(),k.month=1+V.getMonth(),k.day=V.getDate(),k}(u,v,c,p);return T.toJD(g.year,g.month,g.day)},fromJD:function(u){var s=T.fromJD(u),c=function(p,v,g,f){var w,y;if("object"==typeof p)w=p,y=v||{};else{if(!("number"==typeof p&&p>=1888&&p<=2111))throw new Error("Solar year outside range 1888-2111");if(!("number"==typeof v&&v>=1&&v<=12))throw new Error("Solar month outside range 1 - 12");if(!("number"==typeof g&&g>=1&&g<=31))throw new Error("Solar day outside range 1 - 31");w={year:p,month:v,day:g},y={}}var M=d[w.year-d[0]];y.year=(w.year<<9|w.month<<5|w.day)>=M?w.year:w.year-1,M=d[y.year-d[0]];var k,C=new Date(M>>9&4095,(M>>5&15)-1,31&M),P=new Date(w.year,w.month-1,w.day);k=Math.round((P-C)/864e5);var D,F=i[y.year-i[0]];for(D=0;D<13;D++){var R=F&1<<12-D?30:29;if(k<R)break;k-=R}var L=F>>13;return!L||D<L?(y.isIntercalary=!1,y.month=1+D):D===L?(y.isIntercalary=!0,y.month=D):(y.isIntercalary=!1,y.month=D),y.day=1+k,y}(s.year(),s.month(),s.day()),h=this.toMonthIndex(c.year,c.month,c.isIntercalary);return this.newDate(c.year,h,c.day)},fromString:function(u){var s=u.match(e),c=this._validateYear(+s[1]),v=this.toMonthIndex(c,+s[2],!!s[3]);return this.newDate(c,v,+s[4])},add:function(u,s,c){var h=u.year(),p=u.month(),v=this.isIntercalaryMonth(h,p),g=this.toChineseMonth(h,p),f=Object.getPrototypeOf(b.prototype).add.call(this,u,s,c);if("y"===c){var w=f.year(),y=f.month(),M=this.isIntercalaryMonth(w,g),A=this.toMonthIndex(w,g,!(!v||!M));A!==y&&f.month(A)}return f}});var e=/^\s*(-?\d\d\d\d|\d\d)[-/](\d?\d)([iI]?)[-/](\d?\d)/m,o=/^\d?\d[iI]?/m,a=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?\u6708/m,l=/^\u95f0?\u5341?[\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]?/m;m.calendars.chinese=b;var i=[1887,5780,5802,19157,2742,50359,1198,2646,46378,7466,3412,30122,5482,67949,2396,5294,43597,6732,6954,36181,2772,4954,18781,2396,54427,5274,6730,47781,5800,6868,21210,4790,59703,2350,5270,46667,3402,3496,38325,1388,4782,18735,2350,52374,6804,7498,44457,2906,1388,29294,4700,63789,6442,6804,56138,5802,2772,38235,1210,4698,22827,5418,63125,3476,5802,43701,2484,5302,27223,2646,70954,7466,3412,54698,5482,2412,38062,5294,2636,32038,6954,60245,2772,4826,43357,2394,5274,39501,6730,72357,5800,5844,53978,4790,2358,38039,5270,87627,3402,3496,54708,5484,4782,43311,2350,3222,27978,7498,68965,2904,5484,45677,4700,6444,39573,6804,6986,19285,2772,62811,1210,4698,47403,5418,5780,38570,5546,76469,2420,5302,51799,2646,5414,36501,3412,5546,18869,2412,54446,5276,6732,48422,6822,2900,28010,4826,92509,2394,5274,55883,6730,6820,47956,5812,2778,18779,2358,62615,5270,5450,46757,3492,5556,27318,4718,67887,2350,3222,52554,7498,3428,38252,5468,4700,31022,6444,64149,6804,6986,43861,2772,5338,35421,2650,70955,5418,5780,54954,5546,2740,38074,5302,2646,29991,3366,61011,3412,5546,43445,2412,5294,35406,6732,72998,6820,6996,52586,2778,2396,38045,5274,6698,23333,6820,64338,5812,2746,43355,2358,5270,39499,5450,79525,3492,5548],d=[1887,966732,967231,967733,968265,968766,969297,969798,970298,970829,971330,971830,972362,972863,973395,973896,974397,974928,975428,975929,976461,976962,977462,977994,978494,979026,979526,980026,980558,981059,981559,982091,982593,983124,983624,984124,984656,985157,985656,986189,986690,987191,987722,988222,988753,989254,989754,990286,990788,991288,991819,992319,992851,993352,993851,994383,994885,995385,995917,996418,996918,997450,997949,998481,998982,999483,1000014,1000515,1001016,1001548,1002047,1002578,1003080,1003580,1004111,1004613,1005113,1005645,1006146,1006645,1007177,1007678,1008209,1008710,1009211,1009743,1010243,1010743,1011275,1011775,1012306,1012807,1013308,1013840,1014341,1014841,1015373,1015874,1016404,1016905,1017405,1017937,1018438,1018939,1019471,1019972,1020471,1021002,1021503,1022035,1022535,1023036,1023568,1024069,1024568,1025100,1025601,1026102,1026633,1027133,1027666,1028167,1028666,1029198,1029699,1030199,1030730,1031231,1031763,1032264,1032764,1033296,1033797,1034297,1034828,1035329,1035830,1036362,1036861,1037393,1037894,1038394,1038925,1039427,1039927,1040459,1040959,1041491,1041992,1042492,1043023,1043524,1044024,1044556,1045057,1045558,1046090,1046590,1047121,1047622,1048122,1048654,1049154,1049655,1050187,1050689,1051219,1051720,1052220,1052751,1053252,1053752,1054284,1054786,1055285,1055817,1056317,1056849,1057349,1057850,1058382,1058883,1059383,1059915,1060415,1060947,1061447,1061947,1062479,1062981,1063480,1064012,1064514,1065014,1065545,1066045,1066577,1067078,1067578,1068110,1068611,1069112,1069642,1070142,1070674,1071175,1071675,1072207,1072709,1073209,1073740,1074241,1074741,1075273,1075773,1076305,1076807,1077308,1077839,1078340,1078840,1079372,1079871,1080403,1080904]},{"../main":346,"object-assign":247}],333:[function(_,oe,ae){var m=_("../main");function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}_("object-assign")(T.prototype=new m.baseCalendar,{name:"Coptic",jdEpoch:1825029.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Coptic",epochs:["BAM","AM"],monthNames:["Thout","Paopi","Hathor","Koiak","Tobi","Meshir","Paremhat","Paremoude","Pashons","Paoni","Epip","Mesori","Pi Kogi Enavot"],monthNamesShort:["Tho","Pao","Hath","Koi","Tob","Mesh","Pat","Pad","Pash","Pao","Epi","Meso","PiK"],dayNames:["Tkyriaka","Pesnau","Pshoment","Peftoou","Ptiou","Psoou","Psabbaton"],dayNamesShort:["Tky","Pes","Psh","Pef","Pti","Pso","Psa"],dayNamesMin:["Tk","Pes","Psh","Pef","Pt","Pso","Psa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var e=this._validate(b,this.minMonth,this.minDay,m.local.invalidYear);return(b=e.year()+(e.year()<0?1:0))%4==3||b%4==-1},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear),13},weekOfYear:function(b,e,o){var a=this.newDate(b,e,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(b,e){var o=this._validate(b,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(13===o.month()&&this.leapYear(o.year())?1:0)},weekDay:function(b,e,o){return(this.dayOfWeek(b,e,o)||7)<6},toJD:function(b,e,o){var a=this._validate(b,e,o,m.local.invalidDate);return(b=a.year())<0&&b++,a.day()+30*(a.month()-1)+365*(b-1)+Math.floor(b/4)+this.jdEpoch-1},fromJD:function(b){var e=Math.floor(b)+.5-this.jdEpoch,o=Math.floor((e-Math.floor((e+366)/1461))/365)+1;o<=0&&o--,e=Math.floor(b)+.5-this.newDate(o,1,1).toJD();var a=Math.floor(e/30)+1;return this.newDate(o,a,e-30*(a-1)+1)}}),m.calendars.coptic=T},{"../main":346,"object-assign":247}],334:[function(_,oe,ae){var m=_("../main");function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}_("object-assign")(T.prototype=new m.baseCalendar,{name:"Discworld",jdEpoch:1721425.5,daysPerMonth:[16,32,32,32,32,32,32,32,32,32,32,32,32],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Discworld",epochs:["BUC","UC"],monthNames:["Ick","Offle","February","March","April","May","June","Grune","August","Spune","Sektober","Ember","December"],monthNamesShort:["Ick","Off","Feb","Mar","Apr","May","Jun","Gru","Aug","Spu","Sek","Emb","Dec"],dayNames:["Sunday","Octeday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Oct","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Oc","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:2,isRTL:!1}},leapYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),!1},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),13},daysInYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),400},weekOfYear:function(e,o,a){var l=this.newDate(e,o,a);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/8)+1},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,m.local.invalidMonth);return this.daysPerMonth[a.month()-1]},daysInWeek:function(){return 8},dayOfWeek:function(e,o,a){return(this._validate(e,o,a,m.local.invalidDate).day()+1)%8},weekDay:function(e,o,a){var l=this.dayOfWeek(e,o,a);return l>=2&&l<=6},extraInfo:function(e,o,a){var l=this._validate(e,o,a,m.local.invalidDate);return{century:b[Math.floor((l.year()-1)/100)+1]||""}},toJD:function(e,o,a){var l=this._validate(e,o,a,m.local.invalidDate);return e=l.year()+(l.year()<0?1:0),o=l.month(),(a=l.day())+(o>1?16:0)+(o>2?32*(o-2):0)+400*(e-1)+this.jdEpoch-1},fromJD:function(e){e=Math.floor(e+.5)-Math.floor(this.jdEpoch)-1;var o=Math.floor(e/400)+1;e-=400*(o-1),e+=e>15?16:0;var a=Math.floor(e/32)+1;return this.newDate(o<=0?o-1:o,a,e-32*(a-1)+1)}});var b={20:"Fruitbat",21:"Anchovy"};m.calendars.discworld=T},{"../main":346,"object-assign":247}],335:[function(_,oe,ae){var m=_("../main");function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}_("object-assign")(T.prototype=new m.baseCalendar,{name:"Ethiopian",jdEpoch:1724220.5,daysPerMonth:[30,30,30,30,30,30,30,30,30,30,30,30,5],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Ethiopian",epochs:["BEE","EE"],monthNames:["Meskerem","Tikemet","Hidar","Tahesas","Tir","Yekatit","Megabit","Miazia","Genbot","Sene","Hamle","Nehase","Pagume"],monthNamesShort:["Mes","Tik","Hid","Tah","Tir","Yek","Meg","Mia","Gen","Sen","Ham","Neh","Pag"],dayNames:["Ehud","Segno","Maksegno","Irob","Hamus","Arb","Kidame"],dayNamesShort:["Ehu","Seg","Mak","Iro","Ham","Arb","Kid"],dayNamesMin:["Eh","Se","Ma","Ir","Ha","Ar","Ki"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var e=this._validate(b,this.minMonth,this.minDay,m.local.invalidYear);return(b=e.year()+(e.year()<0?1:0))%4==3||b%4==-1},monthsInYear:function(b){return this._validate(b,this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear),13},weekOfYear:function(b,e,o){var a=this.newDate(b,e,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(b,e){var o=this._validate(b,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(13===o.month()&&this.leapYear(o.year())?1:0)},weekDay:function(b,e,o){return(this.dayOfWeek(b,e,o)||7)<6},toJD:function(b,e,o){var a=this._validate(b,e,o,m.local.invalidDate);return(b=a.year())<0&&b++,a.day()+30*(a.month()-1)+365*(b-1)+Math.floor(b/4)+this.jdEpoch-1},fromJD:function(b){var e=Math.floor(b)+.5-this.jdEpoch,o=Math.floor((e-Math.floor((e+366)/1461))/365)+1;o<=0&&o--,e=Math.floor(b)+.5-this.newDate(o,1,1).toJD();var a=Math.floor(e/30)+1;return this.newDate(o,a,e-30*(a-1)+1)}}),m.calendars.ethiopian=T},{"../main":346,"object-assign":247}],336:[function(_,oe,ae){var m=_("../main");function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function b(e,o){return e-o*Math.floor(e/o)}_("object-assign")(T.prototype=new m.baseCalendar,{name:"Hebrew",jdEpoch:347995.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29,29],hasYearZero:!1,minMonth:1,firstMonth:7,minDay:1,regionalOptions:{"":{name:"Hebrew",epochs:["BAM","AM"],monthNames:["Nisan","Iyar","Sivan","Tammuz","Av","Elul","Tishrei","Cheshvan","Kislev","Tevet","Shevat","Adar","Adar II"],monthNamesShort:["Nis","Iya","Siv","Tam","Av","Elu","Tis","Che","Kis","Tev","She","Ada","Ad2"],dayNames:["Yom Rishon","Yom Sheni","Yom Shlishi","Yom Revi'i","Yom Chamishi","Yom Shishi","Yom Shabbat"],dayNamesShort:["Ris","She","Shl","Rev","Cha","Shi","Sha"],dayNamesMin:["Ri","She","Shl","Re","Ch","Shi","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return this._leapYear(o.year())},_leapYear:function(e){return b(7*(e=e<0?e+1:e)+1,19)<7},monthsInYear:function(e){return this._validate(e,this.minMonth,this.minDay,m.local.invalidYear),this._leapYear(e.year?e.year():e)?13:12},weekOfYear:function(e,o,a){var l=this.newDate(e,o,a);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(e){return e=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear).year(),this.toJD(-1===e?1:e+1,7,1)-this.toJD(e,7,1)},daysInMonth:function(e,o){return e.year&&(o=e.month(),e=e.year()),this._validate(e,o,this.minDay,m.local.invalidMonth),12===o&&this.leapYear(e)||8===o&&5===b(this.daysInYear(e),10)?30:9===o&&3===b(this.daysInYear(e),10)?29:this.daysPerMonth[o-1]},weekDay:function(e,o,a){return 6!==this.dayOfWeek(e,o,a)},extraInfo:function(e,o,a){var l=this._validate(e,o,a,m.local.invalidDate);return{yearType:(this.leapYear(l)?"embolismic":"common")+" "+["deficient","regular","complete"][this.daysInYear(l)%10-3]}},toJD:function(e,o,a){var l=this._validate(e,o,a,m.local.invalidDate);e=l.year(),o=l.month(),a=l.day();var i=e<=0?e+1:e,d=this.jdEpoch+this._delay1(i)+this._delay2(i)+a+1;if(o<7){for(var u=7;u<=this.monthsInYear(e);u++)d+=this.daysInMonth(e,u);for(u=1;u<o;u++)d+=this.daysInMonth(e,u)}else for(u=7;u<o;u++)d+=this.daysInMonth(e,u);return d},_delay1:function(e){var o=Math.floor((235*e-234)/19),l=29*o+Math.floor((12084+13753*o)/25920);return b(3*(l+1),7)<3&&l++,l},_delay2:function(e){var o=this._delay1(e-1),a=this._delay1(e);return this._delay1(e+1)-a==356?2:a-o==382?1:0},fromJD:function(e){e=Math.floor(e)+.5;for(var o=Math.floor(98496*(e-this.jdEpoch)/35975351)-1;e>=this.toJD(-1===o?1:o+1,7,1);)o++;for(var a=e<this.toJD(o,1,1)?7:1;e>this.toJD(o,a,this.daysInMonth(o,a));)a++;var l=e-this.toJD(o,a,1)+1;return this.newDate(o,a,l)}}),m.calendars.hebrew=T},{"../main":346,"object-assign":247}],337:[function(_,oe,ae){var m=_("../main");function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}_("object-assign")(T.prototype=new m.baseCalendar,{name:"Islamic",jdEpoch:1948439.5,daysPerMonth:[30,29,30,29,30,29,30,29,30,29,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Islamic",epochs:["BH","AH"],monthNames:["Muharram","Safar","Rabi' al-awwal","Rabi' al-thani","Jumada al-awwal","Jumada al-thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-ahad","Yawm al-ithnayn","Yawm ath-thulaathaa'","Yawm al-arbi'aa'","Yawm al-kham\u012bs","Yawm al-jum'a","Yawm as-sabt"],dayNamesShort:["Aha","Ith","Thu","Arb","Kha","Jum","Sab"],dayNamesMin:["Ah","It","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(b){return(11*this._validate(b,this.minMonth,this.minDay,m.local.invalidYear).year()+14)%30<11},weekOfYear:function(b,e,o){var a=this.newDate(b,e,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(b){return this.leapYear(b)?355:354},daysInMonth:function(b,e){var o=this._validate(b,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(12===o.month()&&this.leapYear(o.year())?1:0)},weekDay:function(b,e,o){return 5!==this.dayOfWeek(b,e,o)},toJD:function(b,e,o){var a=this._validate(b,e,o,m.local.invalidDate);return b=a.year(),e=a.month(),b=b<=0?b+1:b,(o=a.day())+Math.ceil(29.5*(e-1))+354*(b-1)+Math.floor((3+11*b)/30)+this.jdEpoch-1},fromJD:function(b){b=Math.floor(b)+.5;var e=Math.floor((30*(b-this.jdEpoch)+10646)/10631);e=e<=0?e-1:e;var o=Math.min(12,Math.ceil((b-29-this.toJD(e,1,1))/29.5)+1),a=b-this.toJD(e,o,1)+1;return this.newDate(e,o,a)}}),m.calendars.islamic=T},{"../main":346,"object-assign":247}],338:[function(_,oe,ae){var m=_("../main");function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}_("object-assign")(T.prototype=new m.baseCalendar,{name:"Julian",jdEpoch:1721423.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Julian",epochs:["BC","AD"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(b){var e=this._validate(b,this.minMonth,this.minDay,m.local.invalidYear);return(b=e.year()<0?e.year()+1:e.year())%4==0},weekOfYear:function(b,e,o){var a=this.newDate(b,e,o);return a.add(4-(a.dayOfWeek()||7),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInMonth:function(b,e){var o=this._validate(b,e,this.minDay,m.local.invalidMonth);return this.daysPerMonth[o.month()-1]+(2===o.month()&&this.leapYear(o.year())?1:0)},weekDay:function(b,e,o){return(this.dayOfWeek(b,e,o)||7)<6},toJD:function(b,e,o){var a=this._validate(b,e,o,m.local.invalidDate);return b=a.year(),e=a.month(),o=a.day(),b<0&&b++,e<=2&&(b--,e+=12),Math.floor(365.25*(b+4716))+Math.floor(30.6001*(e+1))+o-1524.5},fromJD:function(b){var e=Math.floor(b+.5)+1524,o=Math.floor((e-122.1)/365.25),a=Math.floor(365.25*o),l=Math.floor((e-a)/30.6001),i=l-Math.floor(l<14?1:13),d=o-Math.floor(i>2?4716:4715),u=e-a-Math.floor(30.6001*l);return d<=0&&d--,this.newDate(d,i,u)}}),m.calendars.julian=T},{"../main":346,"object-assign":247}],339:[function(_,oe,ae){var m=_("../main");function T(o){this.local=this.regionalOptions[o||""]||this.regionalOptions[""]}function b(o,a){return o-a*Math.floor(o/a)}function e(o,a){return b(o-1,a)+1}_("object-assign")(T.prototype=new m.baseCalendar,{name:"Mayan",jdEpoch:584282.5,hasYearZero:!0,minMonth:0,firstMonth:0,minDay:0,regionalOptions:{"":{name:"Mayan",epochs:["",""],monthNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],monthNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"],dayNames:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesShort:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],dayNamesMin:["0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19"],digits:null,dateFormat:"YYYY.m.d",firstDay:0,isRTL:!1,haabMonths:["Pop","Uo","Zip","Zotz","Tzec","Xul","Yaxkin","Mol","Chen","Yax","Zac","Ceh","Mac","Kankin","Muan","Pax","Kayab","Cumku","Uayeb"],tzolkinMonths:["Imix","Ik","Akbal","Kan","Chicchan","Cimi","Manik","Lamat","Muluc","Oc","Chuen","Eb","Ben","Ix","Men","Cib","Caban","Etznab","Cauac","Ahau"]}},leapYear:function(o){return this._validate(o,this.minMonth,this.minDay,m.local.invalidYear),!1},formatYear:function(o){o=this._validate(o,this.minMonth,this.minDay,m.local.invalidYear).year();var a=Math.floor(o/400);return o%=400,o+=o<0?400:0,a+"."+Math.floor(o/20)+"."+o%20},forYear:function(o){if((o=o.split(".")).length<3)throw"Invalid Mayan year";for(var a=0,l=0;l<o.length;l++){var i=parseInt(o[l],10);if(Math.abs(i)>19||l>0&&i<0)throw"Invalid Mayan year";a=20*a+i}return a},monthsInYear:function(o){return this._validate(o,this.minMonth,this.minDay,m.local.invalidYear),18},weekOfYear:function(o,a,l){return this._validate(o,a,l,m.local.invalidDate),0},daysInYear:function(o){return this._validate(o,this.minMonth,this.minDay,m.local.invalidYear),360},daysInMonth:function(o,a){return this._validate(o,a,this.minDay,m.local.invalidMonth),20},daysInWeek:function(){return 5},dayOfWeek:function(o,a,l){return this._validate(o,a,l,m.local.invalidDate).day()},weekDay:function(o,a,l){return this._validate(o,a,l,m.local.invalidDate),!0},extraInfo:function(o,a,l){var i=this._validate(o,a,l,m.local.invalidDate).toJD(),d=this._toHaab(i),u=this._toTzolkin(i);return{haabMonthName:this.local.haabMonths[d[0]-1],haabMonth:d[0],haabDay:d[1],tzolkinDayName:this.local.tzolkinMonths[u[0]-1],tzolkinDay:u[0],tzolkinTrecena:u[1]}},_toHaab:function(o){var a=b(8+(o-=this.jdEpoch)+340,365);return[Math.floor(a/20)+1,b(a,20)]},_toTzolkin:function(o){return[e(20+(o-=this.jdEpoch),20),e(o+4,13)]},toJD:function(o,a,l){var i=this._validate(o,a,l,m.local.invalidDate);return i.day()+20*i.month()+360*i.year()+this.jdEpoch},fromJD:function(o){o=Math.floor(o)+.5-this.jdEpoch;var a=Math.floor(o/360);o%=360,o+=o<0?360:0;var l=Math.floor(o/20);return this.newDate(a,l,o%20)}}),m.calendars.mayan=T},{"../main":346,"object-assign":247}],340:[function(_,oe,ae){var m=_("../main"),x=_("object-assign");function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}T.prototype=new m.baseCalendar;var b=m.instance("gregorian");x(T.prototype,{name:"Nanakshahi",jdEpoch:2257673.5,daysPerMonth:[31,31,31,31,31,30,30,30,30,30,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Nanakshahi",epochs:["BN","AN"],monthNames:["Chet","Vaisakh","Jeth","Harh","Sawan","Bhadon","Assu","Katak","Maghar","Poh","Magh","Phagun"],monthNamesShort:["Che","Vai","Jet","Har","Saw","Bha","Ass","Kat","Mgr","Poh","Mgh","Pha"],dayNames:["Somvaar","Mangalvar","Budhvaar","Veervaar","Shukarvaar","Sanicharvaar","Etvaar"],dayNamesShort:["Som","Mangal","Budh","Veer","Shukar","Sanichar","Et"],dayNamesMin:["So","Ma","Bu","Ve","Sh","Sa","Et"],digits:null,dateFormat:"dd-mm-yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear||m.regionalOptions[""].invalidYear);return b.leapYear(o.year()+(o.year()<1?1:0)+1469)},weekOfYear:function(e,o,a){var l=this.newDate(e,o,a);return l.add(1-(l.dayOfWeek()||7),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,m.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(12===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(e,o,a){return(this.dayOfWeek(e,o,a)||7)<6},toJD:function(e,o,a){var l=this._validate(e,o,a,m.local.invalidMonth);(e=l.year())<0&&e++;for(var i=l.day(),d=1;d<l.month();d++)i+=this.daysPerMonth[d-1];return i+b.toJD(e+1468,3,13)},fromJD:function(e){e=Math.floor(e+.5);for(var o=Math.floor((e-(this.jdEpoch-1))/366);e>=this.toJD(o+1,1,1);)o++;for(var a=e-Math.floor(this.toJD(o,1,1)+.5)+1,l=1;a>this.daysInMonth(o,l);)a-=this.daysInMonth(o,l),l++;return this.newDate(o,l,a)}}),m.calendars.nanakshahi=T},{"../main":346,"object-assign":247}],341:[function(_,oe,ae){var m=_("../main");function T(b){this.local=this.regionalOptions[b||""]||this.regionalOptions[""]}_("object-assign")(T.prototype=new m.baseCalendar,{name:"Nepali",jdEpoch:1700709.5,daysPerMonth:[31,31,32,32,31,30,30,29,30,29,30,30],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,daysPerYear:365,regionalOptions:{"":{name:"Nepali",epochs:["BBS","ABS"],monthNames:["Baisakh","Jestha","Ashadh","Shrawan","Bhadra","Ashwin","Kartik","Mangsir","Paush","Mangh","Falgun","Chaitra"],monthNamesShort:["Bai","Je","As","Shra","Bha","Ash","Kar","Mang","Pau","Ma","Fal","Chai"],dayNames:["Aaitabaar","Sombaar","Manglbaar","Budhabaar","Bihibaar","Shukrabaar","Shanibaar"],dayNamesShort:["Aaita","Som","Mangl","Budha","Bihi","Shukra","Shani"],dayNamesMin:["Aai","So","Man","Bu","Bi","Shu","Sha"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:1,isRTL:!1}},leapYear:function(b){return this.daysInYear(b)!==this.daysPerYear},weekOfYear:function(b,e,o){var a=this.newDate(b,e,o);return a.add(-a.dayOfWeek(),"d"),Math.floor((a.dayOfYear()-1)/7)+1},daysInYear:function(b){if(b=this._validate(b,this.minMonth,this.minDay,m.local.invalidYear).year(),void 0===this.NEPALI_CALENDAR_DATA[b])return this.daysPerYear;for(var e=0,o=this.minMonth;o<=12;o++)e+=this.NEPALI_CALENDAR_DATA[b][o];return e},daysInMonth:function(b,e){return b.year&&(e=b.month(),b=b.year()),this._validate(b,e,this.minDay,m.local.invalidMonth),void 0===this.NEPALI_CALENDAR_DATA[b]?this.daysPerMonth[e-1]:this.NEPALI_CALENDAR_DATA[b][e]},weekDay:function(b,e,o){return 6!==this.dayOfWeek(b,e,o)},toJD:function(b,e,o){var a=this._validate(b,e,o,m.local.invalidDate);b=a.year(),e=a.month(),o=a.day();var l=m.instance(),i=0,d=e,u=b;this._createMissingCalendarData(b);var s=b-(d>9||9===d&&o>=this.NEPALI_CALENDAR_DATA[u][0]?56:57);for(9!==e&&(i=o,d--);9!==d;)d<=0&&(d=12,u--),i+=this.NEPALI_CALENDAR_DATA[u][d],d--;return 9===e?(i+=o-this.NEPALI_CALENDAR_DATA[u][0])<0&&(i+=l.daysInYear(s)):i+=this.NEPALI_CALENDAR_DATA[u][9]-this.NEPALI_CALENDAR_DATA[u][0],l.newDate(s,1,1).add(i,"d").toJD()},fromJD:function(b){var e=m.instance().fromJD(b),o=e.year(),a=e.dayOfYear(),l=o+56;this._createMissingCalendarData(l);for(var i=9,u=this.NEPALI_CALENDAR_DATA[l][i]-this.NEPALI_CALENDAR_DATA[l][0]+1;a>u;)++i>12&&(i=1,l++),u+=this.NEPALI_CALENDAR_DATA[l][i];return this.newDate(l,i,this.NEPALI_CALENDAR_DATA[l][i]-(u-a))},_createMissingCalendarData:function(b){var e=this.daysPerMonth.slice(0);e.unshift(17);for(var o=b-1;o<b+2;o++)void 0===this.NEPALI_CALENDAR_DATA[o]&&(this.NEPALI_CALENDAR_DATA[o]=e)},NEPALI_CALENDAR_DATA:{1970:[18,31,31,32,31,31,31,30,29,30,29,30,30],1971:[18,31,31,32,31,32,30,30,29,30,29,30,30],1972:[17,31,32,31,32,31,30,30,30,29,29,30,30],1973:[19,30,32,31,32,31,30,30,30,29,30,29,31],1974:[19,31,31,32,30,31,31,30,29,30,29,30,30],1975:[18,31,31,32,32,30,31,30,29,30,29,30,30],1976:[17,31,32,31,32,31,30,30,30,29,29,30,31],1977:[18,31,32,31,32,31,31,29,30,29,30,29,31],1978:[18,31,31,32,31,31,31,30,29,30,29,30,30],1979:[18,31,31,32,32,31,30,30,29,30,29,30,30],1980:[17,31,32,31,32,31,30,30,30,29,29,30,31],1981:[18,31,31,31,32,31,31,29,30,30,29,30,30],1982:[18,31,31,32,31,31,31,30,29,30,29,30,30],1983:[18,31,31,32,32,31,30,30,29,30,29,30,30],1984:[17,31,32,31,32,31,30,30,30,29,29,30,31],1985:[18,31,31,31,32,31,31,29,30,30,29,30,30],1986:[18,31,31,32,31,31,31,30,29,30,29,30,30],1987:[18,31,32,31,32,31,30,30,29,30,29,30,30],1988:[17,31,32,31,32,31,30,30,30,29,29,30,31],1989:[18,31,31,31,32,31,31,30,29,30,29,30,30],1990:[18,31,31,32,31,31,31,30,29,30,29,30,30],1991:[18,31,32,31,32,31,30,30,29,30,29,30,30],1992:[17,31,32,31,32,31,30,30,30,29,30,29,31],1993:[18,31,31,31,32,31,31,30,29,30,29,30,30],1994:[18,31,31,32,31,31,31,30,29,30,29,30,30],1995:[17,31,32,31,32,31,30,30,30,29,29,30,30],1996:[17,31,32,31,32,31,30,30,30,29,30,29,31],1997:[18,31,31,32,31,31,31,30,29,30,29,30,30],1998:[18,31,31,32,31,31,31,30,29,30,29,30,30],1999:[17,31,32,31,32,31,30,30,30,29,29,30,31],2e3:[17,30,32,31,32,31,30,30,30,29,30,29,31],2001:[18,31,31,32,31,31,31,30,29,30,29,30,30],2002:[18,31,31,32,32,31,30,30,29,30,29,30,30],2003:[17,31,32,31,32,31,30,30,30,29,29,30,31],2004:[17,30,32,31,32,31,30,30,30,29,30,29,31],2005:[18,31,31,32,31,31,31,30,29,30,29,30,30],2006:[18,31,31,32,32,31,30,30,29,30,29,30,30],2007:[17,31,32,31,32,31,30,30,30,29,29,30,31],2008:[17,31,31,31,32,31,31,29,30,30,29,29,31],2009:[18,31,31,32,31,31,31,30,29,30,29,30,30],2010:[18,31,31,32,32,31,30,30,29,30,29,30,30],2011:[17,31,32,31,32,31,30,30,30,29,29,30,31],2012:[17,31,31,31,32,31,31,29,30,30,29,30,30],2013:[18,31,31,32,31,31,31,30,29,30,29,30,30],2014:[18,31,31,32,32,31,30,30,29,30,29,30,30],2015:[17,31,32,31,32,31,30,30,30,29,29,30,31],2016:[17,31,31,31,32,31,31,29,30,30,29,30,30],2017:[18,31,31,32,31,31,31,30,29,30,29,30,30],2018:[18,31,32,31,32,31,30,30,29,30,29,30,30],2019:[17,31,32,31,32,31,30,30,30,29,30,29,31],2020:[17,31,31,31,32,31,31,30,29,30,29,30,30],2021:[18,31,31,32,31,31,31,30,29,30,29,30,30],2022:[17,31,32,31,32,31,30,30,30,29,29,30,30],2023:[17,31,32,31,32,31,30,30,30,29,30,29,31],2024:[17,31,31,31,32,31,31,30,29,30,29,30,30],2025:[18,31,31,32,31,31,31,30,29,30,29,30,30],2026:[17,31,32,31,32,31,30,30,30,29,29,30,31],2027:[17,30,32,31,32,31,30,30,30,29,30,29,31],2028:[17,31,31,32,31,31,31,30,29,30,29,30,30],2029:[18,31,31,32,31,32,30,30,29,30,29,30,30],2030:[17,31,32,31,32,31,30,30,30,30,30,30,31],2031:[17,31,32,31,32,31,31,31,31,31,31,31,31],2032:[17,32,32,32,32,32,32,32,32,32,32,32,32],2033:[18,31,31,32,32,31,30,30,29,30,29,30,30],2034:[17,31,32,31,32,31,30,30,30,29,29,30,31],2035:[17,30,32,31,32,31,31,29,30,30,29,29,31],2036:[17,31,31,32,31,31,31,30,29,30,29,30,30],2037:[18,31,31,32,32,31,30,30,29,30,29,30,30],2038:[17,31,32,31,32,31,30,30,30,29,29,30,31],2039:[17,31,31,31,32,31,31,29,30,30,29,30,30],2040:[17,31,31,32,31,31,31,30,29,30,29,30,30],2041:[18,31,31,32,32,31,30,30,29,30,29,30,30],2042:[17,31,32,31,32,31,30,30,30,29,29,30,31],2043:[17,31,31,31,32,31,31,29,30,30,29,30,30],2044:[17,31,31,32,31,31,31,30,29,30,29,30,30],2045:[18,31,32,31,32,31,30,30,29,30,29,30,30],2046:[17,31,32,31,32,31,30,30,30,29,29,30,31],2047:[17,31,31,31,32,31,31,30,29,30,29,30,30],2048:[17,31,31,32,31,31,31,30,29,30,29,30,30],2049:[17,31,32,31,32,31,30,30,30,29,29,30,30],2050:[17,31,32,31,32,31,30,30,30,29,30,29,31],2051:[17,31,31,31,32,31,31,30,29,30,29,30,30],2052:[17,31,31,32,31,31,31,30,29,30,29,30,30],2053:[17,31,32,31,32,31,30,30,30,29,29,30,30],2054:[17,31,32,31,32,31,30,30,30,29,30,29,31],2055:[17,31,31,32,31,31,31,30,29,30,30,29,30],2056:[17,31,31,32,31,32,30,30,29,30,29,30,30],2057:[17,31,32,31,32,31,30,30,30,29,29,30,31],2058:[17,30,32,31,32,31,30,30,30,29,30,29,31],2059:[17,31,31,32,31,31,31,30,29,30,29,30,30],2060:[17,31,31,32,32,31,30,30,29,30,29,30,30],2061:[17,31,32,31,32,31,30,30,30,29,29,30,31],2062:[17,30,32,31,32,31,31,29,30,29,30,29,31],2063:[17,31,31,32,31,31,31,30,29,30,29,30,30],2064:[17,31,31,32,32,31,30,30,29,30,29,30,30],2065:[17,31,32,31,32,31,30,30,30,29,29,30,31],2066:[17,31,31,31,32,31,31,29,30,30,29,29,31],2067:[17,31,31,32,31,31,31,30,29,30,29,30,30],2068:[17,31,31,32,32,31,30,30,29,30,29,30,30],2069:[17,31,32,31,32,31,30,30,30,29,29,30,31],2070:[17,31,31,31,32,31,31,29,30,30,29,30,30],2071:[17,31,31,32,31,31,31,30,29,30,29,30,30],2072:[17,31,32,31,32,31,30,30,29,30,29,30,30],2073:[17,31,32,31,32,31,30,30,30,29,29,30,31],2074:[17,31,31,31,32,31,31,30,29,30,29,30,30],2075:[17,31,31,32,31,31,31,30,29,30,29,30,30],2076:[16,31,32,31,32,31,30,30,30,29,29,30,30],2077:[17,31,32,31,32,31,30,30,30,29,30,29,31],2078:[17,31,31,31,32,31,31,30,29,30,29,30,30],2079:[17,31,31,32,31,31,31,30,29,30,29,30,30],2080:[16,31,32,31,32,31,30,30,30,29,29,30,30],2081:[17,31,31,32,32,31,30,30,30,29,30,30,30],2082:[17,31,32,31,32,31,30,30,30,29,30,30,30],2083:[17,31,31,32,31,31,30,30,30,29,30,30,30],2084:[17,31,31,32,31,31,30,30,30,29,30,30,30],2085:[17,31,32,31,32,31,31,30,30,29,30,30,30],2086:[17,31,32,31,32,31,30,30,30,29,30,30,30],2087:[16,31,31,32,31,31,31,30,30,29,30,30,30],2088:[16,30,31,32,32,30,31,30,30,29,30,30,30],2089:[17,31,32,31,32,31,30,30,30,29,30,30,30],2090:[17,31,32,31,32,31,30,30,30,29,30,30,30],2091:[16,31,31,32,31,31,31,30,30,29,30,30,30],2092:[16,31,31,32,32,31,30,30,30,29,30,30,30],2093:[17,31,32,31,32,31,30,30,30,29,30,30,30],2094:[17,31,31,32,31,31,30,30,30,29,30,30,30],2095:[17,31,31,32,31,31,31,30,29,30,30,30,30],2096:[17,30,31,32,32,31,30,30,29,30,29,30,30],2097:[17,31,32,31,32,31,30,30,30,29,30,30,30],2098:[17,31,31,32,31,31,31,29,30,29,30,30,31],2099:[17,31,31,32,31,31,31,30,29,29,30,30,30],2100:[17,31,32,31,32,30,31,30,29,30,29,30,30]}}),m.calendars.nepali=T},{"../main":346,"object-assign":247}],342:[function(_,oe,ae){var m=_("../main");function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}function b(e,o){return e-o*Math.floor(e/o)}_("object-assign")(T.prototype=new m.baseCalendar,{name:"Persian",jdEpoch:1948320.5,daysPerMonth:[31,31,31,31,31,31,30,30,30,30,30,29],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Persian",epochs:["BP","AP"],monthNames:["Farvardin","Ordibehesht","Khordad","Tir","Mordad","Shahrivar","Mehr","Aban","Azar","Day","Bahman","Esfand"],monthNamesShort:["Far","Ord","Kho","Tir","Mor","Sha","Meh","Aba","Aza","Day","Bah","Esf"],dayNames:["Yekshambe","Doshambe","Seshambe","Ch\xe6harshambe","Panjshambe","Jom'e","Shambe"],dayNamesShort:["Yek","Do","Se","Ch\xe6","Panj","Jom","Sha"],dayNamesMin:["Ye","Do","Se","Ch","Pa","Jo","Sh"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return 682*((o.year()-(o.year()>0?474:473))%2820+474+38)%2816<682},weekOfYear:function(e,o,a){var l=this.newDate(e,o,a);return l.add(-(l.dayOfWeek()+1)%7,"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,m.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(12===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(e,o,a){return 5!==this.dayOfWeek(e,o,a)},toJD:function(e,o,a){var l=this._validate(e,o,a,m.local.invalidDate);e=l.year(),o=l.month(),a=l.day();var i=e-(e>=0?474:473),d=474+b(i,2820);return a+(o<=7?31*(o-1):30*(o-1)+6)+Math.floor((682*d-110)/2816)+365*(d-1)+1029983*Math.floor(i/2820)+this.jdEpoch-1},fromJD:function(e){var o=(e=Math.floor(e)+.5)-this.toJD(475,1,1),a=Math.floor(o/1029983),l=b(o,1029983),i=2820;if(1029982!==l){var d=Math.floor(l/366),u=b(l,366);i=Math.floor((2134*d+2816*u+2815)/1028522)+d+1}var s=i+2820*a+474,c=e-this.toJD(s=s<=0?s-1:s,1,1)+1,h=c<=186?Math.ceil(c/31):Math.ceil((c-6)/30),p=e-this.toJD(s,h,1)+1;return this.newDate(s,h,p)}}),m.calendars.persian=T,m.calendars.jalali=T},{"../main":346,"object-assign":247}],343:[function(_,oe,ae){var m=_("../main"),x=_("object-assign"),T=m.instance();function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}x(b.prototype=new m.baseCalendar,{name:"Taiwan",jdEpoch:2419402.5,yearsOffset:1911,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Taiwan",epochs:["BROC","ROC"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:1,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return e=this._t2gYear(o.year()),T.leapYear(e)},weekOfYear:function(e,o,a){var l=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return e=this._t2gYear(l.year()),T.weekOfYear(e,l.month(),l.day())},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,m.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(2===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(e,o,a){return(this.dayOfWeek(e,o,a)||7)<6},toJD:function(e,o,a){var l=this._validate(e,o,a,m.local.invalidDate);return e=this._t2gYear(l.year()),T.toJD(e,l.month(),l.day())},fromJD:function(e){var o=T.fromJD(e),a=this._g2tYear(o.year());return this.newDate(a,o.month(),o.day())},_t2gYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)},_g2tYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)}}),m.calendars.taiwan=b},{"../main":346,"object-assign":247}],344:[function(_,oe,ae){var m=_("../main"),x=_("object-assign"),T=m.instance();function b(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}x(b.prototype=new m.baseCalendar,{name:"Thai",jdEpoch:1523098.5,yearsOffset:543,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Thai",epochs:["BBE","BE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"dd/mm/yyyy",firstDay:0,isRTL:!1}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return e=this._t2gYear(o.year()),T.leapYear(e)},weekOfYear:function(e,o,a){var l=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return e=this._t2gYear(l.year()),T.weekOfYear(e,l.month(),l.day())},daysInMonth:function(e,o){var a=this._validate(e,o,this.minDay,m.local.invalidMonth);return this.daysPerMonth[a.month()-1]+(2===a.month()&&this.leapYear(a.year())?1:0)},weekDay:function(e,o,a){return(this.dayOfWeek(e,o,a)||7)<6},toJD:function(e,o,a){var l=this._validate(e,o,a,m.local.invalidDate);return e=this._t2gYear(l.year()),T.toJD(e,l.month(),l.day())},fromJD:function(e){var o=T.fromJD(e),a=this._g2tYear(o.year());return this.newDate(a,o.month(),o.day())},_t2gYear:function(e){return e-this.yearsOffset-(e>=1&&e<=this.yearsOffset?1:0)},_g2tYear:function(e){return e+this.yearsOffset+(e>=-this.yearsOffset&&e<=-1?1:0)}}),m.calendars.thai=b},{"../main":346,"object-assign":247}],345:[function(_,oe,ae){var m=_("../main");function T(e){this.local=this.regionalOptions[e||""]||this.regionalOptions[""]}_("object-assign")(T.prototype=new m.baseCalendar,{name:"UmmAlQura",hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Umm al-Qura",epochs:["BH","AH"],monthNames:["Al-Muharram","Safar","Rabi' al-awwal","Rabi' Al-Thani","Jumada Al-Awwal","Jumada Al-Thani","Rajab","Sha'aban","Ramadan","Shawwal","Dhu al-Qi'dah","Dhu al-Hijjah"],monthNamesShort:["Muh","Saf","Rab1","Rab2","Jum1","Jum2","Raj","Sha'","Ram","Shaw","DhuQ","DhuH"],dayNames:["Yawm al-Ahad","Yawm al-Ithnain","Yawm al-Thal\u0101th\u0101\u2019","Yawm al-Arba\u2018\u0101\u2019","Yawm al-Kham\u012bs","Yawm al-Jum\u2018a","Yawm al-Sabt"],dayNamesMin:["Ah","Ith","Th","Ar","Kh","Ju","Sa"],digits:null,dateFormat:"yyyy/mm/dd",firstDay:6,isRTL:!0}},leapYear:function(e){var o=this._validate(e,this.minMonth,this.minDay,m.local.invalidYear);return 355===this.daysInYear(o.year())},weekOfYear:function(e,o,a){var l=this.newDate(e,o,a);return l.add(-l.dayOfWeek(),"d"),Math.floor((l.dayOfYear()-1)/7)+1},daysInYear:function(e){for(var o=0,a=1;a<=12;a++)o+=this.daysInMonth(e,a);return o},daysInMonth:function(e,o){for(var a=this._validate(e,o,this.minDay,m.local.invalidMonth).toJD()-24e5+.5,l=0,i=0;i<b.length;i++){if(b[i]>a)return b[l]-b[l-1];l++}return 30},weekDay:function(e,o,a){return 5!==this.dayOfWeek(e,o,a)},toJD:function(e,o,a){var l=this._validate(e,o,a,m.local.invalidDate),i=12*(l.year()-1)+l.month()-15292;return l.day()+b[i-1]-1+24e5-.5},fromJD:function(e){for(var o=e-24e5+.5,a=0,l=0;l<b.length&&!(b[l]>o);l++)a++;var i=a+15292,d=Math.floor((i-1)/12);return this.newDate(d+1,i-12*d,o-b[a-1]+1)},isValid:function(e,o,a){var l=m.baseCalendar.prototype.isValid.apply(this,arguments);return l&&(l=(e=null!=e.year?e.year:e)>=1276&&e<=1500),l},_validate:function(e,o,a,l){var i=m.baseCalendar.prototype._validate.apply(this,arguments);if(i.year<1276||i.year>1500)throw l.replace(/\{0\}/,this.local.name);return i}}),m.calendars.ummalqura=T;var b=[20,50,79,109,138,168,197,227,256,286,315,345,374,404,433,463,492,522,551,581,611,641,670,700,729,759,788,818,847,877,906,936,965,995,1024,1054,1083,1113,1142,1172,1201,1231,1260,1290,1320,1350,1379,1409,1438,1468,1497,1527,1556,1586,1615,1645,1674,1704,1733,1763,1792,1822,1851,1881,1910,1940,1969,1999,2028,2058,2087,2117,2146,2176,2205,2235,2264,2294,2323,2353,2383,2413,2442,2472,2501,2531,2560,2590,2619,2649,2678,2708,2737,2767,2796,2826,2855,2885,2914,2944,2973,3003,3032,3062,3091,3121,3150,3180,3209,3239,3268,3298,3327,3357,3386,3416,3446,3476,3505,3535,3564,3594,3623,3653,3682,3712,3741,3771,3800,3830,3859,3889,3918,3948,3977,4007,4036,4066,4095,4125,4155,4185,4214,4244,4273,4303,4332,4362,4391,4421,4450,4480,4509,4539,4568,4598,4627,4657,4686,4716,4745,4775,4804,4834,4863,4893,4922,4952,4981,5011,5040,5070,5099,5129,5158,5188,5218,5248,5277,5307,5336,5366,5395,5425,5454,5484,5513,5543,5572,5602,5631,5661,5690,5720,5749,5779,5808,5838,5867,5897,5926,5956,5985,6015,6044,6074,6103,6133,6162,6192,6221,6251,6281,6311,6340,6370,6399,6429,6458,6488,6517,6547,6576,6606,6635,6665,6694,6724,6753,6783,6812,6842,6871,6901,6930,6960,6989,7019,7048,7078,7107,7137,7166,7196,7225,7255,7284,7314,7344,7374,7403,7433,7462,7492,7521,7551,7580,7610,7639,7669,7698,7728,7757,7787,7816,7846,7875,7905,7934,7964,7993,8023,8053,8083,8112,8142,8171,8201,8230,8260,8289,8319,8348,8378,8407,8437,8466,8496,8525,8555,8584,8614,8643,8673,8702,8732,8761,8791,8821,8850,8880,8909,8938,8968,8997,9027,9056,9086,9115,9145,9175,9205,9234,9264,9293,9322,9352,9381,9410,9440,9470,9499,9529,9559,9589,9618,9648,9677,9706,9736,9765,9794,9824,9853,9883,9913,9943,9972,10002,10032,10061,10090,10120,10149,10178,10208,10237,10267,10297,10326,10356,10386,10415,10445,10474,10504,10533,10562,10592,10621,10651,10680,10710,10740,10770,10799,10829,10858,10888,10917,10947,10976,11005,11035,11064,11094,11124,11153,11183,11213,11242,11272,11301,11331,11360,11389,11419,11448,11478,11507,11537,11567,11596,11626,11655,11685,11715,11744,11774,11803,11832,11862,11891,11921,11950,11980,12010,12039,12069,12099,12128,12158,12187,12216,12246,12275,12304,12334,12364,12393,12423,12453,12483,12512,12542,12571,12600,12630,12659,12688,12718,12747,12777,12807,12837,12866,12896,12926,12955,12984,13014,13043,13072,13102,13131,13161,13191,13220,13250,13280,13310,13339,13368,13398,13427,13456,13486,13515,13545,13574,13604,13634,13664,13693,13723,13752,13782,13811,13840,13870,13899,13929,13958,13988,14018,14047,14077,14107,14136,14166,14195,14224,14254,14283,14313,14342,14372,14401,14431,14461,14490,14520,14550,14579,14609,14638,14667,14697,14726,14756,14785,14815,14844,14874,14904,14933,14963,14993,15021,15051,15081,15110,15140,15169,15199,15228,15258,15287,15317,15347,15377,15406,15436,15465,15494,15524,15553,15582,15612,15641,15671,15701,15731,15760,15790,15820,15849,15878,15908,15937,15966,15996,16025,16055,16085,16114,16144,16174,16204,16233,16262,16292,16321,16350,16380,16409,16439,16468,16498,16528,16558,16587,16617,16646,16676,16705,16734,16764,16793,16823,16852,16882,16912,16941,16971,17001,17030,17060,17089,17118,17148,17177,17207,17236,17266,17295,17325,17355,17384,17414,17444,17473,17502,17532,17561,17591,17620,17650,17679,17709,17738,17768,17798,17827,17857,17886,17916,17945,17975,18004,18034,18063,18093,18122,18152,18181,18211,18241,18270,18300,18330,18359,18388,18418,18447,18476,18506,18535,18565,18595,18625,18654,18684,18714,18743,18772,18802,18831,18860,18890,18919,18949,18979,19008,19038,19068,19098,19127,19156,19186,19215,19244,19274,19303,19333,19362,19392,19422,19452,19481,19511,19540,19570,19599,19628,19658,19687,19717,19746,19776,19806,19836,19865,19895,19924,19954,19983,20012,20042,20071,20101,20130,20160,20190,20219,20249,20279,20308,20338,20367,20396,20426,20455,20485,20514,20544,20573,20603,20633,20662,20692,20721,20751,20780,20810,20839,20869,20898,20928,20957,20987,21016,21046,21076,21105,21135,21164,21194,21223,21253,21282,21312,21341,21371,21400,21430,21459,21489,21519,21548,21578,21607,21637,21666,21696,21725,21754,21784,21813,21843,21873,21902,21932,21962,21991,22021,22050,22080,22109,22138,22168,22197,22227,22256,22286,22316,22346,22375,22405,22434,22464,22493,22522,22552,22581,22611,22640,22670,22700,22730,22759,22789,22818,22848,22877,22906,22936,22965,22994,23024,23054,23083,23113,23143,23173,23202,23232,23261,23290,23320,23349,23379,23408,23438,23467,23497,23527,23556,23586,23616,23645,23674,23704,23733,23763,23792,23822,23851,23881,23910,23940,23970,23999,24029,24058,24088,24117,24147,24176,24206,24235,24265,24294,24324,24353,24383,24413,24442,24472,24501,24531,24560,24590,24619,24648,24678,24707,24737,24767,24796,24826,24856,24885,24915,24944,24974,25003,25032,25062,25091,25121,25150,25180,25210,25240,25269,25299,25328,25358,25387,25416,25446,25475,25505,25534,25564,25594,25624,25653,25683,25712,25742,25771,25800,25830,25859,25888,25918,25948,25977,26007,26037,26067,26096,26126,26155,26184,26214,26243,26272,26302,26332,26361,26391,26421,26451,26480,26510,26539,26568,26598,26627,26656,26686,26715,26745,26775,26805,26834,26864,26893,26923,26952,26982,27011,27041,27070,27099,27129,27159,27188,27218,27248,27277,27307,27336,27366,27395,27425,27454,27484,27513,27542,27572,27602,27631,27661,27691,27720,27750,27779,27809,27838,27868,27897,27926,27956,27985,28015,28045,28074,28104,28134,28163,28193,28222,28252,28281,28310,28340,28369,28399,28428,28458,28488,28517,28547,28577,28607,28636,28665,28695,28724,28754,28783,28813,28843,28872,28901,28931,28960,28990,29019,29049,29078,29108,29137,29167,29196,29226,29255,29285,29315,29345,29375,29404,29434,29463,29492,29522,29551,29580,29610,29640,29669,29699,29729,29759,29788,29818,29847,29876,29906,29935,29964,29994,30023,30053,30082,30112,30141,30171,30200,30230,30259,30289,30318,30348,30378,30408,30437,30467,30496,30526,30555,30585,30614,30644,30673,30703,30732,30762,30791,30821,30850,30880,30909,30939,30968,30998,31027,31057,31086,31116,31145,31175,31204,31234,31263,31293,31322,31352,31381,31411,31441,31471,31500,31530,31559,31589,31618,31648,31676,31706,31736,31766,31795,31825,31854,31884,31913,31943,31972,32002,32031,32061,32090,32120,32150,32180,32209,32239,32268,32298,32327,32357,32386,32416,32445,32475,32504,32534,32563,32593,32622,32652,32681,32711,32740,32770,32799,32829,32858,32888,32917,32947,32976,33006,33035,33065,33094,33124,33153,33183,33213,33243,33272,33302,33331,33361,33390,33420,33450,33479,33509,33539,33568,33598,33627,33657,33686,33716,33745,33775,33804,33834,33863,33893,33922,33952,33981,34011,34040,34069,34099,34128,34158,34187,34217,34247,34277,34306,34336,34365,34395,34424,34454,34483,34512,34542,34571,34601,34631,34660,34690,34719,34749,34778,34808,34837,34867,34896,34926,34955,34985,35015,35044,35074,35103,35133,35162,35192,35222,35251,35280,35310,35340,35370,35399,35429,35458,35488,35517,35547,35576,35605,35635,35665,35694,35723,35753,35782,35811,35841,35871,35901,35930,35960,35989,36019,36048,36078,36107,36136,36166,36195,36225,36254,36284,36314,36343,36373,36403,36433,36462,36492,36521,36551,36580,36610,36639,36669,36698,36728,36757,36786,36816,36845,36875,36904,36934,36963,36993,37022,37052,37081,37111,37141,37170,37200,37229,37259,37288,37318,37347,37377,37406,37436,37465,37495,37524,37554,37584,37613,37643,37672,37701,37731,37760,37790,37819,37849,37878,37908,37938,37967,37997,38027,38056,38085,38115,38144,38174,38203,38233,38262,38292,38322,38351,38381,38410,38440,38469,38499,38528,38558,38587,38617,38646,38676,38705,38735,38764,38794,38823,38853,38882,38912,38941,38971,39001,39030,39059,39089,39118,39148,39178,39208,39237,39267,39297,39326,39355,39385,39414,39444,39473,39503,39532,39562,39592,39621,39650,39680,39709,39739,39768,39798,39827,39857,39886,39916,39946,39975,40005,40035,40064,40094,40123,40153,40182,40212,40241,40271,40300,40330,40359,40389,40418,40448,40477,40507,40536,40566,40595,40625,40655,40685,40714,40744,40773,40803,40832,40862,40892,40921,40951,40980,41009,41039,41068,41098,41127,41157,41186,41216,41245,41275,41304,41334,41364,41393,41422,41452,41481,41511,41540,41570,41599,41629,41658,41688,41718,41748,41777,41807,41836,41865,41894,41924,41953,41983,42012,42042,42072,42102,42131,42161,42190,42220,42249,42279,42308,42337,42367,42397,42426,42456,42485,42515,42545,42574,42604,42633,42662,42692,42721,42751,42780,42810,42839,42869,42899,42929,42958,42988,43017,43046,43076,43105,43135,43164,43194,43223,43253,43283,43312,43342,43371,43401,43430,43460,43489,43519,43548,43578,43607,43637,43666,43696,43726,43755,43785,43814,43844,43873,43903,43932,43962,43991,44021,44050,44080,44109,44139,44169,44198,44228,44258,44287,44317,44346,44375,44405,44434,44464,44493,44523,44553,44582,44612,44641,44671,44700,44730,44759,44788,44818,44847,44877,44906,44936,44966,44996,45025,45055,45084,45114,45143,45172,45202,45231,45261,45290,45320,45350,45380,45409,45439,45468,45498,45527,45556,45586,45615,45644,45674,45704,45733,45763,45793,45823,45852,45882,45911,45940,45970,45999,46028,46058,46088,46117,46147,46177,46206,46236,46265,46295,46324,46354,46383,46413,46442,46472,46501,46531,46560,46590,46620,46649,46679,46708,46738,46767,46797,46826,46856,46885,46915,46944,46974,47003,47033,47063,47092,47122,47151,47181,47210,47240,47269,47298,47328,47357,47387,47417,47446,47476,47506,47535,47565,47594,47624,47653,47682,47712,47741,47771,47800,47830,47860,47890,47919,47949,47978,48008,48037,48066,48096,48125,48155,48184,48214,48244,48273,48303,48333,48362,48392,48421,48450,48480,48509,48538,48568,48598,48627,48657,48687,48717,48746,48776,48805,48834,48864,48893,48922,48952,48982,49011,49041,49071,49100,49130,49160,49189,49218,49248,49277,49306,49336,49365,49395,49425,49455,49484,49514,49543,49573,49602,49632,49661,49690,49720,49749,49779,49809,49838,49868,49898,49927,49957,49986,50016,50045,50075,50104,50133,50163,50192,50222,50252,50281,50311,50340,50370,50400,50429,50459,50488,50518,50547,50576,50606,50635,50665,50694,50724,50754,50784,50813,50843,50872,50902,50931,50960,50990,51019,51049,51078,51108,51138,51167,51197,51227,51256,51286,51315,51345,51374,51403,51433,51462,51492,51522,51552,51582,51611,51641,51670,51699,51729,51758,51787,51816,51846,51876,51906,51936,51965,51995,52025,52054,52083,52113,52142,52171,52200,52230,52260,52290,52319,52349,52379,52408,52438,52467,52497,52526,52555,52585,52614,52644,52673,52703,52733,52762,52792,52822,52851,52881,52910,52939,52969,52998,53028,53057,53087,53116,53146,53176,53205,53235,53264,53294,53324,53353,53383,53412,53441,53471,53500,53530,53559,53589,53619,53648,53678,53708,53737,53767,53796,53825,53855,53884,53913,53943,53973,54003,54032,54062,54092,54121,54151,54180,54209,54239,54268,54297,54327,54357,54387,54416,54446,54476,54505,54535,54564,54593,54623,54652,54681,54711,54741,54770,54800,54830,54859,54889,54919,54948,54977,55007,55036,55066,55095,55125,55154,55184,55213,55243,55273,55302,55332,55361,55391,55420,55450,55479,55508,55538,55567,55597,55627,55657,55686,55716,55745,55775,55804,55834,55863,55892,55922,55951,55981,56011,56040,56070,56100,56129,56159,56188,56218,56247,56276,56306,56335,56365,56394,56424,56454,56483,56513,56543,56572,56601,56631,56660,56690,56719,56749,56778,56808,56837,56867,56897,56926,56956,56985,57015,57044,57074,57103,57133,57162,57192,57221,57251,57280,57310,57340,57369,57399,57429,57458,57487,57517,57546,57576,57605,57634,57664,57694,57723,57753,57783,57813,57842,57871,57901,57930,57959,57989,58018,58048,58077,58107,58137,58167,58196,58226,58255,58285,58314,58343,58373,58402,58432,58461,58491,58521,58551,58580,58610,58639,58669,58698,58727,58757,58786,58816,58845,58875,58905,58934,58964,58994,59023,59053,59082,59111,59141,59170,59200,59229,59259,59288,59318,59348,59377,59407,59436,59466,59495,59525,59554,59584,59613,59643,59672,59702,59731,59761,59791,59820,59850,59879,59909,59939,59968,59997,60027,60056,60086,60115,60145,60174,60204,60234,60264,60293,60323,60352,60381,60411,60440,60469,60499,60528,60558,60588,60618,60648,60677,60707,60736,60765,60795,60824,60853,60883,60912,60942,60972,61002,61031,61061,61090,61120,61149,61179,61208,61237,61267,61296,61326,61356,61385,61415,61445,61474,61504,61533,61563,61592,61621,61651,61680,61710,61739,61769,61799,61828,61858,61888,61917,61947,61976,62006,62035,62064,62094,62123,62153,62182,62212,62242,62271,62301,62331,62360,62390,62419,62448,62478,62507,62537,62566,62596,62625,62655,62685,62715,62744,62774,62803,62832,62862,62891,62921,62950,62980,63009,63039,63069,63099,63128,63157,63187,63216,63246,63275,63305,63334,63363,63393,63423,63453,63482,63512,63541,63571,63600,63630,63659,63689,63718,63747,63777,63807,63836,63866,63895,63925,63955,63984,64014,64043,64073,64102,64131,64161,64190,64220,64249,64279,64309,64339,64368,64398,64427,64457,64486,64515,64545,64574,64603,64633,64663,64692,64722,64752,64782,64811,64841,64870,64899,64929,64958,64987,65017,65047,65076,65106,65136,65166,65195,65225,65254,65283,65313,65342,65371,65401,65431,65460,65490,65520,65549,65579,65608,65638,65667,65697,65726,65755,65785,65815,65844,65874,65903,65933,65963,65992,66022,66051,66081,66110,66140,66169,66199,66228,66258,66287,66317,66346,66376,66405,66435,66465,66494,66524,66553,66583,66612,66641,66671,66700,66730,66760,66789,66819,66849,66878,66908,66937,66967,66996,67025,67055,67084,67114,67143,67173,67203,67233,67262,67292,67321,67351,67380,67409,67439,67468,67497,67527,67557,67587,67617,67646,67676,67705,67735,67764,67793,67823,67852,67882,67911,67941,67971,68e3,68030,68060,68089,68119,68148,68177,68207,68236,68266,68295,68325,68354,68384,68414,68443,68473,68502,68532,68561,68591,68620,68650,68679,68708,68738,68768,68797,68827,68857,68886,68916,68946,68975,69004,69034,69063,69092,69122,69152,69181,69211,69240,69270,69300,69330,69359,69388,69418,69447,69476,69506,69535,69565,69595,69624,69654,69684,69713,69743,69772,69802,69831,69861,69890,69919,69949,69978,70008,70038,70067,70097,70126,70156,70186,70215,70245,70274,70303,70333,70362,70392,70421,70451,70481,70510,70540,70570,70599,70629,70658,70687,70717,70746,70776,70805,70835,70864,70894,70924,70954,70983,71013,71042,71071,71101,71130,71159,71189,71218,71248,71278,71308,71337,71367,71397,71426,71455,71485,71514,71543,71573,71602,71632,71662,71691,71721,71751,71781,71810,71839,71869,71898,71927,71957,71986,72016,72046,72075,72105,72135,72164,72194,72223,72253,72282,72311,72341,72370,72400,72429,72459,72489,72518,72548,72577,72607,72637,72666,72695,72725,72754,72784,72813,72843,72872,72902,72931,72961,72991,73020,73050,73080,73109,73139,73168,73197,73227,73256,73286,73315,73345,73375,73404,73434,73464,73493,73523,73552,73581,73611,73640,73669,73699,73729,73758,73788,73818,73848,73877,73907,73936,73965,73995,74024,74053,74083,74113,74142,74172,74202,74231,74261,74291,74320,74349,74379,74408,74437,74467,74497,74526,74556,74586,74615,74645,74675,74704,74733,74763,74792,74822,74851,74881,74910,74940,74969,74999,75029,75058,75088,75117,75147,75176,75206,75235,75264,75294,75323,75353,75383,75412,75442,75472,75501,75531,75560,75590,75619,75648,75678,75707,75737,75766,75796,75826,75856,75885,75915,75944,75974,76003,76032,76062,76091,76121,76150,76180,76210,76239,76269,76299,76328,76358,76387,76416,76446,76475,76505,76534,76564,76593,76623,76653,76682,76712,76741,76771,76801,76830,76859,76889,76918,76948,76977,77007,77036,77066,77096,77125,77155,77185,77214,77243,77273,77302,77332,77361,77390,77420,77450,77479,77509,77539,77569,77598,77627,77657,77686,77715,77745,77774,77804,77833,77863,77893,77923,77952,77982,78011,78041,78070,78099,78129,78158,78188,78217,78247,78277,78307,78336,78366,78395,78425,78454,78483,78513,78542,78572,78601,78631,78661,78690,78720,78750,78779,78808,78838,78867,78897,78926,78956,78985,79015,79044,79074,79104,79133,79163,79192,79222,79251,79281,79310,79340,79369,79399,79428,79458,79487,79517,79546,79576,79606,79635,79665,79695,79724,79753,79783,79812,79841,79871,79900,79930,79960,79990]},{"../main":346,"object-assign":247}],346:[function(_,oe,ae){var m=_("object-assign");function x(){this.regionalOptions=[],this.regionalOptions[""]={invalidCalendar:"Calendar {0} not found",invalidDate:"Invalid {0} date",invalidMonth:"Invalid {0} month",invalidYear:"Invalid {0} year",differentCalendars:"Cannot mix {0} and {1} dates"},this.local=this.regionalOptions[""],this.calendars={},this._localCals={}}function T(l,i,d,u){if(this._calendar=l,this._year=i,this._month=d,this._day=u,0===this._calendar._validateLevel&&!this._calendar.isValid(this._year,this._month,this._day))throw(a.local.invalidDate||a.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name)}function b(l,i){return"000000".substring(0,i-(l=""+l).length)+l}function e(){this.shortYearCutoff="+10"}function o(l){this.local=this.regionalOptions[l]||this.regionalOptions[""]}m(x.prototype,{instance:function(l,i){l=(l||"gregorian").toLowerCase();var d=this._localCals[l+"-"+(i=i||"")];if(!d&&this.calendars[l]&&(d=new this.calendars[l](i),this._localCals[l+"-"+i]=d),!d)throw(this.local.invalidCalendar||this.regionalOptions[""].invalidCalendar).replace(/\{0\}/,l);return d},newDate:function(l,i,d,u,s){return(u=(null!=l&&l.year?l.calendar():"string"==typeof u?this.instance(u,s):u)||this.instance()).newDate(l,i,d)},substituteDigits:function(l){return function(i){return(i+"").replace(/[0-9]/g,function(d){return l[d]})}},substituteChineseDigits:function(l,i){return function(d){for(var u="",s=0;d>0;){var c=d%10;u=(0===c?"":l[c]+i[s])+u,s++,d=Math.floor(d/10)}return 0===u.indexOf(l[1]+i[1])&&(u=u.substr(1)),u||l[0]}}}),m(T.prototype,{newDate:function(l,i,d){return this._calendar.newDate(null==l?this:l,i,d)},year:function(l){return 0===arguments.length?this._year:this.set(l,"y")},month:function(l){return 0===arguments.length?this._month:this.set(l,"m")},day:function(l){return 0===arguments.length?this._day:this.set(l,"d")},date:function(l,i,d){if(!this._calendar.isValid(l,i,d))throw(a.local.invalidDate||a.regionalOptions[""].invalidDate).replace(/\{0\}/,this._calendar.local.name);return this._year=l,this._month=i,this._day=d,this},leapYear:function(){return this._calendar.leapYear(this)},epoch:function(){return this._calendar.epoch(this)},formatYear:function(){return this._calendar.formatYear(this)},monthOfYear:function(){return this._calendar.monthOfYear(this)},weekOfYear:function(){return this._calendar.weekOfYear(this)},daysInYear:function(){return this._calendar.daysInYear(this)},dayOfYear:function(){return this._calendar.dayOfYear(this)},daysInMonth:function(){return this._calendar.daysInMonth(this)},dayOfWeek:function(){return this._calendar.dayOfWeek(this)},weekDay:function(){return this._calendar.weekDay(this)},extraInfo:function(){return this._calendar.extraInfo(this)},add:function(l,i){return this._calendar.add(this,l,i)},set:function(l,i){return this._calendar.set(this,l,i)},compareTo:function(l){if(this._calendar.name!==l._calendar.name)throw(a.local.differentCalendars||a.regionalOptions[""].differentCalendars).replace(/\{0\}/,this._calendar.local.name).replace(/\{1\}/,l._calendar.local.name);var i=this._year!==l._year?this._year-l._year:this._month!==l._month?this.monthOfYear()-l.monthOfYear():this._day-l._day;return 0===i?0:i<0?-1:1},calendar:function(){return this._calendar},toJD:function(){return this._calendar.toJD(this)},fromJD:function(l){return this._calendar.fromJD(l)},toJSDate:function(){return this._calendar.toJSDate(this)},fromJSDate:function(l){return this._calendar.fromJSDate(l)},toString:function(){return(this.year()<0?"-":"")+b(Math.abs(this.year()),4)+"-"+b(this.month(),2)+"-"+b(this.day(),2)}}),m(e.prototype,{_validateLevel:0,newDate:function(l,i,d){return null==l?this.today():(l.year&&(this._validate(l,i,d,a.local.invalidDate||a.regionalOptions[""].invalidDate),d=l.day(),i=l.month(),l=l.year()),new T(this,l,i,d))},today:function(){return this.fromJSDate(new Date)},epoch:function(l){return this._validate(l,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear).year()<0?this.local.epochs[0]:this.local.epochs[1]},formatYear:function(l){var i=this._validate(l,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return(i.year()<0?"-":"")+b(Math.abs(i.year()),4)},monthsInYear:function(l){return this._validate(l,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear),12},monthOfYear:function(l,i){var d=this._validate(l,i,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth);return(d.month()+this.monthsInYear(d)-this.firstMonth)%this.monthsInYear(d)+this.minMonth},fromMonthOfYear:function(l,i){var d=(i+this.firstMonth-2*this.minMonth)%this.monthsInYear(l)+this.minMonth;return this._validate(l,d,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth),d},daysInYear:function(l){var i=this._validate(l,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return this.leapYear(i)?366:365},dayOfYear:function(l,i,d){var u=this._validate(l,i,d,a.local.invalidDate||a.regionalOptions[""].invalidDate);return u.toJD()-this.newDate(u.year(),this.fromMonthOfYear(u.year(),this.minMonth),this.minDay).toJD()+1},daysInWeek:function(){return 7},dayOfWeek:function(l,i,d){var u=this._validate(l,i,d,a.local.invalidDate||a.regionalOptions[""].invalidDate);return(Math.floor(this.toJD(u))+2)%this.daysInWeek()},extraInfo:function(l,i,d){return this._validate(l,i,d,a.local.invalidDate||a.regionalOptions[""].invalidDate),{}},add:function(l,i,d){return this._validate(l,this.minMonth,this.minDay,a.local.invalidDate||a.regionalOptions[""].invalidDate),this._correctAdd(l,this._add(l,i,d),i,d)},_add:function(l,i,d){if(this._validateLevel++,"d"===d||"w"===d){var u=l.toJD()+i*("w"===d?this.daysInWeek():1),s=l.calendar().fromJD(u);return this._validateLevel--,[s.year(),s.month(),s.day()]}try{var c=l.year()+("y"===d?i:0),h=l.monthOfYear()+("m"===d?i:0);s=l.day(),"y"===d?(l.month()!==this.fromMonthOfYear(c,h)&&(h=this.newDate(c,l.month(),this.minDay).monthOfYear()),h=Math.min(h,this.monthsInYear(c)),s=Math.min(s,this.daysInMonth(c,this.fromMonthOfYear(c,h)))):"m"===d&&(function(v){for(;h<v.minMonth;)c--,h+=v.monthsInYear(c);for(var g=v.monthsInYear(c);h>g-1+v.minMonth;)c++,h-=g,g=v.monthsInYear(c)}(this),s=Math.min(s,this.daysInMonth(c,this.fromMonthOfYear(c,h))));var p=[c,this.fromMonthOfYear(c,h),s];return this._validateLevel--,p}catch(v){throw this._validateLevel--,v}},_correctAdd:function(l,i,d,u){if(!(this.hasYearZero||"y"!==u&&"m"!==u||0!==i[0]&&l.year()>0==i[0]>0)){var s={y:[1,1,"y"],m:[1,this.monthsInYear(-1),"m"],w:[this.daysInWeek(),this.daysInYear(-1),"d"],d:[1,this.daysInYear(-1),"d"]}[u];i=this._add(l,d*s[0]+(d<0?-1:1)*s[1],s[2])}return l.date(i[0],i[1],i[2])},set:function(l,i,d){this._validate(l,this.minMonth,this.minDay,a.local.invalidDate||a.regionalOptions[""].invalidDate);var u="y"===d?i:l.year(),s="m"===d?i:l.month(),c="d"===d?i:l.day();return"y"!==d&&"m"!==d||(c=Math.min(c,this.daysInMonth(u,s))),l.date(u,s,c)},isValid:function(l,i,d){this._validateLevel++;var u=this.hasYearZero||0!==l;if(u){var s=this.newDate(l,i,this.minDay);u=i>=this.minMonth&&i-this.minMonth<this.monthsInYear(s)&&d>=this.minDay&&d-this.minDay<this.daysInMonth(s)}return this._validateLevel--,u},toJSDate:function(l,i,d){var u=this._validate(l,i,d,a.local.invalidDate||a.regionalOptions[""].invalidDate);return a.instance().fromJD(this.toJD(u)).toJSDate()},fromJSDate:function(l){return this.fromJD(a.instance().fromJSDate(l).toJD())},_validate:function(l,i,d,u){if(l.year){if(0===this._validateLevel&&this.name!==l.calendar().name)throw(a.local.differentCalendars||a.regionalOptions[""].differentCalendars).replace(/\{0\}/,this.local.name).replace(/\{1\}/,l.calendar().local.name);return l}try{if(this._validateLevel++,1===this._validateLevel&&!this.isValid(l,i,d))throw u.replace(/\{0\}/,this.local.name);var s=this.newDate(l,i,d);return this._validateLevel--,s}catch(c){throw this._validateLevel--,c}}}),m(o.prototype=new e,{name:"Gregorian",jdEpoch:1721425.5,daysPerMonth:[31,28,31,30,31,30,31,31,30,31,30,31],hasYearZero:!1,minMonth:1,firstMonth:1,minDay:1,regionalOptions:{"":{name:"Gregorian",epochs:["BCE","CE"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],digits:null,dateFormat:"mm/dd/yyyy",firstDay:0,isRTL:!1}},leapYear:function(l){var i=this._validate(l,this.minMonth,this.minDay,a.local.invalidYear||a.regionalOptions[""].invalidYear);return(l=i.year()+(i.year()<0?1:0))%4==0&&(l%100!=0||l%400==0)},weekOfYear:function(l,i,d){var u=this.newDate(l,i,d);return u.add(4-(u.dayOfWeek()||7),"d"),Math.floor((u.dayOfYear()-1)/7)+1},daysInMonth:function(l,i){var d=this._validate(l,i,this.minDay,a.local.invalidMonth||a.regionalOptions[""].invalidMonth);return this.daysPerMonth[d.month()-1]+(2===d.month()&&this.leapYear(d.year())?1:0)},weekDay:function(l,i,d){return(this.dayOfWeek(l,i,d)||7)<6},toJD:function(l,i,d){var u=this._validate(l,i,d,a.local.invalidDate||a.regionalOptions[""].invalidDate);l=u.year(),i=u.month(),d=u.day(),l<0&&l++,i<3&&(i+=12,l--);var s=Math.floor(l/100),c=2-s+Math.floor(s/4);return Math.floor(365.25*(l+4716))+Math.floor(30.6001*(i+1))+d+c-1524.5},fromJD:function(l){var i=Math.floor(l+.5),d=Math.floor((i-1867216.25)/36524.25),u=1524+(d=i+1+d-Math.floor(d/4)),s=Math.floor((u-122.1)/365.25),c=Math.floor(365.25*s),h=Math.floor((u-c)/30.6001),p=u-c-Math.floor(30.6001*h),v=h-(h>13.5?13:1),g=s-(v>2.5?4716:4715);return g<=0&&g--,this.newDate(g,v,p)},toJSDate:function(l,i,d){var u=this._validate(l,i,d,a.local.invalidDate||a.regionalOptions[""].invalidDate),s=new Date(u.year(),u.month()-1,u.day());return s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0),s.setHours(s.getHours()>12?s.getHours()+2:0),s},fromJSDate:function(l){return this.newDate(l.getFullYear(),l.getMonth()+1,l.getDate())}});var a=oe.exports=new x;a.cdate=T,a.baseCalendar=e,a.calendars.gregorian=o},{"object-assign":247}],347:[function(_,oe,ae){var m=_("object-assign"),x=_("./main");m(x.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),x.local=x.regionalOptions[""],m(x.cdate.prototype,{formatDate:function(T,b){return"string"!=typeof T&&(b=T,T=""),this._calendar.formatDate(T||"",this,b)}}),m(x.baseCalendar.prototype,{UNIX_EPOCH:x.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:x.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(T,b,e){if("string"!=typeof T&&(e=b,b=T,T=""),!b)return"";if(b.calendar()!==this)throw x.local.invalidFormat||x.regionalOptions[""].invalidFormat;T=T||this.local.dateFormat;for(var a,l,i,d=(e=e||{}).dayNamesShort||this.local.dayNamesShort,u=e.dayNames||this.local.dayNames,s=e.monthNumbers||this.local.monthNumbers,c=e.monthNamesShort||this.local.monthNamesShort,h=e.monthNames||this.local.monthNames,p=function(P,D){for(var F=1;C+F<T.length&&T.charAt(C+F)===P;)F++;return C+=F-1,Math.floor(F/(D||1))>1},v=function(P,D,F,R){var L=""+D;if(p(P,R))for(;L.length<F;)L="0"+L;return L},g=this,w=function(P,D){return D?"function"==typeof h?h.call(g,P):h[P.month()-g.minMonth]:"function"==typeof c?c.call(g,P):c[P.month()-g.minMonth]},y=this.local.digits,M=function(P){return e.localNumbers&&y?y(P):P},A="",k=!1,C=0;C<T.length;C++)if(k)"'"!==T.charAt(C)||p("'")?A+=T.charAt(C):k=!1;else switch(T.charAt(C)){case"d":A+=M(v("d",b.day(),2));break;case"D":A+=("D",a=b.dayOfWeek(),l=d,i=u,p("D")?i[a]:l[a]);break;case"o":A+=v("o",b.dayOfYear(),3);break;case"w":A+=v("w",b.weekOfYear(),2);break;case"m":A+=(P=b,"function"==typeof s?s.call(g,P,p("m")):M(v("m",P.month(),2)));break;case"M":A+=w(b,p("M"));break;case"y":A+=p("y",2)?b.year():(b.year()%100<10?"0":"")+b.year()%100;break;case"Y":p("Y",2),A+=b.formatYear();break;case"J":A+=b.toJD();break;case"@":A+=(b.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":A+=(b.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":p("'")?A+="'":k=!0;break;default:A+=T.charAt(C)}var P;return A},parseDate:function(T,b,e){if(null==b)throw x.local.invalidArguments||x.regionalOptions[""].invalidArguments;if(""===(b="object"==typeof b?b.toString():b+""))return null;T=T||this.local.dateFormat;var o=(e=e||{}).shortYearCutoff||this.shortYearCutoff;o="string"!=typeof o?o:this.today().year()%100+parseInt(o,10);for(var a=e.dayNamesShort||this.local.dayNamesShort,l=e.dayNames||this.local.dayNames,i=e.parseMonth||this.local.parseMonth,d=e.monthNumbers||this.local.monthNumbers,u=e.monthNamesShort||this.local.monthNamesShort,s=e.monthNames||this.local.monthNames,c=-1,h=-1,p=-1,v=-1,g=-1,f=!1,w=!1,y=function(B,V){for(var Z=1;R+Z<T.length&&T.charAt(R+Z)===B;)Z++;return R+=Z-1,Math.floor(Z/(V||1))>1},M=function(B,V){var Z=y(B,V),Y=[2,3,Z?4:2,Z?4:2,10,11,20]["oyYJ@!".indexOf(B)+1],ee=new RegExp("^-?\\d{1,"+Y+"}"),J=b.substring(F).match(ee);if(!J)throw(x.local.missingNumberAt||x.regionalOptions[""].missingNumberAt).replace(/\{0\}/,F);return F+=J[0].length,parseInt(J[0],10)},A=this,k=function(){if("function"==typeof d){y("m");var B=d.call(A,b.substring(F));return F+=B.length,B}return M("m")},C=function(B,V,Z,Y){for(var ee=y(B,Y)?Z:V,J=0;J<ee.length;J++)if(b.substr(F,ee[J].length).toLowerCase()===ee[J].toLowerCase())return F+=ee[J].length,J+A.minMonth;throw(x.local.unknownNameAt||x.regionalOptions[""].unknownNameAt).replace(/\{0\}/,F)},P=function(){if("function"==typeof s){var B=y("M")?s.call(A,b.substring(F)):u.call(A,b.substring(F));return F+=B.length,B}return C("M",u,s)},D=function(){if(b.charAt(F)!==T.charAt(R))throw(x.local.unexpectedLiteralAt||x.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,F);F++},F=0,R=0;R<T.length;R++)if(w)"'"!==T.charAt(R)||y("'")?D():w=!1;else switch(T.charAt(R)){case"d":v=M("d");break;case"D":C("D",a,l);break;case"o":g=M("o");break;case"w":M("w");break;case"m":p=k();break;case"M":p=P();break;case"y":var L=R;f=!y("y",2),R=L,h=M("y",2);break;case"Y":h=M("Y",2);break;case"J":c=M("J")+.5,"."===b.charAt(F)&&(F++,M("J"));break;case"@":c=M("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":c=M("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":F=b.length;break;case"'":y("'")?D():w=!0;break;default:D()}if(F<b.length)throw x.local.unexpectedText||x.regionalOptions[""].unexpectedText;if(-1===h?h=this.today().year():h<100&&f&&(h+=-1===o?1900:this.today().year()-this.today().year()%100-(h<=o?0:100)),"string"==typeof p&&(p=i.call(this,h,p)),g>-1){v=g;for(var I=this.daysInMonth(h,p=1);v>I;I=this.daysInMonth(h,p))p++,v-=I}return c>-1?this.fromJD(c):this.newDate(h,p,v)},determineDate:function(T,b,e,o,a){e&&"object"!=typeof e&&(a=o,o=e,e=null),"string"!=typeof o&&(a=o,o="");var l=this;return b=b?b.newDate():null,null==T?b:"string"==typeof T?function(i){try{return l.parseDate(o,i,a)}catch(c){}for(var d=((i=i.toLowerCase()).match(/^c/)&&e?e.newDate():null)||l.today(),u=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,s=u.exec(i);s;)d.add(parseInt(s[1],10),s[2]||"d"),s=u.exec(i);return d}(T):"number"==typeof T?isNaN(T)||T===1/0||T===-1/0?b:l.today().add(T,"d"):l.newDate(T)}})},{"./main":346,"object-assign":247}],348:[function(_,oe,ae){"use strict";oe.exports=[{path:"",backoff:0},{path:"M-2.4,-3V3L0.6,0Z",backoff:.6},{path:"M-3.7,-2.5V2.5L1.3,0Z",backoff:1.3},{path:"M-4.45,-3L-1.65,-0.2V0.2L-4.45,3L1.55,0Z",backoff:1.55},{path:"M-2.2,-2.2L-0.2,-0.2V0.2L-2.2,2.2L-1.4,3L1.6,0L-1.4,-3Z",backoff:1.6},{path:"M-4.4,-2.1L-0.6,-0.2V0.2L-4.4,2.1L-4,3L2,0L-4,-3Z",backoff:2},{path:"M2,0A2,2 0 1,1 0,-2A2,2 0 0,1 2,0Z",backoff:0,noRotate:!0},{path:"M2,2V-2H-2V2Z",backoff:0,noRotate:!0}]},{}],349:[function(_,oe,ae){"use strict";var m=_("./arrow_paths"),x=_("../../plots/font_attributes"),T=_("../../plots/cartesian/constants"),b=_("../../plot_api/plot_template").templatedArray;_("../../constants/axis_placeable_objects"),oe.exports=b("annotation",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},text:{valType:"string",editType:"calc+arraydraw"},textangle:{valType:"angle",dflt:0,editType:"calc+arraydraw"},font:x({editType:"calc+arraydraw",colorEditType:"arraydraw"}),width:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},height:{valType:"number",min:1,dflt:null,editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},align:{valType:"enumerated",values:["left","center","right"],dflt:"center",editType:"arraydraw"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"arraydraw"},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},bordercolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},borderpad:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},borderwidth:{valType:"number",min:0,dflt:1,editType:"calc+arraydraw"},showarrow:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},arrowcolor:{valType:"color",editType:"arraydraw"},arrowhead:{valType:"integer",min:0,max:m.length,dflt:1,editType:"arraydraw"},startarrowhead:{valType:"integer",min:0,max:m.length,dflt:1,editType:"arraydraw"},arrowside:{valType:"flaglist",flags:["end","start"],extras:["none"],dflt:"end",editType:"arraydraw"},arrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},startarrowsize:{valType:"number",min:.3,dflt:1,editType:"calc+arraydraw"},arrowwidth:{valType:"number",min:.1,editType:"calc+arraydraw"},standoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},startstandoff:{valType:"number",min:0,dflt:0,editType:"calc+arraydraw"},ax:{valType:"any",editType:"calc+arraydraw"},ay:{valType:"any",editType:"calc+arraydraw"},axref:{valType:"enumerated",dflt:"pixel",values:["pixel",T.idRegex.x.toString()],editType:"calc"},ayref:{valType:"enumerated",dflt:"pixel",values:["pixel",T.idRegex.y.toString()],editType:"calc"},xref:{valType:"enumerated",values:["paper",T.idRegex.x.toString()],editType:"calc"},x:{valType:"any",editType:"calc+arraydraw"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"auto",editType:"calc+arraydraw"},xshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},yref:{valType:"enumerated",values:["paper",T.idRegex.y.toString()],editType:"calc"},y:{valType:"any",editType:"calc+arraydraw"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"auto",editType:"calc+arraydraw"},yshift:{valType:"number",dflt:0,editType:"calc+arraydraw"},clicktoshow:{valType:"enumerated",values:[!1,"onoff","onout"],dflt:!1,editType:"arraydraw"},xclick:{valType:"any",editType:"arraydraw"},yclick:{valType:"any",editType:"arraydraw"},hovertext:{valType:"string",editType:"arraydraw"},hoverlabel:{bgcolor:{valType:"color",editType:"arraydraw"},bordercolor:{valType:"color",editType:"arraydraw"},font:x({editType:"arraydraw"}),editType:"arraydraw"},captureevents:{valType:"boolean",editType:"arraydraw"},editType:"calc",_deprecated:{ref:{valType:"string",editType:"calc"}}})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/font_attributes":585,"./arrow_paths":348}],350:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("./draw").draw;function b(o){m.filterVisible(o._fullLayout.annotations).forEach(function(l){var i=x.getFromId(o,l.xref),d=x.getFromId(o,l.yref),u=x.getRefType(l.xref),s=x.getRefType(l.yref);l._extremes={},"range"===u&&e(l,i),"range"===s&&e(l,d)})}function e(o,a){var l,i=a._id,d=i.charAt(0),u=o[d],s=o["a"+d],p=o["_"+d+"padplus"],v=o["_"+d+"padminus"],g={x:1,y:-1}[d]*o[d+"shift"],f=3*o.arrowsize*o.arrowwidth||0,w=f+g,y=f-g,M=3*o.startarrowsize*o.arrowwidth||0,A=M+g,k=M-g;if(o["a"+d+"ref"]===o[d+"ref"]){var C=x.findExtremes(a,[a.r2c(u)],{ppadplus:w,ppadminus:y}),P=x.findExtremes(a,[a.r2c(s)],{ppadplus:Math.max(p,A),ppadminus:Math.max(v,k)});l={min:[C.min[0],P.min[0]],max:[C.max[0],P.max[0]]}}else A=s?A+s:A,k=s?k-s:k,l=x.findExtremes(a,[a.r2c(u)],{ppadplus:Math.max(p,w,A),ppadminus:Math.max(v,y,k)});o._extremes[i]=l}oe.exports=function(o){if(m.filterVisible(o._fullLayout.annotations).length&&o._fullData.length)return m.syncOrAsync([T,b],o)}},{"../../lib":503,"../../plots/cartesian/axes":554,"./draw":355}],351:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../registry"),T=_("../../plot_api/plot_template").arrayEditor;function b(o,a){var l,i,d,u,s,c,h,p=o._fullLayout.annotations,v=[],g=[],f=[],w=(a||[]).length;for(l=0;l<p.length;l++)if(u=(d=p[l]).clicktoshow){for(i=0;i<w;i++)if(c=(s=a[i]).xaxis,h=s.yaxis,c._id===d.xref&&h._id===d.yref&&c.d2r(s.x)===e(d._xclick,c)&&h.d2r(s.y)===e(d._yclick,h)){(d.visible?"onout"===u?g:f:v).push(l);break}i===w&&d.visible&&"onout"===u&&g.push(l)}return{on:v,off:g,explicitOff:f}}function e(o,a){return"log"===a.type?a.l2r(o):a.d2r(o)}oe.exports={hasClickToShow:function(o,a){var l=b(o,a);return l.on.length>0||l.explicitOff.length>0},onClick:function(o,a){var l,i,d=b(o,a),u=d.on,s=d.off.concat(d.explicitOff),c={},h=o._fullLayout.annotations;if(u.length||s.length){for(l=0;l<u.length;l++)(i=T(o.layout,"annotations",h[u[l]])).modifyItem("visible",!0),m.extendFlat(c,i.getUpdateObj());for(l=0;l<s.length;l++)(i=T(o.layout,"annotations",h[s[l]])).modifyItem("visible",!1),m.extendFlat(c,i.getUpdateObj());return x.call("update",o,{},c)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638}],352:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../color");oe.exports=function(T,b,e,o){o("opacity");var a=o("bgcolor"),l=o("bordercolor"),i=x.opacity(l);o("borderpad");var d=o("borderwidth"),u=o("showarrow");if(o("text",u?" ":e._dfltTitle.annotation),o("textangle"),m.coerceFont(o,"font",e.font),o("width"),o("align"),o("height")&&o("valign"),u){var s,c,h=o("arrowside");-1!==h.indexOf("end")&&(s=o("arrowhead"),c=o("arrowsize")),-1!==h.indexOf("start")&&(o("startarrowhead",s),o("startarrowsize",c)),o("arrowcolor",i?b.bordercolor:x.defaultLine),o("arrowwidth",2*(i&&d||1)),o("standoff"),o("startstandoff")}var p=o("hovertext"),v=e.hoverlabel||{};if(p){var g=o("hoverlabel.bgcolor",v.bgcolor||(x.opacity(a)?x.rgb(a):x.defaultLine)),f=o("hoverlabel.bordercolor",v.bordercolor||x.contrast(g));m.coerceFont(o,"hoverlabel.font",{family:v.font.family,size:v.font.size,color:v.font.color||f})}o("captureevents",!!p)}},{"../../lib":503,"../color":366}],353:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../lib/to_log_range");oe.exports=function(T,b,e,o){b=b||{};var a="log"===e&&"linear"===b.type;if(a||"linear"===e&&"log"===b.type)for(var i,d,u=T._fullLayout.annotations,s=b._id.charAt(0),c=0;c<u.length;c++)d="annotations["+c+"].",(i=u[c])[s+"ref"]===b._id&&h(s),i["a"+s+"ref"]===b._id&&h("a"+s);function h(p){var v=i[p],g=null;g=a?x(v,b.range):Math.pow(10,v),m(g)||(g=null),o(d+p,g)}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],354:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../../plots/array_container_defaults"),b=_("./common_defaults"),e=_("./attributes");function o(a,l,i){function d(P,D){return m.coerce(a,l,e,P,D)}var u=d("visible"),s=d("clicktoshow");if(u||s){b(a,l,i,d);for(var c=l.showarrow,h=["x","y"],p=[-10,-30],v={_fullLayout:i},g=0;g<2;g++){var f=h[g],w=x.coerceRef(a,l,v,f,"","paper");if("paper"!==w&&x.getFromId(v,w)._annIndices.push(l._index),x.coercePosition(l,v,d,w,f,.5),c){var y="a"+f,M=x.coerceRef(a,l,v,y,"pixel",["pixel","paper"]);"pixel"!==M&&M!==w&&(M=l[y]="pixel"),x.coercePosition(l,v,d,M,y,"pixel"===M?p[g]:.4)}d(f+"anchor"),d(f+"shift")}if(m.noneOrAll(a,l,["x","y"]),c&&m.noneOrAll(a,l,["ax","ay"]),s){var k=d("xclick"),C=d("yclick");l._xclick=void 0===k?l.x:x.cleanPosition(k,v,l.xref),l._yclick=void 0===C?l.y:x.cleanPosition(C,v,l.yref)}}}oe.exports=function(a,l){T(a,l,{name:"annotations",handleItemDefaults:o})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":349,"./common_defaults":352}],355:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../registry"),T=_("../../plots/plots"),b=_("../../lib"),e=b.strTranslate,o=_("../../plots/cartesian/axes"),a=_("../color"),l=_("../drawing"),i=_("../fx"),d=_("../../lib/svg_text_utils"),u=_("../../lib/setcursor"),s=_("../dragelement"),c=_("../../plot_api/plot_template").arrayEditor,h=_("./draw_arrow_head");function p(f,w){var y=f._fullLayout.annotations[w]||{},M=o.getFromId(f,y.xref),A=o.getFromId(f,y.yref);M&&M.setScale(),A&&A.setScale(),g(f,y,w,!1,M,A)}function v(f,w,y,M,A){var k=A[y],C=A[y+"ref"],P=-1!==y.indexOf("y"),D="domain"===o.getRefType(C),F=P?M.h:M.w;return f?D?k+(P?-w:w)/f._length:f.p2r(f.r2p(k)+w):k+(P?-w:w)/F}function g(f,w,y,M,A,k){var C,P,D=f._fullLayout,F=f._fullLayout._size,R=f._context.edits;M?(C="annotation-"+M,P=M+".annotations"):(C="annotation",P="annotations");var L=c(f.layout,P,w),I=L.modifyBase,B=L.modifyItem,V=L.getUpdateObj;D._infolayer.selectAll("."+C+'[data-index="'+y+'"]').remove();var Z="clip"+D._uid+"_ann"+y;if(w._input&&!1!==w.visible){var Y={x:{},y:{}},ee=+w.textangle||0,J=D._infolayer.append("g").classed(C,!0).attr("data-index",String(y)).style("opacity",w.opacity),$=J.append("g").classed("annotation-text-g",!0),Q=R[w.showarrow?"annotationTail":"annotationPosition"],se=w.captureevents||R.annotationText||Q,j=$.append("g").style("pointer-events",se?"all":null).call(u,"pointer").on("click",function(){f._dragging=!1,f.emit("plotly_clickannotation",he(m.event))});w.hovertext&&j.on("mouseover",function(){var we=w.hoverlabel,Ce=we.font,De=this.getBoundingClientRect(),Se=f.getBoundingClientRect();i.loneHover({x0:De.left-Se.left,x1:De.right-Se.left,y:(De.top+De.bottom)/2-Se.top,text:w.hovertext,color:we.bgcolor,borderColor:we.bordercolor,fontFamily:Ce.family,fontSize:Ce.size,fontColor:Ce.color},{container:D._hoverlayer.node(),outerContainer:D._paper.node(),gd:f})}).on("mouseout",function(){i.loneUnhover(D._hoverlayer.node())});var G=w.borderwidth,ie=G+w.borderpad,q=j.append("rect").attr("class","bg").style("stroke-width",G+"px").call(a.stroke,w.bordercolor).call(a.fill,w.bgcolor),te=w.width||w.height,ne=D._topclips.selectAll("#"+Z).data(te?[0]:[]);ne.enter().append("clipPath").classed("annclip",!0).attr("id",Z).append("rect"),ne.exit().remove();var le=w.font,ue=D._meta?b.templateString(w.text,D._meta):w.text,de=j.append("text").classed("annotation-text",!0).text(ue);R.annotationText?de.call(d.makeEditable,{delegate:j,gd:f}).call(be).on("edit",function(we){w.text=we,this.call(be),B("text",we),A&&A.autorange&&I(A._name+".autorange",!0),k&&k.autorange&&I(k._name+".autorange",!0),x.call("_guiRelayout",f,V())}):de.call(be)}else m.selectAll("#"+Z).remove();function he(we){var Ce={index:y,annotation:w._input,fullAnnotation:w,event:we};return M&&(Ce.subplotId=M),Ce}function be(we){return we.call(l.font,le).attr({"text-anchor":{left:"start",right:"end"}[w.align]||"middle"}),d.convertToTspans(we,f,ge),we}function ge(){var we=de.selectAll("a");1===we.size()&&we.text()===de.text()&&j.insert("a",":first-child").attr({"xlink:xlink:href":we.attr("xlink:href"),"xlink:xlink:show":we.attr("xlink:show")}).style({cursor:"pointer"}).node().appendChild(q.node());var Ce=j.select(".annotation-text-math-group"),De=!Ce.empty(),Se=l.bBox((De?Ce:de).node()),Fe=Se.width,ve=Se.height,Te=w.width||Fe,Le=w.height||ve,Ee=Math.round(Te+2*ie),Pe=Math.round(Le+2*ie);function je(rt,Tt){return"auto"===Tt&&(Tt=rt<1/3?"left":rt>2/3?"right":"center"),{center:0,middle:0,left:.5,bottom:-.5,right:-.5,top:.5}[Tt]}for(var Ge=!1,Ke=["x","y"],lt=0;lt<Ke.length;lt++){var Ue,$e,et,tt,ct,xt=Ke[lt],Ct=w[xt+"ref"]||xt,Ht=w["a"+xt+"ref"],zt={x:A,y:k}[xt],ht=(ee+("x"===xt?0:-90))*Math.PI/180,ut=Ee*Math.cos(ht),Ot=Pe*Math.sin(ht),tn=Math.abs(ut)+Math.abs(Ot),un=w[xt+"anchor"],Ze=w[xt+"shift"]*("x"===xt?1:-1),Qe=Y[xt],qe=o.getRefType(Ct);if(zt&&"domain"!==qe){var it=zt.r2fraction(w[xt]);(it<0||it>1)&&(Ht===Ct?((it=zt.r2fraction(w["a"+xt]))<0||it>1)&&(Ge=!0):Ge=!0),Ue=zt._offset+zt.r2p(w[xt]),tt=.5}else{var Ie="domain"===qe;"x"===xt?(et=w[xt],Ue=Ie?zt._offset+zt._length*et:Ue=F.l+F.w*et):(et=1-w[xt],Ue=Ie?zt._offset+zt._length*et:Ue=F.t+F.h*et),tt=w.showarrow?.5:et}if(w.showarrow){Qe.head=Ue;var ze=w["a"+xt];if(ct=ut*je(.5,w.xanchor)-Ot*je(.5,w.yanchor),Ht===Ct){var Ve=o.getRefType(Ht);"domain"===Ve?("y"===xt&&(ze=1-ze),Qe.tail=zt._offset+zt._length*ze):Qe.tail="paper"===Ve?"y"===xt?F.t+F.h*(ze=1-ze):F.l+F.w*ze:zt._offset+zt.r2p(ze),$e=ct}else Qe.tail=Ue+ze,$e=ct+ze;Qe.text=Qe.tail+ct;var Be=D["x"===xt?"width":"height"];if("paper"===Ct&&(Qe.head=b.constrain(Qe.head,1,Be-1)),"pixel"===Ht){var at=-Math.max(Qe.tail-3,Qe.text),gt=Math.min(Qe.tail+3,Qe.text)-Be;at>0?(Qe.tail+=at,Qe.text+=at):gt>0&&(Qe.tail-=gt,Qe.text-=gt)}Qe.tail+=Ze,Qe.head+=Ze}else $e=ct=tn*je(tt,un),Qe.text=Ue+ct;Qe.text+=Ze,ct+=Ze,w["_"+xt+"padplus"]=tn/2+($e+=Ze),w["_"+xt+"padminus"]=tn/2-$e,w["_"+xt+"size"]=tn,w["_"+xt+"shift"]=ct}if(Ge)j.remove();else{var wt=0,_t=0;"left"!==w.align&&(wt=(Te-Fe)*("center"===w.align?.5:1)),"top"!==w.valign&&(_t=(Le-ve)*("middle"===w.valign?.5:1)),De?Ce.select("svg").attr({x:ie+wt-1,y:ie+_t}).call(l.setClipUrl,te?Z:null,f):de.call(d.positionText,ie+wt-Se.left,ie+_t-Se.top).call(l.setClipUrl,te?Z:null,f),ne.select("rect").call(l.setRect,ie,ie,Te,Le),q.call(l.setRect,G/2,G/2,Ee-G,Pe-G),j.call(l.setTranslate,Math.round(Y.x.text-Ee/2),Math.round(Y.y.text-Pe/2)),$.attr({transform:"rotate("+ee+","+Y.x.text+","+Y.y.text+")"});var Vt,Nt=function(rt,Tt){J.selectAll(".annotation-arrow-g").remove();var Ut=Y.x.head,Wt=Y.y.head,sn=Y.x.tail+rt,He=Y.y.tail+Tt,vt=Y.x.text+rt,Lt=Y.y.text+Tt,Gt=b.rotationXYMatrix(ee,vt,Lt),Kt=b.apply2DTransform(Gt),_n=b.apply2DTransform2(Gt),en=+q.attr("width"),on=+q.attr("height"),wn=vt-.5*en,On=wn+en,Dn=Lt-.5*on,Tn=Dn+on,pn=[[wn,Dn,wn,Tn],[wn,Tn,On,Tn],[On,Tn,On,Dn],[On,Dn,wn,Dn]].map(_n);if(!pn.reduce(function(Rn,hr){return Rn^!!b.segmentsIntersect(Ut,Wt,Ut+1e6,Wt+1e6,hr[0],hr[1],hr[2],hr[3])},!1)){pn.forEach(function(Rn){var hr=b.segmentsIntersect(sn,He,Ut,Wt,Rn[0],Rn[1],Rn[2],Rn[3]);hr&&(sn=hr.x,He=hr.y)});var En=w.arrowwidth,Un=w.arrowcolor,In=w.arrowside,sr=J.append("g").style({opacity:a.opacity(Un)}).classed("annotation-arrow-g",!0),fr=sr.append("path").attr("d","M"+sn+","+He+"L"+Ut+","+Wt).style("stroke-width",En+"px").call(a.stroke,a.rgb(Un));if(h(fr,In,w),R.annotationPosition&&fr.node().parentNode&&!M){var rr=Ut,qr=Wt;if(w.standoff){var ti=Math.sqrt(Math.pow(Ut-sn,2)+Math.pow(Wt-He,2));rr+=w.standoff*(sn-Ut)/ti,qr+=w.standoff*(He-Wt)/ti}var Ar,pr,Fn=sr.append("path").classed("annotation-arrow",!0).classed("anndrag",!0).classed("cursor-move",!0).attr({d:"M3,3H-3V-3H3ZM0,0L"+(sn-rr)+","+(He-qr),transform:e(rr,qr)}).style("stroke-width",En+6+"px").call(a.stroke,"rgba(0,0,0,0)").call(a.fill,"rgba(0,0,0,0)");s.init({element:Fn.node(),gd:f,prepFn:function(){var Rn=l.getTranslate(j);Ar=Rn.x,pr=Rn.y,A&&A.autorange&&I(A._name+".autorange",!0),k&&k.autorange&&I(k._name+".autorange",!0)},moveFn:function(Rn,hr){var ri=Kt(Ar,pr),ir=ri[0]+Rn,Ur=ri[1]+hr;j.call(l.setTranslate,ir,Ur),B("x",v(A,Rn,"x",F,w)),B("y",v(k,hr,"y",F,w)),w.axref===w.xref&&B("ax",v(A,Rn,"ax",F,w)),w.ayref===w.yref&&B("ay",v(k,hr,"ay",F,w)),sr.attr("transform",e(Rn,hr)),$.attr({transform:"rotate("+ee+","+ir+","+Ur+")"})},doneFn:function(){x.call("_guiRelayout",f,V());var Rn=document.querySelector(".js-notes-box-panel");Rn&&Rn.redraw(Rn.selectedObj)}})}}};w.showarrow&&Nt(0,0),Q&&s.init({element:j.node(),gd:f,prepFn:function(){Vt=$.attr("transform")},moveFn:function(rt,Tt){var Ut="pointer";if(w.showarrow)B("ax",w.axref===w.xref?v(A,rt,"ax",F,w):w.ax+rt),B("ay",w.ayref===w.yref?v(k,Tt,"ay",F.w,w):w.ay+Tt),Nt(rt,Tt);else{if(M)return;var Wt,sn;if(A)Wt=v(A,rt,"x",F,w);else{var He=w._xsize/F.w;Wt=s.align(w.x+(w._xshift-w.xshift)/F.w-He/2+rt/F.w,He,0,1,w.xanchor)}if(k)sn=v(k,Tt,"y",F,w);else{var Lt=w._ysize/F.h;sn=s.align(w.y-(w._yshift+w.yshift)/F.h-Lt/2-Tt/F.h,Lt,0,1,w.yanchor)}B("x",Wt),B("y",sn),A&&k||(Ut=s.getCursor(A?.5:Wt,k?.5:sn,w.xanchor,w.yanchor))}$.attr({transform:e(rt,Tt)+Vt}),u(j,Ut)},clickFn:function(rt,Tt){w.captureevents&&f.emit("plotly_clickannotation",he(Tt))},doneFn:function(){u(j),x.call("_guiRelayout",f,V());var rt=document.querySelector(".js-notes-box-panel");rt&&rt.redraw(rt.selectedObj)}})}}}oe.exports={draw:function(f){var w=f._fullLayout;w._infolayer.selectAll(".annotation").remove();for(var y=0;y<w.annotations.length;y++)w.annotations[y].visible&&p(f,y);return T.previousPromises(f)},drawOne:p,drawRaw:g}},{"../../lib":503,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../fx":406,"./draw_arrow_head":356,"@plotly/d3":58}],356:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../color"),T=_("./arrow_paths"),b=_("../../lib"),e=b.strScale,o=b.strRotate,a=b.strTranslate;oe.exports=function(l,i,d){var u,s,c,h,p=l.node(),v=T[d.arrowhead||0],g=T[d.startarrowhead||0],f=(d.arrowwidth||1)*(d.arrowsize||1),w=(d.arrowwidth||1)*(d.startarrowsize||1),y=i.indexOf("start")>=0,M=i.indexOf("end")>=0,A=v.backoff*f+d.standoff,k=g.backoff*w+d.startstandoff;if("line"===p.nodeName){u={x:+l.attr("x1"),y:+l.attr("y1")},s={x:+l.attr("x2"),y:+l.attr("y2")};var C=u.x-s.x,P=u.y-s.y;if(h=(c=Math.atan2(P,C))+Math.PI,A&&k&&A+k>Math.sqrt(C*C+P*P))return void J();if(A){if(A*A>C*C+P*P)return void J();var D=A*Math.cos(c),F=A*Math.sin(c);s.x+=D,s.y+=F,l.attr({x2:s.x,y2:s.y})}if(k){if(k*k>C*C+P*P)return void J();var R=k*Math.cos(c),L=k*Math.sin(c);u.x-=R,u.y-=L,l.attr({x1:u.x,y1:u.y})}}else if("path"===p.nodeName){var I=p.getTotalLength(),B="";if(I<A+k)return void J();var V=p.getPointAtLength(0),Z=p.getPointAtLength(.1);c=Math.atan2(V.y-Z.y,V.x-Z.x),u=p.getPointAtLength(Math.min(k,I)),B="0px,"+k+"px,";var Y=p.getPointAtLength(I),ee=p.getPointAtLength(I-.1);h=Math.atan2(Y.y-ee.y,Y.x-ee.x),s=p.getPointAtLength(Math.max(0,I-A)),l.style("stroke-dasharray",B+=I-(B?k+A:A)+"px,"+I+"px")}function J(){l.style("stroke-dasharray","0px,100px")}function $(Q,se,j,G){Q.path&&(Q.noRotate&&(j=0),m.select(p.parentNode).append("path").attr({class:l.attr("class"),d:Q.path,transform:a(se.x,se.y)+o(180*j/Math.PI)+e(G)}).style({fill:x.rgb(d.arrowcolor),"stroke-width":0}))}y&&$(g,u,c,w),M&&$(v,s,h,f)}},{"../../lib":503,"../color":366,"./arrow_paths":348,"@plotly/d3":58}],357:[function(_,oe,ae){"use strict";var m=_("./draw"),x=_("./click");oe.exports={moduleType:"component",name:"annotations",layoutAttributes:_("./attributes"),supplyLayoutDefaults:_("./defaults"),includeBasePlot:_("../../plots/cartesian/include_components")("annotations"),calcAutorange:_("./calc_autorange"),draw:m.draw,drawOne:m.drawOne,drawRaw:m.drawRaw,hasClickToShow:x.hasClickToShow,onClick:x.onClick,convertCoords:_("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":349,"./calc_autorange":350,"./click":351,"./convert_coords":353,"./defaults":354,"./draw":355}],358:[function(_,oe,ae){"use strict";var m=_("../annotations/attributes"),x=_("../../plot_api/edit_types").overrideAll,T=_("../../plot_api/plot_template").templatedArray;oe.exports=x(T("annotation",{visible:m.visible,x:{valType:"any"},y:{valType:"any"},z:{valType:"any"},ax:{valType:"number"},ay:{valType:"number"},xanchor:m.xanchor,xshift:m.xshift,yanchor:m.yanchor,yshift:m.yshift,text:m.text,textangle:m.textangle,font:m.font,width:m.width,height:m.height,opacity:m.opacity,align:m.align,valign:m.valign,bgcolor:m.bgcolor,bordercolor:m.bordercolor,borderpad:m.borderpad,borderwidth:m.borderwidth,showarrow:m.showarrow,arrowcolor:m.arrowcolor,arrowhead:m.arrowhead,startarrowhead:m.startarrowhead,arrowside:m.arrowside,arrowsize:m.arrowsize,startarrowsize:m.startarrowsize,arrowwidth:m.arrowwidth,standoff:m.standoff,startstandoff:m.startstandoff,hovertext:m.hovertext,hoverlabel:m.hoverlabel,captureevents:m.captureevents}),"calc","from-root")},{"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../annotations/attributes":349}],359:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../plots/cartesian/axes");function T(b,e){var o=e.fullSceneLayout.domain,a=e.fullLayout._size,l={pdata:null,type:"linear",autorange:!1,range:[-1/0,1/0]};b._xa={},m.extendFlat(b._xa,l),x.setConvert(b._xa),b._xa._offset=a.l+o.x[0]*a.w,b._xa.l2p=function(){return.5*(1+b._pdata[0]/b._pdata[3])*a.w*(o.x[1]-o.x[0])},b._ya={},m.extendFlat(b._ya,l),x.setConvert(b._ya),b._ya._offset=a.t+(1-o.y[1])*a.h,b._ya.l2p=function(){return.5*(1-b._pdata[1]/b._pdata[3])*a.h*(o.y[1]-o.y[0])}}oe.exports=function(b){for(var e=b.fullSceneLayout.annotations,o=0;o<e.length;o++)T(e[o],b);b.fullLayout._infolayer.selectAll(".annotation-"+b.id).remove()}},{"../../lib":503,"../../plots/cartesian/axes":554}],360:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../../plots/array_container_defaults"),b=_("../annotations/common_defaults"),e=_("./attributes");function o(a,l,i,d){function u(c,h){return m.coerce(a,l,e,c,h)}function s(c){var h=c+"axis",p={_fullLayout:{}};return p._fullLayout[h]=i[h],x.coercePosition(l,p,u,c,c,.5)}u("visible")&&(b(a,l,d.fullLayout,u),s("x"),s("y"),s("z"),m.noneOrAll(a,l,["x","y","z"]),l.xref="x",l.yref="y",l.zref="z",u("xanchor"),u("yanchor"),u("xshift"),u("yshift"),l.showarrow&&(l.axref="pixel",l.ayref="pixel",u("ax",-10),u("ay",-30),m.noneOrAll(a,l,["ax","ay"])))}oe.exports=function(a,l,i){T(a,l,{name:"annotations",handleItemDefaults:o,fullLayout:i.fullLayout})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../annotations/common_defaults":352,"./attributes":358}],361:[function(_,oe,ae){"use strict";var m=_("../annotations/draw").drawRaw,x=_("../../plots/gl3d/project"),T=["x","y","z"];oe.exports=function(b){for(var e=b.fullSceneLayout,o=b.dataScale,a=e.annotations,l=0;l<a.length;l++){for(var i=a[l],d=!1,u=0;u<3;u++){var s=T[u],h=e[s+"axis"].r2fraction(i[s]);if(h<0||h>1){d=!0;break}}d?b.fullLayout._infolayer.select(".annotation-"+b.id+'[data-index="'+l+'"]').remove():(i._pdata=x(b.glplot.cameraParams,[e.xaxis.r2l(i.x)*o[0],e.yaxis.r2l(i.y)*o[1],e.zaxis.r2l(i.z)*o[2]]),m(b.graphDiv,i,l,b.id,i._xa,i._ya))}}},{"../../plots/gl3d/project":607,"../annotations/draw":355}],362:[function(_,oe,ae){"use strict";var m=_("../../registry"),x=_("../../lib");oe.exports={moduleType:"component",name:"annotations3d",schema:{subplots:{scene:{annotations:_("./attributes")}}},layoutAttributes:_("./attributes"),handleDefaults:_("./defaults"),includeBasePlot:function(T,b){var e=m.subplotsRegistry.gl3d;if(e)for(var o=e.attrRegex,a=Object.keys(T),l=0;l<a.length;l++){var i=a[l];o.test(i)&&(T[i].annotations||[]).length&&(x.pushUnique(b._basePlotModules,e),x.pushUnique(b._subplots.gl3d,i))}},convert:_("./convert"),draw:_("./draw")}},{"../../lib":503,"../../registry":638,"./attributes":358,"./convert":359,"./defaults":360,"./draw":361}],363:[function(_,oe,ae){"use strict";oe.exports=_("world-calendars/dist/main"),_("world-calendars/dist/plus"),_("world-calendars/dist/calendars/chinese"),_("world-calendars/dist/calendars/coptic"),_("world-calendars/dist/calendars/discworld"),_("world-calendars/dist/calendars/ethiopian"),_("world-calendars/dist/calendars/hebrew"),_("world-calendars/dist/calendars/islamic"),_("world-calendars/dist/calendars/julian"),_("world-calendars/dist/calendars/mayan"),_("world-calendars/dist/calendars/nanakshahi"),_("world-calendars/dist/calendars/nepali"),_("world-calendars/dist/calendars/persian"),_("world-calendars/dist/calendars/taiwan"),_("world-calendars/dist/calendars/thai"),_("world-calendars/dist/calendars/ummalqura")},{"world-calendars/dist/calendars/chinese":332,"world-calendars/dist/calendars/coptic":333,"world-calendars/dist/calendars/discworld":334,"world-calendars/dist/calendars/ethiopian":335,"world-calendars/dist/calendars/hebrew":336,"world-calendars/dist/calendars/islamic":337,"world-calendars/dist/calendars/julian":338,"world-calendars/dist/calendars/mayan":339,"world-calendars/dist/calendars/nanakshahi":340,"world-calendars/dist/calendars/nepali":341,"world-calendars/dist/calendars/persian":342,"world-calendars/dist/calendars/taiwan":343,"world-calendars/dist/calendars/thai":344,"world-calendars/dist/calendars/ummalqura":345,"world-calendars/dist/main":346,"world-calendars/dist/plus":347}],364:[function(_,oe,ae){"use strict";var m=_("./calendars"),x=_("../../lib"),T=_("../../constants/numerical"),b=T.EPOCHJD,e=T.ONEDAY,o={valType:"enumerated",values:x.sortObjectKeys(m.calendars),editType:"calc",dflt:"gregorian"},a=function(g,f,w,y){var M={};return M[w]=o,x.coerce(g,f,M,w,y)},l={d:{0:"dd","-":"d"},e:{0:"d","-":"d"},a:{0:"D","-":"D"},A:{0:"DD","-":"DD"},j:{0:"oo","-":"o"},W:{0:"ww","-":"w"},m:{0:"mm","-":"m"},b:{0:"M","-":"M"},B:{0:"MM","-":"MM"},y:{0:"yy","-":"yy"},Y:{0:"yyyy","-":"yyyy"},U:"##",w:"##",c:{0:"D M d %X yyyy","-":"D M d %X yyyy"},x:{0:"mm/dd/yyyy","-":"mm/dd/yyyy"}},i={};function d(g){return i[g]||(i[g]=m.instance(g))}function u(g){return x.extendFlat({},o,{description:g})}function s(g){return"Sets the calendar system to use with `"+g+"` date data."}var c={xcalendar:u(s("x"))},h=x.extendFlat({},c,{ycalendar:u(s("y"))}),p=x.extendFlat({},h,{zcalendar:u(s("z"))}),v=u(["Sets the calendar system to use for `range` and `tick0`","if this is a date axis. This does not set the calendar for","interpreting data on this axis, that's specified in the trace","or via the global `layout.calendar`"].join(" "));oe.exports={moduleType:"component",name:"calendars",schema:{traces:{scatter:h,bar:h,box:h,heatmap:h,contour:h,histogram:h,histogram2d:h,histogram2dcontour:h,scatter3d:p,surface:p,mesh3d:p,scattergl:h,ohlc:c,candlestick:c},layout:{calendar:u(["Sets the default calendar system to use for interpreting and","displaying dates throughout the plot."].join(" "))},subplots:{xaxis:{calendar:v},yaxis:{calendar:v},scene:{xaxis:{calendar:v},yaxis:{calendar:v},zaxis:{calendar:v}},polar:{radialaxis:{calendar:v}}},transforms:{filter:{valuecalendar:u(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `value`, if it is a date."].join(" ")),targetcalendar:u(["WARNING: All transforms are deprecated and may be removed from the API in next major version.","Sets the calendar system to use for `target`, if it is an","array of dates. If `target` is a string (eg *x*) we use the","corresponding trace attribute (eg `xcalendar`) if it exists,","even if `targetcalendar` is provided."].join(" "))}}},layoutAttributes:o,handleDefaults:a,handleTraceDefaults:function(g,f,w,y){for(var M=0;M<w.length;M++)a(g,f,w[M]+"calendar",y.calendar)},CANONICAL_SUNDAY:{chinese:"2000-01-02",coptic:"2000-01-03",discworld:"2000-01-03",ethiopian:"2000-01-05",hebrew:"5000-01-01",islamic:"1000-01-02",julian:"2000-01-03",mayan:"5000-01-01",nanakshahi:"1000-01-05",nepali:"2000-01-05",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-04",thai:"2000-01-04",ummalqura:"1400-01-06"},CANONICAL_TICK:{chinese:"2000-01-01",coptic:"2000-01-01",discworld:"2000-01-01",ethiopian:"2000-01-01",hebrew:"5000-01-01",islamic:"1000-01-01",julian:"2000-01-01",mayan:"5000-01-01",nanakshahi:"1000-01-01",nepali:"2000-01-01",persian:"1000-01-01",jalali:"1000-01-01",taiwan:"1000-01-01",thai:"2000-01-01",ummalqura:"1400-01-01"},DFLTRANGE:{chinese:["2000-01-01","2001-01-01"],coptic:["1700-01-01","1701-01-01"],discworld:["1800-01-01","1801-01-01"],ethiopian:["2000-01-01","2001-01-01"],hebrew:["5700-01-01","5701-01-01"],islamic:["1400-01-01","1401-01-01"],julian:["2000-01-01","2001-01-01"],mayan:["5200-01-01","5201-01-01"],nanakshahi:["0500-01-01","0501-01-01"],nepali:["2000-01-01","2001-01-01"],persian:["1400-01-01","1401-01-01"],jalali:["1400-01-01","1401-01-01"],taiwan:["0100-01-01","0101-01-01"],thai:["2500-01-01","2501-01-01"],ummalqura:["1400-01-01","1401-01-01"]},getCal:d,worldCalFmt:function(g,f,w){for(var y,M,A,k,C,P=Math.floor((f+.05)/e)+b,D=d(w).fromJD(P),F=0;-1!==(F=g.indexOf("%",F));)"0"===(y=g.charAt(F+1))||"-"===y||"_"===y?(A=3,M=g.charAt(F+2),"_"===y&&(y="-")):(M=y,y="0",A=2),(k=l[M])?(C="##"===k?"##":D.formatDate(k[y]),g=g.substr(0,F)+C+g.substr(F+A),F+=C.length):F+=A;return g}}},{"../../constants/numerical":479,"../../lib":503,"./calendars":363}],365:[function(_,oe,ae){"use strict";ae.defaults=["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],ae.defaultLine="#444",ae.lightLine="#eee",ae.background="#fff",ae.borderLine="#BEC8D9",ae.lightFraction=1e3/11},{}],366:[function(_,oe,ae){"use strict";var m=_("tinycolor2"),x=_("fast-isnumeric"),T=_("../../lib/array").isTypedArray,b=oe.exports={},e=_("./attributes");b.defaults=e.defaults;var o=b.defaultLine=e.defaultLine;b.lightLine=e.lightLine;var a=b.background=e.background;function l(i){if(x(i)||"string"!=typeof i)return i;var d=i.trim();if("rgb"!==d.substr(0,3))return i;var u=d.match(/^rgba?\s*\(([^()]*)\)$/);if(!u)return i;var s=u[1].trim().split(/\s*[\s,]\s*/),c="a"===d.charAt(3)&&4===s.length;if(!c&&3!==s.length)return i;for(var h=0;h<s.length;h++){if(!(s[h].length&&(s[h]=Number(s[h]),s[h]>=0)))return i;if(3===h)s[h]>1&&(s[h]=1);else if(s[h]>=1)return i}var p=Math.round(255*s[0])+", "+Math.round(255*s[1])+", "+Math.round(255*s[2]);return c?"rgba("+p+", "+s[3]+")":"rgb("+p+")"}b.tinyRGB=function(i){var d=i.toRgb();return"rgb("+Math.round(d.r)+", "+Math.round(d.g)+", "+Math.round(d.b)+")"},b.rgb=function(i){return b.tinyRGB(m(i))},b.opacity=function(i){return i?m(i).getAlpha():0},b.addOpacity=function(i,d){var u=m(i).toRgb();return"rgba("+Math.round(u.r)+", "+Math.round(u.g)+", "+Math.round(u.b)+", "+d+")"},b.combine=function(i,d){var u=m(i).toRgb();if(1===u.a)return m(i).toRgbString();var s=m(d||a).toRgb(),c=1===s.a?s:{r:255*(1-s.a)+s.r*s.a,g:255*(1-s.a)+s.g*s.a,b:255*(1-s.a)+s.b*s.a};return m({r:c.r*(1-u.a)+u.r*u.a,g:c.g*(1-u.a)+u.g*u.a,b:c.b*(1-u.a)+u.b*u.a}).toRgbString()},b.contrast=function(i,d,u){var s=m(i);return 1!==s.getAlpha()&&(s=m(b.combine(i,a))),(s.isDark()?d?s.lighten(d):a:u?s.darken(u):o).toString()},b.stroke=function(i,d){var u=m(d);i.style({stroke:b.tinyRGB(u),"stroke-opacity":u.getAlpha()})},b.fill=function(i,d){var u=m(d);i.style({fill:b.tinyRGB(u),"fill-opacity":u.getAlpha()})},b.clean=function(i){if(i&&"object"==typeof i){var d,u,s,c,h=Object.keys(i);for(d=0;d<h.length;d++)if(c=i[s=h[d]],"color"===s.substr(s.length-5))if(Array.isArray(c))for(u=0;u<c.length;u++)c[u]=l(c[u]);else i[s]=l(c);else if("colorscale"===s.substr(s.length-10)&&Array.isArray(c))for(u=0;u<c.length;u++)Array.isArray(c[u])&&(c[u][1]=l(c[u][1]));else if(Array.isArray(c)){var p=c[0];if(!Array.isArray(p)&&p&&"object"==typeof p)for(u=0;u<c.length;u++)b.clean(c[u])}else c&&"object"==typeof c&&!T(c)&&b.clean(c)}}},{"../../lib/array":485,"./attributes":365,"fast-isnumeric":190,tinycolor2:312}],367:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/layout_attributes"),x=_("../../plots/font_attributes"),T=_("../../lib/extend").extendFlat,b=_("../../plot_api/edit_types").overrideAll;oe.exports=b({orientation:{valType:"enumerated",values:["h","v"],dflt:"v"},thicknessmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"pixels"},thickness:{valType:"number",min:0,dflt:30},lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3},xanchor:{valType:"enumerated",values:["left","center","right"]},xpad:{valType:"number",min:0,dflt:10},y:{valType:"number",min:-2,max:3},yanchor:{valType:"enumerated",values:["top","middle","bottom"]},ypad:{valType:"number",min:0,dflt:10},outlinecolor:m.linecolor,outlinewidth:m.linewidth,bordercolor:m.linecolor,borderwidth:{valType:"number",min:0,dflt:0},bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)"},tickmode:m.tickmode,nticks:m.nticks,tick0:m.tick0,dtick:m.dtick,tickvals:m.tickvals,ticktext:m.ticktext,ticks:T({},m.ticks,{dflt:""}),ticklabeloverflow:T({},m.ticklabeloverflow,{}),ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside"},ticklen:m.ticklen,tickwidth:m.tickwidth,tickcolor:m.tickcolor,ticklabelstep:m.ticklabelstep,showticklabels:m.showticklabels,tickfont:x({}),tickangle:m.tickangle,tickformat:m.tickformat,tickformatstops:m.tickformatstops,tickprefix:m.tickprefix,showtickprefix:m.showtickprefix,ticksuffix:m.ticksuffix,showticksuffix:m.showticksuffix,separatethousands:m.separatethousands,exponentformat:m.exponentformat,minexponent:m.minexponent,showexponent:m.showexponent,title:{text:{valType:"string"},font:x({}),side:{valType:"enumerated",values:["right","top","bottom"]}},_deprecated:{title:{valType:"string"},titlefont:x({}),titleside:{valType:"enumerated",values:["right","top","bottom"],dflt:"top"}}},"colorbars","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],368:[function(_,oe,ae){"use strict";oe.exports={cn:{colorbar:"colorbar",cbbg:"cbbg",cbfill:"cbfill",cbfills:"cbfills",cbline:"cbline",cblines:"cblines",cbaxis:"cbaxis",cbtitleunshift:"cbtitleunshift",cbtitle:"cbtitle",cboutline:"cboutline",crisp:"crisp",jsPlaceholder:"js-placeholder"}}},{}],369:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../plot_api/plot_template"),T=_("../../plots/cartesian/tick_value_defaults"),b=_("../../plots/cartesian/tick_mark_defaults"),e=_("../../plots/cartesian/tick_label_defaults"),o=_("../../plots/cartesian/prefix_suffix_defaults"),a=_("./attributes");oe.exports=function(l,i,d){var u=x.newContainer(i,"colorbar"),s=l.colorbar||{};function c(P,D){return m.coerce(s,u,a,P,D)}var h=d.margin||{t:0,b:0,l:0,r:0},p=d.width-h.l-h.r,v=d.height-h.t-h.b,g="v"===c("orientation"),f=c("thicknessmode");c("thickness","fraction"===f?30/(g?p:v):30);var w=c("lenmode");c("len","fraction"===w?1:g?v:p),c("x",g?1.02:.5),c("xanchor",g?"left":"center"),c("xpad"),c("y",g?.5:1.02),c("yanchor",g?"middle":"bottom"),c("ypad"),m.noneOrAll(s,u,["x","y"]),c("outlinecolor"),c("outlinewidth"),c("bordercolor"),c("borderwidth"),c("bgcolor");var y=m.coerce(s,u,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:g?["outside","inside","outside top","inside top","outside bottom","inside bottom"]:["outside","inside","outside left","inside left","outside right","inside right"]}},"ticklabelposition");c("ticklabeloverflow",-1!==y.indexOf("inside")?"hide past domain":"hide past div"),T(s,u,c,"linear");var M=d.font,A={outerTicks:!1,font:M};-1!==y.indexOf("inside")&&(A.bgColor="black"),o(s,u,c,"linear",A),e(s,u,c,"linear",A),b(s,u,c,"linear",A),c("title.text",d._dfltTitle.colorbar);var k=u.tickfont,C=m.extendFlat({},k,{color:M.color,size:m.bigFont(k.size)});m.coerceFont(c,"title.font",C),c("title.side",g?"top":"right")}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"./attributes":367}],370:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("tinycolor2"),T=_("../../plots/plots"),b=_("../../registry"),e=_("../../plots/cartesian/axes"),o=_("../dragelement"),a=_("../../lib"),l=a.strTranslate,i=_("../../lib/extend").extendFlat,d=_("../../lib/setcursor"),u=_("../drawing"),s=_("../color"),c=_("../titles"),h=_("../../lib/svg_text_utils"),p=_("../colorscale/helpers").flipScale,v=_("../../plots/cartesian/axis_defaults"),g=_("../../plots/cartesian/position_defaults"),f=_("../../plots/cartesian/layout_attributes"),w=_("../../constants/alignment"),y=w.LINE_SPACING,M=w.FROM_TL,A=w.FROM_BR,k=_("./constants").cn;oe.exports={draw:function(C){var P=C._fullLayout._infolayer.selectAll("g."+k.colorbar).data(function(D){var F,R,L,I,B=D._fullLayout,V=D.calcdata,Z=[];function Y(te){return i(te,{_fillcolor:null,_line:{color:null,width:null,dash:null},_levels:{start:null,end:null,size:null},_filllevels:null,_fillgradient:null,_zrange:null})}function ee(){"function"==typeof I.calc?I.calc(D,L,F):(F._fillgradient=R.reversescale?p(R.colorscale):R.colorscale,F._zrange=[R[I.min],R[I.max]])}for(var J=0;J<V.length;J++){var Q=(L=V[J][0].trace)._module.colorbar;if(!0===L.visible&&Q)for(var se=Array.isArray(Q),j=se?Q:[Q],G=0;G<j.length;G++){var W=(I=j[G]).container;(R=W?L[W]:L)&&R.showscale&&((F=Y(R.colorbar))._id="cb"+L.uid+(se&&W?"-"+W:""),F._traceIndex=L.index,F._propPrefix=(W?W+".":"")+"colorbar.",F._meta=L._meta,ee(),Z.push(F))}}for(var ie in B._colorAxes)if((R=B[ie]).showscale){var q=B._colorAxes[ie];(F=Y(R.colorbar))._id="cb"+ie,F._propPrefix=ie+".colorbar.",F._meta=B._meta,I={min:"cmin",max:"cmax"},"heatmap"!==q[0]&&(I.calc=(L=q[1])._module.colorbar.calc),ee(),Z.push(F)}return Z}(C),function(D){return D._id});P.enter().append("g").attr("class",function(D){return D._id}).classed(k.colorbar,!0),P.each(function(D){var F=m.select(this);a.ensureSingle(F,"rect",k.cbbg),a.ensureSingle(F,"g",k.cbfills),a.ensureSingle(F,"g",k.cblines),a.ensureSingle(F,"g",k.cbaxis,function(L){L.classed(k.crisp,!0)}),a.ensureSingle(F,"g",k.cbtitleunshift,function(L){L.append("g").classed(k.cbtitle,!0)}),a.ensureSingle(F,"rect",k.cboutline);var L,I,B,V,Z,Y,ee,J,R=function(L,I,B){var V="v"===I.orientation,Z=I.len,Y=I.lenmode,ee=I.thickness,J=I.thicknessmode,$=I.outlinewidth,Q=I.borderwidth,se=I.bgcolor,j=I.xanchor,G=I.yanchor,W=I.xpad,ie=I.ypad,q=I.x,te=V?I.y:1-I.y,ne=B._fullLayout,le=ne._size,ue=I._fillcolor,de=I._line,he=I.title,be=he.side,ge=I._zrange||m.extent(("function"==typeof ue?ue:de.color).domain()),we="function"==typeof de.color?de.color:function(){return de.color},Ce="function"==typeof ue?ue:function(){return ue},De=I._levels,Se=function(qe,it,Ie){var ze,Ve,Be=it._levels,at=[],gt=[],wt=Be.end+Be.size/100,_t=Be.size,Rt=1.001*Ie[0]-.001*Ie[1],yt=1.001*Ie[1]-.001*Ie[0];for(Ve=0;Ve<1e5&&(ze=Be.start+Ve*_t,!(_t>0?ze>=wt:ze<=wt));Ve++)ze>Rt&&ze<yt&&at.push(ze);if(it._fillgradient)gt=[0];else if("function"==typeof it._fillcolor){var Vt=it._filllevels;if(Vt)for(wt=Vt.end+Vt.size/100,_t=Vt.size,Ve=0;Ve<1e5&&(ze=Vt.start+Ve*_t,!(_t>0?ze>=wt:ze<=wt));Ve++)ze>Ie[0]&&ze<Ie[1]&&gt.push(ze);else(gt=at.map(function(Nt){return Nt-Be.size/2})).push(gt[gt.length-1]+Be.size)}else it._fillcolor&&"string"==typeof it._fillcolor&&(gt=[0]);return Be.size<0&&(at.reverse(),gt.reverse()),{line:at,fill:gt}}(0,I,ge),Fe=Se.fill,ve=Se.line,Te=Math.round(ee*("fraction"===J?V?le.w:le.h:1)),Le=Te/(V?le.w:le.h),Ee=Math.round(Z*("fraction"===Y?V?le.h:le.w:1)),Pe=Ee/(V?le.h:le.w),je=Math.round(V?q*le.w+W:te*le.h+ie),Ge={center:.5,right:1}[j]||0,Ke={top:1,middle:.5}[G]||0,lt=V?q-Ge*Le:te-Ke*Le,Ue=V?te-Ke*Pe:q-Ge*Pe,$e=Math.round(V?le.h*(1-Ue):le.w*Ue);I._lenFrac=Pe,I._thickFrac=Le,I._uFrac=lt,I._vFrac=Ue;var et=I._axis=function(qe,it,Ie){var ze=qe._fullLayout,Ve="v"===it.orientation,Be={type:"linear",range:Ie,tickmode:it.tickmode,nticks:it.nticks,tick0:it.tick0,dtick:it.dtick,tickvals:it.tickvals,ticktext:it.ticktext,ticks:it.ticks,ticklen:it.ticklen,tickwidth:it.tickwidth,tickcolor:it.tickcolor,showticklabels:it.showticklabels,ticklabelposition:it.ticklabelposition,ticklabeloverflow:it.ticklabeloverflow,ticklabelstep:it.ticklabelstep,tickfont:it.tickfont,tickangle:it.tickangle,tickformat:it.tickformat,exponentformat:it.exponentformat,minexponent:it.minexponent,separatethousands:it.separatethousands,showexponent:it.showexponent,showtickprefix:it.showtickprefix,tickprefix:it.tickprefix,showticksuffix:it.showticksuffix,ticksuffix:it.ticksuffix,title:it.title,showline:!0,anchor:"free",side:Ve?"right":"bottom",position:1},at=Ve?"y":"x",gt={type:"linear",_id:at+it._id},wt={letter:at,font:ze.font,noHover:!0,noTickson:!0,noTicklabelmode:!0,calendar:ze.calendar};function _t(Rt,yt){return a.coerce(Be,gt,f,Rt,yt)}return v(Be,gt,_t,wt,ze),g(Be,gt,_t,wt),gt}(B,I,ge);et.position=Le+(V?q+W/le.w:te+ie/le.h);var tt=-1!==["top","bottom"].indexOf(be);if(V&&tt&&(et.title.side=be,et.titlex=q+W/le.w,et.titley=Ue+("top"===he.side?Pe-ie/le.h:ie/le.h)),V||tt||(et.title.side=be,et.titley=te+ie/le.h,et.titlex=Ue+W/le.w),de.color&&"auto"===I.tickmode){et.tickmode="linear",et.tick0=De.start;var ct=De.size,xt=a.constrain(Ee/50,4,15)+1,Ct=(ge[1]-ge[0])/((I.nticks||xt)*ct);if(Ct>1){var Ht=Math.pow(10,Math.floor(Math.log(Ct)/Math.LN10));ct*=Ht*a.roundUp(Ct/Ht,[2,5,10]),(Math.abs(De.start)/De.size+1e-6)%1<2e-6&&(et.tick0=0)}et.dtick=ct}et.domain=V?[Ue+ie/le.h,Ue+Pe-ie/le.h]:[Ue+W/le.w,Ue+Pe-W/le.w],et.setScale(),L.attr("transform",l(Math.round(le.l),Math.round(le.t)));var zt,ht=L.select("."+k.cbtitleunshift).attr("transform",l(-Math.round(le.l),-Math.round(le.t))),ut=et.ticklabelposition,Ot=et.title.font.size,tn=L.select("."+k.cbaxis),un=0,Ze=0;function Qe(qe,it){var Ie={propContainer:et,propName:I._propPrefix+"title",traceIndex:I._traceIndex,_meta:I._meta,placeholder:ne._dfltTitle.colorbar,containerGroup:L.select("."+k.cbtitle)},ze="h"===qe.charAt(0)?qe.substr(1):"h"+qe;L.selectAll("."+ze+",."+ze+"-math-group").remove(),c.draw(B,qe,i(Ie,it||{}))}return a.syncOrAsync([T.previousPromises,function(){var qe,it;(V&&tt||!V&&!tt)&&("top"===be&&(qe=W+le.l+le.w*q,it=ie+le.t+le.h*(1-Ue-Pe)+3+.75*Ot),"bottom"===be&&(qe=W+le.l+le.w*q,it=ie+le.t+le.h*(1-Ue)-3-.25*Ot),"right"===be&&(it=ie+le.t+le.h*te+3+.75*Ot,qe=W+le.l+le.w*Ue),Qe(et._id+"title",{attributes:{x:qe,y:it,"text-anchor":V?"start":"middle"}}))},function(){if(!V&&!tt||V&&tt){var qe,it=L.select("."+k.cbtitle),Ie=it.select("text"),ze=[-$/2,$/2],Ve=it.select(".h"+et._id+"title-math-group").node(),Be=15.6;if(Ie.node()&&(Be=parseInt(Ie.node().style.fontSize,10)*y),Ve?(qe=u.bBox(Ve),Ze=qe.width,(un=qe.height)>Be&&(ze[1]-=(un-Be)/2)):Ie.node()&&!Ie.classed(k.jsPlaceholder)&&(qe=u.bBox(Ie.node()),Ze=qe.width,un=qe.height),V){if(un){if(un+=5,"top"===be)et.domain[1]-=un/le.h,ze[1]*=-1;else{et.domain[0]+=un/le.h;var at=h.lineCount(Ie);ze[1]+=(1-at)*Be}it.attr("transform",l(ze[0],ze[1])),et.setScale()}}else Ze&&("right"===be&&(et.domain[0]+=(Ze+Ot/2)/le.w),it.attr("transform",l(ze[0],ze[1])),et.setScale())}L.selectAll("."+k.cbfills+",."+k.cblines).attr("transform",V?l(0,Math.round(le.h*(1-et.domain[1]))):l(Math.round(le.w*et.domain[0]),0)),tn.attr("transform",V?l(0,Math.round(-le.t)):l(Math.round(-le.l),0));var gt=L.select("."+k.cbfills).selectAll("rect."+k.cbfill).attr("style","").data(Fe);gt.enter().append("rect").classed(k.cbfill,!0).style("stroke","none"),gt.exit().remove();var wt=ge.map(et.c2p).map(Math.round).sort(function(Nt,rt){return Nt-rt});gt.each(function(Nt,rt){var Tt=[0===rt?ge[0]:(Fe[rt]+Fe[rt-1])/2,rt===Fe.length-1?ge[1]:(Fe[rt]+Fe[rt+1])/2].map(et.c2p).map(Math.round);V&&(Tt[1]=a.constrain(Tt[1]+(Tt[1]>Tt[0])?1:-1,wt[0],wt[1]));var Ut=m.select(this).attr(V?"x":"y",je).attr(V?"y":"x",m.min(Tt)).attr(V?"width":"height",Math.max(Te,2)).attr(V?"height":"width",Math.max(m.max(Tt)-m.min(Tt),2));if(I._fillgradient)u.gradient(Ut,B,I._id,V?"vertical":"horizontalreversed",I._fillgradient,"fill");else{var Wt=Ce(Nt).replace("e-","");Ut.attr("fill",x(Wt).toHexString())}});var _t=L.select("."+k.cblines).selectAll("path."+k.cbline).data(de.color&&de.width?ve:[]);_t.enter().append("path").classed(k.cbline,!0),_t.exit().remove(),_t.each(function(Nt){var rt=je,Tt=Math.round(et.c2p(Nt))+de.width/2%1;m.select(this).attr("d","M"+(V?rt+","+Tt:Tt+","+rt)+(V?"h":"v")+Te).call(u.lineGroupStyle,de.width,we(Nt),de.dash)}),tn.selectAll("g."+et._id+"tick,path").remove();var Rt=je+Te+($||0)/2-("outside"===I.ticks?1:0),yt=e.calcTicks(et),Vt=e.getTickSigns(et)[2];return e.drawTicks(B,et,{vals:"inside"===et.ticks?e.clipEnds(et,yt):yt,layer:tn,path:e.makeTickPath(et,Rt,Vt),transFn:e.makeTransTickFn(et)}),e.drawLabels(B,et,{vals:yt,layer:tn,transFn:e.makeTransTickLabelFn(et),labelFns:e.makeLabelFns(et,Rt)})},function(){if(V&&!tt||!V&&tt){var qe,it,Ie=et.position||0,ze=et._offset+et._length/2;if("right"===be)it=ze,qe=le.l+le.w*Ie+10+Ot*(et.showticklabels?1:.5);else if(qe=ze,"bottom"===be&&(it=le.t+le.h*Ie+10+(-1===ut.indexOf("inside")?et.tickfont.size:0)+("intside"!==et.ticks&&I.ticklen||0)),"top"===be){var Ve=he.text.split("<br>").length;it=le.t+le.h*Ie+10-Te-y*Ot*Ve}Qe((V?"h":"v")+et._id+"title",{avoid:{selection:m.select(B).selectAll("g."+et._id+"tick"),side:be,offsetTop:V?0:le.t,offsetLeft:V?le.l:0,maxShift:V?ne.width:ne.height},attributes:{x:qe,y:it,"text-anchor":"middle"},transform:{rotate:V?-90:0,offset:0}})}},T.previousPromises,function(){var qe,it=Te+$/2;-1===ut.indexOf("inside")&&(qe=u.bBox(tn.node()),it+=V?qe.width:qe.height),zt=ht.select("text");var Ie=0,ze=V&&"top"===be,Ve=!V&&"right"===be,Be=0;if(zt.node()&&!zt.classed(k.jsPlaceholder)){var at,gt=ht.select(".h"+et._id+"title-math-group").node();gt&&(V&&tt||!V&&!tt)?(Ie=(qe=u.bBox(gt)).width,at=qe.height):(Ie=(qe=u.bBox(ht.node())).right-le.l-(V?je:$e),at=qe.bottom-le.t-(V?$e:je),V||"top"!==be||(it+=qe.height,Be=qe.height)),Ve&&(zt.attr("transform",l(Ie/2+Ot/2,0)),Ie*=2),it=Math.max(it,V?Ie:at)}var wt=2*(V?W:ie)+it+Q+$/2,_t=0;!V&&he.text&&"bottom"===G&&te<=0&&(wt+=_t=wt/2,Be+=_t),ne._hColorbarMoveTitle=_t,ne._hColorbarMoveCBTitle=Be;var Rt=Q+$;L.select("."+k.cbbg).attr("x",(V?je:$e)-Rt/2-(V?W:0)).attr("y",(V?$e:je)-(V?Ee:ie+Be-_t)).attr(V?"width":"height",Math.max(wt-_t,2)).attr(V?"height":"width",Math.max(Ee+Rt,2)).call(s.fill,se).call(s.stroke,I.bordercolor).style("stroke-width",Q);var yt=Ve?Math.max(Ie-10,0):0;if(L.selectAll("."+k.cboutline).attr("x",(V?je:$e+W)+yt).attr("y",(V?$e+ie-Ee:je)+(ze?un:0)).attr(V?"width":"height",Math.max(Te,2)).attr(V?"height":"width",Math.max(Ee-(V?2*ie+un:2*W+yt),2)).call(s.stroke,I.outlinecolor).style({fill:"none","stroke-width":$}),L.attr("transform",l(le.l-(V?Ge*wt:0),le.t-(V?0:(1-Ke)*wt-Be))),!V&&(Q||x(se).getAlpha()&&!x.equals(ne.paper_bgcolor,se))){var Vt=tn.selectAll("text"),Nt=Vt[0].length,rt=L.select("."+k.cbbg).node(),Tt=u.bBox(rt),Ut=u.getTranslate(L);Vt.each(function(Kt,_n){var en=Nt-1;if(0===_n||_n===en){var on,wn=u.bBox(this),On=u.getTranslate(this);_n===en?(on=Tt.right+Ut.x+$e-Q-2+q-(wn.right+On.x))>0&&(on=0):0===_n&&(on=Tt.left+Ut.x+$e+Q+2-(wn.left+On.x))<0&&(on=0),on&&(Nt<3?this.setAttribute("transform","translate("+on+",0) "+this.getAttribute("transform")):this.setAttribute("visibility","hidden"))}})}var Wt={},sn=M[j],He=A[j],vt=M[G],Lt=A[G],Gt=wt-Te;V?("pixels"===Y?(Wt.y=te,Wt.t=Ee*vt,Wt.b=Ee*Lt):(Wt.t=Wt.b=0,Wt.yt=te+Z*vt,Wt.yb=te-Z*Lt),"pixels"===J?(Wt.x=q,Wt.l=wt*sn,Wt.r=wt*He):(Wt.l=Gt*sn,Wt.r=Gt*He,Wt.xl=q-ee*sn,Wt.xr=q+ee*He)):("pixels"===Y?(Wt.x=q,Wt.l=Ee*sn,Wt.r=Ee*He):(Wt.l=Wt.r=0,Wt.xl=q+Z*sn,Wt.xr=q-Z*He),"pixels"===J?(Wt.y=1-te,Wt.t=wt*vt,Wt.b=wt*Lt):(Wt.t=Gt*vt,Wt.b=Gt*Lt,Wt.yt=te-ee*vt,Wt.yb=te+ee*Lt)),T.autoMargin(B,I._id,Wt)}],B)}(F,D,C);R&&R.then&&(C._promises||[]).push(R),C._context.edits.colorbarPosition&&(ee="v"===(I=D).orientation,J=(B=C)._fullLayout._size,o.init({element:(L=F).node(),gd:B,prepFn:function(){V=L.attr("transform"),d(L)},moveFn:function($,Q){L.attr("transform",V+l($,Q)),Z=o.align((ee?I._uFrac:I._vFrac)+$/J.w,ee?I._thickFrac:I._lenFrac,0,1,I.xanchor),Y=o.align((ee?I._vFrac:1-I._uFrac)-Q/J.h,ee?I._lenFrac:I._thickFrac,0,1,I.yanchor);var se=o.getCursor(Z,Y,I.xanchor,I.yanchor);d(L,se)},doneFn:function(){if(d(L),void 0!==Z&&void 0!==Y){var $={};$[I._propPrefix+"x"]=Z,$[I._propPrefix+"y"]=Y,void 0!==I._traceIndex?b.call("_guiRestyle",B,$,I._traceIndex):b.call("_guiRelayout",B,$)}}}))}),P.exit().each(function(D){T.autoMargin(C,D._id)}).remove(),P.order()}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/extend":493,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"../../plots/plots":619,"../../registry":638,"../color":366,"../colorscale/helpers":377,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":368,"@plotly/d3":58,tinycolor2:312}],371:[function(_,oe,ae){"use strict";var m=_("../../lib");oe.exports=function(x){return m.isPlainObject(x.colorbar)}},{"../../lib":503}],372:[function(_,oe,ae){"use strict";oe.exports={moduleType:"component",name:"colorbar",attributes:_("./attributes"),supplyDefaults:_("./defaults"),draw:_("./draw").draw,hasColorbar:_("./has_colorbar")}},{"./attributes":367,"./defaults":369,"./draw":370,"./has_colorbar":371}],373:[function(_,oe,ae){"use strict";var m=_("../colorbar/attributes"),x=_("../../lib/regex").counter,T=_("../../lib/sort_object_keys"),b=_("./scales.js").scales;function e(o){return"`"+o+"`"}T(b),oe.exports=function(o,a){o=o||"";var l,i=(a=a||{}).cLetter||"c",d=("onlyIfNumerical"in a||Boolean(o),"noScale"in a?a.noScale:"marker.line"===o),u="showScaleDflt"in a?a.showScaleDflt:"z"===i,s="string"==typeof a.colorscaleDflt?b[a.colorscaleDflt]:null,c=a.editTypeOverride||"",h=o?o+".":"";"colorAttr"in a?l=a.colorAttr:e(h+(l={z:"z",c:"color"}[i]));var p=i+"auto",v=i+"min",g=i+"max",f=i+"mid",w=(e(h+p),e(h+v),e(h+g),{});w[v]=w[g]=void 0;var y={};y[p]=!1;var M={};return"color"===l&&(M.color={valType:"color",arrayOk:!0,editType:c||"style"},a.anim&&(M.color.anim=!0)),M[p]={valType:"boolean",dflt:!0,editType:"calc",impliedEdits:w},M[v]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:y},M[g]={valType:"number",dflt:null,editType:c||"plot",impliedEdits:y},M[f]={valType:"number",dflt:null,editType:"calc",impliedEdits:w},M.colorscale={valType:"colorscale",editType:"calc",dflt:s,impliedEdits:{autocolorscale:!1}},M.autocolorscale={valType:"boolean",dflt:!1!==a.autoColorDflt,editType:"calc",impliedEdits:{colorscale:void 0}},M.reversescale={valType:"boolean",dflt:!1,editType:"plot"},d||(M.showscale={valType:"boolean",dflt:u,editType:"calc"},M.colorbar=m),a.noColorAxis||(M.coloraxis={valType:"subplotid",regex:x("coloraxis"),dflt:null,editType:"calc"}),M}},{"../../lib/regex":520,"../../lib/sort_object_keys":526,"../colorbar/attributes":367,"./scales.js":381}],374:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../lib"),T=_("./helpers").extractOpts;oe.exports=function(b,e,o){var l=b._fullLayout,i=o.vals,d=o.containerStr,u=d?x.nestedProperty(e,d).get():e,s=T(u),c=!1!==s.auto,h=s.min,p=s.max,v=s.mid,g=function(){return x.aggNums(Math.min,null,i)},f=function(){return x.aggNums(Math.max,null,i)};void 0===h?h=g():c&&(h=u._colorAx&&m(h)?Math.min(h,g()):g()),void 0===p?p=f():c&&(p=u._colorAx&&m(p)?Math.max(p,f()):f()),c&&void 0!==v&&(p-v>v-h?h=v-(p-v):p-v<v-h&&(p=v+(v-h))),h===p&&(h-=.5,p+=.5),s._sync("min",h),s._sync("max",p),s.autocolorscale&&s._sync("colorscale",h*p<0?l.colorscale.diverging:h>=0?l.colorscale.sequential:l.colorscale.sequentialminus)}},{"../../lib":503,"./helpers":377,"fast-isnumeric":190}],375:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./helpers").hasColorscale,T=_("./helpers").extractOpts;oe.exports=function(b,e){function o(c,h){var p=c["_"+h];void 0!==p&&(c[h]=p)}function a(c,h){var p=h.container?m.nestedProperty(c,h.container).get():c;if(p)if(p.coloraxis)p._colorAx=e[p.coloraxis];else{var v=T(p),g=v.auto;(g||void 0===v.min)&&o(p,h.min),(g||void 0===v.max)&&o(p,h.max),v.autocolorscale&&o(p,"colorscale")}}for(var l=0;l<b.length;l++){var i=b[l],d=i._module.colorbar;if(d)if(Array.isArray(d))for(var u=0;u<d.length;u++)a(i,d[u]);else a(i,d);x(i,"marker.line")&&a(i,{container:"marker.line",min:"cmin",max:"cmax"})}for(var s in e._colorAxes)a(e[s],{min:"cmin",max:"cmax"})}},{"../../lib":503,"./helpers":377}],376:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../lib"),T=_("../colorbar/has_colorbar"),b=_("../colorbar/defaults"),e=_("./scales").isValid,o=_("../../registry").traceIs;function a(l,i){var d=i.slice(0,i.length-1);return i?x.nestedProperty(l,d).get()||{}:l}oe.exports=function l(i,d,u,s,c){var h=c.prefix,p=c.cLetter,v="_module"in d,g=a(i,h),f=a(d,h),w=a(d._template||{},h)||{},y=function(){return delete i.coloraxis,delete d.coloraxis,l(i,d,u,s,c)};if(v){var M=u._colorAxes||{},A=s(h+"coloraxis");if(A){var k=o(d,"contour")&&x.nestedProperty(d,"contours.coloring").get()||"heatmap",C=M[A];return void(C?(C[2].push(y),C[0]!==k&&(C[0]=!1,x.warn(["Ignoring coloraxis:",A,"setting","as it is linked to incompatible colorscales."].join(" ")))):M[A]=[k,d,[y]])}}var P=g[p+"min"],D=g[p+"max"],F=m(P)&&m(D)&&P<D;s(h+p+"auto",!F)?s(h+p+"mid"):(s(h+p+"min"),s(h+p+"max"));var R,L,I=g.colorscale,B=w.colorscale;void 0!==I&&(R=!e(I)),void 0!==B&&(R=!e(B)),s(h+"autocolorscale",R),s(h+"colorscale"),s(h+"reversescale"),"marker.line."!==h&&(h&&v&&(L=T(g)),s(h+"showscale",L)&&(h&&w&&(f._template=w),b(g,f,u)))}},{"../../lib":503,"../../registry":638,"../colorbar/defaults":369,"../colorbar/has_colorbar":371,"./scales":381,"fast-isnumeric":190}],377:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("tinycolor2"),T=_("fast-isnumeric"),b=_("../../lib"),e=_("../color"),o=_("./scales").isValid,a=["showscale","autocolorscale","colorscale","reversescale","colorbar"],l=["min","max","mid","auto"];function i(h){var p,v,g,f=h._colorAx,w=f||h,y={};for(v=0;v<a.length;v++)y[g=a[v]]=w[g];if(f)for(p="c",v=0;v<l.length;v++)y[g=l[v]]=w["c"+g];else{var M;for(v=0;v<l.length;v++)((M="c"+(g=l[v]))in w||(M="z"+g)in w)&&(y[g]=w[M]);p=M.charAt(0)}return y._sync=function(A,k){var C=-1!==l.indexOf(A)?p+A:A;w[C]=w["_"+C]=k},y}function d(h){for(var p=i(h),v=p.min,g=p.max,f=p.reversescale?u(p.colorscale):p.colorscale,w=f.length,y=new Array(w),M=new Array(w),A=0;A<w;A++){var k=f[A];y[A]=v+k[0]*(g-v),M[A]=k[1]}return{domain:y,range:M}}function u(h){for(var p=h.length,v=new Array(p),g=p-1,f=0;g>=0;g--,f++){var w=h[g];v[f]=[1-w[0],w[1]]}return v}function s(h,p){p=p||{};for(var v=h.domain,g=h.range,f=g.length,w=new Array(f),y=0;y<f;y++){var M=x(g[y]).toRgb();w[y]=[M.r,M.g,M.b,M.a]}var A,k=m.scale.linear().domain(v).range(w).clamp(!0),C=p.noNumericCheck,P=p.returnArray;return(A=C&&P?k:C?function(D){return c(k(D))}:P?function(D){return T(D)?k(D):x(D).isValid()?D:e.defaultLine}:function(D){return T(D)?c(k(D)):x(D).isValid()?D:e.defaultLine}).domain=k.domain,A.range=function(){return g},A}function c(h){return x({r:h[0],g:h[1],b:h[2],a:h[3]}).toRgbString()}oe.exports={hasColorscale:function(h,p,v){var g=p?b.nestedProperty(h,p).get()||{}:h,f=g[v||"color"],w=!1;if(b.isArrayOrTypedArray(f))for(var y=0;y<f.length;y++)if(T(f[y])){w=!0;break}return b.isPlainObject(g)&&(w||!0===g.showscale||T(g.cmin)&&T(g.cmax)||o(g.colorscale)||b.isPlainObject(g.colorbar))},extractOpts:i,extractScale:d,flipScale:u,makeColorScaleFunc:s,makeColorScaleFuncFromTrace:function(h,p){return s(d(h),p)}}},{"../../lib":503,"../color":366,"./scales":381,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],378:[function(_,oe,ae){"use strict";var m=_("./scales"),x=_("./helpers");oe.exports={moduleType:"component",name:"colorscale",attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyLayoutDefaults:_("./layout_defaults"),handleDefaults:_("./defaults"),crossTraceDefaults:_("./cross_trace_defaults"),calc:_("./calc"),scales:m.scales,defaultScale:m.defaultScale,getScale:m.get,isValidScale:m.isValid,hasColorscale:x.hasColorscale,extractOpts:x.extractOpts,extractScale:x.extractScale,flipScale:x.flipScale,makeColorScaleFunc:x.makeColorScaleFunc,makeColorScaleFuncFromTrace:x.makeColorScaleFuncFromTrace}},{"./attributes":373,"./calc":374,"./cross_trace_defaults":375,"./defaults":376,"./helpers":377,"./layout_attributes":379,"./layout_defaults":380,"./scales":381}],379:[function(_,oe,ae){"use strict";var m=_("../../lib/extend").extendFlat,x=_("./attributes"),T=_("./scales").scales;oe.exports={editType:"calc",colorscale:{editType:"calc",sequential:{valType:"colorscale",dflt:T.Reds,editType:"calc"},sequentialminus:{valType:"colorscale",dflt:T.Blues,editType:"calc"},diverging:{valType:"colorscale",dflt:T.RdBu,editType:"calc"}},coloraxis:m({_isSubplotObj:!0,editType:"calc"},x("",{colorAttr:"corresponding trace color array(s)",noColorAxis:!0,showScaleDflt:!0}))}},{"../../lib/extend":493,"./attributes":373,"./scales":381}],380:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../plot_api/plot_template"),T=_("./layout_attributes"),b=_("./defaults");oe.exports=function(e,o){function a(p,v){return m.coerce(e,o,T,p,v)}a("colorscale.sequential"),a("colorscale.sequentialminus"),a("colorscale.diverging");var l,i,d=o._colorAxes;function u(p,v){return m.coerce(l,i,T.coloraxis,p,v)}for(var s in d){var c=d[s];if(c[0])l=e[s]||{},(i=x.newContainer(o,s,"coloraxis"))._name=s,b(l,i,o,u,{prefix:"",cLetter:"c"});else{for(var h=0;h<c[2].length;h++)c[2][h]();delete o._colorAxes[s]}}}},{"../../lib":503,"../../plot_api/plot_template":543,"./defaults":376,"./layout_attributes":379}],381:[function(_,oe,ae){"use strict";var m=_("tinycolor2"),x={Greys:[[0,"rgb(0,0,0)"],[1,"rgb(255,255,255)"]],YlGnBu:[[0,"rgb(8,29,88)"],[.125,"rgb(37,52,148)"],[.25,"rgb(34,94,168)"],[.375,"rgb(29,145,192)"],[.5,"rgb(65,182,196)"],[.625,"rgb(127,205,187)"],[.75,"rgb(199,233,180)"],[.875,"rgb(237,248,217)"],[1,"rgb(255,255,217)"]],Greens:[[0,"rgb(0,68,27)"],[.125,"rgb(0,109,44)"],[.25,"rgb(35,139,69)"],[.375,"rgb(65,171,93)"],[.5,"rgb(116,196,118)"],[.625,"rgb(161,217,155)"],[.75,"rgb(199,233,192)"],[.875,"rgb(229,245,224)"],[1,"rgb(247,252,245)"]],YlOrRd:[[0,"rgb(128,0,38)"],[.125,"rgb(189,0,38)"],[.25,"rgb(227,26,28)"],[.375,"rgb(252,78,42)"],[.5,"rgb(253,141,60)"],[.625,"rgb(254,178,76)"],[.75,"rgb(254,217,118)"],[.875,"rgb(255,237,160)"],[1,"rgb(255,255,204)"]],Bluered:[[0,"rgb(0,0,255)"],[1,"rgb(255,0,0)"]],RdBu:[[0,"rgb(5,10,172)"],[.35,"rgb(106,137,247)"],[.5,"rgb(190,190,190)"],[.6,"rgb(220,170,132)"],[.7,"rgb(230,145,90)"],[1,"rgb(178,10,28)"]],Reds:[[0,"rgb(220,220,220)"],[.2,"rgb(245,195,157)"],[.4,"rgb(245,160,105)"],[1,"rgb(178,10,28)"]],Blues:[[0,"rgb(5,10,172)"],[.35,"rgb(40,60,190)"],[.5,"rgb(70,100,245)"],[.6,"rgb(90,120,245)"],[.7,"rgb(106,137,247)"],[1,"rgb(220,220,220)"]],Picnic:[[0,"rgb(0,0,255)"],[.1,"rgb(51,153,255)"],[.2,"rgb(102,204,255)"],[.3,"rgb(153,204,255)"],[.4,"rgb(204,204,255)"],[.5,"rgb(255,255,255)"],[.6,"rgb(255,204,255)"],[.7,"rgb(255,153,255)"],[.8,"rgb(255,102,204)"],[.9,"rgb(255,102,102)"],[1,"rgb(255,0,0)"]],Rainbow:[[0,"rgb(150,0,90)"],[.125,"rgb(0,0,200)"],[.25,"rgb(0,25,255)"],[.375,"rgb(0,152,255)"],[.5,"rgb(44,255,150)"],[.625,"rgb(151,255,0)"],[.75,"rgb(255,234,0)"],[.875,"rgb(255,111,0)"],[1,"rgb(255,0,0)"]],Portland:[[0,"rgb(12,51,131)"],[.25,"rgb(10,136,186)"],[.5,"rgb(242,211,56)"],[.75,"rgb(242,143,56)"],[1,"rgb(217,30,30)"]],Jet:[[0,"rgb(0,0,131)"],[.125,"rgb(0,60,170)"],[.375,"rgb(5,255,255)"],[.625,"rgb(255,255,0)"],[.875,"rgb(250,0,0)"],[1,"rgb(128,0,0)"]],Hot:[[0,"rgb(0,0,0)"],[.3,"rgb(230,0,0)"],[.6,"rgb(255,210,0)"],[1,"rgb(255,255,255)"]],Blackbody:[[0,"rgb(0,0,0)"],[.2,"rgb(230,0,0)"],[.4,"rgb(230,210,0)"],[.7,"rgb(255,255,255)"],[1,"rgb(160,200,255)"]],Earth:[[0,"rgb(0,0,130)"],[.1,"rgb(0,180,180)"],[.2,"rgb(40,210,40)"],[.4,"rgb(230,230,50)"],[.6,"rgb(120,70,20)"],[1,"rgb(255,255,255)"]],Electric:[[0,"rgb(0,0,0)"],[.15,"rgb(30,0,100)"],[.4,"rgb(120,0,100)"],[.6,"rgb(160,90,0)"],[.8,"rgb(230,200,0)"],[1,"rgb(255,250,220)"]],Viridis:[[0,"#440154"],[.06274509803921569,"#48186a"],[.12549019607843137,"#472d7b"],[.18823529411764706,"#424086"],[.25098039215686274,"#3b528b"],[.3137254901960784,"#33638d"],[.3764705882352941,"#2c728e"],[.4392156862745098,"#26828e"],[.5019607843137255,"#21918c"],[.5647058823529412,"#1fa088"],[.6274509803921569,"#28ae80"],[.6901960784313725,"#3fbc73"],[.7529411764705882,"#5ec962"],[.8156862745098039,"#84d44b"],[.8784313725490196,"#addc30"],[.9411764705882353,"#d8e219"],[1,"#fde725"]],Cividis:[[0,"rgb(0,32,76)"],[.058824,"rgb(0,42,102)"],[.117647,"rgb(0,52,110)"],[.176471,"rgb(39,63,108)"],[.235294,"rgb(60,74,107)"],[.294118,"rgb(76,85,107)"],[.352941,"rgb(91,95,109)"],[.411765,"rgb(104,106,112)"],[.470588,"rgb(117,117,117)"],[.529412,"rgb(131,129,120)"],[.588235,"rgb(146,140,120)"],[.647059,"rgb(161,152,118)"],[.705882,"rgb(176,165,114)"],[.764706,"rgb(192,177,109)"],[.823529,"rgb(209,191,102)"],[.882353,"rgb(225,204,92)"],[.941176,"rgb(243,219,79)"],[1,"rgb(255,233,69)"]]},T=x.RdBu;function b(e){var o=0;if(!Array.isArray(e)||e.length<2||!e[0]||!e[e.length-1]||0!=+e[0][0]||1!=+e[e.length-1][0])return!1;for(var a=0;a<e.length;a++){var l=e[a];if(2!==l.length||+l[0]<o||!m(l[1]).isValid())return!1;o=+l[0]}return!0}oe.exports={scales:x,defaultScale:T,get:function(e,o){if(o||(o=T),!e)return o;function a(){try{e=x[e]||JSON.parse(e)}catch(l){e=o}}return"string"==typeof e&&(a(),"string"==typeof e&&a()),b(e)?e:o},isValid:function(e){return void 0!==x[e]||b(e)}}},{tinycolor2:312}],382:[function(_,oe,ae){"use strict";oe.exports=function(m,x,T,b,e){var o=(m-T)/(b-T),a=o+x/(b-T),l=(o+a)/2;return"left"===e||"bottom"===e?o:"center"===e||"middle"===e?l:"right"===e||"top"===e?a:o<2/3-l?o:a>4/3-l?a:l}},{}],383:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=[["sw-resize","s-resize","se-resize"],["w-resize","move","e-resize"],["nw-resize","n-resize","ne-resize"]];oe.exports=function(T,b,e,o){return T="left"===e?0:"center"===e?1:"right"===e?2:m.constrain(Math.floor(3*T),0,2),b="bottom"===o?0:"middle"===o?1:"top"===o?2:m.constrain(Math.floor(3*b),0,2),x[b][T]}},{"../../lib":503}],384:[function(_,oe,ae){"use strict";ae.selectMode=function(m){return"lasso"===m||"select"===m},ae.drawMode=function(m){return"drawclosedpath"===m||"drawopenpath"===m||"drawline"===m||"drawrect"===m||"drawcircle"===m},ae.openMode=function(m){return"drawline"===m||"drawopenpath"===m},ae.rectMode=function(m){return"select"===m||"drawline"===m||"drawrect"===m||"drawcircle"===m},ae.freeMode=function(m){return"lasso"===m||"drawclosedpath"===m||"drawopenpath"===m},ae.selectingOrDrawing=function(m){return ae.freeMode(m)||ae.rectMode(m)}},{}],385:[function(_,oe,ae){"use strict";var m=_("mouse-event-offset"),x=_("has-hover"),T=_("has-passive-events"),b=_("../../lib").removeElement,e=_("../../plots/cartesian/constants"),o=oe.exports={};o.align=_("./align"),o.getCursor=_("./cursor");var a=_("./unhover");function l(){var d=document.createElement("div");d.className="dragcover";var u=d.style;return u.position="fixed",u.left=0,u.right=0,u.top=0,u.bottom=0,u.zIndex=999999999,u.background="none",document.body.appendChild(d),d}function i(d){return m(d.changedTouches?d.changedTouches[0]:d,document.body)}o.unhover=a.wrapped,o.unhoverRaw=a.raw,o.init=function(d){var u,s,c,h,p,v,g,f,w=d.gd,y=1,M=w._context.doubleClickDelay,A=d.element;w._mouseDownTime||(w._mouseDownTime=0),A.style.pointerEvents="all",A.onmousedown=C,T?(A._ontouchstart&&A.removeEventListener("touchstart",A._ontouchstart),A._ontouchstart=C,A.addEventListener("touchstart",C,{passive:!1})):A.ontouchstart=C;var k=d.clampFn||function(F,R,L){return Math.abs(F)<L&&(F=0),Math.abs(R)<L&&(R=0),[F,R]};function C(F){w._dragged=!1,w._dragging=!0;var R=i(F);u=R[0],s=R[1],g=F.target,v=F,f=2===F.buttons||F.ctrlKey,void 0===F.clientX&&void 0===F.clientY&&(F.clientX=u,F.clientY=s),(c=(new Date).getTime())-w._mouseDownTime<M?y+=1:(y=1,w._mouseDownTime=c),d.prepFn&&d.prepFn(F,u,s),x&&!f?(p=l()).style.cursor=window.getComputedStyle(A).cursor:x||(p=document,h=window.getComputedStyle(document.documentElement).cursor,document.documentElement.style.cursor=window.getComputedStyle(A).cursor),document.addEventListener("mouseup",D),document.addEventListener("touchend",D),!1!==d.dragmode&&(F.preventDefault(),document.addEventListener("mousemove",P),document.addEventListener("touchmove",P,{passive:!1}))}function P(F){F.preventDefault();var R=i(F),I=k(R[0]-u,R[1]-s,d.minDrag||e.MINDRAG),B=I[0],V=I[1];(B||V)&&(w._dragged=!0,o.unhover(w,F)),w._dragged&&d.moveFn&&!f&&(w._dragdata={element:A,dx:B,dy:V},d.moveFn(B,V))}function D(F){if(delete w._dragdata,!1!==d.dragmode&&(F.preventDefault(),document.removeEventListener("mousemove",P),document.removeEventListener("touchmove",P)),document.removeEventListener("mouseup",D),document.removeEventListener("touchend",D),x?b(p):h&&(p.documentElement.style.cursor=h,h=null),w._dragging){if(w._dragging=!1,(new Date).getTime()-w._mouseDownTime>M&&(y=Math.max(y-1,1)),w._dragged)d.doneFn&&d.doneFn();else if(d.clickFn&&d.clickFn(y,v),!f){var R;try{R=new MouseEvent("click",F)}catch(I){var L=i(F);(R=document.createEvent("MouseEvents")).initMouseEvent("click",F.bubbles,F.cancelable,F.view,F.detail,F.screenX,F.screenY,L[0],L[1],F.ctrlKey,F.altKey,F.shiftKey,F.metaKey,F.button,F.relatedTarget)}g.dispatchEvent(R)}w._dragging=!1,w._dragged=!1}else w._dragged=!1}},o.coverSlip=l},{"../../lib":503,"../../plots/cartesian/constants":561,"./align":382,"./cursor":383,"./unhover":386,"has-hover":228,"has-passive-events":229,"mouse-event-offset":242}],386:[function(_,oe,ae){"use strict";var m=_("../../lib/events"),x=_("../../lib/throttle"),T=_("../../lib/dom").getGraphDiv,b=_("../fx/constants"),e=oe.exports={};e.wrapped=function(o,a,l){(o=T(o))._fullLayout&&x.clear(o._fullLayout._uid+b.HOVERID),e.raw(o,a,l)},e.raw=function(o,a){var l=o._fullLayout,i=o._hoverdata;a||(a={}),a.target&&!o._dragged&&!1===m.triggerHandler(o,"plotly_beforehover",a)||(l._hoverlayer.selectAll("g").remove(),l._hoverlayer.selectAll("line").remove(),l._hoverlayer.selectAll("circle").remove(),o._hoverdata=void 0,a.target&&i&&o.emit("plotly_unhover",{event:a,points:i}))}},{"../../lib/dom":491,"../../lib/events":492,"../../lib/throttle":530,"../fx/constants":400}],387:[function(_,oe,ae){"use strict";ae.dash={valType:"string",values:["solid","dot","dash","longdash","dashdot","longdashdot"],dflt:"solid",editType:"style"},ae.pattern={shape:{valType:"enumerated",values:["","/","\\","x","-","|","+","."],dflt:"",arrayOk:!0,editType:"style"},fillmode:{valType:"enumerated",values:["replace","overlay"],dflt:"replace",editType:"style"},bgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgcolor:{valType:"color",arrayOk:!0,editType:"style"},fgopacity:{valType:"number",editType:"style",min:0,max:1},size:{valType:"number",min:0,dflt:8,arrayOk:!0,editType:"style"},solidity:{valType:"number",min:0,max:1,dflt:.3,arrayOk:!0,editType:"style"},editType:"style"}},{}],388:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../lib"),T=x.numberFormat,b=_("fast-isnumeric"),e=_("tinycolor2"),o=_("../../registry"),a=_("../color"),l=_("../colorscale"),i=x.strTranslate,d=_("../../lib/svg_text_utils"),u=_("../../constants/xmlns_namespaces"),s=_("../../constants/alignment").LINE_SPACING,c=_("../../constants/interactions").DESELECTDIM,h=_("../../traces/scatter/subtypes"),p=_("../../traces/scatter/make_bubble_size_func"),v=_("../../components/fx/helpers").appendArrayPointValue,g=oe.exports={};g.font=function(J,$,Q,se){x.isPlainObject($)&&(se=$.color,Q=$.size,$=$.family),$&&J.style("font-family",$),Q+1&&J.style("font-size",Q+"px"),se&&J.call(a.fill,se)},g.setPosition=function(J,$,Q){J.attr("x",$).attr("y",Q)},g.setSize=function(J,$,Q){J.attr("width",$).attr("height",Q)},g.setRect=function(J,$,Q,se,j){J.call(g.setPosition,$,Q).call(g.setSize,se,j)},g.translatePoint=function(J,$,Q,se){var j=Q.c2p(J.x),G=se.c2p(J.y);return!!(b(j)&&b(G)&&$.node())&&("text"===$.node().nodeName?$.attr("x",j).attr("y",G):$.attr("transform",i(j,G)),!0)},g.translatePoints=function(J,$,Q){J.each(function(se){var j=m.select(this);g.translatePoint(se,j,$,Q)})},g.hideOutsideRangePoint=function(J,$,Q,se,j,G){$.attr("display",Q.isPtWithinRange(J,j)&&se.isPtWithinRange(J,G)?null:"none")},g.hideOutsideRangePoints=function(J,$){if($._hasClipOnAxisFalse){var Q=$.xaxis,se=$.yaxis;J.each(function(j){var G=j[0].trace,W=G.xcalendar,ie=G.ycalendar,q=o.traceIs(G,"bar-like")?".bartext":".point,.textpoint";J.selectAll(q).each(function(te){g.hideOutsideRangePoint(te,m.select(this),Q,se,W,ie)})})}},g.crispRound=function(J,$,Q){return $&&b($)?J._context.staticPlot?$:$<1?1:Math.round($):Q||0},g.singleLineStyle=function(J,$,Q,se,j){$.style("fill","none");var G=(((J||[])[0]||{}).trace||{}).line||{},W=Q||G.width||0,ie=j||G.dash||"";a.stroke($,se||G.color),g.dashLine($,ie,W)},g.lineGroupStyle=function(J,$,Q,se){J.style("fill","none").each(function(j){var G=(((j||[])[0]||{}).trace||{}).line||{},W=$||G.width||0,ie=se||G.dash||"";m.select(this).call(a.stroke,Q||G.color).call(g.dashLine,ie,W)})},g.dashLine=function(J,$,Q){$=g.dashStyle($,Q=+Q||0),J.style({"stroke-dasharray":$,"stroke-width":Q+"px"})},g.dashStyle=function(J,$){$=+$||1;var Q=Math.max($,3);return"solid"===J?J="":"dot"===J?J=Q+"px,"+Q+"px":"dash"===J?J=3*Q+"px,"+3*Q+"px":"longdash"===J?J=5*Q+"px,"+5*Q+"px":"dashdot"===J?J=3*Q+"px,"+Q+"px,"+Q+"px,"+Q+"px":"longdashdot"===J&&(J=5*Q+"px,"+2*Q+"px,"+Q+"px,"+2*Q+"px"),J},g.singleFillStyle=function(J){var $=(((m.select(J.node()).data()[0]||[])[0]||{}).trace||{}).fillcolor;$&&J.call(a.fill,$)},g.fillGroupStyle=function(J){J.style("stroke-width",0).each(function($){var Q=m.select(this);$[0].trace&&Q.call(a.fill,$[0].trace.fillcolor)})};var f=_("./symbol_defs");g.symbolNames=[],g.symbolFuncs=[],g.symbolNeedLines={},g.symbolNoDot={},g.symbolNoFill={},g.symbolList=[],Object.keys(f).forEach(function(J){var $=f[J],Q=$.n;g.symbolList.push(Q,String(Q),J,Q+100,String(Q+100),J+"-open"),g.symbolNames[Q]=J,g.symbolFuncs[Q]=$.f,$.needLine&&(g.symbolNeedLines[Q]=!0),$.noDot?g.symbolNoDot[Q]=!0:g.symbolList.push(Q+200,String(Q+200),J+"-dot",Q+300,String(Q+300),J+"-open-dot"),$.noFill&&(g.symbolNoFill[Q]=!0)});var w=g.symbolNames.length;function y(J,$){return g.symbolFuncs[J%100]($)+(J>=200?"M0,0.5L0.5,0L0,-0.5L-0.5,0Z":"")}g.symbolNumber=function(J){if(b(J))J=+J;else if("string"==typeof J){var $=0;J.indexOf("-open")>0&&($=100,J=J.replace("-open","")),J.indexOf("-dot")>0&&($+=200,J=J.replace("-dot","")),(J=g.symbolNames.indexOf(J))>=0&&(J+=$)}return J%100>=w||J>=400?0:Math.floor(Math.max(J,0))};var M={x1:1,x2:0,y1:0,y2:0},A={x1:0,x2:0,y1:1,y2:0},k=T("~f"),C={radial:{node:"radialGradient"},radialreversed:{node:"radialGradient",reversed:!0},horizontal:{node:"linearGradient",attrs:M},horizontalreversed:{node:"linearGradient",attrs:M,reversed:!0},vertical:{node:"linearGradient",attrs:A},verticalreversed:{node:"linearGradient",attrs:A,reversed:!0}};g.gradient=function(J,$,Q,se,j,G){for(var W=j.length,ie=C[se],q=new Array(W),te=0;te<W;te++)ie.reversed?q[W-1-te]=[k(100*(1-j[te][0])),j[te][1]]:q[te]=[k(100*j[te][0]),j[te][1]];var ne=$._fullLayout,le="g"+ne._uid+"-"+Q,ue=ne._defs.select(".gradients").selectAll("#"+le).data([se+q.join(";")],x.identity);ue.exit().remove(),ue.enter().append(ie.node).each(function(){var be=m.select(this);ie.attrs&&be.attr(ie.attrs),be.attr("id",le);var ge=be.selectAll("stop").data(q);ge.exit().remove(),ge.enter().append("stop"),ge.each(function(we){var Ce=e(we[1]);m.select(this).attr({offset:we[0]+"%","stop-color":a.tinyRGB(Ce),"stop-opacity":Ce.getAlpha()})})}),J.style(G,Z(le,$)).style(G+"-opacity",null);var de=function(be){return"."+be.attr("class").replace(/\s/g,".")},he=de(m.select(J.node().parentNode))+">"+de(J);ne._gradientUrlQueryParts[he]=1},g.pattern=function(J,$,Q,se,j,G,W,ie,q,te,ne,le){var ue="legend"===$;ie&&("overlay"===q?ne=a.contrast(te=ie):(te=void 0,ne=ie));var de,he,be,ge,we,Ce,De,Se,ve,Le=Q._fullLayout,Ee="p"+Le._uid+"-"+se,Pe={};switch(j){case"/":de=G*Math.sqrt(2),he=G*Math.sqrt(2),Ce="path",Pe={d:be="M-"+de/4+","+he/4+"l"+de/2+",-"+he/2+"M0,"+he+"L"+de+",0M"+de/4*3+","+he/4*5+"l"+de/2+",-"+he/2,opacity:le,stroke:ne,"stroke-width":(ge=W*G)+"px"};break;case"\\":de=G*Math.sqrt(2),he=G*Math.sqrt(2),Ce="path",Pe={d:be="M"+de/4*3+",-"+he/4+"l"+de/2+","+he/2+"M0,0L"+de+","+he+"M-"+de/4+","+he/4*3+"l"+de/2+","+he/2,opacity:le,stroke:ne,"stroke-width":(ge=W*G)+"px"};break;case"x":de=G*Math.sqrt(2),he=G*Math.sqrt(2),be="M-"+de/4+","+he/4+"l"+de/2+",-"+he/2+"M0,"+he+"L"+de+",0M"+de/4*3+","+he/4*5+"l"+de/2+",-"+he/2+"M"+de/4*3+",-"+he/4+"l"+de/2+","+he/2+"M0,0L"+de+","+he+"M-"+de/4+","+he/4*3+"l"+de/2+","+he/2,ge=G-G*Math.sqrt(1-W),Ce="path",Pe={d:be,opacity:le,stroke:ne,"stroke-width":ge+"px"};break;case"|":Ce="path",Ce="path",Pe={d:be="M"+(de=G)/2+",0L"+de/2+","+(he=G),opacity:le,stroke:ne,"stroke-width":(ge=W*G)+"px"};break;case"-":Ce="path",Ce="path",Pe={d:be="M0,"+(he=G)/2+"L"+(de=G)+","+he/2,opacity:le,stroke:ne,"stroke-width":(ge=W*G)+"px"};break;case"+":Ce="path",be="M"+(de=G)/2+",0L"+de/2+","+(he=G)+"M0,"+he/2+"L"+de+","+he/2,ge=G-G*Math.sqrt(1-W),Ce="path",Pe={d:be,opacity:le,stroke:ne,"stroke-width":ge+"px"};break;case".":de=G,he=G,W<Math.PI/4?we=Math.sqrt(W*G*G/Math.PI):(De=W,Se=Math.PI/4,1,we=(ve=G/2)+(G/Math.sqrt(2)-ve)*(De-Se)/(1-Se)),Ce="circle",Pe={cx:de/2,cy:he/2,r:we,opacity:le,fill:ne}}var je=[j||"noSh",te||"noBg",ne||"noFg",G,W].join(";"),Ge=Le._defs.select(".patterns").selectAll("#"+Ee).data([je],x.identity);Ge.exit().remove(),Ge.enter().append("pattern").each(function(){var lt=m.select(this);if(lt.attr({id:Ee,width:de+"px",height:he+"px",patternUnits:"userSpaceOnUse",patternTransform:ue?"scale(0.8)":""}),te){var Ue=lt.selectAll("rect").data([0]);Ue.exit().remove(),Ue.enter().append("rect").attr({width:de+"px",height:he+"px",fill:te})}var $e=lt.selectAll(Ce).data([0]);$e.exit().remove(),$e.enter().append(Ce).attr(Pe)}),J.style("fill",Z(Ee,Q)).style("fill-opacity",null),J.classed("pattern_filled",!0);var Ke="."+m.select(J.node().parentNode).attr("class").replace(/\s/g,".")+">.pattern_filled";Le._patternUrlQueryParts[Ke]=1},g.initGradients=function(J){var $=J._fullLayout;x.ensureSingle($._defs,"g","gradients").selectAll("linearGradient,radialGradient").remove(),$._gradientUrlQueryParts={}},g.initPatterns=function(J){var $=J._fullLayout;x.ensureSingle($._defs,"g","patterns").selectAll("pattern").remove(),$._patternUrlQueryParts={}},g.getPatternAttr=function(J,$,Q){return J&&x.isArrayOrTypedArray(J)?$<J.length?J[$]:Q:J},g.pointStyle=function(J,$,Q){if(J.size()){var se=g.makePointStyleFns($);J.each(function(j){g.singlePointStyle(j,m.select(this),$,se,Q)})}},g.singlePointStyle=function(J,$,Q,se,j){var G=Q.marker,W=G.line;if($.style("opacity",se.selectedOpacityFn?se.selectedOpacityFn(J):void 0===J.mo?G.opacity:J.mo),se.ms2mrc){var ie;ie="various"===J.ms||"various"===G.size?3:se.ms2mrc(J.ms),J.mrc=ie,se.selectedSizeFn&&(ie=J.mrc=se.selectedSizeFn(J));var q=g.symbolNumber(J.mx||G.symbol)||0;J.om=q%200>=100,$.attr("d",y(q,ie))}var te,ne,le,ue=!1;if(J.so?(le=W.outlierwidth,ne=W.outliercolor,te=G.outliercolor):(le=(J.mlw+1||(W||{}).width+1||(J.trace?(J.trace.marker.line||{}).width:0)+1)-1||0,ne="mlc"in J?J.mlcc=se.lineScale(J.mlc):x.isArrayOrTypedArray(W.color)?a.defaultLine:W.color,x.isArrayOrTypedArray(G.color)&&(te=a.defaultLine,ue=!0),te="mc"in J?J.mcc=se.markerScale(J.mc):G.color||"rgba(0,0,0,0)",se.selectedColorFn&&(te=se.selectedColorFn(J))),J.om)$.call(a.stroke,te).style({"stroke-width":(le||1)+"px",fill:"none"});else{$.style("stroke-width",(J.isBlank?0:le)+"px");var he=G.gradient,be=J.mgt;be?ue=!0:be=he&&he.type,x.isArrayOrTypedArray(be)&&(C[be=be[0]]||(be=0));var ge=G.pattern,we=ge&&g.getPatternAttr(ge.shape,J.i,"");if(be&&"none"!==be){var Ce=J.mgc;Ce?ue=!0:Ce=he.color;var De=Q.uid;ue&&(De+="-"+J.i),g.gradient($,j,De,be,[[0,Ce],[1,te]],"fill")}else if(we){var Se=g.getPatternAttr(ge.bgcolor,J.i,null),Fe=g.getPatternAttr(ge.fgcolor,J.i,null),ve=ge.fgopacity,Te=g.getPatternAttr(ge.size,J.i,8),Le=g.getPatternAttr(ge.solidity,J.i,.3),Ee=J.mcc||x.isArrayOrTypedArray(ge.shape)||x.isArrayOrTypedArray(ge.bgcolor)||x.isArrayOrTypedArray(ge.size)||x.isArrayOrTypedArray(ge.solidity),Pe=Q.uid;Ee&&(Pe+="-"+J.i),g.pattern($,"point",j,Pe,we,Te,Le,J.mcc,ge.fillmode,Se,Fe,ve)}else a.fill($,te);le&&a.stroke($,ne)}},g.makePointStyleFns=function(J){var $={},Q=J.marker;return $.markerScale=g.tryColorscale(Q,""),$.lineScale=g.tryColorscale(Q,"line"),o.traceIs(J,"symbols")&&($.ms2mrc=h.isBubble(J)?p(J):function(){return(Q.size||6)/2}),J.selectedpoints&&x.extendFlat($,g.makeSelectedPointStyleFns(J)),$},g.makeSelectedPointStyleFns=function(J){var $={},j=J.marker||{},G=(J.selected||{}).marker||{},W=(J.unselected||{}).marker||{},q=G.opacity,te=W.opacity,ne=void 0!==q,le=void 0!==te;(x.isArrayOrTypedArray(j.opacity)||ne||le)&&($.selectedOpacityFn=function(Se){var Fe=void 0===Se.mo?j.opacity:Se.mo;return Se.selected?ne?q:Fe:le?te:c*Fe});var ue=j.color,de=G.color,he=W.color;(de||he)&&($.selectedColorFn=function(Se){var Fe=Se.mcc||ue;return Se.selected?de||Fe:he||Fe});var be=j.size,ge=G.size,we=W.size,Ce=void 0!==ge,De=void 0!==we;return o.traceIs(J,"symbols")&&(Ce||De)&&($.selectedSizeFn=function(Se){var Fe=Se.mrc||be/2;return Se.selected?Ce?ge/2:Fe:De?we/2:Fe}),$},g.makeSelectedTextStyleFns=function(J){var $={},ie=(J.textfont||{}).color,q=((J.selected||{}).textfont||{}).color,te=((J.unselected||{}).textfont||{}).color;return $.selectedTextColorFn=function(ne){var le=ne.tc||ie;return ne.selected?q||le:te||(q?le:a.addOpacity(le,c))},$},g.selectedPointStyle=function(J,$){if(J.size()&&$.selectedpoints){var Q=g.makeSelectedPointStyleFns($),se=$.marker||{},j=[];Q.selectedOpacityFn&&j.push(function(G,W){G.style("opacity",Q.selectedOpacityFn(W))}),Q.selectedColorFn&&j.push(function(G,W){a.fill(G,Q.selectedColorFn(W))}),Q.selectedSizeFn&&j.push(function(G,W){var ie=W.mx||se.symbol||0,q=Q.selectedSizeFn(W);G.attr("d",y(g.symbolNumber(ie),q)),W.mrc2=q}),j.length&&J.each(function(G){for(var W=m.select(this),ie=0;ie<j.length;ie++)j[ie](W,G)})}},g.tryColorscale=function(J,$){var Q=$?x.nestedProperty(J,$).get():J;return Q&&(Q.colorscale||Q._colorAx)&&x.isArrayOrTypedArray(Q.color)?l.makeColorScaleFuncFromTrace(Q):x.identity};var P={start:1,end:-1,middle:0,bottom:1,top:-1};function D(J,$,Q,se,j){var G=m.select(J.node().parentNode),W=-1!==$.indexOf("top")?"top":-1!==$.indexOf("bottom")?"bottom":"middle",ie=-1!==$.indexOf("left")?"end":-1!==$.indexOf("right")?"start":"middle",q=se?se/.8+1:0,te=(d.lineCount(J)-1)*s+1,ne=P[ie]*q,le=.75*Q+P[W]*q+(P[W]-1)*te*Q/2;J.attr("text-anchor",ie),j||G.attr("transform",i(ne,le))}function F(J,$){var Q=J.ts||$.textfont.size;return b(Q)&&Q>0?Q:0}function R(J,$,Q,se){var j=J[0]-$[0],G=J[1]-$[1],W=Q[0]-$[0],ie=Q[1]-$[1],q=Math.pow(j*j+G*G,.25),te=Math.pow(W*W+ie*ie,.25),ne=(te*te*j-q*q*W)*se,le=(te*te*G-q*q*ie)*se,ue=3*te*(q+te),de=3*q*(q+te);return[[m.round($[0]+(ue&&ne/ue),2),m.round($[1]+(ue&&le/ue),2)],[m.round($[0]-(de&&ne/de),2),m.round($[1]-(de&&le/de),2)]]}g.textPointStyle=function(J,$,Q){if(J.size()){var se;if($.selectedpoints){var j=g.makeSelectedTextStyleFns($);se=j.selectedTextColorFn}var G=$.texttemplate,W=Q._fullLayout;J.each(function(ie){var q=m.select(this),te=G?x.extractOption(ie,$,"txt","texttemplate"):x.extractOption(ie,$,"tx","text");if(te||0===te){if(G){var ne=$._module.formatLabels,le=ne?ne(ie,$,W):{},ue={};v(ue,$,ie.i),te=x.texttemplateString(te,le,W._d3locale,ue,ie,$._meta||{})}var he=ie.tp||$.textposition,be=F(ie,$),ge=se?se(ie):ie.tc||$.textfont.color;q.call(g.font,ie.tf||$.textfont.family,be,ge).text(te).call(d.convertToTspans,Q).call(D,he,be,ie.mrc)}else q.remove()})}},g.selectedTextStyle=function(J,$){if(J.size()&&$.selectedpoints){var Q=g.makeSelectedTextStyleFns($);J.each(function(se){var j=m.select(this),G=Q.selectedTextColorFn(se),W=se.tp||$.textposition,ie=F(se,$);a.fill(j,G);var q=o.traceIs($,"bar-like");D(j,W,ie,se.mrc2||se.mrc,q)})}},g.smoothopen=function(J,$){if(J.length<3)return"M"+J.join("L");var Q,se="M"+J[0],j=[];for(Q=1;Q<J.length-1;Q++)j.push(R(J[Q-1],J[Q],J[Q+1],$));for(se+="Q"+j[0][0]+" "+J[1],Q=2;Q<J.length-1;Q++)se+="C"+j[Q-2][1]+" "+j[Q-1][0]+" "+J[Q];return se+"Q"+j[J.length-3][1]+" "+J[J.length-1]},g.smoothclosed=function(J,$){if(J.length<3)return"M"+J.join("L")+"Z";var Q,se="M"+J[0],j=J.length-1,G=[R(J[j],J[0],J[1],$)];for(Q=1;Q<j;Q++)G.push(R(J[Q-1],J[Q],J[Q+1],$));for(G.push(R(J[j-1],J[j],J[0],$)),Q=1;Q<=j;Q++)se+="C"+G[Q-1][1]+" "+G[Q][0]+" "+J[Q];return se+"C"+G[j][1]+" "+G[0][0]+" "+J[0]+"Z"};var L={hv:function(J,$){return"H"+m.round($[0],2)+"V"+m.round($[1],2)},vh:function(J,$){return"V"+m.round($[1],2)+"H"+m.round($[0],2)},hvh:function(J,$){return"H"+m.round((J[0]+$[0])/2,2)+"V"+m.round($[1],2)+"H"+m.round($[0],2)},vhv:function(J,$){return"V"+m.round((J[1]+$[1])/2,2)+"H"+m.round($[0],2)+"V"+m.round($[1],2)}},I=function(J,$){return"L"+m.round($[0],2)+","+m.round($[1],2)};g.steps=function(J){var $=L[J]||I;return function(Q){for(var se="M"+m.round(Q[0][0],2)+","+m.round(Q[0][1],2),j=1;j<Q.length;j++)se+=$(Q[j-1],Q[j]);return se}},g.makeTester=function(){var J=x.ensureSingleById(m.select("body"),"svg","js-plotly-tester",function(Q){Q.attr(u.svgAttrs).style({position:"absolute",left:"-10000px",top:"-10000px",width:"9000px",height:"9000px","z-index":"1"})}),$=x.ensureSingle(J,"path","js-reference-point",function(Q){Q.attr("d","M0,0H1V1H0Z").style({"stroke-width":0,fill:"black"})});g.tester=J,g.testref=$},g.savedBBoxes={};var B=0;function V(J){var $=J.getAttribute("data-unformatted");if(null!==$)return $+J.getAttribute("data-math")+J.getAttribute("text-anchor")+J.getAttribute("style")}function Z(J,$){if(!J)return null;var Q=$._context,se=Q._exportedPlot?"":Q._baseUrl||"";return se?"url('"+se+"#"+J+"')":"url(#"+J+")"}g.bBox=function(J,$,Q){var se,j,G;if(Q||(Q=V(J)),Q){if(se=g.savedBBoxes[Q])return x.extendFlat({},se)}else if(1===J.childNodes.length){var W=J.childNodes[0];if(Q=V(W)){var ie=+W.getAttribute("x")||0,q=+W.getAttribute("y")||0,te=W.getAttribute("transform");if(!te){var ne=g.bBox(W,!1,Q);return ie&&(ne.left+=ie,ne.right+=ie),q&&(ne.top+=q,ne.bottom+=q),ne}if(se=g.savedBBoxes[Q+="~"+ie+"~"+q+"~"+te])return x.extendFlat({},se)}}$?j=J:(G=g.tester.node(),j=J.cloneNode(!0),G.appendChild(j)),m.select(j).attr("transform",null).call(d.positionText,0,0);var le=j.getBoundingClientRect(),ue=g.testref.node().getBoundingClientRect();$||G.removeChild(j);var de={height:le.height,width:le.width,left:le.left-ue.left,top:le.top-ue.top,right:le.right-ue.left,bottom:le.bottom-ue.top};return B>=1e4&&(g.savedBBoxes={},B=0),Q&&(g.savedBBoxes[Q]=de),B++,x.extendFlat({},de)},g.setClipUrl=function(J,$,Q){J.attr("clip-path",Z($,Q))},g.getTranslate=function(J){var $=(J[J.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\btranslate\((-?\d*\.?\d*)[^-\d]*(-?\d*\.?\d*)[^\d].*/,function(Q,se,j){return[se,j].join(" ")}).split(" ");return{x:+$[0]||0,y:+$[1]||0}},g.setTranslate=function(J,$,Q){var j=J.attr?"attr":"setAttribute",G=J[J.attr?"attr":"getAttribute"]("transform")||"";return $=$||0,Q=Q||0,G=G.replace(/(\btranslate\(.*?\);?)/,"").trim(),G=(G+=i($,Q)).trim(),J[j]("transform",G),G},g.getScale=function(J){var $=(J[J.attr?"attr":"getAttribute"]("transform")||"").replace(/.*\bscale\((\d*\.?\d*)[^\d]*(\d*\.?\d*)[^\d].*/,function(Q,se,j){return[se,j].join(" ")}).split(" ");return{x:+$[0]||1,y:+$[1]||1}},g.setScale=function(J,$,Q){var j=J.attr?"attr":"setAttribute",G=J[J.attr?"attr":"getAttribute"]("transform")||"";return $=$||1,Q=Q||1,G=G.replace(/(\bscale\(.*?\);?)/,"").trim(),G=(G+="scale("+$+","+Q+")").trim(),J[j]("transform",G),G};var Y=/\s*sc.*/;g.setPointGroupScale=function(J,$,Q){if($=$||1,Q=Q||1,J){var se=1===$&&1===Q?"":"scale("+$+","+Q+")";J.each(function(){var j=(this.getAttribute("transform")||"").replace(Y,"");j=(j+=se).trim(),this.setAttribute("transform",j)})}};var ee=/translate\([^)]*\)\s*$/;g.setTextPointsScale=function(J,$,Q){J&&J.each(function(){var se,j=m.select(this),G=j.select("text");if(G.node()){var W=parseFloat(G.attr("x")||0),ie=parseFloat(G.attr("y")||0),q=(j.attr("transform")||"").match(ee);se=1===$&&1===Q?[]:[i(W,ie),"scale("+$+","+Q+")",i(-W,-ie)],q&&se.push(q),j.attr("transform",se.join(""))}})}},{"../../components/fx/helpers":402,"../../constants/alignment":471,"../../constants/interactions":478,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../registry":638,"../../traces/scatter/make_bubble_size_func":943,"../../traces/scatter/subtypes":951,"../color":366,"../colorscale":378,"./symbol_defs":389,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],389:[function(_,oe,ae){"use strict";var m=_("@plotly/d3");oe.exports={circle:{n:0,f:function(x){var T=m.round(x,2);return"M"+T+",0A"+T+","+T+" 0 1,1 0,-"+T+"A"+T+","+T+" 0 0,1 "+T+",0Z"}},square:{n:1,f:function(x){var T=m.round(x,2);return"M"+T+","+T+"H-"+T+"V-"+T+"H"+T+"Z"}},diamond:{n:2,f:function(x){var T=m.round(1.3*x,2);return"M"+T+",0L0,"+T+"L-"+T+",0L0,-"+T+"Z"}},cross:{n:3,f:function(x){var T=m.round(.4*x,2),b=m.round(1.2*x,2);return"M"+b+","+T+"H"+T+"V"+b+"H-"+T+"V"+T+"H-"+b+"V-"+T+"H-"+T+"V-"+b+"H"+T+"V-"+T+"H"+b+"Z"}},x:{n:4,f:function(x){var T=m.round(.8*x/Math.sqrt(2),2),b="l"+T+","+T,e="l"+T+",-"+T,o="l-"+T+",-"+T,a="l-"+T+","+T;return"M0,"+T+b+e+o+e+o+a+o+a+b+a+b+"Z"}},"triangle-up":{n:5,f:function(x){var T=m.round(2*x/Math.sqrt(3),2);return"M-"+T+","+m.round(x/2,2)+"H"+T+"L0,-"+m.round(x,2)+"Z"}},"triangle-down":{n:6,f:function(x){var T=m.round(2*x/Math.sqrt(3),2);return"M-"+T+",-"+m.round(x/2,2)+"H"+T+"L0,"+m.round(x,2)+"Z"}},"triangle-left":{n:7,f:function(x){var T=m.round(2*x/Math.sqrt(3),2);return"M"+m.round(x/2,2)+",-"+T+"V"+T+"L-"+m.round(x,2)+",0Z"}},"triangle-right":{n:8,f:function(x){var T=m.round(2*x/Math.sqrt(3),2);return"M-"+m.round(x/2,2)+",-"+T+"V"+T+"L"+m.round(x,2)+",0Z"}},"triangle-ne":{n:9,f:function(x){var T=m.round(.6*x,2),b=m.round(1.2*x,2);return"M-"+b+",-"+T+"H"+T+"V"+b+"Z"}},"triangle-se":{n:10,f:function(x){var T=m.round(.6*x,2),b=m.round(1.2*x,2);return"M"+T+",-"+b+"V"+T+"H-"+b+"Z"}},"triangle-sw":{n:11,f:function(x){var T=m.round(.6*x,2),b=m.round(1.2*x,2);return"M"+b+","+T+"H-"+T+"V-"+b+"Z"}},"triangle-nw":{n:12,f:function(x){var T=m.round(.6*x,2),b=m.round(1.2*x,2);return"M-"+T+","+b+"V-"+T+"H"+b+"Z"}},pentagon:{n:13,f:function(x){var T=m.round(.951*x,2),b=m.round(.588*x,2),e=m.round(-x,2),o=m.round(-.309*x,2);return"M"+T+","+o+"L"+b+","+m.round(.809*x,2)+"H-"+b+"L-"+T+","+o+"L0,"+e+"Z"}},hexagon:{n:14,f:function(x){var T=m.round(x,2),b=m.round(x/2,2),e=m.round(x*Math.sqrt(3)/2,2);return"M"+e+",-"+b+"V"+b+"L0,"+T+"L-"+e+","+b+"V-"+b+"L0,-"+T+"Z"}},hexagon2:{n:15,f:function(x){var T=m.round(x,2),b=m.round(x/2,2),e=m.round(x*Math.sqrt(3)/2,2);return"M-"+b+","+e+"H"+b+"L"+T+",0L"+b+",-"+e+"H-"+b+"L-"+T+",0Z"}},octagon:{n:16,f:function(x){var T=m.round(.924*x,2),b=m.round(.383*x,2);return"M-"+b+",-"+T+"H"+b+"L"+T+",-"+b+"V"+b+"L"+b+","+T+"H-"+b+"L-"+T+","+b+"V-"+b+"Z"}},star:{n:17,f:function(x){var T=1.4*x,b=m.round(.225*T,2),e=m.round(.951*T,2),o=m.round(.363*T,2),a=m.round(.588*T,2),l=m.round(-T,2),i=m.round(-.309*T,2),d=m.round(.118*T,2),u=m.round(.809*T,2);return"M"+b+","+i+"H"+e+"L"+o+","+d+"L"+a+","+u+"L0,"+m.round(.382*T,2)+"L-"+a+","+u+"L-"+o+","+d+"L-"+e+","+i+"H-"+b+"L0,"+l+"Z"}},hexagram:{n:18,f:function(x){var T=m.round(.66*x,2),b=m.round(.38*x,2),e=m.round(.76*x,2);return"M-"+e+",0l-"+b+",-"+T+"h"+e+"l"+b+",-"+T+"l"+b+","+T+"h"+e+"l-"+b+","+T+"l"+b+","+T+"h-"+e+"l-"+b+","+T+"l-"+b+",-"+T+"h-"+e+"Z"}},"star-triangle-up":{n:19,f:function(x){var T=m.round(x*Math.sqrt(3)*.8,2),b=m.round(.8*x,2),e=m.round(1.6*x,2),o=m.round(4*x,2),a="A "+o+","+o+" 0 0 1 ";return"M-"+T+","+b+a+T+","+b+a+"0,-"+e+a+"-"+T+","+b+"Z"}},"star-triangle-down":{n:20,f:function(x){var T=m.round(x*Math.sqrt(3)*.8,2),b=m.round(.8*x,2),e=m.round(1.6*x,2),o=m.round(4*x,2),a="A "+o+","+o+" 0 0 1 ";return"M"+T+",-"+b+a+"-"+T+",-"+b+a+"0,"+e+a+T+",-"+b+"Z"}},"star-square":{n:21,f:function(x){var T=m.round(1.1*x,2),b=m.round(2*x,2),e="A "+b+","+b+" 0 0 1 ";return"M-"+T+",-"+T+e+"-"+T+","+T+e+T+","+T+e+T+",-"+T+e+"-"+T+",-"+T+"Z"}},"star-diamond":{n:22,f:function(x){var T=m.round(1.4*x,2),b=m.round(1.9*x,2),e="A "+b+","+b+" 0 0 1 ";return"M-"+T+",0"+e+"0,"+T+e+T+",0"+e+"0,-"+T+e+"-"+T+",0Z"}},"diamond-tall":{n:23,f:function(x){var T=m.round(.7*x,2),b=m.round(1.4*x,2);return"M0,"+b+"L"+T+",0L0,-"+b+"L-"+T+",0Z"}},"diamond-wide":{n:24,f:function(x){var T=m.round(1.4*x,2),b=m.round(.7*x,2);return"M0,"+b+"L"+T+",0L0,-"+b+"L-"+T+",0Z"}},hourglass:{n:25,f:function(x){var T=m.round(x,2);return"M"+T+","+T+"H-"+T+"L"+T+",-"+T+"H-"+T+"Z"},noDot:!0},bowtie:{n:26,f:function(x){var T=m.round(x,2);return"M"+T+","+T+"V-"+T+"L-"+T+","+T+"V-"+T+"Z"},noDot:!0},"circle-cross":{n:27,f:function(x){var T=m.round(x,2);return"M0,"+T+"V-"+T+"M"+T+",0H-"+T+"M"+T+",0A"+T+","+T+" 0 1,1 0,-"+T+"A"+T+","+T+" 0 0,1 "+T+",0Z"},needLine:!0,noDot:!0},"circle-x":{n:28,f:function(x){var T=m.round(x,2),b=m.round(x/Math.sqrt(2),2);return"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b+"M"+T+",0A"+T+","+T+" 0 1,1 0,-"+T+"A"+T+","+T+" 0 0,1 "+T+",0Z"},needLine:!0,noDot:!0},"square-cross":{n:29,f:function(x){var T=m.round(x,2);return"M0,"+T+"V-"+T+"M"+T+",0H-"+T+"M"+T+","+T+"H-"+T+"V-"+T+"H"+T+"Z"},needLine:!0,noDot:!0},"square-x":{n:30,f:function(x){var T=m.round(x,2);return"M"+T+","+T+"L-"+T+",-"+T+"M"+T+",-"+T+"L-"+T+","+T+"M"+T+","+T+"H-"+T+"V-"+T+"H"+T+"Z"},needLine:!0,noDot:!0},"diamond-cross":{n:31,f:function(x){var T=m.round(1.3*x,2);return"M"+T+",0L0,"+T+"L-"+T+",0L0,-"+T+"ZM0,-"+T+"V"+T+"M-"+T+",0H"+T},needLine:!0,noDot:!0},"diamond-x":{n:32,f:function(x){var T=m.round(1.3*x,2),b=m.round(.65*x,2);return"M"+T+",0L0,"+T+"L-"+T+",0L0,-"+T+"ZM-"+b+",-"+b+"L"+b+","+b+"M-"+b+","+b+"L"+b+",-"+b},needLine:!0,noDot:!0},"cross-thin":{n:33,f:function(x){var T=m.round(1.4*x,2);return"M0,"+T+"V-"+T+"M"+T+",0H-"+T},needLine:!0,noDot:!0,noFill:!0},"x-thin":{n:34,f:function(x){var T=m.round(x,2);return"M"+T+","+T+"L-"+T+",-"+T+"M"+T+",-"+T+"L-"+T+","+T},needLine:!0,noDot:!0,noFill:!0},asterisk:{n:35,f:function(x){var T=m.round(1.2*x,2),b=m.round(.85*x,2);return"M0,"+T+"V-"+T+"M"+T+",0H-"+T+"M"+b+","+b+"L-"+b+",-"+b+"M"+b+",-"+b+"L-"+b+","+b},needLine:!0,noDot:!0,noFill:!0},hash:{n:36,f:function(x){var T=m.round(x/2,2),b=m.round(x,2);return"M"+T+","+b+"V-"+b+"m-"+b+",0V"+b+"M"+b+","+T+"H-"+b+"m0,-"+b+"H"+b},needLine:!0,noFill:!0},"y-up":{n:37,f:function(x){var T=m.round(1.2*x,2),b=m.round(1.6*x,2),e=m.round(.8*x,2);return"M-"+T+","+e+"L0,0M"+T+","+e+"L0,0M0,-"+b+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-down":{n:38,f:function(x){var T=m.round(1.2*x,2),b=m.round(1.6*x,2),e=m.round(.8*x,2);return"M-"+T+",-"+e+"L0,0M"+T+",-"+e+"L0,0M0,"+b+"L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-left":{n:39,f:function(x){var T=m.round(1.2*x,2),b=m.round(1.6*x,2),e=m.round(.8*x,2);return"M"+e+","+T+"L0,0M"+e+",-"+T+"L0,0M-"+b+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"y-right":{n:40,f:function(x){var T=m.round(1.2*x,2),b=m.round(1.6*x,2),e=m.round(.8*x,2);return"M-"+e+","+T+"L0,0M-"+e+",-"+T+"L0,0M"+b+",0L0,0"},needLine:!0,noDot:!0,noFill:!0},"line-ew":{n:41,f:function(x){var T=m.round(1.4*x,2);return"M"+T+",0H-"+T},needLine:!0,noDot:!0,noFill:!0},"line-ns":{n:42,f:function(x){var T=m.round(1.4*x,2);return"M0,"+T+"V-"+T},needLine:!0,noDot:!0,noFill:!0},"line-ne":{n:43,f:function(x){var T=m.round(x,2);return"M"+T+",-"+T+"L-"+T+","+T},needLine:!0,noDot:!0,noFill:!0},"line-nw":{n:44,f:function(x){var T=m.round(x,2);return"M"+T+","+T+"L-"+T+",-"+T},needLine:!0,noDot:!0,noFill:!0},"arrow-up":{n:45,f:function(x){var T=m.round(x,2);return"M0,0L-"+T+","+m.round(2*x,2)+"H"+T+"Z"},noDot:!0},"arrow-down":{n:46,f:function(x){var T=m.round(x,2);return"M0,0L-"+T+",-"+m.round(2*x,2)+"H"+T+"Z"},noDot:!0},"arrow-left":{n:47,f:function(x){var T=m.round(2*x,2),b=m.round(x,2);return"M0,0L"+T+",-"+b+"V"+b+"Z"},noDot:!0},"arrow-right":{n:48,f:function(x){var T=m.round(2*x,2),b=m.round(x,2);return"M0,0L-"+T+",-"+b+"V"+b+"Z"},noDot:!0},"arrow-bar-up":{n:49,f:function(x){var T=m.round(x,2);return"M-"+T+",0H"+T+"M0,0L-"+T+","+m.round(2*x,2)+"H"+T+"Z"},needLine:!0,noDot:!0},"arrow-bar-down":{n:50,f:function(x){var T=m.round(x,2);return"M-"+T+",0H"+T+"M0,0L-"+T+",-"+m.round(2*x,2)+"H"+T+"Z"},needLine:!0,noDot:!0},"arrow-bar-left":{n:51,f:function(x){var T=m.round(2*x,2),b=m.round(x,2);return"M0,-"+b+"V"+b+"M0,0L"+T+",-"+b+"V"+b+"Z"},needLine:!0,noDot:!0},"arrow-bar-right":{n:52,f:function(x){var T=m.round(2*x,2),b=m.round(x,2);return"M0,-"+b+"V"+b+"M0,0L-"+T+",-"+b+"V"+b+"Z"},needLine:!0,noDot:!0}}},{"@plotly/d3":58}],390:[function(_,oe,ae){"use strict";oe.exports={visible:{valType:"boolean",editType:"calc"},type:{valType:"enumerated",values:["percent","constant","sqrt","data"],editType:"calc"},symmetric:{valType:"boolean",editType:"calc"},array:{valType:"data_array",editType:"calc"},arrayminus:{valType:"data_array",editType:"calc"},value:{valType:"number",min:0,dflt:10,editType:"calc"},valueminus:{valType:"number",min:0,dflt:10,editType:"calc"},traceref:{valType:"integer",min:0,dflt:0,editType:"style"},tracerefminus:{valType:"integer",min:0,dflt:0,editType:"style"},copy_ystyle:{valType:"boolean",editType:"plot"},copy_zstyle:{valType:"boolean",editType:"style"},color:{valType:"color",editType:"style"},thickness:{valType:"number",min:0,dflt:2,editType:"style"},width:{valType:"number",min:0,editType:"plot"},editType:"calc",_deprecated:{opacity:{valType:"number",editType:"style"}}}},{}],391:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../registry"),T=_("../../plots/cartesian/axes"),b=_("../../lib"),e=_("./compute_error");function o(a,l,i,d){var u=l["error_"+d]||{},s=[];if(u.visible&&-1!==["linear","log"].indexOf(i.type)){for(var c=e(u),h=0;h<a.length;h++){var p=a[h],v=p.i;if(void 0===v)v=h;else if(null===v)continue;var g=p[d];if(m(i.c2l(g))){var f=c(g,v);if(m(f[0])&&m(f[1])){var w=p[d+"s"]=g-f[0],y=p[d+"h"]=g+f[1];s.push(w,y)}}}var A=l._extremes[i._id],k=T.findExtremes(i,s,b.extendFlat({tozero:A.opts.tozero},{padded:!0}));A.min=A.min.concat(k.min),A.max=A.max.concat(k.max)}}oe.exports=function(a){for(var l=a.calcdata,i=0;i<l.length;i++){var d=l[i],u=d[0].trace;if(!0===u.visible&&x.traceIs(u,"errorBarsOK")){var s=T.getFromId(a,u.xaxis),c=T.getFromId(a,u.yaxis);o(d,u,s,"x"),o(d,u,c,"y")}}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./compute_error":392,"fast-isnumeric":190}],392:[function(_,oe,ae){"use strict";function m(x,T){return"percent"===x?function(b){return Math.abs(b*T/100)}:"constant"===x?function(){return Math.abs(T)}:"sqrt"===x?function(b){return Math.sqrt(Math.abs(b))}:void 0}oe.exports=function(x){var T=x.type,b=x.symmetric;if("data"===T){var e=x.array||[];if(b)return function(i,d){var u=+e[d];return[u,u]};var o=x.arrayminus||[];return function(i,d){var u=+e[d],s=+o[d];return isNaN(u)&&isNaN(s)?[NaN,NaN]:[s||0,u||0]}}var a=m(T,x.value),l=m(T,x.valueminus);return b||void 0===x.valueminus?function(i){var d=a(i);return[d,d]}:function(i){return[l(i),a(i)]}}},{}],393:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../registry"),T=_("../../lib"),b=_("../../plot_api/plot_template"),e=_("./attributes");oe.exports=function(o,a,l,i){var d="error_"+i.axis,u=b.newContainer(a,d),s=o[d]||{};function c(g,f){return T.coerce(s,u,e,g,f)}if(!1!==c("visible",void 0!==s.array||void 0!==s.value||"sqrt"===s.type)){var h=c("type","array"in s?"data":"percent"),p=!0;"sqrt"!==h&&(p=c("symmetric",!(("data"===h?"arrayminus":"valueminus")in s))),"data"===h?(c("array"),c("traceref"),p||(c("arrayminus"),c("tracerefminus"))):"percent"!==h&&"constant"!==h||(c("value"),p||c("valueminus"));var v="copy_"+i.inherit+"style";i.inherit&&(a["error_"+i.inherit]||{}).visible&&c(v,!(s.color||m(s.thickness)||m(s.width))),i.inherit&&u[v]||(c("color",l),c("thickness"),c("width",x.traceIs(a,"gl3d")?0:4))}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"./attributes":390,"fast-isnumeric":190}],394:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../plot_api/edit_types").overrideAll,T=_("./attributes"),b={error_x:m.extendFlat({},T),error_y:m.extendFlat({},T)};delete b.error_x.copy_zstyle,delete b.error_y.copy_zstyle,delete b.error_y.copy_ystyle;var e={error_x:m.extendFlat({},T),error_y:m.extendFlat({},T),error_z:m.extendFlat({},T)};delete e.error_x.copy_ystyle,delete e.error_y.copy_ystyle,delete e.error_z.copy_ystyle,delete e.error_z.copy_zstyle,oe.exports={moduleType:"component",name:"errorbars",schema:{traces:{scatter:b,bar:b,histogram:b,scatter3d:x(e,"calc","nested"),scattergl:x(b,"calc","nested")}},supplyDefaults:_("./defaults"),calc:_("./calc"),makeComputeError:_("./compute_error"),plot:_("./plot"),style:_("./style"),hoverInfo:function(o,a,l){(a.error_y||{}).visible&&(l.yerr=o.yh-o.y,a.error_y.symmetric||(l.yerrneg=o.y-o.ys)),(a.error_x||{}).visible&&(l.xerr=o.xh-o.x,a.error_x.symmetric||(l.xerrneg=o.x-o.xs))}}},{"../../lib":503,"../../plot_api/edit_types":536,"./attributes":390,"./calc":391,"./compute_error":392,"./defaults":393,"./plot":395,"./style":396}],395:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("../drawing"),b=_("../../traces/scatter/subtypes");oe.exports=function(e,o,a,l){var i=a.xaxis,d=a.yaxis,u=l&&l.duration>0;o.each(function(s){var c,h=s[0].trace,p=h.error_x||{},v=h.error_y||{};h.ids&&(c=function(y){return y.id});var g=b.hasMarkers(h)&&h.marker.maxdisplayed>0;v.visible||p.visible||(s=[]);var f=m.select(this).selectAll("g.errorbar").data(s,c);if(f.exit().remove(),s.length){p.visible||f.selectAll("path.xerror").remove(),v.visible||f.selectAll("path.yerror").remove(),f.style("opacity",1);var w=f.enter().append("g").classed("errorbar",!0);u&&w.style("opacity",0).transition().duration(l.duration).style("opacity",1),T.setClipUrl(f,a.layerClipId,e),f.each(function(y){var R,L,I,B,M=m.select(this),A=(I=d,B={x:(L=i).c2p((R=y).x),y:I.c2p(R.y)},void 0!==R.yh&&(B.yh=I.c2p(R.yh),B.ys=I.c2p(R.ys),x(B.ys)||(B.noYS=!0,B.ys=I.c2p(R.ys,!0))),void 0!==R.xh&&(B.xh=L.c2p(R.xh),B.xs=L.c2p(R.xs),x(B.xs)||(B.noXS=!0,B.xs=L.c2p(R.xs,!0))),B);if(!g||y.vis){var k,C=M.select("path.yerror");if(v.visible&&x(A.x)&&x(A.yh)&&x(A.ys)){var P=v.width;k="M"+(A.x-P)+","+A.yh+"h"+2*P+"m-"+P+",0V"+A.ys,A.noYS||(k+="m-"+P+",0h"+2*P),C.size()?u&&(C=C.transition().duration(l.duration).ease(l.easing)):C=M.append("path").style("vector-effect","non-scaling-stroke").classed("yerror",!0),C.attr("d",k)}else C.remove();var D=M.select("path.xerror");if(p.visible&&x(A.y)&&x(A.xh)&&x(A.xs)){var F=(p.copy_ystyle?v:p).width;k="M"+A.xh+","+(A.y-F)+"v"+2*F+"m0,-"+F+"H"+A.xs,A.noXS||(k+="m0,-"+F+"v"+2*F),D.size()?u&&(D=D.transition().duration(l.duration).ease(l.easing)):D=M.append("path").style("vector-effect","non-scaling-stroke").classed("xerror",!0),D.attr("d",k)}else D.remove()}})}})}},{"../../traces/scatter/subtypes":951,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],396:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../color");oe.exports=function(T){T.each(function(b){var e=b[0].trace,o=e.error_y||{},a=e.error_x||{},l=m.select(this);l.selectAll("path.yerror").style("stroke-width",o.thickness+"px").call(x.stroke,o.color),a.copy_ystyle&&(a=o),l.selectAll("path.xerror").style("stroke-width",a.thickness+"px").call(x.stroke,a.color)})}},{"../color":366,"@plotly/d3":58}],397:[function(_,oe,ae){"use strict";var m=_("../../plots/font_attributes"),x=_("./layout_attributes").hoverlabel,T=_("../../lib/extend").extendFlat;oe.exports={hoverlabel:{bgcolor:T({},x.bgcolor,{arrayOk:!0}),bordercolor:T({},x.bordercolor,{arrayOk:!0}),font:m({arrayOk:!0,editType:"none"}),align:T({},x.align,{arrayOk:!0}),namelength:T({},x.namelength,{arrayOk:!0}),editType:"none"}}},{"../../lib/extend":493,"../../plots/font_attributes":585,"./layout_attributes":407}],398:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../registry");function T(b,e,o,a){a=a||m.identity,Array.isArray(b)&&(e[0][o]=a(b))}oe.exports=function(b){var e=b.calcdata,o=b._fullLayout;function a(s){return function(c){return m.coerceHoverinfo({hoverinfo:c},{_module:s._module},o)}}for(var l=0;l<e.length;l++){var i=e[l],d=i[0].trace;if(!x.traceIs(d,"pie-like")){var u=x.traceIs(d,"2dMap")?T:m.fillArray;u(d.hoverinfo,i,"hi",a(d)),d.hovertemplate&&u(d.hovertemplate,i,"ht"),d.hoverlabel&&(u(d.hoverlabel.bgcolor,i,"hbg"),u(d.hoverlabel.bordercolor,i,"hbc"),u(d.hoverlabel.font.size,i,"hts"),u(d.hoverlabel.font.color,i,"htc"),u(d.hoverlabel.font.family,i,"htf"),u(d.hoverlabel.namelength,i,"hnl"),u(d.hoverlabel.align,i,"hta"))}}}},{"../../lib":503,"../../registry":638}],399:[function(_,oe,ae){"use strict";var m=_("../../registry"),x=_("./hover").hover;oe.exports=function(T,b,e){var o=m.getComponentMethod("annotations","onClick")(T,T._hoverdata);function a(){T.emit("plotly_click",{points:T._hoverdata,event:b})}void 0!==e&&x(T,b,e,!0),T._hoverdata&&b&&b.target&&(o&&o.then?o.then(a):a(),b.stopImmediatePropagation&&b.stopImmediatePropagation())}},{"../../registry":638,"./hover":403}],400:[function(_,oe,ae){"use strict";oe.exports={YANGLE:60,HOVERARROWSIZE:6,HOVERTEXTPAD:3,HOVERFONTSIZE:13,HOVERFONT:"Arial, sans-serif",HOVERMINTIME:50,HOVERID:"-hover"}},{}],401:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./attributes"),T=_("./hoverlabel_defaults");oe.exports=function(b,e,o,a){var l=m.extendFlat({},a.hoverlabel);e.hovertemplate&&(l.namelength=-1),T(b,e,function(i,d){return m.coerce(b,e,x,i,d)},l)}},{"../../lib":503,"./attributes":397,"./hoverlabel_defaults":404}],402:[function(_,oe,ae){"use strict";var m=_("../../lib");ae.getSubplot=function(a){return a.subplot||a.xaxis+a.yaxis||a.geo},ae.isTraceInSubplots=function(a,l){if("splom"===a.type){for(var i=a.xaxes||[],d=a.yaxes||[],u=0;u<i.length;u++)for(var s=0;s<d.length;s++)if(-1!==l.indexOf(i[u]+d[s]))return!0;return!1}return-1!==l.indexOf(ae.getSubplot(a))},ae.flat=function(a,l){for(var i=new Array(a.length),d=0;d<a.length;d++)i[d]=l;return i},ae.p2c=function(a,l){for(var i=new Array(a.length),d=0;d<a.length;d++)i[d]=a[d].p2c(l);return i},ae.getDistanceFunction=function(a,l,i,d){return"closest"===a?d||ae.quadrature(l,i):"x"===a.charAt(0)?l:i},ae.getClosest=function(a,l,i){if(!1!==i.index)i.index>=0&&i.index<a.length?i.distance=0:i.index=!1;else for(var d=0;d<a.length;d++){var u=l(a[d]);u<=i.distance&&(i.index=d,i.distance=u)}return i},ae.inbox=function(a,l,i){return a*l<0||0===a?i:1/0},ae.quadrature=function(a,l){return function(i){var d=a(i),u=l(i);return Math.sqrt(d*d+u*u)}},ae.makeEventData=function(a,l,i){var d="index"in a?a.index:a.pointNumber,u={data:l._input,fullData:l,curveNumber:l.index,pointNumber:d};if(l._indexToPoints){var s=l._indexToPoints[d];1===s.length?u.pointIndex=s[0]:u.pointIndices=s}else u.pointIndex=d;return l._module.eventData?u=l._module.eventData(u,a,l,i,d):("xVal"in a?u.x=a.xVal:"x"in a&&(u.x=a.x),"yVal"in a?u.y=a.yVal:"y"in a&&(u.y=a.y),a.xa&&(u.xaxis=a.xa),a.ya&&(u.yaxis=a.ya),void 0!==a.zLabelVal&&(u.z=a.zLabelVal)),ae.appendArrayPointValue(u,l,d),u},ae.appendArrayPointValue=function(a,l,i){var d=l._arrayAttrs;if(d)for(var u=0;u<d.length;u++){var s=d[u],c=T(s);if(void 0===a[c]){var h=b(m.nestedProperty(l,s).get(),i);void 0!==h&&(a[c]=h)}}},ae.appendArrayMultiPointValues=function(a,l,i){var d=l._arrayAttrs;if(d)for(var u=0;u<d.length;u++){var s=d[u],c=T(s);if(void 0===a[c]){for(var h=m.nestedProperty(l,s).get(),p=new Array(i.length),v=0;v<i.length;v++)p[v]=b(h,i[v]);a[c]=p}}};var x={ids:"id",locations:"location",labels:"label",values:"value","marker.colors":"color",parents:"parent"};function T(a){return x[a]||a}function b(a,l){return Array.isArray(l)?Array.isArray(a)&&Array.isArray(a[l[0]])?a[l[0]][l[1]]:void 0:a[l]}var e={x:!0,y:!0},o={"x unified":!0,"y unified":!0};ae.isUnifiedHover=function(a){return"string"==typeof a&&!!o[a]},ae.isXYhover=function(a){return"string"==typeof a&&!!e[a]}},{"../../lib":503}],403:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("tinycolor2"),b=_("../../lib"),e=b.strTranslate,o=b.strRotate,a=_("../../lib/events"),l=_("../../lib/svg_text_utils"),i=_("../../lib/override_cursor"),d=_("../drawing"),u=_("../color"),s=_("../dragelement"),c=_("../../plots/cartesian/axes"),h=_("../../registry"),p=_("./helpers"),v=_("./constants"),g=_("../legend/defaults"),f=_("../legend/draw"),w=v.YANGLE,y=Math.PI*w/180,M=1/Math.sin(y),A=Math.cos(y),k=Math.sin(y),C=v.HOVERARROWSIZE,P=v.HOVERTEXTPAD,D={box:!0,ohlc:!0,violin:!0,candlestick:!0},F={scatter:!0,scattergl:!0,splom:!0};function R(G){return[G.trace.index,G.index,G.x0,G.y0,G.name,G.attr,G.xa?G.xa._id:"",G.ya?G.ya._id:""].join(",")}ae.hover=function(G,W,ie,q){G=b.getGraphDiv(G);var te=W.target;b.throttle(G._fullLayout._uid+v.HOVERID,v.HOVERMINTIME,function(){!function(ne,le,ue,de,he){ue||(ue="xy");var be=Array.isArray(ue)?ue:[ue],ge=ne._fullLayout,we=ge._plots||[],Ce=we[ue],De=ge._has("cartesian");if(Ce){var Se=Ce.overlays.map(function(ir){return ir.id});be=be.concat(Se)}for(var Fe=be.length,ve=new Array(Fe),Te=new Array(Fe),Le=!1,Ee=0;Ee<Fe;Ee++){var Pe=be[Ee];if(we[Pe])Le=!0,ve[Ee]=we[Pe].xaxis,Te[Ee]=we[Pe].yaxis;else{if(!ge[Pe]||!ge[Pe]._subplot)return void b.warn("Unrecognized subplot: "+Pe);var je=ge[Pe]._subplot;ve[Ee]=je.xaxis,Te[Ee]=je.yaxis}}var Ge=le.hovermode||ge.hovermode;if(Ge&&!Le&&(Ge="closest"),-1===["x","y","closest","x unified","y unified"].indexOf(Ge)||!ne.calcdata||ne.querySelector(".zoombox")||ne._dragging)return s.unhoverRaw(ne,le);var Ke=ge.hoverdistance;-1===Ke&&(Ke=1/0);var lt=ge.spikedistance;-1===lt&&(lt=1/0);var Ue,$e,et,tt,ct,xt,Ct,Ht,zt,ht,ut,Ot,tn,un=[],Ze=[],Qe={hLinePoint:null,vLinePoint:null},qe=!1;if(Array.isArray(le))for(Ge="array",et=0;et<le.length;et++)(ct=ne.calcdata[le[et].curveNumber||0])&&(xt=ct[0].trace,"skip"!==ct[0].trace.hoverinfo&&(Ze.push(ct),"h"===xt.orientation&&(qe=!0)));else{for(tt=0;tt<ne.calcdata.length;tt++)"skip"!==(xt=(ct=ne.calcdata[tt])[0].trace).hoverinfo&&p.isTraceInSubplots(xt,be)&&(Ze.push(ct),"h"===xt.orientation&&(qe=!0));var it,Ie;if(he){if(!1===a.triggerHandler(ne,"plotly_beforehover",le))return;var ze=he.getBoundingClientRect();it=le.clientX-ze.left,Ie=le.clientY-ze.top,ge._calcInverseTransform(ne);var Ve=b.apply3DTransform(ge._invTransform)(it,Ie);if(Ie=Ve[1],(it=Ve[0])<0||it>ve[0]._length||Ie<0||Ie>Te[0]._length)return s.unhoverRaw(ne,le)}else it="xpx"in le?le.xpx:ve[0]._length/2,Ie="ypx"in le?le.ypx:Te[0]._length/2;if(le.pointerX=it+ve[0]._offset,le.pointerY=Ie+Te[0]._offset,Ue="xval"in le?p.flat(be,le.xval):p.p2c(ve,it),$e="yval"in le?p.flat(be,le.yval):p.p2c(Te,Ie),!x(Ue[0])||!x($e[0]))return b.warn("Fx.hover failed",le,ne),s.unhoverRaw(ne,le)}var Be=1/0;function at(ir,Ur){for(tt=0;tt<Ze.length;tt++)if((ct=Ze[tt])&&ct[0]&&ct[0].trace&&!0===(xt=ct[0].trace).visible&&0!==xt._length&&-1===["carpet","contourcarpet"].indexOf(xt._module.name)){if("splom"===xt.type?Ct=be[Ht=0]:(Ct=p.getSubplot(xt),Ht=be.indexOf(Ct)),p.isUnifiedHover(zt=Ge)&&(zt=zt.charAt(0)),Ot={cd:ct,trace:xt,xa:ve[Ht],ya:Te[Ht],maxHoverDistance:Ke,maxSpikeDistance:lt,index:!1,distance:Math.min(Be,Ke),spikeDistance:1/0,xSpike:void 0,ySpike:void 0,color:u.defaultLine,name:xt.name,x0:void 0,x1:void 0,y0:void 0,y1:void 0,xLabelVal:void 0,yLabelVal:void 0,zLabelVal:void 0,text:void 0},ge[Ct]&&(Ot.subplot=ge[Ct]._subplot),ge._splomScenes&&ge._splomScenes[xt.uid]&&(Ot.scene=ge._splomScenes[xt.uid]),tn=un.length,"array"===zt){var Mr=le[tt];"pointNumber"in Mr?(Ot.index=Mr.pointNumber,zt="closest"):(zt="","xval"in Mr&&(ht=Mr.xval,zt="x"),"yval"in Mr&&(ut=Mr.yval,zt=zt?"closest":"y"))}else void 0!==ir&&void 0!==Ur?(ht=ir,ut=Ur):(ht=Ue[Ht],ut=$e[Ht]);if(0!==Ke)if(xt._module&&xt._module.hoverPoints){var wr=xt._module.hoverPoints(Ot,ht,ut,zt,{finiteRange:!0,hoverLayer:ge._hoverlayer});if(wr)for(var ii,gn=0;gn<wr.length;gn++)x((ii=wr[gn]).x0)&&x(ii.y0)&&un.push(Z(ii,Ge))}else b.log("Unrecognized trace type in hover:",xt);if("closest"===Ge&&un.length>tn&&(un.splice(0,tn),Be=un[0].distance),De&&0!==lt&&0===un.length){Ot.distance=lt,Ot.index=!1;var jt=xt._module.hoverPoints(Ot,ht,ut,"closest",{hoverLayer:ge._hoverlayer});if(jt&&(jt=jt.filter(function(Bn){return Bn.spikeDistance<=lt})),jt&&jt.length){var Jt,An=jt.filter(function(Bn){return Bn.xa.showspikes&&"hovered data"!==Bn.xa.spikesnap});if(An.length){var Hn=An[0];x(Hn.x0)&&x(Hn.y0)&&(Jt=wt(Hn),(!Qe.vLinePoint||Qe.vLinePoint.spikeDistance>Jt.spikeDistance)&&(Qe.vLinePoint=Jt))}var yr=jt.filter(function(Bn){return Bn.ya.showspikes&&"hovered data"!==Bn.ya.spikesnap});if(yr.length){var gr=yr[0];x(gr.x0)&&x(gr.y0)&&(Jt=wt(gr),(!Qe.hLinePoint||Qe.hLinePoint.spikeDistance>Jt.spikeDistance)&&(Qe.hLinePoint=Jt))}}}}}function gt(ir,Ur,Mr){for(var wr,ii=null,gn=1/0,jt=0;jt<ir.length;jt++)wr=ir[jt].spikeDistance,Mr&&0===jt&&(wr=-1/0),wr<=gn&&wr<=Ur&&(ii=ir[jt],gn=wr);return ii}function wt(ir){return ir?{xa:ir.xa,ya:ir.ya,x:void 0!==ir.xSpike?ir.xSpike:(ir.x0+ir.x1)/2,y:void 0!==ir.ySpike?ir.ySpike:(ir.y0+ir.y1)/2,distance:ir.distance,spikeDistance:ir.spikeDistance,curveNumber:ir.trace.index,color:ir.color,pointNumber:ir.index}:null}at();var _t={fullLayout:ge,container:ge._hoverlayer,event:le},Rt=ne._spikepoints;ne._spikepoints={vLinePoint:Qe.vLinePoint,hLinePoint:Qe.hLinePoint};var Vt=function(){un.sort(function(ir,Ur){return ir.distance-Ur.distance}),un=function(ir,Ur){for(var Mr=Ur.charAt(0),wr=[],ii=[],gn=[],jt=0;jt<ir.length;jt++){var Jt=ir[jt];h.traceIs(Jt.trace,"bar-like")||h.traceIs(Jt.trace,"box-violin")?gn.push(Jt):Jt.trace[Mr+"period"]?ii.push(Jt):wr.push(Jt)}return wr.concat(ii).concat(gn)}(un,Ge)};Vt();var Nt=Ge.charAt(0),rt=("x"===Nt||"y"===Nt)&&un[0]&&F[un[0].trace.type];if(De&&0!==lt&&0!==un.length){var Tt=gt(un.filter(function(ir){return ir.ya.showspikes}),lt,rt);Qe.hLinePoint=wt(Tt);var Ut=gt(un.filter(function(ir){return ir.xa.showspikes}),lt,rt);Qe.vLinePoint=wt(Ut)}if(0===un.length){var Wt=s.unhoverRaw(ne,le);return!De||null===Qe.hLinePoint&&null===Qe.vLinePoint||ee(Rt)&&Y(ne,Qe,_t),Wt}if(De&&ee(Rt)&&Y(ne,Qe,_t),p.isXYhover(zt)&&0!==un[0].length&&"splom"!==un[0].trace.type){var sn=un[0],He=(un=D[sn.trace.type]?un.filter(function(ir){return ir.trace.index===sn.trace.index}):[sn]).length;at($("x",sn,ge),$("y",sn,ge));var Gt,Kt=[],_n={},en=0,on=function(ir){var Ur=D[ir.trace.type]?R(ir):ir.trace.index;if(_n[Ur]){var Mr=_n[Ur]-1,wr=Kt[Mr];Mr>0&&Math.abs(ir.distance)<Math.abs(wr.distance)&&(Kt[Mr]=ir)}else en++,_n[Ur]=en,Kt.push(ir)};for(Gt=0;Gt<He;Gt++)on(un[Gt]);for(Gt=un.length-1;Gt>He-1;Gt--)on(un[Gt]);un=Kt,Vt()}var wn=ne._hoverdata,On=[],Dn=Q(ne),Tn=se(ne);for(et=0;et<un.length;et++){var pn=un[et],En=p.makeEventData(pn,pn.trace,pn.cd);if(!1!==pn.hovertemplate){var Un=!1;pn.cd[pn.index]&&pn.cd[pn.index].ht&&(Un=pn.cd[pn.index].ht),pn.hovertemplate=Un||pn.trace.hovertemplate||!1}if(pn.xa&&pn.ya){var In=pn.x0+pn.xa._offset,sr=pn.x1+pn.xa._offset,fr=pn.y0+pn.ya._offset,rr=pn.y1+pn.ya._offset,qr=Math.min(In,sr),ti=Math.max(In,sr),Ar=Math.min(fr,rr),pr=Math.max(fr,rr);En.bbox={x0:qr+Tn,x1:ti+Tn,y0:Ar+Dn,y1:pr+Dn}}pn.eventData=[En],On.push(En)}ne._hoverdata=On;var Fn="y"===Ge&&(Ze.length>1||un.length>1)||"closest"===Ge&&qe&&un.length>1,Rn=u.combine(ge.plot_bgcolor||u.background,ge.paper_bgcolor),hr=I(un,{gd:ne,hovermode:Ge,rotateLabels:Fn,bgColor:Rn,container:ge._hoverlayer,outerContainer:ge._paper.node(),commonLabelOpts:ge.hoverlabel,hoverdistance:ge.hoverdistance});if(p.isUnifiedHover(Ge)||(function(ir,Ur,Mr){var wr,ii,gn,jt,Jt,An,Hn,yr=0,gr=1,Bn=ir.size(),Nn=new Array(Bn),Zn=0;function Wn(ur){var Cr=ur[0],Fr=ur[ur.length-1];if(gn=Fr.pos+Fr.dp+Fr.size-Cr.pmax,(ii=Cr.pmin-Cr.pos-Cr.dp+Cr.size)>.01){for(Jt=ur.length-1;Jt>=0;Jt--)ur[Jt].dp+=ii;wr=!1}if(!(gn<.01)){if(ii<-.01){for(Jt=ur.length-1;Jt>=0;Jt--)ur[Jt].dp-=gn;wr=!1}if(wr){var Zr=0;for(jt=0;jt<ur.length;jt++)(An=ur[jt]).pos+An.dp+An.size>Cr.pmax&&Zr++;for(jt=ur.length-1;jt>=0&&!(Zr<=0);jt--)(An=ur[jt]).pos>Cr.pmax-1&&(An.del=!0,Zr--);for(jt=0;jt<ur.length&&!(Zr<=0);jt++)if((An=ur[jt]).pos<Cr.pmin+1)for(An.del=!0,Zr--,gn=2*An.size,Jt=ur.length-1;Jt>=0;Jt--)ur[Jt].dp-=gn;for(jt=ur.length-1;jt>=0&&!(Zr<=0);jt--)(An=ur[jt]).pos+An.dp+An.size>Cr.pmax&&(An.del=!0,Zr--)}}}for(ir.each(function(ur){var Cr=ur[Ur],Fr="x"===Cr._id.charAt(0),Zr=Cr.range;0===Zn&&Zr&&Zr[0]>Zr[1]!==Fr&&(gr=-1),Nn[Zn++]=[{datum:ur,traceIndex:ur.trace.index,dp:0,pos:ur.pos,posref:ur.posref,size:ur.by*(Fr?M:1)/2,pmin:0,pmax:Fr?Mr.width:Mr.height}]}),Nn.sort(function(ur,Cr){return ur[0].posref-Cr[0].posref||gr*(Cr[0].traceIndex-ur[0].traceIndex)});!wr&&yr<=Bn;){for(yr++,wr=!0,jt=0;jt<Nn.length-1;){var jn=Nn[jt],xr=Nn[jt+1],Ir=jn[jn.length-1],Vr=xr[0];if((ii=Ir.pos+Ir.dp+Ir.size-Vr.pos-Vr.dp+Vr.size)>.01&&Ir.pmin===Vr.pmin&&Ir.pmax===Vr.pmax){for(Jt=xr.length-1;Jt>=0;Jt--)xr[Jt].dp+=ii;for(jn.push.apply(jn,xr),Nn.splice(jt+1,1),Hn=0,Jt=jn.length-1;Jt>=0;Jt--)Hn+=jn[Jt].dp;for(gn=Hn/jn.length,Jt=jn.length-1;Jt>=0;Jt--)jn[Jt].dp-=gn;wr=!1}else jt++}Nn.forEach(Wn)}for(jt=Nn.length-1;jt>=0;jt--){var qn=Nn[jt];for(Jt=qn.length-1;Jt>=0;Jt--){var jr=qn[Jt],tr=jr.datum;tr.offset=jr.dp,tr.del=jr.del}}}(hr,Fn?"xa":"ya",ge),V(hr,Fn,ge._invScaleX,ge._invScaleY)),he&&he.tagName){var ri=h.getComponentMethod("annotations","hasClickToShow")(ne,On);i(m.select(he),ri?"pointer":"")}!he||de||!function(ir,Ur,Mr){if(!Mr||Mr.length!==ir._hoverdata.length)return!0;for(var wr=Mr.length-1;wr>=0;wr--){var ii=Mr[wr],gn=ir._hoverdata[wr];if(ii.curveNumber!==gn.curveNumber||String(ii.pointNumber)!==String(gn.pointNumber)||String(ii.pointNumbers)!==String(gn.pointNumbers))return!0}return!1}(ne,0,wn)||(wn&&ne.emit("plotly_unhover",{event:le,points:wn}),ne.emit("plotly_hover",{event:le,points:ne._hoverdata,xaxes:ve,yaxes:Te,xvals:Ue,yvals:$e}))}(G,W,ie,q,te)})},ae.loneHover=function(G,W){var ie=!0;Array.isArray(G)||(ie=!1,G=[G]);var q=W.gd,te=Q(q),ne=se(q),le=I(G.map(function(he){var be=he._x0||he.x0||he.x||0,ge=he._x1||he.x1||he.x||0,we=he._y0||he.y0||he.y||0,Ce=he._y1||he.y1||he.y||0,De=he.eventData;if(De){var Se=Math.min(be,ge),Fe=Math.max(be,ge),ve=Math.min(we,Ce),Te=Math.max(we,Ce),Le=he.trace;if(h.traceIs(Le,"gl3d")){var Ee=q._fullLayout[Le.scene]._scene.container,Pe=Ee.offsetLeft,je=Ee.offsetTop;Se+=Pe,Fe+=Pe,ve+=je,Te+=je}De.bbox={x0:Se+ne,x1:Fe+ne,y0:ve+te,y1:Te+te},W.inOut_bbox&&W.inOut_bbox.push(De.bbox)}else De=!1;return{color:he.color||u.defaultLine,x0:he.x0||he.x||0,x1:he.x1||he.x||0,y0:he.y0||he.y||0,y1:he.y1||he.y||0,xLabel:he.xLabel,yLabel:he.yLabel,zLabel:he.zLabel,text:he.text,name:he.name,idealAlign:he.idealAlign,borderColor:he.borderColor,fontFamily:he.fontFamily,fontSize:he.fontSize,fontColor:he.fontColor,nameLength:he.nameLength,textAlign:he.textAlign,trace:he.trace||{index:0,hoverinfo:""},xa:{_offset:0},ya:{_offset:0},index:0,hovertemplate:he.hovertemplate||!1,hovertemplateLabels:he.hovertemplateLabels||!1,eventData:De}}),{gd:q,hovermode:"closest",rotateLabels:!1,bgColor:W.bgColor||u.background,container:m.select(W.container),outerContainer:W.outerContainer||W.container}),ue=0,de=0;return le.sort(function(he,be){return he.y0-be.y0}).each(function(he,be){var ge=he.y0-he.by/2;he.offset=ge-5<ue?ue-ge+5:0,ue=ge+he.by+he.offset,be===W.anchorIndex&&(de=he.offset)}).each(function(he){he.offset-=de}),V(le,!1,q._fullLayout._invScaleX,q._fullLayout._invScaleY),ie?le:le.node()};var L=/<extra>([\s\S]*)<\/extra>/;function I(G,W){var ie=W.gd,q=ie._fullLayout,te=W.hovermode,ne=W.rotateLabels,le=W.bgColor,ue=W.container,de=W.outerContainer,he=W.commonLabelOpts||{};if(0===G.length)return[[]];var be=W.fontFamily||v.HOVERFONT,ge=W.fontSize||v.HOVERFONTSIZE,we=G[0],Ce=we.xa,De=we.ya,Se=te.charAt(0),Fe=we[Se+"Label"],ve=j(ie,de),Te=ve.top,Le=ve.width,Ee=ve.height,Pe=void 0!==Fe&&we.distance<=W.hoverdistance&&("x"===te||"y"===te);if(Pe){var je,Ge,Ke=!0;for(je=0;je<G.length;je++)if(Ke&&void 0===G[je].zLabel&&(Ke=!1),Ge=G[je].hoverinfo||G[je].trace.hoverinfo){var lt=Array.isArray(Ge)?Ge:Ge.split("+");if(-1===lt.indexOf("all")&&-1===lt.indexOf(te)){Pe=!1;break}}Ke&&(Pe=!1)}var Ue=ue.selectAll("g.axistext").data(Pe?[0]:[]);if(Ue.enter().append("g").classed("axistext",!0),Ue.exit().remove(),Ue.each(function(){var rt=m.select(this),Tt=b.ensureSingle(rt,"path","",function(sr){sr.style({"stroke-width":"1px"})}),Ut=b.ensureSingle(rt,"text","",function(sr){sr.attr("data-notex",1)}),Wt=he.bgcolor||u.defaultLine,sn=he.bordercolor||u.contrast(Wt),He=u.contrast(Wt),vt={family:he.font.family||be,size:he.font.size||ge,color:he.font.color||He};Tt.style({fill:Wt,stroke:sn}),Ut.text(Fe).call(d.font,vt).call(l.positionText,0,0).call(l.convertToTspans,ie),rt.attr("transform","");var Lt,Gt,Kt=j(ie,Ut.node());if("x"===te){var _n="top"===Ce.side?"-":"";Ut.attr("text-anchor","middle").call(l.positionText,0,"top"===Ce.side?Te-Kt.bottom-C-P:Te-Kt.top+C+P),Gt=De._offset+("top"===Ce.side?0:De._length);var en=Kt.width/2+P;(Lt=Ce._offset+(we.x0+we.x1)/2)<en?(Lt=en,Tt.attr("d","M-"+(en-C)+",0L-"+(en-2*C)+","+_n+C+"H"+(P+Kt.width/2)+"v"+_n+(2*P+Kt.height)+"H-"+en+"V"+_n+C+"Z")):Lt>q.width-en?(Lt=q.width-en,Tt.attr("d","M"+(en-C)+",0L"+en+","+_n+C+"v"+_n+(2*P+Kt.height)+"H-"+en+"V"+_n+C+"H"+(en-2*C)+"Z")):Tt.attr("d","M0,0L"+C+","+_n+C+"H"+(P+Kt.width/2)+"v"+_n+(2*P+Kt.height)+"H-"+(P+Kt.width/2)+"V"+_n+C+"H-"+C+"Z")}else{var on,wn,On;"right"===De.side?(on="start",wn=1,On="",Lt=Ce._offset+Ce._length):(on="end",wn=-1,On="-",Lt=Ce._offset),Gt=De._offset+(we.y0+we.y1)/2,Ut.attr("text-anchor",on),Tt.attr("d","M0,0L"+On+C+","+C+"V"+(P+Kt.height/2)+"h"+On+(2*P+Kt.width)+"V-"+(P+Kt.height/2)+"H"+On+C+"V-"+C+"Z");var Dn,Tn=Kt.height/2,pn=Te-Kt.top-Tn,En="clip"+q._uid+"commonlabel"+De._id;if(Lt<Kt.width+2*P+C){Dn="M-"+(C+P)+"-"+Tn+"h-"+(Kt.width-P)+"V"+Tn+"h"+(Kt.width-P)+"Z";var Un=Kt.width-Lt+P;l.positionText(Ut,Un,pn),"end"===on&&Ut.selectAll("tspan").each(function(){var sr=m.select(this),fr=d.tester.append("text").text(sr.text()).call(d.font,vt),rr=j(ie,fr.node());Math.round(rr.width)<Math.round(Kt.width)&&sr.attr("x",Un-rr.width),fr.remove()})}else l.positionText(Ut,wn*(P+C),pn),Dn=null;var In=q._topclips.selectAll("#"+En).data(Dn?[0]:[]);In.enter().append("clipPath").attr("id",En).append("path"),In.exit().remove(),In.select("path").attr("d",Dn),d.setClipUrl(Ut,Dn?En:null,ie)}rt.attr("transform",e(Lt,Gt))}),p.isUnifiedHover(te)){ue.selectAll("g.hovertext").remove();var $e=G.filter(function(rt){return"none"!==rt.hoverinfo});if(0===$e.length)return;var et=q.hoverlabel,tt=et.font,xt={font:tt};g({showlegend:!0,legend:{title:{text:Fe,font:tt},font:tt,bgcolor:et.bgcolor,bordercolor:et.bordercolor,borderwidth:1,tracegroupgap:7,traceorder:q.legend?q.legend.traceorder:void 0,orientation:"v"}},xt,ie._fullData);var Ct=xt.legend;Ct.entries=[];for(var Ht=0;Ht<$e.length;Ht++){var zt=$e[Ht];if("none"!==zt.hoverinfo){var ht=B(zt,!0,te,q,Fe),ut=ht[0],Ot=ht[1];zt.name=Ot,zt.text=""!==Ot?Ot+" : "+ut:ut;var tn=zt.cd[zt.index];tn&&(tn.mc&&(zt.mc=tn.mc),tn.mcc&&(zt.mc=tn.mcc),tn.mlc&&(zt.mlc=tn.mlc),tn.mlcc&&(zt.mlc=tn.mlcc),tn.mlw&&(zt.mlw=tn.mlw),tn.mrc&&(zt.mrc=tn.mrc),tn.dir&&(zt.dir=tn.dir)),zt._distinct=!0,Ct.entries.push([zt])}}Ct.entries.sort(function(rt,Tt){return rt[0].trace.index-Tt[0].trace.index}),Ct.layer=ue,Ct._inHover=!0,Ct._groupTitleFont=et.grouptitlefont,f(ie,Ct);var un,Ze,Qe,qe,it=ue.select("g.legend"),Ie=j(ie,it.node()),ze=Ie.width+2*P,Ve=Ie.height+2*P,Be=$e[0],at=(Be.x0+Be.x1)/2,gt=(Be.y0+Be.y1)/2,wt=!(h.traceIs(Be.trace,"bar-like")||h.traceIs(Be.trace,"box-violin"));"y"===Se?wt?(Ze=gt-P,un=gt+P):(Ze=Math.min.apply(null,$e.map(function(rt){return Math.min(rt.y0,rt.y1)})),un=Math.max.apply(null,$e.map(function(rt){return Math.max(rt.y0,rt.y1)}))):Ze=un=b.mean($e.map(function(rt){return(rt.y0+rt.y1)/2}))-Ve/2,"x"===Se?wt?(Qe=at+P,qe=at-P):(Qe=Math.max.apply(null,$e.map(function(rt){return Math.max(rt.x0,rt.x1)})),qe=Math.min.apply(null,$e.map(function(rt){return Math.min(rt.x0,rt.x1)}))):Qe=qe=b.mean($e.map(function(rt){return(rt.x0+rt.x1)/2}))-ze/2;var _t,Rt,yt=Ce._offset,Vt=De._offset;return qe+=yt-ze,Ze+=Vt-Ve,_t=(Qe+=yt)+ze<Le&&Qe>=0?Qe:qe+ze<Le&&qe>=0?qe:yt+ze<Le?yt:Qe-at<at-qe+ze?Le-ze:0,Rt=(un+=Vt)+Ve<Ee&&un>=0?un:Ze+Ve<Ee&&Ze>=0?Ze:Vt+Ve<Ee?Vt:un-gt<gt-Ze+Ve?Ee-Ve:0,it.attr("transform",e((_t+=P)-1,(Rt+=P)-1)),it}var Nt=ue.selectAll("g.hovertext").data(G,function(rt){return R(rt)});return Nt.enter().append("g").classed("hovertext",!0).each(function(){var rt=m.select(this);rt.append("rect").call(u.fill,u.addOpacity(le,.8)),rt.append("text").classed("name",!0),rt.append("path").style("stroke-width","1px"),rt.append("text").classed("nums",!0).call(d.font,be,ge)}),Nt.exit().remove(),Nt.each(function(rt){var Tt=m.select(this).attr("transform",""),Ut=rt.color;Array.isArray(Ut)&&(Ut=Ut[rt.eventData[0].pointNumber]);var Wt=rt.bgcolor||Ut,sn=u.combine(u.opacity(Wt)?Wt:u.defaultLine,le),He=u.combine(u.opacity(Ut)?Ut:u.defaultLine,le),vt=rt.borderColor||u.contrast(sn),Lt=B(rt,Pe,te,q,Fe,Tt),Gt=Lt[0],Kt=Lt[1],_n=Tt.select("text.nums").call(d.font,rt.fontFamily||be,rt.fontSize||ge,rt.fontColor||vt).text(Gt).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,ie),en=Tt.select("text.name"),on=0,wn=0;if(Kt&&Kt!==Gt){en.call(d.font,rt.fontFamily||be,rt.fontSize||ge,He).text(Kt).attr("data-notex",1).call(l.positionText,0,0).call(l.convertToTspans,ie);var On=j(ie,en.node());on=On.width+2*P,wn=On.height+2*P}else en.remove(),Tt.select("rect").remove();Tt.select("path").style({fill:sn,stroke:vt});var Dn=rt.xa._offset+(rt.x0+rt.x1)/2,Tn=rt.ya._offset+(rt.y0+rt.y1)/2,pn=Math.abs(rt.x1-rt.x0),En=Math.abs(rt.y1-rt.y0),Un=j(ie,_n.node()),In=Un.width/q._invScaleX,sr=Un.height/q._invScaleY;rt.ty0=(Te-Un.top)/q._invScaleY,rt.bx=In+2*P,rt.by=Math.max(sr+2*P,wn),rt.anchor="start",rt.txwidth=In,rt.tx2width=on,rt.offset=0;var fr,rr,qr=(In+C+P+on)*q._invScaleX;if(ne)rt.pos=Dn,fr=Tn+En/2+qr<=Ee,rr=Tn-En/2-qr>=0,"top"!==rt.idealAlign&&fr||!rr?fr?(Tn+=En/2,rt.anchor="start"):rt.anchor="middle":(Tn-=En/2,rt.anchor="end");else if(rt.pos=Tn,fr=Dn+pn/2+qr<=Le,rr=Dn-pn/2-qr>=0,"left"!==rt.idealAlign&&fr||!rr)if(fr)Dn+=pn/2,rt.anchor="start";else{rt.anchor="middle";var ti=qr/2,Ar=Dn+ti-Le,pr=Dn-ti;Ar>0&&(Dn-=Ar),pr<0&&(Dn+=-pr)}else Dn-=pn/2,rt.anchor="end";_n.attr("text-anchor",rt.anchor),on&&en.attr("text-anchor",rt.anchor),Tt.attr("transform",e(Dn,Tn)+(ne?o(w):""))}),Nt}function B(G,W,ie,q,te,ne){var le="",ue="";void 0!==G.nameOverride&&(G.name=G.nameOverride),G.name&&(G.trace._meta&&(G.name=b.templateString(G.name,G.trace._meta)),le=J(G.name,G.nameLength));var de=ie.charAt(0);void 0!==G.zLabel?(void 0!==G.xLabel&&(ue+="x: "+G.xLabel+"<br>"),void 0!==G.yLabel&&(ue+="y: "+G.yLabel+"<br>"),"choropleth"!==G.trace.type&&"choroplethmapbox"!==G.trace.type&&(ue+=(ue?"z: ":"")+G.zLabel)):W&&G[de+"Label"]===te?ue=G[("x"===de?"y":"x")+"Label"]||"":void 0===G.xLabel?void 0!==G.yLabel&&"scattercarpet"!==G.trace.type&&(ue=G.yLabel):ue=void 0===G.yLabel?G.xLabel:"("+G.xLabel+", "+G.yLabel+")",!G.text&&0!==G.text||Array.isArray(G.text)||(ue+=(ue?"<br>":"")+G.text),void 0!==G.extraText&&(ue+=(ue?"<br>":"")+G.extraText),ne&&""===ue&&!G.hovertemplate&&(""===le&&ne.remove(),ue=le);var be=G.hovertemplate||!1;if(be){var ge=G.hovertemplateLabels||G;G[de+"Label"]!==te&&(ge[de+"other"]=ge[de+"Val"],ge[de+"otherLabel"]=ge[de+"Label"]),ue=(ue=b.hovertemplateString(be,ge,q._d3locale,G.eventData[0]||{},G.trace._meta)).replace(L,function(we,Ce){return le=J(Ce,G.nameLength),""})}return[ue,le]}function V(G,W,ie,q){var te=function(le){return le*ie},ne=function(le){return le*q};G.each(function(le){var ue=m.select(this);if(le.del)return ue.remove();var de=ue.select("text.nums"),he=le.anchor,be="end"===he?-1:1,ge={start:1,end:-1,middle:0}[he],we=ge*(C+P),Ce=we+ge*(le.txwidth+P),De=0,Se=le.offset,Fe="middle"===he;Fe&&(we-=le.tx2width/2,Ce+=le.txwidth/2+P),W&&(Se*=-k,De=le.offset*A),ue.select("path").attr("d",Fe?"M-"+te(le.bx/2+le.tx2width/2)+","+ne(Se-le.by/2)+"h"+te(le.bx)+"v"+ne(le.by)+"h-"+te(le.bx)+"Z":"M0,0L"+te(be*C+De)+","+ne(C+Se)+"v"+ne(le.by/2-C)+"h"+te(be*le.bx)+"v-"+ne(le.by)+"H"+te(be*C+De)+"V"+ne(Se-C)+"Z");var ve=De+we,Te=Se+le.ty0-le.by/2+P,Le=le.textAlign||"auto";"auto"!==Le&&("left"===Le&&"start"!==he?(de.attr("text-anchor","start"),ve=Fe?-le.bx/2-le.tx2width/2+P:-le.bx-P):"right"===Le&&"end"!==he&&(de.attr("text-anchor","end"),ve=Fe?le.bx/2-le.tx2width/2-P:le.bx+P)),de.call(l.positionText,te(ve),ne(Te)),le.tx2width&&(ue.select("text.name").call(l.positionText,te(Ce+ge*P+De),ne(Se+le.ty0-le.by/2+P)),ue.select("rect").call(d.setRect,te(Ce+(ge-1)*le.tx2width/2+De),ne(Se-le.by/2-1),te(le.tx2width),ne(le.by+2)))})}function Z(G,W){var ie=G.index,q=G.trace||{},te=G.cd[0],ne=G.cd[ie]||{};function le(we){return we||x(we)&&0===we}var ue=Array.isArray(ie)?function(we,Ce){var De=b.castOption(te,ie,we);return le(De)?De:b.extractOption({},q,"",Ce)}:function(we,Ce){return b.extractOption(ne,q,we,Ce)};function de(we,Ce,De){var Se=ue(Ce,De);le(Se)&&(G[we]=Se)}if(de("hoverinfo","hi","hoverinfo"),de("bgcolor","hbg","hoverlabel.bgcolor"),de("borderColor","hbc","hoverlabel.bordercolor"),de("fontFamily","htf","hoverlabel.font.family"),de("fontSize","hts","hoverlabel.font.size"),de("fontColor","htc","hoverlabel.font.color"),de("nameLength","hnl","hoverlabel.namelength"),de("textAlign","hta","hoverlabel.align"),G.posref="y"===W||"closest"===W&&"h"===q.orientation?G.xa._offset+(G.x0+G.x1)/2:G.ya._offset+(G.y0+G.y1)/2,G.x0=b.constrain(G.x0,0,G.xa._length),G.x1=b.constrain(G.x1,0,G.xa._length),G.y0=b.constrain(G.y0,0,G.ya._length),G.y1=b.constrain(G.y1,0,G.ya._length),void 0!==G.xLabelVal&&(G.xLabel="xLabel"in G?G.xLabel:c.hoverLabelText(G.xa,G.xLabelVal,q.xhoverformat),G.xVal=G.xa.c2d(G.xLabelVal)),void 0!==G.yLabelVal&&(G.yLabel="yLabel"in G?G.yLabel:c.hoverLabelText(G.ya,G.yLabelVal,q.yhoverformat),G.yVal=G.ya.c2d(G.yLabelVal)),void 0!==G.zLabelVal&&void 0===G.zLabel&&(G.zLabel=String(G.zLabelVal)),!(isNaN(G.xerr)||"log"===G.xa.type&&G.xerr<=0)){var he=c.tickText(G.xa,G.xa.c2l(G.xerr),"hover").text;G.xLabel+=void 0!==G.xerrneg?" +"+he+" / -"+c.tickText(G.xa,G.xa.c2l(G.xerrneg),"hover").text:" \xb1 "+he,"x"===W&&(G.distance+=1)}if(!(isNaN(G.yerr)||"log"===G.ya.type&&G.yerr<=0)){var be=c.tickText(G.ya,G.ya.c2l(G.yerr),"hover").text;G.yLabel+=void 0!==G.yerrneg?" +"+be+" / -"+c.tickText(G.ya,G.ya.c2l(G.yerrneg),"hover").text:" \xb1 "+be,"y"===W&&(G.distance+=1)}var ge=G.hoverinfo||G.trace.hoverinfo;return ge&&"all"!==ge&&(-1===(ge=Array.isArray(ge)?ge:ge.split("+")).indexOf("x")&&(G.xLabel=void 0),-1===ge.indexOf("y")&&(G.yLabel=void 0),-1===ge.indexOf("z")&&(G.zLabel=void 0),-1===ge.indexOf("text")&&(G.text=void 0),-1===ge.indexOf("name")&&(G.name=void 0)),G}function Y(G,W,ie){var q,te,ne=ie.container,le=ie.fullLayout,ue=le._size,de=ie.event,he=!!W.hLinePoint,be=!!W.vLinePoint;if(ne.selectAll(".spikeline").remove(),be||he){var ge=u.combine(le.plot_bgcolor,le.paper_bgcolor);if(he){var we,Ce,De=W.hLinePoint;q=De&&De.xa,"cursor"===(te=De&&De.ya).spikesnap?(we=de.pointerX,Ce=de.pointerY):(we=q._offset+De.x,Ce=te._offset+De.y);var Se,Fe,ve=T.readability(De.color,ge)<1.5?u.contrast(ge):De.color,Te=te.spikemode,Le=te.spikethickness,Ee=te.spikecolor||ve,Pe=c.getPxPosition(G,te);if(-1!==Te.indexOf("toaxis")||-1!==Te.indexOf("across")){if(-1!==Te.indexOf("toaxis")&&(Se=Pe,Fe=we),-1!==Te.indexOf("across")){var je=te._counterDomainMin,Ge=te._counterDomainMax;"free"===te.anchor&&(je=Math.min(je,te.position),Ge=Math.max(Ge,te.position)),Se=ue.l+je*ue.w,Fe=ue.l+Ge*ue.w}ne.insert("line",":first-child").attr({x1:Se,x2:Fe,y1:Ce,y2:Ce,"stroke-width":Le,stroke:Ee,"stroke-dasharray":d.dashStyle(te.spikedash,Le)}).classed("spikeline",!0).classed("crisp",!0),ne.insert("line",":first-child").attr({x1:Se,x2:Fe,y1:Ce,y2:Ce,"stroke-width":Le+2,stroke:ge}).classed("spikeline",!0).classed("crisp",!0)}-1!==Te.indexOf("marker")&&ne.insert("circle",":first-child").attr({cx:Pe+("right"!==te.side?Le:-Le),cy:Ce,r:Le,fill:Ee}).classed("spikeline",!0)}if(be){var Ke,lt,Ue=W.vLinePoint;te=Ue&&Ue.ya,"cursor"===(q=Ue&&Ue.xa).spikesnap?(Ke=de.pointerX,lt=de.pointerY):(Ke=q._offset+Ue.x,lt=te._offset+Ue.y);var $e,et,tt=T.readability(Ue.color,ge)<1.5?u.contrast(ge):Ue.color,ct=q.spikemode,xt=q.spikethickness,Ct=q.spikecolor||tt,Ht=c.getPxPosition(G,q);if(-1!==ct.indexOf("toaxis")||-1!==ct.indexOf("across")){if(-1!==ct.indexOf("toaxis")&&($e=Ht,et=lt),-1!==ct.indexOf("across")){var zt=q._counterDomainMin,ht=q._counterDomainMax;"free"===q.anchor&&(zt=Math.min(zt,q.position),ht=Math.max(ht,q.position)),$e=ue.t+(1-ht)*ue.h,et=ue.t+(1-zt)*ue.h}ne.insert("line",":first-child").attr({x1:Ke,x2:Ke,y1:$e,y2:et,"stroke-width":xt,stroke:Ct,"stroke-dasharray":d.dashStyle(q.spikedash,xt)}).classed("spikeline",!0).classed("crisp",!0),ne.insert("line",":first-child").attr({x1:Ke,x2:Ke,y1:$e,y2:et,"stroke-width":xt+2,stroke:ge}).classed("spikeline",!0).classed("crisp",!0)}-1!==ct.indexOf("marker")&&ne.insert("circle",":first-child").attr({cx:Ke,cy:Ht-("top"!==q.side?xt:-xt),r:xt,fill:Ct}).classed("spikeline",!0)}}}function ee(G,W){return!W||W.vLinePoint!==G._spikepoints.vLinePoint||W.hLinePoint!==G._spikepoints.hLinePoint}function J(G,W){return l.plainText(G||"",{len:W,allowedTags:["br","sub","sup","b","i","em"]})}function $(G,W,ie){var q=W[G+"a"],te=W[G+"Val"],ne=W.cd[0];if("category"===q.type)te=q._categoriesMap[te];else if("date"===q.type){var le=W.trace[G+"periodalignment"];if(le){var ue=W.cd[W.index],de=ue[G+"Start"];void 0===de&&(de=ue[G]);var he=ue[G+"End"];void 0===he&&(he=ue[G]);var be=he-de;"end"===le?te+=be:"middle"===le&&(te+=be/2)}te=q.d2c(te)}return ne&&ne.t&&ne.t.posLetter===q._id&&("group"!==ie.boxmode&&"group"!==ie.violinmode||(te+=ne.t.dPos)),te}function Q(G){return G.offsetTop+G.clientTop}function se(G){return G.offsetLeft+G.clientLeft}function j(G,W){var ie=G._fullLayout,q=W.getBoundingClientRect(),te=q.x,ne=q.y,le=te+q.width,ue=ne+q.height,de=b.apply3DTransform(ie._invTransform)(te,ne),he=b.apply3DTransform(ie._invTransform)(le,ue),be=de[0],ge=de[1],we=he[0],Ce=he[1];return{x:be,y:ge,width:we-be,height:Ce-ge,top:Math.min(ge,Ce),left:Math.min(be,we),right:Math.max(be,we),bottom:Math.max(ge,Ce)}}},{"../../lib":503,"../../lib/events":492,"../../lib/override_cursor":514,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../legend/defaults":418,"../legend/draw":419,"./constants":400,"./helpers":402,"@plotly/d3":58,"fast-isnumeric":190,tinycolor2:312}],404:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../color"),T=_("./helpers").isUnifiedHover;oe.exports=function(b,e,o,a){a=a||{};var l=e.legend;function i(d){a.font[d]||(a.font[d]=l?e.legend.font[d]:e.font[d])}e&&T(e.hovermode)&&(a.font||(a.font={}),i("size"),i("family"),i("color"),l?(a.bgcolor||(a.bgcolor=x.combine(e.legend.bgcolor,e.paper_bgcolor)),a.bordercolor||(a.bordercolor=e.legend.bordercolor)):a.bgcolor||(a.bgcolor=e.paper_bgcolor)),o("hoverlabel.bgcolor",a.bgcolor),o("hoverlabel.bordercolor",a.bordercolor),o("hoverlabel.namelength",a.namelength),m.coerceFont(o,"hoverlabel.font",a.font),o("hoverlabel.align",a.align)}},{"../../lib":503,"../color":366,"./helpers":402}],405:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./layout_attributes");oe.exports=function(T,b){function e(o,a){return void 0!==b[o]?b[o]:m.coerce(T,b,x,o,a)}return e("clickmode"),e("hovermode")}},{"../../lib":503,"./layout_attributes":407}],406:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../lib"),T=_("../dragelement"),b=_("./helpers"),e=_("./layout_attributes"),o=_("./hover");oe.exports={moduleType:"component",name:"fx",constants:_("./constants"),schema:{layout:e},attributes:_("./attributes"),layoutAttributes:e,supplyLayoutGlobalDefaults:_("./layout_global_defaults"),supplyDefaults:_("./defaults"),supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc"),getDistanceFunction:b.getDistanceFunction,getClosest:b.getClosest,inbox:b.inbox,quadrature:b.quadrature,appendArrayPointValue:b.appendArrayPointValue,castHoverOption:function(a,l,i){return x.castOption(a,l,"hoverlabel."+i)},castHoverinfo:function(a,l,i){return x.castOption(a,i,"hoverinfo",function(d){return x.coerceHoverinfo({hoverinfo:d},{_module:a._module},l)})},hover:o.hover,unhover:T.unhover,loneHover:o.loneHover,loneUnhover:function(a){var l=x.isD3Selection(a)?a:m.select(a);l.selectAll("g.hovertext").remove(),l.selectAll(".spikeline").remove()},click:_("./click")}},{"../../lib":503,"../dragelement":385,"./attributes":397,"./calc":398,"./click":399,"./constants":400,"./defaults":401,"./helpers":402,"./hover":403,"./layout_attributes":407,"./layout_defaults":408,"./layout_global_defaults":409,"@plotly/d3":58}],407:[function(_,oe,ae){"use strict";var m=_("./constants"),x=_("../../plots/font_attributes"),T=x({editType:"none"});T.family.dflt=m.HOVERFONT,T.size.dflt=m.HOVERFONTSIZE,oe.exports={clickmode:{valType:"flaglist",flags:["event","select"],dflt:"event",editType:"plot",extras:["none"]},dragmode:{valType:"enumerated",values:["zoom","pan","select","lasso","drawclosedpath","drawopenpath","drawline","drawrect","drawcircle","orbit","turntable",!1],dflt:"zoom",editType:"modebar"},hovermode:{valType:"enumerated",values:["x","y","closest",!1,"x unified","y unified"],dflt:"closest",editType:"modebar"},hoverdistance:{valType:"integer",min:-1,dflt:20,editType:"none"},spikedistance:{valType:"integer",min:-1,dflt:-1,editType:"none"},hoverlabel:{bgcolor:{valType:"color",editType:"none"},bordercolor:{valType:"color",editType:"none"},font:T,grouptitlefont:x({editType:"none"}),align:{valType:"enumerated",values:["left","right","auto"],dflt:"auto",editType:"none"},namelength:{valType:"integer",min:-1,dflt:15,editType:"none"},editType:"none"},selectdirection:{valType:"enumerated",values:["h","v","d","any"],dflt:"any",editType:"none"}}},{"../../plots/font_attributes":585,"./constants":400}],408:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./layout_attributes"),T=_("./hovermode_defaults"),b=_("./hoverlabel_defaults");oe.exports=function(e,o){function a(u,s){return m.coerce(e,o,x,u,s)}T(e,o)&&(a("hoverdistance"),a("spikedistance")),"select"===a("dragmode")&&a("selectdirection");var l=o._has("mapbox"),i=o._has("geo"),d=o._basePlotModules.length;"zoom"===o.dragmode&&((l||i)&&1===d||l&&i&&2===d)&&(o.dragmode="pan"),b(e,o,a),m.coerceFont(a,"hoverlabel.grouptitlefont",o.hoverlabel.font)}},{"../../lib":503,"./hoverlabel_defaults":404,"./hovermode_defaults":405,"./layout_attributes":407}],409:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./hoverlabel_defaults"),T=_("./layout_attributes");oe.exports=function(b,e){x(b,e,function(o,a){return m.coerce(b,e,T,o,a)})}},{"../../lib":503,"./hoverlabel_defaults":404,"./layout_attributes":407}],410:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../lib/regex").counter,T=_("../../plots/domain").attributes,b=_("../../plots/cartesian/constants").idRegex,e=_("../../plot_api/plot_template"),o={rows:{valType:"integer",min:1,editType:"plot"},roworder:{valType:"enumerated",values:["top to bottom","bottom to top"],dflt:"top to bottom",editType:"plot"},columns:{valType:"integer",min:1,editType:"plot"},subplots:{valType:"info_array",freeLength:!0,dimensions:2,items:{valType:"enumerated",values:[x("xy").toString(),""],editType:"plot"},editType:"plot"},xaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[b.x.toString(),""],editType:"plot"},editType:"plot"},yaxes:{valType:"info_array",freeLength:!0,items:{valType:"enumerated",values:[b.y.toString(),""],editType:"plot"},editType:"plot"},pattern:{valType:"enumerated",values:["independent","coupled"],dflt:"coupled",editType:"plot"},xgap:{valType:"number",min:0,max:1,editType:"plot"},ygap:{valType:"number",min:0,max:1,editType:"plot"},domain:T({name:"grid",editType:"plot",noGridCell:!0},{}),xside:{valType:"enumerated",values:["bottom","bottom plot","top plot","top"],dflt:"bottom plot",editType:"plot"},yside:{valType:"enumerated",values:["left","left plot","right plot","right"],dflt:"left plot",editType:"plot"},editType:"plot"};function a(d,u,s){var c=u[s+"axes"],h=Object.keys((d._splomAxes||{})[s]||{});return Array.isArray(c)?c:h.length?h:void 0}function l(d,u,s,c,h,p){var v=u(d+"gap",s),g=u("domain."+d);u(d+"side",c);for(var f=new Array(h),w=g[0],y=(g[1]-w)/(h-v),M=y*(1-v),A=0;A<h;A++){var k=w+y*A;f[p?h-1-A:A]=[k,k+M]}return f}function i(d,u,s,c,h){var p,v=new Array(s);function g(f,w){-1!==u.indexOf(w)&&void 0===c[w]?(v[f]=w,c[w]=f):v[f]=""}if(Array.isArray(d))for(p=0;p<s;p++)g(p,d[p]);else for(g(0,h),p=1;p<s;p++)g(p,h+(p+1));return v}oe.exports={moduleType:"component",name:"grid",schema:{layout:{grid:o}},layoutAttributes:o,sizeDefaults:function(d,u){var s=d.grid||{},c=a(u,s,"x"),h=a(u,s,"y");if(d.grid||c||h){var p,v,g=Array.isArray(s.subplots)&&Array.isArray(s.subplots[0]),f=Array.isArray(c),w=Array.isArray(h),y=f&&c!==s.xaxes&&w&&h!==s.yaxes;g?(p=s.subplots.length,v=s.subplots[0].length):(w&&(p=h.length),f&&(v=c.length));var M=e.newContainer(u,"grid"),A=L("rows",p),k=L("columns",v);if(A*k>1){!g&&!f&&!w&&"independent"===L("pattern")&&(g=!0),M._hasSubplotGrid=g;var C,P,D="top to bottom"===L("roworder"),R=g?.3:.1;y&&u._splomGridDflt&&(C=u._splomGridDflt.xside,P=u._splomGridDflt.yside),M._domains={x:l("x",L,g?.2:.1,C,k),y:l("y",L,R,P,A,D)}}else delete u.grid}function L(I,B){return m.coerce(s,M,o,I,B)}},contentDefaults:function(d,u){var s=u.grid;if(s&&s._domains){var c,h,p,v,g,f,w,y=d.grid||{},M=u._subplots,A=s._hasSubplotGrid,k=s.rows,C=s.columns,P="independent"===s.pattern,D=s._axisMap={};if(A){var F=y.subplots||[];f=s.subplots=new Array(k);var R=1;for(c=0;c<k;c++){var L=f[c]=new Array(C),I=F[c]||[];for(h=0;h<C;h++)if(P?(g=1===R?"xy":"x"+R+"y"+R,R++):g=I[h],L[h]="",-1!==M.cartesian.indexOf(g)){if(w=g.indexOf("y"),p=g.slice(0,w),v=g.slice(w),void 0!==D[p]&&D[p]!==h||void 0!==D[v]&&D[v]!==c)continue;L[h]=g,D[p]=h,D[v]=c}}}else{var B=a(u,y,"x"),V=a(u,y,"y");s.xaxes=i(B,M.xaxis,C,D,"x"),s.yaxes=i(V,M.yaxis,k,D,"y")}var Z=s._anchors={},Y="top to bottom"===s.roworder;for(var ee in D){var J,$,Q,se=ee.charAt(0),j=s[se+"side"];if(j.length<8)Z[ee]="free";else if("x"===se){if("t"===j.charAt(0)===Y?(J=0,$=1,Q=k):(J=k-1,$=-1,Q=-1),A){var G=D[ee];for(c=J;c!==Q;c+=$)if((g=f[c][G])&&(w=g.indexOf("y"),g.slice(0,w)===ee)){Z[ee]=g.slice(w);break}}else for(c=J;c!==Q;c+=$)if(-1!==M.cartesian.indexOf(ee+(v=s.yaxes[c]))){Z[ee]=v;break}}else if("l"===j.charAt(0)?(J=0,$=1,Q=C):(J=C-1,$=-1,Q=-1),A){var W=D[ee];for(c=J;c!==Q;c+=$)if((g=f[W][c])&&(w=g.indexOf("y"),g.slice(w)===ee)){Z[ee]=g.slice(0,w);break}}else for(c=J;c!==Q;c+=$)if(-1!==M.cartesian.indexOf((p=s.xaxes[c])+ee)){Z[ee]=p;break}}}}}},{"../../lib":503,"../../lib/regex":520,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561,"../../plots/domain":584}],411:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/constants"),x=_("../../plot_api/plot_template").templatedArray;_("../../constants/axis_placeable_objects"),oe.exports=x("image",{visible:{valType:"boolean",dflt:!0,editType:"arraydraw"},source:{valType:"string",editType:"arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},sizex:{valType:"number",dflt:0,editType:"arraydraw"},sizey:{valType:"number",dflt:0,editType:"arraydraw"},sizing:{valType:"enumerated",values:["fill","contain","stretch"],dflt:"contain",editType:"arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},x:{valType:"any",dflt:0,editType:"arraydraw"},y:{valType:"any",dflt:0,editType:"arraydraw"},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left",editType:"arraydraw"},yanchor:{valType:"enumerated",values:["top","middle","bottom"],dflt:"top",editType:"arraydraw"},xref:{valType:"enumerated",values:["paper",m.idRegex.x.toString()],dflt:"paper",editType:"arraydraw"},yref:{valType:"enumerated",values:["paper",m.idRegex.y.toString()],dflt:"paper",editType:"arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../plot_api/plot_template":543,"../../plots/cartesian/constants":561}],412:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../lib/to_log_range");oe.exports=function(T,b,e,o){b=b||{};var a="log"===e&&"linear"===b.type;if(a||"linear"===e&&"log"===b.type)for(var i,d,u=T._fullLayout.images,s=b._id.charAt(0),c=0;c<u.length;c++)if(d="images["+c+"].",(i=u[c])[s+"ref"]===b._id){var h=i[s],p=i["size"+s],v=null,g=null;if(a){v=x(h,b.range);var f=p/Math.pow(10,v)/2;g=2*Math.log(f+Math.sqrt(1+f*f))/Math.LN10}else g=(v=Math.pow(10,h))*(Math.pow(10,p/2)-Math.pow(10,-p/2));m(v)?m(g)||(g=null):(v=null,g=null),o(d+s,v),o(d+"size"+s,g)}}},{"../../lib/to_log_range":531,"fast-isnumeric":190}],413:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../../plots/array_container_defaults"),b=_("./attributes");function e(o,a,l){function i(v,g){return m.coerce(o,a,b,v,g)}var d=i("source");if(!i("visible",!!d))return a;i("layer"),i("xanchor"),i("yanchor"),i("sizex"),i("sizey"),i("sizing"),i("opacity");for(var u={_fullLayout:l},s=["x","y"],c=0;c<2;c++){var h=s[c],p=x.coerceRef(o,a,u,h,"paper",void 0);"paper"!==p&&x.getFromId(u,p)._imgIndices.push(a._index),x.coercePosition(a,u,i,p,h,0)}return a}oe.exports=function(o,a){T(o,a,{name:"images",handleItemDefaults:e})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":411}],414:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../drawing"),T=_("../../plots/cartesian/axes"),b=_("../../plots/cartesian/axis_ids"),e=_("../../constants/xmlns_namespaces");oe.exports=function(o){var a,l,i=o._fullLayout,d=[],u={},s=[];for(l=0;l<i.images.length;l++){var c=i.images[l];if(c.visible)if("below"===c.layer&&"paper"!==c.xref&&"paper"!==c.yref){a=b.ref2id(c.xref)+b.ref2id(c.yref);var h=i._plots[a];if(!h){s.push(c);continue}h.mainplot&&(a=h.mainplot.id),u[a]||(u[a]=[]),u[a].push(c)}else"above"===c.layer?d.push(c):s.push(c)}var p={left:{sizing:"xMin",offset:0},center:{sizing:"xMid",offset:-.5},right:{sizing:"xMax",offset:-1}},v={top:{sizing:"YMin",offset:0},middle:{sizing:"YMid",offset:-.5},bottom:{sizing:"YMax",offset:-1}};function g(C){var P=m.select(this);if(this._imgSrc!==C.source)if(P.attr("xmlns",e.svg),C.source&&"data:"===C.source.slice(0,5))P.attr("xlink:href",C.source),this._imgSrc=C.source;else{var D=new Promise(function(F){var R=new Image;function L(){P.remove(),F()}this.img=R,R.setAttribute("crossOrigin","anonymous"),R.onerror=L,R.onload=function(){var I=document.createElement("canvas");I.width=this.width,I.height=this.height,I.getContext("2d").drawImage(this,0,0);var B=I.toDataURL("image/png");P.attr("xlink:href",B),F()},P.on("error",L),R.src=C.source,this._imgSrc=C.source}.bind(this));o._promises.push(D)}}function f(C){var P,D,F=m.select(this),R=T.getFromId(o,C.xref),L=T.getFromId(o,C.yref),I="domain"===T.getRefType(C.xref),B="domain"===T.getRefType(C.yref),V=i._size;P=void 0!==R?"string"==typeof C.xref&&I?R._length*C.sizex:Math.abs(R.l2p(C.sizex)-R.l2p(0)):C.sizex*V.w,D=void 0!==L?"string"==typeof C.yref&&B?L._length*C.sizey:Math.abs(L.l2p(C.sizey)-L.l2p(0)):C.sizey*V.h;var Z,Y,ee=P*p[C.xanchor].offset,J=D*v[C.yanchor].offset,$=p[C.xanchor].sizing+v[C.yanchor].sizing;switch(Z=void 0!==R?"string"==typeof C.xref&&I?R._length*C.x+R._offset:R.r2p(C.x)+R._offset:C.x*V.w+V.l,Z+=ee,Y=void 0!==L?"string"==typeof C.yref&&B?L._length*(1-C.y)+L._offset:L.r2p(C.y)+L._offset:V.h-C.y*V.h+V.t,Y+=J,C.sizing){case"fill":$+=" slice";break;case"stretch":$="none"}F.attr({x:Z,y:Y,width:P,height:D,preserveAspectRatio:$,opacity:C.opacity});var Q=(R&&"domain"!==T.getRefType(C.xref)?R._id:"")+(L&&"domain"!==T.getRefType(C.yref)?L._id:"");x.setClipUrl(F,Q?"clip"+i._uid+Q:null,o)}var w=i._imageLowerLayer.selectAll("image").data(s),y=i._imageUpperLayer.selectAll("image").data(d);w.enter().append("image"),y.enter().append("image"),w.exit().remove(),y.exit().remove(),w.each(function(C){g.bind(this)(C),f.bind(this)(C)}),y.each(function(C){g.bind(this)(C),f.bind(this)(C)});var M=Object.keys(i._plots);for(l=0;l<M.length;l++){var A=i._plots[a=M[l]];if(A.imagelayer){var k=A.imagelayer.selectAll("image").data(u[a]||[]);k.enter().append("image"),k.exit().remove(),k.each(function(C){g.bind(this)(C),f.bind(this)(C)})}}}},{"../../constants/xmlns_namespaces":480,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../drawing":388,"@plotly/d3":58}],415:[function(_,oe,ae){"use strict";oe.exports={moduleType:"component",name:"images",layoutAttributes:_("./attributes"),supplyLayoutDefaults:_("./defaults"),includeBasePlot:_("../../plots/cartesian/include_components")("images"),draw:_("./draw"),convertCoords:_("./convert_coords")}},{"../../plots/cartesian/include_components":567,"./attributes":411,"./convert_coords":412,"./defaults":413,"./draw":414}],416:[function(_,oe,ae){"use strict";var m=_("../../plots/font_attributes"),x=_("../color/attributes");oe.exports={bgcolor:{valType:"color",editType:"legend"},bordercolor:{valType:"color",dflt:x.defaultLine,editType:"legend"},borderwidth:{valType:"number",min:0,dflt:0,editType:"legend"},font:m({editType:"legend"}),grouptitlefont:m({editType:"legend"}),orientation:{valType:"enumerated",values:["v","h"],dflt:"v",editType:"legend"},traceorder:{valType:"flaglist",flags:["reversed","grouped"],extras:["normal"],editType:"legend"},tracegroupgap:{valType:"number",min:0,dflt:10,editType:"legend"},itemsizing:{valType:"enumerated",values:["trace","constant"],dflt:"trace",editType:"legend"},itemwidth:{valType:"number",min:30,dflt:30,editType:"legend"},itemclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggle",editType:"legend"},itemdoubleclick:{valType:"enumerated",values:["toggle","toggleothers",!1],dflt:"toggleothers",editType:"legend"},groupclick:{valType:"enumerated",values:["toggleitem","togglegroup"],dflt:"togglegroup",editType:"legend"},x:{valType:"number",min:-2,max:3,editType:"legend"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"legend"},y:{valType:"number",min:-2,max:3,editType:"legend"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],editType:"legend"},uirevision:{valType:"any",editType:"none"},valign:{valType:"enumerated",values:["top","middle","bottom"],dflt:"middle",editType:"legend"},title:{text:{valType:"string",dflt:"",editType:"legend"},font:m({editType:"legend"}),side:{valType:"enumerated",values:["top","left","top left"],editType:"legend"},editType:"legend"},editType:"legend"}},{"../../plots/font_attributes":585,"../color/attributes":365}],417:[function(_,oe,ae){"use strict";oe.exports={scrollBarWidth:6,scrollBarMinHeight:20,scrollBarColor:"#808BA4",scrollBarMargin:4,scrollBarEnterAttrs:{rx:20,ry:3,width:0,height:0},titlePad:2,itemGap:5}},{}],418:[function(_,oe,ae){"use strict";var m=_("../../registry"),x=_("../../lib"),T=_("../../plot_api/plot_template"),b=_("../../plots/attributes"),e=_("./attributes"),o=_("../../plots/layout_attributes"),a=_("./helpers");oe.exports=function(l,i,d){var u,s=l.legend||{},c=T.newContainer(i,"legend");function h(L,I){return x.coerce(s,c,e,L,I)}for(var p=function(L,I){return x.coerce(u._input,u,b,L,I)},v=i.font||{},g=x.coerceFont(h,"grouptitlefont",x.extendFlat({},v,{size:Math.round(1.1*v.size)})),f=0,w=!1,y="normal",M=0;M<d.length;M++)(u=d[M]).visible&&((u.showlegend||u._dfltShowLegend&&!(u._module&&u._module.attributes&&u._module.attributes.showlegend&&!1===u._module.attributes.showlegend.dflt))&&(f++,u.showlegend&&(w=!0,(m.traceIs(u,"pie-like")||!0===u._input.showlegend)&&f++),x.coerceFont(p,"legendgrouptitle.font",g)),(m.traceIs(u,"bar")&&"stack"===i.barmode||-1!==["tonextx","tonexty"].indexOf(u.fill))&&(y=a.isGrouped({traceorder:y})?"grouped+reversed":"reversed"),void 0!==u.legendgroup&&""!==u.legendgroup&&(y=a.isReversed({traceorder:y})?"reversed+grouped":"grouped"));var A=x.coerce(l,i,o,"showlegend",w&&f>1);if(!1===A&&(i.legend=void 0),(!1!==A||s.uirevision)&&(h("uirevision",i.uirevision),!1!==A)){h("bgcolor",i.paper_bgcolor),h("bordercolor"),h("borderwidth");var k,C,P,D=x.coerceFont(h,"font",i.font),F="h"===h("orientation");if(F?(k=0,m.getComponentMethod("rangeslider","isVisible")(l.xaxis)?(C=1.1,P="bottom"):(C=-.1,P="top")):(k=1.02,C=1,P="auto"),h("traceorder",y),a.isGrouped(i.legend)&&h("tracegroupgap"),h("itemsizing"),h("itemwidth"),h("itemclick"),h("itemdoubleclick"),h("groupclick"),h("x",k),h("xanchor"),h("y",C),h("yanchor",P),h("valign"),x.noneOrAll(s,c,["x","y"]),h("title.text")){h("title.side",F?"left":"top");var R=x.extendFlat({},D,{size:x.bigFont(D.size)});x.coerceFont(h,"title.font",R)}}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/layout_attributes":610,"../../registry":638,"./attributes":416,"./helpers":422}],419:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../lib"),T=_("../../plots/plots"),b=_("../../registry"),e=_("../../lib/events"),o=_("../dragelement"),a=_("../drawing"),l=_("../color"),i=_("../../lib/svg_text_utils"),d=_("./handle_click"),u=_("./constants"),s=_("../../constants/alignment"),c=s.LINE_SPACING,h=s.FROM_TL,p=s.FROM_BR,v=_("./get_legend_data"),g=_("./style"),f=_("./helpers");function w(D,F,R,L,I){var B=R.data()[0][0].trace,V={event:I,node:R.node(),curveNumber:B.index,expandedIndex:B._expandedIndex,data:D.data,layout:D.layout,frames:D._transitionData._frames,config:D._context,fullData:D._fullData,fullLayout:D._fullLayout};B._group&&(V.group=B._group),b.traceIs(B,"pie-like")&&(V.label=R.datum()[0].label),!1!==e.triggerHandler(D,"plotly_legendclick",V)&&(1===L?F._clickTimeout=setTimeout(function(){D._fullLayout&&d(R,D,L)},D._context.doubleClickDelay):2===L&&(F._clickTimeout&&clearTimeout(F._clickTimeout),D._legendMouseDownTime=0,!1!==e.triggerHandler(D,"plotly_legenddoubleclick",V)&&d(R,D,L)))}function y(D,F,R){var L,I,B=D.data()[0][0],V=B.trace,Z=b.traceIs(V,"pie-like"),Y=!R._inHover&&F._context.edits.legendText&&!Z,ee=R._maxNameLength;B.groupTitle?(L=B.groupTitle.text,I=B.groupTitle.font):(I=R.font,R.entries?L=B.text:(L=Z?B.label:V.name,V._meta&&(L=x.templateString(L,V._meta))));var J=x.ensureSingle(D,"text","legendtext");J.attr("text-anchor","start").call(a.font,I).text(Y?M(L,ee):L),i.positionText(J,R.itemwidth+2*u.itemGap,0),Y?J.call(i.makeEditable,{gd:F,text:L}).call(k,D,F,R).on("edit",function(Q){this.text(M(Q,ee)).call(k,D,F,R);var se=B.trace._fullInput||{},j={};if(b.hasTransform(se,"groupby")){var G=b.getTransformIndices(se,"groupby"),ie=x.keyedContainer(se,"transforms["+G[G.length-1]+"].styles","target","value.name");ie.set(B.trace._group,Q),j=ie.constructUpdate()}else j.name=Q;return b.call("_guiRestyle",F,j,V.index)}):k(J,D,F,R)}function M(D,F){var R=Math.max(4,F);if(D&&D.trim().length>=R/2)return D;for(var L=R-(D=D||"").length;L>0;L--)D+=" ";return D}function A(D,F){var R,L=F._context.doubleClickDelay,I=1,B=x.ensureSingle(D,"rect","legendtoggle",function(V){F._context.staticPlot||V.style("cursor","pointer").attr("pointer-events","all"),V.call(l.fill,"rgba(0,0,0,0)")});F._context.staticPlot||(B.on("mousedown",function(){(R=(new Date).getTime())-F._legendMouseDownTime<L?I+=1:(I=1,F._legendMouseDownTime=R)}),B.on("mouseup",function(){if(!F._dragged&&!F._editing){var V=F._fullLayout.legend;(new Date).getTime()-F._legendMouseDownTime>L&&(I=Math.max(I-1,1)),w(F,V,D,I,m.event)}}))}function k(D,F,R,L,I){L._inHover&&D.attr("data-notex",!0),i.convertToTspans(D,R,function(){!function(B,V,Z,Y){var ee=B.data()[0][0];if(Z._inHover||!ee||ee.trace.showlegend){var J=B.select("g[class*=math-group]"),$=J.node();Z||(Z=V._fullLayout.legend);var j,G,se=Z.borderwidth,W=(1===Y?Z.title.font:ee.groupTitle?ee.groupTitle.font:Z.font).size*c;if($){var ie=a.bBox($);j=ie.height,G=ie.width,1===Y?a.setTranslate(J,se,se+.75*j):a.setTranslate(J,0,.25*j)}else{var q=B.select(1===Y?".legendtitletext":".legendtext"),te=i.lineCount(q),ne=q.node();if(j=W*te,G=ne?a.bBox(ne).width:0,1===Y)"left"===Z.title.side&&(G+=2*u.itemGap),i.positionText(q,se+u.titlePad,se+W);else{var le=2*u.itemGap+Z.itemwidth;ee.groupTitle&&(le=u.itemGap,G-=Z.itemwidth),i.positionText(q,le,-W*((te-1)/2-.3))}}1===Y?(Z._titleWidth=G,Z._titleHeight=j):(ee.lineHeight=W,ee.height=Math.max(j,16)+3,ee.width=G)}else B.remove()}(F,R,L,I)})}function C(D){return x.isRightAnchor(D)?"right":x.isCenterAnchor(D)?"center":"left"}function P(D){return x.isBottomAnchor(D)?"bottom":x.isMiddleAnchor(D)?"middle":"top"}oe.exports=function(D,F){return F||(F=D._fullLayout.legend||{}),function(R,L){var I,B,V=R._fullLayout,Z="legend"+V._uid,Y=L._inHover;if(Y?(I=L.layer,Z+="-hover"):I=V._infolayer,I){if(R._legendMouseDownTime||(R._legendMouseDownTime=0),Y){if(!L.entries)return;B=v(L.entries,L)}else{if(!R.calcdata)return;B=V.showlegend&&v(R.calcdata,L)}var ee=V.hiddenlabels||[];if(!(Y||V.showlegend&&B.length))return I.selectAll(".legend").remove(),V._topdefs.select("#"+Z).remove(),T.autoMargin(R,"legend");var J=x.ensureSingle(I,"g","legend",function(te){Y||te.attr("pointer-events","all")}),$=x.ensureSingleById(V._topdefs,"clipPath",Z,function(te){te.append("rect")}),Q=x.ensureSingle(J,"rect","bg",function(te){te.attr("shape-rendering","crispEdges")});Q.call(l.stroke,L.bordercolor).call(l.fill,L.bgcolor).style("stroke-width",L.borderwidth+"px");var se=x.ensureSingle(J,"g","scrollbox"),j=L.title;if(L._titleWidth=0,L._titleHeight=0,j.text){var G=x.ensureSingle(se,"text","legendtitletext");G.attr("text-anchor","start").call(a.font,j.font).text(j.text),k(G,se,R,L,1)}else se.selectAll(".legendtitletext").remove();var W=x.ensureSingle(J,"rect","scrollbar",function(te){te.attr(u.scrollBarEnterAttrs).call(l.fill,u.scrollBarColor)}),ie=se.selectAll("g.groups").data(B);ie.enter().append("g").attr("class","groups"),ie.exit().remove();var q=ie.selectAll("g.traces").data(x.identity);q.enter().append("g").attr("class","traces"),q.exit().remove(),q.style("opacity",function(te){var ne=te[0].trace;return b.traceIs(ne,"pie-like")?-1!==ee.indexOf(te[0].label)?.5:1:"legendonly"===ne.visible?.5:1}).each(function(){m.select(this).call(y,R,L)}).call(g,R,L).each(function(){Y||m.select(this).call(A,R)}),x.syncOrAsync([T.previousPromises,function(){return function(te,ne,le,ue){var de=te._fullLayout;ue||(ue=de.legend);var he=de._size,be=f.isVertical(ue),ge=f.isGrouped(ue),we=ue.borderwidth,Ce=2*we,De=u.itemGap,Se=ue.itemwidth+2*De,Fe=2*(we+De),ve=P(ue),Te=ue.y<0||0===ue.y&&"top"===ve,Le=ue.y>1||1===ue.y&&"bottom"===ve,Ee=ue.tracegroupgap;ue._maxHeight=Math.max(Te||Le?de.height/2:he.h,30);var Pe=0;ue._width=0,ue._height=0;var qe,it,Ie,ze,je=(it=0,Ie=0,(ze=(qe=ue).title.side)&&(-1!==ze.indexOf("left")&&(it=qe._titleWidth),-1!==ze.indexOf("top")&&(Ie=qe._titleHeight)),[it,Ie]);if(be)le.each(function(qe){var it=qe[0].height;a.setTranslate(this,we+je[0],we+je[1]+ue._height+it/2+De),ue._height+=it,ue._width=Math.max(ue._width,qe[0].width)}),Pe=Se+ue._width,ue._width+=De+Se+Ce,ue._height+=Fe,ge&&(ne.each(function(qe,it){a.setTranslate(this,0,it*ue.tracegroupgap)}),ue._height+=(ue._lgroupsLength-1)*ue.tracegroupgap);else{var Ge=C(ue),Ue=Le||Te,$e=de.width/2;ue._maxWidth=Math.max(ue.x<0||0===ue.x&&"right"===Ge?Ue&&"left"===Ge?he.l+he.w:$e:ue.x>1||1===ue.x&&"left"===Ge?Ue&&"right"===Ge?he.r+he.w:$e:he.w,2*Se);var et=0,tt=0;le.each(function(qe){var it=qe[0].width+Se;et=Math.max(et,it),tt+=it}),Pe=null;var ct=0;if(ge){var xt=0,Ct=0,Ht=0;ne.each(function(){var qe=0,it=0;m.select(this).selectAll("g.traces").each(function(ze){var Ve=ze[0].width,Be=ze[0].height;a.setTranslate(this,je[0],je[1]+we+De+Be/2+it),it+=Be,qe=Math.max(qe,Se+Ve)});var Ie=qe+De;Ct>0&&Ie+we+Ct>ue._maxWidth?(ct=Math.max(ct,Ct),Ct=0,Ht+=xt+Ee,xt=it):xt=Math.max(xt,it),a.setTranslate(this,Ct,Ht),Ct+=Ie}),ue._width=Math.max(ct,Ct)+we,ue._height=Ht+xt+Fe}else{var zt=le.size(),ht=tt+Ce+(zt-1)*De<ue._maxWidth,ut=0,Ot=0,tn=0,un=0;le.each(function(qe){var it=qe[0].height,Ie=Se+qe[0].width,ze=(ht?Ie:et)+De;ze+we+Ot-De>=ue._maxWidth&&(ct=Math.max(ct,un),Ot=0,tn+=ut,ue._height+=ut,ut=0),a.setTranslate(this,je[0]+we+Ot,je[1]+we+tn+it/2+De),un=Ot+Ie+De,Ot+=ze,ut=Math.max(ut,it)}),ht?(ue._width=Ot+Ce,ue._height=ut+Fe):(ue._width=Math.max(ct,un)+Ce,ue._height+=ut+Fe)}}ue._width=Math.ceil(Math.max(ue._width+je[0],ue._titleWidth+2*(we+u.titlePad))),ue._height=Math.ceil(Math.max(ue._height+je[1],ue._titleHeight+2*(we+u.itemGap))),ue._effHeight=Math.min(ue._height,ue._maxHeight);var Ze=te._context.edits,Qe=Ze.legendText||Ze.legendPosition;le.each(function(qe){var it=m.select(this).select(".legendtoggle"),Ie=qe[0].height,ze=Qe?Se:Pe||Se+qe[0].width;be||(ze+=De/2),a.setRect(it,0,-Ie/2,ze,Ie)})}(R,ie,q,L)},function(){var te,ne,le,ue,Ue,$e,et,tt,de=V._size,he=L.borderwidth;if(!Y){if(et=C($e=(Ue=R)._fullLayout.legend),tt=P($e),T.autoMargin(Ue,"legend",{x:$e.x,y:$e.y,l:$e._width*h[et],r:$e._width*p[et],b:$e._effHeight*p[tt],t:$e._effHeight*h[tt]}))return;var be=de.l+de.w*L.x-h[C(L)]*L._width,ge=de.t+de.h*(1-L.y)-h[P(L)]*L._effHeight;if(V.margin.autoexpand){var we=be,Ce=ge;be=x.constrain(be,0,V.width-L._width),ge=x.constrain(ge,0,V.height-L._effHeight),be!==we&&x.log("Constrain legend.x to make legend fit inside graph"),ge!==Ce&&x.log("Constrain legend.y to make legend fit inside graph")}a.setTranslate(J,be,ge)}if(W.on(".drag",null),J.on("wheel",null),Y||L._height<=L._maxHeight||R._context.staticPlot){var De=L._effHeight;Y&&(De=L._height),Q.attr({width:L._width-he,height:De-he,x:he/2,y:he/2}),a.setTranslate(se,0,0),$.select("rect").attr({width:L._width-2*he,height:De-2*he,x:he,y:he}),a.setClipUrl(se,Z,R),a.setRect(W,0,0,0,0),delete L._scrollY}else{var Se,ve,Te=Math.max(u.scrollBarMinHeight,L._effHeight*L._effHeight/L._height),Le=L._effHeight-Te-2*u.scrollBarMargin,Ee=L._height-L._effHeight,Pe=Le/Ee,je=Math.min(L._scrollY||0,Ee);Q.attr({width:L._width-2*he+u.scrollBarWidth+u.scrollBarMargin,height:L._effHeight-he,x:he/2,y:he/2}),$.select("rect").attr({width:L._width-2*he+u.scrollBarWidth+u.scrollBarMargin,height:L._effHeight-2*he,x:he,y:he+je}),a.setClipUrl(se,Z,R),lt(je,Te,Pe),J.on("wheel",function(){lt(je=x.constrain(L._scrollY+m.event.deltaY/Le*Ee,0,Ee),Te,Pe),0!==je&&je!==Ee&&m.event.preventDefault()});var Ge=m.behavior.drag().on("dragstart",function(){var Ue=m.event.sourceEvent;Se="touchstart"===Ue.type?Ue.changedTouches[0].clientY:Ue.clientY,ve=je}).on("drag",function(){var Ue=m.event.sourceEvent;2===Ue.buttons||Ue.ctrlKey||lt(je=function($e,et,tt){return x.constrain((tt-et)/Pe+$e,0,Ee)}(ve,Se,"touchmove"===Ue.type?Ue.changedTouches[0].clientY:Ue.clientY),Te,Pe)});W.call(Ge);var Ke=m.behavior.drag().on("dragstart",function(){var Ue=m.event.sourceEvent;"touchstart"===Ue.type&&(Se=Ue.changedTouches[0].clientY,ve=je)}).on("drag",function(){var Ue=m.event.sourceEvent;"touchmove"===Ue.type&&lt(je=function($e,et,tt){return x.constrain((et-tt)/Pe+$e,0,Ee)}(ve,Se,Ue.changedTouches[0].clientY),Te,Pe)});se.call(Ke)}function lt(Ue,$e,et){L._scrollY=R._fullLayout.legend._scrollY=Ue,a.setTranslate(se,0,-Ue),a.setRect(W,L._width,u.scrollBarMargin+Ue*et,u.scrollBarWidth,$e),$.select("rect").attr("y",he+Ue)}R._context.edits.legendPosition&&(J.classed("cursor-move",!0),o.init({element:J.node(),gd:R,prepFn:function(){var Ue=a.getTranslate(J);le=Ue.x,ue=Ue.y},moveFn:function(Ue,$e){var et=le+Ue,tt=ue+$e;a.setTranslate(J,et,tt),te=o.align(et,0,de.l,de.l+de.w,L.xanchor),ne=o.align(tt,0,de.t+de.h,de.t,L.yanchor)},doneFn:function(){void 0!==te&&void 0!==ne&&b.call("_guiRelayout",R,{"legend.x":te,"legend.y":ne})},clickFn:function(Ue,$e){var et=I.selectAll("g.traces").filter(function(){var tt=this.getBoundingClientRect();return $e.clientX>=tt.left&&$e.clientX<=tt.right&&$e.clientY>=tt.top&&$e.clientY<=tt.bottom});et.size()>0&&w(R,J,et,Ue,$e)}}))}],R)}}(D,F)}},{"../../constants/alignment":471,"../../lib":503,"../../lib/events":492,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":417,"./get_legend_data":420,"./handle_click":421,"./helpers":422,"./style":424,"@plotly/d3":58}],420:[function(_,oe,ae){"use strict";var m=_("../../registry"),x=_("./helpers");oe.exports=function(T,b){var e,o,a=b._inHover,l=x.isGrouped(b),i=x.isReversed(b),d={},u=[],s=!1,c={},h=0,p=0;function v(V,Z){if(""!==V&&x.isGrouped(b))-1===u.indexOf(V)?(u.push(V),s=!0,d[V]=[Z]):d[V].push(Z);else{var Y="~~i"+h;u.push(Y),d[Y]=[Z],h++}}for(e=0;e<T.length;e++){var g=T[e],f=g[0],w=f.trace,y=w.legendgroup;if(a||w.visible&&w.showlegend)if(m.traceIs(w,"pie-like"))for(c[y]||(c[y]={}),o=0;o<g.length;o++){var M=g[o].label;c[y][M]||(v(y,{label:M,color:g[o].color,i:g[o].i,trace:w,pts:g[o].pts}),c[y][M]=!0,p=Math.max(p,(M||"").length))}else v(y,f),p=Math.max(p,(w.name||"").length)}if(!u.length)return[];var A=!s||!l,k=[];for(e=0;e<u.length;e++){var C=d[u[e]];k.push(A?C[0]:C)}for(A&&(k=[k]),e=0;e<k.length;e++){var P=1/0;for(o=0;o<k[e].length;o++){var D=k[e][o].trace.legendrank;P>D&&(P=D)}k[e][0]._groupMinRank=P,k[e][0]._preGroupSort=e}var F=function(V,Z){return V.trace.legendrank-Z.trace.legendrank||V._preSort-Z._preSort};for(k.forEach(function(V,Z){V[0]._preGroupSort=Z}),k.sort(function(V,Z){return V[0]._groupMinRank-Z[0]._groupMinRank||V[0]._preGroupSort-Z[0]._preGroupSort}),e=0;e<k.length;e++){k[e].forEach(function(V,Z){V._preSort=Z}),k[e].sort(F);var R=k[e][0].trace,L=null;for(o=0;o<k[e].length;o++){var I=k[e][o].trace.legendgrouptitle;if(I&&I.text){L=I,a&&(I.font=b._groupTitleFont);break}}if(i&&k[e].reverse(),L){var B=!1;for(o=0;o<k[e].length;o++)if(m.traceIs(k[e][o].trace,"pie-like")){B=!0;break}k[e].unshift({i:-1,groupTitle:L,noClick:B,trace:{showlegend:R.showlegend,legendgroup:R.legendgroup,visible:"toggleitem"===b.groupclick||R.visible}})}for(o=0;o<k[e].length;o++)k[e][o]=[k[e][o]]}return b._lgroupsLength=k.length,b._maxNameLength=p,k}},{"../../registry":638,"./helpers":422}],421:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../registry"),T=!0;oe.exports=function(b,e,o){var a=e._fullLayout;if(!e._dragged&&!e._editing){var l,i=a.legend.itemclick,d=a.legend.itemdoubleclick,u=a.legend.groupclick;if(1===o&&"toggle"===i&&"toggleothers"===d&&T&&e.data&&e._context.showTips&&m.notifier(m._(e,"Double-click on legend to isolate one trace"),"long"),T=!1,1===o?l=i:2===o&&(l=d),l){var s="togglegroup"===u,c=a.hiddenlabels?a.hiddenlabels.slice():[],h=b.data()[0][0];if(!h.groupTitle||!h.noClick){var p,v,g,f,w,y=e._fullData,M=h.trace,A=M.legendgroup,k={},C=[],P=[],D=[];if(x.traceIs(M,"pie-like")){var F=h.label,R=c.indexOf(F);"toggle"===l?-1===R?c.push(F):c.splice(R,1):"toggleothers"===l&&(c=[],e.calcdata[0].forEach(function(W){F!==W.label&&c.push(W.label)}),e._fullLayout.hiddenlabels&&e._fullLayout.hiddenlabels.length===c.length&&-1===R&&(c=[])),x.call("_guiRelayout",e,"hiddenlabels",c)}else{var L,I=A&&A.length,B=[];if(I)for(p=0;p<y.length;p++)(L=y[p]).visible&&L.legendgroup===A&&B.push(p);if("toggle"===l){var V;switch(M.visible){case!0:V="legendonly";break;case!1:V=!1;break;case"legendonly":V=!0}if(I)if(s)for(p=0;p<y.length;p++)!1!==y[p].visible&&y[p].legendgroup===A&&G(y[p],V);else G(M,V);else G(M,V)}else if("toggleothers"===l){var ee,$=!0;for(p=0;p<y.length;p++)if(ee=!0!==y[p].showlegend,!(y[p]===M||ee||I&&y[p].legendgroup===A||!0!==y[p].visible||x.traceIs(y[p],"notLegendIsolatable"))){$=!1;break}for(p=0;p<y.length;p++)if(!1!==y[p].visible&&!x.traceIs(y[p],"notLegendIsolatable"))switch(M.visible){case"legendonly":G(y[p],!0);break;case!0:ee=!0!==y[p].showlegend&&!y[p].legendgroup,G(y[p],!!(y[p]===M||I&&y[p].legendgroup===A||ee)||!!$||"legendonly")}}for(p=0;p<P.length;p++)if(g=P[p]){var Q=g.constructUpdate(),se=Object.keys(Q);for(v=0;v<se.length;v++)(k[f=se[v]]=k[f]||[])[D[p]]=Q[f]}for(w=Object.keys(k),p=0;p<w.length;p++)for(f=w[p],v=0;v<C.length;v++)k[f].hasOwnProperty(v)||(k[f][v]=void 0);x.call("_guiRestyle",e,k,C)}}}}function j(W,ie,q){var te=C.indexOf(W),ne=k[ie];return ne||(ne=k[ie]=[]),-1===C.indexOf(W)&&(C.push(W),te=C.length-1),ne[te]=q,te}function G(W,ie){if(!h.groupTitle||s){var q=W._fullInput;if(x.hasTransform(q,"groupby")){var te=P[q.index];if(!te){var ne=x.getTransformIndices(q,"groupby");te=m.keyedContainer(q,"transforms["+ne[ne.length-1]+"].styles","target","value.visible"),P[q.index]=te}var ue=te.get(W._group);void 0===ue&&(ue=!0),!1!==ue&&te.set(W._group,ie),D[q.index]=j(q.index,"visible",!1!==q.visible)}else j(q.index,"visible",!1!==q.visible&&ie)}}}},{"../../lib":503,"../../registry":638}],422:[function(_,oe,ae){"use strict";ae.isGrouped=function(m){return-1!==(m.traceorder||"").indexOf("grouped")},ae.isVertical=function(m){return"h"!==m.orientation},ae.isReversed=function(m){return-1!==(m.traceorder||"").indexOf("reversed")}},{}],423:[function(_,oe,ae){"use strict";oe.exports={moduleType:"component",name:"legend",layoutAttributes:_("./attributes"),supplyLayoutDefaults:_("./defaults"),draw:_("./draw"),style:_("./style")}},{"./attributes":416,"./defaults":418,"./draw":419,"./style":424}],424:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../registry"),T=_("../../lib"),b=T.strTranslate,e=_("../drawing"),o=_("../color"),a=_("../colorscale/helpers").extractOpts,l=_("../../traces/scatter/subtypes"),i=_("../../traces/pie/style_one"),d=_("../../traces/pie/helpers").castOption,u=_("./constants");function s(p,v){return(v?"radial":"horizontal")+(p?"":"reversed")}function c(p){var v=p[0].trace,g=v.contours,f=l.hasLines(v),w=l.hasMarkers(v),y=v.visible&&v.fill&&"none"!==v.fill,M=!1,A=!1;if(g){var k=g.coloring;"lines"===k?M=!0:f="none"===k||"heatmap"===k||g.showlines,"constraint"===g.type?y="="!==g._operation:"fill"!==k&&"heatmap"!==k||(A=!0)}return{showMarker:w,showLine:f,showFill:y,showGradientLine:M,showGradientFill:A,anyLine:f||M,anyFill:y||A}}function h(p,v,g){return p&&T.isArrayOrTypedArray(p)?v:p>g?g:p}oe.exports=function(p,v,g){g||(g=v._fullLayout.legend);var w="constant"===g.itemsizing,y=g.itemwidth,A=b((y+2*u.itemGap)/2,0),k=function(D,F,R,L){var I;if(D+1)I=D;else{if(!(F&&F.width>0))return 0;I=F.width}return w?L:Math.min(I,R)};function C(D,F,R){var L=D[0].trace,I=L.marker||{},B=I.line||{},V=R?L.visible&&L.type===R:x.traceIs(L,"bar"),Z=m.select(F).select("g.legendpoints").selectAll("path.legend"+R).data(V?[D]:[]);Z.enter().append("path").classed("legend"+R,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",A),Z.exit().remove(),Z.each(function(Y){var ee=m.select(this),J=Y[0],$=k(J.mlw,I.line,5,2);ee.style("stroke-width",$+"px");var Q=J.mcc;if(!g._inHover&&"mc"in J){var se=a(I),j=se.mid;void 0===j&&(j=(se.max+se.min)/2),Q=e.tryColorscale(I,"")(j)}var G=Q||J.mc||I.color,W=I.pattern,ie=W&&e.getPatternAttr(W.shape,0,"");if(ie){var q=e.getPatternAttr(W.bgcolor,0,null),te=e.getPatternAttr(W.fgcolor,0,null),ne=W.fgopacity,le=h(W.size,8,10),ue=h(W.solidity,.5,1);ee.call(e.pattern,"legend",v,"legend-"+L.uid,ie,le,ue,Q,W.fillmode,q,te,ne)}else ee.call(o.fill,G);$&&o.stroke(ee,J.mlc||B.color)})}function P(D,F,R){var L=D[0],I=L.trace,B=R?I.visible&&I.type===R:x.traceIs(I,R),V=m.select(F).select("g.legendpoints").selectAll("path.legend"+R).data(B?[D]:[]);if(V.enter().append("path").classed("legend"+R,!0).attr("d","M6,6H-6V-6H6Z").attr("transform",A),V.exit().remove(),V.size()){var Z=(I.marker||{}).line,Y=k(d(Z.width,L.pts),Z,5,2),ee=T.minExtend(I,{marker:{line:{width:Y}}});ee.marker.line.color=Z.color;var J=T.minExtend(L,{trace:ee});i(V,J,ee)}}p.each(function(D){var F=m.select(this),R=T.ensureSingle(F,"g","layers");R.style("opacity",D[0].trace.opacity);var L=g.valign,I=D[0].lineHeight,B=D[0].height;R.attr("transform","middle"!==L&&I&&B?b(0,{top:1,bottom:-1}[L]*(.5*(I-B+3))):null),R.selectAll("g.legendfill").data([D]).enter().append("g").classed("legendfill",!0),R.selectAll("g.legendlines").data([D]).enter().append("g").classed("legendlines",!0);var Z=R.selectAll("g.legendsymbols").data([D]);Z.enter().append("g").classed("legendsymbols",!0),Z.selectAll("g.legendpoints").data([D]).enter().append("g").classed("legendpoints",!0)}).each(function(D){var F,R=D[0].trace,L=[];if(R.visible)switch(R.type){case"histogram2d":case"heatmap":L=[["M-15,-2V4H15V-2Z"]],F=!0;break;case"choropleth":case"choroplethmapbox":L=[["M-6,-6V6H6V-6Z"]],F=!0;break;case"densitymapbox":L=[["M-6,0 a6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"]],F="radial";break;case"cone":L=[["M-6,2 A2,2 0 0,0 -6,6 V6L6,4Z"],["M-6,-6 A2,2 0 0,0 -6,-2 L6,-4Z"],["M-6,-2 A2,2 0 0,0 -6,2 L6,0Z"]],F=!1;break;case"streamtube":L=[["M-6,2 A2,2 0 0,0 -6,6 H6 A2,2 0 0,1 6,2 Z"],["M-6,-6 A2,2 0 0,0 -6,-2 H6 A2,2 0 0,1 6,-6 Z"],["M-6,-2 A2,2 0 0,0 -6,2 H6 A2,2 0 0,1 6,-2 Z"]],F=!1;break;case"surface":L=[["M-6,-6 A2,3 0 0,0 -6,0 H6 A2,3 0 0,1 6,-6 Z"],["M-6,1 A2,3 0 0,1 -6,6 H6 A2,3 0 0,0 6,0 Z"]],F=!0;break;case"mesh3d":L=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],F=!1;break;case"volume":L=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6H6L0,6Z"]],F=!0;break;case"isosurface":L=[["M-6,6H0L-6,-6Z"],["M6,6H0L6,-6Z"],["M-6,-6 A12,24 0 0,0 6,-6 L0,6Z"]],F=!1}var I=m.select(this).select("g.legendpoints").selectAll("path.legend3dandfriends").data(L);I.enter().append("path").classed("legend3dandfriends",!0).attr("transform",A).style("stroke-miterlimit",1),I.exit().remove(),I.each(function(B,V){var Z,Y=m.select(this),ee=a(R),J=ee.colorscale,$=ee.reversescale;if(J){if(!F){var Q=J.length;Z=0===V?J[$?Q-1:0][1]:1===V?J[$?0:Q-1][1]:J[Math.floor((Q-1)/2)][1]}}else{var se=R.vertexcolor||R.facecolor||R.color;Z=T.isArrayOrTypedArray(se)?se[V]||se[0]:se}Y.attr("d",B[0]),Z?Y.call(o.fill,Z):Y.call(function(j){j.size()&&e.gradient(j,v,"legendfill-"+R.uid,s($,"radial"===F),J,"fill")})})}).each(function(D){var F=D[0].trace,R="waterfall"===F.type;if(D[0]._distinct&&R){var L=D[0].trace[D[0].dir].marker;return D[0].mc=L.color,D[0].mlw=L.line.width,D[0].mlc=L.line.color,C(D,this,"waterfall")}var I=[];F.visible&&R&&(I=D[0].hasTotals?[["increasing","M-6,-6V6H0Z"],["totals","M6,6H0L-6,-6H-0Z"],["decreasing","M6,6V-6H0Z"]]:[["increasing","M-6,-6V6H6Z"],["decreasing","M6,6V-6H-6Z"]]);var B=m.select(this).select("g.legendpoints").selectAll("path.legendwaterfall").data(I);B.enter().append("path").classed("legendwaterfall",!0).attr("transform",A).style("stroke-miterlimit",1),B.exit().remove(),B.each(function(V){var Z=m.select(this),Y=F[V[0]].marker,ee=k(void 0,Y.line,5,2);Z.attr("d",V[1]).style("stroke-width",ee+"px").call(o.fill,Y.color),ee&&Z.call(o.stroke,Y.line.color)})}).each(function(D){C(D,this,"funnel")}).each(function(D){C(D,this)}).each(function(D){var F=D[0].trace,R=m.select(this).select("g.legendpoints").selectAll("path.legendbox").data(F.visible&&x.traceIs(F,"box-violin")?[D]:[]);R.enter().append("path").classed("legendbox",!0).attr("d","M6,6H-6V-6H6Z").attr("transform",A),R.exit().remove(),R.each(function(){var L=m.select(this);if("all"!==F.boxpoints&&"all"!==F.points||0!==o.opacity(F.fillcolor)||0!==o.opacity((F.line||{}).color)){var I=k(void 0,F.line,5,2);L.style("stroke-width",I+"px").call(o.fill,F.fillcolor),I&&o.stroke(L,F.line.color)}else{var B=T.minExtend(F,{marker:{size:w?12:T.constrain(F.marker.size,2,16),sizeref:1,sizemin:1,sizemode:"diameter"}});R.call(e.pointStyle,B,v)}})}).each(function(D){P(D,this,"funnelarea")}).each(function(D){P(D,this,"pie")}).each(function(D){var F,R,L=c(D),I=L.showFill,B=L.showLine,V=L.showGradientLine,Z=L.showGradientFill,Y=L.anyFill,ee=L.anyLine,J=D[0],$=J.trace,Q=a($),se=Q.colorscale,j=Q.reversescale,G=l.hasMarkers($)||!Y?"M5,0":ee?"M5,-2":"M5,-3",W=m.select(this),ie=W.select(".legendfill").selectAll("path").data(I||Z?[D]:[]);if(ie.enter().append("path").classed("js-fill",!0),ie.exit().remove(),ie.attr("d",G+"h"+y+"v6h-"+y+"z").call(I?e.fillGroupStyle:function(ne){ne.size()&&e.gradient(ne,v,"legendfill-"+$.uid,s(j),se,"fill")}),B||V){var q=k(void 0,$.line,10,5);R=T.minExtend($,{line:{width:q}}),F=[T.minExtend(J,{trace:R})]}var te=W.select(".legendlines").selectAll("path").data(B||V?[F]:[]);te.enter().append("path").classed("js-line",!0),te.exit().remove(),te.attr("d",G+(V?"l"+y+",0.0001":"h"+y)).call(B?e.lineGroupStyle:function(ne){if(ne.size()){var le="legendline-"+$.uid;e.lineGroupStyle(ne),e.gradient(ne,v,le,s(j),se,"stroke")}})}).each(function(D){var F,R,L=c(D),V=L.showLine,Z=L.showMarker,Y=D[0],ee=Y.trace,J=!Z&&!L.anyLine&&!L.anyFill&&l.hasText(ee);function $(te,ne,le,ue){var de=T.nestedProperty(ee,te).get(),he=T.isArrayOrTypedArray(de)&&ne?ne(de):de;if(w&&he&&void 0!==ue&&(he=ue),le){if(he<le[0])return le[0];if(he>le[1])return le[1]}return he}function Q(te){return Y._distinct&&Y.index&&te[Y.index]?te[Y.index]:te[0]}if(Z||J||V){var se={},j={};if(Z){se.mc=$("marker.color",Q),se.mx=$("marker.symbol",Q),se.mo=$("marker.opacity",T.mean,[.2,1]),se.mlc=$("marker.line.color",Q),se.mlw=$("marker.line.width",T.mean,[0,5],2),j.marker={sizeref:1,sizemin:1,sizemode:"diameter"};var G=$("marker.size",T.mean,[2,16],12);se.ms=G,j.marker.size=G}V&&(j.line={width:$("line.width",Q,[0,10],5)}),J&&(se.tx="Aa",se.tp=$("textposition",Q),se.ts=10,se.tc=$("textfont.color",Q),se.tf=$("textfont.family",Q)),F=[T.minExtend(Y,se)],(R=T.minExtend(ee,j)).selectedpoints=null,R.texttemplate=null}var W=m.select(this).select("g.legendpoints"),ie=W.selectAll("path.scatterpts").data(Z?F:[]);ie.enter().insert("path",":first-child").classed("scatterpts",!0).attr("transform",A),ie.exit().remove(),ie.call(e.pointStyle,R,v),Z&&(F[0].mrc=3);var q=W.selectAll("g.pointtext").data(J?F:[]);q.enter().append("g").classed("pointtext",!0).append("text").attr("transform",A),q.exit().remove(),q.selectAll("text").call(e.textPointStyle,R,v)}).each(function(D){var F=D[0].trace,R=m.select(this).select("g.legendpoints").selectAll("path.legendcandle").data(F.visible&&"candlestick"===F.type?[D,D]:[]);R.enter().append("path").classed("legendcandle",!0).attr("d",function(L,I){return I?"M-15,0H-8M-8,6V-6H8Z":"M15,0H8M8,-6V6H-8Z"}).attr("transform",A).style("stroke-miterlimit",1),R.exit().remove(),R.each(function(L,I){var B=m.select(this),V=F[I?"increasing":"decreasing"],Z=k(void 0,V.line,5,2);B.style("stroke-width",Z+"px").call(o.fill,V.fillcolor),Z&&o.stroke(B,V.line.color)})}).each(function(D){var F=D[0].trace,R=m.select(this).select("g.legendpoints").selectAll("path.legendohlc").data(F.visible&&"ohlc"===F.type?[D,D]:[]);R.enter().append("path").classed("legendohlc",!0).attr("d",function(L,I){return I?"M-15,0H0M-8,-6V0":"M15,0H0M8,6V0"}).attr("transform",A).style("stroke-miterlimit",1),R.exit().remove(),R.each(function(L,I){var B=m.select(this),V=F[I?"increasing":"decreasing"],Z=k(void 0,V.line,5,2);B.style("fill","none").call(e.dashLine,V.line.dash,Z),Z&&o.stroke(B,V.line.color)})})}},{"../../lib":503,"../../registry":638,"../../traces/pie/helpers":905,"../../traces/pie/style_one":911,"../../traces/scatter/subtypes":951,"../color":366,"../colorscale/helpers":377,"../drawing":388,"./constants":417,"@plotly/d3":58}],425:[function(_,oe,ae){"use strict";_("./constants"),oe.exports={editType:"modebar",orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"modebar"},bgcolor:{valType:"color",editType:"modebar"},color:{valType:"color",editType:"modebar"},activecolor:{valType:"color",editType:"modebar"},uirevision:{valType:"any",editType:"none"},add:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"},remove:{valType:"string",arrayOk:!0,dflt:"",editType:"modebar"}}},{"./constants":427}],426:[function(_,oe,ae){"use strict";var m=_("../../registry"),x=_("../../plots/plots"),T=_("../../plots/cartesian/axis_ids"),b=_("../../fonts/ploticon"),e=_("../shapes/draw").eraseActiveShape,o=_("../../lib"),a=o._,l=oe.exports={};function i(f,w){var y,M,A=w.currentTarget,k=A.getAttribute("data-attr"),C=A.getAttribute("data-val")||!0,P=f._fullLayout,D={},F=T.list(f,null,!0),R=P._cartesianSpikesEnabled;if("zoom"===k){var L,I="in"===C?.5:2,B=(1+I)/2,V=(1-I)/2;for(M=0;M<F.length;M++)if(!(y=F[M]).fixedrange)if(L=y._name,"auto"===C)D[L+".autorange"]=!0;else if("reset"===C){if(void 0===y._rangeInitial)D[L+".autorange"]=!0;else{var Z=y._rangeInitial.slice();D[L+".range[0]"]=Z[0],D[L+".range[1]"]=Z[1]}void 0!==y._showSpikeInitial&&(D[L+".showspikes"]=y._showSpikeInitial,"on"!==R||y._showSpikeInitial||(R="off"))}else{var Y=[y.r2l(y.range[0]),y.r2l(y.range[1])],ee=[B*Y[0]+V*Y[1],B*Y[1]+V*Y[0]];D[L+".range[0]"]=y.l2r(ee[0]),D[L+".range[1]"]=y.l2r(ee[1])}}else"hovermode"!==k||"x"!==C&&"y"!==C||A.setAttribute("data-val",C=P._isHoriz?"y":"x"),D[k]=C;P._cartesianSpikesEnabled=R,m.call("_guiRelayout",f,D)}function d(f,w){for(var y=w.currentTarget,M=y.getAttribute("data-attr"),A=y.getAttribute("data-val")||!0,k=f._fullLayout._subplots.gl3d||[],C={},P=M.split("."),D=0;D<k.length;D++)C[k[D]+"."+P[1]]=A;C.dragmode="pan"===A?A:"zoom",m.call("_guiRelayout",f,C)}function u(f,w){for(var y=w.currentTarget.getAttribute("data-attr"),M="resetLastSave"===y,A="resetDefault"===y,k=f._fullLayout,C=k._subplots.gl3d||[],P={},D=0;D<C.length;D++){var F,R=C[D],L=R+".camera",I=R+".aspectratio",B=R+".aspectmode",V=k[R]._scene;M?(P[L+".up"]=V.viewInitial.up,P[L+".eye"]=V.viewInitial.eye,P[L+".center"]=V.viewInitial.center,F=!0):A&&(P[L+".up"]=null,P[L+".eye"]=null,P[L+".center"]=null,F=!0),F&&(P[I+".x"]=V.viewInitial.aspectratio.x,P[I+".y"]=V.viewInitial.aspectratio.y,P[I+".z"]=V.viewInitial.aspectratio.z,P[B]=V.viewInitial.aspectmode)}m.call("_guiRelayout",f,P)}function s(f,w){var y=w.currentTarget,M=y._previousVal,A=f._fullLayout,k=A._subplots.gl3d||[],C=["xaxis","yaxis","zaxis"],P={},D={};if(M)D=M,y._previousVal=null;else{for(var F=0;F<k.length;F++){var R=k[F],L=A[R],I=R+".hovermode";P[I]=L.hovermode,D[I]=!1;for(var B=0;B<3;B++){var V=C[B],Z=R+"."+V+".showspikes";D[Z]=!1,P[Z]=L[V].showspikes}}y._previousVal=P}return D}function c(f,w){for(var y=w.currentTarget,M=y.getAttribute("data-attr"),A=y.getAttribute("data-val")||!0,k=f._fullLayout,C=k._subplots.geo||[],P=0;P<C.length;P++){var D=C[P];if("zoom"===M){var R=k[D].projection.scale;m.call("_guiRelayout",f,D+".projection.scale","in"===A?2*R:.5*R)}}"reset"===M&&g(f,"geo")}function h(f){var w=f._fullLayout;return!w.hovermode&&(w._has("cartesian")?w._isHoriz?"y":"x":"closest")}function p(f){var w=h(f);m.call("_guiRelayout",f,"hovermode",w)}function v(f,w){for(var y=w.currentTarget.getAttribute("data-val"),M=f._fullLayout,A=M._subplots.mapbox||[],k={},C=0;C<A.length;C++){var P=A[C],D=M[P].zoom;k[P+".zoom"]="in"===y?1.05*D:D/1.05}m.call("_guiRelayout",f,k)}function g(f,w){for(var y=f._fullLayout,M=y._subplots[w]||[],A={},k=0;k<M.length;k++)for(var C=M[k],P=y[C]._subplot.viewInitial,D=Object.keys(P),F=0;F<D.length;F++){var R=D[F];A[C+"."+R]=P[R]}m.call("_guiRelayout",f,A)}l.toImage={name:"toImage",title:function(f){return a(f,"png"===((f._context.toImageButtonOptions||{}).format||"png")?"Download plot as a png":"Download plot")},icon:b.camera,click:function(f){var w=f._context.toImageButtonOptions,y={format:w.format||"png"};o.notifier(a(f,"Taking snapshot - this may take a few seconds"),"long"),"svg"!==y.format&&o.isIE()&&(o.notifier(a(f,"IE only supports svg.  Changing format to svg."),"long"),y.format="svg"),["filename","width","height","scale"].forEach(function(M){M in w&&(y[M]=w[M])}),m.call("downloadImage",f,y).then(function(M){o.notifier(a(f,"Snapshot succeeded")+" - "+M,"long")}).catch(function(){o.notifier(a(f,"Sorry, there was a problem downloading your snapshot!"),"long")})}},l.sendDataToCloud={name:"sendDataToCloud",title:function(f){return a(f,"Edit in Chart Studio")},icon:b.disk,click:function(f){x.sendDataToCloud(f)}},l.editInChartStudio={name:"editInChartStudio",title:function(f){return a(f,"Edit in Chart Studio")},icon:b.pencil,click:function(f){x.sendDataToCloud(f)}},l.zoom2d={name:"zoom2d",_cat:"zoom",title:function(f){return a(f,"Zoom")},attr:"dragmode",val:"zoom",icon:b.zoombox,click:i},l.pan2d={name:"pan2d",_cat:"pan",title:function(f){return a(f,"Pan")},attr:"dragmode",val:"pan",icon:b.pan,click:i},l.select2d={name:"select2d",_cat:"select",title:function(f){return a(f,"Box Select")},attr:"dragmode",val:"select",icon:b.selectbox,click:i},l.lasso2d={name:"lasso2d",_cat:"lasso",title:function(f){return a(f,"Lasso Select")},attr:"dragmode",val:"lasso",icon:b.lasso,click:i},l.drawclosedpath={name:"drawclosedpath",title:function(f){return a(f,"Draw closed freeform")},attr:"dragmode",val:"drawclosedpath",icon:b.drawclosedpath,click:i},l.drawopenpath={name:"drawopenpath",title:function(f){return a(f,"Draw open freeform")},attr:"dragmode",val:"drawopenpath",icon:b.drawopenpath,click:i},l.drawline={name:"drawline",title:function(f){return a(f,"Draw line")},attr:"dragmode",val:"drawline",icon:b.drawline,click:i},l.drawrect={name:"drawrect",title:function(f){return a(f,"Draw rectangle")},attr:"dragmode",val:"drawrect",icon:b.drawrect,click:i},l.drawcircle={name:"drawcircle",title:function(f){return a(f,"Draw circle")},attr:"dragmode",val:"drawcircle",icon:b.drawcircle,click:i},l.eraseshape={name:"eraseshape",title:function(f){return a(f,"Erase active shape")},icon:b.eraseshape,click:e},l.zoomIn2d={name:"zoomIn2d",_cat:"zoomin",title:function(f){return a(f,"Zoom in")},attr:"zoom",val:"in",icon:b.zoom_plus,click:i},l.zoomOut2d={name:"zoomOut2d",_cat:"zoomout",title:function(f){return a(f,"Zoom out")},attr:"zoom",val:"out",icon:b.zoom_minus,click:i},l.autoScale2d={name:"autoScale2d",_cat:"autoscale",title:function(f){return a(f,"Autoscale")},attr:"zoom",val:"auto",icon:b.autoscale,click:i},l.resetScale2d={name:"resetScale2d",_cat:"resetscale",title:function(f){return a(f,"Reset axes")},attr:"zoom",val:"reset",icon:b.home,click:i},l.hoverClosestCartesian={name:"hoverClosestCartesian",_cat:"hoverclosest",title:function(f){return a(f,"Show closest data on hover")},attr:"hovermode",val:"closest",icon:b.tooltip_basic,gravity:"ne",click:i},l.hoverCompareCartesian={name:"hoverCompareCartesian",_cat:"hoverCompare",title:function(f){return a(f,"Compare data on hover")},attr:"hovermode",val:function(f){return f._fullLayout._isHoriz?"y":"x"},icon:b.tooltip_compare,gravity:"ne",click:i},l.zoom3d={name:"zoom3d",_cat:"zoom",title:function(f){return a(f,"Zoom")},attr:"scene.dragmode",val:"zoom",icon:b.zoombox,click:d},l.pan3d={name:"pan3d",_cat:"pan",title:function(f){return a(f,"Pan")},attr:"scene.dragmode",val:"pan",icon:b.pan,click:d},l.orbitRotation={name:"orbitRotation",title:function(f){return a(f,"Orbital rotation")},attr:"scene.dragmode",val:"orbit",icon:b["3d_rotate"],click:d},l.tableRotation={name:"tableRotation",title:function(f){return a(f,"Turntable rotation")},attr:"scene.dragmode",val:"turntable",icon:b["z-axis"],click:d},l.resetCameraDefault3d={name:"resetCameraDefault3d",_cat:"resetCameraDefault",title:function(f){return a(f,"Reset camera to default")},attr:"resetDefault",icon:b.home,click:u},l.resetCameraLastSave3d={name:"resetCameraLastSave3d",_cat:"resetCameraLastSave",title:function(f){return a(f,"Reset camera to last save")},attr:"resetLastSave",icon:b.movie,click:u},l.hoverClosest3d={name:"hoverClosest3d",_cat:"hoverclosest",title:function(f){return a(f,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:b.tooltip_basic,gravity:"ne",click:function(f,w){var y=s(f,w);m.call("_guiRelayout",f,y)}},l.zoomInGeo={name:"zoomInGeo",_cat:"zoomin",title:function(f){return a(f,"Zoom in")},attr:"zoom",val:"in",icon:b.zoom_plus,click:c},l.zoomOutGeo={name:"zoomOutGeo",_cat:"zoomout",title:function(f){return a(f,"Zoom out")},attr:"zoom",val:"out",icon:b.zoom_minus,click:c},l.resetGeo={name:"resetGeo",_cat:"reset",title:function(f){return a(f,"Reset")},attr:"reset",val:null,icon:b.autoscale,click:c},l.hoverClosestGeo={name:"hoverClosestGeo",_cat:"hoverclosest",title:function(f){return a(f,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:b.tooltip_basic,gravity:"ne",click:p},l.hoverClosestGl2d={name:"hoverClosestGl2d",_cat:"hoverclosest",title:function(f){return a(f,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:b.tooltip_basic,gravity:"ne",click:p},l.hoverClosestPie={name:"hoverClosestPie",_cat:"hoverclosest",title:function(f){return a(f,"Toggle show closest data on hover")},attr:"hovermode",val:"closest",icon:b.tooltip_basic,gravity:"ne",click:p},l.resetViewSankey={name:"resetSankeyGroup",title:function(f){return a(f,"Reset view")},icon:b.home,click:function(f){for(var w={"node.groups":[],"node.x":[],"node.y":[]},y=0;y<f._fullData.length;y++){var M=f._fullData[y]._viewInitial;w["node.groups"].push(M.node.groups.slice()),w["node.x"].push(M.node.x.slice()),w["node.y"].push(M.node.y.slice())}m.call("restyle",f,w)}},l.toggleHover={name:"toggleHover",title:function(f){return a(f,"Toggle show closest data on hover")},attr:"hovermode",val:null,toggle:!0,icon:b.tooltip_basic,gravity:"ne",click:function(f,w){var y=s(f,w);y.hovermode=h(f),m.call("_guiRelayout",f,y)}},l.resetViews={name:"resetViews",title:function(f){return a(f,"Reset views")},icon:b.home,click:function(f,w){var y=w.currentTarget;y.setAttribute("data-attr","zoom"),y.setAttribute("data-val","reset"),i(f,w),y.setAttribute("data-attr","resetLastSave"),u(f,w),g(f,"geo"),g(f,"mapbox")}},l.toggleSpikelines={name:"toggleSpikelines",title:function(f){return a(f,"Toggle Spike Lines")},icon:b.spikeline,attr:"_cartesianSpikesEnabled",val:"on",click:function(f){var w=f._fullLayout;w._cartesianSpikesEnabled="on"===w._cartesianSpikesEnabled?"off":"on",m.call("_guiRelayout",f,function(M){for(var A="on"===M._fullLayout._cartesianSpikesEnabled,k=T.list(M,null,!0),C={},P=0;P<k.length;P++){var D=k[P];C[D._name+".showspikes"]=!!A||D._showSpikeInitial}return C}(f))}},l.resetViewMapbox={name:"resetViewMapbox",_cat:"resetView",title:function(f){return a(f,"Reset view")},attr:"reset",icon:b.home,click:function(f){g(f,"mapbox")}},l.zoomInMapbox={name:"zoomInMapbox",_cat:"zoomin",title:function(f){return a(f,"Zoom in")},attr:"zoom",val:"in",icon:b.zoom_plus,click:v},l.zoomOutMapbox={name:"zoomOutMapbox",_cat:"zoomout",title:function(f){return a(f,"Zoom out")},attr:"zoom",val:"out",icon:b.zoom_minus,click:v}},{"../../fonts/ploticon":482,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../shapes/draw":450}],427:[function(_,oe,ae){"use strict";var m=_("./buttons"),x=Object.keys(m),T=["drawline","drawopenpath","drawclosedpath","drawcircle","drawrect","eraseshape"],b=["v1hovermode","hoverclosest","hovercompare","togglehover","togglespikelines"].concat(T),e=[];x.forEach(function(o){!function(a){if(-1===b.indexOf(a._cat||a.name)){var l=a.name,i=(a._cat||a.name).toLowerCase();-1===e.indexOf(l)&&e.push(l),-1===e.indexOf(i)&&e.push(i)}}(m[o])}),e.sort(),oe.exports={DRAW_MODES:T,backButtons:b,foreButtons:e}},{"./buttons":426}],428:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../color"),T=_("../../plot_api/plot_template"),b=_("./attributes");oe.exports=function(e,o){var a=e.modebar||{},l=T.newContainer(o,"modebar");function i(u,s){return m.coerce(a,l,b,u,s)}i("orientation"),i("bgcolor",x.addOpacity(o.paper_bgcolor,.5));var d=x.contrast(x.rgb(o.modebar.bgcolor));i("color",x.addOpacity(d,.3)),i("activecolor",x.addOpacity(d,.7)),i("uirevision",o.uirevision),i("add"),i("remove")}},{"../../lib":503,"../../plot_api/plot_template":543,"../color":366,"./attributes":425}],429:[function(_,oe,ae){"use strict";oe.exports={moduleType:"component",name:"modebar",layoutAttributes:_("./attributes"),supplyLayoutDefaults:_("./defaults"),manage:_("./manage")}},{"./attributes":425,"./defaults":428,"./manage":430}],430:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/axis_ids"),x=_("../../traces/scatter/subtypes"),T=_("../../registry"),b=_("../fx/helpers").isUnifiedHover,e=_("./modebar"),o=_("./buttons"),a=_("./constants").DRAW_MODES;oe.exports=function(l){var i=l._fullLayout,d=l._context,u=i._modeBar;if(d.displayModeBar||d.watermark){if(!Array.isArray(d.modeBarButtonsToRemove))throw new Error(["*modeBarButtonsToRemove* configuration options","must be an array."].join(" "));if(!Array.isArray(d.modeBarButtonsToAdd))throw new Error(["*modeBarButtonsToAdd* configuration options","must be an array."].join(" "));var s,c=d.modeBarButtons;s=Array.isArray(c)&&c.length?function(h){for(var p=0;p<h.length;p++)for(var v=h[p],g=0;g<v.length;g++){var f=v[g];if("string"==typeof f){if(void 0===o[f])throw new Error(["*modeBarButtons* configuration options","invalid button name"].join(" "));h[p][g]=o[f]}}return h}(c):!d.displayModeBar&&d.watermark?[]:function(h){var p=h._fullLayout,v=h._fullData,g=h._context;function f(ue,de){if("string"==typeof de){if(de.toLowerCase()===ue.toLowerCase())return!0}else if(de.name===ue||(de._cat||de.name)===ue.toLowerCase())return!0;return!1}var w=p.modebar.add;"string"==typeof w&&(w=[w]);var y=p.modebar.remove;"string"==typeof y&&(y=[y]);var M=g.modeBarButtonsToAdd.concat(w.filter(function(ue){for(var de=0;de<g.modeBarButtonsToRemove.length;de++)if(f(ue,g.modeBarButtonsToRemove[de]))return!1;return!0})),A=g.modeBarButtonsToRemove.concat(y.filter(function(ue){for(var de=0;de<g.modeBarButtonsToAdd.length;de++)if(f(ue,g.modeBarButtonsToAdd[de]))return!1;return!0})),k=p._has("cartesian"),C=p._has("gl3d"),P=p._has("geo"),D=p._has("pie"),F=p._has("funnelarea"),R=p._has("gl2d"),L=p._has("ternary"),I=p._has("mapbox"),B=p._has("polar"),V=p._has("smith"),Z=p._has("sankey"),Y=function(ue){for(var de=m.list({_fullLayout:ue},null,!0),he=0;he<de.length;he++)if(!de[he].fixedrange)return!1;return!0}(p),ee=b(p.hovermode),J=[];function $(ue){if(ue.length){for(var de=[],he=0;he<ue.length;he++){for(var be=ue[he],ge=o[be],we=ge.name.toLowerCase(),Ce=(ge._cat||ge.name).toLowerCase(),De=!1,Se=0;Se<A.length;Se++){var Fe=A[Se].toLowerCase();if(Fe===we||Fe===Ce){De=!0;break}}De||de.push(o[be])}J.push(de)}}var Q=["toImage"];g.showEditInChartStudio?Q.push("editInChartStudio"):g.showSendToCloud&&Q.push("sendDataToCloud"),$(Q);var se=[],j=[],G=[],W=[];(k||R||D||F||L)+P+C+I+B+V>1?(j=["toggleHover"],G=["resetViews"]):P?(se=["zoomInGeo","zoomOutGeo"],j=["hoverClosestGeo"],G=["resetGeo"]):C?(j=["hoverClosest3d"],G=["resetCameraDefault3d","resetCameraLastSave3d"]):I?(se=["zoomInMapbox","zoomOutMapbox"],j=["toggleHover"],G=["resetViewMapbox"]):R?j=["hoverClosestGl2d"]:D?j=["hoverClosestPie"]:Z?(j=["hoverClosestCartesian","hoverCompareCartesian"],G=["resetViewSankey"]):j=["toggleHover"],k&&(j=["toggleSpikelines","hoverClosestCartesian","hoverCompareCartesian"]),(function(ue){for(var de=0;de<ue.length;de++)if(!T.traceIs(ue[de],"noHover"))return!1;return!0}(v)||ee)&&(j=[]),!k&&!R||Y||(se=["zoomIn2d","zoomOut2d","autoScale2d"],"resetViews"!==G[0]&&(G=["resetScale2d"])),C?W=["zoom3d","pan3d","orbitRotation","tableRotation"]:(k||R)&&!Y||L?W=["zoom2d","pan2d"]:I||P?W=["pan2d"]:B&&(W=["zoom2d"]),function(ue){for(var de=!1,he=0;he<ue.length&&!de;he++){var be=ue[he];be._module&&be._module.selectPoints&&(T.traceIs(be,"scatter-like")?(x.hasMarkers(be)||x.hasText(be))&&(de=!0):T.traceIs(be,"box-violin")&&"all"!==be.boxpoints&&"all"!==be.points||(de=!0))}return de}(v)&&W.push("select2d","lasso2d");var ie=[],q=function(ue){-1===ie.indexOf(ue)&&-1!==j.indexOf(ue)&&ie.push(ue)};if(Array.isArray(M)){for(var te=[],ne=0;ne<M.length;ne++){var le=M[ne];"string"==typeof le?(le=le.toLowerCase(),-1!==a.indexOf(le)?(p._has("mapbox")||p._has("cartesian"))&&W.push(le):"togglespikelines"===le?q("toggleSpikelines"):"togglehover"===le?q("toggleHover"):"hovercompare"===le?q("hoverCompareCartesian"):"hoverclosest"===le?(q("hoverClosestCartesian"),q("hoverClosestGeo"),q("hoverClosest3d"),q("hoverClosestGl2d"),q("hoverClosestPie")):"v1hovermode"===le&&(q("toggleHover"),q("hoverClosestCartesian"),q("hoverCompareCartesian"),q("hoverClosestGeo"),q("hoverClosest3d"),q("hoverClosestGl2d"),q("hoverClosestPie"))):te.push(le)}M=te}return $(W),$(se.concat(G)),$(ie),function(ue,de){if(de.length)if(Array.isArray(de[0]))for(var he=0;he<de.length;he++)ue.push(de[he]);else ue.push(de);return ue}(J,M)}(l),u?u.update(l,s):i._modeBar=e(l,s)}else u&&(u.destroy(),delete i._modeBar)}},{"../../plots/cartesian/axis_ids":558,"../../registry":638,"../../traces/scatter/subtypes":951,"../fx/helpers":402,"./buttons":426,"./constants":427,"./modebar":431}],431:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("../../lib"),b=_("../../fonts/ploticon"),e=_("../../version").version,o=new DOMParser;function a(i){this.container=i.container,this.element=document.createElement("div"),this.update(i.graphInfo,i.buttons),this.container.appendChild(this.element)}var l=a.prototype;l.update=function(i,d){this.graphInfo=i;var u=this.graphInfo._context,s=this.graphInfo._fullLayout,c="modebar-"+s._uid;this.element.setAttribute("id",c),this._uid=c,this.element.className="modebar","hover"===u.displayModeBar&&(this.element.className+=" modebar--hover ease-bg"),"v"===s.modebar.orientation&&(this.element.className+=" vertical",d=d.reverse());var h=s.modebar,p="hover"===u.displayModeBar?".js-plotly-plot .plotly:hover ":"";T.deleteRelatedStyleRule(c),T.addRelatedStyleRule(c,p+"#"+c+" .modebar-group","background-color: "+h.bgcolor),T.addRelatedStyleRule(c,"#"+c+" .modebar-btn .icon path","fill: "+h.color),T.addRelatedStyleRule(c,"#"+c+" .modebar-btn:hover .icon path","fill: "+h.activecolor),T.addRelatedStyleRule(c,"#"+c+" .modebar-btn.active .icon path","fill: "+h.activecolor);var v=!this.hasButtons(d),g=this.hasLogo!==u.displaylogo,f=this.locale!==u.locale;if(this.locale=u.locale,(v||g||f)&&(this.removeAllButtons(),this.updateButtons(d),u.watermark||u.displaylogo)){var w=this.getLogo();u.watermark&&(w.className=w.className+" watermark"),"v"===s.modebar.orientation?this.element.insertBefore(w,this.element.childNodes[0]):this.element.appendChild(w),this.hasLogo=!0}this.updateActiveButton()},l.updateButtons=function(i){var d=this;this.buttons=i,this.buttonElements=[],this.buttonsNames=[],this.buttons.forEach(function(u){var s=d.createGroup();u.forEach(function(c){var h=c.name;if(!h)throw new Error("must provide button 'name' in button config");if(-1!==d.buttonsNames.indexOf(h))throw new Error("button name '"+h+"' is taken");d.buttonsNames.push(h);var p=d.createButton(c);d.buttonElements.push(p),s.appendChild(p)}),d.element.appendChild(s)})},l.createGroup=function(){var i=document.createElement("div");return i.className="modebar-group",i},l.createButton=function(i){var d=this,u=document.createElement("a");u.setAttribute("rel","tooltip"),u.className="modebar-btn";var s=i.title;void 0===s?s=i.name:"function"==typeof s&&(s=s(this.graphInfo)),(s||0===s)&&u.setAttribute("data-title",s),void 0!==i.attr&&u.setAttribute("data-attr",i.attr);var c=i.val;if(void 0!==c&&("function"==typeof c&&(c=c(this.graphInfo)),u.setAttribute("data-val",c)),"function"!=typeof i.click)throw new Error("must provide button 'click' function in button config");u.addEventListener("click",function(p){i.click(d.graphInfo,p),d.updateActiveButton(p.currentTarget)}),u.setAttribute("data-toggle",i.toggle||!1),i.toggle&&m.select(u).classed("active",!0);var h=i.icon;return u.appendChild("function"==typeof h?h():this.createIcon(h||b.question)),u.setAttribute("data-gravity",i.gravity||"n"),u},l.createIcon=function(i){var d,u=x(i.height)?Number(i.height):i.ascent-i.descent,s="http://www.w3.org/2000/svg";if(i.path){(d=document.createElementNS(s,"svg")).setAttribute("viewBox",[0,0,i.width,u].join(" ")),d.setAttribute("class","icon");var c=document.createElementNS(s,"path");c.setAttribute("d",i.path),i.transform?c.setAttribute("transform",i.transform):void 0!==i.ascent&&c.setAttribute("transform","matrix(1 0 0 -1 0 "+i.ascent+")"),d.appendChild(c)}return i.svg&&(d=o.parseFromString(i.svg,"application/xml").childNodes[0]),d.setAttribute("height","1em"),d.setAttribute("width","1em"),d},l.updateActiveButton=function(i){var d=this.graphInfo._fullLayout,u=void 0!==i?i.getAttribute("data-attr"):null;this.buttonElements.forEach(function(s){var c=s.getAttribute("data-val")||!0,h=s.getAttribute("data-attr"),p="true"===s.getAttribute("data-toggle"),v=m.select(s);if(p)h===u&&v.classed("active",!v.classed("active"));else{var g=null===h?h:T.nestedProperty(d,h).get();v.classed("active",g===c)}})},l.hasButtons=function(i){var d=this.buttons;if(!d||i.length!==d.length)return!1;for(var u=0;u<i.length;++u){if(i[u].length!==d[u].length)return!1;for(var s=0;s<i[u].length;s++)if(i[u][s].name!==d[u][s].name)return!1}return!0},l.getLogo=function(){var i=this.createGroup(),d=document.createElement("a");return d.href="https://plotly.com/",d.target="_blank",d.setAttribute("data-title",T._(this.graphInfo,"Produced with Plotly.js")+" (v"+e+")"),d.className="modebar-btn plotlyjsicon modebar-btn--logo",d.appendChild(this.createIcon(b.newplotlylogo)),i.appendChild(d),i},l.removeAllButtons=function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);this.hasLogo=!1},l.destroy=function(){T.removeElement(this.container.querySelector(".modebar")),T.deleteRelatedStyleRule(this._uid)},oe.exports=function(i,d){var u=i._fullLayout,s=new a({graphInfo:i,container:u._modebardiv.node(),buttons:d});return u._privateplot&&m.select(s.element).append("span").classed("badge-private float--left",!0).text("PRIVATE"),s}},{"../../fonts/ploticon":482,"../../lib":503,"../../version":1119,"@plotly/d3":58,"fast-isnumeric":190}],432:[function(_,oe,ae){"use strict";var m=_("../../plots/font_attributes"),x=_("../color/attributes"),T=(0,_("../../plot_api/plot_template").templatedArray)("button",{visible:{valType:"boolean",dflt:!0,editType:"plot"},step:{valType:"enumerated",values:["month","year","day","hour","minute","second","all"],dflt:"month",editType:"plot"},stepmode:{valType:"enumerated",values:["backward","todate"],dflt:"backward",editType:"plot"},count:{valType:"number",min:0,dflt:1,editType:"plot"},label:{valType:"string",editType:"plot"},editType:"plot"});oe.exports={visible:{valType:"boolean",editType:"plot"},buttons:T,x:{valType:"number",min:-2,max:3,editType:"plot"},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left",editType:"plot"},y:{valType:"number",min:-2,max:3,editType:"plot"},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"bottom",editType:"plot"},font:m({editType:"plot"}),bgcolor:{valType:"color",dflt:x.lightLine,editType:"plot"},activecolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:x.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"}},{"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../color/attributes":365}],433:[function(_,oe,ae){"use strict";oe.exports={yPad:.02,minButtonWidth:30,rx:3,ry:3,lightAmount:25,darkAmount:10}},{}],434:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../color"),T=_("../../plot_api/plot_template"),b=_("../../plots/array_container_defaults"),e=_("./attributes"),o=_("./constants");function a(l,i,d,u){var s=u.calendar;function c(p,v){return m.coerce(l,i,e.buttons,p,v)}if(c("visible")){var h=c("step");"all"!==h&&(!s||"gregorian"===s||"month"!==h&&"year"!==h?c("stepmode"):i.stepmode="backward",c("count")),c("label")}}oe.exports=function(l,i,d,u,s){var c=l.rangeselector||{},h=T.newContainer(i,"rangeselector");function p(f,w){return m.coerce(c,h,e,f,w)}if(p("visible",b(c,h,{name:"buttons",handleItemDefaults:a,calendar:s}).length>0)){var v=function(f,w,y){for(var M=y.filter(function(P){return w[P].anchor===f._id}),A=0,k=0;k<M.length;k++){var C=w[M[k]].domain;C&&(A=Math.max(C[1],A))}return[f.domain[0],A+o.yPad]}(i,d,u);p("x",v[0]),p("y",v[1]),m.noneOrAll(l,i,["x","y"]),p("xanchor"),p("yanchor"),m.coerceFont(p,"font",d.font);var g=p("bgcolor");p("activecolor",x.contrast(g,o.lightAmount,o.darkAmount)),p("bordercolor"),p("borderwidth")}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../color":366,"./attributes":432,"./constants":433}],435:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../registry"),T=_("../../plots/plots"),b=_("../color"),e=_("../drawing"),o=_("../../lib"),a=o.strTranslate,l=_("../../lib/svg_text_utils"),i=_("../../plots/cartesian/axis_ids"),d=_("../../constants/alignment"),u=d.LINE_SPACING,s=d.FROM_TL,c=d.FROM_BR,h=_("./constants"),p=_("./get_update_object");function v(w){return w._id}function g(w,y,M){var k,C,A=o.ensureSingle(w,"rect","selector-rect",function(k){k.attr("shape-rendering","crispEdges")});A.attr({rx:h.rx,ry:h.ry}),A.call(b.stroke,y.bordercolor).call(b.fill,(k=y,C=M,C._isActive||C._isHovered?k.activecolor:k.bgcolor)).style("stroke-width",y.borderwidth+"px")}function f(w,y,M,A){var k,C;o.ensureSingle(w,"text","selector-text",function(k){k.attr("text-anchor","middle")}).call(e.font,y.font).text((k=M,C=A._fullLayout._meta,k.label?C?o.templateString(k.label,C):k.label:"all"===k.step?"all":k.count+k.step.charAt(0))).call(function(k){l.convertToTspans(k,A)})}oe.exports=function(w){var y=w._fullLayout._infolayer.selectAll(".rangeselector").data(function(M){for(var A=i.list(M,"x",!0),k=[],C=0;C<A.length;C++){var P=A[C];P.rangeselector&&P.rangeselector.visible&&k.push(P)}return k}(w),v);y.enter().append("g").classed("rangeselector",!0),y.exit().remove(),y.style({cursor:"pointer","pointer-events":"all"}),y.each(function(M){var A=m.select(this),k=M,C=k.rangeselector,P=A.selectAll("g.button").data(o.filterVisible(C.buttons));P.enter().append("g").classed("button",!0),P.exit().remove(),P.each(function(D){var F=m.select(this),R=p(k,D);D._isActive=function(L,I,B){if("all"===I.step)return!0===L.autorange;var V=Object.keys(B);return L.range[0]===B[V[0]]&&L.range[1]===B[V[1]]}(k,D,R),F.call(g,C,D),F.call(f,C,D,w),F.on("click",function(){w._dragged||x.call("_guiRelayout",w,R)}),F.on("mouseover",function(){D._isHovered=!0,F.call(g,C,D)}),F.on("mouseout",function(){D._isHovered=!1,F.call(g,C,D)})}),function(D,F,R,L,I){var B=0,V=0,Z=R.borderwidth;F.each(function(){var se=m.select(this).select(".selector-text"),G=Math.max(R.font.size*u*l.lineCount(se),16)+3;V=Math.max(V,G)}),F.each(function(){var se=m.select(this),j=se.select(".selector-rect"),G=se.select(".selector-text"),W=G.node()&&e.bBox(G.node()).width,ie=R.font.size*u,q=l.lineCount(G),te=Math.max(W+10,h.minButtonWidth);se.attr("transform",a(Z+B,Z)),j.attr({x:0,y:0,width:te,height:V}),l.positionText(G,te/2,V/2-(q-1)*ie/2+3),B+=te+5});var Y=D._fullLayout._size,ee=Y.l+Y.w*R.x,J=Y.t+Y.h*(1-R.y),$="left";o.isRightAnchor(R)&&(ee-=B,$="right"),o.isCenterAnchor(R)&&(ee-=B/2,$="center");var Q="top";o.isBottomAnchor(R)&&(J-=V,Q="bottom"),o.isMiddleAnchor(R)&&(J-=V/2,Q="middle"),B=Math.ceil(B),V=Math.ceil(V),ee=Math.round(ee),J=Math.round(J),T.autoMargin(D,L+"-range-selector",{x:R.x,y:R.y,l:B*s[$],r:B*c[$],b:V*c[Q],t:V*s[Q]}),I.attr("transform",a(ee,J))}(w,P,C,k._name,A)})}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"./constants":433,"./get_update_object":436,"@plotly/d3":58}],436:[function(_,oe,ae){"use strict";var m=_("d3-time"),x=_("../../lib").titleCase;oe.exports=function(T,b){var e=T._name,o={};if("all"===b.step)o[e+".autorange"]=!0;else{var a=function(l,i){var d,u=l.range,s=new Date(l.r2l(u[1])),h=m["utc"+x(i.step)],p=i.count;switch(i.stepmode){case"backward":d=l.l2r(+h.offset(s,-p));break;case"todate":var v=h.offset(s,-p);d=l.l2r(+h.ceil(v))}return[d,u[1]]}(T,b);o[e+".range[0]"]=a[0],o[e+".range[1]"]=a[1]}return o}},{"../../lib":503,"d3-time":122}],437:[function(_,oe,ae){"use strict";oe.exports={moduleType:"component",name:"rangeselector",schema:{subplots:{xaxis:{rangeselector:_("./attributes")}}},layoutAttributes:_("./attributes"),handleDefaults:_("./defaults"),draw:_("./draw")}},{"./attributes":432,"./defaults":434,"./draw":435}],438:[function(_,oe,ae){"use strict";var m=_("../color/attributes");oe.exports={bgcolor:{valType:"color",dflt:m.background,editType:"plot"},bordercolor:{valType:"color",dflt:m.defaultLine,editType:"plot"},borderwidth:{valType:"integer",dflt:0,min:0,editType:"plot"},autorange:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},range:{valType:"info_array",items:[{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"calc",impliedEdits:{"^autorange":!1}}],editType:"calc",impliedEdits:{autorange:!1}},thickness:{valType:"number",dflt:.15,min:0,max:1,editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"}},{"../color/attributes":365}],439:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/axis_ids").list,x=_("../../plots/cartesian/autorange").getAutoRange,T=_("./constants");oe.exports=function(b){for(var e=m(b,"x",!0),o=0;o<e.length;o++){var a=e[o],l=a[T.name];l&&l.visible&&l.autorange&&(l._input.autorange=!0,l._input.range=l.range=x(b,a))}}},{"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"./constants":440}],440:[function(_,oe,ae){"use strict";oe.exports={name:"rangeslider",containerClassName:"rangeslider-container",bgClassName:"rangeslider-bg",rangePlotClassName:"rangeslider-rangeplot",maskMinClassName:"rangeslider-mask-min",maskMaxClassName:"rangeslider-mask-max",slideBoxClassName:"rangeslider-slidebox",grabberMinClassName:"rangeslider-grabber-min",grabAreaMinClassName:"rangeslider-grabarea-min",handleMinClassName:"rangeslider-handle-min",grabberMaxClassName:"rangeslider-grabber-max",grabAreaMaxClassName:"rangeslider-grabarea-max",handleMaxClassName:"rangeslider-handle-max",maskMinOppAxisClassName:"rangeslider-mask-min-opp-axis",maskMaxOppAxisClassName:"rangeslider-mask-max-opp-axis",maskColor:"rgba(0,0,0,0.4)",maskOppAxisColor:"rgba(0,0,0,0.2)",slideBoxFill:"transparent",slideBoxCursor:"ew-resize",grabAreaFill:"transparent",grabAreaCursor:"col-resize",grabAreaWidth:10,handleWidth:4,handleRadius:1,handleStrokeWidth:1,extraPad:15}},{}],441:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../plot_api/plot_template"),T=_("../../plots/cartesian/axis_ids"),b=_("./attributes"),e=_("./oppaxis_attributes");oe.exports=function(o,a,l){var i=o[l],d=a[l];if(i.rangeslider||a._requestRangeslider[d._id]){m.isPlainObject(i.rangeslider)||(i.rangeslider={});var u,s,c=i.rangeslider,h=x.newContainer(d,"rangeslider");if(A("visible")){A("bgcolor",a.plot_bgcolor),A("bordercolor"),A("borderwidth"),A("thickness"),A("autorange",!d.isValidRange(c.range)),A("range");var p=a._subplots;if(p)for(var v=p.cartesian.filter(function(C){return C.substr(0,C.indexOf("y"))===T.name2id(l)}).map(function(C){return C.substr(C.indexOf("y"),C.length)}),g=m.simpleMap(v,T.id2name),f=0;f<g.length;f++){var w=g[f];u=c[w]||{},s=x.newContainer(h,w,"yaxis");var y,M=a[w];u.range&&M.isValidRange(u.range)&&(y="fixed"),"match"!==k("rangemode",y)&&k("range",M.range.slice())}h._input=c}}function A(C,P){return m.coerce(c,h,b,C,P)}function k(C,P){return m.coerce(u,s,e,C,P)}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_ids":558,"./attributes":438,"./oppaxis_attributes":445}],442:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../registry"),T=_("../../plots/plots"),b=_("../../lib"),e=b.strTranslate,o=_("../drawing"),a=_("../color"),l=_("../titles"),i=_("../../plots/cartesian"),d=_("../../plots/cartesian/axis_ids"),u=_("../dragelement"),s=_("../../lib/setcursor"),c=_("./constants");function h(y,M,A,k){var C=b.ensureSingle(y,"rect",c.bgClassName,function(R){R.attr({x:0,y:0,"shape-rendering":"crispEdges"})}),P=k.borderwidth%2==0?k.borderwidth:k.borderwidth-1,D=-k._offsetShift,F=o.crispRound(M,k.borderwidth);C.attr({width:k._width+P,height:k._height+P,transform:e(D,D),fill:k.bgcolor,stroke:k.bordercolor,"stroke-width":F})}function p(y,M,A,k){b.ensureSingleById(M._fullLayout._topdefs,"clipPath",k._clipId,function(P){P.append("rect").attr({x:0,y:0})}).select("rect").attr({width:k._width,height:k._height})}function v(y,M,A,k){var C,P=M.calcdata,D=y.selectAll("g."+c.rangePlotClassName).data(A._subplotsWith,b.identity);D.enter().append("g").attr("class",function(F){return c.rangePlotClassName+" "+F}).call(o.setClipUrl,k._clipId,M),D.order(),D.exit().remove(),D.each(function(F,R){var L=m.select(this),I=0===R,B=d.getFromId(M,F,"y"),V=B._name,Z=k[V],Y={data:[],layout:{xaxis:{type:A.type,domain:[0,1],range:k.range.slice(),calendar:A.calendar},width:k._width,height:k._height,margin:{t:0,b:0,l:0,r:0}},_context:M._context};A.rangebreaks&&(Y.layout.xaxis.rangebreaks=A.rangebreaks),Y.layout[V]={type:B.type,domain:[0,1],range:"match"!==Z.rangemode?Z.range.slice():B.range.slice(),calendar:B.calendar},B.rangebreaks&&(Y.layout[V].rangebreaks=B.rangebreaks),T.supplyDefaults(Y);var ee=Y._fullLayout.xaxis,J=Y._fullLayout[V];ee.clearCalc(),ee.setScale(),J.clearCalc(),J.setScale();var $={id:F,plotgroup:L,xaxis:ee,yaxis:J,isRangePlot:!0};I?C=$:($.mainplot="xy",$.mainplotinfo=C),i.rangePlot(M,$,function(Q,se){for(var j=[],G=0;G<Q.length;G++){var W=Q[G],ie=W[0].trace;ie.xaxis+ie.yaxis===se&&j.push(W)}return j}(P,F))})}function g(y,M,A,k,C){b.ensureSingle(y,"rect",c.maskMinClassName,function(P){P.attr({x:0,y:0,"shape-rendering":"crispEdges"})}).attr("height",k._height).call(a.fill,c.maskColor),b.ensureSingle(y,"rect",c.maskMaxClassName,function(P){P.attr({y:0,"shape-rendering":"crispEdges"})}).attr("height",k._height).call(a.fill,c.maskColor),"match"!==C.rangemode&&(b.ensureSingle(y,"rect",c.maskMinOppAxisClassName,function(P){P.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",k._width).call(a.fill,c.maskOppAxisColor),b.ensureSingle(y,"rect",c.maskMaxOppAxisClassName,function(P){P.attr({y:0,"shape-rendering":"crispEdges"})}).attr("width",k._width).style("border-top",c.maskOppBorder).call(a.fill,c.maskOppAxisColor))}function f(y,M,A,k){M._context.staticPlot||b.ensureSingle(y,"rect",c.slideBoxClassName,function(C){C.attr({y:0,cursor:c.slideBoxCursor,"shape-rendering":"crispEdges"})}).attr({height:k._height,fill:c.slideBoxFill})}function w(y,M,A,k){var C=b.ensureSingle(y,"g",c.grabberMinClassName),P=b.ensureSingle(y,"g",c.grabberMaxClassName),D={x:0,width:c.handleWidth,rx:c.handleRadius,fill:a.background,stroke:a.defaultLine,"stroke-width":c.handleStrokeWidth,"shape-rendering":"crispEdges"},F={y:Math.round(k._height/4),height:Math.round(k._height/2)};b.ensureSingle(C,"rect",c.handleMinClassName,function(L){L.attr(D)}).attr(F),b.ensureSingle(P,"rect",c.handleMaxClassName,function(L){L.attr(D)}).attr(F);var R={width:c.grabAreaWidth,x:0,y:0,fill:c.grabAreaFill,cursor:M._context.staticPlot?void 0:c.grabAreaCursor};b.ensureSingle(C,"rect",c.grabAreaMinClassName,function(L){L.attr(R)}).attr("height",k._height),b.ensureSingle(P,"rect",c.grabAreaMaxClassName,function(L){L.attr(R)}).attr("height",k._height)}oe.exports=function(y){for(var M=y._fullLayout,A=M._rangeSliderData,k=0;k<A.length;k++){var C=A[k][c.name];C._clipId=C._id+"-"+M._uid}var P=M._infolayer.selectAll("g."+c.containerClassName).data(A,function(D){return D._name});P.exit().each(function(D){M._topdefs.select("#"+D[c.name]._clipId).remove()}).remove(),0!==A.length&&(P.enter().append("g").classed(c.containerClassName,!0).attr("pointer-events","all"),P.each(function(D){var F=m.select(this),R=D[c.name],L=M[d.id2name(D.anchor)],I=R[d.id2name(D.anchor)];if(R.range){var B,V=b.simpleMap(R.range,D.r2l),Z=b.simpleMap(D.range,D.r2l);B=Z[0]<Z[1]?[Math.min(V[0],Z[0]),Math.max(V[1],Z[1])]:[Math.max(V[0],Z[0]),Math.min(V[1],Z[1])],R.range=R._input.range=b.simpleMap(B,D.l2r)}D.cleanRange("rangeslider.range");var Y=M._size,ee=D.domain;R._width=Y.w*(ee[1]-ee[0]);var J=Math.round(Y.l+Y.w*ee[0]),$=Math.round(Y.t+Y.h*(1-D._counterDomainMin)+("bottom"===D.side?D._depth:0)+R._offsetShift+c.extraPad);F.attr("transform",e(J,$)),R._rl=b.simpleMap(R.range,D.r2l);var Q=R._rl[0],se=R._rl[1],j=se-Q;if(R.p2d=function(de){return de/R._width*j+Q},R.d2p=function(de){return(de-Q)/j*R._width},D.rangebreaks){var G=D.locateBreaks(Q,se);if(G.length){var W,ie,q=0;for(W=0;W<G.length;W++)q+=(ie=G[W]).max-ie.min;var te=R._width/(se-Q-q),ne=[-te*Q];for(W=0;W<G.length;W++)ne.push(ne[ne.length-1]-te*((ie=G[W]).max-ie.min));for(R.d2p=function(de){for(var he=ne[0],be=0;be<G.length;be++){var ge=G[be];if(de>=ge.max)he=ne[be+1];else if(de<ge.min)break}return he+te*de},W=0;W<G.length;W++)(ie=G[W]).pmin=R.d2p(ie.min),ie.pmax=R.d2p(ie.max);R.p2d=function(de){for(var he=ne[0],be=0;be<G.length;be++){var ge=G[be];if(de>=ge.pmax)he=ne[be+1];else if(de<ge.pmin)break}return(de-he)/te}}}if("match"!==I.rangemode){var le=L.r2l(I.range[0]),ue=L.r2l(I.range[1])-le;R.d2pOppAxis=function(de){return(de-le)/ue*R._height}}F.call(h,y,D,R).call(p,y,D,R).call(v,y,D,R).call(g,y,D,R,I).call(f,y,D,R).call(w,y,D,R),function(de,he,be,ge){if(!he._context.staticPlot){var we=de.select("rect."+c.slideBoxClassName).node(),Ce=de.select("rect."+c.grabAreaMinClassName).node(),De=de.select("rect."+c.grabAreaMaxClassName).node();de.on("mousedown",Se),de.on("touchstart",Se)}function Se(){var Fe=m.event,ve=Fe.target,Te=Fe.clientX||Fe.touches[0].clientX,Le=Te-de.node().getBoundingClientRect().left,Ee=ge.d2p(be._rl[0]),Pe=ge.d2p(be._rl[1]),je=u.coverSlip();function Ge(lt){var Ue,$e,et,tt=+(lt.clientX||lt.touches[0].clientX)-Te;switch(ve){case we:et="ew-resize",Ue=Ee+tt,$e=Pe+tt;break;case Ce:et="col-resize",Ue=Ee+tt,$e=Pe;break;case De:et="col-resize",Ue=Ee,$e=Pe+tt;break;default:et="ew-resize",Ue=Le,$e=Le+tt}if($e<Ue){var ct=$e;$e=Ue,Ue=ct}ge._pixelMin=Ue,ge._pixelMax=$e,s(m.select(je),et),function(xt,Ct,Ht,zt){function ht(tn){return Ht.l2r(b.constrain(tn,zt._rl[0],zt._rl[1]))}var ut=ht(zt.p2d(zt._pixelMin)),Ot=ht(zt.p2d(zt._pixelMax));window.requestAnimationFrame(function(){x.call("_guiRelayout",Ct,Ht._name+".range",[ut,Ot])})}(0,he,be,ge)}function Ke(){je.removeEventListener("mousemove",Ge),je.removeEventListener("mouseup",Ke),this.removeEventListener("touchmove",Ge),this.removeEventListener("touchend",Ke),b.removeElement(je)}this.addEventListener("touchmove",Ge),this.addEventListener("touchend",Ke),je.addEventListener("mousemove",Ge),je.addEventListener("mouseup",Ke)}}(F,y,D,R),function(de,he,be,ge,we,Ce){var De=c.handleWidth/2;function Se(Ke){return b.constrain(Ke,0,ge._width)}function Fe(Ke){return b.constrain(Ke,0,ge._height)}function ve(Ke){return b.constrain(Ke,-De,ge._width+De)}var Te=Se(ge.d2p(be._rl[0])),Le=Se(ge.d2p(be._rl[1]));if(de.select("rect."+c.slideBoxClassName).attr("x",Te).attr("width",Le-Te),de.select("rect."+c.maskMinClassName).attr("width",Te),de.select("rect."+c.maskMaxClassName).attr("x",Le).attr("width",ge._width-Le),"match"!==Ce.rangemode){var Ee=ge._height-Fe(ge.d2pOppAxis(we._rl[1])),Pe=ge._height-Fe(ge.d2pOppAxis(we._rl[0]));de.select("rect."+c.maskMinOppAxisClassName).attr("x",Te).attr("height",Ee).attr("width",Le-Te),de.select("rect."+c.maskMaxOppAxisClassName).attr("x",Te).attr("y",Pe).attr("height",ge._height-Pe).attr("width",Le-Te),de.select("rect."+c.slideBoxClassName).attr("y",Ee).attr("height",Pe-Ee)}var je=Math.round(ve(Te-De))-.5,Ge=Math.round(ve(Le-De))+.5;de.select("g."+c.grabberMinClassName).attr("transform",e(je,.5)),de.select("g."+c.grabberMaxClassName).attr("transform",e(Ge,.5))}(F,0,D,R,L,I),"bottom"===D.side&&l.draw(y,D._id+"title",{propContainer:D,propName:D._name+".title",placeholder:M._dfltTitle.x,attributes:{x:D._offset+D._length/2,y:$+R._height+R._offsetShift+10+1.5*D.title.font.size,"text-anchor":"middle"}})}))}},{"../../lib":503,"../../lib/setcursor":524,"../../plots/cartesian":568,"../../plots/cartesian/axis_ids":558,"../../plots/plots":619,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"../titles":464,"./constants":440,"@plotly/d3":58}],443:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/axis_ids"),x=_("../../lib/svg_text_utils"),T=_("./constants"),b=_("../../constants/alignment").LINE_SPACING,e=T.name;function o(a){var l=a&&a[e];return l&&l.visible}ae.isVisible=o,ae.makeData=function(a){var l=m.list({_fullLayout:a},"x",!0),i=a.margin,d=[];if(!a._has("gl2d"))for(var u=0;u<l.length;u++){var s=l[u];if(o(s)){d.push(s);var c=s[e];c._id=e+s._id,c._height=(a.height-i.b-i.t)*c.thickness,c._offsetShift=Math.floor(c.borderwidth/2)}}a._rangeSliderData=d},ae.autoMarginOpts=function(a,l){var i=a._fullLayout,d=l[e],u=l._id.charAt(0),s=0,c=0;return"bottom"===l.side&&(s=l._depth,l.title.text!==i._dfltTitle[u]&&(c=1.5*l.title.font.size+10+d._offsetShift,c+=(l.title.text.match(x.BR_TAG_ALL)||[]).length*l.title.font.size*b)),{x:0,y:l._counterDomainMin,l:0,r:0,t:0,b:d._height+s+Math.max(i.margin.b,c),pad:T.extraPad+2*d._offsetShift}}},{"../../constants/alignment":471,"../../lib/svg_text_utils":529,"../../plots/cartesian/axis_ids":558,"./constants":440}],444:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./attributes"),T=_("./oppaxis_attributes"),b=_("./helpers");oe.exports={moduleType:"component",name:"rangeslider",schema:{subplots:{xaxis:{rangeslider:m.extendFlat({},x,{yaxis:T})}}},layoutAttributes:_("./attributes"),handleDefaults:_("./defaults"),calcAutorange:_("./calc_autorange"),draw:_("./draw"),isVisible:b.isVisible,makeData:b.makeData,autoMarginOpts:b.autoMarginOpts}},{"../../lib":503,"./attributes":438,"./calc_autorange":439,"./defaults":441,"./draw":442,"./helpers":443,"./oppaxis_attributes":445}],445:[function(_,oe,ae){"use strict";oe.exports={_isSubplotObj:!0,rangemode:{valType:"enumerated",values:["auto","fixed","match"],dflt:"match",editType:"calc"},range:{valType:"info_array",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},editType:"calc"}},{}],446:[function(_,oe,ae){"use strict";var m=_("../annotations/attributes"),x=_("../../traces/scatter/attributes").line,T=_("../drawing/attributes").dash,b=_("../../lib/extend").extendFlat,e=_("../../plot_api/plot_template").templatedArray;_("../../constants/axis_placeable_objects"),oe.exports=e("shape",{visible:{valType:"boolean",dflt:!0,editType:"calc+arraydraw"},type:{valType:"enumerated",values:["circle","rect","path","line"],editType:"calc+arraydraw"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"arraydraw"},xref:b({},m.xref,{}),xsizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},xanchor:{valType:"any",editType:"calc+arraydraw"},x0:{valType:"any",editType:"calc+arraydraw"},x1:{valType:"any",editType:"calc+arraydraw"},yref:b({},m.yref,{}),ysizemode:{valType:"enumerated",values:["scaled","pixel"],dflt:"scaled",editType:"calc+arraydraw"},yanchor:{valType:"any",editType:"calc+arraydraw"},y0:{valType:"any",editType:"calc+arraydraw"},y1:{valType:"any",editType:"calc+arraydraw"},path:{valType:"string",editType:"calc+arraydraw"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"arraydraw"},line:{color:b({},x.color,{editType:"arraydraw"}),width:b({},x.width,{editType:"calc+arraydraw"}),dash:b({},T,{editType:"arraydraw"}),editType:"calc+arraydraw"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"arraydraw"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"arraydraw"},editable:{valType:"boolean",dflt:!1,editType:"calc+arraydraw"},editType:"arraydraw"})},{"../../constants/axis_placeable_objects":472,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":926,"../annotations/attributes":349,"../drawing/attributes":387}],447:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("./constants"),b=_("./helpers");function e(i){return a(i.line.width,i.xsizemode,i.x0,i.x1,i.path,!1)}function o(i){return a(i.line.width,i.ysizemode,i.y0,i.y1,i.path,!0)}function a(i,d,u,s,c,h){var p=i/2,v=h;if("pixel"===d){var g=c?b.extractPathCoords(c,h?T.paramIsY:T.paramIsX):[u,s],f=m.aggNums(Math.max,null,g),w=m.aggNums(Math.min,null,g),y=w<0?Math.abs(w)+p:p,M=f>0?f+p:p;return{ppad:p,ppadplus:v?y:M,ppadminus:v?M:y}}return{ppad:p}}function l(i,d,u,s,c){var h="category"===i.type||"multicategory"===i.type?i.r2c:i.d2c;if(void 0!==d)return[h(d),h(u)];if(s){var p,v,g,f,w=1/0,y=-1/0,M=s.match(T.segmentRE);for("date"===i.type&&(h=b.decodeDate(h)),p=0;p<M.length;p++)void 0!==(v=c[M[p].charAt(0)].drawn)&&(!(g=M[p].substr(1).match(T.paramRE))||g.length<v||((f=h(g[v]))<w&&(w=f),f>y&&(y=f)));return y>=w?[w,y]:void 0}}oe.exports=function(i){var u=m.filterVisible(i._fullLayout.shapes);if(u.length&&i._fullData.length)for(var s=0;s<u.length;s++){var c,h,p=u[s];p._extremes={};var v=x.getRefType(p.xref),g=x.getRefType(p.yref);if("paper"!==p.xref&&"domain"!==v){var f="pixel"===p.xsizemode?p.xanchor:p.x0,w="pixel"===p.xsizemode?p.xanchor:p.x1;(h=l(c=x.getFromId(i,p.xref),f,w,p.path,T.paramIsX))&&(p._extremes[c._id]=x.findExtremes(c,h,e(p)))}if("paper"!==p.yref&&"domain"!==g){var y="pixel"===p.ysizemode?p.yanchor:p.y0,M="pixel"===p.ysizemode?p.yanchor:p.y1;(h=l(c=x.getFromId(i,p.yref),y,M,p.path,T.paramIsY))&&(p._extremes[c._id]=x.findExtremes(c,h,o(p)))}}}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":448,"./helpers":457}],448:[function(_,oe,ae){"use strict";oe.exports={segmentRE:/[MLHVQCTSZ][^MLHVQCTSZ]*/g,paramRE:/[^\s,]+/g,paramIsX:{M:{0:!0,drawn:0},L:{0:!0,drawn:0},H:{0:!0,drawn:0},V:{},Q:{0:!0,2:!0,drawn:2},C:{0:!0,2:!0,4:!0,drawn:4},T:{0:!0,drawn:0},S:{0:!0,2:!0,drawn:2},Z:{}},paramIsY:{M:{1:!0,drawn:1},L:{1:!0,drawn:1},H:{},V:{0:!0,drawn:0},Q:{1:!0,3:!0,drawn:3},C:{1:!0,3:!0,5:!0,drawn:5},T:{1:!0,drawn:1},S:{1:!0,3:!0,drawn:5},Z:{}},numParams:{M:2,L:2,H:1,V:1,Q:4,C:6,T:2,S:4,Z:0}}},{}],449:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../../plots/array_container_defaults"),b=_("./attributes"),e=_("./helpers");function o(a,l,i){function d(I,B){return m.coerce(a,l,b,I,B)}if(d("visible")){var u=d("path"),s=d("type",u?"path":"rect");"path"!==l.type&&delete l.path,d("editable"),d("layer"),d("opacity"),d("fillcolor"),d("fillrule"),d("line.width")&&(d("line.color"),d("line.dash"));for(var c=d("xsizemode"),h=d("ysizemode"),p=["x","y"],v=0;v<2;v++){var g,f,w,y=p[v],M=y+"anchor",A="x"===y?c:h,k={_fullLayout:i},C=x.coerceRef(a,l,k,y,void 0,"paper");if("range"===x.getRefType(C)?((g=x.getFromId(k,C))._shapeIndices.push(l._index),w=e.rangeToShapePosition(g),f=e.shapePositionToRange(g)):f=w=m.identity,"path"!==s){var P=y+"0",D=y+"1",F=a[P],R=a[D];a[P]=f(a[P],!0),a[D]=f(a[D],!0),"pixel"===A?(d(P,0),d(D,10)):(x.coercePosition(l,k,d,C,P,.25),x.coercePosition(l,k,d,C,D,.75)),l[P]=w(l[P]),l[D]=w(l[D]),a[P]=F,a[D]=R}if("pixel"===A){var L=a[M];a[M]=f(a[M],!0),x.coercePosition(l,k,d,C,M,.25),l[M]=w(l[M]),a[M]=L}}"path"===s?d("path"):m.noneOrAll(a,l,["x0","x1","y0","y1"])}}oe.exports=function(a,l){T(a,l,{name:"shapes",handleItemDefaults:o})}},{"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"./attributes":446,"./helpers":457}],450:[function(_,oe,ae){"use strict";var m=_("../../registry"),x=_("../../lib"),T=_("../../plots/cartesian/axes"),b=_("./draw_newshape/helpers").readPaths,e=_("./draw_newshape/display_outlines"),o=_("../../plots/cartesian/handle_outline").clearOutlineControllers,a=_("../color"),l=_("../drawing"),i=_("../../plot_api/plot_template").arrayEditor,d=_("../dragelement"),u=_("../../lib/setcursor"),s=_("./constants"),c=_("./helpers");function h(A){var k=A._fullLayout;for(var C in k._shapeUpperLayer.selectAll("path").remove(),k._shapeLowerLayer.selectAll("path").remove(),k._plots){var P=k._plots[C].shapelayer;P&&P.selectAll("path").remove()}for(var D=0;D<k.shapes.length;D++)k.shapes[D].visible&&g(A,D)}function p(A){return!!A._fullLayout._drawing}function v(A){return!A._context.edits.shapePosition}function g(A,k){A._fullLayout._paperdiv.selectAll('.shapelayer [data-index="'+k+'"]').remove();var C=c.makeOptionsAndPlotinfo(A,k),P=C.options,D=C.plotinfo;P._input&&!1!==P.visible&&function F(R){var L=w(A,P),I={"data-index":k,"fill-rule":P.fillrule,d:L},B=P.opacity,V=P.fillcolor,Z=P.line.width?P.line.color:"rgba(0,0,0,0)",Y=P.line.width,ee=P.line.dash;Y||!0!==P.editable||(Y=5,ee="solid");var J="Z"!==L[L.length-1],$=v(A)&&P.editable&&A._fullLayout._activeShapeIndex===k;$&&(V=J?"rgba(0,0,0,0)":A._fullLayout.activeshape.fillcolor,B=A._fullLayout.activeshape.opacity);var Q,se=R.append("path").attr(I).style("opacity",B).call(a.stroke,Z).call(a.fill,V).call(l.dashLine,ee,Y);if(f(se,A,P),($||A._context.edits.shapePosition)&&(Q=i(A.layout,"shapes",P)),$){se.style({cursor:"move"});var j={element:se.node(),plotinfo:D,gd:A,editHelpers:Q,isActiveShape:!0},G=b(L,A);e(G,se,j)}else A._context.edits.shapePosition?function(W,ie,q,te,ne,le){var ue,de,he,be,ge,we,Ce,De,Se,Fe,ve,Te,Le,Ee,Pe,je,Ge="pixel"===q.xsizemode,Ke="pixel"===q.ysizemode,lt="line"===q.type,Ue="path"===q.type,$e=le.modifyItem,et=T.getFromId(W,q.xref),tt=T.getRefType(q.xref),ct=T.getFromId(W,q.yref),xt=T.getRefType(q.yref),Ct=c.getDataToPixel(W,et,!1,tt),Ht=c.getDataToPixel(W,ct,!0,xt),zt=c.getPixelToData(W,et,!1,tt),ht=c.getPixelToData(W,ct,!0,xt),ut=lt?function(){var it=Math.max(q.line.width,10),Ie=ne.append("g").attr("data-index",te);Ie.append("path").attr("d",ie.attr("d")).style({cursor:"move","stroke-width":it,"stroke-opacity":"0"});var ze={"fill-opacity":"0"},Ve=Math.max(it/2,10);return Ie.append("circle").attr({"data-line-point":"start-point",cx:Ge?Ct(q.xanchor)+q.x0:Ct(q.x0),cy:Ke?Ht(q.yanchor)-q.y0:Ht(q.y0),r:Ve}).style(ze).classed("cursor-grab",!0),Ie.append("circle").attr({"data-line-point":"end-point",cx:Ge?Ct(q.xanchor)+q.x1:Ct(q.x1),cy:Ke?Ht(q.yanchor)-q.y1:Ht(q.y1),r:Ve}).style(ze).classed("cursor-grab",!0),Ie}():ie,Ot={element:ut.node(),gd:W,prepFn:function(it){var Ie,ze,Ve,Be,at,gt,wt,_t;p(W)||(Ge&&(ge=Ct(q.xanchor)),Ke&&(we=Ht(q.yanchor)),"path"===q.type?Pe=q.path:(ue=Ge?q.x0:Ct(q.x0),de=Ke?q.y0:Ht(q.y0),he=Ge?q.x1:Ct(q.x1),be=Ke?q.y1:Ht(q.y1)),ue<he?(Se=ue,Le="x0",Fe=he,Ee="x1"):(Se=he,Le="x1",Fe=ue,Ee="x0"),!Ke&&de<be||Ke&&de>be?(Ce=de,ve="y0",De=be,Te="y1"):(Ce=be,ve="y1",De=de,Te="y0"),tn(it),Qe(ne,q),Ie=ie,at=(ze=q).yref,gt=T.getFromId(Ve=W,Be=ze.xref),wt=T.getFromId(Ve,at),_t="","paper"===Be||gt.autorange||(_t+=Be),"paper"===at||wt.autorange||(_t+=at),l.setClipUrl(Ie,_t?"clip"+Ve._fullLayout._uid+_t:null,Ve),Ot.moveFn="move"===je?un:Ze,Ot.altKey=it.altKey)},doneFn:function(){p(W)||(u(ie),qe(ne),f(ie,W,q),m.call("_guiRelayout",W,le.getUpdateObj()))},clickFn:function(){p(W)||qe(ne)}};function tn(it){if(p(W))je=null;else if(lt)je="path"===it.target.tagName?"move":"start-point"===it.target.attributes["data-line-point"].value?"resize-over-start-point":"resize-over-end-point";else{var Ie=Ot.element.getBoundingClientRect(),ze=Ie.right-Ie.left,Ve=Ie.bottom-Ie.top,gt=!Ue&&ze>10&&Ve>10&&!it.shiftKey?d.getCursor((it.clientX-Ie.left)/ze,1-(it.clientY-Ie.top)/Ve):"move";u(ie,gt),je=gt.split("-")[0]}}function un(it,Ie){if("path"===q.type){var ze=function(at){return at},Ve=ze,Be=ze;Ge?$e("xanchor",q.xanchor=zt(ge+it)):(Ve=function(at){return zt(Ct(at)+it)},et&&"date"===et.type&&(Ve=c.encodeDate(Ve))),Ke?$e("yanchor",q.yanchor=ht(we+Ie)):(Be=function(at){return ht(Ht(at)+Ie)},ct&&"date"===ct.type&&(Be=c.encodeDate(Be))),$e("path",q.path=y(Pe,Ve,Be))}else Ge?$e("xanchor",q.xanchor=zt(ge+it)):($e("x0",q.x0=zt(ue+it)),$e("x1",q.x1=zt(he+it))),Ke?$e("yanchor",q.yanchor=ht(we+Ie)):($e("y0",q.y0=ht(de+Ie)),$e("y1",q.y1=ht(be+Ie)));ie.attr("d",w(W,q)),Qe(ne,q)}function Ze(it,Ie){if(Ue){var ze=function(He){return He},Ve=ze,Be=ze;Ge?$e("xanchor",q.xanchor=zt(ge+it)):(Ve=function(He){return zt(Ct(He)+it)},et&&"date"===et.type&&(Ve=c.encodeDate(Ve))),Ke?$e("yanchor",q.yanchor=ht(we+Ie)):(Be=function(He){return ht(Ht(He)+Ie)},ct&&"date"===ct.type&&(Be=c.encodeDate(Be))),$e("path",q.path=y(Pe,Ve,Be))}else if(lt){if("resize-over-start-point"===je){var at=ue+it,gt=Ke?de-Ie:de+Ie;$e("x0",q.x0=Ge?at:zt(at)),$e("y0",q.y0=Ke?gt:ht(gt))}else if("resize-over-end-point"===je){var wt=he+it,_t=Ke?be-Ie:be+Ie;$e("x1",q.x1=Ge?wt:zt(wt)),$e("y1",q.y1=Ke?_t:ht(_t))}}else{var Rt=function(He){return-1!==je.indexOf(He)},yt=Rt("n"),Vt=Rt("s"),Nt=Rt("w"),rt=Rt("e"),Tt=yt?Ce+Ie:Ce,Ut=Vt?De+Ie:De,Wt=Nt?Se+it:Se,sn=rt?Fe+it:Fe;Ke&&(yt&&(Tt=Ce-Ie),Vt&&(Ut=De-Ie)),(!Ke&&Ut-Tt>10||Ke&&Tt-Ut>10)&&($e(ve,q[ve]=Ke?Tt:ht(Tt)),$e(Te,q[Te]=Ke?Ut:ht(Ut))),sn-Wt>10&&($e(Le,q[Le]=Ge?Wt:zt(Wt)),$e(Ee,q[Ee]=Ge?sn:zt(sn)))}ie.attr("d",w(W,q)),Qe(ne,q)}function Qe(it,Ie){(Ge||Ke)&&function(){var ze="path"!==Ie.type,Ve=it.selectAll(".visual-cue").data([0]);Ve.enter().append("path").attr({fill:"#fff","fill-rule":"evenodd",stroke:"#000","stroke-width":1}).classed("visual-cue",!0);var Be=Ct(Ge?Ie.xanchor:x.midRange(ze?[Ie.x0,Ie.x1]:c.extractPathCoords(Ie.path,s.paramIsX))),at=Ht(Ke?Ie.yanchor:x.midRange(ze?[Ie.y0,Ie.y1]:c.extractPathCoords(Ie.path,s.paramIsY)));Be=c.roundPositionForSharpStrokeRendering(Be,1),at=c.roundPositionForSharpStrokeRendering(at,1),Ve.attr("d",Ge&&Ke?"M"+(Be-1-1)+","+(at-1-1)+"h-8v2h8 v8h2v-8 h8v-2h-8 v-8h-2 Z":Ge?"M"+(Be-1-1)+","+(at-9-1)+"v18 h2 v-18 Z":"M"+(Be-9-1)+","+(at-1-1)+"h18 v2 h-18 Z")}()}function qe(it){it.selectAll(".visual-cue").remove()}d.init(Ot),ut.node().onmousemove=tn}(A,se,P,k,R,Q):!0===P.editable&&se.style("pointer-events",J||a.opacity(V)*B<=.5?"stroke":"all");se.node().addEventListener("click",function(){return function(W,ie){if(v(W)){var q=+ie.node().getAttribute("data-index");if(q>=0){if(q===W._fullLayout._activeShapeIndex)return void M(W);W._fullLayout._activeShapeIndex=q,W._fullLayout._deactivateShape=M,h(W)}}}(A,se)})}("below"!==P.layer?A._fullLayout._shapeUpperLayer:"paper"===P.xref||"paper"===P.yref?A._fullLayout._shapeLowerLayer:D._hadPlotinfo?(D.mainplotinfo||D).shapelayer:A._fullLayout._shapeLowerLayer)}function f(A,k,C){var P=(C.xref+C.yref).replace(/paper/g,"").replace(/[xyz][1-9]* *domain/g,"");l.setClipUrl(A,P?"clip"+k._fullLayout._uid+P:null,k)}function w(A,k){var C,P,D,F,R,L,I,B,ne,le,ue,he,be,ge,we,V=k.type,Z=T.getRefType(k.xref),Y=T.getRefType(k.yref),ee=T.getFromId(A,k.xref),J=T.getFromId(A,k.yref),$=A._fullLayout._size;if(ee?"domain"===Z?P=function(ne){return ee._offset+ee._length*ne}:(C=c.shapePositionToRange(ee),P=function(ne){return ee._offset+ee.r2p(C(ne,!0))}):P=function(ne){return $.l+$.w*ne},J?"domain"===Y?F=function(ne){return J._offset+J._length*(1-ne)}:(D=c.shapePositionToRange(J),F=function(ne){return J._offset+J.r2p(D(ne,!0))}):F=function(ne){return $.t+$.h*(1-ne)},"path"===V)return ee&&"date"===ee.type&&(P=c.decodeDate(P)),J&&"date"===J.type&&(F=c.decodeDate(F)),le=P,ue=F,he=(ne=k).xsizemode,be=ne.ysizemode,ge=ne.xanchor,we=ne.yanchor,ne.path.replace(s.segmentRE,function(Ce){var De=0,Se=Ce.charAt(0),Fe=s.paramIsX[Se],ve=s.paramIsY[Se],Te=s.numParams[Se],Le=Ce.substr(1).replace(s.paramRE,function(Ee){return Fe[De]?Ee="pixel"===he?le(ge)+Number(Ee):le(Ee):ve[De]&&(Ee="pixel"===be?ue(we)-Number(Ee):ue(Ee)),++De>Te&&(Ee="X"),Ee});return De>Te&&(Le=Le.replace(/[\s,]*X.*/,""),x.log("Ignoring extra params in segment "+Ce)),Se+Le});if("pixel"===k.xsizemode){var Q=P(k.xanchor);R=Q+k.x0,L=Q+k.x1}else R=P(k.x0),L=P(k.x1);if("pixel"===k.ysizemode){var se=F(k.yanchor);I=se-k.y0,B=se-k.y1}else I=F(k.y0),B=F(k.y1);if("line"===V)return"M"+R+","+I+"L"+L+","+B;if("rect"===V)return"M"+R+","+I+"H"+L+"V"+B+"H"+R+"Z";var j=(R+L)/2,G=(I+B)/2,W=Math.abs(j-R),ie=Math.abs(G-I),q="A"+W+","+ie,te=j+W+","+G;return"M"+te+q+" 0 1,1 "+j+","+(G-ie)+q+" 0 0,1 "+te+"Z"}function y(A,k,C){return A.replace(s.segmentRE,function(P){var D=0,F=P.charAt(0),R=s.paramIsX[F],L=s.paramIsY[F],I=s.numParams[F];return F+P.substr(1).replace(s.paramRE,function(B){return D>=I||(R[D]?B=k(B):L[D]&&(B=C(B)),D++),B})})}function M(A){v(A)&&A._fullLayout._activeShapeIndex>=0&&(o(A),delete A._fullLayout._activeShapeIndex,h(A))}oe.exports={draw:h,drawOne:g,eraseActiveShape:function(A){if(v(A)){o(A);var k=A._fullLayout._activeShapeIndex,C=(A.layout||{}).shapes||[];if(k<C.length){for(var P=[],D=0;D<C.length;D++)D!==k&&P.push(C[D]);delete A._fullLayout._activeShapeIndex,m.call("_guiRelayout",A,{shapes:P})}}}}},{"../../lib":503,"../../lib/setcursor":524,"../../plot_api/plot_template":543,"../../plots/cartesian/axes":554,"../../plots/cartesian/handle_outline":565,"../../registry":638,"../color":366,"../dragelement":385,"../drawing":388,"./constants":448,"./draw_newshape/display_outlines":454,"./draw_newshape/helpers":455,"./helpers":457}],451:[function(_,oe,ae){"use strict";var m=_("../../drawing/attributes").dash,x=_("../../../lib/extend").extendFlat;oe.exports={newshape:{line:{color:{valType:"color",editType:"none"},width:{valType:"number",min:0,dflt:4,editType:"none"},dash:x({},m,{dflt:"solid",editType:"none"}),editType:"none"},fillcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"none"},fillrule:{valType:"enumerated",values:["evenodd","nonzero"],dflt:"evenodd",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"none"},layer:{valType:"enumerated",values:["below","above"],dflt:"above",editType:"none"},drawdirection:{valType:"enumerated",values:["ortho","horizontal","vertical","diagonal"],dflt:"diagonal",editType:"none"},editType:"none"},activeshape:{fillcolor:{valType:"color",dflt:"rgb(255,0,255)",editType:"none"},opacity:{valType:"number",min:0,max:1,dflt:.5,editType:"none"},editType:"none"}}},{"../../../lib/extend":493,"../../drawing/attributes":387}],452:[function(_,oe,ae){"use strict";oe.exports={CIRCLE_SIDES:32,i000:0,i090:8,i180:16,i270:24,cos45:Math.cos(Math.PI/4),sin45:Math.sin(Math.PI/4),SQRT2:Math.sqrt(2)}},{}],453:[function(_,oe,ae){"use strict";var m=_("../../color");oe.exports=function(x,T,b){b("newshape.drawdirection"),b("newshape.layer"),b("newshape.fillcolor"),b("newshape.fillrule"),b("newshape.opacity"),b("newshape.line.width")&&(b("newshape.line.color",m.contrast((x||{}).plot_bgcolor||"#FFF")),b("newshape.line.dash")),b("activeshape.fillcolor"),b("activeshape.opacity")}},{"../../color":366}],454:[function(_,oe,ae){"use strict";var m=_("../../dragelement"),x=_("../../dragelement/helpers").drawMode,T=_("../../../registry"),b=_("./constants"),e=b.i000,o=b.i090,a=b.i180,l=b.i270,i=_("../../../plots/cartesian/handle_outline").clearOutlineControllers,d=_("./helpers"),u=d.pointsShapeRectangle,s=d.pointsShapeEllipse,c=d.writePaths,h=_("./newshapes");oe.exports=function p(v,g,f,w){w||(w=0);var y=f.gd;function M(){p(v,g,f,w++),s(v[0])&&A({redrawing:!0})}function A(Q){f.isActiveShape=!1;var se=h(g,f);Object.keys(se).length&&T.call((Q||{}).redrawing?"relayout":"_guiRelayout",y,se)}var k,C,P,D,F,R=f.isActiveShape,L=y._fullLayout._zoomlayer;function B(Q){P=+Q.srcElement.getAttribute("data-i"),D=+Q.srcElement.getAttribute("data-j"),k[P][D].moveFn=V}function V(Q,se){if(v.length){var j=F[P][D][1],G=F[P][D][2],W=v[P],ie=W.length;if(u(W)){for(var q=0;q<ie;q++)if(q!==D){var te=W[q];te[1]===W[D][1]&&(te[1]=j+Q),te[2]===W[D][2]&&(te[2]=G+se)}if(W[D][1]=j+Q,W[D][2]=G+se,!u(W))for(var ne=0;ne<ie;ne++)for(var le=0;le<W[ne].length;le++)W[ne][le]=F[P][ne][le]}else W[D][1]=j+Q,W[D][2]=G+se;M()}}function Z(){A()}function Y(Q,se){if(2===Q){P=+se.srcElement.getAttribute("data-i"),D=+se.srcElement.getAttribute("data-j");var j=v[P];u(j)||s(j)||function(){if(v.length&&v[P]&&v[P].length){for(var G=[],W=0;W<v[P].length;W++)W!==D&&G.push(v[P][W]);G.length>1&&(2!==G.length||"Z"!==G[1][0])&&(0===D&&(G[0][0]="M"),v[P]=G,M(),A())}}()}}function ee(Q,se){(function(j,G){if(v.length)for(var W=0;W<v.length;W++)for(var ie=0;ie<v[W].length;ie++)for(var q=0;q+2<v[W][ie].length;q+=2)v[W][ie][q+1]=F[W][ie][q+1]+j,v[W][ie][q+2]=F[W][ie][q+2]+G})(Q,se),M()}x(f.dragmode)?y._fullLayout._drawing=!0:y._fullLayout._activeShapeIndex>=0&&i(y),g.attr("d",c(v)),R&&!w&&(F=function(Q,se){for(var j=0;j<se.length;j++){var G=se[j];Q[j]=[];for(var W=0;W<G.length;W++){Q[j][W]=[];for(var ie=0;ie<G[W].length;ie++)Q[j][W][ie]=G[W][ie]}}return Q}([],v),function(Q){k=[];for(var se=0;se<v.length;se++){var j=v[se],G=!u(j)&&s(j);k[se]=[];for(var W=0;W<j.length;W++)if("Z"!==j[W][0]&&(!G||W===e||W===o||W===a||W===l)){var ie=j[W][1],q=j[W][2],te=Q.append("circle").classed("cursor-grab",!0).attr("data-i",se).attr("data-j",W).attr("cx",ie).attr("cy",q).attr("r",4).style({"mix-blend-mode":"luminosity",fill:"black",stroke:"white","stroke-width":1});k[se][W]={element:te.node(),gd:y,prepFn:B,doneFn:Z,clickFn:Y},m.init(k[se][W])}}}(L.append("g").attr("class","outline-controllers")),C=[],v.length&&(C[0]={element:g[0][0],gd:y,prepFn:function J(Q){(P=+Q.srcElement.getAttribute("data-i"))||(P=0),C[P].moveFn=ee},doneFn:function $(){A()}},m.init(C[0])))}},{"../../../plots/cartesian/handle_outline":565,"../../../registry":638,"../../dragelement":385,"../../dragelement/helpers":384,"./constants":452,"./helpers":455,"./newshapes":456}],455:[function(_,oe,ae){"use strict";var m=_("parse-svg-path"),x=_("./constants"),T=x.CIRCLE_SIDES,b=x.SQRT2,e=_("../../../plots/cartesian/helpers"),o=e.p2r,a=e.r2p,l=[0,3,4,5,6,1,2],i=[0,3,4,1,2];function d(s,c){return Math.abs(s-c)<=1e-6}function u(s,c){var h=c[1]-s[1],p=c[2]-s[2];return Math.sqrt(h*h+p*p)}ae.writePaths=function(s){var c=s.length;if(!c)return"M0,0Z";for(var h="",p=0;p<c;p++)for(var v=s[p].length,g=0;g<v;g++){var f=s[p][g][0];if("Z"===f)h+="Z";else for(var w=s[p][g].length,y=0;y<w;y++){var M=y;"Q"===f||"S"===f?M=i[y]:"C"===f&&(M=l[y]),h+=s[p][g][M],y>0&&y<w-1&&(h+=",")}}return h},ae.readPaths=function(s,c,h,p){var v,g,f,w=m(s),y=[],M=-1,A=0,k=0,C=function(){g=A,f=k};C();for(var P=0;P<w.length;P++){var I=[],B=w[P][0],V=B;switch(B){case"M":y[++M]=[],I.push([V,A=+w[P][1],k=+w[P][2]]),C();break;case"Q":case"S":I.push([V,A=+w[P][3],k=+w[P][4],+w[P][1],+w[P][2]]);break;case"C":I.push([V,A=+w[P][5],k=+w[P][6],+w[P][1],+w[P][2],+w[P][3],+w[P][4]]);break;case"T":case"L":I.push([V,A=+w[P][1],k=+w[P][2]]);break;case"H":I.push([V="L",A=+w[P][1],k]);break;case"V":I.push([V="L",A,k=+w[P][1]]);break;case"A":V="L";var Z=+w[P][1],Y=+w[P][2];+w[P][4]||(Z=-Z,Y=-Y);var ee=A-Z,J=k;for(v=1;v<=T/2;v++){var $=2*Math.PI*v/T;I.push([V,ee+Z*Math.cos($),J+Y*Math.sin($)])}break;case"Z":A===g&&k===f||I.push([V,A=g,k=f])}for(var Q=(h||{}).domain,se=c._fullLayout._size,j=h&&"pixel"===h.xsizemode,G=h&&"pixel"===h.ysizemode,W=!1===p,ie=0;ie<I.length;ie++){for(v=0;v+2<7;v+=2){var q=I[ie][v+1],te=I[ie][v+2];void 0!==q&&void 0!==te&&(A=q,k=te,h&&(h.xaxis&&h.xaxis.p2r?(W&&(q-=h.xaxis._offset),q=j?a(h.xaxis,h.xanchor)+q:o(h.xaxis,q)):(W&&(q-=se.l),Q?q=Q.x[0]+q/se.w:q/=se.w),h.yaxis&&h.yaxis.p2r?(W&&(te-=h.yaxis._offset),te=G?a(h.yaxis,h.yanchor)-te:o(h.yaxis,te)):(W&&(te-=se.t),te=Q?Q.y[1]-te/se.h:1-te/se.h)),I[ie][v+1]=q,I[ie][v+2]=te)}y[M].push(I[ie].slice())}}return y},ae.pointsShapeRectangle=function(s){if(5!==s.length)return!1;for(var c=1;c<3;c++)if(!d(s[0][c]-s[1][c],s[3][c]-s[2][c])||!d(s[0][c]-s[3][c],s[1][c]-s[2][c]))return!1;return!(!d(s[0][1],s[1][1])&&!d(s[0][1],s[3][1])||!(u(s[0],s[1])*u(s[0],s[3])))},ae.pointsShapeEllipse=function(s){var c=s.length;if(c!==T+1)return!1;c=T;for(var h=0;h<c;h++){var p=(2*c-h)%c,v=(c/2+p)%c;if(!d(u(s[h],s[(c/2+h)%c]),u(s[p],s[v])))return!1}return!0},ae.handleEllipse=function(s,c,h){if(!s)return[c,h];var p=ae.ellipseOver({x0:c[0],y0:c[1],x1:h[0],y1:h[1]}),v=(p.x1+p.x0)/2,g=(p.y1+p.y0)/2,f=(p.x1-p.x0)/2,w=(p.y1-p.y0)/2;f||(f=w/=b),w||(w=f/=b);for(var y=[],M=0;M<T;M++){var A=2*M*Math.PI/T;y.push([v+f*Math.cos(A),g+w*Math.sin(A)])}return y},ae.ellipseOver=function(s){var c=s.x0,h=s.y0,p=s.x1,v=s.y1,g=p-c,f=v-h,w=((c-=g)+p)/2,y=((h-=f)+v)/2;return{x0:w-(g*=b),y0:y-(f*=b),x1:w+g,y1:y+f}}},{"../../../plots/cartesian/helpers":566,"./constants":452,"parse-svg-path":250}],456:[function(_,oe,ae){"use strict";var m=_("../../dragelement/helpers"),x=m.drawMode,T=m.openMode,b=_("./constants"),e=b.i000,o=b.i090,a=b.i180,l=b.i270,i=b.cos45,d=b.sin45,u=_("../../../plots/cartesian/helpers"),s=u.p2r,c=u.r2p,h=_("../../../plots/cartesian/handle_outline").clearSelect,p=_("./helpers"),v=p.readPaths,g=p.writePaths,f=p.ellipseOver;oe.exports=function(w,y){if(w.length){var M=w[0][0];if(M){var A=M.getAttribute("d"),k=y.gd,C=k._fullLayout.newshape,P=y.plotinfo,D=P.xaxis,F=P.yaxis,R=!!P.domain||!P.xaxis,L=!!P.domain||!P.yaxis,I=y.isActiveShape,B=y.dragmode,V=(k.layout||{}).shapes||[];if(!x(B)&&void 0!==I){var Z=k._fullLayout._activeShapeIndex;if(Z<V.length)switch(k._fullLayout.shapes[Z].type){case"rect":B="drawrect";break;case"circle":B="drawcircle";break;case"line":B="drawline";break;case"path":var Y=V[Z].path||"";B="Z"===Y[Y.length-1]?"drawclosedpath":"drawopenpath"}}var ee,J=T(B),$=v(A,k,P,I),Q={editable:!0,xref:R?"paper":D._id,yref:L?"paper":F._id,layer:C.layer,opacity:C.opacity,line:{color:C.line.color,width:C.line.width,dash:C.line.dash}};if(J||(Q.fillcolor=C.fillcolor,Q.fillrule=C.fillrule),1===$.length&&(ee=$[0]),ee&&"drawrect"===B)Q.type="rect",Q.x0=ee[0][1],Q.y0=ee[0][2],Q.x1=ee[2][1],Q.y1=ee[2][2];else if(ee&&"drawline"===B)Q.type="line",Q.x0=ee[0][1],Q.y0=ee[0][2],Q.x1=ee[1][1],Q.y1=ee[1][2];else if(ee&&"drawcircle"===B){Q.type="circle";var se=ee[e][1],j=ee[o][1],G=ee[a][1],W=ee[l][1],ie=ee[e][2],q=ee[o][2],te=ee[a][2],ne=ee[l][2],le=P.xaxis&&("date"===P.xaxis.type||"log"===P.xaxis.type),ue=P.yaxis&&("date"===P.yaxis.type||"log"===P.yaxis.type);le&&(se=c(P.xaxis,se),j=c(P.xaxis,j),G=c(P.xaxis,G),W=c(P.xaxis,W)),ue&&(ie=c(P.yaxis,ie),q=c(P.yaxis,q),te=c(P.yaxis,te),ne=c(P.yaxis,ne));var de=(j+W)/2,he=(ie+te)/2,be=f({x0:de,y0:he,x1:de+(W-j+G-se)/2*i,y1:he+(ne-q+te-ie)/2*d});le&&(be.x0=s(P.xaxis,be.x0),be.x1=s(P.xaxis,be.x1)),ue&&(be.y0=s(P.yaxis,be.y0),be.y1=s(P.yaxis,be.y1)),Q.x0=be.x0,Q.y0=be.y0,Q.x1=be.x1,Q.y1=be.y1}else Q.type="path",D&&F&&function(ve,Te,Le){var Ee="date"===Te.type,Pe="date"===Le.type;if(!Ee&&!Pe)return ve;for(var je=0;je<ve.length;je++)for(var Ge=0;Ge<ve[je].length;Ge++)for(var Ke=0;Ke+2<ve[je][Ge].length;Ke+=2)Ee&&(ve[je][Ge][Ke+1]=ve[je][Ge][Ke+1].replace(" ","_")),Pe&&(ve[je][Ge][Ke+2]=ve[je][Ge][Ke+2].replace(" ","_"))}($,D,F),Q.path=g($),ee=null;h(k);for(var ge=y.editHelpers,we=(ge||{}).modifyItem,Ce=[],De=0;De<V.length;De++){var Se=k._fullLayout.shapes[De];if(Ce[De]=Se._input,void 0!==I&&De===k._fullLayout._activeShapeIndex){var Fe=Q;switch(Se.type){case"line":case"rect":case"circle":we("x0",Fe.x0),we("x1",Fe.x1),we("y0",Fe.y0),we("y1",Fe.y1);break;case"path":we("path",Fe.path)}}}return void 0===I?(Ce.push(Q),Ce):ge?ge.getUpdateObj():{}}}}},{"../../../plots/cartesian/handle_outline":565,"../../../plots/cartesian/helpers":566,"../../dragelement/helpers":384,"./constants":452,"./helpers":455}],457:[function(_,oe,ae){"use strict";var m=_("./constants"),x=_("../../lib");ae.rangeToShapePosition=function(T){return"log"===T.type?T.r2d:function(b){return b}},ae.shapePositionToRange=function(T){return"log"===T.type?T.d2r:function(b){return b}},ae.decodeDate=function(T){return function(b){return b.replace&&(b=b.replace("_"," ")),T(b)}},ae.encodeDate=function(T){return function(b){return T(b).replace(" ","_")}},ae.extractPathCoords=function(T,b){var e=[];return T.match(m.segmentRE).forEach(function(o){var a=b[o.charAt(0)].drawn;if(void 0!==a){var l=o.substr(1).match(m.paramRE);!l||l.length<a||e.push(x.cleanNumber(l[a]))}}),e},ae.getDataToPixel=function(T,b,e,o){var a,l=T._fullLayout._size;if(b)if("domain"===o)a=function(d){return b._length*(e?1-d:d)+b._offset};else{var i=ae.shapePositionToRange(b);a=function(d){return b._offset+b.r2p(i(d,!0))},"date"===b.type&&(a=ae.decodeDate(a))}else a=e?function(d){return l.t+l.h*(1-d)}:function(d){return l.l+l.w*d};return a},ae.getPixelToData=function(T,b,e,o){var a,l=T._fullLayout._size;if(b)if("domain"===o)a=function(d){var u=(d-b._offset)/b._length;return e?1-u:u};else{var i=ae.rangeToShapePosition(b);a=function(d){return i(b.p2r(d-b._offset))}}else a=e?function(d){return 1-(d-l.t)/l.h}:function(d){return(d-l.l)/l.w};return a},ae.roundPositionForSharpStrokeRendering=function(T,b){var e=1===Math.round(b%2),o=Math.round(T);return e?o+.5:o},ae.makeOptionsAndPlotinfo=function(T,b){var e=T._fullLayout.shapes[b]||{},o=T._fullLayout._plots[e.xref+e.yref];return o?o._hadPlotinfo=!0:(o={},e.xref&&"paper"!==e.xref&&(o.xaxis=T._fullLayout[e.xref+"axis"]),e.yref&&"paper"!==e.yref&&(o.yaxis=T._fullLayout[e.yref+"axis"])),o.xsizemode=e.xsizemode,o.ysizemode=e.ysizemode,o.xanchor=e.xanchor,o.yanchor=e.yanchor,{options:e,plotinfo:o}}},{"../../lib":503,"./constants":448}],458:[function(_,oe,ae){"use strict";var m=_("./draw");oe.exports={moduleType:"component",name:"shapes",layoutAttributes:_("./attributes"),supplyLayoutDefaults:_("./defaults"),supplyDrawNewShapeDefaults:_("./draw_newshape/defaults"),includeBasePlot:_("../../plots/cartesian/include_components")("shapes"),calcAutorange:_("./calc_autorange"),draw:m.draw,drawOne:m.drawOne}},{"../../plots/cartesian/include_components":567,"./attributes":446,"./calc_autorange":447,"./defaults":449,"./draw":450,"./draw_newshape/defaults":453}],459:[function(_,oe,ae){"use strict";var m=_("../../plots/font_attributes"),x=_("../../plots/pad_attributes"),T=_("../../lib/extend").extendDeepAll,b=_("../../plot_api/edit_types").overrideAll,e=_("../../plots/animation_attributes"),o=_("../../plot_api/plot_template").templatedArray,a=_("./constants"),l=o("step",{visible:{valType:"boolean",dflt:!0},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string"},value:{valType:"string"},execute:{valType:"boolean",dflt:!0}});oe.exports=b(o("slider",{visible:{valType:"boolean",dflt:!0},active:{valType:"number",min:0,dflt:0},steps:l,lenmode:{valType:"enumerated",values:["fraction","pixels"],dflt:"fraction"},len:{valType:"number",min:0,dflt:1},x:{valType:"number",min:-2,max:3,dflt:0},pad:T(x({editType:"arraydraw"}),{},{t:{dflt:20}}),xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"left"},y:{valType:"number",min:-2,max:3,dflt:0},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},transition:{duration:{valType:"number",min:0,dflt:150},easing:{valType:"enumerated",values:e.transition.easing.values,dflt:"cubic-in-out"}},currentvalue:{visible:{valType:"boolean",dflt:!0},xanchor:{valType:"enumerated",values:["left","center","right"],dflt:"left"},offset:{valType:"number",dflt:10},prefix:{valType:"string"},suffix:{valType:"string"},font:m({})},font:m({}),activebgcolor:{valType:"color",dflt:a.gripBgActiveColor},bgcolor:{valType:"color",dflt:a.railBgColor},bordercolor:{valType:"color",dflt:a.railBorderColor},borderwidth:{valType:"number",min:0,dflt:a.railBorderWidth},ticklen:{valType:"number",min:0,dflt:a.tickLength},tickcolor:{valType:"color",dflt:a.tickColor},tickwidth:{valType:"number",min:0,dflt:1},minorticklen:{valType:"number",min:0,dflt:a.minorTickLength}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/animation_attributes":548,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"./constants":460}],460:[function(_,oe,ae){"use strict";oe.exports={name:"sliders",containerClassName:"slider-container",groupClassName:"slider-group",inputAreaClass:"slider-input-area",railRectClass:"slider-rail-rect",railTouchRectClass:"slider-rail-touch-rect",gripRectClass:"slider-grip-rect",tickRectClass:"slider-tick-rect",inputProxyClass:"slider-input-proxy",labelsClass:"slider-labels",labelGroupClass:"slider-label-group",labelClass:"slider-label",currentValueClass:"slider-current-value",railHeight:5,menuIndexAttrName:"slider-active-index",autoMarginIdRoot:"slider-",minWidth:30,minHeight:30,textPadX:40,arrowOffsetX:4,railRadius:2,railWidth:5,railBorder:4,railBorderWidth:1,railBorderColor:"#bec8d9",railBgColor:"#f8fafc",railInset:8,stepInset:10,gripRadius:10,gripWidth:20,gripHeight:20,gripBorder:20,gripBorderWidth:1,gripBorderColor:"#bec8d9",gripBgColor:"#f6f8fa",gripBgActiveColor:"#dbdde0",labelPadding:8,labelOffset:0,tickWidth:1,tickColor:"#333",tickOffset:25,tickLength:7,minorTickOffset:25,minorTickColor:"#333",minorTickLength:4,currentValuePadding:8,currentValueInset:0}},{}],461:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../plots/array_container_defaults"),T=_("./attributes"),b=_("./constants").name,e=T.steps;function o(l,i,d){function u(v,g){return m.coerce(l,i,T,v,g)}for(var s=x(l,i,{name:"steps",handleItemDefaults:a}),c=0,h=0;h<s.length;h++)s[h].visible&&c++;if(c<2?i.visible=!1:u("visible")){i._stepCount=c;var p=i._visibleSteps=m.filterVisible(s);(s[u("active")]||{}).visible||(i.active=p[0]._index),u("x"),u("y"),m.noneOrAll(l,i,["x","y"]),u("xanchor"),u("yanchor"),u("len"),u("lenmode"),u("pad.t"),u("pad.r"),u("pad.b"),u("pad.l"),m.coerceFont(u,"font",d.font),u("currentvalue.visible")&&(u("currentvalue.xanchor"),u("currentvalue.prefix"),u("currentvalue.suffix"),u("currentvalue.offset"),m.coerceFont(u,"currentvalue.font",i.font)),u("transition.duration"),u("transition.easing"),u("bgcolor"),u("activebgcolor"),u("bordercolor"),u("borderwidth"),u("ticklen"),u("tickwidth"),u("tickcolor"),u("minorticklen")}}function a(l,i){function d(s,c){return m.coerce(l,i,e,s,c)}if("skip"===l.method||Array.isArray(l.args)?d("visible"):i.visible=!1){d("method"),d("args");var u=d("label","step-"+i._index);d("value",u),d("execute")}}oe.exports=function(l,i){x(l,i,{name:b,handleItemDefaults:o})}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":459,"./constants":460}],462:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../plots/plots"),T=_("../color"),b=_("../drawing"),e=_("../../lib"),o=e.strTranslate,a=_("../../lib/svg_text_utils"),l=_("../../plot_api/plot_template").arrayEditor,i=_("./constants"),d=_("../../constants/alignment"),u=d.LINE_SPACING,s=d.FROM_TL,c=d.FROM_BR;function h(I){return i.autoMarginIdRoot+I._index}function p(I){return I._index}function v(I,B){var V=b.tester.selectAll("g."+i.labelGroupClass).data(B._visibleSteps);V.enter().append("g").classed(i.labelGroupClass,!0);var Z=0,Y=0;V.each(function(ie){var q=w(m.select(this),{step:ie},B).node();if(q){var te=b.bBox(q);Y=Math.max(Y,te.height),Z=Math.max(Z,te.width)}}),V.remove();var ee=B._dims={};ee.inputAreaWidth=Math.max(i.railWidth,i.gripHeight);var J=I._fullLayout._size;if(ee.lx=J.l+J.w*B.x,ee.ly=J.t+J.h*(1-B.y),ee.outerLength="fraction"===B.lenmode?Math.round(J.w*B.len):B.len,ee.inputAreaStart=0,ee.inputAreaLength=Math.round(ee.outerLength-B.pad.l-B.pad.r),ee.labelStride=Math.max(1,Math.ceil((Z+i.labelPadding)/((ee.inputAreaLength-2*i.stepInset)/(B._stepCount-1)))),ee.labelHeight=Y,ee.currentValueMaxWidth=0,ee.currentValueHeight=0,ee.currentValueTotalHeight=0,ee.currentValueMaxLines=1,B.currentvalue.visible){var se=b.tester.append("g");V.each(function(ie){var q=g(se,B,ie.label),te=q.node()&&b.bBox(q.node())||{width:0,height:0},ne=a.lineCount(q);ee.currentValueMaxWidth=Math.max(ee.currentValueMaxWidth,Math.ceil(te.width)),ee.currentValueHeight=Math.max(ee.currentValueHeight,Math.ceil(te.height)),ee.currentValueMaxLines=Math.max(ee.currentValueMaxLines,ne)}),ee.currentValueTotalHeight=ee.currentValueHeight+B.currentvalue.offset,se.remove()}ee.height=ee.currentValueTotalHeight+i.tickOffset+B.ticklen+i.labelOffset+ee.labelHeight+B.pad.t+B.pad.b;var j="left";e.isRightAnchor(B)&&(ee.lx-=ee.outerLength,j="right"),e.isCenterAnchor(B)&&(ee.lx-=ee.outerLength/2,j="center");var G="top";e.isBottomAnchor(B)&&(ee.ly-=ee.height,G="bottom"),e.isMiddleAnchor(B)&&(ee.ly-=ee.height/2,G="middle"),ee.outerLength=Math.ceil(ee.outerLength),ee.height=Math.ceil(ee.height),ee.lx=Math.round(ee.lx),ee.ly=Math.round(ee.ly);var W={y:B.y,b:ee.height*c[G],t:ee.height*s[G]};"fraction"===B.lenmode?(W.l=0,W.xl=B.x-B.len*s[j],W.r=0,W.xr=B.x+B.len*c[j]):(W.x=B.x,W.l=ee.outerLength*s[j],W.r=ee.outerLength*c[j]),x.autoMargin(I,h(B),W)}function g(I,B,V){if(B.currentvalue.visible){var Z,Y,ee=B._dims;switch(B.currentvalue.xanchor){case"right":Z=ee.inputAreaLength-i.currentValueInset-ee.currentValueMaxWidth,Y="left";break;case"center":Z=.5*ee.inputAreaLength,Y="middle";break;default:Z=i.currentValueInset,Y="left"}var J=e.ensureSingle(I,"text",i.labelClass,function(W){W.attr({"text-anchor":Y,"data-notex":1})}),$=B.currentvalue.prefix?B.currentvalue.prefix:"";if("string"==typeof V)$+=V;else{var Q=B.steps[B.active].label,se=B._gd._fullLayout._meta;se&&(Q=e.templateString(Q,se)),$+=Q}B.currentvalue.suffix&&($+=B.currentvalue.suffix),J.call(b.font,B.currentvalue.font).text($).call(a.convertToTspans,B._gd);var j=a.lineCount(J);return a.positionText(J,Z,(ee.currentValueMaxLines+1-j)*B.currentvalue.font.size*u),J}}function f(I,B,V){e.ensureSingle(I,"rect",i.gripRectClass,function(Z){Z.call(k,B,I,V).style("pointer-events","all")}).attr({width:i.gripWidth,height:i.gripHeight,rx:i.gripRadius,ry:i.gripRadius}).call(T.stroke,V.bordercolor).call(T.fill,V.bgcolor).style("stroke-width",V.borderwidth+"px")}function w(I,B,V){var Z=e.ensureSingle(I,"text",i.labelClass,function(J){J.attr({"text-anchor":"middle","data-notex":1})}),Y=B.step.label,ee=V._gd._fullLayout._meta;return ee&&(Y=e.templateString(Y,ee)),Z.call(b.font,V.font).text(Y).call(a.convertToTspans,V._gd),Z}function y(I,B){var V=e.ensureSingle(I,"g",i.labelsClass),Z=B._dims,Y=V.selectAll("g."+i.labelGroupClass).data(Z.labelSteps);Y.enter().append("g").classed(i.labelGroupClass,!0),Y.exit().remove(),Y.each(function(ee){var J=m.select(this);J.call(w,ee,B),b.setTranslate(J,D(B,ee.fraction),i.tickOffset+B.ticklen+B.font.size*u+i.labelOffset+Z.currentValueTotalHeight)})}function M(I,B,V,Z,Y){var ee=Math.round(Z*(V._stepCount-1)),J=V._visibleSteps[ee]._index;J!==V.active&&A(I,B,V,J,!0,Y)}function A(I,B,V,Z,Y,ee){var J=V.active;V.active=Z,l(I.layout,i.name,V).applyUpdate("active",Z);var $=V.steps[V.active];B.call(P,V,ee),B.call(g,V),I.emit("plotly_sliderchange",{slider:V,step:V.steps[V.active],interaction:Y,previousActive:J}),$&&$.method&&Y&&(B._nextMethod?(B._nextMethod.step=$,B._nextMethod.doCallback=Y,B._nextMethod.doTransition=ee):(B._nextMethod={step:$,doCallback:Y,doTransition:ee},B._nextMethodRaf=window.requestAnimationFrame(function(){var Q=B._nextMethod.step;Q.method&&(Q.execute&&x.executeAPICommand(I,Q.method,Q.args),B._nextMethod=null,B._nextMethodRaf=null)})))}function k(I,B,V){var Z=V.node(),Y=m.select(B);function ee(){return V.data()[0]}function J(){var $=ee();B.emit("plotly_sliderstart",{slider:$});var Q=V.select("."+i.gripRectClass);m.event.stopPropagation(),m.event.preventDefault(),Q.call(T.fill,$.activebgcolor);var se=F($,m.mouse(Z)[0]);function j(){var W=ee(),ie=F(W,m.mouse(Z)[0]);M(B,V,W,ie,!1)}function G(){var W=ee();W._dragging=!1,Q.call(T.fill,W.bgcolor),Y.on("mouseup",null),Y.on("mousemove",null),Y.on("touchend",null),Y.on("touchmove",null),B.emit("plotly_sliderend",{slider:W,step:W.steps[W.active]})}M(B,V,$,se,!0),$._dragging=!0,Y.on("mousemove",j),Y.on("touchmove",j),Y.on("mouseup",G),Y.on("touchend",G)}I.on("mousedown",J),I.on("touchstart",J)}function C(I,B){var V=I.selectAll("rect."+i.tickRectClass).data(B._visibleSteps),Z=B._dims;V.enter().append("rect").classed(i.tickRectClass,!0),V.exit().remove(),V.attr({width:B.tickwidth+"px","shape-rendering":"crispEdges"}),V.each(function(Y,ee){var J=ee%Z.labelStride==0,$=m.select(this);$.attr({height:J?B.ticklen:B.minorticklen}).call(T.fill,B.tickcolor),b.setTranslate($,D(B,ee/(B._stepCount-1))-.5*B.tickwidth,(J?i.tickOffset:i.minorTickOffset)+Z.currentValueTotalHeight)})}function P(I,B,V){for(var Z=I.select("rect."+i.gripRectClass),Y=0,ee=0;ee<B._stepCount;ee++)if(B._visibleSteps[ee]._index===B.active){Y=ee;break}var J=D(B,Y/(B._stepCount-1));if(!B._invokingCommand){var $=Z;V&&B.transition.duration>0&&($=$.transition().duration(B.transition.duration).ease(B.transition.easing)),$.attr("transform",o(J-.5*i.gripWidth,B._dims.currentValueTotalHeight))}}function D(I,B){var V=I._dims;return V.inputAreaStart+i.stepInset+(V.inputAreaLength-2*i.stepInset)*Math.min(1,Math.max(0,B))}function F(I,B){var V=I._dims;return Math.min(1,Math.max(0,(B-i.stepInset-V.inputAreaStart)/(V.inputAreaLength-2*i.stepInset-2*V.inputAreaStart)))}function R(I,B,V){var Z=V._dims,Y=e.ensureSingle(I,"rect",i.railTouchRectClass,function(ee){ee.call(k,B,I,V).style("pointer-events","all")});Y.attr({width:Z.inputAreaLength,height:Math.max(Z.inputAreaWidth,i.tickOffset+V.ticklen+Z.labelHeight)}).call(T.fill,V.bgcolor).attr("opacity",0),b.setTranslate(Y,0,Z.currentValueTotalHeight)}function L(I,B){var V=B._dims,Z=V.inputAreaLength-2*i.railInset,Y=e.ensureSingle(I,"rect",i.railRectClass);Y.attr({width:Z,height:i.railWidth,rx:i.railRadius,ry:i.railRadius,"shape-rendering":"crispEdges"}).call(T.stroke,B.bordercolor).call(T.fill,B.bgcolor).style("stroke-width",B.borderwidth+"px"),b.setTranslate(Y,i.railInset,.5*(V.inputAreaWidth-i.railWidth)+V.currentValueTotalHeight)}oe.exports=function(I){var B=I._fullLayout,V=function(Q,se){for(var j=Q[i.name],G=[],W=0;W<j.length;W++){var ie=j[W];ie.visible&&(ie._gd=se,G.push(ie))}return G}(B,I),Z=B._infolayer.selectAll("g."+i.containerClassName).data(V.length>0?[0]:[]);function Y(Q){Q._commandObserver&&(Q._commandObserver.remove(),delete Q._commandObserver),x.autoMargin(I,h(Q))}if(Z.enter().append("g").classed(i.containerClassName,!0).style("cursor","ew-resize"),Z.exit().each(function(){m.select(this).selectAll("g."+i.groupClassName).each(Y)}).remove(),0!==V.length){var ee=Z.selectAll("g."+i.groupClassName).data(V,p);ee.enter().append("g").classed(i.groupClassName,!0),ee.exit().each(Y).remove();for(var J=0;J<V.length;J++)v(I,V[J]);ee.each(function(Q){var se=m.select(this);(function(j){var G=j._dims;G.labelSteps=[];for(var W=j._stepCount,ie=0;ie<W;ie+=G.labelStride)G.labelSteps.push({fraction:ie/(W-1),step:j._visibleSteps[ie]})})(Q),x.manageCommandObserver(I,Q,Q._visibleSteps,function(j){var G=se.data()[0];G.active!==j.index&&(G._dragging||A(I,se,G,j.index,!1,!0))}),function(j,G,W){(W.steps[W.active]||{}).visible||(W.active=W._visibleSteps[0]._index),G.call(g,W).call(L,W).call(y,W).call(C,W).call(R,j,W).call(f,j,W);var ie=W._dims;b.setTranslate(G,ie.lx+W.pad.l,ie.ly+W.pad.t),G.call(P,W,!1),G.call(g,W)}(I,m.select(this),Q)})}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":460,"@plotly/d3":58}],463:[function(_,oe,ae){"use strict";var m=_("./constants");oe.exports={moduleType:"component",name:m.name,layoutAttributes:_("./attributes"),supplyLayoutDefaults:_("./defaults"),draw:_("./draw")}},{"./attributes":459,"./constants":460,"./defaults":461,"./draw":462}],464:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("../../plots/plots"),b=_("../../registry"),e=_("../../lib"),o=e.strTranslate,a=_("../drawing"),l=_("../color"),i=_("../../lib/svg_text_utils"),d=_("../../constants/interactions"),u=_("../../constants/alignment").OPPOSITE_SIDE,s=/ [XY][0-9]* /;oe.exports={draw:function(c,h,p){var v,f=p.propName,w=p.placeholder,y=p.traceIndex,M=p.avoid||{},A=p.attributes,k=p.transform,C=p.containerGroup,P=c._fullLayout,D=1,F=!1,R=p.propContainer.title,L=(R&&R.text?R.text:"").trim(),I=R&&R.font?R.font:{},B=I.family,V=I.size,Z=I.color;"title.text"===f?v="titleText":-1!==f.indexOf("axis")?v="axisTitleText":f.indexOf(!0)&&(v="colorbarTitleText");var Y=c._context.edits[v];""===L?D=0:L.replace(s," % ")===w.replace(s," % ")&&(D=.2,F=!0,Y||(L="")),p._meta?L=e.templateString(L,p._meta):P._meta&&(L=e.templateString(L,P._meta));var ee,J=L||Y;C||(C=e.ensureSingle(P._infolayer,"g","g-"+h),ee=P._hColorbarMoveTitle);var $=C.selectAll("text").data(J?[0]:[]);if($.enter().append("text"),$.text(L).attr("class",h),$.exit().remove(),!J)return C;function Q(G){e.syncOrAsync([se,j],G)}function se(G){var W;return!k&&ee&&(k={}),k?(W="",k.rotate&&(W+="rotate("+[k.rotate,A.x,A.y]+")"),(k.offset||ee)&&(W+=o(0,(k.offset||0)-(ee||0)))):W=null,G.attr("transform",W),G.style({"font-family":B,"font-size":m.round(V,2)+"px",fill:l.rgb(Z),opacity:D*l.opacity(Z),"font-weight":T.fontWeight}).attr(A).call(i.convertToTspans,c),T.previousPromises(c)}function j(G){var W=m.select(G.node().parentNode);if(M&&M.selection&&M.side&&L){W.attr("transform",null);var ie=u[M.side],q="left"===M.side||"top"===M.side?-1:1,te=x(M.pad)?M.pad:2,ne=a.bBox(W.node()),ue=M.maxShift||q*({left:0,top:0,right:P.width,bottom:P.height}[M.side]-ne[M.side]),de=0;if(ue<0)de=ue;else{var he=M.offsetLeft||0,be=M.offsetTop||0;ne.left-=he,ne.right-=he,ne.top-=be,ne.bottom-=be,M.selection.each(function(){var we=a.bBox(this);e.bBoxIntersect(ne,we,te)&&(de=Math.max(de,q*(we[M.side]-ne[ie])+te))}),de=Math.min(ue,de)}if(de>0||ue<0){var ge={left:[-de,0],right:[de,0],top:[0,-de],bottom:[0,de]}[M.side];W.attr("transform",o(ge[0],ge[1]))}}}return $.call(Q),Y&&(L?$.on(".opacity",null):(D=0,F=!0,$.text(w).on("mouseover.opacity",function(){m.select(this).transition().duration(d.SHOW_PLACEHOLDER).style("opacity",1)}).on("mouseout.opacity",function(){m.select(this).transition().duration(d.HIDE_PLACEHOLDER).style("opacity",0)})),$.call(i.makeEditable,{gd:c}).on("edit",function(G){void 0!==y?b.call("_guiRestyle",c,f,G,y):b.call("_guiRelayout",c,f,G)}).on("cancel",function(){this.text(this.attr("data-unformatted")).call(Q)}).on("input",function(G){this.text(G||" ").call(i.positionText,A.x,A.y)})),$.classed("js-placeholder",F),C}}},{"../../constants/alignment":471,"../../constants/interactions":478,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"../color":366,"../drawing":388,"@plotly/d3":58,"fast-isnumeric":190}],465:[function(_,oe,ae){"use strict";var m=_("../../plots/font_attributes"),x=_("../color/attributes"),T=_("../../lib/extend").extendFlat,b=_("../../plot_api/edit_types").overrideAll,e=_("../../plots/pad_attributes"),o=_("../../plot_api/plot_template").templatedArray,a=o("button",{visible:{valType:"boolean"},method:{valType:"enumerated",values:["restyle","relayout","animate","update","skip"],dflt:"restyle"},args:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},args2:{valType:"info_array",freeLength:!0,items:[{valType:"any"},{valType:"any"},{valType:"any"}]},label:{valType:"string",dflt:""},execute:{valType:"boolean",dflt:!0}});oe.exports=b(o("updatemenu",{_arrayAttrRegexps:[/^updatemenus\[(0|[1-9][0-9]+)\]\.buttons/],visible:{valType:"boolean"},type:{valType:"enumerated",values:["dropdown","buttons"],dflt:"dropdown"},direction:{valType:"enumerated",values:["left","right","up","down"],dflt:"down"},active:{valType:"integer",min:-1,dflt:0},showactive:{valType:"boolean",dflt:!0},buttons:a,x:{valType:"number",min:-2,max:3,dflt:-.05},xanchor:{valType:"enumerated",values:["auto","left","center","right"],dflt:"right"},y:{valType:"number",min:-2,max:3,dflt:1},yanchor:{valType:"enumerated",values:["auto","top","middle","bottom"],dflt:"top"},pad:T(e({editType:"arraydraw"}),{}),font:m({}),bgcolor:{valType:"color"},bordercolor:{valType:"color",dflt:x.borderLine},borderwidth:{valType:"number",min:0,dflt:1,editType:"arraydraw"}}),"arraydraw","from-root")},{"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/font_attributes":585,"../../plots/pad_attributes":618,"../color/attributes":365}],466:[function(_,oe,ae){"use strict";oe.exports={name:"updatemenus",containerClassName:"updatemenu-container",headerGroupClassName:"updatemenu-header-group",headerClassName:"updatemenu-header",headerArrowClassName:"updatemenu-header-arrow",dropdownButtonGroupClassName:"updatemenu-dropdown-button-group",dropdownButtonClassName:"updatemenu-dropdown-button",buttonClassName:"updatemenu-button",itemRectClassName:"updatemenu-item-rect",itemTextClassName:"updatemenu-item-text",menuIndexAttrName:"updatemenu-active-index",autoMarginIdRoot:"updatemenu-",blankHeaderOpts:{label:"  "},minWidth:30,minHeight:30,textPadX:24,arrowPadX:16,rx:2,ry:2,textOffsetX:12,textOffsetY:3,arrowOffsetX:4,gapButtonHeader:5,gapButton:2,activeColor:"#F4FAFF",hoverColor:"#F4FAFF",arrowSymbol:{left:"\u25c4",right:"\u25ba",up:"\u25b2",down:"\u25bc"}}},{}],467:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../plots/array_container_defaults"),T=_("./attributes"),b=_("./constants").name,e=T.buttons;function o(l,i,d){function u(s,c){return m.coerce(l,i,T,s,c)}u("visible",x(l,i,{name:"buttons",handleItemDefaults:a}).length>0)&&(u("active"),u("direction"),u("type"),u("showactive"),u("x"),u("y"),m.noneOrAll(l,i,["x","y"]),u("xanchor"),u("yanchor"),u("pad.t"),u("pad.r"),u("pad.b"),u("pad.l"),m.coerceFont(u,"font",d.font),u("bgcolor",d.paper_bgcolor),u("bordercolor"),u("borderwidth"))}function a(l,i){function d(u,s){return m.coerce(l,i,e,u,s)}d("visible","skip"===l.method||Array.isArray(l.args))&&(d("method"),d("args"),d("args2"),d("label"),d("execute"))}oe.exports=function(l,i){x(l,i,{name:b,handleItemDefaults:o})}},{"../../lib":503,"../../plots/array_container_defaults":549,"./attributes":465,"./constants":466}],468:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../plots/plots"),T=_("../color"),b=_("../drawing"),e=_("../../lib"),o=_("../../lib/svg_text_utils"),a=_("../../plot_api/plot_template").arrayEditor,l=_("../../constants/alignment").LINE_SPACING,i=_("./constants"),d=_("./scrollbox");function u(D){return D._index}function s(D,F){return+D.attr(i.menuIndexAttrName)===F._index}function c(D,F,R,L,I,B,V,Z){F.active=V,a(D.layout,i.name,F).applyUpdate("active",V),"buttons"===F.type?p(D,L,null,null,F):"dropdown"===F.type&&(I.attr(i.menuIndexAttrName,"-1"),h(D,L,I,B,F),Z||p(D,L,I,B,F))}function h(D,F,R,L,I){var B=e.ensureSingle(F,"g",i.headerClassName,function($){$.style("pointer-events","all")}),V=I._dims,ee={y:I.pad.t,yPad:0,x:I.pad.l,xPad:0,index:0},J={width:V.headerWidth,height:V.headerHeight};B.call(v,I,I.buttons[I.active]||i.blankHeaderOpts,D).call(C,I,ee,J),e.ensureSingle(F,"text",i.headerArrowClassName,function($){$.attr("text-anchor","end").call(b.font,I.font).text(i.arrowSymbol[I.direction])}).attr({x:V.headerWidth-i.arrowOffsetX+I.pad.l,y:V.headerHeight/2+i.textOffsetY+I.pad.t}),B.on("click",function(){R.call(P,String(s(R,I)?-1:I._index)),p(D,F,R,L,I)}),B.on("mouseover",function(){B.call(y)}),B.on("mouseout",function(){B.call(M,I)}),b.setTranslate(F,V.lx,V.ly)}function p(D,F,R,L,I){R||(R=F).attr("pointer-events","all");var B=-1==+R.attr(i.menuIndexAttrName)&&"buttons"!==I.type?[]:I.buttons,V="dropdown"===I.type?i.dropdownButtonClassName:i.buttonClassName,Z=R.selectAll("g."+V).data(e.filterVisible(B)),Y=Z.enter().append("g").classed(V,!0),ee=Z.exit();"dropdown"===I.type?(Y.attr("opacity","0").transition().attr("opacity","1"),ee.transition().attr("opacity","0").remove()):ee.remove();var J=0,$=0,Q=I._dims,se=-1!==["up","down"].indexOf(I.direction);"dropdown"===I.type&&(se?$=Q.headerHeight+i.gapButtonHeader:J=Q.headerWidth+i.gapButtonHeader),"dropdown"===I.type&&"up"===I.direction&&($=-i.gapButtonHeader+i.gapButton-Q.openHeight),"dropdown"===I.type&&"left"===I.direction&&(J=-i.gapButtonHeader+i.gapButton-Q.openWidth);var W,ie,q,j={x:Q.lx+J+I.pad.l,y:Q.ly+$+I.pad.t,yPad:i.gapButton,xPad:i.gapButton,index:0},G={l:j.x+I.borderwidth,t:j.y+I.borderwidth};Z.each(function(W,ie){var q=m.select(this);q.call(v,I,W,D).call(C,I,j),q.on("click",function(){m.event.defaultPrevented||(W.execute&&(W.args2&&I.active===ie?(c(D,I,0,F,R,L,-1),x.executeAPICommand(D,W.method,W.args2)):(c(D,I,0,F,R,L,ie),x.executeAPICommand(D,W.method,W.args))),D.emit("plotly_buttonclicked",{menu:I,button:W,active:I.active}))}),q.on("mouseover",function(){q.call(y)}),q.on("mouseout",function(){q.call(M,I),Z.call(w,I)})}),Z.call(w,I),se?(G.w=Math.max(Q.openWidth,Q.headerWidth),G.h=j.y-G.t):(G.w=j.x-G.l,G.h=Math.max(Q.openHeight,Q.headerHeight)),G.direction=I.direction,L&&(Z.size()?function(W,ie,q,te,ne,le){var ue,de,he,be=ne.direction,we=ne._dims,Ce=ne.active;if("up"===be||"down"===be)for(de=0,he=0;he<Ce;he++)de+=we.heights[he]+i.gapButton;else for(ue=0,he=0;he<Ce;he++)ue+=we.widths[he]+i.gapButton;te.enable(le,ue,de),te.hbar&&te.hbar.attr("opacity","0").transition().attr("opacity","1"),te.vbar&&te.vbar.attr("opacity","0").transition().attr("opacity","1")}(0,0,0,L,I,G):(q=!!(W=L).vbar,(ie=!!W.hbar)&&W.hbar.transition().attr("opacity","0").each("end",function(){ie=!1,q||W.disable()}),q&&W.vbar.transition().attr("opacity","0").each("end",function(){q=!1,ie||W.disable()})))}function v(D,F,R,L){D.call(g,F).call(f,F,R,L)}function g(D,F){e.ensureSingle(D,"rect",i.itemRectClassName,function(R){R.attr({rx:i.rx,ry:i.ry,"shape-rendering":"crispEdges"})}).call(T.stroke,F.bordercolor).call(T.fill,F.bgcolor).style("stroke-width",F.borderwidth+"px")}function f(D,F,R,L){var I=e.ensureSingle(D,"text",i.itemTextClassName,function(Z){Z.attr({"text-anchor":"start","data-notex":1})}),B=R.label,V=L._fullLayout._meta;V&&(B=e.templateString(B,V)),I.call(b.font,F.font).text(B).call(o.convertToTspans,L)}function w(D,F){var R=F.active;D.each(function(L,I){var B=m.select(this);I===R&&F.showactive&&B.select("rect."+i.itemRectClassName).call(T.fill,i.activeColor)})}function y(D){D.select("rect."+i.itemRectClassName).call(T.fill,i.hoverColor)}function M(D,F){D.select("rect."+i.itemRectClassName).call(T.fill,F.bgcolor)}function A(D,F){var R=F._dims={width1:0,height1:0,heights:[],widths:[],totalWidth:0,totalHeight:0,openWidth:0,openHeight:0,lx:0,ly:0},L=b.tester.selectAll("g."+i.dropdownButtonClassName).data(e.filterVisible(F.buttons));L.enter().append("g").classed(i.dropdownButtonClassName,!0);var I=-1!==["up","down"].indexOf(F.direction);L.each(function(J,$){var Q=m.select(this);Q.call(v,F,J,D);var se=Q.select("."+i.itemTextClassName),j=se.node()&&b.bBox(se.node()).width,G=Math.max(j+i.textPadX,i.minWidth),W=F.font.size*l,ie=o.lineCount(se),q=Math.max(W*ie,i.minHeight)+i.textOffsetY;q=Math.ceil(q),G=Math.ceil(G),R.widths[$]=G,R.heights[$]=q,R.height1=Math.max(R.height1,q),R.width1=Math.max(R.width1,G),I?(R.totalWidth=Math.max(R.totalWidth,G),R.openWidth=R.totalWidth,R.totalHeight+=q+i.gapButton,R.openHeight+=q+i.gapButton):(R.totalWidth+=G+i.gapButton,R.openWidth+=G+i.gapButton,R.totalHeight=Math.max(R.totalHeight,q),R.openHeight=R.totalHeight)}),I?R.totalHeight-=i.gapButton:R.totalWidth-=i.gapButton,R.headerWidth=R.width1+i.arrowPadX,R.headerHeight=R.height1,"dropdown"===F.type&&(I?(R.width1+=i.arrowPadX,R.totalHeight=R.height1):R.totalWidth=R.width1,R.totalWidth+=i.arrowPadX),L.remove();var B=R.totalWidth+F.pad.l+F.pad.r,V=R.totalHeight+F.pad.t+F.pad.b,Z=D._fullLayout._size;R.lx=Z.l+Z.w*F.x,R.ly=Z.t+Z.h*(1-F.y);var Y="left";e.isRightAnchor(F)&&(R.lx-=B,Y="right"),e.isCenterAnchor(F)&&(R.lx-=B/2,Y="center");var ee="top";e.isBottomAnchor(F)&&(R.ly-=V,ee="bottom"),e.isMiddleAnchor(F)&&(R.ly-=V/2,ee="middle"),R.totalWidth=Math.ceil(R.totalWidth),R.totalHeight=Math.ceil(R.totalHeight),R.lx=Math.round(R.lx),R.ly=Math.round(R.ly),x.autoMargin(D,k(F),{x:F.x,y:F.y,l:B*({right:1,center:.5}[Y]||0),r:B*({left:1,center:.5}[Y]||0),b:V*({top:1,middle:.5}[ee]||0),t:V*({bottom:1,middle:.5}[ee]||0)})}function k(D){return i.autoMarginIdRoot+D._index}function C(D,F,R,L){L=L||{};var I=D.select("."+i.itemRectClassName),B=D.select("."+i.itemTextClassName),V=F.borderwidth,Z=R.index,Y=F._dims;b.setTranslate(D,V+R.x,V+R.y);var ee=-1!==["up","down"].indexOf(F.direction),J=L.height||(ee?Y.heights[Z]:Y.height1);I.attr({x:0,y:0,width:L.width||(ee?Y.width1:Y.widths[Z]),height:J});var $=F.font.size*l,Q=(o.lineCount(B)-1)*$/2;o.positionText(B,i.textOffsetX,J/2-Q+i.textOffsetY),ee?R.y+=Y.heights[Z]+R.yPad:R.x+=Y.widths[Z]+R.xPad,R.index++}function P(D,F){D.attr(i.menuIndexAttrName,F||"-1").selectAll("g."+i.dropdownButtonClassName).remove()}oe.exports=function(D){var F=D._fullLayout,R=e.filterVisible(F[i.name]);function L($){x.autoMargin(D,k($))}var I=F._menulayer.selectAll("g."+i.containerClassName).data(R.length>0?[0]:[]);if(I.enter().append("g").classed(i.containerClassName,!0).style("cursor","pointer"),I.exit().each(function(){m.select(this).selectAll("g."+i.headerGroupClassName).each(L)}).remove(),0!==R.length){var B=I.selectAll("g."+i.headerGroupClassName).data(R,u);B.enter().append("g").classed(i.headerGroupClassName,!0);for(var V=e.ensureSingle(I,"g",i.dropdownButtonGroupClassName,function($){$.style("pointer-events","all")}),Z=0;Z<R.length;Z++)A(D,R[Z]);var J=new d(D,V,"updatemenus"+F._uid);B.enter().size()&&(V.node().parentNode.appendChild(V.node()),V.call(P)),B.exit().each(function($){V.call(P),L($)}).remove(),B.each(function($){var Q=m.select(this),se="dropdown"===$.type?V:null;x.manageCommandObserver(D,$,$.buttons,function(j){c(D,$,0,Q,se,J,j.index,!0)}),"dropdown"===$.type?(h(D,Q,V,J,$),s(V,$)&&p(D,Q,V,J,$)):p(D,Q,null,null,$)})}}},{"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_template":543,"../../plots/plots":619,"../color":366,"../drawing":388,"./constants":466,"./scrollbox":470,"@plotly/d3":58}],469:[function(_,oe,ae){arguments[4][463][0].apply(ae,arguments)},{"./attributes":465,"./constants":466,"./defaults":467,"./draw":468,dup:463}],470:[function(_,oe,ae){"use strict";oe.exports=e;var m=_("@plotly/d3"),x=_("../color"),T=_("../drawing"),b=_("../../lib");function e(o,a,l){this.gd=o,this.container=a,this.id=l,this.position=null,this.translateX=null,this.translateY=null,this.hbar=null,this.vbar=null,this.bg=this.container.selectAll("rect.scrollbox-bg").data([0]),this.bg.exit().on(".drag",null).on("wheel",null).remove(),this.bg.enter().append("rect").classed("scrollbox-bg",!0).style("pointer-events","all").attr({opacity:0,x:0,y:0,width:0,height:0})}e.barWidth=2,e.barLength=20,e.barRadius=2,e.barPad=1,e.barColor="#808BA4",e.prototype.enable=function(o,a,l){var i=this.gd._fullLayout,d=i.width,u=i.height;this.position=o;var s,c,h,p,v=this.position.l,g=this.position.w,f=this.position.t,w=this.position.h,y=this.position.direction,M="down"===y,A="left"===y,k="up"===y,C=g,P=w;M||A||"right"===y||k||(this.position.direction="down",M=!0),M||k?(c=(s=v)+C,M?(h=f,P=(p=Math.min(h+P,u))-h):P=(p=f+P)-(h=Math.max(p-P,0))):(p=(h=f)+P,A?C=(c=v+C)-(s=Math.max(c-C,0)):(s=v,C=(c=Math.min(s+C,d))-s)),this._box={l:s,t:h,w:C,h:P};var D=g>C,F=e.barLength+2*e.barPad,R=e.barWidth+2*e.barPad,L=v,I=f+w;I+R>u&&(I=u-R);var B=this.container.selectAll("rect.scrollbar-horizontal").data(D?[0]:[]);B.exit().on(".drag",null).remove(),B.enter().append("rect").classed("scrollbar-horizontal",!0).call(x.fill,e.barColor),D?(this.hbar=B.attr({rx:e.barRadius,ry:e.barRadius,x:L,y:I,width:F,height:R}),this._hbarXMin=L+F/2,this._hbarTranslateMax=C-F):(delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax);var V=w>P,Z=e.barWidth+2*e.barPad,Y=e.barLength+2*e.barPad,ee=v+g,J=f;ee+Z>d&&(ee=d-Z);var $=this.container.selectAll("rect.scrollbar-vertical").data(V?[0]:[]);$.exit().on(".drag",null).remove(),$.enter().append("rect").classed("scrollbar-vertical",!0).call(x.fill,e.barColor),V?(this.vbar=$.attr({rx:e.barRadius,ry:e.barRadius,x:ee,y:J,width:Z,height:Y}),this._vbarYMin=J+Y/2,this._vbarTranslateMax=P-Y):(delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax);var Q=this.id,se=s-.5,j=V?c+Z+.5:c+.5,G=h-.5,W=D?p+R+.5:p+.5,ie=i._topdefs.selectAll("#"+Q).data(D||V?[0]:[]);if(ie.exit().remove(),ie.enter().append("clipPath").attr("id",Q).append("rect"),D||V?(this._clipRect=ie.select("rect").attr({x:Math.floor(se),y:Math.floor(G),width:Math.ceil(j)-Math.floor(se),height:Math.ceil(W)-Math.floor(G)}),this.container.call(T.setClipUrl,Q,this.gd),this.bg.attr({x:v,y:f,width:g,height:w})):(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(T.setClipUrl,null),delete this._clipRect),D||V){var q=m.behavior.drag().on("dragstart",function(){m.event.sourceEvent.preventDefault()}).on("drag",this._onBoxDrag.bind(this));this.container.on("wheel",null).on("wheel",this._onBoxWheel.bind(this)).on(".drag",null).call(q);var te=m.behavior.drag().on("dragstart",function(){m.event.sourceEvent.preventDefault(),m.event.sourceEvent.stopPropagation()}).on("drag",this._onBarDrag.bind(this));D&&this.hbar.on(".drag",null).call(te),V&&this.vbar.on(".drag",null).call(te)}this.setTranslate(a,l)},e.prototype.disable=function(){(this.hbar||this.vbar)&&(this.bg.attr({width:0,height:0}),this.container.on("wheel",null).on(".drag",null).call(T.setClipUrl,null),delete this._clipRect),this.hbar&&(this.hbar.on(".drag",null),this.hbar.remove(),delete this.hbar,delete this._hbarXMin,delete this._hbarTranslateMax),this.vbar&&(this.vbar.on(".drag",null),this.vbar.remove(),delete this.vbar,delete this._vbarYMin,delete this._vbarTranslateMax)},e.prototype._onBoxDrag=function(){var o=this.translateX,a=this.translateY;this.hbar&&(o-=m.event.dx),this.vbar&&(a-=m.event.dy),this.setTranslate(o,a)},e.prototype._onBoxWheel=function(){var o=this.translateX,a=this.translateY;this.hbar&&(o+=m.event.deltaY),this.vbar&&(a+=m.event.deltaY),this.setTranslate(o,a)},e.prototype._onBarDrag=function(){var o=this.translateX,a=this.translateY;if(this.hbar){var l=o+this._hbarXMin,i=l+this._hbarTranslateMax;o=(b.constrain(m.event.x,l,i)-l)/(i-l)*(this.position.w-this._box.w)}if(this.vbar){var d=a+this._vbarYMin,u=d+this._vbarTranslateMax;a=(b.constrain(m.event.y,d,u)-d)/(u-d)*(this.position.h-this._box.h)}this.setTranslate(o,a)},e.prototype.setTranslate=function(o,a){var l=this.position.w-this._box.w,i=this.position.h-this._box.h;o=b.constrain(o||0,0,l),a=b.constrain(a||0,0,i),this.translateX=o,this.translateY=a,this.container.call(T.setTranslate,this._box.l-this.position.l-o,this._box.t-this.position.t-a),this._clipRect&&this._clipRect.attr({x:Math.floor(this.position.l+o-.5),y:Math.floor(this.position.t+a-.5)}),this.hbar&&this.hbar.call(T.setTranslate,o+o/l*this._hbarTranslateMax,a),this.vbar&&this.vbar.call(T.setTranslate,o,a+a/i*this._vbarTranslateMax)}},{"../../lib":503,"../color":366,"../drawing":388,"@plotly/d3":58}],471:[function(_,oe,ae){"use strict";oe.exports={FROM_BL:{left:0,center:.5,right:1,bottom:0,middle:.5,top:1},FROM_TL:{left:0,center:.5,right:1,bottom:1,middle:.5,top:0},FROM_BR:{left:1,center:.5,right:0,bottom:0,middle:.5,top:1},LINE_SPACING:1.3,CAP_SHIFT:.7,MID_SHIFT:.35,OPPOSITE_SIDE:{left:"right",right:"left",top:"bottom",bottom:"top"}}},{}],472:[function(_,oe,ae){"use strict";oe.exports={axisRefDescription:function(m,x,T){return["If set to a",m,"axis id (e.g. *"+m+"* or","*"+m+"2*), the `"+m+"` position refers to a",m,"coordinate. If set to *paper*, the `"+m+"`","position refers to the distance from the",x,"of the plotting","area in normalized coordinates where *0* (*1*) corresponds to the",x,"("+T+"). If set to a",m,"axis ID followed by","*domain* (separated by a space), the position behaves like for","*paper*, but refers to the distance in fractions of the domain","length from the",x,"of the domain of that axis: e.g.,","*"+m+"2 domain* refers to the domain of the second",m," axis and a",m,"position of 0.5 refers to the","point between the",x,"and the",T,"of the domain of the","second",m,"axis."].join(" ")}}},{}],473:[function(_,oe,ae){"use strict";oe.exports={INCREASING:{COLOR:"#3D9970",SYMBOL:"\u25b2"},DECREASING:{COLOR:"#FF4136",SYMBOL:"\u25bc"}}},{}],474:[function(_,oe,ae){"use strict";oe.exports={FORMAT_LINK:"https://github.com/d3/d3-format/tree/v1.4.5#d3-format",DATE_FORMAT_LINK:"https://github.com/d3/d3-time-format/tree/v2.2.3#locale_format"}},{}],475:[function(_,oe,ae){"use strict";oe.exports={COMPARISON_OPS:["=","!=","<",">=",">","<="],COMPARISON_OPS2:["=","<",">=",">","<="],INTERVAL_OPS:["[]","()","[)","(]","][",")(","](",")["],SET_OPS:["{}","}{"],CONSTRAINT_REDUCTION:{"=":"=","<":"<","<=":"<",">":">",">=":">","[]":"[]","()":"[]","[)":"[]","(]":"[]","][":"][",")(":"][","](":"][",")[":"]["}}},{}],476:[function(_,oe,ae){"use strict";oe.exports={solid:[[],0],dot:[[.5,1],200],dash:[[.5,1],50],longdash:[[.5,1],10],dashdot:[[.5,.625,.875,1],50],longdashdot:[[.5,.7,.8,1],10]}},{}],477:[function(_,oe,ae){"use strict";oe.exports={circle:"\u25cf","circle-open":"\u25cb",square:"\u25a0","square-open":"\u25a1",diamond:"\u25c6","diamond-open":"\u25c7",cross:"+",x:"\u274c"}},{}],478:[function(_,oe,ae){"use strict";oe.exports={SHOW_PLACEHOLDER:100,HIDE_PLACEHOLDER:1e3,DESELECTDIM:.2}},{}],479:[function(_,oe,ae){"use strict";oe.exports={BADNUM:void 0,FP_SAFE:1e-4*Number.MAX_VALUE,ONEMAXYEAR:316224e5,ONEAVGYEAR:315576e5,ONEMINYEAR:31536e6,ONEMAXQUARTER:79488e5,ONEAVGQUARTER:78894e5,ONEMINQUARTER:76896e5,ONEMAXMONTH:26784e5,ONEAVGMONTH:26298e5,ONEMINMONTH:24192e5,ONEWEEK:6048e5,ONEDAY:864e5,ONEHOUR:36e5,ONEMIN:6e4,ONESEC:1e3,EPOCHJD:2440587.5,ALMOST_EQUAL:.999999,LOG_CLIP:10,MINUS_SIGN:"\u2212"}},{}],480:[function(_,oe,ae){"use strict";ae.xmlns="http://www.w3.org/2000/xmlns/",ae.svg="http://www.w3.org/2000/svg",ae.xlink="http://www.w3.org/1999/xlink",ae.svgAttrs={xmlns:ae.svg,"xmlns:xlink":ae.xlink}},{}],481:[function(_,oe,ae){"use strict";ae.version=_("./version").version,_("native-promise-only"),_("../build/plotcss");for(var m=_("./registry"),x=ae.register=m.register,T=_("./plot_api"),b=Object.keys(T),e=0;e<b.length;e++){var o=b[e];"_"!==o.charAt(0)&&(ae[o]=T[o]),x({moduleType:"apiMethod",name:o,fn:T[o]})}x(_("./traces/scatter")),x([_("./components/legend"),_("./components/fx"),_("./components/annotations"),_("./components/annotations3d"),_("./components/shapes"),_("./components/images"),_("./components/updatemenus"),_("./components/sliders"),_("./components/rangeslider"),_("./components/rangeselector"),_("./components/grid"),_("./components/errorbars"),_("./components/colorscale"),_("./components/colorbar"),_("./components/modebar")]),x([_("./locale-en"),_("./locale-en-us")]),window.PlotlyLocales&&Array.isArray(window.PlotlyLocales)&&(x(window.PlotlyLocales),delete window.PlotlyLocales),ae.Icons=_("./fonts/ploticon");var a=_("./components/fx"),l=_("./plots/plots");ae.Plots={resize:l.resize,graphJson:l.graphJson,sendDataToCloud:l.sendDataToCloud},ae.Fx={hover:a.hover,unhover:a.unhover,loneHover:a.loneHover,loneUnhover:a.loneUnhover},ae.Snapshot=_("./snapshot"),ae.PlotSchema=_("./plot_api/plot_schema")},{"../build/plotcss":1,"./components/annotations":357,"./components/annotations3d":362,"./components/colorbar":372,"./components/colorscale":378,"./components/errorbars":394,"./components/fx":406,"./components/grid":410,"./components/images":415,"./components/legend":423,"./components/modebar":429,"./components/rangeselector":437,"./components/rangeslider":444,"./components/shapes":458,"./components/sliders":463,"./components/updatemenus":469,"./fonts/ploticon":482,"./locale-en":534,"./locale-en-us":533,"./plot_api":538,"./plot_api/plot_schema":542,"./plots/plots":619,"./registry":638,"./snapshot":643,"./traces/scatter":938,"./version":1119,"native-promise-only":245}],482:[function(_,oe,ae){"use strict";oe.exports={undo:{width:857.1,height:1e3,path:"m857 350q0-87-34-166t-91-137-137-92-166-34q-96 0-183 41t-147 114q-4 6-4 13t5 11l76 77q6 5 14 5 9-1 13-7 41-53 100-82t126-29q58 0 110 23t92 61 61 91 22 111-22 111-61 91-92 61-110 23q-55 0-105-20t-90-57l77-77q17-16 8-38-10-23-33-23h-250q-15 0-25 11t-11 25v250q0 24 22 33 22 10 39-8l72-72q60 57 137 88t159 31q87 0 166-34t137-92 91-137 34-166z",transform:"matrix(1 0 0 -1 0 850)"},home:{width:928.6,height:1e3,path:"m786 296v-267q0-15-11-26t-25-10h-214v214h-143v-214h-214q-15 0-25 10t-11 26v267q0 1 0 2t0 2l321 264 321-264q1-1 1-4z m124 39l-34-41q-5-5-12-6h-2q-7 0-12 3l-386 322-386-322q-7-4-13-4-7 2-12 7l-35 41q-4 5-3 13t6 12l401 334q18 15 42 15t43-15l136-114v109q0 8 5 13t13 5h107q8 0 13-5t5-13v-227l122-102q5-5 6-12t-4-13z",transform:"matrix(1 0 0 -1 0 850)"},"camera-retro":{width:1e3,height:1e3,path:"m518 386q0 8-5 13t-13 5q-37 0-63-27t-26-63q0-8 5-13t13-5 12 5 5 13q0 23 16 38t38 16q8 0 13 5t5 13z m125-73q0-59-42-101t-101-42-101 42-42 101 42 101 101 42 101-42 42-101z m-572-320h858v71h-858v-71z m643 320q0 89-62 152t-152 62-151-62-63-152 63-151 151-63 152 63 62 151z m-571 358h214v72h-214v-72z m-72-107h858v143h-462l-36-71h-360v-72z m929 143v-714q0-30-21-51t-50-21h-858q-29 0-50 21t-21 51v714q0 30 21 51t50 21h858q29 0 50-21t21-51z",transform:"matrix(1 0 0 -1 0 850)"},zoombox:{width:1e3,height:1e3,path:"m1000-25l-250 251c40 63 63 138 63 218 0 224-182 406-407 406-224 0-406-182-406-406s183-406 407-406c80 0 155 22 218 62l250-250 125 125z m-812 250l0 438 437 0 0-438-437 0z m62 375l313 0 0-312-313 0 0 312z",transform:"matrix(1 0 0 -1 0 850)"},pan:{width:1e3,height:1e3,path:"m1000 350l-187 188 0-125-250 0 0 250 125 0-188 187-187-187 125 0 0-250-250 0 0 125-188-188 186-187 0 125 252 0 0-250-125 0 187-188 188 188-125 0 0 250 250 0 0-126 187 188z",transform:"matrix(1 0 0 -1 0 850)"},zoom_plus:{width:875,height:1e3,path:"m1 787l0-875 875 0 0 875-875 0z m687-500l-187 0 0-187-125 0 0 187-188 0 0 125 188 0 0 187 125 0 0-187 187 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},zoom_minus:{width:875,height:1e3,path:"m0 788l0-876 875 0 0 876-875 0z m688-500l-500 0 0 125 500 0 0-125z",transform:"matrix(1 0 0 -1 0 850)"},autoscale:{width:1e3,height:1e3,path:"m250 850l-187 0-63 0 0-62 0-188 63 0 0 188 187 0 0 62z m688 0l-188 0 0-62 188 0 0-188 62 0 0 188 0 62-62 0z m-875-938l0 188-63 0 0-188 0-62 63 0 187 0 0 62-187 0z m875 188l0-188-188 0 0-62 188 0 62 0 0 62 0 188-62 0z m-125 188l-1 0-93-94-156 156 156 156 92-93 2 0 0 250-250 0 0-2 93-92-156-156-156 156 94 92 0 2-250 0 0-250 0 0 93 93 157-156-157-156-93 94 0 0 0-250 250 0 0 0-94 93 156 157 156-157-93-93 0 0 250 0 0 250z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_basic:{width:1500,height:1e3,path:"m375 725l0 0-375-375 375-374 0-1 1125 0 0 750-1125 0z",transform:"matrix(1 0 0 -1 0 850)"},tooltip_compare:{width:1125,height:1e3,path:"m187 786l0 2-187-188 188-187 0 0 937 0 0 373-938 0z m0-499l0 1-187-188 188-188 0 0 937 0 0 376-938-1z",transform:"matrix(1 0 0 -1 0 850)"},plotlylogo:{width:1542,height:1e3,path:"m0-10h182v-140h-182v140z m228 146h183v-286h-183v286z m225 714h182v-1000h-182v1000z m225-285h182v-715h-182v715z m225 142h183v-857h-183v857z m231-428h182v-429h-182v429z m225-291h183v-138h-183v138z",transform:"matrix(1 0 0 -1 0 850)"},"z-axis":{width:1e3,height:1e3,path:"m833 5l-17 108v41l-130-65 130-66c0 0 0 38 0 39 0-1 36-14 39-25 4-15-6-22-16-30-15-12-39-16-56-20-90-22-187-23-279-23-261 0-341 34-353 59 3 60 228 110 228 110-140-8-351-35-351-116 0-120 293-142 474-142 155 0 477 22 477 142 0 50-74 79-163 96z m-374 94c-58-5-99-21-99-40 0-24 65-43 144-43 79 0 143 19 143 43 0 19-42 34-98 40v216h87l-132 135-133-135h88v-216z m167 515h-136v1c16 16 31 34 46 52l84 109v54h-230v-71h124v-1c-16-17-28-32-44-51l-89-114v-51h245v72z",transform:"matrix(1 0 0 -1 0 850)"},"3d_rotate":{width:1e3,height:1e3,path:"m922 660c-5 4-9 7-14 11-359 263-580-31-580-31l-102 28 58-400c0 1 1 1 2 2 118 108 351 249 351 249s-62 27-100 42c88 83 222 183 347 122 16-8 30-17 44-27-2 1-4 2-6 4z m36-329c0 0 64 229-88 296-62 27-124 14-175-11 157-78 225-208 249-266 8-19 11-31 11-31 2 5 6 15 11 32-5-13-8-20-8-20z m-775-239c70-31 117-50 198-32-121 80-199 346-199 346l-96-15-58-12c0 0 55-226 155-287z m603 133l-317-139c0 0 4-4 19-14 7-5 24-15 24-15s-177-147-389 4c235-287 536-112 536-112l31-22 100 299-4-1z m-298-153c6-4 14-9 24-15 0 0-17 10-24 15z",transform:"matrix(1 0 0 -1 0 850)"},camera:{width:1e3,height:1e3,path:"m500 450c-83 0-150-67-150-150 0-83 67-150 150-150 83 0 150 67 150 150 0 83-67 150-150 150z m400 150h-120c-16 0-34 13-39 29l-31 93c-6 15-23 28-40 28h-340c-16 0-34-13-39-28l-31-94c-6-15-23-28-40-28h-120c-55 0-100-45-100-100v-450c0-55 45-100 100-100h800c55 0 100 45 100 100v450c0 55-45 100-100 100z m-400-550c-138 0-250 112-250 250 0 138 112 250 250 250 138 0 250-112 250-250 0-138-112-250-250-250z m365 380c-19 0-35 16-35 35 0 19 16 35 35 35 19 0 35-16 35-35 0-19-16-35-35-35z",transform:"matrix(1 0 0 -1 0 850)"},movie:{width:1e3,height:1e3,path:"m938 413l-188-125c0 37-17 71-44 94 64 38 107 107 107 187 0 121-98 219-219 219-121 0-219-98-219-219 0-61 25-117 66-156h-115c30 33 49 76 49 125 0 103-84 187-187 187s-188-84-188-187c0-57 26-107 65-141-38-22-65-62-65-109v-250c0-70 56-126 125-126h500c69 0 125 56 125 126l188-126c34 0 62 28 62 63v375c0 35-28 63-62 63z m-750 0c-69 0-125 56-125 125s56 125 125 125 125-56 125-125-56-125-125-125z m406-1c-87 0-157 70-157 157 0 86 70 156 157 156s156-70 156-156-70-157-156-157z",transform:"matrix(1 0 0 -1 0 850)"},question:{width:857.1,height:1e3,path:"m500 82v107q0 8-5 13t-13 5h-107q-8 0-13-5t-5-13v-107q0-8 5-13t13-5h107q8 0 13 5t5 13z m143 375q0 49-31 91t-77 65-95 23q-136 0-207-119-9-14 4-24l74-55q4-4 10-4 9 0 14 7 30 38 48 51 19 14 48 14 27 0 48-15t21-33q0-21-11-34t-38-25q-35-16-65-48t-29-70v-20q0-8 5-13t13-5h107q8 0 13 5t5 13q0 10 12 27t30 28q18 10 28 16t25 19 25 27 16 34 7 45z m214-107q0-117-57-215t-156-156-215-58-216 58-155 156-58 215 58 215 155 156 216 58 215-58 156-156 57-215z",transform:"matrix(1 0 0 -1 0 850)"},disk:{width:857.1,height:1e3,path:"m214-7h429v214h-429v-214z m500 0h72v500q0 8-6 21t-11 20l-157 156q-5 6-19 12t-22 5v-232q0-22-15-38t-38-16h-322q-22 0-37 16t-16 38v232h-72v-714h72v232q0 22 16 38t37 16h465q22 0 38-16t15-38v-232z m-214 518v178q0 8-5 13t-13 5h-107q-7 0-13-5t-5-13v-178q0-8 5-13t13-5h107q7 0 13 5t5 13z m357-18v-518q0-22-15-38t-38-16h-750q-23 0-38 16t-16 38v750q0 22 16 38t38 16h517q23 0 50-12t42-26l156-157q16-15 27-42t11-49z",transform:"matrix(1 0 0 -1 0 850)"},drawopenpath:{width:70,height:70,path:"M33.21,85.65a7.31,7.31,0,0,1-2.59-.48c-8.16-3.11-9.27-19.8-9.88-41.3-.1-3.58-.19-6.68-.35-9-.15-2.1-.67-3.48-1.43-3.79-2.13-.88-7.91,2.32-12,5.86L3,32.38c1.87-1.64,11.55-9.66,18.27-6.9,2.13.87,4.75,3.14,5.17,9,.17,2.43.26,5.59.36,9.25a224.17,224.17,0,0,0,1.5,23.4c1.54,10.76,4,12.22,4.48,12.4.84.32,2.79-.46,5.76-3.59L43,80.07C41.53,81.57,37.68,85.64,33.21,85.65ZM74.81,69a11.34,11.34,0,0,0,6.09-6.72L87.26,44.5,74.72,32,56.9,38.35c-2.37.86-5.57,3.42-6.61,6L38.65,72.14l8.42,8.43ZM55,46.27a7.91,7.91,0,0,1,3.64-3.17l14.8-5.3,8,8L76.11,60.6l-.06.19a6.37,6.37,0,0,1-3,3.43L48.25,74.59,44.62,71Zm16.57,7.82A6.9,6.9,0,1,0,64.64,61,6.91,6.91,0,0,0,71.54,54.09Zm-4.05,0a2.85,2.85,0,1,1-2.85-2.85A2.86,2.86,0,0,1,67.49,54.09Zm-4.13,5.22L60.5,56.45,44.26,72.7l2.86,2.86ZM97.83,35.67,84.14,22l-8.57,8.57L89.26,44.24Zm-13.69-8,8,8-2.85,2.85-8-8Z",transform:"matrix(1 0 0 1 -15 -15)"},drawclosedpath:{width:90,height:90,path:"M88.41,21.12a26.56,26.56,0,0,0-36.18,0l-2.07,2-2.07-2a26.57,26.57,0,0,0-36.18,0,23.74,23.74,0,0,0,0,34.8L48,90.12a3.22,3.22,0,0,0,4.42,0l36-34.21a23.73,23.73,0,0,0,0-34.79ZM84,51.24,50.16,83.35,16.35,51.25a17.28,17.28,0,0,1,0-25.47,20,20,0,0,1,27.3,0l4.29,4.07a3.23,3.23,0,0,0,4.44,0l4.29-4.07a20,20,0,0,1,27.3,0,17.27,17.27,0,0,1,0,25.46ZM66.76,47.68h-33v6.91h33ZM53.35,35H46.44V68h6.91Z",transform:"matrix(1 0 0 1 -5 -5)"},lasso:{width:1031,height:1e3,path:"m1018 538c-36 207-290 336-568 286-277-48-473-256-436-463 10-57 36-108 76-151-13-66 11-137 68-183 34-28 75-41 114-42l-55-70 0 0c-2-1-3-2-4-3-10-14-8-34 5-45 14-11 34-8 45 4 1 1 2 3 2 5l0 0 113 140c16 11 31 24 45 40 4 3 6 7 8 11 48-3 100 0 151 9 278 48 473 255 436 462z m-624-379c-80 14-149 48-197 96 42 42 109 47 156 9 33-26 47-66 41-105z m-187-74c-19 16-33 37-39 60 50-32 109-55 174-68-42-25-95-24-135 8z m360 75c-34-7-69-9-102-8 8 62-16 128-68 170-73 59-175 54-244-5-9 20-16 40-20 61-28 159 121 317 333 354s407-60 434-217c28-159-121-318-333-355z",transform:"matrix(1 0 0 -1 0 850)"},selectbox:{width:1e3,height:1e3,path:"m0 850l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-285l0-143 143 0 0 143-143 0z m857 0l0-143 143 0 0 143-143 0z m-857-286l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z m285 0l0-143 143 0 0 143-143 0z m286 0l0-143 143 0 0 143-143 0z",transform:"matrix(1 0 0 -1 0 850)"},drawline:{width:70,height:70,path:"M60.64,62.3a11.29,11.29,0,0,0,6.09-6.72l6.35-17.72L60.54,25.31l-17.82,6.4c-2.36.86-5.57,3.41-6.6,6L24.48,65.5l8.42,8.42ZM40.79,39.63a7.89,7.89,0,0,1,3.65-3.17l14.79-5.31,8,8L61.94,54l-.06.19a6.44,6.44,0,0,1-3,3.43L34.07,68l-3.62-3.63Zm16.57,7.81a6.9,6.9,0,1,0-6.89,6.9A6.9,6.9,0,0,0,57.36,47.44Zm-4,0a2.86,2.86,0,1,1-2.85-2.85A2.86,2.86,0,0,1,53.32,47.44Zm-4.13,5.22L46.33,49.8,30.08,66.05l2.86,2.86ZM83.65,29,70,15.34,61.4,23.9,75.09,37.59ZM70,21.06l8,8-2.84,2.85-8-8ZM87,80.49H10.67V87H87Z",transform:"matrix(1 0 0 1 -15 -15)"},drawrect:{width:80,height:80,path:"M78,22V79H21V22H78m9-9H12V88H87V13ZM68,46.22H31V54H68ZM53,32H45.22V69H53Z",transform:"matrix(1 0 0 1 -10 -10)"},drawcircle:{width:80,height:80,path:"M50,84.72C26.84,84.72,8,69.28,8,50.3S26.84,15.87,50,15.87,92,31.31,92,50.3,73.16,84.72,50,84.72Zm0-60.59c-18.6,0-33.74,11.74-33.74,26.17S31.4,76.46,50,76.46,83.74,64.72,83.74,50.3,68.6,24.13,50,24.13Zm17.15,22h-34v7.11h34Zm-13.8-13H46.24v34h7.11Z",transform:"matrix(1 0 0 1 -10 -10)"},eraseshape:{width:80,height:80,path:"M82.77,78H31.85L6,49.57,31.85,21.14H82.77a8.72,8.72,0,0,1,8.65,8.77V69.24A8.72,8.72,0,0,1,82.77,78ZM35.46,69.84H82.77a.57.57,0,0,0,.49-.6V29.91a.57.57,0,0,0-.49-.61H35.46L17,49.57Zm32.68-34.7-24,24,5,5,24-24Zm-19,.53-5,5,24,24,5-5Z",transform:"matrix(1 0 0 1 -10 -10)"},spikeline:{width:1e3,height:1e3,path:"M512 409c0-57-46-104-103-104-57 0-104 47-104 104 0 57 47 103 104 103 57 0 103-46 103-103z m-327-39l92 0 0 92-92 0z m-185 0l92 0 0 92-92 0z m370-186l92 0 0 93-92 0z m0-184l92 0 0 92-92 0z",transform:"matrix(1.5 0 0 -1.5 0 850)"},pencil:{width:1792,height:1792,path:"M491 1536l91-91-235-235-91 91v107h128v128h107zm523-928q0-22-22-22-10 0-17 7l-542 542q-7 7-7 17 0 22 22 22 10 0 17-7l542-542q7-7 7-17zm-54-192l416 416-832 832h-416v-416zm683 96q0 53-37 90l-166 166-416-416 166-165q36-38 90-38 53 0 91 38l235 234q37 39 37 91z",transform:"matrix(1 0 0 1 0 1)"},newplotlylogo:{name:"newplotlylogo",svg:"<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 132 132'><defs><style>.cls-1 {fill: #3f4f75;} .cls-2 {fill: #80cfbe;} .cls-3 {fill: #fff;}</style></defs><title>plotly-logomark</title><g id='symbol'><rect class='cls-1' width='132' height='132' rx='6' ry='6'/><circle class='cls-2' cx='78' cy='54' r='6'/><circle class='cls-2' cx='102' cy='30' r='6'/><circle class='cls-2' cx='78' cy='30' r='6'/><circle class='cls-2' cx='54' cy='30' r='6'/><circle class='cls-2' cx='30' cy='30' r='6'/><circle class='cls-2' cx='30' cy='54' r='6'/><path class='cls-3' d='M30,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,30,72Z'/><path class='cls-3' d='M78,72a6,6,0,0,0-6,6v24a6,6,0,0,0,12,0V78A6,6,0,0,0,78,72Z'/><path class='cls-3' d='M54,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,54,48Z'/><path class='cls-3' d='M102,48a6,6,0,0,0-6,6v48a6,6,0,0,0,12,0V54A6,6,0,0,0,102,48Z'/></g></svg>"}}},{}],483:[function(_,oe,ae){"use strict";ae.isLeftAnchor=function(m){return"left"===m.xanchor||"auto"===m.xanchor&&m.x<=1/3},ae.isCenterAnchor=function(m){return"center"===m.xanchor||"auto"===m.xanchor&&m.x>1/3&&m.x<2/3},ae.isRightAnchor=function(m){return"right"===m.xanchor||"auto"===m.xanchor&&m.x>=2/3},ae.isTopAnchor=function(m){return"top"===m.yanchor||"auto"===m.yanchor&&m.y>=2/3},ae.isMiddleAnchor=function(m){return"middle"===m.yanchor||"auto"===m.yanchor&&m.y>1/3&&m.y<2/3},ae.isBottomAnchor=function(m){return"bottom"===m.yanchor||"auto"===m.yanchor&&m.y<=1/3}},{}],484:[function(_,oe,ae){"use strict";var m=_("./mod"),x=m.mod,T=m.modHalf,b=Math.PI,e=2*b;function o(d){return Math.abs(d[1]-d[0])>e-1e-14}function a(d,u){return T(u-d,e)}function l(d,u){if(o(u))return!0;var s,c;u[0]<u[1]?(s=u[0],c=u[1]):(s=u[1],c=u[0]),(s=x(s,e))>(c=x(c,e))&&(c+=e);var h=x(d,e),p=h+e;return h>=s&&h<=c||p>=s&&p<=c}function i(d,u,s,c,h,p,v){h=h||0,p=p||0;var g,f,w,y,M,A=o([s,c]);function k(F,R){return[F*Math.cos(R)+h,p-F*Math.sin(R)]}A?(g=0,f=b,w=e):s<c?(g=s,w=c):(g=c,w=s),d<u?(y=d,M=u):(y=u,M=d);var C,P=Math.abs(w-g)<=b?0:1;function D(F,R,L){return"A"+[F,F]+" "+[0,P,L]+" "+k(F,R)}return A?C=null===y?"M"+k(M,g)+D(M,f,0)+D(M,w,0)+"Z":"M"+k(y,g)+D(y,f,0)+D(y,w,0)+"ZM"+k(M,g)+D(M,f,1)+D(M,w,1)+"Z":null===y?(C="M"+k(M,g)+D(M,w,0),v&&(C+="L0,0Z")):C="M"+k(y,g)+"L"+k(M,g)+D(M,w,0)+"L"+k(y,w)+D(y,g,1)+"Z",C}oe.exports={deg2rad:function(d){return d/180*b},rad2deg:function(d){return d/b*180},angleDelta:a,angleDist:function(d,u){return Math.abs(a(d,u))},isFullCircle:o,isAngleInsideSector:l,isPtInsideSector:function(d,u,s,c){return!!l(u,c)&&(s[0]<s[1]?(h=s[0],p=s[1]):(h=s[1],p=s[0]),d>=h&&d<=p);var h,p},pathArc:function(d,u,s,c,h){return i(null,d,u,s,c,h,0)},pathSector:function(d,u,s,c,h){return i(null,d,u,s,c,h,1)},pathAnnulus:function(d,u,s,c,h,p){return i(d,u,s,c,h,p,1)}}},{"./mod":510}],485:[function(_,oe,ae){"use strict";var m=Array.isArray,x=ArrayBuffer,T=DataView;function b(a){return x.isView(a)&&!(a instanceof T)}function e(a){return m(a)||b(a)}function o(a,l,i){if(e(a)){if(e(a[0])){for(var d=i,u=0;u<a.length;u++)d=l(d,a[u].length);return d}return a.length}return 0}ae.isTypedArray=b,ae.isArrayOrTypedArray=e,ae.isArray1D=function(a){return!e(a[0])},ae.ensureArray=function(a,l){return m(a)||(a=[]),a.length=l,a},ae.concat=function(){var a,l,i,d,u,s,c,h,p=[],v=!0,g=0;for(i=0;i<arguments.length;i++)(s=(d=arguments[i]).length)&&(l?p.push(d):(l=d,u=s),m(d)?a=!1:(v=!1,g?a!==d.constructor&&(a=!1):a=d.constructor),g+=s);if(!g)return[];if(!p.length)return l;if(v)return l.concat.apply(l,p);if(a){for((c=new a(g)).set(l),i=0;i<p.length;i++)c.set(d=p[i],u),u+=d.length;return c}for(c=new Array(g),h=0;h<l.length;h++)c[h]=l[h];for(i=0;i<p.length;i++){for(d=p[i],h=0;h<d.length;h++)c[u+h]=d[h];u+=h}return c},ae.maxRowLength=function(a){return o(a,Math.max,0)},ae.minRowLength=function(a){return o(a,Math.min,1/0)}},{}],486:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../constants/numerical").BADNUM,T=/^['"%,$#\s']+|[, ]|['"%,$#\s']+$/g;oe.exports=function(b){return"string"==typeof b&&(b=b.replace(T,"")),m(b)?Number(b):x}},{"../constants/numerical":479,"fast-isnumeric":190}],487:[function(_,oe,ae){"use strict";oe.exports=function(m){var x=m._fullLayout;x._glcanvas&&x._glcanvas.size()&&x._glcanvas.each(function(T){T.regl&&T.regl.clear({color:!0,depth:!0})})}},{}],488:[function(_,oe,ae){"use strict";oe.exports=function(m){m._responsiveChartHandler&&(window.removeEventListener("resize",m._responsiveChartHandler),delete m._responsiveChartHandler)}},{}],489:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("tinycolor2"),T=_("../plots/attributes"),b=_("../components/colorscale/scales"),e=_("../components/color"),o=_("../constants/interactions").DESELECTDIM,a=_("./nested_property"),l=_("./regex").counter,i=_("./mod").modHalf,d=_("./array").isArrayOrTypedArray;function u(s,c){var h=ae.valObjectMeta[c.valType];if(c.arrayOk&&d(s))return!0;if(h.validateFunction)return h.validateFunction(s,c);var p={},v=p;return h.coerceFunction(s,{set:function(f){v=f}},p,c),v!==p}ae.valObjectMeta={data_array:{coerceFunction:function(s,c,h){d(s)?c.set(s):void 0!==h&&c.set(h)}},enumerated:{coerceFunction:function(s,c,h,p){p.coerceNumber&&(s=+s),-1===p.values.indexOf(s)?c.set(h):c.set(s)},validateFunction:function(s,c){c.coerceNumber&&(s=+s);for(var h=c.values,p=0;p<h.length;p++){var v=String(h[p]);if("/"===v.charAt(0)&&"/"===v.charAt(v.length-1)){if(new RegExp(v.substr(1,v.length-2)).test(s))return!0}else if(s===h[p])return!0}return!1}},boolean:{coerceFunction:function(s,c,h){c.set(!0===s||!1===s?s:h)}},number:{coerceFunction:function(s,c,h,p){!m(s)||void 0!==p.min&&s<p.min||void 0!==p.max&&s>p.max?c.set(h):c.set(+s)}},integer:{coerceFunction:function(s,c,h,p){s%1||!m(s)||void 0!==p.min&&s<p.min||void 0!==p.max&&s>p.max?c.set(h):c.set(+s)}},string:{coerceFunction:function(s,c,h,p){c.set("string"!=typeof s?!0!==p.strict&&"number"==typeof s?String(s):h:p.noBlank&&!s?h:s)}},color:{coerceFunction:function(s,c,h){x(s).isValid()?c.set(s):c.set(h)}},colorlist:{coerceFunction:function(s,c,h){Array.isArray(s)&&s.length&&s.every(function(p){return x(p).isValid()})?c.set(s):c.set(h)}},colorscale:{coerceFunction:function(s,c,h){c.set(b.get(s,h))}},angle:{coerceFunction:function(s,c,h){"auto"===s?c.set("auto"):m(s)?c.set(i(+s,360)):c.set(h)}},subplotid:{coerceFunction:function(s,c,h,p){var v=p.regex||l(h);"string"==typeof s&&v.test(s)?c.set(s):c.set(h)},validateFunction:function(s,c){var h=c.dflt;return s===h||"string"==typeof s&&!!l(h).test(s)}},flaglist:{coerceFunction:function(s,c,h,p){if("string"==typeof s)if(-1===(p.extras||[]).indexOf(s)){for(var v=s.split("+"),g=0;g<v.length;){var f=v[g];-1===p.flags.indexOf(f)||v.indexOf(f)<g?v.splice(g,1):g++}c.set(v.length?v.join("+"):h)}else c.set(s);else c.set(h)}},any:{coerceFunction:function(s,c,h){c.set(void 0===s?h:s)}},info_array:{coerceFunction:function(s,c,h,p){function v(I,B,V){var Z;return void 0===V&&(V=B.dflt),ae.valObjectMeta[B.valType].coerceFunction(I,{set:function(ee){Z=ee}},V,B),Z}var g=2===p.dimensions||"1-2"===p.dimensions&&Array.isArray(s)&&Array.isArray(s[0]);if(Array.isArray(s)){var f,w,y,A,k,C=p.items,P=[],D=Array.isArray(C),F=D&&g&&Array.isArray(C[0]),R=g&&D&&!F,L=D&&!R?C.length:s.length;if(h=Array.isArray(h)?h:[],g)for(f=0;f<L;f++)for(P[f]=[],y=Array.isArray(s[f])?s[f]:[],A=R?C.length:D?C[f].length:y.length,w=0;w<A;w++)void 0!==(k=v(y[w],R?C[w]:D?C[f][w]:C,(h[f]||[])[w]))&&(P[f][w]=k);else for(f=0;f<L;f++)void 0!==(k=v(s[f],D?C[f]:C,h[f]))&&(P[f]=k);c.set(P)}else c.set(h)},validateFunction:function(s,c){if(!Array.isArray(s))return!1;var h=c.items,p=Array.isArray(h),v=2===c.dimensions;if(!c.freeLength&&s.length!==h.length)return!1;for(var g=0;g<s.length;g++)if(v){if(!Array.isArray(s[g])||!c.freeLength&&s[g].length!==h[g].length)return!1;for(var f=0;f<s[g].length;f++)if(!u(s[g][f],p?h[g][f]:h))return!1}else if(!u(s[g],p?h[g]:h))return!1;return!0}}},ae.coerce=function(s,c,h,p,v){var g=a(h,p).get(),f=a(s,p),w=a(c,p),y=f.get(),M=c._template;if(void 0===y&&M&&(y=a(M,p).get(),M=0),void 0===v&&(v=g.dflt),g.arrayOk&&d(y))return w.set(y),y;var A=ae.valObjectMeta[g.valType].coerceFunction;A(y,w,v,g);var k=w.get();return M&&k===v&&!u(y,g)&&(A(y=a(M,p).get(),w,v,g),k=w.get()),k},ae.coerce2=function(s,c,h,p,v){var g=a(s,p),f=ae.coerce(s,c,h,p,v);return null!=g.get()&&f},ae.coerceFont=function(s,c,h){var p={};return p.family=s(c+".family",(h=h||{}).family),p.size=s(c+".size",h.size),p.color=s(c+".color",h.color),p},ae.coercePattern=function(s,c,h,p){if(s(c+".shape")){s(c+".solidity"),s(c+".size");var v="overlay"===s(c+".fillmode");if(!p){var g=s(c+".bgcolor",v?h:void 0);s(c+".fgcolor",v?e.contrast(g):h)}s(c+".fgopacity",v?.5:1)}},ae.coerceHoverinfo=function(s,c,h){var p,v=c._module.attributes,g=v.hoverinfo?v:T,f=g.hoverinfo;if(1===h._dataLength){var w="all"===f.dflt?f.flags.slice():f.dflt.split("+");w.splice(w.indexOf("name"),1),p=w.join("+")}return ae.coerce(s,c,g,"hoverinfo",p)},ae.coerceSelectionMarkerOpacity=function(s,c){if(s.marker){var h,p,v=s.marker.opacity;void 0!==v&&(d(v)||s.selected||s.unselected||(h=v,p=o*v),c("selected.marker.opacity",h),c("unselected.marker.opacity",p))}},ae.validate=u},{"../components/color":366,"../components/colorscale/scales":381,"../constants/interactions":478,"../plots/attributes":550,"./array":485,"./mod":510,"./nested_property":511,"./regex":520,"fast-isnumeric":190,tinycolor2:312}],490:[function(_,oe,ae){"use strict";var m,x,T=_("d3-time-format").timeFormat,b=_("fast-isnumeric"),e=_("./loggers"),o=_("./mod").mod,a=_("../constants/numerical"),l=a.BADNUM,i=a.ONEDAY,d=a.ONEHOUR,u=a.ONEMIN,s=a.ONESEC,c=a.EPOCHJD,h=_("../registry"),p=_("d3-time-format").utcFormat,v=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\d)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,g=/^\s*(-?\d\d\d\d|\d\d)(-(\d?\di?)(-(\d?\d)([ Tt]([01]?\d|2[0-3])(:([0-5]\d)(:([0-5]\d(\.\d+)?))?(Z|z|[+\-]\d\d(:?\d\d)?)?)?)?)?)?\s*$/m,f=(new Date).getFullYear()-70;function w(B){return B&&h.componentsRegistry.calendars&&"string"==typeof B&&"gregorian"!==B}function y(B,V){return String(B+Math.pow(10,V)).substr(1)}ae.dateTick0=function(B,V){var ee,J,Z=(J=!!V,w(ee=B)?J?h.getComponentMethod("calendars","CANONICAL_SUNDAY")[ee]:h.getComponentMethod("calendars","CANONICAL_TICK")[ee]:J?"2000-01-02":"2000-01-01");if(V<2)return Z;var Y=ae.dateTime2ms(Z,B);return ae.ms2DateTime(Y+=i*(V-1),0,B)},ae.dfltRange=function(B){return w(B)?h.getComponentMethod("calendars","DFLTRANGE")[B]:["2000-01-01","2001-01-01"]},ae.isJSDate=function(B){return"object"==typeof B&&null!==B&&"function"==typeof B.getTime},ae.dateTime2ms=function(B,V){if(ae.isJSDate(B)){var Z=B.getTimezoneOffset()*u,Y=(B.getUTCMinutes()-B.getMinutes())*u+(B.getUTCSeconds()-B.getSeconds())*s+(B.getUTCMilliseconds()-B.getMilliseconds());if(Y){var ee=3*u;Z=Z-ee/2+o(Y-Z+ee/2,ee)}return(B=Number(B)-Z)>=m&&B<=x?B:l}if("string"!=typeof B&&"number"!=typeof B)return l;B=String(B);var J=w(V),$=B.charAt(0);!J||"G"!==$&&"g"!==$||(B=B.substr(1),V="");var Q=J&&"chinese"===V.substr(0,7),se=B.match(Q?g:v);if(!se)return l;var j=se[1],G=se[3]||"1",W=Number(se[5]||1),ie=Number(se[7]||0),q=Number(se[9]||0),te=Number(se[11]||0);if(J){if(2===j.length)return l;var ne;j=Number(j);try{var le=h.getComponentMethod("calendars","getCal")(V);if(Q){var ue="i"===G.charAt(G.length-1);G=parseInt(G,10),ne=le.newDate(j,le.toMonthIndex(j,G,ue),W)}else ne=le.newDate(j,Number(G),W)}catch(he){return l}return ne?(ne.toJD()-c)*i+ie*d+q*u+te*s:l}j=2===j.length?(Number(j)+2e3-f)%100+f:Number(j),G-=1;var de=new Date(Date.UTC(2e3,G,W,ie,q));return de.setUTCFullYear(j),de.getUTCMonth()!==G||de.getUTCDate()!==W?l:de.getTime()+te*s},m=ae.MIN_MS=ae.dateTime2ms("-9999"),x=ae.MAX_MS=ae.dateTime2ms("9999-12-31 23:59:59.9999"),ae.isDateTime=function(B,V){return ae.dateTime2ms(B,V)!==l};var M=90*i,A=3*d,k=5*u;function C(B,V,Z,Y,ee){if((V||Z||Y||ee)&&(B+=" "+y(V,2)+":"+y(Z,2),(Y||ee)&&(B+=":"+y(Y,2),ee))){for(var J=4;ee%10==0;)J-=1,ee/=10;B+="."+y(ee,J)}return B}ae.ms2DateTime=function(B,V,Z){if("number"!=typeof B||!(B>=m&&B<=x))return l;V||(V=0);var Y,ee,J,$,Q,se,j=Math.floor(10*o(B+.05,1)),G=Math.round(B-j/10);if(w(Z)){var W=Math.floor(G/i)+c,ie=Math.floor(o(B,i));try{Y=h.getComponentMethod("calendars","getCal")(Z).fromJD(W).formatDate("yyyy-mm-dd")}catch(q){Y=p("G%Y-%m-%d")(new Date(G))}if("-"===Y.charAt(0))for(;Y.length<11;)Y="-0"+Y.substr(1);else for(;Y.length<10;)Y="0"+Y;ee=V<M?Math.floor(ie/d):0,J=V<M?Math.floor(ie%d/u):0,$=V<A?Math.floor(ie%u/s):0,Q=V<k?ie%s*10+j:0}else se=new Date(G),Y=p("%Y-%m-%d")(se),ee=V<M?se.getUTCHours():0,J=V<M?se.getUTCMinutes():0,$=V<A?se.getUTCSeconds():0,Q=V<k?10*se.getUTCMilliseconds()+j:0;return C(Y,ee,J,$,Q)},ae.ms2DateTimeLocal=function(B){if(!(B>=m+i&&B<=x-i))return l;var V=Math.floor(10*o(B+.05,1)),Z=new Date(Math.round(B-V/10));return C(T("%Y-%m-%d")(Z),Z.getHours(),Z.getMinutes(),Z.getSeconds(),10*Z.getUTCMilliseconds()+V)},ae.cleanDate=function(B,V,Z){if(B===l)return V;if(ae.isJSDate(B)||"number"==typeof B&&isFinite(B)){if(w(Z))return e.error("JS Dates and milliseconds are incompatible with world calendars",B),V;if(!(B=ae.ms2DateTimeLocal(+B))&&void 0!==V)return V}else if(!ae.isDateTime(B,Z))return e.error("unrecognized date",B),V;return B};var P=/%\d?f/g,D=/%h/g,F={1:"1",2:"1",3:"2",4:"2"};function R(B,V,Z,Y){B=B.replace(P,function(J){var $=Math.min(+J.charAt(1)||6,6);return(V/1e3%1+2).toFixed($).substr(2).replace(/0+$/,"")||"0"});var ee=new Date(Math.floor(V+.05));if(B=B.replace(D,function(){return F[Z("%q")(ee)]}),w(Y))try{B=h.getComponentMethod("calendars","worldCalFmt")(B,V,Y)}catch(J){return"Invalid"}return Z(B)(ee)}var L=[59,59.9,59.99,59.999,59.9999];ae.formatDate=function(B,V,Z,Y,ee,J){if(ee=w(ee)&&ee,!V)if("y"===Z)V=J.year;else if("m"===Z)V=J.month;else{if("d"!==Z)return function($,Q){var se=o($+.05,i),j=y(Math.floor(se/d),2)+":"+y(o(Math.floor(se/u),60),2);if("M"!==Q){b(Q)||(Q=0);var G=(100+Math.min(o($/s,60),L[Q])).toFixed(Q).substr(1);Q>0&&(G=G.replace(/0+$/,"").replace(/[\.]$/,"")),j+=":"+G}return j}(B,Z)+"\n"+R(J.dayMonthYear,B,Y,ee);V=J.dayMonth+"\n"+J.year}return R(V,B,Y,ee)};var I=3*i;ae.incrementMonth=function(B,V,Z){Z=w(Z)&&Z;var Y=o(B,i);if(B=Math.round(B-Y),Z)try{var ee=Math.round(B/i)+c,J=h.getComponentMethod("calendars","getCal")(Z),$=J.fromJD(ee);return V%12?J.add($,V,"m"):J.add($,V/12,"y"),($.toJD()-c)*i+Y}catch(se){e.error("invalid ms "+B+" in calendar "+Z)}var Q=new Date(B+I);return Q.setUTCMonth(Q.getUTCMonth()+V)+Y-I},ae.findExactDates=function(B,V){for(var Z,Y,ee=0,J=0,$=0,Q=0,se=w(V)&&h.getComponentMethod("calendars","getCal")(V),j=0;j<B.length;j++)if(b(Y=B[j])){if(!(Y%i))if(se)try{1===(Z=se.fromJD(Y/i+c)).day()?1===Z.month()?ee++:J++:$++}catch(W){}else 1===(Z=new Date(Y)).getUTCDate()?0===Z.getUTCMonth()?ee++:J++:$++}else Q++;$+=J+=ee;var G=B.length-Q;return{exactYears:ee/G,exactMonths:J/G,exactDays:$/G}}},{"../constants/numerical":479,"../registry":638,"./loggers":507,"./mod":510,"d3-time-format":120,"fast-isnumeric":190}],491:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("./loggers"),T=_("./matrix"),b=_("gl-mat4");function e(d){var u=d&&d.parentNode;u&&u.removeChild(d)}function o(d,u,s){var c="plotly.js-style-"+d,h=document.getElementById(c);h||((h=document.createElement("style")).setAttribute("id",c),h.appendChild(document.createTextNode("")),document.head.appendChild(h));var p=h.sheet;p.insertRule?p.insertRule(u+"{"+s+"}",0):p.addRule?p.addRule(u,s,0):x.warn("addStyleRule failed")}function a(d){var u=window.getComputedStyle(d,null),s=u.getPropertyValue("-webkit-transform")||u.getPropertyValue("-moz-transform")||u.getPropertyValue("-ms-transform")||u.getPropertyValue("-o-transform")||u.getPropertyValue("transform");return"none"===s?null:s.replace("matrix","").replace("3d","").slice(1,-1).split(",").map(function(c){return+c})}function l(d){for(var u=[];i(d);)u.push(d),d=d.parentNode;return u}function i(d){return d&&(d instanceof Element||d instanceof HTMLElement)}oe.exports={getGraphDiv:function(d){var u;if("string"==typeof d){if(null===(u=document.getElementById(d)))throw new Error("No DOM element with id '"+d+"' exists on the page.");return u}if(null==d)throw new Error("DOM element provided is null or undefined");return d},isPlotDiv:function(d){var u=m.select(d);return u.node()instanceof HTMLElement&&u.size()&&u.classed("js-plotly-plot")},removeElement:e,addStyleRule:function(d,u){o("global",d,u)},addRelatedStyleRule:o,deleteRelatedStyleRule:function(d){var s=document.getElementById("plotly.js-style-"+d);s&&e(s)},getFullTransformMatrix:function(d){var u=l(d),s=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return u.forEach(function(c){var h=a(c);if(h){var p=T.convertCssMatrix(h);s=b.multiply(s,s,p)}}),s},getElementTransformMatrix:a,getElementAndAncestors:l,equalDomRects:function(d,u){return d&&u&&d.x===u.x&&d.y===u.y&&d.top===u.top&&d.left===u.left&&d.right===u.right&&d.bottom===u.bottom}}},{"./loggers":507,"./matrix":509,"@plotly/d3":58,"gl-mat4":210}],492:[function(_,oe,ae){"use strict";var m=_("events").EventEmitter;oe.exports={init:function(T){if(T._ev instanceof m)return T;var b=new m,e=new m;return T._ev=b,T._internalEv=e,T.on=b.on.bind(b),T.once=b.once.bind(b),T.removeListener=b.removeListener.bind(b),T.removeAllListeners=b.removeAllListeners.bind(b),T._internalOn=e.on.bind(e),T._internalOnce=e.once.bind(e),T._removeInternalListener=e.removeListener.bind(e),T._removeAllInternalListeners=e.removeAllListeners.bind(e),T.emit=function(o,a){"undefined"!=typeof jQuery&&jQuery(T).trigger(o,a),b.emit(o,a),e.emit(o,a)},T},triggerHandler:function(T,b,e){var o,a;"undefined"!=typeof jQuery&&(o=jQuery(T).triggerHandler(b,e));var l=T._ev;if(!l)return o;var i,d=l._events[b];if(!d)return o;function u(s){return s.listener?(l.removeListener(b,s.listener),s.fired?void 0:(s.fired=!0,s.listener.apply(l,[e]))):s.apply(l,[e])}for(d=Array.isArray(d)?d:[d],i=0;i<d.length-1;i++)u(d[i]);return a=u(d[i]),void 0!==o?o:a},purge:function(T){return delete T._ev,delete T.on,delete T.once,delete T.removeListener,delete T.removeAllListeners,delete T.emit,delete T._ev,delete T._internalEv,delete T._internalOn,delete T._internalOnce,delete T._removeInternalListener,delete T._removeAllInternalListeners,T}}},{events:84}],493:[function(_,oe,ae){"use strict";var m=_("./is_plain_object.js"),x=Array.isArray;function T(b,e,o,a){var l,i,d,u,s,c,h=b[0],p=b.length;if(2===p&&x(h)&&x(b[1])&&0===h.length){if(function(g,f){var w,y;for(w=0;w<g.length;w++){if(null!==(y=g[w])&&"object"==typeof y)return!1;void 0!==y&&(f[w]=y)}return!0}(b[1],h))return h;h.splice(0,h.length)}for(var v=1;v<p;v++)for(i in l=b[v])d=h[i],u=l[i],a&&x(u)?h[i]=u:e&&u&&(m(u)||(s=x(u)))?(s?(s=!1,c=d&&x(d)?d:[]):c=d&&m(d)?d:{},h[i]=T([c,u],e,o,a)):(void 0!==u||o)&&(h[i]=u);return h}ae.extendFlat=function(){return T(arguments,!1,!1,!1)},ae.extendDeep=function(){return T(arguments,!0,!1,!1)},ae.extendDeepAll=function(){return T(arguments,!0,!0,!1)},ae.extendDeepNoArrays=function(){return T(arguments,!0,!1,!0)}},{"./is_plain_object.js":504}],494:[function(_,oe,ae){"use strict";oe.exports=function(m){for(var x={},T=[],b=0,e=0;e<m.length;e++){var o=m[e];1!==x[o]&&(x[o]=1,T[b++]=o)}return T}},{}],495:[function(_,oe,ae){"use strict";function m(T){return!0===T.visible}function x(T){var b=T[0].trace;return!0===b.visible&&0!==b._length}oe.exports=function(T){for(var b,e=(b=T,Array.isArray(b)&&Array.isArray(b[0])&&b[0][0]&&b[0][0].trace?x:m),o=[],a=0;a<T.length;a++){var l=T[a];e(l)&&o.push(l)}return o}},{}],496:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("country-regex"),T=_("@turf/area"),b=_("@turf/centroid"),e=_("@turf/bbox"),o=_("./identity"),a=_("./loggers"),l=_("./is_plain_object"),i=_("./nested_property"),d=_("./polygon"),u=Object.keys(x),s={"ISO-3":o,"USA-states":o,"country names":function(h){for(var p=0;p<u.length;p++){var v=u[p];if(new RegExp(x[v]).test(h.trim().toLowerCase()))return v}return a.log("Unrecognized country name: "+h+"."),!1}};function c(h){var p=h.geojson,v=window.PlotlyGeoAssets||{},g="string"==typeof p?v[p]:p;return l(g)?g:(a.error("Oops ... something went wrong when fetching "+p),!1)}oe.exports={locationToFeature:function(h,p,v){if(!p||"string"!=typeof p)return!1;var g,f,w,y=s[h](p);if(y){if("USA-states"===h)for(g=[],w=0;w<v.length;w++)(f=v[w]).properties&&f.properties.gu&&"USA"===f.properties.gu&&g.push(f);else g=v;for(w=0;w<g.length;w++)if((f=g[w]).id===y)return f;a.log(["Location with id",y,"does not have a matching topojson feature at this resolution."].join(" "))}return!1},feature2polygons:function(h){var p,v,g,f,w=h.geometry,y=w.coordinates,M=h.id,A=[];function k(C){for(var P=0;P<C.length-1;P++)if(C[P][0]>0&&C[P+1][0]<0)return P;return null}switch(p="RUS"===M||"FJI"===M?function(C){var P;if(null===k(C))P=C;else for(P=new Array(C.length),f=0;f<C.length;f++)P[f]=[C[f][0]<0?C[f][0]+360:C[f][0],C[f][1]];A.push(d.tester(P))}:"ATA"===M?function(C){var P=k(C);if(null===P)return A.push(d.tester(C));var D=new Array(C.length+1),F=0;for(f=0;f<C.length;f++)f>P?D[F++]=[C[f][0]+360,C[f][1]]:f===P?(D[F++]=C[f],D[F++]=[C[f][0],-90]):D[F++]=C[f];var R=d.tester(D);R.pts.pop(),A.push(R)}:function(C){A.push(d.tester(C))},w.type){case"MultiPolygon":for(v=0;v<y.length;v++)for(g=0;g<y[v].length;g++)p(y[v][g]);break;case"Polygon":for(v=0;v<y.length;v++)p(y[v])}return A},getTraceGeojson:c,extractTraceFeature:function(h){var p=h[0].trace,v=c(p);if(!v)return!1;var g,f={},w=[];for(g=0;g<p._length;g++){var y=h[g];(y.loc||0===y.loc)&&(f[y.loc]=y)}function M(C){var P=i(C,p.featureidkey||"id").get(),D=f[P];if(D){var F=C.geometry;if("Polygon"===F.type||"MultiPolygon"===F.type){var R={type:"Feature",id:P,geometry:F,properties:{}};R.properties.ct=function(L){var I,B=L.geometry;if("MultiPolygon"===B.type)for(var V=B.coordinates,Z=0,Y=0;Y<V.length;Y++){var ee={type:"Polygon",coordinates:V[Y]},J=T.default(ee);J>Z&&(Z=J,I=ee)}else I=B;return b.default(I).geometry.coordinates}(R),D.fIn=C,D.fOut=R,w.push(R)}else a.log(["Location",D.loc,"does not have a valid GeoJSON geometry.","Traces with locationmode *geojson-id* only support","*Polygon* and *MultiPolygon* geometries."].join(" "))}delete f[P]}switch(v.type){case"FeatureCollection":var A=v.features;for(g=0;g<A.length;g++)M(A[g]);break;case"Feature":M(v);break;default:return a.warn(["Invalid GeoJSON type",(v.type||"none")+".","Traces with locationmode *geojson-id* only support","*FeatureCollection* and *Feature* types."].join(" ")),!1}for(var k in f)a.log(["Location *"+k+"*","does not have a matching feature with id-key","*"+p.featureidkey+"*."].join(" "));return w},fetchTraceGeoData:function(h){var p=window.PlotlyGeoAssets||{},v=[];function g(M){return new Promise(function(A,k){m.json(M,function(C,P){return C?(delete p[M],k(new Error(404===C.status?'GeoJSON at URL "'+M+'" does not exist.':"Unexpected error while fetching from "+M))):(p[M]=P,A(P))})})}function f(M){return new Promise(function(A,k){var C=0,P=setInterval(function(){return p[M]&&"pending"!==p[M]?(clearInterval(P),A(p[M])):C>100?(clearInterval(P),k("Unexpected error while fetching from "+M)):void C++},50)})}for(var w=0;w<h.length;w++){var y=h[w][0].trace.geojson;"string"==typeof y&&(p[y]?"pending"===p[y]&&v.push(f(y)):(p[y]="pending",v.push(g(y))))}return v},computeBbox:function(h){return e.default(h)}}},{"./identity":501,"./is_plain_object":504,"./loggers":507,"./nested_property":511,"./polygon":515,"@plotly/d3":58,"@turf/area":61,"@turf/bbox":64,"@turf/centroid":67,"country-regex":94}],497:[function(_,oe,ae){"use strict";var m=_("../constants/numerical").BADNUM;ae.calcTraceToLineCoords=function(x){for(var T=x[0].trace.connectgaps,b=[],e=[],o=0;o<x.length;o++){var a=x[o].lonlat;a[0]!==m?e.push(a):!T&&e.length>0&&(b.push(e),e=[])}return e.length>0&&b.push(e),b},ae.makeLine=function(x){return 1===x.length?{type:"LineString",coordinates:x[0]}:{type:"MultiLineString",coordinates:x}},ae.makePolygon=function(x){if(1===x.length)return{type:"Polygon",coordinates:x};for(var T=new Array(x.length),b=0;b<x.length;b++)T[b]=[x[b]];return{type:"MultiPolygon",coordinates:T}},ae.makeBlank=function(){return{type:"Point",coordinates:[]}}},{"../constants/numerical":479}],498:[function(_,oe,ae){"use strict";var m,x,T,b=_("./mod").mod;function e(a,l,i,d,u,s,c,h){var p=i-a,v=u-a,g=c-u,f=d-l,w=s-l,y=h-s,M=p*y-g*f;if(0===M)return null;var A=(v*y-g*w)/M,k=(v*f-p*w)/M;return k<0||k>1||A<0||A>1?null:{x:a+p*A,y:l+f*A}}function o(a,l,i,d,u){var s=d*a+u*l;if(s<0)return d*d+u*u;if(s>i){var c=d-a,h=u-l;return c*c+h*h}var p=d*l-u*a;return p*p/i}ae.segmentsIntersect=e,ae.segmentDistance=function(a,l,i,d,u,s,c,h){if(e(a,l,i,d,u,s,c,h))return 0;var p=i-a,v=d-l,g=c-u,f=h-s,w=p*p+v*v,y=g*g+f*f,M=Math.min(o(p,v,w,u-a,s-l),o(p,v,w,c-a,h-l),o(g,f,y,a-u,l-s),o(g,f,y,i-u,d-s));return Math.sqrt(M)},ae.getTextLocation=function(a,l,i,d){if(a===x&&d===T||(m={},x=a,T=d),m[i])return m[i];var u=a.getPointAtLength(b(i-d/2,l)),s=a.getPointAtLength(b(i+d/2,l)),c=Math.atan((s.y-u.y)/(s.x-u.x)),h=a.getPointAtLength(b(i,l)),p={x:(4*h.x+u.x+s.x)/6,y:(4*h.y+u.y+s.y)/6,theta:c};return m[i]=p,p},ae.clearLocationCache=function(){x=null},ae.getVisibleSegment=function(a,l,i){var d,u,s=l.left,c=l.right,h=l.top,p=l.bottom,v=0,g=a.getTotalLength(),f=g;function w(M){var A=a.getPointAtLength(M);0===M?d=A:M===g&&(u=A);var k=A.x<s?s-A.x:A.x>c?A.x-c:0,C=A.y<h?h-A.y:A.y>p?A.y-p:0;return Math.sqrt(k*k+C*C)}for(var y=w(v);y;){if((v+=y+i)>f)return;y=w(v)}for(y=w(f);y;){if(v>(f-=y+i))return;y=w(f)}return{min:v,max:f,len:f-v,total:g,isClosed:0===v&&f===g&&Math.abs(d.x-u.x)<.1&&Math.abs(d.y-u.y)<.1}},ae.findPointOnPath=function(a,l,i,d){for(var u,s,c,h=(d=d||{}).pathLength||a.getTotalLength(),p=d.tolerance||.001,v=d.iterationLimit||30,g=a.getPointAtLength(0)[i]>a.getPointAtLength(h)[i]?-1:1,f=0,w=0,y=h;f<v;){if(c=(s=a.getPointAtLength(u=(w+y)/2))[i]-l,Math.abs(c)<p)return s;g*c>0?y=u:w=u,f++}return s}},{"./mod":510}],499:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("tinycolor2"),T=_("color-normalize"),b=_("../components/colorscale"),e=_("../components/color/attributes").defaultLine,o=_("./array").isArrayOrTypedArray,a=T(e);function l(u,s){var c=u;return c[3]*=s,c}function i(u){if(m(u))return a;var s=T(u);return s.length?s:a}function d(u){return m(u)?u:1}oe.exports={formatColor:function(u,s,c){var h,p,v,g,f,w=u.color,y=o(w),M=o(s),A=b.extractOpts(u),k=[];if(h=void 0!==A.colorscale?b.makeColorScaleFuncFromTrace(u):i,p=y?function(P,D){return void 0===P[D]?a:T(h(P[D]))}:i,v=M?function(P,D){return void 0===P[D]?1:d(P[D])}:d,y||M)for(var C=0;C<c;C++)g=p(w,C),f=v(s,C),k[C]=l(g,f);else k=l(T(w),s);return k},parseColorScale:function(u){var s=b.extractOpts(u),c=s.colorscale;return s.reversescale&&(c=b.flipScale(s.colorscale)),c.map(function(h){var p=h[0],v=x(h[1]).toRgb();return{index:p,rgb:[v.r,v.g,v.b,v.a]}})}}},{"../components/color/attributes":365,"../components/colorscale":378,"./array":485,"color-normalize":89,"fast-isnumeric":190,tinycolor2:312}],500:[function(_,oe,ae){"use strict";var m=_("./identity");function x(T){return[T]}oe.exports={keyFun:function(T){return T.key},repeat:x,descend:m,wrap:x,unwrap:function(T){return T[0]}}},{"./identity":501}],501:[function(_,oe,ae){"use strict";oe.exports=function(m){return m}},{}],502:[function(_,oe,ae){"use strict";oe.exports=function(m,x){if(!x)return m;var T=1/Math.abs(x),b=T>1?(T*m+T*x)/T:m+x,e=String(b).length;if(e>16){var o=String(x).length;if(e>=String(m).length+o){var a=parseFloat(b).toPrecision(12);-1===a.indexOf("e+")&&(b=+a)}}return b}},{}],503:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("d3-time-format").utcFormat,T=_("d3-format").format,b=_("fast-isnumeric"),e=_("../constants/numerical"),o=e.FP_SAFE,a=-o,l=e.BADNUM,i=oe.exports={};i.adjustFormat=function(j){return!j||/^\d[.]\df/.test(j)||/[.]\d%/.test(j)?j:"0.f"===j?"~f":/^\d%/.test(j)?"~%":/^\ds/.test(j)?"~s":!/^[~,.0$]/.test(j)&&/[&fps]/.test(j)?"~"+j:j};var d={};i.warnBadFormat=function(j){var G=String(j);d[G]||(d[G]=1,i.warn('encountered bad format: "'+G+'"'))},i.noFormat=function(j){return String(j)},i.numberFormat=function(j){var G;try{G=T(i.adjustFormat(j))}catch(W){return i.warnBadFormat(j),i.noFormat}return G},i.nestedProperty=_("./nested_property"),i.keyedContainer=_("./keyed_container"),i.relativeAttr=_("./relative_attr"),i.isPlainObject=_("./is_plain_object"),i.toLogRange=_("./to_log_range"),i.relinkPrivateKeys=_("./relink_private");var u=_("./array");i.isTypedArray=u.isTypedArray,i.isArrayOrTypedArray=u.isArrayOrTypedArray,i.isArray1D=u.isArray1D,i.ensureArray=u.ensureArray,i.concat=u.concat,i.maxRowLength=u.maxRowLength,i.minRowLength=u.minRowLength;var s=_("./mod");i.mod=s.mod,i.modHalf=s.modHalf;var c=_("./coerce");i.valObjectMeta=c.valObjectMeta,i.coerce=c.coerce,i.coerce2=c.coerce2,i.coerceFont=c.coerceFont,i.coercePattern=c.coercePattern,i.coerceHoverinfo=c.coerceHoverinfo,i.coerceSelectionMarkerOpacity=c.coerceSelectionMarkerOpacity,i.validate=c.validate;var h=_("./dates");i.dateTime2ms=h.dateTime2ms,i.isDateTime=h.isDateTime,i.ms2DateTime=h.ms2DateTime,i.ms2DateTimeLocal=h.ms2DateTimeLocal,i.cleanDate=h.cleanDate,i.isJSDate=h.isJSDate,i.formatDate=h.formatDate,i.incrementMonth=h.incrementMonth,i.dateTick0=h.dateTick0,i.dfltRange=h.dfltRange,i.findExactDates=h.findExactDates,i.MIN_MS=h.MIN_MS,i.MAX_MS=h.MAX_MS;var p=_("./search");i.findBin=p.findBin,i.sorterAsc=p.sorterAsc,i.sorterDes=p.sorterDes,i.distinctVals=p.distinctVals,i.roundUp=p.roundUp,i.sort=p.sort,i.findIndexOfMin=p.findIndexOfMin,i.sortObjectKeys=_("./sort_object_keys");var v=_("./stats");i.aggNums=v.aggNums,i.len=v.len,i.mean=v.mean,i.median=v.median,i.midRange=v.midRange,i.variance=v.variance,i.stdev=v.stdev,i.interp=v.interp;var g=_("./matrix");i.init2dArray=g.init2dArray,i.transposeRagged=g.transposeRagged,i.dot=g.dot,i.translationMatrix=g.translationMatrix,i.rotationMatrix=g.rotationMatrix,i.rotationXYMatrix=g.rotationXYMatrix,i.apply3DTransform=g.apply3DTransform,i.apply2DTransform=g.apply2DTransform,i.apply2DTransform2=g.apply2DTransform2,i.convertCssMatrix=g.convertCssMatrix,i.inverseTransformMatrix=g.inverseTransformMatrix;var f=_("./angles");i.deg2rad=f.deg2rad,i.rad2deg=f.rad2deg,i.angleDelta=f.angleDelta,i.angleDist=f.angleDist,i.isFullCircle=f.isFullCircle,i.isAngleInsideSector=f.isAngleInsideSector,i.isPtInsideSector=f.isPtInsideSector,i.pathArc=f.pathArc,i.pathSector=f.pathSector,i.pathAnnulus=f.pathAnnulus;var w=_("./anchor_utils");i.isLeftAnchor=w.isLeftAnchor,i.isCenterAnchor=w.isCenterAnchor,i.isRightAnchor=w.isRightAnchor,i.isTopAnchor=w.isTopAnchor,i.isMiddleAnchor=w.isMiddleAnchor,i.isBottomAnchor=w.isBottomAnchor;var y=_("./geometry2d");i.segmentsIntersect=y.segmentsIntersect,i.segmentDistance=y.segmentDistance,i.getTextLocation=y.getTextLocation,i.clearLocationCache=y.clearLocationCache,i.getVisibleSegment=y.getVisibleSegment,i.findPointOnPath=y.findPointOnPath;var M=_("./extend");i.extendFlat=M.extendFlat,i.extendDeep=M.extendDeep,i.extendDeepAll=M.extendDeepAll,i.extendDeepNoArrays=M.extendDeepNoArrays;var A=_("./loggers");i.log=A.log,i.warn=A.warn,i.error=A.error;var k=_("./regex");i.counterRegex=k.counter;var C=_("./throttle");i.throttle=C.throttle,i.throttleDone=C.done,i.clearThrottle=C.clear;var P=_("./dom");function D(j){var G={};for(var W in j)for(var ie=j[W],q=0;q<ie.length;q++)G[ie[q]]=+W;return G}i.getGraphDiv=P.getGraphDiv,i.isPlotDiv=P.isPlotDiv,i.removeElement=P.removeElement,i.addStyleRule=P.addStyleRule,i.addRelatedStyleRule=P.addRelatedStyleRule,i.deleteRelatedStyleRule=P.deleteRelatedStyleRule,i.getFullTransformMatrix=P.getFullTransformMatrix,i.getElementTransformMatrix=P.getElementTransformMatrix,i.getElementAndAncestors=P.getElementAndAncestors,i.equalDomRects=P.equalDomRects,i.clearResponsive=_("./clear_responsive"),i.preserveDrawingBuffer=_("./preserve_drawing_buffer"),i.makeTraceGroups=_("./make_trace_groups"),i._=_("./localize"),i.notifier=_("./notifier"),i.filterUnique=_("./filter_unique"),i.filterVisible=_("./filter_visible"),i.pushUnique=_("./push_unique"),i.increment=_("./increment"),i.cleanNumber=_("./clean_number"),i.ensureNumber=function(j){return b(j)?(j=Number(j))>o||j<a?l:j:l},i.isIndex=function(j,G){return!(void 0!==G&&j>=G)&&b(j)&&j>=0&&j%1==0},i.noop=_("./noop"),i.identity=_("./identity"),i.repeat=function(j,G){for(var W=new Array(G),ie=0;ie<G;ie++)W[ie]=j;return W},i.swapAttrs=function(j,G,W,ie){W||(W="x"),ie||(ie="y");for(var q=0;q<G.length;q++){var te=G[q],ne=i.nestedProperty(j,te.replace("?",W)),le=i.nestedProperty(j,te.replace("?",ie)),ue=ne.get();ne.set(le.get()),le.set(ue)}},i.raiseToTop=function(j){j.parentNode.appendChild(j)},i.cancelTransition=function(j){return j.transition().duration(0)},i.constrain=function(j,G,W){return G>W?Math.max(W,Math.min(G,j)):Math.max(G,Math.min(W,j))},i.bBoxIntersect=function(j,G,W){return j.left<=G.right+(W=W||0)&&G.left<=j.right+W&&j.top<=G.bottom+W&&G.top<=j.bottom+W},i.simpleMap=function(j,G,W,ie,q){for(var te=j.length,ne=new Array(te),le=0;le<te;le++)ne[le]=G(j[le],W,ie,q);return ne},i.randstr=function j(G,W,ie,q){if(ie||(ie=16),void 0===W&&(W=24),W<=0)return"0";var te,ne,le=Math.log(Math.pow(2,W))/Math.log(ie),ue="";for(te=2;le===1/0;te*=2)le=Math.log(Math.pow(2,W/te))/Math.log(ie)*te;var de=le-Math.floor(le);for(te=0;te<Math.floor(le);te++)ue=Math.floor(Math.random()*ie).toString(ie)+ue;de&&(ne=Math.pow(ie,de),ue=Math.floor(Math.random()*ne).toString(ie)+ue);var he=parseInt(ue,ie);return G&&G[ue]||he!==1/0&&he>=Math.pow(2,W)?q>10?(i.warn("randstr failed uniqueness"),ue):j(G,W,ie,(q||0)+1):ue},i.OptionControl=function(j,G){j||(j={}),G||(G="opt");var W={optionList:[],_newoption:function(ie){ie[G]=j,W[ie.name]=ie,W.optionList.push(ie)}};return W["_"+G]=j,W},i.smooth=function(j,G){if((G=Math.round(G)||0)<2)return j;var W,ie,q,te,ne=j.length,le=2*ne,ue=2*G-1,de=new Array(ue),he=new Array(ne);for(W=0;W<ue;W++)de[W]=(1-Math.cos(Math.PI*(W+1)/G))/(2*G);for(W=0;W<ne;W++){for(te=0,ie=0;ie<ue;ie++)(q=W+ie+1-G)<-ne?q-=le*Math.round(q/le):q>=le&&(q-=le*Math.floor(q/le)),q<0?q=-1-q:q>=ne&&(q=le-1-q),te+=j[q]*de[ie];he[W]=te}return he},i.syncOrAsync=function(j,G,W){var ie;function q(){return i.syncOrAsync(j,G,W)}for(;j.length;)if((ie=(0,j.splice(0,1)[0])(G))&&ie.then)return ie.then(q);return W&&W(G)},i.stripTrailingSlash=function(j){return"/"===j.substr(-1)?j.substr(0,j.length-1):j},i.noneOrAll=function(j,G,W){if(j){var ie,q=!1,te=!0;for(ie=0;ie<W.length;ie++)null!=j[W[ie]]?q=!0:te=!1;if(q&&!te)for(ie=0;ie<W.length;ie++)j[W[ie]]=G[W[ie]]}},i.mergeArray=function(j,G,W,ie){var q="function"==typeof ie;if(i.isArrayOrTypedArray(j))for(var te=Math.min(j.length,G.length),ne=0;ne<te;ne++){var le=j[ne];G[ne][W]=q?ie(le):le}},i.mergeArrayCastPositive=function(j,G,W){return i.mergeArray(j,G,W,function(ie){var q=+ie;return isFinite(q)&&q>0?q:0})},i.fillArray=function(j,G,W,ie){if(ie=ie||i.identity,i.isArrayOrTypedArray(j))for(var q=0;q<G.length;q++)G[q][W]=ie(j[q])},i.castOption=function(j,G,W,ie){ie=ie||i.identity;var q=i.nestedProperty(j,W).get();return i.isArrayOrTypedArray(q)?Array.isArray(G)&&i.isArrayOrTypedArray(q[G[0]])?ie(q[G[0]][G[1]]):ie(q[G]):q},i.extractOption=function(j,G,W,ie){if(W in j)return j[W];var q=i.nestedProperty(G,ie).get();return Array.isArray(q)?void 0:q},i.tagSelected=function(j,G,W){var ie,q,te=G.selectedpoints,ne=G._indexToPoints;ne&&(ie=D(ne));for(var le=0;le<te.length;le++){var ue=te[le];if(i.isIndex(ue)||i.isArrayOrTypedArray(ue)&&i.isIndex(ue[0])&&i.isIndex(ue[1])){var de=ie?ie[ue]:ue,he=W?W[de]:de;void 0!==(q=he)&&q<j.length&&(j[he].selected=1)}}},i.selIndices2selPoints=function(j){var G=j.selectedpoints,W=j._indexToPoints;if(W){for(var ie=D(W),q=[],te=0;te<G.length;te++){var ne=G[te];if(i.isIndex(ne)){var le=ie[ne];i.isIndex(le)&&q.push(le)}}return q}return G},i.getTargetArray=function(j,G){var W=G.target;if("string"==typeof W&&W){var ie=i.nestedProperty(j,W).get();return!!Array.isArray(ie)&&ie}return!!Array.isArray(W)&&W},i.minExtend=function(j,G){var W={};"object"!=typeof G&&(G={});var ie,q,te,ne=Object.keys(j);for(ie=0;ie<ne.length;ie++)te=j[q=ne[ie]],"_"!==q.charAt(0)&&"function"!=typeof te&&(W[q]="module"===q?te:Array.isArray(te)?"colorscale"===q?te.slice():te.slice(0,3):i.isTypedArray(te)?te.subarray(0,3):te&&"object"==typeof te?i.minExtend(j[q],G[q]):te);for(ne=Object.keys(G),ie=0;ie<ne.length;ie++)"object"==typeof(te=G[q=ne[ie]])&&q in W&&"object"==typeof W[q]||(W[q]=te);return W},i.titleCase=function(j){return j.charAt(0).toUpperCase()+j.substr(1)},i.containsAny=function(j,G){for(var W=0;W<G.length;W++)if(-1!==j.indexOf(G[W]))return!0;return!1},i.isIE=function(){return void 0!==window.navigator.msSaveBlob};var F=/Version\/[\d\.]+.*Safari/;i.isSafari=function(){return F.test(window.navigator.userAgent)};var R=/iPad|iPhone|iPod/;i.isIOS=function(){return R.test(window.navigator.userAgent)};var L=/Firefox\/(\d+)\.\d+/;i.getFirefoxVersion=function(){var j=L.exec(window.navigator.userAgent);if(j&&2===j.length){var G=parseInt(j[1]);if(!isNaN(G))return G}return null},i.isD3Selection=function(j){return j instanceof m.selection},i.ensureSingle=function(j,G,W,ie){var q=j.select(G+(W?"."+W:""));if(q.size())return q;var te=j.append(G);return W&&te.classed(W,!0),ie&&te.call(ie),te},i.ensureSingleById=function(j,G,W,ie){var q=j.select(G+"#"+W);if(q.size())return q;var te=j.append(G).attr("id",W);return ie&&te.call(ie),te},i.objectFromPath=function(j,G){for(var W,ie=j.split("."),q=W={},te=0;te<ie.length;te++){var ne=ie[te],le=null,ue=ie[te].match(/(.*)\[([0-9]+)\]/);ue?(le=ue[2],(W=W[ne=ue[1]]=[])[le]=te===ie.length-1?G:{},W=W[le]):(W[ne]=te===ie.length-1?G:{},W=W[ne])}return q};var I=/^([^\[\.]+)\.(.+)?/,B=/^([^\.]+)\[([0-9]+)\](\.)?(.+)?/;i.expandObjectPaths=function(j){var G,W,ie,q,te,ne,le;if("object"==typeof j&&!Array.isArray(j))for(W in j)j.hasOwnProperty(W)&&((G=W.match(I))?(q=j[W],ie=G[1],delete j[W],j[ie]=i.extendDeepNoArrays(j[ie]||{},i.objectFromPath(W,i.expandObjectPaths(q))[ie])):(G=W.match(B))?(q=j[W],ie=G[1],te=parseInt(G[2]),delete j[W],j[ie]=j[ie]||[],"."===G[3]?(le=G[4],ne=j[ie][te]=j[ie][te]||{},i.extendDeepNoArrays(ne,i.objectFromPath(le,i.expandObjectPaths(q)))):j[ie][te]=i.expandObjectPaths(q)):j[W]=i.expandObjectPaths(j[W]));return j},i.numSeparate=function(j,G,W){if(W||(W=!1),"string"!=typeof G||0===G.length)throw new Error("Separator string required for formatting!");"number"==typeof j&&(j=String(j));var ie=/(\d+)(\d{3})/,q=G.charAt(0),te=G.charAt(1),ne=j.split("."),le=ne[0],ue=ne.length>1?q+ne[1]:"";if(te&&(ne.length>1||le.length>4||W))for(;ie.test(le);)le=le.replace(ie,"$1"+te+"$2");return le+ue},i.TEMPLATE_STRING_REGEX=/%{([^\s%{}:]*)([:|\|][^}]*)?}/g;var V=/^\w*$/;i.templateString=function(j,G){var W={};return j.replace(i.TEMPLATE_STRING_REGEX,function(ie,q){var te;return V.test(q)?te=G[q]:(W[q]=W[q]||i.nestedProperty(G,q).get,te=W[q]()),i.isValidTextValue(te)?te:""})};var Z={max:10,count:0,name:"hovertemplate"};i.hovertemplateString=function(){return J.apply(Z,arguments)};var Y={max:10,count:0,name:"texttemplate"};i.texttemplateString=function(){return J.apply(Y,arguments)};var ee=/^[:|\|]/;function J(j,G,W){var ie=this,q=arguments;G||(G={});var te={};return j.replace(i.TEMPLATE_STRING_REGEX,function(ne,le,ue){var de,he,be,ge="_xother"===le||"_yother"===le,we="_xother_"===le||"_yother_"===le,Ce="xother_"===le||"yother_"===le,De="xother"===le||"yother"===le||ge||Ce||we,Se=le;if((ge||we)&&(Se=Se.substring(1)),(Ce||we)&&(Se=Se.substring(0,Se.length-1)),De){if(void 0===(de=G[Se]))return""}else for(be=3;be<q.length;be++)if(he=q[be]){if(he.hasOwnProperty(Se)){de=he[Se];break}if(V.test(Se)||(de=i.nestedProperty(he,Se).get(),(de=te[Se]||i.nestedProperty(he,Se).get())&&(te[Se]=de)),void 0!==de)break}if(void 0===de&&ie)return ie.count<ie.max&&(i.warn("Variable '"+Se+"' in "+ie.name+" could not be found!"),de=ne),ie.count===ie.max&&i.warn("Too many "+ie.name+" warnings - additional warnings will be suppressed"),ie.count++,ne;if(ue){var Fe;if(":"===ue[0]&&(de=(Fe=W?W.numberFormat:i.numberFormat)(ue.replace(ee,""))(de)),"|"===ue[0]){Fe=W?W.timeFormat:x;var ve=i.dateTime2ms(de);de=i.formatDate(ve,ue.replace(ee,""),!1,Fe)}}else{var Te=Se+"Label";G.hasOwnProperty(Te)&&(de=G[Te])}return De&&(de="("+de+")",(ge||we)&&(de=" "+de),(Ce||we)&&(de+=" ")),de})}i.subplotSort=function(j,G){for(var W=Math.min(j.length,G.length)+1,ie=0,q=0,te=0;te<W;te++){var ne=j.charCodeAt(te)||0,le=G.charCodeAt(te)||0,ue=ne>=48&&ne<=57,de=le>=48&&le<=57;if(ue&&(ie=10*ie+ne-48),de&&(q=10*q+le-48),!ue||!de){if(ie!==q)return ie-q;if(ne!==le)return ne-le}}return q-ie};var $=2e9;i.seedPseudoRandom=function(){$=2e9},i.pseudoRandom=function(){var j=$;return $=(69069*$+1)%4294967296,Math.abs($-j)<429496729?i.pseudoRandom():$/4294967296},i.fillText=function(j,G,W){var ie=Array.isArray(W)?function(ne){W.push(ne)}:function(ne){W.text=ne},q=i.extractOption(j,G,"htx","hovertext");if(i.isValidTextValue(q))return ie(q);var te=i.extractOption(j,G,"tx","text");return i.isValidTextValue(te)?ie(te):void 0},i.isValidTextValue=function(j){return j||0===j},i.formatPercent=function(j,G){G=G||0;for(var W=(Math.round(100*j*Math.pow(10,G))*Math.pow(.1,G)).toFixed(G)+"%",ie=0;ie<G;ie++)-1!==W.indexOf(".")&&(W=(W=W.replace("0%","%")).replace(".%","%"));return W},i.isHidden=function(j){var G=window.getComputedStyle(j).display;return!G||"none"===G},i.strTranslate=function(j,G){return j||G?"translate("+j+","+G+")":""},i.strRotate=function(j){return j?"rotate("+j+")":""},i.strScale=function(j){return 1!==j?"scale("+j+")":""},i.getTextTransform=function(j){var G=j.noCenter,W=j.textX,ie=j.textY,ue=j.rotate,de=j.scale;return de?de>1&&(de=1):de=0,i.strTranslate(j.targetX-de*(W+(j.anchorX||0)),j.targetY-de*(ie+(j.anchorY||0)))+i.strScale(de)+(ue?"rotate("+ue+(G?"":" "+W+" "+ie)+")":"")},i.ensureUniformFontSize=function(j,G){var W=i.extendFlat({},G);return W.size=Math.max(G.size,j._fullLayout.uniformtext.minsize||0),W},i.join2=function(j,G,W){var ie=j.length;return ie>1?j.slice(0,-1).join(G)+W+j[ie-1]:j.join(G)},i.bigFont=function(j){return Math.round(1.2*j)};var Q=i.getFirefoxVersion(),se=null!==Q&&Q<86;i.getPositionFromD3Event=function(){return se?[m.event.layerX,m.event.layerY]:[m.event.offsetX,m.event.offsetY]}},{"../constants/numerical":479,"./anchor_utils":483,"./angles":484,"./array":485,"./clean_number":486,"./clear_responsive":488,"./coerce":489,"./dates":490,"./dom":491,"./extend":493,"./filter_unique":494,"./filter_visible":495,"./geometry2d":498,"./identity":501,"./increment":502,"./is_plain_object":504,"./keyed_container":505,"./localize":506,"./loggers":507,"./make_trace_groups":508,"./matrix":509,"./mod":510,"./nested_property":511,"./noop":512,"./notifier":513,"./preserve_drawing_buffer":517,"./push_unique":518,"./regex":520,"./relative_attr":521,"./relink_private":522,"./search":523,"./sort_object_keys":526,"./stats":527,"./throttle":530,"./to_log_range":531,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],504:[function(_,oe,ae){"use strict";oe.exports=function(m){return window&&window.process&&window.process.versions?"[object Object]"===Object.prototype.toString.call(m):"[object Object]"===Object.prototype.toString.call(m)&&Object.getPrototypeOf(m).hasOwnProperty("hasOwnProperty")}},{}],505:[function(_,oe,ae){"use strict";var m=_("./nested_property"),x=/^\w*$/;oe.exports=function(T,b,e,o){var a,l,i;e=e||"name",o=o||"value";var d={};b&&b.length?(i=m(T,b),l=i.get()):l=T,b=b||"";var u={};if(l)for(a=0;a<l.length;a++)u[l[a][e]]=a;var s=x.test(o),c={set:function(h,p){var v=null===p?4:0;if(!l){if(!i||4===v)return;i.set(l=[])}var g=u[h];if(void 0===g){if(4===v)return;v|=3,u[h]=g=l.length}else p!==(s?l[g][o]:m(l[g],o).get())&&(v|=2);var f=l[g]=l[g]||{};return f[e]=h,s?f[o]=p:m(f,o).set(p),null!==p&&(v&=-5),d[g]=d[g]|v,c},get:function(h){if(l){var p=u[h];return void 0===p?void 0:s?l[p][o]:m(l[p],o).get()}},rename:function(h,p){var v=u[h];return void 0===v||(d[v]=1|d[v],u[p]=v,delete u[h],l[v][e]=p),c},remove:function(h){var p=u[h];if(void 0===p)return c;var v=l[p];if(Object.keys(v).length>2)return d[p]=2|d[p],c.set(h,null);if(s){for(a=p;a<l.length;a++)d[a]=3|d[a];for(a=p;a<l.length;a++)u[l[a][e]]--;l.splice(p,1),delete u[h]}else m(v,o).set(null),d[p]=6|d[p];return c},constructUpdate:function(){for(var h,p,v={},g=Object.keys(d),f=0;f<g.length;f++)h=b+"["+(p=g[f])+"]",l[p]?(1&d[p]&&(v[h+"."+e]=l[p][e]),2&d[p]&&(v[h+"."+o]=s?4&d[p]?null:l[p][o]:4&d[p]?null:m(l[p],o).get())):v[h]=null;return v}};return c}},{"./nested_property":511}],506:[function(_,oe,ae){"use strict";var m=_("../registry");oe.exports=function(x,T){for(var b=x._context.locale,e=0;e<2;e++){for(var o=x._context.locales,a=0;a<2;a++){var l=(o[b]||{}).dictionary;if(l){var i=l[T];if(i)return i}o=m.localeRegistry}var d=b.split("-")[0];if(d===b)break;b=d}return T}},{"../registry":638}],507:[function(_,oe,ae){"use strict";var m=_("../plot_api/plot_config").dfltConfig,x=_("./notifier"),T=oe.exports={};T.log=function(){var b;if(m.logging>1){var e=["LOG:"];for(b=0;b<arguments.length;b++)e.push(arguments[b]);console.trace.apply(console,e)}if(m.notifyOnLogging>1){var o=[];for(b=0;b<arguments.length;b++)o.push(arguments[b]);x(o.join("<br>"),"long")}},T.warn=function(){var b;if(m.logging>0){var e=["WARN:"];for(b=0;b<arguments.length;b++)e.push(arguments[b]);console.trace.apply(console,e)}if(m.notifyOnLogging>0){var o=[];for(b=0;b<arguments.length;b++)o.push(arguments[b]);x(o.join("<br>"),"stick")}},T.error=function(){var b;if(m.logging>0){var e=["ERROR:"];for(b=0;b<arguments.length;b++)e.push(arguments[b]);console.error.apply(console,e)}if(m.notifyOnLogging>0){var o=[];for(b=0;b<arguments.length;b++)o.push(arguments[b]);x(o.join("<br>"),"stick")}}},{"../plot_api/plot_config":541,"./notifier":513}],508:[function(_,oe,ae){"use strict";var m=_("@plotly/d3");oe.exports=function(x,T,b){var e=x.selectAll("g."+b.replace(/\s/g,".")).data(T,function(a){return a[0].trace.uid});e.exit().remove(),e.enter().append("g").attr("class",b),e.order();var o=x.classed("rangeplot")?"nodeRangePlot3":"node3";return e.each(function(a){a[0][o]=m.select(this)}),e}},{"@plotly/d3":58}],509:[function(_,oe,ae){"use strict";var m=_("gl-mat4");ae.init2dArray=function(x,T){for(var b=new Array(x),e=0;e<x;e++)b[e]=new Array(T);return b},ae.transposeRagged=function(x){var T,b,e=0,o=x.length;for(T=0;T<o;T++)e=Math.max(e,x[T].length);var a=new Array(e);for(T=0;T<e;T++)for(a[T]=new Array(o),b=0;b<o;b++)a[T][b]=x[b][T];return a},ae.dot=function(x,T){if(!x.length||!T.length||x.length!==T.length)return null;var b,e,o=x.length;if(x[0].length)for(b=new Array(o),e=0;e<o;e++)b[e]=ae.dot(x[e],T);else if(T[0].length){var a=ae.transposeRagged(T);for(b=new Array(a.length),e=0;e<a.length;e++)b[e]=ae.dot(x,a[e])}else for(b=0,e=0;e<o;e++)b+=x[e]*T[e];return b},ae.translationMatrix=function(x,T){return[[1,0,x],[0,1,T],[0,0,1]]},ae.rotationMatrix=function(x){var T=x*Math.PI/180;return[[Math.cos(T),-Math.sin(T),0],[Math.sin(T),Math.cos(T),0],[0,0,1]]},ae.rotationXYMatrix=function(x,T,b){return ae.dot(ae.dot(ae.translationMatrix(T,b),ae.rotationMatrix(x)),ae.translationMatrix(-T,-b))},ae.apply3DTransform=function(x){return function(){var T=arguments,b=1===arguments.length?T[0]:[T[0],T[1],T[2]||0];return ae.dot(x,[b[0],b[1],b[2],1]).slice(0,3)}},ae.apply2DTransform=function(x){return function(){var T=arguments;3===T.length&&(T=T[0]);var b=1===arguments.length?T[0]:[T[0],T[1]];return ae.dot(x,[b[0],b[1],1]).slice(0,2)}},ae.apply2DTransform2=function(x){var T=ae.apply2DTransform(x);return function(b){return T(b.slice(0,2)).concat(T(b.slice(2,4)))}},ae.convertCssMatrix=function(x){if(x){var T=x.length;if(16===T)return x;if(6===T)return[x[0],x[1],0,0,x[2],x[3],0,0,0,0,1,0,x[4],x[5],0,1]}return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]},ae.inverseTransformMatrix=function(x){var T=[];return m.invert(T,x),[[T[0],T[1],T[2],T[3]],[T[4],T[5],T[6],T[7]],[T[8],T[9],T[10],T[11]],[T[12],T[13],T[14],T[15]]]}},{"gl-mat4":210}],510:[function(_,oe,ae){"use strict";oe.exports={mod:function(m,x){var T=m%x;return T<0?T+x:T},modHalf:function(m,x){return Math.abs(m)>x/2?m-Math.round(m/x)*x:m}}},{}],511:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("./array").isArrayOrTypedArray;function T(d,u){return function(){var s,c,h,p,v,g=d;for(p=0;p<u.length-1;p++){if(-1===(s=u[p])){for(c=!0,h=[],v=0;v<g.length;v++)h[v]=T(g[v],u.slice(p+1))(),h[v]!==h[0]&&(c=!1);return c?h[0]:h}if("number"==typeof s&&!x(g)||"object"!=typeof(g=g[s])||null===g)return}if("object"==typeof g&&null!==g&&null!==(h=g[u[p]]))return h}}oe.exports=function(d,u){if(m(u))u=String(u);else if("string"!=typeof u||"[-1]"===u.substr(u.length-4))throw"bad property string";for(var s,c,h,p=0,v=u.split(".");p<v.length;){if(s=String(v[p]).match(/^([^\[\]]*)((\[\-?[0-9]*\])+)$/)){if(s[1])v[p]=s[1];else{if(0!==p)throw"bad property string";v.splice(0,1)}for(c=s[2].substr(1,s[2].length-2).split("]["),h=0;h<c.length;h++)p++,v.splice(p,0,Number(c[h]))}p++}return"object"!=typeof d?{set:function(){throw"bad container"},get:function(){},astr:u,parts:v,obj:d}:{set:o(d,v,u),get:T(d,v),astr:u,parts:v,obj:d}};var b=/(^|\.)args\[/;function e(d,u){return void 0===d||null===d&&!u.match(b)}function o(d,u,s){return function(c){var h,p,v=d,g="",f=[[d,g]],w=e(c,s);for(p=0;p<u.length-1;p++){if("number"==typeof(h=u[p])&&!x(v))throw"array index but container is not an array";if(-1===h){if(w=!l(v,u.slice(p+1),c,s))break;return}if(!i(v,h,u[p+1],w))break;if("object"!=typeof(v=v[h])||null===v)throw"container is not an object";g=a(g,h),f.push([v,g])}if(w){if(p===u.length-1&&(delete v[u[p]],Array.isArray(v)&&+u[p]==v.length-1))for(;v.length&&void 0===v[v.length-1];)v.pop()}else v[u[p]]=c}}function a(d,u){var s=u;return m(u)?s="["+u+"]":d&&(s="."+u),d+s}function l(d,u,s,c){var h,p=x(s),v=!0,g=s,f=c.replace("-1",0),w=!p&&e(s,f),y=u[0];for(h=0;h<d.length;h++)f=c.replace("-1",h),p&&(w=e(g=s[h%s.length],f)),w&&(v=!1),i(d,h,y,w)&&o(d[h],u,c.replace("-1",h))(g);return v}function i(d,u,s,c){if(void 0===d[u]){if(c)return!1;d[u]="number"==typeof s?[]:{}}return!0}},{"./array":485,"fast-isnumeric":190}],512:[function(_,oe,ae){"use strict";oe.exports=function(){}},{}],513:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("fast-isnumeric"),T=[];oe.exports=function(b,e){if(-1===T.indexOf(b)){T.push(b);var o=1e3;x(e)?o=e:"long"===e&&(o=3e3);var a=m.select("body").selectAll(".plotly-notifier").data([0]);a.enter().append("div").classed("plotly-notifier",!0),a.selectAll(".notifier-note").data(T).enter().append("div").classed("notifier-note",!0).style("opacity",0).each(function(i){var d=m.select(this);d.append("button").classed("notifier-close",!0).html("&times;").on("click",function(){d.transition().call(l)});for(var u=d.append("p"),s=i.split(/<br\s*\/?>/g),c=0;c<s.length;c++)c&&u.append("br"),u.append("span").text(s[c]);"stick"===e?d.transition().duration(350).style("opacity",1):d.transition().duration(700).style("opacity",1).transition().delay(o).call(l)})}function l(i){i.duration(700).style("opacity",0).each("end",function(d){var u=T.indexOf(d);-1!==u&&T.splice(u,1),m.select(this).remove()})}}},{"@plotly/d3":58,"fast-isnumeric":190}],514:[function(_,oe,ae){"use strict";var m=_("./setcursor"),x="data-savedcursor";oe.exports=function(T,b){var e=T.attr(x);if(b){if(!e){for(var o=(T.attr("class")||"").split(" "),a=0;a<o.length;a++){var l=o[a];0===l.indexOf("cursor-")&&T.attr(x,l.substr(7)).classed(l,!1)}T.attr(x)||T.attr(x,"!!")}m(T,b)}else e&&(T.attr(x,null),"!!"===e?m(T):m(T,e))}},{"./setcursor":524}],515:[function(_,oe,ae){"use strict";var m=_("./matrix").dot,x=_("../constants/numerical").BADNUM,T=oe.exports={};T.tester=function(b){var e,o=b.slice(),a=o[0][0],l=a,i=o[0][1],d=i;for(o.push(o[0]),e=1;e<o.length;e++)a=Math.min(a,o[e][0]),l=Math.max(l,o[e][0]),i=Math.min(i,o[e][1]),d=Math.max(d,o[e][1]);var u,s=!1;5===o.length&&(o[0][0]===o[1][0]?o[2][0]===o[3][0]&&o[0][1]===o[3][1]&&o[1][1]===o[2][1]&&(s=!0,u=function(p){return p[0]===o[0][0]}):o[0][1]===o[1][1]&&o[2][1]===o[3][1]&&o[0][0]===o[3][0]&&o[1][0]===o[2][0]&&(s=!0,u=function(p){return p[1]===o[0][1]}));var c=!0,h=o[0];for(e=1;e<o.length;e++)if(h[0]!==o[e][0]||h[1]!==o[e][1]){c=!1;break}return{xmin:a,xmax:l,ymin:i,ymax:d,pts:o,contains:s?function(p,v){var g=p[0],f=p[1];return!(g===x||g<a||g>l||f===x||f<i||f>d||v&&u(p))}:function(p,v){var g=p[0],f=p[1];if(g===x||g<a||g>l||f===x||f<i||f>d)return!1;var w,y,M,A,k,C=o.length,P=o[0][0],D=o[0][1],F=0;for(w=1;w<C;w++)if(y=P,M=D,P=o[w][0],D=o[w][1],!(g<(A=Math.min(y,P))||g>Math.max(y,P)||f>Math.max(M,D)))if(f<Math.min(M,D))g!==A&&F++;else{if(f===(k=P===y?f:M+(g-y)*(D-M)/(P-y)))return 1!==w||!v;f<=k&&g!==A&&F++}return F%2==1},isRect:s,degenerate:c}},T.isSegmentBent=function(b,e,o,a){var l,i,d,u=b[e],s=[b[o][0]-u[0],b[o][1]-u[1]],c=m(s,s),h=Math.sqrt(c),p=[-s[1]/h,s[0]/h];for(l=e+1;l<o;l++)if((d=m(i=[b[l][0]-u[0],b[l][1]-u[1]],s))<0||d>c||Math.abs(m(i,p))>a)return!0;return!1},T.filter=function(b,e){var o=[b[0]],a=0,l=0;function i(d){b.push(d);var u=o.length,s=a;o.splice(l+1);for(var c=s+1;c<b.length;c++)(c===b.length-1||T.isSegmentBent(b,s,c+1,e))&&(o.push(b[c]),o.length<u-2&&(a=c,l=o.length-1),s=c)}return b.length>1&&i(b.pop()),{addPt:i,raw:b,filtered:o}}},{"../constants/numerical":479,"./matrix":509}],516:[function(_,oe,ae){(function(m){(function(){"use strict";var x=_("./show_no_webgl_msg"),T=_("regl");oe.exports=function(b,e){var o=b._fullLayout,a=!0;return o._glcanvas.each(function(l){if(!l.regl&&(!l.pick||o._has("parcoords"))){try{l.regl=T({canvas:this,attributes:{antialias:!l.pick,preserveDrawingBuffer:!0},pixelRatio:b._context.plotGlPixelRatio||m.devicePixelRatio,extensions:e||[]})}catch(i){a=!1}l.regl||(a=!1),a&&this.addEventListener("webglcontextlost",function(i){b&&b.emit&&b.emit("plotly_webglcontextlost",{event:i,layer:l.key})},!1)}}),a||x({container:o._glcontainer.node()}),a}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./show_no_webgl_msg":525,regl:283}],517:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("is-mobile");oe.exports=function(T){var b,u;if("string"!=typeof(b=T&&T.hasOwnProperty("userAgent")?T.userAgent:("undefined"!=typeof navigator&&(u=navigator.userAgent),u&&u.headers&&"string"==typeof u.headers["user-agent"]&&(u=u.headers["user-agent"]),u)))return!0;var e=x({ua:{headers:{"user-agent":b}},tablet:!0,featureDetect:!1});if(!e)for(var o=b.split(" "),a=1;a<o.length;a++)if(-1!==o[a].indexOf("Safari"))for(var l=a-1;l>-1;l--){var i=o[l];if("Version/"===i.substr(0,8)){var d=i.substr(8).split(".")[0];if(m(d)&&(d=+d),d>=13)return!0}}return e}},{"fast-isnumeric":190,"is-mobile":234}],518:[function(_,oe,ae){"use strict";oe.exports=function(m,x){if(x instanceof RegExp){for(var T=x.toString(),b=0;b<m.length;b++)if(m[b]instanceof RegExp&&m[b].toString()===T)return m;m.push(x)}else!x&&0!==x||-1!==m.indexOf(x)||m.push(x);return m}},{}],519:[function(_,oe,ae){"use strict";var m=_("../lib"),x=_("../plot_api/plot_config").dfltConfig,T={add:function(b,e,o,a,l){var i,d;b.undoQueue=b.undoQueue||{index:0,queue:[],sequence:!1},d=b.undoQueue.index,b.autoplay?b.undoQueue.inSequence||(b.autoplay=!1):(!b.undoQueue.sequence||b.undoQueue.beginSequence?(b.undoQueue.queue.splice(d,b.undoQueue.queue.length-d,i={undo:{calls:[],args:[]},redo:{calls:[],args:[]}}),b.undoQueue.index+=1):i=b.undoQueue.queue[d-1],b.undoQueue.beginSequence=!1,i&&(i.undo.calls.unshift(e),i.undo.args.unshift(o),i.redo.calls.push(a),i.redo.args.push(l)),b.undoQueue.queue.length>x.queueLength&&(b.undoQueue.queue.shift(),b.undoQueue.index--))},startSequence:function(b){b.undoQueue=b.undoQueue||{index:0,queue:[],sequence:!1},b.undoQueue.sequence=!0,b.undoQueue.beginSequence=!0},stopSequence:function(b){b.undoQueue=b.undoQueue||{index:0,queue:[],sequence:!1},b.undoQueue.sequence=!1,b.undoQueue.beginSequence=!1},undo:function(b){var e,o;if(!(void 0===b.undoQueue||isNaN(b.undoQueue.index)||b.undoQueue.index<=0)){for(b.undoQueue.index--,e=b.undoQueue.queue[b.undoQueue.index],b.undoQueue.inSequence=!0,o=0;o<e.undo.calls.length;o++)T.plotDo(b,e.undo.calls[o],e.undo.args[o]);b.undoQueue.inSequence=!1,b.autoplay=!1}},redo:function(b){var e,o;if(!(void 0===b.undoQueue||isNaN(b.undoQueue.index)||b.undoQueue.index>=b.undoQueue.queue.length)){for(e=b.undoQueue.queue[b.undoQueue.index],b.undoQueue.inSequence=!0,o=0;o<e.redo.calls.length;o++)T.plotDo(b,e.redo.calls[o],e.redo.args[o]);b.undoQueue.inSequence=!1,b.autoplay=!1,b.undoQueue.index++}},plotDo:function(b,e,o){b.autoplay=!0,o=function(a,l){for(var i,d=[],u=0;u<l.length;u++)d[u]=(i=l[u])===a?i:"object"==typeof i?Array.isArray(i)?m.extendDeep([],i):m.extendDeepAll({},i):i;return d}(b,o),e.apply(null,o)}};oe.exports=T},{"../lib":503,"../plot_api/plot_config":541}],520:[function(_,oe,ae){"use strict";ae.counter=function(m,x,T,b){var e=(x||"")+(T?"":"$"),o=!1===b?"":"^";return"xy"===m?new RegExp(o+"x([2-9]|[1-9][0-9]+)?y([2-9]|[1-9][0-9]+)?"+e):new RegExp(o+m+"([2-9]|[1-9][0-9]+)?"+e)}},{}],521:[function(_,oe,ae){"use strict";var m=/^(.*)(\.[^\.\[\]]+|\[\d\])$/,x=/^[^\.\[\]]+$/;oe.exports=function(T,b){for(;b;){var e=T.match(m);if(e)T=e[1];else{if(!T.match(x))throw new Error("bad relativeAttr call:"+[T,b]);T=""}if("^"!==b.charAt(0))break;b=b.slice(1)}return T&&"["!==b.charAt(0)?T+"."+b:T+b}},{}],522:[function(_,oe,ae){"use strict";var m=_("./array").isArrayOrTypedArray,x=_("./is_plain_object");oe.exports=function T(b,e){for(var o in e){var a=e[o],l=b[o];if(l!==a)if("_"===o.charAt(0)||"function"==typeof a){if(o in b)continue;b[o]=a}else if(m(a)&&m(l)&&x(a[0])){if("customdata"===o||"ids"===o)continue;for(var i=Math.min(a.length,l.length),d=0;d<i;d++)l[d]!==a[d]&&x(a[d])&&x(l[d])&&T(l[d],a[d])}else x(a)&&x(l)&&(T(l,a),Object.keys(l).length||delete b[o])}}},{"./array":485,"./is_plain_object":504}],523:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("./loggers"),T=_("./identity"),b=_("../constants/numerical").BADNUM;function e(i,d){return i<d}function o(i,d){return i<=d}function a(i,d){return i>d}function l(i,d){return i>=d}ae.findBin=function(i,d,u){if(m(d.start))return u?Math.ceil((i-d.start)/d.size-1e-9)-1:Math.floor((i-d.start)/d.size+1e-9);var s,c,h=0,p=d.length,v=0,g=p>1?(d[p-1]-d[0])/(p-1):1;for(c=g>=0?u?e:o:u?l:a,i+=1e-9*g*(u?-1:1)*(g>=0?1:-1);h<p&&v++<100;)c(d[s=Math.floor((h+p)/2)],i)?h=s+1:p=s;return v>90&&x.log("Long binary search..."),h-1},ae.sorterAsc=function(i,d){return i-d},ae.sorterDes=function(i,d){return d-i},ae.distinctVals=function(i){var d,u=i.slice();for(u.sort(ae.sorterAsc),d=u.length-1;d>-1&&u[d]===b;d--);for(var s,c=u[d]-u[0]||1,h=c/(d||1)/1e4,p=[],v=0;v<=d;v++){var g=u[v],f=g-s;void 0===s?(p.push(g),s=g):f>h&&(c=Math.min(c,f),p.push(g),s=g)}return{vals:p,minDiff:c}},ae.roundUp=function(i,d,u){for(var s,c=0,h=d.length-1,p=0,v=u?0:1,g=u?1:0,f=u?Math.ceil:Math.floor;c<h&&p++<100;)d[s=f((c+h)/2)]<=i?c=s+v:h=s-g;return d[c]},ae.sort=function(i,d){for(var u=0,s=0,c=1;c<i.length;c++){var h=d(i[c],i[c-1]);if(h<0?u=1:h>0&&(s=1),u&&s)return i.sort(d)}return s?i:i.reverse()},ae.findIndexOfMin=function(i,d){d=d||T;for(var u,s=1/0,c=0;c<i.length;c++){var h=d(i[c]);h<s&&(s=h,u=c)}return u}},{"../constants/numerical":479,"./identity":501,"./loggers":507,"fast-isnumeric":190}],524:[function(_,oe,ae){"use strict";oe.exports=function(m,x){(m.attr("class")||"").split(" ").forEach(function(T){0===T.indexOf("cursor-")&&m.classed(T,!1)}),x&&m.classed("cursor-"+x,!0)}},{}],525:[function(_,oe,ae){"use strict";var m=_("../components/color"),x=function(){};oe.exports=function(T){for(var b in T)"function"==typeof T[b]&&(T[b]=x);T.destroy=function(){T.container.parentNode.removeChild(T.container)};var e=document.createElement("div");e.className="no-webgl",e.style.cursor="pointer",e.style.fontSize="24px",e.style.color=m.defaults[0],e.style.position="absolute",e.style.left=e.style.top="0px",e.style.width=e.style.height="100%",e.style["background-color"]=m.lightLine,e.style["z-index"]=30;var o=document.createElement("p");return o.textContent="WebGL is not supported by your browser - visit https://get.webgl.org for more info",o.style.position="relative",o.style.top="50%",o.style.left="50%",o.style.height="30%",o.style.width="50%",o.style.margin="-15% 0 0 -25%",e.appendChild(o),T.container.appendChild(e),T.container.style.background="#FFFFFF",T.container.onclick=function(){window.open("https://get.webgl.org")},!1}},{"../components/color":366}],526:[function(_,oe,ae){"use strict";oe.exports=function(m){return Object.keys(m).sort()}},{}],527:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("./array").isArrayOrTypedArray;ae.aggNums=function(T,b,e,o){var a,l;if((!o||o>e.length)&&(o=e.length),m(b)||(b=!1),x(e[0])){for(l=new Array(o),a=0;a<o;a++)l[a]=ae.aggNums(T,b,e[a]);e=l}for(a=0;a<o;a++)m(b)?m(e[a])&&(b=T(+b,+e[a])):b=e[a];return b},ae.len=function(T){return ae.aggNums(function(b){return b+1},0,T)},ae.mean=function(T,b){return b||(b=ae.len(T)),ae.aggNums(function(e,o){return e+o},0,T)/b},ae.midRange=function(T){if(void 0!==T&&0!==T.length)return(ae.aggNums(Math.max,null,T)+ae.aggNums(Math.min,null,T))/2},ae.variance=function(T,b,e){return b||(b=ae.len(T)),m(e)||(e=ae.mean(T,b)),ae.aggNums(function(o,a){return o+Math.pow(a-e,2)},0,T)/b},ae.stdev=function(T,b,e){return Math.sqrt(ae.variance(T,b,e))},ae.median=function(T){var b=T.slice().sort();return ae.interp(b,.5)},ae.interp=function(T,b){if(!m(b))throw"n should be a finite number";if((b=b*T.length-.5)<0)return T[0];if(b>T.length-1)return T[T.length-1];var e=b%1;return e*T[Math.ceil(b)]+(1-e)*T[Math.floor(b)]}},{"./array":485,"fast-isnumeric":190}],528:[function(_,oe,ae){"use strict";var m=_("color-normalize");oe.exports=function(x){return x?m(x):[0,0,0,1]}},{"color-normalize":89}],529:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../lib"),T=x.strTranslate,b=_("../constants/xmlns_namespaces"),e=_("../constants/alignment").LINE_SPACING,o=/([^$]*)([$]+[^$]*[$]+)([^$]*)/;ae.convertToTspans=function(R,L,I){var B=R.text(),V=!R.attr("data-notex")&&"undefined"!=typeof MathJax&&B.match(o),Z=m.select(R.node().parentNode);if(!Z.empty()){var Y=R.attr("class")?R.attr("class").split(" ")[0]:"text";return Z.selectAll("svg."+(Y+="-math")).remove(),Z.selectAll("g."+Y+"-group").remove(),R.style("display",null).attr({"data-unformatted":B,"data-math":"N"}),V?(L&&L._promises||[]).push(new Promise(function(J){R.style("display","none");var se,j,G,W,ie,q,te,$=parseInt(R.node().style.fontSize,10);se=V[2],j={fontSize:$},G=function(se,j,G){Z.selectAll("svg."+Y).remove(),Z.selectAll("g."+Y+"-group").remove();var W=se&&se.select("svg");if(!W||!W.node())return ee(),void J();var ie=Z.append("g").classed(Y+"-group",!0).attr({"pointer-events":"none","data-unformatted":B,"data-math":"Y"});ie.node().appendChild(W.node()),j&&j.node()&&W.node().insertBefore(j.node().cloneNode(!0),W.node().firstChild);var q=G.width,te=G.height;W.attr({class:Y,height:te,preserveAspectRatio:"xMinYMin meet"}).style({overflow:"visible","pointer-events":"none"});var ne=R.node().style.fill||"black",le=W.select("g");le.attr({fill:ne,stroke:ne});var ue=le.node().getBoundingClientRect(),de=ue.width,he=ue.height;(de>q||he>te)&&(W.style("overflow","hidden"),de=(ue=W.node().getBoundingClientRect()).width,he=ue.height);var be=+R.attr("x"),ge=+R.attr("y"),we=-($||R.node().getBoundingClientRect().height)/4;if("y"===Y[0])ie.attr({transform:"rotate("+[-90,be,ge]+")"+T(-de/2,we-he/2)});else if("l"===Y[0])ge=we-he/2;else if("a"===Y[0]&&0!==Y.indexOf("atitle"))be=0,ge=we;else{var Ce=R.attr("text-anchor");be-=de*("middle"===Ce?.5:"end"===Ce?1:0),ge=ge+we-he/2}W.attr({x:be,y:ge}),I&&I.call(R,ie),J(ie)},MathJax.Hub.Queue(function(){return ie=x.extendDeepAll({},MathJax.Hub.config),q=MathJax.Hub.processSectionDelay,void 0!==MathJax.Hub.processSectionDelay&&(MathJax.Hub.processSectionDelay=0),MathJax.Hub.Config({messageStyle:"none",tex2jax:{inlineMath:[["$","$"],["\\(","\\)"]]},displayAlign:"left"})},function(){if("SVG"!==(W=MathJax.Hub.config.menuSettings.renderer))return MathJax.Hub.setRenderer("SVG")},function(){var ne="math-output-"+x.randstr({},64);return te=m.select("body").append("div").attr({id:ne}).style({visibility:"hidden",position:"absolute"}).style({"font-size":j.fontSize+"px"}).text(se.replace(a,"\\lt ").replace(l,"\\gt ")),MathJax.Hub.Typeset(te.node())},function(){var ne=m.select("body").select("#MathJax_SVG_glyphs");if(te.select(".MathJax_SVG").empty()||!te.select("svg").node())x.log("There was an error in the tex syntax.",se),G();else{var le=te.select("svg").node().getBoundingClientRect();G(te.select(".MathJax_SVG"),ne,le)}if(te.remove(),"SVG"!==W)return MathJax.Hub.setRenderer(W)},function(){return void 0!==q&&(MathJax.Hub.processSectionDelay=q),MathJax.Hub.Config(ie)})})):ee(),R}function ee(){Z.empty()||(Y=R.attr("class")+"-math",Z.select("svg."+Y).remove()),R.text("").style("white-space","pre"),function(J,$){$=$.replace(c," ");var Q,se=!1,j=[],G=-1;function W(){G++;var Fe=document.createElementNS(b.svg,"tspan");m.select(Fe).attr({class:"line",dy:G*e+"em"}),J.appendChild(Fe),Q=Fe;var ve=j;if(j=[{node:Fe}],ve.length>1)for(var Te=1;Te<ve.length;Te++)ie(ve[Te])}function ie(Fe){var ve,Te=Fe.type,Le={};if("a"===Te){ve="a";var Ee=Fe.target,Pe=Fe.href,je=Fe.popup;Pe&&(Le={"xlink:xlink:show":"_blank"===Ee||"_"!==Ee.charAt(0)?"new":"replace",target:Ee,"xlink:xlink:href":Pe},je&&(Le.onclick='window.open(this.href.baseVal,this.target.baseVal,"'+je+'");return false;'))}else ve="tspan";Fe.style&&(Le.style=Fe.style);var Ge=document.createElementNS(b.svg,ve);if("sup"===Te||"sub"===Te){q(Q,"\u200b"),Q.appendChild(Ge);var Ke=document.createElementNS(b.svg,"tspan");q(Ke,"\u200b"),m.select(Ke).attr("dy",u[Te]),Le.dy=d[Te],Q.appendChild(Ge),Q.appendChild(Ke)}else Q.appendChild(Ge);m.select(Ge).attr(Le),Q=Fe.node=Ge,j.push(Fe)}function q(Fe,ve){Fe.appendChild(document.createTextNode(ve))}function te(Fe){if(1!==j.length){var ve=j.pop();Fe!==ve.type&&x.log("Start tag <"+ve.type+"> doesnt match end tag <"+Fe+">. Pretending it did match.",$),Q=j[j.length-1].node}else x.log("Ignoring unexpected end tag </"+Fe+">.",$)}v.test($)?W():(Q=J,j=[{node:J}]);for(var ne=$.split(h),le=0;le<ne.length;le++){var ue=ne[le],de=ue.match(p),he=de&&de[2].toLowerCase(),be=i[he];if("br"===he)W();else if(void 0===be)q(Q,P(ue));else if(de[1])te(he);else{var ge=de[4],we={type:he},Ce=M(ge,g);if(Ce?(Ce=Ce.replace(A,"$1 fill:"),be&&(Ce+=";"+be)):be&&(Ce=be),Ce&&(we.style=Ce),"a"===he){se=!0;var De=M(ge,f);if(De){var Se=D(De);Se&&(we.href=Se,we.target=M(ge,w)||"_blank",we.popup=M(ge,y))}}ie(we)}}return se}(R.node(),B)&&R.style("pointer-events","all"),ae.positionText(R),I&&I.call(R)}};var a=/(<|&lt;|&#60;)/g,l=/(>|&gt;|&#62;)/g,i={sup:"font-size:70%",sub:"font-size:70%",b:"font-weight:bold",i:"font-style:italic",a:"cursor:pointer",span:"",em:"font-style:italic;font-weight:bold"},d={sub:"0.3em",sup:"-0.6em"},u={sub:"-0.21em",sup:"0.42em"},s=["http:","https:","mailto:","",void 0,":"],c=ae.NEWLINES=/(\r\n?|\n)/g,h=/(<[^<>]*>)/,p=/<(\/?)([^ >]*)(\s+(.*))?>/i,v=/<br(\s+.*)?>/i;ae.BR_TAG_ALL=/<br(\s+.*)?>/gi;var g=/(^|[\s"'])style\s*=\s*("([^"]*);?"|'([^']*);?')/i,f=/(^|[\s"'])href\s*=\s*("([^"]*)"|'([^']*)')/i,w=/(^|[\s"'])target\s*=\s*("([^"\s]*)"|'([^'\s]*)')/i,y=/(^|[\s"'])popup\s*=\s*("([\w=,]*)"|'([\w=,]*)')/i;function M(R,L){if(!R)return null;var I=R.match(L),B=I&&(I[3]||I[4]);return B&&P(B)}var A=/(^|;)\s*color:/;ae.plainText=function(R,L){for(var I=void 0!==(L=L||{}).len&&-1!==L.len?L.len:1/0,B=void 0!==L.allowedTags?L.allowedTags:["br"],V="...".length,Z=R.split(h),Y=[],ee="",J=0,$=0;$<Z.length;$++){var Q=Z[$],se=Q.match(p),j=se&&se[2].toLowerCase();if(j)-1!==B.indexOf(j)&&(Y.push(Q),ee=j);else{var G=Q.length;if(J+G<I)Y.push(Q),J+=G;else if(J<I){var W=I-J;ee&&("br"!==ee||W<=V||G<=V)&&Y.pop(),Y.push(I>V?Q.substr(0,W-V)+"...":Q.substr(0,W));break}ee=""}}return Y.join("")};var k={mu:"\u03bc",amp:"&",lt:"<",gt:">",nbsp:"\xa0",times:"\xd7",plusmn:"\xb1",deg:"\xb0"},C=/&(#\d+|#x[\da-fA-F]+|[a-z]+);/g;function P(R){return R.replace(C,function(L,I){return("#"===I.charAt(0)?function(B){if(!(B>1114111)){var V=String.fromCodePoint;if(V)return V(B);var Z=String.fromCharCode;return B<=65535?Z(B):Z(55232+(B>>10),B%1024+56320)}}("x"===I.charAt(1)?parseInt(I.substr(2),16):parseInt(I.substr(1),10)):k[I])||L})}function D(R){var L=encodeURI(decodeURI(R)),I=document.createElement("a"),B=document.createElement("a");I.href=R,B.href=L;var Z=B.protocol;return-1!==s.indexOf(I.protocol)&&-1!==s.indexOf(Z)?L:""}function F(R,L,I){var B,V,Z,Y=I.horizontalAlign,ee=I.verticalAlign||"top",J=R.node().getBoundingClientRect(),$=L.node().getBoundingClientRect();return V="bottom"===ee?function(){return J.bottom-B.height}:"middle"===ee?function(){return J.top+(J.height-B.height)/2}:function(){return J.top},Z="right"===Y?function(){return J.right-B.width}:"center"===Y?function(){return J.left+(J.width-B.width)/2}:function(){return J.left},function(){B=this.node().getBoundingClientRect();var Q=Z()-$.left,se=V()-$.top,j=I.gd||{};if(I.gd){j._fullLayout._calcInverseTransform(j);var G=x.apply3DTransform(j._fullLayout._invTransform)(Q,se);Q=G[0],se=G[1]}return this.style({top:se+"px",left:Q+"px","z-index":1e3}),this}}ae.convertEntities=P,ae.sanitizeHTML=function(R){R=R.replace(c," ");for(var L=document.createElement("p"),I=L,B=[],V=R.split(h),Z=0;Z<V.length;Z++){var Y=V[Z],ee=Y.match(p),J=ee&&ee[2].toLowerCase();if(J in i)if(ee[1])B.length&&(I=B.pop());else{var $=ee[4],Q=M($,g),se=Q?{style:Q}:{};if("a"===J){var j=M($,f);if(j){var G=D(j);if(G){se.href=G;var W=M($,w);W&&(se.target=W)}}}var ie=document.createElement(J);I.appendChild(ie),m.select(ie).attr(se),I=ie,B.push(ie)}else I.appendChild(document.createTextNode(P(Y)))}return L.innerHTML},ae.lineCount=function(R){return R.selectAll("tspan.line").size()||1},ae.positionText=function(R,L,I){return R.each(function(){var B=m.select(this);function V(ee,J){return void 0===J?null===(J=B.attr(ee))&&(B.attr(ee,0),J=0):B.attr(ee,J),J}var Z=V("x",L),Y=V("y",I);"text"===this.nodeName&&B.selectAll("tspan.line").attr({x:Z,y:Y})})},ae.makeTextShadow=function(R){var L="1px ",I="1px ",B="1px ";return L+I+B+R+", -"+L+"-"+I+B+R+", "+L+"-"+I+B+R+", -"+L+I+B+R},ae.makeEditable=function(R,L){var I=L.gd,B=L.delegate,V=m.dispatch("edit","input","cancel"),Z=B||R;if(R.style({"pointer-events":B?"none":"all"}),1!==R.size())throw new Error("boo");function Y(){var Q,se,j,G,W;Q=m.select(I).select(".svg-container"),se=Q.append("div"),j=R.node().style,G=parseFloat(j.fontSize||12),void 0===(W=L.text)&&(W=R.attr("data-unformatted")),se.classed("plugin-editable editable",!0).style({position:"absolute","font-family":j.fontFamily||"Arial","font-size":G,color:L.fill||j.fill||"black",opacity:1,"background-color":L.background||"transparent",outline:"#ffffff33 1px solid",margin:[-G/8+1,0,0,-1].join("px ")+"px",padding:"0","box-sizing":"border-box"}).attr({contenteditable:!0}).text(W).call(F(R,Q,L)).on("blur",function(){I._editing=!1,R.text(this.textContent).style({opacity:1});var ie,q=m.select(this).attr("class");(ie=q?"."+q.split(" ")[0]+"-math-group":"[class*=-math-group]")&&m.select(R.node().parentNode).select(ie).style({opacity:0});var te=this.textContent;m.select(this).transition().duration(0).remove(),m.select(document).on("mouseup",null),V.edit.call(R,te)}).on("focus",function(){var ie=this;I._editing=!0,m.select(document).on("mouseup",function(){if(m.event.target===ie)return!1;document.activeElement===se.node()&&se.node().blur()})}).on("keyup",function(){27===m.event.which?(I._editing=!1,R.style({opacity:1}),m.select(this).style({opacity:0}).on("blur",function(){return!1}).transition().remove(),V.cancel.call(R,this.textContent)):(V.input.call(R,this.textContent),m.select(this).call(F(R,Q,L)))}).on("keydown",function(){13===m.event.which&&this.blur()}).call(ee),R.style({opacity:0});var J,$=Z.attr("class");(J=$?"."+$.split(" ")[0]+"-math-group":"[class*=-math-group]")&&m.select(R.node().parentNode).select(J).style({opacity:0})}function ee(J){var $=J.node(),Q=document.createRange();Q.selectNodeContents($);var se=window.getSelection();se.removeAllRanges(),se.addRange(Q),$.focus()}return L.immediate?Y():Z.on("click",Y),m.rebind(R,V,"on")}},{"../constants/alignment":471,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],530:[function(_,oe,ae){"use strict";var m={};function x(T){T&&null!==T.timer&&(clearTimeout(T.timer),T.timer=null)}ae.throttle=function(T,b,e){var o=m[T],a=Date.now();if(!o){for(var l in m)m[l].ts<a-6e4&&delete m[l];o=m[T]={ts:0,timer:null}}function i(){e(),o.ts=Date.now(),o.onDone&&(o.onDone(),o.onDone=null)}x(o),a>o.ts+b?i():o.timer=setTimeout(function(){i(),o.timer=null},b)},ae.done=function(T){var b=m[T];return b&&b.timer?new Promise(function(e){var o=b.onDone;b.onDone=function(){o&&o(),e(),b.onDone=null}}):Promise.resolve()},ae.clear=function(T){if(T)x(m[T]),delete m[T];else for(var b in m)ae.clear(b)}},{}],531:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric");oe.exports=function(x,T){if(x>0)return Math.log(x)/Math.LN10;var b=Math.log(Math.min(T[0],T[1]))/Math.LN10;return m(b)||(b=Math.log(Math.max(T[0],T[1]))/Math.LN10-6),b}},{"fast-isnumeric":190}],532:[function(_,oe,ae){"use strict";var m=oe.exports={},x=_("../plots/geo/constants").locationmodeToLayer,T=_("topojson-client").feature;m.getTopojsonName=function(b){return[b.scope.replace(/ /g,"-"),"_",b.resolution.toString(),"m"].join("")},m.getTopojsonPath=function(b,e){return b+e+".json"},m.getTopojsonFeatures=function(b,e){return T(e,e.objects[x[b.locationmode]]).features}},{"../plots/geo/constants":587,"topojson-client":315}],533:[function(_,oe,ae){"use strict";oe.exports={moduleType:"locale",name:"en-US",dictionary:{"Click to enter Colorscale title":"Click to enter Colorscale title"},format:{date:"%m/%d/%Y"}}},{}],534:[function(_,oe,ae){"use strict";oe.exports={moduleType:"locale",name:"en",dictionary:{"Click to enter Colorscale title":"Click to enter Colourscale title"},format:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],periods:["AM","PM"],dateTime:"%a %b %e %X %Y",date:"%d/%m/%Y",time:"%H:%M:%S",decimal:".",thousands:",",grouping:[3],currency:["$",""],year:"%Y",month:"%b %Y",dayMonth:"%b %-d",dayMonthYear:"%b %-d, %Y"}}},{}],535:[function(_,oe,ae){"use strict";var m=_("../registry");oe.exports=function(x){for(var T,b,e=m.layoutArrayContainers,o=m.layoutArrayRegexes,a=x.split("[")[0],l=0;l<o.length;l++)if((b=x.match(o[l]))&&0===b.index){T=b[0];break}if(T||(T=e[e.indexOf(a)]),!T)return!1;var i=x.substr(T.length);return i?!!(b=i.match(/^\[(0|[1-9][0-9]*)\](\.(.+))?$/))&&{array:T,index:Number(b[1]),property:b[3]||""}:{array:T,index:"",property:""}}},{"../registry":638}],536:[function(_,oe,ae){"use strict";var m=_("../lib"),x=m.extendFlat,T=m.isPlainObject,b={valType:"flaglist",extras:["none"],flags:["calc","clearAxisTypes","plot","style","markerSize","colorbars"]},e={valType:"flaglist",extras:["none"],flags:["calc","plot","legend","ticks","axrange","layoutstyle","modebar","camera","arraydraw","colorbars"]},o=b.flags.slice().concat(["fullReplot"]),a=e.flags.slice().concat("layoutReplot");function l(u){for(var s={},c=0;c<u.length;c++)s[u[c]]=!1;return s}function i(u,s,c){var h=x({},u);for(var p in h){var v=h[p];T(v)&&(h[p]=d(v,s,0,p))}return"from-root"===c&&(h.editType=s),h}function d(u,s,c,h){if(u.valType){var p=x({},u);if(p.editType=s,Array.isArray(u.items)){p.items=new Array(u.items.length);for(var v=0;v<u.items.length;v++)p.items[v]=d(u.items[v],s)}return p}return i(u,s,"_"===h.charAt(0)?"nested":"from-root")}oe.exports={traces:b,layout:e,traceFlags:function(){return l(o)},layoutFlags:function(){return l(a)},update:function(u,s){var c=s.editType;if(c&&"none"!==c)for(var h=c.split("+"),p=0;p<h.length;p++)u[h[p]]=!0},overrideAll:i}},{"../lib":503}],537:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("gl-mat4/fromQuat"),T=_("../registry"),b=_("../lib"),e=_("../plots/plots"),o=_("../plots/cartesian/axis_ids"),a=_("../components/color"),l=o.cleanId,i=o.getFromTrace,d=T.traceIs;function u(y,M){var A=y[M],k=M.charAt(0);A&&"paper"!==A&&(y[M]=l(A,k,!0))}function s(y){function M(A,k){y[A]&&(!y.title||!y.title[k])&&(y.title||(y.title={}),y.title[k]=y[A],delete y[A])}y&&("string"!=typeof y.title&&"number"!=typeof y.title||(y.title={text:y.title}),M("titlefont","font"),M("titleposition","position"),M("titleside","side"),M("titleoffset","offset"))}function c(y){if(!b.isPlainObject(y))return!1;var M=y.name;return delete y.name,delete y.showlegend,("string"==typeof M||"number"==typeof M)&&String(M)}function h(y,M,A,k){if(A&&!k)return y;if(k&&!A||!y.trim())return M;if(!M.trim())return y;var C,P=Math.min(y.length,M.length);for(C=0;C<P&&y.charAt(C)===M.charAt(C);C++);return y.substr(0,C).trim()}function p(y){var M="middle",A="center";return"string"==typeof y&&(-1!==y.indexOf("top")?M="top":-1!==y.indexOf("bottom")&&(M="bottom"),-1!==y.indexOf("left")?A="left":-1!==y.indexOf("right")&&(A="right")),M+" "+A}function v(y,M){return M in y&&"object"==typeof y[M]&&0===Object.keys(y[M]).length}ae.clearPromiseQueue=function(y){Array.isArray(y._promises)&&y._promises.length>0&&b.log("Clearing previous rejected promises from queue."),y._promises=[]},ae.cleanLayout=function(y){var M,A;y||(y={}),y.xaxis1&&(y.xaxis||(y.xaxis=y.xaxis1),delete y.xaxis1),y.yaxis1&&(y.yaxis||(y.yaxis=y.yaxis1),delete y.yaxis1),y.scene1&&(y.scene||(y.scene=y.scene1),delete y.scene1);var k=(e.subplotsRegistry.cartesian||{}).attrRegex,C=(e.subplotsRegistry.polar||{}).attrRegex,P=(e.subplotsRegistry.ternary||{}).attrRegex,D=(e.subplotsRegistry.gl3d||{}).attrRegex,F=Object.keys(y);for(M=0;M<F.length;M++){var R=F[M];if(k&&k.test(R)){var L=y[R];L.anchor&&"free"!==L.anchor&&(L.anchor=l(L.anchor)),L.overlaying&&(L.overlaying=l(L.overlaying)),L.type||(L.isdate?L.type="date":L.islog?L.type="log":!1===L.isdate&&!1===L.islog&&(L.type="linear")),"withzero"!==L.autorange&&"tozero"!==L.autorange||(L.autorange=!0,L.rangemode="tozero"),delete L.islog,delete L.isdate,delete L.categories,v(L,"domain")&&delete L.domain,void 0!==L.autotick&&(void 0===L.tickmode&&(L.tickmode=L.autotick?"auto":"linear"),delete L.autotick),s(L)}else if(C&&C.test(R))s(y[R].radialaxis);else if(P&&P.test(R)){var I=y[R];s(I.aaxis),s(I.baxis),s(I.caxis)}else if(D&&D.test(R)){var B=y[R],V=B.cameraposition;if(Array.isArray(V)&&4===V[0].length){var Y=V[1],ee=V[2],J=x([],V[0]),$=[];for(A=0;A<3;++A)$[A]=Y[A]+ee*J[2+4*A];B.camera={eye:{x:$[0],y:$[1],z:$[2]},center:{x:Y[0],y:Y[1],z:Y[2]},up:{x:0,y:0,z:1}},delete B.cameraposition}s(B.xaxis),s(B.yaxis),s(B.zaxis)}}var Q=Array.isArray(y.annotations)?y.annotations.length:0;for(M=0;M<Q;M++){var se=y.annotations[M];b.isPlainObject(se)&&(se.ref&&("paper"===se.ref?(se.xref="paper",se.yref="paper"):"data"===se.ref&&(se.xref="x",se.yref="y"),delete se.ref),u(se,"xref"),u(se,"yref"))}var j=Array.isArray(y.shapes)?y.shapes.length:0;for(M=0;M<j;M++){var G=y.shapes[M];b.isPlainObject(G)&&(u(G,"xref"),u(G,"yref"))}var W=Array.isArray(y.images)?y.images.length:0;for(M=0;M<W;M++){var ie=y.images[M];b.isPlainObject(ie)&&(u(ie,"xref"),u(ie,"yref"))}var q=y.legend;return q&&(q.x>3?(q.x=1.02,q.xanchor="left"):q.x<-2&&(q.x=-.02,q.xanchor="right"),q.y>3?(q.y=1.02,q.yanchor="bottom"):q.y<-2&&(q.y=-.02,q.yanchor="top")),s(y),"rotate"===y.dragmode&&(y.dragmode="orbit"),a.clean(y),y.template&&y.template.layout&&ae.cleanLayout(y.template.layout),y},ae.cleanData=function(y){for(var M=0;M<y.length;M++){var A,k=y[M];if("histogramy"===k.type&&"xbins"in k&&!("ybins"in k)&&(k.ybins=k.xbins,delete k.xbins),k.error_y&&"opacity"in k.error_y){var C=a.defaults,P=k.error_y.color||(d(k,"bar")?a.defaultLine:C[M%C.length]);k.error_y.color=a.addOpacity(a.rgb(P),a.opacity(P)*k.error_y.opacity),delete k.error_y.opacity}if("bardir"in k&&("h"!==k.bardir||!d(k,"bar")&&"histogram"!==k.type.substr(0,9)||(k.orientation="h",ae.swapXYData(k)),delete k.bardir),"histogramy"===k.type&&ae.swapXYData(k),"histogramx"!==k.type&&"histogramy"!==k.type||(k.type="histogram"),"scl"in k&&!("colorscale"in k)&&(k.colorscale=k.scl,delete k.scl),"reversescl"in k&&!("reversescale"in k)&&(k.reversescale=k.reversescl,delete k.reversescl),k.xaxis&&(k.xaxis=l(k.xaxis,"x")),k.yaxis&&(k.yaxis=l(k.yaxis,"y")),d(k,"gl3d")&&k.scene&&(k.scene=e.subplotsRegistry.gl3d.cleanId(k.scene)),!d(k,"pie-like")&&!d(k,"bar-like"))if(Array.isArray(k.textposition))for(A=0;A<k.textposition.length;A++)k.textposition[A]=p(k.textposition[A]);else k.textposition&&(k.textposition=p(k.textposition));var D=T.getModule(k);if(D&&D.colorbar){var F=D.colorbar.container,R=F?k[F]:k;R&&R.colorscale&&("YIGnBu"===R.colorscale&&(R.colorscale="YlGnBu"),"YIOrRd"===R.colorscale&&(R.colorscale="YlOrRd"))}if("surface"===k.type&&b.isPlainObject(k.contours)){var L=["x","y","z"];for(A=0;A<L.length;A++){var I=k.contours[L[A]];b.isPlainObject(I)&&(I.highlightColor&&(I.highlightcolor=I.highlightColor,delete I.highlightColor),I.highlightWidth&&(I.highlightwidth=I.highlightWidth,delete I.highlightWidth))}}if("candlestick"===k.type||"ohlc"===k.type){var B=!1!==(k.increasing||{}).showlegend,V=!1!==(k.decreasing||{}).showlegend,Z=c(k.increasing),Y=c(k.decreasing);if(!1!==Z&&!1!==Y){var ee=h(Z,Y,B,V);ee&&(k.name=ee)}else!Z&&!Y||k.name||(k.name=Z||Y)}if(Array.isArray(k.transforms)){var J=k.transforms;for(A=0;A<J.length;A++){var $=J[A];if(b.isPlainObject($))switch($.type){case"filter":$.filtersrc&&($.target=$.filtersrc,delete $.filtersrc),$.calendar&&($.valuecalendar||($.valuecalendar=$.calendar),delete $.calendar);break;case"groupby":if($.styles=$.styles||$.style,$.styles&&!Array.isArray($.styles)){var Q=$.styles,se=Object.keys(Q);$.styles=[];for(var j=0;j<se.length;j++)$.styles.push({target:se[j],value:Q[se[j]]})}}}}v(k,"line")&&delete k.line,"marker"in k&&(v(k.marker,"line")&&delete k.marker.line,v(k,"marker")&&delete k.marker),a.clean(k),k.autobinx&&(delete k.autobinx,delete k.xbins),k.autobiny&&(delete k.autobiny,delete k.ybins),s(k),k.colorbar&&s(k.colorbar),k.marker&&k.marker.colorbar&&s(k.marker.colorbar),k.line&&k.line.colorbar&&s(k.line.colorbar),k.aaxis&&s(k.aaxis),k.baxis&&s(k.baxis)}},ae.swapXYData=function(y){var M;if(b.swapAttrs(y,["?","?0","d?","?bins","nbins?","autobin?","?src","error_?"]),Array.isArray(y.z)&&Array.isArray(y.z[0])&&(y.transpose?delete y.transpose:y.transpose=!0),y.error_x&&y.error_y){var A=y.error_y,k="copy_ystyle"in A?A.copy_ystyle:!(A.color||A.thickness||A.width);b.swapAttrs(y,["error_?.copy_ystyle"]),k&&b.swapAttrs(y,["error_?.color","error_?.thickness","error_?.width"])}if("string"==typeof y.hoverinfo){var C=y.hoverinfo.split("+");for(M=0;M<C.length;M++)"x"===C[M]?C[M]="y":"y"===C[M]&&(C[M]="x");y.hoverinfo=C.join("+")}},ae.coerceTraceIndices=function(y,M){if(m(M))return[M];if(!Array.isArray(M)||!M.length)return y.data.map(function(C,P){return P});if(Array.isArray(M)){for(var A=[],k=0;k<M.length;k++)b.isIndex(M[k],y.data.length)?A.push(M[k]):b.warn("trace index (",M[k],") is not a number or is out of bounds");return A}return M},ae.manageArrayContainers=function(y,M,A){var k=y.obj,C=y.parts,P=C.length,D=C[P-1],F=m(D);if(F&&null===M){var R=C.slice(0,P-1).join(".");b.nestedProperty(k,R).get().splice(D,1)}else F&&void 0===y.get()&&void 0===y.get()&&(A[y.astr]=null),y.set(M)};var g=/(\.[^\[\]\.]+|\[[^\[\]\.]+\])$/;function f(y){var M=y.search(g);if(M>0)return y.substr(0,M)}ae.hasParent=function(y,M){for(var A=f(M);A;){if(A in y)return!0;A=f(A)}return!1};var w=["x","y","z"];ae.clearAxisTypes=function(y,M,A){for(var k=0;k<M.length;k++)for(var C=y._fullData[k],P=0;P<3;P++){var D=i(y,C,w[P]);if(D&&"log"!==D.type){var F=D._name,R=D._id.substr(1);if("scene"===R.substr(0,5)){if(void 0!==A[R])continue;F=R+"."+F}var L=F+".type";void 0===A[F]&&void 0===A[L]&&b.nestedProperty(y.layout,L).set(null)}}}},{"../components/color":366,"../lib":503,"../plots/cartesian/axis_ids":558,"../plots/plots":619,"../registry":638,"fast-isnumeric":190,"gl-mat4/fromQuat":200}],538:[function(_,oe,ae){"use strict";var m=_("./plot_api");ae._doPlot=m._doPlot,ae.newPlot=m.newPlot,ae.restyle=m.restyle,ae.relayout=m.relayout,ae.redraw=m.redraw,ae.update=m.update,ae._guiRestyle=m._guiRestyle,ae._guiRelayout=m._guiRelayout,ae._guiUpdate=m._guiUpdate,ae._storeDirectGUIEdit=m._storeDirectGUIEdit,ae.react=m.react,ae.extendTraces=m.extendTraces,ae.prependTraces=m.prependTraces,ae.addTraces=m.addTraces,ae.deleteTraces=m.deleteTraces,ae.moveTraces=m.moveTraces,ae.purge=m.purge,ae.addFrames=m.addFrames,ae.deleteFrames=m.deleteFrames,ae.animate=m.animate,ae.setPlotConfig=m.setPlotConfig,ae.toImage=_("./to_image"),ae.validate=_("./validate"),ae.downloadImage=_("../snapshot/download");var x=_("./template_api");ae.makeTemplate=x.makeTemplate,ae.validateTemplate=x.validateTemplate},{"../snapshot/download":640,"./plot_api":540,"./template_api":545,"./to_image":546,"./validate":547}],539:[function(_,oe,ae){"use strict";var m=_("../lib/is_plain_object"),x=_("../lib/noop"),T=_("../lib/loggers"),b=_("../lib/search").sorterAsc,e=_("../registry");ae.containerArrayMatch=_("./container_array_match");var o=ae.isAddVal=function(l){return"add"===l||m(l)},a=ae.isRemoveVal=function(l){return null===l||"remove"===l};ae.applyContainerArrayChanges=function(l,i,d,u,s){var c=i.astr,h=e.getComponentMethod(c,"supplyLayoutDefaults"),p=e.getComponentMethod(c,"draw"),v=e.getComponentMethod(c,"drawOne"),g=u.replot||u.recalc||h===x||p===x,f=l.layout,w=l._fullLayout;if(d[""]){Object.keys(d).length>1&&T.warn("Full array edits are incompatible with other edits",c);var y=d[""][""];if(a(y))i.set(null);else{if(!Array.isArray(y))return T.warn("Unrecognized full array edit value",c,y),!0;i.set(y)}return!g&&(h(f,w),p(l),!0)}var M,A,k,C,P,D,F,L=Object.keys(d).map(Number).sort(b),I=i.get(),B=I||[],V=s(w,c).get(),Z=[],Y=-1,ee=B.length;for(M=0;M<L.length;M++)if(C=d[k=L[M]],P=Object.keys(C),F=o(D=C[""]),k<0||k>B.length-(F?0:1))T.warn("index out of range",c,k);else if(void 0!==D)P.length>1&&T.warn("Insertion & removal are incompatible with edits to the same index.",c,k),a(D)?Z.push(k):F?("add"===D&&(D={}),B.splice(k,0,D),V&&V.splice(k,0,{})):T.warn("Unrecognized full object edit value",c,k,D),-1===Y&&(Y=k);else for(A=0;A<P.length;A++)s(B[k],P[A],c+"["+k+"].").set(C[P[A]]);for(M=Z.length-1;M>=0;M--)B.splice(Z[M],1),V&&V.splice(Z[M],1);if(B.length?I||i.set(B):i.set(null),g)return!1;if(h(f,w),v!==x){var J;if(-1===Y)J=L;else{for(ee=Math.max(B.length,ee),J=[],M=0;M<L.length&&!((k=L[M])>=Y);M++)J.push(k);for(M=Y;M<ee;M++)J.push(M)}for(M=0;M<J.length;M++)v(l,J[M])}else p(l);return!0}},{"../lib/is_plain_object":504,"../lib/loggers":507,"../lib/noop":512,"../lib/search":523,"../registry":638,"./container_array_match":535}],540:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("has-hover"),b=_("../lib"),e=b.nestedProperty,o=_("../lib/events"),a=_("../lib/queue"),l=_("../registry"),i=_("./plot_schema"),d=_("../plots/plots"),u=_("../plots/cartesian/axes"),s=_("../components/drawing"),c=_("../components/color"),h=_("../plots/cartesian/graph_interact").initInteractions,p=_("../constants/xmlns_namespaces"),v=_("../plots/cartesian/select").clearSelect,g=_("./plot_config").dfltConfig,f=_("./manage_arrays"),w=_("./helpers"),y=_("./subroutines"),M=_("./edit_types"),A=_("../plots/cartesian/constants").AX_NAME_PATTERN,k=0;function C(ve){var Te=ve._fullLayout;Te._redrawFromAutoMarginCount?Te._redrawFromAutoMarginCount--:ve.emit("plotly_afterplot")}function P(ve,Te){try{ve._fullLayout._paper.style("background",Te)}catch(Le){b.error(Le)}}function D(ve,Te){P(ve,c.combine(Te,"white"))}function F(ve,Te){if(!ve._context){ve._context=b.extendDeep({},g);var Le=m.select("base");ve._context._baseUrl=Le.size()&&Le.attr("href")?window.location.href.split("#")[0]:""}var Ee,Pe,je,Ge=ve._context;if(Te){for(Pe=Object.keys(Te),Ee=0;Ee<Pe.length;Ee++)"editable"!==(je=Pe[Ee])&&"edits"!==je&&je in Ge&&(Ge[je]="setBackground"===je&&"opaque"===Te[je]?D:Te[je]);Te.plot3dPixelRatio&&!Ge.plotGlPixelRatio&&(Ge.plotGlPixelRatio=Ge.plot3dPixelRatio);var Ke=Te.editable;if(void 0!==Ke)for(Ge.editable=Ke,Pe=Object.keys(Ge.edits),Ee=0;Ee<Pe.length;Ee++)Ge.edits[Pe[Ee]]=Ke;if(Te.edits)for(Pe=Object.keys(Te.edits),Ee=0;Ee<Pe.length;Ee++)(je=Pe[Ee])in Ge.edits&&(Ge.edits[je]=Te.edits[je]);Ge._exportedPlot=Te._exportedPlot}Ge.staticPlot&&(Ge.editable=!1,Ge.edits={},Ge.autosizable=!1,Ge.scrollZoom=!1,Ge.doubleClick=!1,Ge.showTips=!1,Ge.showLink=!1,Ge.displayModeBar=!1),"hover"!==Ge.displayModeBar||T||(Ge.displayModeBar=!0),"transparent"!==Ge.setBackground&&"function"==typeof Ge.setBackground||(Ge.setBackground=P),Ge._hasZeroHeight=Ge._hasZeroHeight||0===ve.clientHeight,Ge._hasZeroWidth=Ge._hasZeroWidth||0===ve.clientWidth;var lt=Ge.scrollZoom,Ue=Ge._scrollZoom={};if(!0===lt)Ue.cartesian=1,Ue.gl3d=1,Ue.geo=1,Ue.mapbox=1;else if("string"==typeof lt){var $e=lt.split("+");for(Ee=0;Ee<$e.length;Ee++)Ue[$e[Ee]]=1}else!1!==lt&&(Ue.gl3d=1,Ue.geo=1,Ue.mapbox=1)}function R(ve,Te){var Le,Ee,Pe=Te+1,je=[];for(Le=0;Le<ve.length;Le++)(Ee=ve[Le])<0?je.push(Pe+Ee):je.push(Ee);return je}function L(ve,Te,Le){var Ee,Pe;for(Ee=0;Ee<Te.length;Ee++){if((Pe=Te[Ee])!==parseInt(Pe,10))throw new Error("all values in "+Le+" must be integers");if(Pe>=ve.data.length||Pe<-ve.data.length)throw new Error(Le+" must be valid indices for gd.data.");if(Te.indexOf(Pe,Ee+1)>-1||Pe>=0&&Te.indexOf(-ve.data.length+Pe)>-1||Pe<0&&Te.indexOf(ve.data.length+Pe)>-1)throw new Error("each index in "+Le+" must be unique.")}}function I(ve,Te,Le){if(!Array.isArray(ve.data))throw new Error("gd.data must be an array.");if(void 0===Te)throw new Error("currentIndices is a required argument.");if(Array.isArray(Te)||(Te=[Te]),L(ve,Te,"currentIndices"),void 0===Le||Array.isArray(Le)||(Le=[Le]),void 0!==Le&&L(ve,Le,"newIndices"),void 0!==Le&&Te.length!==Le.length)throw new Error("current and new indices must be of equal length.")}function B(ve,Te,Le,Ee,Pe){!function(tt,ct,xt,Ct){var Ht=b.isPlainObject(Ct);if(!Array.isArray(tt.data))throw new Error("gd.data must be an array");if(!b.isPlainObject(ct))throw new Error("update must be a key:value object");if(void 0===xt)throw new Error("indices must be an integer or array of integers");for(var zt in L(tt,xt,"indices"),ct){if(!Array.isArray(ct[zt])||ct[zt].length!==xt.length)throw new Error("attribute "+zt+" must be an array of length equal to indices array length");if(Ht&&(!(zt in Ct)||!Array.isArray(Ct[zt])||Ct[zt].length!==ct[zt].length))throw new Error("when maxPoints is set as a key:value object it must contain a 1:1 corrispondence with the keys and number of traces in the update object")}}(ve,Te,Le,Ee);for(var je=function(tt,ct,xt,Ct){var zt,ht,ut,Ot,tn=b.isPlainObject(Ct),un=[];for(var Ze in Array.isArray(xt)||(xt=[xt]),xt=R(xt,tt.data.length-1),ct)for(var Qe=0;Qe<xt.length;Qe++){if(zt=(ht=e(tt.data[xt[Qe]],Ze)).get(),!b.isArrayOrTypedArray(ut=ct[Ze][Qe]))throw new Error("attribute: "+Ze+" index: "+Qe+" must be an array");if(!b.isArrayOrTypedArray(zt))throw new Error("cannot extend missing or non-array attribute: "+Ze);if(zt.constructor!==ut.constructor)throw new Error("cannot extend array with an array of a different type: "+Ze);x(Ot=tn?Ct[Ze][Qe]:Ct)||(Ot=-1),un.push({prop:ht,target:zt,insert:ut,maxp:Math.floor(Ot)})}return un}(ve,Te,Le,Ee),Ge={},Ke={},lt=0;lt<je.length;lt++){var Ue=je[lt].prop,et=Pe(je[lt].target,je[lt].insert,je[lt].maxp);Ue.set(et[0]),Array.isArray(Ge[Ue.astr])||(Ge[Ue.astr]=[]),Ge[Ue.astr].push(et[1]),Array.isArray(Ke[Ue.astr])||(Ke[Ue.astr]=[]),Ke[Ue.astr].push(je[lt].target.length)}return{update:Ge,maxPoints:Ke}}function V(ve,Te){var Le=new ve.constructor(ve.length+Te.length);return Le.set(ve),Le.set(Te,ve.length),Le}function Z(ve,Te,Le,Ee){ve=b.getGraphDiv(ve),w.clearPromiseQueue(ve);var Pe={};if("string"==typeof Te)Pe[Te]=Le;else{if(!b.isPlainObject(Te))return b.warn("Restyle fail.",Te,Le,Ee),Promise.reject();Pe=b.extendFlat({},Te),void 0===Ee&&(Ee=Le)}Object.keys(Pe).length&&(ve.changed=!0);var je=w.coerceTraceIndices(ve,Ee),Ge=$(ve,Pe,je),Ke=Ge.flags;Ke.calc&&(ve.calcdata=void 0),Ke.clearAxisTypes&&w.clearAxisTypes(ve,je,{});var lt=[];Ke.fullReplot?lt.push(ae._doPlot):(lt.push(d.previousPromises),d.supplyDefaults(ve),Ke.markerSize&&(d.doCalcdata(ve),G(lt)),Ke.style&&lt.push(y.doTraceStyle),Ke.colorbars&&lt.push(y.doColorBars),lt.push(C)),lt.push(d.rehover,d.redrag),a.add(ve,Z,[ve,Ge.undoit,Ge.traces],Z,[ve,Ge.redoit,Ge.traces]);var Ue=b.syncOrAsync(lt,ve);return Ue&&Ue.then||(Ue=Promise.resolve()),Ue.then(function(){return ve.emit("plotly_restyle",Ge.eventData),ve})}function Y(ve){return void 0===ve?null:ve}function ee(ve,Te){return Te?function(Le,Ee,Pe){var je=e(Le,Ee),Ge=je.set;return je.set=function(Ke){J((Pe||"")+Ee,je.get(),Ke,ve),Ge(Ke)},je}:e}function J(ve,Te,Le,Ee){if(Array.isArray(Te)||Array.isArray(Le))for(var Pe=Array.isArray(Te)?Te:[],je=Array.isArray(Le)?Le:[],Ge=Math.max(Pe.length,je.length),Ke=0;Ke<Ge;Ke++)J(ve+"["+Ke+"]",Pe[Ke],je[Ke],Ee);else if(b.isPlainObject(Te)||b.isPlainObject(Le)){var lt=b.isPlainObject(Te)?Te:{},Ue=b.isPlainObject(Le)?Le:{},$e=b.extendFlat({},lt,Ue);for(var et in $e)J(ve+"."+et,lt[et],Ue[et],Ee)}else void 0===Ee[ve]&&(Ee[ve]=Y(Te))}function $(ve,Te,Le){var Ee,Pe=ve._fullLayout,je=ve._fullData,Ge=ve.data,Ke=Pe._guiEditing,lt=ee(Pe._preGUI,Ke),Ue=b.extendDeepAll({},Te);Q(Te);var $e,et=M.traceFlags(),tt={},ct={};function xt(){return Le.map(function(){})}function Ct(Lt){var Gt=u.id2name(Lt);-1===$e.indexOf(Gt)&&$e.push(Gt)}function Ht(Lt){return"LAYOUT"+Lt+".autorange"}function zt(Lt){return"LAYOUT"+Lt+".range"}function ht(Lt){for(var Gt=Lt;Gt<je.length;Gt++)if(je[Gt]._input===Ge[Lt])return je[Gt]}function ut(Lt,Gt,Kt){if(Array.isArray(Lt))Lt.forEach(function(on){ut(on,Gt,Kt)});else if(!(Lt in Te)&&!w.hasParent(Te,Lt)){var _n;if("LAYOUT"===Lt.substr(0,6))_n=lt(ve.layout,Lt.replace("LAYOUT",""));else{var en=Le[Kt];_n=ee(Pe._tracePreGUI[ht(en)._fullInput.uid],Ke)(Ge[en],Lt)}Lt in ct||(ct[Lt]=xt()),void 0===ct[Lt][Kt]&&(ct[Lt][Kt]=Y(_n.get())),void 0!==Gt&&_n.set(Gt)}}function Ot(Lt){return function(Gt){return je[Gt][Lt]}}function tn(Lt){return function(Gt,Kt){return!1===Gt?je[Le[Kt]][Lt]:null}}for(var un in Te){if(w.hasParent(Te,un))throw new Error("cannot set "+un+" and a parent attribute simultaneously");var Ze,Qe,qe,it,Ie,ze,Ve=Te[un];if("autobinx"!==un&&"autobiny"!==un||(un=un.charAt(un.length-1)+"bins",Ve=Array.isArray(Ve)?Ve.map(tn(un)):!1===Ve?Le.map(Ot(un)):null),tt[un]=Ve,"LAYOUT"!==un.substr(0,6)){for(ct[un]=xt(),Ee=0;Ee<Le.length;Ee++)if(Ze=Ge[Le[Ee]],Qe=ht(Le[Ee]),it=(qe=ee(Pe._tracePreGUI[Qe._fullInput.uid],Ke)(Ze,un)).get(),void 0!==(Ie=Array.isArray(Ve)?Ve[Ee%Ve.length]:Ve)){var Be=qe.parts[qe.parts.length-1],at=un.substr(0,un.length-Be.length-1),gt=at?at+".":"",wt=at?e(Qe,at).get():Qe;if((ze=i.getTraceValObject(Qe,qe.parts))&&ze.impliedEdits&&null!==Ie)for(var _t in ze.impliedEdits)ut(b.relativeAttr(un,_t),ze.impliedEdits[_t],Ee);else if("thicknessmode"!==Be&&"lenmode"!==Be||it===Ie||"fraction"!==Ie&&"pixels"!==Ie||!wt){if("type"===un&&("pie"===Ie!=("pie"===it)||"funnelarea"===Ie!=("funnelarea"===it))){var Rt="x",yt="y";"bar"!==Ie&&"bar"!==it||"h"!==Ze.orientation||(Rt="y",yt="x"),b.swapAttrs(Ze,["?","?src"],"labels",Rt),b.swapAttrs(Ze,["d?","?0"],"label",Rt),b.swapAttrs(Ze,["?","?src"],"values",yt),"pie"===it||"funnelarea"===it?(e(Ze,"marker.color").set(e(Ze,"marker.colors").get()),Pe._pielayer.selectAll("g.trace").remove()):l.traceIs(Ze,"cartesian")&&e(Ze,"marker.colors").set(e(Ze,"marker.color").get())}}else{var Vt=Pe._size,Nt=wt.orient,rt="top"===Nt||"bottom"===Nt;if("thicknessmode"===Be){var Tt=rt?Vt.h:Vt.w;ut(gt+"thickness",wt.thickness*("fraction"===Ie?1/Tt:Tt),Ee)}else{var Ut=rt?Vt.w:Vt.h;ut(gt+"len",wt.len*("fraction"===Ie?1/Ut:Ut),Ee)}}if(ct[un][Ee]=Y(it),-1!==["swapxy","swapxyaxes","orientation","orientationaxes"].indexOf(un)){if("orientation"===un){qe.set(Ie);var Wt=Ze.x&&!Ze.y?"h":"v";if((qe.get()||Wt)===Qe.orientation)continue}else"orientationaxes"===un&&(Ze.orientation={v:"h",h:"v"}[Qe.orientation]);w.swapXYData(Ze),et.calc=et.clearAxisTypes=!0}else-1!==d.dataArrayContainers.indexOf(qe.parts[0])?(w.manageArrayContainers(qe,Ie,ct),et.calc=!0):(ze?ze.arrayOk&&!l.traceIs(Qe,"regl")&&(b.isArrayOrTypedArray(Ie)||b.isArrayOrTypedArray(it))?et.calc=!0:M.update(et,ze):et.calc=!0,qe.set(Ie))}if(-1!==["swapxyaxes","orientationaxes"].indexOf(un)&&u.swap(ve,Le),"orientationaxes"===un){var sn=e(ve.layout,"hovermode"),He=sn.get();"x"===He?sn.set("y"):"y"===He?sn.set("x"):"x unified"===He?sn.set("y unified"):"y unified"===He&&sn.set("x unified")}if(-1!==["orientation","type"].indexOf(un)){for($e=[],Ee=0;Ee<Le.length;Ee++){var vt=Ge[Le[Ee]];l.traceIs(vt,"cartesian")&&(Ct(vt.xaxis||"x"),Ct(vt.yaxis||"y"))}ut($e.map(Ht),!0,0),ut($e.map(zt),[0,1],0)}}else qe=lt(ve.layout,un.replace("LAYOUT","")),ct[un]=[Y(qe.get())],qe.set(Array.isArray(Ve)?Ve[0]:Ve),et.calc=!0}return(et.calc||et.plot)&&(et.fullReplot=!0),{flags:et,undoit:ct,redoit:tt,traces:Le,eventData:b.extendDeepNoArrays([],[Ue,Le])}}function Q(ve){var Te,Le,Ee,Pe=b.counterRegex("axis",".title",!1,!1),je=/colorbar\.title$/,Ge=Object.keys(ve);for(Te=0;Te<Ge.length;Te++)Ee=ve[Le=Ge[Te]],"title"!==Le&&!Pe.test(Le)&&!je.test(Le)||"string"!=typeof Ee&&"number"!=typeof Ee?Le.indexOf("titlefont")>-1&&-1===Le.indexOf("grouptitlefont")?Ke(Le,Le.replace("titlefont","title.font")):Le.indexOf("titleposition")>-1?Ke(Le,Le.replace("titleposition","title.position")):Le.indexOf("titleside")>-1?Ke(Le,Le.replace("titleside","title.side")):Le.indexOf("titleoffset")>-1&&Ke(Le,Le.replace("titleoffset","title.offset")):Ke(Le,Le.replace("title","title.text"));function Ke(lt,Ue){ve[Ue]=ve[lt],delete ve[lt]}}function se(ve,Te,Le){ve=b.getGraphDiv(ve),w.clearPromiseQueue(ve);var Ee={};if("string"==typeof Te)Ee[Te]=Le;else{if(!b.isPlainObject(Te))return b.warn("Relayout fail.",Te,Le),Promise.reject();Ee=b.extendFlat({},Te)}Object.keys(Ee).length&&(ve.changed=!0);var Pe=te(ve,Ee),je=Pe.flags;je.calc&&(ve.calcdata=void 0);var Ge=[d.previousPromises];je.layoutReplot?Ge.push(y.layoutReplot):Object.keys(Ee).length&&(j(ve,je,Pe)||d.supplyDefaults(ve),je.legend&&Ge.push(y.doLegend),je.layoutstyle&&Ge.push(y.layoutStyles),je.axrange&&G(Ge,Pe.rangesAltered),je.ticks&&Ge.push(y.doTicksRelayout),je.modebar&&Ge.push(y.doModeBar),je.camera&&Ge.push(y.doCamera),je.colorbars&&Ge.push(y.doColorBars),Ge.push(C)),Ge.push(d.rehover,d.redrag),a.add(ve,se,[ve,Pe.undoit],se,[ve,Pe.redoit]);var Ke=b.syncOrAsync(Ge,ve);return Ke&&Ke.then||(Ke=Promise.resolve(ve)),Ke.then(function(){return ve.emit("plotly_relayout",Pe.eventData),ve})}function j(ve,Te,Le){var Ee=ve._fullLayout;if(!Te.axrange)return!1;for(var Pe in Te)if("axrange"!==Pe&&Te[Pe])return!1;for(var je in Le.rangesAltered){var Ge=u.id2name(je),Ke=ve.layout[Ge],lt=Ee[Ge];if(lt.autorange=Ke.autorange,Ke.range&&(lt.range=Ke.range.slice()),lt.cleanRange(),lt._matchGroup)for(var Ue in lt._matchGroup)if(Ue!==je){var $e=Ee[u.id2name(Ue)];$e.autorange=lt.autorange,$e.range=lt.range.slice(),$e._input.range=lt.range.slice()}}return!0}function G(ve,Te){ve.push(v,y.doAutoRangeAndConstraints,Te?function(Ee){var Pe=[],je=!0;for(var Ge in Te){var Ke=u.getFromId(Ee,Ge);if(Pe.push(Ge),-1!==(Ke.ticklabelposition||"").indexOf("inside")&&Ke._anchorAxis&&Pe.push(Ke._anchorAxis._id),Ke._matchGroup)for(var lt in Ke._matchGroup)Te[lt]||Pe.push(lt);Ke.automargin&&(je=!1)}return u.draw(Ee,Pe,{skipTitle:je})}:function(Ee){return u.draw(Ee,"redraw")},y.drawData,y.finalDraw)}var W=/^[xyz]axis[0-9]*\.range(\[[0|1]\])?$/,ie=/^[xyz]axis[0-9]*\.autorange$/,q=/^[xyz]axis[0-9]*\.domain(\[[0|1]\])?$/;function te(ve,Te){var Le,Ee,Pe,je=ve.layout,Ge=ve._fullLayout,lt=ee(Ge._preGUI,Ge._guiEditing),Ue=Object.keys(Te),$e=u.list(ve),et=b.extendDeepAll({},Te),tt={};for(Q(Te),Ue=Object.keys(Te),Ee=0;Ee<Ue.length;Ee++)if(0===Ue[Ee].indexOf("allaxes")){for(Pe=0;Pe<$e.length;Pe++){var ct=$e[Pe]._id.substr(1),xt=-1!==ct.indexOf("scene")?ct+".":"",Ct=Ue[Ee].replace("allaxes",xt+$e[Pe]._name);Te[Ct]||(Te[Ct]=Te[Ue[Ee]])}delete Te[Ue[Ee]]}var Ht=M.layoutFlags(),zt={},ht={};function ut(en,on){if(Array.isArray(en))en.forEach(function(On){ut(On,on)});else if(!(en in Te)&&!w.hasParent(Te,en)){var wn=lt(je,en);en in ht||(ht[en]=Y(wn.get())),void 0!==on&&wn.set(on)}}var Ot,tn={};function un(en){var on=u.name2id(en.split(".")[0]);return tn[on]=1,on}for(var Ze in Te){if(w.hasParent(Te,Ze))throw new Error("cannot set "+Ze+" and a parent attribute simultaneously");for(var Qe=lt(je,Ze),qe=Te[Ze],it=Qe.parts.length-1;it>0&&"string"!=typeof Qe.parts[it];)it--;var Ie=Qe.parts[it],ze=Qe.parts[it-1]+"."+Ie,Ve=Qe.parts.slice(0,it).join("."),Be=e(ve.layout,Ve).get(),at=e(Ge,Ve).get(),gt=Qe.get();if(void 0!==qe){zt[Ze]=qe,ht[Ze]="reverse"===Ie?qe:Y(gt);var wt=i.getLayoutValObject(Ge,Qe.parts);if(wt&&wt.impliedEdits&&null!==qe)for(var _t in wt.impliedEdits)ut(b.relativeAttr(Ze,_t),wt.impliedEdits[_t]);if(-1!==["width","height"].indexOf(Ze))if(qe){ut("autosize",null);var Rt="height"===Ze?"width":"height";ut(Rt,Ge[Rt])}else Ge[Ze]=ve._initialAutoSize[Ze];else if("autosize"===Ze)ut("width",qe?null:Ge.width),ut("height",qe?null:Ge.height);else if(ze.match(W))un(ze),e(Ge,Ve+"._inputRange").set(null);else if(ze.match(ie)){un(ze),e(Ge,Ve+"._inputRange").set(null);var yt=e(Ge,Ve).get();yt._inputDomain&&(yt._input.domain=yt._inputDomain.slice())}else ze.match(q)&&e(Ge,Ve+"._inputDomain").set(null);if("type"===Ie){Ot=Be;var Vt="linear"===at.type&&"log"===qe;if(Vt||"log"===at.type&&"linear"===qe){if(Ot&&Ot.range)if(at.autorange)Vt&&(Ot.range=Ot.range[1]>Ot.range[0]?[1,2]:[2,1]);else{var rt=Ot.range[0],Tt=Ot.range[1];Vt?(rt<=0&&Tt<=0&&ut(Ve+".autorange",!0),rt<=0?rt=Tt/1e6:Tt<=0&&(Tt=rt/1e6),ut(Ve+".range[0]",Math.log(rt)/Math.LN10),ut(Ve+".range[1]",Math.log(Tt)/Math.LN10)):(ut(Ve+".range[0]",Math.pow(10,rt)),ut(Ve+".range[1]",Math.pow(10,Tt)))}else ut(Ve+".autorange",!0);Array.isArray(Ge._subplots.polar)&&Ge._subplots.polar.length&&Ge[Qe.parts[0]]&&"radialaxis"===Qe.parts[1]&&delete Ge[Qe.parts[0]]._subplot.viewInitial["radialaxis.range"],l.getComponentMethod("annotations","convertCoords")(ve,at,qe,ut),l.getComponentMethod("images","convertCoords")(ve,at,qe,ut)}else ut(Ve+".autorange",!0),ut(Ve+".range",null);e(Ge,Ve+"._inputRange").set(null)}else if(Ie.match(A)){var Ut=e(Ge,Ze).get(),Wt=(qe||{}).type;Wt&&"-"!==Wt||(Wt="linear"),l.getComponentMethod("annotations","convertCoords")(ve,Ut,Wt,ut),l.getComponentMethod("images","convertCoords")(ve,Ut,Wt,ut)}var sn=f.containerArrayMatch(Ze);if(sn){Le=sn.array;var He=sn.property,vt=wt||{editType:"calc"};""!==(Ee=sn.index)&&""===He&&(f.isAddVal(qe)?ht[Ze]=null:f.isRemoveVal(qe)?ht[Ze]=(e(je,Le).get()||[])[Ee]:b.warn("unrecognized full object value",Te)),M.update(Ht,vt),tt[Le]||(tt[Le]={});var Lt=tt[Le][Ee];Lt||(Lt=tt[Le][Ee]={}),Lt[He]=qe,delete Te[Ze]}else"reverse"===Ie?(Be.range?Be.range.reverse():(ut(Ve+".autorange",!0),Be.range=[1,0]),at.autorange?Ht.calc=!0:Ht.plot=!0):(Ge._has("scatter-like")&&Ge._has("regl")&&"dragmode"===Ze&&("lasso"===qe||"select"===qe)&&"lasso"!==gt&&"select"!==gt||Ge._has("gl2d")?Ht.plot=!0:wt?M.update(Ht,wt):Ht.calc=!0,Qe.set(qe))}}for(Le in tt)f.applyContainerArrayChanges(ve,lt(je,Le),tt[Le],Ht,lt)||(Ht.plot=!0);for(var Gt in tn){var Kt=(Ot=u.getFromId(ve,Gt))&&Ot._constraintGroup;if(Kt)for(var _n in Ht.calc=!0,Kt)tn[_n]||(u.getFromId(ve,_n)._constraintShrinkable=!0)}return(ne(ve)||Te.height||Te.width)&&(Ht.plot=!0),(Ht.plot||Ht.calc)&&(Ht.layoutReplot=!0),{flags:Ht,rangesAltered:tn,undoit:ht,redoit:zt,eventData:et}}function ne(ve){var Te=ve._fullLayout,Le=Te.width,Ee=Te.height;return ve.layout.autosize&&d.plotAutoSize(ve,ve.layout,Te),Te.width!==Le||Te.height!==Ee}function le(ve,Te,Le,Ee){ve=b.getGraphDiv(ve),w.clearPromiseQueue(ve),b.isPlainObject(Te)||(Te={}),b.isPlainObject(Le)||(Le={}),Object.keys(Te).length&&(ve.changed=!0),Object.keys(Le).length&&(ve.changed=!0);var Pe=w.coerceTraceIndices(ve,Ee),je=$(ve,b.extendFlat({},Te),Pe),Ge=je.flags,Ke=te(ve,b.extendFlat({},Le)),lt=Ke.flags;(Ge.calc||lt.calc)&&(ve.calcdata=void 0),Ge.clearAxisTypes&&w.clearAxisTypes(ve,Pe,Le);var Ue=[];lt.layoutReplot?Ue.push(y.layoutReplot):Ge.fullReplot?Ue.push(ae._doPlot):(Ue.push(d.previousPromises),j(ve,lt,Ke)||d.supplyDefaults(ve),Ge.style&&Ue.push(y.doTraceStyle),(Ge.colorbars||lt.colorbars)&&Ue.push(y.doColorBars),lt.legend&&Ue.push(y.doLegend),lt.layoutstyle&&Ue.push(y.layoutStyles),lt.axrange&&G(Ue,Ke.rangesAltered),lt.ticks&&Ue.push(y.doTicksRelayout),lt.modebar&&Ue.push(y.doModeBar),lt.camera&&Ue.push(y.doCamera),Ue.push(C)),Ue.push(d.rehover,d.redrag),a.add(ve,le,[ve,je.undoit,Ke.undoit,je.traces],le,[ve,je.redoit,Ke.redoit,je.traces]);var $e=b.syncOrAsync(Ue,ve);return $e&&$e.then||($e=Promise.resolve(ve)),$e.then(function(){return ve.emit("plotly_update",{data:je.eventData,layout:Ke.eventData}),ve})}function ue(ve){return function(Te){Te._fullLayout._guiEditing=!0;var Le=ve.apply(null,arguments);return Te._fullLayout._guiEditing=!1,Le}}var de=[{pattern:/^hiddenlabels/,attr:"legend.uirevision"},{pattern:/^((x|y)axis\d*)\.((auto)?range|title\.text)/},{pattern:/axis\d*\.showspikes$/,attr:"modebar.uirevision"},{pattern:/(hover|drag)mode$/,attr:"modebar.uirevision"},{pattern:/^(scene\d*)\.camera/},{pattern:/^(geo\d*)\.(projection|center|fitbounds)/},{pattern:/^(ternary\d*\.[abc]axis)\.(min|title\.text)$/},{pattern:/^(polar\d*\.radialaxis)\.((auto)?range|angle|title\.text)/},{pattern:/^(polar\d*\.angularaxis)\.rotation/},{pattern:/^(mapbox\d*)\.(center|zoom|bearing|pitch)/},{pattern:/^legend\.(x|y)$/,attr:"editrevision"},{pattern:/^(shapes|annotations)/,attr:"editrevision"},{pattern:/^title\.text$/,attr:"editrevision"}],he=[{pattern:/^selectedpoints$/,attr:"selectionrevision"},{pattern:/(^|value\.)visible$/,attr:"legend.uirevision"},{pattern:/^dimensions\[\d+\]\.constraintrange/},{pattern:/^node\.(x|y|groups)/},{pattern:/^level$/},{pattern:/(^|value\.)name$/},{pattern:/colorbar\.title\.text$/},{pattern:/colorbar\.(x|y)$/,attr:"editrevision"}];function be(ve,Te){for(var Le=0;Le<Te.length;Le++){var Ee=Te[Le],Pe=ve.match(Ee.pattern);if(Pe){var je=Pe[1]||"";return{head:je,tail:ve.substr(je.length+1),attr:Ee.attr}}}}function ge(ve,Te){var Le=e(Te,ve).get();if(void 0!==Le)return Le;var Ee=ve.split(".");for(Ee.pop();Ee.length>1;)if(Ee.pop(),void 0!==(Le=e(Te,Ee.join(".")+".uirevision").get()))return Le;return Te.uirevision}function we(ve,Te){for(var Le=0;Le<Te.length;Le++)if(Te[Le]._fullInput.uid===ve)return Le;return-1}function Ce(ve,Te,Le){for(var Ee=0;Ee<Te.length;Ee++)if(Te[Ee].uid===ve)return Ee;return!Te[Le]||Te[Le].uid?-1:Le}function De(ve,Te){var Le=b.isPlainObject(ve),Ee=Array.isArray(ve);return Le||Ee?(Le&&b.isPlainObject(Te)||Ee&&Array.isArray(Te))&&JSON.stringify(ve)===JSON.stringify(Te):ve===Te}function Se(ve,Te,Le,Ee){var Pe,je,Ge,Ke=Ee.getValObject,lt=Ee.flags,Ue=Ee.immutable,$e=Ee.inArray,et=Ee.arrayIndex;function tt(){var Be=Pe.editType;$e&&-1!==Be.indexOf("arraydraw")?b.pushUnique(lt.arrays[$e],et):(M.update(lt,Pe),"none"!==Be&&lt.nChanges++,Ee.transition&&Pe.anim&&lt.nChangesAnim++,(W.test(Ge)||ie.test(Ge))&&(lt.rangesAltered[Le[0]]=1),q.test(Ge)&&e(Te,"_inputDomain").set(null),"datarevision"===je&&(lt.newDataRevision=1))}function ct(Be){return"data_array"===Be.valType||Be.arrayOk}for(je in ve){if(lt.calc&&!Ee.transition)return;var xt=ve[je],Ct=Te[je],Ht=Le.concat(je);if(Ge=Ht.join("."),"_"!==je.charAt(0)&&"function"!=typeof xt&&xt!==Ct){if(("tick0"===je||"dtick"===je)&&"geo"!==Le[0]){var zt=Te.tickmode;if("auto"===zt||"array"===zt||!zt)continue}if(("range"!==je||!Te.autorange)&&("zmin"!==je&&"zmax"!==je||"contourcarpet"!==Te.type)&&(Pe=Ke(Ht))&&(!Pe._compareAsJSON||JSON.stringify(xt)!==JSON.stringify(Ct))){var ht,ut=Pe.valType,Ot=ct(Pe),tn=Array.isArray(xt),un=Array.isArray(Ct);if(tn&&un){var Ze="_input_"+je,Qe=ve[Ze],qe=Te[Ze];if(Array.isArray(Qe)&&Qe===qe)continue}if(void 0===Ct)Ot&&tn?lt.calc=!0:tt();else if(Pe._isLinkedToArray){var it=[],Ie=!1;$e||(lt.arrays[je]=it);var ze=Math.min(xt.length,Ct.length),Ve=Math.max(xt.length,Ct.length);if(ze!==Ve){if("arraydraw"!==Pe.editType){tt();continue}Ie=!0}for(ht=0;ht<ze;ht++)Se(xt[ht],Ct[ht],Ht.concat(ht),b.extendFlat({inArray:je,arrayIndex:ht},Ee));if(Ie)for(ht=ze;ht<Ve;ht++)it.push(ht)}else!ut&&b.isPlainObject(xt)?Se(xt,Ct,Ht,Ee):Ot?tn&&un?(Ue&&(lt.calc=!0),(Ue||Ee.newDataRevision)&&tt()):tn!==un?lt.calc=!0:tt():tn&&un&&xt.length===Ct.length&&String(xt)===String(Ct)||tt()}}}for(je in Te)if(!(je in ve)&&"_"!==je.charAt(0)&&"function"!=typeof Te[je]){if(ct(Pe=Ke(Le.concat(je)))&&Array.isArray(Te[je]))return void(lt.calc=!0);tt()}}function Fe(ve){var Te=ve._fullLayout,Le=ve.getBoundingClientRect();if(!b.equalDomRects(Le,Te._lastBBox)){var Ee=Te._invTransform=b.inverseTransformMatrix(b.getFullTransformMatrix(ve));Te._invScaleX=Math.sqrt(Ee[0][0]*Ee[0][0]+Ee[0][1]*Ee[0][1]+Ee[0][2]*Ee[0][2]),Te._invScaleY=Math.sqrt(Ee[1][0]*Ee[1][0]+Ee[1][1]*Ee[1][1]+Ee[1][2]*Ee[1][2]),Te._lastBBox=Le}}ae.animate=function(ve,Te,Le){if(ve=b.getGraphDiv(ve),!b.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve+". It's likely that you've failed to create a plot before animating it. For more details, see https://plotly.com/javascript/animations/");var Ee=ve._transitionData;Ee._frameQueue||(Ee._frameQueue=[]);var Pe=(Le=d.supplyAnimationDefaults(Le)).transition,je=Le.frame;function Ge(Ue){return Array.isArray(Pe)?Ue>=Pe.length?Pe[0]:Pe[Ue]:Pe}function Ke(Ue){return Array.isArray(je)?Ue>=je.length?je[0]:je[Ue]:je}function lt(Ue,$e){var et=0;return function(){if(Ue&&++et===$e)return Ue()}}return void 0===Ee._frameWaitingCnt&&(Ee._frameWaitingCnt=0),new Promise(function(Ue,$e){function tt(){ve.emit("plotly_animating"),Ee._lastFrameAt=-1/0,Ee._timeToNext=0,Ee._runningTransitions=0,Ee._currentFrame=null;var Qe=function(){Ee._animationRaf=window.requestAnimationFrame(Qe),Date.now()-Ee._lastFrameAt>Ee._timeToNext&&function et(){Ee._currentFrame&&Ee._currentFrame.onComplete&&Ee._currentFrame.onComplete();var Qe=Ee._currentFrame=Ee._frameQueue.shift();if(Qe){var qe=Qe.name?Qe.name.toString():null;ve._fullLayout._currentFrame=qe,Ee._lastFrameAt=Date.now(),Ee._timeToNext=Qe.frameOpts.duration,d.transition(ve,Qe.frame.data,Qe.frame.layout,w.coerceTraceIndices(ve,Qe.frame.traces),Qe.frameOpts,Qe.transitionOpts).then(function(){Qe.onComplete&&Qe.onComplete()}),ve.emit("plotly_animatingframe",{name:qe,frame:Qe.frame,animation:{frame:Qe.frameOpts,transition:Qe.transitionOpts}})}else ve.emit("plotly_animated"),window.cancelAnimationFrame(Ee._animationRaf),Ee._animationRaf=null}()};Qe()}var ct,xt,Ct=0;function Ht(Qe){return Qe.transitionOpts=Array.isArray(Pe)?Ct>=Pe.length?Pe[Ct]:Pe[0]:Pe,Ct++,Qe}var zt=[],ht=null==Te,ut=Array.isArray(Te);if(ht||ut||!b.isPlainObject(Te)){if(ht||-1!==["string","number"].indexOf(typeof Te))for(ct=0;ct<Ee._frames.length;ct++)(xt=Ee._frames[ct])&&(ht||String(xt.group)===String(Te))&&zt.push({type:"byname",name:String(xt.name),data:Ht({name:xt.name})});else if(ut)for(ct=0;ct<Te.length;ct++){var Ot=Te[ct];-1!==["number","string"].indexOf(typeof Ot)?(Ot=String(Ot),zt.push({type:"byname",name:Ot,data:Ht({name:Ot})})):b.isPlainObject(Ot)&&zt.push({type:"object",data:Ht(b.extendFlat({},Ot))})}}else zt.push({type:"object",data:Ht(b.extendFlat({},Te))});for(ct=0;ct<zt.length;ct++)if("byname"===(xt=zt[ct]).type&&!Ee._frameHash[xt.data.name])return b.warn('animate failure: frame not found: "'+xt.data.name+'"'),void $e();-1!==["next","immediate"].indexOf(Le.mode)&&function(){if(0!==Ee._frameQueue.length){for(;Ee._frameQueue.length;){var Qe=Ee._frameQueue.pop();Qe.onInterrupt&&Qe.onInterrupt()}ve.emit("plotly_animationinterrupted",[])}}(),"reverse"===Le.direction&&zt.reverse();var tn=ve._fullLayout._currentFrame;if(tn&&Le.fromcurrent){var un=-1;for(ct=0;ct<zt.length;ct++)if("byname"===(xt=zt[ct]).type&&xt.name===tn){un=ct;break}if(un>0&&un<zt.length-1){var Ze=[];for(ct=0;ct<zt.length;ct++)xt=zt[ct],("byname"!==zt[ct].type||ct>un)&&Ze.push(xt);zt=Ze}}zt.length>0?function(Qe){if(0!==Qe.length){for(var qe=0;qe<Qe.length;qe++){var it;it="byname"===Qe[qe].type?d.computeFrame(ve,Qe[qe].name):Qe[qe].data;var Ie=Ke(qe),ze=Ge(qe);ze.duration=Math.min(ze.duration,Ie.duration);var Ve={frame:it,name:Qe[qe].name,frameOpts:Ie,transitionOpts:ze};qe===Qe.length-1&&(Ve.onComplete=lt(Ue,2),Ve.onInterrupt=$e),Ee._frameQueue.push(Ve)}"immediate"===Le.mode&&(Ee._lastFrameAt=-1/0),Ee._animationRaf||tt()}}(zt):(ve.emit("plotly_animated"),Ue())})},ae.addFrames=function(ve,Te,Le){if(ve=b.getGraphDiv(ve),null==Te)return Promise.resolve();if(!b.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve+". It's likely that you've failed to create a plot before adding frames. For more details, see https://plotly.com/javascript/animations/");var Ee,Pe,je,Ge,Ke=ve._transitionData._frames,lt=ve._transitionData._frameHash;if(!Array.isArray(Te))throw new Error("addFrames failure: frameList must be an Array of frame definitions"+Te);var Ue=Ke.length+2*Te.length,$e=[],et={};for(Ee=Te.length-1;Ee>=0;Ee--)if(b.isPlainObject(Te[Ee])){var tt=Te[Ee].name,ct=(lt[tt]||et[tt]||{}).name,xt=Te[Ee].name;ct&&xt&&"number"==typeof xt&&(lt[ct]||et[ct])&&k<5&&(k++,b.warn('addFrames: overwriting frame "'+(lt[ct]||et[ct]).name+'" with a frame whose name of type "number" also equates to "'+ct+'". This is valid but may potentially lead to unexpected behavior since all plotly.js frame names are stored internally as strings.'),5===k&&b.warn("addFrames: This API call has yielded too many of these warnings. For the rest of this call, further warnings about numeric frame names will be suppressed.")),et[tt]={name:tt},$e.push({frame:d.supplyFrameDefaults(Te[Ee]),index:Le&&null!=Le[Ee]?Le[Ee]:Ue+Ee})}$e.sort(function(Ze,Qe){return Ze.index>Qe.index?-1:Ze.index<Qe.index?1:0});var Ht=[],zt=[],ht=Ke.length;for(Ee=$e.length-1;Ee>=0;Ee--){if("number"==typeof(Pe=$e[Ee].frame).name&&b.warn("Warning: addFrames accepts frames with numeric names, but the numbers areimplicitly cast to strings"),!Pe.name)for(;lt[Pe.name="frame "+ve._transitionData._counter++];);if(lt[Pe.name]){for(je=0;je<Ke.length&&(Ke[je]||{}).name!==Pe.name;je++);Ht.push({type:"replace",index:je,value:Pe}),zt.unshift({type:"replace",index:je,value:Ke[je]})}else Ge=Math.max(0,Math.min($e[Ee].index,ht)),Ht.push({type:"insert",index:Ge,value:Pe}),zt.unshift({type:"delete",index:Ge}),ht++}return a&&a.add(ve,d.modifyFrames,[ve,zt],d.modifyFrames,[ve,Ht]),d.modifyFrames(ve,Ht)},ae.deleteFrames=function(ve,Te){if(ve=b.getGraphDiv(ve),!b.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve);var Le,Ee,Pe=ve._transitionData._frames,je=[],Ge=[];if(!Te)for(Te=[],Le=0;Le<Pe.length;Le++)Te.push(Le);for((Te=Te.slice()).sort(),Le=Te.length-1;Le>=0;Le--)je.push({type:"delete",index:Ee=Te[Le]}),Ge.unshift({type:"insert",index:Ee,value:Pe[Ee]});return a&&a.add(ve,d.modifyFrames,[ve,Ge],d.modifyFrames,[ve,je]),d.modifyFrames(ve,je)},ae.addTraces=function ve(Te,Le,Ee){Te=b.getGraphDiv(Te);var Pe,je,Ge=[],Ke=ae.deleteTraces,lt=ve,Ue=[Te,Ge],$e=[Te,Le];for(function(et,tt,ct){var xt,Ct;if(!Array.isArray(et.data))throw new Error("gd.data must be an array.");if(void 0===tt)throw new Error("traces must be defined.");for(Array.isArray(tt)||(tt=[tt]),xt=0;xt<tt.length;xt++)if("object"!=typeof(Ct=tt[xt])||Array.isArray(Ct)||null===Ct)throw new Error("all values in traces array must be non-array objects");if(void 0===ct||Array.isArray(ct)||(ct=[ct]),void 0!==ct&&ct.length!==tt.length)throw new Error("if indices is specified, traces.length must equal indices.length")}(Te,Le,Ee),Array.isArray(Le)||(Le=[Le]),Le=Le.map(function(et){return b.extendFlat({},et)}),w.cleanData(Le),Pe=0;Pe<Le.length;Pe++)Te.data.push(Le[Pe]);for(Pe=0;Pe<Le.length;Pe++)Ge.push(-Le.length+Pe);if(void 0===Ee)return je=ae.redraw(Te),a.add(Te,Ke,Ue,lt,$e),je;Array.isArray(Ee)||(Ee=[Ee]);try{I(Te,Ge,Ee)}catch(et){throw Te.data.splice(Te.data.length-Le.length,Le.length),et}return a.startSequence(Te),a.add(Te,Ke,Ue,lt,$e),je=ae.moveTraces(Te,Ge,Ee),a.stopSequence(Te),je},ae.deleteTraces=function ve(Te,Le){Te=b.getGraphDiv(Te);var Ee,Pe,je=[],Ge=ae.addTraces,Ke=ve,lt=[Te,je,Le],Ue=[Te,Le];if(void 0===Le)throw new Error("indices must be an integer or array of integers.");for(Array.isArray(Le)||(Le=[Le]),L(Te,Le,"indices"),(Le=R(Le,Te.data.length-1)).sort(b.sorterDes),Ee=0;Ee<Le.length;Ee+=1)Pe=Te.data.splice(Le[Ee],1)[0],je.push(Pe);var $e=ae.redraw(Te);return a.add(Te,Ge,lt,Ke,Ue),$e},ae.extendTraces=function ve(Te,Le,Ee,Pe){function je(Ue,$e,et){var tt,ct;if(b.isTypedArray(Ue))if(et<0){var xt=new Ue.constructor(0),Ct=V(Ue,$e);et<0?(tt=Ct,ct=xt):(tt=xt,ct=Ct)}else if(tt=new Ue.constructor(et),ct=new Ue.constructor(Ue.length+$e.length-et),et===$e.length)tt.set($e),ct.set(Ue);else if(et<$e.length){var Ht=$e.length-et;tt.set($e.subarray(Ht)),ct.set(Ue),ct.set($e.subarray(0,Ht),Ue.length)}else{var zt=et-$e.length,ht=Ue.length-zt;tt.set(Ue.subarray(ht)),tt.set($e,zt),ct.set(Ue.subarray(0,ht))}else tt=Ue.concat($e),ct=et>=0&&et<tt.length?tt.splice(0,tt.length-et):[];return[tt,ct]}var Ge=B(Te=b.getGraphDiv(Te),Le,Ee,Pe,je),Ke=ae.redraw(Te);return a.add(Te,ae.prependTraces,[Te,Ge.update,Ee,Ge.maxPoints],ve,arguments),Ke},ae.moveTraces=function ve(Te,Le,Ee){var Pe,je=[],Ge=[],Ke=ve,lt=ve,Ue=[Te=b.getGraphDiv(Te),Ee,Le],$e=[Te,Le,Ee];if(I(Te,Le,Ee),Le=Array.isArray(Le)?Le:[Le],void 0===Ee)for(Ee=[],Pe=0;Pe<Le.length;Pe++)Ee.push(-Le.length+Pe);for(Ee=Array.isArray(Ee)?Ee:[Ee],Le=R(Le,Te.data.length-1),Ee=R(Ee,Te.data.length-1),Pe=0;Pe<Te.data.length;Pe++)-1===Le.indexOf(Pe)&&je.push(Te.data[Pe]);for(Pe=0;Pe<Le.length;Pe++)Ge.push({newIndex:Ee[Pe],trace:Te.data[Le[Pe]]});for(Ge.sort(function(tt,ct){return tt.newIndex-ct.newIndex}),Pe=0;Pe<Ge.length;Pe+=1)je.splice(Ge[Pe].newIndex,0,Ge[Pe].trace);Te.data=je;var et=ae.redraw(Te);return a.add(Te,Ke,Ue,lt,$e),et},ae.prependTraces=function ve(Te,Le,Ee,Pe){function je(Ue,$e,et){var tt,ct;if(b.isTypedArray(Ue))if(et<=0){var xt=new Ue.constructor(0),Ct=V($e,Ue);et<0?(tt=Ct,ct=xt):(tt=xt,ct=Ct)}else if(tt=new Ue.constructor(et),ct=new Ue.constructor(Ue.length+$e.length-et),et===$e.length)tt.set($e),ct.set(Ue);else if(et<$e.length){var Ht=$e.length-et;tt.set($e.subarray(0,Ht)),ct.set($e.subarray(Ht)),ct.set(Ue,Ht)}else{var zt=et-$e.length;tt.set($e),tt.set(Ue.subarray(0,zt),$e.length),ct.set(Ue.subarray(zt))}else tt=$e.concat(Ue),ct=et>=0&&et<tt.length?tt.splice(et,tt.length):[];return[tt,ct]}var Ge=B(Te=b.getGraphDiv(Te),Le,Ee,Pe,je),Ke=ae.redraw(Te);return a.add(Te,ae.extendTraces,[Te,Ge.update,Ee,Ge.maxPoints],ve,arguments),Ke},ae.newPlot=function(ve,Te,Le,Ee){return ve=b.getGraphDiv(ve),d.cleanPlot([],{},ve._fullData||[],ve._fullLayout||{}),d.purge(ve),ae._doPlot(ve,Te,Le,Ee)},ae._doPlot=function(ve,Te,Le,Ee){var Pe;if(ve=b.getGraphDiv(ve),o.init(ve),b.isPlainObject(Te)){var je=Te;Te=je.data,Le=je.layout,Ee=je.config,Pe=je.frames}if(!1===o.triggerHandler(ve,"plotly_beforeplot",[Te,Le,Ee]))return Promise.reject();Te||Le||b.isPlotDiv(ve)||b.warn("Calling _doPlot as if redrawing but this container doesn't yet have a plot.",ve),F(ve,Ee),Le||(Le={}),m.select(ve).classed("js-plotly-plot",!0),s.makeTester(),Array.isArray(ve._promises)||(ve._promises=[]);var Ge=0===(ve.data||[]).length&&Array.isArray(Te);Array.isArray(Te)&&(w.cleanData(Te),Ge?ve.data=Te:ve.data.push.apply(ve.data,Te),ve.empty=!1),ve.layout&&!Ge||(ve.layout=w.cleanLayout(Le)),d.supplyDefaults(ve);var Ke=ve._fullLayout,lt=Ke._has("cartesian");Ke._replotting=!0,(Ge||Ke._shouldCreateBgLayer)&&(function(zt){var ht=m.select(zt),ut=zt._fullLayout;if(ut._calcInverseTransform=Fe,ut._calcInverseTransform(zt),ut._container=ht.selectAll(".plot-container").data([0]),ut._container.enter().insert("div",":first-child").classed("plot-container",!0).classed("plotly",!0),ut._paperdiv=ut._container.selectAll(".svg-container").data([0]),ut._paperdiv.enter().append("div").classed("user-select-none",!0).classed("svg-container",!0).style("position","relative"),ut._glcontainer=ut._paperdiv.selectAll(".gl-container").data([{}]),ut._glcontainer.enter().append("div").classed("gl-container",!0),ut._paperdiv.selectAll(".main-svg").remove(),ut._paperdiv.select(".modebar-container").remove(),ut._paper=ut._paperdiv.insert("svg",":first-child").classed("main-svg",!0),ut._toppaper=ut._paperdiv.append("svg").classed("main-svg",!0),ut._modebardiv=ut._paperdiv.append("div"),delete ut._modeBar,ut._hoverpaper=ut._paperdiv.append("svg").classed("main-svg",!0),!ut._uid){var Ot={};m.selectAll("defs").each(function(){this.id&&(Ot[this.id.split("-")[1]]=1)}),ut._uid=b.randstr(Ot)}ut._paperdiv.selectAll(".main-svg").attr(p.svgAttrs),ut._defs=ut._paper.append("defs").attr("id","defs-"+ut._uid),ut._clips=ut._defs.append("g").classed("clips",!0),ut._topdefs=ut._toppaper.append("defs").attr("id","topdefs-"+ut._uid),ut._topclips=ut._topdefs.append("g").classed("clips",!0),ut._bgLayer=ut._paper.append("g").classed("bglayer",!0),ut._draggers=ut._paper.append("g").classed("draglayer",!0);var tn=ut._paper.append("g").classed("layer-below",!0);ut._imageLowerLayer=tn.append("g").classed("imagelayer",!0),ut._shapeLowerLayer=tn.append("g").classed("shapelayer",!0),ut._cartesianlayer=ut._paper.append("g").classed("cartesianlayer",!0),ut._polarlayer=ut._paper.append("g").classed("polarlayer",!0),ut._smithlayer=ut._paper.append("g").classed("smithlayer",!0),ut._ternarylayer=ut._paper.append("g").classed("ternarylayer",!0),ut._geolayer=ut._paper.append("g").classed("geolayer",!0),ut._funnelarealayer=ut._paper.append("g").classed("funnelarealayer",!0),ut._pielayer=ut._paper.append("g").classed("pielayer",!0),ut._iciclelayer=ut._paper.append("g").classed("iciclelayer",!0),ut._treemaplayer=ut._paper.append("g").classed("treemaplayer",!0),ut._sunburstlayer=ut._paper.append("g").classed("sunburstlayer",!0),ut._indicatorlayer=ut._toppaper.append("g").classed("indicatorlayer",!0),ut._glimages=ut._paper.append("g").classed("glimages",!0);var un=ut._toppaper.append("g").classed("layer-above",!0);ut._imageUpperLayer=un.append("g").classed("imagelayer",!0),ut._shapeUpperLayer=un.append("g").classed("shapelayer",!0),ut._infolayer=ut._toppaper.append("g").classed("infolayer",!0),ut._menulayer=ut._toppaper.append("g").classed("menulayer",!0),ut._zoomlayer=ut._toppaper.append("g").classed("zoomlayer",!0),ut._hoverlayer=ut._hoverpaper.append("g").classed("hoverlayer",!0),ut._modebardiv.classed("modebar-container",!0).style("position","absolute").style("top","0px").style("right","0px"),zt.emit("plotly_framework")}(ve),Ke._shouldCreateBgLayer&&delete Ke._shouldCreateBgLayer),s.initGradients(ve),s.initPatterns(ve),Ge&&u.saveShowSpikeInitial(ve);var Ue=!ve.calcdata||ve.calcdata.length!==(ve._fullData||[]).length;Ue&&d.doCalcdata(ve);for(var $e=0;$e<ve.calcdata.length;$e++)ve.calcdata[$e][0].trace=ve._fullData[$e];ve._context.responsive?ve._responsiveChartHandler||(ve._responsiveChartHandler=function(){b.isHidden(ve)||d.resize(ve)},window.addEventListener("resize",ve._responsiveChartHandler)):b.clearResponsive(ve);var et=b.extendFlat({},Ke._size),tt=0;function ct(){if(d.clearAutoMarginIds(ve),y.drawMarginPushers(ve),u.allowAutoMargin(ve),Ke._has("pie"))for(var zt=ve._fullData,ht=0;ht<zt.length;ht++){var ut=zt[ht];"pie"===ut.type&&ut.automargin&&d.allowAutoMargin(ve,"pie."+ut.uid+".automargin")}return d.doAutoMargin(ve),d.previousPromises(ve)}function xt(){ve._transitioning||(y.doAutoRangeAndConstraints(ve),Ge&&u.saveRangeInitial(ve),l.getComponentMethod("rangeslider","calcAutorange")(ve))}var Ct=[d.previousPromises,function(){if(Pe)return ae.addFrames(ve,Pe)},function zt(){for(var ht=Ke._basePlotModules,ut=0;ut<ht.length;ut++)ht[ut].drawFramework&&ht[ut].drawFramework(ve);!Ke._glcanvas&&Ke._has("gl")&&(Ke._glcanvas=Ke._glcontainer.selectAll(".gl-canvas").data([{key:"contextLayer",context:!0,pick:!1},{key:"focusLayer",context:!1,pick:!1},{key:"pickLayer",context:!1,pick:!0}],function(Ze){return Ze.key}),Ke._glcanvas.enter().append("canvas").attr("class",function(Ze){return"gl-canvas gl-canvas-"+Ze.key.replace("Layer","")}).style({position:"absolute",top:0,left:0,overflow:"visible","pointer-events":"none"}));var Ot=ve._context.plotGlPixelRatio;if(Ke._glcanvas){Ke._glcanvas.attr("width",Ke.width*Ot).attr("height",Ke.height*Ot).style("width",Ke.width+"px").style("height",Ke.height+"px");var tn=Ke._glcanvas.data()[0].regl;if(tn&&(Math.floor(Ke.width*Ot)!==tn._gl.drawingBufferWidth||Math.floor(Ke.height*Ot)!==tn._gl.drawingBufferHeight)){var un="WebGL context buffer and canvas dimensions do not match due to browser/WebGL bug.";if(!tt)return b.log(un+" Clearing graph and plotting again."),d.cleanPlot([],{},ve._fullData,Ke),d.supplyDefaults(ve),Ke=ve._fullLayout,d.doCalcdata(ve),tt++,zt();b.error(un)}}return"h"===Ke.modebar.orientation?Ke._modebardiv.style("height",null).style("width","100%"):Ke._modebardiv.style("width",null).style("height",Ke.height+"px"),d.previousPromises(ve)},ct,function(){if(d.didMarginChange(et,Ke._size))return b.syncOrAsync([ct,y.layoutStyles],ve)}];lt&&Ct.push(function(){if(Ue)return b.syncOrAsync([l.getComponentMethod("shapes","calcAutorange"),l.getComponentMethod("annotations","calcAutorange"),xt],ve);xt()}),Ct.push(y.layoutStyles),lt&&Ct.push(function(){return u.draw(ve,Ge?"":"redraw")},function(zt){zt._fullLayout._insideTickLabelsAutorange&&se(zt,zt._fullLayout._insideTickLabelsAutorange).then(function(){zt._fullLayout._insideTickLabelsAutorange=void 0})}),Ct.push(y.drawData,y.finalDraw,h,d.addLinks,d.rehover,d.redrag,d.doAutoMargin,function(zt){zt._fullLayout._insideTickLabelsAutorange&&Ge&&u.saveRangeInitial(zt,!0)},d.previousPromises);var Ht=b.syncOrAsync(Ct,ve);return Ht&&Ht.then||(Ht=Promise.resolve()),Ht.then(function(){return C(ve),ve})},ae.purge=function(ve){var Te=(ve=b.getGraphDiv(ve))._fullLayout||{};return d.cleanPlot([],{},ve._fullData||[],Te),d.purge(ve),o.purge(ve),Te._container&&Te._container.remove(),delete ve._context,ve},ae.react=function(ve,Te,Le,Ee){var Pe,je;ve=b.getGraphDiv(ve),w.clearPromiseQueue(ve);var Ve,Be,at,gt,wt,_t,Ge=ve._fullData,Ke=ve._fullLayout;if(b.isPlotDiv(ve)&&Ge&&Ke){if(b.isPlainObject(Te)){var lt=Te;Te=lt.data,Le=lt.layout,Ee=lt.config,Pe=lt.frames}var Ue=!1;if(Ee){var $e=b.extendDeep({},ve._context);ve._context=void 0,F(ve,Ee),Ue=function Ve(Be,at){var gt;for(gt in Be)if("_"!==gt.charAt(0)){var wt=Be[gt],_t=at[gt];if(wt!==_t)if(b.isPlainObject(wt)&&b.isPlainObject(_t)){if(Ve(wt,_t))return!0}else{if(!Array.isArray(wt)||!Array.isArray(_t)||wt.length!==_t.length)return!0;for(var Rt=0;Rt<wt.length;Rt++)if(wt[Rt]!==_t[Rt]&&(!b.isPlainObject(wt[Rt])||!b.isPlainObject(_t[Rt])||Ve(wt[Rt],_t[Rt])))return!0}}}($e,ve._context)}ve.data=Te||[],w.cleanData(ve.data),ve.layout=Le||{},w.cleanLayout(ve.layout),function(Ve,Be,at,gt){var wt,_t,Rt,yt,Vt,Nt,rt,Tt,Ut,Wt,sn=gt._preGUI,He=[],vt={},Lt={};for(wt in sn){if(Vt=be(wt,de)){if(Ut=Vt.head,Wt=Vt.tail,(yt=(Rt=e(gt,_t=Vt.attr||Ut+".uirevision").get())&&ge(_t,Be))&&yt===Rt){if(null===(Nt=sn[wt])&&(Nt=void 0),De(Tt=(rt=e(Be,wt)).get(),Nt)){void 0===Tt&&"autorange"===Wt&&He.push(Ut),rt.set(Y(e(gt,wt).get()));continue}if("autorange"===Wt||"range["===Wt.substr(0,6)){var _n=sn[Ut+".autorange"];if(_n||null===_n&&null===sn[Ut+".range[0]"]&&null===sn[Ut+".range[1]"]){if(!(Ut in vt)){var en=e(Be,Ut).get();vt[Ut]=en&&(en.autorange||!1!==en.autorange&&(!en.range||2!==en.range.length))}if(vt[Ut]){rt.set(Y(e(gt,wt).get()));continue}}}}}else b.warn("unrecognized GUI edit: "+wt);delete sn[wt],Vt&&"range["===Vt.tail.substr(0,6)&&(Lt[Vt.head]=1)}for(var on=0;on<He.length;on++){var wn=He[on];if(Lt[wn]){var On=e(Be,wn).get();On&&delete On.autorange}}var Dn=gt._tracePreGUI;for(var Tn in Dn){var pn,En=Dn[Tn],Un=null;for(wt in En){if(!Un){var In=we(Tn,at);if(In<0){delete Dn[Tn];break}var sr=Ce(Tn,Ve,(pn=at[In]._fullInput).index);if(sr<0){delete Dn[Tn];break}Un=Ve[sr]}if(Vt=be(wt,he)){if(Vt.attr?yt=(Rt=e(gt,Vt.attr).get())&&ge(Vt.attr,Be):(Rt=pn.uirevision,void 0===(yt=Un.uirevision)&&(yt=Be.uirevision)),yt&&yt===Rt&&(null===(Nt=En[wt])&&(Nt=void 0),De(Tt=(rt=e(Un,wt)).get(),Nt))){rt.set(Y(e(pn,wt).get()));continue}}else b.warn("unrecognized GUI edit: "+wt+" in trace uid "+Tn);delete En[wt]}}}(ve.data,ve.layout,Ge,Ke),d.supplyDefaults(ve,{skipUpdateCalc:!0});var et=ve._fullData,tt=ve._fullLayout,ct=void 0===tt.datarevision,xt=tt.transition,Ct=(Ve=ve,Be=Ke,at=tt,gt=ct,wt=xt,(_t=M.layoutFlags()).arrays={},_t.rangesAltered={},_t.nChanges=0,_t.nChangesAnim=0,Se(Be,at,[],{getValObject:function Rt(yt){return i.getLayoutValObject(at,yt)},flags:_t,immutable:gt,transition:wt,gd:Ve}),(_t.plot||_t.calc)&&(_t.layoutReplot=!0),wt&&_t.nChanges&&_t.nChangesAnim&&(_t.anim=_t.nChanges===_t.nChangesAnim?"all":"some"),_t),zt=function(Ve,Be,at,gt,wt,_t){var Rt=Be.length===at.length;if(!wt&&!Rt)return{fullReplot:!0,calc:!0};var yt,Vt,Nt=M.traceFlags();Nt.arrays={},Nt.nChanges=0,Nt.nChangesAnim=0;var rt={getValObject:function(Ut){var Wt=i.getTraceValObject(Vt,Ut);return!Vt._module.animatable&&Wt.anim&&(Wt.anim=!1),Wt},flags:Nt,immutable:gt,transition:wt,newDataRevision:_t,gd:Ve},Tt={};for(yt=0;yt<Be.length;yt++)if(at[yt]){if(d.hasMakesDataTransform(Vt=at[yt]._fullInput)&&(Vt=at[yt]),Tt[Vt.uid])continue;Tt[Vt.uid]=1,Se(Be[yt]._fullInput,Vt,[],rt)}return(Nt.calc||Nt.plot)&&(Nt.fullReplot=!0),wt&&Nt.nChanges&&Nt.nChangesAnim&&(Nt.anim=Nt.nChanges===Nt.nChangesAnim&&Rt?"all":"some"),Nt}(ve,Ge,et,ct,xt,Ct.newDataRevision);if(ne(ve)&&(Ct.layoutReplot=!0),zt.calc||Ct.calc){ve.calcdata=void 0;for(var ht=Object.getOwnPropertyNames(tt),ut=0;ut<ht.length;ut++){var Ot=ht[ut],tn=Ot.substring(0,5);if("xaxis"===tn||"yaxis"===tn){var un=tt[Ot]._emptyCategories;un&&un()}}}else d.supplyDefaultsUpdateCalc(ve.calcdata,et);var Ze=[];if(Pe&&(ve._transitionData={},d.createTransitionData(ve),Ze.push(function(){return ae.addFrames(ve,Pe)})),tt.transition&&!Ue&&(zt.anim||Ct.anim))Ct.ticks&&Ze.push(y.doTicksRelayout),d.doCalcdata(ve),y.doAutoRangeAndConstraints(ve),Ze.push(function(){return d.transitionFromReact(ve,zt,Ct,Ke)});else if(zt.fullReplot||Ct.layoutReplot||Ue)ve._fullLayout._skipDefaults=!0,Ze.push(ae._doPlot);else{for(var Qe in Ct.arrays){var qe=Ct.arrays[Qe];if(qe.length){var it=l.getComponentMethod(Qe,"drawOne");if(it!==b.noop)for(var Ie=0;Ie<qe.length;Ie++)it(ve,qe[Ie]);else{var ze=l.getComponentMethod(Qe,"draw");if(ze===b.noop)throw new Error("cannot draw components: "+Qe);ze(ve)}}}Ze.push(d.previousPromises),zt.style&&Ze.push(y.doTraceStyle),(zt.colorbars||Ct.colorbars)&&Ze.push(y.doColorBars),Ct.legend&&Ze.push(y.doLegend),Ct.layoutstyle&&Ze.push(y.layoutStyles),Ct.axrange&&G(Ze),Ct.ticks&&Ze.push(y.doTicksRelayout),Ct.modebar&&Ze.push(y.doModeBar),Ct.camera&&Ze.push(y.doCamera),Ze.push(C)}Ze.push(d.rehover,d.redrag),(je=b.syncOrAsync(Ze,ve))&&je.then||(je=Promise.resolve(ve))}else je=ae.newPlot(ve,Te,Le,Ee);return je.then(function(){return ve.emit("plotly_react",{data:Te,layout:Le}),ve})},ae.redraw=function(ve){if(ve=b.getGraphDiv(ve),!b.isPlotDiv(ve))throw new Error("This element is not a Plotly plot: "+ve);return w.cleanData(ve.data),w.cleanLayout(ve.layout),ve.calcdata=void 0,ae._doPlot(ve).then(function(){return ve.emit("plotly_redraw"),ve})},ae.relayout=se,ae.restyle=Z,ae.setPlotConfig=function(ve){return b.extendFlat(g,ve)},ae.update=le,ae._guiRelayout=ue(se),ae._guiRestyle=ue(Z),ae._guiUpdate=ue(le),ae._storeDirectGUIEdit=function(ve,Te,Le){for(var Ee in Le)J(Ee,e(ve,Ee).get(),Le[Ee],Te)}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"../lib/events":492,"../lib/queue":519,"../plots/cartesian/axes":554,"../plots/cartesian/constants":561,"../plots/cartesian/graph_interact":564,"../plots/cartesian/select":575,"../plots/plots":619,"../registry":638,"./edit_types":536,"./helpers":537,"./manage_arrays":539,"./plot_config":541,"./plot_schema":542,"./subroutines":544,"@plotly/d3":58,"fast-isnumeric":190,"has-hover":228}],541:[function(_,oe,ae){"use strict";var m={staticPlot:{valType:"boolean",dflt:!1},plotlyServerURL:{valType:"string",dflt:""},editable:{valType:"boolean",dflt:!1},edits:{annotationPosition:{valType:"boolean",dflt:!1},annotationTail:{valType:"boolean",dflt:!1},annotationText:{valType:"boolean",dflt:!1},axisTitleText:{valType:"boolean",dflt:!1},colorbarPosition:{valType:"boolean",dflt:!1},colorbarTitleText:{valType:"boolean",dflt:!1},legendPosition:{valType:"boolean",dflt:!1},legendText:{valType:"boolean",dflt:!1},shapePosition:{valType:"boolean",dflt:!1},titleText:{valType:"boolean",dflt:!1}},autosizable:{valType:"boolean",dflt:!1},responsive:{valType:"boolean",dflt:!1},fillFrame:{valType:"boolean",dflt:!1},frameMargins:{valType:"number",dflt:0,min:0,max:.5},scrollZoom:{valType:"flaglist",flags:["cartesian","gl3d","geo","mapbox"],extras:[!0,!1],dflt:"gl3d+geo+mapbox"},doubleClick:{valType:"enumerated",values:[!1,"reset","autosize","reset+autosize"],dflt:"reset+autosize"},doubleClickDelay:{valType:"number",dflt:300,min:0},showAxisDragHandles:{valType:"boolean",dflt:!0},showAxisRangeEntryBoxes:{valType:"boolean",dflt:!0},showTips:{valType:"boolean",dflt:!0},showLink:{valType:"boolean",dflt:!1},linkText:{valType:"string",dflt:"Edit chart",noBlank:!0},sendData:{valType:"boolean",dflt:!0},showSources:{valType:"any",dflt:!1},displayModeBar:{valType:"enumerated",values:["hover",!0,!1],dflt:"hover"},showSendToCloud:{valType:"boolean",dflt:!1},showEditInChartStudio:{valType:"boolean",dflt:!1},modeBarButtonsToRemove:{valType:"any",dflt:[]},modeBarButtonsToAdd:{valType:"any",dflt:[]},modeBarButtons:{valType:"any",dflt:!1},toImageButtonOptions:{valType:"any",dflt:{}},displaylogo:{valType:"boolean",dflt:!0},watermark:{valType:"boolean",dflt:!1},plotGlPixelRatio:{valType:"number",dflt:2,min:1,max:4},setBackground:{valType:"any",dflt:"transparent"},topojsonURL:{valType:"string",noBlank:!0,dflt:"https://cdn.plot.ly/"},mapboxAccessToken:{valType:"string",dflt:null},logging:{valType:"integer",min:0,max:2,dflt:1},notifyOnLogging:{valType:"integer",min:0,max:2,dflt:0},queueLength:{valType:"integer",min:0,dflt:0},globalTransforms:{valType:"any",dflt:[]},locale:{valType:"string",dflt:"en-US"},locales:{valType:"any",dflt:{}}},x={};(function T(b,e){for(var o in b){var a=b[o];a.valType?e[o]=a.dflt:(e[o]||(e[o]={}),T(a,e[o]))}})(m,x),oe.exports={configAttributes:m,dfltConfig:x}},{}],542:[function(_,oe,ae){"use strict";var m=_("../registry"),x=_("../lib"),T=_("../plots/attributes"),b=_("../plots/layout_attributes"),e=_("../plots/frame_attributes"),o=_("../plots/animation_attributes"),a=_("./plot_config").configAttributes,l=_("./edit_types"),i=x.extendDeepAll,d=x.isPlainObject,u=x.isArrayOrTypedArray,s=x.nestedProperty,c=x.valObjectMeta,h=["_isSubplotObj","_isLinkedToArray","_arrayAttrRegexps","_deprecated"];function p(A,k,C){if(!A)return!1;if(A._isLinkedToArray)if(v(k[C]))C++;else if(C<k.length)return!1;for(;C<k.length;C++){var P=A[k[C]];if(!d(P)||(A=P,C===k.length-1))break;if(A._isLinkedToArray){if(!v(k[++C]))return!1}else if("info_array"===A.valType){var D=k[++C];if(!v(D))return!1;var F=A.items;if(Array.isArray(F)){if(D>=F.length)return!1;if(2===A.dimensions){if(C++,k.length===C)return A;var R=k[C];if(!v(R))return!1;A=F[D][R]}else A=F[D]}else A=F}}return A}function v(A){return A===Math.round(A)&&A>=0}function g(){var A,k,C={};for(A in i(C,b),m.subplotsRegistry)if((k=m.subplotsRegistry[A]).layoutAttributes)if(Array.isArray(k.attr))for(var P=0;P<k.attr.length;P++)y(C,k,k.attr[P]);else y(C,k,"subplot"===k.attr?k.name:k.attr);for(A in m.componentsRegistry){var D=(k=m.componentsRegistry[A]).schema;if(D&&(D.subplots||D.layout)){var F=D.subplots;if(F&&F.xaxis&&!F.yaxis)for(var R in F.xaxis)delete C.yaxis[R]}else"colorscale"===k.name?i(C,k.layoutAttributes):k.layoutAttributes&&M(C,k.layoutAttributes,k.name)}return{layoutAttributes:w(C)}}function f(){var A={frames:i({},e)};return w(A),A.frames}function w(A){return ae.crawl(A,function(C,P,D){ae.isValObject(C)?!0!==C.arrayOk&&"data_array"!==C.valType||(D[P+"src"]={valType:"string",editType:"none"}):d(C)&&(C.role="object")}),ae.crawl(A,function(C,P,D){if(C){var F=C._isLinkedToArray;F&&(delete C._isLinkedToArray,D[P]={items:{}},D[P].items[F]=C,D[P].role="object")}}),function(k){!function C(P){for(var D in P)if(d(P[D]))C(P[D]);else if(Array.isArray(P[D]))for(var F=0;F<P[D].length;F++)C(P[D][F]);else P[D]instanceof RegExp&&(P[D]=P[D].toString())}(k)}(A),A}function y(A,k,C){var P=s(A,C),D=i({},k.layoutAttributes);D._isSubplotObj=!0,P.set(D)}function M(A,k,C){var P=s(A,C);P.set(i(P.get()||{},k))}ae.IS_SUBPLOT_OBJ="_isSubplotObj",ae.IS_LINKED_TO_ARRAY="_isLinkedToArray",ae.DEPRECATED="_deprecated",ae.UNDERSCORE_ATTRS=h,ae.get=function(){var A={};m.allTypes.forEach(function(C){A[C]=function(P){var D,F;F=(D=m.modules[P]._module).basePlotModule;var R={type:null},L=i({},T),I=i({},D.attributes);ae.crawl(I,function(Z,Y,ee,J,$){s(L,$).set(void 0),void 0===Z&&s(I,$).set(void 0)}),i(R,L),m.traceIs(P,"noOpacity")&&delete R.opacity,m.traceIs(P,"showLegend")||(delete R.showlegend,delete R.legendgroup),m.traceIs(P,"noHover")&&(delete R.hoverinfo,delete R.hoverlabel),D.selectPoints||delete R.selectedpoints,i(R,I),F.attributes&&i(R,F.attributes),R.type=P;var B={meta:D.meta||{},categories:D.categories||{},animatable:Boolean(D.animatable),type:P,attributes:w(R)};if(D.layoutAttributes){var V={};i(V,D.layoutAttributes),B.layoutAttributes=w(V)}return D.animatable||ae.crawl(B,function(Z){ae.isValObject(Z)&&"anim"in Z&&delete Z.anim}),B}(C)});var k={};return Object.keys(m.transformsRegistry).forEach(function(C){var P,F;k[C]=(F=i({},m.transformsRegistry[P=C].attributes),Object.keys(m.componentsRegistry).forEach(function(R){var L=m.componentsRegistry[R];L.schema&&L.schema.transforms&&L.schema.transforms[P]&&Object.keys(L.schema.transforms[P]).forEach(function(I){M(F,L.schema.transforms[P][I],I)})}),{attributes:w(F)})}),{defs:{valObjects:c,metaKeys:h.concat(["description","role","editType","impliedEdits"]),editType:{traces:l.traces,layout:l.layout},impliedEdits:{}},traces:A,layout:g(),transforms:k,frames:f(),animation:w(o),config:w(a)}},ae.crawl=function(A,k,C,P){var D=C||0;P=P||"",Object.keys(A).forEach(function(F){var R=A[F];if(-1===h.indexOf(F)){var L=(P?P+".":"")+F;k(R,F,A,D,L),ae.isValObject(R)||d(R)&&"impliedEdits"!==F&&ae.crawl(R,k,D+1,L)}})},ae.isValObject=function(A){return A&&void 0!==A.valType},ae.findArrayAttributes=function(A){var k,C,P=[],D=[],F=[];function R(Z,Y,ee,J){D=D.slice(0,J).concat([Y]),F=F.slice(0,J).concat([Z&&Z._isLinkedToArray]),Z&&("data_array"===Z.valType||!0===Z.arrayOk)&&("colorbar"!==D[J-1]||"ticktext"!==Y&&"tickvals"!==Y)&&function $(Q,se,j){var G=Q[D[se]],W=j+D[se];if(se===D.length-1)u(G)&&P.push(C+W);else if(F[se]){if(Array.isArray(G))for(var ie=0;ie<G.length;ie++)d(G[ie])&&$(G[ie],se+1,W+"["+ie+"].")}else d(G)&&$(G,se+1,W+".")}(k,0,"")}k=A,C="",ae.crawl(T,R),A._module&&A._module.attributes&&ae.crawl(A._module.attributes,R);var L=A.transforms;if(L)for(var I=0;I<L.length;I++){var B=L[I],V=B._module;V&&(C="transforms["+I+"].",k=B,ae.crawl(V.attributes,R))}return P},ae.getTraceValObject=function(A,k){var C,P,D=k[0],F=1;if("transforms"===D){if(1===k.length)return T.transforms;var R=A.transforms;if(!Array.isArray(R)||!R.length)return!1;var L=k[1];if(!v(L)||L>=R.length)return!1;P=(C=(m.transformsRegistry[R[L].type]||{}).attributes)&&C[k[2]],F=3}else{var I=A._module;if(I||(I=(m.modules[A.type||T.type.dflt]||{})._module),!I)return!1;if(!(P=(C=I.attributes)&&C[D])){var B=I.basePlotModule;B&&B.attributes&&(P=B.attributes[D])}P||(P=T[D])}return p(P,k,F)},ae.getLayoutValObject=function(A,k){return p(function(C,P){var D,F,R,L,I=C._basePlotModules;if(I){var B;for(D=0;D<I.length;D++){if((R=I[D]).attrRegex&&R.attrRegex.test(P)){if(R.layoutAttrOverrides)return R.layoutAttrOverrides;!B&&R.layoutAttributes&&(B=R.layoutAttributes)}var V=R.baseLayoutAttrOverrides;if(V&&P in V)return V[P]}if(B)return B}var Z=C._modules;if(Z)for(D=0;D<Z.length;D++)if((L=Z[D].layoutAttributes)&&P in L)return L[P];for(F in m.componentsRegistry){if("colorscale"===(R=m.componentsRegistry[F]).name&&0===P.indexOf("coloraxis"))return R.layoutAttributes[P];if(!R.schema&&P===R.name)return R.layoutAttributes}return P in b&&b[P]}(A,k[0]),k,1)}},{"../lib":503,"../plots/animation_attributes":548,"../plots/attributes":550,"../plots/frame_attributes":586,"../plots/layout_attributes":610,"../registry":638,"./edit_types":536,"./plot_config":541}],543:[function(_,oe,ae){"use strict";var m=_("../lib"),x=_("../plots/attributes"),T={name:{valType:"string",editType:"none"}};function b(o){return o&&"string"==typeof o}function e(o){return"s"!==o.charAt(o.length-1)&&m.warn("bad argument to arrayDefaultKey: "+o),o.substr(0,o.length-1)+"defaults"}T.templateitemname={valType:"string",editType:"calc"},ae.templatedArray=function(o,a){return a._isLinkedToArray=o,a.name=T.name,a.templateitemname=T.templateitemname,a},ae.traceTemplater=function(o){var a,l,i={};for(a in o)l=o[a],Array.isArray(l)&&l.length&&(i[a]=0);return{newTrace:function(d){var u={type:a=m.coerce(d,{},x,"type"),_template:null};if(a in i){var s=i[a]%(l=o[a]).length;i[a]++,u._template=l[s]}return u}}},ae.newContainer=function(o,a,l){var i=o._template,d=i&&(i[a]||l&&i[l]);return m.isPlainObject(d)||(d=null),o[a]={_template:d}},ae.arrayTemplater=function(o,a,l){var i=o._template,d=i&&i[e(a)],u=i&&i[a];Array.isArray(u)&&u.length||(u=[]);var s={};return{newItem:function(c){var h={name:c.name,_input:c},p=h.templateitemname=c.templateitemname;if(!b(p))return h._template=d,h;for(var v=0;v<u.length;v++){var g=u[v];if(g.name===p)return s[p]=1,h._template=g,h}return h[l]=c[l]||!1,h._template=!1,h},defaultItems:function(){for(var c=[],h=0;h<u.length;h++){var p=u[h],v=p.name;if(b(v)&&!s[v]){var g={_template:p,name:v,_input:{_templateitemname:v}};g.templateitemname=p.templateitemname,c.push(g),s[v]=1}}return c}}},ae.arrayDefaultKey=e,ae.arrayEditor=function(o,a,l){var i=(m.nestedProperty(o,a).get()||[]).length,d=l._index,u=d>=i&&(l._input||{})._templateitemname;u&&(d=i);var s,c=a+"["+d+"]";function h(){s={},u&&(s[c]={},s[c].templateitemname=u)}function p(g,f){u?m.nestedProperty(s[c],g).set(f):s[c+"."+g]=f}function v(){var g=s;return h(),g}return h(),{modifyBase:function(g,f){s[g]=f},modifyItem:p,getUpdateObj:v,applyUpdate:function(g,f){g&&p(g,f);var w=v();for(var y in w)m.nestedProperty(o,y).set(w[y])}}}},{"../lib":503,"../plots/attributes":550}],544:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../registry"),T=_("../plots/plots"),b=_("../lib"),e=_("../lib/clear_gl_canvases"),o=_("../components/color"),a=_("../components/drawing"),l=_("../components/titles"),i=_("../components/modebar"),d=_("../plots/cartesian/axes"),u=_("../constants/alignment"),s=_("../plots/cartesian/constraints"),c=s.enforce,h=s.clean,p=_("../plots/cartesian/autorange").doAutoRange;function v(k,C,P){for(var D=0;D<P.length;D++){var F=P[D][0],R=P[D][1];if(!(F[0]>=k[1]||F[1]<=k[0])&&R[0]<C[1]&&R[1]>C[0])return!0}return!1}function g(k){var C,P,D,F,R,L,I=k._fullLayout,B=I._size,V=B.p,Z=d.list(k,"",!0);if(I._paperdiv.style({width:k._context.responsive&&I.autosize&&!k._context._hasZeroWidth&&!k.layout.width?"100%":I.width+"px",height:k._context.responsive&&I.autosize&&!k._context._hasZeroHeight&&!k.layout.height?"100%":I.height+"px"}).selectAll(".main-svg").call(a.setSize,I.width,I.height),k._context.setBackground(k,I.paper_bgcolor),ae.drawMainTitle(k),i.manage(k),!I._has("cartesian"))return T.previousPromises(k);function Y(tt,ct,xt){var Ct=tt._lw/2;return"x"===tt._id.charAt(0)?ct?"top"===xt?ct._offset-V-Ct:ct._offset+ct._length+V+Ct:B.t+B.h*(1-(tt.position||0))+Ct%1:ct?"right"===xt?ct._offset+ct._length+V+Ct:ct._offset-V-Ct:B.l+B.w*(tt.position||0)+Ct%1}for(C=0;C<Z.length;C++){var ee=(F=Z[C])._anchorAxis;F._linepositions={},F._lw=a.crispRound(k,F.linewidth,1),F._mainLinePosition=Y(F,ee,F.side),F._mainMirrorPosition=F.mirror&&ee?Y(F,ee,u.OPPOSITE_SIDE[F.side]):null}var J=[],$=[],Q=[],se=1===o.opacity(I.paper_bgcolor)&&1===o.opacity(I.plot_bgcolor)&&I.paper_bgcolor===I.plot_bgcolor;for(P in I._plots)if((D=I._plots[P]).mainplot)D.bg&&D.bg.remove(),D.bg=void 0;else{var j=D.xaxis.domain,G=D.yaxis.domain,W=D.plotgroup;if(v(j,G,Q)){var ie=W.node(),q=D.bg=b.ensureSingle(W,"rect","bg");ie.insertBefore(q.node(),ie.childNodes[0]),$.push(P)}else W.select("rect.bg").remove(),Q.push([j,G]),se||(J.push(P),$.push(P))}var te,ne,le,ue,de,he,be,ge,we,Ce,De,Se,Fe,ve=I._bgLayer.selectAll(".bg").data(J);for(ve.enter().append("rect").classed("bg",!0),ve.exit().remove(),ve.each(function(tt){I._plots[tt].bg=m.select(this)}),C=0;C<$.length;C++)R=(D=I._plots[$[C]]).xaxis,L=D.yaxis,D.bg&&void 0!==R._offset&&void 0!==L._offset&&D.bg.call(a.setRect,R._offset-V,L._offset-V,R._length+2*V,L._length+2*V).call(o.fill,I.plot_bgcolor).style("stroke-width",0);if(!I._hasOnlyLargeSploms)for(P in I._plots){R=(D=I._plots[P]).xaxis,L=D.yaxis;var Te,Le,Ee=D.clipId="clip"+I._uid+P+"plot",Pe=b.ensureSingleById(I._clips,"clipPath",Ee,function(tt){tt.classed("plotclip",!0).append("rect")});D.clipRect=Pe.select("rect").attr({width:R._length,height:L._length}),a.setTranslate(D.plot,R._offset,L._offset),D._hasClipOnAxisFalse?(Te=null,Le=Ee):(Te=Ee,Le=null),a.setClipUrl(D.plot,Te,k),D.layerClipId=Le}function je(tt){return"M"+te+","+tt+"H"+ne}function Ge(tt){return"M"+R._offset+","+tt+"h"+R._length}function Ke(tt){return"M"+tt+","+ge+"V"+be}function lt(tt){return"M"+tt+","+L._offset+"v"+L._length}function Ue(tt,ct,xt){if(!tt.showline||P!==tt._mainSubplot)return"";if(!tt._anchorAxis)return xt(tt._mainLinePosition);var Ct=ct(tt._mainLinePosition);return tt.mirror&&(Ct+=ct(tt._mainMirrorPosition)),Ct}for(P in I._plots){L=(D=I._plots[P]).yaxis;var $e="M0,0";f(R=D.xaxis,P)&&(de=y(R,"left",L,Z),te=R._offset-(de?V+de:0),he=y(R,"right",L,Z),ne=R._offset+R._length+(he?V+he:0),le=Y(R,L,"bottom"),ue=Y(R,L,"top"),!(Fe=!R._anchorAxis||P!==R._mainSubplot)||"allticks"!==R.mirror&&"all"!==R.mirror||(R._linepositions[P]=[le,ue]),$e=Ue(R,je,Ge),Fe&&R.showline&&("all"===R.mirror||"allticks"===R.mirror)&&($e+=je(le)+je(ue)),D.xlines.style("stroke-width",R._lw+"px").call(o.stroke,R.showline?R.linecolor:"rgba(0,0,0,0)")),D.xlines.attr("d",$e);var et="M0,0";f(L,P)&&(De=y(L,"bottom",R,Z),be=L._offset+L._length+(De?V:0),Se=y(L,"top",R,Z),ge=L._offset-(Se?V:0),we=Y(L,R,"left"),Ce=Y(L,R,"right"),!(Fe=!L._anchorAxis||P!==L._mainSubplot)||"allticks"!==L.mirror&&"all"!==L.mirror||(L._linepositions[P]=[we,Ce]),et=Ue(L,Ke,lt),Fe&&L.showline&&("all"===L.mirror||"allticks"===L.mirror)&&(et+=Ke(we)+Ke(Ce)),D.ylines.style("stroke-width",L._lw+"px").call(o.stroke,L.showline?L.linecolor:"rgba(0,0,0,0)")),D.ylines.attr("d",et)}return d.makeClipPaths(k),T.previousPromises(k)}function f(k,C){return(k.ticks||k.showline)&&(C===k._mainSubplot||"all"===k.mirror||"allticks"===k.mirror)}function w(k,C,P){if(!P.showline||!P._lw)return!1;if("all"===P.mirror||"allticks"===P.mirror)return!0;var D=P._anchorAxis;if(!D)return!1;var F=u.FROM_BL[C];return P.side===C?D.domain[F]===k.domain[F]:P.mirror&&D.domain[1-F]===k.domain[1-F]}function y(k,C,P,D){if(w(k,C,P))return P._lw;for(var F=0;F<D.length;F++){var R=D[F];if(R._mainAxis===P._mainAxis&&w(k,C,R))return R._lw}return 0}function M(k,C){var P=k.title,D=k._size,F=0;return"paper"===("start"===C?F=P.pad.l:"end"===C&&(F=-P.pad.r),P.xref)?D.l+D.w*P.x+F:k.width*P.x+F}function A(k,C){var P=k.title,D=k._size,F=0;return"0em"!==C&&C?C===u.CAP_SHIFT+"em"&&(F=P.pad.t):F=-P.pad.b,"auto"===P.y?D.t/2:"paper"===P.yref?D.t+D.h-D.h*P.y+F:k.height-k.height*P.y+F}ae.layoutStyles=function(k){return b.syncOrAsync([T.doAutoMargin,g],k)},ae.drawMainTitle=function(k){var R,L,C=k._fullLayout,P=(L="middle",b.isRightAnchor(R=C.title)?L="end":b.isLeftAnchor(R)&&(L="start"),L),D=function(F){var R=F.title,L="0em";return b.isTopAnchor(R)?L=u.CAP_SHIFT+"em":b.isMiddleAnchor(R)&&(L=u.MID_SHIFT+"em"),L}(C);l.draw(k,"gtitle",{propContainer:C,propName:"title.text",placeholder:C._dfltTitle.plot,attributes:{x:M(C,P),y:A(C,D),"text-anchor":P,dy:D}})},ae.doTraceStyle=function(k){var C,P=k.calcdata,D=[];for(C=0;C<P.length;C++){var F=P[C],R=F[0]||{},L=R.trace||{},I=L._module||{},B=I.arraysToCalcdata;B&&B(F,L);var V=I.editStyle;V&&D.push({fn:V,cd0:R})}if(D.length){for(C=0;C<D.length;C++){var Z=D[C];Z.fn(k,Z.cd0)}e(k),ae.redrawReglTraces(k)}return T.style(k),x.getComponentMethod("legend","draw")(k),T.previousPromises(k)},ae.doColorBars=function(k){return x.getComponentMethod("colorbar","draw")(k),T.previousPromises(k)},ae.layoutReplot=function(k){var C=k.layout;return k.layout=void 0,x.call("_doPlot",k,"",C)},ae.doLegend=function(k){return x.getComponentMethod("legend","draw")(k),T.previousPromises(k)},ae.doTicksRelayout=function(k){return d.draw(k,"redraw"),k._fullLayout._hasOnlyLargeSploms&&(x.subplotsRegistry.splom.updateGrid(k),e(k),ae.redrawReglTraces(k)),ae.drawMainTitle(k),T.previousPromises(k)},ae.doModeBar=function(k){var C=k._fullLayout;i.manage(k);for(var P=0;P<C._basePlotModules.length;P++){var D=C._basePlotModules[P].updateFx;D&&D(k)}return T.previousPromises(k)},ae.doCamera=function(k){for(var C=k._fullLayout,P=C._subplots.gl3d,D=0;D<P.length;D++){var F=C[P[D]];F._scene.setViewport(F)}},ae.drawData=function(k){var C=k._fullLayout;e(k);for(var P=C._basePlotModules,D=0;D<P.length;D++)P[D].plot(k);return ae.redrawReglTraces(k),T.style(k),x.getComponentMethod("shapes","draw")(k),x.getComponentMethod("annotations","draw")(k),x.getComponentMethod("images","draw")(k),C._replotting=!1,T.previousPromises(k)},ae.redrawReglTraces=function(k){var C=k._fullLayout;if(C._has("regl")){var P,D,F=k._fullData,R=[],L=[];for(C._hasOnlyLargeSploms&&C._splomGrid.draw(),P=0;P<F.length;P++){var I=F[P];!0===I.visible&&0!==I._length&&("splom"===I.type?C._splomScenes[I.uid].draw():"scattergl"===I.type?b.pushUnique(R,I.xaxis+I.yaxis):"scatterpolargl"===I.type&&b.pushUnique(L,I.subplot))}for(P=0;P<R.length;P++)(D=C._plots[R[P]])._scene&&D._scene.draw();for(P=0;P<L.length;P++)(D=C[L[P]]._subplot)._scene&&D._scene.draw()}},ae.doAutoRangeAndConstraints=function(k){for(var C,P=d.list(k,"",!0),D={},F=0;F<P.length;F++)if(!D[(C=P[F])._id]){D[C._id]=1,h(k,C),p(k,C);var R=C._matchGroup;if(R)for(var L in R){var I=d.getFromId(k,L);p(k,I,C.range),D[L]=1}}c(k)},ae.finalDraw=function(k){x.getComponentMethod("rangeslider","draw")(k),x.getComponentMethod("rangeselector","draw")(k)},ae.drawMarginPushers=function(k){x.getComponentMethod("legend","draw")(k),x.getComponentMethod("rangeselector","draw")(k),x.getComponentMethod("sliders","draw")(k),x.getComponentMethod("updatemenus","draw")(k),x.getComponentMethod("colorbar","draw")(k)}},{"../components/color":366,"../components/drawing":388,"../components/modebar":429,"../components/titles":464,"../constants/alignment":471,"../lib":503,"../lib/clear_gl_canvases":487,"../plots/cartesian/autorange":553,"../plots/cartesian/axes":554,"../plots/cartesian/constraints":562,"../plots/plots":619,"../registry":638,"@plotly/d3":58}],545:[function(_,oe,ae){"use strict";var m=_("../lib"),x=m.isPlainObject,T=_("./plot_schema"),b=_("../plots/plots"),e=_("../plots/attributes"),o=_("./plot_template"),a=_("./plot_config").dfltConfig;function l(v,g){v=m.extendDeep({},v);var f,w,y=Object.keys(v).sort();function M(D,F,R){if(x(F)&&x(D))l(D,F);else if(Array.isArray(F)&&Array.isArray(D)){var L=o.arrayTemplater({_template:v},R);for(w=0;w<F.length;w++){var I=F[w],B=L.newItem(I)._template;B&&l(B,I)}var V=L.defaultItems();for(w=0;w<V.length;w++)F.push(V[w]._template);for(w=0;w<F.length;w++)delete F[w].templateitemname}}for(f=0;f<y.length;f++){var A=y[f],k=v[A];if(A in g?M(k,g[A],A):g[A]=k,i(A)===A)for(var C in g){var P=i(C);C===P||P!==A||C in v||M(k,g[C],A)}}}function i(v){return v.replace(/[0-9]+$/,"")}function d(v,g,f,w,y){var M=y&&f(y);for(var A in v){var k=v[A],C=c(v,A,w),P=c(v,A,y),D=f(P);if(!D){var F=i(A);F!==A&&(D=f(P=c(v,F,y)))}if(!(M&&M===D||!D||D._noTemplating||"data_array"===D.valType||D.arrayOk&&Array.isArray(k)))if(!D.valType&&x(k))d(k,g,f,C,P);else if(D._isLinkedToArray&&Array.isArray(k))for(var R=!1,L=0,I={},B=0;B<k.length;B++){var V=k[B];if(x(V)){var Z=V.name;if(Z)I[Z]||(d(V,g,f,c(k,L,C),c(k,L,P)),L++,I[Z]=1);else if(!R){var Y=c(v,o.arrayDefaultKey(A),w),ee=c(k,L,C);d(V,g,f,ee,c(k,L,P));var J=m.nestedProperty(g,ee);m.nestedProperty(g,Y).set(J.get()),J.set(null),R=!0}}}else m.nestedProperty(g,C).set(k)}}function u(v,g){return T.getLayoutValObject(v,m.nestedProperty({},g).parts)}function s(v,g){return T.getTraceValObject(v,m.nestedProperty({},g).parts)}function c(v,g,f){return f?Array.isArray(v)?f+"["+g+"]":f+"."+g:g}function h(v){for(var g=0;g<v.length;g++)if(x(v[g]))return!0}function p(v){var g;switch(v.code){case"data":g="The template has no key data.";break;case"layout":g="The template has no key layout.";break;case"missing":g=v.path?"There are no templates for item "+v.path+" with name "+v.templateitemname:"There are no templates for trace "+v.index+", of type "+v.traceType+".";break;case"unused":g=v.path?"The template item at "+v.path+" was not used in constructing the plot.":v.dataCount?"Some of the templates of type "+v.traceType+" were not used. The template has "+v.templateCount+" traces, the data only has "+v.dataCount+" of this type.":"The template has "+v.templateCount+" traces of type "+v.traceType+" but there are none in the data.";break;case"reused":g="Some of the templates of type "+v.traceType+" were used more than once. The template has "+v.templateCount+" traces, the data has "+v.dataCount+" of this type."}return v.msg=g,v}ae.makeTemplate=function(v){v=m.isPlainObject(v)?v:m.getGraphDiv(v),v=m.extendDeep({_context:a},{data:v.data,layout:v.layout}),b.supplyDefaults(v);var g=v.data||[],f=v.layout||{};f._basePlotModules=v._fullLayout._basePlotModules,f._modules=v._fullLayout._modules;var w={data:{},layout:{}};g.forEach(function(L){var I={};d(L,I,s.bind(null,L));var B=m.coerce(L,{},e,"type"),V=w.data[B];V||(V=w.data[B]=[]),V.push(I)}),d(f,w.layout,u.bind(null,f)),delete w.layout.template;var y=f.template;if(x(y)){var M,A,k,C,P,D,F=y.layout;x(F)&&l(F,w.layout);var R=y.data;if(x(R)){for(A in w.data)if(k=R[A],Array.isArray(k)){for(D=(P=w.data[A]).length,C=k.length,M=0;M<D;M++)l(k[M%C],P[M]);for(M=D;M<C;M++)P.push(m.extendDeep({},k[M]))}for(A in R)A in w.data||(w.data[A]=m.extendDeep([],R[A]))}}return w},ae.validateTemplate=function(v,g){var f=m.extendDeep({},{_context:a,data:v.data,layout:v.layout}),w=f.layout||{};x(g)||(g=w.template||{});var y=g.layout,M=g.data,A=[];f.layout=w,f.layout.template=g,b.supplyDefaults(f);var k=f._fullLayout,C=f._fullData,P={};if(x(y)?(function V(Z,Y){for(var ee in Z)if("_"!==ee.charAt(0)&&x(Z[ee])){var J,$=i(ee),Q=[];for(J=0;J<Y.length;J++)Q.push(c(Z,ee,Y[J])),$!==ee&&Q.push(c(Z,$,Y[J]));for(J=0;J<Q.length;J++)P[Q[J]]=1;V(Z[ee],Q)}}(k,["layout"]),function V(Z,Y){for(var ee in Z)if(-1===ee.indexOf("defaults")&&x(Z[ee])){var J=c(Z,ee,Y);P[J]?V(Z[ee],J):A.push({code:"unused",path:J})}}(y,"layout")):A.push({code:"layout"}),x(M)){for(var D,F={},R=0;R<C.length;R++){var L=C[R];F[D=L.type]=(F[D]||0)+1,L._fullInput._template||A.push({code:"missing",index:L._fullInput.index,traceType:D})}for(D in M){var I=M[D].length,B=F[D]||0;I>B?A.push({code:"unused",traceType:D,templateCount:I,dataCount:B}):B>I&&A.push({code:"reused",traceType:D,templateCount:I,dataCount:B})}}else A.push({code:"data"});if(function V(Z,Y){for(var ee in Z)if("_"!==ee.charAt(0)){var J=Z[ee],$=c(Z,ee,Y);x(J)?(Array.isArray(Z)&&!1===J._template&&J.templateitemname&&A.push({code:"missing",path:$,templateitemname:J.templateitemname}),V(J,$)):Array.isArray(J)&&h(J)&&V(J,$)}}({data:C,layout:k},""),A.length)return A.map(p)}},{"../lib":503,"../plots/attributes":550,"../plots/plots":619,"./plot_config":541,"./plot_schema":542,"./plot_template":543}],546:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("./plot_api"),T=_("../plots/plots"),b=_("../lib"),e=_("../snapshot/helpers"),o=_("../snapshot/tosvg"),a=_("../snapshot/svgtoimg"),l=_("../version").version,i={format:{valType:"enumerated",values:["png","jpeg","webp","svg","full-json"],dflt:"png"},width:{valType:"number",min:1},height:{valType:"number",min:1},scale:{valType:"number",min:0,dflt:1},setBackground:{valType:"any",dflt:!1},imageDataOnly:{valType:"boolean",dflt:!1}};oe.exports=function(d,u){var s,c,h,p;function v(B){return!(B in u)||b.validate(u[B],i[B])}if(u=u||{},b.isPlainObject(d)?(s=d.data||[],c=d.layout||{},h=d.config||{},p={}):(d=b.getGraphDiv(d),s=b.extendDeep([],d.data),c=b.extendDeep({},d.layout),h=d._context,p=d._fullLayout||{}),!v("width")&&null!==u.width||!v("height")&&null!==u.height)throw new Error("Height and width should be pixel values.");if(!v("format"))throw new Error("Export format is not "+b.join2(i.format.values,", "," or ")+".");var g={};function f(B,V){return b.coerce(u,g,i,B,V)}var w=f("format"),y=f("width"),M=f("height"),A=f("scale"),k=f("setBackground"),C=f("imageDataOnly"),P=document.createElement("div");P.style.position="absolute",P.style.left="-5000px",document.body.appendChild(P);var D=b.extendFlat({},c);y?D.width=y:null===u.width&&m(p.width)&&(D.width=p.width),M?D.height=M:null===u.height&&m(p.height)&&(D.height=p.height);var F=b.extendFlat({},h,{_exportedPlot:!0,staticPlot:!0,setBackground:k}),R=e.getRedrawFunc(P);function L(){return new Promise(function(B){setTimeout(B,e.getDelay(P._fullLayout))})}function I(){return new Promise(function(B,V){var Z=o(P,w,A),Y=P._fullLayout.width,ee=P._fullLayout.height;function J(){x.purge(P),document.body.removeChild(P)}if("full-json"===w){var $=T.graphJson(P,!1,"keepdata","object",!0,!0);return $.version=l,$=JSON.stringify($),J(),B(C?$:e.encodeJSON($))}if(J(),"svg"===w)return B(C?Z:e.encodeSVG(Z));var Q=document.createElement("canvas");Q.id=b.randstr(),a({format:w,width:Y,height:ee,scale:A,canvas:Q,svg:Z,promise:!0}).then(B).catch(V)})}return new Promise(function(B,V){x.newPlot(P,s,D,F).then(R).then(L).then(I).then(function(Z){var Y;B((Y=Z,C?Y.replace(e.IMAGE_URL_PREFIX,""):Y))}).catch(function(Z){V(Z)})})}},{"../lib":503,"../plots/plots":619,"../snapshot/helpers":642,"../snapshot/svgtoimg":644,"../snapshot/tosvg":646,"../version":1119,"./plot_api":540,"fast-isnumeric":190}],547:[function(_,oe,ae){"use strict";var m=_("../lib"),x=_("../plots/plots"),T=_("./plot_schema"),b=_("./plot_config").dfltConfig,e=m.isPlainObject,o=Array.isArray,a=m.isArrayOrTypedArray;function l(g,f,w,y,M,A){A=A||[];for(var k=Object.keys(g),C=0;C<k.length;C++){var P=k[C];if("transforms"!==P){var D=A.slice();D.push(P);var F=g[P],R=f[P],L=h(w,P),I=(L||{}).valType,B="info_array"===I,V="colorscale"===I,Z=(L||{}).items;if(c(w,P))if(e(F)&&e(R)&&"any"!==I)l(F,R,L,y,M,D);else if(B&&o(F)){F.length>R.length&&y.push(s("unused",M,D.concat(R.length)));var Y,ee,$,Q,se=R.length,j=Array.isArray(Z);if(j&&(se=Math.min(se,Z.length)),2===L.dimensions)for(ee=0;ee<se;ee++)if(o(F[ee])){F[ee].length>R[ee].length&&y.push(s("unused",M,D.concat(ee,R[ee].length)));var G=R[ee].length;for(Y=0;Y<(j?Math.min(G,Z[ee].length):G);Y++)Q=R[ee][Y],m.validate($=F[ee][Y],j?Z[ee][Y]:Z)?Q!==$&&Q!==+$&&y.push(s("dynamic",M,D.concat(ee,Y),$,Q)):y.push(s("value",M,D.concat(ee,Y),$))}else y.push(s("array",M,D.concat(ee),F[ee]));else for(ee=0;ee<se;ee++)Q=R[ee],m.validate($=F[ee],j?Z[ee]:Z)?Q!==$&&Q!==+$&&y.push(s("dynamic",M,D.concat(ee),$,Q)):y.push(s("value",M,D.concat(ee),$))}else if(L.items&&!B&&o(F)){var W,ie,q=Z[Object.keys(Z)[0]],te=[];for(W=0;W<R.length;W++){var ne=R[W]._index||W;if((ie=D.slice()).push(ne),e(F[ne])&&e(R[W])){te.push(ne);var le=F[ne],ue=R[W];e(le)&&!1!==le.visible&&!1===ue.visible?y.push(s("invisible",M,ie)):l(le,ue,q,y,M,ie)}}for(W=0;W<F.length;W++)(ie=D.slice()).push(W),e(F[W])?-1===te.indexOf(W)&&y.push(s("unused",M,ie)):y.push(s("object",M,ie,F[W]))}else!e(F)&&e(R)?y.push(s("object",M,D,F)):a(F)||!a(R)||B||V?P in f?m.validate(F,L)?"enumerated"===L.valType&&(L.coerceNumber&&F!==+R||F!==R)&&y.push(s("dynamic",M,D,F,R)):y.push(s("value",M,D,F)):y.push(s("unused",M,D,F)):y.push(s("array",M,D,F));else y.push(s("schema",M,D))}}return y}function i(g,f){for(var w=g.layout.layoutAttributes,y=0;y<f.length;y++){var M=f[y],A=g.traces[M.type],k=A.layoutAttributes;k&&m.extendFlat(M.subplot?w[A.attributes.subplot.dflt]:w,k)}return w}oe.exports=function(g,f){void 0===g&&(g=[]),void 0===f&&(f={});var w,y,M=T.get(),A=[],k={_context:m.extendFlat({},b)};o(g)?(k.data=m.extendDeep([],g),w=g):(k.data=[],w=[],A.push(s("array","data"))),e(f)?(k.layout=m.extendDeep({},f),y=f):(k.layout={},y={},arguments.length>1&&A.push(s("object","layout"))),x.supplyDefaults(k);for(var C=k._fullData,P=w.length,D=0;D<P;D++){var F=w[D],R=["data",D];if(e(F)){var L=C[D],I=L.type,B=M.traces[I].attributes;B.type={valType:"enumerated",values:[I]},!1===L.visible&&!1!==F.visible&&A.push(s("invisible",R)),l(F,L,B,A,R);var V=F.transforms,Z=L.transforms;if(V){o(V)||A.push(s("array",R,["transforms"])),R.push("transforms");for(var Y=0;Y<V.length;Y++){var ee=["transforms",Y],J=V[Y].type;if(e(V[Y])){var $=M.transforms[J]?M.transforms[J].attributes:{};$.type={valType:"enumerated",values:Object.keys(M.transforms)},l(V[Y],Z[Y],$,A,R,ee)}else A.push(s("object",R,ee))}}}else A.push(s("object",R))}return l(y,k._fullLayout,i(M,C),A,"layout"),0===A.length?void 0:A};var d={object:function(g,f){return("layout"===g&&""===f?"The layout argument":"data"===g[0]&&""===f?"Trace "+g[1]+" in the data argument":u(g)+"key "+f)+" must be linked to an object container"},array:function(g,f){return("data"===g?"The data argument":u(g)+"key "+f)+" must be linked to an array container"},schema:function(g,f){return u(g)+"key "+f+" is not part of the schema"},unused:function(g,f,w){var y=e(w)?"container":"key";return u(g)+y+" "+f+" did not get coerced"},dynamic:function(g,f,w,y){return[u(g)+"key",f,"(set to '"+w+"')","got reset to","'"+y+"'","during defaults."].join(" ")},invisible:function(g,f){return(f?u(g)+"item "+f:"Trace "+g[1])+" got defaulted to be not visible"},value:function(g,f,w){return[u(g)+"key "+f,"is set to an invalid value ("+w+")"].join(" ")}};function u(g){return o(g)?"In data trace "+g[1]+", ":"In "+g+", "}function s(g,f,w,y,M){var A,k;w=w||"",o(f)?(A=f[0],k=f[1]):(A=f,k=null);var C=function(D){if(!o(D))return String(D);for(var F="",R=0;R<D.length;R++){var L=D[R];"number"==typeof L?F=F.substr(0,F.length-1)+"["+L+"]":F+=L,R<D.length-1&&(F+=".")}return F}(w),P=d[g](f,C,y,M);return m.log(P),{code:g,container:A,trace:k,path:w,astr:C,msg:P}}function c(g,f){var w=v(f),y=w.keyMinusId;return!!(y in g&&g[y]._isSubplotObj&&w.id)||f in g}function h(g,f){return f in g?g[f]:g[v(f).keyMinusId]}var p=m.counterRegex("([a-z]+)");function v(g){var f=g.match(p);return{keyMinusId:f&&f[1],id:f&&f[2]}}},{"../lib":503,"../plots/plots":619,"./plot_config":541,"./plot_schema":542}],548:[function(_,oe,ae){"use strict";oe.exports={mode:{valType:"enumerated",dflt:"afterall",values:["immediate","next","afterall"]},direction:{valType:"enumerated",values:["forward","reverse"],dflt:"forward"},fromcurrent:{valType:"boolean",dflt:!1},frame:{duration:{valType:"number",min:0,dflt:500},redraw:{valType:"boolean",dflt:!0}},transition:{duration:{valType:"number",min:0,dflt:500,editType:"none"},easing:{valType:"enumerated",dflt:"cubic-in-out",values:["linear","quad","cubic","sin","exp","circle","elastic","back","bounce","linear-in","quad-in","cubic-in","sin-in","exp-in","circle-in","elastic-in","back-in","bounce-in","linear-out","quad-out","cubic-out","sin-out","exp-out","circle-out","elastic-out","back-out","bounce-out","linear-in-out","quad-in-out","cubic-in-out","sin-in-out","exp-in-out","circle-in-out","elastic-in-out","back-in-out","bounce-in-out"],editType:"none"},ordering:{valType:"enumerated",values:["layout first","traces first"],dflt:"layout first",editType:"none"}}}},{}],549:[function(_,oe,ae){"use strict";var m=_("../lib"),x=_("../plot_api/plot_template");oe.exports=function(T,b,e){var o,a,l=e.name,i=e.inclusionAttr||"visible",d=b[l],u=m.isArrayOrTypedArray(T[l])?T[l]:[],s=b[l]=[],c=x.arrayTemplater(b,l,i);for(o=0;o<u.length;o++){var h=u[o];m.isPlainObject(h)?a=c.newItem(h):(a=c.newItem({}))[i]=!1,a._index=o,!1!==a[i]&&e.handleItemDefaults(h,a,b,e),s.push(a)}var p=c.defaultItems();for(o=0;o<p.length;o++)(a=p[o])._index=s.length,e.handleItemDefaults({},a,b,e,{}),s.push(a);if(m.isArrayOrTypedArray(d)){var v=Math.min(d.length,s.length);for(o=0;o<v;o++)m.relinkPrivateKeys(s[o],d[o])}return s}},{"../lib":503,"../plot_api/plot_template":543}],550:[function(_,oe,ae){"use strict";var m=_("./font_attributes"),x=_("../components/fx/attributes");oe.exports={type:{valType:"enumerated",values:[],dflt:"scatter",editType:"calc+clearAxisTypes",_noTemplating:!0},visible:{valType:"enumerated",values:[!0,!1,"legendonly"],dflt:!0,editType:"calc"},showlegend:{valType:"boolean",dflt:!0,editType:"style"},legendgroup:{valType:"string",dflt:"",editType:"style"},legendgrouptitle:{text:{valType:"string",dflt:"",editType:"style"},font:m({editType:"style"}),editType:"style"},legendrank:{valType:"number",dflt:1e3,editType:"style"},opacity:{valType:"number",min:0,max:1,dflt:1,editType:"style"},name:{valType:"string",editType:"style"},uid:{valType:"string",editType:"plot",anim:!0},ids:{valType:"data_array",editType:"calc",anim:!0},customdata:{valType:"data_array",editType:"calc"},meta:{valType:"any",arrayOk:!0,editType:"plot"},selectedpoints:{valType:"any",editType:"calc"},hoverinfo:{valType:"flaglist",flags:["x","y","z","text","name"],extras:["all","none","skip"],arrayOk:!0,dflt:"all",editType:"none"},hoverlabel:x.hoverlabel,stream:{token:{valType:"string",noBlank:!0,strict:!0,editType:"calc"},maxpoints:{valType:"number",min:0,max:1e4,dflt:500,editType:"calc"},editType:"calc"},transforms:{_isLinkedToArray:"transform",editType:"calc"},uirevision:{valType:"any",editType:"none"}}},{"../components/fx/attributes":397,"./font_attributes":585}],551:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../lib"),T=x.dateTime2ms,b=x.incrementMonth,e=_("../../constants/numerical").ONEAVGMONTH;oe.exports=function(o,a,l,i){if("date"!==a.type)return{vals:i};var d=o[l+"periodalignment"];if(!d)return{vals:i};var u,s=o[l+"period"];if(m(s)){if((s=+s)<=0)return{vals:i}}else if("string"==typeof s&&"M"===s.charAt(0)){var c=+s.substring(1);if(!(c>0&&Math.round(c)===c))return{vals:i};u=c}for(var h=a.calendar,p="start"===d,v="end"===d,f=T(o[l+"period0"],h)||0,w=[],y=[],M=[],A=i.length,k=0;k<A;k++){var C,P,D,F=i[k];if(u){for(C=Math.round((F-f)/(u*e)),D=b(f,u*C,h);D>F;)D=b(D,-u,h);for(;D<=F;)D=b(D,u,h);P=b(D,-u,h)}else{for(D=f+(C=Math.round((F-f)/s))*s;D>F;)D-=s;for(;D<=F;)D+=s;P=D-s}w[k]=p?P:v?D:(P+D)/2,y[k]=P,M[k]=D}return{vals:w,starts:y,ends:M}}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],552:[function(_,oe,ae){"use strict";oe.exports={xaxis:{valType:"subplotid",dflt:"x",editType:"calc+clearAxisTypes"},yaxis:{valType:"subplotid",dflt:"y",editType:"calc+clearAxisTypes"}}},{}],553:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("../../lib"),b=_("../../constants/numerical").FP_SAFE,e=_("../../registry"),o=_("../../components/drawing"),a=_("./axis_ids"),l=a.getFromId,i=a.isLinked;function d(y,M){var A,k,C=[],P=y._fullLayout,D=s(P,M,0),F=s(P,M,1),R=c(y,M),L=R.min,I=R.max;if(0===L.length||0===I.length)return T.simpleMap(M.range,M.r2l);var B=L[0].val,V=I[0].val;for(A=1;A<L.length&&B===V;A++)B=Math.min(B,L[A].val);for(A=1;A<I.length&&B===V;A++)V=Math.max(V,I[A].val);var Z=!1;if(M.range){var Y=T.simpleMap(M.range,M.r2l);Z=Y[1]<Y[0]}"reversed"===M.autorange&&(Z=!0,M.autorange=!0);var ee,J,$,Q,se,j,G=M.rangemode,W="tozero"===G,ie="nonnegative"===G,q=M._length,te=q/10,ne=0;for(A=0;A<L.length;A++)for(ee=L[A],k=0;k<I.length;k++)(j=(J=I[k]).val-ee.val-u(M,ee.val,J.val))>0&&((se=q-D(ee)-F(J))>te?j/se>ne&&($=ee,Q=J,ne=j/se):j/q>ne&&($={val:ee.val,nopad:1},Q={val:J.val,nopad:1},ne=j/q));if(B===V){var le=B-1,ue=B+1;if(W)if(0===B)C=[0,1];else{var de=(B>0?I:L).reduce(function(be,ge){return Math.max(be,F(ge))},0),he=B/(1-Math.min(.5,de/q));C=B>0?[0,he]:[he,0]}else C=ie?[Math.max(0,le),Math.max(1,ue)]:[le,ue]}else W?($.val>=0&&($={val:0,nopad:1}),Q.val<=0&&(Q={val:0,nopad:1})):ie&&($.val-ne*D($)<0&&($={val:0,nopad:1}),Q.val<=0&&(Q={val:1,nopad:1})),ne=(Q.val-$.val-u(M,ee.val,J.val))/(q-D($)-F(Q)),C=[$.val-ne*D($),Q.val+ne*F(Q)];return Z&&C.reverse(),T.simpleMap(C,M.l2r||Number)}function u(y,M,A){var k=0;if(y.rangebreaks)for(var C=y.locateBreaks(M,A),P=0;P<C.length;P++){var D=C[P];k+=D.max-D.min}return k}function s(y,M,A){var k=.05*M._length,C=M._anchorAxis||{};if(-1!==(M.ticklabelposition||"").indexOf("inside")||-1!==(C.ticklabelposition||"").indexOf("inside")){var P="reversed"===M.autorange;if(!P){var D=T.simpleMap(M.range,M.r2l);P=D[1]<D[0]}P&&(A=!A)}var F=0;return i(y,M._id)||(F=function(R,L,I){var B=0,V="x"===L._id.charAt(0);for(var Z in R._plots){var Y=R._plots[Z];if(L._id===Y.xaxis._id||L._id===Y.yaxis._id){var ee=(V?Y.yaxis:Y.xaxis)||{};if(-1!==(ee.ticklabelposition||"").indexOf("inside")&&(!I&&("left"===ee.side||"bottom"===ee.side)||I&&("top"===ee.side||"right"===ee.side))){if(ee._vals){var J=T.deg2rad(ee._tickAngles[ee._id+"tick"]||0),$=Math.abs(Math.cos(J)),Q=Math.abs(Math.sin(J));ee._vals[0].bb||ee._selections[ee._id+"tick"].each(function(q){var te=m.select(this);te.select(".text-math-group").empty()&&(q.bb=o.bBox(te.node()))});for(var j=0;j<ee._vals.length;j++){var G=ee._vals[j].bb;if(G){var W=6+G.width,ie=6+G.height;B=Math.max(B,V?Math.max(W*$,ie*Q):Math.max(ie*$,W*Q))}}}"inside"===ee.ticks&&"inside"===ee.ticklabelposition&&(B+=ee.ticklen||0)}}}return B}(y,M,A)),k=Math.max(F,k),"domain"===M.constrain&&M._inputDomain&&(k*=(M._inputDomain[1]-M._inputDomain[0])/(M.domain[1]-M.domain[0])),function(R){return R.nopad?0:R.pad+(R.extrapad?k:F)}}function c(y,M,A){var k,C,P,D=M._id,R=y._fullLayout,L=[],I=[];function B(J,$){for(k=0;k<$.length;k++){var Q=J[$[k]],se=(Q._extremes||{})[D];if(!0===Q.visible&&se){for(C=0;C<se.min.length;C++)h(L,(P=se.min[C]).val,P.pad,{extrapad:P.extrapad});for(C=0;C<se.max.length;C++)p(I,(P=se.max[C]).val,P.pad,{extrapad:P.extrapad})}}}if(B(y._fullData,M._traceIndices),B(R.annotations||[],M._annIndices||[]),B(R.shapes||[],M._shapeIndices||[]),M._matchGroup&&!A)for(var V in M._matchGroup)if(V!==M._id){var Z=l(y,V),Y=c(y,Z,!0),ee=M._length/Z._length;for(C=0;C<Y.min.length;C++)h(L,(P=Y.min[C]).val,P.pad*ee,{extrapad:P.extrapad});for(C=0;C<Y.max.length;C++)p(I,(P=Y.max[C]).val,P.pad*ee,{extrapad:P.extrapad})}return{min:L,max:I}}function h(y,M,A,k){v(y,M,A,k,f)}function p(y,M,A,k){v(y,M,A,k,w)}function v(y,M,A,k,C){for(var P=k.tozero,D=k.extrapad,F=!0,R=0;R<y.length&&F;R++){var L=y[R];if(C(L.val,M)&&L.pad>=A&&(L.extrapad||!D)){F=!1;break}C(M,L.val)&&L.pad<=A&&(D||!L.extrapad)&&(y.splice(R,1),R--)}if(F){var I=P&&0===M;y.push({val:M,pad:I?0:A,extrapad:!I&&D})}}function g(y){return x(y)&&Math.abs(y)<b}function f(y,M){return y<=M}function w(y,M){return y>=M}oe.exports={getAutoRange:d,makePadFn:s,doAutoRange:function(y,M,A){if(M.setScale(),M.autorange){M.range=A?A.slice():d(y,M),M._r=M.range.slice(),M._rl=T.simpleMap(M._r,M.r2l);var k=M._input,C={};C[M._attr+".range"]=M.range,C[M._attr+".autorange"]=M.autorange,e.call("_storeDirectGUIEdit",y.layout,y._fullLayout._preGUI,C),k.range=M.range.slice(),k.autorange=M.autorange}var P=M._anchorAxis;if(P&&P.rangeslider){var D=P.rangeslider[M._name];D&&"auto"===D.rangemode&&(D.range=d(y,M)),P._input.rangeslider[M._name]=T.extendFlat({},D)}},findExtremes:function(y,M,A){A||(A={}),y._m||y.setScale();var k,C,P,D,F,R,L,I,B,V=[],Z=[],Y=M.length,ee=A.padded||!1,J=A.tozero&&("linear"===y.type||"-"===y.type),$="log"===y.type,Q=!1,se=A.vpadLinearized||!1;function j(ue){if(Array.isArray(ue))return Q=!0,function(he){return Math.max(Number(ue[he]||0),0)};var de=Math.max(Number(ue||0),0);return function(){return de}}var G=j((y._m>0?A.ppadplus:A.ppadminus)||A.ppad||0),W=j((y._m>0?A.ppadminus:A.ppadplus)||A.ppad||0),ie=j(A.vpadplus||A.vpad),q=j(A.vpadminus||A.vpad);if(!Q){if(I=1/0,B=-1/0,$)for(k=0;k<Y;k++)(C=M[k])<I&&C>0&&(I=C),C>B&&C<b&&(B=C);else for(k=0;k<Y;k++)(C=M[k])<I&&C>-b&&(I=C),C>B&&C<b&&(B=C);M=[I,B],Y=2}var te={tozero:J,extrapad:ee};function ne(ue){x(P=M[ue])&&(R=G(ue),L=W(ue),se?(D=y.c2l(P)-q(ue),F=y.c2l(P)+ie(ue)):(I=P-q(ue),B=P+ie(ue),$&&I<B/10&&(I=B/10),D=y.c2l(I),F=y.c2l(B)),J&&(D=Math.min(0,D),F=Math.max(0,F)),g(D)&&h(V,D,L,te),g(F)&&p(Z,F,R,te))}var le=Math.min(6,Y);for(k=0;k<le;k++)ne(k);for(k=Y-1;k>=le;k--)ne(k);return{min:V,max:Z,opts:A}},concatExtremes:c}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../../registry":638,"./axis_ids":558,"@plotly/d3":58,"fast-isnumeric":190}],554:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("../../plots/plots"),b=_("../../registry"),e=_("../../lib"),o=e.strTranslate,a=_("../../lib/svg_text_utils"),l=_("../../components/titles"),i=_("../../components/color"),d=_("../../components/drawing"),u=_("./layout_attributes"),s=_("./clean_ticks"),c=_("../../constants/numerical"),h=c.ONEMAXYEAR,p=c.ONEAVGYEAR,v=c.ONEMINYEAR,g=c.ONEMAXQUARTER,f=c.ONEAVGQUARTER,w=c.ONEMINQUARTER,y=c.ONEMAXMONTH,M=c.ONEAVGMONTH,A=c.ONEMINMONTH,k=c.ONEWEEK,C=c.ONEDAY,P=C/2,D=c.ONEHOUR,F=c.ONEMIN,R=c.ONESEC,L=c.MINUS_SIGN,I=c.BADNUM,B={K:"zeroline"},V={K:"gridline",L:"path"},Z={K:"tick",L:"path"},Y={K:"tick",L:"text"},ee=_("../../constants/alignment"),J=ee.MID_SHIFT,$=ee.CAP_SHIFT,Q=ee.LINE_SPACING,se=ee.OPPOSITE_SIDE,j=oe.exports={};j.setConvert=_("./set_convert");var G=_("./axis_autotype"),W=_("./axis_ids"),ie=W.idSort,q=W.isLinked;j.id2name=W.id2name,j.name2id=W.name2id,j.cleanId=W.cleanId,j.list=W.list,j.listIds=W.listIds,j.getFromId=W.getFromId,j.getFromTrace=W.getFromTrace;var te=_("./autorange");function ne(Ze){var Qe=1e-4*(Ze[1]-Ze[0]);return[Ze[0]-Qe,Ze[1]+Qe]}j.getAutoRange=te.getAutoRange,j.findExtremes=te.findExtremes,j.coerceRef=function(Ze,Qe,qe,it,Ie,ze){var Ve=it.charAt(it.length-1),Be=qe._fullLayout._subplots[Ve+"axis"],at=it+"ref",gt={};return Ie||(Ie=Be[0]||("string"==typeof ze?ze:ze[0])),ze||(ze=Ie),Be=Be.concat(Be.map(function(wt){return wt+" domain"})),gt[at]={valType:"enumerated",values:Be.concat(ze?"string"==typeof ze?[ze]:ze:[]),dflt:Ie},e.coerce(Ze,Qe,gt,at)},j.getRefType=function(Ze){return void 0===Ze?Ze:"paper"===Ze?"paper":"pixel"===Ze?"pixel":/( domain)$/.test(Ze)?"domain":"range"},j.coercePosition=function(Ze,Qe,qe,it,Ie,ze){var Ve,Be;if("range"!==j.getRefType(it))Ve=e.ensureNumber,Be=qe(Ie,ze);else{var at=j.getFromId(Qe,it);Be=qe(Ie,ze=at.fraction2r(ze)),Ve=at.cleanPos}Ze[Ie]=Ve(Be)},j.cleanPosition=function(Ze,Qe,qe){return("paper"===qe||"pixel"===qe?e.ensureNumber:j.getFromId(Qe,qe).cleanPos)(Ze)},j.redrawComponents=function(Ze,Qe){Qe=Qe||j.listIds(Ze);var qe=Ze._fullLayout;function it(Ie,ze,Ve,Be){for(var at=b.getComponentMethod(Ie,ze),gt={},wt=0;wt<Qe.length;wt++)for(var _t=qe[j.id2name(Qe[wt])][Ve],Rt=0;Rt<_t.length;Rt++){var yt=_t[Rt];if(!gt[yt]&&(at(Ze,yt),gt[yt]=1,Be))return}}it("annotations","drawOne","_annIndices"),it("shapes","drawOne","_shapeIndices"),it("images","draw","_imgIndices",!0)};var le=j.getDataConversions=function(Ze,Qe,qe,it){var Ie,ze="x"===qe||"y"===qe||"z"===qe?qe:it;if(Array.isArray(ze)){if(Ie={type:G(it,void 0,{autotypenumbers:Ze._fullLayout.autotypenumbers}),_categories:[]},j.setConvert(Ie),"category"===Ie.type)for(var Ve=0;Ve<it.length;Ve++)Ie.d2c(it[Ve])}else Ie=j.getFromTrace(Ze,Qe,ze);return Ie?{d2c:Ie.d2c,c2d:Ie.c2d}:"ids"===ze?{d2c:de,c2d:de}:{d2c:ue,c2d:ue}};function ue(Ze){return+Ze}function de(Ze){return String(Ze)}function he(Ze){return+Ze.substring(1)}j.getDataToCoordFunc=function(Ze,Qe,qe,it){return le(Ze,Qe,qe,it).d2c},j.counterLetter=function(Ze){var Qe=Ze.charAt(0);return"x"===Qe?"y":"y"===Qe?"x":void 0},j.minDtick=function(Ze,Qe,qe,it){-1===["log","category","multicategory"].indexOf(Ze.type)&&it?void 0===Ze._minDtick?(Ze._minDtick=Qe,Ze._forceTick0=qe):Ze._minDtick&&((Ze._minDtick/Qe+1e-6)%1<2e-6&&((qe-Ze._forceTick0)/Qe%1+1.000001)%1<2e-6?(Ze._minDtick=Qe,Ze._forceTick0=qe):((Qe/Ze._minDtick+1e-6)%1>2e-6||((qe-Ze._forceTick0)/Ze._minDtick%1+1.000001)%1>2e-6)&&(Ze._minDtick=0)):Ze._minDtick=0},j.saveRangeInitial=function(Ze,Qe){for(var qe=j.list(Ze,"",!0),it=!1,Ie=0;Ie<qe.length;Ie++){var ze=qe[Ie],Ve=void 0===ze._rangeInitial;(Ve&&!1===ze.autorange||Qe&&(Ve||ze.range[0]!==ze._rangeInitial[0]||ze.range[1]!==ze._rangeInitial[1]))&&(ze._rangeInitial=ze.range.slice(),it=!0)}return it},j.saveShowSpikeInitial=function(Ze,Qe){for(var qe=j.list(Ze,"",!0),it=!1,Ie="on",ze=0;ze<qe.length;ze++){var Ve=qe[ze],Be=void 0===Ve._showSpikeInitial;(Be||Qe&&(Be||Ve.showspikes!==Ve._showspikes))&&(Ve._showSpikeInitial=Ve.showspikes,it=!0),"on"!==Ie||Ve.showspikes||(Ie="off")}return Ze._fullLayout._cartesianSpikesEnabled=Ie,it},j.autoBin=function(Ze,Qe,qe,it,Ie,ze){var Ve,Be=e.aggNums(Math.min,null,Ze),at=e.aggNums(Math.max,null,Ze);if("category"===Qe.type||"multicategory"===Qe.type)return{start:Be-.5,end:at+.5,size:Math.max(1,Math.round(ze)||1),_dataSpan:at-Be};if(Ie||(Ie=Qe.calendar),Ve="log"===Qe.type?{type:"linear",range:[Be,at]}:{type:Qe.type,range:e.simpleMap([Be,at],Qe.c2r,0,Ie),calendar:Ie},j.setConvert(Ve),ze=ze&&s.dtick(ze,Ve.type))Ve.dtick=ze,Ve.tick0=s.tick0(void 0,Ve.type,Ie);else{var gt;if(qe)gt=(at-Be)/qe;else{var wt=e.distinctVals(Ze),_t=Math.pow(10,Math.floor(Math.log(wt.minDiff)/Math.LN10)),Rt=_t*e.roundUp(wt.minDiff/_t,[.9,1.9,4.9,9.9],!0);gt=Math.max(Rt,2*e.stdev(Ze)/Math.pow(Ze.length,it?.25:.4)),x(gt)||(gt=1)}j.autoTicks(Ve,gt)}var yt,Vt=Ve.dtick,Nt=j.tickIncrement(j.tickFirst(Ve),Vt,"reverse",Ie);if("number"==typeof Vt)yt=(Nt=function(rt,Tt,Ut,Wt,sn){var He=0,vt=0,Lt=0,Gt=0;function Kt(wn){return(1+100*(wn-rt)/Ut.dtick)%100<2}for(var _n=0;_n<Tt.length;_n++)Tt[_n]%1==0?Lt++:x(Tt[_n])||Gt++,Kt(Tt[_n])&&He++,Kt(Tt[_n]+Ut.dtick/2)&&vt++;var en=Tt.length-Gt;if(Lt===en&&"date"!==Ut.type)Ut.dtick<1?rt=Wt-.5*Ut.dtick:(rt-=.5)+Ut.dtick<Wt&&(rt+=Ut.dtick);else if(vt<.1*en&&(He>.3*en||Kt(Wt)||Kt(sn))){var on=Ut.dtick/2;rt+=rt+on<Wt?on:-on}return rt}(Nt,Ze,Ve,Be,at))+(1+Math.floor((at-Nt)/Vt))*Vt;else for("M"===Ve.dtick.charAt(0)&&(Nt=function(rt,Tt,Ut,Wt,sn){var He=e.findExactDates(Tt,sn);if(He.exactDays>.8){var vt=Number(Ut.substr(1));He.exactYears>.8&&vt%12==0?rt=j.tickIncrement(rt,"M6","reverse")+1.5*C:He.exactMonths>.8?rt=j.tickIncrement(rt,"M1","reverse")+15.5*C:rt-=P;var Lt=j.tickIncrement(rt,Ut);if(Lt<=Wt)return Lt}return rt}(Nt,Ze,Vt,Be,Ie)),yt=Nt;yt<=at;)yt=j.tickIncrement(yt,Vt,!1,Ie);return{start:Qe.c2r(Nt,0,Ie),end:Qe.c2r(yt,0,Ie),size:Vt,_dataSpan:at-Be}},j.prepTicks=function(Ze,Qe){var qe=e.simpleMap(Ze.range,Ze.r2l,void 0,void 0,Qe);if(Ze._dtickInit=Ze.dtick,Ze._tick0Init=Ze.tick0,"auto"===Ze.tickmode||!Ze.dtick){var it,Ie=Ze.nticks;Ie||("category"===Ze.type||"multicategory"===Ze.type?(it=Ze.tickfont?e.bigFont(Ze.tickfont.size||12):15,Ie=Ze._length/it):(it="y"===Ze._id.charAt(0)?40:80,Ie=e.constrain(Ze._length/it,4,9)+1),"radialaxis"===Ze._name&&(Ie*=2)),"array"===Ze.tickmode&&(Ie*=100),Ze._roughDTick=Math.abs(qe[1]-qe[0])/Ie,j.autoTicks(Ze,Ze._roughDTick),Ze._minDtick>0&&Ze.dtick<2*Ze._minDtick&&(Ze.dtick=Ze._minDtick,Ze.tick0=Ze.l2r(Ze._forceTick0))}"period"===Ze.ticklabelmode&&function(ze){var Ve;function Be(){return!(x(ze.dtick)||"M"!==ze.dtick.charAt(0))}var at=Be(),gt=j.getTickFormat(ze);if(gt){var wt=ze._dtickInit!==ze.dtick;/%[fLQsSMX]/.test(gt)||(/%[HI]/.test(gt)?(Ve=D,wt&&!at&&ze.dtick<D&&(ze.dtick=D)):/%p/.test(gt)?(Ve=P,wt&&!at&&ze.dtick<P&&(ze.dtick=P)):/%[Aadejuwx]/.test(gt)?(Ve=C,wt&&!at&&ze.dtick<C&&(ze.dtick=C)):/%[UVW]/.test(gt)?(Ve=k,wt&&!at&&ze.dtick<k&&(ze.dtick=k)):/%[Bbm]/.test(gt)?(Ve=M,wt&&(at?he(ze.dtick)<1:ze.dtick<A)&&(ze.dtick="M1")):/%[q]/.test(gt)?(Ve=f,wt&&(at?he(ze.dtick)<3:ze.dtick<w)&&(ze.dtick="M3")):/%[Yy]/.test(gt)&&(Ve=p,wt&&(at?he(ze.dtick)<12:ze.dtick<v)&&(ze.dtick="M12")))}(at=Be())&&ze.tick0===ze._dowTick0&&(ze.tick0=ze._rawTick0),ze._definedDelta=Ve}(Ze),Ze.tick0||(Ze.tick0="date"===Ze.type?"2000-01-01":0),"date"===Ze.type&&Ze.dtick<.1&&(Ze.dtick=.1),Te(Ze)},j.calcTicks=function(Ze,Qe){j.prepTicks(Ze,Qe);var qe=e.simpleMap(Ze.range,Ze.r2l,void 0,void 0,Qe);if("array"===Ze.tickmode)return function(pn){var En=pn.tickvals,Un=pn.ticktext,In=new Array(En.length),sr=ne(e.simpleMap(pn.range,pn.r2l)),fr=Math.min(sr[0],sr[1]),rr=Math.max(sr[0],sr[1]),qr=0;Array.isArray(Un)||(Un=[]);var ti="category"===pn.type?pn.d2l_noadd:pn.d2l;"log"===pn.type&&"L"!==String(pn.dtick).charAt(0)&&(pn.dtick="L"+Math.pow(10,Math.floor(Math.min(pn.range[0],pn.range[1]))-1));for(var Ar=0;Ar<En.length;Ar++){var pr=ti(En[Ar]);pr>fr&&pr<rr&&(In[qr]=void 0===Un[Ar]?j.tickText(pn,pr):Le(pn,pr,String(Un[Ar])),qr++)}return qr<En.length&&In.splice(qr,En.length-qr),pn.rangebreaks&&(In=In.filter(function(Fn){return pn.maskBreaks(Fn.x)!==I})),In}(Ze);var it=ne(qe),Ie=it[0],ze=it[1],Ve=qe[1]<qe[0],Be=Math.min(qe[0],qe[1]),at=Math.max(qe[0],qe[1]),gt=x(Ze.dtick),wt="log"===Ze.type&&!(gt||"L"===Ze.dtick.charAt(0)),_t="period"===Ze.ticklabelmode;if(Ze._tmin=j.tickFirst(Ze,Qe),Ze._tmin<Ie!==Ve)return[];"category"!==Ze.type&&"multicategory"!==Ze.type||(ze=Ve?Math.max(-.5,ze):Math.min(Ze._categories.length-.5,ze));var Rt=Ze._tmin;Ze.rangebreaks&&Ze._tick0Init!==Ze.tick0&&(Rt=Ot(Rt,Ze),Ve||(Rt=j.tickIncrement(Rt,Ze.dtick,!Ve,Ze.calendar))),_t&&(Rt=j.tickIncrement(Rt,Ze.dtick,!Ve,Ze.calendar));var yt,Vt=Ze.ticklabelstep,Nt=Math.max(1e3,Ze._length||0),rt=[],Tt=null;gt?yt=Ze.dtick:"date"===Ze.type?"string"==typeof Ze.dtick&&"M"===Ze.dtick.charAt(0)&&(yt=M*Ze.dtick.substring(1)):yt=Ze._roughDTick;for(var Ut,Wt,sn=Math.round((Ze.r2l(Rt)-Ze.r2l(Ze.tick0))/yt)-1;Ve?Rt>=ze:Rt<=ze;Rt=j.tickIncrement(Rt,Ze.dtick,Ve,Ze.calendar)){if(sn++,Ze.rangebreaks&&!Ve){if(Rt<Ie)continue;if(Ze.maskBreaks(Rt)===I&&Ot(Rt,Ze)>=at)break}if(rt.length>Nt||Rt===Tt)break;Tt=Rt;var He=!1;wt&&Rt!==(0|Rt)&&(He=!0);var vt={minor:He,value:Rt};Vt>1&&sn%Vt&&(vt.skipLabel=!0),rt.push(vt)}if(_t&&function(pn,En,Un){for(var In=0;In<pn.length;In++){var sr=pn[In].value,fr=In,rr=In+1;In<pn.length-1?(fr=In,rr=In+1):In>0?(fr=In-1,rr=In):(fr=In,rr=In);var qr,pr=Math.abs(pn[rr].value-pn[fr].value),Fn=Un||pr,Rn=0;Fn>=v?Rn=pr>=v&&pr<=h?pr:p:Un===f&&Fn>=w?Rn=pr>=w&&pr<=g?pr:f:Fn>=A?Rn=pr>=A&&pr<=y?pr:M:Un===k&&Fn>=k?Rn=k:Fn>=C?Rn=C:Un===P&&Fn>=P?Rn=P:Un===D&&Fn>=D&&(Rn=D),Rn>=pr&&(Rn=pr,qr=!0);var hr=sr+Rn;if(En.rangebreaks&&Rn>0){for(var ri=0,ir=0;ir<84;ir++){var Ur=(ir+.5)/84;En.maskBreaks(sr*(1-Ur)+Ur*hr)!==I&&ri++}(Rn*=ri/84)||(pn[In].drop=!0),qr&&pr>k&&(Rn=pr)}(Rn>0||0===In)&&(pn[In].periodX=sr+Rn/2)}}(rt,Ze,Ze._definedDelta),Ze.rangebreaks){var Lt="y"===Ze._id.charAt(0),Gt=1;"auto"===Ze.tickmode&&(Gt=Ze.tickfont?Ze.tickfont.size:12);var Kt=NaN;for(Ut=rt.length-1;Ut>-1;Ut--)if(rt[Ut].drop)rt.splice(Ut,1);else{rt[Ut].value=Ot(rt[Ut].value,Ze);var _n=Ze.c2p(rt[Ut].value);(Lt?Kt>_n-Gt:Kt<_n+Gt)?rt.splice(Ve?Ut+1:Ut,1):Kt=_n}}ut(Ze)&&360===Math.abs(qe[1]-qe[0])&&rt.pop(),Ze._tmax=(rt[rt.length-1]||{}).value,Ze._prevDateHead="",Ze._inCalcTicks=!0;var en,on,wn=function(pn){pn.text=" ",Ze._prevDateHead=Wt},On=[];for(Ut=0;Ut<rt.length;Ut++)Wt=Ze._prevDateHead,en=j.tickText(Ze,rt[Ut].value,!1,rt[Ut].minor),void 0!==(on=rt[Ut].periodX)&&(en.periodX=on,(on>at||on<Be)&&(on>at&&(en.periodX=at),on<Be&&(en.periodX=Be),wn(en))),rt[Ut].skipLabel&&wn(en),On.push(en);return Ze._inCalcTicks=!1,On};var be=[2,5,10],ge=[1,2,3,6,12],we=[1,2,5,10,15,30],Ce=[1,2,3,7,14],De=[-.046,0,.301,.477,.602,.699,.778,.845,.903,.954,1],Se=[-.301,0,.301,.699,1],Fe=[15,30,45,90,180];function ve(Ze,Qe,qe){return Qe*e.roundUp(Ze/Qe,qe)}function Te(Ze){var Qe=Ze.dtick;if(Ze._tickexponent=0,x(Qe)||"string"==typeof Qe||(Qe=1),"category"!==Ze.type&&"multicategory"!==Ze.type||(Ze._tickround=null),"date"===Ze.type){var qe=Ze.r2l(Ze.tick0),it=Ze.l2r(qe).replace(/(^-|i)/g,""),Ie=it.length;if("M"===String(Qe).charAt(0))Ze._tickround=Ie>10||"01-01"!==it.substr(5)?"d":+Qe.substr(1)%12==0?"y":"m";else if(Qe>=C&&Ie<=10||Qe>=15*C)Ze._tickround="d";else if(Qe>=F&&Ie<=16||Qe>=D)Ze._tickround="M";else if(Qe>=R&&Ie<=19||Qe>=F)Ze._tickround="S";else{var ze=Ze.l2r(qe+Qe).replace(/^-/,"").length;Ze._tickround=Math.max(Ie,ze)-20,Ze._tickround<0&&(Ze._tickround=4)}}else if(x(Qe)||"L"===Qe.charAt(0)){var Ve=Ze.range.map(Ze.r2d||Number);x(Qe)||(Qe=Number(Qe.substr(1))),Ze._tickround=2-Math.floor(Math.log(Qe)/Math.LN10+.01);var Be=Math.max(Math.abs(Ve[0]),Math.abs(Ve[1])),at=Math.floor(Math.log(Be)/Math.LN10+.01),gt=void 0===Ze.minexponent?3:Ze.minexponent;Math.abs(at)>gt&&(Ze._tickexponent=Pe(Ze.exponentformat)&&!je(at)?3*Math.round((at-1)/3):at)}else Ze._tickround=null}function Le(Ze,Qe,qe){var it=Ze.tickfont||{};return{x:Qe,dx:0,dy:0,text:qe||"",fontSize:it.size,font:it.family,fontColor:it.color}}j.autoTicks=function(Ze,Qe){var qe;function it(wt){return Math.pow(wt,Math.floor(Math.log(Qe)/Math.LN10))}if("date"===Ze.type){Ze.tick0=e.dateTick0(Ze.calendar,0);var Ie=2*Qe;if(Ie>p)Qe/=p,qe=it(10),Ze.dtick="M"+12*ve(Qe,qe,be);else if(Ie>M)Ze.dtick="M"+ve(Qe/=M,1,ge);else if(Ie>C){Ze.dtick=ve(Qe,C,Ze._hasDayOfWeekBreaks?[1,2,7,14]:Ce);var ze=j.getTickFormat(Ze),Ve="period"===Ze.ticklabelmode;Ve&&(Ze._rawTick0=Ze.tick0),Ze.tick0=/%[uVW]/.test(ze)?e.dateTick0(Ze.calendar,2):e.dateTick0(Ze.calendar,1),Ve&&(Ze._dowTick0=Ze.tick0)}else Ie>D?Ze.dtick=ve(Qe,D,ge):Ie>F?Ze.dtick=ve(Qe,F,we):Ie>R?Ze.dtick=ve(Qe,R,we):(qe=it(10),Ze.dtick=ve(Qe,qe,be))}else if("log"===Ze.type){Ze.tick0=0;var Be=e.simpleMap(Ze.range,Ze.r2l);if(Qe>.7)Ze.dtick=Math.ceil(Qe);else if(Math.abs(Be[1]-Be[0])<1){var at=1.5*Math.abs((Be[1]-Be[0])/Qe);Qe=Math.abs(Math.pow(10,Be[1])-Math.pow(10,Be[0]))/at,qe=it(10),Ze.dtick="L"+ve(Qe,qe,be)}else Ze.dtick=Qe>.3?"D2":"D1"}else"category"===Ze.type||"multicategory"===Ze.type?(Ze.tick0=0,Ze.dtick=Math.ceil(Math.max(Qe,1))):ut(Ze)?(Ze.tick0=0,Ze.dtick=ve(Qe,qe=1,Fe)):(Ze.tick0=0,qe=it(10),Ze.dtick=ve(Qe,qe,be));if(0===Ze.dtick&&(Ze.dtick=1),!x(Ze.dtick)&&"string"!=typeof Ze.dtick){var gt=Ze.dtick;throw Ze.dtick=1,"ax.dtick error: "+String(gt)}},j.tickIncrement=function(Ze,Qe,qe,it){var Ie=qe?-1:1;if(x(Qe))return e.increment(Ze,Ie*Qe);var ze=Qe.charAt(0),Ve=Ie*Number(Qe.substr(1));if("M"===ze)return e.incrementMonth(Ze,Ve,it);if("L"===ze)return Math.log(Math.pow(10,Ze)+Ve)/Math.LN10;if("D"===ze){var Be="D2"===Qe?Se:De,at=Ze+.01*Ie,gt=e.roundUp(e.mod(at,1),Be,qe);return Math.floor(at)+Math.log(m.round(Math.pow(10,gt),1))/Math.LN10}throw"unrecognized dtick "+String(Qe)},j.tickFirst=function(Ze,Qe){var qe=Ze.r2l||Number,it=e.simpleMap(Ze.range,qe,void 0,void 0,Qe),Ie=it[1]<it[0],ze=Ie?Math.floor:Math.ceil,Ve=ne(it)[0],Be=Ze.dtick,at=qe(Ze.tick0);if(x(Be)){var gt=ze((Ve-at)/Be)*Be+at;return"category"!==Ze.type&&"multicategory"!==Ze.type||(gt=e.constrain(gt,0,Ze._categories.length-1)),gt}var wt=Be.charAt(0),_t=Number(Be.substr(1));if("M"===wt){for(var Rt,yt,Vt,Nt=0,rt=at;Nt<10;){if(((Rt=j.tickIncrement(rt,Be,Ie,Ze.calendar))-Ve)*(rt-Ve)<=0)return Ie?Math.min(rt,Rt):Math.max(rt,Rt);yt=(Ve-(rt+Rt)/2)/(Rt-rt),Vt=wt+(Math.abs(Math.round(yt))||1)*_t,rt=j.tickIncrement(rt,Vt,yt<0?!Ie:Ie,Ze.calendar),Nt++}return e.error("tickFirst did not converge",Ze),rt}if("L"===wt)return Math.log(ze((Math.pow(10,Ve)-at)/_t)*_t+at)/Math.LN10;if("D"===wt){var Tt="D2"===Be?Se:De,Ut=e.roundUp(e.mod(Ve,1),Tt,Ie);return Math.floor(Ve)+Math.log(m.round(Math.pow(10,Ut),1))/Math.LN10}throw"unrecognized dtick "+String(Be)},j.tickText=function(Ze,Qe,qe,it){var Ie,ze=Le(Ze,Qe),Ve="array"===Ze.tickmode,Be=qe||Ve,at=Ze.type,gt="category"===at?Ze.d2l_noadd:Ze.d2l;if(Ve&&Array.isArray(Ze.ticktext)){var wt=e.simpleMap(Ze.range,Ze.r2l),_t=(Math.abs(wt[1]-wt[0])-(Ze._lBreaks||0))/1e4;for(Ie=0;Ie<Ze.ticktext.length&&!(Math.abs(Qe-gt(Ze.tickvals[Ie]))<_t);Ie++);if(Ie<Ze.ticktext.length)return ze.text=String(Ze.ticktext[Ie]),ze}function Rt(Nt){return void 0===Nt||(qe?"none"===Nt:"all"!==Nt&&Qe!=={first:Ze._tmin,last:Ze._tmax}[Nt])}var rt,Tt,yt=qe?"never":"none"!==Ze.exponentformat&&Rt(Ze.showexponent)?"hide":"";if("date"===at?function(Nt,rt,Tt,Ut){var Wt=Nt._tickround,sn=Tt&&Nt.hoverformat||j.getTickFormat(Nt);Ut&&(Wt=x(Wt)?4:{y:"m",m:"d",d:"M",M:"S",S:4}[Wt]);var He,vt=e.formatDate(rt.x,sn,Wt,Nt._dateFormat,Nt.calendar,Nt._extraFormat),Lt=vt.indexOf("\n");if(-1!==Lt&&(He=vt.substr(Lt+1),vt=vt.substr(0,Lt)),Ut&&("00:00:00"===vt||"00:00"===vt?(vt=He,He=""):8===vt.length&&(vt=vt.replace(/:00$/,""))),He)if(Tt)"d"===Wt?vt+=", "+He:vt=He+(vt?", "+vt:"");else if(Nt._inCalcTicks&&Nt._prevDateHead===He){var Gt=tn(Nt),Kt=Nt._trueSide||Nt.side;(!Gt&&"top"===Kt||Gt&&"bottom"===Kt)&&(vt+="<br> ")}else Nt._prevDateHead=He,vt+="<br>"+He;rt.text=vt}(Ze,ze,qe,Be):"log"===at?function(Nt,rt,Tt,Ut,Wt){var sn=Nt.dtick,He=rt.x,vt=Nt.tickformat,Lt="string"==typeof sn&&sn.charAt(0);if("never"===Wt&&(Wt=""),Ut&&"L"!==Lt&&(sn="L3",Lt="L"),vt||"L"===Lt)rt.text=Ge(Math.pow(10,He),Nt,Wt,Ut);else if(x(sn)||"D"===Lt&&e.mod(He+.01,1)<.1){var Gt=Math.round(He),Kt=Math.abs(Gt),_n=Nt.exponentformat;"power"===_n||Pe(_n)&&je(Gt)?(rt.text=0===Gt?1:1===Gt?"10":"10<sup>"+(Gt>1?"":L)+Kt+"</sup>",rt.fontSize*=1.25):("e"===_n||"E"===_n)&&Kt>2?rt.text="1"+_n+(Gt>0?"+":L)+Kt:(rt.text=Ge(Math.pow(10,He),Nt,"","fakehover"),"D1"===sn&&"y"===Nt._id.charAt(0)&&(rt.dy-=rt.fontSize/6))}else{if("D"!==Lt)throw"unrecognized dtick "+String(sn);rt.text=String(Math.round(Math.pow(10,e.mod(He,1)))),rt.fontSize*=.75}if("D1"===Nt.dtick){var en=String(rt.text).charAt(0);"0"!==en&&"1"!==en||("y"===Nt._id.charAt(0)?rt.dx-=rt.fontSize/4:(rt.dy+=rt.fontSize/2,rt.dx+=(Nt.range[1]>Nt.range[0]?1:-1)*rt.fontSize*(He<0?.5:.25)))}}(Ze,ze,0,Be,yt):"category"===at?(rt=ze,void 0===(Tt=Ze._categories[Math.round(rt.x)])&&(Tt=""),rt.text=String(Tt)):"multicategory"===at?function(Nt,rt,Tt){var Ut=Math.round(rt.x),Wt=Nt._categories[Ut]||[],sn=void 0===Wt[1]?"":String(Wt[1]),He=void 0===Wt[0]?"":String(Wt[0]);Tt?rt.text=He+" - "+sn:(rt.text=sn,rt.text2=He)}(Ze,ze,qe):ut(Ze)?function(Nt,rt,Tt,Ut,Wt){if("radians"!==Nt.thetaunit||Tt)rt.text=Ge(rt.x,Nt,Wt,Ut);else{var sn=rt.x/180;if(0===sn)rt.text="0";else{var He=function(Lt){function Gt(on,wn){return Math.abs(on-wn)<=1e-6}var Kt=function(on){for(var wn=1;!Gt(Math.round(on*wn)/wn,on);)wn*=10;return wn}(Lt),_n=Lt*Kt,en=Math.abs(function on(wn,On){return Gt(On,0)?wn:on(On,wn%On)}(_n,Kt));return[Math.round(_n/en),Math.round(Kt/en)]}(sn);if(He[1]>=100)rt.text=Ge(e.deg2rad(rt.x),Nt,Wt,Ut);else{var vt=rt.x<0;rt.text=1===He[1]?1===He[0]?"\u03c0":He[0]+"\u03c0":["<sup>",He[0],"</sup>","\u2044","<sub>",He[1],"</sub>","\u03c0"].join(""),vt&&(rt.text=L+rt.text)}}}}(Ze,ze,qe,Be,yt):function(Nt,rt,Tt,Ut,Wt){"never"===Wt?Wt="":"all"===Nt.showexponent&&Math.abs(rt.x/Nt.dtick)<1e-6&&(Wt="hide"),rt.text=Ge(rt.x,Nt,Wt,Ut)}(Ze,ze,0,Be,yt),it||(Ze.tickprefix&&!Rt(Ze.showtickprefix)&&(ze.text=Ze.tickprefix+ze.text),Ze.ticksuffix&&!Rt(Ze.showticksuffix)&&(ze.text+=Ze.ticksuffix)),"boundaries"===Ze.tickson||Ze.showdividers){var Vt=function(Nt){var rt=Ze.l2p(Nt);return rt>=0&&rt<=Ze._length?Nt:null};ze.xbnd=[Vt(ze.x-.5),Vt(ze.x+Ze.dtick-.5)]}return ze},j.hoverLabelText=function(Ze,Qe,qe){qe&&(Ze=e.extendFlat({},Ze,{hoverformat:qe}));var it=Array.isArray(Qe)?Qe[0]:Qe,Ie=Array.isArray(Qe)?Qe[1]:void 0;if(void 0!==Ie&&Ie!==it)return j.hoverLabelText(Ze,it,qe)+" - "+j.hoverLabelText(Ze,Ie,qe);var ze="log"===Ze.type&&it<=0,Ve=j.tickText(Ze,Ze.c2l(ze?-it:it),"hover").text;return ze?0===it?"0":L+Ve:Ve};var Ee=["f","p","n","\u03bc","m","","k","M","G","T"];function Pe(Ze){return"SI"===Ze||"B"===Ze}function je(Ze){return Ze>14||Ze<-15}function Ge(Ze,Qe,qe,it){var Ie=Ze<0,ze=Qe._tickround,Ve=qe||Qe.exponentformat||"B",Be=Qe._tickexponent,at=j.getTickFormat(Qe),gt=Qe.separatethousands;if(it){var wt={exponentformat:Ve,minexponent:Qe.minexponent,dtick:"none"===Qe.showexponent?Qe.dtick:x(Ze)&&Math.abs(Ze)||1,range:"none"===Qe.showexponent?Qe.range.map(Qe.r2d):[0,Ze||1]};Te(wt),ze=(Number(wt._tickround)||0)+4,Be=wt._tickexponent,Qe.hoverformat&&(at=Qe.hoverformat)}if(at)return Qe._numFormat(at)(Ze).replace(/-/g,L);var _t,Rt=Math.pow(10,-ze)/2;if("none"===Ve&&(Be=0),(Ze=Math.abs(Ze))<Rt)Ze="0",Ie=!1;else{if(Ze+=Rt,Be&&(Ze*=Math.pow(10,-Be),ze+=Be),0===ze)Ze=String(Math.floor(Ze));else if(ze<0){Ze=(Ze=String(Math.round(Ze))).substr(0,Ze.length+ze);for(var yt=ze;yt<0;yt++)Ze+="0"}else{var Vt=(Ze=String(Ze)).indexOf(".")+1;Vt&&(Ze=Ze.substr(0,Vt+ze).replace(/\.?0+$/,""))}Ze=e.numSeparate(Ze,Qe._separators,gt)}return Be&&"hide"!==Ve&&(Pe(Ve)&&je(Be)&&(Ve="power"),_t=Be<0?L+-Be:"power"!==Ve?"+"+Be:String(Be),"e"===Ve||"E"===Ve?Ze+=Ve+_t:"power"===Ve?Ze+="\xd710<sup>"+_t+"</sup>":"B"===Ve&&9===Be?Ze+="B":Pe(Ve)&&(Ze+=Ee[Be/3+5])),Ie?L+Ze:Ze}function Ke(Ze,Qe){for(var qe=[],it={},Ie=0;Ie<Qe.length;Ie++){var ze=Qe[Ie];it[ze.text2]?it[ze.text2].push(ze.x):it[ze.text2]=[ze.x]}for(var Ve in it)qe.push(Le(Ze,e.interp(it[Ve],.5),Ve));return qe}function lt(Ze){return void 0!==Ze.periodX?Ze.periodX:Ze.x}function Ue(Ze){return[Ze.text,Ze.x,Ze.axInfo,Ze.font,Ze.fontSize,Ze.fontColor].join("_")}function $e(Ze){var Qe=Ze.title.font.size,qe=(Ze.title.text.match(a.BR_TAG_ALL)||[]).length;return Ze.title.hasOwnProperty("standoff")?qe?Qe*($+qe*Q):Qe*$:qe?Qe*(qe+1)*Q:Qe}function et(Ze,Qe){var qe=Ze.l2p(Qe);return qe>1&&qe<Ze._length-1}function tt(Ze){var Qe=m.select(Ze),qe=Qe.select(".text-math-group");return qe.empty()?Qe.select("text"):qe}function ct(Ze){return Ze._id+".automargin"}function xt(Ze){return ct(Ze)+".mirror"}function Ct(Ze){return Ze._id+".rangeslider"}function Ht(Ze,Qe){for(var qe=0;qe<Qe.length;qe++)-1===Ze.indexOf(Qe[qe])&&Ze.push(Qe[qe])}function zt(Ze,Qe,qe){var it,Ie,ze=[],Ve=[],Be=Ze.layout;for(it=0;it<Qe.length;it++)ze.push(j.getFromId(Ze,Qe[it]));for(it=0;it<qe.length;it++)Ve.push(j.getFromId(Ze,qe[it]));var at=Object.keys(u),gt=["anchor","domain","overlaying","position","side","tickangle","editType"],wt=["linear","log"];for(it=0;it<at.length;it++){var _t=at[it],Rt=ze[0][_t],yt=Ve[0][_t],Vt=!0,Nt=!1,rt=!1;if("_"!==_t.charAt(0)&&"function"!=typeof Rt&&-1===gt.indexOf(_t)){for(Ie=1;Ie<ze.length&&Vt;Ie++){var Tt=ze[Ie][_t];"type"===_t&&-1!==wt.indexOf(Rt)&&-1!==wt.indexOf(Tt)&&Rt!==Tt?Nt=!0:Tt!==Rt&&(Vt=!1)}for(Ie=1;Ie<Ve.length&&Vt;Ie++){var Ut=Ve[Ie][_t];"type"===_t&&-1!==wt.indexOf(yt)&&-1!==wt.indexOf(Ut)&&yt!==Ut?rt=!0:Ve[Ie][_t]!==yt&&(Vt=!1)}Vt&&(Nt&&(Be[ze[0]._name].type="linear"),rt&&(Be[Ve[0]._name].type="linear"),ht(Be,_t,ze,Ve,Ze._fullLayout._dfltTitle))}}for(it=0;it<Ze._fullLayout.annotations.length;it++){var Wt=Ze._fullLayout.annotations[it];-1!==Qe.indexOf(Wt.xref)&&-1!==qe.indexOf(Wt.yref)&&e.swapAttrs(Be.annotations[it],["?"])}}function ht(Ze,Qe,qe,it,Ie){var ze,Ve=e.nestedProperty,Be=Ve(Ze[qe[0]._name],Qe).get(),at=Ve(Ze[it[0]._name],Qe).get();for("title"===Qe&&(Be&&Be.text===Ie.x&&(Be.text=Ie.y),at&&at.text===Ie.y&&(at.text=Ie.x)),ze=0;ze<qe.length;ze++)Ve(Ze,qe[ze]._name+"."+Qe).set(at);for(ze=0;ze<it.length;ze++)Ve(Ze,it[ze]._name+"."+Qe).set(Be)}function ut(Ze){return"angularaxis"===Ze._id}function Ot(Ze,Qe){for(var qe=Qe._rangebreaks.length,it=0;it<qe;it++){var Ie=Qe._rangebreaks[it];if(Ze>=Ie.min&&Ze<Ie.max)return Ie.max}return Ze}function tn(Ze){return-1!==(Ze.ticklabelposition||"").indexOf("inside")}function un(Ze,Qe){tn(Ze._anchorAxis||{})&&Ze._hideCounterAxisInsideTickLabels&&Ze._hideCounterAxisInsideTickLabels(Qe)}j.getTickFormat=function(Ze){var Qe,qe,it,Ie,ze,Ve,Be,at,Rt,yt,Vt,Nt,rt,Tt;function gt(Rt){return"string"!=typeof Rt?Rt:Number(Rt.replace("M",""))*M}function wt(Rt,yt){var Vt=["L","D"];if(typeof Rt==typeof yt){if("number"==typeof Rt)return Rt-yt;var Nt=Vt.indexOf(Rt.charAt(0)),rt=Vt.indexOf(yt.charAt(0));return Nt===rt?Number(Rt.replace(/(L|D)/g,""))-Number(yt.replace(/(L|D)/g,"")):Nt-rt}return"number"==typeof Rt?1:-1}if(Ze.tickformatstops&&Ze.tickformatstops.length>0)switch(Ze.type){case"date":case"linear":for(Qe=0;Qe<Ze.tickformatstops.length;Qe++)if((it=Ze.tickformatstops[Qe]).enabled&&(Ie=Ze.dtick,Ve=void 0,void 0,void 0,Ve=gt||function(Rt){return Rt},at=(ze=it.dtickrange)[1],(!(Be=ze[0])&&"number"!=typeof Be||Ve(Be)<=Ve(Ie))&&(!at&&"number"!=typeof at||Ve(at)>=Ve(Ie)))){qe=it;break}break;case"log":for(Qe=0;Qe<Ze.tickformatstops.length;Qe++)if((it=Ze.tickformatstops[Qe]).enabled&&(Vt=void 0,Nt=void 0,rt=void 0,Tt=void 0,Vt=null===(yt=it.dtickrange)[0],Nt=null===yt[1],rt=wt(Rt=Ze.dtick,yt[0])>=0,Tt=wt(Rt,yt[1])<=0,(Vt||rt)&&(Nt||Tt))){qe=it;break}}return qe?qe.value:Ze.tickformat},j.getSubplots=function(Ze,Qe){var qe=Ze._fullLayout._subplots,it=qe.cartesian.concat(qe.gl2d||[]),Ie=Qe?j.findSubplotsWithAxis(it,Qe):it;return Ie.sort(function(ze,Ve){var Be=ze.substr(1).split("y"),at=Ve.substr(1).split("y");return Be[0]===at[0]?+Be[1]-+at[1]:+Be[0]-+at[0]}),Ie},j.findSubplotsWithAxis=function(Ze,Qe){for(var qe=new RegExp("x"===Qe._id.charAt(0)?"^"+Qe._id+"y":Qe._id+"$"),it=[],Ie=0;Ie<Ze.length;Ie++){var ze=Ze[Ie];qe.test(ze)&&it.push(ze)}return it},j.makeClipPaths=function(Ze){var Qe=Ze._fullLayout;if(!Qe._hasOnlyLargeSploms){var qe,it,Ie={_offset:0,_length:Qe.width,_id:""},ze={_offset:0,_length:Qe.height,_id:""},Ve=j.list(Ze,"x",!0),Be=j.list(Ze,"y",!0),at=[];for(qe=0;qe<Ve.length;qe++)for(at.push({x:Ve[qe],y:ze}),it=0;it<Be.length;it++)0===qe&&at.push({x:Ie,y:Be[it]}),at.push({x:Ve[qe],y:Be[it]});var gt=Qe._clips.selectAll(".axesclip").data(at,function(wt){return wt.x._id+wt.y._id});gt.enter().append("clipPath").classed("axesclip",!0).attr("id",function(wt){return"clip"+Qe._uid+wt.x._id+wt.y._id}).append("rect"),gt.exit().remove(),gt.each(function(wt){m.select(this).select("rect").attr({x:wt.x._offset||0,y:wt.y._offset||0,width:wt.x._length||1,height:wt.y._length||1})})}},j.draw=function(Ze,Qe,qe){var it=Ze._fullLayout;"redraw"===Qe&&it._paper.selectAll("g.subplot").each(function(ze){var Be=it._plots[ze[0]];if(Be){var at=Be.xaxis,gt=Be.yaxis;Be.xaxislayer.selectAll("."+at._id+"tick").remove(),Be.yaxislayer.selectAll("."+gt._id+"tick").remove(),Be.xaxislayer.selectAll("."+at._id+"tick2").remove(),Be.yaxislayer.selectAll("."+gt._id+"tick2").remove(),Be.xaxislayer.selectAll("."+at._id+"divider").remove(),Be.yaxislayer.selectAll("."+gt._id+"divider").remove(),Be.gridlayer&&Be.gridlayer.selectAll("path").remove(),Be.zerolinelayer&&Be.zerolinelayer.selectAll("path").remove(),it._infolayer.select(".g-"+at._id+"title").remove(),it._infolayer.select(".g-"+gt._id+"title").remove()}});var Ie=Qe&&"redraw"!==Qe?Qe:j.listIds(Ze);return e.syncOrAsync(Ie.map(function(ze){return function(){if(ze){var Ve=j.getFromId(Ze,ze),Be=j.drawOne(Ze,Ve,qe);return Ve._r=Ve.range.slice(),Ve._rl=e.simpleMap(Ve._r,Ve.r2l),Be}}}))},j.drawOne=function(Ze,Qe,qe){var it,Ie,ze;qe=qe||{},Qe.setScale();var Ve=Ze._fullLayout,Be=Qe._id,at=Be.charAt(0),gt=j.counterLetter(Be),wt=Ve._plots[Qe._mainSubplot];if(wt){var _t=wt[at+"axislayer"],Rt=Qe._mainLinePosition,yt=Qe._mainMirrorPosition,Vt=Qe._vals=j.calcTicks(Qe),Nt=[Qe.mirror,Rt,yt].join("_");for(it=0;it<Vt.length;it++)Vt[it].axInfo=Nt;Qe._selections={},Qe._tickAngles&&(Qe._prevTickAngles=Qe._tickAngles),Qe._tickAngles={},Qe._depth=null;var rt={};if(Qe.visible){var Tt,Ut,Wt=j.makeTransTickFn(Qe),sn=j.makeTransTickLabelFn(Qe),He="inside"===Qe.ticks,vt="outside"===Qe.ticks;if("boundaries"===Qe.tickson){var Lt=function(Fn,Rn){var hr,ri=[],ir=function(Ur,Mr){var wr=Ur.xbnd[Mr];null!==wr&&ri.push(e.extendFlat({},Ur,{x:wr}))};if(Rn.length){for(hr=0;hr<Rn.length;hr++)ir(Rn[hr],0);ir(Rn[hr-1],1)}return ri}(0,Vt);Ut=j.clipEnds(Qe,Lt),Tt=He?Ut:Lt}else Ut=j.clipEnds(Qe,Vt),Tt=He&&"period"!==Qe.ticklabelmode?Ut:Vt;var Gt=Qe._gridVals=Ut,Kt=function(Fn,Rn){var hr,ri,ir=[],Ur=Rn.length&&Rn[Rn.length-1].x<Rn[0].x,Mr=function(ii,gn){var jt=ii.xbnd[gn];null!==jt&&ir.push(e.extendFlat({},ii,{x:jt}))};if(Fn.showdividers&&Rn.length){for(hr=0;hr<Rn.length;hr++){var wr=Rn[hr];wr.text2!==ri&&Mr(wr,Ur?1:0),ri=wr.text2}Mr(Rn[hr-1],Ur?0:1)}return ir}(Qe,Vt);if(!Ve._hasOnlyLargeSploms){var _n=Qe._subplotsWith,en={};for(it=0;it<_n.length;it++){var on=(ze=Ve._plots[Ie=_n[it]])[gt+"axis"],wn=on._mainAxis._id;if(!en[wn]){en[wn]=1;var On="x"===at?"M0,"+on._offset+"v"+on._length:"M"+on._offset+",0h"+on._length;j.drawGrid(Ze,Qe,{vals:Gt,counterAxis:on,layer:ze.gridlayer.select("."+Be),path:On,transFn:Wt}),j.drawZeroLine(Ze,Qe,{counterAxis:on,layer:ze.zerolinelayer,path:On,transFn:Wt})}}}var Dn=j.getTickSigns(Qe),Tn=[];if(Qe.ticks){var pn,En,Un,In=j.makeTickPath(Qe,Rt,Dn[2]);if(Qe._anchorAxis&&Qe.mirror&&!0!==Qe.mirror?(pn=j.makeTickPath(Qe,yt,Dn[3]),En=In+pn):(pn="",En=In),Qe.showdividers&&vt&&"boundaries"===Qe.tickson){var sr={};for(it=0;it<Kt.length;it++)sr[Kt[it].x]=1;Un=function(Fn){return sr[Fn.x]?pn:En}}else Un=En;j.drawTicks(Ze,Qe,{vals:Tt,layer:_t,path:Un,transFn:Wt}),"allticks"===Qe.mirror&&(Tn=Object.keys(Qe._linepositions||{}))}for(it=0;it<Tn.length;it++){ze=Ve._plots[Ie=Tn[it]];var fr=Qe._linepositions[Ie]||[],rr=j.makeTickPath(Qe,fr[0],Dn[0])+j.makeTickPath(Qe,fr[1],Dn[1]);j.drawTicks(Ze,Qe,{vals:Tt,layer:ze[at+"axislayer"],path:rr,transFn:Wt})}var qr=[];if(qr.push(function(){return j.drawLabels(Ze,Qe,{vals:Vt,layer:_t,plotinfo:ze,transFn:sn,labelFns:j.makeLabelFns(Qe,Rt)})}),"multicategory"===Qe.type){var ti={x:2,y:10}[at];qr.push(function(){var Fn={x:"height",y:"width"}[at],Rn=pr()[Fn]+ti+(Qe._tickAngles[Be+"tick"]?Qe.tickfont.size*Q:0);return j.drawLabels(Ze,Qe,{vals:Ke(Qe,Vt),layer:_t,cls:Be+"tick2",repositionOnUpdate:!0,secondary:!0,transFn:Wt,labelFns:j.makeLabelFns(Qe,Rt+Rn*Dn[4])})}),qr.push(function(){return Qe._depth=Dn[4]*(pr("tick2")[Qe.side]-Rt),Fn=Ze,Rn=Qe,ir=(hr={vals:Kt,layer:_t,path:j.makeTickPath(Qe,Rt,Dn[4],Qe._depth),transFn:Wt}).vals,(Ur=hr.layer.selectAll("path."+(ri=Rn._id+"divider")).data(ir,Ue)).exit().remove(),Ur.enter().insert("path",":first-child").classed(ri,1).classed("crisp",1).call(i.stroke,Rn.dividercolor).style("stroke-width",d.crispRound(Fn,Rn.dividerwidth,1)+"px"),void Ur.attr("transform",hr.transFn).attr("d",hr.path);var Fn,Rn,hr,ri,ir,Ur})}else Qe.title.hasOwnProperty("standoff")&&qr.push(function(){Qe._depth=Dn[4]*(pr()[Qe.side]-Rt)});var Ar=b.getComponentMethod("rangeslider","isVisible")(Qe);return qr.push(function(){var Fn,Rn,hr,ri,ir=Qe.side.charAt(0),Ur=se[Qe.side].charAt(0),Mr=j.getPxPosition(Ze,Qe),wr=vt?Qe.ticklen:0;if((Qe.automargin||Ar)&&("multicategory"===Qe.type?Fn=pr("tick2"):(Fn=pr(),"x"===at&&"b"===ir&&(Qe._depth=Math.max(Fn.width>0?Fn.bottom-Mr:0,wr)))),Qe.automargin){Rn={x:0,y:0,r:0,l:0,t:0,b:0};var ii=[0,1];if("x"===at){if("b"===ir?Rn[ir]=Qe._depth:(Rn[ir]=Qe._depth=Math.max(Fn.width>0?Mr-Fn.top:0,wr),ii.reverse()),Fn.width>0){var gn=Fn.right-(Qe._offset+Qe._length);gn>0&&(Rn.xr=1,Rn.r=gn);var jt=Qe._offset-Fn.left;jt>0&&(Rn.xl=0,Rn.l=jt)}}else if("l"===ir?Rn[ir]=Qe._depth=Math.max(Fn.height>0?Mr-Fn.left:0,wr):(Rn[ir]=Qe._depth=Math.max(Fn.height>0?Fn.right-Mr:0,wr),ii.reverse()),Fn.height>0){var Jt=Fn.bottom-(Qe._offset+Qe._length);Jt>0&&(Rn.yb=0,Rn.b=Jt);var An=Qe._offset-Fn.top;An>0&&(Rn.yt=1,Rn.t=An)}Rn[gt]="free"===Qe.anchor?Qe.position:Qe._anchorAxis.domain[ii[0]],Qe.title.text!==Ve._dfltTitle[at]&&(Rn[ir]+=$e(Qe)+(Qe.title.standoff||0)),Qe.mirror&&"free"!==Qe.anchor&&((hr={x:0,y:0,r:0,l:0,t:0,b:0})[Ur]=Qe.linewidth,Qe.mirror&&!0!==Qe.mirror&&(hr[Ur]+=wr),!0===Qe.mirror||"ticks"===Qe.mirror?hr[gt]=Qe._anchorAxis.domain[ii[1]]:"all"!==Qe.mirror&&"allticks"!==Qe.mirror||(hr[gt]=[Qe._counterDomainMin,Qe._counterDomainMax][ii[1]]))}Ar&&(ri=b.getComponentMethod("rangeslider","autoMarginOpts")(Ze,Qe)),T.autoMargin(Ze,ct(Qe),Rn),T.autoMargin(Ze,xt(Qe),hr),T.autoMargin(Ze,Ct(Qe),ri)}),qe.skipTitle||Ar&&"bottom"===Qe.side||qr.push(function(){return function(Fn,Rn){var hr,ri=Fn._fullLayout,ir=Rn._id,Ur=ir.charAt(0),Mr=Rn.title.font.size;if(Rn.title.hasOwnProperty("standoff"))hr=Rn._depth+Rn.title.standoff+$e(Rn);else{var wr=tn(Rn);if("multicategory"===Rn.type)hr=Rn._depth;else{var ii=1.5*Mr;wr&&(ii=.5*Mr,"outside"===Rn.ticks&&(ii+=Rn.ticklen)),hr=10+ii+(Rn.linewidth?Rn.linewidth-1:0)}wr||(hr+="x"===Ur?"top"===Rn.side?Mr*(Rn.showticklabels?1:0):Mr*(Rn.showticklabels?1.5:.5):"right"===Rn.side?Mr*(Rn.showticklabels?1:.5):Mr*(Rn.showticklabels?.5:0))}var gn,jt,Jt,An,Hn=j.getPxPosition(Fn,Rn);if("x"===Ur?(jt=Rn._offset+Rn._length/2,Jt="top"===Rn.side?Hn-hr:Hn+hr):(Jt=Rn._offset+Rn._length/2,jt="right"===Rn.side?Hn+hr:Hn-hr,gn={rotate:"-90",offset:0}),"multicategory"!==Rn.type){var yr=Rn._selections[Rn._id+"tick"];if(An={selection:yr,side:Rn.side},yr&&yr.node()&&yr.node().parentNode){var gr=d.getTranslate(yr.node().parentNode);An.offsetLeft=gr.x,An.offsetTop=gr.y}Rn.title.hasOwnProperty("standoff")&&(An.pad=0)}return l.draw(Fn,ir+"title",{propContainer:Rn,propName:Rn._name+".title.text",placeholder:ri._dfltTitle[Ur],avoid:An,transform:gn,attributes:{x:jt,y:Jt,"text-anchor":"middle"}})}(Ze,Qe)}),e.syncOrAsync(qr)}}function pr(Fn){var hr,ri,ir,Ur,Mr,wr,Rn=Be+(Fn||"tick");return rt[Rn]||(rt[Rn]=((hr=Qe)._selections[ri=Rn].size()?(ir=1/0,Ur=-1/0,Mr=1/0,wr=-1/0,hr._selections[ri].each(function(){var ii=tt(this),gn=d.bBox(ii.node().parentNode);ir=Math.min(ir,gn.top),Ur=Math.max(Ur,gn.bottom),Mr=Math.min(Mr,gn.left),wr=Math.max(wr,gn.right)})):(ir=0,Ur=0,Mr=0,wr=0),{top:ir,bottom:Ur,left:Mr,right:wr,height:Ur-ir,width:wr-Mr})),rt[Rn]}},j.getTickSigns=function(Ze){var Qe=Ze._id.charAt(0),it=Ze.side==={x:"top",y:"right"}[Qe]?1:-1,Ie=[-1,1,it,-it];return"inside"!==Ze.ticks==("x"===Qe)&&(Ie=Ie.map(function(ze){return-ze})),Ze.side&&Ie.push({l:-1,t:-1,r:1,b:1}[Ze.side.charAt(0)]),Ie},j.makeTransTickFn=function(Ze){return"x"===Ze._id.charAt(0)?function(Qe){return o(Ze._offset+Ze.l2p(Qe.x),0)}:function(Qe){return o(0,Ze._offset+Ze.l2p(Qe.x))}},j.makeTransTickLabelFn=function(Ze){var Qe=function(Ie){var ze=Ie.ticklabelposition||"",Ve=function(Tt){return-1!==ze.indexOf(Tt)},Be=Ve("top"),at=Ve("left"),gt=Ve("right"),wt=Ve("bottom"),_t=Ve("inside"),Rt=wt||at||Be||gt;if(!Rt&&!_t)return[0,0];var yt=Ie.side,Vt=Rt?(Ie.tickwidth||0)/2:0,Nt=3,rt=Ie.tickfont?Ie.tickfont.size:12;return(wt||Be)&&(Vt+=rt*$,Nt+=(Ie.linewidth||0)/2),(at||gt)&&(Vt+=(Ie.linewidth||0)/2,Nt+=3),_t&&"top"===yt&&(Nt-=rt*(1-$)),(at||Be)&&(Vt=-Vt),"bottom"!==yt&&"right"!==yt||(Nt=-Nt),[Rt?Vt:0,_t?Nt:0]}(Ze),qe=Qe[0],it=Qe[1];return"x"===Ze._id.charAt(0)?function(Ie){return o(qe+Ze._offset+Ze.l2p(lt(Ie)),it)}:function(Ie){return o(it,qe+Ze._offset+Ze.l2p(lt(Ie)))}},j.makeTickPath=function(Ze,Qe,qe,it){it=void 0!==it?it:Ze.ticklen;var Ie=Ze._id.charAt(0),ze=(Ze.linewidth||1)/2;return"x"===Ie?"M0,"+(Qe+ze*qe)+"v"+it*qe:"M"+(Qe+ze*qe)+",0h"+it*qe},j.makeLabelFns=function(Ze,Qe,qe){var it=Ze.ticklabelposition||"",Ie=function(en){return-1!==it.indexOf(en)},ze=Ie("top"),Ve=Ie("left"),Be=Ie("right"),at=Ie("bottom")||Ve||ze||Be,gt=Ie("inside"),wt="inside"===it&&"inside"===Ze.ticks||!gt&&"outside"===Ze.ticks&&"boundaries"!==Ze.tickson,_t=0,Rt=0,yt=wt?Ze.ticklen:0;if(gt?yt*=-1:at&&(yt=0),wt&&(_t+=yt,qe)){var Vt=e.deg2rad(qe);_t=yt*Math.cos(Vt)+1,Rt=yt*Math.sin(Vt)}Ze.showticklabels&&(wt||Ze.showline)&&(_t+=.2*Ze.tickfont.size);var Nt,rt,Tt,Ut,Wt,sn={labelStandoff:_t+=(Ze.linewidth||1)/2*(gt?-1:1),labelShift:Rt},He=0,vt=Ze.side,Lt=Ze._id.charAt(0),Gt=Ze.tickangle;if("x"===Lt)Ut=(Wt=!gt&&"bottom"===vt||gt&&"top"===vt)?1:-1,gt&&(Ut*=-1),Nt=Rt*Ut,rt=Qe+_t*Ut,Tt=Wt?1:-.2,90===Math.abs(Gt)&&(gt?Tt+=J:Tt=-90===Gt&&"bottom"===vt?$:90===Gt&&"top"===vt?J:.5,He=J/2*(Gt/90)),sn.xFn=function(en){return en.dx+Nt+He*en.fontSize},sn.yFn=function(en){return en.dy+rt+en.fontSize*Tt},sn.anchorFn=function(en,on){if(at){if(Ve)return"end";if(Be)return"start"}return x(on)&&0!==on&&180!==on?on*Ut<0!==gt?"end":"start":"middle"},sn.heightFn=function(en,on,wn){return on<-60||on>60?-.5*wn:"top"===Ze.side!==gt?-wn:0};else if("y"===Lt){if(Ut=(Wt=!gt&&"left"===vt||gt&&"right"===vt)?1:-1,gt&&(Ut*=-1),Nt=_t,rt=Rt*Ut,Tt=0,gt||90!==Math.abs(Gt)||(Tt=-90===Gt&&"left"===vt||90===Gt&&"right"===vt?$:.5),gt){var Kt=x(Gt)?+Gt:0;if(0!==Kt){var _n=e.deg2rad(Kt);He=Math.abs(Math.sin(_n))*$*Ut,Tt=0}}sn.xFn=function(en){return en.dx+Qe-(Nt+en.fontSize*Tt)*Ut+He*en.fontSize},sn.yFn=function(en){return en.dy+rt+en.fontSize*J},sn.anchorFn=function(en,on){return x(on)&&90===Math.abs(on)?"middle":Wt?"end":"start"},sn.heightFn=function(en,on,wn){return"right"===Ze.side&&(on*=-1),on<-30?-wn:on<30?-.5*wn:0}}return sn},j.drawTicks=function(Ze,Qe,qe){var it=Qe._id+"tick",Ie=(qe=qe||{}).vals;"period"===Qe.ticklabelmode&&(Ie=Ie.slice()).shift();var ze=qe.layer.selectAll("path."+it).data(Qe.ticks?Ie:[],Ue);ze.exit().remove(),ze.enter().append("path").classed(it,1).classed("ticks",1).classed("crisp",!1!==qe.crisp).call(i.stroke,Qe.tickcolor).style("stroke-width",d.crispRound(Ze,Qe.tickwidth,1)+"px").attr("d",qe.path).style("display",null),un(Qe,[Z]),ze.attr("transform",qe.transFn)},j.drawGrid=function(Ze,Qe,qe){var it=Qe._id+"grid",Ie=(qe=qe||{}).vals,ze=qe.counterAxis;if(!1===Qe.showgrid)Ie=[];else if(ze&&j.shouldShowZeroLine(Ze,Qe,ze))for(var Ve="array"===Qe.tickmode,Be=0;Be<Ie.length;Be++){var at=Ie[Be].x;if(Ve?!at:Math.abs(at)<Qe.dtick/100){if(Ie=Ie.slice(0,Be).concat(Ie.slice(Be+1)),!Ve)break;Be--}}var gt=qe.layer.selectAll("path."+it).data(Ie,Ue);gt.exit().remove(),gt.enter().append("path").classed(it,1).classed("crisp",!1!==qe.crisp),Qe._gw=d.crispRound(Ze,Qe.gridwidth,1),gt.attr("transform",qe.transFn).attr("d",qe.path).call(i.stroke,Qe.gridcolor||"#ddd").style("stroke-width",Qe._gw+"px").style("display",null),un(Qe,[V]),"function"==typeof qe.path&&gt.attr("d",qe.path)},j.drawZeroLine=function(Ze,Qe,qe){var it=Qe._id+"zl",Ie=j.shouldShowZeroLine(Ze,Qe,(qe=qe||qe).counterAxis),ze=qe.layer.selectAll("path."+it).data(Ie?[{x:0,id:Qe._id}]:[]);ze.exit().remove(),ze.enter().append("path").classed(it,1).classed("zl",1).classed("crisp",!1!==qe.crisp).each(function(){qe.layer.selectAll("path").sort(function(Ve,Be){return ie(Ve.id,Be.id)})}),ze.attr("transform",qe.transFn).attr("d",qe.path).call(i.stroke,Qe.zerolinecolor||i.defaultLine).style("stroke-width",d.crispRound(Ze,Qe.zerolinewidth,Qe._gw||1)+"px").style("display",null),un(Qe,[B])},j.drawLabels=function(Ze,Qe,qe){qe=qe||{};var it=Ze._fullLayout,Ie=Qe._id,ze=Ie.charAt(0),Ve=qe.cls||Ie+"tick",Be=qe.vals,at=qe.labelFns,gt=qe.secondary?0:Qe.tickangle,wt=(Qe._prevTickAngles||{})[Ve],_t=qe.layer.selectAll("g."+Ve).data(Qe.showticklabels?Be:[],Ue),Rt=[];function yt(Ut,Wt){Ut.each(function(sn){var He=m.select(this),vt=He.select(".text-math-group"),Lt=at.anchorFn(sn,Wt),Gt=qe.transFn.call(He.node(),sn)+(x(Wt)&&0!=+Wt?" rotate("+Wt+","+at.xFn(sn)+","+(at.yFn(sn)-sn.fontSize/2)+")":""),Kt=a.lineCount(He),_n=Q*sn.fontSize,en=at.heightFn(sn,x(Wt)?+Wt:0,(Kt-1)*_n);if(en&&(Gt+=o(0,en)),vt.empty()){var on=He.select("text");on.attr({transform:Gt,"text-anchor":Lt}),on.style("opacity",1),Qe._adjustTickLabelsOverflow&&Qe._adjustTickLabelsOverflow()}else{var wn=d.bBox(vt.node()).width*{end:-.5,start:.5}[Lt];vt.attr("transform",Gt+o(wn,0))}})}_t.enter().append("g").classed(Ve,1).append("text").attr("text-anchor","middle").each(function(Ut){var Wt=m.select(this),sn=Ze._promises.length;Wt.call(a.positionText,at.xFn(Ut),at.yFn(Ut)).call(d.font,Ut.font,Ut.fontSize,Ut.fontColor).text(Ut.text).call(a.convertToTspans,Ze),Ze._promises[sn]?Rt.push(Ze._promises.pop().then(function(){yt(Wt,gt)})):yt(Wt,gt)}),un(Qe,[Y]),_t.exit().remove(),qe.repositionOnUpdate&&_t.each(function(Ut){m.select(this).select("text").call(a.positionText,at.xFn(Ut),at.yFn(Ut))}),Qe._adjustTickLabelsOverflow=function(){var Ut=Qe.ticklabeloverflow;if(Ut&&"allow"!==Ut){var Wt=-1!==Ut.indexOf("hide"),sn="x"===Qe._id.charAt(0),He=0,vt=sn?Ze._fullLayout.width:Ze._fullLayout.height;if(-1!==Ut.indexOf("domain")){var Lt=e.simpleMap(Qe.range,Qe.r2l);He=Qe.l2p(Lt[0])+Qe._offset,vt=Qe.l2p(Lt[1])+Qe._offset}var Gt=Math.min(He,vt),Kt=Math.max(He,vt),_n=Qe.side,en=1/0,on=-1/0;for(var wn in _t.each(function(Tn){var pn=m.select(this);if(pn.select(".text-math-group").empty()){var En=d.bBox(pn.node()),Un=0;sn?(En.right>Kt||En.left<Gt)&&(Un=1):(En.bottom>Kt||En.top+(Qe.tickangle?0:Tn.fontSize/4)<Gt)&&(Un=1);var In=pn.select("text");Un?Wt&&In.style("opacity",0):(In.style("opacity",1),en="bottom"===_n||"right"===_n?Math.min(en,sn?En.top:En.left):-1/0,on="top"===_n||"left"===_n?Math.max(on,sn?En.bottom:En.right):1/0)}}),it._plots){var On=it._plots[wn];if(Qe._id===On.xaxis._id||Qe._id===On.yaxis._id){var Dn=sn?On.yaxis:On.xaxis;Dn&&(Dn["_visibleLabelMin_"+Qe._id]=en,Dn["_visibleLabelMax_"+Qe._id]=on)}}}},Qe._hideCounterAxisInsideTickLabels=function(Ut){var Wt="x"===Qe._id.charAt(0),sn=[];for(var He in it._plots){var vt=it._plots[He];Qe._id!==vt.xaxis._id&&Qe._id!==vt.yaxis._id||sn.push(Wt?vt.yaxis:vt.xaxis)}sn.forEach(function(Lt,Gt){Lt&&tn(Lt)&&(Ut||[B,V,Z,Y]).forEach(function(Kt){var _n="tick"===Kt.K&&"text"===Kt.L&&"period"===Qe.ticklabelmode,en=it._plots[Qe._mainSubplot];(Kt.K===B.K?en.zerolinelayer.selectAll("."+Qe._id+"zl"):Kt.K===V.K?en.gridlayer.selectAll("."+Qe._id):en[Qe._id.charAt(0)+"axislayer"]).each(function(){var on=m.select(this);Kt.L&&(on=on.selectAll(Kt.L)),on.each(function(wn){var On=Qe.l2p(_n?lt(wn):wn.x)+Qe._offset,Dn=m.select(this);On<Qe["_visibleLabelMax_"+Lt._id]&&On>Qe["_visibleLabelMin_"+Lt._id]?Dn.style("display","none"):"tick"!==Kt.K||Gt||Dn.style("display",null)})})})})},yt(_t,wt+1?wt:gt);var Vt=null;Qe._selections&&(Qe._selections[Ve]=_t);var Nt=[function(){return Rt.length&&Promise.all(Rt)}];Qe.automargin&&it._redrawFromAutoMarginCount&&90===wt?(Vt=90,Nt.push(function(){yt(_t,wt)})):Nt.push(function(){if(yt(_t,gt),Be.length&&"x"===ze&&!x(gt)&&("log"!==Qe.type||"D"!==String(Qe.dtick).charAt(0))){Vt=0;var Ut,Wt=0,sn=[];if(_t.each(function(pn){Wt=Math.max(Wt,pn.fontSize);var En=Qe.l2p(pn.x),Un=tt(this),In=d.bBox(Un.node());sn.push({top:0,bottom:10,height:10,left:En-In.width/2,right:En+In.width/2+2,width:In.width+2})}),"boundaries"!==Qe.tickson&&!Qe.showdividers||qe.secondary){var He=Be.length,vt=Math.abs((Be[He-1].x-Be[0].x)*Qe._m)/(He-1),Lt=Qe.ticklabelposition||"",Gt=function(pn){return-1!==Lt.indexOf(pn)},Kt=Gt("top"),_n=Gt("left"),en=Gt("right"),on=Gt("bottom")||_n||Kt||en?(Qe.tickwidth||0)+6:0,wn=vt<2.5*Wt||"multicategory"===Qe.type||"realaxis"===Qe._name;for(Ut=0;Ut<sn.length-1;Ut++)if(e.bBoxIntersect(sn[Ut],sn[Ut+1],on)){Vt=wn?90:30;break}}else{var On=2;for(Qe.ticks&&(On+=Qe.tickwidth/2),Ut=0;Ut<sn.length;Ut++){var Dn=Be[Ut].xbnd,Tn=sn[Ut];if(null!==Dn[0]&&Tn.left-Qe.l2p(Dn[0])<On||null!==Dn[1]&&Qe.l2p(Dn[1])-Tn.right<On){Vt=90;break}}}Vt&&yt(_t,Vt)}}),Qe._tickAngles&&Nt.push(function(){Qe._tickAngles[Ve]=null===Vt?x(gt)?gt:0:Vt});var rt=Qe._anchorAxis;rt&&rt.autorange&&tn(Qe)&&!q(it,Qe._id)&&(it._insideTickLabelsAutorange||(it._insideTickLabelsAutorange={}),it._insideTickLabelsAutorange[rt._name+".autorange"]=rt.autorange,Nt.push(function(){_t.each(function(Ut,Wt){var sn=tt(this);sn.select(".text-math-group").empty()&&(Qe._vals[Wt].bb=d.bBox(sn.node()))})}));var Tt=e.syncOrAsync(Nt);return Tt&&Tt.then&&Ze._promises.push(Tt),Tt},j.getPxPosition=function(Ze,Qe){var qe,it=Ze._fullLayout._size,Ie=Qe._id.charAt(0),ze=Qe.side;return"free"!==Qe.anchor?qe=Qe._anchorAxis:"x"===Ie?qe={_offset:it.t+(1-(Qe.position||0))*it.h,_length:0}:"y"===Ie&&(qe={_offset:it.l+(Qe.position||0)*it.w,_length:0}),"top"===ze||"left"===ze?qe._offset:"bottom"===ze||"right"===ze?qe._offset+qe._length:void 0},j.shouldShowZeroLine=function(Ze,Qe,qe){var it=e.simpleMap(Qe.range,Qe.r2l);return it[0]*it[1]<=0&&Qe.zeroline&&("linear"===Qe.type||"-"===Qe.type)&&!(Qe.rangebreaks&&Qe.maskBreaks(0)===I)&&(et(Qe,0)||!function(Ie,ze,Ve,Be){var at=Ve._mainAxis;if(at){var gt=Ie._fullLayout,wt=ze._id.charAt(0),_t=j.counterLetter(ze._id),Rt=ze._offset+(Math.abs(Be[0])<Math.abs(Be[1])==("x"===wt)?0:ze._length),Vt=gt._plots[Ve._mainSubplot];if(!(Vt.mainplotinfo||Vt).overlays.length)return yt(Ve);for(var Nt=j.list(Ie,_t),rt=0;rt<Nt.length;rt++){var Tt=Nt[rt];if(Tt._mainAxis===at&&yt(Tt))return!0}}function yt(Ut){if(!Ut.showline||!Ut.linewidth)return!1;var Wt=Math.max((Ut.linewidth+ze.zerolinewidth)/2,1);function sn(Lt){return"number"==typeof Lt&&Math.abs(Lt-Rt)<Wt}if(sn(Ut._mainLinePosition)||sn(Ut._mainMirrorPosition))return!0;var He=Ut._linepositions||{};for(var vt in He)if(sn(He[vt][0])||sn(He[vt][1]))return!0}}(Ze,Qe,qe,it)||function(Ie,ze){for(var Ve=Ie._fullData,Be=ze._mainSubplot,at=ze._id.charAt(0),gt=0;gt<Ve.length;gt++){var wt=Ve[gt];if(!0===wt.visible&&wt.xaxis+wt.yaxis===Be&&(b.traceIs(wt,"bar-like")&&wt.orientation==={x:"h",y:"v"}[at]||wt.fill&&wt.fill.charAt(wt.fill.length-1)===at))return!0}return!1}(Ze,Qe))},j.clipEnds=function(Ze,Qe){return Qe.filter(function(qe){return et(Ze,qe.x)})},j.allowAutoMargin=function(Ze){for(var Qe=j.list(Ze,"",!0),qe=0;qe<Qe.length;qe++){var it=Qe[qe];it.automargin&&(T.allowAutoMargin(Ze,ct(it)),it.mirror&&T.allowAutoMargin(Ze,xt(it))),b.getComponentMethod("rangeslider","isVisible")(it)&&T.allowAutoMargin(Ze,Ct(it))}},j.swap=function(Ze,Qe){for(var qe=function(Ie,ze){var Ve,Be,at=[];for(Ve=0;Ve<ze.length;Ve++){var gt=[],wt=Ie._fullData[ze[Ve]].xaxis,_t=Ie._fullData[ze[Ve]].yaxis;if(wt&&_t){for(Be=0;Be<at.length;Be++)-1===at[Be].x.indexOf(wt)&&-1===at[Be].y.indexOf(_t)||gt.push(Be);if(gt.length){var Rt,yt=at[gt[0]];if(gt.length>1)for(Be=1;Be<gt.length;Be++)Ht(yt.x,(Rt=at[gt[Be]]).x),Ht(yt.y,Rt.y);Ht(yt.x,[wt]),Ht(yt.y,[_t])}else at.push({x:[wt],y:[_t]})}}return at}(Ze,Qe),it=0;it<qe.length;it++)zt(Ze,qe[it].x,qe[it].y)}},{"../../components/color":366,"../../components/drawing":388,"../../components/titles":464,"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../../registry":638,"./autorange":553,"./axis_autotype":555,"./axis_ids":558,"./clean_ticks":560,"./layout_attributes":569,"./set_convert":576,"@plotly/d3":58,"fast-isnumeric":190}],555:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../lib"),T=_("../../constants/numerical").BADNUM,b=x.isArrayOrTypedArray,e=x.isDateTime,o=x.cleanNumber,a=Math.round;function l(d,u){return u?m(d):"number"==typeof d}function i(d){return Math.max(1,(d-1)/1e3)}oe.exports=function(d,u,s){var w,c=d,h=s.noMultiCategory;if(b(c)&&!c.length)return"-";if(!h&&b((w=c)[0])&&b(w[1]))return"multicategory";if(h&&Array.isArray(c[0])){for(var p=[],v=0;v<c.length;v++)if(b(c[v]))for(var g=0;g<c[v].length;g++)p.push(c[v][g]);c=p}if(function(w,y){for(var M=w.length,A=i(M),k=0,C=0,P={},D=0;D<M;D+=A){var R=w[a(D)],L=String(R);P[L]||(P[L]=1,e(R,y)&&k++,m(R)&&C++)}return k>2*C}(c,u))return"date";var f="strict"!==s.autotypenumbers;return function(w,y){for(var M=w.length,A=i(M),k=0,C=0,P={},D=0;D<M;D+=A){var R=w[a(D)],L=String(R);if(!P[L]){P[L]=1;var I=typeof R;"boolean"===I?C++:(y?o(R)!==T:"number"===I)?k++:"string"===I&&C++}}return C>2*k}(c,f)?"category":function(w,y){for(var M=w.length,A=0;A<M;A++)if(l(w[A],y))return!0;return!1}(c,f)?"linear":"-"}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],556:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../registry"),T=_("../../lib"),b=_("../array_container_defaults"),e=_("./layout_attributes"),o=_("./tick_value_defaults"),a=_("./tick_mark_defaults"),l=_("./tick_label_defaults"),i=_("./prefix_suffix_defaults"),d=_("./category_order_defaults"),u=_("./line_grid_defaults"),s=_("./set_convert"),c=_("./constants").WEEKDAY_PATTERN,h=_("./constants").HOUR_PATTERN;function p(f,w,y){function M(L,I){return T.coerce(f,w,e.rangebreaks,L,I)}if(M("enabled")){var A=M("bounds");if(A&&A.length>=2){var k,C,P="";if(2===A.length)for(k=0;k<2;k++)if(C=g(A[k])){P=c;break}var D=M("pattern",P);if(D===c)for(k=0;k<2;k++)(C=g(A[k]))&&(w.bounds[k]=A[k]=C-1);if(D)for(k=0;k<2;k++)switch(C=A[k],D){case c:if(!m(C)||(C=+C)!==Math.floor(C)||C<0||C>=7)return void(w.enabled=!1);w.bounds[k]=A[k]=C;break;case h:if(!m(C)||(C=+C)<0||C>24)return void(w.enabled=!1);w.bounds[k]=A[k]=C}if(!1===y.autorange){var F=y.range;if(F[0]<F[1]){if(A[0]<F[0]&&A[1]>F[1])return void(w.enabled=!1)}else if(A[0]>F[0]&&A[1]<F[1])return void(w.enabled=!1)}}else{var R=M("values");if(!R||!R.length)return void(w.enabled=!1);M("dvalue")}}}oe.exports=function(f,w,y,M,A){var k,C=M.letter,P=M.font||{},D=M.splomStash||{},F=y("visible",!M.visibleDflt),L=w.type||(w._template||{}).type||"-";"date"===L&&(x.getComponentMethod("calendars","handleDefaults")(f,w,"calendar",M.calendar),M.noTicklabelmode||(k=y("ticklabelmode")));var I="";M.noTicklabelposition&&"multicategory"!==L||(I=T.coerce(f,w,{ticklabelposition:{valType:"enumerated",dflt:"outside",values:"period"===k?["outside","inside"]:"x"===C?["outside","inside","outside left","inside left","outside right","inside right"]:["outside","inside","outside top","inside top","outside bottom","inside bottom"]}},"ticklabelposition")),M.noTicklabeloverflow||y("ticklabeloverflow",-1!==I.indexOf("inside")?"hide past domain":"category"===L||"multicategory"===L?"allow":"hide past div"),s(w,A);var B=!w.isValidRange(f.range);B&&M.reverseDflt&&(B="reversed"),!y("autorange",B)||"linear"!==L&&"-"!==L||y("rangemode"),y("range"),w.cleanRange(),d(f,w,y,M),"category"===L||M.noHover||y("hoverformat");var V=y("color"),Z=V!==e.color.dflt?V:P.color,Y=D.label||A._dfltTitle[C];if(i(f,w,y,L,M),!F)return w;y("title.text",Y),T.coerceFont(y,"title.font",{family:P.family,size:T.bigFont(P.size),color:Z}),o(f,w,y,L),l(f,w,y,L,M),a(f,w,y,M),u(f,w,y,{dfltColor:V,bgColor:M.bgColor,showGrid:M.showGrid,attributes:e}),(w.showline||w.ticks)&&y("mirror"),M.automargin&&y("automargin");var ee,J="multicategory"===L;if(M.noTickson||"category"!==L&&!J||!w.ticks&&!w.showgrid||(J&&(ee="boundaries"),"boundaries"===y("tickson",ee)&&delete w.ticklabelposition),J&&y("showdividers")&&(y("dividercolor"),y("dividerwidth")),"date"===L)if(b(f,w,{name:"rangebreaks",inclusionAttr:"enabled",handleItemDefaults:p}),w.rangebreaks.length){for(var $=0;$<w.rangebreaks.length;$++)if(w.rangebreaks[$].pattern===c){w._hasDayOfWeekBreaks=!0;break}if(s(w,A),A._has("scattergl")||A._has("splom"))for(var Q=0;Q<M.data.length;Q++){var se=M.data[Q];"scattergl"!==se.type&&"splom"!==se.type||(se.visible=!1,T.warn(se.type+" traces do not work on axes with rangebreaks. Setting trace "+se.index+" to `visible: false`."))}}else delete w.rangebreaks;return w};var v={sun:1,mon:2,tue:3,wed:4,thu:5,fri:6,sat:7};function g(f){if("string"==typeof f)return v[f.substr(0,3).toLowerCase()]}},{"../../lib":503,"../../registry":638,"../array_container_defaults":549,"./category_order_defaults":559,"./constants":561,"./layout_attributes":569,"./line_grid_defaults":571,"./prefix_suffix_defaults":573,"./set_convert":576,"./tick_label_defaults":578,"./tick_mark_defaults":579,"./tick_value_defaults":580,"fast-isnumeric":190}],557:[function(_,oe,ae){"use strict";var m=_("../../constants/docs"),x=m.FORMAT_LINK,T=m.DATE_FORMAT_LINK;function b(o,a){return["Sets the "+o+" formatting rule"+(a?"for `"+a+"` ":""),"using d3 formatting mini-languages","which are very similar to those in Python. For numbers, see: "+x+"."].join(" ")}function e(o,a){return b(o,a)+[" And for dates see: "+T+".","We add two items to d3's date formatter:","*%h* for half of the year as a decimal number as well as","*%{n}f* for fractional seconds","with n digits. For example, *2016-10-13 09:15:23.456* with tickformat","*%H~%M~%S.%2f* would display *09~15~23.46*"].join(" ")}oe.exports={axisHoverFormat:function(o,a){return{valType:"string",dflt:"",editType:"none",description:(a?b:e)("hover text",o)+["By default the values are formatted using "+(a?"generic number format":"`"+o+"axis.hoverformat`")+"."].join(" ")}},descriptionOnlyNumbers:b,descriptionWithDates:e}},{"../../constants/docs":474}],558:[function(_,oe,ae){"use strict";var m=_("../../registry"),x=_("./constants");function T(b,e){if(e&&e.length)for(var o=0;o<e.length;o++)if(e[o][b])return!0;return!1}ae.id2name=function(b){if("string"==typeof b&&b.match(x.AX_ID_PATTERN)){var e=b.split(" ")[0].substr(1);return"1"===e&&(e=""),b.charAt(0)+"axis"+e}},ae.name2id=function(b){if(b.match(x.AX_NAME_PATTERN)){var e=b.substr(5);return"1"===e&&(e=""),b.charAt(0)+e}},ae.cleanId=function(b,e,o){var a=/( domain)$/.test(b);if("string"==typeof b&&b.match(x.AX_ID_PATTERN)&&(!e||b.charAt(0)===e)&&(!a||o)){var l=b.split(" ")[0].substr(1).replace(/^0+/,"");return"1"===l&&(l=""),b.charAt(0)+l+(a&&o?" domain":"")}},ae.list=function(b,e,o){var a=b._fullLayout;if(!a)return[];var l,i=ae.listIds(b,e),d=new Array(i.length);for(l=0;l<i.length;l++){var u=i[l];d[l]=a[u.charAt(0)+"axis"+u.substr(1)]}if(!o){var s=a._subplots.gl3d||[];for(l=0;l<s.length;l++){var c=a[s[l]];e?d.push(c[e+"axis"]):d.push(c.xaxis,c.yaxis,c.zaxis)}}return d},ae.listIds=function(b,e){var o=b._fullLayout;if(!o)return[];var a=o._subplots;return e?a[e+"axis"]:a.xaxis.concat(a.yaxis)},ae.getFromId=function(b,e,o){var a=b._fullLayout;return e=void 0===e||"string"!=typeof e?e:e.replace(" domain",""),"x"===o?e=e.replace(/y[0-9]*/,""):"y"===o&&(e=e.replace(/x[0-9]*/,"")),a[ae.id2name(e)]},ae.getFromTrace=function(b,e,o){var a=b._fullLayout,l=null;if(m.traceIs(e,"gl3d")){var i=e.scene;"scene"===i.substr(0,5)&&(l=a[i][o+"axis"])}else l=ae.getFromId(b,e[o+"axis"]||o);return l},ae.idSort=function(b,e){var o=b.charAt(0),a=e.charAt(0);return o!==a?o>a?1:-1:+(b.substr(1)||1)-+(e.substr(1)||1)},ae.ref2id=function(b){return!!/^[xyz]/.test(b)&&b.split(" ")[0]},ae.isLinked=function(b,e){return T(e,b._axisMatchGroups)||T(e,b._axisConstraintGroups)}},{"../../registry":638,"./constants":561}],559:[function(_,oe,ae){"use strict";oe.exports=function(m,x,T,b){if("category"===x.type){var e,o=m.categoryarray,a=Array.isArray(o)&&o.length>0;a&&(e="array");var l,i=T("categoryorder",e);"array"===i&&(l=T("categoryarray")),a||"array"!==i||(i=x.categoryorder="trace"),"trace"===i?x._initialCategories=[]:"array"===i?x._initialCategories=l.slice():(l=function(d,u){var s,c,h,p=u.dataAttr||d._id.charAt(0),v={};if(u.axData)s=u.axData;else for(s=[],c=0;c<u.data.length;c++){var g=u.data[c];g[p+"axis"]===d._id&&s.push(g)}for(c=0;c<s.length;c++){var f=s[c][p];for(h=0;h<f.length;h++){var w=f[h];null!=w&&(v[w]=1)}}return Object.keys(v)}(x,b).sort(),"category ascending"===i?x._initialCategories=l:"category descending"===i&&(x._initialCategories=l.reverse()))}}},{}],560:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../lib"),T=_("../../constants/numerical"),b=T.ONEDAY,e=T.ONEWEEK;ae.dtick=function(o,a){var l="log"===a,i="date"===a,d="category"===a,u=i?b:1;if(!o)return u;if(m(o))return(o=Number(o))<=0?u:d?Math.max(1,Math.round(o)):i?Math.max(.1,o):o;if("string"!=typeof o||!i&&!l)return u;var s=o.charAt(0),c=o.substr(1);return(c=m(c)?Number(c):0)<=0||!(i&&"M"===s&&c===Math.round(c)||l&&"L"===s||l&&"D"===s&&(1===c||2===c))?u:o},ae.tick0=function(o,a,l,i){return"date"===a?x.cleanDate(o,x.dateTick0(l,i%e==0?1:0)):"D1"!==i&&"D2"!==i?m(o)?Number(o):0:void 0}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],561:[function(_,oe,ae){"use strict";var m=_("../../lib/regex").counter;oe.exports={idRegex:{x:m("x","( domain)?"),y:m("y","( domain)?")},attrRegex:m("[xy]axis"),xAxisMatch:m("xaxis"),yAxisMatch:m("yaxis"),AX_ID_PATTERN:/^[xyz][0-9]*( domain)?$/,AX_NAME_PATTERN:/^[xyz]axis[0-9]*$/,SUBPLOT_PATTERN:/^x([0-9]*)y([0-9]*)$/,HOUR_PATTERN:"hour",WEEKDAY_PATTERN:"day of week",MINDRAG:8,MINSELECT:12,MINZOOM:20,DRAGGERSIZE:20,BENDPX:1.5,REDRAWDELAY:50,SELECTDELAY:100,SELECTID:"-select",DFLTRANGEX:[-1,6],DFLTRANGEY:[-1,4],traceLayerClasses:["imagelayer","heatmaplayer","contourcarpetlayer","contourlayer","funnellayer","waterfalllayer","barlayer","carpetlayer","violinlayer","boxlayer","ohlclayer","scattercarpetlayer","scatterlayer"],clipOnAxisFalseQuery:[".scatterlayer",".barlayer",".funnellayer",".waterfalllayer"],layerValue2layerClass:{"above traces":"above","below traces":"below"}}},{"../../lib/regex":520}],562:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./autorange"),T=_("./axis_ids").id2name,b=_("./layout_attributes"),e=_("./scale_zoom"),o=_("./set_convert"),a=_("../../constants/numerical").ALMOST_EQUAL,l=_("../../constants/alignment").FROM_BL;function i(v,g,f){var w=f.axIds,y=f.layoutOut,M=f.hasImage,A=y._axisConstraintGroups,k=y._axisMatchGroups,C=g._id,P=C.charAt(0),D=((y._splomAxes||{})[P]||{})[C]||{},F=g._id,R="x"===F.charAt(0);function L(ie,q){return m.coerce(v,g,b,ie,q)}g._matchGroup=null,g._constraintGroup=null,L("constrain",M?"domain":"range"),m.coerce(v,g,{constraintoward:{valType:"enumerated",values:R?["left","center","right"]:["bottom","middle","top"],dflt:R?"center":"middle"}},"constraintoward");var I,B,V=g.type,Z=[];for(I=0;I<w.length;I++)(B=w[I])!==F&&y[T(B)].type===V&&Z.push(B);var Y=u(A,F);if(Y){var ee=[];for(I=0;I<Z.length;I++)Y[B=Z[I]]||ee.push(B);Z=ee}var J,$,Q=Z.length;Q&&(v.matches||D.matches)&&(J=m.coerce(v,g,{matches:{valType:"enumerated",values:Z,dflt:-1!==Z.indexOf(D.matches)?D.matches:void 0}},"matches"));var se=M&&!R?g.anchor:void 0;if(Q&&!J&&(v.scaleanchor||se)&&($=m.coerce(v,g,{scaleanchor:{valType:"enumerated",values:Z}},"scaleanchor",se)),J){g._matchGroup=s(k,F,J,1);var j=y[T(J)],G=d(y,g)/d(y,j);R!==("x"===J.charAt(0))&&(G=(R?"x":"y")+G),s(A,F,J,G)}else v.matches&&-1!==w.indexOf(v.matches)&&m.warn("ignored "+g._name+'.matches: "'+v.matches+'" to avoid an infinite loop');if($){var W=L("scaleratio");W||(W=g.scaleratio=1),s(A,F,$,W)}else v.scaleanchor&&-1!==w.indexOf(v.scaleanchor)&&m.warn("ignored "+g._name+'.scaleanchor: "'+v.scaleanchor+'" to avoid either an infinite loop and possibly inconsistent scaleratios, or because this axis declares a *matches* constraint.')}function d(v,g){var f=g.domain;return f||(f=v[T(g.overlaying)].domain),f[1]-f[0]}function u(v,g){for(var f=0;f<v.length;f++)if(v[f][g])return v[f];return null}function s(v,g,f,w){var y,M,A,k,C,P=u(v,g);null===P?((P={})[g]=1,C=v.length,v.push(P)):C=v.indexOf(P);var D=Object.keys(P);for(y=0;y<v.length;y++)if(A=v[y],y!==C&&A[f]){var F=A[f];for(M=0;M<D.length;M++)A[k=D[M]]=c(F,c(w,P[k]));return void v.splice(C,1)}if(1!==w)for(M=0;M<D.length;M++){var R=D[M];P[R]=c(w,P[R])}P[f]=1}function c(v,g){var f,w,y="",M="";"string"==typeof v&&(f=(y=v.match(/^[xy]*/)[0]).length,v=+v.substr(f)),"string"==typeof g&&(w=(M=g.match(/^[xy]*/)[0]).length,g=+g.substr(w));var A=v*g;return f||w?f&&w&&y.charAt(0)!==M.charAt(0)?f===w?A:(f>w?y.substr(w):M.substr(f))+A:y+M+v*g:A}function h(v,g){for(var f=g._size,w=f.h/f.w,y={},M=Object.keys(v),A=0;A<M.length;A++){var k=M[A],C=v[k];if("string"==typeof C){var P=C.match(/^[xy]*/)[0],D=P.length;C=+C.substr(D);for(var F="y"===P.charAt(0)?w:1/w,R=0;R<D;R++)C*=F}y[k]=C}return y}function p(v,g){var f=v._inputDomain,y=f[0]+(f[1]-f[0])*l[v.constraintoward];v.domain=v._input.domain=[y+(f[0]-y)/g,y+(f[1]-y)/g],v.setScale()}ae.handleDefaults=function(v,g,f){var w,y,M,A,k,C,P,D,F=f.axIds,R=f.axHasImage,L=g._axisConstraintGroups=[],I=g._axisMatchGroups=[];for(w=0;w<F.length;w++)i(k=v[A=T(F[w])],C=g[A],{axIds:F,layoutOut:g,hasImage:R[A]});function B(j,G){for(w=0;w<j.length;w++)for(M in y=j[w])g[T(M)][G]=y}for(B(I,"_matchGroup"),w=0;w<L.length;w++)for(M in y=L[w])if((C=g[T(M)]).fixedrange){for(var V in y){var Z=T(V);!1===(v[Z]||{}).fixedrange&&m.warn("fixedrange was specified as false for axis "+Z+" but was overridden because another axis in its constraint group has fixedrange true"),g[Z].fixedrange=!0}break}for(w=0;w<L.length;){for(M in y=L[w]){(C=g[T(M)])._matchGroup&&Object.keys(C._matchGroup).length===Object.keys(y).length&&(L.splice(w,1),w--);break}w++}B(L,"_constraintGroup");var Y=["constrain","range","autorange","rangemode","rangebreaks","categoryorder","categoryarray"],ee=!1,J=!1;function $(){D=C[P],"rangebreaks"===P&&(J=C._hasDayOfWeekBreaks)}for(w=0;w<I.length;w++){y=I[w];for(var Q=0;Q<Y.length;Q++){var se;for(M in P=Y[Q],D=null,y)if(k=v[A=T(M)],P in(C=g[A])){if(!C.matches&&(se=C,P in k)){$();break}null===D&&P in k&&$()}if("range"===P&&D&&(ee=!0),"autorange"===P&&null===D&&ee&&(D=!1),null===D&&P in se&&(D=se[P]),null!==D)for(M in y)(C=g[T(M)])[P]="range"===P?D.slice():D,"rangebreaks"===P&&(C._hasDayOfWeekBreaks=J,o(C,g))}}},ae.enforce=function(v){var g,f,w,y,M,A,k,C,P=v._fullLayout,D=P._axisConstraintGroups||[];for(g=0;g<D.length;g++){w=h(D[g],P);var F=Object.keys(w),R=1/0,L=0,I=1/0,B={},V={},Z=!1;for(f=0;f<F.length;f++)V[y=F[f]]=M=P[T(y)],M._inputDomain?M.domain=M._inputDomain.slice():M._inputDomain=M.domain.slice(),M._inputRange||(M._inputRange=M.range.slice()),M.setScale(),B[y]=A=Math.abs(M._m)/w[y],R=Math.min(R,A),"domain"!==M.constrain&&M._constraintShrinkable||(I=Math.min(I,A)),delete M._constraintShrinkable,L=Math.max(L,A),"domain"===M.constrain&&(Z=!0);if(!(R>a*L)||Z)for(f=0;f<F.length;f++)if(A=B[y=F[f]],k=(M=V[y]).constrain,A!==I||"domain"===k)if(C=A/I,"range"===k)e(M,C);else{var Y=M._inputDomain,ee=(M.domain[1]-M.domain[0])/(Y[1]-Y[0]),J=(M.r2l(M.range[1])-M.r2l(M.range[0]))/(M.r2l(M._inputRange[1])-M.r2l(M._inputRange[0]));if((C/=ee)*J<1){M.domain=M._input.domain=Y.slice(),e(M,C);continue}if(J<1&&(M.range=M._input.range=M._inputRange.slice(),C*=J),M.autorange){var $=M.r2l(M.range[0]),Q=M.r2l(M.range[1]),se=($+Q)/2,j=se,G=se,W=Math.abs(Q-se),ie=se-W*C*1.0001,q=se+W*C*1.0001,te=x.makePadFn(P,M,0),ne=x.makePadFn(P,M,1);p(M,C);var le,ue,de=Math.abs(M._m),he=x.concatExtremes(v,M),be=he.min,ge=he.max;for(ue=0;ue<be.length;ue++)(le=be[ue].val-te(be[ue])/de)>ie&&le<j&&(j=le);for(ue=0;ue<ge.length;ue++)(le=ge[ue].val+ne(ge[ue])/de)<q&&le>G&&(G=le);C/=(G-j)/(2*W),j=M.l2r(j),G=M.l2r(G),M.range=M._input.range=$<Q?[j,G]:[G,j]}p(M,C)}}},ae.getAxisGroup=function(v,g){for(var f=v._axisMatchGroups,w=0;w<f.length;w++)if(f[w][g])return"g"+w;return g},ae.clean=function(v,g){if(g._inputDomain){for(var f=!1,w=g._id,y=v._fullLayout._axisConstraintGroups,M=0;M<y.length;M++)if(y[M][w]){f=!0;break}f&&"domain"===g.constrain||(g._input.domain=g.domain=g._inputDomain,delete g._inputDomain)}}},{"../../constants/alignment":471,"../../constants/numerical":479,"../../lib":503,"./autorange":553,"./axis_ids":558,"./layout_attributes":569,"./scale_zoom":574,"./set_convert":576}],563:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../lib"),T=x.numberFormat,b=_("tinycolor2"),e=_("has-passive-events"),o=_("../../registry"),a=x.strTranslate,l=_("../../lib/svg_text_utils"),i=_("../../components/color"),d=_("../../components/drawing"),u=_("../../components/fx"),s=_("./axes"),c=_("../../lib/setcursor"),h=_("../../components/dragelement"),p=_("../../components/dragelement/helpers"),v=p.selectingOrDrawing,g=p.freeMode,f=_("../../constants/alignment").FROM_TL,w=_("../../lib/clear_gl_canvases"),y=_("../../plot_api/subroutines").redrawReglTraces,M=_("../plots"),A=_("./axis_ids").getFromId,k=_("./select").prepSelect,C=_("./select").clearSelect,P=_("./select").selectOnClick,D=_("./scale_zoom"),F=_("./constants"),R=F.MINDRAG,L=F.MINZOOM,I=!0;function B(le,ue,de,he){var be=x.ensureSingle(le.draglayer,ue,de,function(ge){ge.classed("drag",!0).style({fill:"transparent","stroke-width":0}).attr("data-subplot",le.id)});return be.call(c,he),be.node()}function V(le,ue,de,he,be,ge,we){var Ce=B(le,"rect",ue,de);return m.select(Ce).call(d.setRect,he,be,ge,we),Ce}function Z(le,ue){for(var de=0;de<le.length;de++)if(!le[de].fixedrange)return ue;return""}function Y(le,ue,de,he,be){for(var ge=0;ge<le.length;ge++){var we=le[ge];if(!we.fixedrange)if(we.rangebreaks){var Ce="y"===we._id.charAt(0),Se=Ce?1-de:de;he[we._name+".range[0]"]=we.l2r(we.p2l((Ce?1-ue:ue)*we._length)),he[we._name+".range[1]"]=we.l2r(we.p2l(Se*we._length))}else{var Fe=we._rl[0],ve=we._rl[1]-Fe;he[we._name+".range[0]"]=we.l2r(Fe+ve*ue),he[we._name+".range[1]"]=we.l2r(Fe+ve*de)}}if(be&&be.length){var Te=(ue+(1-de))/2;Y(be,Te,1-Te,he,[])}}function ee(le,ue){for(var de=0;de<le.length;de++){var he=le[de];if(!he.fixedrange)if(he.rangebreaks){var be=he._length,ge=(he.p2l(0+ue)-he.p2l(0)+(he.p2l(be+ue)-he.p2l(be)))/2;he.range=[he.l2r(he._rl[0]-ge),he.l2r(he._rl[1]-ge)]}else he.range=[he.l2r(he._rl[0]-ue/he._m),he.l2r(he._rl[1]-ue/he._m)]}}function J(le){return 1-(le>=0?Math.min(le,.9):1/(1/Math.max(le,-.3)+3.222))}function $(le,ue,de,he,be){return le.append("path").attr("class","zoombox").style({fill:ue>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("transform",a(de,he)).attr("d",be+"Z")}function Q(le,ue,de){return le.append("path").attr("class","zoombox-corners").style({fill:i.background,stroke:i.defaultLine,"stroke-width":1,opacity:0}).attr("transform",a(ue,de)).attr("d","M0,0Z")}function se(le,ue,de,he,be,ge){le.attr("d",he+"M"+de.l+","+de.t+"v"+de.h+"h"+de.w+"v-"+de.h+"h-"+de.w+"Z"),j(le,ue,be,ge)}function j(le,ue,de,he){de||(le.transition().style("fill",he>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),ue.transition().style("opacity",1).duration(200))}function G(le){m.select(le).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}function W(le){I&&le.data&&le._context.showTips&&(x.notifier(x._(le,"Double-click to zoom back out"),"long"),I=!1)}function ie(le){var ue=Math.floor(Math.min(le.b-le.t,le.r-le.l,L)/2);return"M"+(le.l-3.5)+","+(le.t-.5+ue)+"h3v"+-ue+"h"+ue+"v-3h-"+(ue+3)+"ZM"+(le.r+3.5)+","+(le.t-.5+ue)+"h-3v"+-ue+"h"+-ue+"v-3h"+(ue+3)+"ZM"+(le.r+3.5)+","+(le.b+.5-ue)+"h-3v"+ue+"h"+-ue+"v3h"+(ue+3)+"ZM"+(le.l-3.5)+","+(le.b+.5-ue)+"h3v"+ue+"h"+ue+"v3h-"+(ue+3)+"Z"}function q(le,ue,de,he,be){for(var ge,we,Ce,De,Se=!1,Fe={},ve={},Te=(be||{}).xaHash,Le=(be||{}).yaHash,Ee=0;Ee<ue.length;Ee++){var Pe=ue[Ee];for(ge in de)if(Pe[ge]){for(Ce in Pe)be&&(Te[Ce]||Le[Ce])||("x"===Ce.charAt(0)?de:he)[Ce]||(Fe[Ce]=ge);for(we in he)be&&(Te[we]||Le[we])||!Pe[we]||(Se=!0)}for(we in he)if(Pe[we])for(De in Pe)be&&(Te[De]||Le[De])||("x"===De.charAt(0)?de:he)[De]||(ve[De]=we)}Se&&(x.extendFlat(Fe,ve),ve={});var je={},Ge=[];for(Ce in Fe){var Ke=A(le,Ce);Ge.push(Ke),je[Ke._id]=Ke}var lt={},Ue=[];for(De in ve){var $e=A(le,De);Ue.push($e),lt[$e._id]=$e}return{xaHash:je,yaHash:lt,xaxes:Ge,yaxes:Ue,xLinks:Fe,yLinks:ve,isSubplotConstrained:Se}}function te(le,ue){if(e){var de=void 0!==le.onwheel?"wheel":"mousewheel";le._onwheel&&le.removeEventListener(de,le._onwheel),le._onwheel=ue,le.addEventListener(de,ue,{passive:!1})}else void 0!==le.onwheel?le.onwheel=ue:void 0!==le.onmousewheel?le.onmousewheel=ue:le.isAddedWheelEvent||(le.isAddedWheelEvent=!0,le.addEventListener("wheel",ue,{passive:!1}))}function ne(le){var ue=[];for(var de in le)ue.push(le[de]);return ue}oe.exports={makeDragBox:function(le,ue,de,he,be,ge,we,Ce){var De,Se,Fe,ve,Te,Le,Ee,Pe,je,Ge,Ke,lt,Ue,$e,et,tt,ct,xt,Ct,Ht,zt,ht,ut,Ot=le._fullLayout._zoomlayer,tn=we+Ce==="nsew",un=1===(we+Ce).length;function Ze(){if(je=(De=ue.xaxis)._length,Ge=(Se=ue.yaxis)._length,Ee=De._offset,Pe=Se._offset,(Fe={})[De._id]=De,(ve={})[Se._id]=Se,we&&Ce)for(var Tn=ue.overlays,pn=0;pn<Tn.length;pn++){var En=Tn[pn].xaxis;Fe[En._id]=En;var Un=Tn[pn].yaxis;ve[Un._id]=Un}Te=ne(Fe),Le=ne(ve),Ue=Z(Te,Ce),$e=Z(Le,we),et=!$e&&!Ue,lt=q(le,le._fullLayout._axisMatchGroups,Fe,ve);var In=(Ke=q(le,le._fullLayout._axisConstraintGroups,Fe,ve,lt)).isSubplotConstrained||lt.isSubplotConstrained;tt=Ce||In,ct=we||In;var sr=le._fullLayout;xt=sr._has("scattergl"),Ct=sr._has("splom"),Ht=sr._has("svg")}Ze();var Tn,Qe=(Tn=$e+Ue)?"nsew"===Tn?tn?"":"pan"===le._fullLayout.dragmode?"move":"crosshair":Tn.toLowerCase()+"-resize":"pointer",qe=V(ue,we+Ce+"drag",Qe,de,he,be,ge);if(et&&!tn)return qe.onmousedown=null,qe.style.pointerEvents="none",qe;var it,Ie,ze,Ve,Be,at,gt,wt,_t,Rt,yt={element:qe,gd:le,plotinfo:ue};function Vt(){yt.plotinfo.selection=!1,C(le)}function Nt(Tn,pn){var Ar,pr,Fn,Rn,hr,En=yt.gd;if(En._fullLayout._activeShapeIndex>=0)En._fullLayout._deactivateShape(En);else{var Un=En._fullLayout.clickmode;if(G(En),2!==Tn||un||function _n(){if(!le._transitioningWithDuration){var Tn=le._context.doubleClick,pn=[];Ue&&(pn=pn.concat(Te)),$e&&(pn=pn.concat(Le)),lt.xaxes&&(pn=pn.concat(lt.xaxes)),lt.yaxes&&(pn=pn.concat(lt.yaxes));var En,Un,In,sr={};if("reset+autosize"===Tn)for(Tn="autosize",Un=0;Un<pn.length;Un++)if((En=pn[Un])._rangeInitial&&(En.range[0]!==En._rangeInitial[0]||En.range[1]!==En._rangeInitial[1])||!En._rangeInitial&&!En.autorange){Tn="reset";break}if("autosize"===Tn)for(Un=0;Un<pn.length;Un++)(En=pn[Un]).fixedrange||(sr[En._name+".autorange"]=!0);else if("reset"===Tn)for((Ue||Ke.isSubplotConstrained)&&(pn=pn.concat(Ke.xaxes)),$e&&!Ke.isSubplotConstrained&&(pn=pn.concat(Ke.yaxes)),Ke.isSubplotConstrained&&(Ue?$e||(pn=pn.concat(Le)):pn=pn.concat(Te)),Un=0;Un<pn.length;Un++)(En=pn[Un]).fixedrange||(En._rangeInitial?(sr[En._name+".range[0]"]=(In=En._rangeInitial)[0],sr[En._name+".range[1]"]=In[1]):sr[En._name+".autorange"]=!0);le.emit("plotly_doubleclick",null),o.call("_guiRelayout",le,sr)}}(),tn)Un.indexOf("select")>-1&&P(pn,En,Te,Le,ue.id,yt),Un.indexOf("event")>-1&&u.click(En,pn,ue.id);else if(1===Tn&&un){var In=we?Se:De,sr="s"===we||"w"===Ce?0:1,fr=In._name+".range["+sr+"]",rr=(Rn=(Ar=In).range[pr=sr],hr=Math.abs(Rn-Ar.range[1-pr]),"date"===Ar.type?Rn:"log"===Ar.type?(Fn=Math.ceil(Math.max(0,-Math.log(hr)/Math.LN10))+3,T("."+Fn+"g")(Math.pow(10,Rn))):(Fn=Math.floor(Math.log(Math.abs(Rn))/Math.LN10)-Math.floor(Math.log(hr)/Math.LN10)+4,T("."+String(Fn)+"g")(Rn))),qr="left",ti="middle";if(In.fixedrange)return;we?(ti="n"===we?"top":"bottom","right"===In.side&&(qr="right")):"e"===Ce&&(qr="right"),En._context.showAxisRangeEntryBoxes&&m.select(qe).call(l.makeEditable,{gd:En,immediate:!0,background:En._fullLayout.paper_bgcolor,text:String(rr),fill:In.tickfont?In.tickfont.color:"#444",horizontalAlign:qr,verticalAlign:ti}).on("edit",function(Ar){var pr=In.d2r(Ar);void 0!==pr&&o.call("_guiRelayout",En,fr,pr)})}}}function rt(Tn,pn){if(le._transitioningWithDuration)return!1;var ti,Ar,En=Math.max(0,Math.min(je,ht*Tn+it)),Un=Math.max(0,Math.min(Ge,ut*pn+Ie)),In=Math.abs(En-it),sr=Math.abs(Un-Ie);function fr(){gt="",ze.r=ze.l,ze.t=ze.b,_t.attr("d","M0,0Z")}if(ze.l=Math.min(it,En),ze.r=Math.max(it,En),ze.t=Math.min(Ie,Un),ze.b=Math.max(Ie,Un),Ke.isSubplotConstrained)In>L||sr>L?(gt="xy",In/je>sr/Ge?(sr=In*Ge/je,Ie>Un?ze.t=Ie-sr:ze.b=Ie+sr):(In=sr*je/Ge,it>En?ze.l=it-In:ze.r=it+In),_t.attr("d",ie(ze))):fr();else if(lt.isSubplotConstrained)if(In>L||sr>L){gt="xy";var rr=Math.min(ze.l/je,(Ge-ze.b)/Ge),qr=Math.max(ze.r/je,(Ge-ze.t)/Ge);ze.l=rr*je,ze.r=qr*je,ze.b=(1-rr)*Ge,ze.t=(1-qr)*Ge,_t.attr("d",ie(ze))}else fr();else!$e||sr<Math.min(Math.max(.6*In,R),L)?In<R||!Ue?fr():(ze.t=0,ze.b=Ge,gt="x",_t.attr("d","M"+((ti=ze).l-.5)+","+((Ar=Ie)-L-.5)+"h-3v"+(2*L+1)+"h3ZM"+(ti.r+.5)+","+(Ar-L-.5)+"h3v"+(2*L+1)+"h-3Z")):!Ue||In<Math.min(.6*sr,L)?(ze.l=0,ze.r=je,gt="y",_t.attr("d",function(ti,Ar){return"M"+(Ar-L-.5)+","+(ti.t-.5)+"v-3h"+(2*L+1)+"v3ZM"+(Ar-L-.5)+","+(ti.b+.5)+"v3h"+(2*L+1)+"v-3Z"}(ze,it))):(gt="xy",_t.attr("d",ie(ze)));ze.w=ze.r-ze.l,ze.h=ze.b-ze.t,gt&&(Rt=!0),le._dragged=Rt,se(wt,_t,ze,Be,at,Ve),Tt(),le.emit("plotly_relayouting",zt),at=!0}function Tt(){zt={},"xy"!==gt&&"x"!==gt||(Y(Te,ze.l/je,ze.r/je,zt,Ke.xaxes),Gt("x",zt)),"xy"!==gt&&"y"!==gt||(Y(Le,(Ge-ze.b)/Ge,(Ge-ze.t)/Ge,zt,Ke.yaxes),Gt("y",zt))}function Ut(){Tt(),G(le),en(),W(le)}yt.prepFn=function(Tn,pn,En){var Un=yt.dragmode,In=le._fullLayout.dragmode;In!==Un&&(yt.dragmode=In),Ze(),ht=le._fullLayout._invScaleX,ut=le._fullLayout._invScaleY,et||(tn?Tn.shiftKey?"pan"===In?In="zoom":v(In)||(In="pan"):Tn.ctrlKey&&(In="pan"):In="pan"),yt.minDrag=g(In)?1:void 0,v(In)?(yt.xaxes=Te,yt.yaxes=Le,k(Tn,pn,En,yt,In)):(yt.clickFn=Nt,v(Un)&&Vt(),et||("zoom"===In?(yt.moveFn=rt,yt.doneFn=Ut,yt.minDrag=1,function(sr,fr,rr){var qr=qe.getBoundingClientRect();it=fr-qr.left,Ie=rr-qr.top,le._fullLayout._calcInverseTransform(le);var ti=x.apply3DTransform(le._fullLayout._invTransform)(it,Ie);ze={l:it=ti[0],r:it,w:0,t:Ie=ti[1],b:Ie,h:0},Ve=le._hmpixcount?le._hmlumcount/le._hmpixcount:b(le._fullLayout.plot_bgcolor).getLuminance(),at=!1,gt="xy",Rt=!1,wt=$(Ot,Ve,Ee,Pe,Be="M0,0H"+je+"V"+Ge+"H0V0"),_t=Q(Ot,Ee,Pe)}(0,pn,En)):"pan"===In&&(yt.moveFn=Lt,yt.doneFn=en))),le._fullLayout._redrag=function(){var sr=le._dragdata;sr&&sr.element===qe&&(v(le._fullLayout.dragmode)||(Ze(),on([0,0,je,Ge]),yt.moveFn(sr.dx,sr.dy)))}},h.init(yt);var Wt=[0,0,je,Ge],sn=null,He=F.REDRAWDELAY,vt=ue.mainplot?le._fullLayout._plots[ue.mainplot]:ue;function Lt(Tn,pn){if(Tn*=ht,pn*=ut,!le._transitioningWithDuration){if(le._fullLayout._replotting=!0,"ew"===Ue||"ns"===$e){var En=Ue?-Tn:0,Un=$e?-pn:0;if(lt.isSubplotConstrained){if(Ue&&$e){var In=(Tn/je-pn/Ge)/2;En=-(Tn=In*je),Un=-(pn=-In*Ge)}$e?En=-Un*je/Ge:Un=-En*Ge/je}return Ue&&(ee(Te,Tn),Gt("x")),$e&&(ee(Le,pn),Gt("y")),on([En,Un,je,Ge]),Kt(),void le.emit("plotly_relayouting",zt)}var sr,fr,rr="w"===Ue==("n"===$e)?1:-1;if(Ue&&$e&&(Ke.isSubplotConstrained||lt.isSubplotConstrained)){var qr=(Tn/je+rr*pn/Ge)/2;Tn=qr*je,pn=rr*qr*Ge}if("w"===Ue?Tn=Fn(Te,0,Tn):"e"===Ue?Tn=Fn(Te,1,-Tn):Ue||(Tn=0),"n"===$e?pn=Fn(Le,1,pn):"s"===$e?pn=Fn(Le,0,-pn):$e||(pn=0),sr="w"===Ue?Tn:0,fr="n"===$e?pn:0,Ke.isSubplotConstrained&&!lt.isSubplotConstrained||lt.isSubplotConstrained&&Ue&&$e&&rr>0){var ti;if(lt.isSubplotConstrained||!Ue&&1===$e.length){for(ti=0;ti<Te.length;ti++)Te[ti].range=Te[ti]._r.slice(),D(Te[ti],1-pn/Ge);sr=(Tn=pn*je/Ge)/2}if(lt.isSubplotConstrained||!$e&&1===Ue.length){for(ti=0;ti<Le.length;ti++)Le[ti].range=Le[ti]._r.slice(),D(Le[ti],1-Tn/je);fr=(pn=Tn*Ge/je)/2}}lt.isSubplotConstrained&&$e||Gt("x"),lt.isSubplotConstrained&&Ue||Gt("y");var Ar=je-Tn,pr=Ge-pn;!lt.isSubplotConstrained||Ue&&$e||(Ue?(fr=sr?0:Tn*Ge/je,pr=Ar*Ge/je):(sr=fr?0:pn*je/Ge,Ar=pr*je/Ge)),on([sr,fr,Ar,pr]),Kt(),le.emit("plotly_relayouting",zt)}function Fn(Rn,hr,ri){for(var ir,Ur,Mr=1-hr,wr=0;wr<Rn.length;wr++){var ii=Rn[wr];if(!ii.fixedrange){ir=ii,Ur=ii._rl[Mr]+(ii._rl[hr]-ii._rl[Mr])/J(ri/ii._length);var gn=ii.l2r(Ur);!1!==gn&&void 0!==gn&&(ii.range[hr]=gn)}}return ir._length*(ir._rl[hr]-Ur)/(ir._rl[hr]-ir._rl[Mr])}}function Gt(Tn,pn){for(var En=lt.isSubplotConstrained?{x:Le,y:Te}[Tn]:lt[Tn+"axes"],Un=lt.isSubplotConstrained?{x:Te,y:Le}[Tn]:[],In=0;In<En.length;In++){var sr=En[In],fr=sr._id,rr=lt.xLinks[fr]||lt.yLinks[fr],qr=Un[0]||Fe[rr]||ve[rr];qr&&(pn?(pn[sr._name+".range[0]"]=pn[qr._name+".range[0]"],pn[sr._name+".range[1]"]=pn[qr._name+".range[1]"]):sr.range=qr.range.slice())}}function Kt(){var Tn,pn=[];function En(sr){for(Tn=0;Tn<sr.length;Tn++)sr[Tn].fixedrange||pn.push(sr[Tn]._id)}for(tt&&(En(Te),En(Ke.xaxes),En(lt.xaxes)),ct&&(En(Le),En(Ke.yaxes),En(lt.yaxes)),zt={},Tn=0;Tn<pn.length;Tn++){var In=A(le,pn[Tn]);s.drawOne(le,In,{skipTitle:!0}),zt[In._name+".range[0]"]=In.range[0],zt[In._name+".range[1]"]=In.range[1]}s.redrawComponents(le,pn)}function en(){on([0,0,je,Ge]),x.syncOrAsync([M.previousPromises,function(){le._fullLayout._replotting=!1,o.call("_guiRelayout",le,zt)}],le)}function on(Tn){var pn,En,Un,In,sr=le._fullLayout,fr=sr._plots,rr=sr._subplots.cartesian;if(Ct&&o.subplotsRegistry.splom.drag(le),xt)for(pn=0;pn<rr.length;pn++)if(Un=(En=fr[rr[pn]]).xaxis,In=En.yaxis,En._scene){var qr=x.simpleMap(Un.range,Un.r2l),ti=x.simpleMap(In.range,In.r2l);En._scene.update({range:[qr[0],ti[0],qr[1],ti[1]]})}if((Ct||xt)&&(w(le),y(le)),Ht){var Ar=Tn[2]/De._length,pr=Tn[3]/Se._length;for(pn=0;pn<rr.length;pn++){Un=(En=fr[rr[pn]]).xaxis,In=En.yaxis;var Fn,Rn,hr,ri,Ur=(ct||lt.isSubplotConstrained)&&!In.fixedrange&&ve[In._id];if((tt||lt.isSubplotConstrained)&&!Un.fixedrange&&Fe[Un._id]?(Fn=Ar,hr=Ce||lt.isSubplotConstrained?Tn[0]:Dn(Un,Fn)):lt.xaHash[Un._id]?(Fn=Ar,hr=Tn[0]*Un._length/De._length):lt.yaHash[Un._id]?(Fn=pr,hr="ns"===$e?-Tn[1]*Un._length/Se._length:Dn(Un,Fn,{n:"top",s:"bottom"}[$e])):hr=On(Un,Fn=wn(Un,Ar,pr)),Ur?(Rn=pr,ri=we||lt.isSubplotConstrained?Tn[1]:Dn(In,Rn)):lt.yaHash[In._id]?(Rn=pr,ri=Tn[1]*In._length/Se._length):lt.xaHash[In._id]?(Rn=Ar,ri="ew"===Ue?-Tn[0]*In._length/De._length:Dn(In,Rn,{e:"right",w:"left"}[Ue])):ri=On(In,Rn=wn(In,Ar,pr)),Fn||Rn){Fn||(Fn=1),Rn||(Rn=1);var Mr=Un._offset-hr/Fn,wr=In._offset-ri/Rn;En.clipRect.call(d.setTranslate,hr,ri).call(d.setScale,Fn,Rn),En.plot.call(d.setTranslate,Mr,wr).call(d.setScale,1/Fn,1/Rn),Fn===En.xScaleFactor&&Rn===En.yScaleFactor||(d.setPointGroupScale(En.zoomScalePts,Fn,Rn),d.setTextPointsScale(En.zoomScaleTxt,Fn,Rn)),d.hideOutsideRangePoints(En.clipOnAxisFalseTraces,En),En.xScaleFactor=Fn,En.yScaleFactor=Rn}}}}function wn(Tn,pn,En){return Tn.fixedrange?0:tt&&Ke.xaHash[Tn._id]?pn:ct&&(Ke.isSubplotConstrained?Ke.xaHash:Ke.yaHash)[Tn._id]?En:0}function On(Tn,pn){return pn?(Tn.range=Tn._r.slice(),D(Tn,pn),Dn(Tn,pn)):0}function Dn(Tn,pn,En){return Tn._length*(1-pn)*f[En||Tn.constraintoward||"middle"]}return we.length*Ce.length!=1&&te(qe,function(Tn){if(le._context._scrollZoom.cartesian||le._fullLayout._enablescrollzoom){if(Vt(),le._transitioningWithDuration)return Tn.preventDefault(),void Tn.stopPropagation();Ze(),clearTimeout(sn);var pn=-Tn.deltaY;if(isFinite(pn)||(pn=Tn.wheelDelta/10),isFinite(pn)){var En,Un=Math.exp(-Math.min(Math.max(pn,-20),20)/200),In=vt.draglayer.select(".nsewdrag").node().getBoundingClientRect(),sr=(Tn.clientX-In.left)/In.width,fr=(In.bottom-Tn.clientY)/In.height;if(tt){for(Ce||(sr=.5),En=0;En<Te.length;En++)rr(Te[En],sr,Un);Gt("x"),Wt[2]*=Un,Wt[0]+=Wt[2]*sr*(1/Un-1)}if(ct){for(we||(fr=.5),En=0;En<Le.length;En++)rr(Le[En],fr,Un);Gt("y"),Wt[3]*=Un,Wt[1]+=Wt[3]*(1-fr)*(1/Un-1)}on(Wt),Kt(),le.emit("plotly_relayouting",zt),sn=setTimeout(function(){le._fullLayout&&(Wt=[0,0,je,Ge],en())},He),Tn.preventDefault()}else x.log("Did not find wheel motion attributes: ",Tn)}function rr(qr,ti,Ar){if(!qr.fixedrange){var pr=x.simpleMap(qr.range,qr.r2l),Fn=pr[0]+(pr[1]-pr[0])*ti;qr.range=pr.map(function(Rn){return qr.l2r(Fn+(Rn-Fn)*Ar)})}}}),qe},makeDragger:B,makeRectDragger:V,makeZoombox:$,makeCorners:Q,updateZoombox:se,xyCorners:ie,transitionZoombox:j,removeZoombox:G,showDoubleClickNotifier:W,attachWheelEventHandler:te}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../lib/svg_text_utils":529,"../../plot_api/subroutines":544,"../../registry":638,"../plots":619,"./axes":554,"./axis_ids":558,"./constants":561,"./scale_zoom":574,"./select":575,"@plotly/d3":58,"has-passive-events":229,tinycolor2:312}],564:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../components/fx"),T=_("../../components/dragelement"),b=_("../../lib/setcursor"),e=_("./dragbox").makeDragBox,o=_("./constants").DRAGGERSIZE;ae.initInteractions=function(a){var l=a._fullLayout;if(a._context.staticPlot)m.select(a).selectAll(".drag").remove();else if(l._has("cartesian")||l._has("splom")){Object.keys(l._plots||{}).sort(function(d,u){if((l._plots[d].mainplot&&!0)===(l._plots[u].mainplot&&!0)){var s=d.split("y"),c=u.split("y");return s[0]===c[0]?Number(s[1]||1)-Number(c[1]||1):Number(s[0]||1)-Number(c[0]||1)}return l._plots[d].mainplot?1:-1}).forEach(function(d){var u=l._plots[d],s=u.xaxis,c=u.yaxis;if(!u.mainplot){var h=e(a,u,s._offset,c._offset,s._length,c._length,"ns","ew");h.onmousemove=function(g){a._fullLayout._rehover=function(){a._fullLayout._hoversubplot===d&&a._fullLayout._plots[d]&&x.hover(a,g,d)},x.hover(a,g,d),a._fullLayout._lasthover=h,a._fullLayout._hoversubplot=d},h.onmouseout=function(g){a._dragging||(a._fullLayout._hoversubplot=null,T.unhover(a,g))},a._context.showAxisDragHandles&&(e(a,u,s._offset-o,c._offset-o,o,o,"n","w"),e(a,u,s._offset+s._length,c._offset-o,o,o,"n","e"),e(a,u,s._offset-o,c._offset+c._length,o,o,"s","w"),e(a,u,s._offset+s._length,c._offset+c._length,o,o,"s","e"))}if(a._context.showAxisDragHandles){if(d===s._mainSubplot){var p=s._mainLinePosition;"top"===s.side&&(p-=o),e(a,u,s._offset+.1*s._length,p,.8*s._length,o,"","ew"),e(a,u,s._offset,p,.1*s._length,o,"","w"),e(a,u,s._offset+.9*s._length,p,.1*s._length,o,"","e")}if(d===c._mainSubplot){var v=c._mainLinePosition;"right"!==c.side&&(v-=o),e(a,u,v,c._offset+.1*c._length,o,.8*c._length,"ns",""),e(a,u,v,c._offset+.9*c._length,o,.1*c._length,"s",""),e(a,u,v,c._offset,o,.1*c._length,"n","")}}});var i=l._hoverlayer.node();i.onmousemove=function(d){d.target=a._fullLayout._lasthover,x.hover(a,d,l._hoversubplot)},i.onclick=function(d){d.target=a._fullLayout._lasthover,x.click(a,d)},i.onmousedown=function(d){a._fullLayout._lasthover.onmousedown(d)},ae.updateFx(a)}},ae.updateFx=function(a){var l=a._fullLayout;b(l._draggers,"pan"===l.dragmode?"move":"crosshair")}},{"../../components/dragelement":385,"../../components/fx":406,"../../lib/setcursor":524,"./constants":561,"./dragbox":563,"@plotly/d3":58}],565:[function(_,oe,ae){"use strict";oe.exports={clearOutlineControllers:function(m){var x=m._fullLayout._zoomlayer;x&&x.selectAll(".outline-controllers").remove()},clearSelect:function(m){var x=m._fullLayout._zoomlayer;x&&x.selectAll(".select-outline").remove(),m._fullLayout._drawing=!1}}},{}],566:[function(_,oe,ae){"use strict";var m=_("../../lib").strTranslate;function x(T,b){switch(T.type){case"log":return T.p2d(b);case"date":return T.p2r(b,0,T.calendar);default:return T.p2r(b)}}oe.exports={p2r:x,r2p:function(T,b){switch(T.type){case"log":return T.d2p(b);case"date":return T.r2p(b,0,T.calendar);default:return T.r2p(b)}},axValue:function(T){var b="y"===T._id.charAt(0)?1:0;return function(e){return x(T,e[b])}},getTransform:function(T){return m(T.xaxis._offset,T.yaxis._offset)}}},{"../../lib":503}],567:[function(_,oe,ae){"use strict";var m=_("../../registry"),x=_("../../lib"),T=_("./axis_ids");oe.exports=function(b){return function(e,o){var a=e[b];if(Array.isArray(a))for(var l=m.subplotsRegistry.cartesian,i=l.idRegex,d=o._subplots,u=d.xaxis,s=d.yaxis,c=d.cartesian,h=o._has("cartesian")||o._has("gl2d"),p=0;p<a.length;p++){var v=a[p];if(x.isPlainObject(v)){var g=T.cleanId(v.xref,"x",!1),f=T.cleanId(v.yref,"y",!1),w=i.x.test(g),y=i.y.test(f);if(w||y){h||x.pushUnique(o._basePlotModules,l);var M=!1;w&&-1===u.indexOf(g)&&(u.push(g),M=!0),y&&-1===s.indexOf(f)&&(s.push(f),M=!0),M&&w&&y&&c.push(g+f)}}}}}},{"../../lib":503,"../../registry":638,"./axis_ids":558}],568:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../registry"),T=_("../../lib"),b=_("../plots"),e=_("../../components/drawing"),o=_("../get_data").getModuleCalcData,a=_("./axis_ids"),l=_("./constants"),i=_("../../constants/xmlns_namespaces"),d=T.ensureSingle;function u(v,g,f){return T.ensureSingle(v,g,f,function(w){w.datum(f)})}function s(v,g,f,w,y){for(var M,A,k,C=l.traceLayerClasses,P=v._fullLayout,D=P._modules,F=[],R=[],L=0;L<D.length;L++){var I=(M=D[L]).name,B=x.modules[I].categories;if(B.svg){var V=M.layerName||I+"layer",Z=M.plot;k=(A=o(f,Z))[0],f=A[1],k.length&&F.push({i:C.indexOf(V),className:V,plotMethod:Z,cdModule:k}),B.zoomScale&&R.push("."+V)}}F.sort(function(J,$){return J.i-$.i});var Y=g.plot.selectAll("g.mlayer").data(F,function(J){return J.className});if(Y.enter().append("g").attr("class",function(J){return J.className}).classed("mlayer",!0).classed("rangeplot",g.isRangePlot),Y.exit().remove(),Y.order(),Y.each(function(J){var $=m.select(this),Q=J.className;J.plotMethod(v,g,J.cdModule,$,w,y),-1===l.clipOnAxisFalseQuery.indexOf("."+Q)&&e.setClipUrl($,g.layerClipId,v)}),P._has("scattergl")&&(M=x.getModule("scattergl"),k=o(f,M)[0],M.plot(v,g,k)),!v._context.staticPlot&&(g._hasClipOnAxisFalse&&(g.clipOnAxisFalseTraces=g.plot.selectAll(l.clipOnAxisFalseQuery.join(",")).selectAll(".trace")),R.length)){var ee=g.plot.selectAll(R.join(",")).selectAll(".trace");g.zoomScalePts=ee.selectAll("path.point"),g.zoomScaleTxt=ee.selectAll(".textpoint")}}function c(v,g){var f=g.plotgroup,w=g.id,y=l.layerValue2layerClass[g.xaxis.layer],M=l.layerValue2layerClass[g.yaxis.layer],A=v._fullLayout._hasOnlyLargeSploms;if(g.mainplot){var k=g.mainplotinfo,C=k.plotgroup,P=w+"-x",D=w+"-y";g.gridlayer=k.gridlayer,g.zerolinelayer=k.zerolinelayer,d(k.overlinesBelow,"path",P),d(k.overlinesBelow,"path",D),d(k.overaxesBelow,"g",P),d(k.overaxesBelow,"g",D),g.plot=d(k.overplot,"g",w),d(k.overlinesAbove,"path",P),d(k.overlinesAbove,"path",D),d(k.overaxesAbove,"g",P),d(k.overaxesAbove,"g",D),g.xlines=C.select(".overlines-"+y).select("."+P),g.ylines=C.select(".overlines-"+M).select("."+D),g.xaxislayer=C.select(".overaxes-"+y).select("."+P),g.yaxislayer=C.select(".overaxes-"+M).select("."+D)}else if(A)g.xlines=d(f,"path","xlines-above"),g.ylines=d(f,"path","ylines-above"),g.xaxislayer=d(f,"g","xaxislayer-above"),g.yaxislayer=d(f,"g","yaxislayer-above");else{var F=d(f,"g","layer-subplot");g.shapelayer=d(F,"g","shapelayer"),g.imagelayer=d(F,"g","imagelayer"),g.gridlayer=d(f,"g","gridlayer"),g.zerolinelayer=d(f,"g","zerolinelayer"),d(f,"path","xlines-below"),d(f,"path","ylines-below"),g.overlinesBelow=d(f,"g","overlines-below"),d(f,"g","xaxislayer-below"),d(f,"g","yaxislayer-below"),g.overaxesBelow=d(f,"g","overaxes-below"),g.plot=d(f,"g","plot"),g.overplot=d(f,"g","overplot"),g.xlines=d(f,"path","xlines-above"),g.ylines=d(f,"path","ylines-above"),g.overlinesAbove=d(f,"g","overlines-above"),d(f,"g","xaxislayer-above"),d(f,"g","yaxislayer-above"),g.overaxesAbove=d(f,"g","overaxes-above"),g.xlines=f.select(".xlines-"+y),g.ylines=f.select(".ylines-"+M),g.xaxislayer=f.select(".xaxislayer-"+y),g.yaxislayer=f.select(".yaxislayer-"+M)}A||(u(g.gridlayer,"g",g.xaxis._id),u(g.gridlayer,"g",g.yaxis._id),g.gridlayer.selectAll("g").map(function(R){return R[0]}).sort(a.idSort)),g.xlines.style("fill","none").classed("crisp",!0),g.ylines.style("fill","none").classed("crisp",!0)}function h(v,g){if(v){var f={};for(var w in v.each(function(k){var C=k[0];m.select(this).remove(),p(C,g),f[C]=!0}),g._plots)for(var y=g._plots[w].overlays||[],M=0;M<y.length;M++){var A=y[M];f[A.id]&&A.plot.selectAll(".trace").remove()}}}function p(v,g){g._draggers.selectAll("g."+v).remove(),g._defs.select("#clip"+g._uid+v+"plot").remove()}ae.name="cartesian",ae.attr=["xaxis","yaxis"],ae.idRoot=["x","y"],ae.idRegex=l.idRegex,ae.attrRegex=l.attrRegex,ae.attributes=_("./attributes"),ae.layoutAttributes=_("./layout_attributes"),ae.supplyLayoutDefaults=_("./layout_defaults"),ae.transitionAxes=_("./transition_axes"),ae.finalizeSubplots=function(v,g){var f,w,y,M=g._subplots,A=M.xaxis,k=M.yaxis,C=M.cartesian,P=C.concat(M.gl2d||[]),D={},F={};for(f=0;f<P.length;f++){var R=P[f].split("y");D[R[0]]=1,F["y"+R[1]]=1}for(f=0;f<A.length;f++)D[w=A[f]]||(y=(v[a.id2name(w)]||{}).anchor,l.idRegex.y.test(y)||(y="y"),C.push(w+y),P.push(w+y),F[y]||(F[y]=1,T.pushUnique(k,y)));for(f=0;f<k.length;f++)F[y=k[f]]||(w=(v[a.id2name(y)]||{}).anchor,l.idRegex.x.test(w)||(w="x"),C.push(w+y),P.push(w+y),D[w]||(D[w]=1,T.pushUnique(A,w)));if(!P.length){for(var L in w="",y="",v)l.attrRegex.test(L)&&("x"===L.charAt(0)?(!w||+L.substr(5)<+w.substr(5))&&(w=L):(!y||+L.substr(5)<+y.substr(5))&&(y=L));w=w?a.name2id(w):"x",y=y?a.name2id(y):"y",A.push(w),k.push(y),C.push(w+y)}},ae.plot=function(v,g,f,w){var y,M=v._fullLayout,A=M._subplots.cartesian,k=v.calcdata;if(!Array.isArray(g))for(g=[],y=0;y<k.length;y++)g.push(y);for(y=0;y<A.length;y++){for(var C,P=A[y],D=M._plots[P],F=[],R=0;R<k.length;R++){var L=k[R],I=L[0].trace;I.xaxis+I.yaxis===P&&((-1!==g.indexOf(I.index)||I.carpet)&&(C&&C[0].trace.xaxis+C[0].trace.yaxis===P&&-1!==["tonextx","tonexty","tonext"].indexOf(I.fill)&&-1===F.indexOf(C)&&F.push(C),F.push(L)),C=L)}s(v,D,F,f,w)}},ae.clean=function(v,g,f,w){var y,M,A,k=w._plots||{},C=g._plots||{},P=w._subplots||{};if(w._hasOnlyLargeSploms&&!g._hasOnlyLargeSploms)for(A in k)(y=k[A]).plotgroup&&y.plotgroup.remove();var D=w._has&&w._has("gl"),F=g._has&&g._has("gl");if(D&&!F)for(A in k)(y=k[A])._scene&&y._scene.destroy();if(P.xaxis&&P.yaxis){var R=a.listIds({_fullLayout:w});for(M=0;M<R.length;M++){var L=R[M];g[a.id2name(L)]||w._infolayer.selectAll(".g-"+L+"title").remove()}}var I=w._has&&w._has("cartesian"),B=g._has&&g._has("cartesian");if(I&&!B)h(w._cartesianlayer.selectAll(".subplot"),w),w._defs.selectAll(".axesclip").remove(),delete w._axisConstraintGroups,delete w._axisMatchGroups;else if(P.cartesian)for(M=0;M<P.cartesian.length;M++){var V=P.cartesian[M];C[V]||(w._cartesianlayer.selectAll("."+V+",."+V+"-x,."+V+"-y").remove(),p(V,w))}},ae.drawFramework=function(v){var g=v._fullLayout,f=function(y){var M,A,k,C,P,D,F=y._fullLayout,R=F._subplots.cartesian,L=R.length,I=[],B=[];for(M=0;M<L;M++){var Y=(P=(C=F._plots[k=R[M]]).xaxis)._mainAxis._id+(D=C.yaxis)._mainAxis._id,ee=F._plots[Y];C.overlays=[],Y!==k&&ee?(C.mainplot=Y,C.mainplotinfo=ee,B.push(k)):(C.mainplot=void 0,C.mainplotinfo=void 0,I.push(k))}for(M=0;M<B.length;M++)(C=F._plots[k=B[M]]).mainplotinfo.overlays.push(C);var J=I.concat(B),$=new Array(L);for(M=0;M<L;M++){var Q=[k=J[M],(P=(C=F._plots[k]).xaxis).layer,(D=C.yaxis).layer,P.overlaying||"",D.overlaying||""];for(A=0;A<C.overlays.length;A++)Q.push(C.overlays[A].id);$[M]=Q}return $}(v),w=g._cartesianlayer.selectAll(".subplot").data(f,String);w.enter().append("g").attr("class",function(y){return"subplot "+y[0]}),w.order(),w.exit().call(h,g),w.each(function(y){var M=y[0],A=g._plots[M];A.plotgroup=m.select(this),c(v,A),A.draglayer=d(g._draggers,"g",M)})},ae.rangePlot=function(v,g,f){c(v,g),s(v,g,f),b.style(v)},ae.toSVG=function(v){var g=v._fullLayout._glimages,f=m.select(v).selectAll(".svg-container");f.filter(function(w,y){return y===f.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var w=this.toDataURL("image/png");g.append("svg:image").attr({xmlns:i.svg,"xlink:href":w,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})})},ae.updateFx=_("./graph_interact").updateFx},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../registry":638,"../get_data":593,"../plots":619,"./attributes":552,"./axis_ids":558,"./constants":561,"./graph_interact":564,"./layout_attributes":569,"./layout_defaults":570,"./transition_axes":581,"@plotly/d3":58}],569:[function(_,oe,ae){"use strict";var m=_("../font_attributes"),x=_("../../components/color/attributes"),T=_("../../components/drawing/attributes").dash,b=_("../../lib/extend").extendFlat,e=_("../../plot_api/plot_template").templatedArray,o=_("../../plots/cartesian/axis_format_attributes").descriptionWithDates,a=_("../../constants/numerical").ONEDAY,l=_("./constants"),i=l.HOUR_PATTERN,d=l.WEEKDAY_PATTERN;oe.exports={visible:{valType:"boolean",editType:"plot"},color:{valType:"color",dflt:x.defaultLine,editType:"ticks"},title:{text:{valType:"string",editType:"ticks"},font:m({editType:"ticks"}),standoff:{valType:"number",min:0,editType:"ticks"},editType:"ticks"},type:{valType:"enumerated",values:["-","linear","log","date","category","multicategory"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"axrange",impliedEdits:{"range[0]":void 0,"range[1]":void 0}},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"plot"},range:{valType:"info_array",items:[{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0},{valType:"any",editType:"axrange",impliedEdits:{"^autorange":!1},anim:!0}],editType:"axrange",impliedEdits:{autorange:!1},anim:!0},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},scaleanchor:{valType:"enumerated",values:[l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},scaleratio:{valType:"number",min:0,dflt:1,editType:"plot"},constrain:{valType:"enumerated",values:["range","domain"],editType:"plot"},constraintoward:{valType:"enumerated",values:["left","center","right","top","middle","bottom"],editType:"plot"},matches:{valType:"enumerated",values:[l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"calc"},rangebreaks:e("rangebreak",{enabled:{valType:"boolean",dflt:!0,editType:"calc"},bounds:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},pattern:{valType:"enumerated",values:[d,i,""],editType:"calc"},values:{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"any",editType:"calc"}},dvalue:{valType:"number",editType:"calc",min:0,dflt:a},editType:"calc"}),tickmode:{valType:"enumerated",values:["auto","linear","array"],editType:"ticks",impliedEdits:{tick0:void 0,dtick:void 0}},nticks:{valType:"integer",min:0,dflt:0,editType:"ticks"},tick0:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},dtick:{valType:"any",editType:"ticks",impliedEdits:{tickmode:"linear"}},ticklabelstep:{valType:"integer",min:1,dflt:1,editType:"ticks"},tickvals:{valType:"data_array",editType:"ticks"},ticktext:{valType:"data_array",editType:"ticks"},ticks:{valType:"enumerated",values:["outside","inside",""],editType:"ticks"},tickson:{valType:"enumerated",values:["labels","boundaries"],dflt:"labels",editType:"ticks"},ticklabelmode:{valType:"enumerated",values:["instant","period"],dflt:"instant",editType:"ticks"},ticklabelposition:{valType:"enumerated",values:["outside","inside","outside top","inside top","outside left","inside left","outside right","inside right","outside bottom","inside bottom"],dflt:"outside",editType:"calc"},ticklabeloverflow:{valType:"enumerated",values:["allow","hide past div","hide past domain"],editType:"calc"},mirror:{valType:"enumerated",values:[!0,"ticks",!1,"all","allticks"],dflt:!1,editType:"ticks+layoutstyle"},ticklen:{valType:"number",min:0,dflt:5,editType:"ticks"},tickwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},tickcolor:{valType:"color",dflt:x.defaultLine,editType:"ticks"},showticklabels:{valType:"boolean",dflt:!0,editType:"ticks"},automargin:{valType:"boolean",dflt:!1,editType:"ticks"},showspikes:{valType:"boolean",dflt:!1,editType:"modebar"},spikecolor:{valType:"color",dflt:null,editType:"none"},spikethickness:{valType:"number",dflt:3,editType:"none"},spikedash:b({},T,{dflt:"dash",editType:"none"}),spikemode:{valType:"flaglist",flags:["toaxis","across","marker"],dflt:"toaxis",editType:"none"},spikesnap:{valType:"enumerated",values:["data","cursor","hovered data"],dflt:"hovered data",editType:"none"},tickfont:m({editType:"ticks"}),tickangle:{valType:"angle",dflt:"auto",editType:"ticks"},tickprefix:{valType:"string",dflt:"",editType:"ticks"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},ticksuffix:{valType:"string",dflt:"",editType:"ticks"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"ticks"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"ticks"},minexponent:{valType:"number",dflt:3,min:0,editType:"ticks"},separatethousands:{valType:"boolean",dflt:!1,editType:"ticks"},tickformat:{valType:"string",dflt:"",editType:"ticks",description:o("tick label")},tickformatstops:e("tickformatstop",{enabled:{valType:"boolean",dflt:!0,editType:"ticks"},dtickrange:{valType:"info_array",items:[{valType:"any",editType:"ticks"},{valType:"any",editType:"ticks"}],editType:"ticks"},value:{valType:"string",dflt:"",editType:"ticks"},editType:"ticks"}),hoverformat:{valType:"string",dflt:"",editType:"none",description:o("hover text")},showline:{valType:"boolean",dflt:!1,editType:"ticks+layoutstyle"},linecolor:{valType:"color",dflt:x.defaultLine,editType:"layoutstyle"},linewidth:{valType:"number",min:0,dflt:1,editType:"ticks+layoutstyle"},showgrid:{valType:"boolean",editType:"ticks"},gridcolor:{valType:"color",dflt:x.lightLine,editType:"ticks"},gridwidth:{valType:"number",min:0,dflt:1,editType:"ticks"},zeroline:{valType:"boolean",editType:"ticks"},zerolinecolor:{valType:"color",dflt:x.defaultLine,editType:"ticks"},zerolinewidth:{valType:"number",dflt:1,editType:"ticks"},showdividers:{valType:"boolean",dflt:!0,editType:"ticks"},dividercolor:{valType:"color",dflt:x.defaultLine,editType:"ticks"},dividerwidth:{valType:"number",dflt:1,editType:"ticks"},anchor:{valType:"enumerated",values:["free",l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},side:{valType:"enumerated",values:["top","bottom","left","right"],editType:"plot"},overlaying:{valType:"enumerated",values:["free",l.idRegex.x.toString(),l.idRegex.y.toString()],editType:"plot"},layer:{valType:"enumerated",values:["above traces","below traces"],dflt:"above traces",editType:"plot"},domain:{valType:"info_array",items:[{valType:"number",min:0,max:1,editType:"plot"},{valType:"number",min:0,max:1,editType:"plot"}],dflt:[0,1],editType:"plot"},position:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array","total ascending","total descending","min ascending","min descending","max ascending","max descending","sum ascending","sum descending","mean ascending","mean descending","median ascending","median descending"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{autotick:{valType:"boolean",editType:"ticks"},title:{valType:"string",editType:"ticks"},titlefont:m({editType:"ticks"})}}},{"../../components/color/attributes":365,"../../components/drawing/attributes":387,"../../constants/numerical":479,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../font_attributes":585,"./constants":561}],570:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../components/color"),T=_("../../components/fx/helpers").isUnifiedHover,b=_("../../components/fx/hovermode_defaults"),e=_("../../plot_api/plot_template"),o=_("../layout_attributes"),a=_("./layout_attributes"),l=_("./type_defaults"),i=_("./axis_defaults"),d=_("./constraints"),u=_("./position_defaults"),s=_("./axis_ids"),c=s.id2name,h=s.name2id,p=_("./constants").AX_ID_PATTERN,v=_("../../registry"),g=v.traceIs,f=v.getComponentMethod;function w(y,M,A){Array.isArray(y[M])?y[M].push(A):y[M]=[A]}oe.exports=function(y,M,A){var k,C,P=M.autotypenumbers,D={},F={},R={},L={},I={},B={},V={},Z={},Y={},ee={};for(k=0;k<A.length;k++){var J=A[k];if(g(J,"cartesian")||g(J,"gl2d")){var $,Q;if(J.xaxis)$=c(J.xaxis),w(D,$,J);else if(J.xaxes)for(C=0;C<J.xaxes.length;C++)w(D,c(J.xaxes[C]),J);if(J.yaxis)Q=c(J.yaxis),w(D,Q,J);else if(J.yaxes)for(C=0;C<J.yaxes.length;C++)w(D,c(J.yaxes[C]),J);"funnel"===J.type?"h"===J.orientation?($&&(F[$]=!0),Q&&(V[Q]=!0)):Q&&(R[Q]=!0):"image"===J.type?(Q&&(Z[Q]=!0),$&&(Z[$]=!0)):(Q&&(I[Q]=!0,B[Q]=!0),g(J,"carpet")&&("carpet"!==J.type||J._cheater)||$&&(L[$]=!0)),"carpet"===J.type&&J._cheater&&$&&(F[$]=!0),g(J,"2dMap")&&(Y[$]=!0,Y[Q]=!0),g(J,"oriented")&&(ee["h"===J.orientation?Q:$]=!0)}}var se=M._subplots,j=se.xaxis,G=se.yaxis,W=m.simpleMap(j,c),ie=m.simpleMap(G,c),q=W.concat(ie),te=x.background;j.length&&G.length&&(te=m.coerce(y,M,o,"plot_bgcolor"));var ne,le,ue,de,he,be=x.combine(te,M.paper_bgcolor);function ge(){he._traceIndices=(D[ne]||[]).map(function(Ot){return Ot._expandedIndex}),he._annIndices=[],he._shapeIndices=[],he._imgIndices=[],he._subplotsWith=[],he._counterAxes=[],he._name=he._attr=ne,he._id=le}function we(ut,Ot){return m.coerce(de,he,a,ut,Ot)}function Ce(ut,Ot){return m.coerce2(de,he,a,ut,Ot)}function De(ut){return"x"===ut?G:j}function Se(ut,Ot){for(var tn="x"===ut?W:ie,un=[],Ze=0;Ze<tn.length;Ze++){var Qe=tn[Ze];Qe===Ot||(y[Qe]||{}).overlaying||un.push(h(Qe))}return un}var Fe={x:De("x"),y:De("y")},ve=Fe.x.concat(Fe.y),Te={},Le=[];function Ee(){var ut=de.matches;p.test(ut)&&-1===ve.indexOf(ut)&&(Te[ut]=de.type,Le=Object.keys(Te))}var Pe=b(y,M),je=T(Pe);for(k=0;k<q.length;k++){le=h(ne=q[k]),ue=ne.charAt(0),m.isPlainObject(y[ne])||(y[ne]={}),de=y[ne],he=e.newContainer(M,ne,ue+"axis"),ge();var lt={letter:ue,font:M.font,outerTicks:Y[ne],showGrid:!ee[ne],data:D[ne]||[],bgColor:be,calendar:M.calendar,automargin:!0,visibleDflt:"x"===ue&&!L[ne]&&F[ne]||"y"===ue&&!I[ne]&&R[ne],reverseDflt:"y"===ue&&(!B[ne]&&V[ne]||Z[ne]),autotypenumbersDflt:P,splomStash:((M._splomAxes||{})[ue]||{})[le]};we("uirevision",M.uirevision),l(de,he,we,lt),i(de,he,we,lt,M);var Ue=je&&ue===Pe.charAt(0),$e=Ce("spikecolor",je?he.color:void 0),et=Ce("spikethickness",je?1.5:void 0),tt=Ce("spikedash",je?"dot":void 0),ct=Ce("spikemode",je?"across":void 0),xt=Ce("spikesnap");we("showspikes",!!(Ue||$e||et||tt||ct||xt))||(delete he.spikecolor,delete he.spikethickness,delete he.spikedash,delete he.spikemode,delete he.spikesnap),u(de,he,we,{letter:ue,counterAxes:Fe[ue],overlayableAxes:Se(ue,ne),grid:M.grid}),we("title.standoff"),Ee(),he._input=de}for(k=0;k<Le.length;){le=Le[k++],ue=(ne=c(le)).charAt(0),m.isPlainObject(y[ne])||(y[ne]={}),de=y[ne],he=e.newContainer(M,ne,ue+"axis"),ge();var Ct={letter:ue,font:M.font,outerTicks:Y[ne],showGrid:!ee[ne],data:[],bgColor:be,calendar:M.calendar,automargin:!0,visibleDflt:!1,reverseDflt:!1,autotypenumbersDflt:P,splomStash:((M._splomAxes||{})[ue]||{})[le]};we("uirevision",M.uirevision),he.type=Te[le]||"linear",i(de,he,we,Ct,M),u(de,he,we,{letter:ue,counterAxes:Fe[ue],overlayableAxes:Se(ue,ne),grid:M.grid}),we("fixedrange"),Ee(),he._input=de}var Ht=f("rangeslider","handleDefaults"),zt=f("rangeselector","handleDefaults");for(k=0;k<W.length;k++)de=y[ne=W[k]],he=M[ne],Ht(y,M,ne),"date"===he.type&&zt(de,he,M,ie,he.calendar),we("fixedrange");for(k=0;k<ie.length;k++){de=y[ne=ie[k]];var ht=M[c((he=M[ne]).anchor)];we("fixedrange",f("rangeslider","isVisible")(ht))}d.handleDefaults(y,M,{axIds:ve.concat(Le).sort(s.idSort),axHasImage:Z})}},{"../../components/color":366,"../../components/fx/helpers":402,"../../components/fx/hovermode_defaults":405,"../../lib":503,"../../plot_api/plot_template":543,"../../registry":638,"../layout_attributes":610,"./axis_defaults":556,"./axis_ids":558,"./constants":561,"./constraints":562,"./layout_attributes":569,"./position_defaults":572,"./type_defaults":582}],571:[function(_,oe,ae){"use strict";var m=_("tinycolor2").mix,x=_("../../components/color/attributes").lightFraction,T=_("../../lib");oe.exports=function(b,e,o,a){var l=(a=a||{}).dfltColor;function i(v,g){return T.coerce2(b,e,a.attributes,v,g)}var d=i("linecolor",l),u=i("linewidth");o("showline",a.showLine||!!d||!!u)||(delete e.linecolor,delete e.linewidth);var s=i("gridcolor",m(l,a.bgColor,a.blend||x).toRgbString()),c=i("gridwidth");if(o("showgrid",a.showGrid||!!s||!!c)||(delete e.gridcolor,delete e.gridwidth),!a.noZeroLine){var h=i("zerolinecolor",l),p=i("zerolinewidth");o("zeroline",a.showGrid||!!h||!!p)||(delete e.zerolinecolor,delete e.zerolinewidth)}}},{"../../components/color/attributes":365,"../../lib":503,tinycolor2:312}],572:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../lib");oe.exports=function(T,b,e,o){var a,l,i,d,u=o.counterAxes||[],s=o.overlayableAxes||[],c=o.letter,h=o.grid;h&&(a=h._anchors[b._id],(l=h._domains[c][h._axisMap[b._id]])&&(i=h[c+"side"].split(" ")[0],d=h.domain[c]["right"===i||"top"===i?1:0])),l=l||[0,1],a=a||(m(T.position)?"free":u[0]||"free"),i=i||("x"===c?"bottom":"left"),d=d||0,"free"===x.coerce(T,b,{anchor:{valType:"enumerated",values:["free"].concat(u),dflt:a}},"anchor")&&e("position",d),x.coerce(T,b,{side:{valType:"enumerated",values:"x"===c?["bottom","top"]:["left","right"],dflt:i}},"side");var p=!1;if(s.length&&(p=x.coerce(T,b,{overlaying:{valType:"enumerated",values:[!1].concat(s),dflt:!1}},"overlaying")),!p){var v=e("domain",l);v[0]>v[1]-1/4096&&(b.domain=l),x.noneOrAll(T.domain,b.domain,l)}return e("layer"),b}},{"../../lib":503,"fast-isnumeric":190}],573:[function(_,oe,ae){"use strict";var m=_("./show_dflt");oe.exports=function(x,T,b,e,o){o||(o={});var a=o.tickSuffixDflt,l=m(x);b("tickprefix")&&b("showtickprefix",l),b("ticksuffix",a)&&b("showticksuffix",l)}},{"./show_dflt":577}],574:[function(_,oe,ae){"use strict";var m=_("../../constants/alignment").FROM_BL;oe.exports=function(x,T,b){void 0===b&&(b=m[x.constraintoward||"center"]);var e=[x.r2l(x.range[0]),x.r2l(x.range[1])],o=e[0]+(e[1]-e[0])*b;x.range=x._input.range=[x.l2r(o+(e[0]-o)*T),x.l2r(o+(e[1]-o)*T)],x.setScale()}},{"../../constants/alignment":471}],575:[function(_,oe,ae){"use strict";var m=_("polybooljs"),x=_("../../registry"),T=_("../../components/drawing").dashStyle,b=_("../../components/color"),e=_("../../components/fx"),o=_("../../components/fx/helpers").makeEventData,a=_("../../components/dragelement/helpers"),l=a.freeMode,i=a.rectMode,d=a.drawMode,u=a.openMode,s=a.selectMode,c=_("../../components/shapes/draw_newshape/display_outlines"),h=_("../../components/shapes/draw_newshape/helpers").handleEllipse,p=_("../../components/shapes/draw_newshape/newshapes"),v=_("../../lib"),g=_("../../lib/polygon"),f=_("../../lib/throttle"),w=_("./axis_ids").getFromId,y=_("../../lib/clear_gl_canvases"),M=_("../../plot_api/subroutines").redrawReglTraces,A=_("./constants"),k=A.MINSELECT,C=g.filter,P=g.tester,D=_("./handle_outline").clearSelect,F=_("./helpers"),R=F.p2r,L=F.axValue,I=F.getTransform;function B(W,ie,q,te,ne,le,ue){var de,he,be,ge,we,Ce,De,Se,Fe,Ke,ve=ie._hoverdata,Te=ie._fullLayout.clickmode.indexOf("event")>-1,Le=[];if((Ke=ve)&&Array.isArray(Ke)&&!0!==Ke[0].hoverOnBox){ee(W,ie,le);var Ee=function(Ke,lt){var Ue,$e,et=Ke[0],tt=-1,ct=[];for($e=0;$e<lt.length;$e++)if(et.fullData._expandedIndex===(Ue=lt[$e]).cd[0].trace._expandedIndex){if(!0===et.hoverOnBox)break;void 0!==et.pointNumber?tt=et.pointNumber:void 0!==et.binNumber&&(tt=et.binNumber,ct=et.pointNumbers);break}return{pointNumber:tt,pointNumbers:ct,searchInfo:Ue}}(ve,de=$(ie,q,te,ne));if(Ee.pointNumbers.length>0?function(Ke,lt){var Ue,$e,et,tt=[];for(et=0;et<Ke.length;et++)(Ue=Ke[et]).cd[0].trace.selectedpoints&&Ue.cd[0].trace.selectedpoints.length>0&&tt.push(Ue);if(1===tt.length&&tt[0]===lt.searchInfo&&($e=lt.searchInfo.cd[0].trace).selectedpoints.length===lt.pointNumbers.length){for(et=0;et<lt.pointNumbers.length;et++)if($e.selectedpoints.indexOf(lt.pointNumbers[et])<0)return!1;return!0}return!1}(de,Ee):function(Ke){var Ue,$e,et=0;for($e=0;$e<Ke.length;$e++)if((Ue=Ke[$e].cd[0].trace).selectedpoints&&(Ue.selectedpoints.length>1||(et+=Ue.selectedpoints.length)>1))return!1;return 1===et}(de)&&(Ce=Q(Ee))){for(ue&&ue.remove(),Fe=0;Fe<de.length;Fe++)(he=de[Fe])._module.selectPoints(he,!1);se(ie,de),J(le),Te&&ie.emit("plotly_deselect",null)}else{for(De=W.shiftKey&&(void 0!==Ce?Ce:Q(Ee)),be=function(Ke,lt,Ue){return{pointNumber:Ke,searchInfo:lt,subtract:Ue}}(Ee.pointNumber,Ee.searchInfo,De),ge=Y(le.selectionDefs.concat([be])),Fe=0;Fe<de.length;Fe++)if(we=j(de[Fe]._module.selectPoints(de[Fe],ge),de[Fe]),Le.length)for(var Pe=0;Pe<we.length;Pe++)Le.push(we[Pe]);else Le=we;if(se(ie,de,Se={points:Le}),be&&le&&le.selectionDefs.push(be),ue){var je=le.mergedPolygons,Ge=u(le.dragmode);c(G(je,Ge),ue,le)}Te&&ie.emit("plotly_selected",Se)}}}function V(W){return"pointNumber"in W&&"searchInfo"in W}function Z(W){return{xmin:0,xmax:0,ymin:0,ymax:0,pts:[],contains:function(ie,q,te,ne){return ne.cd[0].trace._expandedIndex===W.searchInfo.cd[0].trace._expandedIndex&&te===W.pointNumber},isRect:!1,degenerate:!1,subtract:W.subtract}}function Y(W){for(var ie=[],q=V(W[0])?0:W[0][0][0],te=q,ne=V(W[0])?0:W[0][0][1],le=ne,ue=0;ue<W.length;ue++)if(V(W[ue]))ie.push(Z(W[ue]));else{var de=g.tester(W[ue]);de.subtract=W[ue].subtract,ie.push(de),q=Math.min(q,de.xmin),te=Math.max(te,de.xmax),ne=Math.min(ne,de.ymin),le=Math.max(le,de.ymax)}return{xmin:q,xmax:te,ymin:ne,ymax:le,pts:[],contains:function(he,be,ge,we){for(var Ce=!1,De=0;De<ie.length;De++)ie[De].contains(he,be,ge,we)&&(Ce=!1===ie[De].subtract);return Ce},isRect:!1,degenerate:!1}}function ee(W,ie,q){ie._fullLayout._drawing=!1;var te=ie._fullLayout,ne=q.plotinfo,le=q.dragmode,ue=te._lastSelectedSubplot&&te._lastSelectedSubplot===ne.id,de=(W.shiftKey||W.altKey)&&!(d(le)&&u(le));ue&&de&&ne.selection&&ne.selection.selectionDefs&&!q.selectionDefs?(q.selectionDefs=ne.selection.selectionDefs,q.mergedPolygons=ne.selection.mergedPolygons):de&&ne.selection||J(q),ue||(D(ie),te._lastSelectedSubplot=ne.id)}function J(W){var ie=W.dragmode,q=W.plotinfo,te=W.gd;if(te._fullLayout._activeShapeIndex>=0&&te._fullLayout._deactivateShape(te),d(ie)){var ne=te._fullLayout._zoomlayer.selectAll(".select-outline-"+q.id);if(ne&&te._fullLayout._drawing){var le=p(ne,W);le&&x.call("_guiRelayout",te,{shapes:le}),te._fullLayout._drawing=!1}}q.selection={},q.selection.selectionDefs=W.selectionDefs=[],q.selection.mergedPolygons=W.mergedPolygons=[]}function $(W,ie,q,te){var ne,le,ue,de=[],he=ie.map(function(De){return De._id}),be=q.map(function(De){return De._id});for(ue=0;ue<W.calcdata.length;ue++)if(!0===(le=(ne=W.calcdata[ue])[0].trace).visible&&le._module&&le._module.selectPoints)if(!te||le.subplot!==te&&le.geo!==te)if("splom"===le.type&&le._xaxes[he[0]]&&le._yaxes[be[0]]){var ge=Ce(le._module,ne,ie[0],q[0]);ge.scene=W._fullLayout._splomScenes[le.uid],de.push(ge)}else if("sankey"===le.type){var we=Ce(le._module,ne,ie[0],q[0]);de.push(we)}else{if(-1===he.indexOf(le.xaxis)||-1===be.indexOf(le.yaxis))continue;de.push(Ce(le._module,ne,w(W,le.xaxis),w(W,le.yaxis)))}else de.push(Ce(le._module,ne,ie[0],q[0]));return de;function Ce(De,Se,Fe,ve){return{_module:De,cd:Se,xaxis:Fe,yaxis:ve}}}function Q(W){var ie=W.searchInfo.cd[0].trace,te=W.pointNumbers;return!!ie.selectedpoints&&ie.selectedpoints.indexOf(te.length>0?te[0]:W.pointNumber)>-1}function se(W,ie,q){var te,ne,le,ue;for(te=0;te<ie.length;te++){var de=ie[te].cd[0].trace._fullInput,he=W._fullLayout._tracePreGUI[de.uid]||{};void 0===he.selectedpoints&&(he.selectedpoints=de._input.selectedpoints||null)}if(q){var be=q.points||[];for(te=0;te<ie.length;te++)(ue=ie[te].cd[0].trace)._input.selectedpoints=ue._fullInput.selectedpoints=[],ue._fullInput!==ue&&(ue.selectedpoints=[]);for(te=0;te<be.length;te++){var ge=be[te],we=ge.data,Ce=ge.fullData;ge.pointIndices?([].push.apply(we.selectedpoints,ge.pointIndices),ue._fullInput!==ue&&[].push.apply(Ce.selectedpoints,ge.pointIndices)):(we.selectedpoints.push(ge.pointIndex),ue._fullInput!==ue&&Ce.selectedpoints.push(ge.pointIndex))}}else for(te=0;te<ie.length;te++)delete(ue=ie[te].cd[0].trace).selectedpoints,delete ue._input.selectedpoints,ue._fullInput!==ue&&delete ue._fullInput.selectedpoints;var De=!1;for(te=0;te<ie.length;te++){ue=(le=(ne=ie[te]).cd)[0].trace,x.traceIs(ue,"regl")&&(De=!0);var Se=ne._module,Fe=Se.styleOnSelect||Se.style;Fe&&(Fe(W,le,le[0].node3),le[0].nodeRangePlot3&&Fe(W,le,le[0].nodeRangePlot3))}De&&(y(W),M(W))}function j(W,ie){if(Array.isArray(W))for(var q=ie.cd,te=ie.cd[0].trace,ne=0;ne<W.length;ne++)W[ne]=o(W[ne],te,q);return W}function G(W,ie){for(var q=[],te=0;te<W.length;te++){q[te]=[];for(var ne=0;ne<W[te].length;ne++){q[te][ne]=[],q[te][ne][0]=ne?"L":"M";for(var le=0;le<W[te][ne].length;le++)q[te][ne].push(W[te][ne][le])}ie||q[te].push(["Z",q[te][0][1],q[te][0][2]])}return q}oe.exports={prepSelect:function(W,ie,q,te,ne){var le=l(ne),ue=i(ne),de=u(ne),he=d(ne),be=s(ne),ge="drawcircle"===ne,we="drawline"===ne||ge,Ce=te.gd,De=Ce._fullLayout,Se=De._zoomlayer,Fe=te.element.getBoundingClientRect(),ve=te.plotinfo,Te=I(ve),Le=ie-Fe.left,Ee=q-Fe.top;De._calcInverseTransform(Ce);var je,Ge,Ke,lt,Ue,$e,et,Pe=v.apply3DTransform(De._invTransform)(Le,Ee),tt=De._invScaleX,ct=De._invScaleY,xt=Le=Pe[0],Ct=Ee=Pe[1],Ht="M"+Le+","+Ee,zt=te.xaxes[0]._length,ht=te.yaxes[0]._length,ut=te.xaxes.concat(te.yaxes),Ot=W.altKey&&!(d(ne)&&de);ee(W,Ce,te),le&&(je=C([[Le,Ee]],A.BENDPX));var tn=Se.selectAll("path.select-outline-"+ve.id).data(he?[0]:[1,2]),un=De.newshape;tn.enter().append("path").attr("class",function(Ve){return"select-outline select-outline-"+Ve+" select-outline-"+ve.id}).style(he?{opacity:un.opacity/2,fill:de?void 0:un.fillcolor,stroke:un.line.color,"stroke-dasharray":T(un.line.dash,un.line.width),"stroke-width":un.line.width+"px"}:{}).attr("fill-rule",un.fillrule).classed("cursor-move",!!he).attr("transform",Te).attr("d",Ht+"Z");var Ze,Qe=Se.append("path").attr("class","zoombox-corners").style({fill:b.background,stroke:b.defaultLine,"stroke-width":1}).attr("transform",Te).attr("d","M0,0Z"),qe=De._uid+A.SELECTID,it=[],Ie=$(Ce,te.xaxes,te.yaxes,te.subplot);function ze(Ve,Be){return Ve-Be}Ze=ve.fillRangeItems?ve.fillRangeItems:ue?function(Ve,Be){var at=Ve.range={};for(Ue=0;Ue<ut.length;Ue++){var gt=ut[Ue],wt=gt._id.charAt(0);at[gt._id]=[R(gt,Be[wt+"min"]),R(gt,Be[wt+"max"])].sort(ze)}}:function(Ve,Be,at){var gt=Ve.lassoPoints={};for(Ue=0;Ue<ut.length;Ue++){var wt=ut[Ue];gt[wt._id]=at.filtered.map(L(wt))}},te.moveFn=function(Ve,Be){xt=Math.max(0,Math.min(zt,tt*Ve+Le)),Ct=Math.max(0,Math.min(ht,ct*Be+Ee));var Vt,Nt,at=Math.abs(xt-Le),gt=Math.abs(Ct-Ee);if(ue){var wt,_t,Rt;if(be){var yt=De.selectdirection;switch(wt="any"===yt?gt<Math.min(.6*at,k)?"h":at<Math.min(.6*gt,k)?"v":"d":yt){case"h":_t=ge?ht/2:0,Rt=ht;break;case"v":_t=ge?zt/2:0,Rt=zt}}if(he)switch(De.newshape.drawdirection){case"vertical":wt="h",_t=ge?ht/2:0,Rt=ht;break;case"horizontal":wt="v",_t=ge?zt/2:0,Rt=zt;break;case"ortho":at<gt?(wt="h",_t=Ee,Rt=Ct):(wt="v",_t=Le,Rt=xt);break;default:wt="d"}"h"===wt?((lt=we?h(ge,[xt,_t],[xt,Rt]):[[Le,_t],[Le,Rt],[xt,Rt],[xt,_t]]).xmin=we?xt:Math.min(Le,xt),lt.xmax=we?xt:Math.max(Le,xt),lt.ymin=Math.min(_t,Rt),lt.ymax=Math.max(_t,Rt),Qe.attr("d","M"+lt.xmin+","+(Ee-k)+"h-4v"+2*k+"h4ZM"+(lt.xmax-1)+","+(Ee-k)+"h4v"+2*k+"h-4Z")):"v"===wt?((lt=we?h(ge,[_t,Ct],[Rt,Ct]):[[_t,Ee],[_t,Ct],[Rt,Ct],[Rt,Ee]]).xmin=Math.min(_t,Rt),lt.xmax=Math.max(_t,Rt),lt.ymin=we?Ct:Math.min(Ee,Ct),lt.ymax=we?Ct:Math.max(Ee,Ct),Qe.attr("d","M"+(Le-k)+","+lt.ymin+"v-4h"+2*k+"v4ZM"+(Le-k)+","+(lt.ymax-1)+"v4h"+2*k+"v-4Z")):"d"===wt&&((lt=we?h(ge,[Le,Ee],[xt,Ct]):[[Le,Ee],[Le,Ct],[xt,Ct],[xt,Ee]]).xmin=Math.min(Le,xt),lt.xmax=Math.max(Le,xt),lt.ymin=Math.min(Ee,Ct),lt.ymax=Math.max(Ee,Ct),Qe.attr("d","M0,0Z"))}else le&&(je.addPt([xt,Ct]),lt=je.filtered);te.selectionDefs&&te.selectionDefs.length?(Vt=te.mergedPolygons,Nt=lt,Ke=Ot?m.difference({regions:Vt,inverted:!1},{regions:[Nt],inverted:!1}).regions:m.union({regions:Vt,inverted:!1},{regions:[Nt],inverted:!1}).regions,lt.subtract=Ot,Ge=Y(te.selectionDefs.concat([lt]))):(Ke=[lt],Ge=P(lt)),c(G(Ke,de),tn,te),be&&f.throttle(qe,A.SELECTDELAY,function(){var Vt;it=[];var Nt,rt=[];for(Ue=0;Ue<Ie.length;Ue++)if(Nt=($e=Ie[Ue])._module.selectPoints($e,Ge),rt.push(Nt),Vt=j(Nt,$e),it.length)for(var Tt=0;Tt<Vt.length;Tt++)it.push(Vt[Tt]);else it=Vt;se(Ce,Ie,et={points:it}),Ze(et,lt,je),te.gd.emit("plotly_selecting",et)})},te.clickFn=function(Ve,Be){if(Qe.remove(),Ce._fullLayout._activeShapeIndex>=0)Ce._fullLayout._deactivateShape(Ce);else if(!he){var at=De.clickmode;f.done(qe).then(function(){if(f.clear(qe),2===Ve){for(tn.remove(),Ue=0;Ue<Ie.length;Ue++)($e=Ie[Ue])._module.selectPoints($e,!1);se(Ce,Ie),J(te),Ce.emit("plotly_deselect",null)}else at.indexOf("select")>-1&&B(Be,Ce,te.xaxes,te.yaxes,te.subplot,te,tn),"event"===at&&Ce.emit("plotly_selected",void 0);e.click(Ce,Be)}).catch(v.error)}},te.doneFn=function(){Qe.remove(),f.done(qe).then(function(){f.clear(qe),te.gd.emit("plotly_selected",et),lt&&te.selectionDefs&&(lt.subtract=Ot,te.selectionDefs.push(lt),te.mergedPolygons.length=0,[].push.apply(te.mergedPolygons,Ke)),te.doneFnCompleted&&te.doneFnCompleted(it)}).catch(v.error),he&&J(te)}},clearSelect:D,clearSelectionsCache:J,selectOnClick:B}},{"../../components/color":366,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/fx/helpers":402,"../../components/shapes/draw_newshape/display_outlines":454,"../../components/shapes/draw_newshape/helpers":455,"../../components/shapes/draw_newshape/newshapes":456,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/polygon":515,"../../lib/throttle":530,"../../plot_api/subroutines":544,"../../registry":638,"./axis_ids":558,"./constants":561,"./handle_outline":565,"./helpers":566,polybooljs:254}],576:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("d3-time-format").utcFormat,T=_("../../lib"),b=T.numberFormat,e=_("fast-isnumeric"),o=T.cleanNumber,a=T.ms2DateTime,l=T.dateTime2ms,i=T.ensureNumber,d=T.isArrayOrTypedArray,u=_("../../constants/numerical"),s=u.FP_SAFE,c=u.BADNUM,h=u.LOG_CLIP,p=u.ONEWEEK,v=u.ONEDAY,g=u.ONEHOUR,f=u.ONEMIN,w=u.ONESEC,y=_("./axis_ids"),M=_("./constants"),A=M.HOUR_PATTERN,k=M.WEEKDAY_PATTERN;function C(D){return Math.pow(10,D)}function P(D){return null!=D}oe.exports=function(D,F){F=F||{};var R=D._id||"x",L=R.charAt(0);function I(q,te){if(q>0)return Math.log(q)/Math.LN10;if(q<=0&&te&&D.range&&2===D.range.length){var ne=D.range[0],le=D.range[1];return.5*(ne+le-2*h*Math.abs(ne-le))}return c}function B(q,te,ne,le){if((le||{}).msUTC&&e(q))return+q;var ue=l(q,ne||D.calendar);if(ue===c){if(!e(q))return c;q=+q;var de=Math.floor(10*T.mod(q+.05,1)),he=Math.round(q-de/10);ue=l(new Date(he))+de/10}return ue}function V(q,te,ne){return a(q,te,ne||D.calendar)}function Z(q){return D._categories[Math.round(q)]}function Y(q){if(P(q)){if(void 0===D._categoriesMap&&(D._categoriesMap={}),void 0!==D._categoriesMap[q])return D._categoriesMap[q];D._categories.push("number"==typeof q?String(q):q);var te=D._categories.length-1;return D._categoriesMap[q]=te,te}return c}function ee(q){if(D._categoriesMap)return D._categoriesMap[q]}function J(q){var te=ee(q);return void 0!==te?te:e(q)?+q:void 0}function $(q){return e(q)?+q:ee(q)}function Q(q,te,ne){return m.round(ne+te*q,2)}function se(q,te,ne){return(q-ne)/te}var j=function(q){return e(q)?Q(q,D._m,D._b):c},G=function(q){return se(q,D._m,D._b)};if(D.rangebreaks){var W="y"===L;j=function(q){if(!e(q))return c;var te=D._rangebreaks.length;if(!te)return Q(q,D._m,D._b);var ne=W;D.range[0]>D.range[1]&&(ne=!ne);for(var le=ne?-1:1,ue=le*q,de=0,he=0;he<te;he++){var be=le*D._rangebreaks[he].min,ge=le*D._rangebreaks[he].max;if(ue<be)break;if(!(ue>ge)){de=ue<(be+ge)/2?he:he+1;break}de=he+1}var we=D._B[de]||0;return isFinite(we)?Q(q,D._m2,we):0},G=function(q){var te=D._rangebreaks.length;if(!te)return se(q,D._m,D._b);for(var ne=0,le=0;le<te&&!(q<D._rangebreaks[le].pmin);le++)q>D._rangebreaks[le].pmax&&(ne=le+1);return se(q,D._m2,D._B[ne])}}D.c2l="log"===D.type?I:i,D.l2c="log"===D.type?C:i,D.l2p=j,D.p2l=G,D.c2p="log"===D.type?function(q,te){return j(I(q,te))}:j,D.p2c="log"===D.type?function(q){return C(G(q))}:G,-1!==["linear","-"].indexOf(D.type)?(D.d2r=D.r2d=D.d2c=D.r2c=D.d2l=D.r2l=o,D.c2d=D.c2r=D.l2d=D.l2r=i,D.d2p=D.r2p=function(q){return D.l2p(o(q))},D.p2d=D.p2r=G,D.cleanPos=i):"log"===D.type?(D.d2r=D.d2l=function(q,te){return I(o(q),te)},D.r2d=D.r2c=function(q){return C(o(q))},D.d2c=D.r2l=o,D.c2d=D.l2r=i,D.c2r=I,D.l2d=C,D.d2p=function(q,te){return D.l2p(D.d2r(q,te))},D.p2d=function(q){return C(G(q))},D.r2p=function(q){return D.l2p(o(q))},D.p2r=G,D.cleanPos=i):"date"===D.type?(D.d2r=D.r2d=T.identity,D.d2c=D.r2c=D.d2l=D.r2l=B,D.c2d=D.c2r=D.l2d=D.l2r=V,D.d2p=D.r2p=function(q,te,ne){return D.l2p(B(q,0,ne))},D.p2d=D.p2r=function(q,te,ne){return V(G(q),te,ne)},D.cleanPos=function(q){return T.cleanDate(q,c,D.calendar)}):"category"===D.type?(D.d2c=D.d2l=Y,D.r2d=D.c2d=D.l2d=Z,D.d2r=D.d2l_noadd=J,D.r2c=function(q){var te=$(q);return void 0!==te?te:D.fraction2r(.5)},D.l2r=D.c2r=i,D.r2l=$,D.d2p=function(q){return D.l2p(D.r2c(q))},D.p2d=function(q){return Z(G(q))},D.r2p=D.d2p,D.p2r=G,D.cleanPos=function(q){return"string"==typeof q&&""!==q?q:i(q)}):"multicategory"===D.type&&(D.r2d=D.c2d=D.l2d=Z,D.d2r=D.d2l_noadd=J,D.r2c=function(q){var te=J(q);return void 0!==te?te:D.fraction2r(.5)},D.r2c_just_indices=ee,D.l2r=D.c2r=i,D.r2l=J,D.d2p=function(q){return D.l2p(D.r2c(q))},D.p2d=function(q){return Z(G(q))},D.r2p=D.d2p,D.p2r=G,D.cleanPos=function(q){return Array.isArray(q)||"string"==typeof q&&""!==q?q:i(q)},D.setupMultiCategory=function(q){var te,ne,le=D._traceIndices,ue=D._matchGroup;if(ue&&0===D._categories.length)for(var de in ue)if(de!==R){var he=F[y.id2name(de)];le=le.concat(he._traceIndices)}var be=[[0,{}],[0,{}]],ge=[];for(te=0;te<le.length;te++){var we=q[le[te]];if(L in we){var Ce=we[L],De=we._length||T.minRowLength(Ce);if(d(Ce[0])&&d(Ce[1]))for(ne=0;ne<De;ne++){var Se=Ce[0][ne],Fe=Ce[1][ne];P(Se)&&P(Fe)&&(ge.push([Se,Fe]),Se in be[0][1]||(be[0][1][Se]=be[0][0]++),Fe in be[1][1]||(be[1][1][Fe]=be[1][0]++))}}}for(ge.sort(function(ve,Te){var Le=be[0][1],Ee=Le[ve[0]]-Le[Te[0]];if(Ee)return Ee;var Pe=be[1][1];return Pe[ve[1]]-Pe[Te[1]]}),te=0;te<ge.length;te++)Y(ge[te])}),D.fraction2r=function(q){var te=D.r2l(D.range[0]),ne=D.r2l(D.range[1]);return D.l2r(te+q*(ne-te))},D.r2fraction=function(q){var te=D.r2l(D.range[0]),ne=D.r2l(D.range[1]);return(D.r2l(q)-te)/(ne-te)},D.cleanRange=function(q,te){te||(te={}),q||(q="range");var ne,le,ue=T.nestedProperty(D,q).get();if(le=(le="date"===D.type?T.dfltRange(D.calendar):"y"===L?M.DFLTRANGEY:"realaxis"===D._name?[0,1]:te.dfltRange||M.DFLTRANGEX).slice(),"tozero"!==D.rangemode&&"nonnegative"!==D.rangemode||(le[0]=0),ue&&2===ue.length)for("date"!==D.type||D.autorange||(ue[0]=T.cleanDate(ue[0],c,D.calendar),ue[1]=T.cleanDate(ue[1],c,D.calendar)),ne=0;ne<2;ne++)if("date"===D.type){if(!T.isDateTime(ue[ne],D.calendar)){D[q]=le;break}if(D.r2l(ue[0])===D.r2l(ue[1])){var de=T.constrain(D.r2l(ue[0]),T.MIN_MS+1e3,T.MAX_MS-1e3);ue[0]=D.l2r(de-1e3),ue[1]=D.l2r(de+1e3);break}}else{if(!e(ue[ne])){if(!e(ue[1-ne])){D[q]=le;break}ue[ne]=ue[1-ne]*(ne?10:.1)}if(ue[ne]<-s?ue[ne]=-s:ue[ne]>s&&(ue[ne]=s),ue[0]===ue[1]){var he=Math.max(1,Math.abs(1e-6*ue[0]));ue[0]-=he,ue[1]+=he}}else T.nestedProperty(D,q).set(le)},D.setScale=function(q){var te=F._size;if(D.overlaying){var ne=y.getFromId({_fullLayout:F},D.overlaying);D.domain=ne.domain}var le=q&&D._r?"_r":"range",ue=D.calendar;D.cleanRange(le);var de,he,be=D.r2l(D[le][0],ue),ge=D.r2l(D[le][1],ue),we="y"===L;if(we?(D._offset=te.t+(1-D.domain[1])*te.h,D._length=te.h*(D.domain[1]-D.domain[0]),D._m=D._length/(be-ge),D._b=-D._m*ge):(D._offset=te.l+D.domain[0]*te.w,D._length=te.w*(D.domain[1]-D.domain[0]),D._m=D._length/(ge-be),D._b=-D._m*be),D._rangebreaks=[],D._lBreaks=0,D._m2=0,D._B=[],D.rangebreaks&&(D._rangebreaks=D.locateBreaks(Math.min(be,ge),Math.max(be,ge)),D._rangebreaks.length)){for(de=0;de<D._rangebreaks.length;de++)he=D._rangebreaks[de],D._lBreaks+=Math.abs(he.max-he.min);var Ce=we;be>ge&&(Ce=!Ce),Ce&&D._rangebreaks.reverse();var De=Ce?-1:1;for(D._m2=De*D._length/(Math.abs(ge-be)-D._lBreaks),D._B.push(-D._m2*(we?ge:be)),de=0;de<D._rangebreaks.length;de++)D._B.push(D._B[D._B.length-1]-De*D._m2*((he=D._rangebreaks[de]).max-he.min));for(de=0;de<D._rangebreaks.length;de++)(he=D._rangebreaks[de]).pmin=j(he.min),he.pmax=j(he.max)}if(!isFinite(D._m)||!isFinite(D._b)||D._length<0)throw F._replotting=!1,new Error("Something went wrong with axis scaling")},D.maskBreaks=function(q){var te,ne,le,ue,de,he=D.rangebreaks||[];he._cachedPatterns||(he._cachedPatterns=he.map(function(Se){return Se.enabled&&Se.bounds?T.simpleMap(Se.bounds,Se.pattern?o:D.d2c):null})),he._cachedValues||(he._cachedValues=he.map(function(Se){return Se.enabled&&Se.values?T.simpleMap(Se.values,D.d2c).sort(T.sorterAsc):null}));for(var be=0;be<he.length;be++){var ge=he[be];if(ge.enabled)if(ge.bounds){switch(ne=(te=he._cachedPatterns[be])[0],le=te[1],ge.pattern){case k:ue=(de=new Date(q)).getUTCDay(),ne>le&&(le+=7,ue<ne&&(ue+=7));break;case A:ue=(de=new Date(q)).getUTCHours()+(de.getUTCMinutes()/60+de.getUTCSeconds()/3600+de.getUTCMilliseconds()/36e5),ne>le&&(le+=24,ue<ne&&(ue+=24));break;case"":ue=q}if(ue>=ne&&ue<le)return c}else for(var Ce=he._cachedValues[be],De=0;De<Ce.length;De++)if(le=(ne=Ce[De])+ge.dvalue,q>=ne&&q<le)return c}return q},D.locateBreaks=function(q,te){var ne,le,ue,de,he=[];if(!D.rangebreaks)return he;var be=D.rangebreaks.slice().sort(function(Pe,je){return Pe.pattern===k&&je.pattern===A?-1:je.pattern===k&&Pe.pattern===A?1:0}),ge=function(Pe,je){if((Pe=T.constrain(Pe,q,te))!==(je=T.constrain(je,q,te))){for(var Ge=!0,Ke=0;Ke<he.length;Ke++){var lt=he[Ke];Pe<lt.max&&je>=lt.min&&(Pe<lt.min&&(lt.min=Pe),je>lt.max&&(lt.max=je),Ge=!1)}Ge&&he.push({min:Pe,max:je})}};for(ne=0;ne<be.length;ne++){var we=be[ne];if(we.enabled)if(we.bounds){var Ce=q,De=te;we.pattern&&(Ce=Math.floor(Ce)),ue=(le=T.simpleMap(we.bounds,we.pattern?o:D.r2l))[0],de=le[1];var Se,Fe,ve=new Date(Ce);switch(we.pattern){case k:Fe=p,Se=(de-ue+(de<ue?7:0))*v,Ce+=ue*v-(ve.getUTCDay()*v+ve.getUTCHours()*g+ve.getUTCMinutes()*f+ve.getUTCSeconds()*w+ve.getUTCMilliseconds());break;case A:Fe=v,Se=(de-ue+(de<ue?24:0))*g,Ce+=ue*g-(ve.getUTCHours()*g+ve.getUTCMinutes()*f+ve.getUTCSeconds()*w+ve.getUTCMilliseconds());break;default:Ce=Math.min(le[0],le[1]),Se=Fe=(De=Math.max(le[0],le[1]))-Ce}for(var Te=Ce;Te<De;Te+=Fe)ge(Te,Te+Se)}else for(var Le=T.simpleMap(we.values,D.d2c),Ee=0;Ee<Le.length;Ee++)ge(ue=Le[Ee],de=ue+we.dvalue)}return he.sort(function(Pe,je){return Pe.min-je.min}),he},D.makeCalcdata=function(q,te,ne){var le,ue,de,he,be=D.type,ge="date"===be&&q[te+"calendar"];if(te in q){if(le=q[te],he=q._length||T.minRowLength(le),T.isTypedArray(le)&&("linear"===be||"log"===be)){if(he===le.length)return le;if(le.subarray)return le.subarray(0,he)}if("multicategory"===be)return function(De,Se){for(var Fe=new Array(Se),ve=0;ve<Se;ve++)Fe[ve]=ee([(De[0]||[])[ve],(De[1]||[])[ve]]);return Fe}(le,he);for(ue=new Array(he),de=0;de<he;de++)ue[de]=D.d2c(le[de],0,ge,ne)}else{var we=te+"0"in q?D.d2c(q[te+"0"],0,ge):0,Ce=q["d"+te]?Number(q["d"+te]):1;for(le=q[{x:"y",y:"x"}[te]],he=q._length||le.length,ue=new Array(he),de=0;de<he;de++)ue[de]=we+de*Ce}if(D.rangebreaks)for(de=0;de<he;de++)ue[de]=D.maskBreaks(ue[de]);return ue},D.isValidRange=function(q){return Array.isArray(q)&&2===q.length&&e(D.r2l(q[0]))&&e(D.r2l(q[1]))},D.isPtWithinRange=function(q,te){var ne=D.c2l(q[L],null,te),le=D.r2l(D.range[0]),ue=D.r2l(D.range[1]);return le<ue?le<=ne&&ne<=ue:ue<=ne&&ne<=le},D._emptyCategories=function(){D._categories=[],D._categoriesMap={}},D.clearCalc=function(){var q=D._matchGroup;if(q){var te=null,ne=null;for(var le in q){var ue=F[y.id2name(le)];if(ue._categories){te=ue._categories,ne=ue._categoriesMap;break}}te&&ne?(D._categories=te,D._categoriesMap=ne):D._emptyCategories()}else D._emptyCategories();if(D._initialCategories)for(var de=0;de<D._initialCategories.length;de++)Y(D._initialCategories[de])},D.sortByInitialCategories=function(){var q=[];if(D._emptyCategories(),D._initialCategories)for(var te=0;te<D._initialCategories.length;te++)Y(D._initialCategories[te]);q=q.concat(D._traceIndices);var ne=D._matchGroup;for(var le in ne)if(R!==le){var ue=F[y.id2name(le)];ue._categories=D._categories,ue._categoriesMap=D._categoriesMap,q=q.concat(ue._traceIndices)}return q};var ie=F._d3locale;"date"===D.type&&(D._dateFormat=ie?ie.timeFormat:x,D._extraFormat=F._extraFormat),D._separators=F.separators,D._numFormat=ie?ie.numberFormat:b,delete D._minDtick,delete D._forceTick0}},{"../../constants/numerical":479,"../../lib":503,"./axis_ids":558,"./constants":561,"@plotly/d3":58,"d3-time-format":120,"fast-isnumeric":190}],577:[function(_,oe,ae){"use strict";oe.exports=function(m){var x=["showexponent","showtickprefix","showticksuffix"].filter(function(T){return void 0!==m[T]});if(x.every(function(T){return m[T]===m[x[0]]})||1===x.length)return m[x[0]]}},{}],578:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../components/color").contrast,T=_("./layout_attributes"),b=_("./show_dflt"),e=_("../array_container_defaults");function o(a,l){function i(d,u){return m.coerce(a,l,T.tickformatstops,d,u)}i("enabled")&&(i("dtickrange"),i("value"))}oe.exports=function(a,l,i,d,u){u||(u={});var s=b(a);if(i("showticklabels")){var c=u.font||{},h=l.color,p=-1!==(l.ticklabelposition||"").indexOf("inside")?x(u.bgColor):h&&h!==T.color.dflt?h:c.color;if(m.coerceFont(i,"tickfont",{family:c.family,size:c.size,color:p}),u.noTicklabelstep||"multicategory"===d||"log"===d||i("ticklabelstep"),u.noAng||i("tickangle"),"category"!==d){var v=i("tickformat");e(a,l,{name:"tickformatstops",inclusionAttr:"enabled",handleItemDefaults:o}),l.tickformatstops.length||delete l.tickformatstops,u.noExp||v||"date"===d||(i("showexponent",s),i("exponentformat"),i("minexponent"),i("separatethousands"))}}}},{"../../components/color":366,"../../lib":503,"../array_container_defaults":549,"./layout_attributes":569,"./show_dflt":577}],579:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./layout_attributes");oe.exports=function(T,b,e,o){var a=m.coerce2(T,b,x,"ticklen"),l=m.coerce2(T,b,x,"tickwidth"),i=m.coerce2(T,b,x,"tickcolor",b.color);e("ticks",o.outerTicks||a||l||i?"outside":"")||(delete b.ticklen,delete b.tickwidth,delete b.tickcolor)}},{"../../lib":503,"./layout_attributes":569}],580:[function(_,oe,ae){"use strict";var m=_("./clean_ticks"),x=_("../../lib").isArrayOrTypedArray;oe.exports=function(T,b,e,o){function a(c){var h=T[c];return void 0!==h?h:(b._template||{})[c]}var l=a("tick0"),i=a("dtick"),d=a("tickvals"),u=e("tickmode",x(d)?"array":i?"linear":"auto");if("auto"===u)e("nticks");else if("linear"===u){var s=b.dtick=m.dtick(i,o);b.tick0=m.tick0(l,o,b.calendar,s)}else"multicategory"!==o&&(void 0===e("tickvals")?b.tickmode="auto":e("ticktext"))}},{"../../lib":503,"./clean_ticks":560}],581:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../registry"),T=_("../../lib"),b=_("../../components/drawing"),e=_("./axes");oe.exports=function(o,a,l,i){var d=o._fullLayout;if(0!==a.length){var u,s,c,h;i&&(u=i());var p=m.ease(l.easing);return o._transitionData._interruptCallbacks.push(function(){return window.cancelAnimationFrame(h),h=null,function(){for(var f={},w=0;w<a.length;w++){var y=a[w],A=y.plotinfo.yaxis;y.xr0&&(f[y.plotinfo.xaxis._name+".range"]=y.xr0.slice()),y.yr0&&(f[A._name+".range"]=y.yr0.slice())}return x.call("relayout",o,f).then(function(){for(var k=0;k<a.length;k++)v(a[k].plotinfo)})}()}),s=Date.now(),h=window.requestAnimationFrame(function f(){c=Date.now();for(var w=Math.min(1,(c-s)/l.duration),y=p(w),M=0;M<a.length;M++)g(a[M],y);c-s>l.duration?(function(){for(var A={},k=0;k<a.length;k++){var C=a[k],D=C.plotinfo.yaxis;C.xr1&&(A[C.plotinfo.xaxis._name+".range"]=C.xr1.slice()),C.yr1&&(A[D._name+".range"]=C.yr1.slice())}u&&u(),x.call("relayout",o,A).then(function(){for(var F=0;F<a.length;F++)v(a[F].plotinfo)})}(),h=window.cancelAnimationFrame(f)):h=window.requestAnimationFrame(f)}),Promise.resolve()}function v(f){var w=f.xaxis,y=f.yaxis;d._defs.select("#"+f.clipId+"> rect").call(b.setTranslate,0,0).call(b.setScale,1,1),f.plot.call(b.setTranslate,w._offset,y._offset).call(b.setScale,1,1);var M=f.plot.selectAll(".scatterlayer .trace");M.selectAll(".point").call(b.setPointGroupScale,1,1),M.selectAll(".textpoint").call(b.setTextPointsScale,1,1),M.call(b.hideOutsideRangePoints,f)}function g(f,w){var y=f.plotinfo,M=y.xaxis,A=y.yaxis,k=M._length,C=A._length,P=!!f.xr1,D=!!f.yr1,F=[];if(P){var R=T.simpleMap(f.xr0,M.r2l),L=T.simpleMap(f.xr1,M.r2l),I=R[1]-R[0],B=L[1]-L[0];F[0]=(R[0]*(1-w)+w*L[0]-R[0])/(R[1]-R[0])*k,F[2]=k*(1-w+w*B/I),M.range[0]=M.l2r(R[0]*(1-w)+w*L[0]),M.range[1]=M.l2r(R[1]*(1-w)+w*L[1])}else F[0]=0,F[2]=k;if(D){var V=T.simpleMap(f.yr0,A.r2l),Z=T.simpleMap(f.yr1,A.r2l),Y=V[1]-V[0],ee=Z[1]-Z[0];F[1]=(V[1]*(1-w)+w*Z[1]-V[1])/(V[0]-V[1])*C,F[3]=C*(1-w+w*ee/Y),A.range[0]=M.l2r(V[0]*(1-w)+w*Z[0]),A.range[1]=A.l2r(V[1]*(1-w)+w*Z[1])}else F[1]=0,F[3]=C;e.drawOne(o,M,{skipTitle:!0}),e.drawOne(o,A,{skipTitle:!0}),e.redrawComponents(o,[M._id,A._id]);var J=P?k/F[2]:1,$=D?C/F[3]:1,W=M._offset-(P?F[0]/F[2]*k:0),ie=A._offset-(D?F[1]/F[3]*C:0);y.clipRect.call(b.setTranslate,P?F[0]:0,D?F[1]:0).call(b.setScale,1/J,1/$),y.plot.call(b.setTranslate,W,ie).call(b.setScale,J,$),b.setPointGroupScale(y.zoomScalePts,1/J,1/$),b.setTextPointsScale(y.zoomScaleTxt,1/J,1/$)}e.redrawComponents(o)}},{"../../components/drawing":388,"../../lib":503,"../../registry":638,"./axes":554,"@plotly/d3":58}],582:[function(_,oe,ae){"use strict";var m=_("../../registry").traceIs,x=_("./axis_autotype");function T(e){return{v:"x",h:"y"}[e.orientation||"v"]}function b(e,o){var a=T(e),l=m(e,"box-violin"),i=m(e._fullInput||{},"candlestick");return l&&!i&&o===a&&void 0===e[a]&&void 0===e[a+"0"]}oe.exports=function(e,o,a,l){a("autotypenumbers",l.autotypenumbersDflt),"-"===a("type",(l.splomStash||{}).type)&&(function(i,d){if("-"===i.type){var u,s=i._id,c=s.charAt(0);-1!==s.indexOf("scene")&&(s=c);var h=function(A,k,C){for(var P=0;P<A.length;P++){var D=A[P];if("splom"===D.type&&D._length>0&&(D["_"+C+"axes"]||{})[k]||(D[C+"axis"]||C)===k&&(b(D,C)||(D[C]||[]).length||D[C+"0"]))return D}}(d,s,c);if(h){if("histogram"===h.type&&c==={v:"y",h:"x"}[h.orientation||"v"])return void(i.type="linear");var p=c+"calendar",v=h[p],g={noMultiCategory:!m(h,"cartesian")||m(h,"noMultiCategory")};if("box"===h.type&&h._hasPreCompStats&&c==={h:"x",v:"y"}[h.orientation||"v"]&&(g.noMultiCategory=!0),g.autotypenumbers=i.autotypenumbers,b(h,c)){var f=T(h),w=[];for(u=0;u<d.length;u++){var y=d[u];m(y,"box-violin")&&(y[c+"axis"]||c)===s&&(w.push(void 0!==y[f]?y[f][0]:void 0!==y.name?y.name:"text"),y[p]!==v&&(v=void 0))}i.type=x(w,v,g)}else if("splom"===h.type){var M=h.dimensions[h._axesDim[s]];M.visible&&(i.type=x(M.values,v,g))}else i.type=x(h[c]||[h[c+"0"]],v,g)}}}(o,l.data),"-"===o.type?o.type="linear":e.type=o.type)}},{"../../registry":638,"./axis_autotype":555}],583:[function(_,oe,ae){"use strict";var m=_("../registry"),x=_("../lib");function T(a,l,i){var d,u,s,c=!1;if("data"===l.type)d=a._fullData[null!==l.traces?l.traces[0]:0];else{if("layout"!==l.type)return!1;d=a._fullLayout}return u=x.nestedProperty(d,l.prop).get(),(s=i[l.type]=i[l.type]||{}).hasOwnProperty(l.prop)&&s[l.prop]!==u&&(c=!0),s[l.prop]=u,{changed:c,value:u}}function b(a,l){var i=[],d=l[0],u={};if("string"==typeof d)u[d]=l[1];else{if(!x.isPlainObject(d))return i;u=d}return o(u,function(s,c,h){i.push({type:"layout",prop:s,value:h})},"",0),i}function e(a,l){var i,d,u,s,c=[];if(u=l[1],i=l[2],s={},"string"==typeof(d=l[0]))s[d]=u;else{if(!x.isPlainObject(d))return c;s=d,void 0===i&&(i=u)}return void 0===i&&(i=null),o(s,function(h,p,v){var g,f;if(Array.isArray(v)){f=v.slice();var w=Math.min(f.length,a.data.length);i&&(w=Math.min(w,i.length)),g=[];for(var y=0;y<w;y++)g[y]=i?i[y]:y}else f=v,g=i?i.slice():null;if(null===g)Array.isArray(f)&&(f=f[0]);else if(Array.isArray(g)){if(!Array.isArray(f)){var M=f;f=[];for(var A=0;A<g.length;A++)f[A]=M}f.length=Math.min(g.length,f.length)}c.push({type:"data",prop:h,traces:g,value:f})},"",0),c}function o(a,l,i,d){Object.keys(a).forEach(function(u){var s=a[u];if("_"!==u[0]){var c=i+(d>0?".":"")+u;x.isPlainObject(s)?o(s,l,c,d+1):l(c,u,s)}})}ae.manageCommandObserver=function(a,l,i,d){var u={},s=!0;l&&l._commandObserver&&(u=l._commandObserver),u.cache||(u.cache={}),u.lookupTable={};var c=ae.hasSimpleAPICommandBindings(a,i,u.lookupTable);if(l&&l._commandObserver){if(c)return u;if(l._commandObserver.remove)return l._commandObserver.remove(),l._commandObserver=null,u}if(c){T(a,c,u.cache),u.check=function(){if(s){var v=T(a,c,u.cache);return v.changed&&d&&void 0!==u.lookupTable[v.value]&&(u.disable(),Promise.resolve(d({value:v.value,type:c.type,prop:c.prop,traces:c.traces,index:u.lookupTable[v.value]})).then(u.enable,u.enable)),v.changed}};for(var h=["plotly_relayout","plotly_redraw","plotly_restyle","plotly_update","plotly_animatingframe","plotly_afterplot"],p=0;p<h.length;p++)a._internalOn(h[p],u.check);u.remove=function(){for(var v=0;v<h.length;v++)a._removeInternalListener(h[v],u.check)}}else x.log("Unable to automatically bind plot updates to API command"),u.lookupTable={},u.remove=function(){};return u.disable=function(){s=!1},u.enable=function(){s=!0},l&&(l._commandObserver=u),u},ae.hasSimpleAPICommandBindings=function(a,l,i){var d,u,s=l.length;for(d=0;d<s;d++){var c,h=l[d],p=h.method,v=h.args;if(Array.isArray(v)||(v=[]),!p)return!1;var g=ae.computeAPICommandBindings(a,p,v);if(1!==g.length)return!1;if(u){if((c=g[0]).type!==u.type||c.prop!==u.prop)return!1;if(Array.isArray(u.traces)){if(!Array.isArray(c.traces))return!1;c.traces.sort();for(var f=0;f<u.traces.length;f++)if(u.traces[f]!==c.traces[f])return!1}else if(c.prop!==u.prop)return!1}else u=g[0],Array.isArray(u.traces)&&u.traces.sort();var w=(c=g[0]).value;if(Array.isArray(w)){if(1!==w.length)return!1;w=w[0]}i&&(i[w]=d)}return u},ae.executeAPICommand=function(a,l,i){if("skip"===l)return Promise.resolve();var d=m.apiMethodRegistry[l],u=[a];Array.isArray(i)||(i=[]);for(var s=0;s<i.length;s++)u.push(i[s]);return d.apply(null,u).catch(function(c){return x.warn("API call to Plotly."+l+" rejected.",c),Promise.reject(c)})},ae.computeAPICommandBindings=function(a,l,i){var d,s;switch(Array.isArray(i)||(i=[]),l){case"restyle":d=e(a,i);break;case"relayout":d=b(0,i);break;case"update":d=e(a,[i[0],i[2]]).concat(b(0,[i[1]]));break;case"animate":s=i,d=Array.isArray(s[0])&&1===s[0].length&&-1!==["string","number"].indexOf(typeof s[0][0])?[{type:"layout",prop:"_currentFrame",value:s[0][0].toString()}]:[];break;default:d=[]}return d}},{"../lib":503,"../registry":638}],584:[function(_,oe,ae){"use strict";var m=_("../lib/extend").extendFlat;ae.attributes=function(x,T){T=T||{};var b={valType:"info_array",editType:(x=x||{}).editType,items:[{valType:"number",min:0,max:1,editType:x.editType},{valType:"number",min:0,max:1,editType:x.editType}],dflt:[0,1]},e={x:m({},b,{}),y:m({},b,{}),editType:x.editType};return x.noGridCell||(e.row={valType:"integer",min:0,dflt:0,editType:x.editType},e.column={valType:"integer",min:0,dflt:0,editType:x.editType}),e},ae.defaults=function(x,T,b,e){var o=e&&e.x||[0,1],a=e&&e.y||[0,1],l=T.grid;if(l){var i=b("domain.column");void 0!==i&&(i<l.columns?o=l._domains.x[i]:delete x.domain.column);var d=b("domain.row");void 0!==d&&(d<l.rows?a=l._domains.y[d]:delete x.domain.row)}var u=b("domain.x",o),s=b("domain.y",a);u[0]<u[1]||(x.domain.x=o.slice()),s[0]<s[1]||(x.domain.y=a.slice())}},{"../lib/extend":493}],585:[function(_,oe,ae){"use strict";oe.exports=function(m){var x=m.editType,T=m.colorEditType;void 0===T&&(T=x);var b={family:{valType:"string",noBlank:!0,strict:!0,editType:x},size:{valType:"number",min:1,editType:x},color:{valType:"color",editType:T},editType:x};return m.autoSize&&(b.size.dflt="auto"),m.autoColor&&(b.color.dflt="auto"),m.arrayOk&&(b.family.arrayOk=!0,b.size.arrayOk=!0,b.color.arrayOk=!0),b}},{}],586:[function(_,oe,ae){"use strict";oe.exports={_isLinkedToArray:"frames_entry",group:{valType:"string"},name:{valType:"string"},traces:{valType:"any"},baseframe:{valType:"string"},data:{valType:"any"},layout:{valType:"any"}}},{}],587:[function(_,oe,ae){"use strict";ae.projNames={airy:"airy",aitoff:"aitoff","albers usa":"albersUsa",albers:"albers",august:"august","azimuthal equal area":"azimuthalEqualArea","azimuthal equidistant":"azimuthalEquidistant",baker:"baker",bertin1953:"bertin1953",boggs:"boggs",bonne:"bonne",bottomley:"bottomley",bromley:"bromley",collignon:"collignon","conic conformal":"conicConformal","conic equal area":"conicEqualArea","conic equidistant":"conicEquidistant",craig:"craig",craster:"craster","cylindrical equal area":"cylindricalEqualArea","cylindrical stereographic":"cylindricalStereographic",eckert1:"eckert1",eckert2:"eckert2",eckert3:"eckert3",eckert4:"eckert4",eckert5:"eckert5",eckert6:"eckert6",eisenlohr:"eisenlohr",equirectangular:"equirectangular",fahey:"fahey","foucaut sinusoidal":"foucautSinusoidal",foucaut:"foucaut",ginzburg4:"ginzburg4",ginzburg5:"ginzburg5",ginzburg6:"ginzburg6",ginzburg8:"ginzburg8",ginzburg9:"ginzburg9",gnomonic:"gnomonic","gringorten quincuncial":"gringortenQuincuncial",gringorten:"gringorten",guyou:"guyou",hammer:"hammer",hill:"hill",homolosine:"homolosine",hufnagel:"hufnagel",hyperelliptical:"hyperelliptical",kavrayskiy7:"kavrayskiy7",lagrange:"lagrange",larrivee:"larrivee",laskowski:"laskowski",loximuthal:"loximuthal",mercator:"mercator",miller:"miller",mollweide:"mollweide","mt flat polar parabolic":"mtFlatPolarParabolic","mt flat polar quartic":"mtFlatPolarQuartic","mt flat polar sinusoidal":"mtFlatPolarSinusoidal","natural earth":"naturalEarth","natural earth1":"naturalEarth1","natural earth2":"naturalEarth2","nell hammer":"nellHammer",nicolosi:"nicolosi",orthographic:"orthographic",patterson:"patterson","peirce quincuncial":"peirceQuincuncial",polyconic:"polyconic","rectangular polyconic":"rectangularPolyconic",robinson:"robinson",satellite:"satellite","sinu mollweide":"sinuMollweide",sinusoidal:"sinusoidal",stereographic:"stereographic",times:"times","transverse mercator":"transverseMercator","van der grinten":"vanDerGrinten","van der grinten2":"vanDerGrinten2","van der grinten3":"vanDerGrinten3","van der grinten4":"vanDerGrinten4",wagner4:"wagner4",wagner6:"wagner6",wiechel:"wiechel","winkel tripel":"winkel3",winkel3:"winkel3"},ae.axesNames=["lonaxis","lataxis"],ae.lonaxisSpan={orthographic:180,"azimuthal equal area":360,"azimuthal equidistant":360,"conic conformal":180,gnomonic:160,stereographic:180,"transverse mercator":180,"*":360},ae.lataxisSpan={"conic conformal":150,stereographic:179.5,"*":180},ae.scopeDefaults={world:{lonaxisRange:[-180,180],lataxisRange:[-90,90],projType:"equirectangular",projRotate:[0,0,0]},usa:{lonaxisRange:[-180,-50],lataxisRange:[15,80],projType:"albers usa"},europe:{lonaxisRange:[-30,60],lataxisRange:[30,85],projType:"conic conformal",projRotate:[15,0,0],projParallels:[0,60]},asia:{lonaxisRange:[22,160],lataxisRange:[-15,55],projType:"mercator",projRotate:[0,0,0]},africa:{lonaxisRange:[-30,60],lataxisRange:[-40,40],projType:"mercator",projRotate:[0,0,0]},"north america":{lonaxisRange:[-180,-45],lataxisRange:[5,85],projType:"conic conformal",projRotate:[-100,0,0],projParallels:[29.5,45.5]},"south america":{lonaxisRange:[-100,-30],lataxisRange:[-60,15],projType:"mercator",projRotate:[0,0,0]}},ae.clipPad=.001,ae.precision=.1,ae.landColor="#F0DC82",ae.waterColor="#3399FF",ae.locationmodeToLayer={"ISO-3":"countries","USA-states":"subunits","country names":"countries"},ae.sphereSVG={type:"Sphere"},ae.fillLayers={ocean:1,land:1,lakes:1},ae.lineLayers={subunits:1,countries:1,coastlines:1,rivers:1,frame:1},ae.layers=["bg","ocean","land","lakes","subunits","countries","coastlines","rivers","lataxis","lonaxis","frame","backplot","frontplot"],ae.layersForChoropleth=["bg","ocean","land","subunits","countries","coastlines","lataxis","lonaxis","frame","backplot","rivers","lakes","frontplot"],ae.layerNameToAdjective={ocean:"ocean",land:"land",lakes:"lake",subunits:"subunit",countries:"country",coastlines:"coastline",rivers:"river",frame:"frame"}},{}],588:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("d3-geo"),T=x.geoPath,b=x.geoDistance,e=_("d3-geo-projection"),o=_("../../registry"),a=_("../../lib"),l=a.strTranslate,i=_("../../components/color"),d=_("../../components/drawing"),u=_("../../components/fx"),s=_("../plots"),c=_("../cartesian/axes"),h=_("../cartesian/autorange").getAutoRange,p=_("../../components/dragelement"),v=_("../cartesian/select").prepSelect,g=_("../cartesian/select").clearSelect,f=_("../cartesian/select").selectOnClick,w=_("./zoom"),y=_("./constants"),M=_("../../lib/geo_location_utils"),A=_("../../lib/topojson_utils"),k=_("topojson-client").feature;function C(F){this.id=F.id,this.graphDiv=F.graphDiv,this.container=F.container,this.topojsonURL=F.topojsonURL,this.isStatic=F.staticPlot,this.topojsonName=null,this.topojson=null,this.projection=null,this.scope=null,this.viewInitial=null,this.fitScale=null,this.bounds=null,this.midPt=null,this.hasChoropleth=!1,this.traceHash={},this.layers={},this.basePaths={},this.dataPaths={},this.dataPoints={},this.clipDef=null,this.clipRect=null,this.bgRect=null,this.makeFramework()}var P=C.prototype;function D(F,R){var L=y.clipPad,I=F[0]+L,B=F[1]-L,V=R[0]+L,Z=R[1]-L;I>0&&B<0&&(B+=360);var Y=(B-I)/4;return{type:"Polygon",coordinates:[[[I,V],[I,Z],[I+Y,Z],[I+2*Y,Z],[I+3*Y,Z],[B,Z],[B,V],[B-Y,V],[B-2*Y,V],[B-3*Y,V],[I,V]]]}}oe.exports=function(F){return new C(F)},P.plot=function(F,R,L){var I=this,B=R[this.id],V=[],Z=!1;for(var Y in y.layerNameToAdjective)if("frame"!==Y&&B["show"+Y]){Z=!0;break}for(var ee=0;ee<F.length;ee++)if(F[0][0].trace.locationmode){Z=!0;break}if(Z){var J=A.getTopojsonName(B);null!==I.topojson&&J===I.topojsonName||(I.topojsonName=J,void 0===PlotlyGeoAssets.topojson[I.topojsonName]&&V.push(I.fetchTopojson()))}V=V.concat(M.fetchTraceGeoData(F)),L.push(new Promise(function($,Q){Promise.all(V).then(function(){I.topojson=PlotlyGeoAssets.topojson[I.topojsonName],I.update(F,R),$()}).catch(Q)}))},P.fetchTopojson=function(){var F=this,R=A.getTopojsonPath(F.topojsonURL,F.topojsonName);return new Promise(function(L,I){m.json(R,function(B,V){if(B)return I(404===B.status?new Error(["plotly.js could not find topojson file at",R,".","Make sure the *topojsonURL* plot config option","is set properly."].join(" ")):new Error(["unexpected error while fetching topojson file at",R].join(" ")));PlotlyGeoAssets.topojson[F.topojsonName]=V,L()})})},P.update=function(F,R){var L=R[this.id];this.hasChoropleth=!1;for(var I=0;I<F.length;I++){var B=F[I],V=B[0].trace;"choropleth"===V.type&&(this.hasChoropleth=!0),!0===V.visible&&V._length>0&&V._module.calcGeoJSON(B,R)}if(!this.updateProjection(F,R)){this.viewInitial&&this.scope===L.scope||this.saveViewInitial(L),this.scope=L.scope,this.updateBaseLayers(R,L),this.updateDims(R,L),this.updateFx(R,L),s.generalUpdatePerTraceModule(this.graphDiv,this,F,L);var Z=this.layers.frontplot.select(".scatterlayer");this.dataPoints.point=Z.selectAll(".point"),this.dataPoints.text=Z.selectAll("text"),this.dataPaths.line=Z.selectAll(".js-line");var Y=this.layers.backplot.select(".choroplethlayer");this.dataPaths.choropleth=Y.selectAll("path"),this.render()}},P.updateProjection=function(F,R){var L=this.graphDiv,I=R[this.id],B=R._size,V=I.domain,Z=I.projection,Y=I.lonaxis,ee=I.lataxis,J=Y._ax,$=ee._ax,Q=this.projection=function(ve){var Te=ve.projection,Le=Te.type,Ee=y.projNames[Le];Ee="geo"+a.titleCase(Ee);for(var Pe=(x[Ee]||e[Ee])(),je=ve._isSatellite?180*Math.acos(1/Te.distance)/Math.PI:ve._isClipped?y.lonaxisSpan[Le]/2:null,Ge=["center","rotate","parallels","clipExtent"],Ke=function($e){return $e?Pe:[]},lt=0;lt<Ge.length;lt++){var Ue=Ge[lt];"function"!=typeof Pe[Ue]&&(Pe[Ue]=Ke)}return Pe.isLonLatOverEdges=function($e){if(null===Pe($e))return!0;if(je){var et=Pe.rotate();return b($e,[-et[0],-et[1]])>je*Math.PI/180}return!1},Pe.getPath=function(){return T().projection(Pe)},Pe.getBounds=function($e){return Pe.getPath().bounds($e)},Pe.precision(y.precision),ve._isSatellite&&Pe.tilt(Te.tilt).distance(Te.distance),je&&Pe.clipAngle(je-y.clipPad),Pe}(I),se=[[B.l+B.w*V.x[0],B.t+B.h*(1-V.y[1])],[B.l+B.w*V.x[1],B.t+B.h*(1-V.y[0])]],j=I.center||{},G=Z.rotation||{},W=Y.range||[],ie=ee.range||[];if(I.fitbounds){J._length=se[1][0]-se[0][0],$._length=se[1][1]-se[0][1],J.range=h(L,J),$.range=h(L,$);var q=(J.range[0]+J.range[1])/2,te=($.range[0]+$.range[1])/2;if(I._isScoped)j={lon:q,lat:te};else if(I._isClipped){j={lon:q,lat:te},G={lon:q,lat:te,roll:G.roll};var ne=Z.type,le=y.lonaxisSpan[ne]/2||180,ue=y.lataxisSpan[ne]/2||90;W=[q-le,q+le],ie=[te-ue,te+ue]}else j={lon:q,lat:te},G={lon:q,lat:G.lat,roll:G.roll}}Q.center([j.lon-G.lon,j.lat-G.lat]).rotate([-G.lon,-G.lat,G.roll]).parallels(Z.parallels);var de=D(W,ie);Q.fitExtent(se,de);var he=this.bounds=Q.getBounds(de),be=this.fitScale=Q.scale(),ge=Q.translate();if(I.fitbounds){var we=Q.getBounds(D(J.range,$.range)),Ce=Math.min((he[1][0]-he[0][0])/(we[1][0]-we[0][0]),(he[1][1]-he[0][1])/(we[1][1]-we[0][1]));isFinite(Ce)?Q.scale(Ce*be):a.warn("Something went wrong during"+this.id+"fitbounds computations.")}else Q.scale(Z.scale*be);var De=this.midPt=[(he[0][0]+he[1][0])/2,(he[0][1]+he[1][1])/2];if(Q.translate([ge[0]+(De[0]-ge[0]),ge[1]+(De[1]-ge[1])]).clipExtent(he),I._isAlbersUsa){var Se=Q([j.lon,j.lat]),Fe=Q.translate();Q.translate([Fe[0]-(Se[0]-Fe[0]),Fe[1]-(Se[1]-Fe[1])])}},P.updateBaseLayers=function(F,R){var L=this,I=L.topojson,B=L.layers,V=L.basePaths;function Z(Q){return"lonaxis"===Q||"lataxis"===Q}function Y(Q){return Boolean(y.lineLayers[Q])}function ee(Q){return Boolean(y.fillLayers[Q])}var J=(this.hasChoropleth?y.layersForChoropleth:y.layers).filter(function(Q){return Y(Q)||ee(Q)?R["show"+Q]:!Z(Q)||R[Q].showgrid}),$=L.framework.selectAll(".layer").data(J,String);$.exit().each(function(Q){delete B[Q],delete V[Q],m.select(this).remove()}),$.enter().append("g").attr("class",function(Q){return"layer "+Q}).each(function(Q){var se=B[Q]=m.select(this);"bg"===Q?L.bgRect=se.append("rect").style("pointer-events","all"):Z(Q)?V[Q]=se.append("path").style("fill","none"):"backplot"===Q?se.append("g").classed("choroplethlayer",!0):"frontplot"===Q?se.append("g").classed("scatterlayer",!0):Y(Q)?V[Q]=se.append("path").style("fill","none").style("stroke-miterlimit",2):ee(Q)&&(V[Q]=se.append("path").style("stroke","none"))}),$.order(),$.each(function(Q){var se=V[Q],j=y.layerNameToAdjective[Q];"frame"===Q?se.datum(y.sphereSVG):Y(Q)||ee(Q)?se.datum(k(I,I.objects[Q])):Z(Q)&&se.datum(function(G,W,ie){var q,te,ne,le=W[G],ue=y.scopeDefaults[W.scope];"lonaxis"===G?(q=ue.lonaxisRange,te=ue.lataxisRange,ne=function(Fe,ve){return[Fe,ve]}):"lataxis"===G&&(q=ue.lataxisRange,te=ue.lonaxisRange,ne=function(Fe,ve){return[ve,Fe]});var de={type:"linear",range:[q[0],q[1]-1e-6],tick0:le.tick0,dtick:le.dtick};c.setConvert(de,ie);var he=c.calcTicks(de);W.isScoped||"lonaxis"!==G||he.pop();for(var be=he.length,ge=new Array(be),we=0;we<be;we++)for(var Ce=he[we].x,De=ge[we]=[],Se=te[0];Se<te[1]+2.5;Se+=2.5)De.push(ne(Ce,Se));return{type:"MultiLineString",coordinates:ge}}(Q,R,F)).call(i.stroke,R[Q].gridcolor).call(d.dashLine,"",R[Q].gridwidth),Y(Q)?se.call(i.stroke,R[j+"color"]).call(d.dashLine,"",R[j+"width"]):ee(Q)&&se.call(i.fill,R[j+"color"])})},P.updateDims=function(F,R){var L=this.bounds,I=(R.framewidth||0)/2,B=L[0][0]-I,V=L[0][1]-I,Z=L[1][0]-B+I,Y=L[1][1]-V+I;d.setRect(this.clipRect,B,V,Z,Y),this.bgRect.call(d.setRect,B,V,Z,Y).call(i.fill,R.bgcolor),this.xaxis._offset=B,this.xaxis._length=Z,this.yaxis._offset=V,this.yaxis._length=Y},P.updateFx=function(F,R){var L=this,I=L.graphDiv,B=L.bgRect,V=F.dragmode,Z=F.clickmode;if(!L.isStatic){var Y;"select"===V?Y=function($,Q){($.range={})[L.id]=[J([Q.xmin,Q.ymin]),J([Q.xmax,Q.ymax])]}:"lasso"===V&&(Y=function($,Q,se){($.lassoPoints={})[L.id]=se.filtered.map(J)});var ee={element:L.bgRect.node(),gd:I,plotinfo:{id:L.id,xaxis:L.xaxis,yaxis:L.yaxis,fillRangeItems:Y},xaxes:[L.xaxis],yaxes:[L.yaxis],subplot:L.id,clickFn:function($){2===$&&g(I)}};"pan"===V?(B.node().onmousedown=null,B.call(w(L,R)),B.on("dblclick.zoom",function(){var $=L.viewInitial,Q={};for(var se in $)Q[L.id+"."+se]=$[se];o.call("_guiRelayout",I,Q),I.emit("plotly_doubleclick",null)}),I._context._scrollZoom.geo||B.on("wheel.zoom",null)):"select"!==V&&"lasso"!==V||(B.on(".zoom",null),ee.prepFn=function($,Q,se){v($,Q,se,ee,V)},p.init(ee)),B.on("mousemove",function(){var $=L.projection.invert(a.getPositionFromD3Event());if(!$)return p.unhover(I,m.event);L.xaxis.p2c=function(){return $[0]},L.yaxis.p2c=function(){return $[1]},u.hover(I,m.event,L.id)}),B.on("mouseout",function(){I._dragging||p.unhover(I,m.event)}),B.on("click",function(){"select"!==V&&"lasso"!==V&&(Z.indexOf("select")>-1&&f(m.event,I,[L.xaxis],[L.yaxis],L.id,ee),Z.indexOf("event")>-1&&u.click(I,m.event))})}function J($){return L.projection.invert([$[0]+L.xaxis._offset,$[1]+L.yaxis._offset])}},P.makeFramework=function(){var F=this,R=F.graphDiv,L=R._fullLayout,I="clip"+L._uid+F.id;F.clipDef=L._clips.append("clipPath").attr("id",I),F.clipRect=F.clipDef.append("rect"),F.framework=m.select(F.container).append("g").attr("class","geo "+F.id).call(d.setClipUrl,I,R),F.project=function(B){var V=F.projection(B);return V?[V[0]-F.xaxis._offset,V[1]-F.yaxis._offset]:[null,null]},F.xaxis={_id:"x",c2p:function(B){return F.project(B)[0]}},F.yaxis={_id:"y",c2p:function(B){return F.project(B)[1]}},F.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},c.setConvert(F.mockAxis,L)},P.saveViewInitial=function(F){var L=F.center||{},I=F.projection,B=I.rotation||{};this.viewInitial={fitbounds:F.fitbounds,"projection.scale":I.scale},a.extendFlat(this.viewInitial,F._isScoped?{"center.lon":L.lon,"center.lat":L.lat}:F._isClipped?{"projection.rotation.lon":B.lon,"projection.rotation.lat":B.lat}:{"center.lon":L.lon,"center.lat":L.lat,"projection.rotation.lon":B.lon})},P.render=function(){var F,R=this.projection,L=R.getPath();function I(V){var Z=R(V.lonlat);return Z?l(Z[0],Z[1]):null}function B(V){return R.isLonLatOverEdges(V.lonlat)?"none":null}for(F in this.basePaths)this.basePaths[F].attr("d",L);for(F in this.dataPaths)this.dataPaths[F].attr("d",function(V){return L(V.geojson)});for(F in this.dataPoints)this.dataPoints[F].attr("display",B).attr("transform",I)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../registry":638,"../cartesian/autorange":553,"../cartesian/axes":554,"../cartesian/select":575,"../plots":619,"./constants":587,"./zoom":592,"@plotly/d3":58,"d3-geo":114,"d3-geo-projection":113,"topojson-client":315}],589:[function(_,oe,ae){"use strict";var m=_("../../plots/get_data").getSubplotCalcData,x=_("../../lib").counterRegex,T=_("./geo"),b="geo",e=x(b),o={};o.geo={valType:"subplotid",dflt:b,editType:"calc"},oe.exports={attr:b,name:b,idRoot:b,idRegex:e,attrRegex:e,attributes:o,layoutAttributes:_("./layout_attributes"),supplyLayoutDefaults:_("./layout_defaults"),plot:function(a){for(var l=a._fullLayout,i=a.calcdata,d=l._subplots.geo,u=0;u<d.length;u++){var s=d[u],c=m(i,b,s),h=l[s]._subplot;h||(h=T({id:s,graphDiv:a,container:l._geolayer.node(),topojsonURL:a._context.topojsonURL,staticPlot:a._context.staticPlot}),l[s]._subplot=h),h.plot(c,l,a._promises)}},updateFx:function(a){for(var l=a._fullLayout,i=l._subplots.geo,d=0;d<i.length;d++){var u=l[i[d]];u._subplot.updateFx(l,u)}},clean:function(a,l,i,d){for(var u=d._subplots.geo||[],s=0;s<u.length;s++){var c=u[s],h=d[c]._subplot;!l[c]&&h&&(h.framework.remove(),h.clipDef.remove())}}}},{"../../lib":503,"../../plots/get_data":593,"./geo":588,"./layout_attributes":590,"./layout_defaults":591}],590:[function(_,oe,ae){"use strict";var m=_("../../components/color/attributes"),x=_("../domain").attributes,T=_("./constants"),b=_("../../plot_api/edit_types").overrideAll,e=_("../../lib/sort_object_keys"),o={range:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},showgrid:{valType:"boolean",dflt:!1},tick0:{valType:"number",dflt:0},dtick:{valType:"number"},gridcolor:{valType:"color",dflt:m.lightLine},gridwidth:{valType:"number",min:0,dflt:1}};(oe.exports=b({domain:x({name:"geo"},{}),fitbounds:{valType:"enumerated",values:[!1,"locations","geojson"],dflt:!1,editType:"plot"},resolution:{valType:"enumerated",values:[110,50],dflt:110,coerceNumber:!0},scope:{valType:"enumerated",values:e(T.scopeDefaults),dflt:"world"},projection:{type:{valType:"enumerated",values:e(T.projNames)},rotation:{lon:{valType:"number"},lat:{valType:"number"},roll:{valType:"number"}},tilt:{valType:"number",dflt:0},distance:{valType:"number",min:1.001,dflt:2},parallels:{valType:"info_array",items:[{valType:"number"},{valType:"number"}]},scale:{valType:"number",min:0,dflt:1}},center:{lon:{valType:"number"},lat:{valType:"number"}},visible:{valType:"boolean",dflt:!0},showcoastlines:{valType:"boolean"},coastlinecolor:{valType:"color",dflt:m.defaultLine},coastlinewidth:{valType:"number",min:0,dflt:1},showland:{valType:"boolean",dflt:!1},landcolor:{valType:"color",dflt:T.landColor},showocean:{valType:"boolean",dflt:!1},oceancolor:{valType:"color",dflt:T.waterColor},showlakes:{valType:"boolean",dflt:!1},lakecolor:{valType:"color",dflt:T.waterColor},showrivers:{valType:"boolean",dflt:!1},rivercolor:{valType:"color",dflt:T.waterColor},riverwidth:{valType:"number",min:0,dflt:1},showcountries:{valType:"boolean"},countrycolor:{valType:"color",dflt:m.defaultLine},countrywidth:{valType:"number",min:0,dflt:1},showsubunits:{valType:"boolean"},subunitcolor:{valType:"color",dflt:m.defaultLine},subunitwidth:{valType:"number",min:0,dflt:1},showframe:{valType:"boolean"},framecolor:{valType:"color",dflt:m.defaultLine},framewidth:{valType:"number",min:0,dflt:1},bgcolor:{valType:"color",dflt:m.background},lonaxis:o,lataxis:o},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../domain":584,"./constants":587}],591:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../subplot_defaults"),T=_("../get_data").getSubplotData,b=_("./constants"),e=_("./layout_attributes"),o=b.axesNames;function a(l,i,d,u){var s=T(u.fullData,"geo",u.id).map(function(G){return G._expandedIndex}),c=d("resolution"),h=d("scope"),p=b.scopeDefaults[h],v=d("projection.type",p.projType),g=i._isAlbersUsa="albers usa"===v;g&&(h=i.scope="usa");var f=i._isScoped="world"!==h,w=i._isSatellite="satellite"===v,y=i._isConic=-1!==v.indexOf("conic")||"albers"===v,M=i._isClipped=!!b.lonaxisSpan[v];if(!1===l.visible){var A=m.extendDeep({},i._template);A.showcoastlines=!1,A.showcountries=!1,A.showframe=!1,A.showlakes=!1,A.showland=!1,A.showocean=!1,A.showrivers=!1,A.showsubunits=!1,A.lonaxis&&(A.lonaxis.showgrid=!1),A.lataxis&&(A.lataxis.showgrid=!1),i._template=A}for(var k=d("visible"),C=0;C<o.length;C++){var P,D=o[C],F=[30,10][C];if(f)P=p[D+"Range"];else{var R=b[D+"Span"],L=(R[v]||R["*"])/2,I=d("projection.rotation."+D.substr(0,3),p.projRotate[C]);P=[I-L,I+L]}var B=d(D+".range",P);d(D+".tick0"),d(D+".dtick",F),d(D+".showgrid",!!k&&void 0)&&(d(D+".gridcolor"),d(D+".gridwidth")),i[D]._ax={type:"linear",_id:D.slice(0,3),_traceIndices:s,setScale:m.identity,c2l:m.identity,r2l:m.identity,autorange:!0,range:B.slice(),_m:1,_input:{}}}var V=i.lonaxis.range,Z=i.lataxis.range,Y=V[0],ee=V[1];Y>0&&ee<0&&(ee+=360);var J,$,Q,se=(Y+ee)/2;if(!g){var j=f?p.projRotate:[se,0,0];J=d("projection.rotation.lon",j[0]),d("projection.rotation.lat",j[1]),d("projection.rotation.roll",j[2]),d("showcoastlines",!f&&k)&&(d("coastlinecolor"),d("coastlinewidth")),d("showocean",!!k&&void 0)&&d("oceancolor")}g?($=-96.6,Q=38.7):($=f?se:J,Q=(Z[0]+Z[1])/2),d("center.lon",$),d("center.lat",Q),w&&(d("projection.tilt"),d("projection.distance")),y&&d("projection.parallels",p.projParallels||[0,60]),d("projection.scale"),d("showland",!!k&&void 0)&&d("landcolor"),d("showlakes",!!k&&void 0)&&d("lakecolor"),d("showrivers",!!k&&void 0)&&(d("rivercolor"),d("riverwidth")),d("showcountries",f&&"usa"!==h&&k)&&(d("countrycolor"),d("countrywidth")),("usa"===h||"north america"===h&&50===c)&&(d("showsubunits",k),d("subunitcolor"),d("subunitwidth")),f||d("showframe",k)&&(d("framecolor"),d("framewidth")),d("bgcolor"),d("fitbounds")&&(delete i.projection.scale,f?(delete i.center.lon,delete i.center.lat):M?(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon,delete i.projection.rotation.lat,delete i.lonaxis.range,delete i.lataxis.range):(delete i.center.lon,delete i.center.lat,delete i.projection.rotation.lon))}oe.exports=function(l,i,d){x(l,i,d,{type:"geo",attributes:e,handleDefaults:a,fullData:d,partition:"y"})}},{"../../lib":503,"../get_data":593,"../subplot_defaults":632,"./constants":587,"./layout_attributes":590}],592:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../lib"),T=_("../../registry"),b=Math.PI/180,e=180/Math.PI,o={cursor:"pointer"},a={cursor:"auto"};function l(k,C){return m.behavior.zoom().translate(C.translate()).scale(C.scale())}function i(k,C,P){var D=k.id,F=k.graphDiv,R=F.layout,L=R[D],I=F._fullLayout,B=I[D],V={},Z={};function Y(ee,J){V[D+"."+ee]=x.nestedProperty(L,ee).get(),T.call("_storeDirectGUIEdit",R,I._preGUI,V);var $=x.nestedProperty(B,ee);$.get()!==J&&($.set(J),x.nestedProperty(L,ee).set(J),Z[D+"."+ee]=J)}P(Y),Y("projection.scale",C.scale()/k.fitScale),Y("fitbounds",!1),F.emit("plotly_relayout",Z)}function d(k,C){var P=l(0,C);function D(F){var R=C.invert(k.midPt);F("center.lon",R[0]),F("center.lat",R[1])}return P.on("zoomstart",function(){m.select(this).style(o)}).on("zoom",function(){C.scale(m.event.scale).translate(m.event.translate),k.render();var F=C.invert(k.midPt);k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":C.scale()/k.fitScale,"geo.center.lon":F[0],"geo.center.lat":F[1]})}).on("zoomend",function(){m.select(this).style(a),i(k,C,D)}),P}function u(k,C){var P,D,F,R,L,I,B,V,Z,Y=l(0,C);function ee($){return C.invert($)}function J($){var Q=C.rotate(),se=C.invert(k.midPt);$("projection.rotation.lon",-Q[0]),$("center.lon",se[0]),$("center.lat",se[1])}return Y.on("zoomstart",function(){m.select(this).style(o),P=m.mouse(this),D=C.rotate(),F=C.translate(),R=D,L=ee(P)}).on("zoom",function(){if(I=m.mouse(this),function(se){var j=ee(se);if(!j)return!0;var G=C(j);return Math.abs(G[0]-se[0])>2||Math.abs(G[1]-se[1])>2}(P))return Y.scale(C.scale()),void Y.translate(C.translate());C.scale(m.event.scale),C.translate([F[0],m.event.translate[1]]),L?ee(I)&&(V=ee(I),C.rotate(B=[R[0]+(V[0]-L[0]),D[1],D[2]]),R=B):L=ee(P=I),Z=!0,k.render();var $=C.rotate(),Q=C.invert(k.midPt);k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":C.scale()/k.fitScale,"geo.center.lon":Q[0],"geo.center.lat":Q[1],"geo.projection.rotation.lon":-$[0]})}).on("zoomend",function(){m.select(this).style(a),Z&&i(k,C,J)}),Y}function s(k,C){var P,D={r:C.rotate(),k:C.scale()},F=l(0,C),R=function(ee){for(var J=0,$=arguments.length,Q=[];++J<$;)Q.push(arguments[J]);var se=m.dispatch.apply(null,Q);return se.of=function(j,G){return function(W){var ie;try{ie=W.sourceEvent=m.event,W.target=ee,m.event=W,se[W.type].apply(j,G)}finally{m.event=ie}}},se}(F,"zoomstart","zoom","zoomend"),L=0,I=F.on;function B(ee){L++||ee({type:"zoomstart"})}function V(ee){ee({type:"zoom"})}function Z(ee){--L||ee({type:"zoomend"})}function Y(ee){var J=C.rotate();ee("projection.rotation.lon",-J[0]),ee("projection.rotation.lat",-J[1])}return F.on("zoomstart",function(){m.select(this).style(o);var ee=m.mouse(this),J=C.rotate(),$=J,Q=C.translate(),se=h(J);P=c(C,ee),I.call(F,"zoom",function(){var j=m.mouse(this);if(C.scale(D.k=m.event.scale),P){if(c(C,j)){C.rotate(J).translate(Q);var G=c(C,j),W=v(P,G),ie=M(p(se,W)),q=D.r=g(ie,P,$);isFinite(q[0])&&isFinite(q[1])&&isFinite(q[2])||(q=$),C.rotate(q),$=q}}else P=c(C,ee=j);V(R.of(this,arguments))}),B(R.of(this,arguments))}).on("zoomend",function(){m.select(this).style(a),I.call(F,"zoom",null),Z(R.of(this,arguments)),i(k,C,Y)}).on("zoom.redraw",function(){k.render();var ee=C.rotate();k.graphDiv.emit("plotly_relayouting",{"geo.projection.scale":C.scale()/k.fitScale,"geo.projection.rotation.lon":-ee[0],"geo.projection.rotation.lat":-ee[1]})}),m.rebind(F,R,"on")}function c(k,C){var D,F,R,L,P=k.invert(C);return P&&isFinite(P[0])&&isFinite(P[1])&&(F=(D=P)[0]*b,R=D[1]*b,[(L=Math.cos(R))*Math.cos(F),L*Math.sin(F),Math.sin(R)])}function h(k){var C=.5*k[0]*b,P=.5*k[1]*b,D=.5*k[2]*b,F=Math.sin(C),R=Math.cos(C),L=Math.sin(P),I=Math.cos(P),B=Math.sin(D),V=Math.cos(D);return[R*I*V+F*L*B,F*I*V-R*L*B,R*L*V+F*I*B,R*I*B-F*L*V]}function p(k,C){var P=k[0],D=k[1],F=k[2],R=k[3],L=C[0],I=C[1],B=C[2],V=C[3];return[P*L-D*I-F*B-R*V,P*I+D*L+F*V-R*B,P*B-D*V+F*L+R*I,P*V+D*B-F*I+R*L]}function v(k,C){if(k&&C){var P=[(L=k)[1]*(I=C)[2]-L[2]*I[1],L[2]*I[0]-L[0]*I[2],L[0]*I[1]-L[1]*I[0]],D=Math.sqrt(A(P,P)),F=.5*Math.acos(Math.max(-1,Math.min(1,A(k,C)))),R=Math.sin(F)/D;return D&&[Math.cos(F),P[2]*R,-P[1]*R,P[0]*R]}var L,I}function g(k,C,P){var D=y(C,2,k[0]);D=y(D,1,k[1]),D=y(D,0,k[2]-P[2]);var F,R,L=C[0],I=C[1],B=C[2],V=D[0],Z=D[1],Y=D[2],ee=Math.atan2(I,L)*e,J=Math.sqrt(L*L+I*I);Math.abs(Z)>J?(R=(Z>0?90:-90)-ee,F=0):(R=Math.asin(Z/J)*e-ee,F=Math.sqrt(J*J-Z*Z));var $=180-R-2*ee,Q=(Math.atan2(Y,V)-Math.atan2(B,F))*e,se=(Math.atan2(Y,V)-Math.atan2(B,-F))*e;return f(P[0],P[1],R,Q)<=f(P[0],P[1],$,se)?[R,Q,P[2]]:[$,se,P[2]]}function f(k,C,P,D){var F=w(P-k),R=w(D-C);return Math.sqrt(F*F+R*R)}function w(k){return(k%360+540)%360-180}function y(k,C,P){var D=P*b,F=k.slice(),R=0===C?1:0,L=2===C?1:2,I=Math.cos(D),B=Math.sin(D);return F[R]=k[R]*I-k[L]*B,F[L]=k[L]*I+k[R]*B,F}function M(k){return[Math.atan2(2*(k[0]*k[1]+k[2]*k[3]),1-2*(k[1]*k[1]+k[2]*k[2]))*e,Math.asin(Math.max(-1,Math.min(1,2*(k[0]*k[2]-k[3]*k[1]))))*e,Math.atan2(2*(k[0]*k[3]+k[1]*k[2]),1-2*(k[2]*k[2]+k[3]*k[3]))*e]}function A(k,C){for(var P=0,D=0,F=k.length;D<F;++D)P+=k[D]*C[D];return P}oe.exports=function(k,C){return(C._isScoped?d:C._isClipped?s:u)(k,k.projection)}},{"../../lib":503,"../../registry":638,"@plotly/d3":58}],593:[function(_,oe,ae){"use strict";var m=_("../registry"),x=_("./cartesian/constants").SUBPLOT_PATTERN;ae.getSubplotCalcData=function(T,b,e){var o=m.subplotsRegistry[b];if(!o)return[];for(var a=o.attr,l=[],i=0;i<T.length;i++){var d=T[i];d[0].trace[a]===e&&l.push(d)}return l},ae.getModuleCalcData=function(T,b){var e,o=[],a=[];if(!(e="string"==typeof b?m.getModule(b).plot:"function"==typeof b?b:b.plot))return[o,T];for(var l=0;l<T.length;l++){var i=T[l],d=i[0].trace;!0===d.visible&&0!==d._length&&(d._module.plot===e?o.push(i):a.push(i))}return[o,a]},ae.getSubplotData=function(T,b,e){if(!m.subplotsRegistry[b])return[];var o,a,l,i=m.subplotsRegistry[b].attr,d=[];if("gl2d"===b){var u=e.match(x);a="x"+u[1],l="y"+u[2]}for(var s=0;s<T.length;s++)o=T[s],"gl2d"===b&&m.traceIs(o,"gl2d")?o[i[0]]===a&&o[i[1]]===l&&d.push(o):o[i]===e&&d.push(o);return d}},{"../registry":638,"./cartesian/constants":561}],594:[function(_,oe,ae){"use strict";var m=_("mouse-change"),x=_("mouse-wheel"),T=_("mouse-event-offset"),b=_("../cartesian/constants"),e=_("has-passive-events");function o(a,l){this.element=a,this.plot=l,this.mouseListener=null,this.wheelListener=null,this.lastInputTime=Date.now(),this.lastPos=[0,0],this.boxEnabled=!1,this.boxInited=!1,this.boxStart=[0,0],this.boxEnd=[0,0],this.dragStart=[0,0]}oe.exports=function(a){var l=a.mouseContainer,i=a.glplot,d=new o(l,i);function u(){a.xaxis.autorange=!1,a.yaxis.autorange=!1}function s(c,h,p){var v,g,f=a.calcDataBox(),w=i.viewBox,y=d.lastPos[0],M=d.lastPos[1],A=b.MINDRAG*i.pixelRatio,k=b.MINZOOM*i.pixelRatio;function C(I,B,V){var Z=Math.min(B,V),Y=Math.max(B,V);Z!==Y?(f[I]=Z,f[I+2]=Y,d.dataBox=f,a.setRanges(f)):(a.selectBox.selectBox=[0,0,1,1],a.glplot.setDirty())}switch(h*=i.pixelRatio,p=w[3]-w[1]-(p*=i.pixelRatio),a.fullLayout.dragmode){case"zoom":if(c){var P=h/(w[2]-w[0])*(f[2]-f[0])+f[0],D=p/(w[3]-w[1])*(f[3]-f[1])+f[1];d.boxInited||(d.boxStart[0]=P,d.boxStart[1]=D,d.dragStart[0]=h,d.dragStart[1]=p),d.boxEnd[0]=P,d.boxEnd[1]=D,d.boxInited=!0,d.boxEnabled||d.boxStart[0]===d.boxEnd[0]&&d.boxStart[1]===d.boxEnd[1]||(d.boxEnabled=!0);var F=Math.abs(d.dragStart[0]-h)<k,R=Math.abs(d.dragStart[1]-p)<k;if(!function(){for(var I=a.graphDiv._fullLayout._axisConstraintGroups,B=a.xaxis._id,V=a.yaxis._id,Z=0;Z<I.length;Z++)if(-1!==I[Z][B]){if(-1!==I[Z][V])return!0;break}return!1}()||F&&R)F&&(d.boxEnd[0]=d.boxStart[0]),R&&(d.boxEnd[1]=d.boxStart[1]);else{v=d.boxEnd[0]-d.boxStart[0],g=d.boxEnd[1]-d.boxStart[1];var L=(f[3]-f[1])/(f[2]-f[0]);Math.abs(v*L)>Math.abs(g)?(d.boxEnd[1]=d.boxStart[1]+Math.abs(v)*L*(g>=0?1:-1),d.boxEnd[1]<f[1]?(d.boxEnd[1]=f[1],d.boxEnd[0]=d.boxStart[0]+(f[1]-d.boxStart[1])/Math.abs(L)):d.boxEnd[1]>f[3]&&(d.boxEnd[1]=f[3],d.boxEnd[0]=d.boxStart[0]+(f[3]-d.boxStart[1])/Math.abs(L))):(d.boxEnd[0]=d.boxStart[0]+Math.abs(g)/L*(v>=0?1:-1),d.boxEnd[0]<f[0]?(d.boxEnd[0]=f[0],d.boxEnd[1]=d.boxStart[1]+(f[0]-d.boxStart[0])*Math.abs(L)):d.boxEnd[0]>f[2]&&(d.boxEnd[0]=f[2],d.boxEnd[1]=d.boxStart[1]+(f[2]-d.boxStart[0])*Math.abs(L)))}}else d.boxEnabled?(g=d.boxStart[1]!==d.boxEnd[1],(v=d.boxStart[0]!==d.boxEnd[0])||g?(v&&(C(0,d.boxStart[0],d.boxEnd[0]),a.xaxis.autorange=!1),g&&(C(1,d.boxStart[1],d.boxEnd[1]),a.yaxis.autorange=!1),a.relayoutCallback()):a.glplot.setDirty(),d.boxEnabled=!1,d.boxInited=!1):d.boxInited&&(d.boxInited=!1);break;case"pan":d.boxEnabled=!1,d.boxInited=!1,c?(d.panning||(d.dragStart[0]=h,d.dragStart[1]=p),Math.abs(d.dragStart[0]-h)<A&&(h=d.dragStart[0]),Math.abs(d.dragStart[1]-p)<A&&(p=d.dragStart[1]),g=(M-p)*(f[3]-f[1])/(i.viewBox[3]-i.viewBox[1]),f[0]+=v=(y-h)*(f[2]-f[0])/(i.viewBox[2]-i.viewBox[0]),f[2]+=v,f[1]+=g,f[3]+=g,a.setRanges(f),d.panning=!0,d.lastInputTime=Date.now(),u(),a.cameraChanged(),a.handleAnnotations()):d.panning&&(d.panning=!1,a.relayoutCallback())}d.lastPos[0]=h,d.lastPos[1]=p}return d.mouseListener=m(l,s),l.addEventListener("touchstart",function(c){var h=T(c.changedTouches[0],l);s(0,h[0],h[1]),s(1,h[0],h[1]),c.preventDefault()},!!e&&{passive:!1}),l.addEventListener("touchmove",function(c){c.preventDefault();var h=T(c.changedTouches[0],l);s(1,h[0],h[1]),c.preventDefault()},!!e&&{passive:!1}),l.addEventListener("touchend",function(c){s(0,d.lastPos[0],d.lastPos[1]),c.preventDefault()},!!e&&{passive:!1}),d.wheelListener=x(l,function(c,h){if(!a.scrollZoom)return!1;var p=a.calcDataBox(),v=i.viewBox,g=d.lastPos[0],f=d.lastPos[1],w=Math.exp(5*h/(v[3]-v[1])),y=g/(v[2]-v[0])*(p[2]-p[0])+p[0],M=f/(v[3]-v[1])*(p[3]-p[1])+p[1];return p[0]=(p[0]-y)*w+y,p[2]=(p[2]-y)*w+y,p[1]=(p[1]-M)*w+M,p[3]=(p[3]-M)*w+M,a.setRanges(p),d.lastInputTime=Date.now(),u(),a.cameraChanged(),a.handleAnnotations(),a.relayoutCallback(),!0},!0),d}},{"../cartesian/constants":561,"has-passive-events":229,"mouse-change":241,"mouse-event-offset":242,"mouse-wheel":244}],595:[function(_,oe,ae){"use strict";var m=_("../cartesian/axes"),x=_("../../lib/str2rgbarray");function T(o){this.scene=o,this.gl=o.gl,this.pixelRatio=o.pixelRatio,this.screenBox=[0,0,1,1],this.viewBox=[0,0,1,1],this.dataBox=[-1,-1,1,1],this.borderLineEnable=[!1,!1,!1,!1],this.borderLineWidth=[1,1,1,1],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.ticks=[[],[]],this.tickEnable=[!0,!0,!1,!1],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labels=["x","y"],this.labelEnable=[!0,!0,!1,!1],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelPad=[15,15,15,15],this.labelSize=[12,12],this.labelFont=["sans-serif","sans-serif"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.title="",this.titleEnable=!0,this.titleCenter=[0,0,0,0],this.titleAngle=0,this.titleColor=[0,0,0,1],this.titleFont="sans-serif",this.titleSize=18,this.gridLineEnable=[!0,!0],this.gridLineColor=[[0,0,0,.5],[0,0,0,.5]],this.gridLineWidth=[1,1],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[1,1],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.static=this.scene.staticPlot}var b=T.prototype,e=["xaxis","yaxis"];b.merge=function(o){var a,l,i,d,u,s,c,h,p,v,g;for(this.titleEnable=!1,this.backgroundColor=x(o.plot_bgcolor),v=0;v<2;++v){var f=(a=e[v]).charAt(0);for(i=(l=o[this.scene[a]._name]).title.text===this.scene.fullLayout._dfltTitle[f]?"":l.title.text,g=0;g<=2;g+=2)this.labelEnable[v+g]=!1,this.labels[v+g]=i,this.labelColor[v+g]=x(l.title.font.color),this.labelFont[v+g]=l.title.font.family,this.labelSize[v+g]=l.title.font.size,this.labelPad[v+g]=this.getLabelPad(a,l),this.tickEnable[v+g]=!1,this.tickColor[v+g]=x((l.tickfont||{}).color),this.tickAngle[v+g]="auto"===l.tickangle?0:Math.PI*-l.tickangle/180,this.tickPad[v+g]=this.getTickPad(l),this.tickMarkLength[v+g]=0,this.tickMarkWidth[v+g]=l.tickwidth||0,this.tickMarkColor[v+g]=x(l.tickcolor),this.borderLineEnable[v+g]=!1,this.borderLineColor[v+g]=x(l.linecolor),this.borderLineWidth[v+g]=l.linewidth||0;c=this.hasSharedAxis(l),u=this.hasAxisInDfltPos(a,l)&&!c,s=this.hasAxisInAltrPos(a,l)&&!c,d=l.mirror||!1,h=c?-1!==String(d).indexOf("all"):!!d,p=c?"allticks"===d:-1!==String(d).indexOf("ticks"),u?this.labelEnable[v]=!0:s&&(this.labelEnable[v+2]=!0),u?this.tickEnable[v]=l.showticklabels:s&&(this.tickEnable[v+2]=l.showticklabels),(u||h)&&(this.borderLineEnable[v]=l.showline),(s||h)&&(this.borderLineEnable[v+2]=l.showline),(u||p)&&(this.tickMarkLength[v]=this.getTickMarkLength(l)),(s||p)&&(this.tickMarkLength[v+2]=this.getTickMarkLength(l)),this.gridLineEnable[v]=l.showgrid,this.gridLineColor[v]=x(l.gridcolor),this.gridLineWidth[v]=l.gridwidth,this.zeroLineEnable[v]=l.zeroline,this.zeroLineColor[v]=x(l.zerolinecolor),this.zeroLineWidth[v]=l.zerolinewidth}},b.hasSharedAxis=function(o){var a=this.scene;return 0!==m.findSubplotsWithAxis(a.fullLayout._subplots.gl2d,o).indexOf(a.id)},b.hasAxisInDfltPos=function(o,a){var l=a.side;return"xaxis"===o?"bottom"===l:"yaxis"===o?"left"===l:void 0},b.hasAxisInAltrPos=function(o,a){var l=a.side;return"xaxis"===o?"top"===l:"yaxis"===o?"right"===l:void 0},b.getLabelPad=function(o,a){var l=a.title.font.size,i=a.showticklabels;return"xaxis"===o?"top"===a.side?l*(1.5+(i?1:0))-10:l*(1.5+(i?.5:0))-10:"yaxis"===o?"right"===a.side?10+l*(1.5+(i?1:.5)):10+l*(1.5+(i?.5:0)):void 0},b.getTickPad=function(o){return"outside"===o.ticks?10+o.ticklen:15},b.getTickMarkLength=function(o){if(!o.ticks)return 0;var a=o.ticklen;return"inside"===o.ticks?-a:a},oe.exports=function(o){return new T(o)}},{"../../lib/str2rgbarray":528,"../cartesian/axes":554}],596:[function(_,oe,ae){"use strict";var m=_("../../plot_api/edit_types").overrideAll,x=_("./scene2d"),T=_("../layout_attributes"),b=_("../../constants/xmlns_namespaces"),e=_("../cartesian/constants"),o=_("../cartesian"),a=_("../../components/fx/layout_attributes"),l=_("../get_data").getSubplotData;ae.name="gl2d",ae.attr=["xaxis","yaxis"],ae.idRoot=["x","y"],ae.idRegex=e.idRegex,ae.attrRegex=e.attrRegex,ae.attributes=_("../cartesian/attributes"),ae.supplyLayoutDefaults=function(i,d,u){d._has("cartesian")||o.supplyLayoutDefaults(i,d,u)},ae.layoutAttrOverrides=m(o.layoutAttributes,"plot","from-root"),ae.baseLayoutAttrOverrides=m({plot_bgcolor:T.plot_bgcolor,hoverlabel:a.hoverlabel},"plot","nested"),ae.plot=function(i){for(var d=i._fullLayout,u=i._fullData,s=d._subplots.gl2d,c=0;c<s.length;c++){var h=s[c],p=d._plots[h],v=l(u,"gl2d",h),g=p._scene2d;void 0===g&&(g=new x({id:h,graphDiv:i,container:i.querySelector(".gl-container"),staticPlot:i._context.staticPlot,plotGlPixelRatio:i._context.plotGlPixelRatio},d),p._scene2d=g),g.plot(v,i.calcdata,d,i.layout)}},ae.clean=function(i,d,u,s){for(var c=s._subplots.gl2d||[],h=0;h<c.length;h++){var p=c[h],v=s._plots[p];v._scene2d&&0===l(i,"gl2d",p).length&&(v._scene2d.destroy(),delete s._plots[p])}o.clean.apply(this,arguments)},ae.drawFramework=function(i){i._context.staticPlot||o.drawFramework(i)},ae.toSVG=function(i){for(var d=i._fullLayout,u=d._subplots.gl2d,s=0;s<u.length;s++){var c=d._plots[u[s]]._scene2d,h=c.toImage("png");d._glimages.append("svg:image").attr({xmlns:b.svg,"xlink:href":h,x:0,y:0,width:"100%",height:"100%",preserveAspectRatio:"none"}),c.destroy()}},ae.updateFx=function(i){for(var d=i._fullLayout,u=d._subplots.gl2d,s=0;s<u.length;s++)d._plots[u[s]]._scene2d.updateFx(d.dragmode)}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../plot_api/edit_types":536,"../cartesian":568,"../cartesian/attributes":552,"../cartesian/constants":561,"../get_data":593,"../layout_attributes":610,"./scene2d":597}],597:[function(_,oe,ae){"use strict";var m,x,T=_("../../registry"),b=_("../../plots/cartesian/axes"),e=_("../../components/fx"),o=_("../../../stackgl_modules").gl_plot2d,a=_("../../../stackgl_modules").gl_spikes2d,l=_("../../../stackgl_modules").gl_select_box,i=_("webgl-context"),d=_("./convert"),u=_("./camera"),s=_("../../lib/show_no_webgl_msg"),c=_("../cartesian/constraints"),h=c.enforce,p=c.clean,v=_("../cartesian/autorange").doAutoRange,g=_("../../components/dragelement/helpers"),f=g.drawMode,w=g.selectMode,y=["xaxis","yaxis"],M=_("../cartesian/constants").SUBPLOT_PATTERN;function A(C,P){this.container=C.container,this.graphDiv=C.graphDiv,this.pixelRatio=C.plotGlPixelRatio||window.devicePixelRatio,this.id=C.id,this.staticPlot=!!C.staticPlot,this.scrollZoom=this.graphDiv._context._scrollZoom.cartesian,this.fullData=null,this.updateRefs(P),this.makeFramework(),this.stopped||(this.glplotOptions=d(this),this.glplotOptions.merge(P),this.glplot=o(this.glplotOptions),this.camera=u(this),this.traces={},this.spikes=a(this.glplot),this.selectBox=l(this.glplot,{innerFill:!1,outerFill:!0}),this.lastButtonState=0,this.pickResult=null,this.isMouseOver=!0,this.stopped=!1,this.redraw=this.draw.bind(this),this.redraw())}oe.exports=A;var k=A.prototype;k.makeFramework=function(){if(this.staticPlot){if(!(x||(m=document.createElement("canvas"),x=i({canvas:m,preserveDrawingBuffer:!1,premultipliedAlpha:!0,antialias:!0}))))throw new Error("Error creating static canvas/context for image server");this.canvas=m,this.gl=x}else{var C=this.container.querySelector(".gl-canvas-focus"),P=i({canvas:C,preserveDrawingBuffer:!0,premultipliedAlpha:!0});if(!P)return s(this),void(this.stopped=!0);this.canvas=C,this.gl=P}var D=this.canvas;D.style.width="100%",D.style.height="100%",D.style.position="absolute",D.style.top="0px",D.style.left="0px",D.style["pointer-events"]="none",this.updateSize(D);var F=this.svgContainer=document.createElementNS("http://www.w3.org/2000/svg","svg");F.style.position="absolute",F.style.top=F.style.left="0px",F.style.width=F.style.height="100%",F.style["z-index"]=20,F.style["pointer-events"]="none";var R=this.mouseContainer=document.createElement("div");R.style.position="absolute",R.style["pointer-events"]="auto",this.pickCanvas=this.container.querySelector(".gl-canvas-pick");var L=this.container;L.appendChild(F),L.appendChild(R);var I=this;R.addEventListener("mouseout",function(){I.isMouseOver=!1,I.unhover()}),R.addEventListener("mouseover",function(){I.isMouseOver=!0})},k.toImage=function(C){C||(C="png"),this.stopped=!0,this.staticPlot&&this.container.appendChild(m),this.updateSize(this.canvas);var P=this.glplot.gl,D=P.drawingBufferWidth,F=P.drawingBufferHeight;P.clearColor(1,1,1,0),P.clear(P.COLOR_BUFFER_BIT|P.DEPTH_BUFFER_BIT),this.glplot.setDirty(),this.glplot.draw(),P.bindFramebuffer(P.FRAMEBUFFER,null);var R=new Uint8Array(D*F*4);P.readPixels(0,0,D,F,P.RGBA,P.UNSIGNED_BYTE,R);for(var L=0,I=F-1;L<I;++L,--I)for(var B=0;B<D;++B)for(var V=0;V<4;++V){var Z=R[4*(D*L+B)+V];R[4*(D*L+B)+V]=R[4*(D*I+B)+V],R[4*(D*I+B)+V]=Z}var Y=document.createElement("canvas");Y.width=D,Y.height=F;var ee,J=Y.getContext("2d"),$=J.createImageData(D,F);switch($.data.set(R),J.putImageData($,0,0),C){case"jpeg":ee=Y.toDataURL("image/jpeg");break;case"webp":ee=Y.toDataURL("image/webp");break;default:ee=Y.toDataURL("image/png")}return this.staticPlot&&this.container.removeChild(m),ee},k.updateSize=function(C){C||(C=this.canvas);var P=this.pixelRatio,D=this.fullLayout,R=D.height,L=0|Math.ceil(P*D.width),I=0|Math.ceil(P*R);return C.width===L&&C.height===I||(C.width=L,C.height=I),C},k.computeTickMarks=function(){this.xaxis.setScale(),this.yaxis.setScale();for(var C=[b.calcTicks(this.xaxis),b.calcTicks(this.yaxis)],P=0;P<2;++P)for(var D=0;D<C[P].length;++D)C[P][D].text=C[P][D].text+"";return C},k.updateRefs=function(C){this.fullLayout=C;var P=this.id.match(M),F="yaxis"+P[2];this.xaxis=this.fullLayout["xaxis"+P[1]],this.yaxis=this.fullLayout[F]},k.relayoutCallback=function(){var C=this.graphDiv,P=this.xaxis,D=this.yaxis,F=C.layout,R={},L=R[P._name+".range"]=P.range.slice(),I=R[D._name+".range"]=D.range.slice();R[P._name+".autorange"]=P.autorange,R[D._name+".autorange"]=D.autorange,T.call("_storeDirectGUIEdit",C.layout,C._fullLayout._preGUI,R);var B=F[P._name];B.range=L,B.autorange=P.autorange;var V=F[D._name];V.range=I,V.autorange=D.autorange,R.lastInputTime=this.camera.lastInputTime,C.emit("plotly_relayout",R)},k.cameraChanged=function(){var C=this.camera;this.glplot.setDataBox(this.calcDataBox());var P=this.computeTickMarks();(function(D,F){for(var R=0;R<2;++R){var L=D[R],I=F[R];if(L.length!==I.length)return!0;for(var B=0;B<L.length;++B)if(L[B].x!==I[B].x)return!0}return!1})(P,this.glplotOptions.ticks)&&(this.glplotOptions.ticks=P,this.glplotOptions.dataBox=C.dataBox,this.glplot.update(this.glplotOptions),this.handleAnnotations())},k.handleAnnotations=function(){for(var C=this.graphDiv,P=this.fullLayout.annotations,D=0;D<P.length;D++){var F=P[D];F.xref===this.xaxis._id&&F.yref===this.yaxis._id&&T.getComponentMethod("annotations","drawOne")(C,D)}},k.destroy=function(){if(this.glplot){var C=this.traces;C&&Object.keys(C).map(function(P){C[P].dispose(),delete C[P]}),this.glplot.dispose(),this.container.removeChild(this.svgContainer),this.container.removeChild(this.mouseContainer),this.fullData=null,this.glplot=null,this.stopped=!0,this.camera.mouseListener.enabled=!1,this.mouseContainer.removeEventListener("wheel",this.camera.wheelListener),this.camera=null}},k.plot=function(C,P,D){var F=this.glplot;this.updateRefs(D),this.xaxis.clearCalc(),this.yaxis.clearCalc(),this.updateTraces(C,P),this.updateFx(D.dragmode);var R=D.width,L=D.height;this.updateSize(this.canvas);var I=this.glplotOptions;I.merge(D),I.screenBox=[0,0,R,L];var B={_fullLayout:{_axisConstraintGroups:D._axisConstraintGroups,xaxis:this.xaxis,yaxis:this.yaxis,_size:D._size}};p(B,this.xaxis),p(B,this.yaxis);var V,Z,Y=D._size,ee=this.xaxis.domain,J=this.yaxis.domain;for(I.viewBox=[Y.l+ee[0]*Y.w,Y.b+J[0]*Y.h,R-Y.r-(1-ee[1])*Y.w,L-Y.t-(1-J[1])*Y.h],this.mouseContainer.style.width=Y.w*(ee[1]-ee[0])+"px",this.mouseContainer.style.height=Y.h*(J[1]-J[0])+"px",this.mouseContainer.height=Y.h*(J[1]-J[0]),this.mouseContainer.style.left=Y.l+ee[0]*Y.w+"px",this.mouseContainer.style.top=Y.t+(1-J[1])*Y.h+"px",Z=0;Z<2;++Z)(V=this[y[Z]])._length=I.viewBox[Z+2]-I.viewBox[Z],v(this.graphDiv,V),V.setScale();h(B),I.ticks=this.computeTickMarks(),I.dataBox=this.calcDataBox(),I.merge(D),F.update(I),this.glplot.draw()},k.calcDataBox=function(){var C=this.xaxis,P=this.yaxis,D=C.range,F=P.range,R=C.r2l,L=P.r2l;return[R(D[0]),L(F[0]),R(D[1]),L(F[1])]},k.setRanges=function(C){var P=this.xaxis,D=this.yaxis,F=P.l2r,R=D.l2r;P.range=[F(C[0]),F(C[2])],D.range=[R(C[1]),R(C[3])]},k.updateTraces=function(C,P){var D,F,R,L=Object.keys(this.traces);this.fullData=C;e:for(D=0;D<L.length;D++){var I=L[D],B=this.traces[I];for(F=0;F<C.length;F++)if((R=C[F]).uid===I&&R.type===B.type)continue e;B.dispose(),delete this.traces[I]}for(D=0;D<C.length;D++){var V=P[D],Z=this.traces[(R=C[D]).uid];Z?Z.update(R,V):(Z=R._module.plot(this,R,V),this.traces[R.uid]=Z)}this.glplot.objects.sort(function(Y,ee){return Y._trace.index-ee._trace.index})},k.updateFx=function(C){w(C)||f(C)?(this.pickCanvas.style["pointer-events"]="none",this.mouseContainer.style["pointer-events"]="none"):(this.pickCanvas.style["pointer-events"]="auto",this.mouseContainer.style["pointer-events"]="auto"),this.mouseContainer.style.cursor="pan"===C?"move":"zoom"===C?"crosshair":null},k.emitPointAction=function(C,P){for(var D,F=C.trace.uid,R=C.pointIndex,L=0;L<this.fullData.length;L++)this.fullData[L].uid===F&&(D=this.fullData[L]);var I={x:C.traceCoord[0],y:C.traceCoord[1],curveNumber:D.index,pointNumber:R,data:D._input,fullData:this.fullData,xaxis:this.xaxis,yaxis:this.yaxis};e.appendArrayPointValue(I,D,R),this.graphDiv.emit(P,{points:[I]})},k.draw=function(){if(!this.stopped){requestAnimationFrame(this.redraw);var C=this.glplot,P=this.camera,D=P.mouseListener,F=1===this.lastButtonState&&0===D.buttons,R=this.fullLayout;this.lastButtonState=D.buttons,this.cameraChanged();var L,I=D.x*C.pixelRatio,B=this.canvas.height-C.pixelRatio*D.y;if(P.boxEnabled&&"zoom"===R.dragmode){this.selectBox.enabled=!0;for(var V=this.selectBox.selectBox=[Math.min(P.boxStart[0],P.boxEnd[0]),Math.min(P.boxStart[1],P.boxEnd[1]),Math.max(P.boxStart[0],P.boxEnd[0]),Math.max(P.boxStart[1],P.boxEnd[1])],Z=0;Z<2;Z++)P.boxStart[Z]===P.boxEnd[Z]&&(V[Z]=C.dataBox[Z],V[Z+2]=C.dataBox[Z+2]);C.setDirty()}else if(!P.panning&&this.isMouseOver){this.selectBox.enabled=!1;var Y=R._size,$=(L=C.pick(I/C.pixelRatio+Y.l+this.xaxis.domain[0]*Y.w,B/C.pixelRatio-(Y.t+(1-this.yaxis.domain[1])*Y.h)))&&L.object._trace.handlePick(L);if($&&F&&this.emitPointAction($,"plotly_click"),L&&"skip"!==L.object._trace.hoverinfo&&R.hovermode&&$&&(!this.lastPickResult||this.lastPickResult.traceUid!==$.trace.uid||this.lastPickResult.dataCoord[0]!==$.dataCoord[0]||this.lastPickResult.dataCoord[1]!==$.dataCoord[1])){var Q=$;this.lastPickResult={traceUid:$.trace?$.trace.uid:null,dataCoord:$.dataCoord.slice()},this.spikes.update({center:L.dataCoord}),Q.screenCoord=[((C.viewBox[2]-C.viewBox[0])*(L.dataCoord[0]-C.dataBox[0])/(C.dataBox[2]-C.dataBox[0])+C.viewBox[0])/C.pixelRatio,(this.canvas.height-(C.viewBox[3]-C.viewBox[1])*(L.dataCoord[1]-C.dataBox[1])/(C.dataBox[3]-C.dataBox[1])-C.viewBox[1])/C.pixelRatio],this.emitPointAction($,"plotly_hover");var se=this.fullData[Q.trace.index]||{},j=Q.pointIndex,G=e.castHoverinfo(se,R,j);if(G&&"all"!==G){var W=G.split("+");-1===W.indexOf("x")&&(Q.traceCoord[0]=void 0),-1===W.indexOf("y")&&(Q.traceCoord[1]=void 0),-1===W.indexOf("z")&&(Q.traceCoord[2]=void 0),-1===W.indexOf("text")&&(Q.textLabel=void 0),-1===W.indexOf("name")&&(Q.name=void 0)}e.loneHover({x:Q.screenCoord[0],y:Q.screenCoord[1],xLabel:this.hoverFormatter("xaxis",Q.traceCoord[0]),yLabel:this.hoverFormatter("yaxis",Q.traceCoord[1]),zLabel:Q.traceCoord[2],text:Q.textLabel,name:Q.name,color:e.castHoverOption(se,j,"bgcolor")||Q.color,borderColor:e.castHoverOption(se,j,"bordercolor"),fontFamily:e.castHoverOption(se,j,"font.family"),fontSize:e.castHoverOption(se,j,"font.size"),fontColor:e.castHoverOption(se,j,"font.color"),nameLength:e.castHoverOption(se,j,"namelength"),textAlign:e.castHoverOption(se,j,"align")},{container:this.svgContainer,gd:this.graphDiv})}}L||this.unhover(),C.draw()}},k.unhover=function(){this.lastPickResult&&(this.spikes.update({}),this.lastPickResult=null,this.graphDiv.emit("plotly_unhover"),e.loneUnhover(this.svgContainer))},k.hoverFormatter=function(C,P){if(void 0!==P){var D=this[C];return b.tickText(D,D.c2l(P),"hover").text}}},{"../../../stackgl_modules":1120,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib/show_no_webgl_msg":525,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/constants":561,"../cartesian/constraints":562,"./camera":594,"./convert":595,"webgl-context":331}],598:[function(_,oe,ae){"use strict";var m=_("../../plot_api/edit_types").overrideAll,x=_("../../components/fx/layout_attributes"),T=_("./scene"),b=_("../get_data").getSubplotData,e=_("../../lib"),o=_("../../constants/xmlns_namespaces");ae.name="gl3d",ae.attr="scene",ae.idRoot="scene",ae.idRegex=ae.attrRegex=e.counterRegex("scene"),ae.attributes=_("./layout/attributes"),ae.layoutAttributes=_("./layout/layout_attributes"),ae.baseLayoutAttrOverrides=m({hoverlabel:x.hoverlabel},"plot","nested"),ae.supplyLayoutDefaults=_("./layout/defaults"),ae.plot=function(a){for(var l=a._fullLayout,i=a._fullData,d=l._subplots.gl3d,u=0;u<d.length;u++){var s=d[u],c=b(i,"gl3d",s),h=l[s],p=h.camera,v=h._scene;v||(v=new T({id:s,graphDiv:a,container:a.querySelector(".gl-container"),staticPlot:a._context.staticPlot,plotGlPixelRatio:a._context.plotGlPixelRatio,camera:p},l),h._scene=v),v.viewInitial||(v.viewInitial={up:{x:p.up.x,y:p.up.y,z:p.up.z},eye:{x:p.eye.x,y:p.eye.y,z:p.eye.z},center:{x:p.center.x,y:p.center.y,z:p.center.z}}),v.plot(c,l,a.layout)}},ae.clean=function(a,l,i,d){for(var u=d._subplots.gl3d||[],s=0;s<u.length;s++){var c=u[s];!l[c]&&d[c]._scene&&(d[c]._scene.destroy(),d._infolayer&&d._infolayer.selectAll(".annotation-"+c).remove())}},ae.toSVG=function(a){for(var l=a._fullLayout,i=l._subplots.gl3d,d=l._size,u=0;u<i.length;u++){var s=l[i[u]],c=s.domain,h=s._scene,p=h.toImage("png");l._glimages.append("svg:image").attr({xmlns:o.svg,"xlink:href":p,x:d.l+d.w*c.x[0],y:d.t+d.h*(1-c.y[1]),width:d.w*(c.x[1]-c.x[0]),height:d.h*(c.y[1]-c.y[0]),preserveAspectRatio:"none"}),h.destroy()}},ae.cleanId=function(a){if(a.match(/^scene[0-9]*$/)){var l=a.substr(5);return"1"===l&&(l=""),"scene"+l}},ae.updateFx=function(a){for(var l=a._fullLayout,i=l._subplots.gl3d,d=0;d<i.length;d++)l[i[d]]._scene.updateFx(l.dragmode,l.hovermode)}},{"../../components/fx/layout_attributes":407,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../plot_api/edit_types":536,"../get_data":593,"./layout/attributes":599,"./layout/defaults":603,"./layout/layout_attributes":604,"./scene":608}],599:[function(_,oe,ae){"use strict";oe.exports={scene:{valType:"subplotid",dflt:"scene",editType:"calc+clearAxisTypes"}}},{}],600:[function(_,oe,ae){"use strict";var m=_("../../../components/color"),x=_("../../cartesian/layout_attributes"),T=_("../../../lib/extend").extendFlat,b=_("../../../plot_api/edit_types").overrideAll;oe.exports=b({visible:x.visible,showspikes:{valType:"boolean",dflt:!0},spikesides:{valType:"boolean",dflt:!0},spikethickness:{valType:"number",min:0,dflt:2},spikecolor:{valType:"color",dflt:m.defaultLine},showbackground:{valType:"boolean",dflt:!1},backgroundcolor:{valType:"color",dflt:"rgba(204, 204, 204, 0.5)"},showaxeslabels:{valType:"boolean",dflt:!0},color:x.color,categoryorder:x.categoryorder,categoryarray:x.categoryarray,title:{text:x.title.text,font:x.title.font},type:T({},x.type,{values:["-","linear","log","date","category"]}),autotypenumbers:x.autotypenumbers,autorange:x.autorange,rangemode:x.rangemode,range:T({},x.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],anim:!1}),tickmode:x.tickmode,nticks:x.nticks,tick0:x.tick0,dtick:x.dtick,tickvals:x.tickvals,ticktext:x.ticktext,ticks:x.ticks,mirror:x.mirror,ticklen:x.ticklen,tickwidth:x.tickwidth,tickcolor:x.tickcolor,showticklabels:x.showticklabels,tickfont:x.tickfont,tickangle:x.tickangle,tickprefix:x.tickprefix,showtickprefix:x.showtickprefix,ticksuffix:x.ticksuffix,showticksuffix:x.showticksuffix,showexponent:x.showexponent,exponentformat:x.exponentformat,minexponent:x.minexponent,separatethousands:x.separatethousands,tickformat:x.tickformat,tickformatstops:x.tickformatstops,hoverformat:x.hoverformat,showline:x.showline,linecolor:x.linecolor,linewidth:x.linewidth,showgrid:x.showgrid,gridcolor:T({},x.gridcolor,{dflt:"rgb(204, 204, 204)"}),gridwidth:x.gridwidth,zeroline:x.zeroline,zerolinecolor:x.zerolinecolor,zerolinewidth:x.zerolinewidth,_deprecated:{title:x._deprecated.title,titlefont:x._deprecated.titlefont}},"plot","from-root")},{"../../../components/color":366,"../../../lib/extend":493,"../../../plot_api/edit_types":536,"../../cartesian/layout_attributes":569}],601:[function(_,oe,ae){"use strict";var m=_("tinycolor2").mix,x=_("../../../lib"),T=_("../../../plot_api/plot_template"),b=_("./axis_attributes"),e=_("../../cartesian/type_defaults"),o=_("../../cartesian/axis_defaults"),a=["xaxis","yaxis","zaxis"];oe.exports=function(l,i,d){var u,s;function c(v,g){return x.coerce(u,s,b,v,g)}for(var h=0;h<a.length;h++){var p=a[h];u=l[p]||{},(s=T.newContainer(i,p))._id=p[0]+d.scene,s._name=p,e(u,s,c,d),o(u,s,c,{font:d.font,letter:p[0],data:d.data,showGrid:!0,noTickson:!0,noTicklabelmode:!0,noTicklabelstep:!0,noTicklabelposition:!0,noTicklabeloverflow:!0,bgColor:d.bgColor,calendar:d.calendar},d.fullLayout),c("gridcolor",m(s.color,d.bgColor,13600/187).toRgbString()),c("title.text",p[0]),s.setScale=x.noop,c("showspikes")&&(c("spikesides"),c("spikethickness"),c("spikecolor",s.color)),c("showaxeslabels"),c("showbackground")&&c("backgroundcolor")}}},{"../../../lib":503,"../../../plot_api/plot_template":543,"../../cartesian/axis_defaults":556,"../../cartesian/type_defaults":582,"./axis_attributes":600,tinycolor2:312}],602:[function(_,oe,ae){"use strict";var m=_("../../../lib/str2rgbarray"),x=_("../../../lib"),T=["xaxis","yaxis","zaxis"];function b(){this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[18,18,18],this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont=["Open Sans","Open Sans","Open Sans"],this.labelSize=[20,20,20],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[30,30,30],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[10,10,10],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!0,!0,!0],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._defaultTickPad=this.tickPad.slice(),this._defaultLabelPad=this.labelPad.slice(),this._defaultLineTickLength=this.lineTickLength.slice()}b.prototype.merge=function(e,o){for(var a=0;a<3;++a){var l=o[T[a]];l.visible?(this.labels[a]=e._meta?x.templateString(l.title.text,e._meta):l.title.text,"font"in l.title&&(l.title.font.color&&(this.labelColor[a]=m(l.title.font.color)),l.title.font.family&&(this.labelFont[a]=l.title.font.family),l.title.font.size&&(this.labelSize[a]=l.title.font.size)),"showline"in l&&(this.lineEnable[a]=l.showline),"linecolor"in l&&(this.lineColor[a]=m(l.linecolor)),"linewidth"in l&&(this.lineWidth[a]=l.linewidth),"showgrid"in l&&(this.gridEnable[a]=l.showgrid),"gridcolor"in l&&(this.gridColor[a]=m(l.gridcolor)),"gridwidth"in l&&(this.gridWidth[a]=l.gridwidth),"log"===l.type?this.zeroEnable[a]=!1:"zeroline"in l&&(this.zeroEnable[a]=l.zeroline),"zerolinecolor"in l&&(this.zeroLineColor[a]=m(l.zerolinecolor)),"zerolinewidth"in l&&(this.zeroLineWidth[a]=l.zerolinewidth),this.lineTickEnable[a]=!(!("ticks"in l)||!l.ticks),"ticklen"in l&&(this.lineTickLength[a]=this._defaultLineTickLength[a]=l.ticklen),"tickcolor"in l&&(this.lineTickColor[a]=m(l.tickcolor)),"tickwidth"in l&&(this.lineTickWidth[a]=l.tickwidth),"tickangle"in l&&(this.tickAngle[a]="auto"===l.tickangle?-3600:Math.PI*-l.tickangle/180),"showticklabels"in l&&(this.tickEnable[a]=l.showticklabels),"tickfont"in l&&(l.tickfont.color&&(this.tickColor[a]=m(l.tickfont.color)),l.tickfont.family&&(this.tickFont[a]=l.tickfont.family),l.tickfont.size&&(this.tickSize[a]=l.tickfont.size)),"mirror"in l?-1!==["ticks","all","allticks"].indexOf(l.mirror)?(this.lineTickMirror[a]=!0,this.lineMirror[a]=!0):!0===l.mirror?(this.lineTickMirror[a]=!1,this.lineMirror[a]=!0):(this.lineTickMirror[a]=!1,this.lineMirror[a]=!1):this.lineMirror[a]=!1,"showbackground"in l&&!1!==l.showbackground?(this.backgroundEnable[a]=!0,this.backgroundColor[a]=m(l.backgroundcolor)):this.backgroundEnable[a]=!1):(this.tickEnable[a]=!1,this.labelEnable[a]=!1,this.lineEnable[a]=!1,this.lineTickEnable[a]=!1,this.gridEnable[a]=!1,this.zeroEnable[a]=!1,this.backgroundEnable[a]=!1)}},oe.exports=function(e,o){var a=new b;return a.merge(e,o),a}},{"../../../lib":503,"../../../lib/str2rgbarray":528}],603:[function(_,oe,ae){"use strict";var m=_("../../../lib"),x=_("../../../components/color"),T=_("../../../registry"),b=_("../../subplot_defaults"),e=_("./axis_defaults"),o=_("./layout_attributes"),a=_("../../get_data").getSubplotData;function l(i,d,u,s){for(var c=u("bgcolor"),h=x.combine(c,s.paper_bgcolor),p=["up","center","eye"],v=0;v<p.length;v++)u("camera."+p[v]+".x"),u("camera."+p[v]+".y"),u("camera."+p[v]+".z");u("camera.projection.type");var g=!!u("aspectratio.x")&&!!u("aspectratio.y")&&!!u("aspectratio.z"),f=u("aspectmode",g?"manual":"auto");g||(i.aspectratio=d.aspectratio={x:1,y:1,z:1},"manual"===f&&(d.aspectmode="auto"),i.aspectmode=d.aspectmode);var w=a(s.fullData,"gl3d",s.id);e(i,d,{font:s.font,scene:s.id,data:w,bgColor:h,calendar:s.calendar,autotypenumbersDflt:s.autotypenumbersDflt,fullLayout:s.fullLayout}),T.getComponentMethod("annotations3d","handleDefaults")(i,d,s);var y=s.getDfltFromLayout("dragmode");if(!1!==y&&!y)if(y="orbit",i.camera&&i.camera.up){var M=i.camera.up.x,A=i.camera.up.y,k=i.camera.up.z;0!==k&&(M&&A&&k?k/Math.sqrt(M*M+A*A+k*k)>.999&&(y="turntable"):y="turntable")}else y="turntable";u("dragmode",y),u("hovermode",s.getDfltFromLayout("hovermode"))}oe.exports=function(i,d,u){var s=d._basePlotModules.length>1;b(i,d,u,{type:"gl3d",attributes:o,handleDefaults:l,fullLayout:d,font:d.font,fullData:u,getDfltFromLayout:function(c){if(!s)return m.validate(i[c],o[c])?i[c]:void 0},autotypenumbersDflt:d.autotypenumbers,paper_bgcolor:d.paper_bgcolor,calendar:d.calendar})}},{"../../../components/color":366,"../../../lib":503,"../../../registry":638,"../../get_data":593,"../../subplot_defaults":632,"./axis_defaults":601,"./layout_attributes":604}],604:[function(_,oe,ae){"use strict";var m=_("./axis_attributes"),x=_("../../domain").attributes,T=_("../../../lib/extend").extendFlat,b=_("../../../lib").counterRegex;function e(o,a,l){return{x:{valType:"number",dflt:o,editType:"camera"},y:{valType:"number",dflt:a,editType:"camera"},z:{valType:"number",dflt:l,editType:"camera"},editType:"camera"}}oe.exports={_arrayAttrRegexps:[b("scene",".annotations",!0)],bgcolor:{valType:"color",dflt:"rgba(0,0,0,0)",editType:"plot"},camera:{up:T(e(0,0,1),{}),center:T(e(0,0,0),{}),eye:T(e(1.25,1.25,1.25),{}),projection:{type:{valType:"enumerated",values:["perspective","orthographic"],dflt:"perspective",editType:"calc"},editType:"calc"},editType:"camera"},domain:x({name:"scene",editType:"plot"}),aspectmode:{valType:"enumerated",values:["auto","cube","data","manual"],dflt:"auto",editType:"plot",impliedEdits:{"aspectratio.x":void 0,"aspectratio.y":void 0,"aspectratio.z":void 0}},aspectratio:{x:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},y:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},z:{valType:"number",min:0,editType:"plot",impliedEdits:{"^aspectmode":"manual"}},editType:"plot",impliedEdits:{aspectmode:"manual"}},xaxis:m,yaxis:m,zaxis:m,dragmode:{valType:"enumerated",values:["orbit","turntable","zoom","pan",!1],editType:"plot"},hovermode:{valType:"enumerated",values:["closest",!1],dflt:"closest",editType:"modebar"},uirevision:{valType:"any",editType:"none"},editType:"plot",_deprecated:{cameraposition:{valType:"info_array",editType:"camera"}}}},{"../../../lib":503,"../../../lib/extend":493,"../../domain":584,"./axis_attributes":600}],605:[function(_,oe,ae){"use strict";var m=_("../../../lib/str2rgbarray"),x=["xaxis","yaxis","zaxis"];function T(){this.enabled=[!0,!0,!0],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.drawSides=[!0,!0,!0],this.lineWidth=[1,1,1]}T.prototype.merge=function(b){for(var e=0;e<3;++e){var o=b[x[e]];o.visible?(this.enabled[e]=o.showspikes,this.colors[e]=m(o.spikecolor),this.drawSides[e]=o.spikesides,this.lineWidth[e]=o.spikethickness):(this.enabled[e]=!1,this.drawSides[e]=!1)}},oe.exports=function(b){var e=new T;return e.merge(b),e}},{"../../../lib/str2rgbarray":528}],606:[function(_,oe,ae){"use strict";oe.exports=function(e){for(var o=e.axesOptions,a=e.glplot.axesPixels,l=e.fullSceneLayout,i=[[],[],[]],d=0;d<3;++d){var u=l[T[d]];if(u._length=(a[d].hi-a[d].lo)*a[d].pixelsPerDataUnit/e.dataScale[d],Math.abs(u._length)===1/0||isNaN(u._length))i[d]=[];else{u._input_range=u.range.slice(),u.range[0]=a[d].lo/e.dataScale[d],u.range[1]=a[d].hi/e.dataScale[d],u._m=1/(e.dataScale[d]*a[d].pixelsPerDataUnit),u.range[0]===u.range[1]&&(u.range[0]-=1,u.range[1]+=1);var s=u.tickmode;if("auto"===u.tickmode){u.tickmode="linear";var c=u.nticks||x.constrain(u._length/40,4,9);m.autoTicks(u,Math.abs(u.range[1]-u.range[0])/c)}for(var h=m.calcTicks(u,{msUTC:!0}),p=0;p<h.length;++p)h[p].x=h[p].x*e.dataScale[d],"date"===u.type&&(h[p].text=h[p].text.replace(/\<br\>/g," "));i[d]=h,u.tickmode=s}}for(o.ticks=i,d=0;d<3;++d)for(b[d]=.5*(e.glplot.bounds[0][d]+e.glplot.bounds[1][d]),p=0;p<2;++p)o.bounds[p][d]=e.glplot.bounds[p][d];e.contourLevels=function(v){for(var g=new Array(3),f=0;f<3;++f){for(var w=v[f],y=new Array(w.length),M=0;M<w.length;++M)y[M]=w[M].x;g[f]=y}return g}(i)};var m=_("../../cartesian/axes"),x=_("../../../lib"),T=["xaxis","yaxis","zaxis"],b=[0,0,0]},{"../../../lib":503,"../../cartesian/axes":554}],607:[function(_,oe,ae){"use strict";function m(x,T){var b,e,o=[0,0,0,0];for(b=0;b<4;++b)for(e=0;e<4;++e)o[e]+=x[4*b+e]*T[b];return o}oe.exports=function(x,T){return m(x.projection,m(x.view,m(x.model,[T[0],T[1],T[2],1])))}},{}],608:[function(_,oe,ae){"use strict";var m,x,T=_("../../../stackgl_modules").gl_plot3d,b=T.createCamera,e=T.createScene,o=_("webgl-context"),a=_("has-passive-events"),l=_("../../registry"),i=_("../../lib"),d=i.preserveDrawingBuffer(),u=_("../../plots/cartesian/axes"),s=_("../../components/fx"),c=_("../../lib/str2rgbarray"),h=_("../../lib/show_no_webgl_msg"),p=_("./project"),v=_("./layout/convert"),g=_("./layout/spikes"),f=_("./layout/tick_marks");function w(C,P){var D=document.createElement("div"),F=C.container;this.graphDiv=C.graphDiv;var R=document.createElementNS("http://www.w3.org/2000/svg","svg");R.style.position="absolute",R.style.top=R.style.left="0px",R.style.width=R.style.height="100%",R.style["z-index"]=20,R.style["pointer-events"]="none",D.appendChild(R),this.svgContainer=R,D.id=C.id,D.style.position="absolute",D.style.top=D.style.left="0px",D.style.width=D.style.height="100%",F.appendChild(D),this.fullLayout=P,this.id=C.id||"scene",this.fullSceneLayout=P[this.id],this.plotArgs=[[],{},{}],this.axesOptions=v(P,P[this.id]),this.spikeOptions=g(P[this.id]),this.container=D,this.staticMode=!!C.staticPlot,this.pixelRatio=this.pixelRatio||C.plotGlPixelRatio||2,this.dataScale=[1,1,1],this.contourLevels=[[],[],[]],this.convertAnnotations=l.getComponentMethod("annotations3d","convert"),this.drawAnnotations=l.getComponentMethod("annotations3d","draw"),this.initializeGLPlot()}var y=w.prototype;y.prepareOptions=function(){var C={canvas:this.canvas,gl:this.gl,glOptions:{preserveDrawingBuffer:d,premultipliedAlpha:!0,antialias:!0},container:this.container,axes:this.axesOptions,spikes:this.spikeOptions,pickRadius:10,snapToData:!0,autoScale:!0,autoBounds:!1,cameraObject:this.camera,pixelRatio:this.pixelRatio};if(this.staticMode){if(!(x||(m=document.createElement("canvas"),x=o({canvas:m,preserveDrawingBuffer:!0,premultipliedAlpha:!0,antialias:!0}))))throw new Error("error creating static canvas/context for image server");C.gl=x,C.canvas=m}return C};var M=!0;y.tryCreatePlot=function(){var C=this.prepareOptions(),P=!0;try{this.glplot=e(C)}catch(D){if(this.staticMode||!M||d)P=!1;else{i.warn(["webgl setup failed possibly due to","false preserveDrawingBuffer config.","The mobile/tablet device may not be detected by is-mobile module.","Enabling preserveDrawingBuffer in second attempt to create webgl scene..."].join(" "));try{d=C.glOptions.preserveDrawingBuffer=!0,this.glplot=e(C)}catch(F){d=C.glOptions.preserveDrawingBuffer=!1,P=!1}}}return M=!1,P},y.initializeGLCamera=function(){var C=this.fullSceneLayout.camera;this.camera=b(this.container,{center:[C.center.x,C.center.y,C.center.z],eye:[C.eye.x,C.eye.y,C.eye.z],up:[C.up.x,C.up.y,C.up.z],_ortho:"orthographic"===C.projection.type,zoomMin:.01,zoomMax:100,mode:"orbit"})},y.initializeGLPlot=function(){var C=this;if(C.initializeGLCamera(),!C.tryCreatePlot())return h(C);C.traces={},C.make4thDimension();var P=C.graphDiv,D=P.layout,F=function(){var L={};return C.isCameraChanged(D)&&(L[C.id+".camera"]=C.getCamera()),C.isAspectChanged(D)&&(L[C.id+".aspectratio"]=C.glplot.getAspectratio(),"manual"!==D[C.id].aspectmode&&(C.fullSceneLayout.aspectmode=D[C.id].aspectmode=L[C.id+".aspectmode"]="manual")),L},R=function(L){if(!1!==L.fullSceneLayout.dragmode){var I=F();L.saveLayout(D),L.graphDiv.emit("plotly_relayout",I)}};return C.glplot.canvas&&(C.glplot.canvas.addEventListener("mouseup",function(){R(C)}),C.glplot.canvas.addEventListener("wheel",function(L){if(P._context._scrollZoom.gl3d){if(C.camera._ortho){var I=L.deltaX>L.deltaY?1.1:1/1.1,B=C.glplot.getAspectratio();C.glplot.setAspectratio({x:I*B.x,y:I*B.y,z:I*B.z})}R(C)}},!!a&&{passive:!1}),C.glplot.canvas.addEventListener("mousemove",function(){if(!1!==C.fullSceneLayout.dragmode&&0!==C.camera.mouseListener.buttons){var L=F();C.graphDiv.emit("plotly_relayouting",L)}}),C.staticMode||C.glplot.canvas.addEventListener("webglcontextlost",function(L){P&&P.emit&&P.emit("plotly_webglcontextlost",{event:L,layer:C.id})},!1)),C.glplot.oncontextloss=function(){C.recoverContext()},C.glplot.onrender=function(){C.render()},!0},y.render=function(){var C,P=this,D=P.graphDiv,F=P.svgContainer,R=P.container.getBoundingClientRect();D._fullLayout._calcInverseTransform(D);var B=R.width*D._fullLayout._invScaleX,V=R.height*D._fullLayout._invScaleY;F.setAttributeNS(null,"viewBox","0 0 "+B+" "+V),F.setAttributeNS(null,"width",B),F.setAttributeNS(null,"height",V),f(P),P.glplot.axes.update(P.axesOptions);for(var Z=Object.keys(P.traces),Y=null,ee=P.glplot.selection,J=0;J<Z.length;++J)"skip"!==(C=P.traces[Z[J]]).data.hoverinfo&&C.handlePick(ee)&&(Y=C),C.setContourLevels&&C.setContourLevels();function $(he,be,ge){var we=P.fullSceneLayout[he+"axis"];return"log"!==we.type&&(be=we.d2l(be)),u.hoverLabelText(we,be,ge)}if(null!==Y){var se,Q=p(P.glplot.cameraParams,ee.dataCoordinate),j=D._fullData[(C=Y.data).index],G=ee.index,W={xLabel:$("x",ee.traceCoordinate[0],C.xhoverformat),yLabel:$("y",ee.traceCoordinate[1],C.yhoverformat),zLabel:$("z",ee.traceCoordinate[2],C.zhoverformat)},ie=s.castHoverinfo(j,P.fullLayout,G),q=(ie||"").split("+"),te=ie&&"all"===ie;j.hovertemplate||te||(-1===q.indexOf("x")&&(W.xLabel=void 0),-1===q.indexOf("y")&&(W.yLabel=void 0),-1===q.indexOf("z")&&(W.zLabel=void 0),-1===q.indexOf("text")&&(ee.textLabel=void 0),-1===q.indexOf("name")&&(Y.name=void 0));var ne=[];"cone"===C.type||"streamtube"===C.type?(W.uLabel=$("x",ee.traceCoordinate[3],C.uhoverformat),(te||-1!==q.indexOf("u"))&&ne.push("u: "+W.uLabel),W.vLabel=$("y",ee.traceCoordinate[4],C.vhoverformat),(te||-1!==q.indexOf("v"))&&ne.push("v: "+W.vLabel),W.wLabel=$("z",ee.traceCoordinate[5],C.whoverformat),(te||-1!==q.indexOf("w"))&&ne.push("w: "+W.wLabel),W.normLabel=ee.traceCoordinate[6].toPrecision(3),(te||-1!==q.indexOf("norm"))&&ne.push("norm: "+W.normLabel),"streamtube"===C.type&&(W.divergenceLabel=ee.traceCoordinate[7].toPrecision(3),(te||-1!==q.indexOf("divergence"))&&ne.push("divergence: "+W.divergenceLabel)),ee.textLabel&&ne.push(ee.textLabel),se=ne.join("<br>")):"isosurface"===C.type||"volume"===C.type?(W.valueLabel=u.hoverLabelText(P._mockAxis,P._mockAxis.d2l(ee.traceCoordinate[3]),C.valuehoverformat),ne.push("value: "+W.valueLabel),ee.textLabel&&ne.push(ee.textLabel),se=ne.join("<br>")):se=ee.textLabel;var le={x:ee.traceCoordinate[0],y:ee.traceCoordinate[1],z:ee.traceCoordinate[2],data:j._input,fullData:j,curveNumber:j.index,pointNumber:G};s.appendArrayPointValue(le,j,G),C._module.eventData&&(le=j._module.eventData(le,ee,j,{},G));var ue={points:[le]};if(P.fullSceneLayout.hovermode){var de=[];s.loneHover({trace:j,x:(.5+.5*Q[0]/Q[3])*B,y:(.5-.5*Q[1]/Q[3])*V,xLabel:W.xLabel,yLabel:W.yLabel,zLabel:W.zLabel,text:se,name:Y.name,color:s.castHoverOption(j,G,"bgcolor")||Y.color,borderColor:s.castHoverOption(j,G,"bordercolor"),fontFamily:s.castHoverOption(j,G,"font.family"),fontSize:s.castHoverOption(j,G,"font.size"),fontColor:s.castHoverOption(j,G,"font.color"),nameLength:s.castHoverOption(j,G,"namelength"),textAlign:s.castHoverOption(j,G,"align"),hovertemplate:i.castOption(j,G,"hovertemplate"),hovertemplateLabels:i.extendFlat({},le,W),eventData:[le]},{container:F,gd:D,inOut_bbox:de}),le.bbox=de[0]}D.emit(ee.buttons&&ee.distance<5?"plotly_click":"plotly_hover",ue),this.oldEventData=ue}else s.loneUnhover(F),this.oldEventData&&D.emit("plotly_unhover",this.oldEventData),this.oldEventData=void 0;P.drawAnnotations(P)},y.recoverContext=function(){var C=this;C.glplot.dispose();var P=function(){C.glplot.gl.isContextLost()?requestAnimationFrame(P):C.initializeGLPlot()?C.plot.apply(C,C.plotArgs):i.error("Catastrophic and unrecoverable WebGL error. Context lost.")};requestAnimationFrame(P)};var A=["xaxis","yaxis","zaxis"];function k(C,P,D){for(var F=C.fullSceneLayout,R=0;R<3;R++){var L=A[R],I=L.charAt(0),B=F[L],V=P[I],Z=P[I+"calendar"],Y=P["_"+I+"length"];if(i.isArrayOrTypedArray(V))for(var ee,J=0;J<(Y||V.length);J++)if(i.isArrayOrTypedArray(V[J]))for(var $=0;$<V[J].length;++$)ee=B.d2l(V[J][$],0,Z),!isNaN(ee)&&isFinite(ee)&&(D[0][R]=Math.min(D[0][R],ee),D[1][R]=Math.max(D[1][R],ee));else ee=B.d2l(V[J],0,Z),!isNaN(ee)&&isFinite(ee)&&(D[0][R]=Math.min(D[0][R],ee),D[1][R]=Math.max(D[1][R],ee));else D[0][R]=Math.min(D[0][R],0),D[1][R]=Math.max(D[1][R],Y-1)}}y.plot=function(C,P,D){if(this.plotArgs=[C,P,D],!this.glplot.contextLost){var F,R,L,I,B,V,Z=P[this.id],Y=D[this.id];this.fullLayout=P,this.fullSceneLayout=Z,this.axesOptions.merge(P,Z),this.spikeOptions.merge(Z),this.setViewport(Z),this.updateFx(Z.dragmode,Z.hovermode),this.camera.enableWheel=this.graphDiv._context._scrollZoom.gl3d,this.glplot.setClearColor(c(Z.bgcolor)),this.setConvert(B),C?Array.isArray(C)||(C=[C]):C=[];var ee=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]];for(L=0;L<C.length;++L)!0===(F=C[L]).visible&&0!==F._length&&k(this,F,ee);!function(Le,Ee){for(var Pe=Le.fullSceneLayout,je=Pe.annotations||[],Ge=0;Ge<3;Ge++)for(var Ke=A[Ge],lt=Ke.charAt(0),Ue=Pe[Ke],$e=0;$e<je.length;$e++){var et=je[$e];if(et.visible){var tt=Ue.r2l(et[lt]);!isNaN(tt)&&isFinite(tt)&&(Ee[0][Ge]=Math.min(Ee[0][Ge],tt),Ee[1][Ge]=Math.max(Ee[1][Ge],tt))}}}(this,ee);var J=[1,1,1];for(I=0;I<3;++I)J[I]=ee[1][I]===ee[0][I]?1:1/(ee[1][I]-ee[0][I]);for(this.dataScale=J,this.convertAnnotations(this),L=0;L<C.length;++L)!0===(F=C[L]).visible&&0!==F._length&&((R=this.traces[F.uid])?R.data.type===F.type?R.update(F):(R.dispose(),R=F._module.plot(this,F),this.traces[F.uid]=R):(R=F._module.plot(this,F),this.traces[F.uid]=R),R.name=F.name);var $=Object.keys(this.traces);e:for(L=0;L<$.length;++L){for(I=0;I<C.length;++I)if(C[I].uid===$[L]&&!0===C[I].visible&&0!==C[I]._length)continue e;(R=this.traces[$[L]]).dispose(),delete this.traces[$[L]]}this.glplot.objects.sort(function(Le,Ee){return Le._trace.data.index-Ee._trace.data.index});var Q,se=[[0,0,0],[0,0,0]],j=[],G={};for(L=0;L<3;++L){if((V=(B=Z[A[L]]).type)in G?(G[V].acc*=J[L],G[V].count+=1):G[V]={acc:J[L],count:1},B.autorange){se[0][L]=1/0,se[1][L]=-1/0;var W=this.glplot.objects,ie=this.fullSceneLayout.annotations||[],q=B._name.charAt(0);for(I=0;I<W.length;I++){var te=W[I],ne=te.bounds,le=te._trace.data._pad||0;se[0][L]="ErrorBars"===te.constructor.name&&B._lowerLogErrorBound?Math.min(se[0][L],B._lowerLogErrorBound):Math.min(se[0][L],ne[0][L]/J[L]-le),se[1][L]=Math.max(se[1][L],ne[1][L]/J[L]+le)}for(I=0;I<ie.length;I++){var ue=ie[I];if(ue.visible){var de=B.r2l(ue[q]);se[0][L]=Math.min(se[0][L],de),se[1][L]=Math.max(se[1][L],de)}}if("rangemode"in B&&"tozero"===B.rangemode&&(se[0][L]=Math.min(se[0][L],0),se[1][L]=Math.max(se[1][L],0)),se[0][L]>se[1][L])se[0][L]=-1,se[1][L]=1;else{var he=se[1][L]-se[0][L];se[0][L]-=he/32,se[1][L]+=he/32}if("reversed"===B.autorange){var be=se[0][L];se[0][L]=se[1][L],se[1][L]=be}}else{var ge=B.range;se[0][L]=B.r2l(ge[0]),se[1][L]=B.r2l(ge[1])}se[0][L]===se[1][L]&&(se[0][L]-=1,se[1][L]+=1),j[L]=se[1][L]-se[0][L],this.glplot.setBounds(L,{min:se[0][L]*J[L],max:se[1][L]*J[L]})}var we=Z.aspectmode;if("cube"===we)Q=[1,1,1];else if("manual"===we){var Ce=Z.aspectratio;Q=[Ce.x,Ce.y,Ce.z]}else{if("auto"!==we&&"data"!==we)throw new Error("scene.js aspectRatio was not one of the enumerated types");var De=[1,1,1];for(L=0;L<3;++L){var Se=G[V=(B=Z[A[L]]).type];De[L]=Math.pow(Se.acc,1/Se.count)/J[L]}Q="data"===we||Math.max.apply(null,De)/Math.min.apply(null,De)<=4?De:[1,1,1]}Z.aspectratio.x=Y.aspectratio.x=Q[0],Z.aspectratio.y=Y.aspectratio.y=Q[1],Z.aspectratio.z=Y.aspectratio.z=Q[2],this.glplot.setAspectratio(Z.aspectratio),this.viewInitial.aspectratio||(this.viewInitial.aspectratio={x:Z.aspectratio.x,y:Z.aspectratio.y,z:Z.aspectratio.z}),this.viewInitial.aspectmode||(this.viewInitial.aspectmode=Z.aspectmode);var Fe=Z.domain||null,ve=P._size||null;if(Fe&&ve){var Te=this.container.style;Te.position="absolute",Te.left=ve.l+Fe.x[0]*ve.w+"px",Te.top=ve.t+(1-Fe.y[1])*ve.h+"px",Te.width=ve.w*(Fe.x[1]-Fe.x[0])+"px",Te.height=ve.h*(Fe.y[1]-Fe.y[0])+"px"}this.glplot.redraw()}},y.destroy=function(){this.glplot&&(this.camera.mouseListener.enabled=!1,this.container.removeEventListener("wheel",this.camera.wheelListener),this.camera=null,this.glplot.dispose(),this.container.parentNode.removeChild(this.container),this.glplot=null)},y.getCamera=function(){var C;return this.camera.view.recalcMatrix(this.camera.view.lastT()),{up:{x:(C=this.camera).up[0],y:C.up[1],z:C.up[2]},center:{x:C.center[0],y:C.center[1],z:C.center[2]},eye:{x:C.eye[0],y:C.eye[1],z:C.eye[2]},projection:{type:!0===C._ortho?"orthographic":"perspective"}}},y.setViewport=function(C){var P,D=C.camera;this.camera.lookAt.apply(this,[[(P=D).eye.x,P.eye.y,P.eye.z],[P.center.x,P.center.y,P.center.z],[P.up.x,P.up.y,P.up.z]]),this.glplot.setAspectratio(C.aspectratio),"orthographic"===D.projection.type!==this.camera._ortho&&(this.glplot.redraw(),this.glplot.clearRGBA(),this.glplot.dispose(),this.initializeGLPlot())},y.isCameraChanged=function(C){var P=this.getCamera(),D=i.nestedProperty(C,this.id+".camera").get();var B,V,Z,Y,ee,J,R=!1;if(void 0===D)R=!0;else{for(var L=0;L<3;L++)for(var I=0;I<3;I++)if(B=P,Y=I,ee=void 0,J=void 0,J=["x","y","z"],!(V=D)[(ee=["up","center","eye"])[Z=L]]||B[ee[Z]][J[Y]]!==V[ee[Z]][J[Y]]){R=!0;break}(!D.projection||P.projection&&P.projection.type!==D.projection.type)&&(R=!0)}return R},y.isAspectChanged=function(C){var P=this.glplot.getAspectratio(),D=i.nestedProperty(C,this.id+".aspectratio").get();return void 0===D||D.x!==P.x||D.y!==P.y||D.z!==P.z},y.saveLayout=function(C){var P,D,F,R,L,I,B=this.fullLayout,V=this.isCameraChanged(C),Z=this.isAspectChanged(C),Y=V||Z;if(Y){var ee={};V&&(P=this.getCamera(),F=(D=i.nestedProperty(C,this.id+".camera")).get(),ee[this.id+".camera"]=F),Z&&(R=this.glplot.getAspectratio(),I=(L=i.nestedProperty(C,this.id+".aspectratio")).get(),ee[this.id+".aspectratio"]=I),l.call("_storeDirectGUIEdit",C,B._preGUI,ee),V&&(D.set(P),i.nestedProperty(B,this.id+".camera").set(P)),Z&&(L.set(R),i.nestedProperty(B,this.id+".aspectratio").set(R),this.glplot.redraw())}return Y},y.updateFx=function(C,P){var D=this.camera;if(D)if("orbit"===C)D.mode="orbit",D.keyBindingMode="rotate";else if("turntable"===C){D.up=[0,0,1],D.mode="turntable",D.keyBindingMode="rotate";var F=this.graphDiv,R=F._fullLayout,L=this.fullSceneLayout.camera,I=L.up.x,B=L.up.y,V=L.up.z;if(V/Math.sqrt(I*I+B*B+V*V)<.999){var Z=this.id+".camera.up",Y={x:0,y:0,z:1},ee={};ee[Z]=Y;var J=F.layout;l.call("_storeDirectGUIEdit",J,R._preGUI,ee),L.up=Y,i.nestedProperty(J,Z).set(Y)}}else D.keyBindingMode=C;this.fullSceneLayout.hovermode=P},y.toImage=function(C){C||(C="png"),this.staticMode&&this.container.appendChild(m),this.glplot.redraw();var P=this.glplot.gl,D=P.drawingBufferWidth,F=P.drawingBufferHeight;P.bindFramebuffer(P.FRAMEBUFFER,null);var R=new Uint8Array(D*F*4);P.readPixels(0,0,D,F,P.RGBA,P.UNSIGNED_BYTE,R),function(Z,Y,ee){for(var J=0,$=ee-1;J<$;++J,--$)for(var Q=0;Q<Y;++Q)for(var se=0;se<4;++se){var j=4*(Y*J+Q)+se,G=4*(Y*$+Q)+se,W=Z[j];Z[j]=Z[G],Z[G]=W}}(R,D,F),function(Z,Y,ee){for(var J=0;J<ee;++J)for(var $=0;$<Y;++$){var Q=4*(Y*J+$),se=Z[Q+3];if(se>0)for(var j=255/se,G=0;G<3;++G)Z[Q+G]=Math.min(j*Z[Q+G],255)}}(R,D,F);var L=document.createElement("canvas");L.width=D,L.height=F;var I,B=L.getContext("2d"),V=B.createImageData(D,F);switch(V.data.set(R),B.putImageData(V,0,0),C){case"jpeg":I=L.toDataURL("image/jpeg");break;case"webp":I=L.toDataURL("image/webp");break;default:I=L.toDataURL("image/png")}return this.staticMode&&this.container.removeChild(m),I},y.setConvert=function(){for(var C=0;C<3;C++){var P=this.fullSceneLayout[A[C]];u.setConvert(P,this.fullLayout),P.setScale=i.noop}},y.make4thDimension=function(){var C=this.graphDiv._fullLayout;this._mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},u.setConvert(this._mockAxis,C)},oe.exports=w},{"../../../stackgl_modules":1120,"../../components/fx":406,"../../lib":503,"../../lib/show_no_webgl_msg":525,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../../registry":638,"./layout/convert":602,"./layout/spikes":605,"./layout/tick_marks":606,"./project":607,"has-passive-events":229,"webgl-context":331}],609:[function(_,oe,ae){"use strict";oe.exports=function(m,x,T,b){b=b||m.length;for(var e=new Array(b),o=0;o<b;o++)e[o]=[m[o],x[o],T[o]];return e}},{}],610:[function(_,oe,ae){"use strict";var m=_("./font_attributes"),x=_("./animation_attributes"),T=_("../components/color/attributes"),b=_("../components/shapes/draw_newshape/attributes"),e=_("./pad_attributes"),o=_("../lib/extend").extendFlat,a=m({editType:"calc"});a.family.dflt='"Open Sans", verdana, arial, sans-serif',a.size.dflt=12,a.color.dflt=T.defaultLine,oe.exports={font:a,title:{text:{valType:"string",editType:"layoutstyle"},font:m({editType:"layoutstyle"}),xref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},yref:{valType:"enumerated",dflt:"container",values:["container","paper"],editType:"layoutstyle"},x:{valType:"number",min:0,max:1,dflt:.5,editType:"layoutstyle"},y:{valType:"number",min:0,max:1,dflt:"auto",editType:"layoutstyle"},xanchor:{valType:"enumerated",dflt:"auto",values:["auto","left","center","right"],editType:"layoutstyle"},yanchor:{valType:"enumerated",dflt:"auto",values:["auto","top","middle","bottom"],editType:"layoutstyle"},pad:o(e({editType:"layoutstyle"}),{}),editType:"layoutstyle"},uniformtext:{mode:{valType:"enumerated",values:[!1,"hide","show"],dflt:!1,editType:"plot"},minsize:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"plot"},autosize:{valType:"boolean",dflt:!1,editType:"none"},width:{valType:"number",min:10,dflt:700,editType:"plot"},height:{valType:"number",min:10,dflt:450,editType:"plot"},margin:{l:{valType:"number",min:0,dflt:80,editType:"plot"},r:{valType:"number",min:0,dflt:80,editType:"plot"},t:{valType:"number",min:0,dflt:100,editType:"plot"},b:{valType:"number",min:0,dflt:80,editType:"plot"},pad:{valType:"number",min:0,dflt:0,editType:"plot"},autoexpand:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},computed:{valType:"any",editType:"none"},paper_bgcolor:{valType:"color",dflt:T.background,editType:"plot"},plot_bgcolor:{valType:"color",dflt:T.background,editType:"layoutstyle"},autotypenumbers:{valType:"enumerated",values:["convert types","strict"],dflt:"convert types",editType:"calc"},separators:{valType:"string",editType:"plot"},hidesources:{valType:"boolean",dflt:!1,editType:"plot"},showlegend:{valType:"boolean",editType:"legend"},colorway:{valType:"colorlist",dflt:T.defaults,editType:"calc"},datarevision:{valType:"any",editType:"calc"},uirevision:{valType:"any",editType:"none"},editrevision:{valType:"any",editType:"none"},selectionrevision:{valType:"any",editType:"none"},template:{valType:"any",editType:"calc"},newshape:b.newshape,activeshape:b.activeshape,meta:{valType:"any",arrayOk:!0,editType:"plot"},transition:o({},x.transition,{editType:"none"}),_deprecated:{title:{valType:"string",editType:"layoutstyle"},titlefont:m({editType:"layoutstyle"})}}},{"../components/color/attributes":365,"../components/shapes/draw_newshape/attributes":451,"../lib/extend":493,"./animation_attributes":548,"./font_attributes":585,"./pad_attributes":618}],611:[function(_,oe,ae){"use strict";var m=_("../../lib/sort_object_keys"),x='\xa9 <a target="_blank" href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',T=['\xa9 <a target="_blank" href="https://carto.com/">Carto</a>',x].join(" "),b=['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://www.openstreetmap.org/copyright">ODbL</a>'].join(" "),e={"open-street-map":{id:"osm",version:8,sources:{"plotly-osm-tiles":{type:"raster",attribution:x,tiles:["https://a.tile.openstreetmap.org/{z}/{x}/{y}.png","https://b.tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-osm-tiles",type:"raster",source:"plotly-osm-tiles",minzoom:0,maxzoom:22}]},"white-bg":{id:"white-bg",version:8,sources:{},layers:[{id:"white-bg",type:"background",paint:{"background-color":"#FFFFFF"},minzoom:0,maxzoom:22}]},"carto-positron":{id:"carto-positron",version:8,sources:{"plotly-carto-positron":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/light_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-positron",type:"raster",source:"plotly-carto-positron",minzoom:0,maxzoom:22}]},"carto-darkmatter":{id:"carto-darkmatter",version:8,sources:{"plotly-carto-darkmatter":{type:"raster",attribution:T,tiles:["https://cartodb-basemaps-c.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-carto-darkmatter",type:"raster",source:"plotly-carto-darkmatter",minzoom:0,maxzoom:22}]},"stamen-terrain":{id:"stamen-terrain",version:8,sources:{"plotly-stamen-terrain":{type:"raster",attribution:b,tiles:["https://stamen-tiles.a.ssl.fastly.net/terrain/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-terrain",type:"raster",source:"plotly-stamen-terrain",minzoom:0,maxzoom:22}]},"stamen-toner":{id:"stamen-toner",version:8,sources:{"plotly-stamen-toner":{type:"raster",attribution:b,tiles:["https://stamen-tiles.a.ssl.fastly.net/toner/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-toner",type:"raster",source:"plotly-stamen-toner",minzoom:0,maxzoom:22}]},"stamen-watercolor":{id:"stamen-watercolor",version:8,sources:{"plotly-stamen-watercolor":{type:"raster",attribution:['Map tiles by <a target="_blank" href="https://stamen.com">Stamen Design</a>','under <a target="_blank" href="https://creativecommons.org/licenses/by/3.0">CC BY 3.0</a>',"|",'Data by <a target="_blank" href="https://openstreetmap.org">OpenStreetMap</a> contributors','under <a target="_blank" href="https://creativecommons.org/licenses/by-sa/3.0">CC BY SA</a>'].join(" "),tiles:["https://stamen-tiles.a.ssl.fastly.net/watercolor/{z}/{x}/{y}.png"],tileSize:256}},layers:[{id:"plotly-stamen-watercolor",type:"raster",source:"plotly-stamen-watercolor",minzoom:0,maxzoom:22}]}},o=m(e);oe.exports={requiredVersion:"1.10.1",styleUrlPrefix:"mapbox://styles/mapbox/",styleUrlSuffix:"v9",styleValuesMapbox:["basic","streets","outdoors","light","dark","satellite","satellite-streets"],styleValueDflt:"basic",stylesNonMapbox:e,styleValuesNonMapbox:o,traceLayerPrefix:"plotly-trace-layer-",layoutLayerPrefix:"plotly-layout-layer-",wrongVersionErrorMsg:["Your custom plotly.js bundle is not using the correct mapbox-gl version","Please install mapbox-gl@1.10.1."].join("\n"),noAccessTokenErrorMsg:["Missing Mapbox access token.","Mapbox trace type require a Mapbox access token to be registered.","For example:","  Plotly.newPlot(gd, data, layout, { mapboxAccessToken: 'my-access-token' });","More info here: https://www.mapbox.com/help/define-access-token/"].join("\n"),missingStyleErrorMsg:["No valid mapbox style found, please set `mapbox.style` to one of:",o.join(", "),"or register a Mapbox access token to use a Mapbox-served style."].join("\n"),multipleTokensErrorMsg:["Set multiple mapbox access token across different mapbox subplot,","using first token found as mapbox-gl does not allow multipleaccess tokens on the same page."].join("\n"),mapOnErrorMsg:"Mapbox error.",mapboxLogo:{path0:"m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z",path1:"M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z",path2:"M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z",polygon:"11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34"},styleRules:{map:"overflow:hidden;position:relative;","missing-css":"display:none;",canary:"background-color:salmon;","ctrl-bottom-left":"position: absolute; pointer-events: none; z-index: 2; bottom: 0; left: 0;","ctrl-bottom-right":"position: absolute; pointer-events: none; z-index: 2; right: 0; bottom: 0;",ctrl:"clear: both; pointer-events: auto; transform: translate(0, 0);","ctrl-attrib.mapboxgl-compact .mapboxgl-ctrl-attrib-inner":"display: none;","ctrl-attrib.mapboxgl-compact:hover .mapboxgl-ctrl-attrib-inner":"display: block; margin-top:2px","ctrl-attrib.mapboxgl-compact:hover":"padding: 2px 24px 2px 4px; visibility: visible; margin-top: 6px;","ctrl-attrib.mapboxgl-compact::after":'content: ""; cursor: pointer; position: absolute; background-image: url(\'data:image/svg+xml;charset=utf-8,%3Csvg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"%3E %3Cpath fill="%23333333" fill-rule="evenodd" d="M4,10a6,6 0 1,0 12,0a6,6 0 1,0 -12,0 M9,7a1,1 0 1,0 2,0a1,1 0 1,0 -2,0 M9,10a1,1 0 1,1 2,0l0,3a1,1 0 1,1 -2,0"/%3E %3C/svg%3E\'); background-color: rgba(255, 255, 255, 0.5); width: 24px; height: 24px; box-sizing: border-box; border-radius: 12px;',"ctrl-attrib.mapboxgl-compact":"min-height: 20px; padding: 0; margin: 10px; position: relative; background-color: #fff; border-radius: 3px 12px 12px 3px;","ctrl-bottom-right > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; right: 0","ctrl-bottom-left > .mapboxgl-ctrl-attrib.mapboxgl-compact::after":"bottom: 0; left: 0","ctrl-bottom-left .mapboxgl-ctrl":"margin: 0 0 10px 10px; float: left;","ctrl-bottom-right .mapboxgl-ctrl":"margin: 0 10px 10px 0; float: right;","ctrl-attrib":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a":"color: rgba(0, 0, 0, 0.75); text-decoration: none; font-size: 12px","ctrl-attrib a:hover":"color: inherit; text-decoration: underline;","ctrl-attrib .mapbox-improve-map":"font-weight: bold; margin-left: 2px;","attrib-empty":"display: none;","ctrl-logo":'display:block; width: 21px; height: 21px; background-image: url(\'data:image/svg+xml;charset=utf-8,%3C?xml version="1.0" encoding="utf-8"?%3E %3Csvg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 21 21" style="enable-background:new 0 0 21 21;" xml:space="preserve"%3E%3Cg transform="translate(0,0.01)"%3E%3Cpath d="m 10.5,1.24 c -5.11,0 -9.25,4.15 -9.25,9.25 0,5.1 4.15,9.25 9.25,9.25 5.1,0 9.25,-4.15 9.25,-9.25 0,-5.11 -4.14,-9.25 -9.25,-9.25 z m 4.39,11.53 c -1.93,1.93 -4.78,2.31 -6.7,2.31 -0.7,0 -1.41,-0.05 -2.1,-0.16 0,0 -1.02,-5.64 2.14,-8.81 0.83,-0.83 1.95,-1.28 3.13,-1.28 1.27,0 2.49,0.51 3.39,1.42 1.84,1.84 1.89,4.75 0.14,6.52 z" style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3Cpath d="M 10.5,-0.01 C 4.7,-0.01 0,4.7 0,10.49 c 0,5.79 4.7,10.5 10.5,10.5 5.8,0 10.5,-4.7 10.5,-10.5 C 20.99,4.7 16.3,-0.01 10.5,-0.01 Z m 0,19.75 c -5.11,0 -9.25,-4.15 -9.25,-9.25 0,-5.1 4.14,-9.26 9.25,-9.26 5.11,0 9.25,4.15 9.25,9.25 0,5.13 -4.14,9.26 -9.25,9.26 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpath d="M 14.74,6.25 C 12.9,4.41 9.98,4.35 8.23,6.1 5.07,9.27 6.09,14.91 6.09,14.91 c 0,0 5.64,1.02 8.81,-2.14 C 16.64,11 16.59,8.09 14.74,6.25 Z m -2.27,4.09 -0.91,1.87 -0.9,-1.87 -1.86,-0.91 1.86,-0.9 0.9,-1.87 0.91,1.87 1.86,0.9 z" style="opacity:0.35;enable-background:new" class="st1"/%3E%3Cpolygon points="11.56,12.21 10.66,10.34 8.8,9.43 10.66,8.53 11.56,6.66 12.47,8.53 14.33,9.43 12.47,10.34 " style="opacity:0.9;fill:%23ffffff;enable-background:new" class="st0"/%3E%3C/g%3E%3C/svg%3E\')'}}},{"../../lib/sort_object_keys":526}],612:[function(_,oe,ae){"use strict";var m=_("../../lib");oe.exports=function(x,T){var b=x.split(" "),e=b[0],o=b[1],a=m.isArrayOrTypedArray(T)?m.mean(T):T,l=.5+a/100,i=1.5+a/100,d=["",""],u=[0,0];switch(e){case"top":d[0]="top",u[1]=-i;break;case"bottom":d[0]="bottom",u[1]=i}switch(o){case"left":d[1]="right",u[0]=-l;break;case"right":d[1]="left",u[0]=l}return{anchor:d[0]&&d[1]?d.join("-"):d[0]?d[0]:d[1]?d[1]:"center",offset:u}}},{"../../lib":503}],613:[function(_,oe,ae){"use strict";var m=_("mapbox-gl/dist/mapbox-gl-unminified"),x=_("../../lib"),T=x.strTranslate,b=x.strScale,e=_("../../plots/get_data").getSubplotCalcData,o=_("../../constants/xmlns_namespaces"),a=_("@plotly/d3"),l=_("../../components/drawing"),i=_("../../lib/svg_text_utils"),d=_("./mapbox"),u=ae.constants=_("./constants");function s(c){return"string"==typeof c&&(-1!==u.styleValuesMapbox.indexOf(c)||0===c.indexOf("mapbox://"))}ae.name="mapbox",ae.attr="subplot",ae.idRoot="mapbox",ae.idRegex=ae.attrRegex=x.counterRegex("mapbox"),ae.attributes={subplot:{valType:"subplotid",dflt:"mapbox",editType:"calc"}},ae.layoutAttributes=_("./layout_attributes"),ae.supplyLayoutDefaults=_("./layout_defaults"),ae.plot=function(c){var h=c._fullLayout,p=c.calcdata,v=h._subplots.mapbox;if(m.version!==u.requiredVersion)throw new Error(u.wrongVersionErrorMsg);var g=function(k,C){var P=k._fullLayout;if(""===k._context.mapboxAccessToken)return"";for(var D=[],F=[],R=!1,L=!1,I=0;I<C.length;I++){var B=P[C[I]],V=B.accesstoken;s(B.style)&&(V?x.pushUnique(D,V):(s(B._input.style)&&(x.error("Uses Mapbox map style, but did not set an access token."),R=!0),L=!0)),V&&x.pushUnique(F,V)}if(L){var Z=R?u.noAccessTokenErrorMsg:u.missingStyleErrorMsg;throw x.error(Z),new Error(Z)}return D.length?(D.length>1&&x.warn(u.multipleTokensErrorMsg),D[0]):(F.length&&x.log(["Listed mapbox access token(s)",F.join(","),"but did not use a Mapbox map style, ignoring token(s)."].join(" ")),"")}(c,v);m.accessToken=g;for(var f=0;f<v.length;f++){var w=v[f],y=e(p,"mapbox",w),M=h[w],A=M._subplot;A||(A=new d(c,w),h[w]._subplot=A),A.viewInitial||(A.viewInitial={center:x.extendFlat({},M.center),zoom:M.zoom,bearing:M.bearing,pitch:M.pitch}),A.plot(y,h,c._promises)}},ae.clean=function(c,h,p,v){for(var g=v._subplots.mapbox||[],f=0;f<g.length;f++){var w=g[f];!h[w]&&v[w]._subplot&&v[w]._subplot.destroy()}},ae.toSVG=function(c){for(var h=c._fullLayout,p=h._subplots.mapbox,v=h._size,g=0;g<p.length;g++){var f=h[p[g]],w=f.domain,y=f._subplot.toImage("png");h._glimages.append("svg:image").attr({xmlns:o.svg,"xlink:href":y,x:v.l+v.w*w.x[0],y:v.t+v.h*(1-w.y[1]),width:v.w*(w.x[1]-w.x[0]),height:v.h*(w.y[1]-w.y[0]),preserveAspectRatio:"none"});var M=a.select(f._subplot.div);if(null!==M.select(".mapboxgl-ctrl-logo").node().offsetParent){var A=h._glimages.append("g");A.attr("transform",T(v.l+v.w*w.x[0]+10,v.t+v.h*(1-w.y[0])-31)),A.append("path").attr("d",u.mapboxLogo.path0).style({opacity:.9,fill:"#ffffff","enable-background":"new"}),A.append("path").attr("d",u.mapboxLogo.path1).style("opacity",.35).style("enable-background","new"),A.append("path").attr("d",u.mapboxLogo.path2).style("opacity",.35).style("enable-background","new"),A.append("polygon").attr("points",u.mapboxLogo.polygon).style({opacity:.9,fill:"#ffffff","enable-background":"new"})}var k=M.select(".mapboxgl-ctrl-attrib").text().replace("Improve this map",""),C=h._glimages.append("g"),P=C.append("text");P.text(k).classed("static-attribution",!0).attr({"font-size":12,"font-family":"Arial",color:"rgba(0, 0, 0, 0.75)","text-anchor":"end","data-unformatted":k});var D=l.bBox(P.node()),F=v.w*(w.x[1]-w.x[0]);if(D.width>F/2){var R=k.split("|").join("<br>");P.text(R).attr("data-unformatted",R).call(i.convertToTspans,c),D=l.bBox(P.node())}P.attr("transform",T(-3,8-D.height)),C.insert("rect",".static-attribution").attr({x:-D.width-6,y:-D.height-3,width:D.width+6,height:D.height+3,fill:"rgba(255, 255, 255, 0.75)"});var L=1;D.width+6>F&&(L=F/(D.width+6));var I=[v.l+v.w*w.x[1],v.t+v.h*(1-w.y[0])];C.attr("transform",T(I[0],I[1])+b(L))}},ae.updateFx=function(c){for(var h=c._fullLayout,p=h._subplots.mapbox,v=0;v<p.length;v++)h[p[v]]._subplot.updateFx(h)}},{"../../components/drawing":388,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/get_data":593,"./constants":611,"./layout_attributes":615,"./layout_defaults":616,"./mapbox":617,"@plotly/d3":58,"mapbox-gl/dist/mapbox-gl-unminified":239}],614:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../lib/svg_text_utils").sanitizeHTML,T=_("./convert_text_opts"),b=_("./constants");function e(i,d){this.subplot=i,this.uid=i.uid+"-"+d,this.index=d,this.idSource="source-"+this.uid,this.idLayer=b.layoutLayerPrefix+this.uid,this.sourceType=null,this.source=null,this.layerType=null,this.below=null,this.visible=!1}var o=e.prototype;function a(i){if(!i.visible)return!1;var d=i.source;if(Array.isArray(d)&&d.length>0){for(var u=0;u<d.length;u++)if("string"!=typeof d[u]||0===d[u].length)return!1;return!0}return m.isPlainObject(d)||"string"==typeof d&&d.length>0}function l(i){var d={},u={};switch(i.type){case"circle":m.extendFlat(u,{"circle-radius":i.circle.radius,"circle-color":i.color,"circle-opacity":i.opacity});break;case"line":m.extendFlat(u,{"line-width":i.line.width,"line-color":i.color,"line-opacity":i.opacity,"line-dasharray":i.line.dash});break;case"fill":m.extendFlat(u,{"fill-color":i.color,"fill-outline-color":i.fill.outlinecolor,"fill-opacity":i.opacity});break;case"symbol":var s=i.symbol,c=T(s.textposition,s.iconsize);m.extendFlat(d,{"icon-image":s.icon+"-15","icon-size":s.iconsize/10,"text-field":s.text,"text-size":s.textfont.size,"text-anchor":c.anchor,"text-offset":c.offset,"symbol-placement":s.placement}),m.extendFlat(u,{"icon-color":i.color,"text-color":s.textfont.color,"text-opacity":i.opacity});break;case"raster":m.extendFlat(u,{"raster-fade-duration":0,"raster-opacity":i.opacity})}return{layout:d,paint:u}}o.update=function(i){this.visible?this.needsNewImage(i)?this.updateImage(i):this.needsNewSource(i)?(this.removeLayer(),this.updateSource(i),this.updateLayer(i)):this.needsNewLayer(i)?this.updateLayer(i):this.updateStyle(i):(this.updateSource(i),this.updateLayer(i)),this.visible=a(i)},o.needsNewImage=function(i){return this.subplot.map.getSource(this.idSource)&&"image"===this.sourceType&&"image"===i.sourcetype&&(this.source!==i.source||JSON.stringify(this.coordinates)!==JSON.stringify(i.coordinates))},o.needsNewSource=function(i){return this.sourceType!==i.sourcetype||JSON.stringify(this.source)!==JSON.stringify(i.source)||this.layerType!==i.type},o.needsNewLayer=function(i){return this.layerType!==i.type||this.below!==this.subplot.belowLookup["layout-"+this.index]},o.lookupBelow=function(){return this.subplot.belowLookup["layout-"+this.index]},o.updateImage=function(i){this.subplot.map.getSource(this.idSource).updateImage({url:i.source,coordinates:i.coordinates});var d=this.findFollowingMapboxLayerId(this.lookupBelow());null!==d&&this.subplot.map.moveLayer(this.idLayer,d)},o.updateSource=function(i){var s,c,h,p,v,d=this.subplot.map;if(d.getSource(this.idSource)&&d.removeSource(this.idSource),this.sourceType=i.sourcetype,this.source=i.source,a(i)){var u=(p=(s=i).source,v={type:h=s.sourcetype},"geojson"===h?c="data":"vector"===h?c="string"==typeof p?"url":"tiles":"raster"===h?(c="tiles",v.tileSize=256):"image"===h&&(c="url",v.coordinates=s.coordinates),v[c]=p,s.sourceattribution&&(v.attribution=x(s.sourceattribution)),v);d.addSource(this.idSource,u)}},o.findFollowingMapboxLayerId=function(i){if("traces"===i)for(var d=this.subplot.getMapLayers(),u=0;u<d.length;u++){var s=d[u].id;if("string"==typeof s&&0===s.indexOf(b.traceLayerPrefix)){i=s;break}}return i},o.updateLayer=function(i){var d=this.subplot,u=l(i),s=this.lookupBelow(),c=this.findFollowingMapboxLayerId(s);this.removeLayer(),a(i)&&d.addLayer({id:this.idLayer,source:this.idSource,"source-layer":i.sourcelayer||"",type:i.type,minzoom:i.minzoom,maxzoom:i.maxzoom,layout:u.layout,paint:u.paint},c),this.layerType=i.type,this.below=s},o.updateStyle=function(i){if(a(i)){var d=l(i);this.subplot.setOptions(this.idLayer,"setLayoutProperty",d.layout),this.subplot.setOptions(this.idLayer,"setPaintProperty",d.paint)}},o.removeLayer=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer)},o.dispose=function(){var i=this.subplot.map;i.getLayer(this.idLayer)&&i.removeLayer(this.idLayer),i.getSource(this.idSource)&&i.removeSource(this.idSource)},oe.exports=function(i,d,u){var s=new e(i,d);return s.update(u),s}},{"../../lib":503,"../../lib/svg_text_utils":529,"./constants":611,"./convert_text_opts":612}],615:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../components/color").defaultLine,T=_("../domain").attributes,b=_("../font_attributes"),e=_("../../traces/scatter/attributes").textposition,o=_("../../plot_api/edit_types").overrideAll,a=_("../../plot_api/plot_template").templatedArray,l=_("./constants"),i=b({});i.family.dflt="Open Sans Regular, Arial Unicode MS Regular",(oe.exports=o({_arrayAttrRegexps:[m.counterRegex("mapbox",".layers",!0)],domain:T({name:"mapbox"}),accesstoken:{valType:"string",noBlank:!0,strict:!0},style:{valType:"any",values:l.styleValuesMapbox.concat(l.styleValuesNonMapbox),dflt:l.styleValueDflt},center:{lon:{valType:"number",dflt:0},lat:{valType:"number",dflt:0}},zoom:{valType:"number",dflt:1},bearing:{valType:"number",dflt:0},pitch:{valType:"number",dflt:0},layers:a("layer",{visible:{valType:"boolean",dflt:!0},sourcetype:{valType:"enumerated",values:["geojson","vector","raster","image"],dflt:"geojson"},source:{valType:"any"},sourcelayer:{valType:"string",dflt:""},sourceattribution:{valType:"string"},type:{valType:"enumerated",values:["circle","line","fill","symbol","raster"],dflt:"circle"},coordinates:{valType:"any"},below:{valType:"string"},color:{valType:"color",dflt:x},opacity:{valType:"number",min:0,max:1,dflt:1},minzoom:{valType:"number",min:0,max:24,dflt:0},maxzoom:{valType:"number",min:0,max:24,dflt:24},circle:{radius:{valType:"number",dflt:15}},line:{width:{valType:"number",dflt:2},dash:{valType:"data_array"}},fill:{outlinecolor:{valType:"color",dflt:x}},symbol:{icon:{valType:"string",dflt:"marker"},iconsize:{valType:"number",dflt:10},text:{valType:"string",dflt:""},placement:{valType:"enumerated",values:["point","line","line-center"],dflt:"point"},textfont:i,textposition:m.extendFlat({},e,{arrayOk:!1})}})},"plot","from-root")).uirevision={valType:"any",editType:"none"}},{"../../components/color":366,"../../lib":503,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../traces/scatter/attributes":926,"../domain":584,"../font_attributes":585,"./constants":611}],616:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../subplot_defaults"),T=_("../array_container_defaults"),b=_("./layout_attributes");function e(a,l,i,d){i("accesstoken",d.accessToken),i("style"),i("center.lon"),i("center.lat"),i("zoom"),i("bearing"),i("pitch"),T(a,l,{name:"layers",handleItemDefaults:o}),l._input=a}function o(a,l){function i(h,p){return m.coerce(a,l,b.layers,h,p)}if(i("visible")){var d,u=i("sourcetype"),s="raster"===u||"image"===u;i("source"),i("sourceattribution"),"vector"===u&&i("sourcelayer"),"image"===u&&i("coordinates"),s&&(d="raster");var c=i("type",d);s&&"raster"!==c&&(c=l.type="raster",m.log("Source types *raster* and *image* must drawn *raster* layer type.")),i("below"),i("color"),i("opacity"),i("minzoom"),i("maxzoom"),"circle"===c&&i("circle.radius"),"line"===c&&(i("line.width"),i("line.dash")),"fill"===c&&i("fill.outlinecolor"),"symbol"===c&&(i("symbol.icon"),i("symbol.iconsize"),i("symbol.text"),m.coerceFont(i,"symbol.textfont"),i("symbol.textposition"),i("symbol.placement"))}}oe.exports=function(a,l,i){x(a,l,i,{type:"mapbox",attributes:b,handleDefaults:e,partition:"y",accessToken:l._mapboxAccessToken})}},{"../../lib":503,"../array_container_defaults":549,"../subplot_defaults":632,"./layout_attributes":615}],617:[function(_,oe,ae){"use strict";var m=_("mapbox-gl/dist/mapbox-gl-unminified"),x=_("../../lib"),T=_("../../lib/geo_location_utils"),b=_("../../registry"),e=_("../cartesian/axes"),o=_("../../components/dragelement"),a=_("../../components/fx"),l=_("../../components/dragelement/helpers"),i=l.rectMode,d=l.drawMode,u=l.selectMode,s=_("../cartesian/select").prepSelect,c=_("../cartesian/select").clearSelect,h=_("../cartesian/select").clearSelectionsCache,p=_("../cartesian/select").selectOnClick,v=_("./constants"),g=_("./layers");function f(C,P){this.id=P,this.gd=C;var D=C._fullLayout,F=C._context;this.container=D._glcontainer.node(),this.isStatic=F.staticPlot,this.uid=D._uid+"-"+this.id,this.div=null,this.xaxis=null,this.yaxis=null,this.createFramework(D),this.map=null,this.accessToken=null,this.styleObj=null,this.traceHash={},this.layerList=[],this.belowLookup={},this.dragging=!1,this.wheeling=!1}var w=f.prototype;w.plot=function(C,P,D){var F,R=this;R.map&&P[R.id].accesstoken!==R.accessToken&&(R.map.remove(),R.map=null,R.styleObj=null,R.traceHash={},R.layerList=[]),F=new Promise(R.map?function(I,B){R.updateMap(C,P,I,B)}:function(I,B){R.createMap(C,P,I,B)}),D.push(F)},w.createMap=function(C,P,D,F){var R=this,L=P[R.id],I=R.styleObj=M(L.style);R.accessToken=L.accesstoken;var B=R.map=new m.Map({container:R.div,style:I.style,center:k(L.center),zoom:L.zoom,bearing:L.bearing,pitch:L.pitch,interactive:!R.isStatic,preserveDrawingBuffer:R.isStatic,doubleClickZoom:!1,boxZoom:!1,attributionControl:!1}).addControl(new m.AttributionControl({compact:!0}));B._canvas.style.left="0px",B._canvas.style.top="0px",R.rejectOnError(F),R.isStatic||R.initFx(C,P);var V=[];V.push(new Promise(function(Z){B.once("load",Z)})),V=V.concat(T.fetchTraceGeoData(C)),Promise.all(V).then(function(){R.fillBelowLookup(C,P),R.updateData(C),R.updateLayout(P),R.resolveOnRender(D)}).catch(F)},w.updateMap=function(C,P,D,F){var R=this,L=R.map,I=P[this.id];R.rejectOnError(F);var B=[],V=M(I.style);JSON.stringify(R.styleObj)!==JSON.stringify(V)&&(R.styleObj=V,L.setStyle(V.style),R.traceHash={},B.push(new Promise(function(Z){L.once("styledata",Z)}))),B=B.concat(T.fetchTraceGeoData(C)),Promise.all(B).then(function(){R.fillBelowLookup(C,P),R.updateData(C),R.updateLayout(P),R.resolveOnRender(D)}).catch(F)},w.fillBelowLookup=function(C,P){var D,F,R=P[this.id].layers,L=this.belowLookup={},I=!1;for(D=0;D<C.length;D++){var B=C[D][0].trace,V=B._module;"string"==typeof B.below?F=B.below:V.getBelow&&(F=V.getBelow(B,this)),""===F&&(I=!0),L["trace-"+B.uid]=F||""}for(D=0;D<R.length;D++){var Z=R[D];L["layout-"+D]=F="string"==typeof Z.below?Z.below:I?"traces":""}var Y,ee,J={};for(Y in L)J[F=L[Y]]?J[F].push(Y):J[F]=[Y];for(F in J){var $=J[F];if($.length>1)for(D=0;D<$.length;D++)0===(Y=$[D]).indexOf("trace-")?(ee=Y.split("trace-")[1],this.traceHash[ee]&&(this.traceHash[ee].below=null)):0===Y.indexOf("layout-")&&(ee=Y.split("layout-")[1],this.layerList[ee]&&(this.layerList[ee].below=null))}};var y={choroplethmapbox:0,densitymapbox:1,scattermapbox:2};function M(C){var P={};return x.isPlainObject(C)?(P.id=C.id,P.style=C):"string"==typeof C?(P.id=C,P.style=-1!==v.styleValuesMapbox.indexOf(C)?A(C):v.stylesNonMapbox[C]?v.stylesNonMapbox[C]:C):(P.id=v.styleValueDflt,P.style=A(v.styleValueDflt)),P.transition={duration:0,delay:0},P}function A(C){return v.styleUrlPrefix+C+"-"+v.styleUrlSuffix}function k(C){return[C.lon,C.lat]}w.updateData=function(C){var P,D,F,R,L=this.traceHash,I=C.slice().sort(function(ee,J){return y[ee[0].trace.type]-y[J[0].trace.type]});for(F=0;F<I.length;F++){var B=I[F],V=!1;(P=L[(D=B[0].trace).uid])&&(P.type===D.type?(P.update(B),V=!0):P.dispose()),!V&&D._module&&(L[D.uid]=D._module.plot(this,B))}var Z=Object.keys(L);e:for(F=0;F<Z.length;F++){var Y=Z[F];for(R=0;R<C.length;R++)if(Y===(D=C[R][0].trace).uid)continue e;(P=L[Y]).dispose(),delete L[Y]}},w.updateLayout=function(C){var P=this.map,D=C[this.id];this.dragging||this.wheeling||(P.setCenter(k(D.center)),P.setZoom(D.zoom),P.setBearing(D.bearing),P.setPitch(D.pitch)),this.updateLayers(C),this.updateFramework(C),this.updateFx(C),this.map.resize(),this.gd._context._scrollZoom.mapbox?P.scrollZoom.enable():P.scrollZoom.disable()},w.resolveOnRender=function(C){var P=this.map;P.on("render",function D(){P.loaded()&&(P.off("render",D),setTimeout(C,10))})},w.rejectOnError=function(C){var P=this.map;function D(){C(new Error(v.mapOnErrorMsg))}P.once("error",D),P.once("style.error",D),P.once("source.error",D),P.once("tile.error",D),P.once("layer.error",D)},w.createFramework=function(C){var P=this,D=P.div=document.createElement("div");D.id=P.uid,D.style.position="absolute",P.container.appendChild(D),P.xaxis={_id:"x",c2p:function(F){return P.project(F).x}},P.yaxis={_id:"y",c2p:function(F){return P.project(F).y}},P.updateFramework(C),P.mockAxis={type:"linear",showexponent:"all",exponentformat:"B"},e.setConvert(P.mockAxis,C)},w.initFx=function(C,P){var D=this,F=D.gd,R=D.map;function L(){a.loneUnhover(P._hoverlayer)}function I(){var B=D.getView();F.emit("plotly_relayouting",D.getViewEditsWithDerived(B))}R.on("moveend",function(B){if(D.map){var V=F._fullLayout;if(B.originalEvent||D.wheeling){var Z=V[D.id];b.call("_storeDirectGUIEdit",F.layout,V._preGUI,D.getViewEdits(Z));var Y=D.getView();Z._input.center=Z.center=Y.center,Z._input.zoom=Z.zoom=Y.zoom,Z._input.bearing=Z.bearing=Y.bearing,Z._input.pitch=Z.pitch=Y.pitch,F.emit("plotly_relayout",D.getViewEditsWithDerived(Y))}B.originalEvent&&"mouseup"===B.originalEvent.type?D.dragging=!1:D.wheeling&&(D.wheeling=!1),V._rehover&&V._rehover()}}),R.on("wheel",function(){D.wheeling=!0}),R.on("mousemove",function(B){var V=D.div.getBoundingClientRect(),Z=[B.originalEvent.offsetX,B.originalEvent.offsetY];B.target.getBoundingClientRect=function(){return V},D.xaxis.p2c=function(){return R.unproject(Z).lng},D.yaxis.p2c=function(){return R.unproject(Z).lat},F._fullLayout._rehover=function(){F._fullLayout._hoversubplot===D.id&&F._fullLayout[D.id]&&a.hover(F,B,D.id)},a.hover(F,B,D.id),F._fullLayout._hoversubplot=D.id}),R.on("dragstart",function(){D.dragging=!0,L()}),R.on("zoomstart",L),R.on("mouseout",function(){F._fullLayout._hoversubplot=null}),R.on("drag",I),R.on("zoom",I),R.on("dblclick",function(){var B=F._fullLayout[D.id];b.call("_storeDirectGUIEdit",F.layout,F._fullLayout._preGUI,D.getViewEdits(B));var V=D.viewInitial;R.setCenter(k(V.center)),R.setZoom(V.zoom),R.setBearing(V.bearing),R.setPitch(V.pitch);var Z=D.getView();B._input.center=B.center=Z.center,B._input.zoom=B.zoom=Z.zoom,B._input.bearing=B.bearing=Z.bearing,B._input.pitch=B.pitch=Z.pitch,F.emit("plotly_doubleclick",null),F.emit("plotly_relayout",D.getViewEditsWithDerived(Z))}),D.clearSelect=function(){h(D.dragOptions),c(D.dragOptions.gd)},D.onClickInPanFn=function(B){return function(V){var Z=F._fullLayout.clickmode;Z.indexOf("select")>-1&&p(V.originalEvent,F,[D.xaxis],[D.yaxis],D.id,B),Z.indexOf("event")>-1&&a.click(F,V.originalEvent)}}},w.updateFx=function(C){var P=this,D=P.map,F=P.gd;if(!P.isStatic){var R,L=C.dragmode;R=i(L)?function(V,Z){(V.range={})[P.id]=[B([Z.xmin,Z.ymin]),B([Z.xmax,Z.ymax])]}:function(V,Z,Y){(V.lassoPoints={})[P.id]=Y.filtered.map(B)},P.dragOptions=x.extendDeep(P.dragOptions||{},{dragmode:C.dragmode,element:P.div,gd:F,plotinfo:{id:P.id,domain:C[P.id].domain,xaxis:P.xaxis,yaxis:P.yaxis,fillRangeItems:R},xaxes:[P.xaxis],yaxes:[P.yaxis],subplot:P.id}),D.off("click",P.onClickInPanHandler),u(L)||d(L)?(D.dragPan.disable(),D.on("zoomstart",P.clearSelect),P.dragOptions.prepFn=function(V,Z,Y){s(V,Z,Y,P.dragOptions,L)},o.init(P.dragOptions)):(D.dragPan.enable(),D.off("zoomstart",P.clearSelect),P.div.onmousedown=null,P.onClickInPanHandler=P.onClickInPanFn(P.dragOptions),D.on("click",P.onClickInPanHandler))}function B(V){var Z=P.map.unproject(V);return[Z.lng,Z.lat]}},w.updateFramework=function(C){var P=C[this.id].domain,D=C._size,F=this.div.style;F.width=D.w*(P.x[1]-P.x[0])+"px",F.height=D.h*(P.y[1]-P.y[0])+"px",F.left=D.l+P.x[0]*D.w+"px",F.top=D.t+(1-P.y[1])*D.h+"px",this.xaxis._offset=D.l+P.x[0]*D.w,this.xaxis._length=D.w*(P.x[1]-P.x[0]),this.yaxis._offset=D.t+(1-P.y[1])*D.h,this.yaxis._length=D.h*(P.y[1]-P.y[0])},w.updateLayers=function(C){var P,D=C[this.id].layers,F=this.layerList;if(D.length!==F.length){for(P=0;P<F.length;P++)F[P].dispose();for(F=this.layerList=[],P=0;P<D.length;P++)F.push(g(this,P,D[P]))}else for(P=0;P<D.length;P++)F[P].update(D[P])},w.destroy=function(){this.map&&(this.map.remove(),this.map=null,this.container.removeChild(this.div))},w.toImage=function(){return this.map.stop(),this.map.getCanvas().toDataURL()},w.setOptions=function(C,P,D){for(var F in D)this.map[P](C,F,D[F])},w.getMapLayers=function(){return this.map.getStyle().layers},w.addLayer=function(C,P){var D=this.map;if("string"==typeof P){if(""===P)return void D.addLayer(C,P);for(var F=this.getMapLayers(),R=0;R<F.length;R++)if(P===F[R].id)return void D.addLayer(C,P);x.warn(["Trying to add layer with *below* value",P,"referencing a layer that does not exist","or that does not yet exist."].join(" "))}D.addLayer(C)},w.project=function(C){return this.map.project(new m.LngLat(C[0],C[1]))},w.getView=function(){var C=this.map,P=C.getCenter(),D={lon:P.lng,lat:P.lat},F=C.getCanvas(),R=parseInt(F.style.width),L=parseInt(F.style.height);return{center:D,zoom:C.getZoom(),bearing:C.getBearing(),pitch:C.getPitch(),_derived:{coordinates:[C.unproject([0,0]).toArray(),C.unproject([R,0]).toArray(),C.unproject([R,L]).toArray(),C.unproject([0,L]).toArray()]}}},w.getViewEdits=function(C){for(var P=this.id,D=["center","zoom","bearing","pitch"],F={},R=0;R<D.length;R++){var L=D[R];F[P+"."+L]=C[L]}return F},w.getViewEditsWithDerived=function(C){var P=this.id,D=this.getViewEdits(C);return D[P+"._derived"]=C._derived,D},oe.exports=f},{"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/fx":406,"../../lib":503,"../../lib/geo_location_utils":496,"../../registry":638,"../cartesian/axes":554,"../cartesian/select":575,"./constants":611,"./layers":614,"mapbox-gl/dist/mapbox-gl-unminified":239}],618:[function(_,oe,ae){"use strict";oe.exports=function(m){var x=m.editType;return{t:{valType:"number",dflt:0,editType:x},r:{valType:"number",dflt:0,editType:x},b:{valType:"number",dflt:0,editType:x},l:{valType:"number",dflt:0,editType:x},editType:x}}},{}],619:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("d3-time-format").timeFormatLocale,T=_("d3-format").formatLocale,b=_("fast-isnumeric"),e=_("../registry"),o=_("../plot_api/plot_schema"),a=_("../plot_api/plot_template"),l=_("../lib"),i=_("../components/color"),d=_("../constants/numerical").BADNUM,u=_("./cartesian/axis_ids"),s=_("./cartesian/handle_outline").clearSelect,c=_("./animation_attributes"),h=_("./frame_attributes"),p=_("../plots/get_data").getModuleCalcData,v=l.relinkPrivateKeys,g=l._,f=oe.exports={};l.extendFlat(f,e),f.attributes=_("./attributes"),f.attributes.type.values=f.allTypes,f.fontAttrs=_("./font_attributes"),f.layoutAttributes=_("./layout_attributes"),f.fontWeight="normal";var w=f.transformsRegistry,y=_("./command");f.executeAPICommand=y.executeAPICommand,f.computeAPICommandBindings=y.computeAPICommandBindings,f.manageCommandObserver=y.manageCommandObserver,f.hasSimpleAPICommandBindings=y.hasSimpleAPICommandBindings,f.redrawText=function(Y){return Y=l.getGraphDiv(Y),new Promise(function(ee){setTimeout(function(){Y._fullLayout&&(e.getComponentMethod("annotations","draw")(Y),e.getComponentMethod("legend","draw")(Y),e.getComponentMethod("colorbar","draw")(Y),ee(f.previousPromises(Y)))},300)})},f.resize=function(Y){var ee;Y=l.getGraphDiv(Y);var J=new Promise(function($,Q){Y&&!l.isHidden(Y)||Q(new Error("Resize must be passed a displayed plot div element.")),Y._redrawTimer&&clearTimeout(Y._redrawTimer),Y._resolveResize&&(ee=Y._resolveResize),Y._resolveResize=$,Y._redrawTimer=setTimeout(function(){if(!Y.layout||Y.layout.width&&Y.layout.height||l.isHidden(Y))$(Y);else{delete Y.layout.width,delete Y.layout.height;var se=Y.changed;Y.autoplay=!0,e.call("relayout",Y,{autosize:!0}).then(function(){Y.changed=se,Y._resolveResize===$&&(delete Y._resolveResize,$(Y))})}},100)});return ee&&ee(J),J},f.previousPromises=function(Y){if((Y._promises||[]).length)return Promise.all(Y._promises).then(function(){Y._promises=[]})},f.addLinks=function(Y){if(Y._context.showLink||Y._context.showSources){var ee=Y._fullLayout,J=l.ensureSingle(ee._paper,"text","js-plot-link-container",function(W){W.style({"font-family":'"Open Sans", Arial, sans-serif',"font-size":"12px",fill:i.defaultLine,"pointer-events":"all"}).each(function(){var ie=m.select(this);ie.append("tspan").classed("js-link-to-tool",!0),ie.append("tspan").classed("js-link-spacer",!0),ie.append("tspan").classed("js-sourcelinks",!0)})}),$=J.node(),Q={y:ee._paper.attr("height")-9};document.body.contains($)&&$.getComputedTextLength()>=ee.width-20?(Q["text-anchor"]="start",Q.x=5):(Q["text-anchor"]="end",Q.x=ee._paper.attr("width")-7),J.attr(Q);var se=J.select(".js-link-to-tool"),j=J.select(".js-link-spacer"),G=J.select(".js-sourcelinks");Y._context.showSources&&Y._context.showSources(Y),Y._context.showLink&&function(W,ie){ie.text("");var q=ie.append("a").attr({"xlink:xlink:href":"#",class:"link--impt link--embedview","font-weight":"bold"}).text(W._context.linkText+" "+String.fromCharCode(187));if(W._context.sendData)q.on("click",function(){f.sendDataToCloud(W)});else{var te=window.location.pathname.split("/"),ne=window.location.search;q.attr({"xlink:xlink:show":"new","xlink:xlink:href":"/"+te[2].split(".")[0]+"/"+te[1]+ne})}}(Y,se),j.text(se.text()&&G.text()?" - ":"")}},f.sendDataToCloud=function(Y){var ee=(window.PLOTLYENV||{}).BASE_URL||Y._context.plotlyServerURL;if(ee){Y.emit("plotly_beforeexport");var J=m.select(Y).append("div").attr("id","hiddenform").style("display","none"),$=J.append("form").attr({action:ee+"/external",method:"post",target:"_blank"});return $.append("input").attr({type:"text",name:"data"}).node().value=f.graphJson(Y,!1,"keepdata"),$.node().submit(),J.remove(),Y.emit("plotly_afterexport"),!1}};var M=["days","shortDays","months","shortMonths","periods","dateTime","date","time","decimal","thousands","grouping","currency"],A=["year","month","dayMonth","dayMonthYear"];function k(Y,ee){var J=Y._context.locale;J||(J="en-US");var $=!1,Q={};function se(te){for(var ne=!0,le=0;le<ee.length;le++){var ue=ee[le];Q[ue]||(te[ue]?Q[ue]=te[ue]:ne=!1)}ne&&($=!0)}for(var j=0;j<2;j++){for(var G=Y._context.locales,W=0;W<2;W++){var ie=(G[J]||{}).format;if(ie&&(se(ie),$))break;G=e.localeRegistry}var q=J.split("-")[0];if($||q===J)break;J=q}return $||se(e.localeRegistry.en.format),Q}function C(Y,ee){var J={_fullLayout:ee},$="x"===Y._id.charAt(0),Q=Y._mainAxis._anchorAxis,se="",j="",G="";if(Q&&(G=Q._mainAxis._id,se=$?Y._id+G:G+Y._id),!se||!ee._plots[se]){se="";for(var W=Y._counterAxes,ie=0;ie<W.length;ie++){var q=W[ie],te=$?Y._id+q:q+Y._id;j||(j=te);var ne=u.getFromId(J,q);if(G&&ne.overlaying===G){se=te;break}}}return se||j}function P(Y){var ee=Y.transforms;if(Array.isArray(ee)&&ee.length)for(var J=0;J<ee.length;J++){var $=ee[J],Q=$._module||w[$.type];if(Q&&Q.makesData)return!0}return!1}function D(Y,ee,J,$){for(var Q=Y.transforms,se=[Y],j=0;j<Q.length;j++){var G=Q[j],W=w[G.type];W&&W.transform&&(se=W.transform(se,{transform:G,fullTrace:Y,fullData:ee,layout:J,fullLayout:$,transformIndex:j}))}return se}function F(Y){return"string"==typeof Y&&"px"===Y.substr(Y.length-2)&&parseFloat(Y)}function R(Y){var ee=Y.margin;if(!Y._size){var J=Y._size={l:Math.round(ee.l),r:Math.round(ee.r),t:Math.round(ee.t),b:Math.round(ee.b),p:Math.round(ee.pad)};J.w=Math.round(Y.width)-J.l-J.r,J.h=Math.round(Y.height)-J.t-J.b}Y._pushmargin||(Y._pushmargin={}),Y._pushmarginIds||(Y._pushmarginIds={})}f.supplyDefaults=function(Y,ee){var $e,et,J=ee&&ee.skipUpdateCalc,$=Y._fullLayout||{};if($._skipDefaults)delete $._skipDefaults;else{var Q,se=Y._fullLayout={},j=Y.layout||{},G=Y._fullData||[],W=Y._fullData=[],ie=Y.data||[],q=Y.calcdata||[],te=Y._context||{};Y._transitionData||f.createTransitionData(Y),se._dfltTitle={plot:g(Y,"Click to enter Plot title"),x:g(Y,"Click to enter X axis title"),y:g(Y,"Click to enter Y axis title"),colorbar:g(Y,"Click to enter Colorscale title"),annotation:g(Y,"new text")},se._traceWord=g(Y,"trace");var ne=k(Y,M);if(se._mapboxAccessToken=te.mapboxAccessToken,$._initialAutoSizeIsDone){var le=$.width,ue=$.height;f.supplyLayoutGlobalDefaults(j,se,ne),j.width||(se.width=le),j.height||(se.height=ue),f.sanitizeMargins(se)}else{f.supplyLayoutGlobalDefaults(j,se,ne);var de=!j.width||!j.height,he=se.autosize;de&&(he||te.autosizable)?f.plotAutoSize(Y,j,se):de&&f.sanitizeMargins(se),!he&&de&&(j.width=se.width,j.height=se.height)}se._d3locale=(($e=ne).decimal=(et=se.separators).charAt(0),$e.thousands=et.charAt(1),{numberFormat:function(tt){try{tt=T($e).format(l.adjustFormat(tt))}catch(ct){return l.warnBadFormat(tt),l.noFormat}return tt},timeFormat:x($e).utcFormat}),se._extraFormat=k(Y,A),se._initialAutoSizeIsDone=!0,se._dataLength=ie.length,se._modules=[],se._visibleModules=[],se._basePlotModules=[];var ge=se._subplots=function(){var $e,et,tt=e.collectableSubplotTypes,ct={};if(!tt){tt=[];var xt=e.subplotsRegistry;for(var Ct in xt){var Ht=xt[Ct].attr;if(Ht&&(tt.push(Ct),Array.isArray(Ht)))for(et=0;et<Ht.length;et++)l.pushUnique(tt,Ht[et])}}for($e=0;$e<tt.length;$e++)ct[tt[$e]]=[];return ct}(),we=se._splomAxes={x:{},y:{}},Ce=se._splomSubplots={};se._splomGridDflt={},se._scatterStackOpts={},se._firstScatter={},se._alignmentOpts={},se._colorAxes={},se._requestRangeslider={},se._traceUids=function($e,et){var tt,ct,xt=et.length,Ct=[];for(tt=0;tt<$e.length;tt++){var Ht=$e[tt]._fullInput;Ht!==ct&&Ct.push(Ht),ct=Ht}var zt=Ct.length,ht=new Array(xt),ut={};function Ot(Ze,Qe){ht[Qe]=Ze,ut[Ze]=1}function tn(Ze,Qe){if(Ze&&"string"==typeof Ze&&!ut[Ze])return Ot(Ze,Qe),!0}for(tt=0;tt<xt;tt++){var un=et[tt].uid;"number"==typeof un&&(un=String(un)),tn(un,tt)||tt<zt&&tn(Ct[tt].uid,tt)||Ot(l.randstr(ut),tt)}return ht}(G,ie),se._globalTransforms=(Y._context||{}).globalTransforms,f.supplyDataDefaults(ie,W,j,se);var De=Object.keys(we.x),Se=Object.keys(we.y);if(De.length>1&&Se.length>1){for(e.getComponentMethod("grid","sizeDefaults")(j,se),Q=0;Q<De.length;Q++)l.pushUnique(ge.xaxis,De[Q]);for(Q=0;Q<Se.length;Q++)l.pushUnique(ge.yaxis,Se[Q]);for(var Fe in Ce)l.pushUnique(ge.cartesian,Fe)}if(se._has=f._hasPlotType.bind(se),G.length===W.length)for(Q=0;Q<W.length;Q++)v(W[Q],G[Q]);f.supplyLayoutModuleDefaults(j,se,W,Y._transitionData);var ve=se._visibleModules,Te=[];for(Q=0;Q<ve.length;Q++){var Le=ve[Q].crossTraceDefaults;Le&&l.pushUnique(Te,Le)}for(Q=0;Q<Te.length;Q++)Te[Q](W,se);se._hasOnlyLargeSploms=1===se._basePlotModules.length&&"splom"===se._basePlotModules[0].name&&De.length>15&&Se.length>15&&0===se.shapes.length&&0===se.images.length,f.linkSubplots(W,se,G,$),f.cleanPlot(W,se,G,$);var Ee=!(!$._has||!$._has("gl2d")),Pe=!(!se._has||!se._has("gl2d")),je=!(!$._has||!$._has("cartesian"))||Ee,Ge=!(!se._has||!se._has("cartesian"))||Pe;je&&!Ge?$._bgLayer.remove():Ge&&!je&&(se._shouldCreateBgLayer=!0),$._zoomlayer&&!Y._dragging&&s({_fullLayout:$}),function($e,et){var tt,ct=[];et.meta&&(tt=et._meta={meta:et.meta,layout:{meta:et.meta}});for(var xt=0;xt<$e.length;xt++){var Ct=$e[xt];Ct.meta?ct[Ct.index]=Ct._meta={meta:Ct.meta}:et.meta&&(Ct._meta={meta:et.meta}),et.meta&&(Ct._meta.layout={meta:et.meta})}ct.length&&(tt||(tt=et._meta={}),tt.data=ct)}(W,se),v(se,$),e.getComponentMethod("colorscale","crossTraceDefaults")(W,se),se._preGUI||(se._preGUI={}),se._tracePreGUI||(se._tracePreGUI={});var Ke,lt=se._tracePreGUI,Ue={};for(Ke in lt)Ue[Ke]="old";for(Q=0;Q<W.length;Q++)Ue[Ke=W[Q]._fullInput.uid]||(lt[Ke]={}),Ue[Ke]="new";for(Ke in Ue)"old"===Ue[Ke]&&delete lt[Ke];R(se),e.getComponentMethod("rangeslider","makeData")(se),J||q.length!==W.length||f.supplyDefaultsUpdateCalc(q,W)}},f.supplyDefaultsUpdateCalc=function(Y,ee){for(var J=0;J<ee.length;J++){var $=ee[J],Q=(Y[J]||[])[0];if(Q&&Q.trace){var se=Q.trace;if(se._hasCalcTransform){var j,G,W,ie=se._arrayAttrs;for(j=0;j<ie.length;j++)W=l.nestedProperty(se,G=ie[j]).get().slice(),l.nestedProperty($,G).set(W)}Q.trace=$}}},f.createTransitionData=function(Y){Y._transitionData||(Y._transitionData={}),Y._transitionData._frames||(Y._transitionData._frames=[]),Y._transitionData._frameHash||(Y._transitionData._frameHash={}),Y._transitionData._counter||(Y._transitionData._counter=0),Y._transitionData._interruptCallbacks||(Y._transitionData._interruptCallbacks=[])},f._hasPlotType=function(Y){var ee,J=this._basePlotModules||[];for(ee=0;ee<J.length;ee++)if(J[ee].name===Y)return!0;var $=this._modules||[];for(ee=0;ee<$.length;ee++){var Q=$[ee].name;if(Q===Y)return!0;var se=e.modules[Q];if(se&&se.categories[Y])return!0}return!1},f.cleanPlot=function(Y,ee,J,$){var Q,se,j=$._basePlotModules||[];for(Q=0;Q<j.length;Q++){var G=j[Q];G.clean&&G.clean(Y,ee,J,$)}var W=$._has&&$._has("gl"),ie=ee._has&&ee._has("gl");W&&!ie&&void 0!==$._glcontainer&&($._glcontainer.selectAll(".gl-canvas").remove(),$._glcontainer.selectAll(".no-webgl").remove(),$._glcanvas=null);var q=!!$._infolayer;e:for(Q=0;Q<J.length;Q++){var te=J[Q].uid;for(se=0;se<Y.length;se++)if(te===Y[se].uid)continue e;q&&$._infolayer.select(".cb"+te).remove()}},f.linkSubplots=function(Y,ee,J,$){var Q,se,j=$._plots||{},G=ee._plots={},W=ee._subplots,ie={_fullData:Y,_fullLayout:ee},q=W.cartesian.concat(W.gl2d||[]);for(Q=0;Q<q.length;Q++){var te,ne=q[Q],le=j[ne],ue=u.getFromId(ie,ne,"x"),de=u.getFromId(ie,ne,"y");for(le?te=G[ne]=le:(te=G[ne]={}).id=ne,ue._counterAxes.push(de._id),de._counterAxes.push(ue._id),ue._subplotsWith.push(ne),de._subplotsWith.push(ne),te.xaxis=ue,te.yaxis=de,te._hasClipOnAxisFalse=!1,se=0;se<Y.length;se++){var he=Y[se];if(he.xaxis===te.xaxis._id&&he.yaxis===te.yaxis._id&&!1===he.cliponaxis){te._hasClipOnAxisFalse=!0;break}}}var be,ge=u.list(ie,null,!0);for(Q=0;Q<ge.length;Q++){var we=null;(be=ge[Q]).overlaying&&(we=u.getFromId(ie,be.overlaying))&&we.overlaying&&(be.overlaying=!1,we=null),be._mainAxis=we||be,we&&(be.domain=we.domain.slice()),be._anchorAxis="free"===be.anchor?null:u.getFromId(ie,be.anchor)}for(Q=0;Q<ge.length;Q++)if((be=ge[Q])._counterAxes.sort(u.idSort),be._subplotsWith.sort(l.subplotSort),be._mainSubplot=C(be,ee),be._counterAxes.length&&(be.spikemode&&-1!==be.spikemode.indexOf("across")||be.automargin&&be.mirror&&"free"!==be.anchor||e.getComponentMethod("rangeslider","isVisible")(be))){var Ce=1,De=0;for(se=0;se<be._counterAxes.length;se++){var Se=u.getFromId(ie,be._counterAxes[se]);Ce=Math.min(Ce,Se.domain[0]),De=Math.max(De,Se.domain[1])}Ce<De&&(be._counterDomainMin=Ce,be._counterDomainMax=De)}},f.clearExpandedTraceDefaultColors=function(Y){var ee,J,$;for(J=[],(ee=Y._module._colorAttrs)||(Y._module._colorAttrs=ee=[],o.crawl(Y._module.attributes,function(Q,se,j,G){J[G]=se,J.length=G+1,"color"===Q.valType&&void 0===Q.dflt&&ee.push(J.join("."))})),$=0;$<ee.length;$++)l.nestedProperty(Y,"_input."+ee[$]).get()||l.nestedProperty(Y,ee[$]).set(null)},f.supplyDataDefaults=function(Y,ee,J,$){var Q,se,j,G=$._modules,W=$._visibleModules,ie=$._basePlotModules,q=0,te=0;function ne(Fe){ee.push(Fe);var ve=Fe._module;ve&&(l.pushUnique(G,ve),!0===Fe.visible&&l.pushUnique(W,ve),l.pushUnique(ie,Fe._module.basePlotModule),q++,!1!==Fe._input.visible&&te++)}$._transformModules=[];var le={},ue=[],he=a.traceTemplater((J.template||{}).data||{});for(Q=0;Q<Y.length;Q++){if((se=he.newTrace(j=Y[Q])).uid=$._traceUids[Q],f.supplyTraceDefaults(j,se,te,$,Q),se.index=Q,se._input=j,se._expandedIndex=q,se.transforms&&se.transforms.length)for(var be=!1!==j.visible&&!1===se.visible,ge=D(se,ee,J,$),we=0;we<ge.length;we++){var Ce=ge[we],De={_template:se._template,type:se.type,uid:se.uid+we};be&&!1===Ce.visible&&delete Ce.visible,f.supplyTraceDefaults(Ce,De,q,$,Q),v(De,Ce),De.index=Q,De._input=j,De._fullInput=se,De._expandedIndex=q,De._expandedInput=Ce,ne(De)}else se._fullInput=se,se._expandedInput=se,ne(se);e.traceIs(se,"carpetAxis")&&(le[se.carpet]=se),e.traceIs(se,"carpetDependent")&&ue.push(Q)}for(Q=0;Q<ue.length;Q++)if((se=ee[ue[Q]]).visible){var Se=le[se.carpet];se._carpet=Se,Se&&Se.visible?(se.xaxis=Se.xaxis,se.yaxis=Se.yaxis):se.visible=!1}},f.supplyAnimationDefaults=function(Y){var ee;Y=Y||{};var J={};function $(Q,se){return l.coerce(Y||{},J,c,Q,se)}if($("mode"),$("direction"),$("fromcurrent"),Array.isArray(Y.frame))for(J.frame=[],ee=0;ee<Y.frame.length;ee++)J.frame[ee]=f.supplyAnimationFrameDefaults(Y.frame[ee]||{});else J.frame=f.supplyAnimationFrameDefaults(Y.frame||{});if(Array.isArray(Y.transition))for(J.transition=[],ee=0;ee<Y.transition.length;ee++)J.transition[ee]=f.supplyAnimationTransitionDefaults(Y.transition[ee]||{});else J.transition=f.supplyAnimationTransitionDefaults(Y.transition||{});return J},f.supplyAnimationFrameDefaults=function(Y){var ee={};function J($,Q){return l.coerce(Y||{},ee,c.frame,$,Q)}return J("duration"),J("redraw"),ee},f.supplyAnimationTransitionDefaults=function(Y){var ee={};function J($,Q){return l.coerce(Y||{},ee,c.transition,$,Q)}return J("duration"),J("easing"),ee},f.supplyFrameDefaults=function(Y){var ee={};function J($,Q){return l.coerce(Y,ee,h,$,Q)}return J("group"),J("name"),J("traces"),J("baseframe"),J("data"),J("layout"),ee},f.supplyTraceDefaults=function(Y,ee,J,$,Q){var se,j=$.colorway||i.defaults,G=j[J%j.length];function W(ge,we){return l.coerce(Y,ee,f.attributes,ge,we)}var ie=W("visible");W("type"),W("name",$._traceWord+" "+Q),W("uirevision",$.uirevision);var q=f.getModule(ee);if(ee._module=q,q){var te=q.basePlotModule,ne=te.attr,le=te.attributes;if(ne&&le){var ue=$._subplots,de="";if(ie||"gl2d"!==te.name){if(Array.isArray(ne))for(se=0;se<ne.length;se++){var he=ne[se],be=l.coerce(Y,ee,le,he);ue[he]&&l.pushUnique(ue[he],be),de+=be}else de=l.coerce(Y,ee,le,ne);ue[te.name]&&l.pushUnique(ue[te.name],de)}}}return ie&&(W("customdata"),W("ids"),W("meta"),e.traceIs(ee,"showLegend")?(l.coerce(Y,ee,q.attributes.showlegend?q.attributes:f.attributes,"showlegend"),W("legendgroup"),W("legendgrouptitle.text"),W("legendrank"),ee._dfltShowLegend=!0):ee._dfltShowLegend=!1,q&&q.supplyDefaults(Y,ee,G,$),e.traceIs(ee,"noOpacity")||W("opacity"),e.traceIs(ee,"notLegendIsolatable")&&(ee.visible=!!ee.visible),e.traceIs(ee,"noHover")||(ee.hovertemplate||l.coerceHoverinfo(Y,ee,$),"parcats"!==ee.type&&e.getComponentMethod("fx","supplyDefaults")(Y,ee,G,$)),q&&q.selectPoints&&W("selectedpoints"),f.supplyTransformDefaults(Y,ee,$)),ee},f.hasMakesDataTransform=P,f.supplyTransformDefaults=function(Y,ee,J){if(ee._length||P(Y)){var $=J._globalTransforms||[],Q=J._transformModules||[];if(Array.isArray(Y.transforms)||0!==$.length)for(var j=$.concat(Y.transforms||[]),G=ee.transforms=[],W=0;W<j.length;W++){var ie,q=j[W],te=q.type,ne=w[te],le=!(q._module&&q._module===ne),ue=ne&&"function"==typeof ne.transform;ne||l.warn("Unrecognized transform type "+te+"."),ne&&ne.supplyDefaults&&(le||ue)?((ie=ne.supplyDefaults(q,ee,J,Y)).type=te,ie._module=ne,l.pushUnique(Q,ne)):ie=l.extendFlat({},q),G.push(ie)}}},f.supplyLayoutGlobalDefaults=function(Y,ee,J){function $(W,ie){return l.coerce(Y,ee,f.layoutAttributes,W,ie)}var Q=Y.template;l.isPlainObject(Q)&&(ee.template=Q,ee._template=Q.layout,ee._dataTemplate=Q.data),$("autotypenumbers");var se=l.coerceFont($,"font");l.coerceFont($,"title.font",l.extendFlat({},se,{size:Math.round(1.4*se.size)})),$("title.text",ee._dfltTitle.plot),$("title.xref"),$("title.yref"),$("title.x"),$("title.y"),$("title.xanchor"),$("title.yanchor"),$("title.pad.t"),$("title.pad.r"),$("title.pad.b"),$("title.pad.l"),$("uniformtext.mode")&&$("uniformtext.minsize"),$("autosize",!(Y.width&&Y.height)),$("width"),$("height"),$("margin.l"),$("margin.r"),$("margin.t"),$("margin.b"),$("margin.pad"),$("margin.autoexpand"),Y.width&&Y.height&&f.sanitizeMargins(ee),e.getComponentMethod("grid","sizeDefaults")(Y,ee),$("paper_bgcolor"),$("separators",J.decimal+J.thousands),$("hidesources"),$("colorway"),$("datarevision");var G=$("uirevision");$("editrevision",G),$("selectionrevision",G),e.getComponentMethod("modebar","supplyLayoutDefaults")(Y,ee),e.getComponentMethod("shapes","supplyDrawNewShapeDefaults")(Y,ee,$),$("meta"),l.isPlainObject(Y.transition)&&($("transition.duration"),$("transition.easing"),$("transition.ordering")),e.getComponentMethod("calendars","handleDefaults")(Y,ee,"calendar"),e.getComponentMethod("fx","supplyLayoutGlobalDefaults")(Y,ee,$)},f.plotAutoSize=function(Y,ee,J){var $,Q,se=Y._context||{},j=se.frameMargins,G=l.isPlotDiv(Y);if(G&&Y.emit("plotly_autosize"),se.fillFrame)$=window.innerWidth,Q=window.innerHeight,document.body.style.overflow="hidden";else{var W=G?window.getComputedStyle(Y):{};if($=F(W.width)||F(W.maxWidth)||J.width,Q=F(W.height)||F(W.maxHeight)||J.height,b(j)&&j>0){var ie=1-2*j;$=Math.round(ie*$),Q=Math.round(ie*Q)}}var q=f.layoutAttributes.width.min,te=f.layoutAttributes.height.min;$<q&&($=q),Q<te&&(Q=te);var ne=!ee.width&&Math.abs(J.width-$)>1,le=!ee.height&&Math.abs(J.height-Q)>1;(le||ne)&&(ne&&(J.width=$),le&&(J.height=Q)),Y._initialAutoSize||(Y._initialAutoSize={width:$,height:Q}),f.sanitizeMargins(J)},f.supplyLayoutModuleDefaults=function(Y,ee,J,$){var Q,se,j,G=e.componentsRegistry,W=ee._basePlotModules,ie=e.subplotsRegistry.cartesian;for(Q in G)(j=G[Q]).includeBasePlot&&j.includeBasePlot(Y,ee);for(var q in W.length||W.push(ie),ee._has("cartesian")&&(e.getComponentMethod("grid","contentDefaults")(Y,ee),ie.finalizeSubplots(Y,ee)),ee._subplots)ee._subplots[q].sort(l.subplotSort);for(se=0;se<W.length;se++)(j=W[se]).supplyLayoutDefaults&&j.supplyLayoutDefaults(Y,ee,J);var te=ee._modules;for(se=0;se<te.length;se++)(j=te[se]).supplyLayoutDefaults&&j.supplyLayoutDefaults(Y,ee,J);var ne=ee._transformModules;for(se=0;se<ne.length;se++)(j=ne[se]).supplyLayoutDefaults&&j.supplyLayoutDefaults(Y,ee,J,$);for(Q in G)(j=G[Q]).supplyLayoutDefaults&&j.supplyLayoutDefaults(Y,ee,J)},f.purge=function(Y){var ee=Y._fullLayout||{};void 0!==ee._glcontainer&&(ee._glcontainer.selectAll(".gl-canvas").remove(),ee._glcontainer.remove(),ee._glcanvas=null),ee._modeBar&&ee._modeBar.destroy(),Y._transitionData&&(Y._transitionData._interruptCallbacks&&(Y._transitionData._interruptCallbacks.length=0),Y._transitionData._animationRaf&&window.cancelAnimationFrame(Y._transitionData._animationRaf)),l.clearThrottle(),l.clearResponsive(Y),delete Y.data,delete Y.layout,delete Y._fullData,delete Y._fullLayout,delete Y.calcdata,delete Y.empty,delete Y.fid,delete Y.undoqueue,delete Y.undonum,delete Y.autoplay,delete Y.changed,delete Y._promises,delete Y._redrawTimer,delete Y._hmlumcount,delete Y._hmpixcount,delete Y._transitionData,delete Y._transitioning,delete Y._initialAutoSize,delete Y._transitioningWithDuration,delete Y._dragging,delete Y._dragged,delete Y._dragdata,delete Y._hoverdata,delete Y._snapshotInProgress,delete Y._editing,delete Y._mouseDownTime,delete Y._legendMouseDownTime,Y.removeAllListeners&&Y.removeAllListeners()},f.style=function(Y){var ee,J=Y._fullLayout._visibleModules,$=[];for(ee=0;ee<J.length;ee++){var Q=J[ee];Q.style&&l.pushUnique($,Q.style)}for(ee=0;ee<$.length;ee++)$[ee](Y)},f.sanitizeMargins=function(Y){if(Y&&Y.margin){var ee,J=Y.width,$=Y.height,Q=Y.margin,j=$-(Q.t+Q.b);J-(Q.l+Q.r)<0&&(ee=(J-1)/(Q.l+Q.r),Q.l=Math.floor(ee*Q.l),Q.r=Math.floor(ee*Q.r)),j<0&&(ee=($-1)/(Q.t+Q.b),Q.t=Math.floor(ee*Q.t),Q.b=Math.floor(ee*Q.b))}},f.clearAutoMarginIds=function(Y){Y._fullLayout._pushmarginIds={}},f.allowAutoMargin=function(Y,ee){Y._fullLayout._pushmarginIds[ee]=1},f.autoMargin=function(Y,ee,J){var $=Y._fullLayout,Q=$.width,se=$.height,j=$.margin,G=l.constrain(Q-j.l-j.r,2,64),W=l.constrain(se-j.t-j.b,2,64),ie=Math.max(0,Q-G),q=Math.max(0,se-W),te=$._pushmargin,ne=$._pushmarginIds;if(!1!==j.autoexpand){if(J){var le=J.pad;if(void 0===le&&(le=Math.min(12,j.l,j.r,j.t,j.b)),ie){var ue=(J.l+J.r)/ie;ue>1&&(J.l/=ue,J.r/=ue)}if(q){var de=(J.t+J.b)/q;de>1&&(J.t/=de,J.b/=de)}te[ee]={l:{val:void 0!==J.xl?J.xl:J.x,size:J.l+le},r:{val:void 0!==J.xr?J.xr:J.x,size:J.r+le},b:{val:void 0!==J.yb?J.yb:J.y,size:J.b+le},t:{val:void 0!==J.yt?J.yt:J.y,size:J.t+le}},ne[ee]=1}else delete te[ee],delete ne[ee];if(!$._replotting)return f.doAutoMargin(Y)}},f.doAutoMargin=function(Y){var ee=Y._fullLayout,J=ee.width,$=ee.height;ee._size||(ee._size={}),R(ee);var Q=ee._size,se=ee.margin,j=l.extendFlat({},Q),G=se.l,W=se.r,ie=se.t,q=se.b,te=ee._pushmargin,ne=ee._pushmarginIds;if(!1!==ee.margin.autoexpand){for(var le in te)ne[le]||delete te[le];for(var ue in te.base={l:{val:0,size:G},r:{val:1,size:W},t:{val:1,size:ie},b:{val:0,size:q}},te){var de=te[ue].l||{},he=te[ue].b||{},be=de.val,ge=de.size,we=he.val,Ce=he.size;for(var De in te){if(b(ge)&&te[De].r){var Se=te[De].r.val,Fe=te[De].r.size;if(Se>be){var ve=(ge*Se+(Fe-J)*be)/(Se-be),Te=(Fe*(1-be)+(ge-J)*(1-Se))/(Se-be);ve+Te>G+W&&(G=ve,W=Te)}}if(b(Ce)&&te[De].t){var Le=te[De].t.val,Ee=te[De].t.size;if(Le>we){var Pe=(Ce*Le+(Ee-$)*we)/(Le-we),je=(Ee*(1-we)+(Ce-$)*(1-Le))/(Le-we);Pe+je>q+ie&&(q=Pe,ie=je)}}}}}var xt,Ge=l.constrain(J-se.l-se.r,2,64),Ke=l.constrain($-se.t-se.b,2,64),lt=Math.max(0,J-Ge),Ue=Math.max(0,$-Ke);if(lt){var $e=(G+W)/lt;$e>1&&(G/=$e,W/=$e)}if(Ue){var et=(q+ie)/Ue;et>1&&(q/=et,ie/=et)}if(Q.l=Math.round(G),Q.r=Math.round(W),Q.t=Math.round(ie),Q.b=Math.round(q),Q.p=Math.round(se.pad),Q.w=Math.round(J)-Q.l-Q.r,Q.h=Math.round($)-Q.t-Q.b,!ee._replotting&&f.didMarginChange(j,Q)){"_redrawFromAutoMarginCount"in ee?ee._redrawFromAutoMarginCount++:ee._redrawFromAutoMarginCount=1;var tt=3*(1+Object.keys(ne).length);if(ee._redrawFromAutoMarginCount<tt)return e.call("_doPlot",Y);ee._size=j,l.warn("Too many auto-margin redraws.")}xt=u.list(Y,"",!0),["_adjustTickLabelsOverflow","_hideCounterAxisInsideTickLabels"].forEach(function(Ct){for(var Ht=0;Ht<xt.length;Ht++){var zt=xt[Ht][Ct];zt&&zt()}})};var L=["l","r","t","b","p","w","h"];function I(Y,ee,J){var $=!1,se=l.syncOrAsync([f.previousPromises,function(){if(Y._transitionData)return Y._transitioning=!1,function(j){var G=Promise.resolve();if(!j)return G;for(;j.length;)G=G.then(j.shift());return G}(Y._transitionData._interruptCallbacks)},J.prepareFn,f.rehover,function(){return Y.emit("plotly_transitioning",[]),new Promise(function(j){Y._transitioning=!0,ee.duration>0&&(Y._transitioningWithDuration=!0),Y._transitionData._interruptCallbacks.push(function(){$=!0}),J.redraw&&Y._transitionData._interruptCallbacks.push(function(){return e.call("redraw",Y)}),Y._transitionData._interruptCallbacks.push(function(){Y.emit("plotly_transitioninterrupted",[])});var G=0,W=0;function ie(){return G++,function(){var q;W++,$||W!==G||(q=j,!Y._transitionData||(function(te){if(te)for(;te.length;)te.shift()}(Y._transitionData._interruptCallbacks),Promise.resolve().then(function(){if(J.redraw)return e.call("redraw",Y)}).then(function(){Y._transitioning=!1,Y._transitioningWithDuration=!1,Y.emit("plotly_transitioned",[])}).then(q)))}}J.runFn(ie),setTimeout(ie())})}],Y);return se&&se.then||(se=Promise.resolve()),se.then(function(){return Y})}f.didMarginChange=function(Y,ee){for(var J=0;J<L.length;J++){var $=L[J],Q=Y[$],se=ee[$];if(!b(Q)||Math.abs(se-Q)>1)return!0}return!1},f.graphJson=function(Y,ee,J,$,Q,se){(Q&&ee&&!Y._fullData||Q&&!ee&&!Y._fullLayout)&&f.supplyDefaults(Y);var G=Q?Y._fullLayout:Y.layout,W=(Y._transitionData||{})._frames;function ie(ne,le){if("function"==typeof ne)return le?"_function_":null;if(l.isPlainObject(ne)){var ue,de={};return Object.keys(ne).sort().forEach(function(he){if(-1===["_","["].indexOf(he.charAt(0)))if("function"!=typeof ne[he]){if("keepdata"===J){if("src"===he.substr(he.length-3))return}else if("keepstream"===J){if("string"==typeof(ue=ne[he+"src"])&&ue.indexOf(":")>0&&!l.isPlainObject(ne.stream))return}else if("keepall"!==J&&"string"==typeof(ue=ne[he+"src"])&&ue.indexOf(":")>0)return;de[he]=ie(ne[he],le)}else le&&(de[he]="_function")}),de}return Array.isArray(ne)?ne.map(function(he){return ie(he,le)}):l.isTypedArray(ne)?l.simpleMap(ne,l.identity):l.isJSDate(ne)?l.ms2DateTimeLocal(+ne):ne}var q={data:((Q?Y._fullData:Y.data)||[]).map(function(ne){var le=ie(ne);return ee&&delete le.fit,le})};if(!ee&&(q.layout=ie(G),Q)){var te=G._size;q.layout.computed={margin:{b:te.b,l:te.l,r:te.r,t:te.t}}}return W&&(q.frames=ie(W)),se&&(q.config=ie(Y._context,!0)),"object"===$?q:JSON.stringify(q)},f.modifyFrames=function(Y,ee){var J,$,Q,se=Y._transitionData._frames,j=Y._transitionData._frameHash;for(J=0;J<ee.length;J++)switch(($=ee[J]).type){case"replace":var G=(se[$.index]||{}).name,W=(Q=$.value).name;se[$.index]=j[W]=Q,W!==G&&(delete j[G],j[W]=Q);break;case"insert":j[(Q=$.value).name]=Q,se.splice($.index,0,Q);break;case"delete":delete j[(Q=se[$.index]).name],se.splice($.index,1)}return Promise.resolve()},f.computeFrame=function(Y,ee){var J,$,Q,se,j=Y._transitionData._frameHash;if(!ee)throw new Error("computeFrame must be given a string frame name");var G=j[ee.toString()];if(!G)return!1;for(var W=[G],ie=[G.name];G.baseframe&&(G=j[G.baseframe.toString()])&&-1===ie.indexOf(G.name);)W.push(G),ie.push(G.name);for(var q={};G=W.pop();)if(G.layout&&(q.layout=f.extendLayout(q.layout,G.layout)),G.data){if(q.data||(q.data=[]),!($=G.traces))for($=[],J=0;J<G.data.length;J++)$[J]=J;for(q.traces||(q.traces=[]),J=0;J<G.data.length;J++)null!=(Q=$[J])&&(-1===(se=q.traces.indexOf(Q))&&(q.traces[se=q.data.length]=Q),q.data[se]=f.extendTrace(q.data[se],G.data[J]))}return q},f.recomputeFrameHash=function(Y){for(var ee=Y._transitionData._frameHash={},J=Y._transitionData._frames,$=0;$<J.length;$++){var Q=J[$];Q&&Q.name&&(ee[Q.name]=Q)}},f.extendObjectWithContainers=function(Y,ee,J){var $,Q,se,j,G,W,ie,q=l.extendDeepNoArrays({},ee||{}),te=l.expandObjectPaths(q),ne={};if(J&&J.length)for(se=0;se<J.length;se++)void 0===(Q=($=l.nestedProperty(te,J[se])).get())?l.nestedProperty(ne,J[se]).set(null):($.set(null),l.nestedProperty(ne,J[se]).set(Q));if(Y=l.extendDeepNoArrays(Y||{},te),J&&J.length)for(se=0;se<J.length;se++)if(W=l.nestedProperty(ne,J[se]).get()){for(ie=(G=l.nestedProperty(Y,J[se])).get(),Array.isArray(ie)||G.set(ie=[]),j=0;j<W.length;j++){var le=W[j];ie[j]=null===le?null:f.extendObjectWithContainers(ie[j],le)}G.set(ie)}return Y},f.dataArrayContainers=["transforms","dimensions"],f.layoutArrayContainers=e.layoutArrayContainers,f.extendTrace=function(Y,ee){return f.extendObjectWithContainers(Y,ee,f.dataArrayContainers)},f.extendLayout=function(Y,ee){return f.extendObjectWithContainers(Y,ee,f.layoutArrayContainers)},f.transition=function(Y,ee,J,$,Q,se){var j={redraw:Q.redraw},G={},W=[];return j.prepareFn=function(){for(var ie=Array.isArray(ee)?ee.length:0,q=$.slice(0,ie),te=0;te<q.length;te++){var ne=q[te],le=Y._fullData[ne]._module;if(le){if(le.animatable){var ue=le.basePlotModule.name;G[ue]||(G[ue]=[]),G[ue].push(ne)}Y.data[q[te]]=f.extendTrace(Y.data[q[te]],ee[te])}}var de=l.expandObjectPaths(l.extendDeepNoArrays({},J)),he=/^[xy]axis[0-9]*$/;for(var be in de)he.test(be)&&delete de[be].range;f.extendLayout(Y.layout,de),delete Y.calcdata,f.supplyDefaults(Y),f.doCalcdata(Y);var ge=l.expandObjectPaths(J);if(ge){var we=Y._fullLayout._plots;for(var Ce in we){var De=we[Ce],Se=De.xaxis,Fe=De.yaxis,ve=Se.range.slice(),Te=Fe.range.slice(),Le=null,Ee=null,Pe=null,je=null;Array.isArray(ge[Se._name+".range"])?Le=ge[Se._name+".range"].slice():Array.isArray((ge[Se._name]||{}).range)&&(Le=ge[Se._name].range.slice()),Array.isArray(ge[Fe._name+".range"])?Ee=ge[Fe._name+".range"].slice():Array.isArray((ge[Fe._name]||{}).range)&&(Ee=ge[Fe._name].range.slice()),ve&&Le&&(Se.r2l(ve[0])!==Se.r2l(Le[0])||Se.r2l(ve[1])!==Se.r2l(Le[1]))&&(Pe={xr0:ve,xr1:Le}),Te&&Ee&&(Fe.r2l(Te[0])!==Fe.r2l(Ee[0])||Fe.r2l(Te[1])!==Fe.r2l(Ee[1]))&&(je={yr0:Te,yr1:Ee}),(Pe||je)&&W.push(l.extendFlat({plotinfo:De},Pe,je))}}return Promise.resolve()},j.runFn=function(ie){var q,te,ne=Y._fullLayout._basePlotModules,le=W.length;if(J)for(te=0;te<ne.length;te++)ne[te].transitionAxes&&ne[te].transitionAxes(Y,W,se,ie);for(var ue in le?((q=l.extendFlat({},se)).duration=0,delete G.cartesian):q=se,G){var de=G[ue];Y._fullData[de[0]]._module.basePlotModule.plot(Y,de,q,ie)}},I(Y,se,j)},f.transitionFromReact=function(Y,ee,J,$){var Q=Y._fullLayout,se=Q.transition,j={},G=[];return j.prepareFn=function(){var W=Q._plots;for(var ie in j.redraw=!1,"some"===ee.anim&&(j.redraw=!0),"some"===J.anim&&(j.redraw=!0),W){var q=W[ie],te=q.xaxis,ne=q.yaxis,le=$[te._name].range.slice(),ue=$[ne._name].range.slice(),de=te.range.slice(),he=ne.range.slice();te.setScale(),ne.setScale();var be=null,ge=null;te.r2l(le[0])===te.r2l(de[0])&&te.r2l(le[1])===te.r2l(de[1])||(be={xr0:le,xr1:de}),ne.r2l(ue[0])===ne.r2l(he[0])&&ne.r2l(ue[1])===ne.r2l(he[1])||(ge={yr0:ue,yr1:he}),(be||ge)&&G.push(l.extendFlat({plotinfo:q},be,ge))}return Promise.resolve()},j.runFn=function(W){for(var ie,q,te,ne=Y._fullData,le=Y._fullLayout._basePlotModules,ue=[],de=0;de<ne.length;de++)ue.push(de);function he(){if(Y._fullLayout)for(var ge=0;ge<le.length;ge++)le[ge].transitionAxes&&le[ge].transitionAxes(Y,G,ie,W)}function be(){if(Y._fullLayout)for(var ge=0;ge<le.length;ge++)le[ge].plot(Y,te,q,W)}G.length&&ee.anim?"traces first"===se.ordering?(ie=l.extendFlat({},se,{duration:0}),te=ue,q=se,setTimeout(he,se.duration),be()):(ie=se,te=null,q=l.extendFlat({},se,{duration:0}),setTimeout(be,ie.duration),he()):G.length?(ie=se,he()):ee.anim&&(te=ue,q=se,be())},I(Y,se,j)},f.doCalcdata=function(Y,ee){var J,$,Q,se,j=u.list(Y),G=Y._fullData,W=Y._fullLayout,ie=new Array(G.length),q=(Y.calcdata||[]).slice();for(Y.calcdata=ie,W._numBoxes=0,W._numViolins=0,W._violinScaleGroupStats={},Y._hmpixcount=0,Y._hmlumcount=0,W._piecolormap={},W._sunburstcolormap={},W._treemapcolormap={},W._iciclecolormap={},W._funnelareacolormap={},Q=0;Q<G.length;Q++)Array.isArray(ee)&&-1===ee.indexOf(Q)&&(ie[Q]=q[Q]);for(Q=0;Q<G.length;Q++)(J=G[Q])._arrayAttrs=o.findArrayAttributes(J),J._extremes={};var te=W._subplots.polar||[];for(Q=0;Q<te.length;Q++)j.push(W[te[Q]].radialaxis,W[te[Q]].angularaxis);for(var ne in W._colorAxes){var le=W[ne];!1!==le.cauto&&(delete le.cmin,delete le.cmax)}var ue=!1;function de(ge){if($=(J=G[ge])._module,!0===J.visible&&J.transforms){if($&&$.calc){var we=$.calc(Y,J);we[0]&&we[0].t&&we[0].t._scene&&delete we[0].t._scene.dirty}for(se=0;se<J.transforms.length;se++){var Ce=J.transforms[se];($=w[Ce.type])&&$.calcTransform&&(J._hasCalcTransform=!0,ue=!0,$.calcTransform(Y,J,Ce))}}}function he(ge,we){if(!!($=(J=G[ge])._module).isContainer===we){var Ce=[];if(!0===J.visible&&0!==J._length){delete J._indexToPoints;var De=J.transforms||[];for(se=De.length-1;se>=0;se--)if(De[se].enabled){J._indexToPoints=De[se]._indexToPoints;break}$&&$.calc&&(Ce=$.calc(Y,J))}Array.isArray(Ce)&&Ce[0]||(Ce=[{x:d,y:d}]),Ce[0].t||(Ce[0].t={}),Ce[0].trace=J,ie[ge]=Ce}}for(V(j,G,W),Q=0;Q<G.length;Q++)he(Q,!0);for(Q=0;Q<G.length;Q++)de(Q);for(ue&&V(j,G,W),Q=0;Q<G.length;Q++)he(Q,!0);for(Q=0;Q<G.length;Q++)he(Q,!1);Z(Y);var be=function(ge,we){var Ce,De,Se,Fe,ve,Te=[];function Le(it,Ie,ze){var Ve=Ie._id.charAt(0);if("histogram2dcontour"===it){var Be=Ie._counterAxes[0],at=u.getFromId(we,Be),gt="x"===Ve||"x"===Be&&"category"===at.type,wt="y"===Ve||"y"===Be&&"category"===at.type;return function(_t,Rt){return 0===_t||0===Rt||gt&&_t===ze[Rt].length-1||wt&&Rt===ze.length-1?-1:("y"===Ve?Rt:_t)-1}}return function(_t,Rt){return"y"===Ve?Rt:_t}}var Ee={min:function(it){return l.aggNums(Math.min,null,it)},max:function(it){return l.aggNums(Math.max,null,it)},sum:function(it){return l.aggNums(function(Ie,ze){return Ie+ze},null,it)},total:function(it){return l.aggNums(function(Ie,ze){return Ie+ze},null,it)},mean:function(it){return l.mean(it)},median:function(it){return l.median(it)}};for(Ce=0;Ce<ge.length;Ce++){var Pe=ge[Ce];if("category"===Pe.type){var je=Pe.categoryorder.match(B);if(je){var Ge=je[1],Ke=je[2],lt=Pe._id.charAt(0),Ue="x"===lt,$e=[];for(De=0;De<Pe._categories.length;De++)$e.push([Pe._categories[De],[]]);for(De=0;De<Pe._traceIndices.length;De++){var et=Pe._traceIndices[De],tt=we._fullData[et];if(!0===tt.visible){var ct=tt.type;e.traceIs(tt,"histogram")&&(delete tt._xautoBinFinished,delete tt._yautoBinFinished);var xt="splom"===ct,Ct="scattergl"===ct,Ht=we.calcdata[et];for(Se=0;Se<Ht.length;Se++){var zt,ht,ut=Ht[Se];if(xt){var Ot=tt._axesDim[Pe._id];if(!Ue){var tn=tt._diag[Ot][0];tn&&(Pe=we._fullLayout[u.id2name(tn)])}var un=ut.trace.dimensions[Ot].values;for(Fe=0;Fe<un.length;Fe++)for(zt=Pe._categoriesMap[un[Fe]],ve=0;ve<ut.trace.dimensions.length;ve++)ve!==Ot&&$e[zt][1].push(ut.trace.dimensions[ve].values[Fe])}else if(Ct){for(Fe=0;Fe<ut.t.x.length;Fe++)Ue?(zt=ut.t.x[Fe],ht=ut.t.y[Fe]):(zt=ut.t.y[Fe],ht=ut.t.x[Fe]),$e[zt][1].push(ht);ut.t&&ut.t._scene&&delete ut.t._scene.dirty}else if(ut.hasOwnProperty("z")){var Qe=Le(tt.type,Pe,ht=ut.z);for(Fe=0;Fe<ht.length;Fe++)for(ve=0;ve<ht[Fe].length;ve++)(zt=Qe(ve,Fe))+1&&$e[zt][1].push(ht[Fe][ve])}else for(void 0===(zt=ut.p)&&(zt=ut[lt]),void 0===(ht=ut.s)&&(ht=ut.v),void 0===ht&&(ht=Ue?ut.y:ut.x),Array.isArray(ht)||(ht=void 0===ht?[]:[ht]),Fe=0;Fe<ht.length;Fe++)$e[zt][1].push(ht[Fe])}}}Pe._categoriesValue=$e;var qe=[];for(De=0;De<$e.length;De++)qe.push([$e[De][0],Ee[Ge]($e[De][1])]);qe.sort(function(it,Ie){return it[1]-Ie[1]}),Pe._categoriesAggregatedValue=qe,Pe._initialCategories=qe.map(function(it){return it[0]}),"descending"===Ke&&Pe._initialCategories.reverse(),Te=Te.concat(Pe.sortByInitialCategories())}}}return Te}(j,Y);if(be.length){for(W._numBoxes=0,W._numViolins=0,Q=0;Q<be.length;Q++)he(be[Q],!0);for(Q=0;Q<be.length;Q++)he(be[Q],!1);Z(Y)}e.getComponentMethod("fx","calc")(Y),e.getComponentMethod("errorbars","calc")(Y)};var B=/(total|sum|min|max|mean|median) (ascending|descending)/;function V(Y,ee,J){var $={};function Q(W){W.clearCalc(),"multicategory"===W.type&&W.setupMultiCategory(ee),$[W._id]=1}l.simpleMap(Y,Q);for(var se=J._axisMatchGroups||[],j=0;j<se.length;j++)for(var G in se[j])$[G]||Q(J[u.id2name(G)])}function Z(Y){var ee,J,$,Q=Y._fullLayout,se=Q._visibleModules,j={};for(J=0;J<se.length;J++){var G=se[J],W=G.crossTraceCalc;if(W){var ie=G.basePlotModule.name;j[ie]?l.pushUnique(j[ie],W):j[ie]=[W]}}for($ in j){var q=j[$],te=Q._subplots[$];if(Array.isArray(te))for(ee=0;ee<te.length;ee++){var ne=te[ee],le="cartesian"===$?Q._plots[ne]:Q[ne];for(J=0;J<q.length;J++)q[J](Y,le,ne)}else for(J=0;J<q.length;J++)q[J](Y)}}f.rehover=function(Y){Y._fullLayout._rehover&&Y._fullLayout._rehover()},f.redrag=function(Y){Y._fullLayout._redrag&&Y._fullLayout._redrag()},f.generalUpdatePerTraceModule=function(Y,ee,J,$){var Q,se=ee.traceHash,j={};for(Q=0;Q<J.length;Q++){var G=J[Q],W=G[0].trace;W.visible&&(j[W.type]=j[W.type]||[],j[W.type].push(G))}for(var ie in se)if(!j[ie]){var q=se[ie][0];q[0].trace.visible=!1,j[ie]=[q]}for(var te in j){var ne=j[te];ne[0][0].trace._module.plot(Y,ee,l.filterVisible(ne),$)}ee.traceHash=j},f.plotBasePlot=function(Y,ee,J,$,Q){var se=e.getModule(Y),j=p(ee.calcdata,se)[0];se.plot(ee,j,$,Q)},f.cleanBasePlot=function(Y,ee,J,$,Q){var se=Q._has&&Q._has(Y),j=J._has&&J._has(Y);se&&!j&&Q["_"+Y+"layer"].selectAll("g.trace").remove()}},{"../components/color":366,"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plot_api/plot_template":543,"../plots/get_data":593,"../registry":638,"./animation_attributes":548,"./attributes":550,"./cartesian/axis_ids":558,"./cartesian/handle_outline":565,"./command":583,"./font_attributes":585,"./frame_attributes":586,"./layout_attributes":610,"@plotly/d3":58,"d3-format":112,"d3-time-format":120,"fast-isnumeric":190}],620:[function(_,oe,ae){"use strict";oe.exports={attr:"subplot",name:"polar",axisNames:["angularaxis","radialaxis"],axisName2dataArray:{angularaxis:"theta",radialaxis:"r"},layerNames:["draglayer","plotbg","backplot","angular-grid","radial-grid","frontplot","angular-line","radial-line","angular-axis","radial-axis"],radialDragBoxSize:50,angularDragBoxSize:30,cornerLen:25,cornerHalfWidth:2,MINDRAG:8,MINZOOM:20,OFFEDGE:20}},{}],621:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../lib/polygon").tester,T=m.findIndexOfMin,b=m.isAngleInsideSector,e=m.angleDelta,o=m.angleDist;function a(u,s,c,h){var p,v,g=h[0],f=h[1],w=i(Math.sin(s)-Math.sin(u)),y=i(Math.cos(s)-Math.cos(u)),M=Math.tan(c),A=i(1/M),k=w/y,C=f-k*g;return A?w&&y?v=M*(p=C/(M-k)):y?(p=f*A,v=f):(p=g,v=g*M):w&&y?(p=0,v=C):y?(p=0,v=f):p=v=NaN,[p,v]}function l(u,s,c,h){return m.isFullCircle([s,c])?function(p,v){var g,f=v.length,w=new Array(f+1);for(g=0;g<f;g++){var y=v[g];w[g]=[p*Math.cos(y),p*Math.sin(y)]}return w[g]=w[0].slice(),w}(u,h):function(p,v,g,f){var w,y,M=f.length,A=[];function k(V){return[p*Math.cos(V),p*Math.sin(V)]}function C(V,Z,Y){return a(V,Z,Y,k(V))}function P(V){return m.mod(V,M)}function D(V){return b(V,[v,g])}var F=T(f,function(V){return D(V)?o(V,v):1/0}),R=C(f[F],f[P(F-1)],v);for(A.push(R),w=F,y=0;y<M;w++,y++){var L=f[P(w)];if(!D(L))break;A.push(k(L))}var I=T(f,function(V){return D(V)?o(V,g):1/0}),B=C(f[I],f[P(I+1)],g);return A.push(B),A.push([0,0]),A.push(A[0].slice()),A}(u,s,c,h)}function i(u){return Math.abs(u)>1e-10?u:0}function d(u,s,c){s=s||0,c=c||0;for(var h=u.length,p=new Array(h),v=0;v<h;v++){var g=u[v];p[v]=[s+g[0],c-g[1]]}return p}oe.exports={isPtInsidePolygon:function(u,s,c,h,p){if(!b(s,h))return!1;var v,g;c[0]<c[1]?(v=c[0],g=c[1]):(v=c[1],g=c[0]);var f=x(l(v,h[0],h[1],p)),w=x(l(g,h[0],h[1],p)),y=[u*Math.cos(s),u*Math.sin(s)];return w.contains(y)&&!f.contains(y)},findPolygonOffset:function(u,s,c,h){for(var p=1/0,v=1/0,g=l(u,s,c,h),f=0;f<g.length;f++){var w=g[f];p=Math.min(p,w[0]),v=Math.min(v,-w[1])}return[p,v]},findEnclosingVertexAngles:function(u,s){var c=T(s,function(p){var v=e(p,u);return v>0?v:1/0}),h=m.mod(c+1,s.length);return[s[c],s[h]]},findIntersectionXY:a,findXYatLength:function(u,s,c,h){var p=-s*c,v=s*s+1,g=2*(s*p-c),w=Math.sqrt(g*g-4*v*(p*p+c*c-u*u)),y=(-g+w)/(2*v),M=(-g-w)/(2*v);return[[y,s*y+p+h],[M,s*M+p+h]]},clampTiny:i,pathPolygon:function(u,s,c,h,p,v){return"M"+d(l(u,s,c,h),p,v).join("L")},pathPolygonAnnulus:function(u,s,c,h,p,v,g){var f,w;u<s?(f=u,w=s):(f=s,w=u);var y=d(l(f,c,h,p),v,g);return"M"+d(l(w,c,h,p),v,g).reverse().join("L")+"M"+y.join("L")}}},{"../../lib":503,"../../lib/polygon":515}],622:[function(_,oe,ae){"use strict";var m=_("../get_data").getSubplotCalcData,x=_("../../lib").counterRegex,T=_("./polar"),b=_("./constants"),e=b.attr,o=b.name,a=x(o),l={};l[e]={valType:"subplotid",dflt:o,editType:"calc"},oe.exports={attr:e,name:o,idRoot:o,idRegex:a,attrRegex:a,attributes:l,layoutAttributes:_("./layout_attributes"),supplyLayoutDefaults:_("./layout_defaults"),plot:function(i){for(var d=i._fullLayout,u=i.calcdata,s=d._subplots[o],c=0;c<s.length;c++){var h=s[c],p=m(u,o,h),v=d[h]._subplot;v||(v=T(i,h),d[h]._subplot=v),v.plot(p,d,i._promises)}},clean:function(i,d,u,s){for(var c=s._subplots[o]||[],h=s._has&&s._has("gl"),p=d._has&&d._has("gl"),v=h&&!p,g=0;g<c.length;g++){var f=c[g],w=s[f]._subplot;if(!d[f]&&w)for(var y in w.framework.remove(),w.layers["radial-axis-title"].remove(),w.clipPaths)w.clipPaths[y].remove();v&&w._scene&&(w._scene.destroy(),w._scene=null)}},toSVG:_("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"./constants":620,"./layout_attributes":623,"./layout_defaults":624,"./polar":625}],623:[function(_,oe,ae){"use strict";var m=_("../../components/color/attributes"),x=_("../cartesian/layout_attributes"),T=_("../domain").attributes,b=_("../../lib").extendFlat,e=_("../../plot_api/edit_types").overrideAll,o=e({color:x.color,showline:b({},x.showline,{dflt:!0}),linecolor:x.linecolor,linewidth:x.linewidth,showgrid:b({},x.showgrid,{dflt:!0}),gridcolor:x.gridcolor,gridwidth:x.gridwidth},"plot","from-root"),a=e({tickmode:x.tickmode,nticks:x.nticks,tick0:x.tick0,dtick:x.dtick,tickvals:x.tickvals,ticktext:x.ticktext,ticks:x.ticks,ticklen:x.ticklen,tickwidth:x.tickwidth,tickcolor:x.tickcolor,ticklabelstep:x.ticklabelstep,showticklabels:x.showticklabels,showtickprefix:x.showtickprefix,tickprefix:x.tickprefix,showticksuffix:x.showticksuffix,ticksuffix:x.ticksuffix,showexponent:x.showexponent,exponentformat:x.exponentformat,minexponent:x.minexponent,separatethousands:x.separatethousands,tickfont:x.tickfont,tickangle:x.tickangle,tickformat:x.tickformat,tickformatstops:x.tickformatstops,layer:x.layer},"plot","from-root"),l={visible:b({},x.visible,{dflt:!0}),type:b({},x.type,{values:["-","linear","log","date","category"]}),autotypenumbers:x.autotypenumbers,autorange:b({},x.autorange,{editType:"plot"}),rangemode:{valType:"enumerated",values:["tozero","nonnegative","normal"],dflt:"tozero",editType:"calc"},range:b({},x.range,{items:[{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}},{valType:"any",editType:"plot",impliedEdits:{"^autorange":!1}}],editType:"plot"}),categoryorder:x.categoryorder,categoryarray:x.categoryarray,angle:{valType:"angle",editType:"plot"},side:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"clockwise",editType:"plot"},title:{text:b({},x.title.text,{editType:"plot",dflt:""}),font:b({},x.title.font,{editType:"plot"}),editType:"plot"},hoverformat:x.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc",_deprecated:{title:x._deprecated.title,titlefont:x._deprecated.titlefont}};b(l,o,a);var i={visible:b({},x.visible,{dflt:!0}),type:{valType:"enumerated",values:["-","linear","category"],dflt:"-",editType:"calc",_noTemplating:!0},autotypenumbers:x.autotypenumbers,categoryorder:x.categoryorder,categoryarray:x.categoryarray,thetaunit:{valType:"enumerated",values:["radians","degrees"],dflt:"degrees",editType:"calc"},period:{valType:"number",editType:"calc",min:0},direction:{valType:"enumerated",values:["counterclockwise","clockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"angle",editType:"calc"},hoverformat:x.hoverformat,uirevision:{valType:"any",editType:"none"},editType:"calc"};b(i,o,a),oe.exports={domain:T({name:"polar",editType:"plot"}),sector:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],dflt:[0,360],editType:"plot"},hole:{valType:"number",min:0,max:1,dflt:0,editType:"plot"},bgcolor:{valType:"color",editType:"plot",dflt:m.background},radialaxis:l,angularaxis:i,gridshape:{valType:"enumerated",values:["circular","linear"],dflt:"circular",editType:"plot"},uirevision:{valType:"any",editType:"none"},editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],624:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../components/color"),T=_("../../plot_api/plot_template"),b=_("../subplot_defaults"),e=_("../get_data").getSubplotData,o=_("../cartesian/tick_value_defaults"),a=_("../cartesian/tick_mark_defaults"),l=_("../cartesian/tick_label_defaults"),i=_("../cartesian/prefix_suffix_defaults"),d=_("../cartesian/category_order_defaults"),u=_("../cartesian/line_grid_defaults"),s=_("../cartesian/axis_autotype"),c=_("./layout_attributes"),h=_("./set_convert"),p=_("./constants"),v=p.axisNames;function g(w,y,M,A){var k=M("bgcolor");A.bgColor=x.combine(k,A.paper_bgcolor);var C=M("sector");M("hole");var P,D=e(A.fullData,p.name,A.id),F=A.layoutOut;function R(ie,q){return M(P+"."+ie,q)}for(var L=0;L<v.length;L++){m.isPlainObject(w[P=v[L]])||(w[P]={});var I=w[P],B=T.newContainer(y,P);B._id=B._name=P,B._attr=A.id+"."+P,B._traceIndices=D.map(function(ie){return ie._expandedIndex});var V=p.axisName2dataArray[P],Z=f(I,B,R,D,V,A);d(I,B,R,{axData:D,dataAttr:V});var Y=R("visible");switch(h(B,y,F),R("uirevision",y.uirevision),B._m=1,P){case"radialaxis":var ee=R("autorange",!B.isValidRange(I.range));I.autorange=ee,!ee||"linear"!==Z&&"-"!==Z||R("rangemode"),"reversed"===ee&&(B._m=-1),R("range"),B.cleanRange("range",{dfltRange:[0,1]});break;case"angularaxis":if("date"===Z){m.log("Polar plots do not support date angular axes yet.");for(var J=0;J<D.length;J++)D[J].visible=!1;Z=I.type=B.type="linear"}R("linear"===Z?"thetaunit":"period");var $=R("direction");R("rotation",{counterclockwise:0,clockwise:90}[$])}if(i(I,B,R,B.type,{tickSuffixDflt:"degrees"===B.thetaunit?"\xb0":void 0}),Y){var Q,se,j,G,W=A.font||{};se=(Q=R("color"))===I.color?Q:W.color,j=W.size,G=W.family,o(I,B,R,B.type),l(I,B,R,B.type,{font:{color:se,size:j,family:G}}),a(I,B,R,{outerTicks:!0}),u(I,B,R,{dfltColor:Q,bgColor:A.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:c[P]}),R("layer"),"radialaxis"===P&&(R("side"),R("angle",C[0]),R("title.text"),m.coerceFont(R,"title.font",{color:se,size:m.bigFont(j),family:G}))}"category"!==Z&&R("hoverformat"),B._input=I}"category"===y.angularaxis.type&&M("gridshape")}function f(w,y,M,A,k,C){var P=M("autotypenumbers",C.autotypenumbersDflt);if("-"===M("type")){for(var D,F=0;F<A.length;F++)if(A[F].visible){D=A[F];break}D&&D[k]&&(y.type=s(D[k],"gregorian",{noMultiCategory:!0,autotypenumbers:P})),"-"===y.type?y.type="linear":w.type=y.type}return y.type}oe.exports=function(w,y,M){b(w,y,M,{type:p.name,attributes:c,handleDefaults:g,font:y.font,autotypenumbersDflt:y.autotypenumbers,paper_bgcolor:y.paper_bgcolor,fullData:M,layoutOut:y})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/axis_autotype":555,"../cartesian/category_order_defaults":559,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../get_data":593,"../subplot_defaults":632,"./constants":620,"./layout_attributes":623,"./set_convert":626}],625:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("tinycolor2"),T=_("../../registry"),b=_("../../lib"),e=b.strRotate,o=b.strTranslate,a=_("../../components/color"),l=_("../../components/drawing"),i=_("../plots"),d=_("../../plots/cartesian/axes"),u=_("../cartesian/set_convert"),s=_("./set_convert"),c=_("../cartesian/autorange").doAutoRange,h=_("../cartesian/dragbox"),p=_("../../components/dragelement"),v=_("../../components/fx"),g=_("../../components/titles"),f=_("../cartesian/select").prepSelect,w=_("../cartesian/select").selectOnClick,y=_("../cartesian/select").clearSelect,M=_("../../lib/setcursor"),A=_("../../lib/clear_gl_canvases"),k=_("../../plot_api/subroutines").redrawReglTraces,C=_("../../constants/alignment").MID_SHIFT,P=_("./constants"),D=_("./helpers"),F=_("../smith/helpers"),R=F.smith,L=F.reactanceArc,I=F.resistanceArc,B=F.smithTransform,V=b._,Z=b.mod,Y=b.deg2rad,ee=b.rad2deg;function J(G,W,ie){this.isSmith=ie||!1,this.id=W,this.gd=G,this._hasClipOnAxisFalse=null,this.vangles=null,this.radialAxisAngle=null,this.traceHash={},this.layers={},this.clipPaths={},this.clipIds={},this.viewInitial={};var q=G._fullLayout;this.clipIds.forTraces="clip"+q._uid+W+"-for-traces",this.clipPaths.forTraces=q._clips.append("clipPath").attr("id",this.clipIds.forTraces),this.clipPaths.forTraces.append("path"),this.framework=q["_"+(ie?"smith":"polar")+"layer"].append("g").attr("class",W),this.getHole=function(ne){return this.isSmith?0:ne.hole},this.getSector=function(ne){return this.isSmith?[0,360]:ne.sector},this.getRadial=function(ne){return this.isSmith?ne.realaxis:ne.radialaxis},this.getAngular=function(ne){return this.isSmith?ne.imaginaryaxis:ne.angularaxis},ie||(this.radialTickLayout=null,this.angularTickLayout=null)}var $=J.prototype;function Q(G){var W=G.ticks+String(G.ticklen)+String(G.showticklabels);return"side"in G&&(W+=G.side),W}function se(G,W){return W[b.findIndexOfMin(W,function(ie){return b.angleDist(G,ie)})]}function j(G,W,ie){return W?(G.attr("display",null),G.attr(ie)):G&&G.attr("display","none"),G}oe.exports=function(G,W,ie){return new J(G,W,ie)},$.plot=function(G,W){for(var ie=W[this.id],q=!1,te=0;te<G.length;te++)if(!1===G[te][0].trace.cliponaxis){q=!0;break}this._hasClipOnAxisFalse=q,this.updateLayers(W,ie),this.updateLayout(W,ie),i.generalUpdatePerTraceModule(this.gd,this,G,ie),this.updateFx(W,ie),this.isSmith&&(delete ie.realaxis.range,delete ie.imaginaryaxis.range)},$.updateLayers=function(G,W){var ie=this.isSmith,q=this.layers,te=this.getRadial(W),ne=this.getAngular(W),le=P.layerNames,ue=le.indexOf("frontplot"),de=le.slice(0,ue),he="below traces"===ne.layer,be="below traces"===te.layer;he&&de.push("angular-line"),be&&de.push("radial-line"),he&&de.push("angular-axis"),be&&de.push("radial-axis"),de.push("frontplot"),he||de.push("angular-line"),be||de.push("radial-line"),he||de.push("angular-axis"),be||de.push("radial-axis");var ge=(ie?"smith":"polar")+"sublayer",we=this.framework.selectAll("."+ge).data(de,String);we.enter().append("g").attr("class",function(Ce){return ge+" "+Ce}).each(function(Ce){var De=q[Ce]=m.select(this);switch(Ce){case"frontplot":ie||De.append("g").classed("barlayer",!0),De.append("g").classed("scatterlayer",!0);break;case"backplot":De.append("g").classed("maplayer",!0);break;case"plotbg":q.bg=De.append("path");break;case"radial-grid":case"angular-grid":De.style("fill","none");break;case"radial-line":De.append("line").style("fill","none");break;case"angular-line":De.append("path").style("fill","none")}}),we.order()},$.updateLayout=function(G,W){var ie=this.layers,q=G._size,te=this.getRadial(W),ne=this.getAngular(W),le=W.domain.x,ue=W.domain.y;this.xOffset=q.l+q.w*le[0],this.yOffset=q.t+q.h*(1-ue[1]);var de=this.xLength=q.w*(le[1]-le[0]),he=this.yLength=q.h*(ue[1]-ue[0]),be=this.getSector(W);this.sectorInRad=be.map(Y);var ge,we,Ce,De,Se,Ct,ut,Ot,tn,un,Ze,Qe,qe,it,Ie,Fe=this.sectorBBox=(tn=(Ct=be)[1]-(Ot=Ct[0]),Ze=(un=Z(Ot,360))+tn,Qe=Math.cos(Y(un)),qe=Math.sin(Y(un)),it=Math.cos(Y(Ze)),Ie=Math.sin(Y(Ze)),ut=un<=90&&Ze>=90||un>90&&Ze>=450?1:qe<=0&&Ie<=0?0:Math.max(qe,Ie),[un<=180&&Ze>=180||un>180&&Ze>=540?-1:Qe>=0&&it>=0?0:Math.min(Qe,it),un<=270&&Ze>=270||un>270&&Ze>=630?-1:qe>=0&&Ie>=0?0:Math.min(qe,Ie),Ze>=360?1:Qe<=0&&it<=0?0:Math.max(Qe,it),ut]),ve=Fe[2]-Fe[0],Le=he/de,Ee=Math.abs((Fe[3]-Fe[1])/ve);Le>Ee?(ge=de,Se=(he-(we=de*Ee))/q.h/2,Ce=[le[0],le[1]],De=[ue[0]+Se,ue[1]-Se]):(we=he,Se=(de-(ge=he/Ee))/q.w/2,Ce=[le[0]+Se,le[1]-Se],De=[ue[0],ue[1]]),this.xLength2=ge,this.yLength2=we,this.xDomain2=Ce,this.yDomain2=De;var Pe,je=this.xOffset2=q.l+q.w*Ce[0],Ge=this.yOffset2=q.t+q.h*(1-De[1]),Ke=this.radius=ge/ve,lt=this.innerRadius=this.getHole(W)*Ke,Ue=this.cx=je-Ke*Fe[0],$e=this.cy=Ge+Ke*Fe[3],et=this.cxx=Ue-je,tt=this.cyy=$e-Ge,ct=te.side;"counterclockwise"===ct?(Pe=ct,ct="top"):"clockwise"===ct&&(Pe=ct,ct="bottom"),this.radialAxis=this.mockAxis(G,W,te,{_id:"x",side:ct,_trueSide:Pe,domain:[lt/q.w,Ke/q.w]}),this.angularAxis=this.mockAxis(G,W,ne,{side:"right",domain:[0,Math.PI],autorange:!1}),this.doAutoRange(G,W),this.updateAngularAxis(G,W),this.updateRadialAxis(G,W),this.updateRadialAxisTitle(G,W),this.xaxis=this.mockCartesianAxis(G,W,{_id:"x",domain:Ce}),this.yaxis=this.mockCartesianAxis(G,W,{_id:"y",domain:De});var xt=this.pathSubplot();this.clipPaths.forTraces.select("path").attr("d",xt).attr("transform",o(et,tt)),ie.frontplot.attr("transform",o(je,Ge)).call(l.setClipUrl,this._hasClipOnAxisFalse?null:this.clipIds.forTraces,this.gd),ie.bg.attr("d",xt).attr("transform",o(Ue,$e)).call(a.fill,W.bgcolor)},$.mockAxis=function(G,W,ie,q){var te=b.extendFlat({},ie,q);return s(te,W,G),te},$.mockCartesianAxis=function(G,W,ie){var q=this,te=q.isSmith,ne=ie._id,le=b.extendFlat({type:"linear"},ie);u(le,G);var ue={x:[0,2],y:[1,3]};return le.setRange=function(){var de=q.sectorBBox,he=ue[ne],be=q.radialAxis._rl,ge=(be[1]-be[0])/(1-q.getHole(W));le.range=[de[he[0]]*ge,de[he[1]]*ge]},le.isPtWithinRange="x"!==ne||te?function(){return!0}:function(de){return q.isPtInside(de)},le.setRange(),le.setScale(),le},$.doAutoRange=function(G,W){var ie=this.gd,q=this.radialAxis,te=this.getRadial(W);c(ie,q);var ne=q.range;te.range=ne.slice(),te._input.range=ne.slice(),q._rl=[q.r2l(ne[0],null,"gregorian"),q.r2l(ne[1],null,"gregorian")]},$.updateRadialAxis=function(G,W){var ie=this,q=ie.gd,te=ie.layers,ne=ie.radius,le=ie.innerRadius,ue=ie.cx,de=ie.cy,he=ie.getRadial(W),be=Z(ie.getSector(W)[0],360),ge=ie.radialAxis,we=le<ne,Ce=ie.isSmith;Ce||(ie.fillViewInitialKey("radialaxis.angle",he.angle),ie.fillViewInitialKey("radialaxis.range",ge.range.slice()),ge.setGeometry()),"auto"===ge.tickangle&&be>90&&be<=270&&(ge.tickangle=180);var De=Ce?function(Ke){var lt=B(ie,R([Ke.x,0]));return o(lt[0]-ue,lt[1]-de)}:function(Ke){return o(ge.l2p(Ke.x)+le,0)},Se=Ce?function(Ke){return I(ie,Ke.x,-1/0,1/0)}:function(Ke){return ie.pathArc(ge.r2p(Ke.x)+le)},Fe=Q(he);if(ie.radialTickLayout!==Fe&&(te["radial-axis"].selectAll(".xtick").remove(),ie.radialTickLayout=Fe),we){ge.setScale();var ve=0,Te=Ce?(ge.tickvals||[]).filter(function(Ke){return Ke>=0}).map(function(Ke){return d.tickText(ge,Ke,!0,!1)}):d.calcTicks(ge),Le=Ce?Te:d.clipEnds(ge,Te),Ee=d.getTickSigns(ge)[2];Ce&&(("top"===ge.ticks&&"bottom"===ge.side||"bottom"===ge.ticks&&"top"===ge.side)&&(Ee=-Ee),"top"===ge.ticks&&"top"===ge.side&&(ve=-ge.ticklen),"bottom"===ge.ticks&&"bottom"===ge.side&&(ve=ge.ticklen)),d.drawTicks(q,ge,{vals:Te,layer:te["radial-axis"],path:d.makeTickPath(ge,0,Ee),transFn:De,crisp:!1}),d.drawGrid(q,ge,{vals:Le,layer:te["radial-grid"],path:Se,transFn:b.noop,crisp:!1}),d.drawLabels(q,ge,{vals:Te,layer:te["radial-axis"],transFn:De,labelFns:d.makeLabelFns(ge,ve)})}var Pe=ie.radialAxisAngle=ie.vangles?ee(se(Y(he.angle),ie.vangles)):he.angle,je=o(ue,de),Ge=je+e(-Pe);j(te["radial-axis"],we&&(he.showticklabels||he.ticks),{transform:Ge}),j(te["radial-grid"],we&&he.showgrid,{transform:Ce?"":je}),j(te["radial-line"].select("line"),we&&he.showline,{x1:Ce?-ne:le,y1:0,x2:ne,y2:0,transform:Ge}).attr("stroke-width",he.linewidth).call(a.stroke,he.linecolor)},$.updateRadialAxisTitle=function(G,W,ie){if(!this.isSmith){var q=this.gd,te=this.radius,ne=this.cx,le=this.cy,ue=this.getRadial(W),de=this.id+"title",he=0;if(ue.title){var be=l.bBox(this.layers["radial-axis"].node()).height,ge=ue.title.font.size,we=ue.side;he="top"===we?ge:"counterclockwise"===we?-(be+.4*ge):be+.8*ge}var Ce=void 0!==ie?ie:this.radialAxisAngle,De=Y(Ce),Se=Math.cos(De),Fe=Math.sin(De),ve=ne+te/2*Se+he*Fe,Te=le-te/2*Fe+he*Se;this.layers["radial-axis-title"]=g.draw(q,de,{propContainer:ue,propName:this.id+".radialaxis.title",placeholder:V(q,"Click to enter radial axis title"),attributes:{x:ve,y:Te,"text-anchor":"middle"},transform:{rotate:-Ce}})}},$.updateAngularAxis=function(G,W){var ie=this,q=ie.gd,te=ie.layers,ne=ie.radius,le=ie.innerRadius,ue=ie.cx,de=ie.cy,he=ie.getAngular(W),be=ie.angularAxis,ge=ie.isSmith;ge||(ie.fillViewInitialKey("angularaxis.rotation",he.rotation),be.setGeometry(),be.setScale());var we=ge?function(Ke){var lt=B(ie,R([0,Ke.x]));return Math.atan2(lt[0]-ue,lt[1]-de)-Math.PI/2}:function(Ke){return be.t2g(Ke.x)};"linear"===be.type&&"radians"===be.thetaunit&&(be.tick0=ee(be.tick0),be.dtick=ee(be.dtick));var Ce=function(Ke){return o(ue+ne*Math.cos(Ke),de-ne*Math.sin(Ke))},De=ge?function(Ke){var lt=B(ie,R([0,Ke.x]));return o(lt[0],lt[1])}:function(Ke){return Ce(we(Ke))},Se=ge?function(Ke){var lt=B(ie,R([0,Ke.x])),Ue=Math.atan2(lt[0]-ue,lt[1]-de)-Math.PI/2;return o(lt[0],lt[1])+e(-ee(Ue))}:function(Ke){var lt=we(Ke);return Ce(lt)+e(-ee(lt))},Fe=ge?function(Ke){return L(ie,Ke.x,0,1/0)}:function(Ke){var lt=we(Ke),Ue=Math.cos(lt),$e=Math.sin(lt);return"M"+[ue+le*Ue,de-le*$e]+"L"+[ue+ne*Ue,de-ne*$e]},ve=d.makeLabelFns(be,0).labelStandoff,Te={xFn:function(Ke){var lt=we(Ke);return Math.cos(lt)*ve},yFn:function(Ke){var lt=we(Ke),Ue=Math.sin(lt)>0?.2:1;return-Math.sin(lt)*(ve+Ke.fontSize*Ue)+Math.abs(Math.cos(lt))*(Ke.fontSize*C)},anchorFn:function(Ke){var lt=we(Ke),Ue=Math.cos(lt);return Math.abs(Ue)<.1?"middle":Ue>0?"start":"end"},heightFn:function(Ke,lt,Ue){var $e=we(Ke);return-.5*(1+Math.sin($e))*Ue}},Le=Q(he);ie.angularTickLayout!==Le&&(te["angular-axis"].selectAll("."+be._id+"tick").remove(),ie.angularTickLayout=Le);var Ee,Pe=ge?[1/0].concat(be.tickvals||[]).map(function(Ke){return d.tickText(be,Ke,!0,!1)}):d.calcTicks(be);if(ge&&(Pe[0].text="\u221e",Pe[0].fontSize*=1.75),"linear"===W.gridshape?(Ee=Pe.map(we),b.angleDelta(Ee[0],Ee[1])<0&&(Ee=Ee.slice().reverse())):Ee=null,ie.vangles=Ee,"category"===be.type&&(Pe=Pe.filter(function(Ke){return b.isAngleInsideSector(we(Ke),ie.sectorInRad)})),be.visible){var je="inside"===be.ticks?-1:1;d.drawTicks(q,be,{vals:Pe,layer:te["angular-axis"],path:"M"+je*((be.linewidth||1)/2)+",0h"+je*be.ticklen,transFn:Se,crisp:!1}),d.drawGrid(q,be,{vals:Pe,layer:te["angular-grid"],path:Fe,transFn:b.noop,crisp:!1}),d.drawLabels(q,be,{vals:Pe,layer:te["angular-axis"],repositionOnUpdate:!0,transFn:De,labelFns:Te})}j(te["angular-line"].select("path"),he.showline,{d:ie.pathSubplot(),transform:o(ue,de)}).attr("stroke-width",he.linewidth).call(a.stroke,he.linecolor)},$.updateFx=function(G,W){this.gd._context.staticPlot||(!this.isSmith&&(this.updateAngularDrag(G),this.updateRadialDrag(G,W,0),this.updateRadialDrag(G,W,1)),this.updateHoverAndMainDrag(G))},$.updateHoverAndMainDrag=function(G){var W,ie,q=this,te=q.isSmith,ne=q.gd,ue=G._zoomlayer,de=P.MINZOOM,he=P.OFFEDGE,be=q.radius,ge=q.innerRadius,we=q.cx,Ce=q.cy,De=q.cxx,Se=q.cyy,Fe=q.sectorInRad,ve=q.vangles,Te=q.radialAxis,Le=D.clampTiny,Ee=D.findXYatLength,Pe=D.findEnclosingVertexAngles,je=P.cornerHalfWidth,Ge=P.cornerLen/2,Ke=h.makeDragger(q.layers,"path","maindrag","crosshair");m.select(Ke).attr("d",q.pathSubplot()).attr("transform",o(we,Ce)),Ke.onmousemove=function(gt){v.hover(ne,gt,q.id),ne._fullLayout._lasthover=Ke,ne._fullLayout._hoversubplot=q.id},Ke.onmouseout=function(gt){ne._dragging||p.unhover(ne,gt)};var lt,Ue,$e,et,tt,ct,xt,Ct,Ht,zt={element:Ke,gd:ne,subplot:q.id,plotinfo:{id:q.id,xaxis:q.xaxis,yaxis:q.yaxis},xaxes:[q.xaxis],yaxes:[q.yaxis]};function ht(gt,wt){return Math.sqrt(gt*gt+wt*wt)}function ut(gt,wt){return ht(gt-De,wt-Se)}function Ot(gt,wt){return Math.atan2(Se-wt,gt-De)}function tn(gt,wt){return[gt*Math.cos(wt),gt*Math.sin(-wt)]}function un(gt,wt){if(0===gt)return q.pathSector(2*je);var _t=Ge/gt,Rt=wt-_t,yt=wt+_t,Vt=Math.max(0,Math.min(gt,be)),Nt=Vt-je,rt=Vt+je;return"M"+tn(Nt,Rt)+"A"+[Nt,Nt]+" 0,0,0 "+tn(Nt,yt)+"L"+tn(rt,yt)+"A"+[rt,rt]+" 0,0,1 "+tn(rt,Rt)+"Z"}function Ze(gt,wt,_t){if(0===gt)return q.pathSector(2*je);var Rt,yt,Vt=tn(gt,wt),Nt=tn(gt,_t),rt=Le((Vt[0]+Nt[0])/2),Tt=Le((Vt[1]+Nt[1])/2);if(rt&&Tt){var Ut=Tt/rt,Wt=-1/Ut,sn=Ee(je,Ut,rt,Tt);Rt=Ee(Ge,Wt,sn[0][0],sn[0][1]),yt=Ee(Ge,Wt,sn[1][0],sn[1][1])}else{var He,vt;Tt?(He=Ge,vt=je):(He=je,vt=Ge),Rt=[[rt-He,Tt-vt],[rt+He,Tt-vt]],yt=[[rt-He,Tt+vt],[rt+He,Tt+vt]]}return"M"+Rt.join("L")+"L"+yt.reverse().join("L")+"Z"}function Qe(gt,wt){return wt=Math.max(Math.min(wt,be),ge),gt<he?gt=0:be-gt<he?gt=be:wt<he?wt=0:be-wt<he&&(wt=be),Math.abs(wt-gt)>de?(gt<wt?($e=gt,et=wt):($e=wt,et=gt),!0):($e=null,et=null,!1)}function qe(gt,wt){wt=wt||"M0,0Z",Ct.attr("d",gt=gt||tt),Ht.attr("d",wt),h.transitionZoombox(Ct,Ht,ct,xt),ct=!0;var _t={};Be(_t),ne.emit("plotly_relayouting",_t)}function it(gt,wt){var _t,Rt,yt=lt+(gt*=W),Vt=Ue+(wt*=ie),Nt=ut(lt,Ue),rt=Math.min(ut(yt,Vt),be),Tt=Ot(lt,Ue);Qe(Nt,rt)&&(_t=tt+q.pathSector(et),$e&&(_t+=q.pathSector($e)),Rt=un($e,Tt)+un(et,Tt)),qe(_t,Rt)}function Ie(gt,wt,_t,Rt){var yt=D.findIntersectionXY(_t,Rt,_t,[gt-De,Se-wt]);return ht(yt[0],yt[1])}function ze(gt,wt){var _t,Rt,yt=lt+gt,Vt=Ue+wt,Nt=Ot(lt,Ue),rt=Ot(yt,Vt),Tt=Pe(Nt,ve),Ut=Pe(rt,ve);Qe(Ie(lt,Ue,Tt[0],Tt[1]),Math.min(Ie(yt,Vt,Ut[0],Ut[1]),be))&&(_t=tt+q.pathSector(et),$e&&(_t+=q.pathSector($e)),Rt=[Ze($e,Tt[0],Tt[1]),Ze(et,Tt[0],Tt[1])].join(" ")),qe(_t,Rt)}function Ve(){if(h.removeZoombox(ne),null!==$e&&null!==et){var gt={};Be(gt),h.showDoubleClickNotifier(ne),T.call("_guiRelayout",ne,gt)}}function Be(gt){var wt=Te._rl,_t=(wt[1]-wt[0])/(1-ge/be)/be;gt[q.id+".radialaxis.range"]=[wt[0]+($e-ge)*_t,wt[0]+(et-ge)*_t]}function at(gt,wt){var _t=ne._fullLayout.clickmode;if(h.removeZoombox(ne),2===gt){var Rt={};for(var yt in q.viewInitial)Rt[q.id+"."+yt]=q.viewInitial[yt];ne.emit("plotly_doubleclick",null),T.call("_guiRelayout",ne,Rt)}_t.indexOf("select")>-1&&1===gt&&w(wt,ne,[q.xaxis],[q.yaxis],q.id,zt),_t.indexOf("event")>-1&&v.click(ne,wt,q.id)}zt.prepFn=function(gt,wt,_t){var Rt=ne._fullLayout.dragmode,yt=Ke.getBoundingClientRect();ne._fullLayout._calcInverseTransform(ne),W=ne._fullLayout._invScaleX,ie=ne._fullLayout._invScaleY;var Nt=b.apply3DTransform(ne._fullLayout._invTransform)(wt-yt.left,_t-yt.top);if(lt=Nt[0],Ue=Nt[1],ve){var rt=D.findPolygonOffset(be,Fe[0],Fe[1],ve);lt+=De+rt[0],Ue+=Se+rt[1]}switch(Rt){case"zoom":zt.clickFn=at,te||(zt.moveFn=ve?ze:it,zt.doneFn=Ve,$e=null,et=null,tt=q.pathSubplot(),ct=!1,xt=x(ne._fullLayout[q.id].bgcolor).getLuminance(),(Ct=h.makeZoombox(ue,xt,we,Ce,tt)).attr("fill-rule","evenodd"),Ht=h.makeCorners(ue,we,Ce),y(ne));break;case"select":case"lasso":f(gt,wt,_t,zt,Rt)}},p.init(zt)},$.updateRadialDrag=function(G,W,ie){var q=this,te=q.gd,ne=q.layers,le=q.radius,ue=q.innerRadius,de=q.cx,he=q.cy,be=q.radialAxis,ge=P.radialDragBoxSize,we=ge/2;if(be.visible){var Ce,De,Se,Fe=Y(q.radialAxisAngle),ve=be._rl,Te=ve[0],Le=ve[1],Ee=ve[ie],Pe=.75*(ve[1]-ve[0])/(1-q.getHole(W))/le;ie?(Ce=de+(le+we)*Math.cos(Fe),De=he-(le+we)*Math.sin(Fe),Se="radialdrag"):(Ce=de+(ue-we)*Math.cos(Fe),De=he-(ue-we)*Math.sin(Fe),Se="radialdrag-inner");var je,Ge,Ke,lt=h.makeRectDragger(ne,Se,"crosshair",-we,-we,ge,ge),Ue={element:lt,gd:te};j(m.select(lt),be.visible&&ue<le,{transform:o(Ce,De)}),Ue.prepFn=function(){je=null,Ge=null,Ke=null,Ue.moveFn=$e,Ue.doneFn=et,y(te)},Ue.clampFn=function(xt,Ct){return Math.sqrt(xt*xt+Ct*Ct)<P.MINDRAG&&(xt=0,Ct=0),[xt,Ct]},p.init(Ue)}function $e(xt,Ct){if(je)je(xt,Ct);else{var Ht=[xt,-Ct],zt=[Math.cos(Fe),Math.sin(Fe)],ht=Math.abs(b.dot(Ht,zt)/Math.sqrt(b.dot(Ht,Ht)));isNaN(ht)||(je=ht<.5?tt:ct)}var Ot,ut={};Ot=ut,null!==Ge?Ot[q.id+".radialaxis.angle"]=Ge:null!==Ke&&(Ot[q.id+".radialaxis.range["+ie+"]"]=Ke),te.emit("plotly_relayouting",ut)}function et(){null!==Ge?T.call("_guiRelayout",te,q.id+".radialaxis.angle",Ge):null!==Ke&&T.call("_guiRelayout",te,q.id+".radialaxis.range["+ie+"]",Ke)}function tt(xt,Ct){if(0!==ie){Ge=Math.atan2(he-(De+Ct),Ce+xt-de),q.vangles&&(Ge=se(Ge,q.vangles)),Ge=ee(Ge);var ht=o(de,he)+e(-Ge);ne["radial-axis"].attr("transform",ht),ne["radial-line"].select("line").attr("transform",ht);var ut=q.gd._fullLayout;q.updateRadialAxisTitle(ut,ut[q.id],Ge)}}function ct(xt,Ct){var Ht=b.dot([xt,-Ct],[Math.cos(Fe),Math.sin(Fe)]);if(Ke=Ee-Pe*Ht,Pe>0==(ie?Ke>Te:Ke<Le)){var zt=te._fullLayout,ht=zt[q.id];be.range[ie]=Ke,be._rl[ie]=Ke,q.updateRadialAxis(zt,ht),q.xaxis.setRange(),q.xaxis.setScale(),q.yaxis.setRange(),q.yaxis.setScale();var ut=!1;for(var Ot in q.traceHash){var tn=q.traceHash[Ot],un=b.filterVisible(tn);tn[0][0].trace._module.plot(te,q,un,ht),T.traceIs(Ot,"gl")&&un.length&&(ut=!0)}ut&&(A(te),k(te))}else Ke=null}},$.updateAngularDrag=function(G){var W=this,ie=W.gd,q=W.layers,te=W.radius,ne=W.angularAxis,le=W.cx,ue=W.cy,de=W.cxx,he=W.cyy,be=P.angularDragBoxSize,ge=h.makeDragger(q,"path","angulardrag","move"),we={element:ge,gd:ie};function Ce(Ue,$e){return Math.atan2(he+be-$e,Ue-de-be)}m.select(ge).attr("d",W.pathAnnulus(te,te+be)).attr("transform",o(le,ue)).call(M,"move");var De,Se,Fe,ve,Te,Le,Ee=q.frontplot.select(".scatterlayer").selectAll(".trace"),Pe=Ee.selectAll(".point"),je=Ee.selectAll(".textpoint");function Ge(Ue,$e){var et=W.gd._fullLayout,tt=et[W.id],ct=Ce(De+Ue*G._invScaleX,Se+$e*G._invScaleY),xt=ee(ct-Le);if(ve=Fe+xt,q.frontplot.attr("transform",o(W.xOffset2,W.yOffset2)+e([-xt,de,he])),W.vangles){Te=W.radialAxisAngle+xt;var Ct=o(le,ue)+e(-xt),Ht=o(le,ue)+e(-Te);q.bg.attr("transform",Ct),q["radial-grid"].attr("transform",Ct),q["radial-axis"].attr("transform",Ht),q["radial-line"].select("line").attr("transform",Ht),W.updateRadialAxisTitle(et,tt,Te)}else W.clipPaths.forTraces.select("path").attr("transform",o(de,he)+e(xt));Pe.each(function(){var un=m.select(this),Ze=l.getTranslate(un);un.attr("transform",o(Ze.x,Ze.y)+e([xt]))}),je.each(function(){var un=m.select(this),Ze=un.select("text"),Qe=l.getTranslate(un);un.attr("transform",e([xt,Ze.attr("x"),Ze.attr("y")])+o(Qe.x,Qe.y))}),ne.rotation=b.modHalf(ve,360),W.updateAngularAxis(et,tt),W._hasClipOnAxisFalse&&!b.isFullCircle(W.sectorInRad)&&Ee.call(l.hideOutsideRangePoints,W);var zt=!1;for(var ht in W.traceHash)if(T.traceIs(ht,"gl")){var ut=W.traceHash[ht],Ot=b.filterVisible(ut);ut[0][0].trace._module.plot(ie,W,Ot,tt),Ot.length&&(zt=!0)}zt&&(A(ie),k(ie));var tn={};Ke(tn),ie.emit("plotly_relayouting",tn)}function Ke(Ue){Ue[W.id+".angularaxis.rotation"]=ve,W.vangles&&(Ue[W.id+".radialaxis.angle"]=Te)}function lt(){je.select("text").attr("transform",null);var Ue={};Ke(Ue),T.call("_guiRelayout",ie,Ue)}we.prepFn=function(Ue,$e,et){Fe=G[W.id].angularaxis.rotation;var ct=ge.getBoundingClientRect();De=$e-ct.left,Se=et-ct.top,ie._fullLayout._calcInverseTransform(ie);var xt=b.apply3DTransform(G._invTransform)(De,Se);Le=Ce(De=xt[0],Se=xt[1]),we.moveFn=Ge,we.doneFn=lt,y(ie)},W.vangles&&!b.isFullCircle(W.sectorInRad)&&(we.prepFn=b.noop,M(m.select(ge),null)),p.init(we)},$.isPtInside=function(G){if(this.isSmith)return!0;var W=this.sectorInRad,ie=this.vangles,q=this.angularAxis.c2g(G.theta),te=this.radialAxis,ne=te.c2l(G.r);return(ie?D.isPtInsidePolygon:b.isPtInsideSector)(ne,q,te._rl,W,ie)},$.pathArc=function(G){var W=this.sectorInRad,ie=this.vangles;return(ie?D.pathPolygon:b.pathArc)(G,W[0],W[1],ie)},$.pathSector=function(G){var W=this.sectorInRad,ie=this.vangles;return(ie?D.pathPolygon:b.pathSector)(G,W[0],W[1],ie)},$.pathAnnulus=function(G,W){var ie=this.sectorInRad,q=this.vangles;return(q?D.pathPolygonAnnulus:b.pathAnnulus)(G,W,ie[0],ie[1],q)},$.pathSubplot=function(){var G=this.innerRadius,W=this.radius;return G?this.pathAnnulus(G,W):this.pathSector(W)},$.fillViewInitialKey=function(G,W){G in this.viewInitial||(this.viewInitial[G]=W)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../constants/alignment":471,"../../lib":503,"../../lib/clear_gl_canvases":487,"../../lib/setcursor":524,"../../plot_api/subroutines":544,"../../plots/cartesian/axes":554,"../../registry":638,"../cartesian/autorange":553,"../cartesian/dragbox":563,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"../smith/helpers":628,"./constants":620,"./helpers":621,"./set_convert":626,"@plotly/d3":58,tinycolor2:312}],626:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../cartesian/set_convert"),T=m.deg2rad,b=m.rad2deg;oe.exports=function(e,o,a){switch(x(e,a),e._id){case"x":case"radialaxis":d=o._subplot,(l=e).setGeometry=function(){var u=l._rl[0],s=l._rl[1],c=d.innerRadius,h=(d.radius-c)/(s-u),p=c/h,v=u>s?function(g){return g<=0}:function(g){return g>=0};l.c2g=function(g){var f=l.c2l(g)-u;return(v(f)?f:0)+p},l.g2c=function(g){return l.l2c(g+u-p)},l.g2p=function(g){return g*h},l.c2p=function(g){return l.g2p(l.c2g(g))}};break;case"angularaxis":!function(l,i){var d=l.type;if("linear"===d){var u=l.d2c,s=l.c2d;l.d2c=function(c,h){return p=u(c),"degrees"===h?T(p):p;var p},l.c2d=function(c,h){return s((p=c,"degrees"===h?b(p):p));var p}}l.makeCalcdata=function(c,h){var p,v,g=c[h],f=c._length,w=function(C){return l.d2c(C,c.thetaunit)};if(g){if(m.isTypedArray(g)&&"linear"===d){if(f===g.length)return g;if(g.subarray)return g.subarray(0,f)}for(p=new Array(f),v=0;v<f;v++)p[v]=w(g[v])}else{var y=h+"0",M="d"+h,A=y in c?w(c[y]):0,k=c[M]?w(c[M]):(l.period||2*Math.PI)/f;for(p=new Array(f),v=0;v<f;v++)p[v]=A+v*k}return p},l.setGeometry=function(){var c,h,p,v,g=i.sector,f=g.map(T),w={clockwise:-1,counterclockwise:1}[l.direction],y=T(l.rotation),M=function(P){return w*P+y},A=function(P){return(P-y)/w};switch(d){case"linear":h=c=m.identity,v=T,p=b,l.range=m.isFullCircle(f)?[g[0],g[0]+360]:f.map(A).map(b);break;case"category":var k=l._categories.length,C=l.period?Math.max(l.period,k):k;0===C&&(C=1),h=v=function(P){return 2*P*Math.PI/C},c=p=function(P){return P*C/Math.PI/2},l.range=[0,C]}l.c2g=function(P){return M(h(P))},l.g2c=function(P){return c(A(P))},l.t2g=function(P){return M(v(P))},l.g2t=function(P){return p(A(P))}}}(e,o)}var l,d}},{"../../lib":503,"../cartesian/set_convert":576}],627:[function(_,oe,ae){"use strict";oe.exports={attr:"subplot",name:"smith",axisNames:["realaxis","imaginaryaxis"],axisName2dataArray:{imaginaryaxis:"imag",realaxis:"real"}}},{}],628:[function(_,oe,ae){"use strict";function m(e){return e<0?-1:e>0?1:0}function x(e){var o=e[0],a=e[1];if(!isFinite(o)||!isFinite(a))return[1,0];var l=(o+1)*(o+1)+a*a;return[(o*o+a*a-1)/l,2*a/l]}function T(e,o){return[o[0]*e.radius+e.cx,-o[1]*e.radius+e.cy]}function b(e,o){return o*e.radius}oe.exports={smith:x,reactanceArc:function(e,o,a,l){var i=T(e,x([a,o])),d=i[0],u=i[1],s=T(e,x([l,o])),c=s[0],h=s[1];if(0===o)return["M"+d+","+u,"L"+c+","+h].join(" ");var p=b(e,1/Math.abs(o));return["M"+d+","+u,"A"+p+","+p+" 0 0,"+(o<0?1:0)+" "+c+","+h].join(" ")},resistanceArc:function(e,o,a,l){var i=b(e,1/(o+1)),d=T(e,x([o,a])),u=d[0],s=d[1],c=T(e,x([o,l])),h=c[0],p=c[1];if(m(a)!==m(l)){var v=T(e,x([o,0]));return["M"+u+","+s,"A"+i+","+i+" 0 0,"+(0<a?0:1)+" "+v[0]+","+v[1],"A"+i+","+i+" 0 0,"+(l<0?0:1)+h+","+p].join(" ")}return["M"+u+","+s,"A"+i+","+i+" 0 0,"+(l<a?0:1)+" "+h+","+p].join(" ")},smithTransform:T}},{}],629:[function(_,oe,ae){"use strict";var m=_("../get_data").getSubplotCalcData,x=_("../../lib").counterRegex,T=_("../polar/polar"),b=_("./constants"),e=b.attr,o=b.name,a=x(o),l={};l[e]={valType:"subplotid",dflt:o,editType:"calc"},oe.exports={attr:e,name:o,idRoot:o,idRegex:a,attrRegex:a,attributes:l,layoutAttributes:_("./layout_attributes"),supplyLayoutDefaults:_("./layout_defaults"),plot:function(i){for(var d=i._fullLayout,u=i.calcdata,s=d._subplots[o],c=0;c<s.length;c++){var h=s[c],p=m(u,o,h),v=d[h]._subplot;v||(v=T(i,h,!0),d[h]._subplot=v),v.plot(p,d,i._promises)}},clean:function(i,d,u,s){for(var c=s._subplots[o]||[],h=0;h<c.length;h++){var p=c[h],v=s[p]._subplot;if(!d[p]&&v)for(var g in v.framework.remove(),v.clipPaths)v.clipPaths[g].remove()}},toSVG:_("../cartesian").toSVG}},{"../../lib":503,"../cartesian":568,"../get_data":593,"../polar/polar":625,"./constants":627,"./layout_attributes":630,"./layout_defaults":631}],630:[function(_,oe,ae){"use strict";var m=_("../../components/color/attributes"),x=_("../cartesian/layout_attributes"),T=_("../domain").attributes,b=_("../../lib").extendFlat,e=_("../../plot_api/edit_types").overrideAll,o=e({color:x.color,showline:b({},x.showline,{dflt:!0}),linecolor:x.linecolor,linewidth:x.linewidth,showgrid:b({},x.showgrid,{dflt:!0}),gridcolor:x.gridcolor,gridwidth:x.gridwidth},"plot","from-root"),a=e({ticklen:x.ticklen,tickwidth:b({},x.tickwidth,{dflt:2}),tickcolor:x.tickcolor,showticklabels:x.showticklabels,showtickprefix:x.showtickprefix,tickprefix:x.tickprefix,showticksuffix:x.showticksuffix,ticksuffix:x.ticksuffix,tickfont:x.tickfont,tickformat:x.tickformat,hoverformat:x.hoverformat,layer:x.layer},"plot","from-root"),l=b({visible:b({},x.visible,{dflt:!0}),tickvals:{dflt:[.2,.5,1,2,5],valType:"data_array",editType:"plot"},tickangle:b({},x.tickangle,{dflt:90}),ticks:{valType:"enumerated",values:["top","bottom",""],editType:"ticks"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},editType:"calc"},o,a),i=b({visible:b({},x.visible,{dflt:!0}),tickvals:{valType:"data_array",editType:"plot"},ticks:x.ticks,editType:"calc"},o,a);oe.exports={domain:T({name:"smith",editType:"plot"}),bgcolor:{valType:"color",editType:"plot",dflt:m.background},realaxis:l,imaginaryaxis:i,editType:"calc"}},{"../../components/color/attributes":365,"../../lib":503,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],631:[function(_,oe,ae){"use strict";var m,x,T,b=_("../../lib"),e=_("../../components/color"),o=_("../../plot_api/plot_template"),a=_("../subplot_defaults"),l=_("../get_data").getSubplotData,i=_("../cartesian/prefix_suffix_defaults"),d=_("../cartesian/tick_label_defaults"),u=_("../cartesian/line_grid_defaults"),s=_("../cartesian/set_convert"),c=_("./layout_attributes"),h=_("./constants"),p=h.axisNames,v=(m=function(f){return f.slice().reverse().map(function(w){return-w}).concat([0]).concat(f)},x=String,T={},function(f){var w=x?x(f):f;if(w in T)return T[w];var y=m(f);return T[w]=y,y});function g(f,w,y,M){var A=y("bgcolor");M.bgColor=e.combine(A,M.paper_bgcolor);var k,C=l(M.fullData,h.name,M.id),P=M.layoutOut;function D($,Q){return y(k+"."+$,Q)}for(var F=0;F<p.length;F++){b.isPlainObject(f[k=p[F]])||(f[k]={});var R=f[k],L=o.newContainer(w,k);L._id=L._name=k,L._attr=M.id+"."+k,L._traceIndices=C.map(function($){return $._expandedIndex});var I=D("visible");if(L.type="linear",s(L,P),i(R,L,D,L.type),I){var B,V,Z,Y,ee="realaxis"===k;ee&&D("side"),ee?D("tickvals"):D("tickvals",v(w.realaxis.tickvals||c.realaxis.tickvals.dflt));var J=M.font||{};I&&(V=(B=D("color"))===R.color?B:J.color,Z=J.size,Y=J.family),d(R,L,D,L.type,{noTicklabelstep:!0,noAng:!ee,noExp:!0,font:{color:V,size:Z,family:Y}}),b.coerce2(f,w,c,k+".ticklen"),b.coerce2(f,w,c,k+".tickwidth"),b.coerce2(f,w,c,k+".tickcolor",w.color),D("ticks")||(delete w[k].ticklen,delete w[k].tickwidth,delete w[k].tickcolor),u(R,L,D,{dfltColor:B,bgColor:M.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:c[k]}),D("layer")}D("hoverformat"),delete L.type,L._input=R}}oe.exports=function(f,w,y){a(f,w,y,{noUirevision:!0,type:h.name,attributes:c,handleDefaults:g,font:w.font,paper_bgcolor:w.paper_bgcolor,fullData:y,layoutOut:w})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/set_convert":576,"../cartesian/tick_label_defaults":578,"../get_data":593,"../subplot_defaults":632,"./constants":627,"./layout_attributes":630}],632:[function(_,oe,ae){"use strict";var m=_("../lib"),x=_("../plot_api/plot_template"),T=_("./domain").defaults;oe.exports=function(b,e,o,a){var l,i,u=a.attributes,s=a.handleDefaults,c=a.partition||"x",h=e._subplots[a.type],p=h.length,v=p&&h[0].replace(/\d+$/,"");function g(M,A){return m.coerce(l,i,u,M,A)}for(var f=0;f<p;f++){var w=h[f];l=b[w]?b[w]:b[w]={},i=x.newContainer(e,w,v),a.noUirevision||g("uirevision",e.uirevision);var y={};y[c]=[f/p,(f+1)/p],T(i,e,g,y),a.id=w,s(l,i,g,a)}}},{"../lib":503,"../plot_api/plot_template":543,"./domain":584}],633:[function(_,oe,ae){"use strict";function x(T){var b=T.description?" "+T.description:"",e=T.keys||[];if(e.length>0){for(var o=[],a=0;a<e.length;a++)o[a]="`"+e[a]+"`";b+="Finally, the template string has access to ",b=1===e.length?"variable "+o[0]:"variables "+o.slice(0,-1).join(", ")+" and "+o.slice(-1)+"."}return b}_("../constants/docs"),ae.hovertemplateAttrs=function(T,b){T=T||{},x(b=b||{});var e={valType:"string",dflt:"",editType:T.editType||"none"};return!1!==T.arrayOk&&(e.arrayOk=!0),e},ae.texttemplateAttrs=function(T,b){T=T||{},x(b=b||{});var e={valType:"string",dflt:"",editType:T.editType||"calc"};return!1!==T.arrayOk&&(e.arrayOk=!0),e}},{"../constants/docs":474}],634:[function(_,oe,ae){"use strict";var m=_("./ternary"),x=_("../../plots/get_data").getSubplotCalcData,T=_("../../lib").counterRegex;ae.name="ternary";var b=ae.attr="subplot";ae.idRoot="ternary",ae.idRegex=ae.attrRegex=T("ternary"),(ae.attributes={})[b]={valType:"subplotid",dflt:"ternary",editType:"calc"},ae.layoutAttributes=_("./layout_attributes"),ae.supplyLayoutDefaults=_("./layout_defaults"),ae.plot=function(e){for(var o=e._fullLayout,a=e.calcdata,l=o._subplots.ternary,i=0;i<l.length;i++){var d=l[i],u=x(a,"ternary",d),s=o[d]._subplot;s||(s=new m({id:d,graphDiv:e,container:o._ternarylayer.node()},o),o[d]._subplot=s),s.plot(u,o,e._promises)}},ae.clean=function(e,o,a,l){for(var i=l._subplots.ternary||[],d=0;d<i.length;d++){var u=i[d],s=l[u]._subplot;!o[u]&&s&&(s.plotContainer.remove(),s.clipDef.remove(),s.clipDefRelative.remove(),s.layers["a-title"].remove(),s.layers["b-title"].remove(),s.layers["c-title"].remove())}}},{"../../lib":503,"../../plots/get_data":593,"./layout_attributes":635,"./layout_defaults":636,"./ternary":637}],635:[function(_,oe,ae){"use strict";var m=_("../../components/color/attributes"),x=_("../domain").attributes,T=_("../cartesian/layout_attributes"),b=_("../../plot_api/edit_types").overrideAll,e=_("../../lib/extend").extendFlat,o={title:{text:T.title.text,font:T.title.font},color:T.color,tickmode:T.tickmode,nticks:e({},T.nticks,{dflt:6,min:1}),tick0:T.tick0,dtick:T.dtick,tickvals:T.tickvals,ticktext:T.ticktext,ticks:T.ticks,ticklen:T.ticklen,tickwidth:T.tickwidth,tickcolor:T.tickcolor,ticklabelstep:T.ticklabelstep,showticklabels:T.showticklabels,showtickprefix:T.showtickprefix,tickprefix:T.tickprefix,showticksuffix:T.showticksuffix,ticksuffix:T.ticksuffix,showexponent:T.showexponent,exponentformat:T.exponentformat,minexponent:T.minexponent,separatethousands:T.separatethousands,tickfont:T.tickfont,tickangle:T.tickangle,tickformat:T.tickformat,tickformatstops:T.tickformatstops,hoverformat:T.hoverformat,showline:e({},T.showline,{dflt:!0}),linecolor:T.linecolor,linewidth:T.linewidth,showgrid:e({},T.showgrid,{dflt:!0}),gridcolor:T.gridcolor,gridwidth:T.gridwidth,layer:T.layer,min:{valType:"number",dflt:0,min:0},_deprecated:{title:T._deprecated.title,titlefont:T._deprecated.titlefont}},a=oe.exports=b({domain:x({name:"ternary"}),bgcolor:{valType:"color",dflt:m.background},sum:{valType:"number",dflt:1,min:0},aaxis:o,baxis:o,caxis:o},"plot","from-root");a.uirevision={valType:"any",editType:"none"},a.aaxis.uirevision=a.baxis.uirevision=a.caxis.uirevision={valType:"any",editType:"none"}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plot_api/edit_types":536,"../cartesian/layout_attributes":569,"../domain":584}],636:[function(_,oe,ae){"use strict";var m=_("../../components/color"),x=_("../../plot_api/plot_template"),T=_("../../lib"),b=_("../subplot_defaults"),e=_("../cartesian/tick_label_defaults"),o=_("../cartesian/prefix_suffix_defaults"),a=_("../cartesian/tick_mark_defaults"),l=_("../cartesian/tick_value_defaults"),i=_("../cartesian/line_grid_defaults"),d=_("./layout_attributes"),u=["aaxis","baxis","caxis"];function s(h,p,v,g){var f,w,y,M=v("bgcolor"),A=v("sum");g.bgColor=m.combine(M,g.paper_bgcolor);for(var k=0;k<u.length;k++)w=h[f=u[k]]||{},(y=x.newContainer(p,f))._name=f,c(w,y,g,p);var C=p.aaxis,P=p.baxis,D=p.caxis;C.min+P.min+D.min>=A&&(C.min=0,P.min=0,D.min=0,h.aaxis&&delete h.aaxis.min,h.baxis&&delete h.baxis.min,h.caxis&&delete h.caxis.min)}function c(h,p,v,g){var f=d[p._name];function w(P,D){return T.coerce(h,p,f,P,D)}w("uirevision",g.uirevision),p.type="linear";var y=w("color"),M=y!==f.color.dflt?y:v.font.color,A=p._name.charAt(0).toUpperCase(),k="Component "+A,C=w("title.text",k);p._hovertitle=C===k?C:A,T.coerceFont(w,"title.font",{family:v.font.family,size:T.bigFont(v.font.size),color:M}),w("min"),l(h,p,w,"linear"),o(h,p,w,"linear"),e(h,p,w,"linear"),a(h,p,w,{outerTicks:!0}),w("showticklabels")&&(T.coerceFont(w,"tickfont",{family:v.font.family,size:v.font.size,color:M}),w("tickangle"),w("tickformat")),i(h,p,w,{dfltColor:y,bgColor:v.bgColor,blend:60,showLine:!0,showGrid:!0,noZeroLine:!0,attributes:f}),w("hoverformat"),w("layer")}oe.exports=function(h,p,v){b(h,p,v,{type:"ternary",attributes:d,handleDefaults:s,font:p.font,paper_bgcolor:p.paper_bgcolor})}},{"../../components/color":366,"../../lib":503,"../../plot_api/plot_template":543,"../cartesian/line_grid_defaults":571,"../cartesian/prefix_suffix_defaults":573,"../cartesian/tick_label_defaults":578,"../cartesian/tick_mark_defaults":579,"../cartesian/tick_value_defaults":580,"../subplot_defaults":632,"./layout_attributes":635}],637:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("tinycolor2"),T=_("../../registry"),b=_("../../lib"),e=b.strTranslate,o=b._,a=_("../../components/color"),l=_("../../components/drawing"),i=_("../cartesian/set_convert"),d=_("../../lib/extend").extendFlat,u=_("../plots"),s=_("../cartesian/axes"),c=_("../../components/dragelement"),h=_("../../components/fx"),p=_("../../components/dragelement/helpers"),v=p.freeMode,g=p.rectMode,f=_("../../components/titles"),w=_("../cartesian/select").prepSelect,y=_("../cartesian/select").selectOnClick,M=_("../cartesian/select").clearSelect,A=_("../cartesian/select").clearSelectionsCache,k=_("../cartesian/constants");function C(Z,Y){this.id=Z.id,this.graphDiv=Z.graphDiv,this.init(Y),this.makeFramework(Y),this.aTickLayout=null,this.bTickLayout=null,this.cTickLayout=null}oe.exports=C;var P=C.prototype;P.init=function(Z){this.container=Z._ternarylayer,this.defs=Z._defs,this.layoutId=Z._uid,this.traceHash={},this.layers={}},P.plot=function(Z,Y){var ee=Y[this.id],J=Y._size;this._hasClipOnAxisFalse=!1;for(var $=0;$<Z.length;$++)if(!1===Z[$][0].trace.cliponaxis){this._hasClipOnAxisFalse=!0;break}this.updateLayers(ee),this.adjustLayout(ee,J),u.generalUpdatePerTraceModule(this.graphDiv,this,Z,ee),this.layers.plotbg.select("path").call(a.fill,ee.bgcolor)},P.makeFramework=function(Z){var Y=this.graphDiv,ee=Z[this.id],J=this.clipId="clip"+this.layoutId+this.id,$=this.clipIdRelative="clip-relative"+this.layoutId+this.id;this.clipDef=b.ensureSingleById(Z._clips,"clipPath",J,function(Q){Q.append("path").attr("d","M0,0Z")}),this.clipDefRelative=b.ensureSingleById(Z._clips,"clipPath",$,function(Q){Q.append("path").attr("d","M0,0Z")}),this.plotContainer=b.ensureSingle(this.container,"g",this.id),this.updateLayers(ee),l.setClipUrl(this.layers.backplot,J,Y),l.setClipUrl(this.layers.grids,J,Y)},P.updateLayers=function(Z){var Y=this.layers,ee=["draglayer","plotbg","backplot","grids"];"below traces"===Z.aaxis.layer&&ee.push("aaxis","aline"),"below traces"===Z.baxis.layer&&ee.push("baxis","bline"),"below traces"===Z.caxis.layer&&ee.push("caxis","cline"),ee.push("frontplot"),"above traces"===Z.aaxis.layer&&ee.push("aaxis","aline"),"above traces"===Z.baxis.layer&&ee.push("baxis","bline"),"above traces"===Z.caxis.layer&&ee.push("caxis","cline");var J=this.plotContainer.selectAll("g.toplevel").data(ee,String),$=["agrid","bgrid","cgrid"];J.enter().append("g").attr("class",function(Q){return"toplevel "+Q}).each(function(Q){var se=m.select(this);Y[Q]=se,"frontplot"===Q?se.append("g").classed("scatterlayer",!0):"backplot"===Q?se.append("g").classed("maplayer",!0):"plotbg"===Q?se.append("path").attr("d","M0,0Z"):"aline"===Q||"bline"===Q||"cline"===Q?se.append("path"):"grids"===Q&&$.forEach(function(j){Y[j]=se.append("g").classed("grid "+j,!0)})}),J.order()};var D=Math.sqrt(4/3);P.adjustLayout=function(Z,Y){var ee,J,$,Q,se,j,G=this,W=Z.domain,ie=(W.x[0]+W.x[1])/2,q=(W.y[0]+W.y[1])/2,te=W.x[1]-W.x[0],ne=W.y[1]-W.y[0],le=te*Y.w,ue=ne*Y.h,de=Z.sum,he=Z.aaxis.min,be=Z.baxis.min,ge=Z.caxis.min;le>D*ue?$=(Q=ue)*D:Q=($=le)/D,se=te*$/le,j=ne*Q/ue,J=Y.t+Y.h*(1-q)-Q/2,G.x0=ee=Y.l+Y.w*ie-$/2,G.y0=J,G.w=$,G.h=Q,G.sum=de,G.xaxis={type:"linear",range:[he+2*ge-de,de-he-2*be],domain:[ie-se/2,ie+se/2],_id:"x"},i(G.xaxis,G.graphDiv._fullLayout),G.xaxis.setScale(),G.xaxis.isPtWithinRange=function(je){return je.a>=G.aaxis.range[0]&&je.a<=G.aaxis.range[1]&&je.b>=G.baxis.range[1]&&je.b<=G.baxis.range[0]&&je.c>=G.caxis.range[1]&&je.c<=G.caxis.range[0]},G.yaxis={type:"linear",range:[he,de-be-ge],domain:[q-j/2,q+j/2],_id:"y"},i(G.yaxis,G.graphDiv._fullLayout),G.yaxis.setScale(),G.yaxis.isPtWithinRange=function(){return!0};var we=G.yaxis.domain[0],Ce=G.aaxis=d({},Z.aaxis,{range:[he,de-be-ge],side:"left",tickangle:(+Z.aaxis.tickangle||0)-30,domain:[we,we+j*D],anchor:"free",position:0,_id:"y",_length:$});i(Ce,G.graphDiv._fullLayout),Ce.setScale();var De=G.baxis=d({},Z.baxis,{range:[de-he-ge,be],side:"bottom",domain:G.xaxis.domain,anchor:"free",position:0,_id:"x",_length:$});i(De,G.graphDiv._fullLayout),De.setScale();var Se=G.caxis=d({},Z.caxis,{range:[de-he-be,ge],side:"right",tickangle:(+Z.caxis.tickangle||0)+30,domain:[we,we+j*D],anchor:"free",position:0,_id:"y",_length:$});i(Se,G.graphDiv._fullLayout),Se.setScale();var Fe="M"+ee+","+(J+Q)+"h"+$+"l-"+$/2+",-"+Q+"Z";G.clipDef.select("path").attr("d",Fe),G.layers.plotbg.select("path").attr("d",Fe);var ve="M0,"+Q+"h"+$+"l-"+$/2+",-"+Q+"Z";G.clipDefRelative.select("path").attr("d",ve);var Te=e(ee,J);G.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",Te),G.clipDefRelative.select("path").attr("transform",null);var Le=e(ee-De._offset,J+Q);G.layers.baxis.attr("transform",Le),G.layers.bgrid.attr("transform",Le);var Ee=e(ee+$/2,J)+"rotate(30)"+e(0,-Ce._offset);G.layers.aaxis.attr("transform",Ee),G.layers.agrid.attr("transform",Ee);var Pe=e(ee+$/2,J)+"rotate(-30)"+e(0,-Se._offset);G.layers.caxis.attr("transform",Pe),G.layers.cgrid.attr("transform",Pe),G.drawAxes(!0),G.layers.aline.select("path").attr("d",Ce.showline?"M"+ee+","+(J+Q)+"l"+$/2+",-"+Q:"M0,0").call(a.stroke,Ce.linecolor||"#000").style("stroke-width",(Ce.linewidth||0)+"px"),G.layers.bline.select("path").attr("d",De.showline?"M"+ee+","+(J+Q)+"h"+$:"M0,0").call(a.stroke,De.linecolor||"#000").style("stroke-width",(De.linewidth||0)+"px"),G.layers.cline.select("path").attr("d",Se.showline?"M"+(ee+$/2)+","+J+"l"+$/2+","+Q:"M0,0").call(a.stroke,Se.linecolor||"#000").style("stroke-width",(Se.linewidth||0)+"px"),G.graphDiv._context.staticPlot||G.initInteractions(),l.setClipUrl(G.layers.frontplot,G._hasClipOnAxisFalse?null:G.clipId,G.graphDiv)},P.drawAxes=function(Z){var Y=this.graphDiv,ee=this.id.substr(7)+"title",J=this.layers,$=this.aaxis,Q=this.baxis,se=this.caxis;if(this.drawAx($),this.drawAx(Q),this.drawAx(se),Z){var j=Math.max($.showticklabels?$.tickfont.size/2:0,(se.showticklabels?.75*se.tickfont.size:0)+("outside"===se.ticks?.87*se.ticklen:0)),G=(Q.showticklabels?Q.tickfont.size:0)+("outside"===Q.ticks?Q.ticklen:0)+3;J["a-title"]=f.draw(Y,"a"+ee,{propContainer:$,propName:this.id+".aaxis.title",placeholder:o(Y,"Click to enter Component A title"),attributes:{x:this.x0+this.w/2,y:this.y0-$.title.font.size/3-j,"text-anchor":"middle"}}),J["b-title"]=f.draw(Y,"b"+ee,{propContainer:Q,propName:this.id+".baxis.title",placeholder:o(Y,"Click to enter Component B title"),attributes:{x:this.x0-G,y:this.y0+this.h+.83*Q.title.font.size+G,"text-anchor":"middle"}}),J["c-title"]=f.draw(Y,"c"+ee,{propContainer:se,propName:this.id+".caxis.title",placeholder:o(Y,"Click to enter Component C title"),attributes:{x:this.x0+this.w+G,y:this.y0+this.h+.83*se.title.font.size+G,"text-anchor":"middle"}})}},P.drawAx=function(Z){var Y,ee=this.graphDiv,J=Z._name,$=J.charAt(0),Q=Z._id,se=this.layers[J],j=$+"tickLayout",G=(Y=Z).ticks+String(Y.ticklen)+String(Y.showticklabels);this[j]!==G&&(se.selectAll("."+Q+"tick").remove(),this[j]=G),Z.setScale();var W=s.calcTicks(Z),ie=s.clipEnds(Z,W),q=s.makeTransTickFn(Z),te=s.getTickSigns(Z)[2],ne=b.deg2rad(30),le=te*(Z.linewidth||1)/2,ue=te*Z.ticklen,de=this.w,he=this.h,be="b"===$?"M0,"+le+"l"+Math.sin(ne)*ue+","+Math.cos(ne)*ue:"M"+le+",0l"+Math.cos(ne)*ue+","+-Math.sin(ne)*ue,ge={a:"M0,0l"+he+",-"+de/2,b:"M0,0l-"+de/2+",-"+he,c:"M0,0l-"+he+","+de/2}[$];s.drawTicks(ee,Z,{vals:"inside"===Z.ticks?ie:W,layer:se,path:be,transFn:q,crisp:!1}),s.drawGrid(ee,Z,{vals:ie,layer:this.layers[$+"grid"],path:ge,transFn:q,crisp:!1}),s.drawLabels(ee,Z,{vals:W,layer:se,transFn:q,labelFns:s.makeLabelFns(Z,0,30)})};var F=k.MINZOOM/2+.87,R="m-0.87,.5h"+F+"v3h-"+(F+5.2)+"l"+(F/2+2.6)+",-"+(.87*F+4.5)+"l2.6,1.5l-"+F/2+","+.87*F+"Z",L="m0.87,.5h-"+F+"v3h"+(F+5.2)+"l-"+(F/2+2.6)+",-"+(.87*F+4.5)+"l-2.6,1.5l"+F/2+","+.87*F+"Z",I="m0,1l"+F/2+","+.87*F+"l2.6,-1.5l-"+(F/2+2.6)+",-"+(.87*F+4.5)+"l-"+(F/2+2.6)+","+(.87*F+4.5)+"l2.6,1.5l"+F/2+",-"+.87*F+"Z",B=!0;function V(Z){m.select(Z).selectAll(".zoombox,.js-zoombox-backdrop,.js-zoombox-menu,.zoombox-corners").remove()}P.clearSelect=function(){A(this.dragOptions),M(this.dragOptions.gd)},P.initInteractions=function(){var Z,Y,ee,J,$,Q,se,j,G,W,ie,q,te=this,ne=te.layers.plotbg.select("path").node(),le=te.graphDiv,ue=le._fullLayout._zoomlayer;function de(ve){var Te={};return Te[te.id+".aaxis.min"]=ve.a,Te[te.id+".baxis.min"]=ve.b,Te[te.id+".caxis.min"]=ve.c,Te}function he(ve,Te){var Le=le._fullLayout.clickmode;V(le),2===ve&&(le.emit("plotly_doubleclick",null),T.call("_guiRelayout",le,de({a:0,b:0,c:0}))),Le.indexOf("select")>-1&&1===ve&&y(Te,le,[te.xaxis],[te.yaxis],te.id,te.dragOptions),Le.indexOf("event")>-1&&h.click(le,Te,te.id)}function be(ve,Te){return 1-Te/te.h}function ge(ve,Te){return 1-(ve+(te.h-Te)/Math.sqrt(3))/te.w}function we(ve,Te){return(ve-(te.h-Te)/Math.sqrt(3))/te.w}function Ce(ve,Te){var Le=ee+ve*Z,Ee=J+Te*Y,Pe=Math.max(0,Math.min(1,be(0,J),be(0,Ee))),je=Math.max(0,Math.min(1,ge(ee,J),ge(Le,Ee))),Ge=Math.max(0,Math.min(1,we(ee,J),we(Le,Ee))),Ke=(Pe/2+Ge)*te.w,lt=(1-Pe/2-je)*te.w,Ue=(Ke+lt)/2,$e=lt-Ke,et=(1-Pe)*te.h,tt=et-$e/D;$e<k.MINZOOM?(se=$,ie.attr("d",G),q.attr("d","M0,0Z")):(se={a:$.a+Pe*Q,b:$.b+je*Q,c:$.c+Ge*Q},ie.attr("d",G+"M"+Ke+","+et+"H"+lt+"L"+Ue+","+tt+"L"+Ke+","+et+"Z"),q.attr("d","M"+ee+","+J+"m0.5,0.5h5v-2h-5v-5h-2v5h-5v2h5v5h2ZM"+Ke+","+et+R+"M"+lt+","+et+L+"M"+Ue+","+tt+I)),W||(ie.transition().style("fill",j>.2?"rgba(0,0,0,0.4)":"rgba(255,255,255,0.3)").duration(200),q.transition().style("opacity",1).duration(200),W=!0),le.emit("plotly_relayouting",de(se))}function De(){V(le),se!==$&&(T.call("_guiRelayout",le,de(se)),B&&le.data&&le._context.showTips&&(b.notifier(o(le,"Double-click to zoom back out"),"long"),B=!1))}function Se(ve,Te){var Le=ve/te.xaxis._m,Ee=Te/te.yaxis._m,Pe=[(se={a:$.a-Ee,b:$.b+(Le+Ee)/2,c:$.c-(Le-Ee)/2}).a,se.b,se.c].sort(b.sorterAsc),je=Pe.indexOf(se.a),Ge=Pe.indexOf(se.b),Ke=Pe.indexOf(se.c);Pe[0]<0&&(Pe[1]+Pe[0]/2<0?(Pe[2]+=Pe[0]+Pe[1],Pe[0]=Pe[1]=0):(Pe[2]+=Pe[0]/2,Pe[1]+=Pe[0]/2,Pe[0]=0),Te=($.a-(se={a:Pe[je],b:Pe[Ge],c:Pe[Ke]}).a)*te.yaxis._m,ve=($.c-se.c-$.b+se.b)*te.xaxis._m);var lt=e(te.x0+ve,te.y0+Te);te.plotContainer.selectAll(".scatterlayer,.maplayer").attr("transform",lt);var Ue=e(-ve,-Te);te.clipDefRelative.select("path").attr("transform",Ue),te.aaxis.range=[se.a,te.sum-se.b-se.c],te.baxis.range=[te.sum-se.a-se.c,se.b],te.caxis.range=[te.sum-se.a-se.b,se.c],te.drawAxes(!1),te._hasClipOnAxisFalse&&te.plotContainer.select(".scatterlayer").selectAll(".trace").call(l.hideOutsideRangePoints,te),le.emit("plotly_relayouting",de(se))}function Fe(){T.call("_guiRelayout",le,de(se))}this.dragOptions={element:ne,gd:le,plotinfo:{id:te.id,domain:le._fullLayout[te.id].domain,xaxis:te.xaxis,yaxis:te.yaxis},subplot:te.id,prepFn:function(ve,Te,Le){te.dragOptions.xaxes=[te.xaxis],te.dragOptions.yaxes=[te.yaxis],Z=le._fullLayout._invScaleX,Y=le._fullLayout._invScaleY;var Ee=te.dragOptions.dragmode=le._fullLayout.dragmode;te.dragOptions.minDrag=v(Ee)?1:void 0,"zoom"===Ee?(te.dragOptions.moveFn=Ce,te.dragOptions.clickFn=he,te.dragOptions.doneFn=De,function(Pe,je,Ge){var Ke=ne.getBoundingClientRect();ee=je-Ke.left,J=Ge-Ke.top,le._fullLayout._calcInverseTransform(le);var Ue=b.apply3DTransform(le._fullLayout._invTransform)(ee,J);ee=Ue[0],J=Ue[1],se=$={a:te.aaxis.range[0],b:te.baxis.range[1],c:te.caxis.range[1]},Q=te.aaxis.range[1]-$.a,j=x(te.graphDiv._fullLayout[te.id].bgcolor).getLuminance(),G="M0,"+te.h+"L"+te.w/2+", 0L"+te.w+","+te.h+"Z",W=!1,ie=ue.append("path").attr("class","zoombox").attr("transform",e(te.x0,te.y0)).style({fill:j>.2?"rgba(0,0,0,0)":"rgba(255,255,255,0)","stroke-width":0}).attr("d",G),q=ue.append("path").attr("class","zoombox-corners").attr("transform",e(te.x0,te.y0)).style({fill:a.background,stroke:a.defaultLine,"stroke-width":1,opacity:0}).attr("d","M0,0Z"),te.clearSelect(le)}(0,Te,Le)):"pan"===Ee?(te.dragOptions.moveFn=Se,te.dragOptions.clickFn=he,te.dragOptions.doneFn=Fe,se=$={a:te.aaxis.range[0],b:te.baxis.range[1],c:te.caxis.range[1]},te.clearSelect(le)):(g(Ee)||v(Ee))&&w(ve,Te,Le,te.dragOptions,Ee)}},ne.onmousemove=function(ve){h.hover(le,ve,te.id),le._fullLayout._lasthover=ne,le._fullLayout._hoversubplot=te.id},ne.onmouseout=function(ve){le._dragging||c.unhover(le,ve)},c.init(this.dragOptions)}},{"../../components/color":366,"../../components/dragelement":385,"../../components/dragelement/helpers":384,"../../components/drawing":388,"../../components/fx":406,"../../components/titles":464,"../../lib":503,"../../lib/extend":493,"../../registry":638,"../cartesian/axes":554,"../cartesian/constants":561,"../cartesian/select":575,"../cartesian/set_convert":576,"../plots":619,"@plotly/d3":58,tinycolor2:312}],638:[function(_,oe,ae){"use strict";var m=_("./lib/loggers"),x=_("./lib/noop"),T=_("./lib/push_unique"),b=_("./lib/is_plain_object"),e=_("./lib/dom").addStyleRule,o=_("./lib/extend"),a=_("./plots/attributes"),l=_("./plots/layout_attributes"),i=o.extendFlat,d=o.extendDeepAll;function u(y){var M=y.name,A=y.categories,k=y.meta;if(ae.modules[M])m.log("Type "+M+" already registered");else{ae.subplotsRegistry[y.basePlotModule.name]||function(B){var V=B.name;if(ae.subplotsRegistry[V])m.log("Plot type "+V+" already registered.");else for(var Z in p(B),ae.subplotsRegistry[V]=B,ae.componentsRegistry)f(Z,B.name)}(y.basePlotModule);for(var C={},P=0;P<A.length;P++)C[A[P]]=!0,ae.allCategories[A[P]]=!0;for(var D in ae.modules[M]={_module:y,categories:C},k&&Object.keys(k).length&&(ae.modules[M].meta=k),ae.allTypes.push(M),ae.componentsRegistry)v(D,M);y.layoutAttributes&&i(ae.traceLayoutAttributes,y.layoutAttributes);var F=y.basePlotModule,R=F.name;if("mapbox"===R){var L=F.constants.styleRules;for(var I in L)e(".js-plotly-plot .plotly .mapboxgl-"+I,L[I])}"geo"!==R&&"mapbox"!==R||void 0===typeof window||void 0!==window.PlotlyGeoAssets||(window.PlotlyGeoAssets={topojson:{}})}}function s(y){if("string"!=typeof y.name)throw new Error("Component module *name* must be a string.");var M=y.name;for(var A in ae.componentsRegistry[M]=y,y.layoutAttributes&&(y.layoutAttributes._isLinkedToArray&&T(ae.layoutArrayContainers,M),p(y)),ae.modules)v(M,A);for(var k in ae.subplotsRegistry)f(M,k);for(var C in ae.transformsRegistry)g(M,C);y.schema&&y.schema.layout&&d(l,y.schema.layout)}function c(y){if("string"!=typeof y.name)throw new Error("Transform module *name* must be a string.");var M="Transform module "+y.name,A="function"==typeof y.transform,k="function"==typeof y.calcTransform;if(!A&&!k)throw new Error(M+" is missing a *transform* or *calcTransform* method.");for(var C in A&&k&&m.log([M+" has both a *transform* and *calcTransform* methods.","Please note that all *transform* methods are executed","before all *calcTransform* methods."].join(" ")),b(y.attributes)||m.log(M+" registered without an *attributes* object."),"function"!=typeof y.supplyDefaults&&m.log(M+" registered without a *supplyDefaults* method."),ae.transformsRegistry[y.name]=y,ae.componentsRegistry)g(C,y.name)}function h(y){var M=y.name,A=M.split("-")[0],k=y.dictionary,C=y.format,P=k&&Object.keys(k).length,D=C&&Object.keys(C).length,F=ae.localeRegistry,R=F[M];if(R||(F[M]=R={}),A!==M){var L=F[A];L||(F[A]=L={}),P&&L.dictionary===R.dictionary&&(L.dictionary=k),D&&L.format===R.format&&(L.format=C)}P&&(R.dictionary=k),D&&(R.format=C)}function p(y){if(y.layoutAttributes){var M=y.layoutAttributes._arrayAttrRegexps;if(M)for(var A=0;A<M.length;A++)T(ae.layoutArrayRegexes,M[A])}}function v(y,M){var A=ae.componentsRegistry[y].schema;if(A&&A.traces){var k=A.traces[M];k&&d(ae.modules[M]._module.attributes,k)}}function g(y,M){var A=ae.componentsRegistry[y].schema;if(A&&A.transforms){var k=A.transforms[M];k&&d(ae.transformsRegistry[M].attributes,k)}}function f(y,M){var A=ae.componentsRegistry[y].schema;if(A&&A.subplots){var k=ae.subplotsRegistry[M],C=k.layoutAttributes,P="subplot"===k.attr?k.name:k.attr;Array.isArray(P)&&(P=P[0]);var D=A.subplots[P];C&&D&&d(C,D)}}function w(y){return"object"==typeof y&&(y=y.type),y}ae.modules={},ae.allCategories={},ae.allTypes=[],ae.subplotsRegistry={},ae.transformsRegistry={},ae.componentsRegistry={},ae.layoutArrayContainers=[],ae.layoutArrayRegexes=[],ae.traceLayoutAttributes={},ae.localeRegistry={},ae.apiMethodRegistry={},ae.collectableSubplotTypes=null,ae.register=function(y){if(ae.collectableSubplotTypes=null,!y)throw new Error("No argument passed to Plotly.register.");y&&!Array.isArray(y)&&(y=[y]);for(var M=0;M<y.length;M++){var A=y[M];if(!A)throw new Error("Invalid module was attempted to be registered!");switch(A.moduleType){case"trace":u(A);break;case"transform":c(A);break;case"component":s(A);break;case"locale":h(A);break;case"apiMethod":ae.apiMethodRegistry[A.name]=A.fn;break;default:throw new Error("Invalid module was attempted to be registered!")}}},ae.getModule=function(y){var M=ae.modules[w(y)];return!!M&&M._module},ae.traceIs=function(y,M){if("various"===(y=w(y)))return!1;var A=ae.modules[y];return A||(y&&m.log("Unrecognized trace type "+y+"."),A=ae.modules[a.type.dflt]),!!A.categories[M]},ae.getTransformIndices=function(y,M){for(var A=[],k=y.transforms||[],C=0;C<k.length;C++)k[C].type===M&&A.push(C);return A},ae.hasTransform=function(y,M){for(var A=y.transforms||[],k=0;k<A.length;k++)if(A[k].type===M)return!0;return!1},ae.getComponentMethod=function(y,M){var A=ae.componentsRegistry[y];return A&&A[M]||x},ae.call=function(){var y=arguments[0],M=[].slice.call(arguments,1);return ae.apiMethodRegistry[y].apply(null,M)}},{"./lib/dom":491,"./lib/extend":493,"./lib/is_plain_object":504,"./lib/loggers":507,"./lib/noop":512,"./lib/push_unique":518,"./plots/attributes":550,"./plots/layout_attributes":610}],639:[function(_,oe,ae){"use strict";var m=_("../registry"),x=_("../lib"),T=x.extendFlat,b=x.extendDeep;function e(o){var a;switch(o){case"themes__thumb":a={autosize:!0,width:150,height:150,title:{text:""},showlegend:!1,margin:{l:5,r:5,t:5,b:5,pad:0},annotations:[]};break;case"thumbnail":a={title:{text:""},hidesources:!0,showlegend:!1,borderwidth:0,bordercolor:"",margin:{l:1,r:1,t:1,b:1,pad:0},annotations:[]};break;default:a={}}return a}oe.exports=function(o,a){var l,u=o.layout,s=b([],o.data),c=b({},u,e(a.tileClass)),h=o._context||{};if(a.width&&(c.width=a.width),a.height&&(c.height=a.height),"thumbnail"===a.tileClass||"themes__thumb"===a.tileClass){c.annotations=[];var p=Object.keys(c);for(l=0;l<p.length;l++)["xaxis","yaxis","zaxis"].indexOf(p[l].slice(0,5))>-1&&(c[p[l]].title={text:""});for(l=0;l<s.length;l++){var v=s[l];v.showscale=!1,v.marker&&(v.marker.showscale=!1),m.traceIs(v,"pie-like")&&(v.textposition="none")}}if(Array.isArray(a.annotations))for(l=0;l<a.annotations.length;l++)c.annotations.push(a.annotations[l]);var g=Object.keys(c).filter(function(A){return A.match(/^scene\d*$/)});if(g.length){var f={};for("thumbnail"===a.tileClass&&(f={title:{text:""},showaxeslabels:!1,showticklabels:!1,linetickenable:!1}),l=0;l<g.length;l++){var w=c[g[l]];w.xaxis||(w.xaxis={}),w.yaxis||(w.yaxis={}),w.zaxis||(w.zaxis={}),T(w.xaxis,f),T(w.yaxis,f),T(w.zaxis,f),w._scene=null}}var y=document.createElement("div");a.tileClass&&(y.className=a.tileClass);var M={gd:y,td:y,layout:c,data:s,config:{staticPlot:void 0===a.staticPlot||a.staticPlot,plotGlPixelRatio:void 0===a.plotGlPixelRatio?2:a.plotGlPixelRatio,displaylogo:a.displaylogo||!1,showLink:a.showLink||!1,showTips:a.showTips||!1,mapboxAccessToken:h.mapboxAccessToken}};return"transparent"!==a.setBackground&&(M.config.setBackground=a.setBackground||"opaque"),M.gd.defaultLayout=e(a.tileClass),M}},{"../lib":503,"../registry":638}],640:[function(_,oe,ae){"use strict";var m=_("../lib"),x=_("../plot_api/to_image"),T=_("./filesaver"),b=_("./helpers");oe.exports=function(e,o){var a;return m.isPlainObject(e)||(a=m.getGraphDiv(e)),(o=o||{}).format=o.format||"png",o.width=o.width||null,o.height=o.height||null,o.imageDataOnly=!0,new Promise(function(l,i){a&&a._snapshotInProgress&&i(new Error("Snapshotting already in progress.")),m.isIE()&&"svg"!==o.format&&i(new Error(b.MSG_IE_BAD_FORMAT)),a&&(a._snapshotInProgress=!0);var d=x(e,o),u=o.filename||e.fn||"newplot";u+="."+o.format.replace("-","."),d.then(function(s){return a&&(a._snapshotInProgress=!1),T(s,u,o.format)}).then(function(s){l(s)}).catch(function(s){a&&(a._snapshotInProgress=!1),i(s)})})}},{"../lib":503,"../plot_api/to_image":546,"./filesaver":641,"./helpers":642}],641:[function(_,oe,ae){"use strict";var m=_("../lib"),x=_("./helpers");oe.exports=function(T,b,e){var o=document.createElement("a"),a="download"in o;return new Promise(function(l,i){var d,u;return m.isIE()?(d=x.createBlob(T,"svg"),window.navigator.msSaveBlob(d,b),d=null,l(b)):a?(d=x.createBlob(T,e),u=x.createObjectURL(d),o.href=u,o.download=b,document.body.appendChild(o),o.click(),document.body.removeChild(o),x.revokeObjectURL(u),d=null,l(b)):m.isSafari()?(x.octetStream(("svg"===e?",":";base64,")+encodeURIComponent(T)),l(b)):void i(new Error("download error"))})}},{"../lib":503,"./helpers":642}],642:[function(_,oe,ae){"use strict";var m=_("../registry");ae.getDelay=function(T){return T._has&&(T._has("gl3d")||T._has("gl2d")||T._has("mapbox"))?500:0},ae.getRedrawFunc=function(T){return function(){m.getComponentMethod("colorbar","draw")(T)}},ae.encodeSVG=function(T){return"data:image/svg+xml,"+encodeURIComponent(T)},ae.encodeJSON=function(T){return"data:application/json,"+encodeURIComponent(T)};var x=window.URL||window.webkitURL;ae.createObjectURL=function(T){return x.createObjectURL(T)},ae.revokeObjectURL=function(T){return x.revokeObjectURL(T)},ae.createBlob=function(T,b){if("svg"===b)return new window.Blob([T],{type:"image/svg+xml;charset=utf-8"});if("full-json"===b)return new window.Blob([T],{type:"application/json;charset=utf-8"});var e=function(o){for(var a=o.length,l=new ArrayBuffer(a),i=new Uint8Array(l),d=0;d<a;d++)i[d]=o.charCodeAt(d);return l}(window.atob(T));return new window.Blob([e],{type:"image/"+b})},ae.octetStream=function(T){document.location.href="data:application/octet-stream"+T},ae.IMAGE_URL_PREFIX=/^data:image\/\w+;base64,/,ae.MSG_IE_BAD_FORMAT="Sorry IE does not support downloading from canvas. Try {format:'svg'} instead."},{"../registry":638}],643:[function(_,oe,ae){"use strict";var m=_("./helpers"),x={getDelay:m.getDelay,getRedrawFunc:m.getRedrawFunc,clone:_("./cloneplot"),toSVG:_("./tosvg"),svgToImg:_("./svgtoimg"),toImage:_("./toimage"),downloadImage:_("./download")};oe.exports=x},{"./cloneplot":639,"./download":640,"./helpers":642,"./svgtoimg":644,"./toimage":645,"./tosvg":646}],644:[function(_,oe,ae){"use strict";var m=_("../lib"),x=_("events").EventEmitter,T=_("./helpers");oe.exports=function(b){var e=b.emitter||new x,o=new Promise(function(a,l){var i=window.Image,d=b.svg,u=b.format||"png";if(m.isIE()&&"svg"!==u){var s=new Error(T.MSG_IE_BAD_FORMAT);return l(s),b.promise?o:e.emit("error",s)}var c,h,p=b.canvas,v=b.scale||1,w=v*(b.width||300),y=v*(b.height||150),M=p.getContext("2d"),A=new i;"svg"===u||m.isSafari()?h=T.encodeSVG(d):(c=T.createBlob(d,"svg"),h=T.createObjectURL(c)),p.width=w,p.height=y,A.onload=function(){var k;switch(c=null,T.revokeObjectURL(h),"svg"!==u&&M.drawImage(A,0,0,w,y),u){case"jpeg":k=p.toDataURL("image/jpeg");break;case"png":k=p.toDataURL("image/png");break;case"webp":k=p.toDataURL("image/webp");break;case"svg":k=h;break;default:var C="Image format is not jpeg, png, svg or webp.";if(l(new Error(C)),!b.promise)return e.emit("error",C)}a(k),b.promise||e.emit("success",k)},A.onerror=function(k){if(c=null,T.revokeObjectURL(h),l(k),!b.promise)return e.emit("error",k)},A.src=h});return b.promise?o:e}},{"../lib":503,"./helpers":642,events:84}],645:[function(_,oe,ae){"use strict";var m=_("events").EventEmitter,x=_("../registry"),T=_("../lib"),b=_("./helpers"),e=_("./cloneplot"),o=_("./tosvg"),a=_("./svgtoimg");oe.exports=function(l,i){var d=new m,u=e(l,{format:"png"}),s=u.gd;s.style.position="absolute",s.style.left="-5000px",document.body.appendChild(s);var c=b.getRedrawFunc(s);return x.call("_doPlot",s,u.data,u.layout,u.config).then(c).then(function(){var h=b.getDelay(s._fullLayout);setTimeout(function(){var p=o(s),v=document.createElement("canvas");v.id=T.randstr(),(d=a({format:i.format,width:s._fullLayout.width,height:s._fullLayout.height,canvas:v,emitter:d,svg:p})).clean=function(){s&&document.body.removeChild(s)}},h)}).catch(function(h){d.emit("error",h)}),d}},{"../lib":503,"../registry":638,"./cloneplot":639,"./helpers":642,"./svgtoimg":644,"./tosvg":646,events:84}],646:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../lib"),T=_("../components/drawing"),b=_("../components/color"),e=_("../constants/xmlns_namespaces"),o=/"/g,a=new RegExp('("TOBESTRIPPED)|(TOBESTRIPPED")',"g");oe.exports=function(l,i,d){var u,s,c=l._fullLayout,h=c._paper,p=c._toppaper,v=c.width,g=c.height;h.insert("rect",":first-child").call(T.setRect,0,0,v,g).call(b.fill,c.paper_bgcolor);var f=c._basePlotModules||[];for(u=0;u<f.length;u++){var w=f[u];w.toSVG&&w.toSVG(l)}if(p){var y=p.node().childNodes,M=Array.prototype.slice.call(y);for(u=0;u<M.length;u++){var A=M[u];A.childNodes.length&&h.node().appendChild(A)}}c._draggers&&c._draggers.remove(),h.node().style.background="",h.selectAll("text").attr({"data-unformatted":null,"data-math":null}).each(function(){var P=m.select(this);if("hidden"!==this.style.visibility&&"none"!==this.style.display){P.style({visibility:null,display:null});var D=this.style.fontFamily;D&&-1!==D.indexOf('"')&&P.style("font-family",D.replace(o,"TOBESTRIPPED"))}else P.remove()});var k=[];if(c._gradientUrlQueryParts)for(s in c._gradientUrlQueryParts)k.push(s);if(c._patternUrlQueryParts)for(s in c._patternUrlQueryParts)k.push(s);k.length&&h.selectAll(k.join(",")).each(function(){var P=m.select(this),D=this.style.fill;D&&-1!==D.indexOf("url(")&&P.style("fill",D.replace(o,"TOBESTRIPPED"));var F=this.style.stroke;F&&-1!==F.indexOf("url(")&&P.style("stroke",F.replace(o,"TOBESTRIPPED"))}),"pdf"!==i&&"eps"!==i||h.selectAll("#MathJax_SVG_glyphs path").attr("stroke-width",0),h.node().setAttributeNS(e.xmlns,"xmlns",e.svg),h.node().setAttributeNS(e.xmlns,"xmlns:xlink",e.xlink),"svg"===i&&d&&(h.attr("width",d*v),h.attr("height",d*g),h.attr("viewBox","0 0 "+v+" "+g));var P,D,F,C=(new window.XMLSerializer).serializeToString(h.node());return P=C,D=m.select("body").append("div").style({display:"none"}).html(""),F=P.replace(/(&[^;]*;)/gi,function(R){return"&lt;"===R?"&#60;":"&rt;"===R?"&#62;":-1!==R.indexOf("<")||-1!==R.indexOf(">")?"":D.html(R).text()}),D.remove(),C=(C=(C=F).replace(/&(?!\w+;|\#[0-9]+;| \#x[0-9A-F]+;)/g,"&amp;")).replace(a,"'"),x.isIE()&&(C=(C=(C=C.replace(/"/gi,"'")).replace(/(\('#)([^']*)('\))/gi,'("#$2")')).replace(/(\\')/gi,'"')),C}},{"../components/color":366,"../components/drawing":388,"../constants/xmlns_namespaces":480,"../lib":503,"@plotly/d3":58}],647:[function(_,oe,ae){"use strict";var m=_("../../lib");oe.exports=function(x,T){for(var b=0;b<x.length;b++)x[b].i=b;m.mergeArray(T.text,x,"tx"),m.mergeArray(T.hovertext,x,"htx");var e=T.marker;if(e){m.mergeArray(e.opacity,x,"mo",!0),m.mergeArray(e.color,x,"mc");var o=e.line;o&&(m.mergeArray(o.color,x,"mlc"),m.mergeArrayCastPositive(o.width,x,"mlw"))}}},{"../../lib":503}],648:[function(_,oe,ae){"use strict";var m=_("../scatter/attributes"),x=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../../plots/template_attributes").texttemplateAttrs,e=_("../../components/colorscale/attributes"),o=_("../../plots/font_attributes"),a=_("./constants"),l=_("../../components/drawing/attributes").pattern,i=_("../../lib/extend").extendFlat,d=o({editType:"calc",arrayOk:!0,colorEditType:"style"}),u=i({},m.marker.line.width,{dflt:0}),s=i({width:u,editType:"calc"},e("marker.line")),c=i({line:s,editType:"calc"},e("marker"),{opacity:{valType:"number",arrayOk:!0,dflt:1,min:0,max:1,editType:"style"},pattern:l});oe.exports={x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),text:m.text,texttemplate:b({editType:"plot"},{keys:a.eventDataKeys}),hovertext:m.hovertext,hovertemplate:T({},{keys:a.eventDataKeys}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"calc"},insidetextanchor:{valType:"enumerated",values:["end","middle","start"],dflt:"end",editType:"plot"},textangle:{valType:"angle",dflt:"auto",editType:"plot"},textfont:i({},d,{}),insidetextfont:i({},d,{}),outsidetextfont:i({},d,{}),constraintext:{valType:"enumerated",values:["inside","outside","both","none"],dflt:"both",editType:"calc"},cliponaxis:i({},m.cliponaxis,{}),orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},base:{valType:"any",dflt:null,arrayOk:!0,editType:"calc"},offset:{valType:"number",dflt:null,arrayOk:!0,editType:"calc"},width:{valType:"number",dflt:null,min:0,arrayOk:!0,editType:"calc"},marker:c,offsetgroup:{valType:"string",dflt:"",editType:"calc"},alignmentgroup:{valType:"string",dflt:"",editType:"calc"},selected:{marker:{opacity:m.selected.marker.opacity,color:m.selected.marker.color,editType:"style"},textfont:m.selected.textfont,editType:"style"},unselected:{marker:{opacity:m.unselected.marker.opacity,color:m.unselected.marker.color,editType:"style"},textfont:m.unselected.textfont,editType:"style"},_deprecated:{bardir:{valType:"enumerated",editType:"calc",values:["v","h"]}}}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":926,"./constants":650}],649:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/axes"),x=_("../../plots/cartesian/align_period"),T=_("../../components/colorscale/helpers").hasColorscale,b=_("../../components/colorscale/calc"),e=_("./arrays_to_calcdata"),o=_("../scatter/calc_selection");oe.exports=function(a,l){var i,d,u,s,c,h,p=m.getFromId(a,l.xaxis||"x"),v=m.getFromId(a,l.yaxis||"y"),g={msUTC:!(!l.base&&0!==l.base)};"h"===l.orientation?(i=p.makeCalcdata(l,"x",g),u=v.makeCalcdata(l,"y"),s=x(l,v,"y",u),c=!!l.yperiodalignment,h="y"):(i=v.makeCalcdata(l,"y",g),u=p.makeCalcdata(l,"x"),s=x(l,p,"x",u),c=!!l.xperiodalignment,h="x"),d=s.vals;for(var f=Math.min(d.length,i.length),w=new Array(f),y=0;y<f;y++)w[y]={p:d[y],s:i[y]},c&&(w[y].orig_p=u[y],w[y][h+"End"]=s.ends[y],w[y][h+"Start"]=s.starts[y]),l.ids&&(w[y].id=String(l.ids[y]));return T(l,"marker")&&b(a,l,{vals:l.marker.color,containerStr:"marker",cLetter:"c"}),T(l,"marker.line")&&b(a,l,{vals:l.marker.line.color,containerStr:"marker.line",cLetter:"c"}),e(w,l),o(w,l),w}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928,"./arrays_to_calcdata":647}],650:[function(_,oe,ae){"use strict";oe.exports={TEXTPAD:3,eventDataKeys:["value","label"]}},{}],651:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../lib").isArrayOrTypedArray,T=_("../../constants/numerical").BADNUM,b=_("../../registry"),e=_("../../plots/cartesian/axes"),o=_("../../plots/cartesian/constraints").getAxisGroup,a=_("./sieve.js");function l(f,w,y,M,A){if(M.length){var k,C,P,D;switch(function(F,R){var L,I;for(L=0;L<R.length;L++){var B,V=R[L],Z=V[0].trace,Y="funnel"===Z.type?Z._base:Z.base,ee="h"===Z.orientation?Z.xcalendar:Z.ycalendar,J="category"===F.type||"multicategory"===F.type?function(){return null}:F.d2c;if(x(Y)){for(I=0;I<Math.min(Y.length,V.length);I++)B=J(Y[I],0,ee),m(B)?(V[I].b=+B,V[I].hasB=1):V[I].b=0;for(;I<V.length;I++)V[I].b=0}else{B=J(Y,0,ee);var $=m(B);for(B=$?B:0,I=0;I<V.length;I++)V[I].b=B,$&&(V[I].hasB=1)}}}(y,M),A.mode){case"overlay":i(w,y,M,A);break;case"group":for(k=[],C=[],P=0;P<M.length;P++)void 0===(D=M[P])[0].trace.offset?C.push(D):k.push(D);C.length&&(F=f,L=y,V=new a(C,{posAxis:R=w,sepNegVal:!1,overlapNoMerge:!(B=A).norm}),function(Z,Y,ee,J){for(var $=Z._fullLayout,j=ee.minDiff,G=ee.traces,W=G.length,ie=ee.positions.length!==ee.distinctPositions.length,q=j*(1-J.gap),te=o($,Y._id)+G[0][0].trace.orientation,ne=$._alignmentOpts[te]||{},le=0;le<W;le++){var ue,de,he=G[le],be=he[0].trace,we=Object.keys((ne[be.alignmentgroup]||{}).offsetGroups||{}).length,Ce=(ue=we?q/we:ie?q/W:q)*(1-(J.groupgap||0));de=we?((2*be._offsetIndex+1-we)*ue-Ce)/2:ie?((2*le+1-W)*ue-Ce)/2:-Ce/2;var De=he[0].t;De.barwidth=Ce,De.poffset=de,De.bargroupwidth=q,De.bardelta=j}ee.binWidth=G[0][0].t.barwidth/100,u(ee),s(Y,ee),c(Y,ee,ie)}(F,R,V,B),function(Z,Y){for(var ee=Z.traces,J=0;J<ee.length;J++){var $=ee[J];if(void 0===$[0].trace.base)for(var Q=new a([$],{posAxis:Y,sepNegVal:!0,overlapNoMerge:!0}),se=0;se<$.length;se++){var j=$[se];if(j.p!==T){var G=Q.put(j.p,j.b+j.s);G&&(j.b=G)}}}}(V,R),B.norm?(p(V),v(L,V,B)):h(L,V)),k.length&&i(w,y,k,A);break;case"stack":case"relative":for(k=[],C=[],P=0;P<M.length;P++)void 0===(D=M[P])[0].trace.base?C.push(D):k.push(D);C.length&&function(F,R,L,I,B){var V=new a(I,{posAxis:R,sepNegVal:"relative"===B.mode,overlapNoMerge:!(B.norm||"stack"===B.mode||"relative"===B.mode)});d(R,V,B),function($,Q,se){var j,G,W,ie,q,te,ne=g($),le=Q.traces;for(ie=0;ie<le.length;ie++)if("funnel"===(G=(j=le[ie])[0].trace).type)for(q=0;q<j.length;q++)(te=j[q]).s!==T&&Q.put(te.p,-.5*te.s);for(ie=0;ie<le.length;ie++){W="funnel"===(G=(j=le[ie])[0].trace).type;var ue=[];for(q=0;q<j.length;q++)if((te=j[q]).s!==T){var de,he=Q.put(te.p,de=W?te.s:te.s+te.b),be=he+de;te.b=he,te[ne]=be,se.norm||(ue.push(be),te.hasB&&ue.push(he))}se.norm||(G._extremes[$._id]=e.findExtremes($,ue,{tozero:!0,padded:!0}))}}(L,V,B);for(var Z=0;Z<I.length;Z++)for(var Y=I[Z],ee=0;ee<Y.length;ee++){var J=Y[ee];J.s!==T&&J.b+J.s===V.get(J.p,J.s)&&(J._outmost=!0)}B.norm&&v(L,V,B)}(0,w,y,C,A),k.length&&i(w,y,k,A)}!function(F,R){var L,I,B,V=g(R),Z={},Y=1/0,ee=-1/0;for(L=0;L<F.length;L++)for(B=F[L],I=0;I<B.length;I++){var J=B[I].p;m(J)&&(Y=Math.min(Y,J),ee=Math.max(ee,J))}var $=1e4/(ee-Y),Q=Z.round=function(te){return String(Math.round($*(te-Y)))};for(L=0;L<F.length;L++){(B=F[L])[0].t.extents=Z;var se=B[0].t.poffset,j=Array.isArray(se);for(I=0;I<B.length;I++){var G=B[I],W=G[V]-G.w/2;if(m(W)){var ie=G[V]+G.w/2,q=Q(G.p);Z[q]=Z[q]?[Math.min(W,Z[q][0]),Math.max(ie,Z[q][1])]:[W,ie]}G.p0=G.p+(j?se[I]:se),G.p1=G.p0+G.w,G.s0=G.b,G.s1=G.s0+G.s}}}(M,w)}var F,R,L,B,V}function i(f,w,y,M){for(var A=0;A<y.length;A++){var C=new a([y[A]],{posAxis:f,sepNegVal:!1,overlapNoMerge:!M.norm});d(f,C,M),M.norm?(p(C),v(w,C,M)):h(w,C)}}function d(f,w,y){for(var M=w.minDiff,A=w.traces,k=M*(1-y.gap),C=k*(1-(y.groupgap||0)),P=-C/2,D=0;D<A.length;D++){var F=A[D][0].t;F.barwidth=C,F.poffset=P,F.bargroupwidth=k,F.bardelta=M}w.binWidth=A[0][0].t.barwidth/100,u(w),s(f,w),c(f,w)}function u(f){var w,y,M=f.traces;for(w=0;w<M.length;w++){var A,k=M[w],C=k[0],P=C.trace,D=C.t,F=P._offset||P.offset,R=D.poffset;if(x(F)){for(A=Array.prototype.slice.call(F,0,k.length),y=0;y<A.length;y++)m(A[y])||(A[y]=R);for(y=A.length;y<k.length;y++)A.push(R);D.poffset=A}else void 0!==F&&(D.poffset=F);var L=P._width||P.width,I=D.barwidth;if(x(L)){var B=Array.prototype.slice.call(L,0,k.length);for(y=0;y<B.length;y++)m(B[y])||(B[y]=I);for(y=B.length;y<k.length;y++)B.push(I);if(D.barwidth=B,void 0===F){for(A=[],y=0;y<k.length;y++)A.push(R+(I-B[y])/2);D.poffset=A}}else void 0!==L&&(D.barwidth=L,void 0===F&&(D.poffset=R+(I-L)/2))}}function s(f,w){for(var y=w.traces,M=g(f),A=0;A<y.length;A++)for(var k=y[A],C=k[0].t,P=C.poffset,D=Array.isArray(P),F=C.barwidth,R=Array.isArray(F),L=0;L<k.length;L++){var I=k[L],B=I.w=R?F[L]:F;I[M]=I.p+(D?P[L]:P)+B/2}}function c(f,w,y){var M=w.traces,A=w.minDiff/2;e.minDtick(f,w.minDiff,w.distinctPositions[0],y);for(var k=0;k<M.length;k++){var C,P,D,F,R=M[k],L=R[0],I=L.trace,B=[];for(F=0;F<R.length;F++)P=(C=R[F]).p-A,B.push(P,D=C.p+A);if(I.width||I.offset){var V=L.t,Z=V.poffset,Y=V.barwidth,ee=Array.isArray(Z),J=Array.isArray(Y);for(F=0;F<R.length;F++)D=(P=(C=R[F]).p+(ee?Z[F]:Z))+(J?Y[F]:Y),B.push(P,D)}I._extremes[f._id]=e.findExtremes(f,B,{padded:!1})}}function h(f,w){for(var y=w.traces,M=g(f),A=0;A<y.length;A++){for(var k=y[A],C=k[0].trace,P=[],D=!1,F=0;F<k.length;F++){var R=k[F],L=R.b,I=L+R.s;R[M]=I,P.push(I),R.hasB&&P.push(L),R.hasB&&R.b||(D=!0)}C._extremes[f._id]=e.findExtremes(f,P,{tozero:D,padded:!0})}}function p(f){for(var w=f.traces,y=0;y<w.length;y++)for(var M=w[y],A=0;A<M.length;A++){var k=M[A];k.s!==T&&f.put(k.p,k.b+k.s)}}function v(f,w,y){var M=w.traces,A=g(f),k="fraction"===y.norm?1:100,C=k/1e9,P=f.l2c(f.c2l(0)),D="stack"===y.mode?k:P;function F(se){return m(f.c2l(se))&&(se<P-C||se>D+C||!m(P))}for(var R=0;R<M.length;R++){for(var L=M[R],I=L[0].trace,B=[],V=!1,Z=!1,Y=0;Y<L.length;Y++){var ee=L[Y];if(ee.s!==T){var J=Math.abs(k/w.get(ee.p,ee.s));ee.b*=J,ee.s*=J;var $=ee.b,Q=$+ee.s;ee[A]=Q,B.push(Q),Z=Z||F(Q),ee.hasB&&(B.push($),Z=Z||F($)),ee.hasB&&ee.b||(V=!0)}}I._extremes[f._id]=e.findExtremes(f,B,{tozero:V,padded:Z})}}function g(f){return f._id.charAt(0)}oe.exports={crossTraceCalc:function(f,w){for(var y=w.xaxis,M=w.yaxis,A=f._fullLayout,k=f._fullData,C=f.calcdata,P=[],D=[],F=0;F<k.length;F++){var R=k[F];if(!0===R.visible&&b.traceIs(R,"bar")&&R.xaxis===y._id&&R.yaxis===M._id&&("h"===R.orientation?P.push(C[F]):D.push(C[F]),R._computePh))for(var L=f.calcdata[F],I=0;I<L.length;I++)"function"==typeof L[I].ph0&&(L[I].ph0=L[I].ph0()),"function"==typeof L[I].ph1&&(L[I].ph1=L[I].ph1())}var B={xCat:"category"===y.type||"multicategory"===y.type,yCat:"category"===M.type||"multicategory"===M.type,mode:A.barmode,norm:A.barnorm,gap:A.bargap,groupgap:A.bargroupgap};l(f,y,M,D,B),l(f,M,y,P,B)},setGroupPositions:l}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562,"../../registry":638,"./sieve.js":661,"fast-isnumeric":190}],652:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../components/color"),T=_("../../registry"),b=_("../scatter/xy_defaults"),e=_("../scatter/period_defaults"),o=_("./style_defaults"),a=_("../../plots/cartesian/constraints").getAxisGroup,l=_("./attributes"),i=m.coerceFont;function d(s,c,h,p){var v=c.orientation,f=a(h,c[{v:"x",h:"y"}[v]+"axis"])+v,w=h._alignmentOpts||{},y=p("alignmentgroup"),M=w[f];M||(M=w[f]={});var A=M[y];A?A.traces.push(c):A=M[y]={traces:[c],alignmentIndex:Object.keys(M).length,offsetGroups:{}};var k=p("offsetgroup"),C=A.offsetGroups,P=C[k];k&&(P||(P=C[k]={offsetIndex:Object.keys(C).length}),c._offsetIndex=P.offsetIndex)}function u(s,c,h,p,v,g){var f=!1!==(g=g||{}).moduleHasSelected,w=!1!==g.moduleHasUnselected,y=!1!==g.moduleHasConstrain,M=!1!==g.moduleHasCliponaxis,A=!1!==g.moduleHasTextangle,k=!1!==g.moduleHasInsideanchor,C=!!g.hasPathbar,P=Array.isArray(v)||"auto"===v,D=P||"inside"===v,F=P||"outside"===v;if(D||F){var R=i(p,"textfont",h.font),L=m.extendFlat({},R),I=!(s.textfont&&s.textfont.color);if(I&&delete L.color,i(p,"insidetextfont",L),C){var B=m.extendFlat({},R);I&&delete B.color,i(p,"pathbar.textfont",B)}F&&i(p,"outsidetextfont",R),f&&p("selected.textfont.color"),w&&p("unselected.textfont.color"),y&&p("constraintext"),M&&p("cliponaxis"),A&&p("textangle"),p("texttemplate")}D&&k&&p("insidetextanchor")}oe.exports={supplyDefaults:function(s,c,h,p){function v(y,M){return m.coerce(s,c,l,y,M)}if(b(s,c,p,v)){e(s,c,p,v),v("xhoverformat"),v("yhoverformat"),v("orientation",c.x&&!c.y?"h":"v"),v("base"),v("offset"),v("width"),v("text"),v("hovertext"),v("hovertemplate");var g=v("textposition");u(s,0,p,v,g,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),o(s,c,v,h,p);var f=(c.marker.line||{}).color,w=T.getComponentMethod("errorbars","supplyDefaults");w(s,c,f||x.defaultLine,{axis:"y"}),w(s,c,f||x.defaultLine,{axis:"x",inherit:"y"}),m.coerceSelectionMarkerOpacity(c,v)}else c.visible=!1},crossTraceDefaults:function(s,c){var h;function p(g){return m.coerce(h._input,h,l,g)}if("group"===c.barmode)for(var v=0;v<s.length;v++)"bar"===(h=s[v]).type&&d(0,h,c,p)},handleGroupingDefaults:d,handleText:u}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/constraints":562,"../../registry":638,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":648,"./style_defaults":663}],653:[function(_,oe,ae){"use strict";oe.exports=function(m,x,T){return m.x="xVal"in x?x.xVal:x.x,m.y="yVal"in x?x.yVal:x.y,x.xa&&(m.xaxis=x.xa),x.ya&&(m.yaxis=x.ya),"h"===T.orientation?(m.label=m.y,m.value=m.x):(m.label=m.x,m.value=m.y),m}},{}],654:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("tinycolor2"),T=_("../../lib").isArrayOrTypedArray;ae.coerceString=function(b,e,o){if("string"==typeof e){if(e||!b.noBlank)return e}else if(("number"==typeof e||!0===e)&&!b.strict)return String(e);return void 0!==o?o:b.dflt},ae.coerceNumber=function(b,e,o){if(m(e)){e=+e;var a=b.min,l=b.max;if(!(void 0!==a&&e<a||void 0!==l&&e>l))return e}return void 0!==o?o:b.dflt},ae.coerceColor=function(b,e,o){return x(e).isValid()?e:void 0!==o?o:b.dflt},ae.coerceEnumerated=function(b,e,o){return b.coerceNumber&&(e=+e),-1!==b.values.indexOf(e)?e:void 0!==o?o:b.dflt},ae.getValue=function(b,e){var o;return Array.isArray(b)?e<b.length&&(o=b[e]):o=b,o},ae.getLineWidth=function(b,e){return 0<e.mlw?e.mlw:T(b.marker.line.width)?0:b.marker.line.width}},{"../../lib":503,"fast-isnumeric":190,tinycolor2:312}],655:[function(_,oe,ae){"use strict";var m=_("../../components/fx"),x=_("../../registry"),T=_("../../components/color"),b=_("../../lib").fillText,e=_("./helpers").getLineWidth,o=_("../../plots/cartesian/axes").hoverLabelText,a=_("../../constants/numerical").BADNUM;function l(d,u,s,c,h){var p,v,g,f,w,y,M,A=d.cd,k=A[0].trace,C=A[0].t,P="closest"===c,D="waterfall"===k.type,F=d.maxHoverDistance,R=d.maxSpikeDistance;"h"===k.orientation?(p=s,v=u,g="y",f="x",w=j,y=Q):(p=u,v=s,g="x",f="y",y=j,w=Q);var L=k[g+"period"],I=P||L;function B(ue){return Z(ue,-1)}function V(ue){return Z(ue,1)}function Z(ue,de){return ue[g]+de*ue.w/2}function Y(ue){return ue[g+"End"]-ue[g+"Start"]}var ee=P?B:L?function(ue){return ue.p-Y(ue)/2}:function(ue){return Math.min(B(ue),ue.p-C.bardelta/2)},J=P?V:L?function(ue){return ue.p+Y(ue)/2}:function(ue){return Math.max(V(ue),ue.p+C.bardelta/2)};function $(ue,de,he){return h.finiteRange&&(he=0),m.inbox(ue-p,de-p,he+Math.min(1,Math.abs(de-ue)/M)-1)}function Q(ue){return $(ee(ue),J(ue),F)}function se(ue){var de=ue[f];if(D){var he=Math.abs(ue.rawS)||0;v>0?de+=he:v<0&&(de-=he)}return de}function j(ue){var de=v,he=ue.b,be=se(ue);return m.inbox(he-de,be-de,F+(be-de)/(be-he)-1)}var G=d[g+"a"],W=d[f+"a"];M=Math.abs(G.r2c(G.range[1])-G.r2c(G.range[0]));var ue,de,he,be,ie=m.getDistanceFunction(c,w,y,function(ue){return(w(ue)+y(ue))/2});if(m.getClosest(A,ie,d),!1!==d.index&&A[d.index].p!==a){I||(ee=function(ue){return Math.min(B(ue),ue.p-C.bargroupwidth/2)},J=function(ue){return Math.max(V(ue),ue.p+C.bargroupwidth/2)});var q=A[d.index],te=k.base?q.b+q.s:q.s;d[f+"0"]=d[f+"1"]=W.c2p(q[f],!0),d[f+"LabelVal"]=te;var ne=C.extents[C.extents.round(q.p)];return d[g+"0"]=G.c2p(P?ee(q):ne[0],!0),d[g+"1"]=G.c2p(P?J(q):ne[1],!0),d[g+"LabelVal"]=void 0!==q.orig_p?q.orig_p:q.p,d.labelLabel=o(G,d[g+"LabelVal"],k[g+"hoverformat"]),d.valueLabel=o(W,d[f+"LabelVal"],k[f+"hoverformat"]),d.baseLabel=o(W,q.b,k[f+"hoverformat"]),d.spikeDistance=(de=v,he=(ue=q).b,be=se(ue),(m.inbox(he-de,be-de,R+(be-de)/(be-he)-1)+function(ue){return $(B(ue),V(ue),R)}(q))/2),d[g+"Spike"]=G.c2p(q.p,!0),b(q,k,d),d.hovertemplate=k.hovertemplate,d}}function i(d,u){var s=u.mcc||d.marker.color,c=u.mlcc||d.marker.line.color,h=e(d,u);return T.opacity(s)?s:T.opacity(c)&&h?c:void 0}oe.exports={hoverPoints:function(d,u,s,c,h){var p=l(d,u,s,c,h);if(p){var v=p.cd,g=v[0].trace,f=v[p.index];return p.color=i(g,f),x.getComponentMethod("errorbars","hoverInfo")(f,g,p),[p]}},hoverOnBars:l,getTraceColor:i}},{"../../components/color":366,"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./helpers":654}],656:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults").supplyDefaults,crossTraceDefaults:_("./defaults").crossTraceDefaults,supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc"),crossTraceCalc:_("./cross_trace_calc").crossTraceCalc,colorbar:_("../scatter/marker_colorbar"),arraysToCalcdata:_("./arrays_to_calcdata"),plot:_("./plot").plot,style:_("./style").style,styleOnSelect:_("./style").styleOnSelect,hoverPoints:_("./hover").hoverPoints,eventData:_("./event_data"),selectPoints:_("./select"),moduleType:"trace",name:"bar",basePlotModule:_("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","oriented","errorBarsOK","showLegend","zoomScale"],animatable:!0,meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":944,"./arrays_to_calcdata":647,"./attributes":648,"./calc":649,"./cross_trace_calc":651,"./defaults":652,"./event_data":653,"./hover":655,"./layout_attributes":657,"./layout_defaults":658,"./plot":659,"./select":660,"./style":662}],657:[function(_,oe,ae){"use strict";oe.exports={barmode:{valType:"enumerated",values:["stack","group","overlay","relative"],dflt:"group",editType:"calc"},barnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},bargap:{valType:"number",min:0,max:1,editType:"calc"},bargroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],658:[function(_,oe,ae){"use strict";var m=_("../../registry"),x=_("../../plots/cartesian/axes"),T=_("../../lib"),b=_("./layout_attributes");oe.exports=function(e,o,a){function l(g,f){return T.coerce(e,o,b,g,f)}for(var i=!1,d=!1,u=!1,s={},c=l("barmode"),h=0;h<a.length;h++){var p=a[h];if(m.traceIs(p,"bar")&&p.visible){if(i=!0,"group"===c){var v=p.xaxis+p.yaxis;s[v]&&(u=!0),s[v]=!0}p.visible&&"histogram"===p.type&&"category"!==x.getFromId({_fullLayout:o},p["v"===p.orientation?"xaxis":"yaxis"]).type&&(d=!0)}}i?("overlay"!==c&&l("barnorm"),l("bargap",d&&!u?0:.2),l("bargroupgap")):delete o.barmode}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"./layout_attributes":657}],659:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("../../lib"),b=_("../../lib/svg_text_utils"),e=_("../../components/color"),o=_("../../components/drawing"),a=_("../../registry"),l=_("../../plots/cartesian/axes").tickText,i=_("./uniform_text"),d=i.recordMinTextSize,u=i.clearMinTextSize,s=_("./style"),c=_("./helpers"),h=_("./constants"),p=_("./attributes"),v=p.text,g=p.textposition,f=_("../../components/fx/helpers").appendArrayPointValue,w=h.TEXTPAD;function y(R){return R.id}function A(R,L){return R<L?1:-1}function k(R,L,I,B){var V;return!L.uniformtext.mode&&C(I)?(B&&(V=B()),R.transition().duration(I.duration).ease(I.easing).each("end",function(){V&&V()}).each("interrupt",function(){V&&V()})):R}function C(R){return R&&R.duration>0}function P(R){return"auto"===R?0:R}function D(R,L){var I=Math.PI/180*L,B=Math.abs(Math.sin(I)),V=Math.abs(Math.cos(I));return{x:R.width*V+R.height*B,y:R.width*B+R.height*V}}function F(R,L,I,B,V,Z){var Y=!!Z.isHorizontal,ee=!!Z.constrained,J=Z.angle||0,$=Z.anchor||"end",Q="end"===$,se="start"===$,j=((Z.leftToRight||0)+1)/2,G=1-j,W=V.width,ie=V.height,q=Math.abs(L-R),te=Math.abs(B-I),ne=q>2*w&&te>2*w?w:0;q-=2*ne,te-=2*ne;var le=P(J);"auto"!==J||W<=q&&ie<=te||!(W>q||ie>te)||(W>te||ie>q)&&W<ie==q<te||(le+=90);var ue=D(V,le),de=1;ee&&(de=Math.min(1,q/ue.x,te/ue.y));var he=V.left*G+V.right*j,be=(V.top+V.bottom)/2,ge=(R+w)*G+(L-w)*j,we=(I+B)/2,Ce=0,De=0;if(se||Q){var Se=(Y?ue.x:ue.y)/2,Fe=Y?A(R,L):A(I,B);Y?se?(ge=R+Fe*ne,Ce=-Fe*Se):(ge=L-Fe*ne,Ce=Fe*Se):se?(we=I+Fe*ne,De=-Fe*Se):(we=B-Fe*ne,De=Fe*Se)}return{textX:he,textY:be,targetX:ge,targetY:we,anchorX:Ce,anchorY:De,scale:de,rotate:le}}oe.exports={plot:function(R,L,I,B,V,Z){var Y=L.xaxis,ee=L.yaxis,J=R._fullLayout;V||(V={mode:J.barmode,norm:J.barmode,gap:J.bargap,groupgap:J.bargroupgap},u("bar",J));var $=T.makeTraceGroups(B,I,"trace bars").each(function(Q){var se=m.select(this),j=Q[0].trace,ie="bar"===j.type||"funnel"===j.type,q=0;"waterfall"===j.type&&j.connector.visible&&"between"===j.connector.mode&&(q=j.connector.line.width/2);var te="h"===j.orientation,ne=C(V),le=T.ensureSingle(se,"g","points"),ue=function M(R){if(R.ids)return y}(j),de=le.selectAll("g.point").data(T.identity,ue);de.enter().append("g").classed("point",!0),de.exit().remove(),de.each(function(be,ge){var we,Ce,Ue,$e,et,tt,ct,xt,Ct,Ht,De=m.select(this),Se=($e=Y,et=ee,xt=[],Ht=(tt=te)?et:$e,(ct=[])[0]=(Ct=tt?$e:et).c2p((Ue=be).s0,!0),xt[0]=Ht.c2p(Ue.p0,!0),ct[1]=Ct.c2p(Ue.s1,!0),xt[1]=Ht.c2p(Ue.p1,!0),tt?[ct,xt]:[xt,ct]),Fe=Se[0][0],ve=Se[0][1],Te=Se[1][0],Le=Se[1][1],Ee=0==(te?ve-Fe:Le-Te);if(Ee&&ie&&c.getLineWidth(j,be)&&(Ee=!1),Ee||(Ee=!(x(Fe)&&x(ve)&&x(Te)&&x(Le))),be.isBlank=Ee,Ee&&(te?ve=Fe:Le=Te),q&&!Ee&&(te?(Fe-=A(Fe,ve)*q,ve+=A(Fe,ve)*q):(Te-=A(Te,Le)*q,Le+=A(Te,Le)*q)),"waterfall"===j.type){if(!Ee){var Pe=j[be.dir].marker;we=Pe.line.width,Ce=Pe.color}}else we=c.getLineWidth(j,be),Ce=be.mc||j.marker.color;function je(Ue){var $e=m.round(we/2%1,2);return 0===V.gap&&0===V.groupgap?m.round(Math.round(Ue)-$e,2):Ue}if(!R._context.staticPlot){var Ge=e.opacity(Ce)<1||we>.01?je:function(Ue,$e,et){return et&&Ue===$e?Ue:Math.abs(Ue-$e)>=2?je(Ue):Ue>$e?Math.ceil(Ue):Math.floor(Ue)};Fe=Ge(Fe,ve,te),ve=Ge(ve,Fe,te),Te=Ge(Te,Le,!te),Le=Ge(Le,Te,!te)}var Ke=k(T.ensureSingle(De,"path"),J,V,Z);if(Ke.style("vector-effect","non-scaling-stroke").attr("d",isNaN((ve-Fe)*(Le-Te))||Ee&&R._context.staticPlot?"M0,0Z":"M"+Fe+","+Te+"V"+Le+"H"+ve+"V"+Te+"Z").call(o.setClipUrl,L.layerClipId,R),!J.uniformtext.mode&&ne){var lt=o.makePointStyleFns(j);o.singlePointStyle(be,Ke,j,lt,R)}(function(Ue,$e,et,tt,ct,xt,Ct,Ht,zt,ht,ut){var Ot,tn=$e.xaxis,un=$e.yaxis,Ze=Ue._fullLayout;function Qe(en,on,wn){return T.ensureSingle(en,"text").text(on).attr({class:"bartext bartext-"+Ot,"text-anchor":"middle","data-notex":1}).call(o.font,wn).call(b.convertToTspans,Ue)}var on,wn,On,Dn,Tn,pn,qe=tt[0].trace,it="h"===qe.orientation,Ie=(wn=ct,On=tn,Dn=un,Tn=(pn=(on=tt)[0].trace).texttemplate?function(En,Un,In,sr,fr){var rr=Un[0].trace,qr=T.castOption(rr,In,"texttemplate");if(!qr)return"";var ti,Ar,pr,Fn,Rn="histogram"===rr.type,hr="waterfall"===rr.type,ri="funnel"===rr.type,ir="h"===rr.orientation;function Ur(An){return l(Fn,Fn.c2l(An),!0).text}ir?(ti="y",Ar=fr,pr="x",Fn=sr):(ti="x",Ar=sr,pr="y",Fn=fr);var Mr=Un[In],wr={};wr.label=Mr.p,wr.labelLabel=wr[ti+"Label"]=l(Ar,Ar.c2l(Mr.p),!0).text;var gn=T.castOption(rr,Mr.i,"text");(0===gn||gn)&&(wr.text=gn),wr.value=Mr.s,wr.valueLabel=wr[pr+"Label"]=Ur(Mr.s);var jt={};f(jt,rr,Mr.i),(Rn||void 0===jt.x)&&(jt.x=ir?wr.value:wr.label),(Rn||void 0===jt.y)&&(jt.y=ir?wr.label:wr.value),(Rn||void 0===jt.xLabel)&&(jt.xLabel=ir?wr.valueLabel:wr.labelLabel),(Rn||void 0===jt.yLabel)&&(jt.yLabel=ir?wr.labelLabel:wr.valueLabel),hr&&(wr.delta=+Mr.rawS||Mr.s,wr.deltaLabel=Ur(wr.delta),wr.final=Mr.v,wr.finalLabel=Ur(wr.final),wr.initial=wr.final-wr.delta,wr.initialLabel=Ur(wr.initial)),ri&&(wr.value=Mr.s,wr.valueLabel=Ur(wr.value),wr.percentInitial=Mr.begR,wr.percentInitialLabel=T.formatPercent(Mr.begR),wr.percentPrevious=Mr.difR,wr.percentPreviousLabel=T.formatPercent(Mr.difR),wr.percentTotal=Mr.sumR,wr.percenTotalLabel=T.formatPercent(Mr.sumR));var Jt=T.castOption(rr,Mr.i,"customdata");return Jt&&(wr.customdata=Jt),T.texttemplateString(qr,wr,En._d3locale,jt,wr,rr._meta||{})}(Ze,on,wn,On,Dn):pn.textinfo?function(En,Un,In,sr){var fr=En[0].trace,rr="h"===fr.orientation,qr="waterfall"===fr.type,ti="funnel"===fr.type;function Ar(Jt){return l(rr?In:sr,+Jt,!0).text}var pr,Rn=En[Un],hr=fr.textinfo.split("+"),ri=[],ir=function(Jt){return-1!==hr.indexOf(Jt)};if(ir("label")&&ri.push(l(rr?sr:In,En[Un].p,!0).text),ir("text")&&(0===(pr=T.castOption(fr,Rn.i,"text"))||pr)&&ri.push(pr),qr){var Mr=+Rn.rawS||Rn.s,wr=Rn.v,ii=wr-Mr;ir("initial")&&ri.push(Ar(ii)),ir("delta")&&ri.push(Ar(Mr)),ir("final")&&ri.push(Ar(wr))}if(ti){ir("value")&&ri.push(Ar(Rn.s));var gn=0;ir("percent initial")&&gn++,ir("percent previous")&&gn++,ir("percent total")&&gn++;var jt=gn>1;ir("percent initial")&&(pr=T.formatPercent(Rn.begR),jt&&(pr+=" of initial"),ri.push(pr)),ir("percent previous")&&(pr=T.formatPercent(Rn.difR),jt&&(pr+=" of previous"),ri.push(pr)),ir("percent total")&&(pr=T.formatPercent(Rn.sumR),jt&&(pr+=" of total"),ri.push(pr))}return ri.join("<br>")}(on,wn,On,Dn):c.getValue(pn.text,wn),c.coerceString(v,Tn));Ot=function(en,on){var wn=c.getValue(en.textposition,on);return c.coerceEnumerated(g,wn)}(qe,ct);var Ve=tt[ct],Be=!("stack"===ht.mode||"relative"===ht.mode)||Ve._outmost;if(Ie&&"none"!==Ot&&(!Ve.isBlank&&xt!==Ct&&Ht!==zt||"auto"!==Ot&&"inside"!==Ot)){var at=Ze.font,gt=s.getBarColor(tt[ct],qe),wt=s.getInsideTextFont(qe,ct,at,gt),_t=s.getOutsideTextFont(qe,ct,at),Rt=et.datum();it?"log"===tn.type&&Rt.s0<=0&&(xt=tn.range[0]<tn.range[1]?0:tn._length):"log"===un.type&&Rt.s0<=0&&(Ht=un.range[0]<un.range[1]?un._length:0);var yt,Vt,Nt,rt,Tt,Ut=Math.abs(Ct-xt)-2*w,Wt=Math.abs(zt-Ht)-2*w;if("outside"===Ot&&(Be||Ve.hasB||(Ot="inside")),"auto"===Ot&&(Be?(Ot="inside",yt=Qe(et,Ie,Tt=T.ensureUniformFontSize(Ue,wt)),rt=(Vt=o.bBox(yt.node())).height,(Nt=Vt.width)>0&&rt>0&&(Nt<=Ut&&rt<=Wt||Nt<=Wt&&rt<=Ut||(it?Ut>=Nt*(Wt/rt):Wt>=rt*(Ut/Nt)))?Ot="inside":(Ot="outside",yt.remove(),yt=null)):Ot="inside"),!yt){var Lt=(yt=Qe(et,Ie,Tt=T.ensureUniformFontSize(Ue,"outside"===Ot?_t:wt))).attr("transform");if(yt.attr("transform",""),Nt=(Vt=o.bBox(yt.node())).width,rt=Vt.height,yt.attr("transform",Lt),Nt<=0||rt<=0)return void yt.remove()}var Gt,_n=qe.textangle;Gt="outside"===Ot?function(en,on,wn,On,Dn,Tn){var pn,En=!!Tn.isHorizontal,Un=!!Tn.constrained,In=Tn.angle||0,sr=Dn.width,fr=Dn.height,rr=Math.abs(on-en),qr=Math.abs(On-wn);pn=En?qr>2*w?w:0:rr>2*w?w:0;var ti=1;Un&&(ti=En?Math.min(1,qr/fr):Math.min(1,rr/sr));var Ar=P(In),pr=D(Dn,Ar),Fn=(En?pr.x:pr.y)/2,Rn=(Dn.left+Dn.right)/2,hr=(Dn.top+Dn.bottom)/2,ri=(en+on)/2,ir=(wn+On)/2,Ur=0,Mr=0,wr=En?A(on,en):A(wn,On);return En?(ri=on-wr*pn,Ur=wr*Fn):(ir=On+wr*pn,Mr=-wr*Fn),{textX:Rn,textY:hr,targetX:ri,targetY:ir,anchorX:Ur,anchorY:Mr,scale:ti,rotate:Ar}}(xt,Ct,Ht,zt,Vt,{isHorizontal:it,constrained:"both"===qe.constraintext||"outside"===qe.constraintext,angle:_n}):F(xt,Ct,Ht,zt,Vt,{isHorizontal:it,constrained:"both"===qe.constraintext||"inside"===qe.constraintext,angle:_n,anchor:qe.insidetextanchor}),Gt.fontSize=Tt.size,d("histogram"===qe.type?"bar":qe.type,Gt,Ze),Ve.transform=Gt,k(yt,Ze,ht,ut).attr("transform",T.getTextTransform(Gt))}else et.select("text").remove()})(R,L,De,Q,ge,Fe,ve,Te,Le,V,Z),L.layerClipId&&o.hideOutsideRangePoint(be,De.select("text"),Y,ee,j.xcalendar,j.ycalendar)}),o.setClipUrl(se,!1===j.cliponaxis?null:L.layerClipId,R)});a.getComponentMethod("errorbars","plot")(R,$,L,V)},toMoveInsideBar:F}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx/helpers":402,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"./attributes":648,"./constants":650,"./helpers":654,"./style":662,"./uniform_text":664,"@plotly/d3":58,"fast-isnumeric":190}],660:[function(_,oe,ae){"use strict";function m(x,T,b,e,o){var a=T.c2p(e?x.s0:x.p0,!0),l=T.c2p(e?x.s1:x.p1,!0),i=b.c2p(e?x.p0:x.s0,!0),d=b.c2p(e?x.p1:x.s1,!0);return o?[(a+l)/2,(i+d)/2]:e?[l,(i+d)/2]:[(a+l)/2,d]}oe.exports=function(x,T){var b,e=x.cd,o=x.xaxis,a=x.yaxis,l=e[0].trace,i="funnel"===l.type,d="h"===l.orientation,u=[];if(!1===T)for(b=0;b<e.length;b++)e[b].selected=0;else for(b=0;b<e.length;b++){var s=e[b],c="ct"in s?s.ct:m(s,o,a,d,i);T.contains(c,!1,b,x)?(u.push({pointNumber:b,x:o.c2d(s.x),y:a.c2d(s.y)}),s.selected=1):s.selected=0}return u}},{}],661:[function(_,oe,ae){"use strict";oe.exports=T;var m=_("../../lib").distinctVals,x=_("../../constants/numerical").BADNUM;function T(b,e){this.traces=b,this.sepNegVal=e.sepNegVal,this.overlapNoMerge=e.overlapNoMerge;for(var o=1/0,a=[],l=0;l<b.length;l++){for(var i=b[l],d=0;d<i.length;d++){var u=i[d];u.p!==x&&a.push(u.p)}i[0]&&i[0].width1&&(o=Math.min(i[0].width1,o))}this.positions=a;var s=m(a);this.distinctPositions=s.vals,this.minDiff=1===s.vals.length&&o!==1/0?o:Math.min(s.minDiff,o);var c=(e.posAxis||{}).type;"category"!==c&&"multicategory"!==c||(this.minDiff=1),this.binWidth=this.minDiff,this.bins={}}T.prototype.put=function(b,e){var o=this.getLabel(b,e),a=this.bins[o]||0;return this.bins[o]=a+e,a},T.prototype.get=function(b,e){var o=this.getLabel(b,e);return this.bins[o]||0},T.prototype.getLabel=function(b,e){return(e<0&&this.sepNegVal?"v":"^")+(this.overlapNoMerge?b:Math.round(b/this.binWidth))}},{"../../constants/numerical":479,"../../lib":503}],662:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../components/color"),T=_("../../components/drawing"),b=_("../../lib"),e=_("../../registry"),o=_("./uniform_text").resizeText,a=_("./attributes"),l=a.textfont,i=a.insidetextfont,d=a.outsidetextfont,u=_("./helpers");function s(y,M,A){T.pointStyle(y.selectAll("path"),M,A),c(y,M,A)}function c(y,M,A){y.selectAll("text").each(function(k){var C=m.select(this),P=b.ensureUniformFontSize(A,h(C,k,M,A));T.font(C,P)})}function h(y,M,A,k){var C=k._fullLayout.font,P=A.textfont;if(y.classed("bartext-inside")){var D=w(M,A);P=v(A,M.i,C,D)}else y.classed("bartext-outside")&&(P=g(A,M.i,C));return P}function p(y,M,A){return f(l,y.textfont,M,A)}function v(y,M,A,k){var C=p(y,M,A);return(void 0===y._input.textfont||void 0===y._input.textfont.color||Array.isArray(y.textfont.color)&&void 0===y.textfont.color[M])&&(C={color:x.contrast(k),family:C.family,size:C.size}),f(i,y.insidetextfont,M,C)}function g(y,M,A){var k=p(y,M,A);return f(d,y.outsidetextfont,M,k)}function f(y,M,A,k){var C=u.getValue((M=M||{}).family,A),P=u.getValue(M.size,A),D=u.getValue(M.color,A);return{family:u.coerceString(y.family,C,k.family),size:u.coerceNumber(y.size,P,k.size),color:u.coerceColor(y.color,D,k.color)}}function w(y,M){return"waterfall"===M.type?M[y.dir].marker.color:y.mcc||y.mc||M.marker.color}oe.exports={style:function(y){var M=m.select(y).selectAll("g.barlayer").selectAll("g.trace");o(y,M,"bar");var A=M.size(),k=y._fullLayout;M.style("opacity",function(C){return C[0].trace.opacity}).each(function(C){("stack"===k.barmode&&A>1||0===k.bargap&&0===k.bargroupgap&&!C[0].trace.marker.line.width)&&m.select(this).attr("shape-rendering","crispEdges")}),M.selectAll("g.points").each(function(C){s(m.select(this),C[0].trace,y)}),e.getComponentMethod("errorbars","style")(M)},styleTextPoints:c,styleOnSelect:function(y,M,A){var C,P,D,F,R,L,k=M[0].trace;k.selectedpoints?(P=k,D=y,T.selectedPointStyle((C=A).selectAll("path"),P),F=C.selectAll("text"),R=P,L=D,F.each(function(I){var B,V=m.select(this);if(I.selected){B=b.ensureUniformFontSize(L,h(V,I,R,L));var Z=R.selected.textfont&&R.selected.textfont.color;Z&&(B.color=Z),T.font(V,B)}else T.selectedTextStyle(V,R)})):(s(A,k,y),e.getComponentMethod("errorbars","style")(A))},getInsideTextFont:v,getOutsideTextFont:g,getBarColor:w,resizeText:o}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../registry":638,"./attributes":648,"./helpers":654,"./uniform_text":664,"@plotly/d3":58}],663:[function(_,oe,ae){"use strict";var m=_("../../components/color"),x=_("../../components/colorscale/helpers").hasColorscale,T=_("../../components/colorscale/defaults"),b=_("../../lib").coercePattern;oe.exports=function(e,o,a,l,i){var d=a("marker.color",l),u=x(e,"marker");u&&T(e,o,i,a,{prefix:"marker.",cLetter:"c"}),a("marker.line.color",m.defaultLine),x(e,"marker.line")&&T(e,o,i,a,{prefix:"marker.line.",cLetter:"c"}),a("marker.line.width"),a("marker.opacity"),b(a,"marker.pattern",d,u),a("selected.marker.color"),a("unselected.marker.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],664:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../lib");function T(b){return"_"+b+"Text_minsize"}oe.exports={recordMinTextSize:function(b,e,o){if(o.uniformtext.mode){var a=T(b),l=o.uniformtext.minsize,i=e.scale*e.fontSize;e.hide=i<l,o[a]=o[a]||1/0,e.hide||(o[a]=Math.min(o[a],Math.max(i,l)))}},clearMinTextSize:function(b,e){e[T(b)]=void 0},resizeText:function(b,e,o){var a=b._fullLayout,l=a["_"+o+"Text_minsize"];if(l){var i,d="hide"===a.uniformtext.mode;switch(o){case"funnelarea":case"pie":case"sunburst":i="g.slice";break;case"treemap":case"icicle":i="g.slice, g.pathbar";break;default:i="g.points > g.point"}e.selectAll(i).each(function(u){var s=u.transform;s&&(s.scale=d&&s.hide?0:l/s.fontSize,m.select(this).select("text").attr("transform",x.getTextTransform(s)))})}}}},{"../../lib":503,"@plotly/d3":58}],665:[function(_,oe,ae){"use strict";var m=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../lib/extend").extendFlat,T=_("../scatterpolar/attributes"),b=_("../bar/attributes");oe.exports={r:T.r,theta:T.theta,r0:T.r0,dr:T.dr,theta0:T.theta0,dtheta:T.dtheta,thetaunit:T.thetaunit,base:x({},b.base,{}),offset:x({},b.offset,{}),width:x({},b.width,{}),text:x({},b.text,{}),hovertext:x({},b.hovertext,{}),marker:b.marker,hoverinfo:T.hoverinfo,hovertemplate:m(),selected:b.selected,unselected:b.unselected}},{"../../lib/extend":493,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatterpolar/attributes":1e3}],666:[function(_,oe,ae){"use strict";var m=_("../../components/colorscale/helpers").hasColorscale,x=_("../../components/colorscale/calc"),T=_("../bar/arrays_to_calcdata"),b=_("../bar/cross_trace_calc").setGroupPositions,e=_("../scatter/calc_selection"),o=_("../../registry").traceIs,a=_("../../lib").extendFlat;oe.exports={calc:function(l,i){for(var d=l._fullLayout,u=i.subplot,c=d[u].angularaxis,h=d[u].radialaxis.makeCalcdata(i,"r"),p=c.makeCalcdata(i,"theta"),v=i._length,g=new Array(v),f=h,w=p,y=0;y<v;y++)g[y]={p:w[y],s:f[y]};function M(A){var k=i[A];void 0!==k&&(i["_"+A]=Array.isArray(k)?c.makeCalcdata(i,A):c.d2c(k,i.thetaunit))}return"linear"===c.type&&(M("width"),M("offset")),m(i,"marker")&&x(l,i,{vals:i.marker.color,containerStr:"marker",cLetter:"c"}),m(i,"marker.line")&&x(l,i,{vals:i.marker.line.color,containerStr:"marker.line",cLetter:"c"}),T(g,i),e(g,i),g},crossTraceCalc:function(l,i,d){for(var u=l.calcdata,s=[],c=0;c<u.length;c++){var h=u[c],p=h[0].trace;!0===p.visible&&o(p,"bar")&&p.subplot===d&&s.push(h)}var v=a({},i.radialaxis,{_id:"x"});b(l,i.angularaxis,v,s,{mode:i.barmode,norm:i.barnorm,gap:i.bargap,groupgap:i.bargroupgap})}}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../lib":503,"../../registry":638,"../bar/arrays_to_calcdata":647,"../bar/cross_trace_calc":651,"../scatter/calc_selection":928}],667:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../scatterpolar/defaults").handleRThetaDefaults,T=_("../bar/style_defaults"),b=_("./attributes");oe.exports=function(e,o,a,l){function i(d,u){return m.coerce(e,o,b,d,u)}x(e,o,l,i)?(i("thetaunit"),i("base"),i("offset"),i("width"),i("text"),i("hovertext"),i("hovertemplate"),T(e,o,i,a,l),m.coerceSelectionMarkerOpacity(o,i)):o.visible=!1}},{"../../lib":503,"../bar/style_defaults":663,"../scatterpolar/defaults":1002,"./attributes":665}],668:[function(_,oe,ae){"use strict";var m=_("../../components/fx"),x=_("../../lib"),T=_("../bar/hover").getTraceColor,b=x.fillText,e=_("../scatterpolar/hover").makeHoverPointText,o=_("../../plots/polar/helpers").isPtInsidePolygon;oe.exports=function(a,l,i){var d=a.cd,u=d[0].trace,s=a.subplot,c=s.radialAxis,p=s.vangles,v=p?o:x.isPtInsideSector,g=a.maxHoverDistance,f=s.angularAxis._period||2*Math.PI,w=Math.abs(c.g2p(Math.sqrt(l*l+i*i))),y=Math.atan2(i,l);if(c.range[0]>c.range[1]&&(y+=Math.PI),m.getClosest(d,function(k){return v(w,y,[k.rp0,k.rp1],[k.thetag0,k.thetag1],p)?g+Math.min(1,Math.abs(k.thetag1-k.thetag0)/f)-1+(k.rp1-w)/(k.rp1-k.rp0)-1:1/0},a),!1!==a.index){var M=d[a.index];a.x0=a.x1=M.ct[0],a.y0=a.y1=M.ct[1];var A=x.extendFlat({},M,{r:M.s,theta:M.p});return b(M,u,a),e(A,u,s,a),a.hovertemplate=u.hovertemplate,a.color=T(u,M),a.xLabelVal=a.yLabelVal=void 0,M.s<0&&(a.idealAlign="left"),[a]}}},{"../../components/fx":406,"../../lib":503,"../../plots/polar/helpers":621,"../bar/hover":655,"../scatterpolar/hover":1004}],669:[function(_,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"barpolar",basePlotModule:_("../../plots/polar"),categories:["polar","bar","showLegend"],attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults"),supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc").calc,crossTraceCalc:_("./calc").crossTraceCalc,plot:_("./plot"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("../scatterpolar/format_labels"),style:_("../bar/style").style,styleOnSelect:_("../bar/style").styleOnSelect,hoverPoints:_("./hover"),selectPoints:_("../bar/select"),meta:{}}},{"../../plots/polar":622,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":944,"../scatterpolar/format_labels":1003,"./attributes":665,"./calc":666,"./defaults":667,"./hover":668,"./layout_attributes":670,"./layout_defaults":671,"./plot":672}],670:[function(_,oe,ae){"use strict";oe.exports={barmode:{valType:"enumerated",values:["stack","overlay"],dflt:"stack",editType:"calc"},bargap:{valType:"number",dflt:.1,min:0,max:1,editType:"calc"}}},{}],671:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./layout_attributes");oe.exports=function(T,b,e){var o,a={};function l(u,s){return m.coerce(T[o]||{},b[o],x,u,s)}for(var i=0;i<e.length;i++){var d=e[i];"barpolar"===d.type&&!0===d.visible&&(a[o=d.subplot]||(l("barmode"),l("bargap"),a[o]=1))}}},{"../../lib":503,"./layout_attributes":670}],672:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("fast-isnumeric"),T=_("../../lib"),b=_("../../components/drawing"),e=_("../../plots/polar/helpers");oe.exports=function(o,a,l){var p,v,g,i=a.xaxis,d=a.yaxis,u=a.radialAxis,s=a.angularAxis,c=(v=(p=a).cxx,g=p.cyy,p.vangles?function(f,w,y,M){var A,k;T.angleDelta(y,M)>0?(A=y,k=M):(A=M,k=y);var C=[e.findEnclosingVertexAngles(A,p.vangles)[0],(A+k)/2,e.findEnclosingVertexAngles(k,p.vangles)[1]];return e.pathPolygonAnnulus(f,w,A,k,C,v,g)}:function(f,w,y,M){return T.pathAnnulus(f,w,y,M,v,g)}),h=a.layers.frontplot.select("g.barlayer");T.makeTraceGroups(h,l,"trace bars").each(function(){var p=m.select(this),v=T.ensureSingle(p,"g","points").selectAll("g.point").data(T.identity);v.enter().append("g").style("vector-effect","non-scaling-stroke").style("stroke-miterlimit",2).classed("point",!0),v.exit().remove(),v.each(function(g){var f,w=m.select(this),y=g.rp0=u.c2p(g.s0),M=g.rp1=u.c2p(g.s1),A=g.thetag0=s.c2g(g.p0),k=g.thetag1=s.c2g(g.p1);if(x(y)&&x(M)&&x(A)&&x(k)&&y!==M&&A!==k){var C=u.c2g(g.s1),P=(A+k)/2;g.ct=[i.c2p(C*Math.cos(P)),d.c2p(C*Math.sin(P))],f=c(y,M,A,k)}else f="M0,0Z";T.ensureSingle(w,"path").attr("d",f)}),b.setClipUrl(p,a._hasClipOnAxisFalse?a.clipIds.forTraces:null,o)})}},{"../../components/drawing":388,"../../lib":503,"../../plots/polar/helpers":621,"@plotly/d3":58,"fast-isnumeric":190}],673:[function(_,oe,ae){"use strict";var m=_("../scatter/attributes"),x=_("../bar/attributes"),T=_("../../components/color/attributes"),b=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=_("../../plots/template_attributes").hovertemplateAttrs,o=_("../../lib/extend").extendFlat,a=m.marker,l=a.line;oe.exports={y:{valType:"data_array",editType:"calc+clearAxisTypes"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},x0:{valType:"any",editType:"calc+clearAxisTypes"},y0:{valType:"any",editType:"calc+clearAxisTypes"},dx:{valType:"number",editType:"calc"},dy:{valType:"number",editType:"calc"},xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),name:{valType:"string",editType:"calc+clearAxisTypes"},q1:{valType:"data_array",editType:"calc+clearAxisTypes"},median:{valType:"data_array",editType:"calc+clearAxisTypes"},q3:{valType:"data_array",editType:"calc+clearAxisTypes"},lowerfence:{valType:"data_array",editType:"calc"},upperfence:{valType:"data_array",editType:"calc"},notched:{valType:"boolean",editType:"calc"},notchwidth:{valType:"number",min:0,max:.5,dflt:.25,editType:"calc"},notchspan:{valType:"data_array",editType:"calc"},boxpoints:{valType:"enumerated",values:["all","outliers","suspectedoutliers",!1],editType:"calc"},jitter:{valType:"number",min:0,max:1,editType:"calc"},pointpos:{valType:"number",min:-2,max:2,editType:"calc"},boxmean:{valType:"enumerated",values:[!0,"sd",!1],editType:"calc"},mean:{valType:"data_array",editType:"calc"},sd:{valType:"data_array",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc+clearAxisTypes"},quartilemethod:{valType:"enumerated",values:["linear","exclusive","inclusive"],dflt:"linear",editType:"calc"},width:{valType:"number",min:0,dflt:0,editType:"calc"},marker:{outliercolor:{valType:"color",dflt:"rgba(0, 0, 0, 0)",editType:"style"},symbol:o({},a.symbol,{arrayOk:!1,editType:"plot"}),opacity:o({},a.opacity,{arrayOk:!1,dflt:1,editType:"style"}),size:o({},a.size,{arrayOk:!1,editType:"calc"}),color:o({},a.color,{arrayOk:!1,editType:"style"}),line:{color:o({},l.color,{arrayOk:!1,dflt:T.defaultLine,editType:"style"}),width:o({},l.width,{arrayOk:!1,dflt:0,editType:"style"}),outliercolor:{valType:"color",editType:"style"},outlierwidth:{valType:"number",min:0,dflt:1,editType:"style"},editType:"style"},editType:"plot"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:m.fillcolor,whiskerwidth:{valType:"number",min:0,max:1,dflt:.5,editType:"calc"},offsetgroup:x.offsetgroup,alignmentgroup:x.alignmentgroup,selected:{marker:m.selected.marker,editType:"style"},unselected:{marker:m.unselected.marker,editType:"style"},text:o({},m.text,{}),hovertext:o({},m.hovertext,{}),hovertemplate:e({}),hoveron:{valType:"flaglist",flags:["boxes","points"],dflt:"boxes+points",editType:"style"}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926}],674:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../plots/cartesian/axes"),T=_("../../plots/cartesian/align_period"),b=_("../../lib"),e=_("../../constants/numerical").BADNUM,o=b._;oe.exports=function(v,g){var f,w,y,M,A,k,C,P=v._fullLayout,D=x.getFromId(v,g.xaxis||"x"),F=x.getFromId(v,g.yaxis||"y"),R=[],L="violin"===g.type?"_numViolins":"_numBoxes";"h"===g.orientation?(y=D,M="x",A=F,k="y",C=!!g.yperiodalignment):(y=F,M="y",A=D,k="x",C=!!g.xperiodalignment);var I,B,V,Z,Y,ee,J=function(et,tt,ct,xt){var Ct,Ht=tt+"0"in et;if(tt in et||Ht&&"d"+tt in et){var ht=ct.makeCalcdata(et,tt);return[T(et,ct,tt,ht).vals,ht]}Ct=Ht?et[tt+"0"]:"name"in et&&("category"===ct.type||m(et.name)&&-1!==["linear","log"].indexOf(ct.type)||b.isDateTime(et.name)&&"date"===ct.type)?et.name:xt;for(var ut="multicategory"===ct.type?ct.r2c_just_indices(Ct):ct.d2c(Ct,0,et[tt+"calendar"]),Ot=et._length,tn=new Array(Ot),un=0;un<Ot;un++)tn[un]=ut;return[tn]}(g,k,A,P[L]),$=J[0],Q=J[1],se=b.distinctVals($,A),j=se.vals,G=se.minDiff/2,W="all"===(g.boxpoints||g.points)?b.identity:function(et){return et.v<I.lf||et.v>I.uf};if(g._hasPreCompStats){var ie=g[M],q=function(et){return y.d2c((g[et]||[])[f])},te=1/0,ne=-1/0;for(f=0;f<g._length;f++){var le=$[f];if(m(le)){if((I={}).pos=I[k]=le,C&&Q&&(I.orig_p=Q[f]),I.q1=q("q1"),I.med=q("median"),I.q3=q("q3"),B=[],ie&&b.isArrayOrTypedArray(ie[f]))for(w=0;w<ie[f].length;w++)(ee=y.d2c(ie[f][w]))!==e&&(l(Y={v:ee,i:[f,w]},g,[f,w]),B.push(Y));if(I.pts=B.sort(i),Z=(V=I[M]=B.map(d)).length,I.med!==e&&I.q1!==e&&I.q3!==e&&I.med>=I.q1&&I.q3>=I.med){var ue=q("lowerfence");I.lf=ue!==e&&ue<=I.q1?ue:u(I,V,Z);var de=q("upperfence");I.uf=de!==e&&de>=I.q3?de:s(I,V,Z);var he=q("mean");I.mean=he!==e?he:Z?b.mean(V,Z):(I.q1+I.q3)/2;var be=q("sd");I.sd=he!==e&&be>=0?be:Z?b.stdev(V,Z,I.mean):I.q3-I.q1,I.lo=c(I),I.uo=h(I);var ge=q("notchspan");ge=ge!==e&&ge>0?ge:p(I,Z),I.ln=I.med-ge,I.un=I.med+ge;var we=I.lf,Ce=I.uf;g.boxpoints&&V.length&&(we=Math.min(we,V[0]),Ce=Math.max(Ce,V[Z-1])),g.notched&&(we=Math.min(we,I.ln),Ce=Math.max(Ce,I.un)),I.min=we,I.max=Ce}else{var De;b.warn(["Invalid input - make sure that q1 <= median <= q3","q1 = "+I.q1,"median = "+I.med,"q3 = "+I.q3].join("\n")),I.med=De=I.med!==e?I.med:I.q1!==e?I.q3!==e?(I.q1+I.q3)/2:I.q1:I.q3!==e?I.q3:0,I.q1=I.q3=De,I.lf=I.uf=De,I.mean=I.sd=De,I.ln=I.un=De,I.min=I.max=De}te=Math.min(te,I.min),ne=Math.max(ne,I.max),I.pts2=B.filter(W),R.push(I)}}g._extremes[y._id]=x.findExtremes(y,[te,ne],{padded:!0})}else{var Se=y.makeCalcdata(g,M),Fe=function(et,tt){for(var ct=et.length,xt=new Array(ct+1),Ct=0;Ct<ct;Ct++)xt[Ct]=et[Ct]-tt;return xt[ct]=et[ct-1]+tt,xt}(j,G),ve=j.length,Te=function(et){for(var tt=new Array(et),ct=0;ct<et;ct++)tt[ct]=[];return tt}(ve);for(f=0;f<g._length;f++)if(m(ee=Se[f])){var Le=b.findBin($[f],Fe);Le>=0&&Le<ve&&(l(Y={v:ee,i:f},g,f),Te[Le].push(Y))}var Ee=1/0,Pe=-1/0,je=g.quartilemethod,Ge="exclusive"===je,Ke="inclusive"===je;for(f=0;f<ve;f++)if(Te[f].length>0){var lt,Ue;(I={}).pos=I[k]=j[f],B=I.pts=Te[f].sort(i),Z=(V=I[M]=B.map(d)).length,I.min=V[0],I.max=V[Z-1],I.mean=b.mean(V,Z),I.sd=b.stdev(V,Z,I.mean),I.med=b.interp(V,.5),Z%2&&(Ge||Ke)?(Ge?(lt=V.slice(0,Z/2),Ue=V.slice(Z/2+1)):Ke&&(lt=V.slice(0,Z/2+1),Ue=V.slice(Z/2)),I.q1=b.interp(lt,.5),I.q3=b.interp(Ue,.5)):(I.q1=b.interp(V,.25),I.q3=b.interp(V,.75)),I.lf=u(I,V,Z),I.uf=s(I,V,Z),I.lo=c(I),I.uo=h(I);var $e=p(I,Z);I.ln=I.med-$e,I.un=I.med+$e,Ee=Math.min(Ee,I.ln),Pe=Math.max(Pe,I.un),I.pts2=B.filter(W),R.push(I)}g._extremes[y._id]=x.findExtremes(y,g.notched?Se.concat([Ee,Pe]):Se,{padded:!0})}return function(et,tt){if(b.isArrayOrTypedArray(tt.selectedpoints))for(var ct=0;ct<et.length;ct++){for(var xt=et[ct].pts||[],Ct={},Ht=0;Ht<xt.length;Ht++)Ct[xt[Ht].i]=Ht;b.tagSelected(xt,tt,Ct)}}(R,g),R.length>0?(R[0].t={num:P[L],dPos:G,posLetter:k,valLetter:M,labels:{med:o(v,"median:"),min:o(v,"min:"),q1:o(v,"q1:"),q3:o(v,"q3:"),max:o(v,"max:"),mean:o(v,"sd"===g.boxmean?"mean \xb1 \u03c3:":"mean:"),lf:o(v,"lower fence:"),uf:o(v,"upper fence:")}},P[L]++,R):[{t:{empty:!0}}]};var a={text:"tx",hovertext:"htx"};function l(v,g,f){for(var w in a)b.isArrayOrTypedArray(g[w])&&(Array.isArray(f)?b.isArrayOrTypedArray(g[w][f[0]])&&(v[a[w]]=g[w][f[0]][f[1]]):v[a[w]]=g[w][f])}function i(v,g){return v.v-g.v}function d(v){return v.v}function u(v,g,f){return 0===f?v.q1:Math.min(v.q1,g[Math.min(b.findBin(2.5*v.q1-1.5*v.q3,g,!0)+1,f-1)])}function s(v,g,f){return 0===f?v.q3:Math.max(v.q3,g[Math.max(b.findBin(2.5*v.q3-1.5*v.q1,g),0)])}function c(v){return 4*v.q1-3*v.q3}function h(v){return 4*v.q3-3*v.q1}function p(v,g){return 0===g?0:1.57*(v.q3-v.q1)/Math.sqrt(g)}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"fast-isnumeric":190}],675:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/axes"),x=_("../../lib"),T=_("../../plots/cartesian/constraints").getAxisGroup,b=["v","h"];function e(o,a,l,i){var d,u,s,c=a.calcdata,h=a._fullLayout,p=i._id,v=p.charAt(0),g=[],f=0;for(d=0;d<l.length;d++)for(s=c[l[d]],u=0;u<s.length;u++)g.push(i.c2l(s[u].pos,!0)),f+=(s[u].pts2||[]).length;if(g.length){var w=x.distinctVals(g);"category"!==i.type&&"multicategory"!==i.type||(w.minDiff=1);var y=w.minDiff/2;m.minDtick(i,w.minDiff,w.vals[0],!0);var M=h["violin"===o?"_numViolins":"_numBoxes"],A="group"===h[o+"mode"]&&M>1,k=1-h[o+"gap"],C=1-h[o+"groupgap"];for(d=0;d<l.length;d++){var P,D,F,R,L,I,B=(s=c[l[d]])[0].trace,V=s[0].t,Z=B.width,Y=B.side;if(Z)P=D=R=Z/2,F=0;else if(P=y,A){var ee=T(h,i._id)+B.orientation,$=Object.keys(((h._alignmentOpts[ee]||{})[B.alignmentgroup]||{}).offsetGroups||{}).length,Q=$||M;D=P*k*C/Q,F=2*P*((($?B._offsetIndex:V.num)+.5)/Q-.5)*k,R=P*k/Q}else D=P*k*C,F=0,R=P;V.dPos=P,V.bPos=F,V.bdPos=D,V.wHover=R;var se,j,G,W,ie,q,te=F+D,ne=Boolean(Z);if("positive"===Y?(L=P*(Z?1:.5),se=te,I=se=F):"negative"===Y?(L=se=F,I=P*(Z?1:.5),j=te):(L=I=P,se=j=te),(B.boxpoints||B.points)&&f>0){var le=B.pointpos,ue=B.jitter,de=B.marker.size/2,he=0;le+ue>=0&&((he=te*(le+ue))>L?(ne=!0,ie=de,G=he):he>se&&(ie=de,G=L)),he<=L&&(G=L);var be=0;le-ue<=0&&((be=-te*(le-ue))>I?(ne=!0,q=de,W=be):be>j&&(q=de,W=I)),be<=I&&(W=I)}else G=L,W=I;var ge=new Array(s.length);for(u=0;u<s.length;u++)ge[u]=s[u].pos;B._extremes[p]=m.findExtremes(i,ge,{padded:ne,vpadminus:W,vpadplus:G,vpadLinearized:!0,ppadminus:{x:q,y:ie}[v],ppadplus:{x:ie,y:q}[v]})}}}oe.exports={crossTraceCalc:function(o,a){for(var l=o.calcdata,i=a.xaxis,d=a.yaxis,u=0;u<b.length;u++){for(var s=b[u],c="h"===s?d:i,h=[],p=0;p<l.length;p++){var v=l[p],f=v[0].trace;!0!==f.visible||"box"!==f.type&&"candlestick"!==f.type||v[0].t.empty||(f.orientation||"v")!==s||f.xaxis!==i._id||f.yaxis!==d._id||h.push(p)}e("box",o,h,c)}},setPositionOffset:e}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../plots/cartesian/constraints":562}],676:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../registry"),T=_("../../components/color"),b=_("../scatter/period_defaults"),e=_("../bar/defaults").handleGroupingDefaults,o=_("../../plots/cartesian/axis_autotype"),a=_("./attributes");function l(d,u,s,c){function h(Y){var ee=0;return Y&&Y.length&&(ee+=1,m.isArrayOrTypedArray(Y[0])&&Y[0].length&&(ee+=1)),ee}function p(Y){return m.validate(d[Y],a[Y])}var v,g=s("y"),f=s("x");if("box"===u.type){var w=s("q1"),y=s("median"),M=s("q3");u._hasPreCompStats=w&&w.length&&y&&y.length&&M&&M.length,v=Math.min(m.minRowLength(w),m.minRowLength(y),m.minRowLength(M))}var A,k,C=h(g),P=h(f),D=C&&m.minRowLength(g),F=P&&m.minRowLength(f),R=c.calendar,L={autotypenumbers:c.autotypenumbers};if(u._hasPreCompStats)switch(String(P)+String(C)){case"00":var I=p("x0")||p("dx");A=!p("y0")&&!p("dy")||I?"v":"h",k=v;break;case"10":A="v",k=Math.min(v,F);break;case"20":A="h",k=Math.min(v,f.length);break;case"01":A="h",k=Math.min(v,D);break;case"02":A="v",k=Math.min(v,g.length);break;case"12":A="v",k=Math.min(v,F,g.length);break;case"21":A="h",k=Math.min(v,f.length,D);break;case"11":k=0;break;case"22":var B,V=!1;for(B=0;B<f.length;B++)if("category"===o(f[B],R,L)){V=!0;break}if(V)A="v",k=Math.min(v,F,g.length);else{for(B=0;B<g.length;B++)if("category"===o(g[B],R,L)){V=!0;break}V?(A="h",k=Math.min(v,f.length,D)):(A="v",k=Math.min(v,F,g.length))}}else C>0?(A="v",k=P>0?Math.min(F,D):Math.min(D)):P>0?(A="h",k=Math.min(F)):k=0;if(k){u._length=k;var Z=s("orientation",A);u._hasPreCompStats?"v"===Z&&0===P?(s("x0",0),s("dx",1)):"h"===Z&&0===C&&(s("y0",0),s("dy",1)):"v"===Z&&0===P?s("x0"):"h"===Z&&0===C&&s("y0"),x.getComponentMethod("calendars","handleTraceDefaults")(d,u,["x","y"],c)}else u.visible=!1}function i(d,u,s,c){var h=c.prefix,p=m.coerce2(d,u,a,"marker.outliercolor"),v=s("marker.line.outliercolor"),g="outliers";u._hasPreCompStats?g="all":(p||v)&&(g="suspectedoutliers");var f=s(h+"points",g);f?(s("jitter","all"===f?.3:0),s("pointpos","all"===f?-1.5:0),s("marker.symbol"),s("marker.opacity"),s("marker.size"),s("marker.color",u.line.color),s("marker.line.color"),s("marker.line.width"),"suspectedoutliers"===f&&(s("marker.line.outliercolor",u.marker.color),s("marker.line.outlierwidth")),s("selected.marker.color"),s("unselected.marker.color"),s("selected.marker.size"),s("unselected.marker.size"),s("text"),s("hovertext")):delete u.marker;var w=s("hoveron");"all"!==w&&-1===w.indexOf("points")||s("hovertemplate"),m.coerceSelectionMarkerOpacity(u,s)}oe.exports={supplyDefaults:function(d,u,s,c){function h(M,A){return m.coerce(d,u,a,M,A)}if(l(d,u,h,c),!1!==u.visible){b(d,u,c,h),h("xhoverformat"),h("yhoverformat");var p=u._hasPreCompStats;p&&(h("lowerfence"),h("upperfence")),h("line.color",(d.marker||{}).color||s),h("line.width"),h("fillcolor",T.addOpacity(u.line.color,.5));var v=!1;if(p){var g=h("mean"),f=h("sd");g&&g.length&&(v=!0,f&&f.length&&(v="sd"))}h("boxmean",v),h("whiskerwidth"),h("width"),h("quartilemethod");var w=!1;if(p){var y=h("notchspan");y&&y.length&&(w=!0)}else m.validate(d.notchwidth,a.notchwidth)&&(w=!0);h("notched",w)&&h("notchwidth"),i(d,u,h,{prefix:"box"})}},crossTraceDefaults:function(d,u){var c;function h(g){return m.coerce(c._input,c,a,g)}for(var p=0;p<d.length;p++){var v=(c=d[p]).type;"box"!==v&&"violin"!==v||"group"===u[v+"mode"]&&e(c._input,c,u,h)}},handleSampleDefaults:l,handlePointsDefaults:i}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../registry":638,"../bar/defaults":652,"../scatter/period_defaults":946,"./attributes":673}],677:[function(_,oe,ae){"use strict";oe.exports=function(m,x){return x.hoverOnBox&&(m.hoverOnBox=x.hoverOnBox),"xVal"in x&&(m.x=x.xVal),"yVal"in x&&(m.y=x.yVal),x.xa&&(m.xaxis=x.xa),x.ya&&(m.yaxis=x.ya),m}},{}],678:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/axes"),x=_("../../lib"),T=_("../../components/fx"),b=_("../../components/color"),e=x.fillText;function o(l,i,d,u){var s,c,h,p,v,g,f,w,y,M,A,k,C,P,D=l.cd,F=l.xa,R=l.ya,L=D[0].trace,I=D[0].t,B="violin"===L.type,V=[],Z=I.bdPos,Y=I.wHover,ee=function(he){return h.c2l(he.pos)+I.bPos-h.c2l(g)};B&&"both"!==L.side?("positive"===L.side&&(y=function(he){var be=ee(he);return T.inbox(be,be+Y,M)},k=Z,C=0),"negative"===L.side&&(y=function(he){var be=ee(he);return T.inbox(be-Y,be,M)},k=0,C=Z)):(y=function(he){var be=ee(he);return T.inbox(be-Y,be+Y,M)},k=C=Z),P=B?function(he){return T.inbox(he.span[0]-v,he.span[1]-v,M)}:function(he){return T.inbox(he.min-v,he.max-v,M)},"h"===L.orientation?(v=i,g=d,f=P,w=y,s="y",h=R,c="x",p=F):(v=d,g=i,f=y,w=P,s="x",h=F,c="y",p=R);var J=Math.min(1,Z/Math.abs(h.r2c(h.range[1])-h.r2c(h.range[0])));function $(he){return(f(he)+w(he))/2}M=l.maxHoverDistance-J,A=l.maxSpikeDistance-J;var Q=T.getDistanceFunction(u,f,w,$);if(T.getClosest(D,Q,l),!1===l.index)return[];var se=D[l.index],j=L.line.color,G=(L.marker||{}).color;l.color=b.opacity(j)&&L.line.width?j:b.opacity(G)&&L.boxpoints?G:L.fillcolor,l[s+"0"]=h.c2p(se.pos+I.bPos-C,!0),l[s+"1"]=h.c2p(se.pos+I.bPos+k,!0),l[s+"LabelVal"]=void 0!==se.orig_p?se.orig_p:se.pos;var W=s+"Spike";l.spikeDistance=$(se)*A/M,l[W]=h.c2p(se.pos,!0);var ie={},q=["med","q1","q3","min","max"];(L.boxmean||(L.meanline||{}).visible)&&q.push("mean"),(L.boxpoints||L.points)&&q.push("lf","uf");for(var te=0;te<q.length;te++){var ne=q[te];if(ne in se&&!(se[ne]in ie)){ie[se[ne]]=!0;var le=se[ne],ue=p.c2p(le,!0),de=x.extendFlat({},l);de.attr=ne,de[c+"0"]=de[c+"1"]=ue,de[c+"LabelVal"]=le,de[c+"Label"]=(I.labels?I.labels[ne]+" ":"")+m.hoverLabelText(p,le,L[c+"hoverformat"]),de.hoverOnBox=!0,"mean"===ne&&"sd"in se&&"sd"===L.boxmean&&(de[c+"err"]=se.sd),l.name="",l.spikeDistance=void 0,l[W]=void 0,de.hovertemplate=!1,V.push(de)}}return V}function a(l,i,d){for(var u,s,c,h=l.cd,p=l.xa,v=l.ya,g=h[0].trace,f=p.c2p(i),w=v.c2p(d),y=T.quadrature(function(B){var V=Math.max(3,B.mrc||0);return Math.max(Math.abs(p.c2p(B.x)-f)-V,1-3/V)},function(B){var V=Math.max(3,B.mrc||0);return Math.max(Math.abs(v.c2p(B.y)-w)-V,1-3/V)}),M=!1,A=0;A<h.length;A++){s=h[A];for(var k=0;k<(s.pts||[]).length;k++){var C=y(c=s.pts[k]);C<=l.distance&&(l.distance=C,M=[A,k])}}if(!M)return!1;c=(s=h[M[0]]).pts[M[1]];var P=p.c2p(c.x,!0),D=v.c2p(c.y,!0),F=c.mrc||1;u=x.extendFlat({},l,{index:c.i,color:(g.marker||{}).color,name:g.name,x0:P-F,x1:P+F,y0:D-F,y1:D+F,spikeDistance:l.distance,hovertemplate:g.hovertemplate});var R,L=s.orig_p,I=void 0!==L?L:s.pos;return"h"===g.orientation?(R=v,u.xLabelVal=c.x,u.yLabelVal=I):(R=p,u.xLabelVal=I,u.yLabelVal=c.y),u[R._id.charAt(0)+"Spike"]=R.c2p(s.pos,!0),e(c,g,u),u}oe.exports={hoverPoints:function(l,i,d,u){var s,c=l.cd[0].trace.hoveron,h=[];return-1!==c.indexOf("boxes")&&(h=h.concat(o(l,i,d,u))),-1!==c.indexOf("points")&&(s=a(l,i,d)),"closest"===u?s?[s]:h:(s&&h.push(s),h)},hoverOnBoxes:o,hoverOnPoints:a}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],679:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults").supplyDefaults,crossTraceDefaults:_("./defaults").crossTraceDefaults,supplyLayoutDefaults:_("./layout_defaults").supplyLayoutDefaults,calc:_("./calc"),crossTraceCalc:_("./cross_trace_calc").crossTraceCalc,plot:_("./plot").plot,style:_("./style").style,styleOnSelect:_("./style").styleOnSelect,hoverPoints:_("./hover").hoverPoints,eventData:_("./event_data"),selectPoints:_("./select"),moduleType:"trace",name:"box",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","boxLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./attributes":673,"./calc":674,"./cross_trace_calc":675,"./defaults":676,"./event_data":677,"./hover":678,"./layout_attributes":680,"./layout_defaults":681,"./plot":682,"./select":683,"./style":684}],680:[function(_,oe,ae){"use strict";oe.exports={boxmode:{valType:"enumerated",values:["group","overlay"],dflt:"overlay",editType:"calc"},boxgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"},boxgroupgap:{valType:"number",min:0,max:1,dflt:.3,editType:"calc"}}},{}],681:[function(_,oe,ae){"use strict";var m=_("../../registry"),x=_("../../lib"),T=_("./layout_attributes");function b(e,o,a,l,i){for(var d=i+"Layout",u=!1,s=0;s<a.length;s++)if(m.traceIs(a[s],d)){u=!0;break}u&&(l(i+"mode"),l(i+"gap"),l(i+"groupgap"))}oe.exports={supplyLayoutDefaults:function(e,o,a){b(0,0,a,function(l,i){return x.coerce(e,o,T,l,i)},"box")},_supply:b}},{"../../lib":503,"../../registry":638,"./layout_attributes":680}],682:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing");function b(a,l,i,d){var u,s,c="h"===i.orientation,h=l.val,p=l.pos,v=!!p.rangebreaks,g=d.bPos,f=d.wdPos||0,w=d.bPosPxOffset||0,y=i.whiskerwidth||0,M=i.notched||!1,A=M?1-2*i.notchwidth:1;Array.isArray(d.bdPos)?(u=d.bdPos[0],s=d.bdPos[1]):(u=d.bdPos,s=d.bdPos);var k=a.selectAll("path.box").data("violin"!==i.type||i.box.visible?x.identity:[]);k.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","box"),k.exit().remove(),k.each(function(C){if(C.empty)return"M0,0Z";var P=p.c2l(C.pos+g,!0),D=p.l2p(P-u)+w,F=p.l2p(P+s)+w,R=v?(D+F)/2:p.l2p(P)+w,L=i.whiskerwidth,I=v?D*L+(1-L)*R:p.l2p(P-f)+w,B=v?F*L+(1-L)*R:p.l2p(P+f)+w,V=p.l2p(P-u*A)+w,Z=p.l2p(P+s*A)+w,Y=h.c2p(C.q1,!0),ee=h.c2p(C.q3,!0),J=x.constrain(h.c2p(C.med,!0),Math.min(Y,ee)+1,Math.max(Y,ee)-1),$=void 0===C.lf||!1===i.boxpoints,Q=h.c2p($?C.min:C.lf,!0),se=h.c2p($?C.max:C.uf,!0),j=h.c2p(C.ln,!0),G=h.c2p(C.un,!0);c?m.select(this).attr("d","M"+J+","+V+"V"+Z+"M"+Y+","+D+"V"+F+(M?"H"+j+"L"+J+","+Z+"L"+G+","+F:"")+"H"+ee+"V"+D+(M?"H"+G+"L"+J+","+V+"L"+j+","+D:"")+"ZM"+Y+","+R+"H"+Q+"M"+ee+","+R+"H"+se+(0===y?"":"M"+Q+","+I+"V"+B+"M"+se+","+I+"V"+B)):m.select(this).attr("d","M"+V+","+J+"H"+Z+"M"+D+","+Y+"H"+F+(M?"V"+j+"L"+Z+","+J+"L"+F+","+G:"")+"V"+ee+"H"+D+(M?"V"+G+"L"+V+","+J+"L"+D+","+j:"")+"ZM"+R+","+Y+"V"+Q+"M"+R+","+ee+"V"+se+(0===y?"":"M"+I+","+Q+"H"+B+"M"+I+","+se+"H"+B))})}function e(a,l,i,d){var u=l.x,s=l.y,c=d.bdPos,h=d.bPos,p=i.boxpoints||i.points;x.seedPseudoRandom();var v=a.selectAll("g.points").data(p?function(f){return f.forEach(function(w){w.t=d,w.trace=i}),f}:[]);v.enter().append("g").attr("class","points"),v.exit().remove();var g=v.selectAll("path").data(function(f){var w,y,M=f.pts2,A=Math.max((f.max-f.min)/10,f.q3-f.q1),k=1e-9*A,C=.01*A,P=[],D=0;if(i.jitter){if(0===A)for(D=1,P=new Array(M.length),w=0;w<M.length;w++)P[w]=1;else for(w=0;w<M.length;w++){var F=Math.max(0,w-5),R=M[F].v,L=Math.min(M.length-1,w+5),I=M[L].v;"all"!==p&&(M[w].v<f.lf?I=Math.min(I,f.lf):R=Math.max(R,f.uf));var B=Math.sqrt(C*(L-F)/(I-R+k))||0;B=x.constrain(Math.abs(B),0,1),P.push(B),D=Math.max(B,D)}y=2*i.jitter/(D||1)}for(w=0;w<M.length;w++){var V=M[w],Z=V.v,Y=i.jitter?y*P[w]*(x.pseudoRandom()-.5):0,ee=f.pos+h+c*(i.pointpos+Y);"h"===i.orientation?(V.y=ee,V.x=Z):(V.x=ee,V.y=Z),"suspectedoutliers"===p&&Z<f.uo&&Z>f.lo&&(V.so=!0)}return M});g.enter().append("path").classed("point",!0),g.exit().remove(),g.call(T.translatePoints,u,s)}function o(a,l,i,d){var u,s,c=l.val,h=l.pos,p=!!h.rangebreaks,v=d.bPos,g=d.bPosPxOffset||0,f=i.boxmean||(i.meanline||{}).visible;Array.isArray(d.bdPos)?(u=d.bdPos[0],s=d.bdPos[1]):(u=d.bdPos,s=d.bdPos);var w=a.selectAll("path.mean").data("box"===i.type&&i.boxmean||"violin"===i.type&&i.box.visible&&i.meanline.visible?x.identity:[]);w.enter().append("path").attr("class","mean").style({fill:"none","vector-effect":"non-scaling-stroke"}),w.exit().remove(),w.each(function(y){var M=h.c2l(y.pos+v,!0),A=h.l2p(M-u)+g,k=h.l2p(M+s)+g,C=p?(A+k)/2:h.l2p(M)+g,P=c.c2p(y.mean,!0),D=c.c2p(y.mean-y.sd,!0),F=c.c2p(y.mean+y.sd,!0);"h"===i.orientation?m.select(this).attr("d","M"+P+","+A+"V"+k+("sd"===f?"m0,0L"+D+","+C+"L"+P+","+A+"L"+F+","+C+"Z":"")):m.select(this).attr("d","M"+A+","+P+"H"+k+("sd"===f?"m0,0L"+C+","+D+"L"+A+","+P+"L"+C+","+F+"Z":""))})}oe.exports={plot:function(a,l,i,d){var u=l.xaxis,s=l.yaxis;x.makeTraceGroups(d,i,"trace boxes").each(function(c){var h,p,v=m.select(this),g=c[0],f=g.t,w=g.trace;f.wdPos=f.bdPos*w.whiskerwidth,!0!==w.visible||f.empty?v.remove():("h"===w.orientation?(h=s,p=u):(h=u,p=s),b(v,{pos:h,val:p},w,f),e(v,{x:u,y:s},w,f),o(v,{pos:h,val:p},w,f))})},plotBoxAndWhiskers:b,plotPoints:e,plotBoxMean:o}},{"../../components/drawing":388,"../../lib":503,"@plotly/d3":58}],683:[function(_,oe,ae){"use strict";oe.exports=function(m,x){var T,b,e=m.cd,o=m.xaxis,a=m.yaxis,l=[];if(!1===x)for(T=0;T<e.length;T++)for(b=0;b<(e[T].pts||[]).length;b++)e[T].pts[b].selected=0;else for(T=0;T<e.length;T++)for(b=0;b<(e[T].pts||[]).length;b++){var i=e[T].pts[b],d=o.c2p(i.x),u=a.c2p(i.y);x.contains([d,u],null,i.i,m)?(l.push({pointNumber:i.i,x:o.c2d(i.x),y:a.c2d(i.y)}),i.selected=1):i.selected=0}return l}},{}],684:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../components/color"),T=_("../../components/drawing");oe.exports={style:function(b,e,o){var a=o||m.select(b).selectAll("g.trace.boxes");a.style("opacity",function(l){return l[0].trace.opacity}),a.each(function(l){var i=m.select(this),d=l[0].trace,u=d.line.width;function s(p,v,g,f){p.style("stroke-width",v+"px").call(x.stroke,g).call(x.fill,f)}var c=i.selectAll("path.box");if("candlestick"===d.type)c.each(function(p){if(!p.empty){var v=m.select(this),g=d[p.dir];s(v,g.line.width,g.line.color,g.fillcolor),v.style("opacity",d.selectedpoints&&!p.selected?.3:1)}});else{s(c,u,d.line.color,d.fillcolor),i.selectAll("path.mean").style({"stroke-width":u,"stroke-dasharray":2*u+"px,"+u+"px"}).call(x.stroke,d.line.color);var h=i.selectAll("path.point");T.pointStyle(h,d,b)}})},styleOnSelect:function(b,e,o){var a=e[0].trace,l=o.selectAll("path.point");a.selectedpoints?T.selectedPointStyle(l,a):T.pointStyle(l,a,b)}}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],685:[function(_,oe,ae){"use strict";var m=_("../../lib").extendFlat,x=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=_("../ohlc/attributes"),b=_("../box/attributes");function e(o){return{line:{color:m({},b.line.color,{dflt:o}),width:b.line.width,editType:"style"},fillcolor:b.fillcolor,editType:"style"}}oe.exports={xperiod:T.xperiod,xperiod0:T.xperiod0,xperiodalignment:T.xperiodalignment,xhoverformat:x("x"),yhoverformat:x("y"),x:T.x,open:T.open,high:T.high,low:T.low,close:T.close,line:{width:m({},b.line.width,{}),editType:"style"},increasing:e(T.increasing.line.color.dflt),decreasing:e(T.decreasing.line.color.dflt),text:T.text,hovertext:T.hovertext,whiskerwidth:m({},b.whiskerwidth,{dflt:0}),hoverlabel:T.hoverlabel}},{"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673,"../ohlc/attributes":872}],686:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../../plots/cartesian/align_period"),b=_("../ohlc/calc").calcCommon;function e(o,a,l,i){return{min:l,q1:Math.min(o,i),med:i,q3:Math.max(o,i),max:a}}oe.exports=function(o,a){var l=o._fullLayout,i=x.getFromId(o,a.xaxis),d=x.getFromId(o,a.yaxis),u=i.makeCalcdata(a,"x"),s=T(a,i,"x",u).vals,c=b(o,a,u,s,d,e);return c.length?(m.extendFlat(c[0].t,{num:l._numBoxes,dPos:m.distinctVals(s).minDiff/2,posLetter:"x",valLetter:"y"}),l._numBoxes++,c):[{t:{empty:!0}}]}},{"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../ohlc/calc":873}],687:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../components/color"),T=_("../ohlc/ohlc_defaults"),b=_("../scatter/period_defaults"),e=_("./attributes");function o(a,l,i,d){var u=i(d+".line.color");i(d+".line.width",l.line.width),i(d+".fillcolor",x.addOpacity(u,.5))}oe.exports=function(a,l,i,d){function u(s,c){return m.coerce(a,l,e,s,c)}T(a,l,u,d)?(b(a,l,d,u,{x:!0}),u("xhoverformat"),u("yhoverformat"),u("line.width"),o(0,l,u,"increasing"),o(0,l,u,"decreasing"),u("text"),u("hovertext"),u("whiskerwidth"),d._requestRangeslider[l.xaxis]=!0):l.visible=!1}},{"../../components/color":366,"../../lib":503,"../ohlc/ohlc_defaults":877,"../scatter/period_defaults":946,"./attributes":685}],688:[function(_,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"candlestick",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","showLegend","candlestick","boxLayout"],meta:{},attributes:_("./attributes"),layoutAttributes:_("../box/layout_attributes"),supplyLayoutDefaults:_("../box/layout_defaults").supplyLayoutDefaults,crossTraceCalc:_("../box/cross_trace_calc").crossTraceCalc,supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("../box/plot").plot,layerName:"boxlayer",style:_("../box/style").style,hoverPoints:_("../ohlc/hover").hoverPoints,selectPoints:_("../ohlc/select")}},{"../../plots/cartesian":568,"../box/cross_trace_calc":675,"../box/layout_attributes":680,"../box/layout_defaults":681,"../box/plot":682,"../box/style":684,"../ohlc/hover":875,"../ohlc/select":879,"./attributes":685,"./calc":686,"./defaults":687}],689:[function(_,oe,ae){"use strict";var m=_("./axis_defaults"),x=_("../../plot_api/plot_template");oe.exports=function(T,b,e,o,a){var l,i,d,u;o("a")||(o("da"),o("a0")),o("b")||(o("db"),o("b0")),l=T,i=b,d=e,u=a,["aaxis","baxis"].forEach(function(s){var c=s.charAt(0),h=l[s]||{},p=x.newContainer(i,s);m(h,p,{noTicklabelstep:!0,tickfont:"x",id:c+"axis",letter:c,font:i.font,name:s,data:l[c],calendar:i.calendar,dfltColor:u,bgColor:d.paper_bgcolor,autotypenumbersDflt:d.autotypenumbers,fullLayout:d}),p._categories=p._categories||[],l[s]||"-"===h.type||(l[s]={type:h.type})})}},{"../../plot_api/plot_template":543,"./axis_defaults":694}],690:[function(_,oe,ae){"use strict";var m=_("../../lib").isArrayOrTypedArray;oe.exports=function(x){return function T(b,e){if(!m(b)||e>=10)return null;for(var o=1/0,a=-1/0,l=b.length,i=0;i<l;i++){var d=b[i];if(m(d)){var u=T(d,e+1);u&&(o=Math.min(u[0],o),a=Math.max(u[1],a))}else o=Math.min(d,o),a=Math.max(d,a)}return[o,a]}(x,0)}},{"../../lib":503}],691:[function(_,oe,ae){"use strict";var m=_("../../plots/font_attributes"),x=_("./axis_attributes"),T=_("../../components/color/attributes"),b=m({editType:"calc"});b.family.dflt='"Open Sans", verdana, arial, sans-serif',b.size.dflt=12,b.color.dflt=T.defaultLine,oe.exports={carpet:{valType:"string",editType:"calc"},x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},a:{valType:"data_array",editType:"calc"},a0:{valType:"number",dflt:0,editType:"calc"},da:{valType:"number",dflt:1,editType:"calc"},b:{valType:"data_array",editType:"calc"},b0:{valType:"number",dflt:0,editType:"calc"},db:{valType:"number",dflt:1,editType:"calc"},cheaterslope:{valType:"number",dflt:1,editType:"calc"},aaxis:x,baxis:x,font:b,color:{valType:"color",dflt:T.defaultLine,editType:"plot"},transforms:void 0}},{"../../components/color/attributes":365,"../../plots/font_attributes":585,"./axis_attributes":693}],692:[function(_,oe,ae){"use strict";var m=_("../../lib").isArrayOrTypedArray;oe.exports=function(x,T,b,e){var o,a,l,i,d,u,s,c,h,p,v,g,f,w=m(b)?"a":"b",y=("a"===w?x.aaxis:x.baxis).smoothing,M="a"===w?x.a2i:x.b2j,A="a"===w?b:e,k="a"===w?e:b,C="a"===w?T.a.length:T.b.length,P="a"===w?T.b.length:T.a.length,D=Math.floor("a"===w?x.b2j(k):x.a2i(k)),F="a"===w?function(se){return x.evalxy([],se,D)}:function(se){return x.evalxy([],D,se)};y&&(l=Math.max(0,Math.min(P-2,D)),i=D-l,a="a"===w?function(se,j){return x.dxydi([],se,l,j,i)}:function(se,j){return x.dxydj([],l,se,i,j)});var R=M(A[0]),L=M(A[1]),I=R<L?1:-1,B=1e-8*(L-R),V=I>0?Math.floor:Math.ceil,Z=I>0?Math.ceil:Math.floor,Y=I>0?Math.min:Math.max,ee=I>0?Math.max:Math.min,J=V(R+B),$=Z(L-B),Q=[[s=F(R)]];for(o=J;o*I<$*I;o+=I)d=[],v=ee(R,o),f=(g=Y(L,o+I))-v,u=Math.max(0,Math.min(C-2,Math.floor(.5*(v+g)))),c=F(g),y&&(h=a(u,v-u),p=a(u,g-u),d.push([s[0]+h[0]/3*f,s[1]+h[1]/3*f]),d.push([c[0]-p[0]/3*f,c[1]-p[1]/3*f])),d.push(c),Q.push(d),s=c;return Q}},{"../../lib":503}],693:[function(_,oe,ae){"use strict";var m=_("../../plots/font_attributes"),x=_("../../components/color/attributes"),T=_("../../plots/cartesian/layout_attributes"),b=_("../../plots/cartesian/axis_format_attributes").descriptionWithDates,e=_("../../plot_api/edit_types").overrideAll;oe.exports={color:{valType:"color",editType:"calc"},smoothing:{valType:"number",dflt:1,min:0,max:1.3,editType:"calc"},title:{text:{valType:"string",dflt:"",editType:"calc"},font:m({editType:"calc"}),offset:{valType:"number",dflt:10,editType:"calc"},editType:"calc"},type:{valType:"enumerated",values:["-","linear","date","category"],dflt:"-",editType:"calc"},autotypenumbers:T.autotypenumbers,autorange:{valType:"enumerated",values:[!0,!1,"reversed"],dflt:!0,editType:"calc"},rangemode:{valType:"enumerated",values:["normal","tozero","nonnegative"],dflt:"normal",editType:"calc"},range:{valType:"info_array",editType:"calc",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}]},fixedrange:{valType:"boolean",dflt:!1,editType:"calc"},cheatertype:{valType:"enumerated",values:["index","value"],dflt:"value",editType:"calc"},tickmode:{valType:"enumerated",values:["linear","array"],dflt:"array",editType:"calc"},nticks:{valType:"integer",min:0,dflt:0,editType:"calc"},tickvals:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},showticklabels:{valType:"enumerated",values:["start","end","both","none"],dflt:"start",editType:"calc"},tickfont:m({editType:"calc"}),tickangle:{valType:"angle",dflt:"auto",editType:"calc"},tickprefix:{valType:"string",dflt:"",editType:"calc"},showtickprefix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},ticksuffix:{valType:"string",dflt:"",editType:"calc"},showticksuffix:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},showexponent:{valType:"enumerated",values:["all","first","last","none"],dflt:"all",editType:"calc"},exponentformat:{valType:"enumerated",values:["none","e","E","power","SI","B"],dflt:"B",editType:"calc"},minexponent:{valType:"number",dflt:3,min:0,editType:"calc"},separatethousands:{valType:"boolean",dflt:!1,editType:"calc"},tickformat:{valType:"string",dflt:"",editType:"calc",description:b("tick label")},tickformatstops:e(T.tickformatstops,"calc","from-root"),categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},labelpadding:{valType:"integer",dflt:10,editType:"calc"},labelprefix:{valType:"string",editType:"calc"},labelsuffix:{valType:"string",dflt:"",editType:"calc"},showline:{valType:"boolean",dflt:!1,editType:"calc"},linecolor:{valType:"color",dflt:x.defaultLine,editType:"calc"},linewidth:{valType:"number",min:0,dflt:1,editType:"calc"},gridcolor:{valType:"color",editType:"calc"},gridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},showgrid:{valType:"boolean",dflt:!0,editType:"calc"},minorgridcount:{valType:"integer",min:0,dflt:0,editType:"calc"},minorgridwidth:{valType:"number",min:0,dflt:1,editType:"calc"},minorgridcolor:{valType:"color",dflt:x.lightLine,editType:"calc"},startline:{valType:"boolean",editType:"calc"},startlinecolor:{valType:"color",editType:"calc"},startlinewidth:{valType:"number",dflt:1,editType:"calc"},endline:{valType:"boolean",editType:"calc"},endlinewidth:{valType:"number",dflt:1,editType:"calc"},endlinecolor:{valType:"color",editType:"calc"},tick0:{valType:"number",min:0,dflt:0,editType:"calc"},dtick:{valType:"number",min:0,dflt:1,editType:"calc"},arraytick0:{valType:"integer",min:0,dflt:0,editType:"calc"},arraydtick:{valType:"integer",min:1,dflt:1,editType:"calc"},_deprecated:{title:{valType:"string",editType:"calc"},titlefont:m({editType:"calc"}),titleoffset:{valType:"number",dflt:10,editType:"calc"}},editType:"calc"}},{"../../components/color/attributes":365,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/font_attributes":585}],694:[function(_,oe,ae){"use strict";var m=_("./attributes"),x=_("../../components/color").addOpacity,T=_("../../registry"),b=_("../../lib"),e=_("../../plots/cartesian/tick_value_defaults"),o=_("../../plots/cartesian/tick_label_defaults"),a=_("../../plots/cartesian/prefix_suffix_defaults"),l=_("../../plots/cartesian/category_order_defaults"),i=_("../../plots/cartesian/set_convert"),d=_("../../plots/cartesian/axis_autotype");oe.exports=function(u,s,c){var h=c.letter,p=c.font||{},v=m[h+"axis"];function g(L,I){return b.coerce(u,s,v,L,I)}function f(L,I){return b.coerce2(u,s,v,L,I)}c.name&&(s._name=c.name,s._id=c.name),g("autotypenumbers",c.autotypenumbersDflt);var w=g("type");"-"===w&&(c.data&&function(L,I){if("-"===L.type){var B=L._id.charAt(0);L.type=d(I,L[B+"calendar"],{autotypenumbers:L.autotypenumbers})}}(s,c.data),"-"===s.type?s.type="linear":w=u.type=s.type),g("smoothing"),g("cheatertype"),g("showticklabels"),g("labelprefix",h+" = "),g("labelsuffix"),g("showtickprefix"),g("showticksuffix"),g("separatethousands"),g("tickformat"),g("exponentformat"),g("minexponent"),g("showexponent"),g("categoryorder"),g("tickmode"),g("tickvals"),g("ticktext"),g("tick0"),g("dtick"),"array"===s.tickmode&&(g("arraytick0"),g("arraydtick")),g("labelpadding"),s._hovertitle=h,"date"===w&&T.getComponentMethod("calendars","handleDefaults")(u,s,"calendar",c.calendar),i(s,c.fullLayout),s.c2p=b.identity;var y=g("color",c.dfltColor),M=y===u.color?y:p.color;g("title.text")&&(b.coerceFont(g,"title.font",{family:p.family,size:b.bigFont(p.size),color:M}),g("title.offset")),g("tickangle"),g("autorange",!s.isValidRange(u.range))&&g("rangemode"),g("range"),s.cleanRange(),g("fixedrange"),e(u,s,g,w),a(u,s,g,w,c),o(u,s,g,w,c),l(u,s,g,{data:c.data,dataAttr:h});var A=f("gridcolor",x(y,.3)),k=f("gridwidth"),C=g("showgrid");C||(delete s.gridcolor,delete s.gridwidth);var P=f("startlinecolor",y),D=f("startlinewidth",k);g("startline",s.showgrid||!!P||!!D)||(delete s.startlinecolor,delete s.startlinewidth);var F=f("endlinecolor",y),R=f("endlinewidth",k);return g("endline",s.showgrid||!!F||!!R)||(delete s.endlinecolor,delete s.endlinewidth),C?(g("minorgridcount"),g("minorgridwidth",k),g("minorgridcolor",x(A,.06)),s.minorgridcount||(delete s.minorgridwidth,delete s.minorgridcolor)):(delete s.gridcolor,delete s.gridWidth),"none"===s.showticklabels&&(delete s.tickfont,delete s.tickangle,delete s.showexponent,delete s.exponentformat,delete s.minexponent,delete s.tickformat,delete s.showticksuffix,delete s.showtickprefix),s.showticksuffix||delete s.ticksuffix,s.showtickprefix||delete s.tickprefix,g("tickmode"),s}},{"../../components/color":366,"../../lib":503,"../../plots/cartesian/axis_autotype":555,"../../plots/cartesian/category_order_defaults":559,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/set_convert":576,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_value_defaults":580,"../../registry":638,"./attributes":691}],695:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/axes"),x=_("../../lib").isArray1D,T=_("./cheater_basis"),b=_("./array_minmax"),e=_("./calc_gridlines"),o=_("./calc_labels"),a=_("./calc_clippath"),l=_("../heatmap/clean_2d_array"),i=_("./smooth_fill_2d_array"),d=_("../heatmap/convert_column_xyz"),u=_("./set_convert");oe.exports=function(s,c){var h=m.getFromId(s,c.xaxis),p=m.getFromId(s,c.yaxis),v=c.aaxis,g=c.baxis,f=c.x,w=c.y,y=[];f&&x(f)&&y.push("x"),w&&x(w)&&y.push("y"),y.length&&d(c,v,g,"a","b",y);var M=c._a=c._a||c.a,A=c._b=c._b||c.b;f=c._x||c.x,w=c._y||c.y;var k={};c._cheater&&(f=T("index"===v.cheatertype?M.length:M,"index"===g.cheatertype?A.length:A,c.cheaterslope)),c._x=f=l(f),c._y=w=l(w),i(f,M,A),i(w,M,A),u(c),c.setScale();var D=b(f),F=b(w),R=.5*(D[1]-D[0]),L=.5*(D[1]+D[0]),I=.5*(F[1]-F[0]),B=.5*(F[1]+F[0]);return F=[B-1.3*I,B+1.3*I],c._extremes[h._id]=m.findExtremes(h,D=[L-1.3*R,L+1.3*R],{padded:!0}),c._extremes[p._id]=m.findExtremes(p,F,{padded:!0}),e(c,"a","b"),e(c,"b","a"),o(c,v),o(c,g),k.clipsegments=a(c._xctrl,c._yctrl,v,g),k.x=f,k.y=w,k.a=M,k.b=A,[k]}},{"../../lib":503,"../../plots/cartesian/axes":554,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"./array_minmax":690,"./calc_clippath":696,"./calc_gridlines":697,"./calc_labels":698,"./cheater_basis":700,"./set_convert":713,"./smooth_fill_2d_array":714}],696:[function(_,oe,ae){"use strict";oe.exports=function(m,x,T,b){var e,o,a,l=[],i=!!T.smoothing,d=!!b.smoothing,u=m[0].length-1,s=m.length-1;for(e=0,o=[],a=[];e<=u;e++)o[e]=m[0][e],a[e]=x[0][e];for(l.push({x:o,y:a,bicubic:i}),e=0,o=[],a=[];e<=s;e++)o[e]=m[e][u],a[e]=x[e][u];for(l.push({x:o,y:a,bicubic:d}),e=u,o=[],a=[];e>=0;e--)o[u-e]=m[s][e],a[u-e]=x[s][e];for(l.push({x:o,y:a,bicubic:i}),e=s,o=[],a=[];e>=0;e--)o[s-e]=m[e][0],a[s-e]=x[e][0];return l.push({x:o,y:a,bicubic:d}),l}},{}],697:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/axes"),x=_("../../lib/extend").extendFlat;oe.exports=function(T,b,e){var o,a,l,i,d,u,s,c,h,p,v,g,f,w,y=T["_"+b],M=T[b+"axis"],A=M._gridlines=[],k=M._minorgridlines=[],C=M._boundarylines=[],P=T["_"+e],D=T[e+"axis"];"array"===M.tickmode&&(M.tickvals=y.slice());var F=T._xctrl,R=T._yctrl,L=F[0].length,I=F.length,B=T._a.length,V=T._b.length;m.prepTicks(M),"array"===M.tickmode&&delete M.tickvals;var Z=M.smoothing?3:1;function Y(J){var $,Q,se,j,G,W,ie,q,te,ne,le,ue,de=[],he=[],be={};if("b"===b)for(Q=T.b2j(J),se=Math.floor(Math.max(0,Math.min(V-2,Q))),j=Q-se,be.length=V,be.crossLength=B,be.xy=function(ge){return T.evalxy([],ge,Q)},be.dxy=function(ge,we){return T.dxydi([],ge,se,we,j)},$=0;$<B;$++)W=Math.min(B-2,$),ie=$-W,q=T.evalxy([],$,Q),D.smoothing&&$>0&&(te=T.dxydi([],$-1,se,0,j),de.push(G[0]+te[0]/3),he.push(G[1]+te[1]/3),ne=T.dxydi([],$-1,se,1,j),de.push(q[0]-ne[0]/3),he.push(q[1]-ne[1]/3)),de.push(q[0]),he.push(q[1]),G=q;else for($=T.a2i(J),W=Math.floor(Math.max(0,Math.min(B-2,$))),ie=$-W,be.length=B,be.crossLength=V,be.xy=function(ge){return T.evalxy([],$,ge)},be.dxy=function(ge,we){return T.dxydj([],W,ge,ie,we)},Q=0;Q<V;Q++)se=Math.min(V-2,Q),j=Q-se,q=T.evalxy([],$,Q),D.smoothing&&Q>0&&(le=T.dxydj([],W,Q-1,ie,0),de.push(G[0]+le[0]/3),he.push(G[1]+le[1]/3),ue=T.dxydj([],W,Q-1,ie,1),de.push(q[0]-ue[0]/3),he.push(q[1]-ue[1]/3)),de.push(q[0]),he.push(q[1]),G=q;return be.axisLetter=b,be.axis=M,be.crossAxis=D,be.value=J,be.constvar=e,be.index=c,be.x=de,be.y=he,be.smoothing=D.smoothing,be}function ee(J){var $,Q,se,j,G,W=[],ie=[],q={};if(q.length=y.length,q.crossLength=P.length,"b"===b)for(se=Math.max(0,Math.min(V-2,J)),G=Math.min(1,Math.max(0,J-se)),q.xy=function(te){return T.evalxy([],te,J)},q.dxy=function(te,ne){return T.dxydi([],te,se,ne,G)},$=0;$<L;$++)W[$]=F[J*Z][$],ie[$]=R[J*Z][$];else for(Q=Math.max(0,Math.min(B-2,J)),j=Math.min(1,Math.max(0,J-Q)),q.xy=function(te){return T.evalxy([],J,te)},q.dxy=function(te,ne){return T.dxydj([],Q,te,j,ne)},$=0;$<I;$++)W[$]=F[$][J*Z],ie[$]=R[$][J*Z];return q.axisLetter=b,q.axis=M,q.crossAxis=D,q.value=y[J],q.constvar=e,q.index=J,q.x=W,q.y=ie,q.smoothing=D.smoothing,q}if("array"===M.tickmode){for(i=5e-15,u=(d=[Math.floor((y.length-1-M.arraytick0)/M.arraydtick*(1+i)),Math.ceil(-M.arraytick0/M.arraydtick/(1+i))].sort(function(J,$){return J-$}))[0]-1,s=d[1]+1,c=u;c<s;c++)(a=M.arraytick0+M.arraydtick*c)<0||a>y.length-1||A.push(x(ee(a),{color:M.gridcolor,width:M.gridwidth}));for(c=u;c<s;c++)if(l=M.arraytick0+M.arraydtick*c,v=Math.min(l+M.arraydtick,y.length-1),!(l<0||l>y.length-1||v<0||v>y.length-1))for(g=y[l],f=y[v],o=0;o<M.minorgridcount;o++)(w=v-l)<=0||(p=g+(f-g)*(o+1)/(M.minorgridcount+1)*(M.arraydtick/w))<y[0]||p>y[y.length-1]||k.push(x(Y(p),{color:M.minorgridcolor,width:M.minorgridwidth}));M.startline&&C.push(x(ee(0),{color:M.startlinecolor,width:M.startlinewidth})),M.endline&&C.push(x(ee(y.length-1),{color:M.endlinecolor,width:M.endlinewidth}))}else{for(i=5e-15,u=(d=[Math.floor((y[y.length-1]-M.tick0)/M.dtick*(1+i)),Math.ceil((y[0]-M.tick0)/M.dtick/(1+i))].sort(function(J,$){return J-$}))[0],s=d[1],c=u;c<=s;c++)A.push(x(Y(h=M.tick0+M.dtick*c),{color:M.gridcolor,width:M.gridwidth}));for(c=u-1;c<s+1;c++)for(h=M.tick0+M.dtick*c,o=0;o<M.minorgridcount;o++)(p=h+M.dtick*(o+1)/(M.minorgridcount+1))<y[0]||p>y[y.length-1]||k.push(x(Y(p),{color:M.minorgridcolor,width:M.minorgridwidth}));M.startline&&C.push(x(Y(y[0]),{color:M.startlinecolor,width:M.startlinewidth})),M.endline&&C.push(x(Y(y[y.length-1]),{color:M.endlinecolor,width:M.endlinewidth}))}}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],698:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/axes"),x=_("../../lib/extend").extendFlat;oe.exports=function(T,b){var e,o,a,l=b._labels=[],i=b._gridlines;for(e=0;e<i.length;e++)a=i[e],-1!==["start","both"].indexOf(b.showticklabels)&&(o=m.tickText(b,a.value),x(o,{prefix:void 0,suffix:void 0,endAnchor:!0,xy:a.xy(0),dxy:a.dxy(0,0),axis:a.axis,length:a.crossAxis.length,font:a.axis.tickfont,isFirst:0===e,isLast:e===i.length-1}),l.push(o)),-1!==["end","both"].indexOf(b.showticklabels)&&(o=m.tickText(b,a.value),x(o,{endAnchor:!1,xy:a.xy(a.crossLength-1),dxy:a.dxy(a.crossLength-2,1),axis:a.axis,length:a.crossAxis.length,font:a.axis.tickfont,isFirst:0===e,isLast:e===i.length-1}),l.push(o))}},{"../../lib/extend":493,"../../plots/cartesian/axes":554}],699:[function(_,oe,ae){"use strict";oe.exports=function(m,x,T,b){var e=m[0]-x[0],o=m[1]-x[1],a=T[0]-x[0],l=T[1]-x[1],i=Math.pow(e*e+o*o,.25),d=Math.pow(a*a+l*l,.25),u=(d*d*e-i*i*a)*b,s=(d*d*o-i*i*l)*b,c=d*(i+d)*3,h=i*(i+d)*3;return[[x[0]+(c&&u/c),x[1]+(c&&s/c)],[x[0]-(h&&u/h),x[1]-(h&&s/h)]]}},{}],700:[function(_,oe,ae){"use strict";var m=_("../../lib").isArrayOrTypedArray;oe.exports=function(x,T,b){var e,o,a,l,i,d,u=[],s=m(x)?x.length:x,c=m(T)?T.length:T,h=m(x)?x:null,p=m(T)?T:null;h&&(a=(h.length-1)/(h[h.length-1]-h[0])/(s-1)),p&&(l=(p.length-1)/(p[p.length-1]-p[0])/(c-1));var v=1/0,g=-1/0;for(o=0;o<c;o++)for(u[o]=[],i=p?(p[o]-p[0])*l:o/(c-1),e=0;e<s;e++)d=(h?(h[e]-h[0])*a:e/(s-1))-i*b,v=Math.min(d,v),g=Math.max(d,g),u[o][e]=d;var f=1/(g-v),w=-v*f;for(o=0;o<c;o++)for(e=0;e<s;e++)u[o][e]=f*u[o][e]+w;return u}},{"../../lib":503}],701:[function(_,oe,ae){"use strict";var m=_("./catmull_rom"),x=_("../../lib").ensureArray;function T(b,e,o){return[(2*(-.5*o[0]+1.5*e[0])+b[0])/3,(2*(-.5*o[1]+1.5*e[1])+b[1])/3]}oe.exports=function(b,e,o,a,l,i){var d,u,s,c,h,p,v,g,f,w,y=o[0].length,M=o.length,A=l?3*y-2:y,k=i?3*M-2:M;for(b=x(b,k),e=x(e,k),s=0;s<k;s++)b[s]=x(b[s],A),e[s]=x(e[s],A);for(u=0,c=0;u<M;u++,c+=i?3:1)for(h=b[c],p=e[c],v=o[u],g=a[u],d=0,s=0;d<y;d++,s+=l?3:1)h[s]=v[d],p[s]=g[d];if(l)for(u=0,c=0;u<M;u++,c+=i?3:1){for(d=1,s=3;d<y-1;d++,s+=3)f=m([o[u][d-1],a[u][d-1]],[o[u][d],a[u][d]],[o[u][d+1],a[u][d+1]],l),b[c][s-1]=f[0][0],e[c][s-1]=f[0][1],b[c][s+1]=f[1][0],e[c][s+1]=f[1][1];w=T([b[c][0],e[c][0]],[b[c][2],e[c][2]],[b[c][3],e[c][3]]),b[c][1]=w[0],e[c][1]=w[1],w=T([b[c][A-1],e[c][A-1]],[b[c][A-3],e[c][A-3]],[b[c][A-4],e[c][A-4]]),b[c][A-2]=w[0],e[c][A-2]=w[1]}if(i)for(s=0;s<A;s++){for(c=3;c<k-3;c+=3)f=m([b[c-3][s],e[c-3][s]],[b[c][s],e[c][s]],[b[c+3][s],e[c+3][s]],i),b[c-1][s]=f[0][0],e[c-1][s]=f[0][1],b[c+1][s]=f[1][0],e[c+1][s]=f[1][1];w=T([b[0][s],e[0][s]],[b[2][s],e[2][s]],[b[3][s],e[3][s]]),b[1][s]=w[0],e[1][s]=w[1],w=T([b[k-1][s],e[k-1][s]],[b[k-3][s],e[k-3][s]],[b[k-4][s],e[k-4][s]]),b[k-2][s]=w[0],e[k-2][s]=w[1]}if(l&&i)for(c=1;c<k;c+=(c+1)%3==0?2:1){for(s=3;s<A-3;s+=3)f=m([b[c][s-3],e[c][s-3]],[b[c][s],e[c][s]],[b[c][s+3],e[c][s+3]],l),b[c][s-1]=.5*(b[c][s-1]+f[0][0]),e[c][s-1]=.5*(e[c][s-1]+f[0][1]),b[c][s+1]=.5*(b[c][s+1]+f[1][0]),e[c][s+1]=.5*(e[c][s+1]+f[1][1]);w=T([b[c][0],e[c][0]],[b[c][2],e[c][2]],[b[c][3],e[c][3]]),b[c][1]=.5*(b[c][1]+w[0]),e[c][1]=.5*(e[c][1]+w[1]),w=T([b[c][A-1],e[c][A-1]],[b[c][A-3],e[c][A-3]],[b[c][A-4],e[c][A-4]]),b[c][A-2]=.5*(b[c][A-2]+w[0]),e[c][A-2]=.5*(e[c][A-2]+w[1])}return[b,e]}},{"../../lib":503,"./catmull_rom":699}],702:[function(_,oe,ae){"use strict";oe.exports={RELATIVE_CULL_TOLERANCE:1e-6}},{}],703:[function(_,oe,ae){"use strict";oe.exports=function(m,x,T){return x&&T?function(b,e,o,a,l){var i,c,h;b||(b=[]),e*=3,o*=3;var p=a*a,v=1-a,g=v*v,f=v*a*2,w=-3*g,y=3*(g-f),M=3*(f-p),A=3*p,k=l*l,C=k*l,P=1-l,D=P*P,F=D*P;for(h=0;h<m.length;h++)i=w*(c=m[h])[o][e]+y*c[o][e+1]+M*c[o][e+2]+A*c[o][e+3],b[h]=F*i+3*(D*l*(w*c[o+1][e]+y*c[o+1][e+1]+M*c[o+1][e+2]+A*c[o+1][e+3])+P*k*(w*c[o+2][e]+y*c[o+2][e+1]+M*c[o+2][e+2]+A*c[o+2][e+3]))+C*(w*c[o+3][e]+y*c[o+3][e+1]+M*c[o+3][e+2]+A*c[o+3][e+3]);return b}:x?function(b,e,o,a,l){var i,u,s;b||(b=[]),e*=3;var c=a*a,h=1-a,p=h*h,v=h*a*2,g=-3*p,f=3*(p-v),w=3*(v-c),y=3*c,M=1-l;for(u=0;u<m.length;u++)i=g*(s=m[u])[o][e]+f*s[o][e+1]+w*s[o][e+2]+y*s[o][e+3],b[u]=M*i+l*(g*s[o+1][e]+f*s[o+1][e+1]+w*s[o+1][e+2]+y*s[o+1][e+3]);return b}:T?function(b,e,o,a,l){var i,c,h;b||(b=[]),o*=3;var p=l*l,v=p*l,g=1-l,f=g*g,w=f*g;for(c=0;c<m.length;c++)i=(h=m[c])[o][e+1]-h[o][e],b[c]=w*i+3*(f*l*(h[o+1][e+1]-h[o+1][e])+g*p*(h[o+2][e+1]-h[o+2][e]))+v*(h[o+3][e+1]-h[o+3][e]);return b}:function(b,e,o,a,l){var i,u,s;b||(b=[]);var c=1-l;for(u=0;u<m.length;u++)i=(s=m[u])[o][e+1]-s[o][e],b[u]=c*i+l*(s[o+1][e+1]-s[o+1][e]);return b}}},{}],704:[function(_,oe,ae){"use strict";oe.exports=function(m,x,T){return x&&T?function(b,e,o,a,l){var i,c,h;b||(b=[]),e*=3,o*=3;var p=a*a,v=p*a,g=1-a,f=g*g,w=f*g,y=l*l,M=1-l,A=M*M,k=M*l*2,C=-3*A,P=3*(A-k),D=3*(k-y),F=3*y;for(h=0;h<m.length;h++)i=C*(c=m[h])[o][e]+P*c[o+1][e]+D*c[o+2][e]+F*c[o+3][e],b[h]=w*i+3*(f*a*(C*c[o][e+1]+P*c[o+1][e+1]+D*c[o+2][e+1]+F*c[o+3][e+1])+g*p*(C*c[o][e+2]+P*c[o+1][e+2]+D*c[o+2][e+2]+F*c[o+3][e+2]))+v*(C*c[o][e+3]+P*c[o+1][e+3]+D*c[o+2][e+3]+F*c[o+3][e+3]);return b}:x?function(b,e,o,a,l){var i,c,h;b||(b=[]),e*=3;var p=l*l,v=p*l,g=1-l,f=g*g,w=f*g;for(c=0;c<m.length;c++)i=(h=m[c])[o+1][e]-h[o][e],b[c]=w*i+3*(f*l*(h[o+1][e+1]-h[o][e+1])+g*p*(h[o+1][e+2]-h[o][e+2]))+v*(h[o+1][e+3]-h[o][e+3]);return b}:T?function(b,e,o,a,l){var i,u,s;b||(b=[]),o*=3;var c=1-a,h=l*l,p=1-l,v=p*p,g=p*l*2,f=-3*v,w=3*(v-g),y=3*(g-h),M=3*h;for(u=0;u<m.length;u++)i=f*(s=m[u])[o][e]+w*s[o+1][e]+y*s[o+2][e]+M*s[o+3][e],b[u]=c*i+a*(f*s[o][e+1]+w*s[o+1][e+1]+y*s[o+2][e+1]+M*s[o+3][e+1]);return b}:function(b,e,o,a,l){var i,u,s;b||(b=[]);var c=1-a;for(u=0;u<m.length;u++)i=(s=m[u])[o+1][e]-s[o][e],b[u]=c*i+a*(s[o+1][e+1]-s[o][e+1]);return b}}},{}],705:[function(_,oe,ae){"use strict";oe.exports=function(m,x,T,b,e){var o=x-2,a=T-2;return b&&e?function(l,i,d){var u,p,v;l||(l=[]);var g=Math.max(0,Math.min(Math.floor(i),o)),f=Math.max(0,Math.min(Math.floor(d),a)),w=Math.max(0,Math.min(1,i-g)),y=Math.max(0,Math.min(1,d-f));g*=3,f*=3;var M=w*w,A=M*w,k=1-w,C=k*k,P=C*k,D=y*y,F=D*y,R=1-y,L=R*R,I=L*R;for(v=0;v<m.length;v++)u=P*(p=m[v])[f][g]+3*(C*w*p[f][g+1]+k*M*p[f][g+2])+A*p[f][g+3],l[v]=I*u+3*(L*y*(P*p[f+1][g]+3*(C*w*p[f+1][g+1]+k*M*p[f+1][g+2])+A*p[f+1][g+3])+R*D*(P*p[f+2][g]+3*(C*w*p[f+2][g+1]+k*M*p[f+2][g+2])+A*p[f+2][g+3]))+F*(P*p[f+3][g]+3*(C*w*p[f+3][g+1]+k*M*p[f+3][g+2])+A*p[f+3][g+3]);return l}:b?function(l,i,d){l||(l=[]);var u,p,v,g=Math.max(0,Math.min(Math.floor(i),o)),f=Math.max(0,Math.min(Math.floor(d),a)),w=Math.max(0,Math.min(1,i-g)),y=Math.max(0,Math.min(1,d-f));g*=3;var M=w*w,A=M*w,k=1-w,C=k*k,P=C*k,D=1-y;for(p=0;p<m.length;p++)u=D*(v=m[p])[f][g]+y*v[f+1][g],l[p]=P*u+3*(C*w*(D*v[f][g+1]+y*v[f+1][g+1])+k*M*(D*v[f][g+2]+y*v[f+1][g+1]))+A*(D*v[f][g+3]+y*v[f+1][g+1]);return l}:e?function(l,i,d){l||(l=[]);var u,p,v,g=Math.max(0,Math.min(Math.floor(i),o)),f=Math.max(0,Math.min(Math.floor(d),a)),w=Math.max(0,Math.min(1,i-g)),y=Math.max(0,Math.min(1,d-f));f*=3;var M=y*y,A=M*y,k=1-y,C=k*k,P=C*k,D=1-w;for(p=0;p<m.length;p++)u=D*(v=m[p])[f][g]+w*v[f][g+1],l[p]=P*u+3*(C*y*(D*v[f+1][g]+w*v[f+1][g+1])+k*M*(D*v[f+2][g]+w*v[f+2][g+1]))+A*(D*v[f+3][g]+w*v[f+3][g+1]);return l}:function(l,i,d){l||(l=[]);var u,c,h,p=Math.max(0,Math.min(Math.floor(i),o)),v=Math.max(0,Math.min(Math.floor(d),a)),g=Math.max(0,Math.min(1,i-p)),f=Math.max(0,Math.min(1,d-v)),w=1-f,y=1-g;for(c=0;c<m.length;c++)u=y*(h=m[c])[v][p]+g*h[v][p+1],l[c]=w*u+f*(y*h[v+1][p]+g*h[v+1][p+1]);return l}}},{}],706:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./xy_defaults"),T=_("./ab_defaults"),b=_("./attributes"),e=_("../../components/color/attributes");oe.exports=function(o,a,l,i){function d(s,c){return m.coerce(o,a,b,s,c)}a._clipPathId="clip"+a.uid+"carpet";var u=d("color",e.defaultLine);m.coerceFont(d,"font"),d("carpet"),T(o,a,i,d,u),a.a&&a.b?(a.a.length<3&&(a.aaxis.smoothing=0),a.b.length<3&&(a.baxis.smoothing=0),x(o,a,d)||(a.visible=!1),a._cheater&&d("cheaterslope")):a.visible=!1}},{"../../components/color/attributes":365,"../../lib":503,"./ab_defaults":689,"./attributes":691,"./xy_defaults":715}],707:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),plot:_("./plot"),calc:_("./calc"),animatable:!0,isContainer:!0,moduleType:"trace",name:"carpet",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","carpet","carpetAxis","notLegendIsolatable","noMultiCategory","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"./attributes":691,"./calc":695,"./defaults":706,"./plot":712}],708:[function(_,oe,ae){"use strict";oe.exports=function(m,x){for(var T,b=m._fullData.length,e=0;e<b;e++){var o=m._fullData[e];if(o.index!==x.index&&"carpet"===o.type&&(T||(T=o),o.carpet===x.carpet))return o}return T}},{}],709:[function(_,oe,ae){"use strict";oe.exports=function(m,x,T){if(0===m.length)return"";var b,e=[],o=T?3:1;for(b=0;b<m.length;b+=o)e.push(m[b]+","+x[b]),T&&b<m.length-o&&(e.push("C"),e.push([m[b+1]+","+x[b+1],m[b+2]+","+x[b+2]+" "].join(" ")));return e.join(T?"":"L")}},{}],710:[function(_,oe,ae){"use strict";var m=_("../../lib").isArrayOrTypedArray;oe.exports=function(x,T,b){var e;for(m(x)?x.length>T.length&&(x=x.slice(0,T.length)):x=[],e=0;e<T.length;e++)x[e]=b(T[e]);return x}},{"../../lib":503}],711:[function(_,oe,ae){"use strict";oe.exports=function(m,x,T,b,e,o){var a=e[0]*m.dpdx(x),l=e[1]*m.dpdy(T),i=1,d=1;if(o){var u=Math.sqrt(e[0]*e[0]+e[1]*e[1]),s=Math.sqrt(o[0]*o[0]+o[1]*o[1]);d=Math.max(0,(e[0]*o[0]+e[1]*o[1])/u/s)}var h=180*Math.atan2(l,a)/Math.PI;return h<-90?(h+=180,i=-i):h>90&&(h-=180,i=-i),{angle:h,flip:i,p:m.c2p(b,x,T),offsetMultplier:d}}},{}],712:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../components/drawing"),T=_("./map_1d_array"),b=_("./makepath"),e=_("./orient_text"),o=_("../../lib/svg_text_utils"),a=_("../../lib"),l=a.strRotate,i=a.strTranslate,d=_("../../constants/alignment");function u(v,g,f,w,y,M){var A="const-"+y+"-lines",k=f.selectAll("."+A).data(M);k.enter().append("path").classed(A,!0).style("vector-effect","non-scaling-stroke"),k.each(function(C){var P=C,F=P.y,R=T([],P.x,v.c2p),L=T([],F,g.c2p),I="M"+b(R,L,P.smoothing);m.select(this).attr("d",I).style("stroke-width",P.width).style("stroke",P.color).style("fill","none")}),k.exit().remove()}function s(v,g,f,w,y,M,A,k){var C=M.selectAll("text."+k).data(A);C.enter().append("text").classed(k,!0);var P=0,D={};return C.each(function(F,R){var L;if("auto"===F.axis.tickangle)L=e(w,g,f,F.xy,F.dxy);else{var I=(F.axis.tickangle+180)*Math.PI/180;L=e(w,g,f,F.xy,[Math.cos(I),Math.sin(I)])}R||(D={angle:L.angle,flip:L.flip});var B=(F.endAnchor?-1:1)*L.flip,V=m.select(this).attr({"text-anchor":B>0?"start":"end","data-notex":1}).call(x.font,F.font).text(F.text).call(o.convertToTspans,v),Z=x.bBox(this);V.attr("transform",i(L.p[0],L.p[1])+l(L.angle)+i(F.axis.labelpadding*B,.3*Z.height)),P=Math.max(P,Z.width+F.axis.labelpadding)}),C.exit().remove(),D.maxExtent=P,D}oe.exports=function(v,g,f,w){var y=g.xaxis,M=g.yaxis,A=v._fullLayout._clips;a.makeTraceGroups(w,f,"trace").each(function(k){var C=m.select(this),P=k[0],D=P.trace,F=D.aaxis,R=D.baxis,L=a.ensureSingle(C,"g","minorlayer"),I=a.ensureSingle(C,"g","majorlayer"),B=a.ensureSingle(C,"g","boundarylayer"),V=a.ensureSingle(C,"g","labellayer");C.style("opacity",D.opacity),u(y,M,I,0,"a",F._gridlines),u(y,M,I,0,"b",R._gridlines),u(y,M,L,0,"a",F._minorgridlines),u(y,M,L,0,"b",R._minorgridlines),u(y,M,B,0,"a-boundary",F._boundarylines),u(y,M,B,0,"b-boundary",R._boundarylines);var ee,J,$,se,j,G,W,ie,q,te,ne,le,ue,de,he,Z=s(v,y,M,D,0,V,F._labels,"a-label"),Y=s(v,y,M,D,0,V,R._labels,"b-label");ee=v,J=V,$=D,se=y,j=M,G=Z,W=Y,le=a.aggNums(Math.min,null,$.a),ue=a.aggNums(Math.max,null,$.a),de=a.aggNums(Math.min,null,$.b),he=a.aggNums(Math.max,null,$.b),te=$.ab2xy(ie=.5*(le+ue),q=de,!0),ne=$.dxyda_rough(ie,q),void 0===G.angle&&a.extendFlat(G,e($,se,j,te,$.dxydb_rough(ie,q))),p(ee,J,$,0,te,ne,$.aaxis,se,j,G,"a-title"),te=$.ab2xy(ie=le,q=.5*(de+he),!0),ne=$.dxydb_rough(ie,q),void 0===W.angle&&a.extendFlat(W,e($,se,j,te,$.dxyda_rough(ie,q))),p(ee,J,$,0,te,ne,$.baxis,se,j,W,"b-title"),function(ee,J,$,Q,se){var j,G,W,ie,q=$.select("#"+ee._clipPathId);q.size()||(q=$.append("clipPath").classed("carpetclip",!0));var te=a.ensureSingle(q,"path","carpetboundary"),ne=J.clipsegments,le=[];for(ie=0;ie<ne.length;ie++)G=T([],(j=ne[ie]).x,Q.c2p),W=T([],j.y,se.c2p),le.push(b(G,W,j.bicubic));var ue="M"+le.join("L")+"Z";q.attr("id",ee._clipPathId),te.attr("d",ue)}(D,P,A,y,M)})};var c=d.LINE_SPACING,h=(1-d.MID_SHIFT)/c+1;function p(v,g,f,w,y,M,A,k,C,P,D){var F=[];A.title.text&&F.push(A.title.text);var R=g.selectAll("text."+D).data(F),L=P.maxExtent;R.enter().append("text").classed(D,!0),R.each(function(){var I=e(f,k,C,y,M);-1===["start","both"].indexOf(A.showticklabels)&&(L=0);var B=A.title.font.size;L+=B+A.title.offset;var V=(P.angle+(P.flip<0?180:0)-I.angle+450)%360,Z=V>90&&V<270,Y=m.select(this);Y.text(A.title.text).call(o.convertToTspans,v),Z&&(L=(-o.lineCount(Y)+h)*c*B-L),Y.attr("transform",i(I.p[0],I.p[1])+l(I.angle)+i(0,L)).attr("text-anchor","middle").call(x.font,A.title.font)}),R.exit().remove()}},{"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"./makepath":709,"./map_1d_array":710,"./orient_text":711,"@plotly/d3":58}],713:[function(_,oe,ae){"use strict";var m=_("./constants"),x=_("../../lib/search").findBin,T=_("./compute_control_points"),b=_("./create_spline_evaluator"),e=_("./create_i_derivative_evaluator"),o=_("./create_j_derivative_evaluator");oe.exports=function(a){var l=a._a,i=a._b,d=l.length,u=i.length,s=a.aaxis,c=a.baxis,h=l[0],p=l[d-1],v=i[0],g=i[u-1],f=l[l.length-1]-l[0],w=i[i.length-1]-i[0],y=f*m.RELATIVE_CULL_TOLERANCE,M=w*m.RELATIVE_CULL_TOLERANCE;h-=y,p+=y,v-=M,g+=M,a.isVisible=function(A,k){return A>h&&A<p&&k>v&&k<g},a.isOccluded=function(A,k){return A<h||A>p||k<v||k>g},a.setScale=function(){var C=T(a._xctrl,a._yctrl,a._x,a._y,s.smoothing,c.smoothing);a._xctrl=C[0],a._yctrl=C[1],a.evalxy=b([a._xctrl,a._yctrl],d,u,s.smoothing,c.smoothing),a.dxydi=e([a._xctrl,a._yctrl],s.smoothing,c.smoothing),a.dxydj=o([a._xctrl,a._yctrl],s.smoothing,c.smoothing)},a.i2a=function(A){var k=Math.max(0,Math.floor(A[0]),d-2),C=A[0]-k;return(1-C)*l[k]+C*l[k+1]},a.j2b=function(A){var k=Math.max(0,Math.floor(A[1]),d-2),C=A[1]-k;return(1-C)*i[k]+C*i[k+1]},a.ij2ab=function(A){return[a.i2a(A[0]),a.j2b(A[1])]},a.a2i=function(A){var k=Math.max(0,Math.min(x(A,l),d-2)),C=l[k];return Math.max(0,Math.min(d-1,k+(A-C)/(l[k+1]-C)))},a.b2j=function(A){var k=Math.max(0,Math.min(x(A,i),u-2)),C=i[k];return Math.max(0,Math.min(u-1,k+(A-C)/(i[k+1]-C)))},a.ab2ij=function(A){return[a.a2i(A[0]),a.b2j(A[1])]},a.i2c=function(A,k){return a.evalxy([],A,k)},a.ab2xy=function(A,k,C){if(!C&&(A<l[0]||A>l[d-1]|k<i[0]||k>i[u-1]))return[!1,!1];var P=a.a2i(A),D=a.b2j(k),F=a.evalxy([],P,D);if(C){var R,L,I,B,V=0,Z=0,Y=[];A<l[0]?(R=0,L=0,V=(A-l[0])/(l[1]-l[0])):A>l[d-1]?(R=d-2,L=1,V=(A-l[d-1])/(l[d-1]-l[d-2])):L=P-(R=Math.max(0,Math.min(d-2,Math.floor(P)))),k<i[0]?(I=0,B=0,Z=(k-i[0])/(i[1]-i[0])):k>i[u-1]?(I=u-2,B=1,Z=(k-i[u-1])/(i[u-1]-i[u-2])):B=D-(I=Math.max(0,Math.min(u-2,Math.floor(D)))),V&&(a.dxydi(Y,R,I,L,B),F[0]+=Y[0]*V,F[1]+=Y[1]*V),Z&&(a.dxydj(Y,R,I,L,B),F[0]+=Y[0]*Z,F[1]+=Y[1]*Z)}return F},a.c2p=function(A,k,C){return[k.c2p(A[0]),C.c2p(A[1])]},a.p2x=function(A,k,C){return[k.p2c(A[0]),C.p2c(A[1])]},a.dadi=function(A){var k=Math.max(0,Math.min(l.length-2,A));return l[k+1]-l[k]},a.dbdj=function(A){var k=Math.max(0,Math.min(i.length-2,A));return i[k+1]-i[k]},a.dxyda=function(A,k,C,P){var D=a.dxydi(null,A,k,C,P),F=a.dadi(A,C);return[D[0]/F,D[1]/F]},a.dxydb=function(A,k,C,P){var D=a.dxydj(null,A,k,C,P),F=a.dbdj(k,P);return[D[0]/F,D[1]/F]},a.dxyda_rough=function(A,k,C){var P=f*(C||.1),D=a.ab2xy(A+P,k,!0),F=a.ab2xy(A-P,k,!0);return[.5*(D[0]-F[0])/P,.5*(D[1]-F[1])/P]},a.dxydb_rough=function(A,k,C){var P=w*(C||.1),D=a.ab2xy(A,k+P,!0),F=a.ab2xy(A,k-P,!0);return[.5*(D[0]-F[0])/P,.5*(D[1]-F[1])/P]},a.dpdx=function(A){return A._m},a.dpdy=function(A){return A._m}}},{"../../lib/search":523,"./compute_control_points":701,"./constants":702,"./create_i_derivative_evaluator":703,"./create_j_derivative_evaluator":704,"./create_spline_evaluator":705}],714:[function(_,oe,ae){"use strict";var m=_("../../lib");oe.exports=function(x,T,b){var e,o,a,l=[],i=[],d=x[0].length,u=x.length;var c,h,p,v,g,f,w,y,M,A,J,$,Q,se,j,C=0;for(e=0;e<d;e++)for(o=0;o<u;o++)void 0===x[o][e]&&(l.push(e),i.push(o),x[o][e]=($=o,Q=void 0,se=void 0,j=void 0,se=0,j=0,(J=e)>0&&void 0!==(Q=x[$][J-1])&&(j++,se+=Q),J<d-1&&void 0!==(Q=x[$][J+1])&&(j++,se+=Q),$>0&&void 0!==(Q=x[$-1][J])&&(j++,se+=Q),$<u-1&&void 0!==(Q=x[$+1][J])&&(j++,se+=Q),se/Math.max(1,j))),C=Math.max(C,Math.abs(x[o][e]));if(!l.length)return x;var P=0,D=0,F=l.length;do{for(P=0,a=0;a<F;a++){o=i[a];var L,I,B,V,Z,Y=0,ee=0;0===(e=l[a])?(I=T[V=Math.min(d-1,2)],ee+=(L=x[o][1])+(L-x[o][V])*(T[0]-(B=T[1]))/(B-I),Y++):e===d-1&&(I=T[V=Math.max(0,d-3)],ee+=(L=x[o][d-2])+(L-x[o][V])*(T[d-1]-(B=T[d-2]))/(B-I),Y++),(0===e||e===d-1)&&o>0&&o<u-1&&(ee+=((h=b[o]-b[o-1])*x[o+1][e]+(c=b[o+1]-b[o])*x[o-1][e])/(h+c),Y++),0===o?(I=b[Z=Math.min(u-1,2)],ee+=(L=x[1][e])+(L-x[Z][e])*(b[0]-(B=b[1]))/(B-I),Y++):o===u-1&&(I=b[Z=Math.max(0,u-3)],ee+=(L=x[u-2][e])+(L-x[Z][e])*(b[u-1]-(B=b[u-2]))/(B-I),Y++),(0===o||o===u-1)&&e>0&&e<d-1&&(ee+=((h=T[e]-T[e-1])*x[o][e+1]+(c=T[e+1]-T[e])*x[o][e-1])/(h+c),Y++),Y?ee/=Y:(y=(g=b[o+1]-b[o])*(f=b[o]-b[o-1])*(g+f),ee=((w=(p=T[e+1]-T[e])*(v=T[e]-T[e-1])*(p+v))*(f*x[o+1][e]+g*x[o-1][e])+y*(v*x[o][e+1]+p*x[o][e-1]))/(y*(v+p)+w*(f+g))),P+=(A=(M=ee-x[o][e])/C)*A,x[o][e]+=M*(1+(Y?0:.85))}P=Math.sqrt(P)}while(D++<100&&P>1e-5);return m.log("Smoother converged to",P,"after",D,"iterations"),x}},{"../../lib":503}],715:[function(_,oe,ae){"use strict";var m=_("../../lib").isArray1D;oe.exports=function(x,T,b){var e=b("x"),o=e&&e.length,a=b("y"),l=a&&a.length;if(!o&&!l)return!1;if(T._cheater=!e,o&&!m(e)||l&&!m(a))T._length=null;else{var i=o?e.length:1/0;l&&(i=Math.min(i,a.length)),T.a&&T.a.length&&(i=Math.min(i,T.a.length)),T.b&&T.b.length&&(i=Math.min(i,T.b.length)),T._length=i}return!0}},{"../../lib":503}],716:[function(_,oe,ae){"use strict";var m=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../scattergeo/attributes"),T=_("../../components/colorscale/attributes"),b=_("../../plots/attributes"),e=_("../../components/color/attributes").defaultLine,o=_("../../lib/extend").extendFlat,a=x.marker.line;oe.exports=o({locations:{valType:"data_array",editType:"calc"},locationmode:x.locationmode,z:{valType:"data_array",editType:"calc"},geojson:o({},x.geojson,{}),featureidkey:x.featureidkey,text:o({},x.text,{}),hovertext:o({},x.hovertext,{}),marker:{line:{color:o({},a.color,{dflt:e}),width:o({},a.width,{dflt:1}),editType:"calc"},opacity:{valType:"number",arrayOk:!0,min:0,max:1,dflt:1,editType:"style"},editType:"calc"},selected:{marker:{opacity:x.selected.marker.opacity,editType:"plot"},editType:"plot"},unselected:{marker:{opacity:x.unselected.marker.opacity,editType:"plot"},editType:"plot"},hoverinfo:o({},b.hoverinfo,{editType:"calc",flags:["location","z","text","name"]}),hovertemplate:m(),showlegend:o({},b.showlegend,{dflt:!1})},T("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattergeo/attributes":968}],717:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../constants/numerical").BADNUM,T=_("../../components/colorscale/calc"),b=_("../scatter/arrays_to_calcdata"),e=_("../scatter/calc_selection");function o(a){return a&&"string"==typeof a}oe.exports=function(a,l){var i,d=l._length,u=new Array(d);i=l.geojson?function(v){return o(v)||m(v)}:o;for(var s=0;s<d;s++){var c=u[s]={},h=l.locations[s],p=l.z[s];i(h)&&m(p)?(c.loc=h,c.z=p):(c.loc=null,c.z=x),c.index=s}return b(u,l),T(a,l,{vals:l.z,containerStr:"",cLetter:"z"}),e(u,l),u}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../scatter/arrays_to_calcdata":925,"../scatter/calc_selection":928,"fast-isnumeric":190}],718:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../components/colorscale/defaults"),T=_("./attributes");oe.exports=function(b,e,o,a){function l(c,h){return m.coerce(b,e,T,c,h)}var i=l("locations"),d=l("z");if(i&&i.length&&m.isArrayOrTypedArray(d)&&d.length){e._length=Math.min(i.length,d.length);var u,s=l("geojson");("string"==typeof s&&""!==s||m.isPlainObject(s))&&(u="geojson-id"),"geojson-id"===l("locationmode",u)&&l("featureidkey"),l("text"),l("hovertext"),l("hovertemplate"),l("marker.line.width")&&l("marker.line.color"),l("marker.opacity"),x(b,e,a,l,{prefix:"",cLetter:"z"}),m.coerceSelectionMarkerOpacity(e,l)}else e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":716}],719:[function(_,oe,ae){"use strict";oe.exports=function(m,x,T,b,e){m.location=x.location,m.z=x.z;var o=b[e];return o.fIn&&o.fIn.properties&&(m.properties=o.fIn.properties),m.ct=o.ct,m}},{}],720:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/axes"),x=_("./attributes"),T=_("../../lib").fillText;oe.exports=function(b,e,o){var a,l,i,d,u=b.cd,s=u[0].trace,c=b.subplot,h=[e,o],p=[e+360,o];for(l=0;l<u.length;l++)if(d=!1,(a=u[l])._polygons){for(i=0;i<a._polygons.length;i++)a._polygons[i].contains(h)&&(d=!d),a._polygons[i].contains(p)&&(d=!d);if(d)break}if(d&&a)return b.x0=b.x1=b.xa.c2p(a.ct),b.y0=b.y1=b.ya.c2p(a.ct),b.index=a.index,b.location=a.loc,b.z=a.z,b.zLabel=m.tickText(c.mockAxis,c.mockAxis.c2l(a.z),"hover").text,b.hovertemplate=a.hovertemplate,function(v,g,f){if(!g.hovertemplate){var w=f.hi||g.hoverinfo,y=String(f.loc),M="all"===w?x.hoverinfo.flags:w.split("+"),A=-1!==M.indexOf("name"),k=-1!==M.indexOf("location"),C=-1!==M.indexOf("z"),P=-1!==M.indexOf("text"),D=[];!A&&k?v.nameOverride=y:(A&&(v.nameOverride=g.name),k&&D.push(y)),C&&D.push(v.zLabel),P&&T(f,g,D),v.extraText=D.join("<br>")}}(b,s,a),[b]}},{"../../lib":503,"../../plots/cartesian/axes":554,"./attributes":716}],721:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../heatmap/colorbar"),calc:_("./calc"),calcGeoJSON:_("./plot").calcGeoJSON,plot:_("./plot").plot,style:_("./style").style,styleOnSelect:_("./style").styleOnSelect,hoverPoints:_("./hover"),eventData:_("./event_data"),selectPoints:_("./select"),moduleType:"trace",name:"choropleth",basePlotModule:_("../../plots/geo"),categories:["geo","noOpacity","showLegend"],meta:{}}},{"../../plots/geo":589,"../heatmap/colorbar":795,"./attributes":716,"./calc":717,"./defaults":718,"./event_data":719,"./hover":720,"./plot":722,"./select":723,"./style":724}],722:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../lib"),T=_("../../lib/geo_location_utils"),b=_("../../lib/topojson_utils").getTopojsonFeatures,e=_("../../plots/cartesian/autorange").findExtremes,o=_("./style").style;oe.exports={calcGeoJSON:function(a,l){for(var i=a[0].trace,d=l[i.geo],u=d._subplot,s=i.locationmode,c=i._length,h="geojson-id"===s?T.extractTraceFeature(a):b(i,u.topojson),p=[],v=[],g=0;g<c;g++){var f=a[g],w="geojson-id"===s?f.fOut:T.locationToFeature(s,f.loc,h);if(w){f.geojson=w,f.ct=w.properties.ct,f._polygons=T.feature2polygons(w);var y=T.computeBbox(w);p.push(y[0],y[2]),v.push(y[1],y[3])}else f.geojson=null}if("geojson"===d.fitbounds&&"geojson-id"===s){var M=T.computeBbox(T.getTraceGeojson(i));p=[M[0],M[2]],v=[M[1],M[3]]}var A={padded:!0};i._extremes.lon=e(d.lonaxis._ax,p,A),i._extremes.lat=e(d.lataxis._ax,v,A)},plot:function(a,l,i){var d=l.layers.backplot.select(".choroplethlayer");x.makeTraceGroups(d,i,"trace choropleth").each(function(u){var s=m.select(this).selectAll("path.choroplethlocation").data(x.identity);s.enter().append("path").classed("choroplethlocation",!0),s.exit().remove(),o(a,u)})}}},{"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"./style":724,"@plotly/d3":58}],723:[function(_,oe,ae){"use strict";oe.exports=function(m,x){var T,b,e,o,a,l=m.cd,i=m.xaxis,d=m.yaxis,u=[];if(!1===x)for(T=0;T<l.length;T++)l[T].selected=0;else for(T=0;T<l.length;T++)(e=(b=l[T]).ct)&&(o=i.c2p(e),a=d.c2p(e),x.contains([o,a],null,T,m)?(u.push({pointNumber:T,lon:e[0],lat:e[1]}),b.selected=1):b.selected=0);return u}},{}],724:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../components/color"),T=_("../../components/drawing"),b=_("../../components/colorscale");function e(o,a){var l=a[0].trace,i=a[0].node3.selectAll(".choroplethlocation"),d=l.marker||{},u=d.line||{},s=b.makeColorScaleFuncFromTrace(l);i.each(function(c){m.select(this).attr("fill",s(c.z)).call(x.stroke,c.mlc||u.color).call(T.dashLine,"",c.mlw||u.width||0).style("opacity",d.opacity)}),T.selectedPointStyle(i,l,o)}oe.exports={style:function(o,a){a&&e(o,a)},styleOnSelect:function(o,a){var i=a[0].trace;i.selectedpoints?T.selectedPointStyle(a[0].node3.selectAll(".choroplethlocation"),i,o):e(o,a)}}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"@plotly/d3":58}],725:[function(_,oe,ae){"use strict";var m=_("../choropleth/attributes"),x=_("../../components/colorscale/attributes"),T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../../plots/attributes"),e=_("../../lib/extend").extendFlat;oe.exports=e({locations:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},geojson:{valType:"any",editType:"calc"},featureidkey:e({},m.featureidkey,{}),below:{valType:"string",editType:"plot"},text:m.text,hovertext:m.hovertext,marker:{line:{color:e({},m.marker.line.color,{editType:"plot"}),width:e({},m.marker.line.width,{editType:"plot"}),editType:"calc"},opacity:e({},m.marker.opacity,{editType:"plot"}),editType:"calc"},selected:{marker:{opacity:e({},m.selected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},unselected:{marker:{opacity:e({},m.unselected.marker.opacity,{editType:"plot"}),editType:"plot"},editType:"plot"},hoverinfo:m.hoverinfo,hovertemplate:T({},{keys:["properties"]}),showlegend:e({},b.showlegend,{dflt:!1})},x("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../choropleth/attributes":716}],726:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../lib"),T=_("../../components/colorscale"),b=_("../../components/drawing"),e=_("../../lib/geojson_utils").makeBlank,o=_("../../lib/geo_location_utils");function a(l){var i,d=l[0].trace,u=d._opts;if(d.selectedpoints){for(var s=b.makeSelectedPointStyleFns(d),c=0;c<l.length;c++){var h=l[c];h.fOut&&(h.fOut.properties.mo2=s.selectedOpacityFn(h))}i={type:"identity",property:"mo2"}}else i=x.isArrayOrTypedArray(d.marker.opacity)?{type:"identity",property:"mo"}:d.marker.opacity;return x.extendFlat(u.fill.paint,{"fill-opacity":i}),x.extendFlat(u.line.paint,{"line-opacity":i}),u}oe.exports={convert:function(l){var i=l[0].trace,d=!0===i.visible&&0!==i._length,u={layout:{visibility:"none"},paint:{}},s={layout:{visibility:"none"},paint:{}},c=i._opts={fill:u,line:s,geojson:e()};if(!d)return c;var h=o.extractTraceFeature(l);if(!h)return c;var p,v,g,f=T.makeColorScaleFuncFromTrace(i),w=i.marker,y=w.line||{};x.isArrayOrTypedArray(w.opacity)&&(p=function(D){var F=D.mo;return m(F)?+x.constrain(F,0,1):0}),x.isArrayOrTypedArray(y.color)&&(v=function(D){return D.mlc}),x.isArrayOrTypedArray(y.width)&&(g=function(D){return D.mlw});for(var M=0;M<l.length;M++){var A=l[M],k=A.fOut;if(k){var C=k.properties;C.fc=f(A.z),p&&(C.mo=p(A)),v&&(C.mlc=v(A)),g&&(C.mlw=g(A)),A.ct=C.ct,A._polygons=o.feature2polygons(k)}}var P=p?{type:"identity",property:"mo"}:w.opacity;return x.extendFlat(u.paint,{"fill-color":{type:"identity",property:"fc"},"fill-opacity":P}),x.extendFlat(s.paint,{"line-color":v?{type:"identity",property:"mlc"}:y.color,"line-width":g?{type:"identity",property:"mlw"}:y.width,"line-opacity":P}),u.layout.visibility="visible",s.layout.visibility="visible",c.geojson={type:"FeatureCollection",features:h},a(l),c},convertOnSelect:a}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"fast-isnumeric":190}],727:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../components/colorscale/defaults"),T=_("./attributes");oe.exports=function(b,e,o,a){function l(s,c){return m.coerce(b,e,T,s,c)}var i=l("locations"),d=l("z"),u=l("geojson");m.isArrayOrTypedArray(i)&&i.length&&m.isArrayOrTypedArray(d)&&d.length&&("string"==typeof u&&""!==u||m.isPlainObject(u))?(l("featureidkey"),e._length=Math.min(i.length,d.length),l("below"),l("text"),l("hovertext"),l("hovertemplate"),l("marker.line.width")&&l("marker.line.color"),l("marker.opacity"),x(b,e,a,l,{prefix:"",cLetter:"z"}),m.coerceSelectionMarkerOpacity(e,l)):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":725}],728:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../heatmap/colorbar"),calc:_("../choropleth/calc"),plot:_("./plot"),hoverPoints:_("../choropleth/hover"),eventData:_("../choropleth/event_data"),selectPoints:_("../choropleth/select"),styleOnSelect:function(m,x){x&&x[0].trace._glTrace.updateOnSelect(x)},getBelow:function(m,x){for(var T=x.getMapLayers(),b=T.length-2;b>=0;b--){var e=T[b].id;if("string"==typeof e&&0===e.indexOf("water"))for(var o=b+1;o<T.length;o++)if("string"==typeof(e=T[o].id)&&-1===e.indexOf("plotly-"))return e}},moduleType:"trace",name:"choroplethmapbox",basePlotModule:_("../../plots/mapbox"),categories:["mapbox","gl","noOpacity","showLegend"],meta:{hr_name:"choropleth_mapbox"}}},{"../../plots/mapbox":613,"../choropleth/calc":717,"../choropleth/event_data":719,"../choropleth/hover":720,"../choropleth/select":723,"../heatmap/colorbar":795,"./attributes":725,"./defaults":727,"./plot":729}],729:[function(_,oe,ae){"use strict";var m=_("./convert").convert,x=_("./convert").convertOnSelect,T=_("../../plots/mapbox/constants").traceLayerPrefix;function b(o,a){this.type="choroplethmapbox",this.subplot=o,this.uid=a,this.sourceId="source-"+a,this.layerList=[["fill",T+a+"-fill"],["line",T+a+"-line"]],this.below=null}var e=b.prototype;e.update=function(o){this._update(m(o))},e.updateOnSelect=function(o){this._update(x(o))},e._update=function(o){var a=this.subplot,l=this.layerList,i=a.belowLookup["trace-"+this.uid];a.map.getSource(this.sourceId).setData(o.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(o,i),this.below=i);for(var d=0;d<l.length;d++){var u=l[d],c=u[1],h=o[u[0]];a.setOptions(c,"setLayoutProperty",h.layout),"visible"===h.layout.visibility&&a.setOptions(c,"setPaintProperty",h.paint)}},e._addLayers=function(o,a){for(var l=this.subplot,i=this.layerList,d=this.sourceId,u=0;u<i.length;u++){var s=i[u],c=s[0],h=o[c];l.addLayer({type:c,id:s[1],source:d,layout:h.layout,paint:h.paint},a)}},e._removeLayers=function(){for(var o=this.subplot.map,a=this.layerList,l=a.length-1;l>=0;l--)o.removeLayer(a[l][1])},e.dispose=function(){var o=this.subplot.map;this._removeLayers(),o.removeSource(this.sourceId)},oe.exports=function(o,a){var l=a[0].trace,i=new b(o,l.uid),d=i.sourceId,u=m(a),s=i.below=o.belowLookup["trace-"+l.uid];return o.map.addSource(d,{type:"geojson",data:u.geojson}),i._addLayers(u,s),a[0].trace._glTrace=i,i}},{"../../plots/mapbox/constants":611,"./convert":726}],730:[function(_,oe,ae){"use strict";var m=_("../../components/colorscale/attributes"),x=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../mesh3d/attributes"),e=_("../../plots/attributes"),o=_("../../lib/extend").extendFlat,a={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},sizemode:{valType:"enumerated",values:["scaled","absolute"],editType:"calc",dflt:"scaled"},sizeref:{valType:"number",editType:"calc",min:0},anchor:{valType:"enumerated",editType:"calc",values:["tip","tail","cm","center"],dflt:"cm"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:T({editType:"calc"},{keys:["norm"]}),uhoverformat:x("u",1),vhoverformat:x("v",1),whoverformat:x("w",1),xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z"),showlegend:o({},e.showlegend,{dflt:!1})};o(a,m("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(l){a[l]=b[l]}),a.hoverinfo=o({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","text","name"],dflt:"x+y+z+norm+text+name"}),a.transforms=void 0,oe.exports=a},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],731:[function(_,oe,ae){"use strict";var m=_("../../components/colorscale/calc");oe.exports=function(x,T){for(var b=T.u,e=T.v,o=T.w,a=Math.min(T.x.length,T.y.length,T.z.length,b.length,e.length,o.length),l=-1/0,i=1/0,d=0;d<a;d++){var u=b[d],s=e[d],c=o[d],h=Math.sqrt(u*u+s*s+c*c);l=Math.max(l,h),i=Math.min(i,h)}T._len=a,T._normMax=l,m(x,T,{vals:[i,l],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],732:[function(_,oe,ae){"use strict";var m=_("../../../stackgl_modules").gl_cone3d,x=_("../../../stackgl_modules").gl_cone3d.createConeMesh,T=_("../../lib").simpleMap,b=_("../../lib/gl_format_color").parseColorScale,e=_("../../components/colorscale").extractOpts,o=_("../../plots/gl3d/zip3");function a(c,h){this.scene=c,this.uid=h,this.mesh=null,this.data=null}var l=a.prototype;l.handlePick=function(c){if(c.object===this.mesh){var h=c.index=c.data.index,f=this.data.u[h],w=this.data.v[h],y=this.data.w[h];c.traceCoordinate=[this.data.x[h],this.data.y[h],this.data.z[h],f,w,y,Math.sqrt(f*f+w*w+y*y)];var M=this.data.hovertext||this.data.text;return Array.isArray(M)&&void 0!==M[h]?c.textLabel=M[h]:M&&(c.textLabel=M),!0}};var i={xaxis:0,yaxis:1,zaxis:2},d={tip:1,tail:0,cm:.25,center:.5},u={tip:1,tail:1,cm:.75,center:.5};function s(c,h){var p=c.fullSceneLayout,v=c.dataScale,g={};function f(A,k){var C=p[k],P=v[i[k]];return T(A,function(D){return C.d2l(D)*P})}g.vectors=o(f(h.u,"xaxis"),f(h.v,"yaxis"),f(h.w,"zaxis"),h._len),g.positions=o(f(h.x,"xaxis"),f(h.y,"yaxis"),f(h.z,"zaxis"),h._len);var w=e(h);g.colormap=b(h),g.vertexIntensityBounds=[w.min/h._normMax,w.max/h._normMax],g.coneOffset=d[h.anchor],g.coneSize="scaled"===h.sizemode?h.sizeref||.5:h.sizeref&&h._normMax?h.sizeref/h._normMax:.5;var y=m(g),M=h.lightposition;return y.lightPosition=[M.x,M.y,M.z],y.ambient=h.lighting.ambient,y.diffuse=h.lighting.diffuse,y.specular=h.lighting.specular,y.roughness=h.lighting.roughness,y.fresnel=h.lighting.fresnel,y.opacity=h.opacity,h._pad=u[h.anchor]*y.vectorScale*y.coneScale*h._normMax,y}l.update=function(c){this.data=c;var h=s(this.scene,c);this.mesh.update(h)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},oe.exports=function(c,h){var p=c.glplot.gl,v=s(c,h),g=x(p,v),f=new a(c,h.uid);return f.mesh=g,f.data=h,g._trace=f,c.glplot.add(g),f}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],733:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../components/colorscale/defaults"),T=_("./attributes");oe.exports=function(b,e,o,a){function l(p,v){return m.coerce(b,e,T,p,v)}var i=l("u"),d=l("v"),u=l("w"),s=l("x"),c=l("y"),h=l("z");i&&i.length&&d&&d.length&&u&&u.length&&s&&s.length&&c&&c.length&&h&&h.length?(l("sizeref"),l("sizemode"),l("anchor"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),x(b,e,a,l,{prefix:"",cLetter:"c"}),l("text"),l("hovertext"),l("hovertemplate"),l("uhoverformat"),l("vhoverformat"),l("whoverformat"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":730}],734:[function(_,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"cone",basePlotModule:_("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:_("./calc"),plot:_("./convert"),eventData:function(m,x){return m.norm=x.traceCoordinate[6],m},meta:{}}},{"../../plots/gl3d":598,"./attributes":730,"./calc":731,"./convert":732,"./defaults":733}],735:[function(_,oe,ae){"use strict";var m=_("../heatmap/attributes"),x=_("../scatter/attributes"),T=_("../../plots/cartesian/axis_format_attributes"),b=T.axisHoverFormat,e=T.descriptionOnlyNumbers,o=_("../../components/colorscale/attributes"),a=_("../../components/drawing/attributes").dash,l=_("../../plots/font_attributes"),i=_("../../lib/extend").extendFlat,d=_("../../constants/filter_ops"),u=d.COMPARISON_OPS2,s=d.INTERVAL_OPS,c=x.line;oe.exports=i({z:m.z,x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:x.xperiod0,yperiod0:x.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,text:m.text,hovertext:m.hovertext,transpose:m.transpose,xtype:m.xtype,ytype:m.ytype,xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z",1),hovertemplate:m.hovertemplate,texttemplate:i({},m.texttemplate,{}),textfont:i({},m.textfont,{}),hoverongaps:m.hoverongaps,connectgaps:i({},m.connectgaps,{}),fillcolor:{valType:"color",editType:"calc"},autocontour:{valType:"boolean",dflt:!0,editType:"calc",impliedEdits:{"contours.start":void 0,"contours.end":void 0,"contours.size":void 0}},ncontours:{valType:"integer",dflt:15,min:1,editType:"calc"},contours:{type:{valType:"enumerated",values:["levels","constraint"],dflt:"levels",editType:"calc"},start:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},end:{valType:"number",dflt:null,editType:"plot",impliedEdits:{"^autocontour":!1}},size:{valType:"number",dflt:null,min:0,editType:"plot",impliedEdits:{"^autocontour":!1}},coloring:{valType:"enumerated",values:["fill","heatmap","lines","none"],dflt:"fill",editType:"calc"},showlines:{valType:"boolean",dflt:!0,editType:"plot"},showlabels:{valType:"boolean",dflt:!1,editType:"plot"},labelfont:l({editType:"plot",colorEditType:"style"}),labelformat:{valType:"string",dflt:"",editType:"plot",description:e("contour label")},operation:{valType:"enumerated",values:[].concat(u).concat(s),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},editType:"calc",impliedEdits:{autocontour:!1}},line:{color:i({},c.color,{editType:"style+colorbars"}),width:{valType:"number",min:0,editType:"style+colorbars"},dash:a,smoothing:i({},c.smoothing,{}),editType:"plot"}},o("",{cLetter:"z",autoColorDflt:!1,editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../constants/filter_ops":475,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../heatmap/attributes":792,"../scatter/attributes":926}],736:[function(_,oe,ae){"use strict";var m=_("../../components/colorscale"),x=_("../heatmap/calc"),T=_("./set_contours"),b=_("./end_plus");oe.exports=function(e,o){var a=x(e,o),l=a[0].z;T(o,l);var i,d=o.contours,u=m.extractOpts(o);if("heatmap"===d.coloring&&u.auto&&!1===o.autocontour){var s=d.start,c=b(d),h=d.size||1,p=Math.floor((c-s)/h)+1;isFinite(h)||(h=1,p=1);var v=s-h/2;i=[v,v+p*h]}else i=l;return m.calc(e,o,{vals:i,cLetter:"z"}),a}},{"../../components/colorscale":378,"../heatmap/calc":793,"./end_plus":746,"./set_contours":754}],737:[function(_,oe,ae){"use strict";oe.exports=function(m,x){var T,b=m[0],e=b.z;switch(x.type){case"levels":var o=Math.min(e[0][0],e[0][1]);for(T=0;T<m.length;T++){var a=m[T];a.prefixBoundary=!a.edgepaths.length&&(o>a.level||a.starts.length&&o===a.level)}break;case"constraint":if(b.prefixBoundary=!1,b.edgepaths.length)return;var l=b.x.length,i=b.y.length,d=-1/0,u=1/0;for(T=0;T<i;T++)u=Math.min(u,e[T][0]),u=Math.min(u,e[T][l-1]),d=Math.max(d,e[T][0]),d=Math.max(d,e[T][l-1]);for(T=1;T<l-1;T++)u=Math.min(u,e[0][T]),u=Math.min(u,e[i-1][T]),d=Math.max(d,e[0][T]),d=Math.max(d,e[i-1][T]);var s,c,h=x.value;switch(x._operation){case">":h>d&&(b.prefixBoundary=!0);break;case"<":(h<u||b.starts.length&&h===u)&&(b.prefixBoundary=!0);break;case"[]":s=Math.min(h[0],h[1]),((c=Math.max(h[0],h[1]))<u||s>d||b.starts.length&&c===u)&&(b.prefixBoundary=!0);break;case"][":s=Math.min(h[0],h[1]),c=Math.max(h[0],h[1]),s<u&&c>d&&(b.prefixBoundary=!0)}}}},{}],738:[function(_,oe,ae){"use strict";var m=_("../../components/colorscale"),x=_("./make_color_map"),T=_("./end_plus");oe.exports={min:"zmin",max:"zmax",calc:function(b,e,o){var a=e.contours,l=e.line,i=a.size||1,d=a.coloring,u=x(e,{isColorbar:!0});if("heatmap"===d){var s=m.extractOpts(e);o._fillgradient=s.reversescale?m.flipScale(s.colorscale):s.colorscale,o._zrange=[s.min,s.max]}else"fill"===d&&(o._fillcolor=u);o._line={color:"lines"===d?u:l.color,width:!1!==a.showlines?l.width:0,dash:l.dash},o._levels={start:a.start,end:T(a),size:i}}}},{"../../components/colorscale":378,"./end_plus":746,"./make_color_map":751}],739:[function(_,oe,ae){"use strict";oe.exports={BOTTOMSTART:[1,9,13,104,713],TOPSTART:[4,6,7,104,713],LEFTSTART:[8,12,14,208,1114],RIGHTSTART:[2,3,11,208,1114],NEWDELTA:[null,[-1,0],[0,-1],[-1,0],[1,0],null,[0,-1],[-1,0],[0,1],[0,1],null,[0,1],[1,0],[1,0],[0,-1]],CHOOSESADDLE:{104:[4,1],208:[2,8],713:[7,13],1114:[11,14]},SADDLEREMAINDER:{1:4,2:8,4:1,7:13,8:2,11:14,13:7,14:11},LABELDISTANCE:2,LABELINCREASE:10,LABELMIN:3,LABELMAX:10,LABELOPTIMIZER:{EDGECOST:1,ANGLECOST:1,NEIGHBORCOST:5,SAMELEVELFACTOR:10,SAMELEVELDISTANCE:5,MAXCOST:100,INITIALSEARCHPOINTS:10,ITERATIONS:5}}},{}],740:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("./label_defaults"),T=_("../../components/color"),b=T.addOpacity,e=T.opacity,o=_("../../constants/filter_ops"),a=o.CONSTRAINT_REDUCTION,l=o.COMPARISON_OPS2;oe.exports=function(i,d,u,s,c,h){var p,v,g,y,M,A,f=d.contours,w=u("contours.operation");f._operation=a[w],y=u,-1===l.indexOf((M=f).operation)?(y("contours.value",[0,1]),Array.isArray(M.value)?M.value.length>2?M.value=M.value.slice(2):0===M.length?M.value=[0,1]:M.length<2?(A=parseFloat(M.value[0]),M.value=[A,A+1]):M.value=[parseFloat(M.value[0]),parseFloat(M.value[1])]:m(M.value)&&(A=parseFloat(M.value),M.value=[A,A+1])):(y("contours.value",0),m(M.value)||(M.value=Array.isArray(M.value)?parseFloat(M.value[0]):0)),"="===w?p=f.showlines=!0:(p=u("contours.showlines"),g=u("fillcolor",b((i.line||{}).color||c,.5))),p&&(v=u("line.color",g&&e(g)?b(d.fillcolor,1):c),u("line.width",2),u("line.dash")),u("line.smoothing"),x(u,s,v,h)}},{"../../components/color":366,"../../constants/filter_ops":475,"./label_defaults":750,"fast-isnumeric":190}],741:[function(_,oe,ae){"use strict";var m=_("../../constants/filter_ops"),x=_("fast-isnumeric");function T(o,a){var l,i=Array.isArray(a);function d(u){return x(u)?+u:null}return-1!==m.COMPARISON_OPS2.indexOf(o)?l=d(i?a[0]:a):-1!==m.INTERVAL_OPS.indexOf(o)?l=i?[d(a[0]),d(a[1])]:[d(a),d(a)]:-1!==m.SET_OPS.indexOf(o)&&(l=i?a.map(d):[d(a)]),l}function b(o){return function(a){a=T(o,a);var l=Math.min(a[0],a[1]),i=Math.max(a[0],a[1]);return{start:l,end:i,size:i-l}}}function e(o){return function(a){return{start:a=T(o,a),end:1/0,size:1/0}}}oe.exports={"[]":b("[]"),"][":b("]["),">":e(">"),"<":e("<"),"=":e("=")}},{"../../constants/filter_ops":475,"fast-isnumeric":190}],742:[function(_,oe,ae){"use strict";oe.exports=function(m,x,T,b){var e=b("contours.start"),o=b("contours.end"),a=!1===e||!1===o,l=T("contours.size");!(a?x.autocontour=!0:T("autocontour",!1))&&l||T("ncontours")}},{}],743:[function(_,oe,ae){"use strict";var m=_("../../lib");function x(T){return m.extendFlat({},T,{edgepaths:m.extendDeep([],T.edgepaths),paths:m.extendDeep([],T.paths),starts:m.extendDeep([],T.starts)})}oe.exports=function(T,b){var e,o,a,l=function(u){return u.reverse()},i=function(u){return u};switch(b){case"=":case"<":return T;case">":for(1!==T.length&&m.warn("Contour data invalid for the specified inequality operation."),o=T[0],e=0;e<o.edgepaths.length;e++)o.edgepaths[e]=l(o.edgepaths[e]);for(e=0;e<o.paths.length;e++)o.paths[e]=l(o.paths[e]);for(e=0;e<o.starts.length;e++)o.starts[e]=l(o.starts[e]);return T;case"][":var d=l;l=i,i=d;case"[]":for(2!==T.length&&m.warn("Contour data invalid for the specified inequality range operation."),o=x(T[0]),a=x(T[1]),e=0;e<o.edgepaths.length;e++)o.edgepaths[e]=l(o.edgepaths[e]);for(e=0;e<o.paths.length;e++)o.paths[e]=l(o.paths[e]);for(e=0;e<o.starts.length;e++)o.starts[e]=l(o.starts[e]);for(;a.edgepaths.length;)o.edgepaths.push(i(a.edgepaths.shift()));for(;a.paths.length;)o.paths.push(i(a.paths.shift()));for(;a.starts.length;)o.starts.push(i(a.starts.shift()));return[o]}}},{"../../lib":503}],744:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../heatmap/xyz_defaults"),T=_("../scatter/period_defaults"),b=_("./constraint_defaults"),e=_("./contours_defaults"),o=_("./style_defaults"),a=_("../heatmap/label_defaults"),l=_("./attributes");oe.exports=function(i,d,u,s){function c(p,v){return m.coerce(i,d,l,p,v)}if(x(i,d,c,s)){T(i,d,s,c),c("xhoverformat"),c("yhoverformat"),c("text"),c("hovertext"),c("hoverongaps"),c("hovertemplate");var h="constraint"===c("contours.type");c("connectgaps",m.isArray1D(d.z)),h?b(i,d,c,s,u):(e(i,d,c,function(p){return m.coerce2(i,d,l,p)}),o(i,d,c,s)),d.contours&&"heatmap"===d.contours.coloring&&a(c,s)}else d.visible=!1}},{"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/xyz_defaults":807,"../scatter/period_defaults":946,"./attributes":735,"./constraint_defaults":740,"./contours_defaults":742,"./style_defaults":756}],745:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./constraint_mapping"),T=_("./end_plus");oe.exports=function(b,e,o){for(var a="constraint"===b.type?x[b._operation](b.value):b,l=a.size,i=[],d=T(a),u=o.trace._carpetTrace,s=u?{xaxis:u.aaxis,yaxis:u.baxis,x:o.a,y:o.b}:{xaxis:e.xaxis,yaxis:e.yaxis,x:o.x,y:o.y},c=a.start;c<d;c+=l)if(i.push(m.extendFlat({level:c,crossings:{},starts:[],edgepaths:[],paths:[],z:o.z,smoothing:o.trace.line.smoothing},s)),i.length>1e3){m.warn("Too many contours, clipping at 1000",b);break}return i}},{"../../lib":503,"./constraint_mapping":741,"./end_plus":746}],746:[function(_,oe,ae){"use strict";oe.exports=function(m){return m.end+m.size/1e6}},{}],747:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./constants");function T(o,a,l,i){return Math.abs(o[0]-a[0])<l&&Math.abs(o[1]-a[1])<i}function b(o,a,l,i,d){var u,te,le,ue,de,s=a.join(","),c=o.crossings[s],h=(le=a,ue=0,de=0,(te=c)>20&&l?208===te||1114===te?ue=0===le[0]?1:-1:de=0===le[1]?1:-1:-1!==x.BOTTOMSTART.indexOf(te)?de=1:-1!==x.LEFTSTART.indexOf(te)?ue=1:-1!==x.TOPSTART.indexOf(te)?de=-1:ue=-1,[ue,de]),p=[e(o,a,[-h[0],-h[1]])],v=o.z.length,g=o.z[0].length,f=a.slice(),w=h.slice();for(u=0;u<1e4;u++){if(c>20?o.crossings[s]=x.SADDLEREMAINDER[c=x.CHOOSESADDLE[c][(h[0]||h[1])<0?0:1]]:delete o.crossings[s],!(h=x.NEWDELTA[c])){m.log("Found bad marching index:",c,a,o.level);break}if(p.push(e(o,a,h)),a[0]+=h[0],a[1]+=h[1],s=a.join(","),T(p[p.length-1],p[p.length-2],i,d)&&p.pop(),a[0]===f[0]&&a[1]===f[1]&&h[0]===w[0]&&h[1]===w[1]||l&&(h[0]&&(a[0]<0||a[0]>g-2)||h[1]&&(a[1]<0||a[1]>v-2)))break;c=o.crossings[s]}1e4===u&&m.log("Infinite loop in contour?");var M,A,k,C,P,D,F,R,L,I,B,V,Z,Y,ee,J=T(p[0],p[p.length-1],i,d),$=0,Q=.2*o.smoothing,se=[],j=0;for(u=1;u<p.length;u++)void 0,void 0,Y=(V=p[u])[2]-(Z=p[u-1])[2],ee=V[3]-Z[3],$+=F=Math.sqrt(Y*Y+ee*ee),se.push(F);var G=$/se.length*Q;function W(te){return p[te%p.length]}for(u=p.length-2;u>=j;u--)if((M=se[u])<G){for(k=0,A=u-1;A>=j&&M+se[A]<G;A--)M+=se[A];if(J&&u===p.length-2)for(k=0;k<A&&M+se[k]<G;k++)M+=se[k];P=u-A+k+1,D=Math.floor((u+A+k+2)/2),C=J||u!==p.length-2?J||-1!==A?P%2?W(D):[(W(D)[0]+W(D+1)[0])/2,(W(D)[1]+W(D+1)[1])/2]:p[0]:p[p.length-1],p.splice(A+1,u-A+1,C),u=A+1,k&&(j=k),J&&(u===p.length-2?p[k]=p[p.length-1]:0===u&&(p[p.length-1]=p[0]))}for(p.splice(0,j),u=0;u<p.length;u++)p[u].length=2;if(!(p.length<2))if(J)p.pop(),o.paths.push(p);else{l||m.log("Unclosed interior contour?",o.level,f.join(","),p.join("L"));var ie=!1;for(R=0;R<o.edgepaths.length;R++)if(I=o.edgepaths[R],!ie&&T(I[0],p[p.length-1],i,d)){p.pop(),ie=!0;var q=!1;for(L=0;L<o.edgepaths.length;L++)if(T((B=o.edgepaths[L])[B.length-1],p[0],i,d)){q=!0,p.shift(),o.edgepaths.splice(R,1),L===R?o.paths.push(p.concat(B)):(L>R&&L--,o.edgepaths[L]=B.concat(p,I));break}q||(o.edgepaths[R]=p.concat(I))}for(R=0;R<o.edgepaths.length&&!ie;R++)T((I=o.edgepaths[R])[I.length-1],p[0],i,d)&&(p.shift(),o.edgepaths[R]=I.concat(p),ie=!0);ie||o.edgepaths.push(p)}}function e(o,a,l){var i=a[0]+Math.max(l[0],0),d=a[1]+Math.max(l[1],0),u=o.z[d][i],s=o.xaxis,c=o.yaxis;if(l[1]){var h=(o.level-u)/(o.z[d][i+1]-u),p=(1!==h?(1-h)*s.c2l(o.x[i]):0)+(0!==h?h*s.c2l(o.x[i+1]):0);return[s.c2p(s.l2c(p),!0),c.c2p(o.y[d],!0),i+h,d]}var v=(o.level-u)/(o.z[d+1][i]-u),g=(1!==v?(1-v)*c.c2l(o.y[d]):0)+(0!==v?v*c.c2l(o.y[d+1]):0);return[s.c2p(o.x[i],!0),c.c2p(c.l2c(g),!0),i,d+v]}oe.exports=function(o,a,l){var i,d,u,s;for(a=a||.01,l=l||.01,d=0;d<o.length;d++){for(u=o[d],s=0;s<u.starts.length;s++)b(u,u.starts[s],"edge",a,l);for(i=0;Object.keys(u.crossings).length&&i<1e4;)i++,b(u,Object.keys(u.crossings)[0].split(",").map(Number),void 0,a,l);1e4===i&&m.log("Infinite loop in contour?")}}},{"../../lib":503,"./constants":739}],748:[function(_,oe,ae){"use strict";var m=_("../../components/color"),x=_("../heatmap/hover");oe.exports=function(T,b,e,o,a){a||(a={}),a.isContour=!0;var l=x(T,b,e,o,a);return l&&l.forEach(function(i){var d=i.trace;"constraint"===d.contours.type&&(d.fillcolor&&m.opacity(d.fillcolor)?i.color=m.addOpacity(d.fillcolor,1):d.contours.showlines&&m.opacity(d.line.color)&&(i.color=m.addOpacity(d.line.color,1)))}),l}},{"../../components/color":366,"../heatmap/hover":799}],749:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("./plot").plot,style:_("./style"),colorbar:_("./colorbar"),hoverPoints:_("./hover"),moduleType:"trace",name:"contour",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":735,"./calc":736,"./colorbar":738,"./defaults":744,"./hover":748,"./plot":753,"./style":755}],750:[function(_,oe,ae){"use strict";var m=_("../../lib");oe.exports=function(x,T,b,e){if(e||(e={}),x("contours.showlabels")){var o=T.font;m.coerceFont(x,"contours.labelfont",{family:o.family,size:o.size,color:b}),x("contours.labelformat")}!1!==e.hasHover&&x("zhoverformat")}},{"../../lib":503}],751:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../components/colorscale"),T=_("./end_plus");oe.exports=function(b){var e=b.contours,o=e.start,a=T(e),l=e.size||1,i=Math.floor((a-o)/l)+1,d="lines"===e.coloring?0:1,u=x.extractOpts(b);isFinite(l)||(l=1,i=1);var s,c,h=u.reversescale?x.flipScale(u.colorscale):u.colorscale,p=h.length,v=new Array(p),g=new Array(p);if("heatmap"===e.coloring){var f=u.min,w=u.max;for(c=0;c<p;c++)v[c]=(s=h[c])[0]*(w-f)+f,g[c]=s[1];var y=m.extent([f,w,e.start,e.start+l*(i-1)]),M=y[f<w?0:1],A=y[f<w?1:0];M!==f&&(v.splice(0,0,M),g.splice(0,0,g[0])),A!==w&&(v.push(A),g.push(g[g.length-1]))}else for(c=0;c<p;c++)v[c]=((s=h[c])[0]*(i+d-1)-d/2)*l+o,g[c]=s[1];return x.makeColorScaleFunc({domain:v,range:g},{noNumericCheck:!0})}},{"../../components/colorscale":378,"./end_plus":746,"@plotly/d3":58}],752:[function(_,oe,ae){"use strict";var m=_("./constants");function x(T,b){var e=(b[0][0]>T?0:1)+(b[0][1]>T?0:2)+(b[1][1]>T?0:4)+(b[1][0]>T?0:8);return 5===e||10===e?T>(b[0][0]+b[0][1]+b[1][0]+b[1][1])/4?5===e?713:1114:5===e?104:208:15===e?0:e}oe.exports=function(T){var b,e,o,a,l,i,d,u,s,c=T[0].z,h=c.length,p=c[0].length,v=2===h||2===p;for(e=0;e<h-1;e++)for(a=[],0===e&&(a=a.concat(m.BOTTOMSTART)),e===h-2&&(a=a.concat(m.TOPSTART)),b=0;b<p-1;b++)for(o=a.slice(),0===b&&(o=o.concat(m.LEFTSTART)),b===p-2&&(o=o.concat(m.RIGHTSTART)),l=b+","+e,i=[[c[e][b],c[e][b+1]],[c[e+1][b],c[e+1][b+1]]],s=0;s<T.length;s++)(d=x((u=T[s]).level,i))&&(u.crossings[l]=d,-1!==o.indexOf(d)&&(u.starts.push([b,e]),v&&-1!==o.indexOf(d,o.indexOf(d)+1)&&u.starts.push([b,e])))}},{"./constants":739}],753:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing"),b=_("../../components/colorscale"),e=_("../../lib/svg_text_utils"),o=_("../../plots/cartesian/axes"),a=_("../../plots/cartesian/set_convert"),l=_("../heatmap/plot"),i=_("./make_crossings"),d=_("./find_all_paths"),u=_("./empty_pathinfo"),s=_("./convert_to_constraints"),c=_("./close_boundaries"),h=_("./constants"),p=h.LABELOPTIMIZER;function v(w,y){var M,A,k,C,P,D,R="",L=0,I=w.edgepaths.map(function(J,$){return $}),B=!0;function V(J){return Math.abs(J[1]-y[2][1])<.01}function Y(J){return Math.abs(J[0]-y[2][0])<.01}for(;I.length;){for(D=T.smoothopen(w.edgepaths[L],w.smoothing),R+=B?D:D.replace(/^M/,"L"),I.splice(I.indexOf(L),1),M=w.edgepaths[L][w.edgepaths[L].length-1],C=-1,k=0;k<4;k++){if(!M){x.log("Missing end?",L,w);break}for(Math.abs(M[1]-y[0][1])<.01&&!Y(M)?A=y[1]:Math.abs(M[0]-y[0][0])<.01?A=y[0]:V(M)?A=y[3]:Y(M)&&(A=y[2]),P=0;P<w.edgepaths.length;P++){var ee=w.edgepaths[P][0];Math.abs(M[0]-A[0])<.01?Math.abs(M[0]-ee[0])<.01&&(ee[1]-M[1])*(A[1]-ee[1])>=0&&(A=ee,C=P):Math.abs(M[1]-A[1])<.01?Math.abs(M[1]-ee[1])<.01&&(ee[0]-M[0])*(A[0]-ee[0])>=0&&(A=ee,C=P):x.log("endpt to newendpt is not vert. or horz.",M,A,ee)}if(M=A,C>=0)break;R+="L"+A}if(C===w.edgepaths.length){x.log("unclosed perimeter path");break}(B=-1===I.indexOf(L=C))&&(L=I[0],R+="Z")}for(L=0;L<w.paths.length;L++)R+=T.smoothclosed(w.paths[L],w.smoothing);return R}function g(w,y,M,A){var k=y.width/2,C=y.height/2,P=w.x,D=w.y,F=w.theta,R=Math.cos(F)*k,L=Math.sin(F)*k,I=(P>A.center?A.right-P:P-A.left)/(R+Math.abs(Math.sin(F)*C)),B=(D>A.middle?A.bottom-D:D-A.top)/(Math.abs(L)+Math.cos(F)*C);if(I<1||B<1)return 1/0;var V=p.EDGECOST*(1/(I-1)+1/(B-1));V+=p.ANGLECOST*F*F;for(var Z=P-R,Y=D-L,ee=P+R,J=D+L,$=0;$<M.length;$++){var Q=M[$],se=Math.cos(Q.theta)*Q.width/2,j=Math.sin(Q.theta)*Q.width/2,G=2*x.segmentDistance(Z,Y,ee,J,Q.x-se,Q.y-j,Q.x+se,Q.y+j)/(y.height+Q.height),W=Q.level===y.level,ie=W?p.SAMELEVELDISTANCE:1;if(G<=ie)return 1/0;V+=p.NEIGHBORCOST*(W?p.SAMELEVELFACTOR:1)/(G-ie)}return V}function f(w){var y,M,A=w.trace._emptypoints,k=[],C=w.z.length,P=w.z[0].length,D=[];for(y=0;y<P;y++)D.push(1);for(y=0;y<C;y++)k.push(D.slice());for(y=0;y<A.length;y++)k[(M=A[y])[0]][M[1]]=0;return w.zmask=k,k}ae.plot=function(w,y,M,A){var k=y.xaxis,C=y.yaxis;x.makeTraceGroups(A,M,"contour").each(function(P){var D=m.select(this),F=P[0],L=F.x,I=F.y,B=F.trace.contours,V=u(B,y,F),Z=x.ensureSingle(D,"g","heatmapcoloring"),Y=[];"heatmap"===B.coloring&&(Y=[P]),l(w,y,Y,Z),i(V),d(V);var W,ie,q,ee=k.c2p(L[0],!0),J=k.c2p(L[L.length-1],!0),$=C.c2p(I[0],!0),Q=C.c2p(I[I.length-1],!0),se=[[ee,Q],[J,Q],[J,$],[ee,$]],j=V;"constraint"===B.type&&(j=s(V,B._operation)),W=se,ie=B,(q=x.ensureSingle(D,"g","contourbg").selectAll("path").data("fill"===ie.coloring?[0]:[])).enter().append("path"),q.exit().remove(),q.attr("d","M"+W.join("L")+"Z").style("stroke","none"),function(G,W,ie,q){var te="fill"===q.coloring||"constraint"===q.type&&"="!==q._operation,ne="M"+ie.join("L")+"Z";te&&c(W,q);var le=x.ensureSingle(G,"g","contourfill").selectAll("path").data(te?W:[]);le.enter().append("path"),le.exit().remove(),le.each(function(ue){var de=(ue.prefixBoundary?ne:"")+v(ue,ie);de?m.select(this).attr("d",de).style("stroke","none"):m.select(this).remove()})}(D,j,se,B),function(G,W,ie,q,te){var ne=x.ensureSingle(G,"g","contourlines"),le=!1!==te.showlines,ue=te.showlabels,de=le&&ue,he=ae.createLines(ne,le||ue,W),be=ae.createLineClip(ne,de,ie,q.trace.uid),ge=G.selectAll("g.contourlabels").data(ue?[0]:[]);if(ge.exit().remove(),ge.enter().append("g").classed("contourlabels",!0),ue){var we=[],Ce=[];x.clearLocationCache();var De=ae.labelFormatter(ie,q),Se=T.tester.append("text").attr("data-notex",1).call(T.font,te.labelfont),Fe=W[0].xaxis,ve=W[0].yaxis,Te=Fe._length,Le=ve._length,Ee=Fe.range,Pe=ve.range,je=x.aggNums(Math.min,null,q.x),Ge=x.aggNums(Math.max,null,q.x),Ke=x.aggNums(Math.min,null,q.y),lt=x.aggNums(Math.max,null,q.y),Ue=Math.max(Fe.c2p(je,!0),0),$e=Math.min(Fe.c2p(Ge,!0),Te),et=Math.max(ve.c2p(lt,!0),0),tt=Math.min(ve.c2p(Ke,!0),Le),ct={};Ee[0]<Ee[1]?(ct.left=Ue,ct.right=$e):(ct.left=$e,ct.right=Ue),Pe[0]<Pe[1]?(ct.top=et,ct.bottom=tt):(ct.top=tt,ct.bottom=et),ct.middle=(ct.top+ct.bottom)/2,ct.center=(ct.left+ct.right)/2,we.push([[ct.left,ct.top],[ct.right,ct.top],[ct.right,ct.bottom],[ct.left,ct.bottom]]);var xt=Math.sqrt(Te*Te+Le*Le),Ct=h.LABELDISTANCE*xt/Math.max(1,W.length/h.LABELINCREASE);he.each(function(Ht){var zt=ae.calcTextOpts(Ht.level,De,Se,ie);m.select(this).selectAll("path").each(function(){var ht=x.getVisibleSegment(this,ct,zt.height/2);if(ht&&!(ht.len<(zt.width+zt.height)*h.LABELMIN))for(var ut=Math.min(Math.ceil(ht.len/Ct),h.LABELMAX),Ot=0;Ot<ut;Ot++){var tn=ae.findBestTextLocation(this,ht,zt,Ce,ct);if(!tn)break;ae.addLabelData(tn,zt,Ce,we)}})}),Se.remove(),ae.drawLabels(ge,Ce,ie,be,de?we:null)}ue&&!le&&he.remove()}(D,V,w,F,B),function(G,W,ie,q,te){var ne=q.trace,ue="clip"+ne.uid,de=ie._fullLayout._clips.selectAll("#"+ue).data(ne.connectgaps?[]:[0]);if(de.enter().append("clipPath").classed("contourclip",!0).attr("id",ue),de.exit().remove(),!1===ne.connectgaps){var he={level:.9,crossings:{},starts:[],edgepaths:[],paths:[],xaxis:W.xaxis,yaxis:W.yaxis,x:q.x,y:q.y,z:f(q),smoothing:0};i([he]),d([he]),c([he],{type:"levels"}),x.ensureSingle(de,"path","").attr("d",(he.prefixBoundary?"M"+te.join("L")+"Z":"")+v(he,te))}else ue=null;T.setClipUrl(G,ue,ie)}(D,y,w,F,se)})},ae.createLines=function(w,y,M){var A=M[0].smoothing,k=w.selectAll("g.contourlevel").data(y?M:[]);if(k.exit().remove(),k.enter().append("g").classed("contourlevel",!0),y){var C=k.selectAll("path.openline").data(function(D){return D.pedgepaths||D.edgepaths});C.exit().remove(),C.enter().append("path").classed("openline",!0),C.attr("d",function(D){return T.smoothopen(D,A)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke");var P=k.selectAll("path.closedline").data(function(D){return D.ppaths||D.paths});P.exit().remove(),P.enter().append("path").classed("closedline",!0),P.attr("d",function(D){return T.smoothclosed(D,A)}).style("stroke-miterlimit",1).style("vector-effect","non-scaling-stroke")}return k},ae.createLineClip=function(w,y,M,A){var k=y?"clipline"+A:null,C=M._fullLayout._clips.selectAll("#"+k).data(y?[0]:[]);return C.exit().remove(),C.enter().append("clipPath").classed("contourlineclip",!0).attr("id",k),T.setClipUrl(w,k,M),C},ae.labelFormatter=function(w,y){var M=w._fullLayout,A=y.trace,k=A.contours,C={type:"linear",_id:"ycontour",showexponent:"all",exponentformat:"B"};if(k.labelformat)C.tickformat=k.labelformat,a(C,M);else{var P=b.extractOpts(A);if(P&&P.colorbar&&P.colorbar._axis)C=P.colorbar._axis;else{if("constraint"===k.type){var D=k.value;C.range=Array.isArray(D)?[D[0],D[D.length-1]]:[D,D]}else C.range=[k.start,k.end],C.nticks=(k.end-k.start)/k.size;C.range[0]===C.range[1]&&(C.range[1]+=C.range[0]||1),C.nticks||(C.nticks=1e3),a(C,M),o.prepTicks(C),C._tmin=null,C._tmax=null}}return function(F){return o.tickText(C,F).text}},ae.calcTextOpts=function(w,y,M,A){var k=y(w);M.text(k).call(e.convertToTspans,A);var C=M.node(),P=T.bBox(C,!0);return{text:k,width:P.width,height:P.height,fontSize:+C.style["font-size"].replace("px",""),level:w,dy:(P.top+P.bottom)/2}},ae.findBestTextLocation=function(w,y,M,A,k){var C,P,D,F,R,L=M.width;y.isClosed?(C=y.min+(P=y.len/p.INITIALSEARCHPOINTS)/2,D=y.max):(C=y.min+(P=(y.len-L)/(p.INITIALSEARCHPOINTS+1))+L/2,D=y.max-(P+L)/2);for(var I=1/0,B=0;B<p.ITERATIONS;B++){for(var V=C;V<D;V+=P){var Z=x.getTextLocation(w,y.total,V,L),Y=g(Z,M,A,k);Y<I&&(I=Y,R=Z,F=V)}if(I>2*p.MAXCOST)break;B&&(P/=2),D=(C=F-P/2)+1.5*P}if(I<=p.MAXCOST)return R},ae.addLabelData=function(w,y,M,A){var k=y.fontSize,C=y.width+k/3,P=Math.max(0,y.height-k/3),D=w.x,F=w.y,R=w.theta,L=Math.sin(R),I=Math.cos(R),B=function(Z,Y){return[D+Z*I-Y*L,F+Z*L+Y*I]},V=[B(-C/2,-P/2),B(-C/2,P/2),B(C/2,P/2),B(C/2,-P/2)];M.push({text:y.text,x:D,y:F,dy:y.dy,theta:R,level:y.level,width:C,height:P}),A.push(V)},ae.drawLabels=function(w,y,M,A,k){var C=w.selectAll("text").data(y,function(F){return F.text+","+F.x+","+F.y+","+F.theta});if(C.exit().remove(),C.enter().append("text").attr({"data-notex":1,"text-anchor":"middle"}).each(function(F){var R=F.x+Math.sin(F.theta)*F.dy,L=F.y-Math.cos(F.theta)*F.dy;m.select(this).text(F.text).attr({x:R,y:L,transform:"rotate("+180*F.theta/Math.PI+" "+R+" "+L+")"}).call(e.convertToTspans,M)}),k){for(var P="",D=0;D<k.length;D++)P+="M"+k[D].join("L")+"Z";x.ensureSingle(A,"path","").attr("d",P)}}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/set_convert":576,"../heatmap/plot":804,"./close_boundaries":737,"./constants":739,"./convert_to_constraints":743,"./empty_pathinfo":745,"./find_all_paths":747,"./make_crossings":752,"@plotly/d3":58}],754:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/axes"),x=_("../../lib");function T(b,e,o){var a={type:"linear",range:[b,e]};return m.autoTicks(a,(e-b)/(o||15)),a}oe.exports=function(b,e){var o=b.contours;if(b.autocontour){var a=b.zmin,l=b.zmax;(b.zauto||void 0===a)&&(a=x.aggNums(Math.min,null,e)),(b.zauto||void 0===l)&&(l=x.aggNums(Math.max,null,e));var i=T(a,l,b.ncontours);o.size=i.dtick,o.start=m.tickFirst(i),i.range.reverse(),o.end=m.tickFirst(i),o.start===a&&(o.start+=o.size),o.end===l&&(o.end-=o.size),o.start>o.end&&(o.start=o.end=(o.start+o.end)/2),b._input.contours||(b._input.contours={}),x.extendFlat(b._input.contours,{start:o.start,end:o.end,size:o.size}),b._input.autocontour=!0}else if("constraint"!==o.type){var d,u=o.start,s=o.end,c=b._input.contours;u>s&&(o.start=c.start=s,s=o.end=c.end=u,u=o.start),!(o.size>0)&&(d=u===s?1:T(u,s,b.ncontours).dtick,c.size=o.size=d)}}},{"../../lib":503,"../../plots/cartesian/axes":554}],755:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../components/drawing"),T=_("../heatmap/style"),b=_("./make_color_map");oe.exports=function(e){var o=m.select(e).selectAll("g.contour");o.style("opacity",function(a){return a[0].trace.opacity}),o.each(function(a){var l=m.select(this),i=a[0].trace,d=i.contours,u=i.line,s=d.size||1,c=d.start,h="constraint"===d.type,p=!h&&"lines"===d.coloring,v=!h&&"fill"===d.coloring,g=p||v?b(i):null;l.selectAll("g.contourlevel").each(function(y){m.select(this).selectAll("path").call(x.lineGroupStyle,u.width,p?g(y.level):u.color,u.dash)});var f=d.labelfont;if(l.selectAll("g.contourlabels text").each(function(y){x.font(m.select(this),{family:f.family,size:f.size,color:f.color||(p?g(y.level):u.color)})}),h)l.selectAll("g.contourfill path").style("fill",i.fillcolor);else if(v){var w;l.selectAll("g.contourfill path").style("fill",function(y){return void 0===w&&(w=y.level),g(y.level+.5*s)}),void 0===w&&(w=c),l.selectAll("g.contourbg path").style("fill",g(w-.5*s))}}),T(e)}},{"../../components/drawing":388,"../heatmap/style":805,"./make_color_map":751,"@plotly/d3":58}],756:[function(_,oe,ae){"use strict";var m=_("../../components/colorscale/defaults"),x=_("./label_defaults");oe.exports=function(T,b,e,o,a){var l,i=e("contours.coloring"),d="";"fill"===i&&(l=e("contours.showlines")),!1!==l&&("lines"!==i&&(d=e("line.color","#000")),e("line.width",.5),e("line.dash")),"none"!==i&&(!0!==T.showlegend&&(b.showlegend=!1),b._dfltShowLegend=!1,m(T,b,o,e,{prefix:"",cLetter:"z"})),e("line.smoothing"),x(e,o,d,a)}},{"../../components/colorscale/defaults":376,"./label_defaults":750}],757:[function(_,oe,ae){"use strict";var m=_("../heatmap/attributes"),x=_("../contour/attributes"),T=_("../../components/colorscale/attributes"),b=_("../../lib/extend").extendFlat,e=x.contours;oe.exports=b({carpet:{valType:"string",editType:"calc"},z:m.z,a:m.x,a0:m.x0,da:m.dx,b:m.y,b0:m.y0,db:m.dy,text:m.text,hovertext:m.hovertext,transpose:m.transpose,atype:m.xtype,btype:m.ytype,fillcolor:x.fillcolor,autocontour:x.autocontour,ncontours:x.ncontours,contours:{type:e.type,start:e.start,end:e.end,size:e.size,coloring:{valType:"enumerated",values:["fill","lines","none"],dflt:"fill",editType:"calc"},showlines:e.showlines,showlabels:e.showlabels,labelfont:e.labelfont,labelformat:e.labelformat,operation:e.operation,value:e.value,editType:"calc",impliedEdits:{autocontour:!1}},line:{color:x.line.color,width:x.line.width,dash:x.line.dash,smoothing:x.line.smoothing,editType:"plot"},transforms:void 0},T("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../contour/attributes":735,"../heatmap/attributes":792}],758:[function(_,oe,ae){"use strict";var m=_("../../components/colorscale/calc"),x=_("../../lib"),T=_("../heatmap/convert_column_xyz"),b=_("../heatmap/clean_2d_array"),e=_("../heatmap/interp2d"),o=_("../heatmap/find_empties"),a=_("../heatmap/make_bound_array"),l=_("./defaults"),i=_("../carpet/lookup_carpetid"),d=_("../contour/set_contours");oe.exports=function(u,s){var c=s._carpetTrace=i(u,s);if(c&&c.visible&&"legendonly"!==c.visible){if(!s.a||!s.b){var h=u.data[c.index],p=u.data[s.index];p.a||(p.a=h.a),p.b||(p.b=h.b),l(p,s,s._defaultColor,u._fullLayout)}var v=function(g,f){var w,y,M,A,k,C,P,D=f._carpetTrace,F=D.aaxis,R=D.baxis;F._minDtick=0,R._minDtick=0,x.isArray1D(f.z)&&T(f,F,R,"a","b",["z"]),w=f._a=f._a||f.a,A=f._b=f._b||f.b,w=w?F.makeCalcdata(f,"_a"):[],A=A?R.makeCalcdata(f,"_b"):[],y=f.a0||0,M=f.da||1,k=f.b0||0,C=f.db||1,P=f._z=b(f._z||f.z,f.transpose),f._emptypoints=o(P),e(P,f._emptypoints);var L=x.maxRowLength(P),Y={a:a(f,"scaled"===f.xtype?"":w,y,M,L,F),b:a(f,"scaled"===f.ytype?"":A,k,C,P.length,R),z:P};return"levels"===f.contours.type&&"none"!==f.contours.coloring&&m(g,f,{vals:P,containerStr:"",cLetter:"z"}),[Y]}(u,s);return d(s,s._z),v}}},{"../../components/colorscale/calc":374,"../../lib":503,"../carpet/lookup_carpetid":708,"../contour/set_contours":754,"../heatmap/clean_2d_array":794,"../heatmap/convert_column_xyz":796,"../heatmap/find_empties":798,"../heatmap/interp2d":801,"../heatmap/make_bound_array":803,"./defaults":759}],759:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../heatmap/xyz_defaults"),T=_("./attributes"),b=_("../contour/constraint_defaults"),e=_("../contour/contours_defaults"),o=_("../contour/style_defaults");oe.exports=function(a,l,i,d){function u(s,c){return m.coerce(a,l,T,s,c)}if(u("carpet"),a.a&&a.b){if(!x(a,l,u,d,"a","b"))return void(l.visible=!1);u("text"),"constraint"===u("contours.type")?b(a,l,u,d,i,{hasHover:!1}):(e(a,l,u,function(s){return m.coerce2(a,l,T,s)}),o(a,l,u,d,{hasHover:!1}))}else l._defaultColor=i,l._length=null}},{"../../lib":503,"../contour/constraint_defaults":740,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/xyz_defaults":807,"./attributes":757}],760:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../contour/colorbar"),calc:_("./calc"),plot:_("./plot"),style:_("../contour/style"),moduleType:"trace",name:"contourcarpet",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","carpet","contour","symbols","showLegend","hasLines","carpetDependent","noHover","noSortingByValue"],meta:{}}},{"../../plots/cartesian":568,"../contour/colorbar":738,"../contour/style":755,"./attributes":757,"./calc":758,"./defaults":759,"./plot":761}],761:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../carpet/map_1d_array"),T=_("../carpet/makepath"),b=_("../../components/drawing"),e=_("../../lib"),o=_("../contour/make_crossings"),a=_("../contour/find_all_paths"),l=_("../contour/plot"),i=_("../contour/constants"),d=_("../contour/convert_to_constraints"),u=_("../contour/empty_pathinfo"),s=_("../contour/close_boundaries"),c=_("../carpet/lookup_carpetid"),h=_("../carpet/axis_aligned_line");function p(f,w,y){var M=f.getPointAtLength(w),A=f.getPointAtLength(y),k=A.x-M.x,C=A.y-M.y,P=Math.sqrt(k*k+C*C);return[k/P,C/P]}function v(f){var w=Math.sqrt(f[0]*f[0]+f[1]*f[1]);return[f[0]/w,f[1]/w]}function g(f,w){var y=Math.abs(f[0]*w[0]+f[1]*w[1]);return Math.sqrt(1-y*y)/y}oe.exports=function(f,w,y,M){var A=w.xaxis,k=w.yaxis;e.makeTraceGroups(M,y,"contour").each(function(C){var P=m.select(this),D=C[0],F=D.trace,R=F._carpetTrace=c(f,F),L=f.calcdata[R.index][0];if(R.visible&&"legendonly"!==R.visible){var I=D.a,B=D.b,V=F.contours,Z=u(V,w,D),Y="constraint"===V.type,ee=V._operation,J=Y?"="===ee?"lines":"fill":V.coloring,$=[[I[0],B[B.length-1]],[I[I.length-1],B[B.length-1]],[I[I.length-1],B[0]],[I[0],B[0]]];o(Z),a(Z,1e-8*(I[I.length-1]-I[0]),1e-8*(B[B.length-1]-B[0]));var j,G,W,ie,q=Z;"constraint"===V.type&&(q=d(Z,ee)),function(ue,de){var he,be,ge,we,Ce,De,Se,Fe,ve;for(he=0;he<ue.length;he++){for(Ce=(we=ue[he]).pedgepaths=[],De=we.ppaths=[],be=0;be<we.edgepaths.length;be++){for(ve=we.edgepaths[be],Se=[],ge=0;ge<ve.length;ge++)Se[ge]=de(ve[ge]);Ce.push(Se)}for(be=0;be<we.paths.length;be++){for(ve=we.paths[be],Fe=[],ge=0;ge<ve.length;ge++)Fe[ge]=de(ve[ge]);De.push(Fe)}}}(Z,le);var te=[];for(ie=L.clipsegments.length-1;ie>=0;ie--)G=x([],(j=L.clipsegments[ie]).x,A.c2p),W=x([],j.y,k.c2p),G.reverse(),W.reverse(),te.push(T(G,W,j.bicubic));var ne="M"+te.join("L")+"Z";(function(ue,de,he,be,ge,we){var Ce,De,Se,Fe,ve=e.ensureSingle(ue,"g","contourbg").selectAll("path").data("fill"!==we||ge?[]:[0]);ve.enter().append("path"),ve.exit().remove();var Te=[];for(Fe=0;Fe<de.length;Fe++)De=x([],(Ce=de[Fe]).x,he.c2p),Se=x([],Ce.y,be.c2p),Te.push(T(De,Se,Ce.bicubic));ve.attr("d","M"+Te.join("L")+"Z").style("stroke","none")})(P,L.clipsegments,A,k,Y,J),function(ue,de,he,be,ge,we,Ce,De,Se,Fe,ve){var Te="fill"===Fe;Te&&s(ge,ue.contours);var Le=e.ensureSingle(de,"g","contourfill").selectAll("path").data(Te?ge:[]);Le.enter().append("path"),Le.exit().remove(),Le.each(function(Ee){var Pe=(Ee.prefixBoundary?ve:"")+function(je,Ge,Ke,lt,Ue,$e,et,tt){var ct,xt,Ct,Ht,zt,ht,ut,Ot="",tn=Ge.edgepaths.map(function(gt,wt){return wt}),un=!0,Ze=1e-4*Math.abs(Ke[0][0]-Ke[2][0]),Qe=1e-4*Math.abs(Ke[0][1]-Ke[2][1]);function qe(gt){return Math.abs(gt[1]-Ke[0][1])<Qe}function it(gt){return Math.abs(gt[1]-Ke[2][1])<Qe}function Ie(gt){return Math.abs(gt[0]-Ke[0][0])<Ze}function ze(gt){return Math.abs(gt[0]-Ke[2][0])<Ze}function Ve(gt,wt){var _t,Rt,yt,Vt,Nt="";for(qe(gt)&&!ze(gt)||it(gt)&&!Ie(gt)?(Vt=Ue.aaxis,yt=h(Ue,$e,[gt[0],wt[0]],.5*(gt[1]+wt[1]))):(Vt=Ue.baxis,yt=h(Ue,$e,.5*(gt[0]+wt[0]),[gt[1],wt[1]])),_t=1;_t<yt.length;_t++)for(Nt+=Vt.smoothing?"C":"L",Rt=0;Rt<yt[_t].length;Rt++){var rt=yt[_t][Rt];Nt+=[et.c2p(rt[0]),tt.c2p(rt[1])]+" "}return Nt}for(ct=0,xt=null;tn.length;){for(xt&&(Ot+=Ve(xt,Ge.edgepaths[ct][0])),ut=b.smoothopen(Ge.edgepaths[ct].map(lt),Ge.smoothing),Ot+=un?ut:ut.replace(/^M/,"L"),tn.splice(tn.indexOf(ct),1),xt=Ge.edgepaths[ct][Ge.edgepaths[ct].length-1],zt=-1,Ht=0;Ht<4;Ht++){if(!xt){e.log("Missing end?",ct,Ge);break}for(qe(xt)&&!ze(xt)?Ct=Ke[1]:Ie(xt)?Ct=Ke[0]:it(xt)?Ct=Ke[3]:ze(xt)&&(Ct=Ke[2]),ht=0;ht<Ge.edgepaths.length;ht++){var at=Ge.edgepaths[ht][0];Math.abs(xt[0]-Ct[0])<Ze?Math.abs(xt[0]-at[0])<Ze&&(at[1]-xt[1])*(Ct[1]-at[1])>=0&&(Ct=at,zt=ht):Math.abs(xt[1]-Ct[1])<Qe?Math.abs(xt[1]-at[1])<Qe&&(at[0]-xt[0])*(Ct[0]-at[0])>=0&&(Ct=at,zt=ht):e.log("endpt to newendpt is not vert. or horz.",xt,Ct,at)}if(zt>=0)break;Ot+=Ve(xt,Ct),xt=Ct}if(zt===Ge.edgepaths.length){e.log("unclosed perimeter path");break}(un=-1===tn.indexOf(ct=zt))&&(ct=tn[0],Ot+=Ve(xt,Ct)+"Z",xt=null)}for(ct=0;ct<Ge.paths.length;ct++)Ot+=b.smoothclosed(Ge.paths[ct].map(lt),Ge.smoothing);return Ot}(0,Ee,we,Ce,De,Se,he,be);Pe?m.select(this).attr("d",Pe).style("stroke","none"):m.select(this).remove()})}(F,P,A,k,q,$,le,R,L,J,ne),function(ue,de,he,be,ge,we,Ce){var De=e.ensureSingle(ue,"g","contourlines"),Se=!1!==ge.showlines,Fe=ge.showlabels,ve=Se&&Fe,Te=l.createLines(De,Se||Fe,de),Le=l.createLineClip(De,ve,he,be.trace.uid),Ee=ue.selectAll("g.contourlabels").data(Fe?[0]:[]);if(Ee.exit().remove(),Ee.enter().append("g").classed("contourlabels",!0),Fe){var Ge=we.xaxis._length,Ke=we.yaxis._length,lt=[[[0,0],[Ge,0],[Ge,Ke],[0,Ke]]],Ue=[];e.clearLocationCache();var $e=l.labelFormatter(he,be),et=b.tester.append("text").attr("data-notex",1).call(b.font,ge.labelfont),tt={left:0,right:Ge,center:Ge/2,top:0,bottom:Ke,middle:Ke/2},ct=Math.sqrt(Ge*Ge+Ke*Ke),xt=i.LABELDISTANCE*ct/Math.max(1,de.length/i.LABELINCREASE);Te.each(function(Ct){var Ht=l.calcTextOpts(Ct.level,$e,et,he);m.select(this).selectAll("path").each(function(zt){var ht=e.getVisibleSegment(this,tt,Ht.height/2);if(ht&&(function(un,Ze,Qe,qe,it,Ie){for(var ze,Ve=0;Ve<Qe.pedgepaths.length;Ve++)Ze===Qe.pedgepaths[Ve]&&(ze=Qe.edgepaths[Ve]);if(ze){var Be=it.a[0],at=it.a[it.a.length-1],gt=it.b[0],wt=it.b[it.b.length-1],Rt=p(un,0,1),yt=p(un,qe.total,qe.total-1),Vt=_t(ze[0],Rt),Nt=qe.total-_t(ze[ze.length-1],yt);qe.min<Vt&&(qe.min=Vt),qe.max>Nt&&(qe.max=Nt),qe.len=qe.max-qe.min}function _t(rt,Tt){var Ut,Wt=0;return(Math.abs(rt[0]-Be)<.1||Math.abs(rt[0]-at)<.1)&&(Ut=v(it.dxydb_rough(rt[0],rt[1],.1)),Wt=Math.max(Wt,Ie*g(Tt,Ut)/2)),(Math.abs(rt[1]-gt)<.1||Math.abs(rt[1]-wt)<.1)&&(Ut=v(it.dxyda_rough(rt[0],rt[1],.1)),Wt=Math.max(Wt,Ie*g(Tt,Ut)/2)),Wt}}(this,zt,Ct,ht,Ce,Ht.height),!(ht.len<(Ht.width+Ht.height)*i.LABELMIN)))for(var ut=Math.min(Math.ceil(ht.len/xt),i.LABELMAX),Ot=0;Ot<ut;Ot++){var tn=l.findBestTextLocation(this,ht,Ht,Ue,tt);if(!tn)break;l.addLabelData(tn,Ht,Ue,lt)}})}),et.remove(),l.drawLabels(Ee,Ue,he,Le,ve?lt:null)}Fe&&!Se&&Te.remove()}(P,Z,f,D,V,w,R),b.setClipUrl(P,R._clipPathId,f)}function le(ue){var de=R.ab2xy(ue[0],ue[1],!0);return[A.c2p(de[0]),k.c2p(de[1])]}})}},{"../../components/drawing":388,"../../lib":503,"../carpet/axis_aligned_line":692,"../carpet/lookup_carpetid":708,"../carpet/makepath":709,"../carpet/map_1d_array":710,"../contour/close_boundaries":737,"../contour/constants":739,"../contour/convert_to_constraints":743,"../contour/empty_pathinfo":745,"../contour/find_all_paths":747,"../contour/make_crossings":752,"../contour/plot":753,"@plotly/d3":58}],762:[function(_,oe,ae){"use strict";var m=_("../../components/colorscale/attributes"),x=_("../../plots/template_attributes").hovertemplateAttrs,T=_("../../plots/attributes"),b=_("../scattermapbox/attributes"),e=_("../../lib/extend").extendFlat;oe.exports=e({lon:b.lon,lat:b.lat,z:{valType:"data_array",editType:"calc"},radius:{valType:"number",editType:"plot",arrayOk:!0,min:1,dflt:30},below:{valType:"string",editType:"plot"},text:b.text,hovertext:b.hovertext,hoverinfo:e({},T.hoverinfo,{flags:["lon","lat","z","text","name"]}),hovertemplate:x(),showlegend:e({},T.showlegend,{dflt:!1})},m("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scattermapbox/attributes":991}],763:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../lib").isArrayOrTypedArray,T=_("../../constants/numerical").BADNUM,b=_("../../components/colorscale/calc"),e=_("../../lib")._;oe.exports=function(o,a){for(var l=a._length,i=new Array(l),d=a.z,u=x(d)&&d.length,s=0;s<l;s++){var c=i[s]={},h=a.lon[s],p=a.lat[s];if(c.lonlat=m(h)&&m(p)?[+h,+p]:[T,T],u){var v=d[s];c.z=m(v)?v:T}}return b(o,a,{vals:u?d:[0,1],containerStr:"",cLetter:"z"}),l&&(i[0].t={labels:{lat:e(o,"lat:")+" ",lon:e(o,"lon:")+" "}}),i}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],764:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../lib"),T=_("../../components/color"),b=_("../../components/colorscale"),e=_("../../constants/numerical").BADNUM,o=_("../../lib/geojson_utils").makeBlank;oe.exports=function(a){var l=a[0].trace,i=!0===l.visible&&0!==l._length,d=l._opts={heatmap:{layout:{visibility:"none"},paint:{}},geojson:o()};if(!i)return d;var u,s=[],c=l.z,h=l.radius,p=x.isArrayOrTypedArray(c)&&c.length,v=x.isArrayOrTypedArray(h);for(u=0;u<a.length;u++){var g=a[u],f=g.lonlat;if(f[0]!==e){var w={};if(p){var y=g.z;w.z=y!==e?y:0}v&&(w.r=m(h[u])&&h[u]>0?+h[u]:0),s.push({type:"Feature",geometry:{type:"Point",coordinates:f},properties:w})}}var M=b.extractOpts(l),A=M.reversescale?b.flipScale(M.colorscale):M.colorscale,k=A[0][1],C=["interpolate",["linear"],["heatmap-density"],0,T.opacity(k)<1?k:T.addOpacity(k,0)];for(u=1;u<A.length;u++)C.push(A[u][0],A[u][1]);return x.extendFlat(d.heatmap.paint,{"heatmap-weight":p?["interpolate",["linear"],["get","z"],M.min,0,M.max,1]:1/(M.max-M.min),"heatmap-color":C,"heatmap-radius":v?{type:"identity",property:"r"}:l.radius,"heatmap-opacity":l.opacity}),d.geojson={type:"FeatureCollection",features:s},d.heatmap.layout.visibility="visible",d}},{"../../components/color":366,"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"fast-isnumeric":190}],765:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../components/colorscale/defaults"),T=_("./attributes");oe.exports=function(b,e,o,a){function l(s,c){return m.coerce(b,e,T,s,c)}var i=l("lon")||[],d=l("lat")||[],u=Math.min(i.length,d.length);u?(e._length=u,l("z"),l("radius"),l("below"),l("text"),l("hovertext"),l("hovertemplate"),x(b,e,a,l,{prefix:"",cLetter:"z"})):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":762}],766:[function(_,oe,ae){"use strict";oe.exports=function(m,x){return m.lon=x.lon,m.lat=x.lat,m.z=x.z,m}},{}],767:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/axes"),x=_("../scattermapbox/hover").hoverPoints,T=_("../scattermapbox/hover").getExtraText;oe.exports=function(b,e,o){var a=x(b,e,o);if(a){var l=a[0],i=l.cd,d=i[0].trace,u=i[l.index];if(delete l.color,"z"in u){var s=l.subplot.mockAxis;l.z=u.z,l.zLabel=m.tickText(s,s.c2l(u.z),"hover").text}return l.extraText=T(d,u,i[0].t.labels),[l]}}},{"../../plots/cartesian/axes":554,"../scattermapbox/hover":996}],768:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../heatmap/colorbar"),formatLabels:_("../scattermapbox/format_labels"),calc:_("./calc"),plot:_("./plot"),hoverPoints:_("./hover"),eventData:_("./event_data"),getBelow:function(m,x){for(var T=x.getMapLayers(),b=0;b<T.length;b++){var e=T[b],o=e.id;if("symbol"===e.type&&"string"==typeof o&&-1===o.indexOf("plotly-"))return o}},moduleType:"trace",name:"densitymapbox",basePlotModule:_("../../plots/mapbox"),categories:["mapbox","gl","showLegend"],meta:{hr_name:"density_mapbox"}}},{"../../plots/mapbox":613,"../heatmap/colorbar":795,"../scattermapbox/format_labels":995,"./attributes":762,"./calc":763,"./defaults":765,"./event_data":766,"./hover":767,"./plot":769}],769:[function(_,oe,ae){"use strict";var m=_("./convert"),x=_("../../plots/mapbox/constants").traceLayerPrefix;function T(e,o){this.type="densitymapbox",this.subplot=e,this.uid=o,this.sourceId="source-"+o,this.layerList=[["heatmap",x+o+"-heatmap"]],this.below=null}var b=T.prototype;b.update=function(e){var o=this.subplot,a=this.layerList,l=m(e),i=o.belowLookup["trace-"+this.uid];o.map.getSource(this.sourceId).setData(l.geojson),i!==this.below&&(this._removeLayers(),this._addLayers(l,i),this.below=i);for(var d=0;d<a.length;d++){var u=a[d],c=u[1],h=l[u[0]];o.setOptions(c,"setLayoutProperty",h.layout),"visible"===h.layout.visibility&&o.setOptions(c,"setPaintProperty",h.paint)}},b._addLayers=function(e,o){for(var a=this.subplot,l=this.layerList,i=this.sourceId,d=0;d<l.length;d++){var u=l[d],s=u[0],c=e[s];a.addLayer({type:s,id:u[1],source:i,layout:c.layout,paint:c.paint},o)}},b._removeLayers=function(){for(var e=this.subplot.map,o=this.layerList,a=o.length-1;a>=0;a--)e.removeLayer(o[a][1])},b.dispose=function(){var e=this.subplot.map;this._removeLayers(),e.removeSource(this.sourceId)},oe.exports=function(e,o){var a=o[0].trace,l=new T(e,a.uid),i=l.sourceId,d=m(o),u=l.below=e.belowLookup["trace-"+a.uid];return e.map.addSource(i,{type:"geojson",data:d.geojson}),l._addLayers(d,u),l}},{"../../plots/mapbox/constants":611,"./convert":764}],770:[function(_,oe,ae){"use strict";var m=_("../../lib");oe.exports=function(x,T){for(var b=0;b<x.length;b++)x[b].i=b;m.mergeArray(T.text,x,"tx"),m.mergeArray(T.hovertext,x,"htx");var e=T.marker;if(e){m.mergeArray(e.opacity,x,"mo"),m.mergeArray(e.color,x,"mc");var o=e.line;o&&(m.mergeArray(o.color,x,"mlc"),m.mergeArrayCastPositive(o.width,x,"mlw"))}}},{"../../lib":503}],771:[function(_,oe,ae){"use strict";var m,x=_("../bar/attributes"),T=_("../scatter/attributes").line,b=_("../../plots/attributes"),e=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,o=_("../../plots/template_attributes").hovertemplateAttrs,a=_("../../plots/template_attributes").texttemplateAttrs,l=_("./constants"),i=_("../../lib/extend").extendFlat,d=_("../../components/color");oe.exports={x:x.x,x0:x.x0,dx:x.dx,y:x.y,y0:x.y0,dy:x.dy,xperiod:x.xperiod,yperiod:x.yperiod,xperiod0:x.xperiod0,yperiod0:x.yperiod0,xperiodalignment:x.xperiodalignment,yperiodalignment:x.yperiodalignment,xhoverformat:e("x"),yhoverformat:e("y"),hovertext:x.hovertext,hovertemplate:o({},{keys:l.eventDataKeys}),hoverinfo:i({},b.hoverinfo,{flags:["name","x","y","text","percent initial","percent previous","percent total"]}),textinfo:{valType:"flaglist",flags:["label","text","percent initial","percent previous","percent total","value"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:a({editType:"plot"},{keys:l.eventDataKeys.concat(["label","value"])}),text:x.text,textposition:x.textposition,insidetextanchor:i({},x.insidetextanchor,{dflt:"middle"}),textangle:i({},x.textangle,{dflt:0}),textfont:x.textfont,insidetextfont:x.insidetextfont,outsidetextfont:x.outsidetextfont,constraintext:x.constraintext,cliponaxis:x.cliponaxis,orientation:i({},x.orientation,{}),offset:i({},x.offset,{arrayOk:!1}),width:i({},x.width,{arrayOk:!1}),marker:(m=i({},x.marker),delete m.pattern,m),connector:{fillcolor:{valType:"color",editType:"style"},line:{color:i({},T.color,{dflt:d.defaultLine}),width:i({},T.width,{dflt:0,editType:"plot"}),dash:T.dash,editType:"style"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:x.offsetgroup,alignmentgroup:x.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926,"./constants":773}],772:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/axes"),x=_("../../plots/cartesian/align_period"),T=_("./arrays_to_calcdata"),b=_("../scatter/calc_selection"),e=_("../../constants/numerical").BADNUM;function o(a){return a===e?0:a}oe.exports=function(a,l){var i,d,u,s,c,h,p,v,g=m.getFromId(a,l.xaxis||"x"),f=m.getFromId(a,l.yaxis||"y");"h"===l.orientation?(i=g.makeCalcdata(l,"x"),u=f.makeCalcdata(l,"y"),s=x(l,f,"y",u),c=!!l.yperiodalignment,h="y"):(i=f.makeCalcdata(l,"y"),u=g.makeCalcdata(l,"x"),s=x(l,g,"x",u),c=!!l.xperiodalignment,h="x"),d=s.vals;var w,y=Math.min(d.length,i.length),M=new Array(y);for(l._base=[],p=0;p<y;p++){i[p]<0&&(i[p]=e);var A=!1;i[p]!==e&&p+1<y&&i[p+1]!==e&&(A=!0),v=M[p]={p:d[p],s:i[p],cNext:A},l._base[p]=-.5*v.s,c&&(M[p].orig_p=u[p],M[p][h+"End"]=s.ends[p],M[p][h+"Start"]=s.starts[p]),l.ids&&(v.id=String(l.ids[p])),0===p&&(M[0].vTotal=0),M[0].vTotal+=o(v.s),v.begR=o(v.s)/o(M[0].s)}for(p=0;p<y;p++)(v=M[p]).s!==e&&(v.sumR=v.s/M[0].vTotal,v.difR=void 0!==w?v.s/w:1,w=v.s);return T(M,l),b(M,l),M}},{"../../constants/numerical":479,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928,"./arrays_to_calcdata":770}],773:[function(_,oe,ae){"use strict";oe.exports={eventDataKeys:["percentInitial","percentPrevious","percentTotal"]}},{}],774:[function(_,oe,ae){"use strict";var m=_("../bar/cross_trace_calc").setGroupPositions;oe.exports=function(x,T){var b,e,o=x._fullLayout,a=x._fullData,l=x.calcdata,i=T.xaxis,d=T.yaxis,u=[],s=[],c=[];for(e=0;e<a.length;e++){var h=a[e];!0===h.visible&&h.xaxis===i._id&&h.yaxis===d._id&&"funnel"===h.type&&(b=l[e],"h"===h.orientation?c.push(b):s.push(b),u.push(b))}var v={mode:o.funnelmode,norm:o.funnelnorm,gap:o.funnelgap,groupgap:o.funnelgroupgap};for(m(x,i,d,s,v),m(x,d,i,c,v),e=0;e<u.length;e++){b=u[e];for(var g=0;g<b.length;g++)g+1<b.length&&(b[g].nextP0=b[g+1].p0,b[g].nextS0=b[g+1].s0,b[g].nextP1=b[g+1].p1,b[g].nextS1=b[g+1].s1)}}},{"../bar/cross_trace_calc":651}],775:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../bar/defaults").handleGroupingDefaults,T=_("../bar/defaults").handleText,b=_("../scatter/xy_defaults"),e=_("../scatter/period_defaults"),o=_("./attributes"),a=_("../../components/color");oe.exports={supplyDefaults:function(l,i,d,u){function s(v,g){return m.coerce(l,i,o,v,g)}if(b(l,i,u,s)){e(l,i,u,s),s("xhoverformat"),s("yhoverformat"),s("orientation",i.y&&!i.x?"v":"h"),s("offset"),s("width");var c=s("text");s("hovertext"),s("hovertemplate");var h=s("textposition");T(l,i,u,s,h,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"===i.textposition||i.texttemplate||s("textinfo",Array.isArray(c)?"text+value":"value");var p=s("marker.color",d);s("marker.line.color",a.defaultLine),s("marker.line.width"),s("connector.visible")&&(s("connector.fillcolor",(g=m.isArrayOrTypedArray(v=p)?"#000":v,a.addOpacity(g,.5*a.opacity(g)))),s("connector.line.width")&&(s("connector.line.color"),s("connector.line.dash")))}else i.visible=!1;var v,g},crossTraceDefaults:function(l,i){var d,u;function s(h){return m.coerce(u._input,u,o,h)}if("group"===i.funnelmode)for(var c=0;c<l.length;c++)d=(u=l[c])._input,x(d,u,i,s)}}},{"../../components/color":366,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":771}],776:[function(_,oe,ae){"use strict";oe.exports=function(m,x){return m.x="xVal"in x?x.xVal:x.x,m.y="yVal"in x?x.yVal:x.y,"percentInitial"in x&&(m.percentInitial=x.percentInitial),"percentPrevious"in x&&(m.percentPrevious=x.percentPrevious),"percentTotal"in x&&(m.percentTotal=x.percentTotal),x.xa&&(m.xaxis=x.xa),x.ya&&(m.yaxis=x.ya),m}},{}],777:[function(_,oe,ae){"use strict";var m=_("../../components/color").opacity,x=_("../bar/hover").hoverOnBars,T=_("../../lib").formatPercent;oe.exports=function(b,e,o,a,l){var y,M,A,k,C,i=x(b,e,o,a,l);if(i){var d=i.cd,u=d[0].trace,c=d[i.index];i[("h"===u.orientation?"x":"y")+"LabelVal"]=c.s,i.percentInitial=c.begR,i.percentInitialLabel=T(c.begR,1),i.percentPrevious=c.difR,i.percentPreviousLabel=T(c.difR,1),i.percentTotal=c.sumR,i.percentTotalLabel=T(c.sumR,1);var h=c.hi||u.hoverinfo,p=[];if(h&&"none"!==h&&"skip"!==h){var v="all"===h,g=h.split("+"),f=function(w){return v||-1!==g.indexOf(w)};f("percent initial")&&p.push(i.percentInitialLabel+" of initial"),f("percent previous")&&p.push(i.percentPreviousLabel+" of previous"),f("percent total")&&p.push(i.percentTotalLabel+" of total")}return i.extraText=p.join("<br>"),i.color=(M=u.marker,k=(y=c).mlc||M.line.color,C=y.mlw||M.line.width,m(A=y.mc||M.color)?A:m(k)&&C?k:void 0),[i]}}},{"../../components/color":366,"../../lib":503,"../bar/hover":655}],778:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults").supplyDefaults,crossTraceDefaults:_("./defaults").crossTraceDefaults,supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc"),crossTraceCalc:_("./cross_trace_calc"),plot:_("./plot"),style:_("./style").style,hoverPoints:_("./hover"),eventData:_("./event_data"),selectPoints:_("../bar/select"),moduleType:"trace",name:"funnel",basePlotModule:_("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":771,"./calc":772,"./cross_trace_calc":774,"./defaults":775,"./event_data":776,"./hover":777,"./layout_attributes":779,"./layout_defaults":780,"./plot":781,"./style":782}],779:[function(_,oe,ae){"use strict";oe.exports={funnelmode:{valType:"enumerated",values:["stack","group","overlay"],dflt:"stack",editType:"calc"},funnelgap:{valType:"number",min:0,max:1,editType:"calc"},funnelgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],780:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./layout_attributes");oe.exports=function(T,b,e){var o=!1;function a(d,u){return m.coerce(T,b,x,d,u)}for(var l=0;l<e.length;l++){var i=e[l];if(i.visible&&"funnel"===i.type){o=!0;break}}o&&(a("funnelmode"),a("funnelgap",.2),a("funnelgroupgap"))}},{"../../lib":503,"./layout_attributes":779}],781:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing"),b=_("../../constants/numerical").BADNUM,e=_("../bar/plot"),o=_("../bar/uniform_text").clearMinTextSize;function a(l,i,d,u){var s=[],c=[],h=u?i:d,p=u?d:i;return s[0]=h.c2p(l.s0,!0),c[0]=p.c2p(l.p0,!0),s[1]=h.c2p(l.s1,!0),c[1]=p.c2p(l.p1,!0),s[2]=h.c2p(l.nextS0,!0),c[2]=p.c2p(l.nextP0,!0),s[3]=h.c2p(l.nextS1,!0),c[3]=p.c2p(l.nextP1,!0),u?[s,c]:[c,s]}oe.exports=function(l,i,d,u){var c,h,g,f,s=l._fullLayout;o("funnel",s),c=l,g=(h=i).xaxis,f=h.yaxis,x.makeTraceGroups(u,d,"trace bars").each(function(w){var y=m.select(this),M=w[0].trace,A=x.ensureSingle(y,"g","regions");if(M.connector&&M.connector.visible){var k="h"===M.orientation,C=A.selectAll("g.region").data(x.identity);C.enter().append("g").classed("region",!0),C.exit().remove();var P=C.size();C.each(function(D,F){if(F===P-1||D.cNext){var R=a(D,g,f,k),L=R[0],I=R[1],B="";L[0]!==b&&I[0]!==b&&L[1]!==b&&I[1]!==b&&L[2]!==b&&I[2]!==b&&L[3]!==b&&I[3]!==b&&(B+=k?"M"+L[0]+","+I[1]+"L"+L[2]+","+I[2]+"H"+L[3]+"L"+L[1]+","+I[1]+"Z":"M"+L[1]+","+I[1]+"L"+L[2]+","+I[3]+"V"+I[2]+"L"+L[1]+","+I[0]+"Z"),""===B&&(B="M0,0Z"),x.ensureSingle(m.select(this),"path").attr("d",B).call(T.setClipUrl,h.layerClipId,c)}})}else A.remove()}),function(c,h,p,v){var g=h.xaxis,f=h.yaxis;x.makeTraceGroups(v,p,"trace bars").each(function(w){var y=m.select(this),M=w[0].trace,A=x.ensureSingle(y,"g","lines");if(M.connector&&M.connector.visible&&M.connector.line.width){var k="h"===M.orientation,C=A.selectAll("g.line").data(x.identity);C.enter().append("g").classed("line",!0),C.exit().remove();var P=C.size();C.each(function(D,F){if(F===P-1||D.cNext){var R=a(D,g,f,k),L=R[0],I=R[1],B="";void 0!==L[3]&&void 0!==I[3]&&(k?(B+="M"+L[0]+","+I[1]+"L"+L[2]+","+I[2],B+="M"+L[1]+","+I[1]+"L"+L[3]+","+I[2]):(B+="M"+L[1]+","+I[1]+"L"+L[2]+","+I[3],B+="M"+L[1]+","+I[0]+"L"+L[2]+","+I[2])),""===B&&(B="M0,0Z"),x.ensureSingle(m.select(this),"path").attr("d",B).call(T.setClipUrl,h.layerClipId,c)}})}else A.remove()})}(l,i,d,u),e.plot(l,i,d,u,{mode:s.funnelmode,norm:s.funnelmode,gap:s.funnelgap,groupgap:s.funnelgroupgap})}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],782:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../components/drawing"),T=_("../../components/color"),b=_("../../constants/interactions").DESELECTDIM,e=_("../bar/style"),o=_("../bar/uniform_text").resizeText,a=e.styleTextPoints;oe.exports={style:function(l,i,d){var u=d||m.select(l).selectAll("g.funnellayer").selectAll("g.trace");o(l,u,"funnel"),u.style("opacity",function(s){return s[0].trace.opacity}),u.each(function(s){var c=m.select(this),h=s[0].trace;c.selectAll(".point > path").each(function(p){if(!p.isBlank){var v=h.marker;m.select(this).call(T.fill,p.mc||v.color).call(T.stroke,p.mlc||v.line.color).call(x.dashLine,v.line.dash,p.mlw||v.line.width).style("opacity",h.selectedpoints&&!p.selected?b:1)}}),a(c,h,l),c.selectAll(".regions").each(function(){m.select(this).selectAll("path").style("stroke-width",0).call(T.fill,h.connector.fillcolor)}),c.selectAll(".lines").each(function(){var p=h.connector.line;x.lineGroupStyle(m.select(this).selectAll("path"),p.width,p.color,p.dash)})})}}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],783:[function(_,oe,ae){"use strict";var m=_("../pie/attributes"),x=_("../../plots/attributes"),T=_("../../plots/domain").attributes,b=_("../../plots/template_attributes").hovertemplateAttrs,e=_("../../plots/template_attributes").texttemplateAttrs,o=_("../../lib/extend").extendFlat;oe.exports={labels:m.labels,label0:m.label0,dlabel:m.dlabel,values:m.values,marker:{colors:m.marker.colors,line:{color:o({},m.marker.line.color,{dflt:null}),width:o({},m.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},text:m.text,hovertext:m.hovertext,scalegroup:o({},m.scalegroup,{}),textinfo:o({},m.textinfo,{flags:["label","text","value","percent"]}),texttemplate:e({editType:"plot"},{keys:["label","color","value","text","percent"]}),hoverinfo:o({},x.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:b({},{keys:["label","color","value","text","percent"]}),textposition:o({},m.textposition,{values:["inside","none"],dflt:"inside"}),textfont:m.textfont,insidetextfont:m.insidetextfont,title:{text:m.title.text,font:m.title.font,position:o({},m.title.position,{values:["top left","top center","top right"],dflt:"top center"}),editType:"plot"},domain:T({name:"funnelarea",trace:!0,editType:"calc"}),aspectratio:{valType:"number",min:0,dflt:1,editType:"plot"},baseratio:{valType:"number",min:0,max:1,dflt:.333,editType:"plot"}}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900}],784:[function(_,oe,ae){"use strict";var m=_("../../plots/plots");ae.name="funnelarea",ae.plot=function(x,T,b,e){m.plotBasePlot(ae.name,x,T,b,e)},ae.clean=function(x,T,b,e){m.cleanBasePlot(ae.name,x,T,b,e)}},{"../../plots/plots":619}],785:[function(_,oe,ae){"use strict";var m=_("../pie/calc");oe.exports={calc:function(x,T){return m.calc(x,T)},crossTraceCalc:function(x){m.crossTraceCalc(x,{type:"funnelarea"})}}},{"../pie/calc":902}],786:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./attributes"),T=_("../../plots/domain").defaults,b=_("../bar/defaults").handleText,e=_("../pie/defaults").handleLabelsAndValues;oe.exports=function(o,a,l,i){function d(w,y){return m.coerce(o,a,x,w,y)}var u=d("labels"),s=d("values"),c=e(u,s),h=c.len;if(a._hasLabels=c.hasLabels,a._hasValues=c.hasValues,!a._hasLabels&&a._hasValues&&(d("label0"),d("dlabel")),h){a._length=h,d("marker.line.width")&&d("marker.line.color",i.paper_bgcolor),d("marker.colors"),d("scalegroup");var p,v=d("text"),g=d("texttemplate");if(g||(p=d("textinfo",Array.isArray(v)?"text+percent":"percent")),d("hovertext"),d("hovertemplate"),g||p&&"none"!==p){var f=d("textposition");b(o,a,i,d,f,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1})}T(a,i,d),d("title.text")&&(d("title.position"),m.coerceFont(d,"title.font",i.font)),d("aspectratio"),d("baseratio")}else a.visible=!1}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"../pie/defaults":903,"./attributes":783}],787:[function(_,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"funnelarea",basePlotModule:_("./base_plot"),categories:["pie-like","funnelarea","showLegend"],attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults"),supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc").calc,crossTraceCalc:_("./calc").crossTraceCalc,plot:_("./plot"),style:_("./style"),styleOne:_("../pie/style_one"),meta:{}}},{"../pie/style_one":911,"./attributes":783,"./base_plot":784,"./calc":785,"./defaults":786,"./layout_attributes":788,"./layout_defaults":789,"./plot":790,"./style":791}],788:[function(_,oe,ae){"use strict";var m=_("../pie/layout_attributes").hiddenlabels;oe.exports={hiddenlabels:m,funnelareacolorway:{valType:"colorlist",editType:"calc"},extendfunnelareacolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{"../pie/layout_attributes":907}],789:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./layout_attributes");oe.exports=function(T,b){function e(o,a){return m.coerce(T,b,x,o,a)}e("hiddenlabels"),e("funnelareacolorway",b.colorway),e("extendfunnelareacolors")}},{"../../lib":503,"./layout_attributes":788}],790:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../components/drawing"),T=_("../../lib"),b=T.strScale,e=T.strTranslate,o=_("../../lib/svg_text_utils"),a=_("../bar/plot").toMoveInsideBar,l=_("../bar/uniform_text"),i=l.recordMinTextSize,d=l.clearMinTextSize,u=_("../pie/helpers"),s=_("../pie/plot"),c=s.attachFxHandlers,h=s.determineInsideTextFont,p=s.layoutAreas,v=s.prerenderTitles,g=s.positionTitleOutside,f=s.formatSliceLabel;function w(y,M){return"l"+(M[0]-y[0])+","+(M[1]-y[1])}oe.exports=function(y,M){var A=y._fullLayout;d("funnelarea",A),v(M,y),p(M,A._size),T.makeTraceGroups(A._funnelarealayer,M,"trace").each(function(k){var C=m.select(this),P=k[0],D=P.trace;(function(F){if(F.length){var R=F[0],L=R.trace,I=L.aspectratio,B=L.baseratio;B>.999&&(B=.999);var V,Q,se,Z=Math.pow(B,2),Y=R.vTotal,ee=Y,J=Y*Z/(1-Z)/Y,j=[];for(j.push($()),Q=F.length-1;Q>-1;Q--)(se=F[Q]).hidden||(J+=se.v/ee,j.push($()));var W=1/0,ie=-1/0;for(Q=0;Q<j.length;Q++)V=j[Q],W=Math.min(W,V[1]),ie=Math.max(ie,V[1]);for(Q=0;Q<j.length;Q++)j[Q][1]-=(ie+W)/2;var te=R.r,ne=(ie-W)/2,le=te/j[j.length-1][0],ue=te/ne*I;for(R.r=ue*ne,Q=0;Q<j.length;Q++)j[Q][0]*=le,j[Q][1]*=ue;var Ce,De,de=[-(V=j[0])[0],V[1]],he=[V[0],V[1]],be=0;for(Q=F.length-1;Q>-1;Q--)if(!(se=F[Q]).hidden){var ge=j[be+=1][0],we=j[be][1];se.TL=[-ge,we],se.TR=[ge,we],se.BL=de,se.BR=he,se.pxmid=[.5*((Ce=se.TR)[0]+(De=se.BR)[0]),.5*(Ce[1]+De[1])],de=se.TL,he=se.TR}}function $(){var Se,Fe={x:Se=Math.sqrt(J),y:-Se};return[Fe.x,Fe.y]}})(k),C.each(function(){var F=m.select(this).selectAll("g.slice").data(k);F.enter().append("g").classed("slice",!0),F.exit().remove(),F.each(function(L,I){if(L.hidden)m.select(this).selectAll("path,g").remove();else{L.pointNumber=L.i,L.curveNumber=D.index;var B=P.cx,V=P.cy,Z=m.select(this),Y=Z.selectAll("path.surface").data([L]);Y.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),Z.call(c,y,k);var ee="M"+(B+L.TR[0])+","+(V+L.TR[1])+w(L.TR,L.BR)+w(L.BR,L.BL)+w(L.BL,L.TL)+"Z";Y.attr("d",ee),f(y,L,P);var J=u.castOption(D.textposition,L.pts),$=Z.selectAll("g.slicetext").data(L.text&&"none"!==J?[0]:[]);$.enter().append("g").classed("slicetext",!0),$.exit().remove(),$.each(function(){var Q=T.ensureSingle(m.select(this),"text","",function(ne){ne.attr("data-notex",1)}),se=T.ensureUniformFontSize(y,h(D,L,A.font));Q.text(L.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(x.font,se).call(o.convertToTspans,y);var j,G,W,ie=x.bBox(Q.node()),q=Math.min(L.BL[1],L.BR[1])+V,te=Math.max(L.TL[1],L.TR[1])+V;G=Math.max(L.TL[0],L.BL[0])+B,W=Math.min(L.TR[0],L.BR[0])+B,(j=a(G,W,q,te,ie,{isHorizontal:!0,constrained:!0,angle:0,anchor:"middle"})).fontSize=se.size,i(D.type,j,A),k[I].transform=j,Q.attr("transform",T.getTextTransform(j))})}});var R=m.select(this).selectAll("g.titletext").data(D.title.text?[0]:[]);R.enter().append("g").classed("titletext",!0),R.exit().remove(),R.each(function(){var L=T.ensureSingle(m.select(this),"text","",function(V){V.attr("data-notex",1)}),I=D.title.text;D._meta&&(I=T.templateString(I,D._meta)),L.text(I).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(x.font,D.title.font).call(o.convertToTspans,y);var B=g(P,A._size);L.attr("transform",e(B.x,B.y)+b(Math.min(1,B.scale))+e(B.tx,B.ty))})})})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/plot":659,"../bar/uniform_text":664,"../pie/helpers":905,"../pie/plot":909,"@plotly/d3":58}],791:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../pie/style_one"),T=_("../bar/uniform_text").resizeText;oe.exports=function(b){var e=b._fullLayout._funnelarealayer.selectAll(".trace");T(b,e,"funnelarea"),e.each(function(o){var a=o[0].trace,l=m.select(this);l.style({opacity:a.opacity}),l.selectAll("path.surface").each(function(i){m.select(this).call(x,i,a)})})}},{"../bar/uniform_text":664,"../pie/style_one":911,"@plotly/d3":58}],792:[function(_,oe,ae){"use strict";var m=_("../scatter/attributes"),x=_("../../plots/attributes"),T=_("../../plots/font_attributes"),b=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=_("../../plots/template_attributes").hovertemplateAttrs,o=_("../../plots/template_attributes").texttemplateAttrs,a=_("../../components/colorscale/attributes"),l=_("../../lib/extend").extendFlat;oe.exports=l({z:{valType:"data_array",editType:"calc"},x:l({},m.x,{impliedEdits:{xtype:"array"}}),x0:l({},m.x0,{impliedEdits:{xtype:"scaled"}}),dx:l({},m.dx,{impliedEdits:{xtype:"scaled"}}),y:l({},m.y,{impliedEdits:{ytype:"array"}}),y0:l({},m.y0,{impliedEdits:{ytype:"scaled"}}),dy:l({},m.dy,{impliedEdits:{ytype:"scaled"}}),xperiod:l({},m.xperiod,{impliedEdits:{xtype:"scaled"}}),yperiod:l({},m.yperiod,{impliedEdits:{ytype:"scaled"}}),xperiod0:l({},m.xperiod0,{impliedEdits:{xtype:"scaled"}}),yperiod0:l({},m.yperiod0,{impliedEdits:{ytype:"scaled"}}),xperiodalignment:l({},m.xperiodalignment,{impliedEdits:{xtype:"scaled"}}),yperiodalignment:l({},m.yperiodalignment,{impliedEdits:{ytype:"scaled"}}),text:{valType:"data_array",editType:"calc"},hovertext:{valType:"data_array",editType:"calc"},transpose:{valType:"boolean",dflt:!1,editType:"calc"},xtype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},ytype:{valType:"enumerated",values:["array","scaled"],editType:"calc+clearAxisTypes"},zsmooth:{valType:"enumerated",values:["fast","best",!1],dflt:!1,editType:"calc"},hoverongaps:{valType:"boolean",dflt:!0,editType:"none"},connectgaps:{valType:"boolean",editType:"calc"},xgap:{valType:"number",dflt:0,min:0,editType:"plot"},ygap:{valType:"number",dflt:0,min:0,editType:"plot"},xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z",1),hovertemplate:e(),texttemplate:o({arrayOk:!1,editType:"plot"},{keys:["x","y","z","text"]}),textfont:T({editType:"plot",autoSize:!0,autoColor:!0,colorEditType:"style"}),showlegend:l({},x.showlegend,{dflt:!1})},{transforms:void 0},a("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../scatter/attributes":926}],793:[function(_,oe,ae){"use strict";var m=_("../../registry"),x=_("../../lib"),T=_("../../plots/cartesian/axes"),b=_("../../plots/cartesian/align_period"),e=_("../histogram2d/calc"),o=_("../../components/colorscale/calc"),a=_("./convert_column_xyz"),l=_("./clean_2d_array"),i=_("./interp2d"),d=_("./find_empties"),u=_("./make_bound_array"),s=_("../../constants/numerical").BADNUM;function c(h){for(var p=[],v=h.length,g=0;g<v;g++){var f=h[g];f!==s&&p.push(f)}return p}oe.exports=function(h,p){var v,g,f,w,y,M,A,k,C,P,D,F=T.getFromId(h,p.xaxis||"x"),R=T.getFromId(h,p.yaxis||"y"),L=m.traceIs(p,"contour"),I=m.traceIs(p,"histogram"),B=m.traceIs(p,"gl2d"),V=L?"best":p.zsmooth;if(F._minDtick=0,R._minDtick=0,I)w=(D=e(h,p)).orig_x,v=D.x,g=D.x0,f=D.dx,k=D.orig_y,y=D.y,M=D.y0,A=D.dy,C=D.z;else{var Z=p.z;x.isArray1D(Z)?(a(p,F,R,"x","y",["z"]),v=p._x,y=p._y,Z=p._z):(w=p.x?F.makeCalcdata(p,"x"):[],k=p.y?R.makeCalcdata(p,"y"):[],v=b(p,F,"x",w).vals,y=b(p,R,"y",k).vals,p._x=v,p._y=y),g=p.x0,f=p.dx,M=p.y0,A=p.dy,C=l(Z,p,F,R)}function Y(ne){V=p._input.zsmooth=p.zsmooth=!1,x.warn('cannot use zsmooth: "fast": '+ne)}if((F.rangebreaks||R.rangebreaks)&&(C=function(ne,le,ue){for(var de=[],he=-1,be=0;be<ue.length;be++)if(le[be]!==s){de[++he]=[];for(var ge=0;ge<ue[be].length;ge++)ne[ge]!==s&&de[he].push(ue[be][ge])}return de}(v,y,C),I||(v=c(v),y=c(y),p._x=v,p._y=y)),I||!L&&!p.connectgaps||(p._emptypoints=d(C),i(C,p._emptypoints)),"fast"===V)if("log"===F.type||"log"===R.type)Y("log axis found");else if(!I){if(v.length){var ee=(v[v.length-1]-v[0])/(v.length-1),J=Math.abs(ee/100);for(P=0;P<v.length-1;P++)if(Math.abs(v[P+1]-v[P]-ee)>J){Y("x scale is not linear");break}}if(y.length&&"fast"===V){var $=(y[y.length-1]-y[0])/(y.length-1),Q=Math.abs($/100);for(P=0;P<y.length-1;P++)if(Math.abs(y[P+1]-y[P]-$)>Q){Y("y scale is not linear");break}}}var se=x.maxRowLength(C),j="scaled"===p.xtype?"":v,G=u(p,j,g,f,se,F),W="scaled"===p.ytype?"":y,ie=u(p,W,M,A,C.length,R);B||(p._extremes[F._id]=T.findExtremes(F,G),p._extremes[R._id]=T.findExtremes(R,ie));var q={x:G,y:ie,z:C,text:p._text||p.text,hovertext:p._hovertext||p.hovertext};if(p.xperiodalignment&&w&&(q.orig_x=w),p.yperiodalignment&&k&&(q.orig_y=k),j&&j.length===G.length-1&&(q.xCenter=j),W&&W.length===ie.length-1&&(q.yCenter=W),I&&(q.xRanges=D.xRanges,q.yRanges=D.yRanges,q.pts=D.pts),L||o(h,p,{vals:C,cLetter:"z"}),L&&p.contours&&"heatmap"===p.contours.coloring){var te={type:"contour"===p.type?"heatmap":"histogram2d",xcalendar:p.xcalendar,ycalendar:p.ycalendar};q.xfill=u(te,j,g,f,se,F),q.yfill=u(te,W,M,A,C.length,R)}return[q]}},{"../../components/colorscale/calc":374,"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../../registry":638,"../histogram2d/calc":826,"./clean_2d_array":794,"./convert_column_xyz":796,"./find_empties":798,"./interp2d":801,"./make_bound_array":803}],794:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../lib"),T=_("../../constants/numerical").BADNUM;oe.exports=function(b,e,o,a){var l,i,d,u,s,c;function h(y){if(m(y))return+y}if(e&&e.transpose){for(l=0,s=0;s<b.length;s++)l=Math.max(l,b[s].length);if(0===l)return!1;d=function(y){return y.length},u=function(y,M,A){return(y[A]||[])[M]}}else l=b.length,d=function(y,M){return y[M].length},u=function(y,M,A){return(y[M]||[])[A]};function v(y){if(e&&"carpet"!==e.type&&"contourcarpet"!==e.type&&y&&"category"===y.type&&e["_"+y._id.charAt(0)].length){var M=y._id.charAt(0),A={},k=e["_"+M+"CategoryMap"]||e[M];for(s=0;s<k.length;s++)A[k[s]]=s;return function(C){var P=A[y._categories[C]];return P+1?P:T}}return x.identity}var g=v(o),f=v(a);a&&"category"===a.type&&(l=a._categories.length);var y,M,A,w=new Array(l);for(s=0;s<l;s++)for(i=o&&"category"===o.type?o._categories.length:d(b,s),w[s]=new Array(i),c=0;c<i;c++)w[s][c]=h((y=b,M=f(s),A=g(c),M===T||A===T?T:u(y,M,A)));return w}},{"../../constants/numerical":479,"../../lib":503,"fast-isnumeric":190}],795:[function(_,oe,ae){"use strict";oe.exports={min:"zmin",max:"zmax"}},{}],796:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../constants/numerical").BADNUM,T=_("../../plots/cartesian/align_period");oe.exports=function(b,e,o,a,l,i){var d=b._length,u=e.makeCalcdata(b,a),s=o.makeCalcdata(b,l);u=T(b,e,a,u).vals,s=T(b,o,l,s).vals;var c,h,p,v,g=b.text,f=void 0!==g&&m.isArray1D(g),w=b.hovertext,y=void 0!==w&&m.isArray1D(w),M=m.distinctVals(u),A=M.vals,k=m.distinctVals(s),C=k.vals,P=[],D=C.length,F=A.length;for(c=0;c<i.length;c++)P[c]=m.init2dArray(D,F);f&&(p=m.init2dArray(D,F)),y&&(v=m.init2dArray(D,F));var R=m.init2dArray(D,F);for(c=0;c<d;c++)if(u[c]!==x&&s[c]!==x){var L=m.findBin(u[c]+M.minDiff/2,A),I=m.findBin(s[c]+k.minDiff/2,C);for(h=0;h<i.length;h++)P[h][I][L]=b[i[h]][c],R[I][L]=c;f&&(p[I][L]=g[c]),y&&(v[I][L]=w[c])}for(b["_"+a]=A,b["_"+l]=C,h=0;h<i.length;h++)b["_"+i[h]]=P[h];f&&(b._text=p),y&&(b._hovertext=v),e&&"category"===e.type&&(b["_"+a+"CategoryMap"]=A.map(function(V){return e._categories[V]})),o&&"category"===o.type&&(b["_"+l+"CategoryMap"]=C.map(function(V){return o._categories[V]})),b._after2before=R}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551}],797:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./xyz_defaults"),T=_("./label_defaults"),b=_("../scatter/period_defaults"),e=_("./style_defaults"),o=_("../../components/colorscale/defaults"),a=_("./attributes");oe.exports=function(l,i,d,u){function s(c,h){return m.coerce(l,i,a,c,h)}x(l,i,s,u)?(b(l,i,u,s),s("xhoverformat"),s("yhoverformat"),s("text"),s("hovertext"),s("hovertemplate"),T(s,u),e(l,i,s,u),s("hoverongaps"),s("connectgaps",m.isArray1D(i.z)&&!1!==i.zsmooth),o(l,i,u,s,{prefix:"",cLetter:"z"})):i.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../scatter/period_defaults":946,"./attributes":792,"./label_defaults":802,"./style_defaults":806,"./xyz_defaults":807}],798:[function(_,oe,ae){"use strict";var m=_("../../lib").maxRowLength;oe.exports=function(x){var T,b,e,o,a,l,i,d,u=[],s={},c=[],h=x[0],p=[],v=[0,0,0],g=m(x);for(b=0;b<x.length;b++)for(T=p,p=h,h=x[b+1]||[],e=0;e<g;e++)void 0===p[e]&&((l=(void 0!==p[e-1]?1:0)+(void 0!==p[e+1]?1:0)+(void 0!==T[e]?1:0)+(void 0!==h[e]?1:0))?(0===b&&l++,0===e&&l++,b===x.length-1&&l++,e===p.length-1&&l++,l<4&&(s[[b,e]]=[b,e,l]),u.push([b,e,l])):c.push([b,e]));for(;c.length;){for(i={},d=!1,a=c.length-1;a>=0;a--)(l=((s[[(b=(o=c[a])[0])-1,e=o[1]]]||v)[2]+(s[[b+1,e]]||v)[2]+(s[[b,e-1]]||v)[2]+(s[[b,e+1]]||v)[2])/20)&&(i[o]=[b,e,l],c.splice(a,1),d=!0);if(!d)throw"findEmpties iterated with no new neighbors";for(o in i)s[o]=i[o],u.push(i[o])}return u.sort(function(f,w){return w[2]-f[2]})}},{"../../lib":503}],799:[function(_,oe,ae){"use strict";var m=_("../../components/fx"),x=_("../../lib"),T=_("../../plots/cartesian/axes"),b=_("../../components/colorscale").extractOpts;oe.exports=function(e,o,a,l,i){i||(i={});var d,u,s,c,h=i.isContour,p=e.cd[0],v=p.trace,g=e.xa,f=e.ya,w=p.x,y=p.y,M=p.z,A=p.xCenter,k=p.yCenter,C=p.zmask,P=v.zhoverformat,D=w,F=y;if(!1!==e.index){try{s=Math.round(e.index[1]),c=Math.round(e.index[0])}catch(j){return void x.error("Error hovering on heatmap, pointNumber must be [row,col], found:",e.index)}if(s<0||s>=M[0].length||c<0||c>M.length)return}else{if(m.inbox(o-w[0],o-w[w.length-1],0)>0||m.inbox(a-y[0],a-y[y.length-1],0)>0)return;if(h){var R;for(D=[2*w[0]-w[1]],R=1;R<w.length;R++)D.push((w[R]+w[R-1])/2);for(D.push([2*w[w.length-1]-w[w.length-2]]),F=[2*y[0]-y[1]],R=1;R<y.length;R++)F.push((y[R]+y[R-1])/2);F.push([2*y[y.length-1]-y[y.length-2]])}s=Math.max(0,Math.min(D.length-2,x.findBin(o,D))),c=Math.max(0,Math.min(F.length-2,x.findBin(a,F)))}var L,I,B=g.c2p(w[s]),V=g.c2p(w[s+1]),Z=f.c2p(y[c]),Y=f.c2p(y[c+1]);h?(V=B,d=(L=p.orig_x||w)[s],Y=Z,u=(I=p.orig_y||y)[c]):(L=p.orig_x||A||w,I=p.orig_y||k||y,d=A?L[s]:(L[s]+L[s+1])/2,u=k?I[c]:(I[c]+I[c+1])/2,g&&"category"===g.type&&(d=w[s]),f&&"category"===f.type&&(u=y[c]),v.zsmooth&&(B=V=g.c2p(d),Z=Y=f.c2p(u)));var ee=M[c][s];if(C&&!C[c][s]&&(ee=void 0),void 0!==ee||v.hoverongaps){var J;Array.isArray(p.hovertext)&&Array.isArray(p.hovertext[c])?J=p.hovertext[c][s]:Array.isArray(p.text)&&Array.isArray(p.text[c])&&(J=p.text[c][s]);var $=b(v),se=T.tickText({type:"linear",range:[$.min,$.max],hoverformat:P,_separators:g._separators,_numFormat:g._numFormat},ee,"hover").text;return[x.extendFlat(e,{index:v._after2before?v._after2before[c][s]:[c,s],distance:e.maxHoverDistance,spikeDistance:e.maxSpikeDistance,x0:B,x1:V,y0:Z,y1:Y,xLabelVal:d,yLabelVal:u,zLabelVal:ee,zLabel:se,text:J})]}}},{"../../components/colorscale":378,"../../components/fx":406,"../../lib":503,"../../plots/cartesian/axes":554}],800:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("./plot"),colorbar:_("./colorbar"),style:_("./style"),hoverPoints:_("./hover"),moduleType:"trace",name:"heatmap",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","2dMap","showLegend"],meta:{}}},{"../../plots/cartesian":568,"./attributes":792,"./calc":793,"./colorbar":795,"./defaults":797,"./hover":799,"./plot":804,"./style":805}],801:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=[[-1,0],[1,0],[0,-1],[0,1]];function T(e){return.5-.25*Math.min(1,.5*e)}function b(e,o,a){var l,i,d,u,s,c,h,p,v,g,f,w,y,M=0;for(u=0;u<o.length;u++){for(f=e[i=(l=o[u])[0]][d=l[1]],g=0,v=0,s=0;s<4;s++)(h=e[i+(c=x[s])[0]])&&void 0!==(p=h[d+c[1]])&&(0===g?w=y=p:(w=Math.min(w,p),y=Math.max(y,p)),v++,g+=p);if(0===v)throw"iterateInterp2d order is wrong: no defined neighbors";e[i][d]=g/v,void 0===f?v<4&&(M=1):(e[i][d]=(1+a)*e[i][d]-a*f,y>w&&(M=Math.max(M,Math.abs(e[i][d]-f)/(y-w))))}return M}oe.exports=function(e,o){var a,l=1;for(b(e,o),a=0;a<o.length&&!(o[a][2]<4);a++);for(o=o.slice(a),a=0;a<100&&l>.01;a++)l=b(e,o,T(l));return l>.01&&m.log("interp2d didn't converge quickly",l),e}},{"../../lib":503}],802:[function(_,oe,ae){"use strict";var m=_("../../lib");oe.exports=function(x,T){x("texttemplate");var b=m.extendFlat({},T.font,{color:"auto",size:"auto"});m.coerceFont(x,"textfont",b)}},{"../../lib":503}],803:[function(_,oe,ae){"use strict";var m=_("../../registry"),x=_("../../lib").isArrayOrTypedArray;oe.exports=function(T,b,e,o,a,l){var i,d,u,s=[],c=m.traceIs(T,"contour"),h=m.traceIs(T,"histogram"),p=m.traceIs(T,"gl2d");if(x(b)&&b.length>1&&!h&&"category"!==l.type){var v=b.length;if(!(v<=a))return b.slice(0,c?a:a+1);if(c||p)s=b.slice(0,a);else if(1===a)s=[b[0]-.5,b[0]+.5];else{for(s=[1.5*b[0]-.5*b[1]],u=1;u<v;u++)s.push(.5*(b[u-1]+b[u]));s.push(1.5*b[v-1]-.5*b[v-2])}if(v<a){var g=s[s.length-1],f=g-s[s.length-2];for(u=v;u<a;u++)s.push(g+=f)}}else{var w=T[l._id.charAt(0)+"calendar"];for(i=h?l.r2c(e,0,w):x(b)&&1===b.length?b[0]:void 0===e?0:("log"===l.type?l.d2c:l.r2c)(e,0,w),d=o||1,u=c||p?0:-.5;u<a;u++)s.push(i+d*u)}return s}},{"../../lib":503,"../../registry":638}],804:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("tinycolor2"),T=_("../../registry"),b=_("../../components/drawing"),e=_("../../plots/cartesian/axes"),o=_("../../lib"),a=_("../../lib/svg_text_utils"),l=_("../scatter/format_labels"),i=_("../../components/color"),d=_("../../components/colorscale").extractOpts,u=_("../../components/colorscale").makeColorScaleFuncFromTrace,s=_("../../constants/xmlns_namespaces"),c=_("../../constants/alignment").LINE_SPACING;function h(w){return w.selectAll("g.heatmap-label")}function p(w){h(w).remove()}function v(w,y){var M=y.length-2,A=o.constrain(o.findBin(w,y),0,M),k=y[A],P=o.constrain(A+(w-k)/(y[A+1]-k)-.5,0,M),D=Math.round(P),F=Math.abs(P-D);return P&&P!==M&&F?{bin0:D,frac:F,bin1:Math.round(D+F/(P-D))}:{bin0:D,bin1:D,frac:0}}function g(w,y){var M=y.length-1,A=o.constrain(o.findBin(w,y),0,M),k=y[A],C=(w-k)/(y[A+1]-k)||0;return C<=0?{bin0:A,bin1:A,frac:0}:C<.5?{bin0:A,bin1:A+1,frac:C}:{bin0:A+1,bin1:A,frac:1-C}}function f(w,y,M){w[y]=M[0],w[y+1]=M[1],w[y+2]=M[2],w[y+3]=Math.round(255*M[3])}oe.exports=function(w,y,M,A){var k=y.xaxis,C=y.yaxis;o.makeTraceGroups(A,M,"hm").each(function(P){var D,F,R,L,I,B,V,Z,Y=m.select(this),ee=P[0],J=ee.trace,$=J.xgap||0,Q=J.ygap||0,se=ee.z,j=ee.x,G=ee.y,W=ee.xCenter,ie=ee.yCenter,q=T.traceIs(J,"contour"),te=q?"best":J.zsmooth,ne=se.length,le=o.maxRowLength(se),ue=!1,de=!1;for(B=0;void 0===D&&B<j.length-1;)D=k.c2p(j[B]),B++;for(B=j.length-1;void 0===F&&B>0;)F=k.c2p(j[B]),B--;for(F<D&&(R=F,F=D,D=R,ue=!0),B=0;void 0===L&&B<G.length-1;)L=C.c2p(G[B]),B++;for(B=G.length-1;void 0===I&&B>0;)I=C.c2p(G[B]),B--;if(I<L&&(R=L,L=I,I=R,de=!0),q&&(W=j,ie=G,j=ee.xfill,G=ee.yfill),"fast"!==te){var he="best"===te?0:.5;D=Math.max(-he*k._length,D),F=Math.min((1+he)*k._length,F),L=Math.max(-he*C._length,L),I=Math.min((1+he)*C._length,I)}var be,ge,we=Math.round(F-D),Ce=Math.round(I-L);if(we<=0||Ce<=0)return Y.selectAll("image").data([]).exit().remove(),void p(Y);"fast"===te?(be=le,ge=ne):(be=we,ge=Ce);var De=document.createElement("canvas");De.width=be,De.height=ge;var Se,Fe,ve=De.getContext("2d"),Te=u(J,{noNumericCheck:!0,returnArray:!0});"fast"===te?(Se=ue?function(Fn){return le-1-Fn}:o.identity,Fe=de?function(Fn){return ne-1-Fn}:o.identity):(Se=function(Fn){return o.constrain(Math.round(k.c2p(j[Fn])-D),0,we)},Fe=function(Fn){return o.constrain(Math.round(C.c2p(G[Fn])-L),0,Ce)});var Le,Ee,Pe,je,Ge=Fe(0),Ke=[Ge,Ge],lt=ue?0:1,Ue=de?0:1,$e=0,et=0,tt=0,ct=0;function xt(Fn,Rn){if(void 0!==Fn){var hr=Te(Fn);return hr[0]=Math.round(hr[0]),hr[1]=Math.round(hr[1]),hr[2]=Math.round(hr[2]),$e+=Rn,et+=hr[0]*Rn,tt+=hr[1]*Rn,ct+=hr[2]*Rn,hr}return[0,0,0,0]}function Ct(Fn,Rn,hr,ri){var ir=Fn[hr.bin0];if(void 0===ir)return xt(void 0,1);var Mr=Fn[hr.bin1],wr=Rn[hr.bin0],ii=Rn[hr.bin1];return xt(ir+hr.frac*(Mr-ir||0)+ri.frac*((wr-ir||0)+hr.frac*(void 0===Mr?void 0===ii?0:void 0===wr?2*(ii-ir):2*(2*ii-wr-ir)/3:void 0===ii?void 0===wr?0:2*(2*ir-Mr-wr)/3:void 0===wr?2*(2*ii-Mr-ir)/3:ii+ir-Mr-wr)))}if(te){var Ht,zt=0;try{Ht=new Uint8Array(we*Ce*4)}catch(Fn){Ht=new Array(we*Ce*4)}if("best"===te){var ht,ut,Ot,tn=W||j,un=ie||G,Ze=new Array(tn.length),Qe=new Array(un.length),qe=new Array(we),it=W?g:v,Ie=ie?g:v;for(B=0;B<tn.length;B++)Ze[B]=Math.round(k.c2p(tn[B])-D);for(B=0;B<un.length;B++)Qe[B]=Math.round(C.c2p(un[B])-L);for(B=0;B<we;B++)qe[B]=it(B,Ze);for(V=0;V<Ce;V++)for(ut=se[(ht=Ie(V,Qe)).bin0],Ot=se[ht.bin1],B=0;B<we;B++,zt+=4)f(Ht,zt,je=Ct(ut,Ot,qe[B],ht))}else for(V=0;V<ne;V++)for(Pe=se[V],Ke=Fe(V),B=0;B<we;B++)je=xt(Pe[B],1),f(Ht,zt=4*(Ke*we+Se(B)),je);var ze=ve.createImageData(we,Ce);try{ze.data.set(Ht)}catch(Fn){var Ve=ze.data,Be=Ve.length;for(V=0;V<Be;V++)Ve[V]=Ht[V]}ve.putImageData(ze,0,0)}else{var at=Math.floor($/2),gt=Math.floor(Q/2);for(V=0;V<ne;V++)if(Pe=se[V],Ke.reverse(),Ke[Ue]=Fe(V+1),Ke[0]!==Ke[1]&&void 0!==Ke[0]&&void 0!==Ke[1])for(Le=[Ee=Se(0),Ee],B=0;B<le;B++)Le.reverse(),Le[lt]=Se(B+1),Le[0]!==Le[1]&&void 0!==Le[0]&&void 0!==Le[1]&&(je=xt(Pe[B],(Le[1]-Le[0])*(Ke[1]-Ke[0])),ve.fillStyle="rgba("+je.join(",")+")",ve.fillRect(Le[0]+at,Ke[0]+gt,Le[1]-Le[0]-$,Ke[1]-Ke[0]-Q))}et=Math.round(et/$e),tt=Math.round(tt/$e),ct=Math.round(ct/$e);var wt=x("rgb("+et+","+tt+","+ct+")");w._hmpixcount=(w._hmpixcount||0)+$e,w._hmlumcount=(w._hmlumcount||0)+$e*wt.getLuminance();var _t=Y.selectAll("image").data(P);_t.enter().append("svg:image").attr({xmlns:s.svg,preserveAspectRatio:"none"}),_t.attr({height:Ce,width:we,x:D,y:L,"xlink:href":De.toDataURL("image/png")}),p(Y);var Rt=J.texttemplate;if(Rt){var yt=d(J),Vt={type:"linear",range:[yt.min,yt.max],_separators:k._separators,_numFormat:k._numFormat},Nt="histogram2dcontour"===J.type,rt="contour"===J.type,Tt=rt?ne-1:ne,Ut=rt?1:0,Wt=rt?le-1:le,sn=[];for(B=rt?1:0;B<Tt;B++){var He;if(rt)He=ee.y[B];else if(Nt){if(0===B||B===ne-1)continue;He=ee.y[B]}else if(ee.yCenter)He=ee.yCenter[B];else{if(B+1===ne&&void 0===ee.y[B+1])continue;He=(ee.y[B]+ee.y[B+1])/2}var vt=Math.round(C.c2p(He));if(!(0>vt||vt>C._length))for(V=Ut;V<Wt;V++){var Lt;if(rt)Lt=ee.x[V];else if(Nt){if(0===V||V===le-1)continue;Lt=ee.x[V]}else if(ee.xCenter)Lt=ee.xCenter[V];else{if(V+1===le&&void 0===ee.x[V+1])continue;Lt=(ee.x[V]+ee.x[V+1])/2}var Gt=Math.round(k.c2p(Lt));if(!(0>Gt||Gt>k._length)){var Kt=l({x:Lt,y:He},J,w._fullLayout);Kt.x=Lt,Kt.y=He;var _n=ee.z[B][V];void 0===_n?(Kt.z="",Kt.zLabel=""):(Kt.z=_n,Kt.zLabel=e.tickText(Vt,_n,"hover").text);var en=ee.text&&ee.text[B]&&ee.text[B][V];void 0!==en&&!1!==en||(en=""),Kt.text=en;var on=o.texttemplateString(Rt,Kt,w._fullLayout._d3locale,Kt,J._meta||{});if(on){var wn=on.split("<br>"),On=wn.length,Dn=0;for(Z=0;Z<On;Z++)Dn=Math.max(Dn,wn[Z].length);sn.push({l:On,c:Dn,t:on,x:Gt,y:vt,z:_n})}}}}var Tn=J.textfont,pn=Tn.family,En=Tn.size,Un=w._fullLayout.font.size;if(!En||"auto"===En){var In=1/0,sr=1/0,fr=0,rr=0;for(Z=0;Z<sn.length;Z++){var qr=sn[Z];if(fr=Math.max(fr,qr.l),rr=Math.max(rr,qr.c),Z<sn.length-1){var ti=sn[Z+1],Ar=Math.abs(ti.x-qr.x),pr=Math.abs(ti.y-qr.y);Ar&&(In=Math.min(In,Ar)),pr&&(sr=Math.min(sr,pr))}}isFinite(In)&&isFinite(sr)?(In-=$,sr-=Q,In/=rr,sr/=fr,In/=c/2,sr/=c,En=Math.min(Math.floor(In),Math.floor(sr),Un)):En=Un}if(En<=0||!isFinite(En))return;h(Y).data(sn).enter().append("g").classed("heatmap-label",1).append("text").attr("text-anchor","middle").each(function(Fn){var ri,Rn=m.select(this),hr=Tn.color;hr&&"auto"!==hr||(hr=i.contrast("rgba("+Te(Fn.z).join()+")")),Rn.attr("data-notex",1).call(a.positionText,(ri=Fn,ri.x),function(ri){return ri.y-En*(ri.l*c/2-1)}(Fn)).call(b.font,pn,En,hr).text(Fn.t).call(a.convertToTspans,w)})}})}},{"../../components/color":366,"../../components/colorscale":378,"../../components/drawing":388,"../../constants/alignment":471,"../../constants/xmlns_namespaces":480,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../registry":638,"../scatter/format_labels":935,"@plotly/d3":58,tinycolor2:312}],805:[function(_,oe,ae){"use strict";var m=_("@plotly/d3");oe.exports=function(x){m.select(x).selectAll(".hm image").style("opacity",function(T){return T.trace.opacity})}},{"@plotly/d3":58}],806:[function(_,oe,ae){"use strict";oe.exports=function(m,x,T){!1===T("zsmooth")&&(T("xgap"),T("ygap")),T("zhoverformat")}},{}],807:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../lib"),T=_("../../registry");function b(e,o){var a=o(e);return"scaled"===(a?o(e+"type","array"):"scaled")&&(o(e+"0"),o("d"+e)),a}oe.exports=function(e,o,a,l,i,d){var u,s,c=a("z");if(i=i||"x",d=d||"y",void 0===c||!c.length)return 0;if(x.isArray1D(e.z)){u=a(i),s=a(d);var h=x.minRowLength(u),p=x.minRowLength(s);if(0===h||0===p)return 0;o._length=Math.min(h,p,c.length)}else{if(u=b(i,a),s=b(d,a),!function(v){for(var g,f=!0,w=!1,y=!1,M=0;M<v.length;M++){if(!x.isArrayOrTypedArray(g=v[M])){f=!1;break}g.length>0&&(w=!0);for(var A=0;A<g.length;A++)if(m(g[A])){y=!0;break}}return f&&w&&y}(c))return 0;a("transpose"),o._length=null}return"heatmapgl"===e.type||T.getComponentMethod("calendars","handleTraceDefaults")(e,o,[i,d],l),!0}},{"../../lib":503,"../../registry":638,"fast-isnumeric":190}],808:[function(_,oe,ae){"use strict";for(var m=_("../heatmap/attributes"),x=_("../../components/colorscale/attributes"),T=_("../../lib/extend").extendFlat,b=_("../../plot_api/edit_types").overrideAll,e=["z","x","x0","dx","y","y0","dy","text","transpose","xtype","ytype"],o={},a=0;a<e.length;a++){var l=e[a];o[l]=m[l]}o.zsmooth={valType:"enumerated",values:["fast",!1],dflt:"fast",editType:"calc"},T(o,x("",{cLetter:"z",autoColorDflt:!1})),oe.exports=b(o,"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../heatmap/attributes":792}],809:[function(_,oe,ae){"use strict";var m=_("../../../stackgl_modules").gl_heatmap2d,x=_("../../plots/cartesian/axes"),T=_("../../lib/str2rgbarray");function b(o,a){this.scene=o,this.uid=a,this.type="heatmapgl",this.name="",this.hoverinfo="all",this.xData=[],this.yData=[],this.zData=[],this.textLabels=[],this.idToIndex=[],this.bounds=[0,0,0,0],this.options={zsmooth:"fast",z:[],x:[],y:[],shape:[0,0],colorLevels:[0],colorValues:[0,0,0,1]},this.heatmap=m(o.glplot,this.options),this.heatmap._trace=this}var e=b.prototype;e.handlePick=function(o){var a=this.options,l=a.shape,i=o.pointId,d=i%l[0],u=Math.floor(i/l[0]);return{trace:this,dataCoord:o.dataCoord,traceCoord:[a.x[d],a.y[u],a.z[i]],textLabel:this.textLabels[i],name:this.name,pointIndex:[u,d],hoverinfo:this.hoverinfo}},e.update=function(o,a){var l=a[0];this.index=o.index,this.name=o.name,this.hoverinfo=o.hoverinfo;var i=l.z;this.options.z=[].concat.apply([],i),this.options.shape=[i[0].length,i.length],this.options.x=l.x,this.options.y=l.y,this.options.zsmooth=o.zsmooth;var s=function(g){for(var f=g.colorscale,w=g.zmin,y=g.zmax,M=f.length,A=new Array(M),k=new Array(4*M),C=0;C<M;C++){var P=f[C],D=T(P[1]);A[C]=w+P[0]*(y-w);for(var F=0;F<4;F++)k[4*C+F]=D[F]}return{colorLevels:A,colorValues:k}}(o);this.options.colorLevels=s.colorLevels,this.options.colorValues=s.colorValues,this.textLabels=[].concat.apply([],o.text),this.heatmap.update(this.options);var c,h,p=this.scene.xaxis,v=this.scene.yaxis;!1===o.zsmooth&&(c={ppad:l.x[1]-l.x[0]},h={ppad:l.y[1]-l.y[0]}),o._extremes[p._id]=x.findExtremes(p,l.x,c),o._extremes[v._id]=x.findExtremes(v,l.y,h)},e.dispose=function(){this.heatmap.dispose()},oe.exports=function(o,a,l){var i=new b(o,a.uid);return i.update(a,l),i}},{"../../../stackgl_modules":1120,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554}],810:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../heatmap/xyz_defaults"),T=_("../../components/colorscale/defaults"),b=_("./attributes");oe.exports=function(e,o,a,l){function i(d,u){return m.coerce(e,o,b,d,u)}x(e,o,i,l)?(i("text"),i("zsmooth"),T(e,o,l,i,{prefix:"",cLetter:"z"})):o.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/xyz_defaults":807,"./attributes":808}],811:[function(_,oe,ae){"use strict";["*heatmapgl* trace is deprecated!","Please consider switching to the *heatmap* or *image* trace types.","Alternatively you could contribute/sponsor rewriting this trace type","based on cartesian features and using regl framework."].join(" "),oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../heatmap/colorbar"),calc:_("../heatmap/calc"),plot:_("./convert"),moduleType:"trace",name:"heatmapgl",basePlotModule:_("../../plots/gl2d"),categories:["gl","gl2d","2dMap"],meta:{}}},{"../../plots/gl2d":596,"../heatmap/calc":793,"../heatmap/colorbar":795,"./attributes":808,"./convert":809,"./defaults":810}],812:[function(_,oe,ae){"use strict";var m=_("../bar/attributes"),x=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../../plots/template_attributes").texttemplateAttrs,e=_("../../plots/font_attributes"),o=_("./bin_attributes"),a=_("./constants"),l=_("../../lib/extend").extendFlat;oe.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},xhoverformat:x("x"),yhoverformat:x("y"),text:l({},m.text,{}),hovertext:l({},m.hovertext,{}),orientation:m.orientation,histfunc:{valType:"enumerated",values:["count","sum","avg","min","max"],dflt:"count",editType:"calc"},histnorm:{valType:"enumerated",values:["","percent","probability","density","probability density"],dflt:"",editType:"calc"},cumulative:{enabled:{valType:"boolean",dflt:!1,editType:"calc"},direction:{valType:"enumerated",values:["increasing","decreasing"],dflt:"increasing",editType:"calc"},currentbin:{valType:"enumerated",values:["include","exclude","half"],dflt:"include",editType:"calc"},editType:"calc"},nbinsx:{valType:"integer",min:0,dflt:0,editType:"calc"},xbins:o("x",!0),nbinsy:{valType:"integer",min:0,dflt:0,editType:"calc"},ybins:o("y",!0),autobinx:{valType:"boolean",dflt:null,editType:"calc"},autobiny:{valType:"boolean",dflt:null,editType:"calc"},bingroup:{valType:"string",dflt:"",editType:"calc"},hovertemplate:T({},{keys:a.eventDataKeys}),texttemplate:b({arrayOk:!1,editType:"plot"},{keys:["label","value"]}),textposition:l({},m.textposition,{arrayOk:!1}),textfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),outsidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextfont:e({arrayOk:!1,editType:"plot",colorEditType:"style"}),insidetextanchor:m.insidetextanchor,textangle:m.textangle,cliponaxis:m.cliponaxis,constraintext:m.constraintext,marker:m.marker,offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup,selected:m.selected,unselected:m.unselected,_deprecated:{bardir:m._deprecated.bardir}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"../bar/attributes":648,"./bin_attributes":814,"./constants":818}],813:[function(_,oe,ae){"use strict";oe.exports=function(m,x){for(var T=m.length,b=0,e=0;e<T;e++)x[e]?(m[e]/=x[e],b+=m[e]):m[e]=null;return b}},{}],814:[function(_,oe,ae){"use strict";oe.exports=function(m,x){return{start:{valType:"any",editType:"calc"},end:{valType:"any",editType:"calc"},size:{valType:"any",editType:"calc"},editType:"calc"}}},{}],815:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric");oe.exports={count:function(x,T,b){return b[x]++,1},sum:function(x,T,b,e){var o=e[T];return m(o)?(o=Number(o),b[x]+=o,o):0},avg:function(x,T,b,e,o){var a=e[T];return m(a)&&(a=Number(a),b[x]+=a,o[x]++),0},min:function(x,T,b,e){var o=e[T];if(m(o)){if(o=Number(o),!m(b[x]))return b[x]=o,o;if(b[x]>o){var a=o-b[x];return b[x]=o,a}}return 0},max:function(x,T,b,e){var o=e[T];if(m(o)){if(o=Number(o),!m(b[x]))return b[x]=o,o;if(b[x]<o){var a=o-b[x];return b[x]=o,a}}return 0}}},{"fast-isnumeric":190}],816:[function(_,oe,ae){"use strict";var m=_("../../constants/numerical"),x=m.ONEAVGYEAR,T=m.ONEAVGMONTH,b=m.ONEDAY,e=m.ONEHOUR,o=m.ONEMIN,a=m.ONESEC,l=_("../../plots/cartesian/axes").tickIncrement;function i(c,h,p,v){if(c*h<=0)return 1/0;for(var g=Math.abs(h-c),f="date"===p.type,w=d(g,f),y=0;y<10;y++){var M=d(80*w,f);if(w===M||!u(M,c,h,f,p,v))break;w=M}return w}function d(c,h){return h&&c>a?c>b?c>1.1*x?x:c>1.1*T?T:b:c>e?e:c>o?o:a:Math.pow(10,Math.floor(Math.log(c)/Math.LN10))}function u(c,h,p,v,g,f){if(v&&c>b){var w=s(h,g,f),y=s(p,g,f),M=c===x?0:1;return w[M]!==y[M]}return Math.floor(p/c)-Math.floor(h/c)>.1}function s(c,h,p){var v=h.c2d(c,x,p).split("-");return""===v[0]&&(v.unshift(),v[0]="-"+v[0]),v}oe.exports=function(c,h,p,v,g){var f,w,y=-1.1*h,M=-.1*h,A=c-M,k=p[0],C=p[1],P=Math.min(i(k+M,k+A,v,g),i(C+M,C+A,v,g)),D=Math.min(i(k+y,k+M,v,g),i(C+y,C+M,v,g));if(P>D&&D<Math.abs(C-k)/4e3?(f=P,w=!1):(f=Math.min(P,D),w=!0),"date"===v.type&&f>b){var F=f===x?1:6,R=f===x?"M12":"M1";return function(L,I){var B=v.c2d(L,x,g),V=B.indexOf("-",F);V>0&&(B=B.substr(0,V));var Z=v.d2c(B,0,g);if(Z<L){var Y=l(Z,R,!1,g);(Z+Y)/2<L+c&&(Z=Y)}return I&&w?l(Z,R,!0,g):Z}}return function(L,I){var B=f*Math.round(L/f);return B+f/10<L&&B+.9*f<L+c&&(B+=f),I&&w&&(B-=f),B}}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554}],817:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../lib"),T=_("../../registry"),b=_("../../plots/cartesian/axes"),e=_("../bar/arrays_to_calcdata"),o=_("./bin_functions"),a=_("./norm_functions"),l=_("./average"),i=_("./bin_label_vals");function d(u,s,c,h,p){var v,g,f,w,y,M,A,k=h+"bins",C=u._fullLayout,D=C._histogramBinOpts[s["_"+h+"bingroup"]],F="overlay"===C.barmode,R=function(ge){return c.r2c(ge,0,w)},L=function(ge){return c.c2r(ge,0,w)},I="date"===c.type?function(ge){return ge||0===ge?x.cleanDate(ge,null,w):null}:function(ge){return m(ge)?Number(ge):null};function B(ge,we,Ce){we[ge+"Found"]?(we[ge]=I(we[ge]),null===we[ge]&&(we[ge]=Ce[ge])):(M[ge]=we[ge]=Ce[ge],x.nestedProperty(g[0],k+"."+ge).set(Ce[ge]))}if(s["_"+h+"autoBinFinished"])delete s["_"+h+"autoBinFinished"];else{g=D.traces;var V=[],Z=!0,Y=!1,ee=!1;for(v=0;v<g.length;v++)if((f=g[v]).visible){var J=D.dirs[v];y=f["_"+J+"pos0"]=c.makeCalcdata(f,J),V=x.concat(V,y),delete f["_"+h+"autoBinFinished"],!0===s.visible&&(Z?Z=!1:(delete f._autoBin,f["_"+h+"autoBinFinished"]=1),T.traceIs(f,"2dMap")&&(Y=!0),"histogram2dcontour"===f.type&&(ee=!0))}var $=b.autoBin(V,c,D.nbins,Y,w=g[0][h+"calendar"],D.sizeFound&&D.size),Q=g[0]._autoBin={};if(M=Q[D.dirs[0]]={},ee&&(D.size||($.start=L(b.tickIncrement(R($.start),$.size,!0,w))),void 0===D.end&&($.end=L(b.tickIncrement(R($.end),$.size,!1,w)))),F&&!T.traceIs(s,"2dMap")&&0===$._dataSpan&&"category"!==c.type&&"multicategory"!==c.type){if(p)return[$,y,!0];$=function(ge,we,Ce,De,Se){var Fe,ve,Te,Le=ge._fullLayout,Ee=function(Ct,Ht){for(var zt=Ht.xaxis,ht=Ht.yaxis,ut=Ht.orientation,Ot=[],tn=Ct._fullData,un=0;un<tn.length;un++){var Ze=tn[un];"histogram"===Ze.type&&!0===Ze.visible&&Ze.orientation===ut&&Ze.xaxis===zt&&Ze.yaxis===ht&&Ot.push(Ze)}return Ot}(ge,we),Pe=!1,je=1/0,Ge=[we];for(Fe=0;Fe<Ee.length;Fe++)if((ve=Ee[Fe])===we)Pe=!0;else if(Pe){var Ke=d(ge,ve,Ce,De,!0),lt=Ke[0],Ue=Ke[2];ve["_"+De+"autoBinFinished"]=1,ve["_"+De+"pos0"]=Ke[1],Ue?Ge.push(ve):je=Math.min(je,lt.size)}else Te=Le._histogramBinOpts[ve["_"+De+"bingroup"]],je=Math.min(je,Te.size||ve[Se].size);var $e=new Array(Ge.length);for(Fe=0;Fe<Ge.length;Fe++)for(var et=Ge[Fe]["_"+De+"pos0"],tt=0;tt<et.length;tt++)if(void 0!==et[tt]){$e[Fe]=et[tt];break}for(isFinite(je)||(je=x.distinctVals($e).minDiff),Fe=0;Fe<Ge.length;Fe++){var ct=(ve=Ge[Fe])[De+"calendar"],xt={start:Ce.c2r($e[Fe]-je/2,0,ct),end:Ce.c2r($e[Fe]+je/2,0,ct),size:je};ve._input[Se]=ve[Se]=xt,(Te=Le._histogramBinOpts[ve["_"+De+"bingroup"]])&&x.extendFlat(Te,xt)}return we[Se]}(u,s,c,h,k)}(A=f.cumulative||{}).enabled&&"include"!==A.currentbin&&("decreasing"===A.direction?$.start=L(b.tickIncrement(R($.start),$.size,!0,w)):$.end=L(b.tickIncrement(R($.end),$.size,!1,w))),D.size=$.size,D.sizeFound||(M.size=$.size,x.nestedProperty(g[0],k+".size").set($.size)),B("start",D,$),B("end",D,$)}y=s["_"+h+"pos0"],delete s["_"+h+"pos0"];var se=s._input[k]||{},j=x.extendFlat({},D),G=D.start,W=c.r2l(se.start),ie=void 0!==W;if((D.startFound||ie)&&W!==c.r2l(G)){var q=ie?W:x.aggNums(Math.min,null,y),te={type:"category"===c.type||"multicategory"===c.type?"linear":c.type,r2l:c.r2l,dtick:D.size,tick0:G,calendar:w,range:[q,b.tickIncrement(q,D.size,!1,w)].map(c.l2r)},ne=b.tickFirst(te);ne>c.r2l(q)&&(ne=b.tickIncrement(ne,D.size,!0,w)),j.start=c.l2r(ne),ie||x.nestedProperty(s,k+".start").set(j.start)}var le=D.end,ue=c.r2l(se.end),de=void 0!==ue;if((D.endFound||de)&&ue!==c.r2l(le)){var he=de?ue:x.aggNums(Math.max,null,y);j.end=c.l2r(he),de||x.nestedProperty(s,k+".start").set(j.end)}var be="autobin"+h;return!1===s._input[be]&&(s._input[k]=x.extendFlat({},s[k]||{}),delete s._input[be],delete s[be]),[j,y]}oe.exports={calc:function(u,s){var c,h,p,v,g=[],f=[],w="h"===s.orientation,y=b.getFromId(u,w?s.yaxis:s.xaxis),M=w?"y":"x",A={x:"y",y:"x"}[M],k=s[M+"calendar"],C=s.cumulative,P=d(u,s,y,M),D=P[0],F=P[1],R="string"==typeof D.size,L=[],I=R?L:D,B=[],V=[],Z=[],Y=0,ee=s.histnorm,J=s.histfunc,$=-1!==ee.indexOf("density");C.enabled&&$&&(ee=ee.replace(/ ?density$/,""),$=!1);var Q,se="max"===J||"min"===J?null:0,j=o.count,G=a[ee],W=!1,ie=function(ve){return y.r2c(ve,0,k)};for(x.isArrayOrTypedArray(s[A])&&"count"!==J&&(Q=s[A],W="avg"===J,j=o[J]),c=ie(D.start),p=ie(D.end)+(c-b.tickIncrement(c,D.size,!1,k))/1e6;c<p&&g.length<1e6&&(h=b.tickIncrement(c,D.size,!1,k),g.push((c+h)/2),f.push(se),Z.push([]),L.push(c),$&&B.push(1/(h-c)),W&&V.push(0),!(h<=c));)c=h;L.push(c),R||"date"!==y.type||(I={start:ie(I.start),end:ie(I.end),size:I.size}),u._fullLayout._roundFnOpts||(u._fullLayout._roundFnOpts={});var q=s["_"+M+"bingroup"],te={leftGap:1/0,rightGap:1/0};q&&(u._fullLayout._roundFnOpts[q]||(u._fullLayout._roundFnOpts[q]=te),te=u._fullLayout._roundFnOpts[q]);var ne,le=f.length,ue=!0,de=te.leftGap,he=te.rightGap,be={};for(c=0;c<F.length;c++){var ge=F[c];(v=x.findBin(ge,I))>=0&&v<le&&(Y+=j(v,c,f,Q,V),ue&&Z[v].length&&ge!==F[Z[v][0]]&&(ue=!1),Z[v].push(c),be[c]=v,de=Math.min(de,ge-L[v]),he=Math.min(he,L[v+1]-ge))}te.leftGap=de,te.rightGap=he,ue||(ne=function(ve,Te){return function(){var Le=u._fullLayout._roundFnOpts[q];return i(Le.leftGap,Le.rightGap,L,y,k)(ve,Te)}}),W&&(Y=l(f,V)),G&&G(f,Y,B),C.enabled&&function(ve,Te,Le){var Ee,Pe,je;function Ge(lt){je=ve[lt],ve[lt]/=2}function Ke(lt){ve[lt]=je+(Pe=ve[lt])/2,je+=Pe}if("half"===Le)if("increasing"===Te)for(Ge(0),Ee=1;Ee<ve.length;Ee++)Ke(Ee);else for(Ge(ve.length-1),Ee=ve.length-2;Ee>=0;Ee--)Ke(Ee);else if("increasing"===Te){for(Ee=1;Ee<ve.length;Ee++)ve[Ee]+=ve[Ee-1];"exclude"===Le&&(ve.unshift(0),ve.pop())}else{for(Ee=ve.length-2;Ee>=0;Ee--)ve[Ee]+=ve[Ee+1];"exclude"===Le&&(ve.push(0),ve.shift())}}(f,C.direction,C.currentbin);var we=Math.min(g.length,f.length),Ce=[],De=0,Se=we-1;for(c=0;c<we;c++)if(f[c]){De=c;break}for(c=we-1;c>=De;c--)if(f[c]){Se=c;break}for(c=De;c<=Se;c++)if(m(g[c])&&m(f[c])){var Fe={p:g[c],s:f[c],b:0};C.enabled||(Fe.pts=Z[c],ue?Fe.ph0=Fe.ph1=Z[c].length?F[Z[c][0]]:g[c]:(s._computePh=!0,Fe.ph0=ne(L[c]),Fe.ph1=ne(L[c+1],!0))),Ce.push(Fe)}return 1===Ce.length&&(Ce[0].width1=b.tickIncrement(Ce[0].p,D.size,!1,k)-Ce[0].p),e(Ce,s),x.isArrayOrTypedArray(s.selectedpoints)&&x.tagSelected(Ce,s,be),Ce},calcAllAutoBins:d}},{"../../lib":503,"../../plots/cartesian/axes":554,"../../registry":638,"../bar/arrays_to_calcdata":647,"./average":813,"./bin_functions":815,"./bin_label_vals":816,"./norm_functions":824,"fast-isnumeric":190}],818:[function(_,oe,ae){"use strict";oe.exports={eventDataKeys:["binNumber"]}},{}],819:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../plots/cartesian/axis_ids"),T=_("../../registry").traceIs,b=_("../bar/defaults").handleGroupingDefaults,e=m.nestedProperty,o=_("../../plots/cartesian/constraints").getAxisGroup,a=[{aStr:{x:"xbins.start",y:"ybins.start"},name:"start"},{aStr:{x:"xbins.end",y:"ybins.end"},name:"end"},{aStr:{x:"xbins.size",y:"ybins.size"},name:"size"},{aStr:{x:"nbinsx",y:"nbinsy"},name:"nbins"}],l=["x","y"];oe.exports=function(i,d){var u,s,c,h,p,v,g,f=d._histogramBinOpts={},w=[],y={},M=[];function A($,Q){return m.coerce(u._input,u,u._module.attributes,$,Q)}function k($){return"v"===$.orientation?"x":"y"}function C($,Q,se){var j=$.uid+"__"+se;Q||(Q=j);var G=x.getFromTrace({_fullLayout:d},$,se).type,W=$[se+"calendar"]||"",ie=f[Q],q=!0;ie&&(G===ie.axType&&W===ie.calendar?(q=!1,ie.traces.push($),ie.dirs.push(se)):(Q=j,G!==ie.axType&&m.warn(["Attempted to group the bins of trace",$.index,"set on a","type:"+G,"axis","with bins on","type:"+ie.axType,"axis."].join(" ")),W!==ie.calendar&&m.warn(["Attempted to group the bins of trace",$.index,"set with a",W,"calendar","with bins",ie.calendar?"on a "+ie.calendar+" calendar":"w/o a set calendar"].join(" ")))),q&&(f[Q]={traces:[$],dirs:[se],axType:G,calendar:$[se+"calendar"]||""}),$["_"+se+"bingroup"]=Q}for(p=0;p<i.length;p++)T(u=i[p],"histogram")&&(w.push(u),delete u._xautoBinFinished,delete u._yautoBinFinished,T(u,"2dMap")||b(u._input,u,d,A));var P=d._alignmentOpts||{};for(p=0;p<w.length;p++){if(c="",!T(u=w[p],"2dMap")){if(h=k(u),"group"===d.barmode&&u.alignmentgroup){var F=o(d,u[h+"axis"])+u.orientation;(P[F]||{})[u.alignmentgroup]&&(c=F)}c||"overlay"===d.barmode||(c=o(d,u.xaxis)+o(d,u.yaxis)+k(u))}c?(y[c]||(y[c]=[]),y[c].push(u)):M.push(u)}for(c in y)if(1!==(s=y[c]).length){var R=!1;for(s.length&&(u=s[0],R=A("bingroup")),c=R||c,p=0;p<s.length;p++){var L=(u=s[p])._input.bingroup;L&&L!==c&&m.warn(["Trace",u.index,"must match","within bingroup",c+".","Ignoring its bingroup:",L,"setting."].join(" ")),u.bingroup=c,C(u,c,k(u))}}else M.push(s[0]);for(p=0;p<M.length;p++){u=M[p];var I=A("bingroup");if(T(u,"2dMap"))for(g=0;g<2;g++){var B=A((h=l[g])+"bingroup",I?I+"__"+h:null);C(u,B,h)}else C(u,I,k(u))}for(c in f){var V=f[c];for(s=V.traces,v=0;v<a.length;v++){var Z,Y,ee=a[v],J=ee.name;if("nbins"!==J||!V.sizeFound){for(p=0;p<s.length;p++){if(void 0!==e((u=s[p])._input,Z=ee.aStr[h=V.dirs[p]]).get()){V[J]=A(Z),V[J+"Found"]=!0;break}(Y=(u._autoBin||{})[h]||{})[J]&&e(u,Z).set(Y[J])}if("start"===J||"end"===J)for(;p<s.length;p++)(u=s[p])["_"+h+"bingroup"]&&A(Z,(Y=(u._autoBin||{})[h]||{})[J]);"nbins"!==J||V.sizeFound||V.nbinsFound||(u=s[0],V[J]=A(Z))}}}}},{"../../lib":503,"../../plots/cartesian/axis_ids":558,"../../plots/cartesian/constraints":562,"../../registry":638,"../bar/defaults":652}],820:[function(_,oe,ae){"use strict";var m=_("../../registry"),x=_("../../lib"),T=_("../../components/color"),b=_("../bar/defaults").handleText,e=_("../bar/style_defaults"),o=_("./attributes");oe.exports=function(a,l,i,d){function u(M,A){return x.coerce(a,l,o,M,A)}var s=u("x"),c=u("y");u("cumulative.enabled")&&(u("cumulative.direction"),u("cumulative.currentbin")),u("text");var h=u("textposition");b(a,l,d,u,h,{moduleHasSelected:!0,moduleHasUnselected:!0,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),u("hovertext"),u("hovertemplate"),u("xhoverformat"),u("yhoverformat");var p=u("orientation",c&&!s?"h":"v"),v="v"===p?"x":"y",g="v"===p?"y":"x",f=s&&c?Math.min(x.minRowLength(s)&&x.minRowLength(c)):x.minRowLength(l[v]||[]);if(f){l._length=f,m.getComponentMethod("calendars","handleTraceDefaults")(a,l,["x","y"],d),l[g]&&u("histfunc"),u("histnorm"),u("autobin"+v),e(a,l,u,i,d),x.coerceSelectionMarkerOpacity(l,u);var w=(l.marker.line||{}).color,y=m.getComponentMethod("errorbars","supplyDefaults");y(a,l,w||T.defaultLine,{axis:"y"}),y(a,l,w||T.defaultLine,{axis:"x",inherit:"y"})}else l.visible=!1}},{"../../components/color":366,"../../lib":503,"../../registry":638,"../bar/defaults":652,"../bar/style_defaults":663,"./attributes":812}],821:[function(_,oe,ae){"use strict";oe.exports=function(m,x,T,b,e){if(m.x="xVal"in x?x.xVal:x.x,m.y="yVal"in x?x.yVal:x.y,"zLabelVal"in x&&(m.z=x.zLabelVal),x.xa&&(m.xaxis=x.xa),x.ya&&(m.yaxis=x.ya),!(T.cumulative||{}).enabled){var o,a=Array.isArray(e)?b[0].pts[e[0]][e[1]]:b[e].pts;if(m.pointNumbers=a,m.binNumber=m.pointNumber,delete m.pointNumber,delete m.pointIndex,T._indexToPoints){o=[];for(var l=0;l<a.length;l++)o=o.concat(T._indexToPoints[a[l]])}else o=a;m.pointIndices=o}return m}},{}],822:[function(_,oe,ae){"use strict";var m=_("../bar/hover").hoverPoints,x=_("../../plots/cartesian/axes").hoverLabelText;oe.exports=function(T,b,e,o,a){var l=m(T,b,e,o,a);if(l){var i=(T=l[0]).cd[T.index],d=T.cd[0].trace;if(!d.cumulative.enabled){var u="h"===d.orientation?"y":"x";T[u+"Label"]=x(T[u+"a"],[i.ph0,i.ph1],d[u+"hoverformat"])}return l}}},{"../../plots/cartesian/axes":554,"../bar/hover":655}],823:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),layoutAttributes:_("../bar/layout_attributes"),supplyDefaults:_("./defaults"),crossTraceDefaults:_("./cross_trace_defaults"),supplyLayoutDefaults:_("../bar/layout_defaults"),calc:_("./calc").calc,crossTraceCalc:_("../bar/cross_trace_calc").crossTraceCalc,plot:_("../bar/plot").plot,layerName:"barlayer",style:_("../bar/style").style,styleOnSelect:_("../bar/style").styleOnSelect,colorbar:_("../scatter/marker_colorbar"),hoverPoints:_("./hover"),selectPoints:_("../bar/select"),eventData:_("./event_data"),moduleType:"trace",name:"histogram",basePlotModule:_("../../plots/cartesian"),categories:["bar-like","cartesian","svg","bar","histogram","oriented","errorBarsOK","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../bar/cross_trace_calc":651,"../bar/layout_attributes":657,"../bar/layout_defaults":658,"../bar/plot":659,"../bar/select":660,"../bar/style":662,"../scatter/marker_colorbar":944,"./attributes":812,"./calc":817,"./cross_trace_defaults":819,"./defaults":820,"./event_data":821,"./hover":822}],824:[function(_,oe,ae){"use strict";oe.exports={percent:function(m,x){for(var T=m.length,b=100/x,e=0;e<T;e++)m[e]*=b},probability:function(m,x){for(var T=m.length,b=0;b<T;b++)m[b]/=x},density:function(m,x,T,b){var e=m.length;b=b||1;for(var o=0;o<e;o++)m[o]*=T[o]*b},"probability density":function(m,x,T,b){var e=m.length;b&&(x/=b);for(var o=0;o<e;o++)m[o]*=T[o]/x}}},{}],825:[function(_,oe,ae){"use strict";var m=_("../histogram/attributes"),x=_("../histogram/bin_attributes"),T=_("../heatmap/attributes"),b=_("../../plots/attributes"),e=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,o=_("../../plots/template_attributes").hovertemplateAttrs,a=_("../../plots/template_attributes").texttemplateAttrs,l=_("../../components/colorscale/attributes"),i=_("../../lib/extend").extendFlat;oe.exports=i({x:m.x,y:m.y,z:{valType:"data_array",editType:"calc"},marker:{color:{valType:"data_array",editType:"calc"},editType:"calc"},histnorm:m.histnorm,histfunc:m.histfunc,nbinsx:m.nbinsx,xbins:x("x"),nbinsy:m.nbinsy,ybins:x("y"),autobinx:m.autobinx,autobiny:m.autobiny,bingroup:i({},m.bingroup,{}),xbingroup:i({},m.bingroup,{}),ybingroup:i({},m.bingroup,{}),xgap:T.xgap,ygap:T.ygap,zsmooth:T.zsmooth,xhoverformat:e("x"),yhoverformat:e("y"),zhoverformat:e("z",1),hovertemplate:o({},{keys:"z"}),texttemplate:a({arrayOk:!1,editType:"plot"},{keys:"z"}),textfont:T.textfont,showlegend:i({},b.showlegend,{dflt:!1})},l("",{cLetter:"z",autoColorDflt:!1}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../heatmap/attributes":792,"../histogram/attributes":812,"../histogram/bin_attributes":814}],826:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../histogram/bin_functions"),b=_("../histogram/norm_functions"),e=_("../histogram/average"),o=_("../histogram/bin_label_vals"),a=_("../histogram/calc").calcAllAutoBins;function l(u,s,c,h){var p,v=new Array(u);if(h)for(p=0;p<u;p++)v[p]=1/(s[p+1]-s[p]);else{var g=1/c;for(p=0;p<u;p++)v[p]=g}return v}function i(u,s){return{start:u(s.start),end:u(s.end),size:s.size}}function d(u,s,c,h,p,v){var g,f=u.length-1,w=new Array(f),y=o(c,h,u,p,v);for(g=0;g<f;g++){var M=(s||[])[g];w[g]=void 0===M?[y(u[g]),y(u[g+1],!0)]:[M,M]}return w}oe.exports=function(u,s){var c,h,p,v,g=x.getFromId(u,s.xaxis),f=x.getFromId(u,s.yaxis),w=s.xcalendar,y=s.ycalendar,M=function(ht){return g.r2c(ht,0,w)},A=function(ht){return f.r2c(ht,0,y)},k=a(u,s,g,"x"),C=k[0],P=k[1],D=a(u,s,f,"y"),F=D[0],R=D[1],L=s._length;P.length>L&&P.splice(L,P.length-L),R.length>L&&R.splice(L,R.length-L);var I=[],B=[],V=[],Z="string"==typeof C.size,Y="string"==typeof F.size,ee=[],J=[],$=Z?ee:C,Q=Y?J:F,se=0,j=[],G=[],W=s.histnorm,ie=s.histfunc,q=-1!==W.indexOf("density"),te="max"===ie||"min"===ie?null:0,ne=T.count,le=b[W],ue=!1,de=[],he=[],be="z"in s?s.z:"marker"in s&&Array.isArray(s.marker.color)?s.marker.color:"";be&&"count"!==ie&&(ue="avg"===ie,ne=T[ie]);var ge=C.size,we=M(C.start),Ce=M(C.end)+(we-x.tickIncrement(we,ge,!1,w))/1e6;for(c=we;c<Ce;c=x.tickIncrement(c,ge,!1,w))B.push(te),ee.push(c),ue&&V.push(0);ee.push(c);var Se=B.length,Fe=(c-we)/Se,ve=g.c2r(we+Fe/2,0,w),Te=F.size,Le=A(F.start),Ee=A(F.end)+(Le-x.tickIncrement(Le,Te,!1,y))/1e6;for(c=Le;c<Ee;c=x.tickIncrement(c,Te,!1,y)){I.push(B.slice()),J.push(c);var Pe=new Array(Se);for(h=0;h<Se;h++)Pe[h]=[];G.push(Pe),ue&&j.push(V.slice())}J.push(c);var je=I.length,Ge=(c-Le)/je,Ke=f.c2r(Le+Ge/2,0,y);q&&(de=l(B.length,$,Fe,Z),he=l(I.length,Q,Ge,Y)),Z||"date"!==g.type||($=i(M,$)),Y||"date"!==f.type||(Q=i(A,Q));var lt=!0,Ue=!0,$e=new Array(Se),et=new Array(je),tt=1/0,ct=1/0,xt=1/0,Ct=1/0;for(c=0;c<L;c++){var Ht=P[c],zt=R[c];p=m.findBin(Ht,$),v=m.findBin(zt,Q),p>=0&&p<Se&&v>=0&&v<je&&(se+=ne(p,c,I[v],be,j[v]),G[v][p].push(c),lt&&(void 0===$e[p]?$e[p]=Ht:$e[p]!==Ht&&(lt=!1)),Ue&&(void 0===et[v]?et[v]=zt:et[v]!==zt&&(Ue=!1)),tt=Math.min(tt,Ht-ee[p]),ct=Math.min(ct,ee[p+1]-Ht),xt=Math.min(xt,zt-J[v]),Ct=Math.min(Ct,J[v+1]-zt))}if(ue)for(v=0;v<je;v++)se+=e(I[v],j[v]);if(le)for(v=0;v<je;v++)le(I[v],se,de,he[v]);return{x:P,xRanges:d(ee,lt&&$e,tt,ct,g,w),x0:ve,dx:Fe,y:R,yRanges:d(J,Ue&&et,xt,Ct,f,y),y0:Ke,dy:Ge,z:I,pts:G}}},{"../../lib":503,"../../plots/cartesian/axes":554,"../histogram/average":813,"../histogram/bin_functions":815,"../histogram/bin_label_vals":816,"../histogram/calc":817,"../histogram/norm_functions":824}],827:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./sample_defaults"),T=_("../heatmap/style_defaults"),b=_("../../components/colorscale/defaults"),e=_("../heatmap/label_defaults"),o=_("./attributes");oe.exports=function(a,l,i,d){function u(s,c){return m.coerce(a,l,o,s,c)}x(a,l,u,d),!1!==l.visible&&(T(a,l,u,d),b(a,l,d,u,{prefix:"",cLetter:"z"}),u("hovertemplate"),e(u,d),u("xhoverformat"),u("yhoverformat"))}},{"../../components/colorscale/defaults":376,"../../lib":503,"../heatmap/label_defaults":802,"../heatmap/style_defaults":806,"./attributes":825,"./sample_defaults":830}],828:[function(_,oe,ae){"use strict";var m=_("../heatmap/hover"),x=_("../../plots/cartesian/axes").hoverLabelText;oe.exports=function(T,b,e,o,a){var l=m(T,b,e,o,a);if(l){var i=(T=l[0]).index,s=T.cd[0],c=s.trace,h=s.xRanges[i[1]],p=s.yRanges[i[0]];return T.xLabel=x(T.xa,[h[0],h[1]],c.xhoverformat),T.yLabel=x(T.ya,[p[0],p[1]],c.yhoverformat),l}}},{"../../plots/cartesian/axes":554,"../heatmap/hover":799}],829:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),crossTraceDefaults:_("../histogram/cross_trace_defaults"),calc:_("../heatmap/calc"),plot:_("../heatmap/plot"),layerName:"heatmaplayer",colorbar:_("../heatmap/colorbar"),style:_("../heatmap/style"),hoverPoints:_("./hover"),eventData:_("../histogram/event_data"),moduleType:"trace",name:"histogram2d",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","2dMap","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../heatmap/calc":793,"../heatmap/colorbar":795,"../heatmap/plot":804,"../heatmap/style":805,"../histogram/cross_trace_defaults":819,"../histogram/event_data":821,"./attributes":825,"./defaults":827,"./hover":828}],830:[function(_,oe,ae){"use strict";var m=_("../../registry"),x=_("../../lib");oe.exports=function(T,b,e,o){var a=e("x"),l=e("y"),i=x.minRowLength(a),d=x.minRowLength(l);i&&d?(b._length=Math.min(i,d),m.getComponentMethod("calendars","handleTraceDefaults")(T,b,["x","y"],o),(e("z")||e("marker.color"))&&e("histfunc"),e("histnorm"),e("autobinx"),e("autobiny")):b.visible=!1}},{"../../lib":503,"../../registry":638}],831:[function(_,oe,ae){"use strict";var m=_("../histogram2d/attributes"),x=_("../contour/attributes"),T=_("../../components/colorscale/attributes"),b=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=_("../../lib/extend").extendFlat;oe.exports=e({x:m.x,y:m.y,z:m.z,marker:m.marker,histnorm:m.histnorm,histfunc:m.histfunc,nbinsx:m.nbinsx,xbins:m.xbins,nbinsy:m.nbinsy,ybins:m.ybins,autobinx:m.autobinx,autobiny:m.autobiny,bingroup:m.bingroup,xbingroup:m.xbingroup,ybingroup:m.ybingroup,autocontour:x.autocontour,ncontours:x.ncontours,contours:x.contours,line:{color:x.line.color,width:e({},x.line.width,{dflt:.5}),dash:x.line.dash,smoothing:x.line.smoothing,editType:"plot"},xhoverformat:b("x"),yhoverformat:b("y"),zhoverformat:b("z",1),hovertemplate:m.hovertemplate,texttemplate:x.texttemplate,textfont:x.textfont},T("",{cLetter:"z",editTypeOverride:"calc"}))},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../contour/attributes":735,"../histogram2d/attributes":825}],832:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../histogram2d/sample_defaults"),T=_("../contour/contours_defaults"),b=_("../contour/style_defaults"),e=_("../heatmap/label_defaults"),o=_("./attributes");oe.exports=function(a,l,i,d){function u(s,c){return m.coerce(a,l,o,s,c)}x(a,l,u,d),!1!==l.visible&&(T(a,l,u,function(s){return m.coerce2(a,l,o,s)}),b(a,l,u,d),u("xhoverformat"),u("yhoverformat"),u("hovertemplate"),l.contours&&"heatmap"===l.contours.coloring&&e(u,d))}},{"../../lib":503,"../contour/contours_defaults":742,"../contour/style_defaults":756,"../heatmap/label_defaults":802,"../histogram2d/sample_defaults":830,"./attributes":831}],833:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),crossTraceDefaults:_("../histogram/cross_trace_defaults"),calc:_("../contour/calc"),plot:_("../contour/plot").plot,layerName:"contourlayer",style:_("../contour/style"),colorbar:_("../contour/colorbar"),hoverPoints:_("../contour/hover"),moduleType:"trace",name:"histogram2dcontour",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","2dMap","contour","histogram","showLegend"],meta:{}}},{"../../plots/cartesian":568,"../contour/calc":736,"../contour/colorbar":738,"../contour/hover":748,"../contour/plot":753,"../contour/style":755,"../histogram/cross_trace_defaults":819,"./attributes":831,"./defaults":832}],834:[function(_,oe,ae){"use strict";var m=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../../components/colorscale/attributes"),b=_("../../plots/domain").attributes,e=_("../pie/attributes"),o=_("../sunburst/attributes"),a=_("../treemap/attributes"),l=_("../treemap/constants"),i=_("../../lib/extend").extendFlat;oe.exports={labels:o.labels,parents:o.parents,values:o.values,branchvalues:o.branchvalues,count:o.count,level:o.level,maxdepth:o.maxdepth,tiling:{orientation:{valType:"enumerated",values:["v","h"],dflt:"h",editType:"plot"},flip:a.tiling.flip,pad:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},marker:i({colors:o.marker.colors,line:o.marker.line,editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),leaf:o.leaf,pathbar:a.pathbar,text:e.text,textinfo:o.textinfo,texttemplate:x({editType:"plot"},{keys:l.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:o.hoverinfo,hovertemplate:m({},{keys:l.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:a.outsidetextfont,textposition:a.textposition,sort:e.sort,root:o.root,domain:b({name:"icicle",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"../sunburst/attributes":1045,"../treemap/attributes":1071,"../treemap/constants":1074}],835:[function(_,oe,ae){"use strict";var m=_("../../plots/plots");ae.name="icicle",ae.plot=function(x,T,b,e){m.plotBasePlot(ae.name,x,T,b,e)},ae.clean=function(x,T,b,e){m.cleanBasePlot(ae.name,x,T,b,e)}},{"../../plots/plots":619}],836:[function(_,oe,ae){"use strict";var m=_("../sunburst/calc");ae.calc=function(x,T){return m.calc(x,T)},ae.crossTraceCalc=function(x){return m._runCrossTraceCalc("icicle",x)}},{"../sunburst/calc":1047}],837:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./attributes"),T=_("../../components/color"),b=_("../../plots/domain").defaults,e=_("../bar/defaults").handleText,o=_("../bar/constants").TEXTPAD,a=_("../../components/colorscale"),l=a.hasColorscale,i=a.handleDefaults;oe.exports=function(d,u,s,c){function h(M,A){return m.coerce(d,u,x,M,A)}var p=h("labels"),v=h("parents");if(p&&p.length&&v&&v.length){var g=h("values");h(g&&g.length?"branchvalues":"count"),h("level"),h("maxdepth"),h("tiling.orientation"),h("tiling.flip"),h("tiling.pad");var f=h("text");h("texttemplate"),u.texttemplate||h("textinfo",Array.isArray(f)?"text+label":"label"),h("hovertext"),h("hovertemplate");var w=h("pathbar.visible");e(d,u,c,h,"auto",{hasPathbar:w,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),h("textposition"),h("marker.line.width")&&h("marker.line.color",c.paper_bgcolor),h("marker.colors");var y=u._hasColorscale=l(d,"marker","colors")||(d.marker||{}).coloraxis;y&&i(d,u,c,h,{prefix:"marker.",cLetter:"c"}),h("leaf.opacity",y?1:.7),u._hovered={marker:{line:{width:2,color:T.contrast(c.paper_bgcolor)}}},w&&(h("pathbar.thickness",u.pathbar.textfont.size+2*o),h("pathbar.side"),h("pathbar.edgeshape")),h("sort"),h("root.color"),b(u,c,h),u._length=null}else u.visible=!1}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":834}],838:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing"),b=_("../../lib/svg_text_utils"),e=_("./partition"),o=_("./style").styleOne,a=_("../treemap/constants"),l=_("../sunburst/helpers"),i=_("../sunburst/fx"),d=_("../sunburst/plot").formatSliceLabel;oe.exports=function(u,s,c,h,p){var v=p.width,g=p.height,f=p.viewX,w=p.viewY,y=p.pathSlice,M=p.toMoveInsideSlice,A=p.strTransform,k=p.hasTransition,C=p.handleSlicesExit,P=p.makeUpdateSliceInterpolator,D=p.makeUpdateTextInterpolator,F=p.prevEntry,R=u._fullLayout,L=s[0].trace,I=-1!==L.textposition.indexOf("left"),B=-1!==L.textposition.indexOf("right"),V=-1!==L.textposition.indexOf("bottom"),Z=e(c,[v,g],{flipX:L.tiling.flip.indexOf("x")>-1,flipY:L.tiling.flip.indexOf("y")>-1,orientation:L.tiling.orientation,pad:{inner:L.tiling.pad},maxDepth:L._maxDepth}).descendants(),Y=1/0,ee=-1/0;Z.forEach(function(j){var G=j.depth;G>=L._maxDepth?(j.x0=j.x1=(j.x0+j.x1)/2,j.y0=j.y1=(j.y0+j.y1)/2):(Y=Math.min(Y,G),ee=Math.max(ee,G))}),h=h.data(Z,l.getPtId),L._maxVisibleLayers=isFinite(ee)?ee-Y+1:0,h.enter().append("g").classed("slice",!0),C(h,!1,{},[v,g],y),h.order();var J=null;if(k&&F){var $=l.getPtId(F);h.each(function(j){null===J&&l.getPtId(j)===$&&(J={x0:j.x0,x1:j.x1,y0:j.y0,y1:j.y1})})}var Q=function(){return J||{x0:0,x1:v,y0:0,y1:g}},se=h;return k&&(se=se.transition().each("end",function(){var j=m.select(this);l.setSliceCursor(j,u,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),se.each(function(j){j._x0=f(j.x0),j._x1=f(j.x1),j._y0=w(j.y0),j._y1=w(j.y1),j._hoverX=f(j.x1-L.tiling.pad),j._hoverY=w(V?j.y1-L.tiling.pad/2:j.y0+L.tiling.pad/2);var G=m.select(this),W=x.ensureSingle(G,"path","surface",function(ne){ne.style("pointer-events","all")});k?W.transition().attrTween("d",function(ne){var le=P(ne,!1,Q(),[v,g],{orientation:L.tiling.orientation,flipX:L.tiling.flip.indexOf("x")>-1,flipY:L.tiling.flip.indexOf("y")>-1});return function(ue){return y(le(ue))}}):W.attr("d",y),G.call(i,c,u,s,{styleOne:o,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,u,{isTransitioning:u._transitioning}),W.call(o,j,L,{hovered:!1}),j._text=j.x0===j.x1||j.y0===j.y1?"":d(j,c,L,s,R)||"";var ie=x.ensureSingle(G,"g","slicetext"),q=x.ensureSingle(ie,"text","",function(ne){ne.attr("data-notex",1)}),te=x.ensureUniformFontSize(u,l.determineTextFont(L,j,R.font));q.text(j._text||" ").classed("slicetext",!0).attr("text-anchor",B?"end":I?"start":"middle").call(T.font,te).call(b.convertToTspans,u),j.textBB=T.bBox(q.node()),j.transform=M(j,{fontSize:te.size}),j.transform.fontSize=te.size,k?q.transition().attrTween("transform",function(ne){var le=D(ne,!1,Q(),[v,g]);return function(ue){return A(le(ue))}}):q.attr("transform",A(j))}),J}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"../sunburst/plot":1055,"../treemap/constants":1074,"./partition":842,"./style":844,"@plotly/d3":58}],839:[function(_,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"icicle",basePlotModule:_("./base_plot"),categories:[],animatable:!0,attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults"),supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc").calc,crossTraceCalc:_("./calc").crossTraceCalc,plot:_("./plot"),style:_("./style").style,colorbar:_("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":834,"./base_plot":835,"./calc":836,"./defaults":837,"./layout_attributes":840,"./layout_defaults":841,"./plot":843,"./style":844}],840:[function(_,oe,ae){"use strict";oe.exports={iciclecolorway:{valType:"colorlist",editType:"calc"},extendiciclecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],841:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./layout_attributes");oe.exports=function(T,b){function e(o,a){return m.coerce(T,b,x,o,a)}e("iciclecolorway",b.colorway),e("extendiciclecolors")}},{"../../lib":503,"./layout_attributes":840}],842:[function(_,oe,ae){"use strict";var m=_("d3-hierarchy"),x=_("../treemap/flip_tree");oe.exports=function(T,b,e){var o=e.flipX,a=e.flipY,l="h"===e.orientation,i=e.maxDepth,d=b[0],u=b[1];i&&(d=(T.height+1)*b[0]/Math.min(T.height+1,i),u=(T.height+1)*b[1]/Math.min(T.height+1,i));var s=m.partition().padding(e.pad.inner).size(l?[b[1],d]:[b[0],u])(T);return(l||o||a)&&x(s,b,{swapXY:l,flipX:o,flipY:a}),s}},{"../treemap/flip_tree":1079,"d3-hierarchy":115}],843:[function(_,oe,ae){"use strict";var m=_("../treemap/draw"),x=_("./draw_descendants");oe.exports=function(T,b,e,o){return m(T,b,e,o,{type:"icicle",drawDescendants:x})}},{"../treemap/draw":1076,"./draw_descendants":838}],844:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../components/color"),T=_("../../lib"),b=_("../bar/uniform_text").resizeText;function e(o,a,l){var i=a.data.data,d=!a.children,u=i.i,s=T.castOption(l,u,"marker.line.color")||x.defaultLine,c=T.castOption(l,u,"marker.line.width")||0;o.style("stroke-width",c).call(x.fill,i.color).call(x.stroke,s).style("opacity",d?l.leaf.opacity:null)}oe.exports={style:function(o){var a=o._fullLayout._iciclelayer.selectAll(".trace");b(o,a,"icicle"),a.each(function(l){var i=m.select(this),d=l[0].trace;i.style("opacity",d.opacity),i.selectAll("path.surface").each(function(u){m.select(this).call(e,u,d)})})},styleOne:e}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],845:[function(_,oe,ae){"use strict";for(var m=_("../../plots/attributes"),x=_("../../plots/template_attributes").hovertemplateAttrs,T=_("../../lib/extend").extendFlat,b=_("./constants").colormodel,e=["rgb","rgba","rgba256","hsl","hsla"],o=[],a=[],l=0;l<e.length;l++){var i=b[e[l]];o.push("For the `"+e[l]+"` colormodel, it is ["+(i.zminDflt||i.min).join(", ")+"]."),a.push("For the `"+e[l]+"` colormodel, it is ["+(i.zmaxDflt||i.max).join(", ")+"].")}oe.exports=T({source:{valType:"string",editType:"calc"},z:{valType:"data_array",editType:"calc"},colormodel:{valType:"enumerated",values:e,editType:"calc"},zsmooth:{valType:"enumerated",values:["fast",!1],dflt:!1,editType:"plot"},zmin:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},zmax:{valType:"info_array",items:[{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"},{valType:"number",editType:"calc"}],editType:"calc"},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dx:{valType:"number",dflt:1,editType:"calc"},dy:{valType:"number",dflt:1,editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"data_array",editType:"plot"},hoverinfo:T({},m.hoverinfo,{flags:["x","y","z","color","name","text"],dflt:"x+y+z+text+name"}),hovertemplate:x({},{keys:["z","color","colormodel"]}),transforms:void 0})},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"./constants":847}],846:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./constants"),T=_("fast-isnumeric"),b=_("../../plots/cartesian/axes"),e=_("../../lib").maxRowLength,o=_("./helpers").getImageSize;function a(i,d,u,s){return function(c){return m.constrain((c-i)*d,u,s)}}function l(i,d){return function(u){return m.constrain(u,i,d)}}oe.exports=function(i,d){var u,s;if(d._hasZ)u=d.z.length,s=e(d.z);else if(d._hasSource){var c=o(d.source);u=c.height,s=c.width}var h,p=b.getFromId(i,d.xaxis||"x"),v=b.getFromId(i,d.yaxis||"y"),g=p.d2c(d.x0)-d.dx/2,f=v.d2c(d.y0)-d.dy/2,w=[g,g+s*d.dx],y=[f,f+u*d.dy];if(p&&"log"===p.type)for(h=0;h<s;h++)w.push(g+h*d.dx);if(v&&"log"===v.type)for(h=0;h<u;h++)y.push(f+h*d.dy);return d._extremes[p._id]=b.findExtremes(p,w),d._extremes[v._id]=b.findExtremes(v,y),d._scaler=function(M){var A=x.colormodel[M.colormodel],k=(A.colormodel||M.colormodel).length;M._sArray=[];for(var C=0;C<k;C++)M._sArray.push(A.min[C]!==M.zmin[C]||A.max[C]!==M.zmax[C]?a(M.zmin[C],(A.max[C]-A.min[C])/(M.zmax[C]-M.zmin[C]),A.min[C],A.max[C]):l(A.min[C],A.max[C]));return function(P){for(var D=P.slice(0,k),F=0;F<k;F++){var R=D[F];if(!T(R))return!1;D[F]=M._sArray[F](R)}return D}}(d),[{x0:g,y0:f,z:d.z,w:s,h:u}]}},{"../../lib":503,"../../plots/cartesian/axes":554,"./constants":847,"./helpers":850,"fast-isnumeric":190}],847:[function(_,oe,ae){"use strict";oe.exports={colormodel:{rgb:{min:[0,0,0],max:[255,255,255],fmt:function(m){return m.slice(0,3)},suffix:["","",""]},rgba:{min:[0,0,0,0],max:[255,255,255,1],fmt:function(m){return m.slice(0,4)},suffix:["","","",""]},rgba256:{colormodel:"rgba",zminDflt:[0,0,0,0],zmaxDflt:[255,255,255,255],min:[0,0,0,0],max:[255,255,255,1],fmt:function(m){return m.slice(0,4)},suffix:["","","",""]},hsl:{min:[0,0,0],max:[360,100,100],fmt:function(m){var x=m.slice(0,3);return x[1]=x[1]+"%",x[2]=x[2]+"%",x},suffix:["\xb0","%","%"]},hsla:{min:[0,0,0,0],max:[360,100,100,1],fmt:function(m){var x=m.slice(0,4);return x[1]=x[1]+"%",x[2]=x[2]+"%",x},suffix:["\xb0","%","%",""]}},pixelatedStyle:["image-rendering: optimizeSpeed","image-rendering: -moz-crisp-edges","image-rendering: -o-crisp-edges","image-rendering: -webkit-optimize-contrast","image-rendering: optimize-contrast","image-rendering: crisp-edges","image-rendering: pixelated",""].join("; ")}},{}],848:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./attributes"),T=_("./constants"),b=_("../../snapshot/helpers").IMAGE_URL_PREFIX;oe.exports=function(e,o){function a(d,u){return m.coerce(e,o,x,d,u)}a("source"),o.source&&!o.source.match(b)&&delete o.source,o._hasSource=!!o.source;var l,i=a("z");o._hasZ=!(void 0===i||!i.length||!i[0]||!i[0].length),o._hasZ||o._hasSource?(a("x0"),a("y0"),a("dx"),a("dy"),o._hasZ?(a("colormodel","rgb"),a("zmin",(l=T.colormodel[o.colormodel]).zminDflt||l.min),a("zmax",l.zmaxDflt||l.max)):o._hasSource&&(o.colormodel="rgba256",o.zmin=(l=T.colormodel[o.colormodel]).zminDflt,o.zmax=l.zmaxDflt),a("zsmooth"),a("text"),a("hovertext"),a("hovertemplate"),o._length=null):o.visible=!1}},{"../../lib":503,"../../snapshot/helpers":642,"./attributes":845,"./constants":847}],849:[function(_,oe,ae){"use strict";oe.exports=function(m,x){return"xVal"in x&&(m.x=x.xVal),"yVal"in x&&(m.y=x.yVal),x.xa&&(m.xaxis=x.xa),x.ya&&(m.yaxis=x.ya),m.color=x.color,m.colormodel=x.trace.colormodel,m.z||(m.z=x.color),m}},{}],850:[function(_,oe,ae){"use strict";var m=_("probe-image-size/sync"),x=_("../../snapshot/helpers").IMAGE_URL_PREFIX,T=_("buffer/").Buffer;ae.getImageSize=function(b){var e=b.replace(x,""),o=new T(e,"base64");return m(o)}},{"../../snapshot/helpers":642,"buffer/":85,"probe-image-size/sync":276}],851:[function(_,oe,ae){"use strict";var m=_("../../components/fx"),x=_("../../lib"),T=_("./constants");oe.exports=function(b,e,o){var a=b.cd[0],l=a.trace,i=b.xa,d=b.ya;if(!(m.inbox(e-a.x0,e-(a.x0+a.w*l.dx),0)>0||m.inbox(o-a.y0,o-(a.y0+a.h*l.dy),0)>0)){var u,s=Math.floor((e-a.x0)/l.dx),c=Math.floor(Math.abs(o-a.y0)/l.dy);if(l._hasZ?u=a.z[c][s]:l._hasSource&&(u=l._canvas.el.getContext("2d").getImageData(s,c,1,1).data),u){var h,p=a.hi||l.hoverinfo;if(p){var v=p.split("+");-1!==v.indexOf("all")&&(v=["color"]),-1!==v.indexOf("color")&&(h=!0)}var g,f=T.colormodel[l.colormodel],w=f.colormodel||l.colormodel,y=w.length,M=l._scaler(u),A=f.suffix,k=[];(l.hovertemplate||h)&&(k.push("["+[M[0]+A[0],M[1]+A[1],M[2]+A[2]].join(", ")),4===y&&k.push(", "+M[3]+A[3]),k.push("]"),k=k.join(""),b.extraText=w.toUpperCase()+": "+k),Array.isArray(l.hovertext)&&Array.isArray(l.hovertext[c])?g=l.hovertext[c][s]:Array.isArray(l.text)&&Array.isArray(l.text[c])&&(g=l.text[c][s]);var C=d.c2p(a.y0+(c+.5)*l.dy),P=a.x0+(s+.5)*l.dx,D=a.y0+(c+.5)*l.dy,F="["+u.slice(0,l.colormodel.length).join(", ")+"]";return[x.extendFlat(b,{index:[c,s],x0:i.c2p(a.x0+s*l.dx),x1:i.c2p(a.x0+(s+1)*l.dx),y0:C,y1:C,color:M,xVal:P,xLabelVal:P,yVal:D,yLabelVal:D,zLabelVal:F,text:g,hovertemplateLabels:{zLabel:F,colorLabel:k,"color[0]Label":M[0]+A[0],"color[1]Label":M[1]+A[1],"color[2]Label":M[2]+A[2],"color[3]Label":M[3]+A[3]}})]}}}},{"../../components/fx":406,"../../lib":503,"./constants":847}],852:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("./plot"),style:_("./style"),hoverPoints:_("./hover"),eventData:_("./event_data"),moduleType:"trace",name:"image",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","2dMap","noSortingByValue"],animatable:!1,meta:{}}},{"../../plots/cartesian":568,"./attributes":845,"./calc":846,"./defaults":848,"./event_data":849,"./hover":851,"./plot":853,"./style":854}],853:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../lib"),T=x.strTranslate,b=_("../../constants/xmlns_namespaces"),e=_("./constants"),o=x.isIOS()||x.isSafari()||x.isIE();oe.exports=function(a,l,i,d){var u=l.xaxis,s=l.yaxis,c=!(o||a._context._exportedPlot);x.makeTraceGroups(d,i,"im").each(function(h){var p=m.select(this),v=h[0],g=v.trace,f=("fast"===g.zsmooth||!1===g.zsmooth&&c)&&!g._hasZ&&g._hasSource&&"linear"===u.type&&"linear"===s.type;g._realImage=f;var w,y,M,A,k,C,P=v.z,D=v.x0,F=v.y0,R=v.w,L=v.h,I=g.dx,B=g.dy;for(C=0;void 0===w&&C<R;)w=u.c2p(D+C*I),C++;for(C=R;void 0===y&&C>0;)y=u.c2p(D+C*I),C--;for(C=0;void 0===A&&C<L;)A=s.c2p(F+C*B),C++;for(C=L;void 0===k&&C>0;)k=s.c2p(F+C*B),C--;y<w&&(M=y,y=w,w=M),k<A&&(M=A,A=k,k=M),!f&&(w=Math.max(-.5*u._length,w),y=Math.min(1.5*u._length,y),A=Math.max(-.5*s._length,A),k=Math.min(1.5*s._length,k));var V=Math.round(y-w),Z=Math.round(k-A);if(V<=0||Z<=0)p.selectAll("image").data([]).exit().remove();else{var Y=p.selectAll("image").data([h]);Y.enter().append("svg:image").attr({xmlns:b.svg,preserveAspectRatio:"none"}),Y.exit().remove();var ee=!1===g.zsmooth?e.pixelatedStyle:"";if(f){var J=x.simpleMap(u.range,u.r2l),$=x.simpleMap(s.range,s.r2l),Q=J[1]<J[0],se=$[1]>$[0];if(Q||se){var j=w+V/2,G=A+Z/2;ee+="transform:"+T(j+"px",G+"px")+"scale("+(Q?-1:1)+","+(se?-1:1)+")"+T(-j+"px",-G+"px")+";"}}Y.attr("style",ee);var W=new Promise(function(q){if(g._hasZ)q();else if(g._hasSource)if(g._canvas&&g._canvas.el.width===R&&g._canvas.el.height===L&&g._canvas.source===g.source)q();else{var te=document.createElement("canvas");te.width=R,te.height=L;var ne=te.getContext("2d");g._image=g._image||new Image;var le=g._image;le.onload=function(){ne.drawImage(le,0,0),g._canvas={el:te,source:g.source},q()},le.setAttribute("src",g.source)}}).then(function(){var q;if(g._hasZ)q=ie(function(ne,le){return P[le][ne]}).toDataURL("image/png");else if(g._hasSource)if(f)q=g.source;else{var te=g._canvas.el.getContext("2d").getImageData(0,0,R,L).data;q=ie(function(ne,le){var ue=4*(le*R+ne);return[te[ue],te[ue+1],te[ue+2],te[ue+3]]}).toDataURL("image/png")}Y.attr({"xlink:href":q,height:Z,width:V,x:w,y:A})});a._promises.push(W)}function ie(q){var te=document.createElement("canvas");te.width=V,te.height=Z;var ne,le=te.getContext("2d"),ue=function(ve){return x.constrain(Math.round(u.c2p(D+ve*I)-w),0,V)},de=function(ve){return x.constrain(Math.round(s.c2p(F+ve*B)-A),0,Z)},he=e.colormodel[g.colormodel],be=he.colormodel||g.colormodel,ge=he.fmt;for(C=0;C<v.w;C++){var we=ue(C),Ce=ue(C+1);if(Ce!==we&&!isNaN(Ce)&&!isNaN(we))for(var De=0;De<v.h;De++){var Se=de(De),Fe=de(De+1);Fe===Se||isNaN(Fe)||isNaN(Se)||!q(C,De)||(ne=g._scaler(q(C,De)),le.fillStyle=ne?be+"("+ge(ne).join(",")+")":"rgba(0,0,0,0)",le.fillRect(we,Se,Ce-we,Fe-Se))}}return te}})}},{"../../constants/xmlns_namespaces":480,"../../lib":503,"./constants":847,"@plotly/d3":58}],854:[function(_,oe,ae){"use strict";var m=_("@plotly/d3");oe.exports=function(x){m.select(x).selectAll(".im image").style("opacity",function(T){return T[0].trace.opacity})}},{"@plotly/d3":58}],855:[function(_,oe,ae){"use strict";var m=_("../../lib/extend").extendFlat,x=_("../../lib/extend").extendDeep,T=_("../../plot_api/edit_types").overrideAll,b=_("../../plots/font_attributes"),e=_("../../components/color/attributes"),o=_("../../plots/domain").attributes,a=_("../../plots/cartesian/layout_attributes"),l=_("../../plot_api/plot_template").templatedArray,i=_("../../constants/delta.js"),d=_("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,u=b({editType:"plot",colorEditType:"plot"}),s={color:{valType:"color",editType:"plot"},line:{color:{valType:"color",dflt:e.defaultLine,editType:"plot"},width:{valType:"number",min:0,dflt:0,editType:"plot"},editType:"calc"},thickness:{valType:"number",min:0,max:1,dflt:1,editType:"plot"},editType:"calc"},c={valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},h=l("step",x({},s,{range:c}));oe.exports={mode:{valType:"flaglist",editType:"calc",flags:["number","delta","gauge"],dflt:"number"},value:{valType:"number",editType:"calc",anim:!0},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},domain:o({name:"indicator",trace:!0,editType:"calc"}),title:{text:{valType:"string",editType:"plot"},align:{valType:"enumerated",values:["left","center","right"],editType:"plot"},font:m({},u,{}),editType:"plot"},number:{valueformat:{valType:"string",dflt:"",editType:"plot",description:d("value")},font:m({},u,{}),prefix:{valType:"string",dflt:"",editType:"plot"},suffix:{valType:"string",dflt:"",editType:"plot"},editType:"plot"},delta:{reference:{valType:"number",editType:"calc"},position:{valType:"enumerated",values:["top","bottom","left","right"],dflt:"bottom",editType:"plot"},relative:{valType:"boolean",editType:"plot",dflt:!1},valueformat:{valType:"string",editType:"plot",description:d("value")},increasing:{symbol:{valType:"string",dflt:i.INCREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.INCREASING.COLOR,editType:"plot"},editType:"plot"},decreasing:{symbol:{valType:"string",dflt:i.DECREASING.SYMBOL,editType:"plot"},color:{valType:"color",dflt:i.DECREASING.COLOR,editType:"plot"},editType:"plot"},font:m({},u,{}),editType:"calc"},gauge:{shape:{valType:"enumerated",editType:"plot",dflt:"angular",values:["angular","bullet"]},bar:x({},s,{color:{dflt:"green"}}),bgcolor:{valType:"color",editType:"plot"},bordercolor:{valType:"color",dflt:e.defaultLine,editType:"plot"},borderwidth:{valType:"number",min:0,dflt:1,editType:"plot"},axis:T({range:c,visible:m({},a.visible,{dflt:!0}),tickmode:a.tickmode,nticks:a.nticks,tick0:a.tick0,dtick:a.dtick,tickvals:a.tickvals,ticktext:a.ticktext,ticks:m({},a.ticks,{dflt:"outside"}),ticklen:a.ticklen,tickwidth:a.tickwidth,tickcolor:a.tickcolor,ticklabelstep:a.ticklabelstep,showticklabels:a.showticklabels,tickfont:b({}),tickangle:a.tickangle,tickformat:a.tickformat,tickformatstops:a.tickformatstops,tickprefix:a.tickprefix,showtickprefix:a.showtickprefix,ticksuffix:a.ticksuffix,showticksuffix:a.showticksuffix,separatethousands:a.separatethousands,exponentformat:a.exponentformat,minexponent:a.minexponent,showexponent:a.showexponent,editType:"plot"},"plot"),steps:h,threshold:{line:{color:m({},s.line.color,{}),width:m({},s.line.width,{dflt:1}),editType:"plot"},thickness:m({},s.thickness,{dflt:.85}),value:{valType:"number",editType:"calc",dflt:!1},editType:"plot"},editType:"plot"}}},{"../../components/color/attributes":365,"../../constants/delta.js":473,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],856:[function(_,oe,ae){"use strict";var m=_("../../plots/plots");ae.name="indicator",ae.plot=function(x,T,b,e){m.plotBasePlot(ae.name,x,T,b,e)},ae.clean=function(x,T,b,e){m.cleanBasePlot(ae.name,x,T,b,e)}},{"../../plots/plots":619}],857:[function(_,oe,ae){"use strict";oe.exports={calc:function(m,x){var T=[],b=x.value;"number"!=typeof x._lastValue&&(x._lastValue=x.value);var e=x._lastValue,o=e;return x._hasDelta&&"number"==typeof x.delta.reference&&(o=x.delta.reference),T[0]={y:b,lastY:e,delta:b-o,relativeDelta:(b-o)/o},T}}},{}],858:[function(_,oe,ae){"use strict";oe.exports={defaultNumberFontSize:80,bulletNumberDomainSize:.25,bulletPadding:.025,innerRadius:.75,valueThickness:.5,titlePadding:5,horizontalPadding:10}},{}],859:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./attributes"),T=_("../../plots/domain").defaults,b=_("../../plot_api/plot_template"),e=_("../../plots/array_container_defaults"),o=_("./constants.js"),a=_("../../plots/cartesian/tick_value_defaults"),l=_("../../plots/cartesian/tick_mark_defaults"),i=_("../../plots/cartesian/tick_label_defaults"),d=_("../../plots/cartesian/prefix_suffix_defaults");function u(s,c){function h(p,v){return m.coerce(s,c,x.gauge.steps,p,v)}h("color"),h("line.color"),h("line.width"),h("range"),h("thickness")}oe.exports={supplyDefaults:function(s,c,h,p){function v(R,L){return m.coerce(s,c,x,R,L)}T(c,p,v),v("mode"),c._hasNumber=-1!==c.mode.indexOf("number"),c._hasDelta=-1!==c.mode.indexOf("delta"),c._hasGauge=-1!==c.mode.indexOf("gauge");var g=v("value");c._range=[0,"number"==typeof g?1.5*g:1];var f,w,y,M,A,k,C=new Array(2);function P(R,L){return m.coerce(y,M,x.gauge,R,L)}function D(R,L){return m.coerce(A,k,x.gauge.axis,R,L)}if(c._hasNumber&&(v("number.valueformat"),v("number.font.color",p.font.color),v("number.font.family",p.font.family),v("number.font.size"),void 0===c.number.font.size&&(c.number.font.size=o.defaultNumberFontSize,C[0]=!0),v("number.prefix"),v("number.suffix"),f=c.number.font.size),c._hasDelta&&(v("delta.font.color",p.font.color),v("delta.font.family",p.font.family),v("delta.font.size"),void 0===c.delta.font.size&&(c.delta.font.size=(c._hasNumber?.5:1)*(f||o.defaultNumberFontSize),C[1]=!0),v("delta.reference",c.value),v("delta.relative"),v("delta.valueformat",c.delta.relative?"2%":""),v("delta.increasing.symbol"),v("delta.increasing.color"),v("delta.decreasing.symbol"),v("delta.decreasing.color"),v("delta.position"),w=c.delta.font.size),c._scaleNumbers=(!c._hasNumber||C[0])&&(!c._hasDelta||C[1])||!1,v("title.font.color",p.font.color),v("title.font.family",p.font.family),v("title.font.size",.25*(f||w||o.defaultNumberFontSize)),v("title.text"),c._hasGauge){(y=s.gauge)||(y={}),M=b.newContainer(c,"gauge"),P("shape"),(c._isBullet="bullet"===c.gauge.shape)||v("title.align","center"),(c._isAngular="angular"===c.gauge.shape)||v("align","center"),P("bgcolor",p.paper_bgcolor),P("borderwidth"),P("bordercolor"),P("bar.color"),P("bar.line.color"),P("bar.line.width"),P("bar.thickness",o.valueThickness*("bullet"===c.gauge.shape?.5:1)),e(y,M,{name:"steps",handleItemDefaults:u}),P("threshold.value"),P("threshold.thickness"),P("threshold.line.width"),P("threshold.line.color"),A={},y&&(A=y.axis||{}),k=b.newContainer(M,"axis"),D("visible"),c._range=D("range",c._range);var F={outerTicks:!0};a(A,k,D,"linear"),d(A,k,D,"linear",F),i(A,k,D,"linear",F),l(A,k,D,F)}else v("title.align","center"),v("align","center"),c._isAngular=c._isBullet=!1;c._length=null}}},{"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/cartesian/prefix_suffix_defaults":573,"../../plots/cartesian/tick_label_defaults":578,"../../plots/cartesian/tick_mark_defaults":579,"../../plots/cartesian/tick_value_defaults":580,"../../plots/domain":584,"./attributes":855,"./constants.js":858}],860:[function(_,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"indicator",basePlotModule:_("./base_plot"),categories:["svg","noOpacity","noHover"],animatable:!0,attributes:_("./attributes"),supplyDefaults:_("./defaults").supplyDefaults,calc:_("./calc").calc,plot:_("./plot"),meta:{}}},{"./attributes":855,"./base_plot":856,"./calc":857,"./defaults":859,"./plot":861}],861:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("d3-interpolate").interpolate,T=_("d3-interpolate").interpolateNumber,b=_("../../lib"),e=b.strScale,o=b.strTranslate,a=b.rad2deg,l=_("../../constants/alignment").MID_SHIFT,i=_("../../components/drawing"),d=_("./constants"),u=_("../../lib/svg_text_utils"),s=_("../../plots/cartesian/axes"),c=_("../../plots/cartesian/axis_defaults"),h=_("../../plots/cartesian/position_defaults"),p=_("../../plots/cartesian/layout_attributes"),v=_("../../components/color"),g={left:"start",center:"middle",right:"end"},f={left:0,center:.5,right:1},w=/[yzafpn\xb5mkMGTPEZY]/;function y(D){return D&&D.duration>0}function M(D){D.each(function(F){v.stroke(m.select(this),F.line.color)}).each(function(F){v.fill(m.select(this),F.color)}).style("stroke-width",function(F){return F.line.width})}function A(D,F,R){var L=D._fullLayout,I=b.extendFlat({type:"linear",ticks:"outside",range:R,showline:!0},F),B={type:"linear",_id:"x"+F._id},V={letter:"x",font:L.font,noHover:!0,noTickson:!0};function Z(Y,ee){return b.coerce(I,B,p,Y,ee)}return c(I,B,Z,V,L),h(I,B,Z,V),B}function k(D,F,R){return[Math.min(F/D.width,R/D.height),D,F+"x"+R]}function C(D,F,R,L){var I=document.createElementNS("http://www.w3.org/2000/svg","text"),B=m.select(I);return B.text(D).attr("x",0).attr("y",0).attr("text-anchor",R).attr("data-unformatted",D).call(u.convertToTspans,L).call(i.font,F),i.bBox(B.node())}function P(D,F,R,L,I,B){var V="_cache"+F;D[V]&&D[V].key===I||(D[V]={key:I,value:R});var Z=b.aggNums(B,null,[D[V].value,L],2);return D[V].value=Z,Z}oe.exports=function(D,F,R,L){var I,B=D._fullLayout;y(R)&&L&&(I=L()),b.makeTraceGroups(B._indicatorlayer,F,"trace").each(function(V){var Z,Y,ee,J,$,Q=V[0].trace,se=m.select(this),j=Q._hasGauge,G=Q._isAngular,W=Q._isBullet,ie=Q.domain,q={w:B._size.w*(ie.x[1]-ie.x[0]),h:B._size.h*(ie.y[1]-ie.y[0]),l:B._size.l+B._size.w*ie.x[0],r:B._size.r+B._size.w*(1-ie.x[1]),t:B._size.t+B._size.h*(1-ie.y[1]),b:B._size.b+B._size.h*ie.y[0]},te=q.l+q.w/2,ne=q.t+q.h/2,le=Math.min(q.w/2,q.h),ue=d.innerRadius*le,de=Q.align||"center";if(Y=ne,j){if(G&&(Z=te,Y=ne+le/2,ee=function(Fe){return ve=Fe,[(Te=.9*ue)/Math.sqrt(ve.width/2*(ve.width/2)+ve.height*ve.height),ve,Te];var ve,Te}),W){var he=d.bulletPadding,be=1-d.bulletNumberDomainSize+he;Z=q.l+(be+(1-be)*f[de])*q.w,ee=function(Fe){return k(Fe,(d.bulletNumberDomainSize-he)*q.w,q.h)}}}else Z=q.l+f[de]*q.w,ee=function(Fe){return k(Fe,q.w,q.h)};(function(Fe,ve,Te,Le){var Ee,Pe,je,Ge=Te[0].trace,Ke=Le.numbersX,lt=Le.numbersY,Ue=Ge.align||"center",$e=g[Ue],et=Le.transitionOpts,tt=Le.onComplete,ct=b.ensureSingle(ve,"g","numbers"),xt=[];Ge._hasNumber&&xt.push("number"),Ge._hasDelta&&(xt.push("delta"),"left"===Ge.delta.position&&xt.reverse());var Ct=ct.selectAll("text").data(xt);function Ht(Qe,qe,it,Ie){if(!Qe.match("s")||it>=0==Ie>=0||qe(it).slice(-1).match(w)||qe(Ie).slice(-1).match(w))return qe;var ze=Qe.slice().replace("s","f").replace(/\d+/,function(Be){return parseInt(Be)-1}),Ve=A(Fe,{tickformat:ze});return function(Be){return Math.abs(Be)<1?s.tickText(Ve,Be).text:qe(Be)}}Ct.enter().append("text"),Ct.attr("text-anchor",function(){return $e}).attr("class",function(Qe){return Qe}).attr("x",null).attr("y",null).attr("dx",null).attr("dy",null),Ct.exit().remove();var zt,ht=Ge.mode+Ge.align;if(Ge._hasDelta&&(zt=function(){var Qe=A(Fe,{tickformat:Ge.delta.valueformat},Ge._range);Qe.setScale(),s.prepTicks(Qe);var qe=function(at){return s.tickText(Qe,at).text},it=function(at){return Ge.delta.relative?at.relativeDelta:at.delta},Ie=function(at,gt){return 0===at||"number"!=typeof at||isNaN(at)?"-":(at>0?Ge.delta.increasing.symbol:Ge.delta.decreasing.symbol)+gt(at)},ze=function(at){return at.delta>=0?Ge.delta.increasing.color:Ge.delta.decreasing.color};void 0===Ge._deltaLastValue&&(Ge._deltaLastValue=it(Te[0]));var Ve=ct.select("text.delta");function Be(){Ve.text(Ie(it(Te[0]),qe)).call(v.fill,ze(Te[0])).call(u.convertToTspans,Fe)}return Ve.call(i.font,Ge.delta.font).call(v.fill,ze({delta:Ge._deltaLastValue})),y(et)?Ve.transition().duration(et.duration).ease(et.easing).tween("text",function(){var at=m.select(this),gt=it(Te[0]),wt=Ge._deltaLastValue,_t=Ht(Ge.delta.valueformat,qe,wt,gt),Rt=T(wt,gt);return Ge._deltaLastValue=gt,function(yt){at.text(Ie(Rt(yt),_t)),at.call(v.fill,ze({delta:Rt(yt)}))}}).each("end",function(){Be(),tt&&tt()}).each("interrupt",function(){Be(),tt&&tt()}):Be(),Pe=C(Ie(it(Te[0]),qe),Ge.delta.font,$e,Fe),Ve}(),ht+=Ge.delta.position+Ge.delta.font.size+Ge.delta.font.family+Ge.delta.valueformat,ht+=Ge.delta.increasing.symbol+Ge.delta.decreasing.symbol,je=Pe),Ge._hasNumber&&(function(){var Qe=A(Fe,{tickformat:Ge.number.valueformat},Ge._range);Qe.setScale(),s.prepTicks(Qe);var qe=function(Be){return s.tickText(Qe,Be).text},it=Ge.number.suffix,Ie=Ge.number.prefix,ze=ct.select("text.number");function Ve(){var Be="number"==typeof Te[0].y?Ie+qe(Te[0].y)+it:"-";ze.text(Be).call(i.font,Ge.number.font).call(u.convertToTspans,Fe)}y(et)?ze.transition().duration(et.duration).ease(et.easing).each("end",function(){Ve(),tt&&tt()}).each("interrupt",function(){Ve(),tt&&tt()}).attrTween("text",function(){var Be=m.select(this),at=T(Te[0].lastY,Te[0].y);Ge._lastValue=Te[0].y;var gt=Ht(Ge.number.valueformat,qe,Te[0].lastY,Te[0].y);return function(wt){Be.text(Ie+gt(at(wt))+it)}}):Ve(),Ee=C(Ie+qe(Te[0].y)+it,Ge.number.font,$e,Fe)}(),ht+=Ge.number.font.size+Ge.number.font.family+Ge.number.valueformat+Ge.number.suffix+Ge.number.prefix,je=Ee),Ge._hasDelta&&Ge._hasNumber){var ut,Ot,tn=[(Ee.left+Ee.right)/2,(Ee.top+Ee.bottom)/2],un=[(Pe.left+Pe.right)/2,(Pe.top+Pe.bottom)/2],Ze=.75*Ge.delta.font.size;"left"===Ge.delta.position&&(ut=P(Ge,"deltaPos",0,-1*(Ee.width*f[Ge.align]+Pe.width*(1-f[Ge.align])+Ze),ht,Math.min),Ot=tn[1]-un[1],je={width:Ee.width+Pe.width+Ze,height:Math.max(Ee.height,Pe.height),left:Pe.left+ut,right:Ee.right,top:Math.min(Ee.top,Pe.top+Ot),bottom:Math.max(Ee.bottom,Pe.bottom+Ot)}),"right"===Ge.delta.position&&(ut=P(Ge,"deltaPos",0,Ee.width*(1-f[Ge.align])+Pe.width*f[Ge.align]+Ze,ht,Math.max),Ot=tn[1]-un[1],je={width:Ee.width+Pe.width+Ze,height:Math.max(Ee.height,Pe.height),left:Ee.left,right:Pe.right+ut,top:Math.min(Ee.top,Pe.top+Ot),bottom:Math.max(Ee.bottom,Pe.bottom+Ot)}),"bottom"===Ge.delta.position&&(ut=null,Ot=Pe.height,je={width:Math.max(Ee.width,Pe.width),height:Ee.height+Pe.height,left:Math.min(Ee.left,Pe.left),right:Math.max(Ee.right,Pe.right),top:Ee.bottom-Ee.height,bottom:Ee.bottom+Pe.height}),"top"===Ge.delta.position&&(ut=null,Ot=Ee.top,je={width:Math.max(Ee.width,Pe.width),height:Ee.height+Pe.height,left:Math.min(Ee.left,Pe.left),right:Math.max(Ee.right,Pe.right),top:Ee.bottom-Ee.height-Pe.height,bottom:Ee.bottom}),zt.attr({dx:ut,dy:Ot})}(Ge._hasNumber||Ge._hasDelta)&&ct.attr("transform",function(){var qe,Qe=Le.numbersScaler(je),it=P(Ge,"numbersScale",1,Qe[0],ht+=Qe[2],Math.min);Ge._scaleNumbers||(it=1),Ge._numbersTop=it*je.top+(qe=Ge._isAngular?lt-it*je.bottom:lt-it*(je.top+je.bottom)/2);var Ie=je[Ue];"center"===Ue&&(Ie=(je.left+je.right)/2);var ze=Ke-it*Ie;return ze=P(Ge,"numbersTranslate",0,ze,ht,Math.max),o(ze,qe)+e(it)})})(D,se,V,{numbersX:Z,numbersY:Y,numbersScaler:ee,transitionOpts:R,onComplete:I}),j&&(J={range:Q.gauge.axis.range,color:Q.gauge.bgcolor,line:{color:Q.gauge.bordercolor,width:0},thickness:1},$={range:Q.gauge.axis.range,color:"rgba(0, 0, 0, 0)",line:{color:Q.gauge.bordercolor,width:Q.gauge.borderwidth},thickness:1});var ge=se.selectAll("g.angular").data(G?V:[]);ge.exit().remove();var we=se.selectAll("g.angularaxis").data(G?V:[]);we.exit().remove(),G&&function(Fe,ve,Te,Le){var Ee,Pe,je,Ge,Ke=Te[0].trace,lt=Le.size,Ue=Le.radius,$e=Le.innerRadius,et=Le.gaugeBg,tt=Le.gaugeOutline,ct=[lt.l+lt.w/2,lt.t+lt.h/2+Ue/2],xt=Le.gauge,Ct=Le.layer,Ht=Le.transitionOpts,zt=Le.onComplete,ht=Math.PI/2;function ut(Nt){var rt=Ke.gauge.axis.range[0],Tt=(Nt-rt)/(Ke.gauge.axis.range[1]-rt)*Math.PI-ht;return Tt<-ht?-ht:Tt>ht?ht:Tt}function Ot(Nt){return m.svg.arc().innerRadius(($e+Ue)/2-Nt/2*(Ue-$e)).outerRadius(($e+Ue)/2+Nt/2*(Ue-$e)).startAngle(-ht)}function tn(Nt){Nt.attr("d",function(rt){return Ot(rt.thickness).startAngle(ut(rt.range[0])).endAngle(ut(rt.range[1]))()})}xt.enter().append("g").classed("angular",!0),xt.attr("transform",o(ct[0],ct[1])),Ct.enter().append("g").classed("angularaxis",!0).classed("crisp",!0),Ct.selectAll("g.xangularaxistick,path,text").remove(),(Ee=A(Fe,Ke.gauge.axis)).type="linear",Ee.range=Ke.gauge.axis.range,Ee._id="xangularaxis",Ee.ticklabeloverflow="allow",Ee.setScale();var un=function(Nt){return(Ee.range[0]-Nt.x)/(Ee.range[1]-Ee.range[0])*Math.PI+Math.PI},Ze={},Qe=s.makeLabelFns(Ee,0).labelStandoff;Ze.xFn=function(Nt){var rt=un(Nt);return Math.cos(rt)*Qe},Ze.yFn=function(Nt){var rt=un(Nt),Tt=Math.sin(rt)>0?.2:1;return-Math.sin(rt)*(Qe+Nt.fontSize*Tt)+Math.abs(Math.cos(rt))*(Nt.fontSize*l)},Ze.anchorFn=function(Nt){var rt=un(Nt),Tt=Math.cos(rt);return Math.abs(Tt)<.1?"middle":Tt>0?"start":"end"},Ze.heightFn=function(Nt,rt,Tt){var Ut=un(Nt);return-.5*(1+Math.sin(Ut))*Tt};var qe=function(Nt){return o(ct[0]+Ue*Math.cos(Nt),ct[1]-Ue*Math.sin(Nt))};je=function(Nt){return qe(un(Nt))},Pe=s.calcTicks(Ee),Ge=s.getTickSigns(Ee)[2],Ee.visible&&(s.drawTicks(Fe,Ee,{vals:Pe,layer:Ct,path:"M"+(Ge="inside"===Ee.ticks?-1:1)*((Ee.linewidth||1)/2)+",0h"+Ge*Ee.ticklen,transFn:function(Nt){var rt=un(Nt);return qe(rt)+"rotate("+-a(rt)+")"}}),s.drawLabels(Fe,Ee,{vals:Pe,layer:Ct,transFn:je,labelFns:Ze}));var Ie=[et].concat(Ke.gauge.steps),ze=xt.selectAll("g.bg-arc").data(Ie);ze.enter().append("g").classed("bg-arc",!0).append("path"),ze.select("path").call(tn).call(M),ze.exit().remove();var Ve=Ot(Ke.gauge.bar.thickness),Be=xt.selectAll("g.value-arc").data([Ke.gauge.bar]);Be.enter().append("g").classed("value-arc",!0).append("path");var gt,wt,_t,at=Be.select("path");y(Ht)?(at.transition().duration(Ht.duration).ease(Ht.easing).each("end",function(){zt&&zt()}).each("interrupt",function(){zt&&zt()}).attrTween("d",(gt=Ve,wt=ut(Te[0].lastY),_t=ut(Te[0].y),function(){var Nt=x(wt,_t);return function(rt){return gt.endAngle(Nt(rt))()}})),Ke._lastValue=Te[0].y):at.attr("d","number"==typeof Te[0].y?Ve.endAngle(ut(Te[0].y)):"M0,0Z"),at.call(M),Be.exit().remove(),Ie=[];var Rt=Ke.gauge.threshold.value;(Rt||0===Rt)&&Ie.push({range:[Rt,Rt],color:Ke.gauge.threshold.color,line:{color:Ke.gauge.threshold.line.color,width:Ke.gauge.threshold.line.width},thickness:Ke.gauge.threshold.thickness});var yt=xt.selectAll("g.threshold-arc").data(Ie);yt.enter().append("g").classed("threshold-arc",!0).append("path"),yt.select("path").call(tn).call(M),yt.exit().remove();var Vt=xt.selectAll("g.gauge-outline").data([tt]);Vt.enter().append("g").classed("gauge-outline",!0).append("path"),Vt.select("path").call(tn).call(M),Vt.exit().remove()}(D,0,V,{radius:le,innerRadius:ue,gauge:ge,layer:we,size:q,gaugeBg:J,gaugeOutline:$,transitionOpts:R,onComplete:I});var Ce=se.selectAll("g.bullet").data(W?V:[]);Ce.exit().remove();var De=se.selectAll("g.bulletaxis").data(W?V:[]);De.exit().remove(),W&&function(Fe,ve,Te,Le){var Ee,Pe,je,Ge,Ke,lt=Te[0].trace,Ue=Le.gauge,$e=Le.layer,et=Le.gaugeBg,tt=Le.gaugeOutline,ct=Le.size,xt=lt.domain,Ct=Le.transitionOpts,Ht=Le.onComplete;Ue.enter().append("g").classed("bullet",!0),Ue.attr("transform",o(ct.l,ct.t)),$e.enter().append("g").classed("bulletaxis",!0).classed("crisp",!0),$e.selectAll("g.xbulletaxistick,path,text").remove();var zt=ct.h,ht=lt.gauge.bar.thickness*zt,ut=xt.x[0],Ot=xt.x[0]+(xt.x[1]-xt.x[0])*(lt._hasNumber||lt._hasDelta?1-d.bulletNumberDomainSize:1);function tn(ze){ze.attr("width",function(Ve){return Math.max(0,Ee.c2p(Ve.range[1])-Ee.c2p(Ve.range[0]))}).attr("x",function(Ve){return Ee.c2p(Ve.range[0])}).attr("y",function(Ve){return.5*(1-Ve.thickness)*zt}).attr("height",function(Ve){return Ve.thickness*zt})}(Ee=A(Fe,lt.gauge.axis))._id="xbulletaxis",Ee.domain=[ut,Ot],Ee.setScale(),Pe=s.calcTicks(Ee),je=s.makeTransTickFn(Ee),Ge=s.getTickSigns(Ee)[2],Ke=ct.t+ct.h,Ee.visible&&(s.drawTicks(Fe,Ee,{vals:"inside"===Ee.ticks?s.clipEnds(Ee,Pe):Pe,layer:$e,path:s.makeTickPath(Ee,Ke,Ge),transFn:je}),s.drawLabels(Fe,Ee,{vals:Pe,layer:$e,transFn:je,labelFns:s.makeLabelFns(Ee,Ke)}));var un=[et].concat(lt.gauge.steps),Ze=Ue.selectAll("g.bg-bullet").data(un);Ze.enter().append("g").classed("bg-bullet",!0).append("rect"),Ze.select("rect").call(tn).call(M),Ze.exit().remove();var Qe=Ue.selectAll("g.value-bullet").data([lt.gauge.bar]);Qe.enter().append("g").classed("value-bullet",!0).append("rect"),Qe.select("rect").attr("height",ht).attr("y",(zt-ht)/2).call(M),y(Ct)?Qe.select("rect").transition().duration(Ct.duration).ease(Ct.easing).each("end",function(){Ht&&Ht()}).each("interrupt",function(){Ht&&Ht()}).attr("width",Math.max(0,Ee.c2p(Math.min(lt.gauge.axis.range[1],Te[0].y)))):Qe.select("rect").attr("width","number"==typeof Te[0].y?Math.max(0,Ee.c2p(Math.min(lt.gauge.axis.range[1],Te[0].y))):0),Qe.exit().remove();var qe=Te.filter(function(){return lt.gauge.threshold.value||0===lt.gauge.threshold.value}),it=Ue.selectAll("g.threshold-bullet").data(qe);it.enter().append("g").classed("threshold-bullet",!0).append("line"),it.select("line").attr("x1",Ee.c2p(lt.gauge.threshold.value)).attr("x2",Ee.c2p(lt.gauge.threshold.value)).attr("y1",(1-lt.gauge.threshold.thickness)/2*zt).attr("y2",(1-(1-lt.gauge.threshold.thickness)/2)*zt).call(v.stroke,lt.gauge.threshold.line.color).style("stroke-width",lt.gauge.threshold.line.width),it.exit().remove();var Ie=Ue.selectAll("g.gauge-outline").data([tt]);Ie.enter().append("g").classed("gauge-outline",!0).append("rect"),Ie.select("rect").call(tn).call(M),Ie.exit().remove()}(D,0,V,{gauge:Ce,layer:De,size:q,gaugeBg:J,gaugeOutline:$,transitionOpts:R,onComplete:I});var Se=se.selectAll("text.title").data(V);Se.exit().remove(),Se.enter().append("text").classed("title",!0),Se.attr("text-anchor",function(){return W?g.right:g[Q.title.align]}).text(Q.title.text).call(i.font,Q.title.font).call(u.convertToTspans,D),Se.attr("transform",function(){var Fe,ve=q.l+q.w*f[Q.title.align],Te=d.titlePadding,Le=i.bBox(Se.node());return j?(G&&(Fe=Q.gauge.axis.visible?i.bBox(we.node()).top-Te-Le.bottom:q.t+q.h/2-le/2-Le.bottom-Te),W&&(Fe=Y-(Le.top+Le.bottom)/2,ve=q.l-d.bulletPadding*q.w)):Fe=Q._numbersTop-Te-Le.bottom,o(ve,Fe)})})}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_defaults":556,"../../plots/cartesian/layout_attributes":569,"../../plots/cartesian/position_defaults":572,"./constants":858,"@plotly/d3":58,"d3-interpolate":116}],862:[function(_,oe,ae){"use strict";var m=_("../../components/colorscale/attributes"),x=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../mesh3d/attributes"),e=_("../../plots/attributes"),o=_("../../lib/extend").extendFlat,a=_("../../plot_api/edit_types").overrideAll,l=oe.exports=a(o({x:{valType:"data_array"},y:{valType:"data_array"},z:{valType:"data_array"},value:{valType:"data_array"},isomin:{valType:"number"},isomax:{valType:"number"},surface:{show:{valType:"boolean",dflt:!0},count:{valType:"integer",dflt:2,min:1},fill:{valType:"number",min:0,max:1,dflt:1},pattern:{valType:"flaglist",flags:["A","B","C","D","E"],extras:["all","odd","even"],dflt:"all"}},spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:.15}},slices:{x:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!1},locations:{valType:"data_array",dflt:[]},fill:{valType:"number",min:0,max:1,dflt:1}}},caps:{x:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},y:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}},z:{show:{valType:"boolean",dflt:!0},fill:{valType:"number",min:0,max:1,dflt:1}}},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:T(),xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z"),valuehoverformat:x("value",1),showlegend:o({},e.showlegend,{dflt:!1})},m("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:b.opacity,lightposition:b.lightposition,lighting:b.lighting,flatshading:b.flatshading,contour:b.contour,hoverinfo:o({},e.hoverinfo)}),"calc","nested");l.flatshading.dflt=!0,l.lighting.facenormalsepsilon.dflt=0,l.x.editType=l.y.editType=l.z.editType=l.value.editType="calc+clearAxisTypes",l.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],863:[function(_,oe,ae){"use strict";var m=_("../../components/colorscale/calc"),x=_("../streamtube/calc").processGrid,T=_("../streamtube/calc").filter;oe.exports=function(b,e){e._len=Math.min(e.x.length,e.y.length,e.z.length,e.value.length),e._x=T(e.x,e._len),e._y=T(e.y,e._len),e._z=T(e.z,e._len),e._value=T(e.value,e._len);var o=x(e);e._gridFill=o.fill,e._Xs=o.Xs,e._Ys=o.Ys,e._Zs=o.Zs,e._len=o.len;for(var a=1/0,l=-1/0,i=0;i<e._len;i++){var d=e._value[i];a=Math.min(a,d),l=Math.max(l,d)}e._minValues=a,e._maxValues=l,e._vMin=null==e.isomin?a:e.isomin,e._vMax=void 0===e.isomax||null===e.isomin?l:e.isomax,m(b,e,{vals:[e._vMin,e._vMax],containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374,"../streamtube/calc":1041}],864:[function(_,oe,ae){"use strict";var m=_("../../../stackgl_modules").gl_mesh3d,x=_("../../lib/gl_format_color").parseColorScale,T=_("../../lib/str2rgbarray"),b=_("../../components/colorscale").extractOpts,e=_("../../plots/gl3d/zip3"),o=function(u,s){for(var c=s.length-1;c>0;c--){var h=Math.min(s[c],s[c-1]),p=Math.max(s[c],s[c-1]);if(p>h&&h<u&&u<=p)return{id:c,distRatio:(p-u)/(p-h)}}return{id:0,distRatio:0}};function a(u,s,c){this.scene=u,this.uid=c,this.mesh=s,this.name="",this.data=null,this.showContour=!1}var l=a.prototype;l.handlePick=function(u){if(u.object===this.mesh){var s=u.data.index,h=this.data._meshY[s],p=this.data._meshZ[s],v=this.data._Ys.length,g=this.data._Zs.length,f=o(this.data._meshX[s],this.data._Xs).id,w=o(h,this.data._Ys).id,y=o(p,this.data._Zs).id,M=u.index=y+g*w+g*v*f;u.traceCoordinate=[this.data._meshX[M],this.data._meshY[M],this.data._meshZ[M],this.data._value[M]];var A=this.data.hovertext||this.data.text;return Array.isArray(A)&&void 0!==A[M]?u.textLabel=A[M]:A&&(u.textLabel=A),!0}},l.update=function(u){var s=this.scene,c=s.fullSceneLayout;function h(g,f,w,y){return f.map(function(M){return g.d2l(M,0,y)*w})}this.data=d(u);var p={positions:e(h(c.xaxis,u._meshX,s.dataScale[0],u.xcalendar),h(c.yaxis,u._meshY,s.dataScale[1],u.ycalendar),h(c.zaxis,u._meshZ,s.dataScale[2],u.zcalendar)),cells:e(u._meshI,u._meshJ,u._meshK),lightPosition:[u.lightposition.x,u.lightposition.y,u.lightposition.z],ambient:u.lighting.ambient,diffuse:u.lighting.diffuse,specular:u.lighting.specular,roughness:u.lighting.roughness,fresnel:u.lighting.fresnel,vertexNormalsEpsilon:u.lighting.vertexnormalsepsilon,faceNormalsEpsilon:u.lighting.facenormalsepsilon,opacity:u.opacity,contourEnable:u.contour.show,contourColor:T(u.contour.color).slice(0,3),contourWidth:u.contour.width,useFacetNormals:u.flatshading},v=b(u);p.vertexIntensity=u._meshIntensity,p.vertexIntensityBounds=[v.min,v.max],p.colormap=x(u),this.mesh.update(p)},l.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()};var i=["xyz","xzy","yxz","yzx","zxy","zyx"];function d(u){u._meshI=[],u._meshJ=[],u._meshK=[];var s,c,h,p,v,g,f,w=u.surface.show,y=u.spaceframe.show,M=u.surface.fill,A=u.spaceframe.fill,k=!1,C=!1,P=0,D=u._Xs,F=u._Ys,R=u._Zs,L=D.length,I=F.length,B=R.length,V=i.indexOf(u._gridFill.replace(/-/g,"").replace(/\+/g,"")),Z=function(Ue,$e,et){switch(V){case 5:return et+B*$e+B*I*Ue;case 4:return et+B*Ue+B*L*$e;case 3:return $e+I*et+I*B*Ue;case 2:return $e+I*Ue+I*L*et;case 1:return Ue+L*et+L*B*$e;default:return Ue+L*$e+L*I*et}},Y=u._minValues,ee=u._maxValues,J=u._vMin,$=u._vMax;function Q(Ue,$e,et){for(var tt=g.length,ct=c;ct<tt;ct++)if(Ue===h[ct]&&$e===p[ct]&&et===v[ct])return ct;return-1}function se(){c=s}function j(){h=[],p=[],v=[],g=[],s=0,se()}function G(Ue,$e,et,tt){return h.push(Ue),p.push($e),v.push(et),g.push(tt),++s-1}function W(Ue,$e,et){for(var tt=[],ct=0;ct<Ue.length;ct++)tt[ct]=Ue[ct]*(1-et)+et*$e[ct];return tt}function ie(Ue){f=Ue}function q(Ue,$e){return"all"===Ue||null===Ue||Ue.indexOf($e)>-1}function te(Ue,$e){return null===Ue?$e:Ue}function ne(Ue,$e,et){se();var ct,xt,it,Ie,ze,Ve,Be,at,gt,wt,_t,Rt,yt,Vt,Nt,Ct=[$e],Ht=[et];if(f>=1)Ct=[$e],Ht=[et];else if(f>0){var zt=(Ie=et,wt=W(at=function(rt,Tt,Ut){for(var Wt=[],sn=0;sn<rt.length;sn++)Wt[sn]=(rt[sn]+Tt[sn]+Ut[sn])/3;return Wt}(ze=(it=$e)[0],Ve=it[1],Be=it[2]),ze,gt=Math.sqrt(1-f)),{xyzv:[[ze,Ve,_t=W(at,Ve,gt)],[_t,wt,ze],[Ve,Be,Rt=W(at,Be,gt)],[Rt,_t,Ve],[Be,ze,wt],[wt,Rt,Be]],abc:[[yt=Ie[0],Vt=Ie[1],-1],[-1,-1,yt],[Vt,Nt=Ie[2],-1],[-1,-1,Vt],[Nt,yt,-1],[-1,-1,Nt]]});Ct=zt.xyzv,Ht=zt.abc}for(var ht=0;ht<Ct.length;ht++){$e=Ct[ht],et=Ht[ht];for(var ut=[],Ot=0;Ot<3;Ot++){var tn=$e[Ot][0],un=$e[Ot][1],Ze=$e[Ot][2],Qe=$e[Ot][3],qe=et[Ot]>-1?et[Ot]:Q(tn,un,Ze);ut[Ot]=qe>-1?qe:G(tn,un,Ze,te(Ue,Qe))}ct=ut[1],xt=ut[2],u._meshI.push(ut[0]),u._meshJ.push(ct),u._meshK.push(xt),++P}}function le(Ue,$e,et,tt){var ct=Ue[3];ct<et&&(ct=et),ct>tt&&(ct=tt);for(var xt=(Ue[3]-ct)/(Ue[3]-$e[3]+1e-9),Ct=[],Ht=0;Ht<4;Ht++)Ct[Ht]=(1-xt)*Ue[Ht]+xt*$e[Ht];return Ct}function ue(Ue,$e,et){return Ue>=$e&&Ue<=et}function de(Ue){var $e=.001*($-J);return Ue>=J-$e&&Ue<=$+$e}function he(Ue){for(var $e=[],et=0;et<4;et++){var tt=Ue[et];$e.push([u._x[tt],u._y[tt],u._z[tt],u._value[tt]])}return $e}function be(Ue,$e,et,tt,ct,xt){xt||(xt=1),et=[-1,-1,-1];var Ct=!1,Ht=[ue($e[0][3],tt,ct),ue($e[1][3],tt,ct),ue($e[2][3],tt,ct)];if(!Ht[0]&&!Ht[1]&&!Ht[2])return!1;var zt=function(ut,Ot,tn){return de(Ot[0][3])&&de(Ot[1][3])&&de(Ot[2][3])?(ne(ut,Ot,tn),!0):xt<3&&be(ut,Ot,tn,J,$,++xt)};if(Ht[0]&&Ht[1]&&Ht[2])return zt(Ue,$e,et)||Ct;var ht=!1;return[[0,1,2],[2,0,1],[1,2,0]].forEach(function(ut){if(Ht[ut[0]]&&Ht[ut[1]]&&!Ht[ut[2]]){var Ot=$e[ut[0]],tn=$e[ut[1]],un=$e[ut[2]],Ze=le(un,Ot,tt,ct),Qe=le(un,tn,tt,ct);Ct=zt(Ue,[Qe,Ze,Ot],[-1,-1,et[ut[0]]])||Ct,Ct=zt(Ue,[Ot,tn,Qe],[et[ut[0]],et[ut[1]],-1])||Ct,ht=!0}}),ht||[[0,1,2],[1,2,0],[2,0,1]].forEach(function(ut){if(Ht[ut[0]]&&!Ht[ut[1]]&&!Ht[ut[2]]){var Ot=$e[ut[0]],un=$e[ut[2]],Ze=le($e[ut[1]],Ot,tt,ct),Qe=le(un,Ot,tt,ct);Ct=zt(Ue,[Qe,Ze,Ot],[-1,-1,et[ut[0]]])||Ct,ht=!0}}),Ct}function ge(Ue,$e,et,tt){var zt,ht,ut,Ot,ct=!1,xt=he($e),Ct=[ue(xt[0][3],et,tt),ue(xt[1][3],et,tt),ue(xt[2][3],et,tt),ue(xt[3][3],et,tt)];if(!(Ct[0]||Ct[1]||Ct[2]||Ct[3]))return ct;if(Ct[0]&&Ct[1]&&Ct[2]&&Ct[3])return C&&(zt=Ue,ht=xt,ut=$e,(Ot=function(tn,un,Ze){ne(zt,[ht[tn],ht[un],ht[Ze]],[ut[tn],ut[un],ut[Ze]])})(0,1,2),Ot(3,0,1),Ot(2,3,0),ct=void Ot(1,2,3)||ct),ct;var Ht=!1;return[[0,1,2,3],[3,0,1,2],[2,3,0,1],[1,2,3,0]].forEach(function(zt){if(Ct[zt[0]]&&Ct[zt[1]]&&Ct[zt[2]]&&!Ct[zt[3]]){var ht=xt[zt[0]],ut=xt[zt[1]],Ot=xt[zt[2]],tn=xt[zt[3]];if(C)ct=ne(Ue,[ht,ut,Ot],[$e[zt[0]],$e[zt[1]],$e[zt[2]]])||ct;else{var un=le(tn,ht,et,tt),Ze=le(tn,ut,et,tt),Qe=le(tn,Ot,et,tt);ct=ne(null,[un,Ze,Qe],[-1,-1,-1])||ct}Ht=!0}}),Ht||([[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2],[0,2,3,1],[1,3,2,0]].forEach(function(zt){if(Ct[zt[0]]&&Ct[zt[1]]&&!Ct[zt[2]]&&!Ct[zt[3]]){var ht=xt[zt[0]],ut=xt[zt[1]],Ot=xt[zt[2]],tn=xt[zt[3]],un=le(Ot,ht,et,tt),Ze=le(Ot,ut,et,tt),Qe=le(tn,ut,et,tt),qe=le(tn,ht,et,tt);C?(ct=ne(Ue,[ht,qe,un],[$e[zt[0]],-1,-1])||ct,ct=ne(Ue,[ut,Ze,Qe],[$e[zt[1]],-1,-1])||ct):(null,Ie=[un,Ze,Qe,qe],ze=[-1,-1,-1,-1],(Ve=function(Be,at,gt){ne(null,[Ie[Be],Ie[at],Ie[gt]],[ze[Be],ze[at],ze[gt]])})(0,1,2),ct=void Ve(2,3,0)||ct),Ht=!0}var Ie,ze,Ve}),Ht||[[0,1,2,3],[1,2,3,0],[2,3,0,1],[3,0,1,2]].forEach(function(zt){if(Ct[zt[0]]&&!Ct[zt[1]]&&!Ct[zt[2]]&&!Ct[zt[3]]){var ht=xt[zt[0]],Ot=xt[zt[2]],tn=xt[zt[3]],un=le(xt[zt[1]],ht,et,tt),Ze=le(Ot,ht,et,tt),Qe=le(tn,ht,et,tt);C?(ct=ne(Ue,[ht,un,Ze],[$e[zt[0]],-1,-1])||ct,ct=ne(Ue,[ht,Ze,Qe],[$e[zt[0]],-1,-1])||ct,ct=ne(Ue,[ht,Qe,un],[$e[zt[0]],-1,-1])||ct):ct=ne(null,[un,Ze,Qe],[-1,-1,-1])||ct,Ht=!0}})),ct}function we(Ue,$e,et,tt,ct,xt,Ct,Ht,zt,ht,ut){var Ot=!1;return k&&(q(Ue,"A")&&(Ot=ge(null,[$e,et,tt,xt],ht,ut)||Ot),q(Ue,"B")&&(Ot=ge(null,[et,tt,ct,zt],ht,ut)||Ot),q(Ue,"C")&&(Ot=ge(null,[et,xt,Ct,zt],ht,ut)||Ot),q(Ue,"D")&&(Ot=ge(null,[tt,xt,Ht,zt],ht,ut)||Ot),q(Ue,"E")&&(Ot=ge(null,[et,tt,xt,zt],ht,ut)||Ot)),C&&(Ot=ge(Ue,[et,tt,xt,zt],ht,ut)||Ot),Ot}function Ce(Ue,$e,et,tt,ct,xt,Ct,Ht){return[!0===Ht[0]||be(Ue,he([$e,et,tt]),[$e,et,tt],xt,Ct),!0===Ht[1]||be(Ue,he([tt,ct,$e]),[tt,ct,$e],xt,Ct)]}function De(Ue,$e,et,tt,ct,xt,Ct,Ht,zt){return Ht?Ce(Ue,$e,et,ct,tt,xt,Ct,zt):Ce(Ue,et,ct,tt,$e,xt,Ct,zt)}function Se(Ue,$e,et,tt,ct,xt,Ct){var Ht,zt,ht,ut,Ot=!1,tn=function(){Ot=be(Ue,[Ht,zt,ht],[-1,-1,-1],ct,xt)||Ot,Ot=be(Ue,[ht,ut,Ht],[-1,-1,-1],ct,xt)||Ot},un=Ct[0],Ze=Ct[1],Qe=Ct[2];return un&&(Ht=W(he([Z($e,et-0,tt-0)])[0],he([Z($e-1,et-0,tt-0)])[0],un),zt=W(he([Z($e,et-0,tt-1)])[0],he([Z($e-1,et-0,tt-1)])[0],un),ht=W(he([Z($e,et-1,tt-1)])[0],he([Z($e-1,et-1,tt-1)])[0],un),ut=W(he([Z($e,et-1,tt-0)])[0],he([Z($e-1,et-1,tt-0)])[0],un),tn()),Ze&&(Ht=W(he([Z($e-0,et,tt-0)])[0],he([Z($e-0,et-1,tt-0)])[0],Ze),zt=W(he([Z($e-0,et,tt-1)])[0],he([Z($e-0,et-1,tt-1)])[0],Ze),ht=W(he([Z($e-1,et,tt-1)])[0],he([Z($e-1,et-1,tt-1)])[0],Ze),ut=W(he([Z($e-1,et,tt-0)])[0],he([Z($e-1,et-1,tt-0)])[0],Ze),tn()),Qe&&(Ht=W(he([Z($e-0,et-0,tt)])[0],he([Z($e-0,et-0,tt-1)])[0],Qe),zt=W(he([Z($e-0,et-1,tt)])[0],he([Z($e-0,et-1,tt-1)])[0],Qe),ht=W(he([Z($e-1,et-1,tt)])[0],he([Z($e-1,et-1,tt-1)])[0],Qe),ut=W(he([Z($e-1,et-0,tt)])[0],he([Z($e-1,et-0,tt-1)])[0],Qe),tn()),Ot}function Fe(Ue,$e,et,tt,ct,xt,Ct,Ht,zt,ht,ut,Ot){var tn=Ue;return Ot?(k&&"even"===Ue&&(tn=null),we(tn,$e,et,tt,ct,xt,Ct,Ht,zt,ht,ut)):(k&&"odd"===Ue&&(tn=null),we(tn,zt,Ht,Ct,xt,ct,tt,et,$e,ht,ut))}function ve(Ue,$e,et,tt,ct){for(var xt=[],Ct=0,Ht=0;Ht<$e.length;Ht++)for(var zt=$e[Ht],ht=1;ht<B;ht++)for(var ut=1;ut<I;ut++)xt.push(De(Ue,Z(zt,ut-1,ht-1),Z(zt,ut-1,ht),Z(zt,ut,ht-1),Z(zt,ut,ht),et,tt,(zt+ut+ht)%2,ct&&ct[Ct]?ct[Ct]:[])),Ct++;return xt}function Te(Ue,$e,et,tt,ct){for(var xt=[],Ct=0,Ht=0;Ht<$e.length;Ht++)for(var zt=$e[Ht],ht=1;ht<L;ht++)for(var ut=1;ut<B;ut++)xt.push(De(Ue,Z(ht-1,zt,ut-1),Z(ht,zt,ut-1),Z(ht-1,zt,ut),Z(ht,zt,ut),et,tt,(ht+zt+ut)%2,ct&&ct[Ct]?ct[Ct]:[])),Ct++;return xt}function Le(Ue,$e,et,tt,ct){for(var xt=[],Ct=0,Ht=0;Ht<$e.length;Ht++)for(var zt=$e[Ht],ht=1;ht<I;ht++)for(var ut=1;ut<L;ut++)xt.push(De(Ue,Z(ut-1,ht-1,zt),Z(ut-1,ht,zt),Z(ut,ht-1,zt),Z(ut,ht,zt),et,tt,(ut+ht+zt)%2,ct&&ct[Ct]?ct[Ct]:[])),Ct++;return xt}function Ee(Ue,$e,et){for(var tt=1;tt<B;tt++)for(var ct=1;ct<I;ct++)for(var xt=1;xt<L;xt++)Fe(Ue,Z(xt-1,ct-1,tt-1),Z(xt-1,ct-1,tt),Z(xt-1,ct,tt-1),Z(xt-1,ct,tt),Z(xt,ct-1,tt-1),Z(xt,ct-1,tt),Z(xt,ct,tt-1),Z(xt,ct,tt),$e,et,(xt+ct+tt)%2)}function Pe(Ue,$e,et){k=!0,Ee(Ue,$e,et),k=!1}function je(Ue,$e,et,tt,ct,xt){for(var Ct=[],zt=0;zt<$e.length;zt++)for(var ht=$e[zt],ut=1;ut<B;ut++)for(var Ot=1;Ot<I;Ot++)Ct.push(Se(Ue,ht,Ot,ut,et,tt,ct[zt]));return Ct}function Ge(Ue,$e,et,tt,ct,xt){for(var Ct=[],zt=0;zt<$e.length;zt++)for(var ht=$e[zt],ut=1;ut<L;ut++)for(var Ot=1;Ot<B;Ot++)Ct.push(Se(Ue,ut,ht,Ot,et,tt,ct[zt]));return Ct}function Ke(Ue,$e,et,tt,ct,xt){for(var Ct=[],zt=0;zt<$e.length;zt++)for(var ht=$e[zt],ut=1;ut<I;ut++)for(var Ot=1;Ot<L;Ot++)Ct.push(Se(Ue,Ot,ut,ht,et,tt,ct[zt]));return Ct}function lt(Ue,$e){for(var et=[],tt=Ue;tt<$e;tt++)et.push(tt);return et}return function(){if(j(),function(){for(var Ht=0;Ht<L;Ht++)for(var zt=0;zt<I;zt++)for(var ht=0;ht<B;ht++){var ut=Z(Ht,zt,ht);G(u._x[ut],u._y[ut],u._z[ut],u._value[ut])}}(),y&&A&&(ie(A),C=!0,Ee(null,J,$),C=!1),w&&M){ie(M);for(var Ue=u.surface.pattern,$e=u.surface.count,et=0;et<$e;et++){var tt=1===$e?.5:et/($e-1),ct=(1-tt)*J+tt*$,xt=Math.abs(ct-Y)>Math.abs(ct-ee)?[Y,ct]:[ct,ee];Pe(Ue,xt[0],xt[1])}}var Ct=[[Math.min(J,ee),Math.max(J,ee)],[Math.min(Y,$),Math.max(Y,$)]];["x","y","z"].forEach(function(Ht){for(var zt=[],ht=0;ht<Ct.length;ht++){var ut=0,Ot=Ct[ht][0],tn=Ct[ht][1],un=u.slices[Ht];if(un.show&&un.fill){ie(un.fill);var Ze=[],Qe=[],qe=[];if(un.locations.length)for(var it=0;it<un.locations.length;it++){var Ie=o(un.locations[it],"x"===Ht?D:"y"===Ht?F:R);0===Ie.distRatio?Ze.push(Ie.id):Ie.id>0&&(Qe.push(Ie.id),qe.push("x"===Ht?[Ie.distRatio,0,0]:"y"===Ht?[0,Ie.distRatio,0]:[0,0,Ie.distRatio]))}else Ze=lt(1,"x"===Ht?L-1:"y"===Ht?I-1:B-1);Qe.length>0&&(zt[ut]="x"===Ht?je(null,Qe,Ot,tn,qe):"y"===Ht?Ge(null,Qe,Ot,tn,qe):Ke(null,Qe,Ot,tn,qe),ut++),Ze.length>0&&(zt[ut]="x"===Ht?ve(null,Ze,Ot,tn,zt[ut]):"y"===Ht?Te(null,Ze,Ot,tn,zt[ut]):Le(null,Ze,Ot,tn,zt[ut]),ut++)}var ze=u.caps[Ht];ze.show&&ze.fill&&(ie(ze.fill),zt[ut]="x"===Ht?ve(null,[0,L-1],Ot,tn,zt[ut]):"y"===Ht?Te(null,[0,I-1],Ot,tn,zt[ut]):Le(null,[0,B-1],Ot,tn,zt[ut]),ut++)}}),0===P&&j(),u._meshX=h,u._meshY=p,u._meshZ=v,u._meshIntensity=g,u._Xs=D,u._Ys=F,u._Zs=R}(),u}oe.exports={findNearestOnAxis:o,generateIsoMeshes:d,createIsosurfaceTrace:function(u,s){var h=m({gl:u.glplot.gl}),p=new a(u,h,s.uid);return h._trace=p,p.update(s),u.glplot.add(h),p}}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],865:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../registry"),T=_("./attributes"),b=_("../../components/colorscale/defaults");function e(o,a,l,i,d){var u=d("isomin"),s=d("isomax");null!=s&&null!=u&&u>s&&(a.isomin=null,a.isomax=null);var c=d("x"),h=d("y"),p=d("z"),v=d("value");c&&c.length&&h&&h.length&&p&&p.length&&v&&v.length?(x.getComponentMethod("calendars","handleTraceDefaults")(o,a,["x","y","z"],i),d("valuehoverformat"),["x","y","z"].forEach(function(g){d(g+"hoverformat");var f="caps."+g;d(f+".show")&&d(f+".fill");var w="slices."+g;d(w+".show")&&(d(w+".fill"),d(w+".locations"))}),d("spaceframe.show")&&d("spaceframe.fill"),d("surface.show")&&(d("surface.count"),d("surface.fill"),d("surface.pattern")),d("contour.show")&&(d("contour.color"),d("contour.width")),["text","hovertext","hovertemplate","lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","opacity"].forEach(function(g){d(g)}),b(o,a,i,d,{prefix:"",cLetter:"c"}),a._length=null):a.visible=!1}oe.exports={supplyDefaults:function(o,a,l,i){e(o,a,0,i,function(d,u){return m.coerce(o,a,T,d,u)})},supplyIsoDefaults:e}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":862}],866:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults").supplyDefaults,calc:_("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:_("./convert").createIsosurfaceTrace,moduleType:"trace",name:"isosurface",basePlotModule:_("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":862,"./calc":863,"./convert":864,"./defaults":865}],867:[function(_,oe,ae){"use strict";var m=_("../../components/colorscale/attributes"),x=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../surface/attributes"),e=_("../../plots/attributes"),o=_("../../lib/extend").extendFlat;oe.exports=o({x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},i:{valType:"data_array",editType:"calc"},j:{valType:"data_array",editType:"calc"},k:{valType:"data_array",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertemplate:T({editType:"calc"}),xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z"),delaunayaxis:{valType:"enumerated",values:["x","y","z"],dflt:"z",editType:"calc"},alphahull:{valType:"number",dflt:-1,editType:"calc"},intensity:{valType:"data_array",editType:"calc"},intensitymode:{valType:"enumerated",values:["vertex","cell"],dflt:"vertex",editType:"calc"},color:{valType:"color",editType:"calc"},vertexcolor:{valType:"data_array",editType:"calc"},facecolor:{valType:"data_array",editType:"calc"},transforms:void 0},m("",{colorAttr:"`intensity`",showScaleDflt:!0,editTypeOverride:"calc"}),{opacity:b.opacity,flatshading:{valType:"boolean",dflt:!1,editType:"calc"},contour:{show:o({},b.contours.x.show,{}),color:b.contours.x.color,width:b.contours.x.width,editType:"calc"},lightposition:{x:o({},b.lightposition.x,{dflt:1e5}),y:o({},b.lightposition.y,{dflt:1e5}),z:o({},b.lightposition.z,{dflt:0}),editType:"calc"},lighting:o({vertexnormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-12,editType:"calc"},facenormalsepsilon:{valType:"number",min:0,max:1,dflt:1e-6,editType:"calc"},editType:"calc"},b.lighting),hoverinfo:o({},e.hoverinfo,{editType:"calc"}),showlegend:o({},e.showlegend,{dflt:!1})})},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../surface/attributes":1057}],868:[function(_,oe,ae){"use strict";var m=_("../../components/colorscale/calc");oe.exports=function(x,T){T.intensity&&m(x,T,{vals:T.intensity,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],869:[function(_,oe,ae){"use strict";var m=_("../../../stackgl_modules").gl_mesh3d,x=_("../../../stackgl_modules").delaunay_triangulate,T=_("../../../stackgl_modules").alpha_shape,b=_("../../../stackgl_modules").convex_hull,e=_("../../lib/gl_format_color").parseColorScale,o=_("../../lib/str2rgbarray"),a=_("../../components/colorscale").extractOpts,l=_("../../plots/gl3d/zip3");function i(p,v,g){this.scene=p,this.uid=g,this.mesh=v,this.name="",this.color="#fff",this.data=null,this.showContour=!1}var d=i.prototype;function u(p){for(var v=[],g=p.length,f=0;f<g;f++)v[f]=o(p[f]);return v}function s(p,v,g,f){for(var w=[],y=v.length,M=0;M<y;M++)w[M]=p.d2l(v[M],0,f)*g;return w}function c(p){for(var v=[],g=p.length,f=0;f<g;f++)v[f]=Math.round(p[f]);return v}function h(p,v){for(var g=p.length,f=0;f<g;f++)if(p[f]<=-.5||p[f]>=v-.5)return!1;return!0}d.handlePick=function(p){if(p.object===this.mesh){var v=p.index=p.data.index;p.traceCoordinate=p.data._cellCenter?p.data.dataCoordinate:[this.data.x[v],this.data.y[v],this.data.z[v]];var g=this.data.hovertext||this.data.text;return Array.isArray(g)&&void 0!==g[v]?p.textLabel=g[v]:g&&(p.textLabel=g),!0}},d.update=function(p){var v=this.scene,g=v.fullSceneLayout;this.data=p;var f,w=p.x.length,y=l(s(g.xaxis,p.x,v.dataScale[0],p.xcalendar),s(g.yaxis,p.y,v.dataScale[1],p.ycalendar),s(g.zaxis,p.z,v.dataScale[2],p.zcalendar));if(p.i&&p.j&&p.k){if(p.i.length!==p.j.length||p.j.length!==p.k.length||!h(p.i,w)||!h(p.j,w)||!h(p.k,w))return;f=l(c(p.i),c(p.j),c(p.k))}else f=0===p.alphahull?b(y):p.alphahull>0?T(p.alphahull,y):function(C,P){for(var D=["x","y","z"].indexOf(C),F=[],R=P.length,L=0;L<R;L++)F[L]=[P[L][(D+1)%3],P[L][(D+2)%3]];return x(F)}(p.delaunayaxis,y);var M={positions:y,cells:f,lightPosition:[p.lightposition.x,p.lightposition.y,p.lightposition.z],ambient:p.lighting.ambient,diffuse:p.lighting.diffuse,specular:p.lighting.specular,roughness:p.lighting.roughness,fresnel:p.lighting.fresnel,vertexNormalsEpsilon:p.lighting.vertexnormalsepsilon,faceNormalsEpsilon:p.lighting.facenormalsepsilon,opacity:p.opacity,contourEnable:p.contour.show,contourColor:o(p.contour.color).slice(0,3),contourWidth:p.contour.width,useFacetNormals:p.flatshading};if(p.intensity){var A=a(p);this.color="#fff";var k=p.intensitymode;M[k+"Intensity"]=p.intensity,M[k+"IntensityBounds"]=[A.min,A.max],M.colormap=e(p)}else p.vertexcolor?(this.color=p.vertexcolor[0],M.vertexColors=u(p.vertexcolor)):p.facecolor?(this.color=p.facecolor[0],M.cellColors=u(p.facecolor)):(this.color=p.color,M.meshColor=o(p.color));this.mesh.update(M)},d.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},oe.exports=function(p,v){var f=m({gl:p.glplot.gl}),w=new i(p,f,v.uid);return f._trace=w,w.update(v),p.glplot.add(f),w}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609}],870:[function(_,oe,ae){"use strict";var m=_("../../registry"),x=_("../../lib"),T=_("../../components/colorscale/defaults"),b=_("./attributes");oe.exports=function(e,o,a,l){function i(u,s){return x.coerce(e,o,b,u,s)}function d(u){var s=u.map(function(c){var h=i(c);return h&&x.isArrayOrTypedArray(h)?h:null});return s.every(function(c){return c&&c.length===s[0].length})&&s}d(["x","y","z"])?(d(["i","j","k"]),(!o.i||o.j&&o.k)&&(!o.j||o.k&&o.i)&&(!o.k||o.i&&o.j)?(m.getComponentMethod("calendars","handleTraceDefaults")(e,o,["x","y","z"],l),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lighting.vertexnormalsepsilon","lighting.facenormalsepsilon","lightposition.x","lightposition.y","lightposition.z","flatshading","alphahull","delaunayaxis","opacity"].forEach(function(u){i(u)}),i("contour.show")&&(i("contour.color"),i("contour.width")),"intensity"in e?(i("intensity"),i("intensitymode"),T(e,o,l,i,{prefix:"",cLetter:"c"})):(o.showscale=!1,"facecolor"in e?i("facecolor"):"vertexcolor"in e?i("vertexcolor"):i("color",a)),i("text"),i("hovertext"),i("hovertemplate"),i("xhoverformat"),i("yhoverformat"),i("zhoverformat"),o._length=null):o.visible=!1):o.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":867}],871:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),colorbar:{min:"cmin",max:"cmax"},plot:_("./convert"),moduleType:"trace",name:"mesh3d",basePlotModule:_("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":867,"./calc":868,"./convert":869,"./defaults":870}],872:[function(_,oe,ae){"use strict";var m=_("../../lib").extendFlat,x=_("../scatter/attributes"),T=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=_("../../components/drawing/attributes").dash,e=_("../../components/fx/attributes"),o=_("../../constants/delta.js"),a=o.INCREASING.COLOR,l=o.DECREASING.COLOR,i=x.line;function d(u){return{line:{color:m({},i.color,{dflt:u}),width:i.width,dash:b,editType:"style"},editType:"style"}}oe.exports={xperiod:x.xperiod,xperiod0:x.xperiod0,xperiodalignment:x.xperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),x:{valType:"data_array",editType:"calc+clearAxisTypes"},open:{valType:"data_array",editType:"calc"},high:{valType:"data_array",editType:"calc"},low:{valType:"data_array",editType:"calc"},close:{valType:"data_array",editType:"calc"},line:{width:m({},i.width,{}),dash:m({},b,{}),editType:"style"},increasing:d(a),decreasing:d(l),text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},tickwidth:{valType:"number",min:0,max:.5,dflt:.3,editType:"calc"},hoverlabel:m({},e.hoverlabel,{split:{valType:"boolean",dflt:!1,editType:"style"}})}},{"../../components/drawing/attributes":387,"../../components/fx/attributes":397,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":926}],873:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=m._,T=_("../../plots/cartesian/axes"),b=_("../../plots/cartesian/align_period"),e=_("../../constants/numerical").BADNUM;function o(l,i,d,u){return{o:l,h:i,l:d,c:u}}function a(l,i,d,u,s,c){for(var h=s.makeCalcdata(i,"open"),p=s.makeCalcdata(i,"high"),v=s.makeCalcdata(i,"low"),g=s.makeCalcdata(i,"close"),f=Array.isArray(i.text),w=Array.isArray(i.hovertext),y=!0,M=null,A=!!i.xperiodalignment,k=[],C=0;C<u.length;C++){var P=u[C],D=h[C],F=p[C],R=v[C],L=g[C];if(P!==e&&D!==e&&F!==e&&R!==e&&L!==e){L===D?null!==M&&L!==M&&(y=L>M):y=L>D,M=L;var I=c(D,F,R,L);I.pos=P,I.yc=(D+L)/2,I.i=C,I.dir=y?"increasing":"decreasing",I.x=I.pos,I.y=[R,F],A&&(I.orig_p=d[C]),f&&(I.tx=i.text[C]),w&&(I.htx=i.hovertext[C]),k.push(I)}else k.push({pos:P,empty:!0})}return i._extremes[s._id]=T.findExtremes(s,m.concat(v,p),{padded:!0}),k.length&&(k[0].t={labels:{open:x(l,"open:")+" ",high:x(l,"high:")+" ",low:x(l,"low:")+" ",close:x(l,"close:")+" "}}),k}oe.exports={calc:function(l,i){var d=T.getFromId(l,i.xaxis),u=T.getFromId(l,i.yaxis),s=function(g,f,w){var y=w._minDiff;if(!y){var M,A=g._fullData,k=[];for(y=1/0,M=0;M<A.length;M++){var C=A[M];if("ohlc"===C.type&&!0===C.visible&&C.xaxis===f._id){k.push(C);var P=f.makeCalcdata(C,"x");C._origX=P;var D=b(w,f,"x",P).vals;C._xcalc=D;var F=m.distinctVals(D).minDiff;F&&isFinite(F)&&(y=Math.min(y,F))}}for(y===1/0&&(y=1),M=0;M<k.length;M++)k[M]._minDiff=y}return y*w.tickwidth}(l,d,i),c=i._minDiff;i._minDiff=null;var h=i._origX;i._origX=null;var p=i._xcalc;i._xcalc=null;var v=a(l,i,h,p,u,o);return i._extremes[d._id]=T.findExtremes(d,p,{vpad:c/2}),v.length?(m.extendFlat(v[0].t,{wHover:c/2,tickLen:s}),v):[{t:{empty:!0}}]},calcCommon:a}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554}],874:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./ohlc_defaults"),T=_("../scatter/period_defaults"),b=_("./attributes");function e(o,a,l,i){l(i+".line.color"),l(i+".line.width",a.line.width),l(i+".line.dash",a.line.dash)}oe.exports=function(o,a,l,i){function d(u,s){return m.coerce(o,a,b,u,s)}x(o,a,d,i)?(T(o,a,i,d,{x:!0}),d("xhoverformat"),d("yhoverformat"),d("line.width"),d("line.dash"),e(0,a,d,"increasing"),e(0,a,d,"decreasing"),d("text"),d("hovertext"),d("tickwidth"),i._requestRangeslider[a.xaxis]=!0):a.visible=!1}},{"../../lib":503,"../scatter/period_defaults":946,"./attributes":872,"./ohlc_defaults":877}],875:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/axes"),x=_("../../lib"),T=_("../../components/fx"),b=_("../../components/color"),e=_("../../lib").fillText,o=_("../../constants/delta.js"),a={increasing:o.INCREASING.SYMBOL,decreasing:o.DECREASING.SYMBOL};function l(u,s,c,h){var p,v,g=u.cd,f=u.xa,w=g[0].trace,y=g[0].t,M=w.type,A="ohlc"===M?"l":"min",k="ohlc"===M?"h":"max",C=y.bPos||0,P=y.bdPos||y.tickLen,D=y.wHover,F=Math.min(1,P/Math.abs(f.r2c(f.range[1])-f.r2c(f.range[0])));function R(ee){var J=ee.pos+C-s;return T.inbox(J-D,J+D,p)}function L(ee){var J=ee[A],$=ee[k];return J===$||T.inbox(J-c,$-c,p)}function I(ee){return(R(ee)+L(ee))/2}p=u.maxHoverDistance-F,v=u.maxSpikeDistance-F;var B=T.getDistanceFunction(h,R,L,I);if(T.getClosest(g,B,u),!1===u.index)return null;var V=g[u.index];if(V.empty)return null;var Z=w[V.dir],Y=Z.line.color;return u.color=b.opacity(Y)&&Z.line.width?Y:Z.fillcolor,u.x0=f.c2p(V.pos+C-P,!0),u.x1=f.c2p(V.pos+C+P,!0),u.xLabelVal=void 0!==V.orig_p?V.orig_p:V.pos,u.spikeDistance=I(V)*v/p,u.xSpike=f.c2p(V.pos,!0),u}function i(u,s,c,h){var p=u.cd,v=u.ya,g=p[0].trace,f=p[0].t,w=[],y=l(u,s,c,h);if(!y)return[];var M=p[y.index].hi||g.hoverinfo,A=M.split("+");if("all"!==M&&-1===A.indexOf("y"))return[];for(var k=["high","open","close","low"],C={},P=0;P<k.length;P++){var D,F=k[P],R=g[F][y.index],L=v.c2p(R,!0);R in C?(D=C[R]).yLabel+="<br>"+f.labels[F]+m.hoverLabelText(v,R,g.yhoverformat):((D=x.extendFlat({},y)).y0=D.y1=L,D.yLabelVal=R,D.yLabel=f.labels[F]+m.hoverLabelText(v,R,g.yhoverformat),D.name="",w.push(D),C[R]=D)}return w}function d(u,s,c,h){var p=u.cd,v=u.ya,g=p[0].trace,f=p[0].t,w=l(u,s,c,h);if(!w)return[];var y=p[w.index],M=w.index=y.i,A=y.dir;function k(I){return f.labels[I]+m.hoverLabelText(v,g[I][M],g.yhoverformat)}var C=y.hi||g.hoverinfo,P=C.split("+"),D="all"===C,F=D||-1!==P.indexOf("y"),R=D||-1!==P.indexOf("text"),L=F?[k("open"),k("high"),k("low"),k("close")+"  "+a[A]]:[];return R&&e(y,g,L),w.extraText=L.join("<br>"),w.y0=w.y1=v.c2p(y.yc,!0),[w]}oe.exports={hoverPoints:function(u,s,c,h){return u.cd[0].trace.hoverlabel.split?i(u,s,c,h):d(u,s,c,h)},hoverSplit:i,hoverOnPoints:d}},{"../../components/color":366,"../../components/fx":406,"../../constants/delta.js":473,"../../lib":503,"../../plots/cartesian/axes":554}],876:[function(_,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"ohlc",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","showLegend"],meta:{},attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc").calc,plot:_("./plot"),style:_("./style"),hoverPoints:_("./hover").hoverPoints,selectPoints:_("./select")}},{"../../plots/cartesian":568,"./attributes":872,"./calc":873,"./defaults":874,"./hover":875,"./plot":878,"./select":879,"./style":880}],877:[function(_,oe,ae){"use strict";var m=_("../../registry"),x=_("../../lib");oe.exports=function(T,b,e,o){var a=e("x"),l=e("open"),i=e("high"),d=e("low"),u=e("close");if(e("hoverlabel.split"),m.getComponentMethod("calendars","handleTraceDefaults")(T,b,["x"],o),l&&i&&d&&u){var s=Math.min(l.length,i.length,d.length,u.length);return a&&(s=Math.min(s,x.minRowLength(a))),b._length=s,s}}},{"../../lib":503,"../../registry":638}],878:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../lib");oe.exports=function(T,b,e,o){var a=b.yaxis,l=b.xaxis,i=!!l.rangebreaks;x.makeTraceGroups(o,e,"trace ohlc").each(function(d){var u=m.select(this),s=d[0],c=s.t;if(!0!==s.trace.visible||c.empty)u.remove();else{var h=c.tickLen,p=u.selectAll("path").data(x.identity);p.enter().append("path"),p.exit().remove(),p.attr("d",function(v){if(v.empty)return"M0,0Z";var g=l.c2p(v.pos-h,!0),f=l.c2p(v.pos+h,!0),w=i?(g+f)/2:l.c2p(v.pos,!0);return"M"+g+","+a.c2p(v.o,!0)+"H"+w+"M"+w+","+a.c2p(v.h,!0)+"V"+a.c2p(v.l,!0)+"M"+f+","+a.c2p(v.c,!0)+"H"+w})}})}},{"../../lib":503,"@plotly/d3":58}],879:[function(_,oe,ae){"use strict";oe.exports=function(m,x){var T,b=m.cd,e=m.xaxis,o=m.yaxis,a=[],l=b[0].t.bPos||0;if(!1===x)for(T=0;T<b.length;T++)b[T].selected=0;else for(T=0;T<b.length;T++){var i=b[T];x.contains([e.c2p(i.pos+l),o.c2p(i.yc)],null,i.i,m)?(a.push({pointNumber:i.i,x:e.c2d(i.pos),y:o.c2d(i.yc)}),i.selected=1):i.selected=0}return a}},{}],880:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../components/drawing"),T=_("../../components/color");oe.exports=function(b,e,o){var a=o||m.select(b).selectAll("g.ohlclayer").selectAll("g.trace");a.style("opacity",function(l){return l[0].trace.opacity}),a.each(function(l){var i=l[0].trace;m.select(this).selectAll("path").each(function(d){if(!d.empty){var u=i[d.dir].line;m.select(this).style("fill","none").call(T.stroke,u.color).call(x.dashLine,u.dash,u.width).style("opacity",i.selectedpoints&&!d.selected?.3:1)}})})}},{"../../components/color":366,"../../components/drawing":388,"@plotly/d3":58}],881:[function(_,oe,ae){"use strict";var m=_("../../lib/extend").extendFlat,x=_("../../plots/attributes"),T=_("../../plots/font_attributes"),b=_("../../components/colorscale/attributes"),e=_("../../plots/template_attributes").hovertemplateAttrs,o=_("../../plots/domain").attributes,a=m({editType:"calc"},b("line",{editTypeOverride:"calc"}),{shape:{valType:"enumerated",values:["linear","hspline"],dflt:"linear",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability"]})});oe.exports={domain:o({name:"parcats",trace:!0,editType:"calc"}),hoverinfo:m({},x.hoverinfo,{flags:["count","probability"],editType:"plot",arrayOk:!1}),hoveron:{valType:"enumerated",values:["category","color","dimension"],dflt:"category",editType:"plot"},hovertemplate:e({editType:"plot",arrayOk:!1},{keys:["count","probability","category","categorycount","colorcount","bandcolorcount"]}),arrangement:{valType:"enumerated",values:["perpendicular","freeform","fixed"],dflt:"perpendicular",editType:"plot"},bundlecolors:{valType:"boolean",dflt:!0,editType:"plot"},sortpaths:{valType:"enumerated",values:["forward","backward"],dflt:"forward",editType:"plot"},labelfont:T({editType:"calc"}),tickfont:T({editType:"calc"}),dimensions:{_isLinkedToArray:"dimension",label:{valType:"string",editType:"calc"},categoryorder:{valType:"enumerated",values:["trace","category ascending","category descending","array"],dflt:"trace",editType:"calc"},categoryarray:{valType:"data_array",editType:"calc"},ticktext:{valType:"data_array",editType:"calc"},values:{valType:"data_array",dflt:[],editType:"calc"},displayindex:{valType:"integer",editType:"calc"},editType:"calc",visible:{valType:"boolean",dflt:!0,editType:"calc"}},line:a,counts:{valType:"number",min:0,dflt:1,arrayOk:!0,editType:"calc"},customdata:void 0,hoverlabel:void 0,ids:void 0,legendgroup:void 0,legendrank:void 0,opacity:void 0,selectedpoints:void 0,showlegend:void 0}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],882:[function(_,oe,ae){"use strict";var m=_("../../plots/get_data").getModuleCalcData,x=_("./plot");ae.name="parcats",ae.plot=function(T,b,e,o){var a=m(T.calcdata,"parcats");a.length&&x(T,a[0],e,o)},ae.clean=function(T,b,e,o){var a=o._has&&o._has("parcats"),l=b._has&&b._has("parcats");a&&!l&&o._paperdiv.selectAll(".parcats").remove()}},{"../../plots/get_data":593,"./plot":887}],883:[function(_,oe,ae){"use strict";var m=_("../../lib/gup").wrap,x=_("../../components/colorscale/helpers").hasColorscale,T=_("../../components/colorscale/calc"),b=_("../../lib/filter_unique.js"),e=_("../../components/drawing"),o=_("../../lib"),a=_("fast-isnumeric");function l(u,s,c){u.valueInds.push(s),u.count+=c}function i(u,s,c){return{categoryInds:u,color:s,rawColor:c,valueInds:[],count:0}}function d(u,s,c){u.valueInds.push(s),u.count+=c}oe.exports=function(u,s){var c=o.filterVisible(s.dimensions);if(0===c.length)return[];var h,p,v,g=c.map(function(Q){var se;if("trace"===Q.categoryorder)se=null;else if("array"===Q.categoryorder)se=Q.categoryarray;else{se=b(Q.values);for(var j=!0,G=0;G<se.length;G++)if(!a(se[G])){j=!1;break}se.sort(j?o.sorterAsc:void 0),"category descending"===Q.categoryorder&&(se=se.reverse())}return function(W,ie){ie=null==ie?[]:ie.map(function(be){return be});var q={},te={},ne=[];ie.forEach(function(be,ge){q[be]=0,te[be]=ge});for(var le=0;le<W.length;le++){var ue,de=W[le];void 0===q[de]?(q[de]=1,ue=ie.push(de)-1,te[de]=ue):(q[de]++,ue=te[de]),ne.push(ue)}var he=ie.map(function(be){return q[be]});return{uniqueValues:ie,uniqueCounts:he,inds:ne}}(Q.values,se)});h=o.isArrayOrTypedArray(s.counts)?s.counts:[s.counts],function(Q){var se;if(function(j){for(var G=new Array(j.length),W=0;W<j.length;W++){if(j[W]<0||j[W]>=j.length||void 0!==G[j[W]])return!1;G[j[W]]=!0}return!0}(Q.map(function(j){return j.displayindex})))for(se=0;se<Q.length;se++)Q[se]._displayindex=Q[se].displayindex;else for(se=0;se<Q.length;se++)Q[se]._displayindex=se}(c),c.forEach(function(Q,se){!function(j,G){j._categoryarray=G.uniqueValues,j._ticktext=null==j.ticktext?[]:j.ticktext.slice();for(var W=j._ticktext.length;W<G.uniqueValues.length;W++)j._ticktext.push(G.uniqueValues[W])}(Q,g[se])});var f,w=s.line;w?(x(s,"line")&&T(u,s,{vals:s.line.color,containerStr:"line",cLetter:"c"}),f=e.tryColorscale(w)):f=o.identity;var y,M,A,k,C,P=c[0].values.length,D={},F=g.map(function(Q){return Q.inds});for(v=0,y=0;y<P;y++){var R=[];for(M=0;M<F.length;M++)R.push(F[M][y]);v+=p=h[y%h.length];var L=(A=y,k=void 0,C=void 0,o.isArrayOrTypedArray(w.color)?C=k=w.color[A%w.color.length]:k=w.color,{color:f(k),rawColor:C}),I=R+"-"+L.rawColor;void 0===D[I]&&(D[I]=i(R,L.color,L.rawColor)),d(D[I],y,p)}var B,Q,se,j,G,V=c.map(function(Q,se){return{dimensionInd:se,containerInd:Q._index,displayInd:Q._displayindex,dimensionLabel:Q.label,count:v,categories:[],dragX:null}});for(y=0;y<P;y++)for(p=h[y%h.length],M=0;M<V.length;M++){var Z=V[M].containerInd,Y=g[M].inds[y],ee=V[M].categories;void 0===ee[Y]&&(ee[Y]={dimensionInd:M,categoryInd:B=Y,categoryValue:s.dimensions[Z]._categoryarray[Y],displayInd:B,categoryLabel:s.dimensions[Z]._ticktext[Y],valueInds:[],count:0,dragY:null}),l(ee[Y],y,p)}return m((se=D,j=v,G=(Q=V).map(function(W){return W.categories.length}).reduce(function(W,ie){return Math.max(W,ie)}),{dimensions:Q,paths:se,trace:void 0,maxCats:G,count:j}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"../../components/drawing":388,"../../lib":503,"../../lib/filter_unique.js":494,"../../lib/gup":500,"fast-isnumeric":190}],884:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../components/colorscale/helpers").hasColorscale,T=_("../../components/colorscale/defaults"),b=_("../../plots/domain").defaults,e=_("../../plots/array_container_defaults"),o=_("./attributes"),a=_("../parcoords/merge_length");function l(i,d){function u(f,w){return m.coerce(i,d,o.dimensions,f,w)}var s=u("values"),c=u("visible");if(s&&s.length||(c=d.visible=!1),c){u("label"),u("displayindex",d._index);var h,p=i.categoryarray,v=Array.isArray(p)&&p.length>0;v&&(h="array");var g=u("categoryorder",h);"array"===g?(u("categoryarray"),u("ticktext")):(delete i.categoryarray,delete i.ticktext),v||"array"!==g||(d.categoryorder="trace")}}oe.exports=function(i,d,u,s){function c(f,w){return m.coerce(i,d,o,f,w)}var h=e(i,d,{name:"dimensions",handleItemDefaults:l}),p=function(f,w,y,M,A){A("line.shape"),A("line.hovertemplate");var k=A("line.color",M.colorway[0]);if(x(f,"line")&&m.isArrayOrTypedArray(k)){if(k.length)return A("line.colorscale"),T(f,w,M,A,{prefix:"line.",cLetter:"c"}),k.length;w.line.color=y}return 1/0}(i,d,u,s,c);b(d,s,c),Array.isArray(h)&&h.length||(d.visible=!1),a(d,h,"values",p),c("hoveron"),c("hovertemplate"),c("arrangement"),c("bundlecolors"),c("sortpaths"),c("counts");var v={family:s.font.family,size:Math.round(s.font.size),color:s.font.color};m.coerceFont(c,"labelfont",v);var g={family:s.font.family,size:Math.round(s.font.size/1.2),color:s.font.color};m.coerceFont(c,"tickfont",g)}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/domain":584,"../parcoords/merge_length":897,"./attributes":881}],885:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcats",basePlotModule:_("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":881,"./base_plot":882,"./calc":883,"./defaults":884,"./plot":887}],886:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("d3-interpolate").interpolateNumber,T=_("../../plot_api/plot_api"),b=_("../../components/fx"),e=_("../../lib"),o=e.strTranslate,a=_("../../components/drawing"),l=_("tinycolor2"),i=_("../../lib/svg_text_utils");function d(j,G,W,ie){var q=j.map(ee.bind(0,G,W)),te=ie.selectAll("g.parcatslayer").data([null]);te.enter().append("g").attr("class","parcatslayer").style("pointer-events","all");var ne=te.selectAll("g.trace.parcats").data(q,u),le=ne.enter().append("g").attr("class","trace parcats");ne.attr("transform",function(Se){return o(Se.x,Se.y)}),le.append("g").attr("class","paths");var ue=ne.select("g.paths").selectAll("path.path").data(function(Se){return Se.paths},u);ue.attr("fill",function(Se){return Se.model.color});var de=ue.enter().append("path").attr("class","path").attr("stroke-opacity",0).attr("fill",function(Se){return Se.model.color}).attr("fill-opacity",0);w(de),ue.attr("d",function(Se){return Se.svgD}),de.empty()||ue.sort(c),ue.exit().remove(),ue.on("mouseover",h).on("mouseout",p).on("click",f),le.append("g").attr("class","dimensions");var he=ne.select("g.dimensions").selectAll("g.dimension").data(function(Se){return Se.dimensions},u);he.enter().append("g").attr("class","dimension"),he.attr("transform",function(Se){return o(Se.x,0)}),he.exit().remove();var be=he.selectAll("g.category").data(function(Se){return Se.categories},u),ge=be.enter().append("g").attr("class","category");be.attr("transform",function(Se){return o(0,Se.y)}),ge.append("rect").attr("class","catrect").attr("pointer-events","none"),be.select("rect.catrect").attr("fill","none").attr("width",function(Se){return Se.width}).attr("height",function(Se){return Se.height}),M(ge);var we=be.selectAll("rect.bandrect").data(function(Se){return Se.bands},u);we.each(function(){e.raiseToTop(this)}),we.attr("fill",function(Se){return Se.color});var Ce=we.enter().append("rect").attr("class","bandrect").attr("stroke-opacity",0).attr("fill",function(Se){return Se.color}).attr("fill-opacity",0);we.attr("fill",function(Se){return Se.color}).attr("width",function(Se){return Se.width}).attr("height",function(Se){return Se.height}).attr("y",function(Se){return Se.y}).attr("cursor",function(Se){return"fixed"===Se.parcatsViewModel.arrangement?"default":"perpendicular"===Se.parcatsViewModel.arrangement?"ns-resize":"move"}),A(Ce),we.exit().remove(),ge.append("text").attr("class","catlabel").attr("pointer-events","none");var De=G._fullLayout.paper_bgcolor;be.select("text.catlabel").attr("text-anchor",function(Se){return s(Se)?"start":"end"}).attr("alignment-baseline","middle").style("text-shadow",i.makeTextShadow(De)).style("fill","rgb(0, 0, 0)").attr("x",function(Se){return s(Se)?Se.width+5:-5}).attr("y",function(Se){return Se.height/2}).text(function(Se){return Se.model.categoryLabel}).each(function(Se){a.font(m.select(this),Se.parcatsViewModel.categorylabelfont),i.convertToTspans(m.select(this),G)}),ge.append("text").attr("class","dimlabel"),be.select("text.dimlabel").attr("text-anchor","middle").attr("alignment-baseline","baseline").attr("cursor",function(Se){return"fixed"===Se.parcatsViewModel.arrangement?"default":"ew-resize"}).attr("x",function(Se){return Se.width/2}).attr("y",-5).text(function(Se,Fe){return 0===Fe?Se.parcatsViewModel.model.dimensions[Se.model.dimensionInd].dimensionLabel:null}).each(function(Se){a.font(m.select(this),Se.parcatsViewModel.labelfont)}),be.selectAll("rect.bandrect").on("mouseover",F).on("mouseout",R),be.exit().remove(),he.call(m.behavior.drag().origin(function(Se){return{x:Se.x,y:0}}).on("dragstart",L).on("drag",I).on("dragend",B)),ne.each(function(Se){Se.traceSelection=m.select(this),Se.pathSelection=m.select(this).selectAll("g.paths").selectAll("path.path"),Se.dimensionSelection=m.select(this).selectAll("g.dimensions").selectAll("g.dimension")}),ne.exit().remove()}function u(j){return j.key}function s(j){return j.model.dimensionInd===j.parcatsViewModel.dimensions[j.parcatsViewModel.dimensions.length-1].model.dimensionInd}function c(j,G){return j.model.rawColor>G.model.rawColor?1:j.model.rawColor<G.model.rawColor?-1:0}function h(j){if(!j.parcatsViewModel.dragDimension&&-1===j.parcatsViewModel.hoverinfoItems.indexOf("skip")){e.raiseToTop(this),y(m.select(this));var G=v(j),W=g(j);if(j.parcatsViewModel.graphDiv.emit("plotly_hover",{points:G,event:m.event,constraints:W}),-1===j.parcatsViewModel.hoverinfoItems.indexOf("none")){var ie,q,te,ne=m.mouse(this)[0],le=j.parcatsViewModel.graphDiv,ue=j.parcatsViewModel.trace,de=le._fullLayout,he=de._paperdiv.node().getBoundingClientRect(),be=j.parcatsViewModel.graphDiv.getBoundingClientRect();for(te=0;te<j.leftXs.length-1;te++)if(j.leftXs[te]+j.dimWidths[te]-2<=ne&&ne<=j.leftXs[te+1]+2){var ge=j.parcatsViewModel.dimensions[te];ie=(ge.x+ge.width+j.parcatsViewModel.dimensions[te+1].x)/2,q=(j.topYs[te]+j.topYs[te+1]+j.height)/2;break}var Ce=j.parcatsViewModel.x+ie,De=j.parcatsViewModel.y+q,Se=l.mostReadable(j.model.color,["black","white"]),Fe=j.model.count,ve=Fe/j.parcatsViewModel.model.count,Te={countLabel:Fe,probabilityLabel:ve.toFixed(3)},Le=[];-1!==j.parcatsViewModel.hoverinfoItems.indexOf("count")&&Le.push(["Count:",Te.countLabel].join(" ")),-1!==j.parcatsViewModel.hoverinfoItems.indexOf("probability")&&Le.push(["P:",Te.probabilityLabel].join(" "));var Ee=Le.join("<br>"),Pe=m.mouse(le)[0];b.loneHover({trace:ue,x:Ce-he.left+be.left,y:De-he.top+be.top,text:Ee,color:j.model.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:10,fontColor:Se,idealAlign:Pe<Ce?"right":"left",hovertemplate:(ue.line||{}).hovertemplate,hovertemplateLabels:Te,eventData:[{data:ue._input,fullData:ue,count:Fe,probability:ve}]},{container:de._hoverlayer.node(),outerContainer:de._paper.node(),gd:le})}}}function p(j){if(!j.parcatsViewModel.dragDimension&&(w(m.select(this)),b.loneUnhover(j.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()),j.parcatsViewModel.pathSelection.sort(c),-1===j.parcatsViewModel.hoverinfoItems.indexOf("skip"))){var G=v(j),W=g(j);j.parcatsViewModel.graphDiv.emit("plotly_unhover",{points:G,event:m.event,constraints:W})}}function v(j){for(var G=[],W=V(j.parcatsViewModel),ie=0;ie<j.model.valueInds.length;ie++)G.push({curveNumber:W,pointNumber:j.model.valueInds[ie]});return G}function g(j){for(var G={},W=j.parcatsViewModel.model.dimensions,ie=0;ie<W.length;ie++){var q=W[ie];G[q.containerInd]=q.categories[j.model.categoryInds[ie]].categoryValue}return void 0!==j.model.rawColor&&(G.color=j.model.rawColor),G}function f(j){if(-1===j.parcatsViewModel.hoverinfoItems.indexOf("skip")){var G=v(j),W=g(j);j.parcatsViewModel.graphDiv.emit("plotly_click",{points:G,event:m.event,constraints:W})}}function w(j){j.attr("fill",function(G){return G.model.color}).attr("fill-opacity",.6).attr("stroke","lightgray").attr("stroke-width",.2).attr("stroke-opacity",1)}function y(j){j.attr("fill-opacity",.8).attr("stroke",function(G){return l.mostReadable(G.model.color,["black","white"])}).attr("stroke-width",.3)}function M(j){j.select("rect.catrect").attr("stroke","black").attr("stroke-width",1).attr("stroke-opacity",1)}function A(j){j.attr("stroke","black").attr("stroke-width",.2).attr("stroke-opacity",1).attr("fill-opacity",1)}function k(j){var W=j.categoryViewModel.model.dimensionInd,ie=j.categoryViewModel.model.categoryInd;return j.parcatsViewModel.pathSelection.filter(function(q){return q.model.categoryInds[W]===ie&&q.model.color===j.color})}function C(j,G,W){var ie=m.select(j).datum(),q=ie.categoryViewModel.model,te=ie.parcatsViewModel.graphDiv,ne=m.select(j.parentNode).selectAll("rect.bandrect"),le=[];ne.each(function(de){k(de).each(function(he){Array.prototype.push.apply(le,v(he))})});var ue={};ue[q.dimensionInd]=q.categoryValue,te.emit(G,{points:le,event:W,constraints:ue})}function P(j,G,W){var ie=m.select(j).datum(),q=ie.categoryViewModel.model,te=ie.parcatsViewModel.graphDiv,ne=k(ie),le=[];ne.each(function(de){Array.prototype.push.apply(le,v(de))});var ue={};ue[q.dimensionInd]=q.categoryValue,void 0!==ie.rawColor&&(ue.color=ie.rawColor),te.emit(G,{points:le,event:W,constraints:ue})}function D(j,G,W){j._fullLayout._calcInverseTransform(j);var ie,q,te=j._fullLayout._invScaleX,ne=j._fullLayout._invScaleY,le=m.select(W.parentNode).select("rect.catrect"),ue=le.node().getBoundingClientRect(),de=le.datum(),he=de.parcatsViewModel,ge=he.trace,we=ue.top+ue.height/2;he.dimensions.length>1&&he.model.dimensions[de.model.dimensionInd].displayInd===he.dimensions.length-1?(ie=ue.left,q="left"):(ie=ue.left+ue.width,q="right");var Ce=de.model.count,De=de.model.categoryLabel,Se=Ce/de.parcatsViewModel.model.count,Fe={countLabel:Ce,categoryLabel:De,probabilityLabel:Se.toFixed(3)},ve=[];-1!==de.parcatsViewModel.hoverinfoItems.indexOf("count")&&ve.push(["Count:",Fe.countLabel].join(" ")),-1!==de.parcatsViewModel.hoverinfoItems.indexOf("probability")&&ve.push(["P("+Fe.categoryLabel+"):",Fe.probabilityLabel].join(" "));var Te=ve.join("<br>");return{trace:ge,x:te*(ie-G.left),y:ne*(we-G.top),text:Te,color:"lightgray",borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontSize:12,fontColor:"black",idealAlign:q,hovertemplate:ge.hovertemplate,hovertemplateLabels:Fe,eventData:[{data:ge._input,fullData:ge,count:Ce,category:De,probability:Se}]}}function F(j){if(!j.parcatsViewModel.dragDimension&&-1===j.parcatsViewModel.hoverinfoItems.indexOf("skip")){if(m.mouse(this)[1]<-1)return;var G,W=j.parcatsViewModel.graphDiv,ie=W._fullLayout,q=ie._paperdiv.node().getBoundingClientRect(),te=j.parcatsViewModel.hoveron;"color"===te?(y(ue=k(le=m.select(this).datum())),ue.each(function(){e.raiseToTop(this)}),m.select(this.parentNode).selectAll("rect.bandrect").filter(function(de){return de.color===le.color}).each(function(){e.raiseToTop(this),m.select(this).attr("stroke","black").attr("stroke-width",1.5)}),P(this,"plotly_hover",m.event)):(function(ne){m.select(ne.parentNode).selectAll("rect.bandrect").each(function(le){var ue=k(le);y(ue),ue.each(function(){e.raiseToTop(this)})}),m.select(ne.parentNode).select("rect.catrect").attr("stroke","black").attr("stroke-width",2.5)}(this),C(this,"plotly_hover",m.event)),-1===j.parcatsViewModel.hoverinfoItems.indexOf("none")&&("category"===te?G=D(W,q,this):"color"===te?G=function(ne,le,ue){ne._fullLayout._calcInverseTransform(ne);var de,he,be=ne._fullLayout._invScaleX,ge=ne._fullLayout._invScaleY,we=ue.getBoundingClientRect(),Ce=m.select(ue).datum(),De=Ce.categoryViewModel,Se=De.parcatsViewModel,ve=Se.trace,Te=we.y+we.height/2;Se.dimensions.length>1&&Se.model.dimensions[De.model.dimensionInd].displayInd===Se.dimensions.length-1?(de=we.left,he="left"):(de=we.left+we.width,he="right");var Le=De.model.categoryLabel,Ee=Ce.parcatsViewModel.model.count,Pe=0;Ce.categoryViewModel.bands.forEach(function(xt){xt.color===Ce.color&&(Pe+=xt.count)});var je=De.model.count,Ge=0;Se.pathSelection.each(function(xt){xt.model.color===Ce.color&&(Ge+=xt.model.count)});var Ke=Pe/Ee,lt=Pe/Ge,Ue=Pe/je,$e={countLabel:Ee,categoryLabel:Le,probabilityLabel:Ke.toFixed(3)},et=[];-1!==De.parcatsViewModel.hoverinfoItems.indexOf("count")&&et.push(["Count:",$e.countLabel].join(" ")),-1!==De.parcatsViewModel.hoverinfoItems.indexOf("probability")&&(et.push("P(color \u2229 "+Le+"): "+$e.probabilityLabel),et.push("P("+Le+" | color): "+lt.toFixed(3)),et.push("P(color | "+Le+"): "+Ue.toFixed(3)));var tt=et.join("<br>"),ct=l.mostReadable(Ce.color,["black","white"]);return{trace:ve,x:be*(de-le.left),y:ge*(Te-le.top),text:tt,color:Ce.color,borderColor:"black",fontFamily:'Monaco, "Courier New", monospace',fontColor:ct,fontSize:10,idealAlign:he,hovertemplate:ve.hovertemplate,hovertemplateLabels:$e,eventData:[{data:ve._input,fullData:ve,category:Le,count:Ee,probability:Ke,categorycount:je,colorcount:Ge,bandcolorcount:Pe}]}}(W,q,this):"dimension"===te&&(G=function(ne,le,ue){var de=[];return m.select(ue.parentNode.parentNode).selectAll("g.category").select("rect.catrect").each(function(){de.push(D(ne,le,this))}),de}(W,q,this)),G&&b.loneHover(G,{container:ie._hoverlayer.node(),outerContainer:ie._paper.node(),gd:W}))}var le,ue}function R(j){var G=j.parcatsViewModel;!G.dragDimension&&(w(G.pathSelection),M(G.dimensionSelection.selectAll("g.category")),A(G.dimensionSelection.selectAll("g.category").selectAll("rect.bandrect")),b.loneUnhover(G.graphDiv._fullLayout._hoverlayer.node()),G.pathSelection.sort(c),-1===G.hoverinfoItems.indexOf("skip"))&&("color"===j.parcatsViewModel.hoveron?P(this,"plotly_unhover",m.event):C(this,"plotly_unhover",m.event))}function L(j){"fixed"!==j.parcatsViewModel.arrangement&&(j.dragDimensionDisplayInd=j.model.displayInd,j.initialDragDimensionDisplayInds=j.parcatsViewModel.model.dimensions.map(function(G){return G.displayInd}),j.dragHasMoved=!1,j.dragCategoryDisplayInd=null,m.select(this).selectAll("g.category").select("rect.catrect").each(function(G){var W=m.mouse(this)[0],ie=m.mouse(this)[1];-2<=W&&W<=G.width+2&&-2<=ie&&ie<=G.height+2&&(j.dragCategoryDisplayInd=G.model.displayInd,j.initialDragCategoryDisplayInds=j.model.categories.map(function(q){return q.displayInd}),G.model.dragY=G.y,e.raiseToTop(this.parentNode),m.select(this.parentNode).selectAll("rect.bandrect").each(function(q){q.y<ie&&ie<=q.y+q.height&&(j.potentialClickBand=this)}))}),j.parcatsViewModel.dragDimension=j,b.loneUnhover(j.parcatsViewModel.graphDiv._fullLayout._hoverlayer.node()))}function I(j){if("fixed"!==j.parcatsViewModel.arrangement&&(j.dragHasMoved=!0,null!==j.dragDimensionDisplayInd)){var G=j.dragDimensionDisplayInd,W=G-1,ie=G+1,q=j.parcatsViewModel.dimensions[G];if(null!==j.dragCategoryDisplayInd){var te=q.categories[j.dragCategoryDisplayInd];te.model.dragY+=m.event.dy;var ne=te.model.dragY,le=te.model.displayInd,ue=q.categories,de=ue[le-1],he=ue[le+1];void 0!==de&&ne<de.y+de.height/2&&(te.model.displayInd=de.model.displayInd,de.model.displayInd=le),void 0!==he&&ne+te.height>he.y+he.height/2&&(te.model.displayInd=he.model.displayInd,he.model.displayInd=le),j.dragCategoryDisplayInd=te.model.displayInd}if(null===j.dragCategoryDisplayInd||"freeform"===j.parcatsViewModel.arrangement){q.model.dragX=m.event.x;var be=j.parcatsViewModel.dimensions[W],ge=j.parcatsViewModel.dimensions[ie];void 0!==be&&q.model.dragX<be.x+be.width&&(q.model.displayInd=be.model.displayInd,be.model.displayInd=G),void 0!==ge&&q.model.dragX+q.width>ge.x&&(q.model.displayInd=ge.model.displayInd,ge.model.displayInd=j.dragDimensionDisplayInd),j.dragDimensionDisplayInd=q.model.displayInd}Q(j.parcatsViewModel),$(j.parcatsViewModel),Y(j.parcatsViewModel),Z(j.parcatsViewModel)}}function B(j){if("fixed"!==j.parcatsViewModel.arrangement&&null!==j.dragDimensionDisplayInd){m.select(this).selectAll("text").attr("font-weight","normal");var G={},W=V(j.parcatsViewModel),ie=j.parcatsViewModel.model.dimensions.map(function(he){return he.displayInd}),q=j.initialDragDimensionDisplayInds.some(function(he,be){return he!==ie[be]});q&&ie.forEach(function(he,be){G["dimensions["+j.parcatsViewModel.model.dimensions[be].containerInd+"].displayindex"]=he});var te=!1;if(null!==j.dragCategoryDisplayInd){var ne=j.model.categories.map(function(he){return he.displayInd});if(te=j.initialDragCategoryDisplayInds.some(function(he,be){return he!==ne[be]})){var le=j.model.categories.slice().sort(function(he,be){return he.displayInd-be.displayInd}),ue=le.map(function(he){return he.categoryValue}),de=le.map(function(he){return he.categoryLabel});G["dimensions["+j.model.containerInd+"].categoryarray"]=[ue],G["dimensions["+j.model.containerInd+"].ticktext"]=[de],G["dimensions["+j.model.containerInd+"].categoryorder"]="array"}}-1===j.parcatsViewModel.hoverinfoItems.indexOf("skip")&&!j.dragHasMoved&&j.potentialClickBand&&("color"===j.parcatsViewModel.hoveron?P(j.potentialClickBand,"plotly_click",m.event.sourceEvent):C(j.potentialClickBand,"plotly_click",m.event.sourceEvent)),j.model.dragX=null,null!==j.dragCategoryDisplayInd&&(j.parcatsViewModel.dimensions[j.dragDimensionDisplayInd].categories[j.dragCategoryDisplayInd].model.dragY=null,j.dragCategoryDisplayInd=null),j.dragDimensionDisplayInd=null,j.parcatsViewModel.dragDimension=null,j.dragHasMoved=null,j.potentialClickBand=null,Q(j.parcatsViewModel),$(j.parcatsViewModel),m.transition().duration(300).ease("cubic-in-out").each(function(){Y(j.parcatsViewModel,!0),Z(j.parcatsViewModel,!0)}).each("end",function(){(q||te)&&T.restyle(j.parcatsViewModel.graphDiv,G,[W])})}}function V(j){for(var G,W=j.graphDiv._fullData,ie=0;ie<W.length;ie++)if(j.key===W[ie].uid){G=ie;break}return G}function Z(j,G){var W;void 0===G&&(G=!1),j.pathSelection.data(function(ie){return ie.paths},u),(W=j.pathSelection,G?W.transition():W).attr("d",function(ie){return ie.svgD})}function Y(j,G){function W(ne){return G?ne.transition():ne}void 0===G&&(G=!1),j.dimensionSelection.data(function(ne){return ne.dimensions},u);var ie=j.dimensionSelection.selectAll("g.category").data(function(ne){return ne.categories},u);W(j.dimensionSelection).attr("transform",function(ne){return o(ne.x,0)}),W(ie).attr("transform",function(ne){return o(0,ne.y)}),ie.select(".dimlabel").text(function(ne,le){return 0===le?ne.parcatsViewModel.model.dimensions[ne.model.dimensionInd].dimensionLabel:null}),ie.select(".catlabel").attr("text-anchor",function(ne){return s(ne)?"start":"end"}).attr("x",function(ne){return s(ne)?ne.width+5:-5}).each(function(ne){var le,ue;s(ne)?(le=ne.width+5,ue="start"):(le=-5,ue="end"),m.select(this).selectAll("tspan").attr("x",le).attr("text-anchor",ue)});var q=ie.selectAll("rect.bandrect").data(function(ne){return ne.bands},u),te=q.enter().append("rect").attr("class","bandrect").attr("cursor","move").attr("stroke-opacity",0).attr("fill",function(ne){return ne.color}).attr("fill-opacity",0);q.attr("fill",function(ne){return ne.color}).attr("width",function(ne){return ne.width}).attr("height",function(ne){return ne.height}).attr("y",function(ne){return ne.y}),A(te),q.each(function(){e.raiseToTop(this)}),q.exit().remove()}function ee(j,G,W){var ie,q=W[0],te=G.margin||{l:80,r:80,t:100,b:80},ne=q.trace,le=ne.domain,ue=G.width,de=G.height,he=Math.floor(ue*(le.x[1]-le.x[0])),be=Math.floor(de*(le.y[1]-le.y[0])),ge=le.x[0]*ue+te.l,we=G.height-le.y[1]*G.height+te.t,Ce=ne.line.shape;ie="all"===ne.hoverinfo?["count","probability"]:(ne.hoverinfo||"").split("+");var De={trace:ne,key:ne.uid,model:q,x:ge,y:we,width:he,height:be,hoveron:ne.hoveron,hoverinfoItems:ie,arrangement:ne.arrangement,bundlecolors:ne.bundlecolors,sortpaths:ne.sortpaths,labelfont:ne.labelfont,categorylabelfont:ne.tickfont,pathShape:Ce,dragDimension:null,margin:te,paths:[],dimensions:[],graphDiv:j,traceSelection:null,pathSelection:null,dimensionSelection:null};return q.dimensions&&(Q(De),$(De)),De}function J(j,G,W,ie,q){var te,ne,le=[],ue=[];for(ne=0;ne<W.length-1;ne++)te=x(W[ne]+j[ne],j[ne+1]),le.push(te(q)),ue.push(te(1-q));var de="M "+j[0]+","+G[0];for(de+="l"+W[0]+",0 ",ne=1;ne<W.length;ne++)de+="C"+le[ne-1]+","+G[ne-1]+" "+ue[ne-1]+","+G[ne]+" "+j[ne]+","+G[ne],de+="l"+W[ne]+",0 ";for(de+="l0,"+ie+" ",de+="l -"+W[W.length-1]+",0 ",ne=W.length-2;ne>=0;ne--)de+="C"+ue[ne]+","+(G[ne+1]+ie)+" "+le[ne]+","+(G[ne]+ie)+" "+(j[ne]+W[ne])+","+(G[ne]+ie),de+="l-"+W[ne]+",0 ";return de+"Z"}function $(j){var G=j.dimensions,W=j.model,ie=G.map(function(et){return et.categories.map(function(tt){return tt.y})}),q=j.model.dimensions.map(function(et){return et.categories.map(function(tt){return tt.displayInd})}),te=j.model.dimensions.map(function(et){return et.displayInd}),ne=j.dimensions.map(function(et){return et.model.dimensionInd}),le=G.map(function(et){return et.x}),ue=G.map(function(et){return et.width}),de=[];for(var he in W.paths)W.paths.hasOwnProperty(he)&&de.push(W.paths[he]);function be(et){var tt=et.categoryInds.map(function(ct,xt){return q[xt][ct]});return ne.map(function(ct){return tt[ct]})}de.sort(function(et,tt){var ct=be(et),xt=be(tt);return"backward"===j.sortpaths&&(ct.reverse(),xt.reverse()),ct.push(et.valueInds[0]),xt.push(tt.valueInds[0]),j.bundlecolors&&(ct.unshift(et.rawColor),xt.unshift(tt.rawColor)),ct<xt?-1:ct>xt?1:0});for(var ge=new Array(de.length),we=G[0].model.count,Ce=G[0].categories.map(function(et){return et.height}).reduce(function(et,tt){return et+tt}),De=0;De<de.length;De++){var Se,Fe=de[De];Se=we>0?Ce*(Fe.count/we):0;for(var ve,Te=new Array(ie.length),Le=0;Le<Fe.categoryInds.length;Le++){var Pe=q[Le][Fe.categoryInds[Le]],je=te[Le];Te[je]=ie[je][Pe],ie[je][Pe]+=Se;var Ge=j.dimensions[je].categories[Pe],Ke=Ge.bands.length,lt=Ge.bands[Ke-1];if(void 0===lt||Fe.rawColor!==lt.rawColor){var Ue=void 0===lt?0:lt.y+lt.height;Ge.bands.push({key:Ue,color:Fe.color,rawColor:Fe.rawColor,height:Se,width:Ge.width,count:Fe.count,y:Ue,categoryViewModel:Ge,parcatsViewModel:j})}else{var $e=Ge.bands[Ke-1];$e.height+=Se,$e.count+=Fe.count}}ve=J(le,Te,ue,Se,"hspline"===j.pathShape?.5:0),ge[De]={key:Fe.valueInds[0],model:Fe,height:Se,leftXs:le,topYs:Te,dimWidths:ue,svgD:ve,parcatsViewModel:j}}j.paths=ge}function Q(j){var G=j.model.dimensions.map(function(ne){return{displayInd:ne.displayInd,dimensionInd:ne.dimensionInd}});G.sort(function(ne,le){return ne.displayInd-le.displayInd});var W=[];for(var ie in G)W.push(se(j,j.model.dimensions[G[ie].dimensionInd]));j.dimensions=W}function se(j,G){var W,ie=j.model.dimensions.length;W=40+(ie>1?(j.width-80-16)/(ie-1):0)*G.displayInd;var te,ne,le,de,he=[],be=j.model.maxCats,ge=G.categories.length,we=G.count,Ce=j.height-8*(be-1),De=8*(be-ge)/2,Se=G.categories.map(function(Fe){return{displayInd:Fe.displayInd,categoryInd:Fe.categoryInd}});for(Se.sort(function(Fe,ve){return Fe.displayInd-ve.displayInd}),de=0;de<ge;de++)le={key:(ne=G.categories[Se[de].categoryInd]).valueInds[0],model:ne,width:16,height:te=we>0?ne.count/we*Ce:0,y:null!==ne.dragY?ne.dragY:De,bands:[],parcatsViewModel:j},De=De+te+8,he.push(le);return{key:G.dimensionInd,x:null!==G.dragX?G.dragX:W,y:0,width:16,model:G,categories:he,parcatsViewModel:j,dragCategoryDisplayInd:null,dragDimensionDisplayInd:null,initialDragDimensionDisplayInds:null,initialDragCategoryDisplayInds:null,dragHasMoved:null,potentialClickBand:null}}oe.exports=function(j,G,W,ie){d(W,j,ie,G)}},{"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plot_api/plot_api":540,"@plotly/d3":58,"d3-interpolate":116,tinycolor2:312}],887:[function(_,oe,ae){"use strict";var m=_("./parcats");oe.exports=function(x,T,b,e){var o=x._fullLayout,l=o._size;m(x,o._paper,T,{width:l.w,height:l.h,margin:{t:l.t,r:l.r,b:l.b,l:l.l}},b,e)}},{"./parcats":886}],888:[function(_,oe,ae){"use strict";var m=_("../../components/colorscale/attributes"),x=_("../../plots/cartesian/layout_attributes"),T=_("../../plots/font_attributes"),b=_("../../plots/domain").attributes,e=_("../../lib/extend").extendFlat,o=_("../../plot_api/plot_template").templatedArray;oe.exports={domain:b({name:"parcoords",trace:!0,editType:"plot"}),labelangle:{valType:"angle",dflt:0,editType:"plot"},labelside:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},labelfont:T({editType:"plot"}),tickfont:T({editType:"plot"}),rangefont:T({editType:"plot"}),dimensions:o("dimension",{label:{valType:"string",editType:"plot"},tickvals:e({},x.tickvals,{editType:"plot"}),ticktext:e({},x.ticktext,{editType:"plot"}),tickformat:e({},x.tickformat,{editType:"plot"}),visible:{valType:"boolean",dflt:!0,editType:"plot"},range:{valType:"info_array",items:[{valType:"number",editType:"plot"},{valType:"number",editType:"plot"}],editType:"plot"},constraintrange:{valType:"info_array",freeLength:!0,dimensions:"1-2",items:[{valType:"any",editType:"plot"},{valType:"any",editType:"plot"}],editType:"plot"},multiselect:{valType:"boolean",dflt:!0,editType:"plot"},values:{valType:"data_array",editType:"calc"},editType:"calc"}),line:e({editType:"calc"},m("line",{colorscaleDflt:"Viridis",autoColorDflt:!1,editTypeOverride:"calc"}))}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/layout_attributes":569,"../../plots/domain":584,"../../plots/font_attributes":585}],889:[function(_,oe,ae){"use strict";var m=_("./constants"),x=_("@plotly/d3"),T=_("../../lib/gup").keyFun,b=_("../../lib/gup").repeat,e=_("../../lib").sorterAsc,o=_("../../lib").strTranslate,a=m.bar.snapRatio;function l(D,F){return D*(1-a)+F*a}var i=m.bar.snapClose;function d(D,F){return D*(1-i)+F*i}function u(D,F,R,L){if(function(se,j){for(var G=0;G<j.length;G++)if(se>=j[G][0]&&se<=j[G][1])return!0;return!1}(R,L))return R;var I=D?-1:1,B=0,V=F.length-1;if(I<0){var Z=B;B=V,V=Z}for(var Y=F[B],ee=Y,J=B;I*J<I*V;J+=I){var $=J+I,Q=F[$];if(I*R<I*d(Y,Q))return l(Y,ee);if(I*R<I*Q||$===V)return l(Q,Y);ee=Y,Y=Q}}function s(D){D.attr("x",-m.bar.captureWidth/2).attr("width",m.bar.captureWidth)}function c(D){D.attr("visibility","visible").style("visibility","visible").attr("fill","yellow").attr("opacity",0)}function h(D){if(!D.brush.filterSpecified)return"0,"+D.height;for(var F,R,L,I=p(D.brush.filter.getConsolidated(),D.height),B=[0],V=I.length?I[0][0]:null,Z=0;Z<I.length;Z++)R=(F=I[Z])[1]-F[0],B.push(V),B.push(R),(L=Z+1)<I.length&&(V=I[L][0]-F[1]);return B.push(D.height),B}function p(D,F){return D.map(function(R){return R.map(function(L){return Math.max(0,L*F)}).sort(e)})}function v(){x.select(document.body).style("cursor",null)}function g(D){D.attr("stroke-dasharray",h)}function f(D,F){var R=x.select(D).selectAll(".highlight, .highlight-shadow");g(F?R.transition().duration(m.bar.snapDuration).each("end",F):R)}function w(D,F){var R,L=D.brush,I=NaN,B={};if(L.filterSpecified){var V=D.height,Z=L.filter.getConsolidated(),Y=p(Z,V),ee=NaN,J=NaN,$=NaN;for(R=0;R<=Y.length;R++){var Q=Y[R];if(Q&&Q[0]<=F&&F<=Q[1]){ee=R;break}if(J=R?R-1:NaN,Q&&Q[0]>F){$=R;break}}if(I=ee,isNaN(I)&&(I=isNaN(J)||isNaN($)?isNaN(J)?$:J:F-Y[J][1]<Y[$][0]-F?J:$),!isNaN(I)){var se=Y[I],j=function(q,te){var ne=m.bar.handleHeight;if(!(te>q[1]+ne||te<q[0]-ne))return te>=.9*q[1]+.1*q[0]?"n":te<=.9*q[0]+.1*q[1]?"s":"ns"}(se,F);j&&(B.interval=Z[I],B.intervalPix=se,B.region=j)}}if(D.ordinal&&!B.region){var G=D.unitTickvals,W=D.unitToPaddedPx.invert(F);for(R=0;R<G.length;R++){var ie=[.25*G[Math.max(R-1,0)]+.75*G[R],.25*G[Math.min(R+1,G.length-1)]+.75*G[R]];if(W>=ie[0]&&W<=ie[1]){B.clickableOrdinalRange=ie;break}}}return B}function y(D,F){x.event.sourceEvent.stopPropagation();var R=F.height-x.mouse(D)[1]-2*m.verticalPadding,L=F.brush.svgBrush;L.wasDragged=!0,L._dragging=!0,L.newExtent=L.grabbingBar?[R-L.grabPoint,R+L.barLength-L.grabPoint].map(F.unitToPaddedPx.invert):[L.startExtent,F.unitToPaddedPx.invert(R)].sort(e),F.brush.filterSpecified=!0,L.extent=L.stayingIntervals.concat([L.newExtent]),L.brushCallback(F),f(D.parentNode)}function M(D,F){var R=w(F,F.height-x.mouse(D)[1]-2*m.verticalPadding),L="crosshair";R.clickableOrdinalRange?L="pointer":R.region&&(L=R.region+"-resize"),x.select(document.body).style("cursor",L)}function A(D){D.on("mousemove",function(F){x.event.preventDefault(),F.parent.inBrushDrag||M(this,F)}).on("mouseleave",function(F){F.parent.inBrushDrag||v()}).call(x.behavior.drag().on("dragstart",function(F){!function(R,L){x.event.sourceEvent.stopPropagation();var I=L.height-x.mouse(R)[1]-2*m.verticalPadding,B=L.unitToPaddedPx.invert(I),V=L.brush,Z=w(L,I),Y=Z.interval,ee=V.svgBrush;if(ee.wasDragged=!1,ee.grabbingBar="ns"===Z.region,ee.grabbingBar){var J=Y.map(L.unitToPaddedPx);ee.grabPoint=I-J[0]-m.verticalPadding,ee.barLength=J[1]-J[0]}ee.clickableOrdinalRange=Z.clickableOrdinalRange,ee.stayingIntervals=L.multiselect&&V.filterSpecified?V.filter.getConsolidated():[],Y&&(ee.stayingIntervals=ee.stayingIntervals.filter(function($){return $[0]!==Y[0]&&$[1]!==Y[1]})),ee.startExtent=Z.region?Y["s"===Z.region?1:0]:B,L.parent.inBrushDrag=!0,ee.brushStartCallback()}(this,F)}).on("drag",function(F){y(this,F)}).on("dragend",function(F){!function(R,L){var I=L.brush,B=I.filter,V=I.svgBrush;V._dragging||(M(R,L),y(R,L),L.brush.svgBrush.wasDragged=!1),V._dragging=!1,x.event.sourceEvent.stopPropagation();var Z=V.grabbingBar;if(V.grabbingBar=!1,V.grabLocation=void 0,L.parent.inBrushDrag=!1,v(),!V.wasDragged)return V.wasDragged=void 0,V.clickableOrdinalRange?I.filterSpecified&&L.multiselect?V.extent.push(V.clickableOrdinalRange):(V.extent=[V.clickableOrdinalRange],I.filterSpecified=!0):Z?(V.extent=V.stayingIntervals,0===V.extent.length&&C(I)):C(I),V.brushCallback(L),f(R.parentNode),void V.brushEndCallback(I.filterSpecified?B.getConsolidated():[]);var Y=function(){B.set(B.getConsolidated())};if(L.ordinal){var ee=L.unitTickvals;ee[ee.length-1]<ee[0]&&ee.reverse(),V.newExtent=[u(0,ee,V.newExtent[0],V.stayingIntervals),u(1,ee,V.newExtent[1],V.stayingIntervals)];var J=V.newExtent[1]>V.newExtent[0];V.extent=V.stayingIntervals.concat(J?[V.newExtent]:[]),V.extent.length||C(I),V.brushCallback(L),J?f(R.parentNode,Y):(Y(),f(R.parentNode))}else Y();V.brushEndCallback(I.filterSpecified?B.getConsolidated():[])}(this,F)}))}function k(D,F){return D[0]-F[0]}function C(D){D.filterSpecified=!1,D.svgBrush.extent=[[-1/0,1/0]]}function P(D){for(var F,R=D.slice(),L=[],I=R.shift();I;){for(F=I.slice();(I=R.shift())&&I[0]<=F[1];)F[1]=Math.max(F[1],I[1]);L.push(F)}return 1===L.length&&L[0][0]>L[0][1]&&(L=[]),L}oe.exports={makeBrush:function(D,F,R,L,I,B){var V,Y,ee,J,Z=(J=[],{set:function($){1===(J=$.map(function(Q){return Q.slice().sort(e)}).sort(k)).length&&J[0][0]===-1/0&&J[0][1]===1/0&&(J=[[0,-1]]),Y=P(J),ee=J.reduce(function(Q,se){return[Math.min(Q[0],se[0]),Math.max(Q[1],se[1])]},[1/0,-1/0])},get:function(){return J.slice()},getConsolidated:function(){return Y},getBounds:function(){return ee}});return Z.set(R),{filter:Z,filterSpecified:F,svgBrush:{extent:[],brushStartCallback:L,brushCallback:(V=I,function(Y){var $,ee=Y.brush,J=($=ee,$.svgBrush.extent.map(function(Q){return Q.slice()})).slice();ee.filter.set(J),V()}),brushEndCallback:B}}},ensureAxisBrush:function(D,F){var R=D.selectAll("."+m.cn.axisBrush).data(b,T);R.enter().append("g").classed(m.cn.axisBrush,!0),function(L,I){var B=L.selectAll(".background").data(b);B.enter().append("rect").classed("background",!0).call(s).call(c).style("pointer-events","auto").attr("transform",o(0,m.verticalPadding)),B.call(A).attr("height",function(Y){return Y.height-m.verticalPadding});var V=L.selectAll(".highlight-shadow").data(b);V.enter().append("line").classed("highlight-shadow",!0).attr("x",-m.bar.width/2).attr("stroke-width",m.bar.width+m.bar.strokeWidth).attr("stroke",I).attr("opacity",m.bar.strokeOpacity).attr("stroke-linecap","butt"),V.attr("y1",function(Y){return Y.height}).call(g);var Z=L.selectAll(".highlight").data(b);Z.enter().append("line").classed("highlight",!0).attr("x",-m.bar.width/2).attr("stroke-width",m.bar.width-m.bar.strokeWidth).attr("stroke",m.bar.fillColor).attr("opacity",m.bar.fillOpacity).attr("stroke-linecap","butt"),Z.attr("y1",function(Y){return Y.height}).call(g)}(R,F)},cleanRanges:function(D,F){if(Array.isArray(D[0])?(D=D.map(function(L){return L.sort(e)}),D=F.multiselect?P(D.sort(k)):[D[0]]):D=[D.sort(e)],F.tickvals){var R=F.tickvals.slice().sort(e);if(!(D=D.map(function(L){var I=[u(0,R,L[0],[]),u(1,R,L[1],[])];if(I[1]>I[0])return I}).filter(function(L){return L})).length)return}return D.length>1?D:D[0]}}},{"../../lib":503,"../../lib/gup":500,"./constants":892,"@plotly/d3":58}],890:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../plots/get_data").getModuleCalcData,T=_("./plot"),b=_("../../constants/xmlns_namespaces");ae.name="parcoords",ae.plot=function(e){var o=x(e.calcdata,"parcoords")[0];o.length&&T(e,o)},ae.clean=function(e,o,a,l){var i=l._has&&l._has("parcoords"),d=o._has&&o._has("parcoords");i&&!d&&(l._paperdiv.selectAll(".parcoords").remove(),l._glimages.selectAll("*").remove())},ae.toSVG=function(e){var o=e._fullLayout._glimages,a=m.select(e).selectAll(".svg-container");a.filter(function(l,i){return i===a.size()-1}).selectAll(".gl-canvas-context, .gl-canvas-focus").each(function(){var l=this.toDataURL("image/png");o.append("svg:image").attr({xmlns:b.svg,"xlink:href":l,preserveAspectRatio:"none",x:0,y:0,width:this.style.width,height:this.style.height})}),window.setTimeout(function(){m.selectAll("#filterBarPattern").attr("id","filterBarPattern")},60)}},{"../../constants/xmlns_namespaces":480,"../../plots/get_data":593,"./plot":899,"@plotly/d3":58}],891:[function(_,oe,ae){"use strict";var m=_("../../lib").isArrayOrTypedArray,x=_("../../components/colorscale"),T=_("../../lib/gup").wrap;oe.exports=function(b,e){var o,a;return x.hasColorscale(e,"line")&&m(e.line.color)?(o=e.line.color,a=x.extractOpts(e.line).colorscale,x.calc(b,e,{vals:o,containerStr:"line",cLetter:"c"})):(o=function(l){for(var i=new Array(l),d=0;d<l;d++)i[d]=.5;return i}(e._length),a=[[0,e.line.color],[1,e.line.color]]),T({lineColor:o,cscale:a})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500}],892:[function(_,oe,ae){"use strict";oe.exports={maxDimensionCount:60,overdrag:45,verticalPadding:2,tickDistance:50,canvasPixelRatio:1,blockLineCount:5e3,layers:["contextLineLayer","focusLineLayer","pickLineLayer"],axisTitleOffset:28,axisExtentOffset:10,deselectedLineColor:"#777",bar:{width:4,captureWidth:10,fillColor:"magenta",fillOpacity:1,snapDuration:150,snapRatio:.25,snapClose:.01,strokeOpacity:1,strokeWidth:1,handleHeight:8,handleOpacity:1,handleOverlap:0},cn:{axisExtentText:"axis-extent-text",parcoordsLineLayers:"parcoords-line-layers",parcoordsLineLayer:"parcoords-lines",parcoords:"parcoords",parcoordsControlView:"parcoords-control-view",yAxis:"y-axis",axisOverlays:"axis-overlays",axis:"axis",axisHeading:"axis-heading",axisTitle:"axis-title",axisExtent:"axis-extent",axisExtentTop:"axis-extent-top",axisExtentTopText:"axis-extent-top-text",axisExtentBottom:"axis-extent-bottom",axisExtentBottomText:"axis-extent-bottom-text",axisBrush:"axis-brush"},id:{filterBarPattern:"filter-bar-pattern"}}},{}],893:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../components/colorscale/helpers").hasColorscale,T=_("../../components/colorscale/defaults"),b=_("../../plots/domain").defaults,e=_("../../plots/array_container_defaults"),o=_("../../plots/cartesian/axes"),a=_("./attributes"),l=_("./axisbrush"),i=_("./constants").maxDimensionCount,d=_("./merge_length");function u(s,c,h,p){function v(M,A){return m.coerce(s,c,a.dimensions,M,A)}var g=v("values"),f=v("visible");if(g&&g.length||(f=c.visible=!1),f){v("label"),v("tickvals"),v("ticktext"),v("tickformat");var w=v("range");c._ax={_id:"y",type:"linear",showexponent:"all",exponentformat:"B",range:w},o.setConvert(c._ax,p.layout),v("multiselect");var y=v("constraintrange");y&&(c.constraintrange=l.cleanRanges(y,c))}}oe.exports=function(s,c,h,p){function v(M,A){return m.coerce(s,c,a,M,A)}var g=s.dimensions;Array.isArray(g)&&g.length>i&&(m.log("parcoords traces support up to "+i+" dimensions at the moment"),g.splice(i));var f=e(s,c,{name:"dimensions",layout:p,handleItemDefaults:u}),w=function(M,A,k,C,P){var D=P("line.color",k);if(x(M,"line")&&m.isArrayOrTypedArray(D)){if(D.length)return P("line.colorscale"),T(M,A,C,P,{prefix:"line.",cLetter:"c"}),D.length;A.line.color=k}return 1/0}(s,c,h,p,v);b(c,p,v),Array.isArray(f)&&f.length||(c.visible=!1),d(c,f,"values",w);var y={family:p.font.family,size:Math.round(p.font.size/1.2),color:p.font.color};m.coerceFont(v,"labelfont",y),m.coerceFont(v,"tickfont",y),m.coerceFont(v,"rangefont",y),v("labelangle"),v("labelside")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503,"../../plots/array_container_defaults":549,"../../plots/cartesian/axes":554,"../../plots/domain":584,"./attributes":888,"./axisbrush":889,"./constants":892,"./merge_length":897}],894:[function(_,oe,ae){"use strict";var m=_("../../lib").isTypedArray;ae.convertTypedArray=function(x){return m(x)?Array.prototype.slice.call(x):x},ae.isOrdinal=function(x){return!!x.tickvals},ae.isVisible=function(x){return x.visible||!("visible"in x)}},{"../../lib":503}],895:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("./plot"),colorbar:{container:"line",min:"cmin",max:"cmax"},moduleType:"trace",name:"parcoords",basePlotModule:_("./base_plot"),categories:["gl","regl","noOpacity","noHover"],meta:{}}},{"./attributes":888,"./base_plot":890,"./calc":891,"./defaults":893,"./plot":899}],896:[function(_,oe,ae){"use strict";var m=_("glslify"),x=m(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nattribute vec4 p01_04, p05_08, p09_12, p13_16,\n               p17_20, p21_24, p25_28, p29_32,\n               p33_36, p37_40, p41_44, p45_48,\n               p49_52, p53_56, p57_60, colors;\n\nuniform mat4 dim0A, dim1A, dim0B, dim1B, dim0C, dim1C, dim0D, dim1D,\n             loA, hiA, loB, hiB, loC, hiC, loD, hiD;\n\nuniform vec2 resolution, viewBoxPos, viewBoxSize;\nuniform float maskHeight;\nuniform float drwLayer; // 0: context, 1: focus, 2: pick\nuniform vec4 contextColor;\nuniform sampler2D maskTexture, palette;\n\nbool isPick    = (drwLayer > 1.5);\nbool isContext = (drwLayer < 0.5);\n\nconst vec4 ZEROS = vec4(0.0, 0.0, 0.0, 0.0);\nconst vec4 UNITS = vec4(1.0, 1.0, 1.0, 1.0);\n\nfloat val(mat4 p, mat4 v) {\n    return dot(matrixCompMult(p, v) * UNITS, UNITS);\n}\n\nfloat axisY(float ratio, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float y1 = val(A, dim0A) + val(B, dim0B) + val(C, dim0C) + val(D, dim0D);\n    float y2 = val(A, dim1A) + val(B, dim1B) + val(C, dim1C) + val(D, dim1D);\n    return y1 * (1.0 - ratio) + y2 * ratio;\n}\n\nint iMod(int a, int b) {\n    return a - b * (a / b);\n}\n\nbool fOutside(float p, float lo, float hi) {\n    return (lo < hi) && (lo > p || p > hi);\n}\n\nbool vOutside(vec4 p, vec4 lo, vec4 hi) {\n    return (\n        fOutside(p[0], lo[0], hi[0]) ||\n        fOutside(p[1], lo[1], hi[1]) ||\n        fOutside(p[2], lo[2], hi[2]) ||\n        fOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool mOutside(mat4 p, mat4 lo, mat4 hi) {\n    return (\n        vOutside(p[0], lo[0], hi[0]) ||\n        vOutside(p[1], lo[1], hi[1]) ||\n        vOutside(p[2], lo[2], hi[2]) ||\n        vOutside(p[3], lo[3], hi[3])\n    );\n}\n\nbool outsideBoundingBox(mat4 A, mat4 B, mat4 C, mat4 D) {\n    return mOutside(A, loA, hiA) ||\n           mOutside(B, loB, hiB) ||\n           mOutside(C, loC, hiC) ||\n           mOutside(D, loD, hiD);\n}\n\nbool outsideRasterMask(mat4 A, mat4 B, mat4 C, mat4 D) {\n    mat4 pnts[4];\n    pnts[0] = A;\n    pnts[1] = B;\n    pnts[2] = C;\n    pnts[3] = D;\n\n    for(int i = 0; i < 4; ++i) {\n        for(int j = 0; j < 4; ++j) {\n            for(int k = 0; k < 4; ++k) {\n                if(0 == iMod(\n                    int(255.0 * texture2D(maskTexture,\n                        vec2(\n                            (float(i * 2 + j / 2) + 0.5) / 8.0,\n                            (pnts[i][j][k] * (maskHeight - 1.0) + 1.0) / maskHeight\n                        ))[3]\n                    ) / int(pow(2.0, float(iMod(j * 4 + k, 8)))),\n                    2\n                )) return true;\n            }\n        }\n    }\n    return false;\n}\n\nvec4 position(bool isContext, float v, mat4 A, mat4 B, mat4 C, mat4 D) {\n    float x = 0.5 * sign(v) + 0.5;\n    float y = axisY(x, A, B, C, D);\n    float z = 1.0 - abs(v);\n\n    z += isContext ? 0.0 : 2.0 * float(\n        outsideBoundingBox(A, B, C, D) ||\n        outsideRasterMask(A, B, C, D)\n    );\n\n    return vec4(\n        2.0 * (vec2(x, y) * viewBoxSize + viewBoxPos) / resolution - 1.0,\n        z,\n        1.0\n    );\n}\n\nvoid main() {\n    mat4 A = mat4(p01_04, p05_08, p09_12, p13_16);\n    mat4 B = mat4(p17_20, p21_24, p25_28, p29_32);\n    mat4 C = mat4(p33_36, p37_40, p41_44, p45_48);\n    mat4 D = mat4(p49_52, p53_56, p57_60, ZEROS);\n\n    float v = colors[3];\n\n    gl_Position = position(isContext, v, A, B, C, D);\n\n    fragColor =\n        isContext ? vec4(contextColor) :\n        isPick ? vec4(colors.rgb, 1.0) : texture2D(palette, vec2(abs(v), 0.5));\n}\n"]),T=m(["precision highp float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n    gl_FragColor = fragColor;\n}\n"]),b=_("./constants").maxDimensionCount,e=_("../../lib"),o=new Uint8Array(4),a=new Uint8Array(4),l={shape:[256,1],format:"rgba",type:"uint8",mag:"nearest",min:"nearest"};function i(f,w,y,M,A){var k=f._gl;k.enable(k.SCISSOR_TEST),k.scissor(w,y,M,A),f.clear({color:[0,0,0,0],depth:1})}function d(f,w,y,M,A,k){var C=k.key;y.drawCompleted||(f.read({x:0,y:0,width:1,height:1,data:o}),y.drawCompleted=!0),function P(D){var F=Math.min(M,A-D*M);0===D&&(window.cancelAnimationFrame(y.currentRafs[C]),delete y.currentRafs[C],i(f,k.scissorX,k.scissorY,k.scissorWidth,k.viewBoxSize[1])),y.clearOnly||(k.count=2*F,k.offset=2*D*M,w(k),D*M+F<A&&(y.currentRafs[C]=window.requestAnimationFrame(function(){P(D+1)})),y.drawCompleted=!1)}(0)}function u(f,w){for(var y=new Array(256),M=0;M<256;M++)y[M]=f(M/255).concat(w);return y}function s(f,w){return(f>>>8*w)%256/255}function c(f,w,y){for(var M=new Array(8*w),A=0,k=0;k<w;k++)for(var C=0;C<2;C++)for(var P=0;P<4;P++){var D=4*f+P,F=y[64*k+D];63===D&&0===C&&(F*=-1),M[A++]=F}return M}function h(f){var w="0"+f;return w.substr(w.length-2)}function p(f){return f<b?"p"+h(f+1)+"_"+h(f+4):"colors"}function v(f,w,y,M,A,k,C,P,D,F,R,L,I,B){for(var V=[[],[]],Z=0;Z<64;Z++)V[0][Z]=Z===A?1:0,V[1][Z]=Z===k?1:0;var Y=f.lines.canvasOverdrag*B,ee=f.domain,J=f.canvasWidth*B,$=f.canvasHeight*B,Q=f.pad.l*B,se=f.pad.b*B,j=f.layoutHeight*B,G=f.layoutWidth*B,W=f.deselectedLines.color;return e.extendFlat({key:R,resolution:[J,$],viewBoxPos:[(C*=B)+Y,P*=B],viewBoxSize:[D*=B,F*=B],i0:A,i1:k,dim0A:V[0].slice(0,16),dim0B:V[0].slice(16,32),dim0C:V[0].slice(32,48),dim0D:V[0].slice(48,64),dim1A:V[1].slice(0,16),dim1B:V[1].slice(16,32),dim1C:V[1].slice(32,48),dim1D:V[1].slice(48,64),drwLayer:L,contextColor:[W[0]/255,W[1]/255,W[2]/255,W[3]<1?W[3]:Math.max(1/255,Math.pow(1/f.lines.color.length,1/3))],scissorX:(M===w?0:C+Y)+(Q-Y)+G*ee.x[0],scissorWidth:(M===y?J-C+Y:D+.5)+(M===w?C+Y:0),scissorY:P+se+j*ee.y[0],scissorHeight:F,viewportX:Q-Y+G*ee.x[0],viewportY:se+j*ee.y[0],viewportWidth:J,viewportHeight:$},I)}function g(f){var w=Math.max(0,Math.floor(2047*f[0]),0),y=Math.min(2047,Math.ceil(2047*f[1]),2047);return[Math.min(w,y),Math.max(w,y)]}oe.exports=function(f,w){var y,A,k,C,P=w.context,D=w.pick,F=w.regl,R=F._gl,L=R.getParameter(R.ALIASED_LINE_WIDTH_RANGE),I=Math.max(L[0],Math.min(L[1],w.viewModel.plotGlPixelRatio)),B={currentRafs:{},drawCompleted:!0,clearOnly:!1},V=function($){for(var Q={},se=0;se<=b;se+=4)Q[p(se)]=$.buffer({usage:"dynamic",type:"float",data:new Uint8Array(0)});return Q}(F),Z=F.texture(l),Y=[];J(w);var ee=F({profile:!1,blend:{enable:P,func:{srcRGB:"src alpha",dstRGB:"one minus src alpha",srcAlpha:1,dstAlpha:1},equation:{rgb:"add",alpha:"add"},color:[0,0,0,0]},depth:{enable:!P,mask:!0,func:"less",range:[0,1]},cull:{enable:!0,face:"back"},scissor:{enable:!0,box:{x:F.prop("scissorX"),y:F.prop("scissorY"),width:F.prop("scissorWidth"),height:F.prop("scissorHeight")}},viewport:{x:F.prop("viewportX"),y:F.prop("viewportY"),width:F.prop("viewportWidth"),height:F.prop("viewportHeight")},dither:!1,vert:x,frag:T,primitive:"lines",lineWidth:I,attributes:V,uniforms:{resolution:F.prop("resolution"),viewBoxPos:F.prop("viewBoxPos"),viewBoxSize:F.prop("viewBoxSize"),dim0A:F.prop("dim0A"),dim1A:F.prop("dim1A"),dim0B:F.prop("dim0B"),dim1B:F.prop("dim1B"),dim0C:F.prop("dim0C"),dim1C:F.prop("dim1C"),dim0D:F.prop("dim0D"),dim1D:F.prop("dim1D"),loA:F.prop("loA"),hiA:F.prop("hiA"),loB:F.prop("loB"),hiB:F.prop("hiB"),loC:F.prop("loC"),hiC:F.prop("hiC"),loD:F.prop("loD"),hiD:F.prop("hiD"),palette:Z,contextColor:F.prop("contextColor"),maskTexture:F.prop("maskTexture"),drwLayer:F.prop("drwLayer"),maskHeight:F.prop("maskHeight")},offset:F.prop("offset"),count:F.prop("count")});function J($){y=$.model,A=$.viewModel.dimensions.slice(),k=A[0]?A[0].values.length:0;var Q=y.lines,se=D?Q.color.map(function(G,W){return W/Q.color.length}):Q.color,j=function(G,W,ie){for(var te=new Array(G*(b+4)),ne=0,le=0;le<G;le++){for(var ue=0;ue<b;ue++)te[ne++]=ue<W.length?W[ue].paddedUnitValues[le]:.5;te[ne++]=s(le,2),te[ne++]=s(le,1),te[ne++]=s(le,0),te[ne++]=Math.max(1e-6,Math.min(.999999,ie[le]))}return te}(k,A,se);(function(G,W,ie){for(var q=0;q<=b;q+=4)G[p(q)](c(q/4,W,ie))})(V,k,j),P||D||(Z=F.texture(e.extendFlat({data:u(y.unitToColor,255)},l)))}return{render:function($,Q,se){var j,G,W,ie=$.length,q=1/0,te=-1/0;for(j=0;j<ie;j++)$[j].dim0.canvasX<q&&(q=$[j].dim0.canvasX,G=j),$[j].dim1.canvasX>te&&(te=$[j].dim1.canvasX,W=j);0===ie&&i(F,0,0,y.canvasWidth,y.canvasHeight);var ne=function(Se){var Fe,ve,Te,Le=[[],[]];for(Te=0;Te<64;Te++){var Ee=!Se&&Te<A.length?A[Te].brush.filter.getBounds():[-1/0,1/0];Le[0][Te]=Ee[0],Le[1][Te]=Ee[1]}var Pe=new Array(16384);for(Fe=0;Fe<16384;Fe++)Pe[Fe]=255;if(!Se)for(Fe=0;Fe<A.length;Fe++){var je=Fe%8,Ge=(Fe-je)/8,Ke=Math.pow(2,je),lt=A[Fe].brush.filter.get();if(!(lt.length<2)){var Ue=g(lt[0])[1];for(ve=1;ve<lt.length;ve++){var $e=g(lt[ve]);for(Te=Ue+1;Te<$e[0];Te++)Pe[8*Te+Ge]&=~Ke;Ue=Math.max(Ue,$e[1])}}}var et={shape:[8,2048],format:"alpha",type:"uint8",mag:"nearest",min:"nearest",data:Pe};return C?C(et):C=F.texture(et),{maskTexture:C,maskHeight:2048,loA:Le[0].slice(0,16),loB:Le[0].slice(16,32),loC:Le[0].slice(32,48),loD:Le[0].slice(48,64),hiA:Le[1].slice(0,16),hiB:Le[1].slice(16,32),hiC:Le[1].slice(32,48),hiD:Le[1].slice(48,64)}}(P);for(j=0;j<ie;j++){var le=$[j],ue=le.dim0.crossfilterDimensionIndex,de=le.dim1.crossfilterDimensionIndex,he=le.canvasX,be=le.canvasY,ge=he+le.panelSizeX,we=le.plotGlPixelRatio;if(Q||!Y[ue]||Y[ue][0]!==he||Y[ue][1]!==ge){Y[ue]=[he,ge];var Ce=v(y,G,W,j,ue,de,he,be,le.panelSizeX,le.panelSizeY,le.dim0.crossfilterDimensionIndex,P?0:D?2:1,ne,we);B.clearOnly=se,d(F,ee,B,Q?y.lines.blockLineCount:k,k,Ce)}}},readPixel:function($,Q){return F.read({x:$,y:Q,width:1,height:1,data:a}),a},readPixels:function($,Q,se,j){var G=new Uint8Array(4*se*j);return F.read({x:$,y:Q,width:se,height:j,data:G}),G},destroy:function(){for(var $ in f.style["pointer-events"]="none",Z.destroy(),C&&C.destroy(),V)V[$].destroy()},update:J}}},{"../../lib":503,"./constants":892,glslify:227}],897:[function(_,oe,ae){"use strict";oe.exports=function(m,x,T,b){var e,o;for(b||(b=1/0),e=0;e<x.length;e++)(o=x[e]).visible&&(b=Math.min(b,o[T].length));for(b===1/0&&(b=0),m._length=b,e=0;e<x.length;e++)(o=x[e]).visible&&(o._length=b);return b}},{}],898:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../lib"),T=x.numberFormat,b=_("color-rgba"),e=_("../../plots/cartesian/axes"),o=x.strRotate,a=x.strTranslate,l=_("../../lib/svg_text_utils"),i=_("../../components/drawing"),d=_("../../components/colorscale"),u=_("../../lib/gup"),s=u.keyFun,c=u.repeat,h=u.unwrap,p=_("./helpers"),v=_("./constants"),g=_("./axisbrush"),f=_("./lines");function w(Y,ee,J){return x.aggNums(Y,null,ee,J)}function y(Y,ee){return A(w(Math.min,Y,ee),w(Math.max,Y,ee))}function M(Y){var ee=Y.range;return ee?A(ee[0],ee[1]):y(Y.values,Y._length)}function A(Y,ee){return!isNaN(Y)&&isFinite(Y)||(Y=0),!isNaN(ee)&&isFinite(ee)||(ee=0),Y===ee&&(0===Y?(Y-=1,ee+=1):(Y*=.9,ee*=1.1)),[Y,ee]}function k(Y,ee,J,$,Q){var se,j,G=M(J);return $?m.scale.ordinal().domain($.map((se=T(J.tickformat),j=Q,j?function(W,ie){var q=j[ie];return null==q?se(W):q}:se))).range($.map(function(W){return Y-ee+(W-G[0])/(G[1]-G[0])*(2*ee-Y)})):m.scale.linear().domain(G).range([Y-ee,ee])}function C(Y){if(Y.tickvals){var ee=M(Y);return m.scale.ordinal().domain(Y.tickvals).range(Y.tickvals.map(function(J){return(J-ee[0])/(ee[1]-ee[0])}))}}function P(Y){var ee=Y.map(function(Q){return Q[0]}),J=Y.map(function(Q){var se=b(Q[1]);return m.rgb("rgb("+se[0]+","+se[1]+","+se[2]+")")}),$="rgb".split("").map(function(Q){return m.scale.linear().clamp(!0).domain(ee).range(J.map((se=Q,function(j){return j[se]})));var se});return function(Q){return $.map(function(se){return se(Q)})}}function D(Y){return Y.dimensions.some(function(ee){return ee.brush.filterSpecified})}function F(Y,ee,J){var $=h(ee),Q=$.trace,se=p.convertTypedArray($.lineColor),j=Q.line,G={color:b(v.deselectedLineColor)},W=d.extractOpts(j),ie=W.reversescale?d.flipScale($.cscale):$.cscale,q=Q.domain,te=Q.dimensions,ne=Y.width,le=Q.labelangle,ue=Q.labelside,de=Q.labelfont,he=Q.tickfont,be=Q.rangefont,ge=x.extendDeepNoArrays({},j,{color:se.map(m.scale.linear().domain(M({values:se,range:[W.min,W.max],_length:Q._length}))),blockLineCount:v.blockLineCount,canvasOverdrag:v.overdrag*v.canvasPixelRatio}),we=Math.floor(ne*(q.x[1]-q.x[0])),Ce=Math.floor(Y.height*(q.y[1]-q.y[0])),De=Y.margin||{l:80,r:80,t:100,b:80},Se=we,Fe=Ce;return{key:J,colCount:te.filter(p.isVisible).length,dimensions:te,tickDistance:v.tickDistance,unitToColor:P(ie),lines:ge,deselectedLines:G,labelAngle:le,labelSide:ue,labelFont:de,tickFont:he,rangeFont:be,layoutWidth:ne,layoutHeight:Y.height,domain:q,translateX:q.x[0]*ne,translateY:Y.height-q.y[1]*Y.height,pad:De,canvasWidth:Se*v.canvasPixelRatio+2*ge.canvasOverdrag,canvasHeight:Fe*v.canvasPixelRatio,width:Se,height:Fe,canvasPixelRatio:v.canvasPixelRatio}}function R(Y,ee,J){var ne,le,$=J.width,Q=J.height,se=J.dimensions,j=J.canvasPixelRatio,G=function(ne){return $*ne/Math.max(1,J.colCount-1)},W=v.verticalPadding/Q,ie=(ne=Q,le=v.verticalPadding,m.scale.linear().range([le,ne-le])),q={key:J.key,xScale:G,model:J,inBrushDrag:!1},te={};return q.dimensions=se.filter(p.isVisible).map(function(ne,le){var Pe,je,ue=(Pe=ne,je=W,m.scale.linear().domain(M(Pe)).range([je,1-je])),de=te[ne.label];te[ne.label]=(de||0)+1;var he=ne.label+(de?"__"+de:""),be=ne.constraintrange,ge=be&&be.length;ge&&!Array.isArray(be[0])&&(be=[be]);var we=ge?be.map(function(Pe){return Pe.map(ue)}):[[-1/0,1/0]],Ce=ne.values;Ce.length>ne._length&&(Ce=Ce.slice(0,ne._length));var De,Se=ne.tickvals;function Fe(Pe,je){return{val:Pe,text:De[je]}}function ve(Pe,je){return Pe.val-je.val}if(Array.isArray(Se)&&Se.length){De=ne.ticktext,Array.isArray(De)&&De.length?De.length>Se.length?De=De.slice(0,Se.length):Se.length>De.length&&(Se=Se.slice(0,De.length)):De=Se.map(T(ne.tickformat));for(var Te=1;Te<Se.length;Te++)if(Se[Te]<Se[Te-1]){for(var Le=Se.map(Fe).sort(ve),Ee=0;Ee<Se.length;Ee++)Se[Ee]=Le[Ee].val,De[Ee]=Le[Ee].text;break}}else Se=void 0;return Ce=p.convertTypedArray(Ce),{key:he,label:ne.label,tickFormat:ne.tickformat,tickvals:Se,ticktext:De,ordinal:p.isOrdinal(ne),multiselect:ne.multiselect,xIndex:le,crossfilterDimensionIndex:le,visibleIndex:ne._index,height:Q,values:Ce,paddedUnitValues:Ce.map(ue),unitTickvals:Se&&Se.map(ue),xScale:G,x:G(le),canvasX:G(le)*j,unitToPaddedPx:ie,domainScale:k(Q,v.verticalPadding,ne,Se,De),ordinalScale:C(ne),parent:q,model:J,brush:g.makeBrush(Y,ge,we,function(){Y.linePickActive(!1)},function(){var Pe=q;Pe.focusLayer&&Pe.focusLayer.render(Pe.panels,!0);var je=D(Pe);!Y.contextShown()&&je?(Pe.contextLayer&&Pe.contextLayer.render(Pe.panels,!0),Y.contextShown(!0)):Y.contextShown()&&!je&&(Pe.contextLayer&&Pe.contextLayer.render(Pe.panels,!0,!0),Y.contextShown(!1))},function(Pe){if(q.focusLayer.render(q.panels,!0),q.pickLayer&&q.pickLayer.render(q.panels,!0),Y.linePickActive(!0),ee&&ee.filterChanged){var je=ue.invert,Ge=Pe.map(function(Ke){return Ke.map(je).sort(x.sorterAsc)}).sort(function(Ke,lt){return Ke[0]-lt[0]});ee.filterChanged(q.key,ne._index,Ge)}})}}),q}function L(Y){Y.classed(v.cn.axisExtentText,!0).attr("text-anchor","middle").style("cursor","default")}function I(Y,ee){var $=Y*Math.PI/180;return{dir:"top"===ee?1:-1,dx:Math.sin($),dy:Math.cos($),degrees:Y}}function B(Y,ee,J){for(var $=ee.panels||(ee.panels=[]),Q=Y.data(),se=0;se<Q.length-1;se++){var j=$[se]||($[se]={}),G=Q[se],W=Q[se+1];j.dim0=G,j.dim1=W,j.canvasX=G.canvasX,j.panelSizeX=W.canvasX-G.canvasX,j.panelSizeY=ee.model.canvasHeight,j.y=0,j.canvasY=0,j.plotGlPixelRatio=J}}function V(Y,ee){return e.tickText(Y._ax,ee,!1).text}function Z(Y,ee){if(Y.ordinal)return"";var J=Y.domainScale.domain();return V(Y.model.dimensions[Y.visibleIndex],J[ee?J.length-1:0])}oe.exports=function(Y,ee,J,$){var Q=Y._fullLayout,se=Q._toppaper,j=Q._glcontainer,G=Y._context.plotGlPixelRatio,W=Y._fullLayout.paper_bgcolor;!function(Ee){for(var Pe=0;Pe<Ee.length;Pe++)for(var je=0;je<Ee[Pe].length;je++)for(var Ge=Ee[Pe][je].trace,Ke=Ge.dimensions,lt=0;lt<Ke.length;lt++){var Ue=Ke[lt].values,$e=Ke[lt]._ax;$e&&($e.range=$e.range?A($e.range[0],$e.range[1]):y(Ue,Ge._length),$e.dtick||($e.dtick=.01*(Math.abs($e.range[1]-$e.range[0])||1)),$e.tickformat=Ke[lt].tickformat,e.calcTicks($e),$e.cleanRange())}}(ee);var ie,q,te=(ie=!0,q=!1,{linePickActive:function(Ee){return arguments.length?ie=!!Ee:ie},contextShown:function(Ee){return arguments.length?q=!!Ee:q}}),ne=ee.filter(function(Ee){return h(Ee).trace.visible}).map(F.bind(0,J)).map(R.bind(0,te,$));j.each(function(Ee,Pe){return x.extendFlat(Ee,ne[Pe])});var le=j.selectAll(".gl-canvas").each(function(Ee){Ee.viewModel=ne[0],Ee.viewModel.plotGlPixelRatio=G,Ee.viewModel.paperColor=W,Ee.model=Ee.viewModel?Ee.viewModel.model:null}),ue=null;le.filter(function(Ee){return Ee.pick}).style("pointer-events","auto").on("mousemove",function(Ee){if(te.linePickActive()&&Ee.lineLayer&&$&&$.hover){var Pe=m.event,je=this.width,Ge=this.height,Ke=m.mouse(this),lt=Ke[0],Ue=Ke[1];if(lt<0||Ue<0||lt>=je||Ue>=Ge)return;var $e=Ee.lineLayer.readPixel(lt,Ge-1-Ue),et=0!==$e[3],tt=et?$e[2]+256*($e[1]+256*$e[0]):null,ct={x:lt,y:Ue,clientX:Pe.clientX,clientY:Pe.clientY,dataIndex:Ee.model.key,curveNumber:tt};tt!==ue&&(et?$.hover(ct):$.unhover&&$.unhover(ct),ue=tt)}}),le.style("opacity",function(Ee){return Ee.pick?0:1}),se.style("background","rgba(255, 255, 255, 0)");var de=se.selectAll("."+v.cn.parcoords).data(ne,s);de.exit().remove(),de.enter().append("g").classed(v.cn.parcoords,!0).style("shape-rendering","crispEdges").style("pointer-events","none"),de.attr("transform",function(Ee){return a(Ee.model.translateX,Ee.model.translateY)});var he=de.selectAll("."+v.cn.parcoordsControlView).data(c,s);he.enter().append("g").classed(v.cn.parcoordsControlView,!0),he.attr("transform",function(Ee){return a(Ee.model.pad.l,Ee.model.pad.t)});var be=he.selectAll("."+v.cn.yAxis).data(function(Ee){return Ee.dimensions},s);be.enter().append("g").classed(v.cn.yAxis,!0),he.each(function(Ee){B(be,Ee,G)}),le.each(function(Ee){Ee.viewModel&&(!Ee.lineLayer||$?Ee.lineLayer=f(this,Ee):Ee.lineLayer.update(Ee),(Ee.key||0===Ee.key)&&(Ee.viewModel[Ee.key]=Ee.lineLayer),Ee.lineLayer.render(Ee.viewModel.panels,!Ee.context||$))}),be.attr("transform",function(Ee){return a(Ee.xScale(Ee.xIndex),0)}),be.call(m.behavior.drag().origin(function(Ee){return Ee}).on("drag",function(Ee){var Pe=Ee.parent;te.linePickActive(!1),Ee.x=Math.max(-v.overdrag,Math.min(Ee.model.width+v.overdrag,m.event.x)),Ee.canvasX=Ee.x*Ee.model.canvasPixelRatio,be.sort(function(je,Ge){return je.x-Ge.x}).each(function(je,Ge){je.xIndex=Ge,je.x=Ee===je?je.x:je.xScale(je.xIndex),je.canvasX=je.x*je.model.canvasPixelRatio}),B(be,Pe,G),be.filter(function(je){return 0!==Math.abs(Ee.xIndex-je.xIndex)}).attr("transform",function(je){return a(je.xScale(je.xIndex),0)}),m.select(this).attr("transform",a(Ee.x,0)),be.each(function(je,Ge,Ke){Ke===Ee.parent.key&&(Pe.dimensions[Ge]=je)}),Pe.contextLayer&&Pe.contextLayer.render(Pe.panels,!1,!D(Pe)),Pe.focusLayer.render&&Pe.focusLayer.render(Pe.panels)}).on("dragend",function(Ee){var Pe=Ee.parent;Ee.x=Ee.xScale(Ee.xIndex),Ee.canvasX=Ee.x*Ee.model.canvasPixelRatio,B(be,Pe,G),m.select(this).attr("transform",function(je){return a(je.x,0)}),Pe.contextLayer&&Pe.contextLayer.render(Pe.panels,!1,!D(Pe)),Pe.focusLayer&&Pe.focusLayer.render(Pe.panels),Pe.pickLayer&&Pe.pickLayer.render(Pe.panels,!0),te.linePickActive(!0),$&&$.axesMoved&&$.axesMoved(Pe.key,Pe.dimensions.map(function(je){return je.crossfilterDimensionIndex}))})),be.exit().remove();var ge=be.selectAll("."+v.cn.axisOverlays).data(c,s);ge.enter().append("g").classed(v.cn.axisOverlays,!0),ge.selectAll("."+v.cn.axis).remove();var we=ge.selectAll("."+v.cn.axis).data(c,s);we.enter().append("g").classed(v.cn.axis,!0),we.each(function(Ee){var Pe=Ee.model.height/Ee.model.tickDistance,je=Ee.domainScale,Ge=je.domain();m.select(this).call(m.svg.axis().orient("left").tickSize(4).outerTickSize(2).ticks(Pe,Ee.tickFormat).tickValues(Ee.ordinal?Ge:null).tickFormat(function(Ke){return p.isOrdinal(Ee)?Ke:V(Ee.model.dimensions[Ee.visibleIndex],Ke)}).scale(je)),i.font(we.selectAll("text"),Ee.model.tickFont)}),we.selectAll(".domain, .tick>line").attr("fill","none").attr("stroke","black").attr("stroke-opacity",.25).attr("stroke-width","1px"),we.selectAll("text").style("text-shadow",l.makeTextShadow(W)).style("cursor","default");var Ce=ge.selectAll("."+v.cn.axisHeading).data(c,s);Ce.enter().append("g").classed(v.cn.axisHeading,!0);var De=Ce.selectAll("."+v.cn.axisTitle).data(c,s);De.enter().append("text").classed(v.cn.axisTitle,!0).attr("text-anchor","middle").style("cursor","ew-resize").style("pointer-events","auto"),De.text(function(Ee){return Ee.label}).each(function(Ee){var Pe=m.select(this);i.font(Pe,Ee.model.labelFont),l.convertToTspans(Pe,Y)}).attr("transform",function(Ee){var Pe=I(Ee.model.labelAngle,Ee.model.labelSide),je=v.axisTitleOffset;return(Pe.dir>0?"":a(0,2*je+Ee.model.height))+o(Pe.degrees)+a(-je*Pe.dx,-je*Pe.dy)}).attr("text-anchor",function(Ee){var Pe=I(Ee.model.labelAngle,Ee.model.labelSide);return 2*Math.abs(Pe.dx)>Math.abs(Pe.dy)?Pe.dir*Pe.dx<0?"start":"end":"middle"});var Se=ge.selectAll("."+v.cn.axisExtent).data(c,s);Se.enter().append("g").classed(v.cn.axisExtent,!0);var Fe=Se.selectAll("."+v.cn.axisExtentTop).data(c,s);Fe.enter().append("g").classed(v.cn.axisExtentTop,!0),Fe.attr("transform",a(0,-v.axisExtentOffset));var ve=Fe.selectAll("."+v.cn.axisExtentTopText).data(c,s);ve.enter().append("text").classed(v.cn.axisExtentTopText,!0).call(L),ve.text(function(Ee){return Z(Ee,!0)}).each(function(Ee){i.font(m.select(this),Ee.model.rangeFont)});var Te=Se.selectAll("."+v.cn.axisExtentBottom).data(c,s);Te.enter().append("g").classed(v.cn.axisExtentBottom,!0),Te.attr("transform",function(Ee){return a(0,Ee.model.height+v.axisExtentOffset)});var Le=Te.selectAll("."+v.cn.axisExtentBottomText).data(c,s);Le.enter().append("text").classed(v.cn.axisExtentBottomText,!0).attr("dy","0.75em").call(L),Le.text(function(Ee){return Z(Ee,!1)}).each(function(Ee){i.font(m.select(this),Ee.model.rangeFont)}),g.ensureAxisBrush(ge,W)}},{"../../components/colorscale":378,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../plots/cartesian/axes":554,"./axisbrush":889,"./constants":892,"./helpers":894,"./lines":896,"@plotly/d3":58,"color-rgba":91}],899:[function(_,oe,ae){"use strict";var m=_("./parcoords"),x=_("../../lib/prepare_regl"),T=_("./helpers").isVisible;function b(e,o,a){var l=o.indexOf(a),i=e.indexOf(l);return-1===i&&(i+=o.length),i}oe.exports=function(e,o){var a=e._fullLayout;if(x(e)){var l={},i={},d={},u={},s=a._size;o.forEach(function(c,h){var p=c[0].trace;d[h]=p.index;var v=u[h]=p._fullInput.index;l[h]=e.data[v].dimensions,i[h]=e.data[v].dimensions.slice()}),m(e,o,{width:s.w,height:s.h,margin:{t:s.t,r:s.r,b:s.b,l:s.l}},{filterChanged:function(c,h,p){var v=i[c][h],g=p.map(function(k){return k.slice()}),f="dimensions["+h+"].constraintrange",w=a._tracePreGUI[e._fullData[d[c]]._fullInput.uid];void 0===w[f]&&(w[f]=v.constraintrange||null);var M=e._fullData[d[c]].dimensions[h];g.length?(1===g.length&&(g=g[0]),v.constraintrange=g,M.constraintrange=g.slice(),g=[g]):(delete v.constraintrange,delete M.constraintrange,g=null);var A={};A[f]=g,e.emit("plotly_restyle",[A,[u[c]]])},hover:function(c){e.emit("plotly_hover",c)},unhover:function(c){e.emit("plotly_unhover",c)},axesMoved:function(c,h){var v,g,p=(v=h,g=i[c].filter(T),function(f,w){return b(v,g,f)-b(v,g,w)});l[c].sort(p),i[c].filter(function(v){return!T(v)}).sort(function(v){return i[c].indexOf(v)}).forEach(function(v){l[c].splice(l[c].indexOf(v),1),l[c].splice(i[c].indexOf(v),0,v)}),e.emit("plotly_restyle",[{dimensions:[l[c]]},[u[c]]])}})}}},{"../../lib/prepare_regl":516,"./helpers":894,"./parcoords":898}],900:[function(_,oe,ae){"use strict";var m=_("../../plots/attributes"),x=_("../../plots/domain").attributes,T=_("../../plots/font_attributes"),b=_("../../components/color/attributes"),e=_("../../plots/template_attributes").hovertemplateAttrs,o=_("../../plots/template_attributes").texttemplateAttrs,a=_("../../lib/extend").extendFlat,l=T({editType:"plot",arrayOk:!0,colorEditType:"plot"});oe.exports={labels:{valType:"data_array",editType:"calc"},label0:{valType:"number",dflt:0,editType:"calc"},dlabel:{valType:"number",dflt:1,editType:"calc"},values:{valType:"data_array",editType:"calc"},marker:{colors:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:b.defaultLine,arrayOk:!0,editType:"style"},width:{valType:"number",min:0,dflt:0,arrayOk:!0,editType:"style"},editType:"calc"},editType:"calc"},text:{valType:"data_array",editType:"plot"},hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},scalegroup:{valType:"string",dflt:"",editType:"calc"},textinfo:{valType:"flaglist",flags:["label","text","value","percent"],extras:["none"],editType:"calc"},hoverinfo:a({},m.hoverinfo,{flags:["label","text","value","percent","name"]}),hovertemplate:e({},{keys:["label","color","value","percent","text"]}),texttemplate:o({editType:"plot"},{keys:["label","color","value","percent","text"]}),textposition:{valType:"enumerated",values:["inside","outside","auto","none"],dflt:"auto",arrayOk:!0,editType:"plot"},textfont:a({},l,{}),insidetextorientation:{valType:"enumerated",values:["horizontal","radial","tangential","auto"],dflt:"auto",editType:"plot"},insidetextfont:a({},l,{}),outsidetextfont:a({},l,{}),automargin:{valType:"boolean",dflt:!1,editType:"plot"},title:{text:{valType:"string",dflt:"",editType:"plot"},font:a({},l,{}),position:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"plot"},editType:"plot"},domain:x({name:"pie",trace:!0,editType:"calc"}),hole:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},sort:{valType:"boolean",dflt:!0,editType:"calc"},direction:{valType:"enumerated",values:["clockwise","counterclockwise"],dflt:"counterclockwise",editType:"calc"},rotation:{valType:"number",min:-360,max:360,dflt:0,editType:"calc"},pull:{valType:"number",min:0,max:1,dflt:0,arrayOk:!0,editType:"calc"},_deprecated:{title:{valType:"string",dflt:"",editType:"calc"},titlefont:a({},l,{}),titleposition:{valType:"enumerated",values:["top left","top center","top right","middle center","bottom left","bottom center","bottom right"],editType:"calc"}}}},{"../../components/color/attributes":365,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],901:[function(_,oe,ae){"use strict";var m=_("../../plots/plots");ae.name="pie",ae.plot=function(x,T,b,e){m.plotBasePlot(ae.name,x,T,b,e)},ae.clean=function(x,T,b,e){m.cleanBasePlot(ae.name,x,T,b,e)}},{"../../plots/plots":619}],902:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("tinycolor2"),T=_("../../components/color"),b={};function e(a){return function(l,i){return!!l&&!!(l=x(l)).isValid()&&(l=T.addOpacity(l,l.getAlpha()),a[i]||(a[i]=l),l)}}function o(a,l){var i,d=JSON.stringify(a),u=l[d];if(!u){for(u=a.slice(),i=0;i<a.length;i++)u.push(x(a[i]).lighten(20).toHexString());for(i=0;i<a.length;i++)u.push(x(a[i]).darken(20).toHexString());l[d]=u}return u}oe.exports={calc:function(a,l){var i,d,u=[],s=a._fullLayout,c=s.hiddenlabels||[],h=l.labels,p=l.marker.colors||[],v=l.values,g=l._length,f=l._hasValues&&g;if(l.dlabel)for(h=new Array(g),i=0;i<g;i++)h[i]=String(l.label0+i*l.dlabel);var w={},y=e(s["_"+l.type+"colormap"]),M=0,A=!1;for(i=0;i<g;i++){var k,C,P;if(f){if(!m(k=v[i]))continue;k=+k}else k=1;void 0!==(C=h[i])&&""!==C||(C=i);var D=w[C=String(C)];void 0===D?(w[C]=u.length,(P=-1!==c.indexOf(C))||(M+=k),u.push({v:k,label:C,color:y(p[i],C),i,pts:[i],hidden:P})):(A=!0,(d=u[D]).v+=k,d.pts.push(i),d.hidden||(M+=k),!1===d.color&&p[i]&&(d.color=y(p[i],C)))}return u=u.filter(function(F){return F.v>=0}),("funnelarea"===l.type?A:l.sort)&&u.sort(function(F,R){return R.v-F.v}),u[0]&&(u[0].vTotal=M),u},crossTraceCalc:function(a,l){var i=(l||{}).type;i||(i="pie");var d=a._fullLayout,u=a.calcdata,s=d[i+"colorway"],c=d["_"+i+"colormap"];d["extend"+i+"colors"]&&(s=o(s,b));for(var h=0,p=0;p<u.length;p++){var v=u[p];if(v[0].trace.type===i)for(var g=0;g<v.length;g++){var f=v[g];!1===f.color&&(c[f.label]?f.color=c[f.label]:(c[f.label]=f.color=s[h%s.length],h++))}}},makePullColorFn:e,generateExtendedColors:o}},{"../../components/color":366,"fast-isnumeric":190,tinycolor2:312}],903:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../lib"),T=_("./attributes"),b=_("../../plots/domain").defaults,e=_("../bar/defaults").handleText;function o(a,l){var i=Array.isArray(a),d=x.isArrayOrTypedArray(l),u=Math.min(i?a.length:1/0,d?l.length:1/0);if(isFinite(u)||(u=0),u&&d){for(var s,c=0;c<u;c++){var h=l[c];if(m(h)&&h>0){s=!0;break}}s||(u=0)}return{hasLabels:i,hasValues:d,len:u}}oe.exports={handleLabelsAndValues:o,supplyDefaults:function(a,l,i,d){function u(y,M){return x.coerce(a,l,T,y,M)}var s=o(u("labels"),u("values")),c=s.len;if(l._hasLabels=s.hasLabels,l._hasValues=s.hasValues,!l._hasLabels&&l._hasValues&&(u("label0"),u("dlabel")),c){l._length=c,u("marker.line.width")&&u("marker.line.color"),u("marker.colors"),u("scalegroup");var h,p=u("text"),v=u("texttemplate");if(v||(h=u("textinfo",Array.isArray(p)?"text+percent":"percent")),u("hovertext"),u("hovertemplate"),v||h&&"none"!==h){var g=u("textposition");e(a,l,d,u,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),(Array.isArray(g)||"auto"===g||"outside"===g)&&u("automargin"),("inside"===g||"auto"===g||Array.isArray(g))&&u("insidetextorientation")}b(l,d,u);var f=u("hole");if(u("title.text")){var w=u("title.position",f?"middle center":"top center");f||"middle center"!==w||(l.title.position="top center"),x.coerceFont(u,"title.font",d.font)}u("sort"),u("direction"),u("rotation"),u("pull")}else l.visible=!1}}},{"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":900,"fast-isnumeric":190}],904:[function(_,oe,ae){"use strict";var m=_("../../components/fx/helpers").appendArrayMultiPointValues;oe.exports=function(x,T){var b={curveNumber:T.index,pointNumbers:x.pts,data:T._input,fullData:T,label:x.label,color:x.color,value:x.v,percent:x.percent,text:x.text,bbox:x.bbox,v:x.v};return 1===x.pts.length&&(b.pointNumber=b.i=x.pts[0]),m(b,T,x.pts),"funnelarea"===T.type&&(delete b.v,delete b.i),b}},{"../../components/fx/helpers":402}],905:[function(_,oe,ae){"use strict";var m=_("../../lib");function x(T){return-1!==T.indexOf("e")?T.replace(/[.]?0+e/,"e"):-1!==T.indexOf(".")?T.replace(/[.]?0+$/,""):T}ae.formatPiePercent=function(T,b){var e=x((100*T).toPrecision(3));return m.numSeparate(e,b)+"%"},ae.formatPieValue=function(T,b){var e=x(T.toPrecision(10));return m.numSeparate(e,b)},ae.getFirstFilled=function(T,b){if(Array.isArray(T))for(var e=0;e<b.length;e++){var o=T[b[e]];if(o||0===o||""===o)return o}},ae.castOption=function(T,b){return Array.isArray(T)?ae.getFirstFilled(T,b):T||void 0},ae.getRotationAngle=function(T){return("auto"===T?0:T)*Math.PI/180}},{"../../lib":503}],906:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults").supplyDefaults,supplyLayoutDefaults:_("./layout_defaults"),layoutAttributes:_("./layout_attributes"),calc:_("./calc").calc,crossTraceCalc:_("./calc").crossTraceCalc,plot:_("./plot").plot,style:_("./style"),styleOne:_("./style_one"),moduleType:"trace",name:"pie",basePlotModule:_("./base_plot"),categories:["pie-like","pie","showLegend"],meta:{}}},{"./attributes":900,"./base_plot":901,"./calc":902,"./defaults":903,"./layout_attributes":907,"./layout_defaults":908,"./plot":909,"./style":910,"./style_one":911}],907:[function(_,oe,ae){"use strict";oe.exports={hiddenlabels:{valType:"data_array",editType:"calc"},piecolorway:{valType:"colorlist",editType:"calc"},extendpiecolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],908:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./layout_attributes");oe.exports=function(T,b){function e(o,a){return m.coerce(T,b,x,o,a)}e("hiddenlabels"),e("piecolorway",b.colorway),e("extendpiecolors")}},{"../../lib":503,"./layout_attributes":907}],909:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../plots/plots"),T=_("../../components/fx"),b=_("../../components/color"),e=_("../../components/drawing"),o=_("../../lib"),a=o.strScale,l=o.strTranslate,i=_("../../lib/svg_text_utils"),d=_("../bar/uniform_text"),u=d.recordMinTextSize,s=d.clearMinTextSize,c=_("../bar/constants").TEXTPAD,h=_("./helpers"),p=_("./event_data"),v=_("../../lib").isValidTextValue;function g(ee,J,$){var Q=$[0],se=Q.cx,j=Q.cy,G=Q.trace,W="funnelarea"===G.type;"_hasHoverLabel"in G||(G._hasHoverLabel=!1),"_hasHoverEvent"in G||(G._hasHoverEvent=!1),ee.on("mouseover",function(ie){var q=J._fullLayout,te=J._fullData[G.index];if(!J._dragging&&!1!==q.hovermode){var ne=te.hoverinfo;if(Array.isArray(ne)&&(ne=T.castHoverinfo({hoverinfo:[h.castOption(ne,ie.pts)],_module:G._module},q,0)),"all"===ne&&(ne="label+text+value+percent+name"),te.hovertemplate||"none"!==ne&&"skip"!==ne&&ne){var le=ie.rInscribed||0,ue=se+ie.pxmid[0]*(1-le),de=j+ie.pxmid[1]*(1-le),he=q.separators,be=[];if(ne&&-1!==ne.indexOf("label")&&be.push(ie.label),ie.text=h.castOption(te.hovertext||te.text,ie.pts),ne&&-1!==ne.indexOf("text")){var ge=ie.text;o.isValidTextValue(ge)&&be.push(ge)}ie.value=ie.v,ie.valueLabel=h.formatPieValue(ie.v,he),ne&&-1!==ne.indexOf("value")&&be.push(ie.valueLabel),ie.percent=ie.v/Q.vTotal,ie.percentLabel=h.formatPiePercent(ie.percent,he),ne&&-1!==ne.indexOf("percent")&&be.push(ie.percentLabel);var we=te.hoverlabel,Ce=we.font,De=[];T.loneHover({trace:G,x0:ue-le*Q.r,x1:ue+le*Q.r,y:de,_x0:W?se+ie.TL[0]:ue-le*Q.r,_x1:W?se+ie.TR[0]:ue+le*Q.r,_y0:W?j+ie.TL[1]:de-le*Q.r,_y1:W?j+ie.BL[1]:de+le*Q.r,text:be.join("<br>"),name:te.hovertemplate||-1!==ne.indexOf("name")?te.name:void 0,idealAlign:ie.pxmid[0]<0?"left":"right",color:h.castOption(we.bgcolor,ie.pts)||ie.color,borderColor:h.castOption(we.bordercolor,ie.pts),fontFamily:h.castOption(Ce.family,ie.pts),fontSize:h.castOption(Ce.size,ie.pts),fontColor:h.castOption(Ce.color,ie.pts),nameLength:h.castOption(we.namelength,ie.pts),textAlign:h.castOption(we.align,ie.pts),hovertemplate:h.castOption(te.hovertemplate,ie.pts),hovertemplateLabels:ie,eventData:[p(ie,te)]},{container:q._hoverlayer.node(),outerContainer:q._paper.node(),gd:J,inOut_bbox:De}),ie.bbox=De[0],G._hasHoverLabel=!0}G._hasHoverEvent=!0,J.emit("plotly_hover",{points:[p(ie,te)],event:m.event})}}),ee.on("mouseout",function(ie){var q=J._fullLayout,te=J._fullData[G.index],ne=m.select(this).datum();G._hasHoverEvent&&(ie.originalEvent=m.event,J.emit("plotly_unhover",{points:[p(ne,te)],event:m.event}),G._hasHoverEvent=!1),G._hasHoverLabel&&(T.loneUnhover(q._hoverlayer.node()),G._hasHoverLabel=!1)}),ee.on("click",function(ie){J._dragging||!1===J._fullLayout.hovermode||(J._hoverdata=[p(ie,J._fullData[G.index])],T.click(J,m.event))})}function f(ee,J,$){var Q=h.castOption(ee.insidetextfont.color,J.pts);!Q&&ee._input.textfont&&(Q=h.castOption(ee._input.textfont.color,J.pts));var se=h.castOption(ee.insidetextfont.family,J.pts)||h.castOption(ee.textfont.family,J.pts)||$.family,j=h.castOption(ee.insidetextfont.size,J.pts)||h.castOption(ee.textfont.size,J.pts)||$.size;return{color:Q||b.contrast(J.color),family:se,size:j}}function w(ee,J){for(var $,Q,se=0;se<ee.length;se++)if((Q=($=ee[se][0]).trace).title.text){var j=Q.title.text;Q._meta&&(j=o.templateString(j,Q._meta));var G=e.tester.append("text").attr("data-notex",1).text(j).call(e.font,Q.title.font).call(i.convertToTspans,J),W=e.bBox(G.node(),!0);$.titleBox={width:W.width,height:W.height},G.remove()}}function y(ee,J,$){var Q=$.r||J.rpx1,se=J.rInscribed;if(J.startangle===J.stopangle)return{rCenter:1-se,scale:0,rotate:0,textPosAngle:0};var j,G=J.ring,W=1===G&&Math.abs(J.startangle-J.stopangle)===2*Math.PI,ie=J.halfangle,q=J.midangle,te=$.trace.insidetextorientation,ne="horizontal"===te,le="tangential"===te,ue="radial"===te,de="auto"===te,he=[];if(!de){var be,ge=function(ve,Te){if(lt=(je=J).stopangle,(Ke=je.startangle)>(Ge=ve)&&Ge>lt||Ke<Ge&&Ge<lt){var Le=Math.abs(ve-J.startangle),Ee=Math.abs(ve-J.stopangle),Pe=Le<Ee?Le:Ee;(j="tan"===Te?A(ee,Q,G,Pe,0):M(ee,Q,G,Pe,Math.PI/2)).textPosAngle=ve,he.push(j)}var je,Ge,Ke,lt};if(ne||le){for(be=4;be>=-4;be-=2)ge(Math.PI*be,"tan");for(be=4;be>=-4;be-=2)ge(Math.PI*(be+1),"tan")}if(ne||ue){for(be=4;be>=-4;be-=2)ge(Math.PI*(be+1.5),"rad");for(be=4;be>=-4;be-=2)ge(Math.PI*(be+.5),"rad")}}if(W||de||ne){var we=Math.sqrt(ee.width*ee.width+ee.height*ee.height);if((j={scale:se*Q*2/we,rCenter:1-se,rotate:0}).textPosAngle=(J.startangle+J.stopangle)/2,j.scale>=1)return j;he.push(j)}(de||ue)&&((j=M(ee,Q,G,ie,q)).textPosAngle=(J.startangle+J.stopangle)/2,he.push(j)),(de||le)&&((j=A(ee,Q,G,ie,q)).textPosAngle=(J.startangle+J.stopangle)/2,he.push(j));for(var Ce=0,De=0,Se=0;Se<he.length;Se++){var Fe=he[Se].scale;if(De<Fe&&(De=Fe,Ce=Se),!de&&De>=1)break}return he[Ce]}function M(ee,J,$,Q,se){J=Math.max(0,J-2*c);var j=ee.width/ee.height,G=P(j,Q,J,$);return{scale:2*G/ee.height,rCenter:k(j,G/J),rotate:C(se)}}function A(ee,J,$,Q,se){J=Math.max(0,J-2*c);var j=ee.height/ee.width,G=P(j,Q,J,$);return{scale:2*G/ee.width,rCenter:k(j,G/J),rotate:C(se+Math.PI/2)}}function k(ee,J){return Math.cos(J)-ee*J}function C(ee){return(180/Math.PI*ee+720)%180-90}function P(ee,J,$,Q){var se=ee+1/(2*Math.tan(J));return $*Math.min(1/(Math.sqrt(se*se+.5)+se),Q/(Math.sqrt(ee*ee+Q/2)+ee))}function D(ee,J){return ee.v!==J.vTotal||J.trace.hole?Math.min(1/(1+1/Math.sin(ee.halfangle)),ee.ring/2):1}function F(ee,J){var $=J.pxmid[0],Q=J.pxmid[1],se=ee.width/2,j=ee.height/2;return $<0&&(se*=-1),Q<0&&(j*=-1),{scale:1,rCenter:1,rotate:0,x:se+Math.abs(j)*(se>0?1:-1)/2,y:j/(1+$*$/(Q*Q)),outside:!0}}function R(ee,J){var $,Q,se,j=ee.trace,G={x:ee.cx,y:ee.cy},W={tx:0,ty:0};W.ty+=j.title.font.size,se=I(j),-1!==j.title.position.indexOf("top")?(G.y-=(1+se)*ee.r,W.ty-=ee.titleBox.height):-1!==j.title.position.indexOf("bottom")&&(G.y+=(1+se)*ee.r);var q,te=ee.r/(void 0===(q=ee.trace.aspectratio)?1:q),ne=J.w*(j.domain.x[1]-j.domain.x[0])/2;return-1!==j.title.position.indexOf("left")?(ne+=te,G.x-=(1+se)*te,W.tx+=ee.titleBox.width/2):-1!==j.title.position.indexOf("center")?ne*=2:-1!==j.title.position.indexOf("right")&&(ne+=te,G.x+=(1+se)*te,W.tx-=ee.titleBox.width/2),$=ne/ee.titleBox.width,Q=L(ee,J)/ee.titleBox.height,{x:G.x,y:G.y,scale:Math.min($,Q),tx:W.tx,ty:W.ty}}function L(ee,J){var $=ee.trace;return Math.min(ee.titleBox.height,J.h*($.domain.y[1]-$.domain.y[0])/2)}function I(ee){var J,$=ee.pull;if(!$)return 0;if(Array.isArray($))for($=0,J=0;J<ee.pull.length;J++)ee.pull[J]>$&&($=ee.pull[J]);return $}function B(ee,J){for(var $=[],Q=0;Q<ee.length;Q++){var se=ee[Q][0],j=se.trace,G=j.domain,W=J.w*(G.x[1]-G.x[0]),ie=J.h*(G.y[1]-G.y[0]);j.title.text&&"middle center"!==j.title.position&&(ie-=L(se,J));var te=ie/2;"funnelarea"!==j.type||j.scalegroup||(te/=j.aspectratio),se.r=Math.min(W/2,te)/(1+I(j)),se.cx=J.l+J.w*(j.domain.x[1]+j.domain.x[0])/2,se.cy=J.t+J.h*(1-j.domain.y[0])-ie/2,j.title.text&&-1!==j.title.position.indexOf("bottom")&&(se.cy-=L(se,J)),j.scalegroup&&-1===$.indexOf(j.scalegroup)&&$.push(j.scalegroup)}!function(ne,le){for(var ue,de,he,be=0;be<le.length;be++){var ge=1/0,we=le[be];for(de=0;de<ne.length;de++)if((he=(ue=ne[de][0]).trace).scalegroup===we){var Ce;if("pie"===he.type)Ce=ue.r*ue.r;else if("funnelarea"===he.type){var De,Se;he.aspectratio>1?Se=(De=ue.r)/he.aspectratio:De=(Se=ue.r)*he.aspectratio,Ce=(De*=(1+he.baseratio)/2)*Se}ge=Math.min(ge,Ce/ue.vTotal)}for(de=0;de<ne.length;de++)if((he=(ue=ne[de][0]).trace).scalegroup===we){var Fe=ge*ue.vTotal;"funnelarea"===he.type&&(Fe/=(1+he.baseratio)/2,Fe/=he.aspectratio),ue.r=Math.sqrt(Fe)}}}(ee,$)}function V(ee,J){return[ee*Math.sin(J),-ee*Math.cos(J)]}function Z(ee,J,$){var Ce,Q=ee._fullLayout,se=$.trace,j=se.texttemplate,G=se.textinfo;if(!j&&G&&"none"!==G){var W,ie=G.split("+"),q=function(Ce){return-1!==ie.indexOf(Ce)},te=q("label"),ne=q("text"),le=q("value"),ue=q("percent"),de=Q.separators;if(W=te?[J.label]:[],ne){var he=h.getFirstFilled(se.text,J.pts);v(he)&&W.push(he)}le&&W.push(h.formatPieValue(J.v,de)),ue&&W.push(h.formatPiePercent(J.v/$.vTotal,de)),J.text=W.join("<br>")}if(j){var be=o.castOption(se,J.i,"texttemplate");if(be){var ge={label:(Ce=J).label,value:Ce.v,valueLabel:h.formatPieValue(Ce.v,Q.separators),percent:Ce.v/$.vTotal,percentLabel:h.formatPiePercent(Ce.v/$.vTotal,Q.separators),color:Ce.color,text:Ce.text,customdata:o.castOption(se,Ce.i,"customdata")},we=h.getFirstFilled(se.text,J.pts);(v(we)||""===we)&&(ge.text=we),J.text=o.texttemplateString(be,ge,ee._fullLayout._d3locale,ge,se._meta||{})}else J.text=""}}function Y(ee,J){var $=ee.rotate*Math.PI/180,Q=Math.cos($),se=Math.sin($),j=(J.left+J.right)/2,G=(J.top+J.bottom)/2;ee.textX=j*Q-G*se,ee.textY=j*se+G*Q,ee.noCenter=!0}oe.exports={plot:function(ee,J){var $=ee._fullLayout,Q=$._size;s("pie",$),w(J,ee),B(J,Q);var se=o.makeTraceGroups($._pielayer,J,"trace").each(function(j){var G=m.select(this),W=j[0],ie=W.trace;(function(q){var te,ne,le,ue=q[0],de=ue.r,he=ue.trace,be=h.getRotationAngle(he.rotation),ge=2*Math.PI/ue.vTotal,we="px0",Ce="px1";if("counterclockwise"===he.direction){for(te=0;te<q.length&&q[te].hidden;te++);if(te===q.length)return;be+=ge*q[te].v,ge*=-1,we="px1",Ce="px0"}for(le=V(de,be),te=0;te<q.length;te++)(ne=q[te]).hidden||(ne[we]=le,ne.startangle=be,ne.pxmid=V(de,be+=ge*ne.v/2),ne.midangle=be,le=V(de,be+=ge*ne.v/2),ne.stopangle=be,ne[Ce]=le,ne.largeArc=ne.v>ue.vTotal/2?1:0,ne.halfangle=Math.PI*Math.min(ne.v/ue.vTotal,.5),ne.ring=1-he.hole,ne.rInscribed=D(ne,ue))})(j),G.attr("stroke-linejoin","round"),G.each(function(){var q=m.select(this).selectAll("g.slice").data(j);q.enter().append("g").classed("slice",!0),q.exit().remove();var te=[[[],[]],[[],[]]],ne=!1;q.each(function(Ce,De){if(Ce.hidden)m.select(this).selectAll("path,g").remove();else{Ce.pointNumber=Ce.i,Ce.curveNumber=ie.index,te[Ce.pxmid[1]<0?0:1][Ce.pxmid[0]<0?0:1].push(Ce);var Se=W.cx,Fe=W.cy,ve=m.select(this),Te=ve.selectAll("path.surface").data([Ce]);if(Te.enter().append("path").classed("surface",!0).style({"pointer-events":"all"}),ve.call(g,ee,j),ie.pull){var Le=+h.castOption(ie.pull,Ce.pts)||0;Le>0&&(Se+=Le*Ce.pxmid[0],Fe+=Le*Ce.pxmid[1])}Ce.cxFinal=Se,Ce.cyFinal=Fe;var Ee=ie.hole;if(Ce.v===W.vTotal){var Pe="M"+(Se+Ce.px0[0])+","+(Fe+Ce.px0[1])+Ue(Ce.px0,Ce.pxmid,!0,1)+Ue(Ce.pxmid,Ce.px0,!0,1)+"Z";Te.attr("d",Ee?"M"+(Se+Ee*Ce.px0[0])+","+(Fe+Ee*Ce.px0[1])+Ue(Ce.px0,Ce.pxmid,!1,Ee)+Ue(Ce.pxmid,Ce.px0,!1,Ee)+"Z"+Pe:Pe)}else{var je=Ue(Ce.px0,Ce.px1,!0,1);if(Ee){var Ge=1-Ee;Te.attr("d","M"+(Se+Ee*Ce.px1[0])+","+(Fe+Ee*Ce.px1[1])+Ue(Ce.px1,Ce.px0,!1,Ee)+"l"+Ge*Ce.px0[0]+","+Ge*Ce.px0[1]+je+"Z")}else Te.attr("d","M"+Se+","+Fe+"l"+Ce.px0[0]+","+Ce.px0[1]+je+"Z")}Z(ee,Ce,W);var Ke=h.castOption(ie.textposition,Ce.pts),lt=ve.selectAll("g.slicetext").data(Ce.text&&"none"!==Ke?[0]:[]);lt.enter().append("g").classed("slicetext",!0),lt.exit().remove(),lt.each(function(){var ht,ut,Ot,$e=o.ensureSingle(m.select(this),"text","",function(ht){ht.attr("data-notex",1)}),et=o.ensureUniformFontSize(ee,"outside"===Ke?(Ot=$.font,{color:h.castOption((ht=ie).outsidetextfont.color,(ut=Ce).pts)||h.castOption(ht.textfont.color,ut.pts)||Ot.color,family:h.castOption(ht.outsidetextfont.family,ut.pts)||h.castOption(ht.textfont.family,ut.pts)||Ot.family,size:h.castOption(ht.outsidetextfont.size,ut.pts)||h.castOption(ht.textfont.size,ut.pts)||Ot.size}):f(ie,Ce,$.font));$e.text(Ce.text).attr({class:"slicetext",transform:"","text-anchor":"middle"}).call(e.font,et).call(i.convertToTspans,ee);var tt,ct=e.bBox($e.node());if("outside"===Ke)tt=F(ct,Ce);else if(tt=y(ct,Ce,W),"auto"===Ke&&tt.scale<1){var xt=o.ensureUniformFontSize(ee,ie.outsidetextfont);$e.call(e.font,xt),tt=F(ct=e.bBox($e.node()),Ce)}var Ct=tt.textPosAngle,Ht=void 0===Ct?Ce.pxmid:V(W.r,Ct);if(tt.targetX=Se+Ht[0]*tt.rCenter+(tt.x||0),tt.targetY=Fe+Ht[1]*tt.rCenter+(tt.y||0),Y(tt,ct),tt.outside){var zt=tt.targetY;Ce.yLabelMin=zt-ct.height/2,Ce.yLabelMid=zt,Ce.yLabelMax=zt+ct.height/2,Ce.labelExtraX=0,Ce.labelExtraY=0,ne=!0}tt.fontSize=et.size,u(ie.type,tt,$),j[De].transform=tt,$e.attr("transform",o.getTextTransform(tt))})}function Ue($e,et,tt,ct){return"a"+ct*W.r+","+ct*W.r+" 0 "+Ce.largeArc+(tt?" 1 ":" 0 ")+ct*(et[0]-$e[0])+","+ct*(et[1]-$e[1])}});var De,le=m.select(this).selectAll("g.titletext").data(ie.title.text?[0]:[]);if(le.enter().append("g").classed("titletext",!0),le.exit().remove(),le.each(function(){var Ce,Fe,ve,De=o.ensureSingle(m.select(this),"text","",function(Fe){Fe.attr("data-notex",1)}),Se=ie.title.text;ie._meta&&(Se=o.templateString(Se,ie._meta)),De.text(Se).attr({class:"titletext",transform:"","text-anchor":"middle"}).call(e.font,ie.title.font).call(i.convertToTspans,ee),Ce="middle center"===ie.title.position?(Fe=W,ve=Math.sqrt(Fe.titleBox.width*Fe.titleBox.width+Fe.titleBox.height*Fe.titleBox.height),{x:Fe.cx,y:Fe.cy,scale:Fe.trace.hole*Fe.r*2/ve,tx:0,ty:-Fe.titleBox.height/2+Fe.trace.title.font.size}):R(W,Q),De.attr("transform",l(Ce.x,Ce.y)+a(Math.min(1,Ce.scale))+l(Ce.tx,Ce.ty))}),ne&&function(Ce,De){var Se,Fe,ve,Te,Le,Ee,Pe,je,Ge,Ke,lt,Ue,$e;function et(Ct,Ht){return Ct.pxmid[1]-Ht.pxmid[1]}function tt(Ct,Ht){return Ht.pxmid[1]-Ct.pxmid[1]}function ct(Ct,Ht){Ht||(Ht={});var zt,ht,ut,Ot,tn=Ht.labelExtraY+(Fe?Ht.yLabelMax:Ht.yLabelMin),un=Fe?Ct.yLabelMin:Ct.yLabelMax,Ze=Fe?Ct.yLabelMax:Ct.yLabelMin,Qe=Ct.cyFinal+Le(Ct.px0[1],Ct.px1[1]),qe=tn-un;if(qe*Pe>0&&(Ct.labelExtraY=qe),Array.isArray(De.pull))for(ht=0;ht<Ke.length;ht++)(ut=Ke[ht])===Ct||(h.castOption(De.pull,Ct.pts)||0)>=(h.castOption(De.pull,ut.pts)||0)||((Ct.pxmid[1]-ut.pxmid[1])*Pe>0?(qe=ut.cyFinal+Le(ut.px0[1],ut.px1[1])-un-Ct.labelExtraY)*Pe>0&&(Ct.labelExtraY+=qe):(Ze+Ct.labelExtraY-Qe)*Pe>0&&(zt=3*Ee*Math.abs(ht-Ke.indexOf(Ct)),(Ot=ut.cxFinal+Te(ut.px0[0],ut.px1[0])+zt-(Ct.cxFinal+Ct.pxmid[0])-Ct.labelExtraX)*Ee>0&&(Ct.labelExtraX+=Ot)))}for(Fe=0;Fe<2;Fe++)for(ve=Fe?et:tt,Le=Fe?Math.max:Math.min,Pe=Fe?1:-1,Se=0;Se<2;Se++){for(Te=Se?Math.max:Math.min,Ee=Se?1:-1,(je=Ce[Fe][Se]).sort(ve),Ke=(Ge=Ce[1-Fe][Se]).concat(je),Ue=[],lt=0;lt<je.length;lt++)void 0!==je[lt].yLabelMid&&Ue.push(je[lt]);for($e=!1,lt=0;Fe&&lt<Ge.length;lt++)if(void 0!==Ge[lt].yLabelMid){$e=Ge[lt];break}for(lt=0;lt<Ue.length;lt++){var xt=lt&&Ue[lt-1];$e&&!lt&&(xt=$e),ct(Ue[lt],xt)}}}(te,ie),De=ie,q.each(function(Se){var Fe=m.select(this);if(Se.labelExtraX||Se.labelExtraY){var ve=Fe.select("g.slicetext text");Se.transform.targetX+=Se.labelExtraX,Se.transform.targetY+=Se.labelExtraY,ve.attr("transform",o.getTextTransform(Se.transform));var Te=Se.cxFinal+Se.pxmid[0],Le="M"+Te+","+(Se.cyFinal+Se.pxmid[1]),Ee=(Se.yLabelMax-Se.yLabelMin)*(Se.pxmid[0]<0?-1:1)/4;if(Se.labelExtraX){var Pe=Se.labelExtraX*Se.pxmid[1]/Se.pxmid[0],je=Se.yLabelMid+Se.labelExtraY-(Se.cyFinal+Se.pxmid[1]);Math.abs(Pe)>Math.abs(je)?Le+="l"+je*Se.pxmid[0]/Se.pxmid[1]+","+je+"H"+(Te+Se.labelExtraX+Ee):Le+="l"+Se.labelExtraX+","+Pe+"v"+(je-Pe)+"h"+Ee}else Le+="V"+(Se.yLabelMid+Se.labelExtraY)+"h"+Ee;o.ensureSingle(Fe,"path","textline").call(b.stroke,De.outsidetextfont.color).attr({"stroke-width":Math.min(2,De.outsidetextfont.size/8),d:Le,fill:"none"})}else Fe.select("path.textline").remove()}),ne&&ie.automargin){var ue=e.bBox(G.node()),de=ie.domain,ge=(Q.w*(de.x[1]-de.x[0])*.5-W.r)/Q.w,we=(Q.h*(de.y[1]-de.y[0])*.5-W.r)/Q.h;x.autoMargin(ee,"pie."+ie.uid+".automargin",{xl:de.x[0]-ge,xr:de.x[1]+ge,yb:de.y[0]-we,yt:de.y[1]+we,l:Math.max(W.cx-W.r-ue.left,0),r:Math.max(ue.right-(W.cx+W.r),0),b:Math.max(ue.bottom-(W.cy+W.r),0),t:Math.max(W.cy-W.r-ue.top,0),pad:5})}})});setTimeout(function(){se.selectAll("tspan").each(function(){var j=m.select(this);j.attr("dy")&&j.attr("dy",j.attr("dy"))})},0)},formatSliceLabel:Z,transformInsideText:y,determineInsideTextFont:f,positionTitleOutside:R,prerenderTitles:w,layoutAreas:B,attachFxHandlers:g,computeTransform:Y}},{"../../components/color":366,"../../components/drawing":388,"../../components/fx":406,"../../lib":503,"../../lib/svg_text_utils":529,"../../plots/plots":619,"../bar/constants":650,"../bar/uniform_text":664,"./event_data":904,"./helpers":905,"@plotly/d3":58}],910:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("./style_one"),T=_("../bar/uniform_text").resizeText;oe.exports=function(b){var e=b._fullLayout._pielayer.selectAll(".trace");T(b,e,"pie"),e.each(function(o){var a=o[0].trace,l=m.select(this);l.style({opacity:a.opacity}),l.selectAll("path.surface").each(function(i){m.select(this).call(x,i,a)})})}},{"../bar/uniform_text":664,"./style_one":911,"@plotly/d3":58}],911:[function(_,oe,ae){"use strict";var m=_("../../components/color"),x=_("./helpers").castOption;oe.exports=function(T,b,e){var o=e.marker.line,a=x(o.color,b.pts)||m.defaultLine,l=x(o.width,b.pts)||0;T.style("stroke-width",l).call(m.fill,b.color).call(m.stroke,a)}},{"../../components/color":366,"./helpers":905}],912:[function(_,oe,ae){"use strict";var m=_("../scatter/attributes");oe.exports={x:m.x,y:m.y,xy:{valType:"data_array",editType:"calc"},indices:{valType:"data_array",editType:"calc"},xbounds:{valType:"data_array",editType:"calc"},ybounds:{valType:"data_array",editType:"calc"},text:m.text,marker:{color:{valType:"color",arrayOk:!1,editType:"calc"},opacity:{valType:"number",min:0,max:1,dflt:1,arrayOk:!1,editType:"calc"},blend:{valType:"boolean",dflt:null,editType:"calc"},sizemin:{valType:"number",min:.1,max:2,dflt:.5,editType:"calc"},sizemax:{valType:"number",min:.1,dflt:20,editType:"calc"},border:{color:{valType:"color",arrayOk:!1,editType:"calc"},arearatio:{valType:"number",min:0,max:1,dflt:0,editType:"calc"},editType:"calc"},editType:"calc"},transforms:void 0}},{"../scatter/attributes":926}],913:[function(_,oe,ae){"use strict";var m=_("../../../stackgl_modules").gl_pointcloud2d,x=_("../../lib/str2rgbarray"),T=_("../../plots/cartesian/autorange").findExtremes,b=_("../scatter/get_trace_color");function e(a,l){this.scene=a,this.uid=l,this.type="pointcloud",this.pickXData=[],this.pickYData=[],this.xData=[],this.yData=[],this.textLabels=[],this.color="rgb(0, 0, 0)",this.name="",this.hoverinfo="all",this.idToIndex=new Int32Array(0),this.bounds=[0,0,0,0],this.pointcloudOptions={positions:new Float32Array(0),idToIndex:this.idToIndex,sizemin:.5,sizemax:12,color:[0,0,0,1],areaRatio:1,borderColor:[0,0,0,1]},this.pointcloud=m(a.glplot,this.pointcloudOptions),this.pointcloud._trace=this}var o=e.prototype;o.handlePick=function(a){var l=this.idToIndex[a.pointId];return{trace:this,dataCoord:a.dataCoord,traceCoord:this.pickXYData?[this.pickXYData[2*l],this.pickXYData[2*l+1]]:[this.pickXData[l],this.pickYData[l]],textLabel:Array.isArray(this.textLabels)?this.textLabels[l]:this.textLabels,color:this.color,name:this.name,pointIndex:l,hoverinfo:this.hoverinfo}},o.update=function(a){this.index=a.index,this.textLabels=a.text,this.name=a.name,this.hoverinfo=a.hoverinfo,this.bounds=[1/0,1/0,-1/0,-1/0],this.updateFast(a),this.color=b(a,{})},o.updateFast=function(a){var l,i,d,u,s,c,h=this.xData=this.pickXData=a.x,p=this.yData=this.pickYData=a.y,v=this.pickXYData=a.xy,f=a.indices,w=this.bounds;if(v){if(d=v,l=v.length>>>1,a.xbounds&&a.ybounds)w[0]=a.xbounds[0],w[2]=a.xbounds[1],w[1]=a.ybounds[0],w[3]=a.ybounds[1];else for(c=0;c<l;c++)s=d[2*c+1],(u=d[2*c])<w[0]&&(w[0]=u),u>w[2]&&(w[2]=u),s<w[1]&&(w[1]=s),s>w[3]&&(w[3]=s);if(f)i=f;else for(i=new Int32Array(l),c=0;c<l;c++)i[c]=c}else for(l=h.length,d=new Float32Array(2*l),i=new Int32Array(l),c=0;c<l;c++)u=h[c],s=p[c],i[c]=c,d[2*c]=u,d[2*c+1]=s,u<w[0]&&(w[0]=u),u>w[2]&&(w[2]=u),s<w[1]&&(w[1]=s),s>w[3]&&(w[3]=s);this.idToIndex=i,this.pointcloudOptions.idToIndex=i,this.pointcloudOptions.positions=d;var y=x(a.marker.color),M=x(a.marker.border.color),A=a.opacity*a.marker.opacity;y[3]*=A,this.pointcloudOptions.color=y;var k=a.marker.blend;null===k&&(k=h.length<100||p.length<100),this.pointcloudOptions.blend=k,M[3]*=A,this.pointcloudOptions.borderColor=M;var C=a.marker.sizemin,P=Math.max(a.marker.sizemax,a.marker.sizemin);this.pointcloudOptions.sizeMin=C,this.pointcloudOptions.sizeMax=P,this.pointcloudOptions.areaRatio=a.marker.border.arearatio,this.pointcloud.update(this.pointcloudOptions);var D=this.scene.xaxis,F=this.scene.yaxis,R=P/2||.5;a._extremes[D._id]=T(D,[w[0],w[2]],{ppad:R}),a._extremes[F._id]=T(F,[w[1],w[3]],{ppad:R})},o.dispose=function(){this.pointcloud.dispose()},oe.exports=function(a,l){var i=new e(a,l.uid);return i.update(l),i}},{"../../../stackgl_modules":1120,"../../lib/str2rgbarray":528,"../../plots/cartesian/autorange":553,"../scatter/get_trace_color":936}],914:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./attributes");oe.exports=function(T,b,e){function o(a,l){return m.coerce(T,b,x,a,l)}o("x"),o("y"),o("xbounds"),o("ybounds"),T.xy&&T.xy instanceof Float32Array&&(b.xy=T.xy),T.indices&&T.indices instanceof Int32Array&&(b.indices=T.indices),o("text"),o("marker.color",e),o("marker.opacity"),o("marker.blend"),o("marker.sizemin"),o("marker.sizemax"),o("marker.border.color",e),o("marker.border.arearatio"),b._length=null}},{"../../lib":503,"./attributes":912}],915:[function(_,oe,ae){"use strict";["*pointcloud* trace is deprecated!","Please consider switching to the *scattergl* trace type."].join(" "),oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("../scatter3d/calc"),plot:_("./convert"),moduleType:"trace",name:"pointcloud",basePlotModule:_("../../plots/gl2d"),categories:["gl","gl2d","showLegend"],meta:{}}},{"../../plots/gl2d":596,"../scatter3d/calc":955,"./attributes":912,"./convert":913,"./defaults":914}],916:[function(_,oe,ae){"use strict";var m=_("../../plots/font_attributes"),x=_("../../plots/attributes"),T=_("../../components/color/attributes"),b=_("../../components/fx/attributes"),e=_("../../plots/domain").attributes,o=_("../../plots/template_attributes").hovertemplateAttrs,a=_("../../components/colorscale/attributes"),l=_("../../plot_api/plot_template").templatedArray,i=_("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers,d=_("../../lib/extend").extendFlat,u=_("../../plot_api/edit_types").overrideAll;(oe.exports=u({hoverinfo:d({},x.hoverinfo,{flags:[],arrayOk:!1}),hoverlabel:b.hoverlabel,domain:e({name:"sankey",trace:!0}),orientation:{valType:"enumerated",values:["v","h"],dflt:"h"},valueformat:{valType:"string",dflt:".3s",description:i("value")},valuesuffix:{valType:"string",dflt:""},arrangement:{valType:"enumerated",values:["snap","perpendicular","freeform","fixed"],dflt:"snap"},textfont:m({}),customdata:void 0,node:{label:{valType:"data_array",dflt:[]},groups:{valType:"info_array",impliedEdits:{x:[],y:[]},dimensions:2,freeLength:!0,dflt:[],items:{valType:"number",editType:"calc"}},x:{valType:"data_array",dflt:[]},y:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:.5,arrayOk:!0}},pad:{valType:"number",arrayOk:!1,min:0,dflt:20},thickness:{valType:"number",arrayOk:!1,min:1,dflt:20},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:b.hoverlabel,hovertemplate:o({},{keys:["value","label"]})},link:{label:{valType:"data_array",dflt:[]},color:{valType:"color",arrayOk:!0},customdata:{valType:"data_array",editType:"calc"},line:{color:{valType:"color",dflt:T.defaultLine,arrayOk:!0},width:{valType:"number",min:0,dflt:0,arrayOk:!0}},source:{valType:"data_array",dflt:[]},target:{valType:"data_array",dflt:[]},value:{valType:"data_array",dflt:[]},hoverinfo:{valType:"enumerated",values:["all","none","skip"],dflt:"all"},hoverlabel:b.hoverlabel,hovertemplate:o({},{keys:["value","label"]}),colorscales:l("concentrationscales",{editType:"calc",label:{valType:"string",editType:"calc",dflt:""},cmax:{valType:"number",editType:"calc",dflt:1},cmin:{valType:"number",editType:"calc",dflt:0},colorscale:d(a().colorscale,{dflt:[[0,"white"],[1,"black"]]})})}},"calc","nested")).transforms=void 0},{"../../components/color/attributes":365,"../../components/colorscale/attributes":373,"../../components/fx/attributes":397,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plot_api/plot_template":543,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585,"../../plots/template_attributes":633}],917:[function(_,oe,ae){"use strict";var m=_("../../plot_api/edit_types").overrideAll,x=_("../../plots/get_data").getModuleCalcData,T=_("./plot"),b=_("../../components/fx/layout_attributes"),e=_("../../lib/setcursor"),o=_("../../components/dragelement"),a=_("../../plots/cartesian/select").prepSelect,l=_("../../lib"),i=_("../../registry");function d(u,s){var c=u._fullData[s],h=u._fullLayout,p=h.dragmode,g=c._bgRect;if("pan"!==p&&"zoom"!==p){e(g,"pan"===h.dragmode?"move":"crosshair");var f={_id:"x",c2p:l.identity,_offset:c._sankey.translateX,_length:c._sankey.width},w={_id:"y",c2p:l.identity,_offset:c._sankey.translateY,_length:c._sankey.height},y={gd:u,element:g.node(),plotinfo:{id:s,xaxis:f,yaxis:w,fillRangeItems:l.noop},subplot:s,xaxes:[f],yaxes:[w],doneFnCompleted:function(M){var A,k=u._fullData[s],C=k.node.groups.slice(),P=[];function D(I){for(var B=k._sankey.graph.nodes,V=0;V<B.length;V++)if(B[V].pointNumber===I)return B[V]}for(var F=0;F<M.length;F++){var R=D(M[F].pointNumber);if(R)if(R.group){for(var L=0;L<R.childrenNodes.length;L++)P.push(R.childrenNodes[L].pointNumber);C[R.pointNumber-k.node._count]=!1}else P.push(R.pointNumber)}A=C.filter(Boolean).concat([P]),i.call("_guiRestyle",u,{"node.groups":[A]},s)},prepFn:function(M,A,k){a(M,A,k,y,p)}};o.init(y)}}ae.name="sankey",ae.baseLayoutAttrOverrides=m({hoverlabel:b.hoverlabel},"plot","nested"),ae.plot=function(u){var s=x(u.calcdata,"sankey")[0];T(u,s),ae.updateFx(u)},ae.clean=function(u,s,c,h){var p=h._has&&h._has("sankey"),v=s._has&&s._has("sankey");p&&!v&&(h._paperdiv.selectAll(".sankey").remove(),h._paperdiv.selectAll(".bgsankey").remove())},ae.updateFx=function(u){for(var s=0;s<u._fullData.length;s++)d(u,s)}},{"../../components/dragelement":385,"../../components/fx/layout_attributes":407,"../../lib":503,"../../lib/setcursor":524,"../../plot_api/edit_types":536,"../../plots/cartesian/select":575,"../../plots/get_data":593,"../../registry":638,"./plot":922}],918:[function(_,oe,ae){"use strict";var m=_("strongly-connected-components"),x=_("../../lib"),T=_("../../lib/gup").wrap,b=x.isArrayOrTypedArray,e=x.isIndex,o=_("../../components/colorscale");oe.exports=function(l,i){var d=function a(l){var i,d=l.node,u=l.link,s=[],c=b(u.color),h=b(u.customdata),p={},v={},g=u.colorscales.length;for(i=0;i<g;i++){var f=u.colorscales[i],w=o.extractScale(f,{cLetter:"c"}),y=o.makeColorScaleFunc(w);v[f.label]=y}var M=0;for(i=0;i<u.value.length;i++)u.source[i]>M&&(M=u.source[i]),u.target[i]>M&&(M=u.target[i]);var A,k=M+1;l.node._count=k;var C=l.node.groups,P={};for(i=0;i<C.length;i++){var D=C[i];for(A=0;A<D.length;A++){var F=D[A],R=k+i;P.hasOwnProperty(F)?x.warn("Node "+F+" is already part of a group."):P[F]=R}}var L={source:[],target:[]};for(i=0;i<u.value.length;i++){var I=u.value[i],B=u.source[i],V=u.target[i];if(I>0&&e(B,k)&&e(V,k)&&(!P.hasOwnProperty(B)||!P.hasOwnProperty(V)||P[B]!==P[V])){P.hasOwnProperty(V)&&(V=P[V]),P.hasOwnProperty(B)&&(B=P[B]),p[B=+B]=p[V=+V]=!0;var Z="";u.label&&u.label[i]&&(Z=u.label[i]);var Y=null;Z&&v.hasOwnProperty(Z)&&(Y=v[Z]),s.push({pointNumber:i,label:Z,color:c?u.color[i]:u.color,customdata:h?u.customdata[i]:u.customdata,concentrationscale:Y,source:B,target:V,value:+I}),L.source.push(B),L.target.push(V)}}var ee=k+C.length,J=b(d.color),$=b(d.customdata),Q=[];for(i=0;i<ee;i++)p[i]&&Q.push({group:i>k-1,childrenNodes:[],pointNumber:i,label:d.label[i],color:J?d.color[i]:d.color,customdata:$?d.customdata[i]:d.customdata});var j=!1;return function(G,W,ie){for(var q=x.init2dArray(G,0),te=0;te<Math.min(W.length,ie.length);te++)if(x.isIndex(W[te],G)&&x.isIndex(ie[te],G)){if(W[te]===ie[te])return!0;q[W[te]].push(ie[te])}return m(q).components.some(function(ne){return ne.length>1})}(ee,L.source,L.target)&&(j=!0),{circular:j,links:s,nodes:Q,groups:C,groupLookup:P}}(i);return T({circular:d.circular,_nodes:d.nodes,_links:d.links,_groups:d.groups,_groupLookup:d.groupLookup})}},{"../../components/colorscale":378,"../../lib":503,"../../lib/gup":500,"strongly-connected-components":306}],919:[function(_,oe,ae){"use strict";oe.exports={nodeTextOffsetHorizontal:4,nodeTextOffsetVertical:3,nodePadAcross:10,sankeyIterations:50,forceIterations:5,forceTicksPerFrame:10,duration:500,ease:"linear",cn:{sankey:"sankey",sankeyLinks:"sankey-links",sankeyLink:"sankey-link",sankeyNodeSet:"sankey-node-set",sankeyNode:"sankey-node",nodeRect:"node-rect",nodeLabel:"node-label"}}},{}],920:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./attributes"),T=_("../../components/color"),b=_("tinycolor2"),e=_("../../plots/domain").defaults,o=_("../../components/fx/hoverlabel_defaults"),a=_("../../plot_api/plot_template"),l=_("../../plots/array_container_defaults");function i(d,u){function s(c,h){return m.coerce(d,u,x.link.colorscales,c,h)}s("label"),s("cmin"),s("cmax"),s("colorscale")}oe.exports=function(d,u,s,c){function h(P,D){return m.coerce(d,u,x,P,D)}var p=m.extendDeep(c.hoverlabel,d.hoverlabel),v=d.node,g=a.newContainer(u,"node");function f(P,D){return m.coerce(v,g,x.node,P,D)}f("label"),f("groups"),f("x"),f("y"),f("pad"),f("thickness"),f("line.color"),f("line.width"),f("hoverinfo",d.hoverinfo),o(v,g,f,p),f("hovertemplate");var w=c.colorway;f("color",g.label.map(function(P,D){return T.addOpacity(w[D%w.length],.8)})),f("customdata");var y=d.link||{},M=a.newContainer(u,"link");function A(P,D){return m.coerce(y,M,x.link,P,D)}A("label"),A("source"),A("target"),A("value"),A("line.color"),A("line.width"),A("hoverinfo",d.hoverinfo),o(y,M,A,p),A("hovertemplate");var k,C=b(c.paper_bgcolor).getLuminance()<.333?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.2)";A("color",m.repeat(C,M.value.length)),A("customdata"),l(y,M,{name:"colorscales",handleItemDefaults:i}),e(u,c,h),h("orientation"),h("valueformat"),h("valuesuffix"),g.x.length&&g.y.length&&(k="freeform"),h("arrangement",k),m.coerceFont(h,"textfont",m.extendFlat({},c.font)),u._length=null}},{"../../components/color":366,"../../components/fx/hoverlabel_defaults":404,"../../lib":503,"../../plot_api/plot_template":543,"../../plots/array_container_defaults":549,"../../plots/domain":584,"./attributes":916,tinycolor2:312}],921:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("./plot"),moduleType:"trace",name:"sankey",basePlotModule:_("./base_plot"),selectPoints:_("./select.js"),categories:["noOpacity"],meta:{}}},{"./attributes":916,"./base_plot":917,"./calc":918,"./defaults":920,"./plot":922,"./select.js":924}],922:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../lib"),T=x.numberFormat,b=_("./render"),e=_("../../components/fx"),o=_("../../components/color"),a=_("./constants").cn,l=x._;function i(y){return""!==y}function d(y,M){return y.filter(function(A){return A.key===M.traceId})}function u(y,M){m.select(y).select("path").style("fill-opacity",M),m.select(y).select("rect").style("fill-opacity",M)}function s(y){m.select(y).select("text.name").style("fill","black")}function c(y){return function(M){return-1!==y.node.sourceLinks.indexOf(M.link)||-1!==y.node.targetLinks.indexOf(M.link)}}function h(y){return function(M){return-1!==M.node.sourceLinks.indexOf(y.link)||-1!==M.node.targetLinks.indexOf(y.link)}}function p(y,M,A){M&&A&&d(A,M).selectAll("."+a.sankeyLink).filter(c(M)).call(g.bind(0,M,A,!1))}function v(y,M,A){M&&A&&d(A,M).selectAll("."+a.sankeyLink).filter(c(M)).call(f.bind(0,M,A,!1))}function g(y,M,A,k){var C=k.datum().link.label;k.style("fill-opacity",function(P){if(!P.link.concentrationscale)return.4}),C&&d(M,y).selectAll("."+a.sankeyLink).filter(function(P){return P.link.label===C}).style("fill-opacity",function(P){if(!P.link.concentrationscale)return.4}),A&&d(M,y).selectAll("."+a.sankeyNode).filter(h(y)).call(p)}function f(y,M,A,k){var C=k.datum().link.label;k.style("fill-opacity",function(P){return P.tinyColorAlpha}),C&&d(M,y).selectAll("."+a.sankeyLink).filter(function(P){return P.link.label===C}).style("fill-opacity",function(P){return P.tinyColorAlpha}),A&&d(M,y).selectAll(a.sankeyNode).filter(h(y)).call(v)}function w(y,M){var k=x.nestedProperty(y.hoverlabel||{},M).get();return!Array.isArray(k)&&k}oe.exports=function(y,M){for(var A=y._fullLayout,k=A._paper,C=A._size,P=0;P<y._fullData.length;P++)if(y._fullData[P].visible&&y._fullData[P].type===a.sankey&&!y._fullData[P]._viewInitial){var D=y._fullData[P].node;y._fullData[P]._viewInitial={node:{groups:D.groups.slice(),x:D.x.slice(),y:D.y.slice()}}}var F=l(y,"source:")+" ",R=l(y,"target:")+" ",L=l(y,"concentration:")+" ",I=l(y,"incoming flow count:")+" ",B=l(y,"outgoing flow count:")+" ";b(y,k,M,{width:C.w,height:C.h,margin:{t:C.t,r:C.r,b:C.b,l:C.l}},{linkEvents:{hover:function(V,Z,Y){!1!==y._fullLayout.hovermode&&(m.select(V).call(g.bind(0,Z,Y,!0)),"skip"!==Z.link.trace.link.hoverinfo&&(Z.link.fullData=Z.link.trace,y.emit("plotly_hover",{event:m.event,points:[Z.link]})))},follow:function(V,Z){if(!1!==y._fullLayout.hovermode){var Y=Z.link.trace.link;if("none"!==Y.hoverinfo&&"skip"!==Y.hoverinfo){for(var ee=[],J=0,$=0;$<Z.flow.links.length;$++){var Q=Z.flow.links[$];if("closest"!==y._fullLayout.hovermode||Z.link.pointNumber===Q.pointNumber){Z.link.pointNumber===Q.pointNumber&&(J=$),Q.fullData=Q.trace,Y=Z.link.trace.link;var se=G(Q),j={valueLabel:T(Z.valueFormat)(Q.value)+Z.valueSuffix};ee.push({x:se[0],y:se[1],name:j.valueLabel,text:[Q.label||"",F+Q.source.label,R+Q.target.label,Q.concentrationscale?L+T("%0.2f")(Q.flow.labelConcentration):""].filter(i).join("<br>"),color:w(Y,"bgcolor")||o.addOpacity(Q.color,1),borderColor:w(Y,"bordercolor"),fontFamily:w(Y,"font.family"),fontSize:w(Y,"font.size"),fontColor:w(Y,"font.color"),nameLength:w(Y,"namelength"),textAlign:w(Y,"align"),idealAlign:m.event.x<se[0]?"right":"left",hovertemplate:Y.hovertemplate,hovertemplateLabels:j,eventData:[Q]})}}e.loneHover(ee,{container:A._hoverlayer.node(),outerContainer:A._paper.node(),gd:y,anchorIndex:J}).each(function(){Z.link.concentrationscale||u(this,.65),s(this)})}}function G(W){var ie,q;W.circular?(ie=(W.circularPathData.leftInnerExtent+W.circularPathData.rightInnerExtent)/2,q=W.circularPathData.verticalFullExtent):(ie=(W.source.x1+W.target.x0)/2,q=(W.y0+W.y1)/2);var te=[ie,q];return"v"===W.trace.orientation&&te.reverse(),te[0]+=Z.parent.translateX,te[1]+=Z.parent.translateY,te}},unhover:function(V,Z,Y){!1!==y._fullLayout.hovermode&&(m.select(V).call(f.bind(0,Z,Y,!0)),"skip"!==Z.link.trace.link.hoverinfo&&(Z.link.fullData=Z.link.trace,y.emit("plotly_unhover",{event:m.event,points:[Z.link]})),e.loneUnhover(A._hoverlayer.node()))},select:function(V,Z){var Y=Z.link;Y.originalEvent=m.event,y._hoverdata=[Y],e.click(y,{target:!0})}},nodeEvents:{hover:function(V,Z,Y){!1!==y._fullLayout.hovermode&&(m.select(V).call(p,Z,Y),"skip"!==Z.node.trace.node.hoverinfo&&(Z.node.fullData=Z.node.trace,y.emit("plotly_hover",{event:m.event,points:[Z.node]})))},follow:function(V,Z){if(!1!==y._fullLayout.hovermode){var Y=Z.node.trace.node;if("none"!==Y.hoverinfo&&"skip"!==Y.hoverinfo){var ee=m.select(V).select("."+a.nodeRect),J=y._fullLayout._paperdiv.node().getBoundingClientRect(),$=ee.node().getBoundingClientRect(),Q=$.left-2-J.left,se=$.right+2-J.left,j=$.top+$.height/4-J.top,G={valueLabel:T(Z.valueFormat)(Z.node.value)+Z.valueSuffix};Z.node.fullData=Z.node.trace,y._fullLayout._calcInverseTransform(y);var W=y._fullLayout._invScaleX,q=e.loneHover({x0:W*Q,x1:W*se,y:y._fullLayout._invScaleY*j,name:T(Z.valueFormat)(Z.node.value)+Z.valueSuffix,text:[Z.node.label,I+Z.node.targetLinks.length,B+Z.node.sourceLinks.length].filter(i).join("<br>"),color:w(Y,"bgcolor")||Z.tinyColorHue,borderColor:w(Y,"bordercolor"),fontFamily:w(Y,"font.family"),fontSize:w(Y,"font.size"),fontColor:w(Y,"font.color"),nameLength:w(Y,"namelength"),textAlign:w(Y,"align"),idealAlign:"left",hovertemplate:Y.hovertemplate,hovertemplateLabels:G,eventData:[Z.node]},{container:A._hoverlayer.node(),outerContainer:A._paper.node(),gd:y});u(q,.85),s(q)}}},unhover:function(V,Z,Y){!1!==y._fullLayout.hovermode&&(m.select(V).call(v,Z,Y),"skip"!==Z.node.trace.node.hoverinfo&&(Z.node.fullData=Z.node.trace,y.emit("plotly_unhover",{event:m.event,points:[Z.node]})),e.loneUnhover(A._hoverlayer.node()))},select:function(V,Z,Y){var ee=Z.node;ee.originalEvent=m.event,y._hoverdata=[ee],m.select(V).call(v,Z,Y),e.click(y,{target:!0})}}})}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"./constants":919,"./render":923,"@plotly/d3":58}],923:[function(_,oe,ae){"use strict";var m=_("d3-force"),x=_("d3-interpolate").interpolateNumber,T=_("@plotly/d3"),b=_("@plotly/d3-sankey"),e=_("@plotly/d3-sankey-circular"),o=_("./constants"),a=_("tinycolor2"),l=_("../../components/color"),i=_("../../components/drawing"),d=_("../../lib"),u=d.strTranslate,s=d.strRotate,c=_("../../lib/gup"),h=c.keyFun,p=c.repeat,v=c.unwrap,g=_("../../lib/svg_text_utils"),f=_("../../registry"),w=_("../../constants/alignment"),y=w.CAP_SHIFT,M=w.LINE_SPACING;function A($,Q,se){var j,G=v(Q),W=G.trace,ie=W.domain,q="h"===W.orientation,te=W.node.pad,ne=W.node.thickness,le=$.width*(ie.x[1]-ie.x[0]),ue=$.height*(ie.y[1]-ie.y[0]),de=G._nodes,he=G._links,be=G.circular;(j=be?e.sankeyCircular().circularLinkGap(0):b.sankey()).iterations(o.sankeyIterations).size(q?[le,ue]:[ue,le]).nodeWidth(ne).nodePadding(te).nodeId(function(Pe){return Pe.pointNumber}).nodes(de).links(he);var ge,we,Ce,De=j();for(var Se in j.nodePadding()<te&&d.warn("node.pad was reduced to ",j.nodePadding()," to fit within the figure."),G._groupLookup){var Fe,ve=parseInt(G._groupLookup[Se]);for(ge=0;ge<De.nodes.length;ge++)if(De.nodes[ge].pointNumber===ve){Fe=De.nodes[ge];break}if(Fe){var Te={pointNumber:parseInt(Se),x0:Fe.x0,x1:Fe.x1,y0:Fe.y0,y1:Fe.y1,partOfGroup:!0,sourceLinks:[],targetLinks:[]};De.nodes.unshift(Te),Fe.childrenNodes.unshift(Te)}}if(function(){for(ge=0;ge<De.nodes.length;ge++){var Pe,je,Ge=De.nodes[ge],Ke={};for(we=0;we<Ge.targetLinks.length;we++)Pe=(je=Ge.targetLinks[we]).source.pointNumber+":"+je.target.pointNumber,Ke.hasOwnProperty(Pe)||(Ke[Pe]=[]),Ke[Pe].push(je);var lt=Object.keys(Ke);for(we=0;we<lt.length;we++){var Ue=Ke[Pe=lt[we]],$e=0,et={};for(Ce=0;Ce<Ue.length;Ce++)et[(je=Ue[Ce]).label]||(et[je.label]=0),et[je.label]+=je.value,$e+=je.value;for(Ce=0;Ce<Ue.length;Ce++)(je=Ue[Ce]).flow={value:$e,labelConcentration:et[je.label]/$e,concentration:je.value/$e,links:Ue},je.concentrationscale&&(je.color=a(je.concentrationscale(je.flow.labelConcentration)))}var tt=0;for(we=0;we<Ge.sourceLinks.length;we++)tt+=Ge.sourceLinks[we].value;for(we=0;we<Ge.sourceLinks.length;we++)(je=Ge.sourceLinks[we]).concentrationOut=je.value/tt;var ct=0;for(we=0;we<Ge.targetLinks.length;we++)ct+=Ge.targetLinks[we].value;for(we=0;we<Ge.targetLinks.length;we++)(je=Ge.targetLinks[we]).concenrationIn=je.value/ct}}(),W.node.x.length&&W.node.y.length){for(ge=0;ge<Math.min(W.node.x.length,W.node.y.length,De.nodes.length);ge++)if(W.node.x[ge]&&W.node.y[ge]){var Le=[W.node.x[ge]*le,W.node.y[ge]*ue];De.nodes[ge].x0=Le[0]-ne/2,De.nodes[ge].x1=Le[0]+ne/2;var Ee=De.nodes[ge].y1-De.nodes[ge].y0;De.nodes[ge].y0=Le[1]-Ee/2,De.nodes[ge].y1=Le[1]+Ee/2}"snap"===W.arrangement&&function(Pe){var je,Ge,Ke=Pe.map(function(tt,ct){return{x0:tt.x0,index:ct}}).sort(function(tt,ct){return tt.x0-ct.x0}),lt=[],Ue=-1,$e=-1/0;for(ge=0;ge<Ke.length;ge++){var et=Pe[Ke[ge].index];et.x0>$e+ne&&(Ue+=1,je=et.x0),$e=et.x0,lt[Ue]||(lt[Ue]=[]),lt[Ue].push(et),et.x0+=Ge=je-et.x0,et.x1+=Ge}return lt}(de=De.nodes).forEach(function(je){var Ge,Ke,lt,Ue=0,$e=je.length;for(je.sort(function(et,tt){return et.y0-tt.y0}),lt=0;lt<$e;++lt)(Ge=je[lt]).y0>=Ue||(Ke=Ue-Ge.y0)>1e-6&&(Ge.y0+=Ke,Ge.y1+=Ke),Ue=Ge.y1+te}),j.update(De)}return{circular:be,key:se,trace:W,guid:d.randstr(),horizontal:q,width:le,height:ue,nodePad:W.node.pad,nodeLineColor:W.node.line.color,nodeLineWidth:W.node.line.width,linkLineColor:W.link.line.color,linkLineWidth:W.link.line.width,valueFormat:W.valueformat,valueSuffix:W.valuesuffix,textFont:W.textfont,translateX:ie.x[0]*$.width+$.margin.l,translateY:$.height-ie.y[1]*$.height+$.margin.t,dragParallel:q?ue:le,dragPerpendicular:q?le:ue,arrangement:W.arrangement,sankey:j,graph:De,forceLayouts:{},interactionState:{dragInProgress:!1,hovered:!1}}}function k($,Q,se){var j=a(Q.color),G=Q.source.label+"|"+Q.target.label+"__"+se;return Q.trace=$.trace,Q.curveNumber=$.trace.index,{circular:$.circular,key:G,traceId:$.key,pointNumber:Q.pointNumber,link:Q,tinyColorHue:l.tinyRGB(j),tinyColorAlpha:j.getAlpha(),linkPath:C,linkLineColor:$.linkLineColor,linkLineWidth:$.linkLineWidth,valueFormat:$.valueFormat,valueSuffix:$.valueSuffix,sankey:$.sankey,parent:$,interactionState:$.interactionState,flow:Q.flow}}function C(){return function($){if($.link.circular)return se=(Q=$.link).width/2,j=Q.circularPathData,"top"===Q.circularLinkType?"M "+j.targetX+" "+(j.targetY+se)+" L"+j.rightInnerExtent+" "+(j.targetY+se)+"A"+(j.rightLargeArcRadius+se)+" "+(j.rightSmallArcRadius+se)+" 0 0 1 "+(j.rightFullExtent-se)+" "+(j.targetY-j.rightSmallArcRadius)+"L"+(j.rightFullExtent-se)+" "+j.verticalRightInnerExtent+"A"+(j.rightLargeArcRadius+se)+" "+(j.rightLargeArcRadius+se)+" 0 0 1 "+j.rightInnerExtent+" "+(j.verticalFullExtent-se)+"L"+j.leftInnerExtent+" "+(j.verticalFullExtent-se)+"A"+(j.leftLargeArcRadius+se)+" "+(j.leftLargeArcRadius+se)+" 0 0 1 "+(j.leftFullExtent+se)+" "+j.verticalLeftInnerExtent+"L"+(j.leftFullExtent+se)+" "+(j.sourceY-j.leftSmallArcRadius)+"A"+(j.leftLargeArcRadius+se)+" "+(j.leftSmallArcRadius+se)+" 0 0 1 "+j.leftInnerExtent+" "+(j.sourceY+se)+"L"+j.sourceX+" "+(j.sourceY+se)+"L"+j.sourceX+" "+(j.sourceY-se)+"L"+j.leftInnerExtent+" "+(j.sourceY-se)+"A"+(j.leftLargeArcRadius-se)+" "+(j.leftSmallArcRadius-se)+" 0 0 0 "+(j.leftFullExtent-se)+" "+(j.sourceY-j.leftSmallArcRadius)+"L"+(j.leftFullExtent-se)+" "+j.verticalLeftInnerExtent+"A"+(j.leftLargeArcRadius-se)+" "+(j.leftLargeArcRadius-se)+" 0 0 0 "+j.leftInnerExtent+" "+(j.verticalFullExtent+se)+"L"+j.rightInnerExtent+" "+(j.verticalFullExtent+se)+"A"+(j.rightLargeArcRadius-se)+" "+(j.rightLargeArcRadius-se)+" 0 0 0 "+(j.rightFullExtent+se)+" "+j.verticalRightInnerExtent+"L"+(j.rightFullExtent+se)+" "+(j.targetY-j.rightSmallArcRadius)+"A"+(j.rightLargeArcRadius-se)+" "+(j.rightSmallArcRadius-se)+" 0 0 0 "+j.rightInnerExtent+" "+(j.targetY-se)+"L"+j.targetX+" "+(j.targetY-se)+"Z":"M "+j.targetX+" "+(j.targetY-se)+" L"+j.rightInnerExtent+" "+(j.targetY-se)+"A"+(j.rightLargeArcRadius+se)+" "+(j.rightSmallArcRadius+se)+" 0 0 0 "+(j.rightFullExtent-se)+" "+(j.targetY+j.rightSmallArcRadius)+"L"+(j.rightFullExtent-se)+" "+j.verticalRightInnerExtent+"A"+(j.rightLargeArcRadius+se)+" "+(j.rightLargeArcRadius+se)+" 0 0 0 "+j.rightInnerExtent+" "+(j.verticalFullExtent+se)+"L"+j.leftInnerExtent+" "+(j.verticalFullExtent+se)+"A"+(j.leftLargeArcRadius+se)+" "+(j.leftLargeArcRadius+se)+" 0 0 0 "+(j.leftFullExtent+se)+" "+j.verticalLeftInnerExtent+"L"+(j.leftFullExtent+se)+" "+(j.sourceY+j.leftSmallArcRadius)+"A"+(j.leftLargeArcRadius+se)+" "+(j.leftSmallArcRadius+se)+" 0 0 0 "+j.leftInnerExtent+" "+(j.sourceY-se)+"L"+j.sourceX+" "+(j.sourceY-se)+"L"+j.sourceX+" "+(j.sourceY+se)+"L"+j.leftInnerExtent+" "+(j.sourceY+se)+"A"+(j.leftLargeArcRadius-se)+" "+(j.leftSmallArcRadius-se)+" 0 0 1 "+(j.leftFullExtent-se)+" "+(j.sourceY+j.leftSmallArcRadius)+"L"+(j.leftFullExtent-se)+" "+j.verticalLeftInnerExtent+"A"+(j.leftLargeArcRadius-se)+" "+(j.leftLargeArcRadius-se)+" 0 0 1 "+j.leftInnerExtent+" "+(j.verticalFullExtent-se)+"L"+j.rightInnerExtent+" "+(j.verticalFullExtent-se)+"A"+(j.rightLargeArcRadius-se)+" "+(j.rightLargeArcRadius-se)+" 0 0 1 "+(j.rightFullExtent+se)+" "+j.verticalRightInnerExtent+"L"+(j.rightFullExtent+se)+" "+(j.targetY+j.rightSmallArcRadius)+"A"+(j.rightLargeArcRadius-se)+" "+(j.rightSmallArcRadius-se)+" 0 0 1 "+j.rightInnerExtent+" "+(j.targetY+se)+"L"+j.targetX+" "+(j.targetY+se)+"Z";var Q,se,j,G=$.link.source.x1,W=$.link.target.x0,ie=x(G,W),q=ie(.5),te=ie(.5),ne=$.link.y0-$.link.width/2,le=$.link.y0+$.link.width/2,ue=$.link.y1-$.link.width/2,de=$.link.y1+$.link.width/2;return"M"+G+","+ne+"C"+q+","+ne+" "+te+","+ue+" "+W+","+ue+"L"+W+","+de+"C"+te+","+de+" "+q+","+le+" "+G+","+le+"Z"}}function P($,Q){var se=a(Q.color),j=o.nodePadAcross,G=$.nodePad/2;Q.dx=Q.x1-Q.x0,Q.dy=Q.y1-Q.y0;var W=Q.dx,ie=Math.max(.5,Q.dy),q="node_"+Q.pointNumber;return Q.group&&(q=d.randstr()),Q.trace=$.trace,Q.curveNumber=$.trace.index,{index:Q.pointNumber,key:q,partOfGroup:Q.partOfGroup||!1,group:Q.group,traceId:$.key,trace:$.trace,node:Q,nodePad:$.nodePad,nodeLineColor:$.nodeLineColor,nodeLineWidth:$.nodeLineWidth,textFont:$.textFont,size:$.horizontal?$.height:$.width,visibleWidth:Math.ceil(W),visibleHeight:ie,zoneX:-j,zoneY:-G,zoneWidth:W+2*j,zoneHeight:ie+2*G,labelY:$.horizontal?Q.dy/2+1:Q.dx/2+1,left:1===Q.originalLayer,sizeAcross:$.width,forceLayouts:$.forceLayouts,horizontal:$.horizontal,darkBackground:se.getBrightness()<=128,tinyColorHue:l.tinyRGB(se),tinyColorAlpha:se.getAlpha(),valueFormat:$.valueFormat,valueSuffix:$.valueSuffix,sankey:$.sankey,graph:$.graph,arrangement:$.arrangement,uniqueNodeLabelPathId:[$.guid,$.key,q].join("_"),interactionState:$.interactionState,figure:$}}function D($){$.attr("transform",function(Q){return u(Q.node.x0.toFixed(3),Q.node.y0.toFixed(3))})}function F($){$.call(D)}function R($,Q){$.call(F),Q.attr("d",C())}function L($){$.attr("width",function(Q){return Q.node.x1-Q.node.x0}).attr("height",function(Q){return Q.visibleHeight})}function I($){return $.link.width>1||$.linkLineWidth>0}function B($){return u($.translateX,$.translateY)+($.horizontal?"matrix(1 0 0 1 0 0)":"matrix(0 1 1 0 0 0)")}function V($,Q,se){$.on(".basic",null).on("mouseover.basic",function(j){j.interactionState.dragInProgress||j.partOfGroup||(se.hover(this,j,Q),j.interactionState.hovered=[this,j])}).on("mousemove.basic",function(j){j.interactionState.dragInProgress||j.partOfGroup||(se.follow(this,j),j.interactionState.hovered=[this,j])}).on("mouseout.basic",function(j){j.interactionState.dragInProgress||j.partOfGroup||(se.unhover(this,j,Q),j.interactionState.hovered=!1)}).on("click.basic",function(j){j.interactionState.hovered&&(se.unhover(this,j,Q),j.interactionState.hovered=!1),j.interactionState.dragInProgress||j.partOfGroup||se.select(this,j,Q)})}function Z($,Q,se,j){var G=T.behavior.drag().origin(function(W){return{x:W.node.x0+W.visibleWidth/2,y:W.node.y0+W.visibleHeight/2}}).on("dragstart",function(W){if("fixed"!==W.arrangement&&(d.ensureSingle(j._fullLayout._infolayer,"g","dragcover",function(q){j._fullLayout._dragCover=q}),d.raiseToTop(this),W.interactionState.dragInProgress=W.node,ee(W.node),W.interactionState.hovered&&(se.nodeEvents.unhover.apply(0,W.interactionState.hovered),W.interactionState.hovered=!1),"snap"===W.arrangement)){var ie=W.traceId+"|"+W.key;W.forceLayouts[ie]?W.forceLayouts[ie].alpha(1):function(q,te,ne,le){!function(de){for(var he=0;he<de.length;he++)de[he].y=(de[he].y0+de[he].y1)/2,de[he].x=(de[he].x0+de[he].x1)/2}(ne.graph.nodes);var he,be,ge,ue=ne.graph.nodes.filter(function(de){return de.originalX===ne.node.originalX}).filter(function(de){return!de.partOfGroup});ne.forceLayouts[te]=m.forceSimulation(ue).alphaDecay(0).force("collide",m.forceCollide().radius(function(de){return de.dy/2+ne.nodePad/2}).strength(1).iterations(o.forceIterations)).force("constrain",(he=te,be=ue,ge=ne,function(){for(var we=0,Ce=0;Ce<be.length;Ce++){var De=be[Ce];De===ge.interactionState.dragInProgress?(De.x=De.lastDraggedX,De.y=De.lastDraggedY):(De.vx=(De.originalX-De.x)/o.forceTicksPerFrame,De.y=Math.min(ge.size-De.dy/2,Math.max(De.dy/2,De.y))),we=Math.max(we,Math.abs(De.vx),Math.abs(De.vy))}!ge.interactionState.dragInProgress&&we<.1&&ge.forceLayouts[he].alpha()>0&&ge.forceLayouts[he].alpha(0)})).stop()}(0,ie,W),q=$,te=Q,ne=W,le=ie,ue=j,window.requestAnimationFrame(function de(){var he;for(he=0;he<o.forceTicksPerFrame;he++)ne.forceLayouts[le].tick();if(function(ge){for(var we=0;we<ge.length;we++)ge[we].y0=ge[we].y-ge[we].dy/2,ge[we].y1=ge[we].y0+ge[we].dy,ge[we].x0=ge[we].x-ge[we].dx/2,ge[we].x1=ge[we].x0+ge[we].dx}(ne.graph.nodes),ne.sankey.update(ne.graph),R(q.filter(J(ne)),te),ne.forceLayouts[le].alpha()>0)window.requestAnimationFrame(de);else{var be=ne.node.originalX;ne.node.x0=be-ne.visibleWidth/2,ne.node.x1=be+ne.visibleWidth/2,Y(ne,ue)}})}var q,te,ne,le,ue}).on("drag",function(W){if("fixed"!==W.arrangement){var ie=T.event.x,q=T.event.y;"snap"===W.arrangement?(W.node.x0=ie-W.visibleWidth/2,W.node.x1=ie+W.visibleWidth/2,W.node.y0=q-W.visibleHeight/2,W.node.y1=q+W.visibleHeight/2):("freeform"===W.arrangement&&(W.node.x0=ie-W.visibleWidth/2,W.node.x1=ie+W.visibleWidth/2),q=Math.max(0,Math.min(W.size-W.visibleHeight/2,q)),W.node.y0=q-W.visibleHeight/2,W.node.y1=q+W.visibleHeight/2),ee(W.node),"snap"!==W.arrangement&&(W.sankey.update(W.graph),R($.filter(J(W)),Q))}}).on("dragend",function(W){if("fixed"!==W.arrangement){W.interactionState.dragInProgress=!1;for(var ie=0;ie<W.node.childrenNodes.length;ie++)W.node.childrenNodes[ie].x=W.node.x,W.node.childrenNodes[ie].y=W.node.y;"snap"!==W.arrangement&&Y(W,j)}});$.on(".drag",null).call(G)}function Y($,Q){for(var se=[],j=[],G=0;G<$.graph.nodes.length;G++){var ie=($.graph.nodes[G].y0+$.graph.nodes[G].y1)/2;se.push(($.graph.nodes[G].x0+$.graph.nodes[G].x1)/2/$.figure.width),j.push(ie/$.figure.height)}f.call("_guiRestyle",Q,{"node.x":[se],"node.y":[j]},$.trace.index).then(function(){Q._fullLayout._dragCover&&Q._fullLayout._dragCover.remove()})}function ee($){$.lastDraggedX=$.x0+$.dx/2,$.lastDraggedY=$.y0+$.dy/2}function J($){return function(Q){return Q.node.originalX===$.node.originalX}}oe.exports=function($,Q,se,j,G){var W=!1;d.ensureSingle($._fullLayout._infolayer,"g","first-render",function(){W=!0});var ie=$._fullLayout._dragCover,q=se.filter(function(ge){return v(ge).trace.visible}).map(A.bind(null,j)),te=Q.selectAll("."+o.cn.sankey).data(q,h);te.exit().remove(),te.enter().append("g").classed(o.cn.sankey,!0).style("box-sizing","content-box").style("position","absolute").style("left",0).style("shape-rendering","geometricPrecision").style("pointer-events","auto").attr("transform",B),te.each(function(ge,we){$._fullData[we]._sankey=ge;var Ce="bgsankey-"+ge.trace.uid+"-"+we;d.ensureSingle($._fullLayout._draggers,"rect",Ce),$._fullData[we]._bgRect=T.select("."+Ce),$._fullData[we]._bgRect.style("pointer-events","all").attr("width",ge.width).attr("height",ge.height).attr("x",ge.translateX).attr("y",ge.translateY).classed("bgsankey",!0).style({fill:"transparent","stroke-width":0})}),te.transition().ease(o.ease).duration(o.duration).attr("transform",B);var ne=te.selectAll("."+o.cn.sankeyLinks).data(p,h);ne.enter().append("g").classed(o.cn.sankeyLinks,!0).style("fill","none");var le=ne.selectAll("."+o.cn.sankeyLink).data(function(ge){return ge.graph.links.filter(function(we){return we.value}).map(k.bind(null,ge))},h);le.enter().append("path").classed(o.cn.sankeyLink,!0).call(V,te,G.linkEvents),le.style("stroke",function(ge){return I(ge)?l.tinyRGB(a(ge.linkLineColor)):ge.tinyColorHue}).style("stroke-opacity",function(ge){return I(ge)?l.opacity(ge.linkLineColor):ge.tinyColorAlpha}).style("fill",function(ge){return ge.tinyColorHue}).style("fill-opacity",function(ge){return ge.tinyColorAlpha}).style("stroke-width",function(ge){return I(ge)?ge.linkLineWidth:1}).attr("d",C()),le.style("opacity",function(){return $._context.staticPlot||W||ie?1:0}).transition().ease(o.ease).duration(o.duration).style("opacity",1),le.exit().transition().ease(o.ease).duration(o.duration).style("opacity",0).remove();var ue=te.selectAll("."+o.cn.sankeyNodeSet).data(p,h);ue.enter().append("g").classed(o.cn.sankeyNodeSet,!0),ue.style("cursor",function(ge){switch(ge.arrangement){case"fixed":return"default";case"perpendicular":return"ns-resize";default:return"move"}});var de=ue.selectAll("."+o.cn.sankeyNode).data(function(ge){var we=ge.graph.nodes;return function(Ce){var De,Se=[];for(De=0;De<Ce.length;De++)Ce[De].originalX=(Ce[De].x0+Ce[De].x1)/2,Ce[De].originalY=(Ce[De].y0+Ce[De].y1)/2,-1===Se.indexOf(Ce[De].originalX)&&Se.push(Ce[De].originalX);for(Se.sort(function(Fe,ve){return Fe-ve}),De=0;De<Ce.length;De++)Ce[De].originalLayerIndex=Se.indexOf(Ce[De].originalX),Ce[De].originalLayer=Ce[De].originalLayerIndex/(Se.length-1)}(we),we.map(P.bind(null,ge))},h);de.enter().append("g").classed(o.cn.sankeyNode,!0).call(D).style("opacity",function(ge){return!$._context.staticPlot&&!W||ge.partOfGroup?0:1}),de.call(V,te,G.nodeEvents).call(Z,le,G,$),de.transition().ease(o.ease).duration(o.duration).call(D).style("opacity",function(ge){return ge.partOfGroup?0:1}),de.exit().transition().ease(o.ease).duration(o.duration).style("opacity",0).remove();var he=de.selectAll("."+o.cn.nodeRect).data(p);he.enter().append("rect").classed(o.cn.nodeRect,!0).call(L),he.style("stroke-width",function(ge){return ge.nodeLineWidth}).style("stroke",function(ge){return l.tinyRGB(a(ge.nodeLineColor))}).style("stroke-opacity",function(ge){return l.opacity(ge.nodeLineColor)}).style("fill",function(ge){return ge.tinyColorHue}).style("fill-opacity",function(ge){return ge.tinyColorAlpha}),he.transition().ease(o.ease).duration(o.duration).call(L);var be=de.selectAll("."+o.cn.nodeLabel).data(p);be.enter().append("text").classed(o.cn.nodeLabel,!0).style("cursor","default"),be.attr("data-notex",1).text(function(ge){return ge.node.label}).each(function(ge){var we=T.select(this);i.font(we,ge.textFont),g.convertToTspans(we,$)}).style("text-shadow",g.makeTextShadow($._fullLayout.paper_bgcolor)).attr("text-anchor",function(ge){return ge.horizontal&&ge.left?"end":"start"}).attr("transform",function(ge){var we=T.select(this),Ce=g.lineCount(we),Se=ge.nodeLineWidth/2+3,Fe=((ge.horizontal?ge.visibleHeight:ge.visibleWidth)-ge.textFont.size*((Ce-1)*M-y))/2;ge.horizontal&&(ge.left?Se=-Se:Se+=ge.visibleWidth);var ve=ge.horizontal?"":"scale(-1,1)"+s(90);return u(ge.horizontal?Se:Fe,ge.horizontal?Fe:Se)+ve}),be.transition().ease(o.ease).duration(o.duration)}},{"../../components/color":366,"../../components/drawing":388,"../../constants/alignment":471,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"../../registry":638,"./constants":919,"@plotly/d3":58,"@plotly/d3-sankey":57,"@plotly/d3-sankey-circular":56,"d3-force":111,"d3-interpolate":116,tinycolor2:312}],924:[function(_,oe,ae){"use strict";oe.exports=function(m,x){for(var T=[],b=m.cd[0].trace,e=b._sankey.graph.nodes,o=0;o<e.length;o++){var a=e[o];if(!a.partOfGroup){var l=[(a.x0+a.x1)/2,(a.y0+a.y1)/2];"v"===b.orientation&&l.reverse(),x&&x.contains(l,!1,o,m)&&T.push({pointNumber:a.pointNumber})}}return T}},{}],925:[function(_,oe,ae){"use strict";var m=_("../../lib");oe.exports=function(x,T){for(var b=0;b<x.length;b++)x[b].i=b;m.mergeArray(T.text,x,"tx"),m.mergeArray(T.texttemplate,x,"txt"),m.mergeArray(T.hovertext,x,"htx"),m.mergeArray(T.customdata,x,"data"),m.mergeArray(T.textposition,x,"tp"),T.textfont&&(m.mergeArrayCastPositive(T.textfont.size,x,"ts"),m.mergeArray(T.textfont.color,x,"tc"),m.mergeArray(T.textfont.family,x,"tf"));var e=T.marker;if(e){m.mergeArrayCastPositive(e.size,x,"ms"),m.mergeArrayCastPositive(e.opacity,x,"mo"),m.mergeArray(e.symbol,x,"mx"),m.mergeArray(e.color,x,"mc");var o=e.line;e.line&&(m.mergeArray(o.color,x,"mlc"),m.mergeArrayCastPositive(o.width,x,"mlw"));var a=e.gradient;a&&"none"!==a.type&&(m.mergeArray(a.type,x,"mgt"),m.mergeArray(a.color,x,"mgc"))}}},{"../../lib":503}],926:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../../components/colorscale/attributes"),e=_("../../plots/font_attributes"),o=_("../../components/drawing/attributes").dash,a=_("../../components/drawing"),l=_("./constants"),i=_("../../lib/extend").extendFlat;oe.exports={x:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},x0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dx:{valType:"number",dflt:1,editType:"calc",anim:!0},y:{valType:"data_array",editType:"calc+clearAxisTypes",anim:!0},y0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes",anim:!0},dy:{valType:"number",dflt:1,editType:"calc",anim:!0},xperiod:{valType:"any",dflt:0,editType:"calc"},yperiod:{valType:"any",dflt:0,editType:"calc"},xperiod0:{valType:"any",editType:"calc"},yperiod0:{valType:"any",editType:"calc"},xperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},yperiodalignment:{valType:"enumerated",values:["start","middle","end"],dflt:"middle",editType:"calc"},xhoverformat:m("x"),yhoverformat:m("y"),stackgroup:{valType:"string",dflt:"",editType:"calc"},orientation:{valType:"enumerated",values:["v","h"],editType:"calc"},groupnorm:{valType:"enumerated",values:["","fraction","percent"],dflt:"",editType:"calc"},stackgaps:{valType:"enumerated",values:["infer zero","interpolate"],dflt:"infer zero",editType:"calc"},text:{valType:"string",dflt:"",arrayOk:!0,editType:"calc"},texttemplate:x({},{}),hovertext:{valType:"string",dflt:"",arrayOk:!0,editType:"style"},mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"],editType:"calc"},hoveron:{valType:"flaglist",flags:["points","fills"],editType:"style"},hovertemplate:T({},{keys:l.eventDataKeys}),line:{color:{valType:"color",editType:"style",anim:!0},width:{valType:"number",min:0,dflt:2,editType:"style",anim:!0},shape:{valType:"enumerated",values:["linear","spline","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},smoothing:{valType:"number",min:0,max:1.3,dflt:1,editType:"plot"},dash:i({},o,{editType:"style"}),simplify:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},cliponaxis:{valType:"boolean",dflt:!0,editType:"plot"},fill:{valType:"enumerated",values:["none","tozeroy","tozerox","tonexty","tonextx","toself","tonext"],editType:"calc"},fillcolor:{valType:"color",editType:"style",anim:!0},marker:i({symbol:{valType:"enumerated",values:a.symbolList,dflt:"circle",arrayOk:!0,editType:"style"},opacity:{valType:"number",min:0,max:1,arrayOk:!0,editType:"style",anim:!0},size:{valType:"number",min:0,dflt:6,arrayOk:!0,editType:"calc",anim:!0},maxdisplayed:{valType:"number",min:0,dflt:0,editType:"plot"},sizeref:{valType:"number",dflt:1,editType:"calc"},sizemin:{valType:"number",min:0,dflt:0,editType:"calc"},sizemode:{valType:"enumerated",values:["diameter","area"],dflt:"diameter",editType:"calc"},line:i({width:{valType:"number",min:0,arrayOk:!0,editType:"style",anim:!0},editType:"calc"},b("marker.line",{anim:!0})),gradient:{type:{valType:"enumerated",values:["radial","horizontal","vertical","none"],arrayOk:!0,dflt:"none",editType:"calc"},color:{valType:"color",arrayOk:!0,editType:"calc"},editType:"calc"},editType:"calc"},b("marker",{anim:!0})),selected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},unselected:{marker:{opacity:{valType:"number",min:0,max:1,editType:"style"},color:{valType:"color",editType:"style"},size:{valType:"number",min:0,editType:"style"},editType:"style"},textfont:{color:{valType:"color",editType:"style"},editType:"style"},editType:"style"},textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"middle center",arrayOk:!0,editType:"calc"},textfont:e({editType:"calc",colorEditType:"style",arrayOk:!0})}},{"../../components/colorscale/attributes":373,"../../components/drawing":388,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../../plots/font_attributes":585,"../../plots/template_attributes":633,"./constants":930}],927:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../lib"),T=_("../../plots/cartesian/axes"),b=_("../../plots/cartesian/align_period"),e=_("../../constants/numerical").BADNUM,o=_("./subtypes"),a=_("./colorscale_calc"),l=_("./arrays_to_calcdata"),i=_("./calc_selection");function d(p,v,g,f,w,y,M){var A=v._length,k=p._fullLayout,C=g._id,P=f._id,D=k._firstScatter[c(v)]===v.uid,F=(h(v,k,g,f)||{}).orientation,R=v.fill;g._minDtick=0,f._minDtick=0;var L={padded:!0},I={padded:!0};M&&(L.ppad=I.ppad=M);var B=A<2||w[0]!==w[A-1]||y[0]!==y[A-1];B&&("tozerox"===R||"tonextx"===R&&(D||"h"===F))?L.tozero=!0:(v.error_y||{}).visible||"tonexty"!==R&&"tozeroy"!==R&&(o.hasMarkers(v)||o.hasText(v))||(L.padded=!1,L.ppad=0),B&&("tozeroy"===R||"tonexty"===R&&(D||"v"===F))?I.tozero=!0:"tonextx"!==R&&"tozerox"!==R||(I.padded=!1),C&&(v._extremes[C]=T.findExtremes(g,w,L)),P&&(v._extremes[P]=T.findExtremes(f,y,I))}function u(p,v){if(o.hasMarkers(p)){var g,f=p.marker,w=1.6*(p.marker.sizeref||1);if(g="area"===p.marker.sizemode?function(C){return Math.max(Math.sqrt((C||0)/w),3)}:function(C){return Math.max((C||0)/w,3)},x.isArrayOrTypedArray(f.size)){var y={type:"linear"};T.setConvert(y);for(var M=y.makeCalcdata(p.marker,"size"),A=new Array(v),k=0;k<v;k++)A[k]=g(M[k]);return A}return g(f.size)}}function s(p,v){var g=c(v),f=p._firstScatter;f[g]||(f[g]=v.uid)}function c(p){var v=p.stackgroup;return p.xaxis+p.yaxis+p.type+(v?"-"+v:"")}function h(p,v,g,f){var w=p.stackgroup;if(w){var y=v._scatterStackOpts[g._id+f._id][w],M="v"===y.orientation?f:g;return"linear"===M.type||"log"===M.type?y:void 0}}oe.exports={calc:function(p,v){var g,f,w,y,M,A,k=p._fullLayout,C=T.getFromId(p,v.xaxis||"x"),P=T.getFromId(p,v.yaxis||"y"),D=C.makeCalcdata(v,"x"),F=P.makeCalcdata(v,"y"),R=b(v,C,"x",D),L=b(v,P,"y",F),I=R.vals,B=L.vals,V=v._length,Z=new Array(V),Y=v.ids,ee=h(v,k,C,P),J=!1;s(k,v);var $,Q="x",se="y";ee?(x.pushUnique(ee.traceIndices,v._expandedIndex),(g="v"===ee.orientation)?(se="s",$="x"):(Q="s",$="y"),M="interpolate"===ee.stackgaps):d(p,v,C,P,I,B,u(v,V));var j=!!v.xperiodalignment,G=!!v.yperiodalignment;for(f=0;f<V;f++){var W=Z[f]={},ie=m(I[f]),q=m(B[f]);ie&&q?(W[Q]=I[f],W[se]=B[f],j&&(W.orig_x=D[f],W.xEnd=R.ends[f],W.xStart=R.starts[f]),G&&(W.orig_y=F[f],W.yEnd=L.ends[f],W.yStart=L.starts[f])):ee&&(g?ie:q)?(W[$]=g?I[f]:B[f],W.gap=!0,M?(W.s=e,J=!0):W.s=0):W[Q]=W[se]=e,Y&&(W.id=String(Y[f]))}if(l(Z,v),a(p,v),i(Z,v),ee){for(f=0;f<Z.length;)Z[f][$]===e?Z.splice(f,1):f++;if(x.sort(Z,function(ue,de){return ue[$]-de[$]||ue.i-de.i}),J){for(f=0;f<Z.length-1&&Z[f].gap;)f++;for((A=Z[f].s)||(A=Z[f].s=0),w=0;w<f;w++)Z[w].s=A;for(y=Z.length-1;y>f&&Z[y].gap;)y--;for(A=Z[y].s,w=Z.length-1;w>y;w--)Z[w].s=A;for(;f<y;)if(Z[++f].gap){for(w=f+1;Z[w].gap;)w++;for(var te=Z[f-1][$],ne=Z[f-1].s,le=(Z[w].s-ne)/(Z[w][$]-te);f<w;)Z[f].s=ne+(Z[f][$]-te)*le,f++}}}return Z},calcMarkerSize:u,calcAxisExpansion:d,setFirstScatter:s,getStackOpts:h}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"./arrays_to_calcdata":925,"./calc_selection":928,"./colorscale_calc":929,"./subtypes":951,"fast-isnumeric":190}],928:[function(_,oe,ae){"use strict";var m=_("../../lib");oe.exports=function(x,T){m.isArrayOrTypedArray(T.selectedpoints)&&m.tagSelected(x,T)}},{"../../lib":503}],929:[function(_,oe,ae){"use strict";var m=_("../../components/colorscale/helpers").hasColorscale,x=_("../../components/colorscale/calc"),T=_("./subtypes");oe.exports=function(b,e){T.hasLines(e)&&m(e,"line")&&x(b,e,{vals:e.line.color,containerStr:"line",cLetter:"c"}),T.hasMarkers(e)&&(m(e,"marker")&&x(b,e,{vals:e.marker.color,containerStr:"marker",cLetter:"c"}),m(e,"marker.line")&&x(b,e,{vals:e.marker.line.color,containerStr:"marker.line",cLetter:"c"}))}},{"../../components/colorscale/calc":374,"../../components/colorscale/helpers":377,"./subtypes":951}],930:[function(_,oe,ae){"use strict";oe.exports={PTS_LINESONLY:20,minTolerance:.2,toleranceGrowth:10,maxScreensAway:20,eventDataKeys:[]}},{}],931:[function(_,oe,ae){"use strict";var m=_("./calc");function x(T,b,e,o,a,l,i){a[o]=!0;var s,c,p,v,g,d={i:null,gap:!0,s:0};if(d[i]=e,T.splice(b,0,d),b&&e===T[b-1][i]){var u=T[b-1];d.s=u.s,d.i=u.i,d.gap=u.gap}else l&&(d.s=(p=i,v=(s=T)[(c=b)-1],(g=s[c+1])?v?v.s+(g.s-v.s)*(e-v[p])/(g[p]-v[p]):g.s:v.s));b||(T[0].t=T[1].t,T[0].trace=T[1].trace,delete T[1].t,delete T[1].trace)}oe.exports=function(T,b){var e=b.xaxis,o=b.yaxis,l=T._fullLayout._scatterStackOpts[e._id+o._id];if(l){var i,d,u,s,c,h,p,v,g,f,w,y,M,A,k,C=T.calcdata;for(var P in l){var D=(f=l[P]).traceIndices;if(D.length){for(w="interpolate"===f.stackgaps,y=f.groupnorm,"v"===f.orientation?(M="x",A="y"):(M="y",A="x"),k=new Array(D.length),i=0;i<k.length;i++)k[i]=!1;h=C[D[0]];var F=new Array(h.length);for(i=0;i<h.length;i++)F[i]=h[i][M];for(i=1;i<D.length;i++){for(c=C[D[i]],d=u=0;d<c.length;d++){for(p=c[d][M];p>F[u]&&u<F.length;u++)x(c,d,F[u],i,k,w,M),d++;if(p!==F[u]){for(s=0;s<i;s++)x(C[D[s]],u,p,s,k,w,M);F.splice(u,0,p)}u++}for(;u<F.length;u++)x(c,d,F[u],i,k,w,M),d++}var R=F.length;for(d=0;d<h.length;d++){for(v=h[d][A]=h[d].s,i=1;i<D.length;i++)(c=C[D[i]])[0].trace._rawLength=c[0].trace._length,c[0].trace._length=R,c[d][A]=v+=c[d].s;if(y)for(g=("fraction"===y?v:v/100)||1,i=0;i<D.length;i++){var L=C[D[i]][d];L[A]/=g,L.sNorm=L.s/g}}for(i=0;i<D.length;i++){var I=(c=C[D[i]])[0].trace,B=m.calcMarkerSize(I,I._rawLength),V=Array.isArray(B);if(B&&k[i]||V){var Z=B;for(B=new Array(R),d=0;d<R;d++)B[d]=c[d].gap?0:V?Z[c[d].i]:Z}var Y=new Array(R),ee=new Array(R);for(d=0;d<R;d++)Y[d]=c[d].x,ee[d]=c[d].y;m.calcAxisExpansion(T,I,e,o,Y,ee,B),c[0].t.orientation=f.orientation}}}}}},{"./calc":927}],932:[function(_,oe,ae){"use strict";oe.exports=function(m){for(var x=0;x<m.length;x++){var T=m[x];if("scatter"===T.type){var b=T.fill;if("none"!==b&&"toself"!==b&&(T.opacity=void 0,"tonexty"===b||"tonextx"===b))for(var e=x-1;e>=0;e--){var o=m[e];if("scatter"===o.type&&o.xaxis===T.xaxis&&o.yaxis===T.yaxis){o.opacity=void 0;break}}}}}},{}],933:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../registry"),T=_("./attributes"),b=_("./constants"),e=_("./subtypes"),o=_("./xy_defaults"),a=_("./period_defaults"),l=_("./stack_defaults"),i=_("./marker_defaults"),d=_("./line_defaults"),u=_("./line_shape_defaults"),s=_("./text_defaults"),c=_("./fillcolor_defaults");oe.exports=function(h,p,v,g){function f(D,F){return m.coerce(h,p,T,D,F)}var w=o(h,p,g,f);if(w||(p.visible=!1),p.visible){a(h,p,g,f),f("xhoverformat"),f("yhoverformat");var y=l(h,p,g,f),M=!y&&w<b.PTS_LINESONLY?"lines+markers":"lines";f("text"),f("hovertext"),f("mode",M),e.hasLines(p)&&(d(h,p,v,g,f),u(h,p,f),f("connectgaps"),f("line.simplify")),e.hasMarkers(p)&&i(h,p,v,g,f,{gradient:!0}),e.hasText(p)&&(f("texttemplate"),s(h,p,g,f));var A=[];(e.hasMarkers(p)||e.hasText(p))&&(f("cliponaxis"),f("marker.maxdisplayed"),A.push("points")),f("fill",y?y.fillDflt:"none"),"none"!==p.fill&&(c(h,p,v,f),e.hasLines(p)||u(h,p,f));var k=(p.line||{}).color,C=(p.marker||{}).color;"tonext"!==p.fill&&"toself"!==p.fill||A.push("fills"),f("hoveron",A.join("+")||"points"),"fills"!==p.hoveron&&f("hovertemplate");var P=x.getComponentMethod("errorbars","supplyDefaults");P(h,p,k||C||v,{axis:"y"}),P(h,p,k||C||v,{axis:"x",inherit:"y"}),m.coerceSelectionMarkerOpacity(p,f)}}},{"../../lib":503,"../../registry":638,"./attributes":926,"./constants":930,"./fillcolor_defaults":934,"./line_defaults":939,"./line_shape_defaults":941,"./marker_defaults":945,"./period_defaults":946,"./stack_defaults":949,"./subtypes":951,"./text_defaults":952,"./xy_defaults":953}],934:[function(_,oe,ae){"use strict";var m=_("../../components/color"),x=_("../../lib").isArrayOrTypedArray;oe.exports=function(T,b,e,o){var a=!1;if(b.marker){var l=b.marker.color,i=(b.marker.line||{}).color;l&&!x(l)?a=l:i&&!x(i)&&(a=i)}o("fillcolor",m.addOpacity((b.line||{}).color||a||e,.5))}},{"../../components/color":366,"../../lib":503}],935:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/axes");oe.exports=function(x,T,b){var e={},o={_fullLayout:b},a=m.getFromTrace(o,T,"x"),l=m.getFromTrace(o,T,"y");return e.xLabel=m.tickText(a,a.c2l(x.x),!0).text,e.yLabel=m.tickText(l,l.c2l(x.y),!0).text,e}},{"../../plots/cartesian/axes":554}],936:[function(_,oe,ae){"use strict";var m=_("../../components/color"),x=_("./subtypes");oe.exports=function(T,b){var e,o;if("lines"===T.mode)return(e=T.line.color)&&m.opacity(e)?e:T.fillcolor;if("none"===T.mode)return T.fill?T.fillcolor:"";var a=b.mcc||(T.marker||{}).color,l=b.mlcc||((T.marker||{}).line||{}).color;return(o=a&&m.opacity(a)?a:l&&m.opacity(l)&&(b.mlw||((T.marker||{}).line||{}).width)?l:"")?m.opacity(o)<.3?m.addOpacity(o,.3):o:(e=(T.line||{}).color)&&m.opacity(e)&&x.hasLines(T)&&T.line.width?e:T.fillcolor}},{"../../components/color":366,"./subtypes":951}],937:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../components/fx"),T=_("../../registry"),b=_("./get_trace_color"),e=_("../../components/color"),o=m.fillText;oe.exports=function(a,l,i,d){var u=a.cd,s=u[0].trace,c=a.xa,h=a.ya,p=c.c2p(l),v=h.c2p(i),g=[p,v],f=s.hoveron||"",w=-1!==s.mode.indexOf("markers")?3:.5,y=!!s.xperiodalignment,M=!!s.yperiodalignment;if(-1!==f.indexOf("points")){var A=function(he){var be=Math.max(w,he.mrc||0),ge=c.c2p(he.x)-p,we=h.c2p(he.y)-v;return Math.max(Math.sqrt(ge*ge+we*we)-be,1-w/be)},k=x.getDistanceFunction(d,function(he){if(y){var be=c.c2p(he.xStart),ge=c.c2p(he.xEnd);return p>=Math.min(be,ge)&&p<=Math.max(be,ge)?0:1/0}var we=Math.max(3,he.mrc||0),Ce=1-1/we,De=Math.abs(c.c2p(he.x)-p);return De<we?Ce*De/we:De-we+Ce},function(he){if(M){var be=h.c2p(he.yStart),ge=h.c2p(he.yEnd);return v>=Math.min(be,ge)&&v<=Math.max(be,ge)?0:1/0}var we=Math.max(3,he.mrc||0),Ce=1-1/we,De=Math.abs(h.c2p(he.y)-v);return De<we?Ce*De/we:De-we+Ce},A);if(x.getClosest(u,k,a),!1!==a.index){var C=u[a.index],P=c.c2p(C.x,!0),D=h.c2p(C.y,!0),F=C.mrc||1;a.index=C.i;var R=u[0].t.orientation,L=R&&(C.sNorm||C.s),I="h"===R?L:void 0!==C.orig_x?C.orig_x:C.x,B="v"===R?L:void 0!==C.orig_y?C.orig_y:C.y;return m.extendFlat(a,{color:b(s,C),x0:P-F,x1:P+F,xLabelVal:I,y0:D-F,y1:D+F,yLabelVal:B,spikeDistance:A(C),hovertemplate:s.hovertemplate}),o(C,s,a),T.getComponentMethod("errorbars","hoverInfo")(C,s,a),[a]}}if(-1!==f.indexOf("fills")&&s._polygons){var V,Z,Y,ee,J,$,se,j,G=s._polygons,W=[],ie=!1,q=1/0,te=-1/0,ne=1/0,le=-1/0;for(V=0;V<G.length;V++)(Y=G[V]).contains(g)&&(ie=!ie,W.push(Y),ne=Math.min(ne,Y.ymin),le=Math.max(le,Y.ymax));if(ie){var ue=((ne=Math.max(ne,0))+(le=Math.min(le,h._length)))/2;for(V=0;V<W.length;V++)for(ee=W[V].pts,Z=1;Z<ee.length;Z++)(se=ee[Z-1][1])>ue!=(j=ee[Z][1])>=ue&&($=ee[Z-1][0],j-se&&(J=$+(ee[Z][0]-$)*(ue-se)/(j-se),q=Math.min(q,J),te=Math.max(te,J)));q=Math.max(q,0),te=Math.min(te,c._length);var de=e.defaultLine;return e.opacity(s.fillcolor)?de=s.fillcolor:e.opacity((s.line||{}).color)&&(de=s.line.color),m.extendFlat(a,{distance:a.maxHoverDistance,x0:q,x1:te,y0:ue,y1:ue,color:de,hovertemplate:!1}),delete a.index,a.text=s.text&&!Array.isArray(s.text)?String(s.text):s.name,[a]}}}},{"../../components/color":366,"../../components/fx":406,"../../lib":503,"../../registry":638,"./get_trace_color":936}],938:[function(_,oe,ae){"use strict";var m=_("./subtypes");oe.exports={hasLines:m.hasLines,hasMarkers:m.hasMarkers,hasText:m.hasText,isBubble:m.isBubble,attributes:_("./attributes"),supplyDefaults:_("./defaults"),crossTraceDefaults:_("./cross_trace_defaults"),calc:_("./calc").calc,crossTraceCalc:_("./cross_trace_calc"),arraysToCalcdata:_("./arrays_to_calcdata"),plot:_("./plot"),colorbar:_("./marker_colorbar"),formatLabels:_("./format_labels"),style:_("./style").style,styleOnSelect:_("./style").styleOnSelect,hoverPoints:_("./hover"),selectPoints:_("./select"),animatable:!0,moduleType:"trace",name:"scatter",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","symbols","errorBarsOK","showLegend","scatter-like","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"./arrays_to_calcdata":925,"./attributes":926,"./calc":927,"./cross_trace_calc":931,"./cross_trace_defaults":932,"./defaults":933,"./format_labels":935,"./hover":937,"./marker_colorbar":944,"./plot":947,"./select":948,"./style":950,"./subtypes":951}],939:[function(_,oe,ae){"use strict";var m=_("../../lib").isArrayOrTypedArray,x=_("../../components/colorscale/helpers").hasColorscale,T=_("../../components/colorscale/defaults");oe.exports=function(b,e,o,a,l,i){var d=(b.marker||{}).color;l("line.color",o),x(b,"line")?T(b,e,a,l,{prefix:"line.",cLetter:"c"}):l("line.color",!m(d)&&d||o),l("line.width"),(i||{}).noDash||l("line.dash")}},{"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"../../lib":503}],940:[function(_,oe,ae){"use strict";var m=_("../../constants/numerical"),x=m.BADNUM,T=m.LOG_CLIP,b=T+.5,e=T-.5,o=_("../../lib"),a=o.segmentsIntersect,l=o.constrain,i=_("./constants");oe.exports=function(d,u){var s,c,h,p,v,g,f,w,y,M,A,k,C,P,D,F,R,L,I=u.xaxis,B=u.yaxis,V="log"===I.type,Z="log"===B.type,Y=I._length,ee=B._length,J=u.connectGaps,$=u.baseTolerance,Q=u.shape,se="linear"===Q,j=u.fill&&"none"!==u.fill,G=[],W=i.minTolerance,ie=d.length,q=new Array(ie),te=0;function ne(tt){var ct=d[tt];if(!ct)return!1;var xt=u.linearized?I.l2p(ct.x):I.c2p(ct.x),Ct=u.linearized?B.l2p(ct.y):B.c2p(ct.y);if(xt===x){if(V&&(xt=I.c2p(ct.x,!0)),xt===x)return!1;Z&&Ct===x&&(xt*=Math.abs(I._m*ee*(I._m>0?b:e)/(B._m*Y*(B._m>0?b:e)))),xt*=1e3}if(Ct===x){if(Z&&(Ct=B.c2p(ct.y,!0)),Ct===x)return!1;Ct*=1e3}return[xt,Ct]}function le(tt,ct,xt,Ct){var Ht=xt-tt,zt=Ct-ct,ht=.5-tt,ut=.5-ct,Ot=Ht*Ht+zt*zt,tn=Ht*ht+zt*ut;if(tn>0&&tn<Ot){var un=ht*zt-ut*Ht;if(un*un<Ot)return!0}}function ue(tt,ct){var xt=tt[0]/Y,Ct=tt[1]/ee,Ht=Math.max(0,-xt,xt-1,-Ct,Ct-1);return Ht&&void 0!==R&&le(xt,Ct,R,L)&&(Ht=0),Ht&&ct&&le(xt,Ct,ct[0]/Y,ct[1]/ee)&&(Ht=0),(1+i.toleranceGrowth*Ht)*$}function de(tt,ct){var xt=tt[0]-ct[0],Ct=tt[1]-ct[1];return Math.sqrt(xt*xt+Ct*Ct)}var he,be,ge,we,Ce,De,Se,Fe=i.maxScreensAway,ve=-Y*Fe,Te=Y*(1+Fe),Le=-ee*Fe,Ee=ee*(1+Fe),Pe=[[ve,Le,Te,Le],[Te,Le,Te,Ee],[Te,Ee,ve,Ee],[ve,Ee,ve,Le]];function je(tt){if(tt[0]<ve||tt[0]>Te||tt[1]<Le||tt[1]>Ee)return[l(tt[0],ve,Te),l(tt[1],Le,Ee)]}function Ge(tt,ct){return tt[0]===ct[0]&&(tt[0]===ve||tt[0]===Te)||tt[1]===ct[1]&&(tt[1]===Le||tt[1]===Ee)||void 0}function Ke(tt,ct,xt){return function(Ct,Ht){var zt=je(Ct),ht=je(Ht),ut=[];if(zt&&ht&&Ge(zt,ht))return ut;zt&&ut.push(zt),ht&&ut.push(ht);var Ot=2*o.constrain((Ct[tt]+Ht[tt])/2,ct,xt)-((zt||Ct)[tt]+(ht||Ht)[tt]);return Ot&&((zt&&ht?Ot>0==zt[tt]>ht[tt]?zt:ht:zt||ht)[tt]+=Ot),ut}}function lt(tt){var ct=tt[0],xt=tt[1],Ct=ct===q[te-1][0],Ht=xt===q[te-1][1];if(!Ct||!Ht)if(te>1){var zt=ct===q[te-2][0],ht=xt===q[te-2][1];Ct&&(ct===ve||ct===Te)&&zt?ht?te--:q[te-1]=tt:Ht&&(xt===Le||xt===Ee)&&ht?zt?te--:q[te-1]=tt:q[te++]=tt}else q[te++]=tt}function Ue(tt){q[te-1][0]!==tt[0]&&q[te-1][1]!==tt[1]&&lt([ge,we]),lt(tt),Ce=null,ge=we=0}function $e(tt){if(R=tt[0]/Y,L=tt[1]/ee,be=tt[1]<Le?Le:tt[1]>Ee?Ee:0,(he=tt[0]<ve?ve:tt[0]>Te?Te:0)||be){if(te)if(Ce){var ct=Se(Ce,tt);ct.length>1&&(Ue(ct[0]),q[te++]=ct[1])}else De=Se(q[te-1],tt)[0],q[te++]=De;else q[te++]=[he||tt[0],be||tt[1]];var xt=q[te-1];he&&be&&(xt[0]!==he||xt[1]!==be)?(Ce&&(ge!==he&&we!==be?lt(ge&&we?(zt=(Ht=tt)[0]-(Ct=Ce)[0],ht=(Ht[1]-Ct[1])/zt,(Ct[1]*Ht[0]-Ht[1]*Ct[0])/zt>0?[ht>0?ve:Te,Ee]:[ht>0?Te:ve,Le]):[ge||he,we||be]):ge&&we&&lt([ge,we])),lt([he,be])):ge-he&&we-be&&lt([he||ge,be||we]),Ce=tt,ge=he,we=be}else Ce&&Ue(Se(Ce,tt)[0]),q[te++]=tt;var Ct,Ht,zt,ht}for("linear"===Q||"spline"===Q?Se=function(tt,ct){for(var xt=[],Ct=0,Ht=0;Ht<4;Ht++){var zt=Pe[Ht],ht=a(tt[0],tt[1],ct[0],ct[1],zt[0],zt[1],zt[2],zt[3]);ht&&(!Ct||Math.abs(ht.x-xt[0][0])>1||Math.abs(ht.y-xt[0][1])>1)&&(ht=[ht.x,ht.y],Ct&&de(ht,tt)<de(xt[0],tt)?xt.unshift(ht):xt.push(ht),Ct++)}return xt}:"hv"===Q||"vh"===Q?Se=function(tt,ct){var xt=[],Ct=je(tt),Ht=je(ct);return Ct&&Ht&&Ge(Ct,Ht)||(Ct&&xt.push(Ct),Ht&&xt.push(Ht)),xt}:"hvh"===Q?Se=Ke(0,ve,Te):"vhv"===Q&&(Se=Ke(1,Le,Ee)),s=0;s<ie;s++)if(c=ne(s)){for(te=0,Ce=null,$e(c),s++;s<ie;s++){if(!(p=ne(s))){if(J)continue;break}if(se&&u.simplify){var et=ne(s+1);if(M=de(p,c),j&&(0===te||te===ie-1)||!(M<ue(p,et)*W)){for(w=[(p[0]-c[0])/M,(p[1]-c[1])/M],v=c,A=M,k=P=D=0,f=!1,h=p,s++;s<d.length;s++){if(g=et,et=ne(s+1),!g){if(J)continue;break}if(F=(y=[g[0]-c[0],g[1]-c[1]])[0]*w[1]-y[1]*w[0],P=Math.min(P,F),(D=Math.max(D,F))-P>ue(g,et))break;h=g,(C=y[0]*w[0]+y[1]*w[1])>A?(A=C,p=g,f=!1):C<k&&(k=C,v=g,f=!0)}if(f?($e(p),h!==v&&$e(v)):(v!==c&&$e(v),h!==p&&$e(p)),$e(h),s>=d.length||!g)break;$e(g),c=g}}else $e(p)}Ce&&lt([ge||Ce[0],we||Ce[1]]),G.push(q.slice(0,te))}return G}},{"../../constants/numerical":479,"../../lib":503,"./constants":930}],941:[function(_,oe,ae){"use strict";oe.exports=function(m,x,T){"spline"===T("line.shape")&&T("line.smoothing")}},{}],942:[function(_,oe,ae){"use strict";var m={tonextx:1,tonexty:1,tonext:1};oe.exports=function(x,T,b){var e,o,a,l,i,d={},u=!1,s=-1,c=0,h=-1;for(o=0;o<b.length;o++)(a=(e=b[o][0].trace).stackgroup||"")?a in d?i=d[a]:(i=d[a]=c,c++):e.fill in m&&h>=0?i=h:(i=h=c,c++),i<s&&(u=!0),e._groupIndex=s=i;var p=b.slice();u&&p.sort(function(g,f){var w=g[0].trace,y=f[0].trace;return w._groupIndex-y._groupIndex||w.index-y.index});var v={};for(o=0;o<p.length;o++)a=(e=p[o][0].trace).stackgroup||"",!0===e.visible?(e._nexttrace=null,e.fill in m&&(e._prevtrace=(l=v[a])||null,l&&(l._nexttrace=e)),e._ownfill=e.fill&&("tozero"===e.fill.substr(0,6)||"toself"===e.fill||"to"===e.fill.substr(0,2)&&!e._prevtrace),v[a]=e):e._prevtrace=e._nexttrace=e._ownfill=null;return p}},{}],943:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric");oe.exports=function(x,T){T||(T=2);var b=x.marker,e=b.sizeref||1,o=b.sizemin||0,a="area"===b.sizemode?function(l){return Math.sqrt(l/e)}:function(l){return l/e};return function(l){var i=a(l/T);return m(i)&&i>0?Math.max(i,o):0}}},{"fast-isnumeric":190}],944:[function(_,oe,ae){"use strict";oe.exports={container:"marker",min:"cmin",max:"cmax"}},{}],945:[function(_,oe,ae){"use strict";var m=_("../../components/color"),x=_("../../components/colorscale/helpers").hasColorscale,T=_("../../components/colorscale/defaults"),b=_("./subtypes");oe.exports=function(e,o,a,l,i,d){var u=b.isBubble(e),s=(e.line||{}).color;d=d||{},s&&(a=s),i("marker.symbol"),i("marker.opacity",u?.7:1),i("marker.size"),i("marker.color",a),x(e,"marker")&&T(e,o,l,i,{prefix:"marker.",cLetter:"c"}),d.noSelect||(i("selected.marker.color"),i("unselected.marker.color"),i("selected.marker.size"),i("unselected.marker.size")),d.noLine||(i("marker.line.color",s&&!Array.isArray(s)&&o.marker.color!==s?s:u?m.background:m.defaultLine),x(e,"marker.line")&&T(e,o,l,i,{prefix:"marker.line.",cLetter:"c"}),i("marker.line.width",u?1:0)),u&&(i("marker.sizeref"),i("marker.sizemin"),i("marker.sizemode")),d.gradient&&"none"!==i("marker.gradient.type")&&i("marker.gradient.color")}},{"../../components/color":366,"../../components/colorscale/defaults":376,"../../components/colorscale/helpers":377,"./subtypes":951}],946:[function(_,oe,ae){"use strict";var m=_("../../lib").dateTick0,x=_("../../constants/numerical").ONEWEEK;function T(b,e){return m(e,b%x==0?1:0)}oe.exports=function(b,e,o,a,l){if(l||(l={x:!0,y:!0}),l.x){var i=a("xperiod");i&&(a("xperiod0",T(i,e.xcalendar)),a("xperiodalignment"))}if(l.y){var d=a("yperiod");d&&(a("yperiod0",T(d,e.ycalendar)),a("yperiodalignment"))}}},{"../../constants/numerical":479,"../../lib":503}],947:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../registry"),T=_("../../lib"),b=T.ensureSingle,e=T.identity,o=_("../../components/drawing"),a=_("./subtypes"),l=_("./line_points"),i=_("./link_traces"),d=_("../../lib/polygon").tester;function u(s,c,h,p,v,g,f){var w;!function(Te,Le,Ee,Pe,je){var Ge=Ee.xaxis,Ke=Ee.yaxis,lt=m.extent(T.simpleMap(Ge.range,Ge.r2c)),Ue=m.extent(T.simpleMap(Ke.range,Ke.r2c)),$e=Pe[0].trace;if(a.hasMarkers($e)){var et=$e.marker.maxdisplayed;if(0!==et){var tt=Pe.filter(function(Ht){return Ht.x>=lt[0]&&Ht.x<=lt[1]&&Ht.y>=Ue[0]&&Ht.y<=Ue[1]}),ct=Math.ceil(tt.length/et),xt=0;je.forEach(function(Ht,zt){var ht=Ht[0].trace;a.hasMarkers(ht)&&ht.marker.maxdisplayed>0&&zt<Le&&xt++});var Ct=Math.round(xt*ct/3+Math.floor(xt/3)*ct/7.1);Pe.forEach(function(Ht){delete Ht.vis}),tt.forEach(function(Ht,zt){0===Math.round((zt+Ct)%ct)&&(Ht.vis=!0)})}}}(0,c,h,p,v);var y=!!f&&f.duration>0;function M(Te){return y?Te.transition():Te}var A=h.xaxis,k=h.yaxis,C=p[0].trace,P=C.line,D=m.select(g),F=b(D,"g","errorbars"),R=b(D,"g","lines"),L=b(D,"g","points"),I=b(D,"g","text");if(x.getComponentMethod("errorbars","plot")(s,F,h,f),!0===C.visible){var B,V;M(D).style("opacity",C.opacity);var Z=C.fill.charAt(C.fill.length-1);"x"!==Z&&"y"!==Z&&(Z=""),p[0][h.isRangePlot?"nodeRangePlot3":"node3"]=D;var Y,ee,J="",$=[],Q=C._prevtrace;Q&&(J=Q._prevRevpath||"",V=Q._nextFill,$=Q._polygons);var se,j,G,W,ie,q,te,ne="",le="",ue=[],de=T.noop;if(B=C._ownFill,a.hasLines(C)||"none"!==C.fill){for(V&&V.datum(p),-1!==["hv","vh","hvh","vhv"].indexOf(P.shape)?(se=o.steps(P.shape),j=o.steps(P.shape.split("").reverse().join(""))):se=j="spline"===P.shape?function(Te){var Le=Te[Te.length-1];return Te.length>1&&Te[0][0]===Le[0]&&Te[0][1]===Le[1]?o.smoothclosed(Te.slice(1),P.smoothing):o.smoothopen(Te,P.smoothing)}:function(Te){return"M"+Te.join("L")},G=function(Te){return j(Te.reverse())},ue=l(p,{xaxis:A,yaxis:k,connectGaps:C.connectgaps,baseTolerance:Math.max(P.width||1,3)/4,shape:P.shape,simplify:P.simplify,fill:C.fill}),te=C._polygons=new Array(ue.length),w=0;w<ue.length;w++)C._polygons[w]=d(ue[w]);ue.length&&(W=ue[0][0],q=(ie=ue[ue.length-1])[ie.length-1]),de=function(Te){return function(Le){if(Y=se(Le),ee=G(Le),ne?Z?(ne+="L"+Y.substr(1),le=ee+"L"+le.substr(1)):(ne+="Z"+Y,le=ee+"Z"+le):(ne=Y,le=ee),a.hasLines(C)&&Le.length>1){var Ee=m.select(this);if(Ee.datum(p),Te)M(Ee.style("opacity",0).attr("d",Y).call(o.lineGroupStyle)).style("opacity",1);else{var Pe=M(Ee);Pe.attr("d",Y),o.singleLineStyle(p,Pe)}}}}}var he=R.selectAll(".js-line").data(ue);M(he.exit()).style("opacity",0).remove(),he.each(de(!1)),he.enter().append("path").classed("js-line",!0).style("vector-effect","non-scaling-stroke").call(o.lineGroupStyle).each(de(!0)),o.setClipUrl(he,h.layerClipId,s),ue.length?(B?(B.datum(p),W&&q&&(Z?("y"===Z?W[1]=q[1]=k.c2p(0,!0):"x"===Z&&(W[0]=q[0]=A.c2p(0,!0)),M(B).attr("d","M"+q+"L"+W+"L"+ne.substr(1)).call(o.singleFillStyle)):M(B).attr("d",ne+"Z").call(o.singleFillStyle))):V&&("tonext"===C.fill.substr(0,6)&&ne&&J?("tonext"===C.fill?M(V).attr("d",ne+"Z"+J+"Z").call(o.singleFillStyle):M(V).attr("d",ne+"L"+J.substr(1)+"Z").call(o.singleFillStyle),C._polygons=C._polygons.concat($)):(ge(V),C._polygons=null)),C._prevRevpath=le,C._prevPolygons=te):(B?ge(B):V&&ge(V),C._polygons=C._prevRevpath=C._prevPolygons=null),L.datum(p),I.datum(p),function(Te,Le,Ee){var Pe,je=Ee[0].trace,Ge=a.hasMarkers(je),Ke=a.hasText(je),lt=function Fe(Te){if(Te.ids)return Se}(je),Ue=ve,$e=ve;if(Ge||Ke){var et=e,tt=je.stackgroup,ct=tt&&"infer zero"===s._fullLayout._scatterStackOpts[A._id+k._id][tt].stackgaps;je.marker.maxdisplayed||je._needsCull?et=ct?Ce:we:tt&&!ct&&(et=De),Ge&&(Ue=et),Ke&&($e=et)}var xt,Ct=(Pe=Te.selectAll("path.point").data(Ue,lt)).enter().append("path").classed("point",!0);y&&Ct.call(o.pointStyle,je,s).call(o.translatePoints,A,k).style("opacity",0).transition().style("opacity",1),Pe.order(),Ge&&(xt=o.makePointStyleFns(je)),Pe.each(function(Ht){var zt=m.select(this),ht=M(zt);o.translatePoint(Ht,ht,A,k)?(o.singlePointStyle(Ht,ht,je,xt,s),h.layerClipId&&o.hideOutsideRangePoint(Ht,ht,A,k,je.xcalendar,je.ycalendar),je.customdata&&zt.classed("plotly-customdata",null!=Ht.data)):ht.remove()}),y?Pe.exit().transition().style("opacity",0).remove():Pe.exit().remove(),(Pe=Le.selectAll("g").data($e,lt)).enter().append("g").classed("textpoint",!0).append("text"),Pe.order(),Pe.each(function(Ht){var zt=m.select(this),ht=M(zt.select("text"));o.translatePoint(Ht,ht,A,k)?h.layerClipId&&o.hideOutsideRangePoint(Ht,zt,A,k,je.xcalendar,je.ycalendar):zt.remove()}),Pe.selectAll("text").call(o.textPointStyle,je,s).each(function(Ht){var zt=A.c2p(Ht.x),ht=k.c2p(Ht.y);m.select(this).selectAll("tspan.line").each(function(){M(m.select(this)).attr({x:zt,y:ht})})}),Pe.exit().remove()}(L,I,p);var be=!1===C.cliponaxis?null:h.layerClipId;o.setClipUrl(L,be,s),o.setClipUrl(I,be,s)}function ge(Te){M(Te).attr("d","M0,0Z")}function we(Te){return Te.filter(function(Le){return!Le.gap&&Le.vis})}function Ce(Te){return Te.filter(function(Le){return Le.vis})}function De(Te){return Te.filter(function(Le){return!Le.gap})}function Se(Te){return Te.id}function ve(){return!1}}oe.exports=function(s,c,h,p,v,g){var f,w,k,P,y=!v,M=!!v&&v.duration>0,A=i(s,c,h);(f=p.selectAll("g.trace").data(A,function(k){return k[0].trace.uid})).enter().append("g").attr("class",function(k){return"trace scatter trace"+k[0].trace.uid}).style("stroke-miterlimit",2),f.order(),k=s,P=c,f.each(function(D){var F=b(m.select(this),"g","fills");o.setClipUrl(F,P.layerClipId,k);var R=D[0].trace,L=[];R._ownfill&&L.push("_ownFill"),R._nexttrace&&L.push("_nextFill");var I=F.selectAll("g").data(L,e);I.enter().append("g"),I.exit().each(function(B){R[B]=null}).remove(),I.order().each(function(B){R[B]=b(m.select(this),"path","js-fill")})}),M?(g&&(w=g()),m.transition().duration(v.duration).ease(v.easing).each("end",function(){w&&w()}).each("interrupt",function(){w&&w()}).each(function(){p.selectAll("g.trace").each(function(k,C){u(s,C,c,k,A,this,v)})})):f.each(function(k,C){u(s,C,c,k,A,this,v)}),y&&f.exit().remove(),p.selectAll("path:not([d])").remove()}},{"../../components/drawing":388,"../../lib":503,"../../lib/polygon":515,"../../registry":638,"./line_points":940,"./link_traces":942,"./subtypes":951,"@plotly/d3":58}],948:[function(_,oe,ae){"use strict";var m=_("./subtypes");oe.exports=function(x,T){var b,e,o,a,l=x.cd,i=x.xaxis,d=x.yaxis,u=[],s=l[0].trace;if(!m.hasMarkers(s)&&!m.hasText(s))return[];if(!1===T)for(b=0;b<l.length;b++)l[b].selected=0;else for(b=0;b<l.length;b++)o=i.c2p((e=l[b]).x),a=d.c2p(e.y),null!==e.i&&T.contains([o,a],!1,b,x)?(u.push({pointNumber:e.i,x:i.c2d(e.x),y:d.c2d(e.y)}),e.selected=1):e.selected=0;return u}},{"./subtypes":951}],949:[function(_,oe,ae){"use strict";var m=["orientation","groupnorm","stackgaps"];oe.exports=function(x,T,b,e){var o=b._scatterStackOpts,a=e("stackgroup");if(a){var l=T.xaxis+T.yaxis,i=o[l];i||(i=o[l]={});var d=i[a],u=!1;d?d.traces.push(T):(d=i[a]={traceIndices:[],traces:[T]},u=!0);for(var s={orientation:T.x&&!T.y?"h":"v"},c=0;c<m.length;c++){var h=m[c],p=h+"Found";if(!d[p]){var v=void 0!==x[h],g="orientation"===h;if((v||u)&&(d[h]=e(h,s[h]),g&&(d.fillDflt="h"===d[h]?"tonextx":"tonexty"),v&&(d[p]=!0,!u&&(delete d.traces[0][h],g))))for(var f=0;f<d.traces.length-1;f++){var w=d.traces[f];w._input.fill!==w.fill&&(w.fill=d.fillDflt)}}}return d}}},{}],950:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../components/drawing"),T=_("../../registry");function b(o,a,l){x.pointStyle(o.selectAll("path.point"),a,l)}function e(o,a,l){x.textPointStyle(o.selectAll("text"),a,l)}oe.exports={style:function(o){var a=m.select(o).selectAll("g.trace.scatter");a.style("opacity",function(l){return l[0].trace.opacity}),a.selectAll("g.points").each(function(l){b(m.select(this),l.trace||l[0].trace,o)}),a.selectAll("g.text").each(function(l){e(m.select(this),l.trace||l[0].trace,o)}),a.selectAll("g.trace path.js-line").call(x.lineGroupStyle),a.selectAll("g.trace path.js-fill").call(x.fillGroupStyle),T.getComponentMethod("errorbars","style")(a)},stylePoints:b,styleText:e,styleOnSelect:function(o,a,l){var i=a[0].trace;i.selectedpoints?(x.selectedPointStyle(l.selectAll("path.point"),i),x.selectedTextStyle(l.selectAll("text"),i)):(b(l,i,o),e(l,i,o))}}},{"../../components/drawing":388,"../../registry":638,"@plotly/d3":58}],951:[function(_,oe,ae){"use strict";var m=_("../../lib");oe.exports={hasLines:function(x){return x.visible&&x.mode&&-1!==x.mode.indexOf("lines")},hasMarkers:function(x){return x.visible&&(x.mode&&-1!==x.mode.indexOf("markers")||"splom"===x.type)},hasText:function(x){return x.visible&&x.mode&&-1!==x.mode.indexOf("text")},isBubble:function(x){return m.isPlainObject(x.marker)&&m.isArrayOrTypedArray(x.marker.size)}}},{"../../lib":503}],952:[function(_,oe,ae){"use strict";var m=_("../../lib");oe.exports=function(x,T,b,e,o){o=o||{},e("textposition"),m.coerceFont(e,"textfont",b.font),o.noSelect||(e("selected.textfont.color"),e("unselected.textfont.color"))}},{"../../lib":503}],953:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../registry");oe.exports=function(T,b,e,o){var a,l=o("x"),i=o("y");if(x.getComponentMethod("calendars","handleTraceDefaults")(T,b,["x","y"],e),l){var d=m.minRowLength(l);i?a=Math.min(d,m.minRowLength(i)):(a=d,o("y0"),o("dy"))}else{if(!i)return 0;a=m.minRowLength(i),o("x0"),o("dx")}return b._length=a,a}},{"../../lib":503,"../../registry":638}],954:[function(_,oe,ae){"use strict";var m=_("../scatter/attributes"),x=_("../../components/colorscale/attributes"),T=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=_("../../plots/template_attributes").hovertemplateAttrs,e=_("../../plots/template_attributes").texttemplateAttrs,o=_("../../plots/attributes"),a=_("../../constants/gl3d_dashes"),l=_("../../constants/gl3d_markers"),i=_("../../lib/extend").extendFlat,d=_("../../plot_api/edit_types").overrideAll,u=_("../../lib/sort_object_keys"),c=m.marker,h=c.line,p=i({width:m.line.width,dash:{valType:"enumerated",values:u(a),dflt:"solid"}},x("line")),v=oe.exports=d({x:m.x,y:m.y,z:{valType:"data_array"},text:i({},m.text,{}),texttemplate:e({},{}),hovertext:i({},m.hovertext,{}),hovertemplate:b(),xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z"),mode:i({},m.mode,{dflt:"lines+markers"}),surfaceaxis:{valType:"enumerated",values:[-1,0,1,2],dflt:-1},surfacecolor:{valType:"color"},projection:{x:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},y:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}},z:{show:{valType:"boolean",dflt:!1},opacity:{valType:"number",min:0,max:1,dflt:1},scale:{valType:"number",min:0,max:10,dflt:2/3}}},connectgaps:m.connectgaps,line:p,marker:i({symbol:{valType:"enumerated",values:u(l),dflt:"circle",arrayOk:!0},size:i({},c.size,{dflt:8}),sizeref:c.sizeref,sizemin:c.sizemin,sizemode:c.sizemode,opacity:i({},c.opacity,{arrayOk:!1}),colorbar:c.colorbar,line:i({width:i({},h.width,{arrayOk:!1})},x("marker.line"))},x("marker")),textposition:i({},m.textposition,{dflt:"top center"}),textfont:{color:m.textfont.color,size:m.textfont.size,family:i({},m.textfont.family,{arrayOk:!1})},opacity:o.opacity,hoverinfo:i({},o.hoverinfo)},"calc","nested");v.x.editType=v.y.editType=v.z.editType="calc+clearAxisTypes"},{"../../components/colorscale/attributes":373,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../scatter/attributes":926}],955:[function(_,oe,ae){"use strict";var m=_("../scatter/arrays_to_calcdata"),x=_("../scatter/colorscale_calc");oe.exports=function(T,b){var e=[{x:!1,y:!1,trace:b,t:{}}];return m(e,b),x(T,b),e}},{"../scatter/arrays_to_calcdata":925,"../scatter/colorscale_calc":929}],956:[function(_,oe,ae){"use strict";var m=_("../../registry");function x(T,b,e,o){if(!b||!b.visible)return null;for(var a=m.getComponentMethod("errorbars","makeComputeError")(b),l=new Array(T.length),i=0;i<T.length;i++){var d=a(+T[i],i);if("log"===o.type){var u=o.c2l(T[i]),s=T[i]-d[0],c=T[i]+d[1];if(l[i]=[(o.c2l(s,!0)-u)*e,(o.c2l(c,!0)-u)*e],s>0){var h=o.c2l(s);o._lowerLogErrorBound||(o._lowerLogErrorBound=h),o._lowerErrorBound=Math.min(o._lowerLogErrorBound,h)}}else l[i]=[-d[0]*e,d[1]*e]}return l}oe.exports=function(T,b,e){var o=[x(T.x,T.error_x,b[0],e.xaxis),x(T.y,T.error_y,b[1],e.yaxis),x(T.z,T.error_z,b[2],e.zaxis)],a=function(c){for(var h=0;h<c.length;h++)if(c[h])return c[h].length;return 0}(o);if(0===a)return null;for(var l=new Array(a),i=0;i<a;i++){for(var d=[[0,0,0],[0,0,0]],u=0;u<3;u++)if(o[u])for(var s=0;s<2;s++)d[s][u]=o[u][i][s];l[i]=d}return l}},{"../../registry":638}],957:[function(_,oe,ae){"use strict";var m=_("../../../stackgl_modules").gl_line3d,x=_("../../../stackgl_modules").gl_scatter3d,T=_("../../../stackgl_modules").gl_error3d,b=_("../../../stackgl_modules").gl_mesh3d,e=_("../../../stackgl_modules").delaunay_triangulate,o=_("../../lib"),a=_("../../lib/str2rgbarray"),l=_("../../lib/gl_format_color").formatColor,i=_("../scatter/make_bubble_size_func"),d=_("../../constants/gl3d_dashes"),u=_("../../constants/gl3d_markers"),s=_("../../plots/cartesian/axes"),c=_("../../components/fx/helpers").appendArrayPointValue,h=_("./calc_errors");function p(P,D){this.scene=P,this.uid=D,this.linePlot=null,this.scatterPlot=null,this.errorBars=null,this.textMarkers=null,this.delaunayMesh=null,this.color=null,this.mode="",this.dataPoints=[],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.textLabels=null,this.data=null}var v=p.prototype;function g(P){return null==P?0:P.indexOf("left")>-1?-1:P.indexOf("right")>-1?1:0}function f(P){return null==P?0:P.indexOf("top")>-1?-1:P.indexOf("bottom")>-1?1:0}function w(P,D){return D(4*P)}function y(P){return u[P]}function M(P,D,F,R,L){var I=null;if(o.isArrayOrTypedArray(P)){I=[];for(var B=0;B<D;B++)I[B]=void 0===P[B]?R:F(P[B],L)}else I=F(P,o.identity);return I}function k(P){if(o.isArrayOrTypedArray(P)){var D=P[0];return o.isArrayOrTypedArray(D)&&(P=D),"rgb("+P.slice(0,3).map(function(F){return Math.round(255*F)})+")"}return null}function C(P){return o.isArrayOrTypedArray(P)?4===P.length&&"number"==typeof P[0]?k(P):P.map(k):null}v.handlePick=function(P){if(P.object&&(P.object===this.linePlot||P.object===this.delaunayMesh||P.object===this.textMarkers||P.object===this.scatterPlot)){var D=P.index=P.data.index;return P.object.highlight&&P.object.highlight(null),this.scatterPlot&&(P.object=this.scatterPlot,this.scatterPlot.highlight(P.data)),P.textLabel="",this.textLabels&&(Array.isArray(this.textLabels)?(this.textLabels[D]||0===this.textLabels[D])&&(P.textLabel=this.textLabels[D]):P.textLabel=this.textLabels),P.traceCoordinate=[this.data.x[D],this.data.y[D],this.data.z[D]],!0}},v.update=function(P){var D,F,R,L,I=this.scene.glplot.gl,B=d.solid;this.data=P;var V=function A(P,D){var F,R,L,I,B,V,Z=[],Y=P.fullSceneLayout,ee=P.dataScale,J=Y.xaxis,$=Y.yaxis,Q=Y.zaxis,se=D.marker,j=D.line,G=D.x||[],W=D.y||[],ie=D.z||[],q=G.length,te=D.xcalendar,ne=D.ycalendar,le=D.zcalendar;for(B=0;B<q;B++)F=J.d2l(G[B],0,te)*ee[0],R=$.d2l(W[B],0,ne)*ee[1],L=Q.d2l(ie[B],0,le)*ee[2],Z[B]=[F,R,L];if(Array.isArray(D.text))V=D.text;else if(void 0!==D.text)for(V=new Array(q),B=0;B<q;B++)V[B]=D.text;function ue(Pe,je){var Ge=Y[Pe];return s.tickText(Ge,Ge.d2l(je),!0).text}var de=D.texttemplate;if(de){var he=P.fullLayout._d3locale,be=Array.isArray(de),ge=be?Math.min(de.length,q):q,we=be?function(Pe){return de[Pe]}:function(){return de};for(V=new Array(ge),B=0;B<ge;B++){var Ce={x:G[B],y:W[B],z:ie[B]},De={xLabel:ue("xaxis",G[B]),yLabel:ue("yaxis",W[B]),zLabel:ue("zaxis",ie[B])},Se={};c(Se,D,B);var Fe=D._meta||{};V[B]=o.texttemplateString(we(B),De,he,Se,Ce,Fe)}}if(I={position:Z,mode:D.mode,text:V},"line"in D&&(I.lineColor=l(j,1,q),I.lineWidth=j.width,I.lineDashes=j.dash),"marker"in D){var ve=i(D);I.scatterColor=l(se,1,q),I.scatterSize=M(se.size,q,w,20,ve),I.scatterMarker=M(se.symbol,q,y,"\u25cf"),I.scatterLineWidth=se.line.width,I.scatterLineColor=l(se.line,1,q),I.scatterAngle=0}"textposition"in D&&(I.textOffset=function(Pe){var je=[0,0];if(Array.isArray(Pe))for(var Ge=0;Ge<Pe.length;Ge++)je[Ge]=[0,0],Pe[Ge]&&(je[Ge][0]=g(Pe[Ge]),je[Ge][1]=f(Pe[Ge]));else je[0]=g(Pe),je[1]=f(Pe);return je}(D.textposition),I.textColor=l(D.textfont,1,q),I.textSize=M(D.textfont.size,q,o.identity,12),I.textFont=D.textfont.family,I.textAngle=0);var Te=["x","y","z"];for(I.project=[!1,!1,!1],I.projectScale=[1,1,1],I.projectOpacity=[1,1,1],B=0;B<3;++B){var Le=D.projection[Te[B]];(I.project[B]=Le.show)&&(I.projectOpacity[B]=Le.opacity,I.projectScale[B]=Le.scale)}I.errorBounds=h(D,ee,Y);var Ee=function(Pe){for(var je=[0,0,0],Ge=[[0,0,0],[0,0,0],[0,0,0]],Ke=[1,1,1],lt=0;lt<3;lt++){var Ue=Pe[lt];Ue&&!1!==Ue.copy_zstyle&&!1!==Pe[2].visible&&(Ue=Pe[2]),Ue&&Ue.visible&&(je[lt]=Ue.width/2,Ge[lt]=a(Ue.color),Ke[lt]=Ue.thickness)}return{capSize:je,color:Ge,lineWidth:Ke}}([D.error_x,D.error_y,D.error_z]);return I.errorColor=Ee.color,I.errorLineWidth=Ee.lineWidth,I.errorCapSize=Ee.capSize,I.delaunayAxis=D.surfaceaxis,I.delaunayColor=a(D.surfacecolor),I}(this.scene,P);"mode"in V&&(this.mode=V.mode),"lineDashes"in V&&V.lineDashes in d&&(B=d[V.lineDashes]),this.color=C(V.scatterColor)||C(V.lineColor),this.dataPoints=V.position,D={gl:this.scene.glplot.gl,position:V.position,color:V.lineColor,lineWidth:V.lineWidth||1,dashes:B[0],dashScale:B[1],opacity:P.opacity,connectGaps:P.connectgaps},-1!==this.mode.indexOf("lines")?this.linePlot?this.linePlot.update(D):(this.linePlot=m(D),this.linePlot._trace=this,this.scene.glplot.add(this.linePlot)):this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose(),this.linePlot=null);var Z=P.opacity;if(P.marker&&P.marker.opacity&&(Z*=P.marker.opacity),F={gl:this.scene.glplot.gl,position:V.position,color:V.scatterColor,size:V.scatterSize,glyph:V.scatterMarker,opacity:Z,orthographic:!0,lineWidth:V.scatterLineWidth,lineColor:V.scatterLineColor,project:V.project,projectScale:V.projectScale,projectOpacity:V.projectOpacity},-1!==this.mode.indexOf("markers")?this.scatterPlot?this.scatterPlot.update(F):(this.scatterPlot=x(F),this.scatterPlot._trace=this,this.scatterPlot.highlightScale=1,this.scene.glplot.add(this.scatterPlot)):this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose(),this.scatterPlot=null),L={gl:this.scene.glplot.gl,position:V.position,glyph:V.text,color:V.textColor,size:V.textSize,angle:V.textAngle,alignment:V.textOffset,font:V.textFont,orthographic:!0,lineWidth:0,project:!1,opacity:P.opacity},this.textLabels=P.hovertext||P.text,-1!==this.mode.indexOf("text")?this.textMarkers?this.textMarkers.update(L):(this.textMarkers=x(L),this.textMarkers._trace=this,this.textMarkers.highlightScale=1,this.scene.glplot.add(this.textMarkers)):this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose(),this.textMarkers=null),R={gl:this.scene.glplot.gl,position:V.position,color:V.errorColor,error:V.errorBounds,lineWidth:V.errorLineWidth,capSize:V.errorCapSize,opacity:P.opacity},this.errorBars?V.errorBounds?this.errorBars.update(R):(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose(),this.errorBars=null):V.errorBounds&&(this.errorBars=T(R),this.errorBars._trace=this,this.scene.glplot.add(this.errorBars)),V.delaunayAxis>=0){var Y=function(ee,J,$){var Q,se=($+1)%3,j=($+2)%3,G=[],W=[];for(Q=0;Q<ee.length;++Q){var ie=ee[Q];!isNaN(ie[se])&&isFinite(ie[se])&&!isNaN(ie[j])&&isFinite(ie[j])&&(G.push([ie[se],ie[j]]),W.push(Q))}var q=e(G);for(Q=0;Q<q.length;++Q)for(var te=q[Q],ne=0;ne<te.length;++ne)te[ne]=W[te[ne]];return{positions:ee,cells:q,meshColor:J}}(V.position,V.delaunayColor,V.delaunayAxis);Y.opacity=P.opacity,this.delaunayMesh?this.delaunayMesh.update(Y):(Y.gl=I,this.delaunayMesh=b(Y),this.delaunayMesh._trace=this,this.scene.glplot.add(this.delaunayMesh))}else this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose(),this.delaunayMesh=null)},v.dispose=function(){this.linePlot&&(this.scene.glplot.remove(this.linePlot),this.linePlot.dispose()),this.scatterPlot&&(this.scene.glplot.remove(this.scatterPlot),this.scatterPlot.dispose()),this.errorBars&&(this.scene.glplot.remove(this.errorBars),this.errorBars.dispose()),this.textMarkers&&(this.scene.glplot.remove(this.textMarkers),this.textMarkers.dispose()),this.delaunayMesh&&(this.scene.glplot.remove(this.delaunayMesh),this.delaunayMesh.dispose())},oe.exports=function(P,D){var F=new p(P,D.uid);return F.update(D),F}},{"../../../stackgl_modules":1120,"../../components/fx/helpers":402,"../../constants/gl3d_dashes":476,"../../constants/gl3d_markers":477,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/cartesian/axes":554,"../scatter/make_bubble_size_func":943,"./calc_errors":956}],958:[function(_,oe,ae){"use strict";var m=_("../../registry"),x=_("../../lib"),T=_("../scatter/subtypes"),b=_("../scatter/marker_defaults"),e=_("../scatter/line_defaults"),o=_("../scatter/text_defaults"),a=_("./attributes");oe.exports=function(l,i,d,u){function s(w,y){return x.coerce(l,i,a,w,y)}if(w=l,y=i,A=u,k=0,C=(M=s)("x"),P=M("y"),D=M("z"),m.getComponentMethod("calendars","handleTraceDefaults")(w,y,["x","y","z"],A),C&&P&&D&&(k=Math.min(C.length,P.length,D.length),y._length=y._xlength=y._ylength=y._zlength=k),k){s("text"),s("hovertext"),s("hovertemplate"),s("xhoverformat"),s("yhoverformat"),s("zhoverformat"),s("mode"),T.hasLines(i)&&(s("connectgaps"),e(l,i,d,u,s)),T.hasMarkers(i)&&b(l,i,d,u,s,{noSelect:!0}),T.hasText(i)&&(s("texttemplate"),o(l,i,u,s,{noSelect:!0}));var c=(i.line||{}).color,h=(i.marker||{}).color;s("surfaceaxis")>=0&&s("surfacecolor",c||h);for(var p=["x","y","z"],v=0;v<3;++v){var g="projection."+p[v];s(g+".show")&&(s(g+".opacity"),s(g+".scale"))}var f=m.getComponentMethod("errorbars","supplyDefaults");f(l,i,c||h||d,{axis:"z"}),f(l,i,c||h||d,{axis:"y",inherit:"z"}),f(l,i,c||h||d,{axis:"x",inherit:"z"})}else i.visible=!1;var w,y,M,A,k,C,P,D}},{"../../lib":503,"../../registry":638,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":954}],959:[function(_,oe,ae){"use strict";oe.exports={plot:_("./convert"),attributes:_("./attributes"),markerSymbols:_("../../constants/gl3d_markers"),supplyDefaults:_("./defaults"),colorbar:[{container:"marker",min:"cmin",max:"cmax"},{container:"line",min:"cmin",max:"cmax"}],calc:_("./calc"),moduleType:"trace",name:"scatter3d",basePlotModule:_("../../plots/gl3d"),categories:["gl3d","symbols","showLegend","scatter-like"],meta:{}}},{"../../constants/gl3d_markers":477,"../../plots/gl3d":598,"./attributes":954,"./calc":955,"./convert":957,"./defaults":958}],960:[function(_,oe,ae){"use strict";var m=_("../scatter/attributes"),x=_("../../plots/attributes"),T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../../plots/template_attributes").texttemplateAttrs,e=_("../../components/colorscale/attributes"),o=_("../../lib/extend").extendFlat,a=m.marker,l=m.line,i=a.line;oe.exports={carpet:{valType:"string",editType:"calc"},a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},mode:o({},m.mode,{dflt:"markers"}),text:o({},m.text,{}),texttemplate:b({editType:"plot"},{keys:["a","b","text"]}),hovertext:o({},m.hovertext,{}),line:{color:l.color,width:l.width,dash:l.dash,shape:o({},l.shape,{values:["linear","spline"]}),smoothing:l.smoothing,editType:"calc"},connectgaps:m.connectgaps,fill:o({},m.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:m.fillcolor,marker:o({symbol:a.symbol,opacity:a.opacity,maxdisplayed:a.maxdisplayed,size:a.size,sizeref:a.sizeref,sizemin:a.sizemin,sizemode:a.sizemode,line:o({width:i.width,editType:"calc"},e("marker.line")),gradient:a.gradient,editType:"calc"},e("marker")),textfont:m.textfont,textposition:m.textposition,selected:m.selected,unselected:m.unselected,hoverinfo:o({},x.hoverinfo,{flags:["a","b","text","name"]}),hoveron:m.hoveron,hovertemplate:T()}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],961:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../scatter/colorscale_calc"),T=_("../scatter/arrays_to_calcdata"),b=_("../scatter/calc_selection"),e=_("../scatter/calc").calcMarkerSize,o=_("../carpet/lookup_carpetid");oe.exports=function(a,l){var i=l._carpetTrace=o(a,l);if(i&&i.visible&&"legendonly"!==i.visible){var d;l.xaxis=i.xaxis,l.yaxis=i.yaxis;var u,s,c=l._length,h=new Array(c),p=!1;for(d=0;d<c;d++)if(s=l.b[d],m(u=l.a[d])&&m(s)){var v=i.ab2xy(+u,+s,!0),g=i.isVisible(+u,+s);g||(p=!0),h[d]={x:v[0],y:v[1],a:u,b:s,vis:g}}else h[d]={x:!1,y:!1};return l._needsCull=p,h[0].carpet=i,h[0].trace=l,e(l,c),x(a,l),T(h,l),b(h,l),h}}},{"../carpet/lookup_carpetid":708,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],962:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../scatter/constants"),T=_("../scatter/subtypes"),b=_("../scatter/marker_defaults"),e=_("../scatter/line_defaults"),o=_("../scatter/line_shape_defaults"),a=_("../scatter/text_defaults"),l=_("../scatter/fillcolor_defaults"),i=_("./attributes");oe.exports=function(d,u,s,c){function h(w,y){return m.coerce(d,u,i,w,y)}h("carpet"),u.xaxis="x",u.yaxis="y";var p=h("a"),v=h("b"),g=Math.min(p.length,v.length);if(g){u._length=g,h("text"),h("texttemplate"),h("hovertext"),h("mode",g<x.PTS_LINESONLY?"lines+markers":"lines"),T.hasLines(u)&&(e(d,u,s,c,h),o(d,u,h),h("connectgaps")),T.hasMarkers(u)&&b(d,u,s,c,h,{gradient:!0}),T.hasText(u)&&a(d,u,c,h);var f=[];(T.hasMarkers(u)||T.hasText(u))&&(h("marker.maxdisplayed"),f.push("points")),h("fill"),"none"!==u.fill&&(l(d,u,s,h),T.hasLines(u)||o(d,u,h)),"tonext"!==u.fill&&"toself"!==u.fill||f.push("fills"),"fills"!==h("hoveron",f.join("+")||"points")&&h("hovertemplate"),m.coerceSelectionMarkerOpacity(u,h)}else u.visible=!1}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":960}],963:[function(_,oe,ae){"use strict";oe.exports=function(m,x,T,b,e){var o=b[e];return m.a=o.a,m.b=o.b,m.y=o.y,m}},{}],964:[function(_,oe,ae){"use strict";oe.exports=function(m,x){var T={},b=x._carpet,e=b.ab2ij([m.a,m.b]),o=Math.floor(e[0]),a=e[0]-o,l=Math.floor(e[1]),d=b.evalxy([],o,l,a,e[1]-l);return T.yLabel=d[1].toFixed(3),T}},{}],965:[function(_,oe,ae){"use strict";var m=_("../scatter/hover"),x=_("../../lib").fillText;oe.exports=function(T,b,e,o){var a=m(T,b,e,o);if(a&&!1!==a[0].index){var l=a[0];if(void 0===l.index){var d=T.xa._length,u=d*(1-l.y0/T.ya._length)/2,s=d-u;return l.x0=Math.max(Math.min(l.x0,s),u),l.x1=Math.max(Math.min(l.x1,s),u),a}var c=l.cd[l.index];l.a=c.a,l.b=c.b,l.xLabelVal=void 0,l.yLabelVal=void 0;var h=l.trace,p=h._carpet,v=h._module.formatLabels(c,h);l.yLabel=v.yLabel,delete l.text;var g=[];if(!h.hovertemplate){var f=(c.hi||h.hoverinfo).split("+");-1!==f.indexOf("all")&&(f=["a","b","text"]),-1!==f.indexOf("a")&&w(p.aaxis,c.a),-1!==f.indexOf("b")&&w(p.baxis,c.b),g.push("y: "+l.yLabel),-1!==f.indexOf("text")&&x(c,h,g),l.extraText=g.join("<br>")}return a}function w(y,M){var A;A=y.labelprefix&&y.labelprefix.length>0?y.labelprefix.replace(/ = $/,""):y._hovertitle,g.push(A+": "+M.toFixed(3)+y.labelsuffix)}}},{"../../lib":503,"../scatter/hover":937}],966:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("./calc"),plot:_("./plot"),style:_("../scatter/style").style,styleOnSelect:_("../scatter/style").styleOnSelect,hoverPoints:_("./hover"),selectPoints:_("../scatter/select"),eventData:_("./event_data"),moduleType:"trace",name:"scattercarpet",basePlotModule:_("../../plots/cartesian"),categories:["svg","carpet","symbols","showLegend","carpetDependent","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":960,"./calc":961,"./defaults":962,"./event_data":963,"./format_labels":964,"./hover":965,"./plot":967}],967:[function(_,oe,ae){"use strict";var m=_("../scatter/plot"),x=_("../../plots/cartesian/axes"),T=_("../../components/drawing");oe.exports=function(b,e,o,a){var l,d,u=o[0][0].carpet,s={xaxis:x.getFromId(b,u.xaxis||"x"),yaxis:x.getFromId(b,u.yaxis||"y"),plot:e.plot};for(m(b,s,o,a),l=0;l<o.length;l++)d=a.selectAll("g.trace"+o[l][0].trace.uid+" .js-line"),T.setClipUrl(d,o[l][0].carpet._clipPathId,b)}},{"../../components/drawing":388,"../../plots/cartesian/axes":554,"../scatter/plot":947}],968:[function(_,oe,ae){"use strict";var m=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../scatter/attributes"),b=_("../../plots/attributes"),e=_("../../components/colorscale/attributes"),o=_("../../components/drawing/attributes").dash,a=_("../../lib/extend").extendFlat,l=_("../../plot_api/edit_types").overrideAll,i=T.marker,d=T.line,u=i.line;oe.exports=l({lon:{valType:"data_array"},lat:{valType:"data_array"},locations:{valType:"data_array"},locationmode:{valType:"enumerated",values:["ISO-3","USA-states","country names","geojson-id"],dflt:"ISO-3"},geojson:{valType:"any",editType:"calc"},featureidkey:{valType:"string",editType:"calc",dflt:"id"},mode:a({},T.mode,{dflt:"markers"}),text:a({},T.text,{}),texttemplate:x({editType:"plot"},{keys:["lat","lon","location","text"]}),hovertext:a({},T.hovertext,{}),textfont:T.textfont,textposition:T.textposition,line:{color:d.color,width:d.width,dash:o},connectgaps:T.connectgaps,marker:a({symbol:i.symbol,opacity:i.opacity,size:i.size,sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,colorbar:i.colorbar,line:a({width:u.width},e("marker.line")),gradient:i.gradient},e("marker")),fill:{valType:"enumerated",values:["none","toself"],dflt:"none"},fillcolor:T.fillcolor,selected:T.selected,unselected:T.unselected,hoverinfo:a({},b.hoverinfo,{flags:["lon","lat","location","text","name"]}),hovertemplate:m()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],969:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../constants/numerical").BADNUM,T=_("../scatter/colorscale_calc"),b=_("../scatter/arrays_to_calcdata"),e=_("../scatter/calc_selection"),o=_("../../lib")._;function a(l){return l&&"string"==typeof l}oe.exports=function(l,i){var d,u=Array.isArray(i.locations),s=u?i.locations.length:i._length,c=new Array(s);d=i.geojson?function(w){return a(w)||m(w)}:a;for(var h=0;h<s;h++){var p=c[h]={};if(u){var v=i.locations[h];p.loc=d(v)?v:null}else{var g=i.lon[h],f=i.lat[h];p.lonlat=m(g)&&m(f)?[+g,+f]:[x,x]}}return b(c,i),T(l,i),e(c,i),s&&(c[0].t={labels:{lat:o(l,"lat:")+" ",lon:o(l,"lon:")+" "}}),c}},{"../../constants/numerical":479,"../../lib":503,"../scatter/arrays_to_calcdata":925,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],970:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../scatter/subtypes"),T=_("../scatter/marker_defaults"),b=_("../scatter/line_defaults"),e=_("../scatter/text_defaults"),o=_("../scatter/fillcolor_defaults"),a=_("./attributes");oe.exports=function(l,i,d,u){function s(w,y){return m.coerce(l,i,a,w,y)}var c,h=s("locations");if(h&&h.length){var p,v=s("geojson");("string"==typeof v&&""!==v||m.isPlainObject(v))&&(p="geojson-id"),"geojson-id"===s("locationmode",p)&&s("featureidkey"),c=h.length}else{var g=s("lon")||[],f=s("lat")||[];c=Math.min(g.length,f.length)}c?(i._length=c,s("text"),s("hovertext"),s("hovertemplate"),s("mode"),x.hasLines(i)&&(b(l,i,d,u,s),s("connectgaps")),x.hasMarkers(i)&&T(l,i,d,u,s,{gradient:!0}),x.hasText(i)&&(s("texttemplate"),e(l,i,u,s)),s("fill"),"none"!==i.fill&&o(l,i,d,s),m.coerceSelectionMarkerOpacity(i,s)):i.visible=!1}},{"../../lib":503,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":968}],971:[function(_,oe,ae){"use strict";oe.exports=function(m,x,T,b,e){m.lon=x.lon,m.lat=x.lat,m.location=x.loc?x.loc:null;var o=b[e];return o.fIn&&o.fIn.properties&&(m.properties=o.fIn.properties),m}},{}],972:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/axes");oe.exports=function(x,T,b){var e={},o=b[T.geo]._subplot.mockAxis,a=x.lonlat;return e.lonLabel=m.tickText(o,o.c2l(a[0]),!0).text,e.latLabel=m.tickText(o,o.c2l(a[1]),!0).text,e}},{"../../plots/cartesian/axes":554}],973:[function(_,oe,ae){"use strict";var m=_("../../components/fx"),x=_("../../constants/numerical").BADNUM,T=_("../scatter/get_trace_color"),b=_("../../lib").fillText,e=_("./attributes");oe.exports=function(o,a,l){var i=o.cd,d=i[0].trace,u=o.xa,s=o.ya,c=o.subplot,h=c.projection.isLonLatOverEdges,p=c.project;if(m.getClosest(i,function(A){var k=A.lonlat;if(k[0]===x||h(k))return 1/0;var C=p(k),P=p([a,l]),D=Math.abs(C[0]-P[0]),F=Math.abs(C[1]-P[1]),R=Math.max(3,A.mrc||0);return Math.max(Math.sqrt(D*D+F*F)-R,1-3/R)},o),!1!==o.index){var v=i[o.index],g=v.lonlat,f=[u.c2p(g),s.c2p(g)],w=v.mrc||1;o.x0=f[0]-w,o.x1=f[0]+w,o.y0=f[1]-w,o.y1=f[1]+w,o.loc=v.loc,o.lon=g[0],o.lat=g[1];var y={};y[d.geo]={_subplot:c};var M=d._module.formatLabels(v,d,y);return o.lonLabel=M.lonLabel,o.latLabel=M.latLabel,o.color=T(d,v),o.extraText=function(A,k,C,P){if(!A.hovertemplate){var D=k.hi||A.hoverinfo,F="all"===D?e.hoverinfo.flags:D.split("+"),R=-1!==F.indexOf("location")&&Array.isArray(A.locations),L=-1!==F.indexOf("lon"),I=-1!==F.indexOf("lat"),B=-1!==F.indexOf("text"),V=[];return R?V.push(k.loc):L&&I?V.push("("+Z(C.latLabel)+", "+Z(C.lonLabel)+")"):L?V.push(P.lon+Z(C.lonLabel)):I&&V.push(P.lat+Z(C.latLabel)),B&&b(k,A,V),V.join("<br>")}function Z(Y){return Y+"\xb0"}}(d,v,o,i[0].t.labels),o.hovertemplate=d.hovertemplate,[o]}}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":936,"./attributes":968}],974:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("./calc"),calcGeoJSON:_("./plot").calcGeoJSON,plot:_("./plot").plot,style:_("./style"),styleOnSelect:_("../scatter/style").styleOnSelect,hoverPoints:_("./hover"),eventData:_("./event_data"),selectPoints:_("./select"),moduleType:"trace",name:"scattergeo",basePlotModule:_("../../plots/geo"),categories:["geo","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/geo":589,"../scatter/marker_colorbar":944,"../scatter/style":950,"./attributes":968,"./calc":969,"./defaults":970,"./event_data":971,"./format_labels":972,"./hover":973,"./plot":975,"./select":976,"./style":977}],975:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../lib"),T=_("../../lib/topojson_utils").getTopojsonFeatures,b=_("../../lib/geojson_utils"),e=_("../../lib/geo_location_utils"),o=_("../../plots/cartesian/autorange").findExtremes,a=_("../../constants/numerical").BADNUM,l=_("../scatter/calc").calcMarkerSize,i=_("../scatter/subtypes"),d=_("./style");oe.exports={calcGeoJSON:function(u,s){var c,h,p=u[0].trace,v=s[p.geo],g=v._subplot,f=p._length;if(Array.isArray(p.locations)){var w=p.locationmode,y="geojson-id"===w?e.extractTraceFeature(u):T(p,g.topojson);for(c=0;c<f;c++){h=u[c];var M="geojson-id"===w?h.fOut:e.locationToFeature(w,h.loc,y);h.lonlat=M?M.properties.ct:[a,a]}}var A,k,C={padded:!0};if("geojson"===v.fitbounds&&"geojson-id"===p.locationmode){var P=e.computeBbox(e.getTraceGeojson(p));A=[P[0],P[2]],k=[P[1],P[3]]}else{for(A=new Array(f),k=new Array(f),c=0;c<f;c++)A[c]=(h=u[c]).lonlat[0],k[c]=h.lonlat[1];C.ppad=l(p,f)}p._extremes.lon=o(v.lonaxis._ax,A,C),p._extremes.lat=o(v.lataxis._ax,k,C)},plot:function(u,s,c){var h=s.layers.frontplot.select(".scatterlayer"),p=x.makeTraceGroups(h,c,"trace scattergeo");function v(g,f){g.lonlat[0]===a&&m.select(f).remove()}p.selectAll("*").remove(),p.each(function(g){var f=m.select(this),w=g[0].trace;if(i.hasLines(w)||"none"!==w.fill){var y=b.calcTraceToLineCoords(g),M="none"!==w.fill?b.makePolygon(y):b.makeLine(y);f.selectAll("path.js-line").data([{geojson:M,trace:w}]).enter().append("path").classed("js-line",!0).style("stroke-miterlimit",2)}i.hasMarkers(w)&&f.selectAll("path.point").data(x.identity).enter().append("path").classed("point",!0).each(function(A){v(A,this)}),i.hasText(w)&&f.selectAll("g").data(x.identity).enter().append("g").append("text").each(function(A){v(A,this)}),d(u,g)})}}},{"../../constants/numerical":479,"../../lib":503,"../../lib/geo_location_utils":496,"../../lib/geojson_utils":497,"../../lib/topojson_utils":532,"../../plots/cartesian/autorange":553,"../scatter/calc":927,"../scatter/subtypes":951,"./style":977,"@plotly/d3":58}],976:[function(_,oe,ae){"use strict";var m=_("../scatter/subtypes"),x=_("../../constants/numerical").BADNUM;oe.exports=function(T,b){var e,o,a,l,i,d=T.cd,u=T.xaxis,s=T.yaxis,c=[],h=d[0].trace;if(!m.hasMarkers(h)&&!m.hasText(h))return[];if(!1===b)for(i=0;i<d.length;i++)d[i].selected=0;else for(i=0;i<d.length;i++)(o=(e=d[i]).lonlat)[0]!==x&&(a=u.c2p(o),l=s.c2p(o),b.contains([a,l],null,i,T)?(c.push({pointNumber:i,lon:o[0],lat:o[1]}),e.selected=1):e.selected=0);return c}},{"../../constants/numerical":479,"../scatter/subtypes":951}],977:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../components/drawing"),T=_("../../components/color"),b=_("../scatter/style"),e=b.stylePoints,o=b.styleText;oe.exports=function(a,l){var i,d,u,s;l&&(i=a,u=(d=l)[0].trace,(s=d[0].node3).style("opacity",d[0].trace.opacity),e(s,u,i),o(s,u,i),s.selectAll("path.js-line").style("fill","none").each(function(c){var h=m.select(this),p=c.trace,v=p.line||{};h.call(T.stroke,v.color).call(x.dashLine,v.dash||"",v.width||0),"none"!==p.fill&&h.call(T.fill,p.fillcolor)}))}},{"../../components/color":366,"../../components/drawing":388,"../scatter/style":950,"@plotly/d3":58}],978:[function(_,oe,ae){"use strict";var m=_("../../plots/attributes"),x=_("../scatter/attributes"),T=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=_("../../components/colorscale/attributes"),e=_("../../lib/sort_object_keys"),o=_("../../lib/extend").extendFlat,a=_("../../plot_api/edit_types").overrideAll,l=_("./constants").DASHES,i=x.line,d=x.marker,u=d.line,s=oe.exports=a({x:x.x,x0:x.x0,dx:x.dx,y:x.y,y0:x.y0,dy:x.dy,xperiod:x.xperiod,yperiod:x.yperiod,xperiod0:x.xperiod0,yperiod0:x.yperiod0,xperiodalignment:x.xperiodalignment,yperiodalignment:x.yperiodalignment,xhoverformat:T("x"),yhoverformat:T("y"),text:x.text,hovertext:x.hovertext,textposition:x.textposition,textfont:x.textfont,mode:{valType:"flaglist",flags:["lines","markers","text"],extras:["none"]},line:{color:i.color,width:i.width,shape:{valType:"enumerated",values:["linear","hv","vh","hvh","vhv"],dflt:"linear",editType:"plot"},dash:{valType:"enumerated",values:e(l),dflt:"solid"}},marker:o({},b("marker"),{symbol:d.symbol,size:d.size,sizeref:d.sizeref,sizemin:d.sizemin,sizemode:d.sizemode,opacity:d.opacity,colorbar:d.colorbar,line:o({},b("marker.line"),{width:u.width})}),connectgaps:x.connectgaps,fill:o({},x.fill,{dflt:"none"}),fillcolor:x.fillcolor,selected:{marker:x.selected.marker,textfont:x.selected.textfont},unselected:{marker:x.unselected.marker,textfont:x.unselected.textfont},opacity:m.opacity},"calc","nested");s.x.editType=s.y.editType=s.x0.editType=s.y0.editType="calc+clearAxisTypes",s.hovertemplate=x.hovertemplate,s.texttemplate=x.texttemplate},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../lib/sort_object_keys":526,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../scatter/attributes":926,"./constants":980}],979:[function(_,oe,ae){"use strict";var m=_("@plotly/point-cluster"),x=_("../../lib"),T=_("../../plots/cartesian/axis_ids"),b=_("../../plots/cartesian/autorange").findExtremes,e=_("../../plots/cartesian/align_period"),o=_("../scatter/calc"),a=o.calcMarkerSize,l=o.calcAxisExpansion,i=o.setFirstScatter,d=_("../scatter/colorscale_calc"),u=_("./convert"),s=_("./scene_update"),c=_("../../constants/numerical").BADNUM,h=_("./constants").TOO_MANY_POINTS;function p(v,g,f){var w=v._extremes[g._id],y=b(g,f._bnds,{padded:!0});w.min=w.min.concat(y.min),w.max=w.max.concat(y.max)}oe.exports=function(v,g){var f,w=v._fullLayout,y=T.getFromId(v,g.xaxis),M=T.getFromId(v,g.yaxis),A=w._plots[g.xaxis+g.yaxis],k=g._length,C=k>=h,P=2*k,D={},F=y.makeCalcdata(g,"x"),R=M.makeCalcdata(g,"y"),L=e(g,y,"x",F),I=e(g,M,"y",R),B=L.vals,V=I.vals;g._x=B,g._y=V,g.xperiodalignment&&(g._origX=F,g._xStarts=L.starts,g._xEnds=L.ends),g.yperiodalignment&&(g._origY=R,g._yStarts=I.starts,g._yEnds=I.ends);var Z=new Array(P),Y=new Array(k);for(f=0;f<k;f++)Z[2*f]=B[f]===c?NaN:B[f],Z[2*f+1]=V[f]===c?NaN:V[f],Y[f]=f;if("log"===y.type)for(f=0;f<P;f+=2)Z[f]=y.c2l(Z[f]);if("log"===M.type)for(f=1;f<P;f+=2)Z[f]=M.c2l(Z[f]);C&&"log"!==y.type&&"log"!==M.type?D.tree=m(Z):D.ids=Y,d(v,g);var ee,J=function(Q,se,j,G,W,ie){var q=u.style(Q,j);if(q.marker&&(q.marker.positions=G),q.line&&G.length>1&&x.extendFlat(q.line,u.linePositions(Q,j,G)),q.errorX||q.errorY){var te=u.errorBarPositions(Q,j,G,W,ie);q.errorX&&x.extendFlat(q.errorX,te.x),q.errorY&&x.extendFlat(q.errorY,te.y)}return q.text&&(x.extendFlat(q.text,{positions:G},u.textPosition(Q,j,q.text,q.marker)),x.extendFlat(q.textSel,{positions:G},u.textPosition(Q,j,q.text,q.markerSel)),x.extendFlat(q.textUnsel,{positions:G},u.textPosition(Q,j,q.text,q.markerUnsel))),q}(v,0,g,Z,B,V),$=s(v,A);return i(w,g),C?J.marker&&(ee=J.marker.sizeAvg||Math.max(J.marker.size,3)):ee=a(g,k),l(v,g,y,M,B,V,ee),J.errorX&&p(g,y,J.errorX),J.errorY&&p(g,M,J.errorY),J.fill&&!$.fill2d&&($.fill2d=!0),J.marker&&!$.scatter2d&&($.scatter2d=!0),J.line&&!$.line2d&&($.line2d=!0),!J.errorX&&!J.errorY||$.error2d||($.error2d=!0),J.text&&!$.glText&&($.glText=!0),J.marker&&(J.marker.snap=k),$.lineOptions.push(J.line),$.errorXOptions.push(J.errorX),$.errorYOptions.push(J.errorY),$.fillOptions.push(J.fill),$.markerOptions.push(J.marker),$.markerSelectedOptions.push(J.markerSel),$.markerUnselectedOptions.push(J.markerUnsel),$.textOptions.push(J.text),$.textSelectedOptions.push(J.textSel),$.textUnselectedOptions.push(J.textUnsel),$.selectBatch.push([]),$.unselectBatch.push([]),D._scene=$,D.index=$.count,D.x=B,D.y=V,D.positions=Z,$.count++,[{x:!1,y:!1,t:D,trace:g}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/autorange":553,"../../plots/cartesian/axis_ids":558,"../scatter/calc":927,"../scatter/colorscale_calc":929,"./constants":980,"./convert":981,"./scene_update":989,"@plotly/point-cluster":59}],980:[function(_,oe,ae){"use strict";oe.exports={TOO_MANY_POINTS:1e5,SYMBOL_SDF_SIZE:200,SYMBOL_SIZE:20,SYMBOL_STROKE:1,DOT_RE:/-dot/,OPEN_RE:/-open/,DASHES:{solid:[1],dot:[1,1],dash:[4,1],longdash:[8,1],dashdot:[4,1,1,1],longdashdot:[8,1,1,1]}}},{}],981:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("svg-path-sdf"),T=_("color-normalize"),b=_("../../registry"),e=_("../../lib"),o=_("../../components/drawing"),a=_("../../plots/cartesian/axis_ids"),l=_("../../lib/gl_format_color").formatColor,i=_("../scatter/subtypes"),d=_("../scatter/make_bubble_size_func"),u=_("./helpers"),s=_("./constants"),c=_("../../constants/interactions").DESELECTDIM,h={start:1,left:1,end:-1,right:-1,middle:0,center:0,bottom:1,top:-1},p=_("../../components/fx/helpers").appendArrayPointValue;function v(F,R){var L,I=F._fullLayout,B=R._length,V=R.textfont,Z=R.textposition,Y=Array.isArray(Z)?Z:[Z],ee=V.color,J=V.size,$=V.family,Q={},se=F._context.plotGlPixelRatio,j=R.texttemplate;if(j){Q.text=[];var G=I._d3locale,W=Array.isArray(j),ie=W?Math.min(j.length,B):B,q=W?function(be){return j[be]}:function(){return j};for(L=0;L<ie;L++){var te={i:L},ne=R._module.formatLabels(te,R,I),le={};p(le,R,L);var ue=R._meta||{};Q.text.push(e.texttemplateString(q(L),ne,G,le,te,ue))}}else Q.text=Array.isArray(R.text)&&R.text.length<B?R.text.slice():R.text;if(Array.isArray(Q.text))for(L=Q.text.length;L<B;L++)Q.text[L]="";for(Q.opacity=R.opacity,Q.font={},Q.align=[],Q.baseline=[],L=0;L<Y.length;L++){var de=Y[L].split(/\s+/);switch(de[1]){case"left":Q.align.push("right");break;case"right":Q.align.push("left");break;default:Q.align.push(de[1])}switch(de[0]){case"top":Q.baseline.push("bottom");break;case"bottom":Q.baseline.push("top");break;default:Q.baseline.push(de[0])}}if(Array.isArray(ee))for(Q.color=new Array(B),L=0;L<B;L++)Q.color[L]=ee[L];else Q.color=ee;if(e.isArrayOrTypedArray(J)||Array.isArray($))for(Q.font=new Array(B),L=0;L<B;L++){var he=Q.font[L]={};he.size=(e.isTypedArray(J)?J[L]:Array.isArray(J)?m(J[L])?J[L]:0:J)*se,he.family=Array.isArray($)?$[L]:$}else Q.font={size:J*se,family:$};return Q}function g(F){var R,L,I=F._length,B=F.marker,V={},Z=e.isArrayOrTypedArray(B.symbol),Y=e.isArrayOrTypedArray(B.color),ee=e.isArrayOrTypedArray(B.line.color),J=e.isArrayOrTypedArray(B.opacity),$=e.isArrayOrTypedArray(B.size),Q=e.isArrayOrTypedArray(B.line.width);if(Z||(L=u.isOpenSymbol(B.symbol)),Z||Y||ee||J){V.colors=new Array(I),V.borderColors=new Array(I);var se=l(B,B.opacity,I),j=l(B.line,B.opacity,I);if(!Array.isArray(j[0])){var G=j;for(j=Array(I),R=0;R<I;R++)j[R]=G}if(!Array.isArray(se[0])){var W=se;for(se=Array(I),R=0;R<I;R++)se[R]=W}for(V.colors=se,V.borderColors=j,R=0;R<I;R++)Z&&(L=u.isOpenSymbol(B.symbol[R])),L&&(j[R]=se[R].slice(),se[R]=se[R].slice(),se[R][3]=0);V.opacity=F.opacity}else L?(V.color=T(B.color,"uint8"),V.color[3]=0,V.borderColor=T(B.color,"uint8")):(V.color=T(B.color,"uint8"),V.borderColor=T(B.line.color,"uint8")),V.opacity=F.opacity*B.opacity;if(Z)for(V.markers=new Array(I),R=0;R<I;R++)V.markers[R]=D(B.symbol[R]);else V.marker=D(B.symbol);var q,te=d(F,1);if($||Q){var ne,le=V.sizes=new Array(I),ue=V.borderSizes=new Array(I),de=0;if($){for(R=0;R<I;R++)le[R]=te(B.size[R]),de+=le[R];ne=de/I}else for(q=te(B.size),R=0;R<I;R++)le[R]=q;if(Q)for(R=0;R<I;R++)ue[R]=B.line.width[R];else for(q=B.line.width,R=0;R<I;R++)ue[R]=q;V.sizeAvg=ne}else V.size=te(B&&B.size||10),V.borderSizes=te(B.line.width);return V}function f(F,R){var I={};return R&&(R.marker&&R.marker.symbol?I=g(e.extendFlat({},F.marker,R.marker)):R.marker&&(R.marker.size&&(I.size=R.marker.size),R.marker.color&&(I.colors=R.marker.color),void 0!==R.marker.opacity&&(I.opacity=R.marker.opacity))),I}function w(F,R,L){var I={};if(!L)return I;if(L.textfont){var B={opacity:1,text:R.text,texttemplate:R.texttemplate,textposition:R.textposition,textfont:e.extendFlat({},R.textfont)};L.textfont&&e.extendFlat(B.textfont,L.textfont),I=v(F,B)}return I}function y(F,R,L){var I={capSize:2*R.width*L,lineWidth:R.thickness*L,color:R.color};return R.copy_ystyle&&(I=F.error_y),I}var M=s.SYMBOL_SDF_SIZE,A=s.SYMBOL_SIZE,k=s.SYMBOL_STROKE,C={},P=o.symbolFuncs[0](.05*A);function D(F){if("circle"===F)return null;var R,L,I=o.symbolNumber(F),B=o.symbolFuncs[I%100],V=!!o.symbolNoDot[I%100],Z=!!o.symbolNoFill[I%100],Y=u.isDotSymbol(F);return C[F]?C[F]:(R=Y&&!V?B(1.1*A)+P:B(A),L=x(R,{w:M,h:M,viewBox:[-A,-A,A,A],stroke:Z?k:-k}),C[F]=L,L||null)}oe.exports={style:function(F,R){var L,I={marker:void 0,markerSel:void 0,markerUnsel:void 0,line:void 0,fill:void 0,errorX:void 0,errorY:void 0,text:void 0,textSel:void 0,textUnsel:void 0},B=F._context.plotGlPixelRatio;if(!0!==R.visible)return I;if(i.hasText(R)&&(I.text=v(F,R),I.textSel=w(F,R,R.selected),I.textUnsel=w(F,R,R.unselected)),i.hasMarkers(R)&&(I.marker=g(R),I.markerSel=f(R,R.selected),I.markerUnsel=f(R,R.unselected),!R.unselected&&e.isArrayOrTypedArray(R.marker.opacity))){var V=R.marker.opacity;for(I.markerUnsel.opacity=new Array(V.length),L=0;L<V.length;L++)I.markerUnsel.opacity[L]=c*V[L]}if(i.hasLines(R)){I.line={overlay:!0,thickness:R.line.width*B,color:R.line.color,opacity:R.opacity};var Z=(s.DASHES[R.line.dash]||[1]).slice();for(L=0;L<Z.length;++L)Z[L]*=R.line.width*B;I.line.dashes=Z}return R.error_x&&R.error_x.visible&&(I.errorX=y(R,R.error_x,B)),R.error_y&&R.error_y.visible&&(I.errorY=y(R,R.error_y,B)),R.fill&&"none"!==R.fill&&(I.fill={closed:!0,fill:R.fillcolor,thickness:0}),I},markerStyle:g,markerSelection:f,linePositions:function(F,R,L){var I,B,V=L.length,Z=V/2;if(i.hasLines(R)&&Z)if("hv"===R.line.shape){for(I=[],B=0;B<Z-1;B++)isNaN(L[2*B])||isNaN(L[2*B+1])?I.push(NaN,NaN,NaN,NaN):(I.push(L[2*B],L[2*B+1]),isNaN(L[2*B+2])||isNaN(L[2*B+3])?I.push(NaN,NaN):I.push(L[2*B+2],L[2*B+1]));I.push(L[V-2],L[V-1])}else if("hvh"===R.line.shape){for(I=[],B=0;B<Z-1;B++)if(isNaN(L[2*B])||isNaN(L[2*B+1])||isNaN(L[2*B+2])||isNaN(L[2*B+3]))isNaN(L[2*B])||isNaN(L[2*B+1])?I.push(NaN,NaN):I.push(L[2*B],L[2*B+1]),I.push(NaN,NaN);else{var Y=(L[2*B]+L[2*B+2])/2;I.push(L[2*B],L[2*B+1],Y,L[2*B+1],Y,L[2*B+3])}I.push(L[V-2],L[V-1])}else if("vhv"===R.line.shape){for(I=[],B=0;B<Z-1;B++)if(isNaN(L[2*B])||isNaN(L[2*B+1])||isNaN(L[2*B+2])||isNaN(L[2*B+3]))isNaN(L[2*B])||isNaN(L[2*B+1])?I.push(NaN,NaN):I.push(L[2*B],L[2*B+1]),I.push(NaN,NaN);else{var ee=(L[2*B+1]+L[2*B+3])/2;I.push(L[2*B],L[2*B+1],L[2*B],ee,L[2*B+2],ee)}I.push(L[V-2],L[V-1])}else if("vh"===R.line.shape){for(I=[],B=0;B<Z-1;B++)isNaN(L[2*B])||isNaN(L[2*B+1])?I.push(NaN,NaN,NaN,NaN):(I.push(L[2*B],L[2*B+1]),isNaN(L[2*B+2])||isNaN(L[2*B+3])?I.push(NaN,NaN):I.push(L[2*B],L[2*B+3]));I.push(L[V-2],L[V-1])}else I=L;var J=!1;for(B=0;B<I.length;B++)if(isNaN(I[B])){J=!0;break}var $=J||I.length>s.TOO_MANY_POINTS||i.hasMarkers(R)?"rect":"round";if(J&&R.connectgaps){var Q=I[0],se=I[1];for(B=0;B<I.length;B+=2)isNaN(I[B])||isNaN(I[B+1])?(I[B]=Q,I[B+1]=se):(Q=I[B],se=I[B+1])}return{join:$,positions:I}},errorBarPositions:function(F,R,L,I,B){var V=b.getComponentMethod("errorbars","makeComputeError"),Z=a.getFromId(F,R.xaxis),Y=a.getFromId(F,R.yaxis),ee=L.length/2,J={};function $(Q,se){var j=se._id.charAt(0),G=R["error_"+j];if(G&&G.visible&&("linear"===se.type||"log"===se.type)){for(var W=V(G),ie={x:0,y:1}[j],q={x:[0,1,2,3],y:[2,3,0,1]}[j],te=new Float64Array(4*ee),ne=1/0,le=-1/0,ue=0,de=0;ue<ee;ue++,de+=4){var he=Q[ue];if(m(he)){var be=L[2*ue+ie],ge=W(he,ue),we=ge[0],Ce=ge[1];if(m(we)&&m(Ce)){var Se=he+Ce;te[de+q[0]]=be-se.c2l(he-we),te[de+q[1]]=se.c2l(Se)-be,te[de+q[2]]=0,te[de+q[3]]=0,ne=Math.min(ne,he-we),le=Math.max(le,he+Ce)}}}J[j]={positions:L,errors:te,_bnds:[ne,le]}}}return $(I,Z),$(B,Y),J},textPosition:function(F,R,L,I){var B,V=R._length,Z={};if(i.hasMarkers(R)){var Y=L.font,ee=L.align,J=L.baseline;for(Z.offset=new Array(V),B=0;B<V;B++){var $=I.sizes?I.sizes[B]:I.size,Q=Array.isArray(Y)?Y[B].size:Y.size,se=Array.isArray(ee)?ee.length>1?ee[B]:ee[0]:ee,j=Array.isArray(J)?J.length>1?J[B]:J[0]:J,W=h[j],ie=$?$/.8+1:0;Z.offset[B]=[h[se]*ie/Q,(-W*ie-.5*W)/Q]}}return Z}}},{"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/interactions":478,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/cartesian/axis_ids":558,"../../registry":638,"../scatter/make_bubble_size_func":943,"../scatter/subtypes":951,"./constants":980,"./helpers":985,"color-normalize":89,"fast-isnumeric":190,"svg-path-sdf":310}],982:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../registry"),T=_("./helpers"),b=_("./attributes"),e=_("../scatter/constants"),o=_("../scatter/subtypes"),a=_("../scatter/xy_defaults"),l=_("../scatter/period_defaults"),i=_("../scatter/marker_defaults"),d=_("../scatter/line_defaults"),u=_("../scatter/fillcolor_defaults"),s=_("../scatter/text_defaults");oe.exports=function(c,h,p,v){function g(P,D){return m.coerce(c,h,b,P,D)}var f=!!c.marker&&T.isOpenSymbol(c.marker.symbol),w=o.isBubble(c),y=a(c,h,v,g);if(y){l(c,h,v,g),g("xhoverformat"),g("yhoverformat");var M=y<e.PTS_LINESONLY?"lines+markers":"lines";g("text"),g("hovertext"),g("hovertemplate"),g("mode",M),o.hasLines(h)&&(g("connectgaps"),d(c,h,p,v,g),g("line.shape")),o.hasMarkers(h)&&(i(c,h,p,v,g),g("marker.line.width",f||w?1:0)),o.hasText(h)&&(g("texttemplate"),s(c,h,v,g));var A=(h.line||{}).color,k=(h.marker||{}).color;g("fill"),"none"!==h.fill&&u(c,h,p,g);var C=x.getComponentMethod("errorbars","supplyDefaults");C(c,h,A||k||p,{axis:"y"}),C(c,h,A||k||p,{axis:"x",inherit:"y"}),m.coerceSelectionMarkerOpacity(h,g)}else h.visible=!1}},{"../../lib":503,"../../registry":638,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/period_defaults":946,"../scatter/subtypes":951,"../scatter/text_defaults":952,"../scatter/xy_defaults":953,"./attributes":978,"./helpers":985}],983:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../components/color"),T=_("../../constants/interactions").DESELECTDIM;oe.exports={styleTextSelection:function(b){var e,o,a=b[0],l=a.trace,i=a.t,d=i._scene,u=i.index,s=d.selectBatch[u],c=d.unselectBatch[u],h=d.textOptions[u],p=d.textSelectedOptions[u]||{},v=d.textUnselectedOptions[u]||{},g=m.extendFlat({},h);if(s.length||c.length){var f=p.color,w=v.color,y=h.color,M=Array.isArray(y);for(g.color=new Array(l._length),e=0;e<s.length;e++)g.color[o=s[e]]=f||(M?y[o]:y);for(e=0;e<c.length;e++){o=c[e];var A=M?y[o]:y;g.color[o]=w||(f?A:x.addOpacity(A,T))}}d.glText[u].update(g)}}},{"../../components/color":366,"../../constants/interactions":478,"../../lib":503}],984:[function(_,oe,ae){"use strict";var m=_("../scatter/format_labels");oe.exports=function(x,T,b){var e=x.i;return"x"in x||(x.x=T._x[e]),"y"in x||(x.y=T._y[e]),m(x,T,b)}},{"../scatter/format_labels":935}],985:[function(_,oe,ae){"use strict";var m=_("./constants");ae.isOpenSymbol=function(x){return"string"==typeof x?m.OPEN_RE.test(x):x%200>100},ae.isDotSymbol=function(x){return"string"==typeof x?m.DOT_RE.test(x):x>200}},{"./constants":980}],986:[function(_,oe,ae){"use strict";var m=_("../../registry"),x=_("../../lib"),T=_("../scatter/get_trace_color");function b(e,o,a,l){var i=e.xa,d=e.ya,u=e.distance,s=e.dxy,c=e.index,h={pointNumber:c,x:o[c],y:a[c]};h.tx=Array.isArray(l.text)?l.text[c]:l.text,h.htx=Array.isArray(l.hovertext)?l.hovertext[c]:l.hovertext,h.data=Array.isArray(l.customdata)?l.customdata[c]:l.customdata,h.tp=Array.isArray(l.textposition)?l.textposition[c]:l.textposition;var p=l.textfont;p&&(h.ts=x.isArrayOrTypedArray(p.size)?p.size[c]:p.size,h.tc=Array.isArray(p.color)?p.color[c]:p.color,h.tf=Array.isArray(p.family)?p.family[c]:p.family);var v=l.marker;v&&(h.ms=x.isArrayOrTypedArray(v.size)?v.size[c]:v.size,h.mo=x.isArrayOrTypedArray(v.opacity)?v.opacity[c]:v.opacity,h.mx=x.isArrayOrTypedArray(v.symbol)?v.symbol[c]:v.symbol,h.mc=x.isArrayOrTypedArray(v.color)?v.color[c]:v.color);var g=v&&v.line;g&&(h.mlc=Array.isArray(g.color)?g.color[c]:g.color,h.mlw=x.isArrayOrTypedArray(g.width)?g.width[c]:g.width);var f=v&&v.gradient;f&&"none"!==f.type&&(h.mgt=Array.isArray(f.type)?f.type[c]:f.type,h.mgc=Array.isArray(f.color)?f.color[c]:f.color);var w=i.c2p(h.x,!0),y=d.c2p(h.y,!0),M=h.mrc||1,A=l.hoverlabel;A&&(h.hbg=Array.isArray(A.bgcolor)?A.bgcolor[c]:A.bgcolor,h.hbc=Array.isArray(A.bordercolor)?A.bordercolor[c]:A.bordercolor,h.hts=x.isArrayOrTypedArray(A.font.size)?A.font.size[c]:A.font.size,h.htc=Array.isArray(A.font.color)?A.font.color[c]:A.font.color,h.htf=Array.isArray(A.font.family)?A.font.family[c]:A.font.family,h.hnl=x.isArrayOrTypedArray(A.namelength)?A.namelength[c]:A.namelength);var k=l.hoverinfo;k&&(h.hi=Array.isArray(k)?k[c]:k);var C=l.hovertemplate;C&&(h.ht=Array.isArray(C)?C[c]:C);var P={};P[e.index]=h;var D=l._origX,F=l._origY,R=x.extendFlat({},e,{color:T(l,h),x0:w-M,x1:w+M,xLabelVal:D?D[c]:h.x,y0:y-M,y1:y+M,yLabelVal:F?F[c]:h.y,cd:P,distance:u,spikeDistance:s,hovertemplate:h.ht});return h.htx?R.text=h.htx:h.tx?R.text=h.tx:l.text&&(R.text=l.text),x.fillText(h,l,R),m.getComponentMethod("errorbars","hoverInfo")(h,l,R),R}oe.exports={hoverPoints:function(e,o,a,l){var i,d,u,s,c,h,p,v,g,f,w=e.cd,y=w[0].t,M=w[0].trace,A=e.xa,k=e.ya,C=y.x,P=y.y,D=A.c2p(o),F=k.c2p(a),R=e.distance;if(y.tree){var L=A.p2c(D-R),I=A.p2c(D+R),B=k.p2c(F-R),V=k.p2c(F+R);i="x"===l?y.tree.range(Math.min(L,I),Math.min(k._rl[0],k._rl[1]),Math.max(L,I),Math.max(k._rl[0],k._rl[1])):y.tree.range(Math.min(L,I),Math.min(B,V),Math.max(L,I),Math.max(B,V))}else i=y.ids;var Z=R;if("x"===l){var Y=!!M.xperiodalignment,ee=!!M.yperiodalignment;for(h=0;h<i.length;h++){if(s=C[d=i[h]],p=Math.abs(A.c2p(s)-D),Y){var J=A.c2p(M._xStarts[d]),$=A.c2p(M._xEnds[d]);p=D>=Math.min(J,$)&&D<=Math.max(J,$)?0:1/0}if(p<Z){if(Z=p,v=k.c2p(c=P[d])-F,ee){var Q=k.c2p(M._yStarts[d]),se=k.c2p(M._yEnds[d]);v=F>=Math.min(Q,se)&&F<=Math.max(Q,se)?0:1/0}f=Math.sqrt(p*p+v*v),u=i[h]}}}else for(h=i.length-1;h>-1;h--)s=C[d=i[h]],c=P[d],p=A.c2p(s)-D,v=k.c2p(c)-F,(g=Math.sqrt(p*p+v*v))<Z&&(Z=f=g,u=d);return e.index=u,e.distance=Z,e.dxy=f,void 0===u?[e]:[b(e,C,P,M)]},calcHover:b}},{"../../lib":503,"../../registry":638,"../scatter/get_trace_color":936}],987:[function(_,oe,ae){"use strict";var m=_("./hover");oe.exports={moduleType:"trace",name:"scattergl",basePlotModule:_("../../plots/cartesian"),categories:["gl","regl","cartesian","symbols","errorBarsOK","showLegend","scatter-like"],attributes:_("./attributes"),supplyDefaults:_("./defaults"),crossTraceDefaults:_("../scatter/cross_trace_defaults"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("./calc"),plot:_("./plot"),hoverPoints:m.hoverPoints,selectPoints:_("./select"),meta:{}}},{"../../plots/cartesian":568,"../scatter/cross_trace_defaults":932,"../scatter/marker_colorbar":944,"./attributes":978,"./calc":979,"./defaults":982,"./format_labels":984,"./hover":986,"./plot":988,"./select":990}],988:[function(_,oe,ae){"use strict";var m=_("regl-scatter2d"),x=_("regl-line2d"),T=_("regl-error2d"),b=_("gl-text"),e=_("../../lib"),o=_("../../components/dragelement/helpers").selectMode,a=_("../../lib/prepare_regl"),l=_("../scatter/subtypes"),i=_("../scatter/link_traces"),d=_("./edit_style").styleTextSelection;function u(s,c,h,p){var v=s._size,k=v.w*p,C=v.h*p;return[v.l*p+c.domain[0]*k,v.b*p+h.domain[0]*C,s.width*p-v.r*p-(1-c.domain[1])*k,s.height*p-v.t*p-(1-h.domain[1])*C]}oe.exports=function(s,c,h){if(h.length){var p,v,g=s._fullLayout,f=c._scene,w=c.xaxis,y=c.yaxis;if(f)if(a(s,["ANGLE_instanced_arrays","OES_element_index_uint"])){var M=f.count,A=g._glcanvas.data()[0].regl;if(i(s,c,h),f.dirty){if(!0===f.error2d&&(f.error2d=T(A)),!0===f.line2d&&(f.line2d=x(A)),!0===f.scatter2d&&(f.scatter2d=m(A)),!0===f.fill2d&&(f.fill2d=x(A)),!0===f.glText)for(f.glText=new Array(M),p=0;p<M;p++)f.glText[p]=new b(A);if(f.glText){if(M>f.glText.length){var k=M-f.glText.length;for(p=0;p<k;p++)f.glText.push(new b(A))}else M<f.glText.length&&f.glText.splice(M,f.glText.length-M).forEach(function(q){q.destroy()});for(p=0;p<M;p++)f.glText[p].update(f.textOptions[p])}if(f.line2d&&(f.line2d.update(f.lineOptions),f.lineOptions=f.lineOptions.map(function(q){if(q&&q.positions){for(var te=q.positions,ne=0;ne<te.length&&(isNaN(te[ne])||isNaN(te[ne+1]));)ne+=2;for(var le=te.length-2;le>ne&&(isNaN(te[le])||isNaN(te[le+1]));)le-=2;q.positions=te.slice(ne,le+2)}return q}),f.line2d.update(f.lineOptions)),f.error2d){var P=(f.errorXOptions||[]).concat(f.errorYOptions||[]);f.error2d.update(P)}f.scatter2d&&f.scatter2d.update(f.markerOptions),f.fillOrder=e.repeat(null,M),f.fill2d&&(f.fillOptions=f.fillOptions.map(function(q,te){var ne=h[te];if(q&&ne&&ne[0]&&ne[0].trace){var le,ue,de=ne[0],he=de.trace,be=de.t,ge=f.lineOptions[te],we=[];he._ownfill&&we.push(te),he._nexttrace&&we.push(te+1),we.length&&(f.fillOrder[te]=we);var Ce,De,Se=[],Fe=ge&&ge.positions||be.positions;if("tozeroy"===he.fill){for(Ce=0;Ce<Fe.length&&isNaN(Fe[Ce+1]);)Ce+=2;for(De=Fe.length-2;De>Ce&&isNaN(Fe[De+1]);)De-=2;0!==Fe[Ce+1]&&(Se=[Fe[Ce],0]),Se=Se.concat(Fe.slice(Ce,De+2)),0!==Fe[De+1]&&(Se=Se.concat([Fe[De],0]))}else if("tozerox"===he.fill){for(Ce=0;Ce<Fe.length&&isNaN(Fe[Ce]);)Ce+=2;for(De=Fe.length-2;De>Ce&&isNaN(Fe[De]);)De-=2;0!==Fe[Ce]&&(Se=[0,Fe[Ce+1]]),Se=Se.concat(Fe.slice(Ce,De+2)),0!==Fe[De]&&(Se=Se.concat([0,Fe[De+1]]))}else if("toself"===he.fill||"tonext"===he.fill){for(Se=[],le=0,q.splitNull=!0,ue=0;ue<Fe.length;ue+=2)(isNaN(Fe[ue])||isNaN(Fe[ue+1]))&&((Se=Se.concat(Fe.slice(le,ue))).push(Fe[le],Fe[le+1]),Se.push(null,null),le=ue+2);Se=Se.concat(Fe.slice(le)),le&&Se.push(Fe[le],Fe[le+1])}else{var ve=he._nexttrace;if(ve){var Te=f.lineOptions[te+1];if(Te){var Le=Te.positions;if("tonexty"===he.fill){for(Se=Fe.slice(),te=Math.floor(Le.length/2);te--;){var Ee=Le[2*te],Pe=Le[2*te+1];isNaN(Ee)||isNaN(Pe)||Se.push(Ee,Pe)}q.fill=ve.fillcolor}}}}if(he._prevtrace&&"tonext"===he._prevtrace.fill){var je=f.lineOptions[te-1].positions,Ge=Se.length/2,Ke=[le=Ge];for(ue=0;ue<je.length;ue+=2)(isNaN(je[ue])||isNaN(je[ue+1]))&&(Ke.push(ue/2+Ge+1),le=ue+2);Se=Se.concat(je),q.hole=Ke}return q.fillmode=he.fill,q.opacity=he.opacity,q.positions=Se,q}}),f.fill2d.update(f.fillOptions))}var F=o(g.dragmode),R=g.clickmode.indexOf("select")>-1;for(p=0;p<M;p++){var L=h[p][0],I=L.trace,B=L.t,V=B.index,Z=I._length,Y=B.x,ee=B.y;if(I.selectedpoints||F||R){if(F||(F=!0),I.selectedpoints){var J=f.selectBatch[V]=e.selIndices2selPoints(I),$={};for(v=0;v<J.length;v++)$[J[v]]=1;var Q=[];for(v=0;v<Z;v++)$[v]||Q.push(v);f.unselectBatch[V]=Q}var se=B.xpx=new Array(Z),j=B.ypx=new Array(Z);for(v=0;v<Z;v++)se[v]=w.c2p(Y[v]),j[v]=y.c2p(ee[v])}else B.xpx=B.ypx=null}if(F){if(f.select2d||(f.select2d=m(g._glcanvas.data()[1].regl)),f.scatter2d){var G=new Array(M);for(p=0;p<M;p++)G[p]=f.selectBatch[p].length||f.unselectBatch[p].length?f.markerUnselectedOptions[p]:{};f.scatter2d.update(G)}f.select2d&&(f.select2d.update(f.markerOptions),f.select2d.update(f.markerSelectedOptions)),f.glText&&h.forEach(function(q){l.hasText(((q||[])[0]||{}).trace||{})&&d(q)})}else f.scatter2d&&f.scatter2d.update(f.markerOptions);var W={viewport:u(g,w,y,s._context.plotGlPixelRatio),range:[(w._rl||w.range)[0],(y._rl||y.range)[0],(w._rl||w.range)[1],(y._rl||y.range)[1]]},ie=e.repeat(W,f.count);f.fill2d&&f.fill2d.update(ie),f.line2d&&f.line2d.update(ie),f.error2d&&f.error2d.update(ie.concat(ie)),f.scatter2d&&f.scatter2d.update(ie),f.select2d&&f.select2d.update(ie),f.glText&&f.glText.forEach(function(q){q.update(W)})}else f.init()}}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../lib/prepare_regl":516,"../scatter/link_traces":942,"../scatter/subtypes":951,"./edit_style":983,"gl-text":225,"regl-error2d":279,"regl-line2d":280,"regl-scatter2d":281}],989:[function(_,oe,ae){"use strict";var m=_("../../lib");oe.exports=function(x,T){var b=T._scene,e={count:0,dirty:!0,lineOptions:[],fillOptions:[],markerOptions:[],markerSelectedOptions:[],markerUnselectedOptions:[],errorXOptions:[],errorYOptions:[],textOptions:[],textSelectedOptions:[],textUnselectedOptions:[],selectBatch:[],unselectBatch:[]},o={fill2d:!1,scatter2d:!1,error2d:!1,line2d:!1,glText:!1,select2d:!1};return T._scene||((b=T._scene={}).init=function(){m.extendFlat(b,o,e)},b.init(),b.update=function(a){var l=m.repeat(a,b.count);if(b.fill2d&&b.fill2d.update(l),b.scatter2d&&b.scatter2d.update(l),b.line2d&&b.line2d.update(l),b.error2d&&b.error2d.update(l.concat(l)),b.select2d&&b.select2d.update(l),b.glText)for(var i=0;i<b.count;i++)b.glText[i].update(a)},b.draw=function(){for(var a=b.count,l=b.fill2d,i=b.error2d,d=b.line2d,u=b.scatter2d,s=b.glText,c=b.select2d,h=b.selectBatch,p=b.unselectBatch,v=0;v<a;v++){if(l&&b.fillOrder[v]&&l.draw(b.fillOrder[v]),d&&b.lineOptions[v]&&d.draw(v),i&&(b.errorXOptions[v]&&i.draw(v),b.errorYOptions[v]&&i.draw(v+a)),u&&b.markerOptions[v])if(p[v].length){var g=m.repeat([],b.count);g[v]=p[v],u.draw(g)}else h[v].length||u.draw(v);s[v]&&b.textOptions[v]&&s[v].render()}c&&c.draw(h),b.dirty=!1},b.destroy=function(){b.fill2d&&b.fill2d.destroy&&b.fill2d.destroy(),b.scatter2d&&b.scatter2d.destroy&&b.scatter2d.destroy(),b.error2d&&b.error2d.destroy&&b.error2d.destroy(),b.line2d&&b.line2d.destroy&&b.line2d.destroy(),b.select2d&&b.select2d.destroy&&b.select2d.destroy(),b.glText&&b.glText.forEach(function(a){a.destroy&&a.destroy()}),b.lineOptions=null,b.fillOptions=null,b.markerOptions=null,b.markerSelectedOptions=null,b.markerUnselectedOptions=null,b.errorXOptions=null,b.errorYOptions=null,b.textOptions=null,b.textSelectedOptions=null,b.textUnselectedOptions=null,b.selectBatch=null,b.unselectBatch=null,T._scene=null}),b.dirty||m.extendFlat(b,e),b}},{"../../lib":503}],990:[function(_,oe,ae){"use strict";var m=_("../scatter/subtypes"),x=_("./edit_style").styleTextSelection;oe.exports=function(T,b){var e=T.cd,o=T.xaxis,a=T.yaxis,l=[],i=e[0].trace,d=e[0].t,u=i._length,s=d.x,c=d.y,h=d._scene,p=d.index;if(!h)return l;var v=m.hasText(i),g=m.hasMarkers(i);if(!0!==i.visible||!g&&!v)return l;var w=[],y=[];if(!1!==b&&!b.degenerate)for(var M=0;M<u;M++)b.contains([d.xpx[M],d.ypx[M]],!1,M,T)?(w.push(M),l.push({pointNumber:M,x:o.c2d(s[M]),y:a.c2d(c[M])})):y.push(M);if(g){var A=h.scatter2d;if(w.length||y.length){if(!h.selectBatch[p].length&&!h.unselectBatch[p].length){var k=new Array(h.count);k[p]=h.markerUnselectedOptions[p],A.update.apply(A,k)}}else{var C=new Array(h.count);C[p]=h.markerOptions[p],A.update.apply(A,C)}}return h.selectBatch[p]=w,h.unselectBatch[p]=y,v&&x(e),l}},{"../scatter/subtypes":951,"./edit_style":983}],991:[function(_,oe,ae){"use strict";var m=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../scattergeo/attributes"),b=_("../scatter/attributes"),e=_("../../plots/mapbox/layout_attributes"),o=_("../../plots/attributes"),a=_("../../components/colorscale/attributes"),l=_("../../lib/extend").extendFlat,i=_("../../plot_api/edit_types").overrideAll,d=T.line,u=T.marker;oe.exports=i({lon:T.lon,lat:T.lat,mode:l({},b.mode,{dflt:"markers"}),text:l({},b.text,{}),texttemplate:x({editType:"plot"},{keys:["lat","lon","text"]}),hovertext:l({},b.hovertext,{}),line:{color:d.color,width:d.width},connectgaps:b.connectgaps,marker:l({symbol:{valType:"string",dflt:"circle",arrayOk:!0},angle:{valType:"number",dflt:"auto",arrayOk:!0},allowoverlap:{valType:"boolean",dflt:!1},opacity:u.opacity,size:u.size,sizeref:u.sizeref,sizemin:u.sizemin,sizemode:u.sizemode},a("marker")),fill:T.fill,fillcolor:b.fillcolor,textfont:e.layers.symbol.textfont,textposition:e.layers.symbol.textposition,below:{valType:"string"},selected:{marker:b.selected.marker},unselected:{marker:b.unselected.marker},hoverinfo:l({},o.hoverinfo,{flags:["lon","lat","text","name"]}),hovertemplate:m()},"calc","nested")},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/mapbox/layout_attributes":615,"../../plots/template_attributes":633,"../scatter/attributes":926,"../scattergeo/attributes":968}],992:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../lib"),T=_("../../constants/numerical").BADNUM,b=_("../../lib/geojson_utils"),e=_("../../components/colorscale"),o=_("../../components/drawing"),a=_("../scatter/make_bubble_size_func"),l=_("../scatter/subtypes"),i=_("../../plots/mapbox/convert_text_opts"),d=_("../../components/fx/helpers").appendArrayPointValue,u=_("../../lib/svg_text_utils").NEWLINES,s=_("../../lib/svg_text_utils").BR_TAG_ALL;function c(){return{geojson:b.makeBlank(),layout:{visibility:"none"},paint:{}}}function h(g,f){return x.isArrayOrTypedArray(g)?f?function(w){return m(g[w])?+g[w]:0}:function(w){return g[w]}:g?function(){return g}:p}function p(){return""}function v(g){return g[0]===T}oe.exports=function(g,f){var w,y=f[0].trace,M=!0===y.visible&&0!==y._length,A="none"!==y.fill,k=l.hasLines(y),C=l.hasMarkers(y),P=l.hasText(y),D=C&&"circle"===y.marker.symbol,F=C&&"circle"!==y.marker.symbol,R=c(),L=c(),I=c(),B=c(),V={fill:R,line:L,circle:I,symbol:B};if(!M)return V;if((A||k)&&(w=b.calcTraceToLineCoords(f)),A&&(R.geojson=b.makePolygon(w),R.layout.visibility="visible",x.extendFlat(R.paint,{"fill-color":y.fillcolor})),k&&(L.geojson=b.makeLine(w),L.layout.visibility="visible",x.extendFlat(L.paint,{"line-width":y.line.width,"line-color":y.line.color,"line-opacity":y.opacity})),D){var Z=function(J){var $,Q,se,j,G=J[0].trace,W=G.marker,ie=G.selectedpoints,q=x.isArrayOrTypedArray(W.color),te=x.isArrayOrTypedArray(W.size),ne=x.isArrayOrTypedArray(W.opacity);function le(De){return G.opacity*De}q&&(Q=e.hasColorscale(G,"marker")?e.makeColorScaleFuncFromTrace(W):x.identity),te&&(se=a(G)),ne&&(j=function(De){return le(m(De)?+x.constrain(De,0,1):0)});var ue,Ce,de=[];for($=0;$<J.length;$++){var he=J[$],be=he.lonlat;if(!v(be)){var ge={};Q&&(ge.mcc=he.mcc=Q(he.mc)),se&&(ge.mrc=he.mrc=se(he.ms)),j&&(ge.mo=j(he.mo)),ie&&(ge.selected=he.selected||0),de.push({type:"Feature",geometry:{type:"Point",coordinates:be},properties:ge})}}if(ie)for(ue=o.makeSelectedPointStyleFns(G),$=0;$<de.length;$++){var we=de[$].properties;ue.selectedOpacityFn&&(we.mo=le(ue.selectedOpacityFn(we))),ue.selectedColorFn&&(we.mcc=ue.selectedColorFn(we)),ue.selectedSizeFn&&(we.mrc=ue.selectedSizeFn(we))}return{geojson:{type:"FeatureCollection",features:de},mcc:q||ue&&ue.selectedColorFn?{type:"identity",property:"mcc"}:W.color,mrc:te||ue&&ue.selectedSizeFn?{type:"identity",property:"mrc"}:(Ce=W.size,Ce/2),mo:ne||ue&&ue.selectedOpacityFn?{type:"identity",property:"mo"}:le(W.opacity)}}(f);I.geojson=Z.geojson,I.layout.visibility="visible",x.extendFlat(I.paint,{"circle-color":Z.mcc,"circle-radius":Z.mrc,"circle-opacity":Z.mo})}if((F||P)&&(B.geojson=function(J,$){for(var Q=$._fullLayout,se=J[0].trace,j=se.marker||{},G=j.symbol,W=j.angle,ie="circle"!==G?h(G):p,q="auto"!==W?h(W,!0):p,te=l.hasText(se)?h(se.text):p,ne=[],le=0;le<J.length;le++){var ue=J[le];if(!v(ue.lonlat)){var de,he=se.texttemplate;if(he){var be=Array.isArray(he)?he[le]||"":he,ge=se._module.formatLabels(ue,se,Q),we={};d(we,se,ue.i),de=x.texttemplateString(be,ge,Q._d3locale,we,ue,se._meta||{})}else de=te(le);de&&(de=de.replace(u,"").replace(s,"\n")),ne.push({type:"Feature",geometry:{type:"Point",coordinates:ue.lonlat},properties:{symbol:ie(le),angle:q(le),text:de}})}}return{type:"FeatureCollection",features:ne}}(f,g),x.extendFlat(B.layout,{visibility:"visible","icon-image":"{symbol}-15","text-field":"{text}"}),F&&(x.extendFlat(B.layout,{"icon-size":y.marker.size/10}),"angle"in y.marker&&"auto"!==y.marker.angle&&x.extendFlat(B.layout,{"icon-rotate":{type:"identity",property:"angle"},"icon-rotation-alignment":"map"}),B.layout["icon-allow-overlap"]=y.marker.allowoverlap,x.extendFlat(B.paint,{"icon-opacity":y.opacity*y.marker.opacity,"icon-color":y.marker.color})),P)){var ee=i(y.textposition,(y.marker||{}).size);x.extendFlat(B.layout,{"text-size":y.textfont.size,"text-anchor":ee.anchor,"text-offset":ee.offset}),x.extendFlat(B.paint,{"text-color":y.textfont.color,"text-opacity":y.opacity})}return V}},{"../../components/colorscale":378,"../../components/drawing":388,"../../components/fx/helpers":402,"../../constants/numerical":479,"../../lib":503,"../../lib/geojson_utils":497,"../../lib/svg_text_utils":529,"../../plots/mapbox/convert_text_opts":612,"../scatter/make_bubble_size_func":943,"../scatter/subtypes":951,"fast-isnumeric":190}],993:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../scatter/subtypes"),T=_("../scatter/marker_defaults"),b=_("../scatter/line_defaults"),e=_("../scatter/text_defaults"),o=_("../scatter/fillcolor_defaults"),a=_("./attributes");oe.exports=function(l,i,d,u){function s(h,p){return m.coerce(l,i,a,h,p)}if(p=i,g=(v=s)("lon")||[],f=v("lat")||[],w=Math.min(g.length,f.length),p._length=w,w){if(s("text"),s("texttemplate"),s("hovertext"),s("hovertemplate"),s("mode"),s("below"),x.hasLines(i)&&(b(l,i,d,u,s,{noDash:!0}),s("connectgaps")),x.hasMarkers(i)){T(l,i,d,u,s,{noLine:!0}),s("marker.allowoverlap"),s("marker.angle");var c=i.marker;"circle"!==c.symbol&&(m.isArrayOrTypedArray(c.size)&&(c.size=c.size[0]),m.isArrayOrTypedArray(c.color)&&(c.color=c.color[0]))}x.hasText(i)&&e(l,i,u,s,{noSelect:!0}),s("fill"),"none"!==i.fill&&o(l,i,d,s),m.coerceSelectionMarkerOpacity(i,s)}else i.visible=!1;var p,v,g,f,w}},{"../../lib":503,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":991}],994:[function(_,oe,ae){"use strict";oe.exports=function(m,x){return m.lon=x.lon,m.lat=x.lat,m}},{}],995:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/axes");oe.exports=function(x,T,b){var e={},o=b[T.subplot]._subplot.mockAxis,a=x.lonlat;return e.lonLabel=m.tickText(o,o.c2l(a[0]),!0).text,e.latLabel=m.tickText(o,o.c2l(a[1]),!0).text,e}},{"../../plots/cartesian/axes":554}],996:[function(_,oe,ae){"use strict";var m=_("../../components/fx"),x=_("../../lib"),T=_("../scatter/get_trace_color"),b=x.fillText,e=_("../../constants/numerical").BADNUM;function o(a,l,i){if(!a.hovertemplate){var d=(l.hi||a.hoverinfo).split("+"),u=-1!==d.indexOf("all"),s=-1!==d.indexOf("lon"),c=-1!==d.indexOf("lat"),h=l.lonlat,p=[];return u||s&&c?p.push("("+v(h[1])+", "+v(h[0])+")"):s?p.push(i.lon+v(h[0])):c&&p.push(i.lat+v(h[1])),(u||-1!==d.indexOf("text"))&&b(l,a,p),p.join("<br>")}function v(g){return g+"\xb0"}}oe.exports={hoverPoints:function(a,l,i){var d=a.cd,u=d[0].trace,s=a.xa,c=a.ya,h=a.subplot,p=360*(l>=0?Math.floor((l+180)/360):Math.ceil((l-180)/360)),v=l-p;if(m.getClosest(d,function(P){var D=P.lonlat;if(D[0]===e)return 1/0;var F=x.modHalf(D[0],360),R=D[1],L=h.project([F,R]),I=L.x-s.c2p([v,R]),B=L.y-c.c2p([F,i]),V=Math.max(3,P.mrc||0);return Math.max(Math.sqrt(I*I+B*B)-V,1-3/V)},a),!1!==a.index){var g=d[a.index],f=g.lonlat,w=[x.modHalf(f[0],360)+p,f[1]],y=s.c2p(w),M=c.c2p(w),A=g.mrc||1;a.x0=y-A,a.x1=y+A,a.y0=M-A,a.y1=M+A;var k={};k[u.subplot]={_subplot:h};var C=u._module.formatLabels(g,u,k);return a.lonLabel=C.lonLabel,a.latLabel=C.latLabel,a.color=T(u,g),a.extraText=o(u,g,d[0].t.labels),a.hovertemplate=u.hovertemplate,[a]}},getExtraText:o}},{"../../components/fx":406,"../../constants/numerical":479,"../../lib":503,"../scatter/get_trace_color":936}],997:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("../scattergeo/calc"),plot:_("./plot"),hoverPoints:_("./hover").hoverPoints,eventData:_("./event_data"),selectPoints:_("./select"),styleOnSelect:function(m,x){x&&x[0].trace._glTrace.update(x)},moduleType:"trace",name:"scattermapbox",basePlotModule:_("../../plots/mapbox"),categories:["mapbox","gl","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/mapbox":613,"../scatter/marker_colorbar":944,"../scattergeo/calc":969,"./attributes":991,"./defaults":993,"./event_data":994,"./format_labels":995,"./hover":996,"./plot":998,"./select":999}],998:[function(_,oe,ae){"use strict";var m=_("./convert"),x=_("../../plots/mapbox/constants").traceLayerPrefix,T=["fill","line","circle","symbol"];function b(o,a){this.type="scattermapbox",this.subplot=o,this.uid=a,this.sourceIds={fill:"source-"+a+"-fill",line:"source-"+a+"-line",circle:"source-"+a+"-circle",symbol:"source-"+a+"-symbol"},this.layerIds={fill:x+a+"-fill",line:x+a+"-line",circle:x+a+"-circle",symbol:x+a+"-symbol"},this.below=null}var e=b.prototype;e.addSource=function(o,a){this.subplot.map.addSource(this.sourceIds[o],{type:"geojson",data:a.geojson})},e.setSourceData=function(o,a){this.subplot.map.getSource(this.sourceIds[o]).setData(a.geojson)},e.addLayer=function(o,a,l){this.subplot.addLayer({type:o,id:this.layerIds[o],source:this.sourceIds[o],layout:a.layout,paint:a.paint},l)},e.update=function(o){var a,l,i,d=this.subplot,u=d.map,s=m(d.gd,o),c=d.belowLookup["trace-"+this.uid];if(c!==this.below){for(a=T.length-1;a>=0;a--)u.removeLayer(this.layerIds[l=T[a]]);for(a=0;a<T.length;a++)i=s[l=T[a]],this.addLayer(l,i,c);this.below=c}for(a=0;a<T.length;a++)i=s[l=T[a]],d.setOptions(this.layerIds[l],"setLayoutProperty",i.layout),"visible"===i.layout.visibility&&(this.setSourceData(l,i),d.setOptions(this.layerIds[l],"setPaintProperty",i.paint));o[0].trace._glTrace=this},e.dispose=function(){for(var o=this.subplot.map,a=T.length-1;a>=0;a--){var l=T[a];o.removeLayer(this.layerIds[l]),o.removeSource(this.sourceIds[l])}},oe.exports=function(o,a){for(var l=a[0].trace,i=new b(o,l.uid),d=m(o.gd,a),u=i.below=o.belowLookup["trace-"+l.uid],s=0;s<T.length;s++){var c=T[s],h=d[c];i.addSource(c,h),i.addLayer(c,h,u)}return a[0].trace._glTrace=i,i}},{"../../plots/mapbox/constants":611,"./convert":992}],999:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../scatter/subtypes"),T=_("../../constants/numerical").BADNUM;oe.exports=function(b,e){var o,a=b.cd,l=b.xaxis,i=b.yaxis,d=[];if(!x.hasMarkers(a[0].trace))return[];if(!1===e)for(o=0;o<a.length;o++)a[o].selected=0;else for(o=0;o<a.length;o++){var s=a[o],c=s.lonlat;if(c[0]!==T){var h=[m.modHalf(c[0],360),c[1]],p=[l.c2p(h),i.c2p(h)];e.contains(p,null,o,b)?(d.push({pointNumber:o,lon:c[0],lat:c[1]}),s.selected=1):s.selected=0}}return d}},{"../../constants/numerical":479,"../../lib":503,"../scatter/subtypes":951}],1e3:[function(_,oe,ae){"use strict";var m=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../../lib/extend").extendFlat,b=_("../scatter/attributes"),e=_("../../plots/attributes"),o=b.line;oe.exports={mode:b.mode,r:{valType:"data_array",editType:"calc+clearAxisTypes"},theta:{valType:"data_array",editType:"calc+clearAxisTypes"},r0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dr:{valType:"number",dflt:1,editType:"calc"},theta0:{valType:"any",dflt:0,editType:"calc+clearAxisTypes"},dtheta:{valType:"number",editType:"calc"},thetaunit:{valType:"enumerated",values:["radians","degrees","gradians"],dflt:"degrees",editType:"calc+clearAxisTypes"},text:b.text,texttemplate:x({editType:"plot"},{keys:["r","theta","text"]}),hovertext:b.hovertext,line:{color:o.color,width:o.width,dash:o.dash,shape:T({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:b.connectgaps,marker:b.marker,cliponaxis:T({},b.cliponaxis,{dflt:!1}),textposition:b.textposition,textfont:b.textfont,fill:T({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:b.fillcolor,hoverinfo:T({},e.hoverinfo,{flags:["r","theta","text","name"]}),hoveron:b.hoveron,hovertemplate:m(),selected:b.selected,unselected:b.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1001:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../constants/numerical").BADNUM,T=_("../../plots/cartesian/axes"),b=_("../scatter/colorscale_calc"),e=_("../scatter/arrays_to_calcdata"),o=_("../scatter/calc_selection"),a=_("../scatter/calc").calcMarkerSize;oe.exports=function(l,i){for(var d=l._fullLayout,u=i.subplot,s=d[u].radialaxis,c=d[u].angularaxis,h=s.makeCalcdata(i,"r"),p=c.makeCalcdata(i,"theta"),v=i._length,g=new Array(v),f=0;f<v;f++){var w=h[f],y=p[f],M=g[f]={};m(w)&&m(y)?(M.r=w,M.theta=y):M.r=x}var A=a(i,v);return i._extremes.x=T.findExtremes(s,h,{ppad:A}),b(l,i),e(g,i),o(g,i),g}},{"../../constants/numerical":479,"../../plots/cartesian/axes":554,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1002:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../scatter/subtypes"),T=_("../scatter/marker_defaults"),b=_("../scatter/line_defaults"),e=_("../scatter/line_shape_defaults"),o=_("../scatter/text_defaults"),a=_("../scatter/fillcolor_defaults"),l=_("../scatter/constants").PTS_LINESONLY,i=_("./attributes");function d(u,s,c,h){var p,v=h("r"),g=h("theta");if(v)g?p=Math.min(v.length,g.length):(p=v.length,h("theta0"),h("dtheta"));else{if(!g)return 0;p=s.theta.length,h("r0"),h("dr")}return s._length=p,p}oe.exports={handleRThetaDefaults:d,supplyDefaults:function(u,s,c,h){function p(f,w){return m.coerce(u,s,i,f,w)}var v=d(0,s,0,p);if(v){p("thetaunit"),p("mode",v<l?"lines+markers":"lines"),p("text"),p("hovertext"),"fills"!==s.hoveron&&p("hovertemplate"),x.hasLines(s)&&(b(u,s,c,h,p),e(u,s,p),p("connectgaps")),x.hasMarkers(s)&&T(u,s,c,h,p,{gradient:!0}),x.hasText(s)&&(p("texttemplate"),o(u,s,h,p));var g=[];(x.hasMarkers(s)||x.hasText(s))&&(p("cliponaxis"),p("marker.maxdisplayed"),g.push("points")),p("fill"),"none"!==s.fill&&(a(u,s,c,p),x.hasLines(s)||e(u,s,p)),"tonext"!==s.fill&&"toself"!==s.fill||g.push("fills"),p("hoveron",g.join("+")||"points"),m.coerceSelectionMarkerOpacity(s,p)}else s.visible=!1}}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1e3}],1003:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../plots/cartesian/axes");oe.exports=function(T,b,e){var o,a,l={},i=e[b.subplot]._subplot;i?(o=i.radialAxis,a=i.angularAxis):(o=(i=e[b.subplot]).radialaxis,a=i.angularaxis);var d=o.c2l(T.r);l.rLabel=x.tickText(o,d,!0).text;var u="degrees"===a.thetaunit?m.rad2deg(T.theta):T.theta;return l.thetaLabel=x.tickText(a,u,!0).text,l}},{"../../lib":503,"../../plots/cartesian/axes":554}],1004:[function(_,oe,ae){"use strict";var m=_("../scatter/hover");function x(T,b,e,o){var a=e.radialAxis,l=e.angularAxis;a._hovertitle="r",l._hovertitle="\u03b8";var i={};i[b.subplot]={_subplot:e};var d=b._module.formatLabels(T,b,i);o.rLabel=d.rLabel,o.thetaLabel=d.thetaLabel;var s=[];function c(p,v){s.push(p._hovertitle+": "+v)}if(!b.hovertemplate){var h=(T.hi||b.hoverinfo).split("+");-1!==h.indexOf("all")&&(h=["r","theta","text"]),-1!==h.indexOf("r")&&c(a,o.rLabel),-1!==h.indexOf("theta")&&c(l,o.thetaLabel),-1!==h.indexOf("text")&&o.text&&(s.push(o.text),delete o.text),o.extraText=s.join("<br>")}}oe.exports={hoverPoints:function(T,b,e,o){var a=m(T,b,e,o);if(a&&!1!==a[0].index){var l=a[0];if(void 0===l.index)return a;var i=T.subplot,d=l.cd[l.index],u=l.trace;if(i.isPtInside(d))return l.xLabelVal=void 0,l.yLabelVal=void 0,x(d,u,i,l),l.hovertemplate=u.hovertemplate,a}},makeHoverPointText:x}},{"../scatter/hover":937}],1005:[function(_,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"scatterpolar",basePlotModule:_("../../plots/polar"),categories:["polar","symbols","showLegend","scatter-like"],attributes:_("./attributes"),supplyDefaults:_("./defaults").supplyDefaults,colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("./calc"),plot:_("./plot"),style:_("../scatter/style").style,styleOnSelect:_("../scatter/style").styleOnSelect,hoverPoints:_("./hover").hoverPoints,selectPoints:_("../scatter/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1e3,"./calc":1001,"./defaults":1002,"./format_labels":1003,"./hover":1004,"./plot":1006}],1006:[function(_,oe,ae){"use strict";var m=_("../scatter/plot"),x=_("../../constants/numerical").BADNUM;oe.exports=function(T,b,e){for(var o=b.layers.frontplot.select("g.scatterlayer"),a={xaxis:b.xaxis,yaxis:b.yaxis,plot:b.framework,layerClipId:b._hasClipOnAxisFalse?b.clipIds.forTraces:null},l=b.radialAxis,i=b.angularAxis,d=0;d<e.length;d++)for(var u=e[d],s=0;s<u.length;s++){var c=u[s],h=c.r;if(h===x)c.x=c.y=x;else{var p=l.c2g(h),v=i.c2g(c.theta);c.x=p*Math.cos(v),c.y=p*Math.sin(v)}}m(T,a,e,o)}},{"../../constants/numerical":479,"../scatter/plot":947}],1007:[function(_,oe,ae){"use strict";var m=_("../scatterpolar/attributes"),x=_("../scattergl/attributes"),T=_("../../plots/template_attributes").texttemplateAttrs;oe.exports={mode:m.mode,r:m.r,theta:m.theta,r0:m.r0,dr:m.dr,theta0:m.theta0,dtheta:m.dtheta,thetaunit:m.thetaunit,text:m.text,texttemplate:T({editType:"plot"},{keys:["r","theta","text"]}),hovertext:m.hovertext,hovertemplate:m.hovertemplate,line:x.line,connectgaps:x.connectgaps,marker:x.marker,fill:x.fill,fillcolor:x.fillcolor,textposition:x.textposition,textfont:x.textfont,hoverinfo:m.hoverinfo,selected:m.selected,unselected:m.unselected}},{"../../plots/template_attributes":633,"../scattergl/attributes":978,"../scatterpolar/attributes":1e3}],1008:[function(_,oe,ae){"use strict";var m=_("../scatter/colorscale_calc"),x=_("../scatter/calc").calcMarkerSize,T=_("../scattergl/convert"),b=_("../../plots/cartesian/axes"),e=_("../scattergl/constants").TOO_MANY_POINTS;oe.exports=function(o,a){var l=o._fullLayout,i=a.subplot,d=l[i].radialaxis,u=l[i].angularaxis,s=a._r=d.makeCalcdata(a,"r"),c=a._theta=u.makeCalcdata(a,"theta"),h=a._length,p={};h<s.length&&(s=s.slice(0,h)),h<c.length&&(c=c.slice(0,h)),p.r=s,p.theta=c,m(o,a);var v,g=p.opts=T.style(o,a);return h<e?v=x(a,h):g.marker&&(v=2*(g.marker.sizeAvg||Math.max(g.marker.size,3))),a._extremes.x=b.findExtremes(d,s,{ppad:v}),[{x:!1,y:!1,t:p,trace:a}]}},{"../../plots/cartesian/axes":554,"../scatter/calc":927,"../scatter/colorscale_calc":929,"../scattergl/constants":980,"../scattergl/convert":981}],1009:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../scatter/subtypes"),T=_("../scatterpolar/defaults").handleRThetaDefaults,b=_("../scatter/marker_defaults"),e=_("../scatter/line_defaults"),o=_("../scatter/text_defaults"),a=_("../scatter/fillcolor_defaults"),l=_("../scatter/constants").PTS_LINESONLY,i=_("./attributes");oe.exports=function(d,u,s,c){function h(v,g){return m.coerce(d,u,i,v,g)}var p=T(d,u,c,h);p?(h("thetaunit"),h("mode",p<l?"lines+markers":"lines"),h("text"),h("hovertext"),"fills"!==u.hoveron&&h("hovertemplate"),x.hasLines(u)&&(e(d,u,s,c,h),h("connectgaps")),x.hasMarkers(u)&&b(d,u,s,c,h),x.hasText(u)&&(h("texttemplate"),o(d,u,c,h)),h("fill"),"none"!==u.fill&&a(d,u,s,h),m.coerceSelectionMarkerOpacity(u,h)):u.visible=!1}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"../scatterpolar/defaults":1002,"./attributes":1007}],1010:[function(_,oe,ae){"use strict";var m=_("../scatterpolar/format_labels");oe.exports=function(x,T,b){var e=x.i;return"r"in x||(x.r=T._r[e]),"theta"in x||(x.theta=T._theta[e]),m(x,T,b)}},{"../scatterpolar/format_labels":1003}],1011:[function(_,oe,ae){"use strict";var m=_("../scattergl/hover"),x=_("../scatterpolar/hover").makeHoverPointText;oe.exports={hoverPoints:function(T,b,e,o){var a=T.cd[0].t,l=a.r,i=a.theta,d=m.hoverPoints(T,b,e,o);if(d&&!1!==d[0].index){var u=d[0];if(void 0===u.index)return d;var s=T.subplot,c=u.cd[u.index],h=u.trace;if(c.r=l[u.index],c.theta=i[u.index],s.isPtInside(c))return u.xLabelVal=void 0,u.yLabelVal=void 0,x(c,h,s,u),d}}}},{"../scattergl/hover":986,"../scatterpolar/hover":1004}],1012:[function(_,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"scatterpolargl",basePlotModule:_("../../plots/polar"),categories:["gl","regl","polar","symbols","showLegend","scatter-like"],attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("./calc"),plot:_("./plot"),hoverPoints:_("./hover").hoverPoints,selectPoints:_("../scattergl/select"),meta:{}}},{"../../plots/polar":622,"../scatter/marker_colorbar":944,"../scattergl/select":990,"./attributes":1007,"./calc":1008,"./defaults":1009,"./format_labels":1010,"./hover":1011,"./plot":1013}],1013:[function(_,oe,ae){"use strict";var m=_("@plotly/point-cluster"),x=_("fast-isnumeric"),T=_("../scattergl/plot"),b=_("../scattergl/scene_update"),e=_("../scattergl/convert"),o=_("../../lib"),a=_("../scattergl/constants").TOO_MANY_POINTS;oe.exports=function(l,i,d){if(d.length){var u=i.radialAxis,s=i.angularAxis,c=b(l,i);return d.forEach(function(h){if(h&&h[0]&&h[0].trace){var p,v=h[0],g=v.trace,f=v.t,w=g._length,y=f.r,M=f.theta,A=f.opts,k=y.slice(),C=M.slice();for(p=0;p<y.length;p++)i.isPtInside({r:y[p],theta:M[p]})||(k[p]=NaN,C[p]=NaN);var P=new Array(2*w),D=Array(w),F=Array(w);for(p=0;p<w;p++){var R,L,I=k[p];if(x(I)){var B=u.c2g(I),V=s.c2g(C[p],g.thetaunit);R=B*Math.cos(V),L=B*Math.sin(V)}else R=L=NaN;D[p]=P[2*p]=R,F[p]=P[2*p+1]=L}f.tree=m(P),A.marker&&w>=a&&(A.marker.cluster=f.tree),A.marker&&(A.markerSel.positions=A.markerUnsel.positions=A.marker.positions=P),A.line&&P.length>1&&o.extendFlat(A.line,e.linePositions(l,g,P)),A.text&&(o.extendFlat(A.text,{positions:P},e.textPosition(l,g,A.text,A.marker)),o.extendFlat(A.textSel,{positions:P},e.textPosition(l,g,A.text,A.markerSel)),o.extendFlat(A.textUnsel,{positions:P},e.textPosition(l,g,A.text,A.markerUnsel))),A.fill&&!c.fill2d&&(c.fill2d=!0),A.marker&&!c.scatter2d&&(c.scatter2d=!0),A.line&&!c.line2d&&(c.line2d=!0),A.text&&!c.glText&&(c.glText=!0),c.lineOptions.push(A.line),c.fillOptions.push(A.fill),c.markerOptions.push(A.marker),c.markerSelectedOptions.push(A.markerSel),c.markerUnselectedOptions.push(A.markerUnsel),c.textOptions.push(A.text),c.textSelectedOptions.push(A.textSel),c.textUnselectedOptions.push(A.textUnsel),c.selectBatch.push([]),c.unselectBatch.push([]),f.x=D,f.y=F,f.rawx=D,f.rawy=F,f.r=y,f.theta=M,f.positions=P,f._scene=c,f.index=c.count,c.count++}}),T(l,i,d)}}},{"../../lib":503,"../scattergl/constants":980,"../scattergl/convert":981,"../scattergl/plot":988,"../scattergl/scene_update":989,"@plotly/point-cluster":59,"fast-isnumeric":190}],1014:[function(_,oe,ae){"use strict";var m=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../../lib/extend").extendFlat,b=_("../scatter/attributes"),e=_("../../plots/attributes"),o=b.line;oe.exports={mode:b.mode,real:{valType:"data_array",editType:"calc+clearAxisTypes"},imag:{valType:"data_array",editType:"calc+clearAxisTypes"},text:b.text,texttemplate:x({editType:"plot"},{keys:["real","imag","text"]}),hovertext:b.hovertext,line:{color:o.color,width:o.width,dash:o.dash,shape:T({},o.shape,{values:["linear","spline"]}),smoothing:o.smoothing,editType:"calc"},connectgaps:b.connectgaps,marker:b.marker,cliponaxis:T({},b.cliponaxis,{dflt:!1}),textposition:b.textposition,textfont:b.textfont,fill:T({},b.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:b.fillcolor,hoverinfo:T({},e.hoverinfo,{flags:["real","imag","text","name"]}),hoveron:b.hoveron,hovertemplate:m(),selected:b.selected,unselected:b.unselected}},{"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1015:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../../constants/numerical").BADNUM,T=_("../scatter/colorscale_calc"),b=_("../scatter/arrays_to_calcdata"),e=_("../scatter/calc_selection"),o=_("../scatter/calc").calcMarkerSize;oe.exports=function(a,l){for(var i=a._fullLayout,d=l.subplot,s=i[d].imaginaryaxis,c=i[d].realaxis.makeCalcdata(l,"real"),h=s.makeCalcdata(l,"imag"),p=l._length,v=new Array(p),g=0;g<p;g++){var f=c[g],w=h[g],y=v[g]={};m(f)&&m(w)?(y.real=f,y.imag=w):y.real=x}return o(l,p),T(a,l),b(v,l),e(v,l),v}},{"../../constants/numerical":479,"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1016:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../scatter/subtypes"),T=_("../scatter/marker_defaults"),b=_("../scatter/line_defaults"),e=_("../scatter/line_shape_defaults"),o=_("../scatter/text_defaults"),a=_("../scatter/fillcolor_defaults"),l=_("../scatter/constants").PTS_LINESONLY,i=_("./attributes");oe.exports=function(d,u,s,c){function h(g,f){return m.coerce(d,u,i,g,f)}var f,y,M,A,k,p=(f=u,A=(y=h)("real"),k=y("imag"),A&&k&&(M=Math.min(A.length,k.length)),f._length=M,M);if(p){h("mode",p<l?"lines+markers":"lines"),h("text"),h("hovertext"),"fills"!==u.hoveron&&h("hovertemplate"),x.hasLines(u)&&(b(d,u,s,c,h),e(d,u,h),h("connectgaps")),x.hasMarkers(u)&&T(d,u,s,c,h,{gradient:!0}),x.hasText(u)&&(h("texttemplate"),o(d,u,c,h));var v=[];(x.hasMarkers(u)||x.hasText(u))&&(h("cliponaxis"),h("marker.maxdisplayed"),v.push("points")),h("fill"),"none"!==u.fill&&(a(d,u,s,h),x.hasLines(u)||e(d,u,h)),"tonext"!==u.fill&&"toself"!==u.fill||v.push("fills"),h("hoveron",v.join("+")||"points"),m.coerceSelectionMarkerOpacity(u,h)}else u.visible=!1}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1014}],1017:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/axes");oe.exports=function(x,T,b){var e={},o=b[T.subplot]._subplot;return e.realLabel=m.tickText(o.radialAxis,x.real,!0).text,e.imagLabel=m.tickText(o.angularAxis,x.imag,!0).text,e}},{"../../plots/cartesian/axes":554}],1018:[function(_,oe,ae){"use strict";var m=_("../scatter/hover");function x(T,b,e,o){var a=e.radialAxis,l=e.angularAxis;a._hovertitle="real",l._hovertitle="imag";var i={};i[b.subplot]={_subplot:e};var d=b._module.formatLabels(T,b,i);o.realLabel=d.realLabel,o.imagLabel=d.imagLabel;var s=[];function c(p,v){s.push(p._hovertitle+": "+v)}if(!b.hovertemplate){var h=(T.hi||b.hoverinfo).split("+");-1!==h.indexOf("all")&&(h=["real","imag","text"]),-1!==h.indexOf("real")&&c(a,o.realLabel),-1!==h.indexOf("imag")&&c(l,o.imagLabel),-1!==h.indexOf("text")&&o.text&&(s.push(o.text),delete o.text),o.extraText=s.join("<br>")}}oe.exports={hoverPoints:function(T,b,e,o){var a=m(T,b,e,o);if(a&&!1!==a[0].index){var l=a[0];if(void 0===l.index)return a;var i=T.subplot,d=l.cd[l.index],u=l.trace;if(i.isPtInside(d))return l.xLabelVal=void 0,l.yLabelVal=void 0,x(d,u,i,l),l.hovertemplate=u.hovertemplate,a}},makeHoverPointText:x}},{"../scatter/hover":937}],1019:[function(_,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"scattersmith",basePlotModule:_("../../plots/smith"),categories:["smith","symbols","showLegend","scatter-like"],attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("./calc"),plot:_("./plot"),style:_("../scatter/style").style,styleOnSelect:_("../scatter/style").styleOnSelect,hoverPoints:_("./hover").hoverPoints,selectPoints:_("../scatter/select"),meta:{}}},{"../../plots/smith":629,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1014,"./calc":1015,"./defaults":1016,"./format_labels":1017,"./hover":1018,"./plot":1020}],1020:[function(_,oe,ae){"use strict";var m=_("../scatter/plot"),x=_("../../constants/numerical").BADNUM,T=_("../../plots/smith/helpers").smith;oe.exports=function(b,e,o){for(var a=e.layers.frontplot.select("g.scatterlayer"),l={xaxis:e.xaxis,yaxis:e.yaxis,plot:e.framework,layerClipId:e._hasClipOnAxisFalse?e.clipIds.forTraces:null},i=0;i<o.length;i++)for(var d=o[i],u=0;u<d.length;u++){var s=d[u],c=s.real;if(c===x)s.x=s.y=x;else{var h=T([c,s.imag]);s.x=h[0],s.y=h[1]}}m(b,l,o,a)}},{"../../constants/numerical":479,"../../plots/smith/helpers":628,"../scatter/plot":947}],1021:[function(_,oe,ae){"use strict";var m=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../scatter/attributes"),b=_("../../plots/attributes"),e=_("../../components/colorscale/attributes"),o=_("../../components/drawing/attributes").dash,a=_("../../lib/extend").extendFlat,l=T.marker,i=T.line,d=l.line;oe.exports={a:{valType:"data_array",editType:"calc"},b:{valType:"data_array",editType:"calc"},c:{valType:"data_array",editType:"calc"},sum:{valType:"number",dflt:0,min:0,editType:"calc"},mode:a({},T.mode,{dflt:"markers"}),text:a({},T.text,{}),texttemplate:x({editType:"plot"},{keys:["a","b","c","text"]}),hovertext:a({},T.hovertext,{}),line:{color:i.color,width:i.width,dash:o,shape:a({},i.shape,{values:["linear","spline"]}),smoothing:i.smoothing,editType:"calc"},connectgaps:T.connectgaps,cliponaxis:T.cliponaxis,fill:a({},T.fill,{values:["none","toself","tonext"],dflt:"none"}),fillcolor:T.fillcolor,marker:a({symbol:l.symbol,opacity:l.opacity,maxdisplayed:l.maxdisplayed,size:l.size,sizeref:l.sizeref,sizemin:l.sizemin,sizemode:l.sizemode,line:a({width:d.width,editType:"calc"},e("marker.line")),gradient:l.gradient,editType:"calc"},e("marker")),textfont:T.textfont,textposition:T.textposition,selected:T.selected,unselected:T.unselected,hoverinfo:a({},b.hoverinfo,{flags:["a","b","c","text","name"]}),hoveron:T.hoveron,hovertemplate:m()}},{"../../components/colorscale/attributes":373,"../../components/drawing/attributes":387,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/template_attributes":633,"../scatter/attributes":926}],1022:[function(_,oe,ae){"use strict";var m=_("fast-isnumeric"),x=_("../scatter/colorscale_calc"),T=_("../scatter/arrays_to_calcdata"),b=_("../scatter/calc_selection"),e=_("../scatter/calc").calcMarkerSize,o=["a","b","c"],a={a:["b","c"],b:["a","c"],c:["a","b"]};oe.exports=function(l,i){var d,u,s,c,h,p,v=l._fullLayout[i.subplot].sum,g=i.sum||v,f={a:i.a,b:i.b,c:i.c};for(d=0;d<o.length;d++)if(!f[s=o[d]]){for(h=f[a[s][0]],p=f[a[s][1]],c=new Array(h.length),u=0;u<h.length;u++)c[u]=g-h[u]-p[u];f[s]=c}var w,y,M,A,P=i._length,D=new Array(P);for(d=0;d<P;d++)y=f.b[d],M=f.c[d],m(w=f.a[d])&&m(y)&&m(M)?(1!=(A=v/((w=+w)+(y=+y)+(M=+M)))&&(w*=A,y*=A,M*=A),D[d]={x:M-y,y:w,a:w,b:y,c:M}):D[d]={x:!1,y:!1};return e(i,P),x(l,i),T(D,i),b(D,i),D}},{"../scatter/arrays_to_calcdata":925,"../scatter/calc":927,"../scatter/calc_selection":928,"../scatter/colorscale_calc":929,"fast-isnumeric":190}],1023:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../scatter/constants"),T=_("../scatter/subtypes"),b=_("../scatter/marker_defaults"),e=_("../scatter/line_defaults"),o=_("../scatter/line_shape_defaults"),a=_("../scatter/text_defaults"),l=_("../scatter/fillcolor_defaults"),i=_("./attributes");oe.exports=function(d,u,s,c){function h(y,M){return m.coerce(d,u,i,y,M)}var p,v=h("a"),g=h("b"),f=h("c");if(v?(p=v.length,g?(p=Math.min(p,g.length),f&&(p=Math.min(p,f.length))):p=f?Math.min(p,f.length):0):g&&f&&(p=Math.min(g.length,f.length)),p){u._length=p,h("sum"),h("text"),h("hovertext"),"fills"!==u.hoveron&&h("hovertemplate"),h("mode",p<x.PTS_LINESONLY?"lines+markers":"lines"),T.hasLines(u)&&(e(d,u,s,c,h),o(d,u,h),h("connectgaps")),T.hasMarkers(u)&&b(d,u,s,c,h,{gradient:!0}),T.hasText(u)&&(h("texttemplate"),a(d,u,c,h));var w=[];(T.hasMarkers(u)||T.hasText(u))&&(h("cliponaxis"),h("marker.maxdisplayed"),w.push("points")),h("fill"),"none"!==u.fill&&(l(d,u,s,h),T.hasLines(u)||o(d,u,h)),"tonext"!==u.fill&&"toself"!==u.fill||w.push("fills"),h("hoveron",w.join("+")||"points"),m.coerceSelectionMarkerOpacity(u,h)}else u.visible=!1}},{"../../lib":503,"../scatter/constants":930,"../scatter/fillcolor_defaults":934,"../scatter/line_defaults":939,"../scatter/line_shape_defaults":941,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scatter/text_defaults":952,"./attributes":1021}],1024:[function(_,oe,ae){"use strict";oe.exports=function(m,x,T,b,e){if(x.xa&&(m.xaxis=x.xa),x.ya&&(m.yaxis=x.ya),b[e]){var o=b[e];m.a=o.a,m.b=o.b,m.c=o.c}else m.a=x.a,m.b=x.b,m.c=x.c;return m}},{}],1025:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/axes");oe.exports=function(x,T,b){var e={},o=b[T.subplot]._subplot;return e.aLabel=m.tickText(o.aaxis,x.a,!0).text,e.bLabel=m.tickText(o.baxis,x.b,!0).text,e.cLabel=m.tickText(o.caxis,x.c,!0).text,e}},{"../../plots/cartesian/axes":554}],1026:[function(_,oe,ae){"use strict";var m=_("../scatter/hover");oe.exports=function(x,T,b,e){var o=m(x,T,b,e);if(o&&!1!==o[0].index){var a=o[0];if(void 0===a.index){var i=x.xa._length,d=i*(1-a.y0/x.ya._length)/2,u=i-d;return a.x0=Math.max(Math.min(a.x0,u),d),a.x1=Math.max(Math.min(a.x1,u),d),o}var s=a.cd[a.index],c=a.trace,h=a.subplot;a.a=s.a,a.b=s.b,a.c=s.c,a.xLabelVal=void 0,a.yLabelVal=void 0;var p={};p[c.subplot]={_subplot:h};var v=c._module.formatLabels(s,c,p);a.aLabel=v.aLabel,a.bLabel=v.bLabel,a.cLabel=v.cLabel;var f=[];if(!c.hovertemplate){var w=(s.hi||c.hoverinfo).split("+");-1!==w.indexOf("all")&&(w=["a","b","c"]),-1!==w.indexOf("a")&&y(h.aaxis,a.aLabel),-1!==w.indexOf("b")&&y(h.baxis,a.bLabel),-1!==w.indexOf("c")&&y(h.caxis,a.cLabel)}return a.extraText=f.join("<br>"),a.hovertemplate=c.hovertemplate,o}function y(M,A){f.push(M._hovertitle+": "+A)}}},{"../scatter/hover":937}],1027:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../scatter/marker_colorbar"),formatLabels:_("./format_labels"),calc:_("./calc"),plot:_("./plot"),style:_("../scatter/style").style,styleOnSelect:_("../scatter/style").styleOnSelect,hoverPoints:_("./hover"),selectPoints:_("../scatter/select"),eventData:_("./event_data"),moduleType:"trace",name:"scatterternary",basePlotModule:_("../../plots/ternary"),categories:["ternary","symbols","showLegend","scatter-like"],meta:{}}},{"../../plots/ternary":634,"../scatter/marker_colorbar":944,"../scatter/select":948,"../scatter/style":950,"./attributes":1021,"./calc":1022,"./defaults":1023,"./event_data":1024,"./format_labels":1025,"./hover":1026,"./plot":1028}],1028:[function(_,oe,ae){"use strict";var m=_("../scatter/plot");oe.exports=function(x,T,b){var e=T.plotContainer;e.select(".scatterlayer").selectAll("*").remove();var o={xaxis:T.xaxis,yaxis:T.yaxis,plot:e,layerClipId:T._hasClipOnAxisFalse?T.clipIdRelative:null},a=T.layers.frontplot.select("g.scatterlayer");m(x,o,b,a)}},{"../scatter/plot":947}],1029:[function(_,oe,ae){"use strict";var m=_("../scatter/attributes"),x=_("../../components/colorscale/attributes"),T=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=_("../../plots/template_attributes").hovertemplateAttrs,e=_("../scattergl/attributes"),o=_("../../plots/cartesian/constants").idRegex,a=_("../../plot_api/plot_template").templatedArray,l=_("../../lib/extend").extendFlat,i=m.marker,d=i.line,u=l(x("marker.line",{editTypeOverride:"calc"}),{width:l({},d.width,{editType:"calc"}),editType:"calc"}),s=l(x("marker"),{symbol:i.symbol,size:l({},i.size,{editType:"markerSize"}),sizeref:i.sizeref,sizemin:i.sizemin,sizemode:i.sizemode,opacity:i.opacity,colorbar:i.colorbar,line:u,editType:"calc"});function c(h){return{valType:"info_array",freeLength:!0,editType:"calc",items:{valType:"subplotid",regex:o[h],editType:"plot"}}}s.color.editType=s.cmin.editType=s.cmax.editType="style",oe.exports={dimensions:a("dimension",{visible:{valType:"boolean",dflt:!0,editType:"calc"},label:{valType:"string",editType:"calc"},values:{valType:"data_array",editType:"calc+clearAxisTypes"},axis:{type:{valType:"enumerated",values:["linear","log","date","category"],editType:"calc+clearAxisTypes"},matches:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc+clearAxisTypes"},editType:"calc+clearAxisTypes"}),text:l({},e.text,{}),hovertext:l({},e.hovertext,{}),hovertemplate:b(),xhoverformat:T("x"),yhoverformat:T("y"),marker:s,xaxes:c("x"),yaxes:c("y"),diagonal:{visible:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},showupperhalf:{valType:"boolean",dflt:!0,editType:"calc"},showlowerhalf:{valType:"boolean",dflt:!0,editType:"calc"},selected:{marker:e.selected.marker,editType:"calc"},unselected:{marker:e.unselected.marker,editType:"calc"},opacity:e.opacity}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/plot_template":543,"../../plots/cartesian/axis_format_attributes":557,"../../plots/cartesian/constants":561,"../../plots/template_attributes":633,"../scatter/attributes":926,"../scattergl/attributes":978}],1030:[function(_,oe,ae){"use strict";var m=_("regl-line2d"),x=_("../../registry"),T=_("../../lib/prepare_regl"),b=_("../../plots/get_data").getModuleCalcData,e=_("../../plots/cartesian"),o=_("../../plots/cartesian/axis_ids").getFromId,a=_("../../plots/cartesian/axes").shouldShowZeroLine;function l(d,u,s){for(var h=u._visibleDims,p=s.viewOpts.ranges=new Array(s.matrixOptions.data.length),v=0;v<h.length;v++){var g=h[v],f=p[v]=new Array(4),w=o(d,u._diag[g][0]);w&&(f[0]=w.r2l(w.range[0]),f[2]=w.r2l(w.range[1]));var y=o(d,u._diag[g][1]);y&&(f[1]=y.r2l(y.range[0]),f[3]=y.r2l(y.range[1]))}s.selectBatch.length||s.unselectBatch.length?s.matrix.update({ranges:p},{ranges:p}):s.matrix.update({ranges:p})}function i(d){var u=d._fullLayout,s=u._glcanvas.data()[0].regl,c=u._splomGrid;c||(c=u._splomGrid=m(s)),c.update(function(h){var p,v=h._context.plotGlPixelRatio,g=h._fullLayout,f=g._size,w=[0,0,g.width*v,g.height*v],y={};function M(J,$,Q,se,j,G){Q*=v,se*=v,j*=v,G*=v;var W=$[J+"color"],ie=$[J+"width"],q=String(W+ie);q in y?y[q].data.push(NaN,NaN,Q,se,j,G):y[q]={data:[Q,se,j,G],join:"rect",thickness:ie*v,color:W,viewport:w,range:w,overlay:!1}}for(p in g._splomSubplots){var A,k,C=g._plots[p],P=C.xaxis,D=C.yaxis,F=P._gridVals,R=D._gridVals,L=P._offset,I=P._length,B=D._length,V=f.b+D.domain[0]*f.h,Z=-D._m,Y=-Z*D.r2l(D.range[0],D.calendar);if(P.showgrid)for(p=0;p<F.length;p++)A=L+P.l2p(F[p].x),M("grid",P,A,V,A,V+B);if(D.showgrid)for(p=0;p<R.length;p++)M("grid",D,L,k=V+Y+Z*R[p].x,L+I,k);a(h,P,D)&&(A=L+P.l2p(0),M("zeroline",P,A,V,A,V+B)),a(h,D,P)&&M("zeroline",D,L,k=V+Y+0,L+I,k)}var ee=[];for(p in y)ee.push(y[p]);return ee}(d))}oe.exports={name:"splom",attr:e.attr,attrRegex:e.attrRegex,layoutAttributes:e.layoutAttributes,supplyLayoutDefaults:e.supplyLayoutDefaults,drawFramework:e.drawFramework,plot:function(d){var u=d._fullLayout,s=x.getModule("splom"),c=b(d.calcdata,s)[0];T(d,["ANGLE_instanced_arrays","OES_element_index_uint"])&&(u._hasOnlyLargeSploms&&i(d),s.plot(d,{},c))},drag:function(d){var u=d.calcdata,s=d._fullLayout;s._hasOnlyLargeSploms&&i(d);for(var c=0;c<u.length;c++){var h=u[c][0].trace,p=s._splomScenes[h.uid];"splom"===h.type&&p&&p.matrix&&l(d,h,p)}},updateGrid:i,clean:function(d,u,s,c){var h,p={};if(c._splomScenes){for(h=0;h<d.length;h++){var v=d[h];"splom"===v.type&&(p[v.uid]=1)}for(h=0;h<s.length;h++){var g=s[h];if(!p[g.uid]){var f=c._splomScenes[g.uid];f&&f.destroy&&f.destroy(),c._splomScenes[g.uid]=null,delete c._splomScenes[g.uid]}}}0===Object.keys(c._splomScenes||{}).length&&delete c._splomScenes,c._splomGrid&&!u._hasOnlyLargeSploms&&c._hasOnlyLargeSploms&&(c._splomGrid.destroy(),c._splomGrid=null,delete c._splomGrid),e.clean(d,u,s,c)},updateFx:e.updateFx,toSVG:e.toSVG}},{"../../lib/prepare_regl":516,"../../plots/cartesian":568,"../../plots/cartesian/axes":554,"../../plots/cartesian/axis_ids":558,"../../plots/get_data":593,"../../registry":638,"regl-line2d":280}],1031:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../plots/cartesian/axis_ids"),T=_("../scatter/calc").calcMarkerSize,b=_("../scatter/calc").calcAxisExpansion,e=_("../scatter/colorscale_calc"),o=_("../scattergl/convert").markerSelection,a=_("../scattergl/convert").markerStyle,l=_("./scene_update"),i=_("../../constants/numerical").BADNUM,d=_("../scattergl/constants").TOO_MANY_POINTS;oe.exports=function(u,s){var c,h,p,v,g,f,w=s.dimensions,y=s._length,M={},A=M.cdata=[],k=M.data=[],C=s._visibleDims=[];function P(F,R){for(var L=F.makeCalcdata({v:R.values,vcalendar:s.calendar},"v"),I=0;I<L.length;I++)L[I]=L[I]===i?NaN:L[I];A.push(L),k.push("log"===F.type?m.simpleMap(L,F.c2l):L)}for(c=0;c<w.length;c++)if((p=w[c]).visible){if(v=x.getFromId(u,s._diag[c][0]),g=x.getFromId(u,s._diag[c][1]),v&&g&&v.type!==g.type){m.log("Skipping splom dimension "+c+" with conflicting axis types");continue}v?(P(v,p),g&&"category"===g.type&&(g._categories=v._categories.slice())):P(g,p),C.push(c)}for(e(u,s),m.extendFlat(M,a(s)),f=A.length*y>d?M.sizeAvg||Math.max(M.size,3):T(s,y),h=0;h<C.length;h++)p=w[c=C[h]],v=x.getFromId(u,s._diag[c][0])||{},g=x.getFromId(u,s._diag[c][1])||{},b(u,s,v,g,A[h],A[h],f);var D=l(u,s);return D.matrix||(D.matrix=!0),D.matrixOptions=M,D.selectedOptions=o(s,s.selected),D.unselectedOptions=o(s,s.unselected),[{x:!1,y:!1,t:{},trace:s}]}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axis_ids":558,"../scatter/calc":927,"../scatter/colorscale_calc":929,"../scattergl/constants":980,"../scattergl/convert":981,"./scene_update":1038}],1032:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../plots/array_container_defaults"),T=_("./attributes"),b=_("../scatter/subtypes"),e=_("../scatter/marker_defaults"),o=_("../parcoords/merge_length"),a=_("../scattergl/helpers").isOpenSymbol;function l(i,d){function u(c,h){return m.coerce(i,d,T.dimensions,c,h)}u("label");var s=u("values");s&&s.length?u("visible"):d.visible=!1,u("axis.type"),u("axis.matches")}oe.exports=function(i,d,u,s){function c(y,M){return m.coerce(i,d,T,y,M)}var h=x(i,d,{name:"dimensions",handleItemDefaults:l}),p=c("diagonal.visible"),v=c("showupperhalf"),g=c("showlowerhalf");if(o(d,h,"values")&&(p||v||g)){c("text"),c("hovertext"),c("hovertemplate"),c("xhoverformat"),c("yhoverformat"),e(i,d,u,s,c);var f=a(d.marker.symbol),w=b.isBubble(d);c("marker.line.width",f||w?1:0),function(y,M,A,k){var C,P,D=M.dimensions,F=D.length,R=M.showupperhalf,L=M.showlowerhalf,I=M.diagonal.visible,B=new Array(F),V=new Array(F);for(C=0;C<F;C++){var Z=C?C+1:"";B[C]="x"+Z,V[C]="y"+Z}var Y=k("xaxes",B),ee=k("yaxes",V),J=M._diag=new Array(F);M._xaxes={},M._yaxes={};var $=[],Q=[];function se(ue,de,he,be){if(ue){var ge=ue.charAt(0),we=A._splomAxes[ge];if(M["_"+ge+"axes"][ue]=1,be.push(ue),!(ue in we)){var Ce=we[ue]={};he&&(Ce.label=he.label||"",he.visible&&he.axis&&(he.axis.type&&(Ce.type=he.axis.type),he.axis.matches&&(Ce.matches=de)))}}}var j=!I&&!L,G=!I&&!R;for(M._axesDim={},C=0;C<F;C++){var W=D[C],ie=0===C,q=C===F-1,te=ie&&j||q&&G?void 0:Y[C],ne=ie&&G||q&&j?void 0:ee[C];se(te,ne,W,$),se(ne,te,W,Q),J[C]=[te,ne],M._axesDim[te]=C,M._axesDim[ne]=C}for(C=0;C<$.length;C++)for(P=0;P<Q.length;P++){var le=$[C]+Q[P];C>P&&R||C<P&&L?A._splomSubplots[le]=1:C!==P||!I&&L&&R||(A._splomSubplots[le]=1)}(!L||!I&&R&&L)&&(A._splomGridDflt.xside="bottom",A._splomGridDflt.yside="left")}(0,d,s,c),m.coerceSelectionMarkerOpacity(d,c)}else d.visible=!1}},{"../../lib":503,"../../plots/array_container_defaults":549,"../parcoords/merge_length":897,"../scatter/marker_defaults":945,"../scatter/subtypes":951,"../scattergl/helpers":985,"./attributes":1029}],1033:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../scatter/colorscale_calc"),T=_("../scattergl/convert").markerStyle;oe.exports=function(b,e){var o=e.trace,a=b._fullLayout._splomScenes[o.uid];if(a){x(b,o),m.extendFlat(a.matrixOptions,T(o));var l=m.extendFlat({},a.matrixOptions,a.viewOpts);a.matrix.update(l,null)}}},{"../../lib":503,"../scatter/colorscale_calc":929,"../scattergl/convert":981}],1034:[function(_,oe,ae){"use strict";ae.getDimIndex=function(m,x){for(var T=x._id,b={x:0,y:1}[T.charAt(0)],e=m._visibleDims,o=0;o<e.length;o++)if(m._diag[e[o]][b]===T)return o;return!1}},{}],1035:[function(_,oe,ae){"use strict";var m=_("./helpers"),x=_("../scattergl/hover").calcHover;oe.exports={hoverPoints:function(T,b,e){var o=T.cd[0].trace,a=T.scene.matrixOptions.cdata,l=T.xa,i=T.ya,d=l.c2p(b),u=i.c2p(e),s=T.distance,c=m.getDimIndex(o,l),h=m.getDimIndex(o,i);if(!1===c||!1===h)return[T];for(var p,v,g=a[c],f=a[h],w=s,y=0;y<g.length;y++){var A=f[y],k=l.c2p(g[y])-d,C=i.c2p(A)-u,P=Math.sqrt(k*k+C*C);P<w&&(w=v=P,p=y)}return T.index=p,T.distance=w,T.dxy=v,void 0===p?[T]:[x(T,g,f,o)]}}},{"../scattergl/hover":986,"./helpers":1034}],1036:[function(_,oe,ae){"use strict";var m=_("../../registry"),x=_("../../components/grid");oe.exports={moduleType:"trace",name:"splom",basePlotModule:_("./base_plot"),categories:["gl","regl","cartesian","symbols","showLegend","scatter-like"],attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:_("../scatter/marker_colorbar"),calc:_("./calc"),plot:_("./plot"),hoverPoints:_("./hover").hoverPoints,selectPoints:_("./select"),editStyle:_("./edit_style"),meta:{}},m.register(x)},{"../../components/grid":410,"../../registry":638,"../scatter/marker_colorbar":944,"./attributes":1029,"./base_plot":1030,"./calc":1031,"./defaults":1032,"./edit_style":1033,"./hover":1035,"./plot":1037,"./select":1039}],1037:[function(_,oe,ae){"use strict";var m=_("regl-splom"),x=_("../../lib"),T=_("../../plots/cartesian/axis_ids"),b=_("../../components/dragelement/helpers").selectMode;function e(o,a){var l,i,d,u,s,c=o._fullLayout,h=c._size,p=a.trace,v=a.t,g=c._splomScenes[p.uid],f=g.matrixOptions,w=f.cdata,y=c._glcanvas.data()[0].regl,M=c.dragmode;if(0!==w.length){f.lower=p.showupperhalf,f.upper=p.showlowerhalf,f.diagonal=p.diagonal.visible;var A=p._visibleDims,k=w.length,C=g.viewOpts={};for(C.ranges=new Array(k),C.domains=new Array(k),s=0;s<A.length;s++){d=A[s];var P=C.ranges[s]=new Array(4),D=C.domains[s]=new Array(4);(l=T.getFromId(o,p._diag[d][0]))&&(P[0]=l._rl[0],P[2]=l._rl[1],D[0]=l.domain[0],D[2]=l.domain[1]),(i=T.getFromId(o,p._diag[d][1]))&&(P[1]=i._rl[0],P[3]=i._rl[1],D[1]=i.domain[0],D[3]=i.domain[1])}var F=o._context.plotGlPixelRatio,R=h.l*F,L=h.b*F;C.viewport=[R,L,h.w*F+R,h.h*F+L],!0===g.matrix&&(g.matrix=m(y));var V=c.clickmode.indexOf("select")>-1,Z=!0;if(b(M)||p.selectedpoints||V){var Y=p._length;if(p.selectedpoints){g.selectBatch=p.selectedpoints;var ee=p.selectedpoints,J={};for(d=0;d<ee.length;d++)J[ee[d]]=!0;var $=[];for(d=0;d<Y;d++)J[d]||$.push(d);g.unselectBatch=$}var Q=v.xpx=new Array(k),se=v.ypx=new Array(k);for(s=0;s<A.length;s++){if(l=T.getFromId(o,p._diag[d=A[s]][0]))for(Q[s]=new Array(Y),u=0;u<Y;u++)Q[s][u]=l.c2p(w[s][u]);if(i=T.getFromId(o,p._diag[d][1]))for(se[s]=new Array(Y),u=0;u<Y;u++)se[s][u]=i.c2p(w[s][u])}if(g.selectBatch.length||g.unselectBatch.length){var j=x.extendFlat({},f,g.unselectedOptions,C),G=x.extendFlat({},f,g.selectedOptions,C);g.matrix.update(j,G),Z=!1}}else v.xpx=v.ypx=null;if(Z){var W=x.extendFlat({},f,C);g.matrix.update(W,null)}}}oe.exports=function(o,a,l){if(l.length)for(var i=0;i<l.length;i++)e(o,l[i][0])}},{"../../components/dragelement/helpers":384,"../../lib":503,"../../plots/cartesian/axis_ids":558,"regl-splom":282}],1038:[function(_,oe,ae){"use strict";var m=_("../../lib");oe.exports=function(x,T){var b=x._fullLayout,e=T.uid,o=b._splomScenes;o||(o=b._splomScenes={});var a={dirty:!0,selectBatch:[],unselectBatch:[]},l=o[T.uid];return l||((l=o[e]=m.extendFlat({},a,{matrix:!1,selectBatch:[],unselectBatch:[]})).draw=function(){l.matrix&&l.matrix.draw&&(l.selectBatch.length||l.unselectBatch.length?l.matrix.draw(l.unselectBatch,l.selectBatch):l.matrix.draw()),l.dirty=!1},l.destroy=function(){l.matrix&&l.matrix.destroy&&l.matrix.destroy(),l.matrixOptions=null,l.selectBatch=null,l.unselectBatch=null,l=null}),l.dirty||m.extendFlat(l,a),l}},{"../../lib":503}],1039:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../scatter/subtypes"),T=_("./helpers");oe.exports=function(b,e){var o=b.cd,a=o[0].trace,l=o[0].t,i=b.scene,d=i.matrixOptions.cdata,u=b.xaxis,s=b.yaxis,c=[];if(!i)return c;var h=!x.hasMarkers(a)&&!x.hasText(a);if(!0!==a.visible||h)return c;var p=T.getDimIndex(a,u),v=T.getDimIndex(a,s);if(!1===p||!1===v)return c;var g=l.xpx[p],f=l.ypx[v],w=d[p],y=d[v],M=[],A=[];if(!1!==e&&!e.degenerate)for(var k=0;k<w.length;k++)e.contains([g[k],f[k]],null,k,b)?(M.push(k),c.push({pointNumber:k,x:w[k],y:y[k]})):A.push(k);var C=i.matrixOptions;return M.length||A.length?i.selectBatch.length||i.unselectBatch.length||i.matrix.update(i.unselectedOptions,m.extendFlat({},C,i.selectedOptions,i.viewOpts)):i.matrix.update(C,null),i.selectBatch=M,i.unselectBatch=A,c}},{"../../lib":503,"../scatter/subtypes":951,"./helpers":1034}],1040:[function(_,oe,ae){"use strict";var m=_("../../components/colorscale/attributes"),x=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,T=_("../../plots/template_attributes").hovertemplateAttrs,b=_("../mesh3d/attributes"),e=_("../../plots/attributes"),o=_("../../lib/extend").extendFlat,a={x:{valType:"data_array",editType:"calc+clearAxisTypes"},y:{valType:"data_array",editType:"calc+clearAxisTypes"},z:{valType:"data_array",editType:"calc+clearAxisTypes"},u:{valType:"data_array",editType:"calc"},v:{valType:"data_array",editType:"calc"},w:{valType:"data_array",editType:"calc"},starts:{x:{valType:"data_array",editType:"calc"},y:{valType:"data_array",editType:"calc"},z:{valType:"data_array",editType:"calc"},editType:"calc"},maxdisplayed:{valType:"integer",min:0,dflt:1e3,editType:"calc"},sizeref:{valType:"number",editType:"calc",min:0,dflt:1},text:{valType:"string",dflt:"",editType:"calc"},hovertext:{valType:"string",dflt:"",editType:"calc"},hovertemplate:T({editType:"calc"},{keys:["tubex","tubey","tubez","tubeu","tubev","tubew","norm","divergence"]}),uhoverformat:x("u",1),vhoverformat:x("v",1),whoverformat:x("w",1),xhoverformat:x("x"),yhoverformat:x("y"),zhoverformat:x("z"),showlegend:o({},e.showlegend,{dflt:!1})};o(a,m("",{colorAttr:"u/v/w norm",showScaleDflt:!0,editTypeOverride:"calc"})),["opacity","lightposition","lighting"].forEach(function(l){a[l]=b[l]}),a.hoverinfo=o({},e.hoverinfo,{editType:"calc",flags:["x","y","z","u","v","w","norm","divergence","text","name"],dflt:"x+y+z+norm+text+name"}),a.transforms=void 0,oe.exports=a},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../mesh3d/attributes":867}],1041:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../components/colorscale/calc");function T(o){var a,l,i,d,u,s,c,h,p,v,g,f,w=o._x,y=o._y,M=o._z,A=o._len,k=-1/0,C=1/0,P=-1/0,D=1/0,F=-1/0,R=1/0,L="";for(A&&(c=w[0],p=y[0],g=M[0]),A>1&&(h=w[A-1],v=y[A-1],f=M[A-1]),a=0;a<A;a++)k=Math.max(k,w[a]),C=Math.min(C,w[a]),P=Math.max(P,y[a]),D=Math.min(D,y[a]),F=Math.max(F,M[a]),R=Math.min(R,M[a]),d||w[a]===c||(d=!0,L+="x"),u||y[a]===p||(u=!0,L+="y"),s||M[a]===g||(s=!0,L+="z");d||(L+="x"),u||(L+="y"),s||(L+="z");var I=b(o._x),B=b(o._y),V=b(o._z);L=(L=(L=L.replace("x",(c>h?"-":"+")+"x")).replace("y",(p>v?"-":"+")+"y")).replace("z",(g>f?"-":"+")+"z");var Z=function(){A=0,I=[],B=[],V=[]};(!A||A<I.length*B.length*V.length)&&Z();var Y=function(ge){return"x"===ge?w:"y"===ge?y:M},ee=function(ge){return"x"===ge?I:"y"===ge?B:V},J=function(ge){return ge[A-1]<ge[0]?-1:1},$=Y(L[1]),Q=Y(L[3]),se=Y(L[5]),j=ee(L[1]).length,G=ee(L[3]).length,W=ee(L[5]).length,ie=!1,q=function(ge,we,Ce){return j*(G*ge+we)+Ce},te=J(Y(L[1])),ne=J(Y(L[3])),le=J(Y(L[5]));for(a=0;a<W-1;a++){for(l=0;l<G-1;l++){for(i=0;i<j-1;i++){var ue=q(a,l,i),de=q(a,l,i+1),he=q(a,l+1,i),be=q(a+1,l,i);if($[ue]*te<$[de]*te&&Q[ue]*ne<Q[he]*ne&&se[ue]*le<se[be]*le||(ie=!0),ie)break}if(ie)break}if(ie)break}return ie&&(m.warn("Encountered arbitrary coordinates! Unable to input data grid."),Z()),{xMin:C,yMin:D,zMin:R,xMax:k,yMax:P,zMax:F,Xs:I,Ys:B,Zs:V,len:A,fill:L}}function b(o){return m.distinctVals(o).vals}function e(o,a){if(void 0===a&&(a=o.length),m.isTypedArray(o))return o.subarray(0,a);for(var l=[],i=0;i<a;i++)l[i]=+o[i];return l}oe.exports={calc:function(o,a){a._len=Math.min(a.u.length,a.v.length,a.w.length,a.x.length,a.y.length,a.z.length),a._u=e(a.u,a._len),a._v=e(a.v,a._len),a._w=e(a.w,a._len),a._x=e(a.x,a._len),a._y=e(a.y,a._len),a._z=e(a.z,a._len);var l=T(a);a._gridFill=l.fill,a._Xs=l.Xs,a._Ys=l.Ys,a._Zs=l.Zs,a._len=l.len;var i,d,u,s=0;a.starts&&(i=e(a.starts.x||[]),d=e(a.starts.y||[]),u=e(a.starts.z||[]),s=Math.min(i.length,d.length,u.length)),a._startsX=i||[],a._startsY=d||[],a._startsZ=u||[];var c,h=0,p=1/0;for(c=0;c<a._len;c++){var v=a._u[c],g=a._v[c],f=a._w[c],w=Math.sqrt(v*v+g*g+f*f);h=Math.max(h,w),p=Math.min(p,w)}for(x(o,a,{vals:[p,h],containerStr:"",cLetter:"c"}),c=0;c<s;c++){var y=i[c];l.xMax=Math.max(l.xMax,y),l.xMin=Math.min(l.xMin,y);var M=d[c];l.yMax=Math.max(l.yMax,M),l.yMin=Math.min(l.yMin,M);var A=u[c];l.zMax=Math.max(l.zMax,A),l.zMin=Math.min(l.zMin,A)}a._slen=s,a._normMax=h,a._xbnds=[l.xMin,l.xMax],a._ybnds=[l.yMin,l.yMax],a._zbnds=[l.zMin,l.zMax]},filter:e,processGrid:T}},{"../../components/colorscale/calc":374,"../../lib":503}],1042:[function(_,oe,ae){"use strict";var m=_("../../../stackgl_modules").gl_streamtube3d,x=m.createTubeMesh,T=_("../../lib"),b=_("../../lib/gl_format_color").parseColorScale,e=_("../../components/colorscale").extractOpts,o=_("../../plots/gl3d/zip3"),a={xaxis:0,yaxis:1,zaxis:2};function l(c,h){this.scene=c,this.uid=h,this.mesh=null,this.data=null}var i=l.prototype;function d(c){var h=c.length;return h>2?c.slice(1,h-1):2===h?[(c[0]+c[1])/2]:c}function u(c){var h=c.length;return 1===h?[.5,.5]:[c[1]-c[0],c[h-1]-c[h-2]]}function s(c,h){var p=c.fullSceneLayout,v=c.dataScale,g=h._len,f={};function w(j,G){var W=p[G],ie=v[a[G]];return T.simpleMap(j,function(q){return W.d2l(q)*ie})}if(f.vectors=o(w(h._u,"xaxis"),w(h._v,"yaxis"),w(h._w,"zaxis"),g),!g)return{positions:[],cells:[]};var y=w(h._Xs,"xaxis"),M=w(h._Ys,"yaxis"),A=w(h._Zs,"zaxis");if(f.meshgrid=[y,M,A],f.gridFill=h._gridFill,h._slen)f.startingPositions=o(w(h._startsX,"xaxis"),w(h._startsY,"yaxis"),w(h._startsZ,"zaxis"));else{for(var k=M[0],C=d(y),P=d(A),D=new Array(C.length*P.length),F=0,R=0;R<C.length;R++)for(var L=0;L<P.length;L++)D[F++]=[C[R],k,P[L]];f.startingPositions=D}f.colormap=b(h),f.tubeSize=h.sizeref,f.maxLength=h.maxdisplayed;var I=w(h._xbnds,"xaxis"),B=w(h._ybnds,"yaxis"),V=w(h._zbnds,"zaxis"),Z=u(y),Y=u(M),ee=u(A),$=m(f,[[I[0]-Z[0],B[0]-Y[0],V[0]-ee[0]],[I[1]+Z[1],B[1]+Y[1],V[1]+ee[1]]]),Q=e(h);$.vertexIntensityBounds=[Q.min/h._normMax,Q.max/h._normMax];var se=h.lightposition;return $.lightPosition=[se.x,se.y,se.z],$.ambient=h.lighting.ambient,$.diffuse=h.lighting.diffuse,$.specular=h.lighting.specular,$.roughness=h.lighting.roughness,$.fresnel=h.lighting.fresnel,$.opacity=h.opacity,h._pad=$.tubeScale*h.sizeref*2,$}i.handlePick=function(c){var h=this.scene.fullSceneLayout,p=this.scene.dataScale;function v(w,y){var A=p[a[y]];return h[y].l2c(w)/A}if(c.object===this.mesh){var g=c.data.position,f=c.data.velocity;return c.traceCoordinate=[v(g[0],"xaxis"),v(g[1],"yaxis"),v(g[2],"zaxis"),v(f[0],"xaxis"),v(f[1],"yaxis"),v(f[2],"zaxis"),c.data.intensity*this.data._normMax,c.data.divergence],c.textLabel=this.data.hovertext||this.data.text,!0}},i.update=function(c){this.data=c;var h=s(this.scene,c);this.mesh.update(h)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},oe.exports=function(c,h){var p=c.glplot.gl,v=s(c,h),g=x(p,v),f=new l(c,h.uid);return f.mesh=g,f.data=h,g._trace=f,c.glplot.add(g),f}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../plots/gl3d/zip3":609}],1043:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../components/colorscale/defaults"),T=_("./attributes");oe.exports=function(b,e,o,a){function l(p,v){return m.coerce(b,e,T,p,v)}var i=l("u"),d=l("v"),u=l("w"),s=l("x"),c=l("y"),h=l("z");i&&i.length&&d&&d.length&&u&&u.length&&s&&s.length&&c&&c.length&&h&&h.length?(l("starts.x"),l("starts.y"),l("starts.z"),l("maxdisplayed"),l("sizeref"),l("lighting.ambient"),l("lighting.diffuse"),l("lighting.specular"),l("lighting.roughness"),l("lighting.fresnel"),l("lightposition.x"),l("lightposition.y"),l("lightposition.z"),x(b,e,a,l,{prefix:"",cLetter:"c"}),l("text"),l("hovertext"),l("hovertemplate"),l("uhoverformat"),l("vhoverformat"),l("whoverformat"),l("xhoverformat"),l("yhoverformat"),l("zhoverformat"),e._length=null):e.visible=!1}},{"../../components/colorscale/defaults":376,"../../lib":503,"./attributes":1040}],1044:[function(_,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"streamtube",basePlotModule:_("../../plots/gl3d"),categories:["gl3d","showLegend"],attributes:_("./attributes"),supplyDefaults:_("./defaults"),colorbar:{min:"cmin",max:"cmax"},calc:_("./calc").calc,plot:_("./convert"),eventData:function(m,x){return m.tubex=m.x,m.tubey=m.y,m.tubez=m.z,m.tubeu=x.traceCoordinate[3],m.tubev=x.traceCoordinate[4],m.tubew=x.traceCoordinate[5],m.norm=x.traceCoordinate[6],m.divergence=x.traceCoordinate[7],delete m.x,delete m.y,delete m.z,m},meta:{}}},{"../../plots/gl3d":598,"./attributes":1040,"./calc":1041,"./convert":1042,"./defaults":1043}],1045:[function(_,oe,ae){"use strict";var m=_("../../plots/attributes"),x=_("../../plots/template_attributes").hovertemplateAttrs,T=_("../../plots/template_attributes").texttemplateAttrs,b=_("../../components/colorscale/attributes"),e=_("../../plots/domain").attributes,o=_("../pie/attributes"),a=_("./constants"),l=_("../../lib/extend").extendFlat;oe.exports={labels:{valType:"data_array",editType:"calc"},parents:{valType:"data_array",editType:"calc"},values:{valType:"data_array",editType:"calc"},branchvalues:{valType:"enumerated",values:["remainder","total"],dflt:"remainder",editType:"calc"},count:{valType:"flaglist",flags:["branches","leaves"],dflt:"leaves",editType:"calc"},level:{valType:"any",editType:"plot",anim:!0},maxdepth:{valType:"integer",editType:"plot",dflt:-1},marker:l({colors:{valType:"data_array",editType:"calc"},line:{color:l({},o.marker.line.color,{dflt:null}),width:l({},o.marker.line.width,{dflt:1}),editType:"calc"},editType:"calc"},b("marker",{colorAttr:"colors",anim:!1})),leaf:{opacity:{valType:"number",editType:"style",min:0,max:1},editType:"plot"},text:o.text,textinfo:{valType:"flaglist",flags:["label","text","value","current path","percent root","percent entry","percent parent"],extras:["none"],editType:"plot"},texttemplate:T({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:o.hovertext,hoverinfo:l({},m.hoverinfo,{flags:["label","text","value","name","current path","percent root","percent entry","percent parent"],dflt:"label+text+value+name"}),hovertemplate:x({},{keys:a.eventDataKeys}),textfont:o.textfont,insidetextorientation:o.insidetextorientation,insidetextfont:o.insidetextfont,outsidetextfont:l({},o.outsidetextfont,{}),rotation:{valType:"angle",dflt:0,editType:"plot"},sort:o.sort,root:{color:{valType:"color",editType:"calc",dflt:"rgba(0,0,0,0)"},editType:"calc"},domain:e({name:"sunburst",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"./constants":1048}],1046:[function(_,oe,ae){"use strict";var m=_("../../plots/plots");ae.name="sunburst",ae.plot=function(x,T,b,e){m.plotBasePlot(ae.name,x,T,b,e)},ae.clean=function(x,T,b,e){m.cleanBasePlot(ae.name,x,T,b,e)}},{"../../plots/plots":619}],1047:[function(_,oe,ae){"use strict";var m=_("d3-hierarchy"),x=_("fast-isnumeric"),T=_("../../lib"),b=_("../../components/colorscale").makeColorScaleFuncFromTrace,e=_("../pie/calc").makePullColorFn,o=_("../pie/calc").generateExtendedColors,a=_("../../components/colorscale").calc,l=_("../../constants/numerical").ALMOST_EQUAL,i={},d={},u={};ae.calc=function(s,c){var h,p,v,g,f,w,y=s._fullLayout,M=c.ids,A=T.isArrayOrTypedArray(M),k=c.labels,C=c.parents,P=c.values,D=T.isArrayOrTypedArray(P),F=[],R={},L={},I=function(ne){return ne||"number"==typeof ne},B=function(ne){return!D||x(P[ne])&&P[ne]>=0};A?(h=Math.min(M.length,C.length),p=function(ne){return I(M[ne])&&B(ne)},v=function(ne){return String(M[ne])}):(h=Math.min(k.length,C.length),p=function(ne){return I(k[ne])&&B(ne)},v=function(ne){return String(k[ne])}),D&&(h=Math.min(h,P.length));for(var V=0;V<h;V++)if(p(V)){var Z=v(V),Y=I(C[V])?String(C[V]):"",ee={i:V,id:Z,pid:Y,label:I(k[V])?String(k[V]):""};D&&(ee.v=+P[V]),F.push(ee),f=Z,R[g=Y]?R[g].push(f):R[g]=[f],L[f]=1}if(R[""]){if(R[""].length>1){for(var J=T.randstr(),$=0;$<F.length;$++)""===F[$].pid&&(F[$].pid=J);F.unshift({hasMultipleRoots:!0,id:J,pid:"",label:""})}}else{var Q,se=[];for(Q in R)L[Q]||se.push(Q);if(1!==se.length)return T.warn(["Multiple implied roots, cannot build",c.type,"hierarchy of",c.name+".","These roots include:",se.join(", ")].join(" "));F.unshift({hasImpliedRoot:!0,id:Q=se[0],pid:"",label:Q})}try{w=m.stratify().id(function(ne){return ne.id}).parentId(function(ne){return ne.pid})(F)}catch(ne){return T.warn(["Failed to build",c.type,"hierarchy of",c.name+".","Error:",ne.message].join(" "))}var j=m.hierarchy(w),G=!1;if(D)switch(c.branchvalues){case"remainder":j.sum(function(ne){return ne.data.v});break;case"total":j.each(function(ne){var le=ne.data.data,ue=le.v;if(ne.children){var de=ne.children.reduce(function(he,be){return he+be.data.data.v},0);if((le.hasImpliedRoot||le.hasMultipleRoots)&&(ue=de),ue<de*l)return G=!0,T.warn(["Total value for node",ne.data.data.id,"of",c.name,"is smaller than the sum of its children.","\nparent value =",ue,"\nchildren sum =",de].join(" "))}ne.value=ue})}else!function ne(le,ue,de){var he=0,be=le.children;if(be){for(var ge=be.length,we=0;we<ge;we++)he+=ne(be[we],ue,de);de.branches&&he++}else de.leaves&&he++;return le.value=le.data.data.value=he,ue._values||(ue._values=[]),ue._values[le.data.data.i]=he,he}(j,c,{branches:-1!==c.count.indexOf("branches"),leaves:-1!==c.count.indexOf("leaves")});if(!G){var W,ie;c.sort&&j.sort(function(ne,le){return le.value-ne.value});var q=c.marker.colors||[];return c._hasColorscale?(!!q.length||(q=D?c.values:c._values),a(s,c,{vals:q,containerStr:"marker",cLetter:"c"}),ie=b(c.marker)):W=e(y["_"+c.type+"colormap"]),j.each(function(ne){var le=ne.data.data;le.color=c._hasColorscale?ie(q[le.i]):W(q[le.i],le.id)}),F[0].hierarchy=j,F}},ae._runCrossTraceCalc=function(s,c){var h=c._fullLayout,p=c.calcdata,v=h[s+"colorway"],g=h["_"+s+"colormap"];h["extend"+s+"colors"]&&(v=o(v,"icicle"===s?u:"treemap"===s?d:i));var f,w=0;function y(k){var C=k.data.data,P=C.id;!1===C.color&&(g[P]?C.color=g[P]:k.parent?k.parent.parent?C.color=k.parent.data.data.color:(g[P]=C.color=v[w%v.length],w++):C.color=f)}for(var M=0;M<p.length;M++){var A=p[M][0];A.trace.type===s&&A.hierarchy&&(f=A.trace.root.color,A.hierarchy.each(y))}},ae.crossTraceCalc=function(s){return ae._runCrossTraceCalc("sunburst",s)}},{"../../components/colorscale":378,"../../constants/numerical":479,"../../lib":503,"../pie/calc":902,"d3-hierarchy":115,"fast-isnumeric":190}],1048:[function(_,oe,ae){"use strict";oe.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"linear",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"]}},{}],1049:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./attributes"),T=_("../../plots/domain").defaults,b=_("../bar/defaults").handleText,e=_("../../components/colorscale"),o=e.hasColorscale,a=e.handleDefaults;oe.exports=function(l,i,d,u){function s(f,w){return m.coerce(l,i,x,f,w)}var c=s("labels"),h=s("parents");if(c&&c.length&&h&&h.length){var p=s("values");s(p&&p.length?"branchvalues":"count"),s("level"),s("maxdepth"),s("marker.line.width")&&s("marker.line.color",u.paper_bgcolor),s("marker.colors");var v=i._hasColorscale=o(l,"marker","colors")||(l.marker||{}).coloraxis;v&&a(l,i,u,s,{prefix:"marker.",cLetter:"c"}),s("leaf.opacity",v?1:.7);var g=s("text");s("texttemplate"),i.texttemplate||s("textinfo",Array.isArray(g)?"text+label":"label"),s("hovertext"),s("hovertemplate"),b(l,i,u,s,"auto",{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),s("insidetextorientation"),s("sort"),s("rotation"),s("root.color"),T(i,u,s),i._length=null}else i.visible=!1}},{"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/defaults":652,"./attributes":1045}],1050:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../registry"),T=_("../../components/fx/helpers").appendArrayPointValue,b=_("../../components/fx"),e=_("../../lib"),o=_("../../lib/events"),a=_("./helpers"),l=_("../pie/helpers").formatPieValue;function i(d,u,s){for(var c=d.data.data,h={curveNumber:u.index,pointNumber:c.i,data:u._input,fullData:u},p=0;p<s.length;p++){var v=s[p];v in d&&(h[v]=d[v])}return"parentString"in d&&!a.isHierarchyRoot(d)&&(h.parent=d.parentString),T(h,u,c.i),h}oe.exports=function(d,u,s,c,h){var p=c[0],v=p.trace,g=p.hierarchy,f="sunburst"===v.type,w="treemap"===v.type||"icicle"===v.type;"_hasHoverLabel"in v||(v._hasHoverLabel=!1),"_hasHoverEvent"in v||(v._hasHoverEvent=!1),d.on("mouseover",function(y){var M=s._fullLayout;if(!s._dragging&&!1!==M.hovermode){var A,k=s._fullData[v.index],C=y.data.data,P=C.i,D=a.isHierarchyRoot(y),F=a.getParent(g,y),R=a.getValue(y),L=function(te){return e.castOption(k,P,te)},I=L("hovertemplate"),B=b.castHoverinfo(k,M,P),V=M.separators;if(I||B&&"none"!==B&&"skip"!==B){var Z,Y;f&&(Z=p.cx+y.pxmid[0]*(1-y.rInscribed),Y=p.cy+y.pxmid[1]*(1-y.rInscribed)),w&&(Z=y._hoverX,Y=y._hoverY);var ee,J={},$=[],Q=[],se=function(te){return-1!==$.indexOf(te)};B&&($="all"===B?k._module.attributes.hoverinfo.flags:B.split("+")),J.label=C.label,se("label")&&J.label&&Q.push(J.label),C.hasOwnProperty("v")&&(J.value=C.v,J.valueLabel=l(J.value,V),se("value")&&Q.push(J.valueLabel)),J.currentPath=y.currentPath=a.getPath(y.data),se("current path")&&!D&&Q.push(J.currentPath);var j=[],G=function(){-1===j.indexOf(ee)&&(Q.push(ee),j.push(ee))};J.percentParent=y.percentParent=R/a.getValue(F),J.parent=y.parentString=a.getPtLabel(F),se("percent parent")&&(ee=a.formatPercent(J.percentParent,V)+" of "+J.parent,G()),J.percentEntry=y.percentEntry=R/a.getValue(u),J.entry=y.entry=a.getPtLabel(u),!se("percent entry")||D||y.onPathbar||(ee=a.formatPercent(J.percentEntry,V)+" of "+J.entry,G()),J.percentRoot=y.percentRoot=R/a.getValue(g),J.root=y.root=a.getPtLabel(g),se("percent root")&&!D&&(ee=a.formatPercent(J.percentRoot,V)+" of "+J.root,G()),J.text=L("hovertext")||L("text"),se("text")&&e.isValidTextValue(ee=J.text)&&Q.push(ee),A=[i(y,k,h.eventDataKeys)];var W={trace:k,y:Y,_x0:y._x0,_x1:y._x1,_y0:y._y0,_y1:y._y1,text:Q.join("<br>"),name:I||se("name")?k.name:void 0,color:L("hoverlabel.bgcolor")||C.color,borderColor:L("hoverlabel.bordercolor"),fontFamily:L("hoverlabel.font.family"),fontSize:L("hoverlabel.font.size"),fontColor:L("hoverlabel.font.color"),nameLength:L("hoverlabel.namelength"),textAlign:L("hoverlabel.align"),hovertemplate:I,hovertemplateLabels:J,eventData:A};f&&(W.x0=Z-y.rInscribed*y.rpx1,W.x1=Z+y.rInscribed*y.rpx1,W.idealAlign=y.pxmid[0]<0?"left":"right"),w&&(W.x=Z,W.idealAlign=Z<0?"left":"right");var ie=[];b.loneHover(W,{container:M._hoverlayer.node(),outerContainer:M._paper.node(),gd:s,inOut_bbox:ie}),A[0].bbox=ie[0],v._hasHoverLabel=!0}if(w){var q=d.select("path.surface");h.styleOne(q,y,k,{hovered:!0})}v._hasHoverEvent=!0,s.emit("plotly_hover",{points:A||[i(y,k,h.eventDataKeys)],event:m.event})}}),d.on("mouseout",function(y){var M=s._fullLayout,A=s._fullData[v.index],k=m.select(this).datum();if(v._hasHoverEvent&&(y.originalEvent=m.event,s.emit("plotly_unhover",{points:[i(k,A,h.eventDataKeys)],event:m.event}),v._hasHoverEvent=!1),v._hasHoverLabel&&(b.loneUnhover(M._hoverlayer.node()),v._hasHoverLabel=!1),w){var C=d.select("path.surface");h.styleOne(C,k,A,{hovered:!1})}}),d.on("click",function(y){var M=s._fullLayout,A=s._fullData[v.index],k=f&&(a.isHierarchyRoot(y)||a.isLeaf(y)),C=a.getPtId(y),P=a.isEntry(y)?a.findEntryWithChild(g,C):a.findEntryWithLevel(g,C),D=a.getPtId(P),F={points:[i(y,A,h.eventDataKeys)],event:m.event};k||(F.nextLevel=D);var R=o.triggerHandler(s,"plotly_"+v.type+"click",F);if(!1!==R&&M.hovermode&&(s._hoverdata=[i(y,A,h.eventDataKeys)],b.click(s,m.event)),!k&&!1!==R&&!s._dragging&&!s._transitioning){x.call("_storeDirectGUIEdit",A,M._tracePreGUI[A.uid],{level:A.level});var L={data:[{level:D}],traces:[v.index]},I={frame:{redraw:!1,duration:h.transitionTime},transition:{duration:h.transitionTime,easing:h.transitionEasing},mode:"immediate",fromcurrent:!0};b.loneUnhover(M._hoverlayer.node()),x.call("animate",s,L,I)}})}},{"../../components/fx":406,"../../components/fx/helpers":402,"../../lib":503,"../../lib/events":492,"../../registry":638,"../pie/helpers":905,"./helpers":1051,"@plotly/d3":58}],1051:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../components/color"),T=_("../../lib/setcursor"),b=_("../pie/helpers");function e(o){return o.data.data.pid}ae.findEntryWithLevel=function(o,a){var l;return a&&o.eachAfter(function(i){if(ae.getPtId(i)===a)return l=i.copy()}),l||o},ae.findEntryWithChild=function(o,a){var l;return o.eachAfter(function(i){for(var d=i.children||[],u=0;u<d.length;u++)if(ae.getPtId(d[u])===a)return l=i.copy()}),l||o},ae.isEntry=function(o){return!o.parent},ae.isLeaf=function(o){return!o.children},ae.getPtId=function(o){return o.data.data.id},ae.getPtLabel=function(o){return o.data.data.label},ae.getValue=function(o){return o.value},ae.isHierarchyRoot=function(o){return""===e(o)},ae.setSliceCursor=function(o,a,l){var i=l.isTransitioning;if(!i){var d=o.datum();i=l.hideOnRoot&&ae.isHierarchyRoot(d)||l.hideOnLeaves&&ae.isLeaf(d)}T(o,i?null:"pointer")},ae.getInsideTextFontKey=function(o,a,l,i,d){var s=l.data.data.i;return m.castOption(a,s,((d||{}).onPathbar?"pathbar.textfont":"insidetextfont")+"."+o)||m.castOption(a,s,"textfont."+o)||i.size},ae.getOutsideTextFontKey=function(o,a,l,i){var d=l.data.data.i;return m.castOption(a,d,"outsidetextfont."+o)||m.castOption(a,d,"textfont."+o)||i.size},ae.isOutsideText=function(o,a){return!o._hasColorscale&&ae.isHierarchyRoot(a)},ae.determineTextFont=function(o,a,l,i){return ae.isOutsideText(o,a)?{color:ae.getOutsideTextFontKey("color",d=o,u=a,s=l),family:ae.getOutsideTextFontKey("family",d,u,s),size:ae.getOutsideTextFontKey("size",d,u,s)}:function(d,u,s,c){var p=u.data.data,v=p.i,g=m.castOption(d,v,((c||{}).onPathbar?"pathbar.textfont":"insidetextfont")+".color");return!g&&d._input.textfont&&(g=m.castOption(d._input,v,"textfont.color")),{color:g||x.contrast(p.color),family:ae.getInsideTextFontKey("family",d,u,s,c),size:ae.getInsideTextFontKey("size",d,u,s,c)}}(o,a,l,i);var d,u,s},ae.hasTransition=function(o){return!!(o&&o.duration>0)},ae.getMaxDepth=function(o){return o.maxdepth>=0?o.maxdepth:1/0},ae.isHeader=function(o,a){return!(ae.isLeaf(o)||o.depth===a._maxDepth-1)},ae.getParent=function(o,a){return ae.findEntryWithLevel(o,e(a))},ae.listPath=function(o,a){var l=o.parent;if(!l)return[];var i=a?[l.data[a]]:[l];return ae.listPath(l,a).concat(i)},ae.getPath=function(o){return ae.listPath(o,"label").join("/")+"/"},ae.formatValue=b.formatPieValue,ae.formatPercent=function(o,a){var l=m.formatPercent(o,0);return"0%"===l&&(l=b.formatPiePercent(o,a)),l}},{"../../components/color":366,"../../lib":503,"../../lib/setcursor":524,"../pie/helpers":905}],1052:[function(_,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"sunburst",basePlotModule:_("./base_plot"),categories:[],animatable:!0,attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults"),supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc").calc,crossTraceCalc:_("./calc").crossTraceCalc,plot:_("./plot").plot,style:_("./style").style,colorbar:_("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":1045,"./base_plot":1046,"./calc":1047,"./defaults":1049,"./layout_attributes":1053,"./layout_defaults":1054,"./plot":1055,"./style":1056}],1053:[function(_,oe,ae){"use strict";oe.exports={sunburstcolorway:{valType:"colorlist",editType:"calc"},extendsunburstcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1054:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./layout_attributes");oe.exports=function(T,b){function e(o,a){return m.coerce(T,b,x,o,a)}e("sunburstcolorway",b.colorway),e("extendsunburstcolors")}},{"../../lib":503,"./layout_attributes":1053}],1055:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("d3-hierarchy"),T=_("d3-interpolate").interpolate,b=_("../../components/drawing"),e=_("../../lib"),o=_("../../lib/svg_text_utils"),a=_("../bar/uniform_text"),l=a.recordMinTextSize,i=a.clearMinTextSize,d=_("../pie/plot"),u=_("../pie/helpers").getRotationAngle,s=d.computeTransform,c=d.transformInsideText,h=_("./style").styleOne,p=_("../bar/style").resizeText,v=_("./fx"),g=_("./constants"),f=_("./helpers");function w(M,A,k,C){var P=M._fullLayout,D=!P.uniformtext.mode&&f.hasTransition(C),F=m.select(k).selectAll("g.slice"),R=A[0],L=R.trace,B=f.findEntryWithLevel(R.hierarchy,L.level),V=f.getMaxDepth(L),Z=P._size,Y=L.domain,J=Z.h*(Y.y[1]-Y.y[0]),$=.5*Math.min(Z.w*(Y.x[1]-Y.x[0]),J),Q=R.cx=Z.l+Z.w*(Y.x[1]+Y.x[0])/2,se=R.cy=Z.t+Z.h*(1-Y.y[0])-J/2;if(!B)return F.remove();var j=null,G={};D&&F.each(function(Fe){G[f.getPtId(Fe)]={rpx0:Fe.rpx0,rpx1:Fe.rpx1,x0:Fe.x0,x1:Fe.x1,transform:Fe.transform},!j&&f.isEntry(Fe)&&(j=Fe)});var Fe,W=(Fe=B,x.partition().size([2*Math.PI,Fe.height+1])(Fe)).descendants(),ie=B.height+1,q=0,te=V;R.hasMultipleRoots&&f.isHierarchyRoot(B)&&(W=W.slice(1),ie-=1,q=1,te+=1),W=W.filter(function(Fe){return Fe.y1<=te});var ne=u(L.rotation);ne&&W.forEach(function(Fe){Fe.x0+=ne,Fe.x1+=ne});var le=Math.min(ie,V),ue=function(Fe){return(Fe-q)/le*$},de=function(Fe,ve){return[Fe*Math.cos(ve),-Fe*Math.sin(ve)]},he=function(Fe){return e.pathAnnulus(Fe.rpx0,Fe.rpx1,Fe.x0,Fe.x1,Q,se)},be=function(Fe){return Q+y(Fe)[0]*(Fe.transform.rCenter||0)+(Fe.transform.x||0)},ge=function(Fe){return se+y(Fe)[1]*(Fe.transform.rCenter||0)+(Fe.transform.y||0)};(F=F.data(W,f.getPtId)).enter().append("g").classed("slice",!0),D?F.exit().transition().each(function(){var Fe=m.select(this);Fe.select("path.surface").transition().attrTween("d",function(ve){var Te=function(Le){var Ee,Pe=f.getPtId(Le),je=G[Pe],Ge=G[f.getPtId(B)];if(Ge){var Ke=(Le.x1>Ge.x1?2*Math.PI:0)+ne;Ee=Le.rpx1<Ge.rpx1?{x0:Le.x0,x1:Le.x1,rpx0:0,rpx1:0}:{x0:Ke,x1:Ke,rpx0:Le.rpx0,rpx1:Le.rpx1}}else{var lt,Ue=f.getPtId(Le.parent);F.each(function(xt){if(f.getPtId(xt)===Ue)return lt=xt});var $e,et=lt.children;et.forEach(function(xt,Ct){if(f.getPtId(xt)===Pe)return $e=Ct});var tt=et.length,ct=T(lt.x0,lt.x1);Ee={rpx0:$,rpx1:$,x0:ct($e/tt),x1:ct(($e+1)/tt)}}return T(je,Ee)}(ve);return function(Le){return he(Te(Le))}}),Fe.select("g.slicetext").attr("opacity",0)}).remove():F.exit().remove(),F.order();var we=null;if(D&&j){var Ce=f.getPtId(j);F.each(function(Fe){null===we&&f.getPtId(Fe)===Ce&&(we=Fe.x1)})}var De=F;function Se(Fe){var ve=Fe.parent,Te=G[f.getPtId(ve)],Le={};if(Te){var Ee=ve.children,Pe=Ee.indexOf(Fe),je=Ee.length,Ge=T(Te.x0,Te.x1);Le.x0=Ge(Pe/je),Le.x1=Ge(Pe/je)}else Le.x0=Le.x1=0;return Le}D&&(De=De.transition().each("end",function(){var Fe=m.select(this);f.setSliceCursor(Fe,M,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:!1})})),De.each(function(Fe){var Ke,ve=m.select(this),Te=e.ensureSingle(ve,"path","surface",function(Ke){Ke.style("pointer-events","all")});Fe.rpx0=ue(Fe.y0),Fe.rpx1=ue(Fe.y1),Fe.xmid=(Fe.x0+Fe.x1)/2,Fe.pxmid=de(Fe.rpx1,Fe.xmid),Fe.midangle=-(Fe.xmid-Math.PI/2),Fe.startangle=-(Fe.x0-Math.PI/2),Fe.stopangle=-(Fe.x1-Math.PI/2),Fe.halfangle=.5*Math.min(e.angleDelta(Fe.x0,Fe.x1)||Math.PI,Math.PI),Fe.ring=1-Fe.rpx0/Fe.rpx1,Fe.rInscribed=0===(Ke=Fe).rpx0&&e.isFullCircle([Ke.x0,Ke.x1])?1:Math.max(0,Math.min(1/(1+1/Math.sin(Ke.halfangle)),Ke.ring/2)),D?Te.transition().attrTween("d",function(Ke){var lt=function(Ue){var $e,et=G[f.getPtId(Ue)],tt={x0:Ue.x0,x1:Ue.x1,rpx0:Ue.rpx0,rpx1:Ue.rpx1};if(et)$e=et;else if(j)if(Ue.parent)if(we){var ct=(Ue.x1>we?2*Math.PI:0)+ne;$e={x0:ct,x1:ct}}else e.extendFlat($e={rpx0:$,rpx1:$},Se(Ue));else $e={rpx0:0,rpx1:0};else $e={x0:ne,x1:ne};return T($e,tt)}(Ke);return function(Ue){return he(lt(Ue))}}):Te.attr("d",he),ve.call(v,B,M,A,{eventDataKeys:g.eventDataKeys,transitionTime:g.CLICK_TRANSITION_TIME,transitionEasing:g.CLICK_TRANSITION_EASING}).call(f.setSliceCursor,M,{hideOnRoot:!0,hideOnLeaves:!0,isTransitioning:M._transitioning}),Te.call(h,Fe,L);var Le=e.ensureSingle(ve,"g","slicetext"),Ee=e.ensureSingle(Le,"text","",function(Ke){Ke.attr("data-notex",1)}),Pe=e.ensureUniformFontSize(M,f.determineTextFont(L,Fe,P.font));Ee.text(ae.formatSliceLabel(Fe,B,L,A,P)).classed("slicetext",!0).attr("text-anchor","middle").call(b.font,Pe).call(o.convertToTspans,M);var je=b.bBox(Ee.node());Fe.transform=c(je,Fe,R),Fe.transform.targetX=be(Fe),Fe.transform.targetY=ge(Fe);var Ge=function(Ke,lt){var Ue=Ke.transform;return s(Ue,lt),Ue.fontSize=Pe.size,l(L.type,Ue,P),e.getTextTransform(Ue)};D?Ee.transition().attrTween("transform",function(Ke){var lt=function(Ue){var $e,et=G[f.getPtId(Ue)],tt=Ue.transform;if(et)$e=et;else if($e={rpx1:Ue.rpx1,transform:{textPosAngle:tt.textPosAngle,scale:0,rotate:tt.rotate,rCenter:tt.rCenter,x:tt.x,y:tt.y}},j)if(Ue.parent)if(we){var ct=Ue.x1>we?2*Math.PI:0;$e.x0=$e.x1=ct}else e.extendFlat($e,Se(Ue));else $e.x0=$e.x1=ne;else $e.x0=$e.x1=ne;var xt=T($e.transform.textPosAngle,Ue.transform.textPosAngle),Ct=T($e.rpx1,Ue.rpx1),Ht=T($e.x0,Ue.x0),zt=T($e.x1,Ue.x1),ht=T($e.transform.scale,tt.scale),ut=T($e.transform.rotate,tt.rotate),Ot=0===tt.rCenter?3:0===$e.transform.rCenter?1/3:1,tn=T($e.transform.rCenter,tt.rCenter);return function(un){var Ze=Ct(un),Qe=Ht(un),qe=zt(un),it=tn(Math.pow(un,Ot)),Ie={pxmid:de(Ze,(Qe+qe)/2),rpx1:Ze,transform:{textPosAngle:xt(un),rCenter:it,x:tt.x,y:tt.y}};return l(L.type,tt,P),{transform:{targetX:be(Ie),targetY:ge(Ie),scale:ht(un),rotate:ut(un),rCenter:it}}}}(Ke);return function(Ue){return Ge(lt(Ue),je)}}):Ee.attr("transform",Ge(Fe,je))})}function y(M){return k=M.transform.textPosAngle,[(A=M.rpx1)*Math.sin(k),-A*Math.cos(k)];var A,k}ae.plot=function(M,A,k,C){var P,D,F=M._fullLayout,R=F._sunburstlayer,L=!k,I=!F.uniformtext.mode&&f.hasTransition(k);i("sunburst",F),(P=R.selectAll("g.trace.sunburst").data(A,function(B){return B[0].trace.uid})).enter().append("g").classed("trace",!0).classed("sunburst",!0).attr("stroke-linejoin","round"),P.order(),I?(C&&(D=C()),m.transition().duration(k.duration).ease(k.easing).each("end",function(){D&&D()}).each("interrupt",function(){D&&D()}).each(function(){R.selectAll("g.trace").each(function(B){w(M,B,this,k)})})):(P.each(function(B){w(M,B,this,k)}),F.uniformtext.mode&&p(M,F._sunburstlayer.selectAll(".trace"),"sunburst")),L&&P.exit().remove()},ae.formatSliceLabel=function(M,A,k,C,P){var D=k.texttemplate,F=k.textinfo;if(!(D||F&&"none"!==F))return"";var R=P.separators,I=M.data.data,B=C[0].hierarchy,V=f.isHierarchyRoot(M),Z=f.getParent(B,M),Y=f.getValue(M);if(!D){var ee,J=F.split("+"),$=function(ne){return-1!==J.indexOf(ne)},Q=[];if($("label")&&I.label&&Q.push(I.label),I.hasOwnProperty("v")&&$("value")&&Q.push(f.formatValue(I.v,R)),!V){$("current path")&&Q.push(f.getPath(M.data));var se=0;$("percent parent")&&se++,$("percent entry")&&se++,$("percent root")&&se++;var j=se>1;if(se){var G,W=function(ne){ee=f.formatPercent(G,R),j&&(ee+=" of "+ne),Q.push(ee)};$("percent parent")&&!V&&(G=Y/f.getValue(Z),W("parent")),$("percent entry")&&(G=Y/f.getValue(A),W("entry")),$("percent root")&&(G=Y/f.getValue(B),W("root"))}}return $("text")&&(ee=e.castOption(k,I.i,"text"),e.isValidTextValue(ee)&&Q.push(ee)),Q.join("<br>")}var ie=e.castOption(k,I.i,"texttemplate");if(!ie)return"";var q={};I.label&&(q.label=I.label),I.hasOwnProperty("v")&&(q.value=I.v,q.valueLabel=f.formatValue(I.v,R)),q.currentPath=f.getPath(M.data),V||(q.percentParent=Y/f.getValue(Z),q.percentParentLabel=f.formatPercent(q.percentParent,R),q.parent=f.getPtLabel(Z)),q.percentEntry=Y/f.getValue(A),q.percentEntryLabel=f.formatPercent(q.percentEntry,R),q.entry=f.getPtLabel(A),q.percentRoot=Y/f.getValue(B),q.percentRootLabel=f.formatPercent(q.percentRoot,R),q.root=f.getPtLabel(B),I.hasOwnProperty("color")&&(q.color=I.color);var te=e.castOption(k,I.i,"text");return(e.isValidTextValue(te)||""===te)&&(q.text=te),q.customdata=e.castOption(k,I.i,"customdata"),e.texttemplateString(ie,q,P._d3locale,q,k._meta||{})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../bar/style":662,"../bar/uniform_text":664,"../pie/helpers":905,"../pie/plot":909,"./constants":1048,"./fx":1050,"./helpers":1051,"./style":1056,"@plotly/d3":58,"d3-hierarchy":115,"d3-interpolate":116}],1056:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../components/color"),T=_("../../lib"),b=_("../bar/uniform_text").resizeText;function e(o,a,l){var i=a.data.data,d=!a.children,u=i.i,s=T.castOption(l,u,"marker.line.color")||x.defaultLine,c=T.castOption(l,u,"marker.line.width")||0;o.style("stroke-width",c).call(x.fill,i.color).call(x.stroke,s).style("opacity",d?l.leaf.opacity:null)}oe.exports={style:function(o){var a=o._fullLayout._sunburstlayer.selectAll(".trace");b(o,a,"sunburst"),a.each(function(l){var i=m.select(this),d=l[0].trace;i.style("opacity",d.opacity),i.selectAll("path.surface").each(function(u){m.select(this).call(e,u,d)})})},styleOne:e}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"@plotly/d3":58}],1057:[function(_,oe,ae){"use strict";var m=_("../../components/color"),x=_("../../components/colorscale/attributes"),T=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,b=_("../../plots/template_attributes").hovertemplateAttrs,e=_("../../plots/attributes"),o=_("../../lib/extend").extendFlat,a=_("../../plot_api/edit_types").overrideAll;function l(d){return{show:{valType:"boolean",dflt:!1},start:{valType:"number",dflt:null,editType:"plot"},end:{valType:"number",dflt:null,editType:"plot"},size:{valType:"number",dflt:null,min:0,editType:"plot"},project:{x:{valType:"boolean",dflt:!1},y:{valType:"boolean",dflt:!1},z:{valType:"boolean",dflt:!1}},color:{valType:"color",dflt:m.defaultLine},usecolormap:{valType:"boolean",dflt:!1},width:{valType:"number",min:1,max:16,dflt:2},highlight:{valType:"boolean",dflt:!0},highlightcolor:{valType:"color",dflt:m.defaultLine},highlightwidth:{valType:"number",min:1,max:16,dflt:2}}}var i=oe.exports=a(o({z:{valType:"data_array"},x:{valType:"data_array"},y:{valType:"data_array"},text:{valType:"string",dflt:"",arrayOk:!0},hovertext:{valType:"string",dflt:"",arrayOk:!0},hovertemplate:b(),xhoverformat:T("x"),yhoverformat:T("y"),zhoverformat:T("z"),connectgaps:{valType:"boolean",dflt:!1,editType:"calc"},surfacecolor:{valType:"data_array"}},x("",{colorAttr:"z or surfacecolor",showScaleDflt:!0,autoColorDflt:!1,editTypeOverride:"calc"}),{contours:{x:l(),y:l(),z:l()},hidesurface:{valType:"boolean",dflt:!1},lightposition:{x:{valType:"number",min:-1e5,max:1e5,dflt:10},y:{valType:"number",min:-1e5,max:1e5,dflt:1e4},z:{valType:"number",min:-1e5,max:1e5,dflt:0}},lighting:{ambient:{valType:"number",min:0,max:1,dflt:.8},diffuse:{valType:"number",min:0,max:1,dflt:.8},specular:{valType:"number",min:0,max:2,dflt:.05},roughness:{valType:"number",min:0,max:1,dflt:.5},fresnel:{valType:"number",min:0,max:5,dflt:.2}},opacity:{valType:"number",min:0,max:1,dflt:1},opacityscale:{valType:"any",editType:"calc"},_deprecated:{zauto:o({},x.zauto,{}),zmin:o({},x.zmin,{}),zmax:o({},x.zmax,{})},hoverinfo:o({},e.hoverinfo),showlegend:o({},e.showlegend,{dflt:!1})}),"calc","nested");i.x.editType=i.y.editType=i.z.editType="calc+clearAxisTypes",i.transforms=void 0},{"../../components/color":366,"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633}],1058:[function(_,oe,ae){"use strict";var m=_("../../components/colorscale/calc");oe.exports=function(x,T){m(x,T,T.surfacecolor?{vals:T.surfacecolor,containerStr:"",cLetter:"c"}:{vals:T.z,containerStr:"",cLetter:"c"})}},{"../../components/colorscale/calc":374}],1059:[function(_,oe,ae){"use strict";var m=_("../../../stackgl_modules").gl_surface3d,x=_("../../../stackgl_modules").ndarray,T=_("../../../stackgl_modules").ndarray_linear_interpolate.d2,b=_("../heatmap/interp2d"),e=_("../heatmap/find_empties"),o=_("../../lib").isArrayOrTypedArray,a=_("../../lib/gl_format_color").parseColorScale,l=_("../../lib/str2rgbarray"),i=_("../../components/colorscale").extractOpts;function d(k,C,P){this.scene=k,this.uid=P,this.surface=C,this.data=null,this.showContour=[!1,!1,!1],this.contourStart=[null,null,null],this.contourEnd=[null,null,null],this.contourSize=[0,0,0],this.minValues=[1/0,1/0,1/0],this.maxValues=[-1/0,-1/0,-1/0],this.dataScaleX=1,this.dataScaleY=1,this.refineData=!0,this.objectOffset=[0,0,0]}var u=d.prototype;u.getXat=function(k,C,P,D){var F=o(this.data.x)?o(this.data.x[0])?this.data.x[C][k]:this.data.x[k]:k;return void 0===P?F:D.d2l(F,0,P)},u.getYat=function(k,C,P,D){var F=o(this.data.y)?o(this.data.y[0])?this.data.y[C][k]:this.data.y[C]:C;return void 0===P?F:D.d2l(F,0,P)},u.getZat=function(k,C,P,D){var F=this.data.z[C][k];return null===F&&this.data.connectgaps&&this.data._interpolatedZ&&(F=this.data._interpolatedZ[C][k]),void 0===P?F:D.d2l(F,0,P)},u.handlePick=function(k){if(k.object===this.surface){var P=(k.data.index[1]-1)/this.dataScaleY-1,D=Math.max(Math.min(Math.round((k.data.index[0]-1)/this.dataScaleX-1),this.data.z[0].length-1),0),F=Math.max(Math.min(Math.round(P),this.data._ylength-1),0);k.index=[D,F],k.traceCoordinate=[this.getXat(D,F),this.getYat(D,F),this.getZat(D,F)],k.dataCoordinate=[this.getXat(D,F,this.data.xcalendar,this.scene.fullSceneLayout.xaxis),this.getYat(D,F,this.data.ycalendar,this.scene.fullSceneLayout.yaxis),this.getZat(D,F,this.data.zcalendar,this.scene.fullSceneLayout.zaxis)];for(var R=0;R<3;R++)null!=k.dataCoordinate[R]&&(k.dataCoordinate[R]*=this.scene.dataScale[R]);var I=this.data.hovertext||this.data.text;return k.textLabel=Array.isArray(I)&&I[F]&&void 0!==I[F][D]?I[F][D]:I||"",k.data.dataCoordinate=k.dataCoordinate.slice(),this.surface.highlight(k.data),this.scene.glplot.spikes.position=k.dataCoordinate,!0}};var s=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997,1009,1013,1019,1021,1031,1033,1039,1049,1051,1061,1063,1069,1087,1091,1093,1097,1103,1109,1117,1123,1129,1151,1153,1163,1171,1181,1187,1193,1201,1213,1217,1223,1229,1231,1237,1249,1259,1277,1279,1283,1289,1291,1297,1301,1303,1307,1319,1321,1327,1361,1367,1373,1381,1399,1409,1423,1427,1429,1433,1439,1447,1451,1453,1459,1471,1481,1483,1487,1489,1493,1499,1511,1523,1531,1543,1549,1553,1559,1567,1571,1579,1583,1597,1601,1607,1609,1613,1619,1621,1627,1637,1657,1663,1667,1669,1693,1697,1699,1709,1721,1723,1733,1741,1747,1753,1759,1777,1783,1787,1789,1801,1811,1823,1831,1847,1861,1867,1871,1873,1877,1879,1889,1901,1907,1913,1931,1933,1949,1951,1973,1979,1987,1993,1997,1999,2003,2011,2017,2027,2029,2039,2053,2063,2069,2081,2083,2087,2089,2099,2111,2113,2129,2131,2137,2141,2143,2153,2161,2179,2203,2207,2213,2221,2237,2239,2243,2251,2267,2269,2273,2281,2287,2293,2297,2309,2311,2333,2339,2341,2347,2351,2357,2371,2377,2381,2383,2389,2393,2399,2411,2417,2423,2437,2441,2447,2459,2467,2473,2477,2503,2521,2531,2539,2543,2549,2551,2557,2579,2591,2593,2609,2617,2621,2633,2647,2657,2659,2663,2671,2677,2683,2687,2689,2693,2699,2707,2711,2713,2719,2729,2731,2741,2749,2753,2767,2777,2789,2791,2797,2801,2803,2819,2833,2837,2843,2851,2857,2861,2879,2887,2897,2903,2909,2917,2927,2939,2953,2957,2963,2969,2971,2999];function c(k,C){if(k<C)return 0;for(var P=0;0===Math.floor(k%C);)k/=C,P++;return P}function h(k){for(var C=[],P=0;P<s.length;P++)C.push(c(k,s[P]));return C}function p(k){for(var C=h(k),P=k,D=0;D<s.length;D++)if(C[D]>0){P=s[D];break}return P}function v(k,C){if(!(k<1||C<1)){for(var P=h(k),D=h(C),F=1,R=0;R<s.length;R++)F*=Math.pow(s[R],Math.max(P[R],D[R]));return F}}u.calcXnums=function(k){var C,P=[];for(C=1;C<k;C++){var D=this.getXat(C-1,0),F=this.getXat(C,0);P[C-1]=F!==D&&null!=D&&null!=F?Math.abs(F-D):0}var R=0;for(C=1;C<k;C++)R+=P[C-1];for(C=1;C<k;C++)P[C-1]=0===P[C-1]?1:Math.round(R/P[C-1]);return P},u.calcYnums=function(k){var C,P=[];for(C=1;C<k;C++){var D=this.getYat(0,C-1),F=this.getYat(0,C);P[C-1]=F!==D&&null!=D&&null!=F?Math.abs(F-D):0}var R=0;for(C=1;C<k;C++)R+=P[C-1];for(C=1;C<k;C++)P[C-1]=0===P[C-1]?1:Math.round(R/P[C-1]);return P};var g=[1,2,4,6,12,24,36,48,60,120,180,240,360,720,840,1260],f=g[9],w=g[13];function y(k,C,P){var D=P[8]+P[2]*C[0]+P[5]*C[1];return k[0]=(P[6]+P[0]*C[0]+P[3]*C[1])/D,k[1]=(P[7]+P[1]*C[0]+P[4]*C[1])/D,k}function M(k,C,P){return function(D,F,R,L){for(var I=[0,0],B=D.shape[0],V=D.shape[1],Z=0;Z<B;Z++)for(var Y=0;Y<V;Y++)R(I,[Z,Y],L),D.set(Z,Y,T(F,I[0],I[1]))}(k,C,y,P),k}function A(k,C){for(var P=!1,D=0;D<k.length;D++)if(C===k[D]){P=!0;break}!1===P&&k.push(C)}u.estimateScale=function(k,C){for(var P=1+function(F){if(0!==F.length){for(var R=1,L=0;L<F.length;L++)R=v(R,F[L]);return R}}(0===C?this.calcXnums(k):this.calcYnums(k));P<f;)P*=2;for(;P>w;)P--,P/=p(P),++P<f&&(P=w);var D=Math.round(P/k);return D>1?D:1},u.refineCoords=function(k){for(var C=this.dataScaleX,P=this.dataScaleY,D=k[0].shape[0],F=k[0].shape[1],R=0|Math.floor(k[0].shape[0]*C+1),L=0|Math.floor(k[0].shape[1]*P+1),I=1+D+1,B=1+F+1,V=x(new Float32Array(I*B),[I,B]),Z=[1/C,0,0,0,1/P,0,0,0,1],Y=0;Y<k.length;++Y){this.surface.padField(V,k[Y]);var ee=x(new Float32Array(R*L),[R,L]);M(ee,V,Z),k[Y]=ee}},u.setContourLevels=function(){var k,C,D=[[],[],[]],F=[!1,!1,!1],R=!1;for(k=0;k<3;++k)if(this.showContour[k]&&(R=!0,this.contourSize[k]>0&&null!==this.contourStart[k]&&null!==this.contourEnd[k]&&this.contourEnd[k]>this.contourStart[k]))for(F[k]=!0,C=this.contourStart[k];C<this.contourEnd[k];C+=this.contourSize[k])A(D[k],C*this.scene.dataScale[k]);if(R){var L=[[],[],[]];for(k=0;k<3;++k)this.showContour[k]&&(L[k]=F[k]?D[k]:this.scene.contourLevels[k]);this.surface.update({levels:L})}},u.update=function(k){var C,P,D,F,R=this.scene,L=R.fullSceneLayout,I=this.surface,B=a(k),V=R.dataScale,Z=k.z[0].length,Y=k._ylength,ee=R.contourLevels;this.data=k;var J=[];for(C=0;C<3;C++)for(J[C]=[],P=0;P<Z;P++)J[C][P]=[];for(P=0;P<Z;P++)for(D=0;D<Y;D++)J[0][P][D]=this.getXat(P,D,k.xcalendar,L.xaxis),J[1][P][D]=this.getYat(P,D,k.ycalendar,L.yaxis),J[2][P][D]=this.getZat(P,D,k.zcalendar,L.zaxis);if(k.connectgaps)for(k._emptypoints=e(J[2]),b(J[2],k._emptypoints),k._interpolatedZ=[],P=0;P<Z;P++)for(k._interpolatedZ[P]=[],D=0;D<Y;D++)k._interpolatedZ[P][D]=J[2][P][D];for(C=0;C<3;C++)for(P=0;P<Z;P++)for(D=0;D<Y;D++)null==(F=J[C][P][D])?J[C][P][D]=NaN:F=J[C][P][D]*=V[C];for(C=0;C<3;C++)for(P=0;P<Z;P++)for(D=0;D<Y;D++)null!=(F=J[C][P][D])&&(this.minValues[C]>F&&(this.minValues[C]=F),this.maxValues[C]<F&&(this.maxValues[C]=F));for(C=0;C<3;C++)this.objectOffset[C]=.5*(this.minValues[C]+this.maxValues[C]);for(C=0;C<3;C++)for(P=0;P<Z;P++)for(D=0;D<Y;D++)null!=(F=J[C][P][D])&&(J[C][P][D]-=this.objectOffset[C]);var $=[x(new Float32Array(Z*Y),[Z,Y]),x(new Float32Array(Z*Y),[Z,Y]),x(new Float32Array(Z*Y),[Z,Y])];for(C=0;C<3;C++)for(P=0;P<Z;P++)for(D=0;D<Y;D++)$[C].set(P,D,J[C][P][D]);J=[];var Q={colormap:B,levels:[[],[],[]],showContour:[!0,!0,!0],showSurface:!k.hidesurface,contourProject:[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],contourWidth:[1,1,1],contourColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],contourTint:[1,1,1],dynamicColor:[[1,1,1,1],[1,1,1,1],[1,1,1,1]],dynamicWidth:[1,1,1],dynamicTint:[1,1,1],opacityscale:k.opacityscale,opacity:k.opacity},se=i(k);if(Q.intensityBounds=[se.min,se.max],k.surfacecolor){var j=x(new Float32Array(Z*Y),[Z,Y]);for(P=0;P<Z;P++)for(D=0;D<Y;D++)j.set(P,D,k.surfacecolor[D][P]);$.push(j)}else Q.intensityBounds[0]*=V[2],Q.intensityBounds[1]*=V[2];(w<$[0].shape[0]||w<$[0].shape[1])&&(this.refineData=!1),!0===this.refineData&&(this.dataScaleX=this.estimateScale($[0].shape[0],0),this.dataScaleY=this.estimateScale($[0].shape[1],1),1===this.dataScaleX&&1===this.dataScaleY||this.refineCoords($)),k.surfacecolor&&(Q.intensity=$.pop());var q,te,ne,G=[!0,!0,!0],W=["x","y","z"];for(C=0;C<3;++C){var ie=k.contours[W[C]];G[C]=ie.highlight,Q.showContour[C]=ie.show||ie.highlight,Q.showContour[C]&&(Q.contourProject[C]=[ie.project.x,ie.project.y,ie.project.z],ie.show?(this.showContour[C]=!0,Q.levels[C]=ee[C],I.highlightColor[C]=Q.contourColor[C]=l(ie.color),I.highlightTint[C]=Q.contourTint[C]=ie.usecolormap?0:1,Q.contourWidth[C]=ie.width,this.contourStart[C]=ie.start,this.contourEnd[C]=ie.end,this.contourSize[C]=ie.size):(this.showContour[C]=!1,this.contourStart[C]=null,this.contourEnd[C]=null,this.contourSize[C]=0),ie.highlight&&(Q.dynamicColor[C]=l(ie.highlightcolor),Q.dynamicWidth[C]=ie.highlightwidth))}(te=(q=B)[0].rgb)[0]===(ne=q[q.length-1].rgb)[0]&&te[1]===ne[1]&&te[2]===ne[2]&&te[3]===ne[3]&&(Q.vertexColor=!0),Q.objectOffset=this.objectOffset,Q.coords=$,I.update(Q),I.visible=k.visible,I.enableDynamic=G,I.enableHighlight=G,I.snapToData=!0,"lighting"in k&&(I.ambientLight=k.lighting.ambient,I.diffuseLight=k.lighting.diffuse,I.specularLight=k.lighting.specular,I.roughness=k.lighting.roughness,I.fresnel=k.lighting.fresnel),"lightposition"in k&&(I.lightPosition=[k.lightposition.x,k.lightposition.y,k.lightposition.z])},u.dispose=function(){this.scene.glplot.remove(this.surface),this.surface.dispose()},oe.exports=function(k,C){var D=m({gl:k.glplot.gl}),F=new d(k,D,C.uid);return D._trace=F,F.update(C),k.glplot.add(D),F}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib":503,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../heatmap/find_empties":798,"../heatmap/interp2d":801}],1060:[function(_,oe,ae){"use strict";var m=_("../../registry"),x=_("../../lib"),T=_("../../components/colorscale/defaults"),b=_("./attributes");function e(a,l,i,d){var u=d("opacityscale");"max"===u?l.opacityscale=[[0,.1],[1,1]]:"min"===u?l.opacityscale=[[0,1],[1,.1]]:"extremes"===u?l.opacityscale=function(s,c){for(var h=[],p=0;p<32;p++){var v=p/31,g=.1+.9*(1-Math.pow(Math.sin(1*v*Math.PI),2));h.push([v,Math.max(0,Math.min(1,g))])}return h}():function(s){var c=0;if(!Array.isArray(s)||s.length<2||!s[0]||!s[s.length-1]||0!=+s[0][0]||1!=+s[s.length-1][0])return!1;for(var h=0;h<s.length;h++){var p=s[h];if(2!==p.length||+p[0]<c)return!1;c=+p[0]}return!0}(u)||(l.opacityscale=void 0)}function o(a,l,i){l in a&&!(i in a)&&(a[i]=a[l])}oe.exports={supplyDefaults:function(a,l,i,d){var u,s;function c(A,k){return x.coerce(a,l,b,A,k)}var h=c("x"),p=c("y"),v=c("z");if(!v||!v.length||h&&h.length<1||p&&p.length<1)l.visible=!1;else{l._xlength=Array.isArray(h)&&x.isArrayOrTypedArray(h[0])?v.length:v[0].length,l._ylength=v.length,m.getComponentMethod("calendars","handleTraceDefaults")(a,l,["x","y","z"],d),c("text"),c("hovertext"),c("hovertemplate"),c("xhoverformat"),c("yhoverformat"),c("zhoverformat"),["lighting.ambient","lighting.diffuse","lighting.specular","lighting.roughness","lighting.fresnel","lightposition.x","lightposition.y","lightposition.z","hidesurface","connectgaps","opacity"].forEach(function(A){c(A)});var g=c("surfacecolor"),f=["x","y","z"];for(u=0;u<3;++u){var w="contours."+f[u],y=c(w+".show"),M=c(w+".highlight");if(y||M)for(s=0;s<3;++s)c(w+".project."+f[s]);y&&(c(w+".color"),c(w+".width"),c(w+".usecolormap")),M&&(c(w+".highlightcolor"),c(w+".highlightwidth")),c(w+".start"),c(w+".end"),c(w+".size")}g||(o(a,"zmin","cmin"),o(a,"zmax","cmax"),o(a,"zauto","cauto")),T(a,l,d,c,{prefix:"",cLetter:"c"}),e(0,l,0,c),l._length=null}},opacityscaleDefaults:e}},{"../../components/colorscale/defaults":376,"../../lib":503,"../../registry":638,"./attributes":1057}],1061:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults").supplyDefaults,colorbar:{min:"cmin",max:"cmax"},calc:_("./calc"),plot:_("./convert"),moduleType:"trace",name:"surface",basePlotModule:_("../../plots/gl3d"),categories:["gl3d","2dMap","showLegend"],meta:{}}},{"../../plots/gl3d":598,"./attributes":1057,"./calc":1058,"./convert":1059,"./defaults":1060}],1062:[function(_,oe,ae){"use strict";var m=_("../../components/annotations/attributes"),x=_("../../lib/extend").extendFlat,T=_("../../plot_api/edit_types").overrideAll,b=_("../../plots/font_attributes"),e=_("../../plots/domain").attributes,o=_("../../plots/cartesian/axis_format_attributes").descriptionOnlyNumbers;(oe.exports=T({domain:e({name:"table",trace:!0}),columnwidth:{valType:"number",arrayOk:!0,dflt:null},columnorder:{valType:"data_array"},header:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:o("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:28},align:x({},m.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:x({},b({arrayOk:!0}))},cells:{values:{valType:"data_array",dflt:[]},format:{valType:"data_array",dflt:[],description:o("cell value")},prefix:{valType:"string",arrayOk:!0,dflt:null},suffix:{valType:"string",arrayOk:!0,dflt:null},height:{valType:"number",dflt:20},align:x({},m.align,{arrayOk:!0}),line:{width:{valType:"number",arrayOk:!0,dflt:1},color:{valType:"color",arrayOk:!0,dflt:"grey"}},fill:{color:{valType:"color",arrayOk:!0,dflt:"white"}},font:x({},b({arrayOk:!0}))}},"calc","from-root")).transforms=void 0},{"../../components/annotations/attributes":349,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/cartesian/axis_format_attributes":557,"../../plots/domain":584,"../../plots/font_attributes":585}],1063:[function(_,oe,ae){"use strict";var m=_("../../plots/get_data").getModuleCalcData,x=_("./plot");ae.name="table",ae.plot=function(T){var b=m(T.calcdata,"table")[0];b.length&&x(T,b)},ae.clean=function(T,b,e,o){var a=o._has&&o._has("table"),l=b._has&&b._has("table");a&&!l&&o._paperdiv.selectAll(".table").remove()}},{"../../plots/get_data":593,"./plot":1070}],1064:[function(_,oe,ae){"use strict";var m=_("../../lib/gup").wrap;oe.exports=function(){return m({})}},{"../../lib/gup":500}],1065:[function(_,oe,ae){"use strict";oe.exports={cellPad:8,columnExtentOffset:10,columnTitleOffset:28,emptyHeaderHeight:16,latexCheck:/^\$.*\$$/,goldenRatio:1.618,lineBreaker:"<br>",maxDimensionCount:60,overdrag:45,releaseTransitionDuration:120,releaseTransitionEase:"cubic-out",scrollbarCaptureWidth:18,scrollbarHideDelay:1e3,scrollbarHideDuration:1e3,scrollbarOffset:5,scrollbarWidth:8,transitionDuration:100,transitionEase:"cubic-out",uplift:5,wrapSpacer:" ",wrapSplitCharacter:" ",cn:{table:"table",tableControlView:"table-control-view",scrollBackground:"scroll-background",yColumn:"y-column",columnBlock:"column-block",scrollAreaClip:"scroll-area-clip",scrollAreaClipRect:"scroll-area-clip-rect",columnBoundary:"column-boundary",columnBoundaryClippath:"column-boundary-clippath",columnBoundaryRect:"column-boundary-rect",columnCells:"column-cells",columnCell:"column-cell",cellRect:"cell-rect",cellText:"cell-text",cellTextHolder:"cell-text-holder",scrollbarKit:"scrollbar-kit",scrollbar:"scrollbar",scrollbarSlider:"scrollbar-slider",scrollbarGlyph:"scrollbar-glyph",scrollbarCaptureZone:"scrollbar-capture-zone"}}},{}],1066:[function(_,oe,ae){"use strict";var m=_("./constants"),x=_("../../lib/extend").extendFlat,T=_("fast-isnumeric");function b(u){if(Array.isArray(u)){for(var s=0,c=0;c<u.length;c++)s=Math.max(s,b(u[c]));return s}return u}function e(u,s){return u+s}function o(u){var s,c=u.slice(),h=1/0,p=0;for(s=0;s<c.length;s++)Array.isArray(c[s])||(c[s]=[c[s]]),h=Math.min(h,c[s].length),p=Math.max(p,c[s].length);if(h!==p)for(s=0;s<c.length;s++){var v=p-c[s].length;v&&(c[s]=c[s].concat(a(v)))}return c}function a(u){for(var s=new Array(u),c=0;c<u;c++)s[c]="";return s}function l(u){return u.calcdata.columns.reduce(function(s,c){return c.xIndex<u.xIndex?s+c.columnWidth:s},0)}function i(u,s){return Object.keys(u).map(function(c){return x({},u[c],{auxiliaryBlocks:s})})}function d(u,s){for(var c,h={},p=0,v=0,g={firstRowIndex:null,lastRowIndex:null,rows:[]},f=0,w=0,y=0;y<u.length;y++)g.rows.push({rowIndex:y,rowHeight:c=u[y]}),((v+=c)>=s||y===u.length-1)&&(h[p]=g,g.key=w++,g.firstRowIndex=f,g.lastRowIndex=y,g={firstRowIndex:null,lastRowIndex:null,rows:[]},p+=v,f=y+1,v=0);return h}oe.exports=function(u,s){var c=o(s.cells.values),h=function(V){return V.slice(s.header.values.length,V.length)},p=o(s.header.values);p.length&&!p[0].length&&(p[0]=[""],p=o(p));var v=p.concat(h(c).map(function(){return a((p[0]||[""]).length)})),g=s.domain,f=Math.floor(u._fullLayout._size.w*(g.x[1]-g.x[0])),w=Math.floor(u._fullLayout._size.h*(g.y[1]-g.y[0])),y=s.header.values.length?v[0].map(function(){return s.header.height}):[m.emptyHeaderHeight],M=c.length?c[0].map(function(){return s.cells.height}):[],A=y.reduce(e,0),k=d(M,w-A+m.uplift),C=i(d(y,A),[]),P=i(k,C),D={},F=s._fullInput.columnorder.concat(h(c.map(function(V,Z){return Z}))),R=v.map(function(V,Z){var Y=Array.isArray(s.columnwidth)?s.columnwidth[Math.min(Z,s.columnwidth.length-1)]:s.columnwidth;return T(Y)?Number(Y):1}),L=R.reduce(e,0);R=R.map(function(V){return V/L*f});var I=Math.max(b(s.header.line.width),b(s.cells.line.width)),B={key:s.uid+u._context.staticPlot,translateX:g.x[0]*u._fullLayout._size.w,translateY:u._fullLayout._size.h*(1-g.y[1]),size:u._fullLayout._size,width:f,maxLineWidth:I,height:w,columnOrder:F,groupHeight:w,rowBlocks:P,headerRowBlocks:C,scrollY:0,cells:x({},s.cells,{values:c}),headerCells:x({},s.header,{values:v}),gdColumns:v.map(function(V){return V[0]}),gdColumnsOriginalOrder:v.map(function(V){return V[0]}),prevPages:[0,0],scrollbarState:{scrollbarScrollInProgress:!1},columns:v.map(function(V,Z){return D[V]=(D[V]||0)+1,{key:V+"__"+D[V],label:V,specIndex:Z,xIndex:F[Z],xScale:l,x:void 0,calcdata:void 0,columnWidth:R[Z]}})};return B.columns.forEach(function(V){V.calcdata=B,V.x=l(V)}),B}},{"../../lib/extend":493,"./constants":1065,"fast-isnumeric":190}],1067:[function(_,oe,ae){"use strict";var m=_("../../lib/extend").extendFlat;ae.splitToPanels=function(x){var T=[0,0],b=m({},x,{key:"header",type:"header",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!0,values:x.calcdata.headerCells.values[x.specIndex],rowBlocks:x.calcdata.headerRowBlocks,calcdata:m({},x.calcdata,{cells:x.calcdata.headerCells})});return[m({},x,{key:"cells1",type:"cells",page:0,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:x.calcdata.cells.values[x.specIndex],rowBlocks:x.calcdata.rowBlocks}),m({},x,{key:"cells2",type:"cells",page:1,prevPages:T,currentRepaint:[null,null],dragHandle:!1,values:x.calcdata.cells.values[x.specIndex],rowBlocks:x.calcdata.rowBlocks}),b]},ae.splitToCells=function(x){var b,e,o,T=[o=(e=(b=x).rowBlocks[b.page])?e.rows[0].rowIndex:0,e?o+e.rows.length:0];return(x.values||[]).slice(T[0],T[1]).map(function(b,e){return{keyWithinBlock:e+("string"==typeof b&&b.match(/[<$&> ]/)?"_keybuster_"+Math.random():""),key:T[0]+e,column:x,calcdata:x.calcdata,page:x.page,rowBlocks:x.rowBlocks,value:b}})}},{"../../lib/extend":493}],1068:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./attributes"),T=_("../../plots/domain").defaults;oe.exports=function(b,e,o,a){function l(i,d){return m.coerce(b,e,x,i,d)}T(e,a,l),l("columnwidth"),l("header.values"),l("header.format"),l("header.align"),l("header.prefix"),l("header.suffix"),l("header.height"),l("header.line.width"),l("header.line.color"),l("header.fill.color"),m.coerceFont(l,"header.font",m.extendFlat({},a.font)),function(i,d){for(var s=i.header.values.length,c=(i.columnorder||[]).slice(0,s),h=c.slice().sort(function(g,f){return g-f}),p=c.map(function(g){return h.indexOf(g)}),v=p.length;v<s;v++)p.push(v);d("columnorder",p)}(e,l),l("cells.values"),l("cells.format"),l("cells.align"),l("cells.prefix"),l("cells.suffix"),l("cells.height"),l("cells.line.width"),l("cells.line.color"),l("cells.fill.color"),m.coerceFont(l,"cells.font",m.extendFlat({},a.font)),e._length=null}},{"../../lib":503,"../../plots/domain":584,"./attributes":1062}],1069:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("./calc"),plot:_("./plot"),moduleType:"trace",name:"table",basePlotModule:_("./base_plot"),categories:["noOpacity"],meta:{}}},{"./attributes":1062,"./base_plot":1063,"./calc":1064,"./defaults":1068,"./plot":1070}],1070:[function(_,oe,ae){"use strict";var m=_("./constants"),x=_("@plotly/d3"),T=_("../../lib").numberFormat,b=_("../../lib/gup"),e=_("../../components/drawing"),o=_("../../lib/svg_text_utils"),a=_("../../lib").raiseToTop,l=_("../../lib").strTranslate,i=_("../../lib").cancelTransition,d=_("./data_preparation_helper"),u=_("./data_split_helpers"),s=_("../../components/color");function c($){return Math.ceil($.calcdata.maxLineWidth/2)}function h($,Q){return"clip"+$._fullLayout._uid+"_scrollAreaBottomClip_"+Q.key}function p($,Q){return"clip"+$._fullLayout._uid+"_columnBoundaryClippath_"+Q.calcdata.key+"_"+Q.specIndex}function v($){return[].concat.apply([],$.map(function(Q){return Q})).map(function(Q){return Q.__data__})}function g($,Q,se){var j=$.selectAll("."+m.cn.scrollbarKit).data(b.repeat,b.keyFun);j.enter().append("g").classed(m.cn.scrollbarKit,!0).style("shape-rendering","geometricPrecision"),j.each(function(te){var ue,ne=te.scrollbarState;ne.totalHeight=Z(ue=te.rowBlocks,ue.length-1)+(ue.length?Y(ue[ue.length-1],1/0):1),ne.scrollableAreaHeight=te.groupHeight-P(te),ne.currentlyVisibleHeight=Math.min(ne.totalHeight,ne.scrollableAreaHeight),ne.ratio=ne.currentlyVisibleHeight/ne.totalHeight,ne.barLength=Math.max(ne.ratio*ne.currentlyVisibleHeight,m.goldenRatio*m.scrollbarWidth),ne.barWiggleRoom=ne.currentlyVisibleHeight-ne.barLength,ne.wiggleRoom=Math.max(0,ne.totalHeight-ne.scrollableAreaHeight),ne.topY=0===ne.barWiggleRoom?0:te.scrollY/ne.wiggleRoom*ne.barWiggleRoom,ne.bottomY=ne.topY+ne.barLength,ne.dragMultiplier=ne.wiggleRoom/ne.barWiggleRoom}).attr("transform",function(te){return l(te.width+m.scrollbarWidth/2+m.scrollbarOffset,P(te))});var G=j.selectAll("."+m.cn.scrollbar).data(b.repeat,b.keyFun);G.enter().append("g").classed(m.cn.scrollbar,!0);var W=G.selectAll("."+m.cn.scrollbarSlider).data(b.repeat,b.keyFun);W.enter().append("g").classed(m.cn.scrollbarSlider,!0),W.attr("transform",function(te){return l(0,te.scrollbarState.topY||0)});var ie=W.selectAll("."+m.cn.scrollbarGlyph).data(b.repeat,b.keyFun);ie.enter().append("line").classed(m.cn.scrollbarGlyph,!0).attr("stroke","black").attr("stroke-width",m.scrollbarWidth).attr("stroke-linecap","round").attr("y1",m.scrollbarWidth/2),ie.attr("y2",function(te){return te.scrollbarState.barLength-m.scrollbarWidth/2}).attr("stroke-opacity",function(te){return te.columnDragInProgress||!te.scrollbarState.barWiggleRoom||se?0:.4}),ie.transition().delay(0).duration(0),ie.transition().delay(m.scrollbarHideDelay).duration(m.scrollbarHideDuration).attr("stroke-opacity",0);var q=G.selectAll("."+m.cn.scrollbarCaptureZone).data(b.repeat,b.keyFun);q.enter().append("line").classed(m.cn.scrollbarCaptureZone,!0).attr("stroke","white").attr("stroke-opacity",.01).attr("stroke-width",m.scrollbarCaptureWidth).attr("stroke-linecap","butt").attr("y1",0).on("mousedown",function(te){var ne=x.event.y,le=this.getBoundingClientRect(),ue=te.scrollbarState,de=ne-le.top,he=x.scale.linear().domain([0,ue.scrollableAreaHeight]).range([0,ue.totalHeight]).clamp(!0);ue.topY<=de&&de<=ue.bottomY||F(Q,$,null,he(de-ue.barLength/2))(te)}).call(x.behavior.drag().origin(function(te){return x.event.stopPropagation(),te.scrollbarState.scrollbarScrollInProgress=!0,te}).on("drag",F(Q,$)).on("dragend",function(){})),q.attr("y2",function(te){return te.scrollbarState.scrollableAreaHeight}),Q._context.staticPlot&&(ie.remove(),q.remove())}function f($,Q,se,j){var q,G=function(ie){var q=ie.selectAll("."+m.cn.columnCell).data(u.splitToCells,function(te){return te.keyWithinBlock});return q.enter().append("g").classed(m.cn.columnCell,!0),q.exit().remove(),q}(((q=se.selectAll("."+m.cn.columnCells).data(b.repeat,b.keyFun)).enter().append("g").classed(m.cn.columnCells,!0),q.exit().remove(),q));G.each(function(q,te){var ne=q.calcdata.cells.font,le=q.column.specIndex,ue={size:M(ne.size,le,te),color:M(ne.color,le,te),family:M(ne.family,le,te)};q.rowNumber=q.key,q.align=M(q.calcdata.cells.align,le,te),q.cellBorderWidth=M(q.calcdata.cells.line.width,le,te),q.font=ue}),function(ie){ie.attr("width",function(q){return q.column.columnWidth}).attr("stroke-width",function(q){return q.cellBorderWidth}).each(function(q){var te=x.select(this);s.stroke(te,M(q.calcdata.cells.line.color,q.column.specIndex,q.rowNumber)),s.fill(te,M(q.calcdata.cells.fill.color,q.column.specIndex,q.rowNumber))})}(function(ie){var q=ie.selectAll("."+m.cn.cellRect).data(b.repeat,function(te){return te.keyWithinBlock});return q.enter().append("rect").classed(m.cn.cellRect,!0),q}(G));var W=function(ie){var q=ie.selectAll("."+m.cn.cellText).data(b.repeat,function(te){return te.keyWithinBlock});return q.enter().append("text").classed(m.cn.cellText,!0).style("cursor",function(){return"auto"}).on("mousedown",function(){x.event.stopPropagation()}),q}(function(ie){var q=ie.selectAll("."+m.cn.cellTextHolder).data(b.repeat,function(te){return te.keyWithinBlock});return q.enter().append("g").classed(m.cn.cellTextHolder,!0).style("shape-rendering","geometricPrecision"),q}(G));(function(ie){ie.each(function(q){e.font(x.select(this),q.font)})})(W),w(W,Q,j,$),V(G)}function w($,Q,se,j){$.text(function(G){var W=G.column.specIndex,ie=G.rowNumber,q=G.value,te="string"==typeof q,ne=te&&q.match(/<br>/i),le=!te||ne;G.mayHaveMarkup=te&&q.match(/[<&>]/);var ue,de="string"==typeof(ue=q)&&ue.match(m.latexCheck);G.latex=de;var he,be,ge=de?"":M(G.calcdata.cells.prefix,W,ie)||"",we=de?"":M(G.calcdata.cells.suffix,W,ie)||"",Ce=de?null:M(G.calcdata.cells.format,W,ie)||null,De=ge+(Ce?T(Ce)(G.value):G.value)+we;if(G.wrappingNeeded=!G.wrapped&&!le&&!de&&(he=y(De)),G.cellHeightMayIncrease=ne||de||G.mayHaveMarkup||(void 0===he?y(De):he),G.needsConvertToTspans=G.mayHaveMarkup||G.wrappingNeeded||G.latex,G.wrappingNeeded){var Se=(" "===m.wrapSplitCharacter?De.replace(/<a href=/gi,"<a_href="):De).split(m.wrapSplitCharacter),Fe=" "===m.wrapSplitCharacter?Se.map(function(ve){return ve.replace(/<a_href=/gi,"<a href=")}):Se;G.fragments=Fe.map(function(ve){return{text:ve,width:null}}),G.fragments.push({fragment:m.wrapSpacer,width:null}),be=Fe.join(m.lineBreaker)+m.lineBreaker+m.wrapSpacer}else delete G.fragments,be=De;return be}).attr("dy",function(G){return G.needsConvertToTspans?0:"0.75em"}).each(function(G){var W=x.select(this);G.needsConvertToTspans?o.convertToTspans(W,j,(G.wrappingNeeded?L:I)(se,this,Q,j,G)):x.select(this.parentNode).attr("transform",function(q){return l(B(q),m.cellPad)}).attr("text-anchor",function(q){return{left:"start",center:"middle",right:"end"}[q.align]})})}function y($){return-1!==$.indexOf(m.wrapSplitCharacter)}function M($,Q,se){if(Array.isArray($)){var j=$[Math.min(Q,$.length-1)];return Array.isArray(j)?j[Math.min(se,j.length-1)]:j}return $}function A($,Q,se){$.transition().ease(m.releaseTransitionEase).duration(m.releaseTransitionDuration).attr("transform",l(Q.x,se))}function k($){return"cells"===$.type}function C($){return"header"===$.type}function P($){return($.rowBlocks.length?$.rowBlocks[0].auxiliaryBlocks:[]).reduce(function(Q,se){return Q+Y(se,1/0)},0)}function D($,Q,se){var j=v(Q)[0];if(void 0!==j){var G=j.rowBlocks,W=j.calcdata,ie=Z(G,G.length),q=j.calcdata.groupHeight-P(j),te=W.scrollY=Math.max(0,Math.min(ie-q,W.scrollY)),ne=function(le,ue,de){for(var he=[],be=0,ge=0;ge<le.length;ge++){for(var we=le[ge],Ce=we.rows,De=0,Se=0;Se<Ce.length;Se++)De+=Ce[Se].rowHeight;we.allRowsHeight=De,ue<be+De&&ue+de>be&&he.push(ge),be+=De}return he}(G,te,q);1===ne.length&&(ne[0]===G.length-1?ne.unshift(ne[0]-1):ne.push(ne[0]+1)),ne[0]%2&&ne.reverse(),Q.each(function(le,ue){le.page=ne[ue],le.scrollY=te}),Q.attr("transform",function(le){var ue=Z(le.rowBlocks,le.page)-le.scrollY;return l(0,ue)}),$&&(R($,se,Q,ne,j.prevPages,j,0),R($,se,Q,ne,j.prevPages,j,1),g(se,$))}}function F($,Q,se,j){return function(G){var W=G.calcdata?G.calcdata:G,ie=Q.filter(function(le){return W.key===le.key}),te=W.scrollY;W.scrollY=void 0===j?W.scrollY+(se||W.scrollbarState.dragMultiplier)*x.event.dy:j;var ne=ie.selectAll("."+m.cn.yColumn).selectAll("."+m.cn.columnBlock).filter(k);return D($,ne,ie),W.scrollY===te}}function R($,Q,se,j,G,W,ie){j[ie]!==G[ie]&&(clearTimeout(W.currentRepaint[ie]),W.currentRepaint[ie]=setTimeout(function(){var q=se.filter(function(te,ne){return ne===ie&&j[ne]!==G[ne]});f($,Q,q,se),G[ie]=j[ie]}))}function L($,Q,se,j){return function(){var G=x.select(Q.parentNode);G.each(function(W){var ie=W.fragments;G.selectAll("tspan.line").each(function(be,ge){ie[ge].width=this.getComputedTextLength()});var q,te,ne=ie[ie.length-1].width,le=ie.slice(0,-1),ue=[],de=0,he=W.column.columnWidth-2*m.cellPad;for(W.value="";le.length;)de+(te=(q=le.shift()).width+ne)>he&&(W.value+=ue.join(m.wrapSpacer)+m.lineBreaker,ue=[],de=0),ue.push(q.text),de+=te;de&&(W.value+=ue.join(m.wrapSpacer)),W.wrapped=!0}),G.selectAll("tspan.line").remove(),w(G.select("."+m.cn.cellText),se,$,j),x.select(Q.parentNode.parentNode).call(V)}}function I($,Q,se,j,G){return function(){if(!G.settledY){var W=x.select(Q.parentNode),ie=J(G),q=G.key-ie.firstRowIndex,te=ie.rows[q].rowHeight,ne=G.cellHeightMayIncrease?Q.parentNode.getBoundingClientRect().height+2*m.cellPad:te,le=Math.max(ne,te);le-ie.rows[q].rowHeight&&(ie.rows[q].rowHeight=le,$.selectAll("."+m.cn.columnCell).call(V),D(null,$.filter(k),0),g(se,j,!0)),W.attr("transform",function(){var ue=this.parentNode.getBoundingClientRect(),de=x.select(this.parentNode).select("."+m.cn.cellRect).node().getBoundingClientRect(),he=this.transform.baseVal.consolidate(),be=de.top-ue.top+(he?he.matrix.f:m.cellPad);return l(B(G,x.select(this.parentNode).select("."+m.cn.cellTextHolder).node().getBoundingClientRect().width),be)}),G.settledY=!0}}}function B($,Q){switch($.align){case"left":default:return m.cellPad;case"right":return $.column.columnWidth-(Q||0)-m.cellPad;case"center":return($.column.columnWidth-(Q||0))/2}}function V($){$.attr("transform",function(Q){var se=Q.rowBlocks[0].auxiliaryBlocks.reduce(function(G,W){return G+Y(W,1/0)},0),j=Y(J(Q),Q.key);return l(0,j+se)}).selectAll("."+m.cn.cellRect).attr("height",function(Q){return(se=J(Q),j=Q.key,se.rows[j-se.firstRowIndex]).rowHeight;var se,j})}function Z($,Q){for(var se=0,j=Q-1;j>=0;j--)se+=ee($[j]);return se}function Y($,Q){for(var se=0,j=0;j<$.rows.length&&$.rows[j].rowIndex<Q;j++)se+=$.rows[j].rowHeight;return se}function ee($){var Q=$.allRowsHeight;if(void 0!==Q)return Q;for(var se=0,j=0;j<$.rows.length;j++)se+=$.rows[j].rowHeight;return $.allRowsHeight=se,se}function J($){return $.rowBlocks[$.page]}oe.exports=function($,Q){var se=!$._context.staticPlot,j=$._fullLayout._paper.selectAll("."+m.cn.table).data(Q.map(function(we){var Ce=b.unwrap(we).trace;return d($,Ce)}),b.keyFun);j.exit().remove(),j.enter().append("g").classed(m.cn.table,!0).attr("overflow","visible").style("box-sizing","content-box").style("position","absolute").style("left",0).style("overflow","visible").style("shape-rendering","crispEdges").style("pointer-events","all"),j.attr("width",function(we){return we.width+we.size.l+we.size.r}).attr("height",function(we){return we.height+we.size.t+we.size.b}).attr("transform",function(we){return l(we.translateX,we.translateY)});var G=j.selectAll("."+m.cn.tableControlView).data(b.repeat,b.keyFun),W=G.enter().append("g").classed(m.cn.tableControlView,!0).style("box-sizing","content-box");if(se){var ie="onwheel"in document?"wheel":"mousewheel";W.on("mousemove",function(we){G.filter(function(Ce){return we===Ce}).call(g,$)}).on(ie,function(we){we.scrollbarState.wheeling||(we.scrollbarState.wheeling=!0,F($,G,null,we.scrollY+x.event.deltaY)(we)||(x.event.stopPropagation(),x.event.preventDefault()),we.scrollbarState.wheeling=!1)}).call(g,$,!0)}G.attr("transform",function(we){return l(we.size.l,we.size.t)});var q=G.selectAll("."+m.cn.scrollBackground).data(b.repeat,b.keyFun);q.enter().append("rect").classed(m.cn.scrollBackground,!0).attr("fill","none"),q.attr("width",function(we){return we.width}).attr("height",function(we){return we.height}),G.each(function(we){e.setClipUrl(x.select(this),h($,we),$)});var te=G.selectAll("."+m.cn.yColumn).data(function(we){return we.columns},b.keyFun);te.enter().append("g").classed(m.cn.yColumn,!0),te.exit().remove(),te.attr("transform",function(we){return l(we.x,0)}),se&&te.call(x.behavior.drag().origin(function(we){return A(x.select(this),we,-m.uplift),a(this),we.calcdata.columnDragInProgress=!0,g(G.filter(function(Ce){return we.calcdata.key===Ce.key}),$),we}).on("drag",function(we){var Ce=x.select(this),De=function(Se){return(we===Se?x.event.x:Se.x)+Se.columnWidth/2};we.x=Math.max(-m.overdrag,Math.min(we.calcdata.width+m.overdrag-we.columnWidth,x.event.x)),v(te).filter(function(Se){return Se.calcdata.key===we.calcdata.key}).sort(function(Se,Fe){return De(Se)-De(Fe)}).forEach(function(Se,Fe){Se.xIndex=Fe,Se.x=we===Se?Se.x:Se.xScale(Se)}),te.filter(function(Se){return we!==Se}).transition().ease(m.transitionEase).duration(m.transitionDuration).attr("transform",function(Se){return l(Se.x,0)}),Ce.call(i).attr("transform",l(we.x,-m.uplift))}).on("dragend",function(we){var Se,Fe,ve,Te,Ce=x.select(this),De=we.calcdata;we.x=we.xScale(we),we.calcdata.columnDragInProgress=!1,A(Ce,we,0),Se=$,Fe=De,ve=De.columns.map(function(Se){return Se.xIndex}),Te=Fe.gdColumnsOriginalOrder,Fe.gdColumns.sort(function(Le,Ee){return ve[Te.indexOf(Le)]-ve[Te.indexOf(Ee)]}),Fe.columnorder=ve,Se.emit("plotly_restyle")})),te.each(function(we){e.setClipUrl(x.select(this),p($,we),$)});var ne=te.selectAll("."+m.cn.columnBlock).data(u.splitToPanels,b.keyFun);ne.enter().append("g").classed(m.cn.columnBlock,!0).attr("id",function(we){return we.key}),ne.style("cursor",function(we){return we.dragHandle?"ew-resize":we.calcdata.scrollbarState.barWiggleRoom?"ns-resize":"default"});var le=ne.filter(C),ue=ne.filter(k);se&&ue.call(x.behavior.drag().origin(function(we){return x.event.stopPropagation(),we}).on("drag",F($,G,-1)).on("dragend",function(){})),f($,G,le,ne),f($,G,ue,ne);var de=G.selectAll("."+m.cn.scrollAreaClip).data(b.repeat,b.keyFun);de.enter().append("clipPath").classed(m.cn.scrollAreaClip,!0).attr("id",function(we){return h($,we)});var he=de.selectAll("."+m.cn.scrollAreaClipRect).data(b.repeat,b.keyFun);he.enter().append("rect").classed(m.cn.scrollAreaClipRect,!0).attr("x",-m.overdrag).attr("y",-m.uplift).attr("fill","none"),he.attr("width",function(we){return we.width+2*m.overdrag}).attr("height",function(we){return we.height+m.uplift}),te.selectAll("."+m.cn.columnBoundary).data(b.repeat,b.keyFun).enter().append("g").classed(m.cn.columnBoundary,!0);var be=te.selectAll("."+m.cn.columnBoundaryClippath).data(b.repeat,b.keyFun);be.enter().append("clipPath").classed(m.cn.columnBoundaryClippath,!0),be.attr("id",function(we){return p($,we)});var ge=be.selectAll("."+m.cn.columnBoundaryRect).data(b.repeat,b.keyFun);ge.enter().append("rect").classed(m.cn.columnBoundaryRect,!0).attr("fill","none"),ge.attr("width",function(we){return we.columnWidth+2*c(we)}).attr("height",function(we){return we.calcdata.height+2*c(we)+m.uplift}).attr("x",function(we){return-c(we)}).attr("y",function(we){return-c(we)}),D(null,ue,G)}},{"../../components/color":366,"../../components/drawing":388,"../../lib":503,"../../lib/gup":500,"../../lib/svg_text_utils":529,"./constants":1065,"./data_preparation_helper":1066,"./data_split_helpers":1067,"@plotly/d3":58}],1071:[function(_,oe,ae){"use strict";var m=_("../../plots/template_attributes").hovertemplateAttrs,x=_("../../plots/template_attributes").texttemplateAttrs,T=_("../../components/colorscale/attributes"),b=_("../../plots/domain").attributes,e=_("../pie/attributes"),o=_("../sunburst/attributes"),a=_("./constants"),l=_("../../lib/extend").extendFlat;oe.exports={labels:o.labels,parents:o.parents,values:o.values,branchvalues:o.branchvalues,count:o.count,level:o.level,maxdepth:o.maxdepth,tiling:{packing:{valType:"enumerated",values:["squarify","binary","dice","slice","slice-dice","dice-slice"],dflt:"squarify",editType:"plot"},squarifyratio:{valType:"number",min:1,dflt:1,editType:"plot"},flip:{valType:"flaglist",flags:["x","y"],dflt:"",editType:"plot"},pad:{valType:"number",min:0,dflt:3,editType:"plot"},editType:"calc"},marker:l({pad:{t:{valType:"number",min:0,editType:"plot"},l:{valType:"number",min:0,editType:"plot"},r:{valType:"number",min:0,editType:"plot"},b:{valType:"number",min:0,editType:"plot"},editType:"calc"},colors:o.marker.colors,depthfade:{valType:"enumerated",values:[!0,!1,"reversed"],editType:"style"},line:o.marker.line,editType:"calc"},T("marker",{colorAttr:"colors",anim:!1})),pathbar:{visible:{valType:"boolean",dflt:!0,editType:"plot"},side:{valType:"enumerated",values:["top","bottom"],dflt:"top",editType:"plot"},edgeshape:{valType:"enumerated",values:[">","<","|","/","\\"],dflt:">",editType:"plot"},thickness:{valType:"number",min:12,editType:"plot"},textfont:l({},e.textfont,{}),editType:"calc"},text:e.text,textinfo:o.textinfo,texttemplate:x({editType:"plot"},{keys:a.eventDataKeys.concat(["label","value"])}),hovertext:e.hovertext,hoverinfo:o.hoverinfo,hovertemplate:m({},{keys:a.eventDataKeys}),textfont:e.textfont,insidetextfont:e.insidetextfont,outsidetextfont:l({},e.outsidetextfont,{}),textposition:{valType:"enumerated",values:["top left","top center","top right","middle left","middle center","middle right","bottom left","bottom center","bottom right"],dflt:"top left",editType:"plot"},sort:e.sort,root:o.root,domain:b({name:"treemap",trace:!0,editType:"calc"})}},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plots/domain":584,"../../plots/template_attributes":633,"../pie/attributes":900,"../sunburst/attributes":1045,"./constants":1074}],1072:[function(_,oe,ae){"use strict";var m=_("../../plots/plots");ae.name="treemap",ae.plot=function(x,T,b,e){m.plotBasePlot(ae.name,x,T,b,e)},ae.clean=function(x,T,b,e){m.cleanBasePlot(ae.name,x,T,b,e)}},{"../../plots/plots":619}],1073:[function(_,oe,ae){"use strict";var m=_("../sunburst/calc");ae.calc=function(x,T){return m.calc(x,T)},ae.crossTraceCalc=function(x){return m._runCrossTraceCalc("treemap",x)}},{"../sunburst/calc":1047}],1074:[function(_,oe,ae){"use strict";oe.exports={CLICK_TRANSITION_TIME:750,CLICK_TRANSITION_EASING:"poly",eventDataKeys:["currentPath","root","entry","percentRoot","percentEntry","percentParent"],gapWithPathbar:1}},{}],1075:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./attributes"),T=_("../../components/color"),b=_("../../plots/domain").defaults,e=_("../bar/defaults").handleText,o=_("../bar/constants").TEXTPAD,a=_("../../components/colorscale"),l=a.hasColorscale,i=a.handleDefaults;oe.exports=function(d,u,s,c){function h(k,C){return m.coerce(d,u,x,k,C)}var p=h("labels"),v=h("parents");if(p&&p.length&&v&&v.length){var g=h("values");h(g&&g.length?"branchvalues":"count"),h("level"),h("maxdepth"),"squarify"===h("tiling.packing")&&h("tiling.squarifyratio"),h("tiling.flip"),h("tiling.pad");var f=h("text");h("texttemplate"),u.texttemplate||h("textinfo",Array.isArray(f)?"text+label":"label"),h("hovertext"),h("hovertemplate");var w=h("pathbar.visible");e(d,u,c,h,"auto",{hasPathbar:w,moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!1,moduleHasCliponaxis:!1,moduleHasTextangle:!1,moduleHasInsideanchor:!1}),h("textposition");var y=-1!==u.textposition.indexOf("bottom");h("marker.line.width")&&h("marker.line.color",c.paper_bgcolor);var M=h("marker.colors");(u._hasColorscale=l(d,"marker","colors")||(d.marker||{}).coloraxis)?i(d,u,c,h,{prefix:"marker.",cLetter:"c"}):h("marker.depthfade",!(M||[]).length);var A=2*u.textfont.size;h("marker.pad.t",y?A/4:A),h("marker.pad.l",A/4),h("marker.pad.r",A/4),h("marker.pad.b",y?A:A/4),u._hovered={marker:{line:{width:2,color:T.contrast(c.paper_bgcolor)}}},w&&(h("pathbar.thickness",u.pathbar.textfont.size+2*o),h("pathbar.side"),h("pathbar.edgeshape")),h("sort"),h("root.color"),b(u,c,h),u._length=null}else u.visible=!1}},{"../../components/color":366,"../../components/colorscale":378,"../../lib":503,"../../plots/domain":584,"../bar/constants":650,"../bar/defaults":652,"./attributes":1071}],1076:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../sunburst/helpers"),T=_("../bar/uniform_text").clearMinTextSize,b=_("../bar/style").resizeText,e=_("./plot_one");oe.exports=function(o,a,l,i,d){var u,s,c=d.type,h=d.drawDescendants,p=o._fullLayout,v=p["_"+c+"layer"],g=!l;T(c,p),(u=v.selectAll("g.trace."+c).data(a,function(f){return f[0].trace.uid})).enter().append("g").classed("trace",!0).classed(c,!0),u.order(),!p.uniformtext.mode&&x.hasTransition(l)?(i&&(s=i()),m.transition().duration(l.duration).ease(l.easing).each("end",function(){s&&s()}).each("interrupt",function(){s&&s()}).each(function(){v.selectAll("g.trace").each(function(f){e(o,f,this,l,h)})})):(u.each(function(f){e(o,f,this,l,h)}),p.uniformtext.mode&&b(o,v.selectAll(".trace"),c)),g&&u.exit().remove()}},{"../bar/style":662,"../bar/uniform_text":664,"../sunburst/helpers":1051,"./plot_one":1085,"@plotly/d3":58}],1077:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing"),b=_("../../lib/svg_text_utils"),e=_("./partition"),o=_("./style").styleOne,a=_("./constants"),l=_("../sunburst/helpers"),i=_("../sunburst/fx");oe.exports=function(d,u,s,c,h){var p=h.barDifY,v=h.width,g=h.height,f=h.viewX,w=h.viewY,y=h.pathSlice,M=h.toMoveInsideSlice,A=h.strTransform,k=h.hasTransition,C=h.handleSlicesExit,P=h.makeUpdateSliceInterpolator,D=h.makeUpdateTextInterpolator,F={},R=d._fullLayout,L=u[0],I=L.trace,B=L.hierarchy,V=v/I._entryDepth,Z=l.listPath(s.data,"id"),Y=e(B.copy(),[v,g],{packing:"dice",pad:{inner:0,top:0,left:0,right:0,bottom:0}}).descendants();(Y=Y.filter(function(J){var $=Z.indexOf(J.data.id);return-1!==$&&(J.x0=V*$,J.x1=V*($+1),J.y0=p,J.y1=p+g,J.onPathbar=!0,!0)})).reverse(),(c=c.data(Y,l.getPtId)).enter().append("g").classed("pathbar",!0),C(c,!0,F,[v,g],y),c.order();var ee=c;k&&(ee=ee.transition().each("end",function(){var J=m.select(this);l.setSliceCursor(J,d,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:!1})})),ee.each(function(J){J._x0=f(J.x0),J._x1=f(J.x1),J._y0=w(J.y0),J._y1=w(J.y1),J._hoverX=f(J.x1-Math.min(v,g)/2),J._hoverY=w(J.y1-g/2);var $=m.select(this),Q=x.ensureSingle($,"path","surface",function(W){W.style("pointer-events","all")});k?Q.transition().attrTween("d",function(W){var ie=P(W,!0,F,[v,g]);return function(q){return y(ie(q))}}):Q.attr("d",y),$.call(i,s,d,u,{styleOne:o,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,d,{hideOnRoot:!1,hideOnLeaves:!1,isTransitioning:d._transitioning}),Q.call(o,J,I,{hovered:!1}),J._text=(l.getPtLabel(J)||"").split("<br>").join(" ")||"";var se=x.ensureSingle($,"g","slicetext"),j=x.ensureSingle(se,"text","",function(W){W.attr("data-notex",1)}),G=x.ensureUniformFontSize(d,l.determineTextFont(I,J,R.font,{onPathbar:!0}));j.text(J._text||" ").classed("slicetext",!0).attr("text-anchor","start").call(T.font,G).call(b.convertToTspans,d),J.textBB=T.bBox(j.node()),J.transform=M(J,{fontSize:G.size,onPathbar:!0}),J.transform.fontSize=G.size,k?j.transition().attrTween("transform",function(W){var ie=D(W,!0,F,[v,g]);return function(q){return A(ie(q))}}):j.attr("transform",A(J))})}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"./constants":1074,"./partition":1083,"./style":1086,"@plotly/d3":58}],1078:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing"),b=_("../../lib/svg_text_utils"),e=_("./partition"),o=_("./style").styleOne,a=_("./constants"),l=_("../sunburst/helpers"),i=_("../sunburst/fx"),d=_("../sunburst/plot").formatSliceLabel;oe.exports=function(u,s,c,h,p){var v=p.width,g=p.height,f=p.viewX,w=p.viewY,y=p.pathSlice,M=p.toMoveInsideSlice,A=p.strTransform,k=p.hasTransition,C=p.handleSlicesExit,P=p.makeUpdateSliceInterpolator,D=p.makeUpdateTextInterpolator,F=p.prevEntry,R=u._fullLayout,L=s[0].trace,I=-1!==L.textposition.indexOf("left"),B=-1!==L.textposition.indexOf("right"),V=-1!==L.textposition.indexOf("bottom"),Z=!V&&!L.marker.pad.t||V&&!L.marker.pad.b,Y=e(c,[v,g],{packing:L.tiling.packing,squarifyratio:L.tiling.squarifyratio,flipX:L.tiling.flip.indexOf("x")>-1,flipY:L.tiling.flip.indexOf("y")>-1,pad:{inner:L.tiling.pad,top:L.marker.pad.t,left:L.marker.pad.l,right:L.marker.pad.r,bottom:L.marker.pad.b}}).descendants(),ee=1/0,J=-1/0;Y.forEach(function(G){var W=G.depth;W>=L._maxDepth?(G.x0=G.x1=(G.x0+G.x1)/2,G.y0=G.y1=(G.y0+G.y1)/2):(ee=Math.min(ee,W),J=Math.max(J,W))}),h=h.data(Y,l.getPtId),L._maxVisibleLayers=isFinite(J)?J-ee+1:0,h.enter().append("g").classed("slice",!0),C(h,!1,{},[v,g],y),h.order();var $=null;if(k&&F){var Q=l.getPtId(F);h.each(function(G){null===$&&l.getPtId(G)===Q&&($={x0:G.x0,x1:G.x1,y0:G.y0,y1:G.y1})})}var se=function(){return $||{x0:0,x1:v,y0:0,y1:g}},j=h;return k&&(j=j.transition().each("end",function(){var G=m.select(this);l.setSliceCursor(G,u,{hideOnRoot:!0,hideOnLeaves:!1,isTransitioning:!1})})),j.each(function(G){var W=l.isHeader(G,L);G._x0=f(G.x0),G._x1=f(G.x1),G._y0=w(G.y0),G._y1=w(G.y1),G._hoverX=f(G.x1-L.marker.pad.r),G._hoverY=w(V?G.y1-L.marker.pad.b/2:G.y0+L.marker.pad.t/2);var ie=m.select(this),q=x.ensureSingle(ie,"path","surface",function(ue){ue.style("pointer-events","all")});k?q.transition().attrTween("d",function(ue){var de=P(ue,!1,se(),[v,g]);return function(he){return y(de(he))}}):q.attr("d",y),ie.call(i,c,u,s,{styleOne:o,eventDataKeys:a.eventDataKeys,transitionTime:a.CLICK_TRANSITION_TIME,transitionEasing:a.CLICK_TRANSITION_EASING}).call(l.setSliceCursor,u,{isTransitioning:u._transitioning}),q.call(o,G,L,{hovered:!1}),G._text=G.x0===G.x1||G.y0===G.y1?"":W?Z?"":l.getPtLabel(G)||"":d(G,c,L,s,R)||"";var te=x.ensureSingle(ie,"g","slicetext"),ne=x.ensureSingle(te,"text","",function(ue){ue.attr("data-notex",1)}),le=x.ensureUniformFontSize(u,l.determineTextFont(L,G,R.font));ne.text(G._text||" ").classed("slicetext",!0).attr("text-anchor",B?"end":I||W?"start":"middle").call(T.font,le).call(b.convertToTspans,u),G.textBB=T.bBox(ne.node()),G.transform=M(G,{fontSize:le.size,isHeader:W}),G.transform.fontSize=le.size,k?ne.transition().attrTween("transform",function(ue){var de=D(ue,!1,se(),[v,g]);return function(he){return A(de(he))}}):ne.attr("transform",A(G))}),$}},{"../../components/drawing":388,"../../lib":503,"../../lib/svg_text_utils":529,"../sunburst/fx":1050,"../sunburst/helpers":1051,"../sunburst/plot":1055,"./constants":1074,"./partition":1083,"./style":1086,"@plotly/d3":58}],1079:[function(_,oe,ae){"use strict";oe.exports=function m(x,T,b){var e;b.swapXY&&(e=x.x0,x.x0=x.y0,x.y0=e,e=x.x1,x.x1=x.y1,x.y1=e),b.flipX&&(e=x.x0,x.x0=T[0]-x.x1,x.x1=T[0]-e),b.flipY&&(e=x.y0,x.y0=T[1]-x.y1,x.y1=T[1]-e);var o=x.children;if(o)for(var a=0;a<o.length;a++)m(o[a],T,b)}},{}],1080:[function(_,oe,ae){"use strict";oe.exports={moduleType:"trace",name:"treemap",basePlotModule:_("./base_plot"),categories:[],animatable:!0,attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults"),supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc").calc,crossTraceCalc:_("./calc").crossTraceCalc,plot:_("./plot"),style:_("./style").style,colorbar:_("../scatter/marker_colorbar"),meta:{}}},{"../scatter/marker_colorbar":944,"./attributes":1071,"./base_plot":1072,"./calc":1073,"./defaults":1075,"./layout_attributes":1081,"./layout_defaults":1082,"./plot":1084,"./style":1086}],1081:[function(_,oe,ae){"use strict";oe.exports={treemapcolorway:{valType:"colorlist",editType:"calc"},extendtreemapcolors:{valType:"boolean",dflt:!0,editType:"calc"}}},{}],1082:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./layout_attributes");oe.exports=function(T,b){function e(o,a){return m.coerce(T,b,x,o,a)}e("treemapcolorway",b.colorway),e("extendtreemapcolors")}},{"../../lib":503,"./layout_attributes":1081}],1083:[function(_,oe,ae){"use strict";var m=_("d3-hierarchy"),x=_("./flip_tree");oe.exports=function(T,b,e){var o,a=e.flipX,l=e.flipY,i="dice-slice"===e.packing,d=e.pad[l?"bottom":"top"],u=e.pad[a?"right":"left"],s=e.pad[a?"left":"right"],c=e.pad[l?"top":"bottom"];i&&(o=u,u=d,d=o,o=s,s=c,c=o);var h=m.treemap().tile(function(p,v){switch(p){case"squarify":return m.treemapSquarify.ratio(v);case"binary":return m.treemapBinary;case"dice":return m.treemapDice;case"slice":return m.treemapSlice;default:return m.treemapSliceDice}}(e.packing,e.squarifyratio)).paddingInner(e.pad.inner).paddingLeft(u).paddingRight(s).paddingTop(d).paddingBottom(c).size(i?[b[1],b[0]]:b)(T);return(i||a||l)&&x(h,b,{swapXY:i,flipX:a,flipY:l}),h}},{"./flip_tree":1079,"d3-hierarchy":115}],1084:[function(_,oe,ae){"use strict";var m=_("./draw"),x=_("./draw_descendants");oe.exports=function(T,b,e,o){return m(T,b,e,o,{type:"treemap",drawDescendants:x})}},{"./draw":1076,"./draw_descendants":1078}],1085:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("d3-interpolate").interpolate,T=_("../sunburst/helpers"),b=_("../../lib"),e=_("../bar/constants").TEXTPAD,o=_("../bar/plot").toMoveInsideBar,a=_("../bar/uniform_text").recordMinTextSize,l=_("./constants"),i=_("./draw_ancestors");function d(u){return T.isHierarchyRoot(u)?"":T.getPtId(u)}oe.exports=function(u,s,c,h,p){var v=u._fullLayout,g=s[0],f=g.trace,w="icicle"===f.type,y=g.hierarchy,M=T.findEntryWithLevel(y,f.level),A=m.select(c),k=A.selectAll("g.pathbar"),C=A.selectAll("g.slice");if(!M)return k.remove(),void C.remove();var P=T.isHierarchyRoot(M),D=!v.uniformtext.mode&&T.hasTransition(h),F=T.getMaxDepth(f),R=v._size,L=f.domain,I=R.w*(L.x[1]-L.x[0]),B=R.h*(L.y[1]-L.y[0]),V=I,Z=f.pathbar.thickness,Y=f.marker.line.width+l.gapWithPathbar,ee=f.pathbar.visible?f.pathbar.side.indexOf("bottom")>-1?B+Y:-(Z+Y):0,J={x0:V,x1:V,y0:ee,y1:ee+Z},$=function(Pe,je,Ge){var Ke=f.tiling.pad,lt=function(tt){return tt-Ke<=je.x0},Ue=function(tt){return tt+Ke>=je.x1},$e=function(tt){return tt-Ke<=je.y0},et=function(tt){return tt+Ke>=je.y1};return Pe.x0===je.x0&&Pe.x1===je.x1&&Pe.y0===je.y0&&Pe.y1===je.y1?{x0:Pe.x0,x1:Pe.x1,y0:Pe.y0,y1:Pe.y1}:{x0:lt(Pe.x0-Ke)?0:Ue(Pe.x0-Ke)?Ge[0]:Pe.x0,x1:lt(Pe.x1+Ke)?0:Ue(Pe.x1+Ke)?Ge[0]:Pe.x1,y0:$e(Pe.y0-Ke)?0:et(Pe.y0-Ke)?Ge[1]:Pe.y0,y1:$e(Pe.y1+Ke)?0:et(Pe.y1+Ke)?Ge[1]:Pe.y1}},Q=null,se={},j={},G=null,W=function(Pe,je){return je?se[d(Pe)]:j[d(Pe)]};g.hasMultipleRoots&&P&&F++,f._maxDepth=F,f._backgroundColor=v.paper_bgcolor,f._entryDepth=M.data.depth,f._atRootLevel=P;var q=-I/2+R.l+R.w*(L.x[1]+L.x[0])/2,te=-B/2+R.t+R.h*(1-(L.y[1]+L.y[0])/2),ne=function(Pe){return q+Pe},le=function(Pe){return te+Pe},ue=le(0),de=ne(0),he=function(Pe){return de+Pe},be=function(Pe){return ue+Pe};function ge(Pe,je){return Pe+","+je}var we=he(0),Ce=function(Pe){Pe.x=Math.max(we,Pe.x)},De=f.pathbar.edgeshape,Se=function(Pe,je){var Ge=Pe.x0,Ke=Pe.x1,lt=Pe.y0,Ue=Pe.y1,$e=Pe.textBB,et=function(Ot){return-1!==f.textposition.indexOf(Ot)},tt=et("bottom"),ct=et("top")||je.isHeader&&!tt?"start":tt?"end":"middle",xt=et("right"),Ct=et("left")||je.onPathbar?-1:xt?1:0,Ht=f[w?"tiling":"marker"].pad;if(je.isHeader){if((Ge+=(w?Ht:Ht.l)-e)>=(Ke-=(w?Ht:Ht.r)-e)){var zt=(Ge+Ke)/2;Ge=zt,Ke=zt}var ht;tt?lt<(ht=Ue-(w?Ht:Ht.b))&&ht<Ue&&(lt=ht):lt<(ht=lt+(w?Ht:Ht.t))&&ht<Ue&&(Ue=ht)}var ut=o(Ge,Ke,lt,Ue,$e,{isHorizontal:!1,constrained:!0,angle:0,anchor:ct,leftToRight:Ct});return ut.fontSize=je.fontSize,ut.targetX=ne(ut.targetX),ut.targetY=le(ut.targetY),isNaN(ut.targetX)||isNaN(ut.targetY)?{}:(Ge!==Ke&&lt!==Ue&&a(f.type,ut,v),{scale:ut.scale,rotate:ut.rotate,textX:ut.textX,textY:ut.textY,anchorX:ut.anchorX,anchorY:ut.anchorY,targetX:ut.targetX,targetY:ut.targetY})},Fe=function(Pe,je){for(var Ge,Ke=0,lt=Pe;!Ge&&Ke<F;)Ke++,(lt=lt.parent)?Ge=W(lt,je):Ke=F;return Ge||{}},ve=function(Pe,je,Ge,Ke,lt){var Ue,$e=W(Pe,je);if($e)Ue=$e;else if(je)Ue=J;else if(Q)if(Pe.parent){var et=G||Ge;et&&!je?Ue=$(Pe,et,Ke):b.extendFlat(Ue={},Fe(Pe,je))}else Ue=b.extendFlat({},Pe),w&&("h"===lt.orientation?lt.flipX?Ue.x0=Pe.x1:Ue.x1=0:lt.flipY?Ue.y0=Pe.y1:Ue.y1=0);else Ue={};return x(Ue,{x0:Pe.x0,x1:Pe.x1,y0:Pe.y0,y1:Pe.y1})},Te=function(Pe,je,Ge,Ke){var lt=W(Pe,je),Ue={},$e=function(Pe,je,Ge,Ke){return je?se[d(y)]||J:Pe.data.depth-M.data.depth<F?$(Pe,j[f.level]||Ge,Ke):{}}(Pe,je,Ge,Ke);b.extendFlat(Ue,{transform:Se({x0:$e.x0,x1:$e.x1,y0:$e.y0,y1:$e.y1,textBB:Pe.textBB,_text:Pe._text},{isHeader:T.isHeader(Pe,f)})}),lt?Ue=lt:Pe.parent&&b.extendFlat(Ue,Fe(Pe,je));var et=Pe.transform;return Pe.x0!==Pe.x1&&Pe.y0!==Pe.y1&&a(f.type,et,v),x(Ue,{transform:{scale:et.scale,rotate:et.rotate,textX:et.textX,textY:et.textY,anchorX:et.anchorX,anchorY:et.anchorY,targetX:et.targetX,targetY:et.targetY}})},Le=function(Pe,je,Ge,Ke,lt){var Ue=Ke[0],$e=Ke[1];D?Pe.exit().transition().each(function(){var et=m.select(this);et.select("path.surface").transition().attrTween("d",function(tt){var ct=function(xt,Ct,Ht,zt){var ht,ut=W(xt,Ct);if(Ct)ht=J;else{var Ot=W(M,Ct);ht=Ot?$(xt,Ot,zt):{}}return x(ut,ht)}(tt,je,0,[Ue,$e]);return function(xt){return lt(ct(xt))}}),et.select("g.slicetext").attr("opacity",0)}).remove():Pe.exit().remove()},Ee=function(Pe){var je=Pe.transform;return Pe.x0!==Pe.x1&&Pe.y0!==Pe.y1&&a(f.type,je,v),b.getTextTransform({textX:je.textX,textY:je.textY,anchorX:je.anchorX,anchorY:je.anchorY,targetX:je.targetX,targetY:je.targetY,scale:je.scale,rotate:je.rotate})};D&&(k.each(function(Pe){se[d(Pe)]={x0:Pe.x0,x1:Pe.x1,y0:Pe.y0,y1:Pe.y1},Pe.transform&&(se[d(Pe)].transform={textX:Pe.transform.textX,textY:Pe.transform.textY,anchorX:Pe.transform.anchorX,anchorY:Pe.transform.anchorY,targetX:Pe.transform.targetX,targetY:Pe.transform.targetY,scale:Pe.transform.scale,rotate:Pe.transform.rotate})}),C.each(function(Pe){j[d(Pe)]={x0:Pe.x0,x1:Pe.x1,y0:Pe.y0,y1:Pe.y1},Pe.transform&&(j[d(Pe)].transform={textX:Pe.transform.textX,textY:Pe.transform.textY,anchorX:Pe.transform.anchorX,anchorY:Pe.transform.anchorY,targetX:Pe.transform.targetX,targetY:Pe.transform.targetY,scale:Pe.transform.scale,rotate:Pe.transform.rotate}),!Q&&T.isEntry(Pe)&&(Q=Pe)})),G=p(u,s,M,C,{width:I,height:B,viewX:ne,viewY:le,pathSlice:function(Pe){var je=ne(Pe.x0),Ge=ne(Pe.x1),Ke=le(Pe.y0),lt=le(Pe.y1);return Ge-je&&lt-Ke?"M"+ge(je,Ke+0)+"L"+ge(Ge-0,Ke)+"L"+ge(Ge,lt-0)+"L"+ge(je+0,lt)+"Z":""},toMoveInsideSlice:Se,prevEntry:Q,makeUpdateSliceInterpolator:ve,makeUpdateTextInterpolator:Te,handleSlicesExit:Le,hasTransition:D,strTransform:Ee}),f.pathbar.visible?i(u,s,M,k,{barDifY:ee,width:V,height:Z,viewX:he,viewY:be,pathSlice:function(Pe){var je=he(Math.max(Math.min(Pe.x0,Pe.x0),0)),Ge=he(Math.min(Math.max(Pe.x1,Pe.x1),V)),Ke=be(Pe.y0),lt=be(Pe.y1),Ue=Z/2,$e={},et={};$e.x=je,et.x=Ge,$e.y=et.y=(Ke+lt)/2;var tt={x:je,y:Ke},ct={x:Ge,y:Ke},xt={x:Ge,y:lt},Ct={x:je,y:lt};return">"===De?(tt.x-=Ue,ct.x-=Ue,xt.x-=Ue,Ct.x-=Ue):"/"===De?(xt.x-=Ue,Ct.x-=Ue,$e.x-=Ue/2,et.x-=Ue/2):"\\"===De?(tt.x-=Ue,ct.x-=Ue,$e.x-=Ue/2,et.x-=Ue/2):"<"===De&&($e.x-=Ue,et.x-=Ue),Ce(tt),Ce(Ct),Ce($e),Ce(ct),Ce(xt),Ce(et),"M"+ge(tt.x,tt.y)+"L"+ge(ct.x,ct.y)+"L"+ge(et.x,et.y)+"L"+ge(xt.x,xt.y)+"L"+ge(Ct.x,Ct.y)+"L"+ge($e.x,$e.y)+"Z"},toMoveInsideSlice:Se,makeUpdateSliceInterpolator:ve,makeUpdateTextInterpolator:Te,handleSlicesExit:Le,hasTransition:D,strTransform:Ee}):k.remove()}},{"../../lib":503,"../bar/constants":650,"../bar/plot":659,"../bar/uniform_text":664,"../sunburst/helpers":1051,"./constants":1074,"./draw_ancestors":1077,"@plotly/d3":58,"d3-interpolate":116}],1086:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../components/color"),T=_("../../lib"),b=_("../sunburst/helpers"),e=_("../bar/uniform_text").resizeText;function o(a,l,i,d){var u,s,c=(d||{}).hovered,h=l.data.data,p=h.i,v=h.color,g=b.isHierarchyRoot(l),f=1;if(c)u=i._hovered.marker.line.color,s=i._hovered.marker.line.width;else if(g&&v===i.root.color)f=100,u="rgba(0,0,0,0)",s=0;else if(u=T.castOption(i,p,"marker.line.color")||x.defaultLine,s=T.castOption(i,p,"marker.line.width")||0,!i._hasColorscale&&!l.onPathbar){var w=i.marker.depthfade;if(w){var y,M=x.combine(x.addOpacity(i._backgroundColor,.75),v);if(!0===w){var A=b.getMaxDepth(i);y=isFinite(A)?b.isLeaf(l)?0:i._maxVisibleLayers-(l.data.depth-i._entryDepth):l.data.height+1}else y=l.data.depth-i._entryDepth,i._atRootLevel||y++;if(y>0)for(var k=0;k<y;k++)v=x.combine(x.addOpacity(M,.5*k/y),v)}}a.style("stroke-width",s).call(x.fill,v).call(x.stroke,u).style("opacity",f)}oe.exports={style:function(a){var l=a._fullLayout._treemaplayer.selectAll(".trace");e(a,l,"treemap"),l.each(function(i){var d=m.select(this),u=i[0].trace;d.style("opacity",u.opacity),d.selectAll("path.surface").each(function(s){m.select(this).call(o,s,u,{hovered:!1})})})},styleOne:o}},{"../../components/color":366,"../../lib":503,"../bar/uniform_text":664,"../sunburst/helpers":1051,"@plotly/d3":58}],1087:[function(_,oe,ae){"use strict";var m=_("../box/attributes"),x=_("../../lib/extend").extendFlat,T=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat;oe.exports={y:m.y,x:m.x,x0:m.x0,y0:m.y0,xhoverformat:T("x"),yhoverformat:T("y"),name:x({},m.name,{}),orientation:x({},m.orientation,{}),bandwidth:{valType:"number",min:0,editType:"calc"},scalegroup:{valType:"string",dflt:"",editType:"calc"},scalemode:{valType:"enumerated",values:["width","count"],dflt:"width",editType:"calc"},spanmode:{valType:"enumerated",values:["soft","hard","manual"],dflt:"soft",editType:"calc"},span:{valType:"info_array",items:[{valType:"any",editType:"calc"},{valType:"any",editType:"calc"}],editType:"calc"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,dflt:2,editType:"style"},editType:"plot"},fillcolor:m.fillcolor,points:x({},m.boxpoints,{}),jitter:x({},m.jitter,{}),pointpos:x({},m.pointpos,{}),width:x({},m.width,{}),marker:m.marker,text:m.text,hovertext:m.hovertext,hovertemplate:m.hovertemplate,box:{visible:{valType:"boolean",dflt:!1,editType:"plot"},width:{valType:"number",min:0,max:1,dflt:.25,editType:"plot"},fillcolor:{valType:"color",editType:"style"},line:{color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"style"},editType:"plot"},meanline:{visible:{valType:"boolean",dflt:!1,editType:"plot"},color:{valType:"color",editType:"style"},width:{valType:"number",min:0,editType:"style"},editType:"plot"},side:{valType:"enumerated",values:["both","positive","negative"],dflt:"both",editType:"calc"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup,selected:m.selected,unselected:m.unselected,hoveron:{valType:"flaglist",flags:["violins","points","kde"],dflt:"violins+points+kde",extras:["all"],editType:"style"}}},{"../../lib/extend":493,"../../plots/cartesian/axis_format_attributes":557,"../box/attributes":673}],1088:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../box/calc"),b=_("./helpers"),e=_("../../constants/numerical").BADNUM;function o(l,i,d){var u=i.max-i.min;if(!u)return l.bandwidth?l.bandwidth:0;if(l.bandwidth)return Math.max(l.bandwidth,u/1e4);var h,s=d.length,c=m.stdev(d,s-1,i.mean);return Math.max((h=s,1.059*Math.min(c,(i.q3-i.q1)/1.349)*Math.pow(h,-.2)),u/100)}function a(l,i,d,u){var s,c=l.spanmode,h=l.span||[],v=[i.min-2*u,i.max+2*u];function g(w){var y=h[w],M="multicategory"===d.type?d.r2c(y):d.d2c(y,0,l[i.valLetter+"calendar"]);return M===e?v[w]:M}var f={type:"linear",range:s="soft"===c?v:"hard"===c?[i.min,i.max]:[g(0),g(1)]};return x.setConvert(f),f.cleanRange(),s}oe.exports=function(l,i){var d=T(l,i);if(d[0].t.empty)return d;for(var u=l._fullLayout,s=x.getFromId(l,i["h"===i.orientation?"xaxis":"yaxis"]),c=1/0,h=-1/0,p=0,v=0,g=0;g<d.length;g++){var f=d[g],w=f.pts.map(b.extractVal),y=f.bandwidth=o(i,f,w),M=f.span=a(i,f,s,y);if(f.min===f.max&&0===y)M=f.span=[f.min,f.max],f.density=[{v:1,t:M[0]}],f.bandwidth=y,p=Math.max(p,1);else{var A=M[1]-M[0],k=Math.ceil(A/(y/3)),C=A/k;if(!isFinite(C)||!isFinite(k))return m.error("Something went wrong with computing the violin span"),d[0].t.empty=!0,d;var P=b.makeKDE(f,i,w);f.density=new Array(k);for(var D=0,F=M[0];F<M[1]+C/2;D++,F+=C){var R=P(F);f.density[D]={v:R,t:F},p=Math.max(p,R)}}v=Math.max(v,w.length),c=Math.min(c,M[0]),h=Math.max(h,M[1])}var L=x.findExtremes(s,[c,h],{padded:!0});if(i._extremes[s._id]=L,i.width)d[0].t.maxKDE=p;else{var I=u._violinScaleGroupStats,B=i.scalegroup,V=I[B];V?(V.maxKDE=Math.max(V.maxKDE,p),V.maxCount=Math.max(V.maxCount,v)):I[B]={maxKDE:p,maxCount:v}}return d[0].t.labels.kde=m._(l,"kde:"),d}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/axes":554,"../box/calc":674,"./helpers":1091}],1089:[function(_,oe,ae){"use strict";var m=_("../box/cross_trace_calc").setPositionOffset,x=["v","h"];oe.exports=function(T,b){for(var e=T.calcdata,o=b.xaxis,a=b.yaxis,l=0;l<x.length;l++){for(var i=x[l],d="h"===i?a:o,u=[],s=0;s<e.length;s++){var c=e[s],p=c[0].trace;!0!==p.visible||"violin"!==p.type||c[0].t.empty||p.orientation!==i||p.xaxis!==o._id||p.yaxis!==a._id||u.push(s)}m("violin",T,u,d)}}},{"../box/cross_trace_calc":675}],1090:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../components/color"),T=_("../box/defaults"),b=_("./attributes");oe.exports=function(e,o,a,l){function i(A,k){return m.coerce(e,o,b,A,k)}function d(A,k){return m.coerce2(e,o,b,A,k)}if(T.handleSampleDefaults(e,o,i,l),!1!==o.visible){i("bandwidth"),i("side"),i("width")||(i("scalegroup",o.name),i("scalemode"));var u,s=i("span");Array.isArray(s)&&(u="manual"),i("spanmode",u);var c=i("line.color",(e.marker||{}).color||a),h=i("line.width"),p=i("fillcolor",x.addOpacity(o.line.color,.5));T.handlePointsDefaults(e,o,i,{prefix:""});var v=d("box.width"),g=d("box.fillcolor",p),f=d("box.line.color",c),w=d("box.line.width",h);i("box.visible",Boolean(v||g||f||w))||(o.box={visible:!1});var y=d("meanline.color",c),M=d("meanline.width",h);i("meanline.visible",Boolean(y||M))||(o.meanline={visible:!1})}}},{"../../components/color":366,"../../lib":503,"../box/defaults":676,"./attributes":1087}],1091:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=function(T){return 1/Math.sqrt(2*Math.PI)*Math.exp(-.5*T*T)};ae.makeKDE=function(T,b,e){var o=e.length,a=x,l=T.bandwidth,i=1/(o*l);return function(d){for(var u=0,s=0;s<o;s++)u+=a((d-e[s])/l);return i*u}},ae.getPositionOnKdePath=function(T,b,e){var o,a;"h"===b.orientation?(o="y",a="x"):(o="x",a="y");var l=m.findPointOnPath(T.path,e,a,{pathLength:T.pathLength}),i=T.posCenterPx,d=l[o];return[d,"both"===b.side?2*i-d:i]},ae.getKdeValue=function(T,b,e){var o=T.pts.map(ae.extractVal);return ae.makeKDE(T,b,o)(e)/T.posDensityScale},ae.extractVal=function(T){return T.v}},{"../../lib":503}],1092:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../../plots/cartesian/axes"),T=_("../box/hover"),b=_("./helpers");oe.exports=function(e,o,a,l,i){i||(i={});var d,u,s=i.hoverLayer,c=e.cd,h=c[0].trace,p=h.hoveron,v=-1!==p.indexOf("violins"),g=-1!==p.indexOf("kde"),f=[];if(v||g){var w=T.hoverOnBoxes(e,o,a,l);if(g&&w.length>0){var y,M,A,k,C,P=e.xa,D=e.ya;"h"===h.orientation?(C=o,y="y",A=D,M="x",k=P):(C=a,y="x",A=P,M="y",k=D);var F=c[e.index];if(C>=F.span[0]&&C<=F.span[1]){var R=m.extendFlat({},e),L=k.c2p(C,!0),I=b.getKdeValue(F,h,C),B=b.getPositionOnKdePath(F,h,L),V=A._offset,Z=A._length;R[y+"0"]=B[0],R[y+"1"]=B[1],R[M+"0"]=R[M+"1"]=L,R[M+"Label"]=M+": "+x.hoverLabelText(k,C,h[M+"hoverformat"])+", "+c[0].t.labels.kde+" "+I.toFixed(3),R.spikeDistance=w[0].spikeDistance;var Y=y+"Spike";R[Y]=w[0][Y],w[0].spikeDistance=void 0,w[0][Y]=void 0,R.hovertemplate=!1,f.push(R),(u={stroke:e.color})[y+"1"]=m.constrain(V+B[0],V,V+Z),u[y+"2"]=m.constrain(V+B[1],V,V+Z),u[M+"1"]=u[M+"2"]=k._offset+L}}v&&(f=f.concat(w))}-1!==p.indexOf("points")&&(d=T.hoverOnPoints(e,o,a));var ee=s.selectAll(".violinline-"+h.uid).data(u?[0]:[]);return ee.enter().append("line").classed("violinline-"+h.uid,!0).attr("stroke-width",1.5),ee.exit().remove(),ee.attr(u),"closest"===l?d?[d]:f:(d&&f.push(d),f)}},{"../../lib":503,"../../plots/cartesian/axes":554,"../box/hover":678,"./helpers":1091}],1093:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults"),crossTraceDefaults:_("../box/defaults").crossTraceDefaults,supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc"),crossTraceCalc:_("./cross_trace_calc"),plot:_("./plot"),style:_("./style"),styleOnSelect:_("../scatter/style").styleOnSelect,hoverPoints:_("./hover"),selectPoints:_("../box/select"),moduleType:"trace",name:"violin",basePlotModule:_("../../plots/cartesian"),categories:["cartesian","svg","symbols","oriented","box-violin","showLegend","violinLayout","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../box/defaults":676,"../box/select":683,"../scatter/style":950,"./attributes":1087,"./calc":1088,"./cross_trace_calc":1089,"./defaults":1090,"./hover":1092,"./layout_attributes":1094,"./layout_defaults":1095,"./plot":1096,"./style":1097}],1094:[function(_,oe,ae){"use strict";var m=_("../box/layout_attributes"),x=_("../../lib").extendFlat;oe.exports={violinmode:x({},m.boxmode,{}),violingap:x({},m.boxgap,{}),violingroupgap:x({},m.boxgroupgap,{})}},{"../../lib":503,"../box/layout_attributes":680}],1095:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./layout_attributes"),T=_("../box/layout_defaults");oe.exports=function(b,e,o){T._supply(b,e,o,function(a,l){return m.coerce(b,e,x,a,l)},"violin")}},{"../../lib":503,"../box/layout_defaults":681,"./layout_attributes":1094}],1096:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing"),b=_("../box/plot"),e=_("../scatter/line_points"),o=_("./helpers");oe.exports=function(a,l,i,d){var u=a._fullLayout,s=l.xaxis,c=l.yaxis;function h(p){var v=e(p,{xaxis:s,yaxis:c,connectGaps:!0,baseTolerance:.75,shape:"spline",simplify:!0,linearized:!0});return T.smoothopen(v[0],1)}x.makeTraceGroups(d,i,"trace violins").each(function(p){var v=m.select(this),g=p[0],f=g.t,w=g.trace;if(!0!==w.visible||f.empty)v.remove();else{var y=f.bPos,M=f.bdPos,A=l[f.valLetter+"axis"],k=l[f.posLetter+"axis"],C="both"===w.side,P=C||"positive"===w.side,D=C||"negative"===w.side,F=v.selectAll("path.violin").data(x.identity);F.enter().append("path").style("vector-effect","non-scaling-stroke").attr("class","violin"),F.exit().remove(),F.each(function(ee){var J,$,Q,se,j,G,W,ie,q=m.select(this),te=ee.density,ne=te.length,le=k.c2l(ee.pos+y,!0),ue=k.l2p(le);if(w.width)J=f.maxKDE/M;else{var de=u._violinScaleGroupStats[w.scalegroup];J="count"===w.scalemode?de.maxKDE/M*(de.maxCount/ee.pts.length):de.maxKDE/M}if(P){for(W=new Array(ne),j=0;j<ne;j++)(ie=W[j]={})[f.posLetter]=le+te[j].v/J,ie[f.valLetter]=A.c2l(te[j].t,!0);$=h(W)}if(D){for(W=new Array(ne),G=0,j=ne-1;G<ne;G++,j--)(ie=W[G]={})[f.posLetter]=le-te[j].v/J,ie[f.valLetter]=A.c2l(te[j].t,!0);Q=h(W)}if(C)se=$+"L"+Q.substr(1)+"Z";else{var he=[ue,A.c2p(te[0].t)],be=[ue,A.c2p(te[ne-1].t)];"h"===w.orientation&&(he.reverse(),be.reverse()),se=P?"M"+he+"L"+$.substr(1)+"L"+be:"M"+be+"L"+Q.substr(1)+"L"+he}q.attr("d",se),ee.posCenterPx=ue,ee.posDensityScale=J*M,ee.path=q.node(),ee.pathLength=ee.path.getTotalLength()/(C?2:1)});var R,L,I,B=w.box,V=B.width,Z=(B.line||{}).width;C?(R=M*V,L=0):P?(R=[0,M*V/2],L=Z*{x:1,y:-1}[f.posLetter]):(R=[M*V/2,0],L=Z*{x:-1,y:1}[f.posLetter]),b.plotBoxAndWhiskers(v,{pos:k,val:A},w,{bPos:y,bdPos:R,bPosPxOffset:L}),b.plotBoxMean(v,{pos:k,val:A},w,{bPos:y,bdPos:R,bPosPxOffset:L}),!w.box.visible&&w.meanline.visible&&(I=x.identity);var Y=v.selectAll("path.meanline").data(I||[]);Y.enter().append("path").attr("class","meanline").style("fill","none").style("vector-effect","non-scaling-stroke"),Y.exit().remove(),Y.each(function(ee){var J=A.c2p(ee.mean,!0),$=o.getPositionOnKdePath(ee,w,J);m.select(this).attr("d","h"===w.orientation?"M"+J+","+$[0]+"V"+$[1]:"M"+$[0]+","+J+"H"+$[1])}),b.plotPoints(v,{x:s,y:c},w,f)}})}},{"../../components/drawing":388,"../../lib":503,"../box/plot":682,"../scatter/line_points":940,"./helpers":1091,"@plotly/d3":58}],1097:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../components/color"),T=_("../scatter/style").stylePoints;oe.exports=function(b){var e=m.select(b).selectAll("g.trace.violins");e.style("opacity",function(o){return o[0].trace.opacity}),e.each(function(o){var a=o[0].trace,l=m.select(this),i=a.box||{},d=i.line||{},u=a.meanline||{},s=u.width;l.selectAll("path.violin").style("stroke-width",a.line.width+"px").call(x.stroke,a.line.color).call(x.fill,a.fillcolor),l.selectAll("path.box").style("stroke-width",d.width+"px").call(x.stroke,d.color).call(x.fill,i.fillcolor);var c={"stroke-width":s+"px","stroke-dasharray":2*s+"px,"+s+"px"};l.selectAll("path.mean").style(c).call(x.stroke,u.color),l.selectAll("path.meanline").style(c).call(x.stroke,u.color),T(l,a,b)})}},{"../../components/color":366,"../scatter/style":950,"@plotly/d3":58}],1098:[function(_,oe,ae){"use strict";var m=_("../../components/colorscale/attributes"),x=_("../isosurface/attributes"),T=_("../surface/attributes"),b=_("../../plots/attributes"),e=_("../../lib/extend").extendFlat,o=_("../../plot_api/edit_types").overrideAll,a=oe.exports=o(e({x:x.x,y:x.y,z:x.z,value:x.value,isomin:x.isomin,isomax:x.isomax,surface:x.surface,spaceframe:{show:{valType:"boolean",dflt:!1},fill:{valType:"number",min:0,max:1,dflt:1}},slices:x.slices,caps:x.caps,text:x.text,hovertext:x.hovertext,xhoverformat:x.xhoverformat,yhoverformat:x.yhoverformat,zhoverformat:x.zhoverformat,valuehoverformat:x.valuehoverformat,hovertemplate:x.hovertemplate},m("",{colorAttr:"`value`",showScaleDflt:!0,editTypeOverride:"calc"}),{colorbar:x.colorbar,opacity:x.opacity,opacityscale:T.opacityscale,lightposition:x.lightposition,lighting:x.lighting,flatshading:x.flatshading,contour:x.contour,hoverinfo:e({},b.hoverinfo),showlegend:e({},b.showlegend,{dflt:!1})}),"calc","nested");a.x.editType=a.y.editType=a.z.editType=a.value.editType="calc+clearAxisTypes",a.transforms=void 0},{"../../components/colorscale/attributes":373,"../../lib/extend":493,"../../plot_api/edit_types":536,"../../plots/attributes":550,"../isosurface/attributes":862,"../surface/attributes":1057}],1099:[function(_,oe,ae){"use strict";var m=_("../../../stackgl_modules").gl_mesh3d,x=_("../../lib/gl_format_color").parseColorScale,T=_("../../lib/str2rgbarray"),b=_("../../components/colorscale").extractOpts,e=_("../../plots/gl3d/zip3"),o=_("../isosurface/convert").findNearestOnAxis,a=_("../isosurface/convert").generateIsoMeshes;function l(d,u,s){this.scene=d,this.uid=s,this.mesh=u,this.name="",this.data=null,this.showContour=!1}var i=l.prototype;i.handlePick=function(d){if(d.object===this.mesh){var u=d.data.index,c=this.data._meshY[u],h=this.data._meshZ[u],p=this.data._Ys.length,v=this.data._Zs.length,g=o(this.data._meshX[u],this.data._Xs).id,f=o(c,this.data._Ys).id,w=o(h,this.data._Zs).id,y=d.index=w+v*f+v*p*g;d.traceCoordinate=[this.data._meshX[y],this.data._meshY[y],this.data._meshZ[y],this.data._value[y]];var M=this.data.hovertext||this.data.text;return Array.isArray(M)&&void 0!==M[y]?d.textLabel=M[y]:M&&(d.textLabel=M),!0}},i.update=function(d){var u=this.scene,s=u.fullSceneLayout;function c(v,g,f,w){return g.map(function(y){return v.d2l(y,0,w)*f})}this.data=a(d);var h={positions:e(c(s.xaxis,d._meshX,u.dataScale[0],d.xcalendar),c(s.yaxis,d._meshY,u.dataScale[1],d.ycalendar),c(s.zaxis,d._meshZ,u.dataScale[2],d.zcalendar)),cells:e(d._meshI,d._meshJ,d._meshK),lightPosition:[d.lightposition.x,d.lightposition.y,d.lightposition.z],ambient:d.lighting.ambient,diffuse:d.lighting.diffuse,specular:d.lighting.specular,roughness:d.lighting.roughness,fresnel:d.lighting.fresnel,vertexNormalsEpsilon:d.lighting.vertexnormalsepsilon,faceNormalsEpsilon:d.lighting.facenormalsepsilon,opacity:d.opacity,opacityscale:d.opacityscale,contourEnable:d.contour.show,contourColor:T(d.contour.color).slice(0,3),contourWidth:d.contour.width,useFacetNormals:d.flatshading},p=b(d);h.vertexIntensity=d._meshIntensity,h.vertexIntensityBounds=[p.min,p.max],h.colormap=x(d),this.mesh.update(h)},i.dispose=function(){this.scene.glplot.remove(this.mesh),this.mesh.dispose()},oe.exports=function(d,u){var c=m({gl:d.glplot.gl}),h=new l(d,c,u.uid);return c._trace=h,h.update(u),d.glplot.add(c),h}},{"../../../stackgl_modules":1120,"../../components/colorscale":378,"../../lib/gl_format_color":499,"../../lib/str2rgbarray":528,"../../plots/gl3d/zip3":609,"../isosurface/convert":864}],1100:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./attributes"),T=_("../isosurface/defaults").supplyIsoDefaults,b=_("../surface/defaults").opacityscaleDefaults;oe.exports=function(e,o,a,l){function i(d,u){return m.coerce(e,o,x,d,u)}T(e,o,a,l,i),b(e,o,l,i)}},{"../../lib":503,"../isosurface/defaults":865,"../surface/defaults":1060,"./attributes":1098}],1101:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),supplyDefaults:_("./defaults"),calc:_("../isosurface/calc"),colorbar:{min:"cmin",max:"cmax"},plot:_("./convert"),moduleType:"trace",name:"volume",basePlotModule:_("../../plots/gl3d"),categories:["gl3d","showLegend"],meta:{}}},{"../../plots/gl3d":598,"../isosurface/calc":863,"./attributes":1098,"./convert":1099,"./defaults":1100}],1102:[function(_,oe,ae){"use strict";var m=_("../bar/attributes"),x=_("../scatter/attributes").line,T=_("../../plots/attributes"),b=_("../../plots/cartesian/axis_format_attributes").axisHoverFormat,e=_("../../plots/template_attributes").hovertemplateAttrs,o=_("../../plots/template_attributes").texttemplateAttrs,a=_("./constants"),l=_("../../lib/extend").extendFlat,i=_("../../components/color");function d(u){return{marker:{color:l({},m.marker.color,{arrayOk:!1,editType:"style"}),line:{color:l({},m.marker.line.color,{arrayOk:!1,editType:"style"}),width:l({},m.marker.line.width,{arrayOk:!1,editType:"style"}),editType:"style"},editType:"style"},editType:"style"}}oe.exports={measure:{valType:"data_array",dflt:[],editType:"calc"},base:{valType:"number",dflt:null,arrayOk:!1,editType:"calc"},x:m.x,x0:m.x0,dx:m.dx,y:m.y,y0:m.y0,dy:m.dy,xperiod:m.xperiod,yperiod:m.yperiod,xperiod0:m.xperiod0,yperiod0:m.yperiod0,xperiodalignment:m.xperiodalignment,yperiodalignment:m.yperiodalignment,xhoverformat:b("x"),yhoverformat:b("y"),hovertext:m.hovertext,hovertemplate:e({},{keys:a.eventDataKeys}),hoverinfo:l({},T.hoverinfo,{flags:["name","x","y","text","initial","delta","final"]}),textinfo:{valType:"flaglist",flags:["label","text","initial","delta","final"],extras:["none"],editType:"plot",arrayOk:!1},texttemplate:o({editType:"plot"},{keys:a.eventDataKeys.concat(["label"])}),text:m.text,textposition:m.textposition,insidetextanchor:m.insidetextanchor,textangle:m.textangle,textfont:m.textfont,insidetextfont:m.insidetextfont,outsidetextfont:m.outsidetextfont,constraintext:m.constraintext,cliponaxis:m.cliponaxis,orientation:m.orientation,offset:m.offset,width:m.width,increasing:d(),decreasing:d(),totals:d(),connector:{line:{color:l({},x.color,{dflt:i.defaultLine}),width:l({},x.width,{editType:"plot"}),dash:x.dash,editType:"plot"},mode:{valType:"enumerated",values:["spanning","between"],dflt:"between",editType:"plot"},visible:{valType:"boolean",dflt:!0,editType:"plot"},editType:"plot"},offsetgroup:m.offsetgroup,alignmentgroup:m.alignmentgroup}},{"../../components/color":366,"../../lib/extend":493,"../../plots/attributes":550,"../../plots/cartesian/axis_format_attributes":557,"../../plots/template_attributes":633,"../bar/attributes":648,"../scatter/attributes":926,"./constants":1104}],1103:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/axes"),x=_("../../plots/cartesian/align_period"),T=_("../../lib").mergeArray,b=_("../scatter/calc_selection"),e=_("../../constants/numerical").BADNUM;function o(l){return"a"===l||"absolute"===l}function a(l){return"t"===l||"total"===l}oe.exports=function(l,i){var d,u,s,c,h,p,v=m.getFromId(l,i.xaxis||"x"),g=m.getFromId(l,i.yaxis||"y");"h"===i.orientation?(d=v.makeCalcdata(i,"x"),s=g.makeCalcdata(i,"y"),c=x(i,g,"y",s),h=!!i.yperiodalignment,p="y"):(d=g.makeCalcdata(i,"y"),s=v.makeCalcdata(i,"x"),c=x(i,v,"x",s),h=!!i.xperiodalignment,p="x"),u=c.vals;for(var f,w=Math.min(u.length,d.length),y=new Array(w),M=0,A=!1,k=0;k<w;k++){var C=d[k]||0,P=!1;(d[k]!==e||a(i.measure[k])||o(i.measure[k]))&&k+1<w&&(d[k+1]!==e||a(i.measure[k+1])||o(i.measure[k+1]))&&(P=!0);var D=y[k]={i:k,p:u[k],s:C,rawS:C,cNext:P};o(i.measure[k])?(M=D.s,D.isSum=!0,D.dir="totals",D.s=M):a(i.measure[k])?(D.isSum=!0,D.dir="totals",D.s=M):(D.isSum=!1,D.dir=D.rawS<0?"decreasing":"increasing",D.s=M+(f=D.s),M+=f),"totals"===D.dir&&(A=!0),h&&(y[k].orig_p=s[k],y[k][p+"End"]=c.ends[k],y[k][p+"Start"]=c.starts[k]),i.ids&&(D.id=String(i.ids[k])),D.v=(i.base||0)+M}return y.length&&(y[0].hasTotals=A),T(i.text,y,"tx"),T(i.hovertext,y,"htx"),b(y,i),y}},{"../../constants/numerical":479,"../../lib":503,"../../plots/cartesian/align_period":551,"../../plots/cartesian/axes":554,"../scatter/calc_selection":928}],1104:[function(_,oe,ae){"use strict";oe.exports={eventDataKeys:["initial","delta","final"]}},{}],1105:[function(_,oe,ae){"use strict";var m=_("../bar/cross_trace_calc").setGroupPositions;oe.exports=function(x,T){var b,e,o=x._fullLayout,a=x._fullData,l=x.calcdata,i=T.xaxis,d=T.yaxis,u=[],s=[],c=[];for(e=0;e<a.length;e++){var h=a[e];!0===h.visible&&h.xaxis===i._id&&h.yaxis===d._id&&"waterfall"===h.type&&(b=l[e],"h"===h.orientation?c.push(b):s.push(b),u.push(b))}var p={mode:o.waterfallmode,norm:o.waterfallnorm,gap:o.waterfallgap,groupgap:o.waterfallgroupgap};for(m(x,i,d,s,p),m(x,d,i,c,p),e=0;e<u.length;e++){b=u[e];for(var v=0;v<b.length;v++){var g=b[v];!1===g.isSum&&(g.s0+=0===v?0:b[v-1].s),v+1<b.length&&(b[v].nextP0=b[v+1].p0,b[v].nextS0=b[v+1].s0)}}}},{"../bar/cross_trace_calc":651}],1106:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("../bar/defaults").handleGroupingDefaults,T=_("../bar/defaults").handleText,b=_("../scatter/xy_defaults"),e=_("../scatter/period_defaults"),o=_("./attributes"),a=_("../../components/color"),l=_("../../constants/delta.js"),i=l.INCREASING.COLOR,d=l.DECREASING.COLOR;function u(s,c,h){s(c+".marker.color",h),s(c+".marker.line.color",a.defaultLine),s(c+".marker.line.width")}oe.exports={supplyDefaults:function(s,c,h,p){function v(f,w){return m.coerce(s,c,o,f,w)}if(b(s,c,p,v)){e(s,c,p,v),v("xhoverformat"),v("yhoverformat"),v("measure"),v("orientation",c.x&&!c.y?"h":"v"),v("base"),v("offset"),v("width"),v("text"),v("hovertext"),v("hovertemplate");var g=v("textposition");T(s,c,p,v,g,{moduleHasSelected:!1,moduleHasUnselected:!1,moduleHasConstrain:!0,moduleHasCliponaxis:!0,moduleHasTextangle:!0,moduleHasInsideanchor:!0}),"none"!==c.textposition&&(v("texttemplate"),c.texttemplate||v("textinfo")),u(v,"increasing",i),u(v,"decreasing",d),u(v,"totals","#4499FF"),v("connector.visible")&&(v("connector.mode"),v("connector.line.width")&&(v("connector.line.color"),v("connector.line.dash")))}else c.visible=!1},crossTraceDefaults:function(s,c){var h,p;function v(f){return m.coerce(p._input,p,o,f)}if("group"===c.waterfallmode)for(var g=0;g<s.length;g++)h=(p=s[g])._input,x(h,p,c,v)}}},{"../../components/color":366,"../../constants/delta.js":473,"../../lib":503,"../bar/defaults":652,"../scatter/period_defaults":946,"../scatter/xy_defaults":953,"./attributes":1102}],1107:[function(_,oe,ae){"use strict";oe.exports=function(m,x){return m.x="xVal"in x?x.xVal:x.x,m.y="yVal"in x?x.yVal:x.y,"initial"in x&&(m.initial=x.initial),"delta"in x&&(m.delta=x.delta),"final"in x&&(m.final=x.final),x.xa&&(m.xaxis=x.xa),x.ya&&(m.yaxis=x.ya),m}},{}],1108:[function(_,oe,ae){"use strict";var m=_("../../plots/cartesian/axes").hoverLabelText,x=_("../../components/color").opacity,T=_("../bar/hover").hoverOnBars,b=_("../../constants/delta.js"),e=b.INCREASING.SYMBOL,o=b.DECREASING.SYMBOL;oe.exports=function(a,l,i,d,u){var L,I,B,V,s=T(a,l,i,d,u);if(s){var c=s.cd,h=c[0].trace,p="h"===h.orientation,v=p?"x":"y",g=p?a.xa:a.ya,f=c[s.index],w=f.isSum?f.b+f.s:f.rawS;if(!f.isSum){s.initial=f.b+f.s-w,s.delta=w,s.final=s.initial+s.delta;var y=D(Math.abs(s.delta));s.deltaLabel=w<0?"("+y+")":y,s.finalLabel=D(s.final),s.initialLabel=D(s.initial)}var M=f.hi||h.hoverinfo,A=[];if(M&&"none"!==M&&"skip"!==M){var k="all"===M,C=M.split("+"),P=function(F){return k||-1!==C.indexOf(F)};f.isSum||(!P("final")||P(p?"x":"y")||A.push(s.finalLabel),P("delta")&&A.push(w<0?s.deltaLabel+" "+o:s.deltaLabel+" "+e),P("initial")&&A.push("Initial: "+s.initialLabel))}return A.length&&(s.extraText=A.join("<br>")),s.color=(B=(L=h[f.dir].marker).line.color,V=L.line.width,x(I=L.color)?I:x(B)&&V?B:void 0),[s]}function D(F){return m(g,F,h[v+"hoverformat"])}}},{"../../components/color":366,"../../constants/delta.js":473,"../../plots/cartesian/axes":554,"../bar/hover":655}],1109:[function(_,oe,ae){"use strict";oe.exports={attributes:_("./attributes"),layoutAttributes:_("./layout_attributes"),supplyDefaults:_("./defaults").supplyDefaults,crossTraceDefaults:_("./defaults").crossTraceDefaults,supplyLayoutDefaults:_("./layout_defaults"),calc:_("./calc"),crossTraceCalc:_("./cross_trace_calc"),plot:_("./plot"),style:_("./style").style,hoverPoints:_("./hover"),eventData:_("./event_data"),selectPoints:_("../bar/select"),moduleType:"trace",name:"waterfall",basePlotModule:_("../../plots/cartesian"),categories:["bar-like","cartesian","svg","oriented","showLegend","zoomScale"],meta:{}}},{"../../plots/cartesian":568,"../bar/select":660,"./attributes":1102,"./calc":1103,"./cross_trace_calc":1105,"./defaults":1106,"./event_data":1107,"./hover":1108,"./layout_attributes":1110,"./layout_defaults":1111,"./plot":1112,"./style":1113}],1110:[function(_,oe,ae){"use strict";oe.exports={waterfallmode:{valType:"enumerated",values:["group","overlay"],dflt:"group",editType:"calc"},waterfallgap:{valType:"number",min:0,max:1,editType:"calc"},waterfallgroupgap:{valType:"number",min:0,max:1,dflt:0,editType:"calc"}}},{}],1111:[function(_,oe,ae){"use strict";var m=_("../../lib"),x=_("./layout_attributes");oe.exports=function(T,b,e){var o=!1;function a(d,u){return m.coerce(T,b,x,d,u)}for(var l=0;l<e.length;l++){var i=e[l];if(i.visible&&"waterfall"===i.type){o=!0;break}}o&&(a("waterfallmode"),a("waterfallgap",.2),a("waterfallgroupgap"))}},{"../../lib":503,"./layout_attributes":1110}],1112:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../lib"),T=_("../../components/drawing"),b=_("../../constants/numerical").BADNUM,e=_("../bar/plot"),o=_("../bar/uniform_text").clearMinTextSize;oe.exports=function(a,l,i,d){var s,c,v,g,u=a._fullLayout;o("waterfall",u),e.plot(a,l,i,d,{mode:u.waterfallmode,norm:u.waterfallmode,gap:u.waterfallgap,groupgap:u.waterfallgroupgap}),s=a,v=(c=l).xaxis,g=c.yaxis,x.makeTraceGroups(d,i,"trace bars").each(function(f){var w=m.select(this),y=f[0].trace,M=x.ensureSingle(w,"g","lines");if(y.connector&&y.connector.visible){var A="h"===y.orientation,k=y.connector.mode,C=M.selectAll("g.line").data(x.identity);C.enter().append("g").classed("line",!0),C.exit().remove();var P=C.size();C.each(function(D,F){if(F===P-1||D.cNext){var R=(Z=v,Y=g,$=[],se=(ee=A)?Y:Z,(J=[])[0]=(Q=ee?Z:Y).c2p((V=D).s0,!0),$[0]=se.c2p(V.p0,!0),J[1]=Q.c2p(V.s1,!0),$[1]=se.c2p(V.p1,!0),J[2]=Q.c2p(V.nextS0,!0),$[2]=se.c2p(V.nextP0,!0),ee?[J,$]:[$,J]),L=R[0],I=R[1],B="";L[0]!==b&&I[0]!==b&&L[1]!==b&&I[1]!==b&&("spanning"===k&&!D.isSum&&F>0&&(B+=A?"M"+L[0]+","+I[1]+"V"+I[0]:"M"+L[1]+","+I[0]+"H"+L[0]),"between"!==k&&(D.isSum||F<P-1)&&(B+=A?"M"+L[1]+","+I[0]+"V"+I[1]:"M"+L[0]+","+I[1]+"H"+L[1]),L[2]!==b&&I[2]!==b&&(B+=A?"M"+L[1]+","+I[1]+"V"+I[2]:"M"+L[1]+","+I[1]+"H"+L[2])),""===B&&(B="M0,0Z"),x.ensureSingle(m.select(this),"path").attr("d",B).call(T.setClipUrl,c.layerClipId,s)}var V,Z,Y,ee,J,$,Q,se})}else M.remove()})}},{"../../components/drawing":388,"../../constants/numerical":479,"../../lib":503,"../bar/plot":659,"../bar/uniform_text":664,"@plotly/d3":58}],1113:[function(_,oe,ae){"use strict";var m=_("@plotly/d3"),x=_("../../components/drawing"),T=_("../../components/color"),b=_("../../constants/interactions").DESELECTDIM,e=_("../bar/style"),o=_("../bar/uniform_text").resizeText,a=e.styleTextPoints;oe.exports={style:function(l,i,d){var u=d||m.select(l).selectAll("g.waterfalllayer").selectAll("g.trace");o(l,u,"waterfall"),u.style("opacity",function(s){return s[0].trace.opacity}),u.each(function(s){var c=m.select(this),h=s[0].trace;c.selectAll(".point > path").each(function(p){if(!p.isBlank){var v=h[p.dir].marker;m.select(this).call(T.fill,v.color).call(T.stroke,v.line.color).call(x.dashLine,v.line.dash,v.line.width).style("opacity",h.selectedpoints&&!p.selected?b:1)}}),a(c,h,l),c.selectAll(".lines").each(function(){var p=h.connector.line;x.lineGroupStyle(m.select(this).selectAll("path"),p.width,p.color,p.dash)})})}}},{"../../components/color":366,"../../components/drawing":388,"../../constants/interactions":478,"../bar/style":662,"../bar/uniform_text":664,"@plotly/d3":58}],1114:[function(_,oe,ae){"use strict";var m=_("../plots/cartesian/axes"),x=_("../lib"),T=_("../plot_api/plot_schema"),b=_("./helpers").pointsAccessorFunction,e=_("../constants/numerical").BADNUM;ae.moduleType="transform",ae.name="aggregate";var o=ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},aggregations:{_isLinkedToArray:"aggregation",target:{valType:"string",editType:"calc"},func:{valType:"enumerated",values:["count","sum","avg","median","mode","rms","stddev","min","max","first","last","change","range"],dflt:"first",editType:"calc"},funcmode:{valType:"enumerated",values:["sample","population"],dflt:"sample",editType:"calc"},enabled:{valType:"boolean",dflt:!0,editType:"calc"},editType:"calc"},editType:"calc"},a=o.aggregations;function l(s,c,h,p){if(p.enabled){for(var v=p.target,g=x.nestedProperty(c,v),f=g.get(),w=function(A,k){var P=k.d2c,D=k.c2d;switch(A.func){case"count":return i;case"first":return d;case"last":return u;case"sum":return function(F,R){for(var L=0,I=0;I<R.length;I++){var B=P(F[R[I]]);B!==e&&(L+=B)}return D(L)};case"avg":return function(F,R){for(var L=0,I=0,B=0;B<R.length;B++){var V=P(F[R[B]]);V!==e&&(L+=V,I++)}return I?D(L/I):e};case"min":return function(F,R){for(var L=1/0,I=0;I<R.length;I++){var B=P(F[R[I]]);B!==e&&(L=Math.min(L,B))}return L===1/0?e:D(L)};case"max":return function(F,R){for(var L=-1/0,I=0;I<R.length;I++){var B=P(F[R[I]]);B!==e&&(L=Math.max(L,B))}return L===-1/0?e:D(L)};case"range":return function(F,R){for(var L=1/0,I=-1/0,B=0;B<R.length;B++){var V=P(F[R[B]]);V!==e&&(L=Math.min(L,V),I=Math.max(I,V))}return I===-1/0||L===1/0?e:D(I-L)};case"change":return function(F,R){var L=P(F[R[0]]),I=P(F[R[R.length-1]]);return L===e||I===e?e:D(I-L)};case"median":return function(F,R){for(var L=[],I=0;I<R.length;I++){var B=P(F[R[I]]);B!==e&&L.push(B)}if(!L.length)return e;L.sort(x.sorterAsc);var V=(L.length-1)/2;return D((L[Math.floor(V)]+L[Math.ceil(V)])/2)};case"mode":return function(F,R){for(var L={},I=0,B=e,V=0;V<R.length;V++){var Z=P(F[R[V]]);if(Z!==e){var Y=L[Z]=(L[Z]||0)+1;Y>I&&(I=Y,B=Z)}}return I?D(B):e};case"rms":return function(F,R){for(var L=0,I=0,B=0;B<R.length;B++){var V=P(F[R[B]]);V!==e&&(L+=V*V,I++)}return I?D(Math.sqrt(L/I)):e};case"stddev":return function(F,R){var L,I=0,B=0,V=1,Z=e;for(L=0;L<R.length&&Z===e;L++)Z=P(F[R[L]]);if(Z===e)return e;for(;L<R.length;L++){var Y=P(F[R[L]]);if(Y!==e){var ee=Y-Z;I+=ee,B+=ee*ee,V++}}var J="sample"===A.funcmode?V-1:V;return J?Math.sqrt((B-I*I/V)/J):0}}}(p,m.getDataConversions(s,c,v,f)),y=new Array(h.length),M=0;M<h.length;M++)y[M]=w(f,h[M]);g.set(y),"count"===p.func&&x.pushUnique(c._arrayAttrs,v)}}function i(s,c){return c.length}function d(s,c){return s[c[0]]}function u(s,c){return s[c[c.length-1]]}ae.supplyDefaults=function(s,c){var h,p={};function v(D,F){return x.coerce(s,p,o,D,F)}if(!v("enabled"))return p;var g=T.findArrayAttributes(c),f={};for(h=0;h<g.length;h++)f[g[h]]=1;var w=v("groups");if(!Array.isArray(w)){if(!f[w])return p.enabled=!1,p;f[w]=0}var y,M=s.aggregations||[],A=p.aggregations=new Array(M.length);function k(D,F){return x.coerce(M[h],y,a,D,F)}for(h=0;h<M.length;h++){y={_index:h};var C=k("target"),P=k("func");k("enabled")&&C&&(f[C]||"count"===P&&void 0===f[C])?("stddev"===P&&k("funcmode"),f[C]=0,A[h]=y):A[h]={enabled:!1,_index:h}}for(h=0;h<g.length;h++)f[g[h]]&&A.push({target:g[h],func:a.func.dflt,enabled:!0,_index:-1});return p},ae.calcTransform=function(s,c,h){if(h.enabled){var p=h.groups,v=x.getTargetArray(c,{target:p});if(v){var g,f,w,M={},A={},k=[],C=b(c.transforms,h),P=v.length;for(c._length&&(P=Math.min(P,c._length)),g=0;g<P;g++)void 0===(w=M[f=v[g]])?(M[f]=k.length,k.push([g]),A[M[f]]=C(g)):(k[w].push(g),A[M[f]]=(A[M[f]]||[]).concat(C(g)));h._indexToPoints=A;var D=h.aggregations;for(g=0;g<D.length;g++)l(s,c,k,D[g]);"string"==typeof p&&l(s,c,k,{target:p,func:"first",enabled:!0}),c._length=k.length}}}},{"../constants/numerical":479,"../lib":503,"../plot_api/plot_schema":542,"../plots/cartesian/axes":554,"./helpers":1117}],1115:[function(_,oe,ae){"use strict";var m=_("../lib"),x=_("../registry"),T=_("../plots/cartesian/axes"),b=_("./helpers").pointsAccessorFunction,e=_("../constants/filter_ops"),o=e.COMPARISON_OPS,a=e.INTERVAL_OPS,l=e.SET_OPS;ae.moduleType="transform",ae.name="filter",ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},operation:{valType:"enumerated",values:[].concat(o).concat(a).concat(l),dflt:"=",editType:"calc"},value:{valType:"any",dflt:0,editType:"calc"},preservegaps:{valType:"boolean",dflt:!1,editType:"calc"},editType:"calc"},ae.supplyDefaults=function(i){var d={};function u(h,p){return m.coerce(i,d,ae.attributes,h,p)}if(u("enabled")){var s=u("target");if(m.isArrayOrTypedArray(s)&&0===s.length)return d.enabled=!1,d;u("preservegaps"),u("operation"),u("value");var c=x.getComponentMethod("calendars","handleDefaults");c(i,d,"valuecalendar",null),c(i,d,"targetcalendar",null)}return d},ae.calcTransform=function(i,d,u){if(u.enabled){var s=m.getTargetArray(d,u);if(s){var c=u.target,h=s.length;d._length&&(h=Math.min(h,d._length));var p=u.targetcalendar,v=d._arrayAttrs,g=u.preservegaps;if("string"==typeof c){var f=m.nestedProperty(d,c+"calendar").get();f&&(p=f)}var w,y,M=function(R,L,I){var B=R.operation,V=R.value,Z=Array.isArray(V);function Y(Q){return-1!==Q.indexOf(B)}var ee,J=function(Q){return L(Q,0,R.valuecalendar)},$=function(Q){return L(Q,0,I)};switch(Y(o)?ee=J(Z?V[0]:V):Y(a)?ee=Z?[J(V[0]),J(V[1])]:[J(V),J(V)]:Y(l)&&(ee=Z?V.map(J):[J(V)]),B){case"=":return function(Q){return $(Q)===ee};case"!=":return function(Q){return $(Q)!==ee};case"<":return function(Q){return $(Q)<ee};case"<=":return function(Q){return $(Q)<=ee};case">":return function(Q){return $(Q)>ee};case">=":return function(Q){return $(Q)>=ee};case"[]":return function(Q){var se=$(Q);return se>=ee[0]&&se<=ee[1]};case"()":return function(Q){var se=$(Q);return se>ee[0]&&se<ee[1]};case"[)":return function(Q){var se=$(Q);return se>=ee[0]&&se<ee[1]};case"(]":return function(Q){var se=$(Q);return se>ee[0]&&se<=ee[1]};case"][":return function(Q){var se=$(Q);return se<=ee[0]||se>=ee[1]};case")(":return function(Q){var se=$(Q);return se<ee[0]||se>ee[1]};case"](":return function(Q){var se=$(Q);return se<=ee[0]||se>ee[1]};case")[":return function(Q){var se=$(Q);return se<ee[0]||se>=ee[1]};case"{}":return function(Q){return-1!==ee.indexOf($(Q))};case"}{":return function(Q){return-1===ee.indexOf($(Q))}}}(u,T.getDataToCoordFunc(i,d,c,s),p),A={},k={},C=0;g?(w=function(R){A[R.astr]=m.extendDeep([],R.get()),R.set(new Array(h))},y=function(R,L){var I=A[R.astr][L];R.get()[L]=I}):(w=function(R){A[R.astr]=m.extendDeep([],R.get()),R.set([])},y=function(R,L){var I=A[R.astr][L];R.get().push(I)}),F(w);for(var P=b(d.transforms,u),D=0;D<h;D++)M(s[D])?(F(y,D),k[C++]=P(D)):g&&C++;u._indexToPoints=k,d._length=C}}function F(R,L){for(var I=0;I<v.length;I++)R(m.nestedProperty(d,v[I]),L)}}},{"../constants/filter_ops":475,"../lib":503,"../plots/cartesian/axes":554,"../registry":638,"./helpers":1117}],1116:[function(_,oe,ae){"use strict";var m=_("../lib"),x=_("../plot_api/plot_schema"),T=_("../plots/plots"),b=_("./helpers").pointsAccessorFunction;function e(o,a){var l,i,d,u,s,c,h,p,v,g,f=a.transform,w=a.transformIndex,y=o.transforms[w].groups,M=b(o.transforms,f);if(!m.isArrayOrTypedArray(y)||0===y.length)return[o];var A=m.filterUnique(y),k=new Array(A.length),C=y.length,P=x.findArrayAttributes(o),D=f.styles||[],F={};for(l=0;l<D.length;l++)F[D[l].target]=D[l].value;f.styles&&(g=m.keyedContainer(f,"styles","target","value.name"));var R={},L={};for(l=0;l<A.length;l++){R[c=A[l]]=l,L[c]=0,(h=k[l]=m.extendDeepNoArrays({},o))._group=c,h.transforms[w]._indexToPoints={};var I=null;for(g&&(I=g.get(c)),h.name=I||""===I?I:m.templateString(f.nameformat,{trace:o.name,group:c}),p=h.transforms,h.transforms=[],i=0;i<p.length;i++)h.transforms[i]=m.extendDeepNoArrays({},p[i]);for(i=0;i<P.length;i++)m.nestedProperty(h,P[i]).set([])}for(d=0;d<P.length;d++){for(u=P[d],i=0,v=[];i<A.length;i++)v[i]=m.nestedProperty(k[i],u).get();for(s=m.nestedProperty(o,u).get(),i=0;i<C;i++)v[R[y[i]]].push(s[i])}for(i=0;i<C;i++)(h=k[R[y[i]]]).transforms[w]._indexToPoints[L[y[i]]]=M(i),L[y[i]]++;for(l=0;l<A.length;l++)c=A[l],T.clearExpandedTraceDefaultColors(h=k[l]),h=m.extendDeepNoArrays(h,F[c]||{});return k}ae.moduleType="transform",ae.name="groupby",ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},groups:{valType:"data_array",dflt:[],editType:"calc"},nameformat:{valType:"string",editType:"calc"},styles:{_isLinkedToArray:"style",target:{valType:"string",editType:"calc"},value:{valType:"any",dflt:{},editType:"calc",_compareAsJSON:!0},editType:"calc"},editType:"calc"},ae.supplyDefaults=function(o,a,l){var i,d={};function u(v,g){return m.coerce(o,d,ae.attributes,v,g)}if(!u("enabled"))return d;u("groups"),u("nameformat",l._dataLength>1?"%{group} (%{trace})":"%{group}");var s=o.styles,c=d.styles=[];if(s)for(i=0;i<s.length;i++){var h=c[i]={};m.coerce(s[i],c[i],ae.attributes.styles,"target");var p=m.coerce(s[i],c[i],ae.attributes.styles,"value");m.isPlainObject(p)?h.value=m.extendDeep({},p):p&&delete h.value}return d},ae.transform=function(o,a){var l,i,d,u=[];for(i=0;i<o.length;i++)for(l=e(o[i],a),d=0;d<l.length;d++)u.push(l[d]);return u}},{"../lib":503,"../plot_api/plot_schema":542,"../plots/plots":619,"./helpers":1117}],1117:[function(_,oe,ae){"use strict";ae.pointsAccessorFunction=function(m,x){for(var T,b,e=0;e<m.length&&(T=m[e])!==x;e++)T._indexToPoints&&!1!==T.enabled&&(b=T._indexToPoints);return b?function(o){return b[o]}:function(o){return[o]}}},{}],1118:[function(_,oe,ae){"use strict";var m=_("../lib"),x=_("../plots/cartesian/axes"),T=_("./helpers").pointsAccessorFunction,b=_("../constants/numerical").BADNUM;ae.moduleType="transform",ae.name="sort",ae.attributes={enabled:{valType:"boolean",dflt:!0,editType:"calc"},target:{valType:"string",strict:!0,noBlank:!0,arrayOk:!0,dflt:"x",editType:"calc"},order:{valType:"enumerated",values:["ascending","descending"],dflt:"ascending",editType:"calc"},editType:"calc"},ae.supplyDefaults=function(e){var o={};function a(l,i){return m.coerce(e,o,ae.attributes,l,i)}return a("enabled")&&(a("target"),a("order")),o},ae.calcTransform=function(e,o,a){if(a.enabled){var l=m.getTargetArray(o,a);if(l){var i=a.target,d=l.length;o._length&&(d=Math.min(d,o._length));var u,s,c=o._arrayAttrs,h=function(y,M,A,k){var C,P=new Array(k),D=new Array(k);for(C=0;C<k;C++)P[C]={v:M[C],i:C};for(P.sort(function(F,R){switch(F.order){case"ascending":return function(L,I){var B=R(L.v),V=R(I.v);return B===b?1:V===b?-1:B-V};case"descending":return function(L,I){var B=R(L.v),V=R(I.v);return B===b?1:V===b?-1:V-B}}}(y,A)),C=0;C<k;C++)D[C]=P[C].i;return D}(a,l,x.getDataToCoordFunc(e,o,i,l),d),p=T(o.transforms,a),v={};for(u=0;u<c.length;u++){var g=m.nestedProperty(o,c[u]),f=g.get(),w=new Array(d);for(s=0;s<d;s++)w[s]=f[h[s]];g.set(w)}for(s=0;s<d;s++)v[s]=p(h[s]);a._indexToPoints=v,o._length=d}}}},{"../constants/numerical":479,"../lib":503,"../plots/cartesian/axes":554,"./helpers":1117}],1119:[function(_,oe,ae){"use strict";ae.version="2.9.0"},{}],1120:[function(_,oe,ae){(function(m){(function(){!function(x){"object"==typeof ae&&void 0!==oe?oe.exports=x():("undefined"!=typeof window?window:void 0!==m?m:"undefined"!=typeof self?self:this).stackgl=x()}(function(){return function x(T,b,e){function o(i,d){if(!b[i]){if(!T[i]){var u="function"==typeof _&&_;if(!d&&u)return u(i,!0);if(a)return a(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var c=b[i]={exports:{}};T[i][0].call(c.exports,function(h){return o(T[i][1][h]||h)},c,c.exports,x,T,b,e)}return b[i].exports}for(var a="function"==typeof _&&_,l=0;l<e.length;l++)o(e[l]);return o}({1:[function(x,T,b){"use strict";b.byteLength=function(c){var h=u(c),v=h[1];return 3*(h[0]+v)/4-v},b.toByteArray=function(c){var h,p,C,v=u(c),g=v[0],f=v[1],w=new a(3*(g+(C=f))/4-C),y=0,M=f>0?g-4:g;for(p=0;p<M;p+=4)h=o[c.charCodeAt(p)]<<18|o[c.charCodeAt(p+1)]<<12|o[c.charCodeAt(p+2)]<<6|o[c.charCodeAt(p+3)],w[y++]=h>>16&255,w[y++]=h>>8&255,w[y++]=255&h;return 2===f&&(h=o[c.charCodeAt(p)]<<2|o[c.charCodeAt(p+1)]>>4,w[y++]=255&h),1===f&&(h=o[c.charCodeAt(p)]<<10|o[c.charCodeAt(p+1)]<<4|o[c.charCodeAt(p+2)]>>2,w[y++]=h>>8&255,w[y++]=255&h),w},b.fromByteArray=function(c){for(var h,p=c.length,v=p%3,g=[],f=0,w=p-v;f<w;f+=16383)g.push(s(c,f,f+16383>w?w:f+16383));return 1===v?g.push(e[(h=c[p-1])>>2]+e[h<<4&63]+"=="):2===v&&g.push(e[(h=(c[p-2]<<8)+c[p-1])>>10]+e[h>>4&63]+e[h<<2&63]+"="),g.join("")};for(var e=[],o=[],a="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",i=0,d=l.length;i<d;++i)e[i]=l[i],o[l.charCodeAt(i)]=i;function u(c){var h=c.length;if(h%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var p=c.indexOf("=");return-1===p&&(p=h),[p,p===h?0:4-p%4]}function s(c,h,p){for(var g,f=[],w=h;w<p;w+=3)f.push(e[(g=(c[w]<<16&16711680)+(c[w+1]<<8&65280)+(255&c[w+2]))>>18&63]+e[g>>12&63]+e[g>>6&63]+e[63&g]);return f.join("")}o["-".charCodeAt(0)]=62,o["_".charCodeAt(0)]=63},{}],2:[function(x,T,b){},{}],3:[function(x,T,b){(function(e){(function(){"use strict";var o=x("base64-js"),a=x("ieee754");function l(q){if(q>2147483647)throw new RangeError('The value "'+q+'" is invalid for option "size"');var te=new Uint8Array(q);return te.__proto__=i.prototype,te}function i(q,te,ne){if("number"==typeof q){if("string"==typeof te)throw new TypeError('The "string" argument must be of type string. Received type number');return s(q)}return d(q,te,ne)}function d(q,te,ne){if("string"==typeof q)return function(de,he){if("string"==typeof he&&""!==he||(he="utf8"),!i.isEncoding(he))throw new TypeError("Unknown encoding: "+he);var be=0|p(de,he),ge=l(be),we=ge.write(de,he);return we!==be&&(ge=ge.slice(0,we)),ge}(q,te);if(ArrayBuffer.isView(q))return c(q);if(null==q)throw TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q);if(W(q,ArrayBuffer)||q&&W(q.buffer,ArrayBuffer))return function(de,he,be){if(he<0||de.byteLength<he)throw new RangeError('"offset" is outside of buffer bounds');if(de.byteLength<he+(be||0))throw new RangeError('"length" is outside of buffer bounds');var ge;return(ge=void 0===he&&void 0===be?new Uint8Array(de):void 0===be?new Uint8Array(de,he):new Uint8Array(de,he,be)).__proto__=i.prototype,ge}(q,te,ne);if("number"==typeof q)throw new TypeError('The "value" argument must not be of type number. Received type number');var le=q.valueOf&&q.valueOf();if(null!=le&&le!==q)return i.from(le,te,ne);var ue=function(de){if(i.isBuffer(de)){var he=0|h(de.length),be=l(he);return 0===be.length||de.copy(be,0,0,he),be}return void 0!==de.length?"number"!=typeof de.length||ie(de.length)?l(0):c(de):"Buffer"===de.type&&Array.isArray(de.data)?c(de.data):void 0}(q);if(ue)return ue;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof q[Symbol.toPrimitive])return i.from(q[Symbol.toPrimitive]("string"),te,ne);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof q)}function u(q){if("number"!=typeof q)throw new TypeError('"size" argument must be of type number');if(q<0)throw new RangeError('The value "'+q+'" is invalid for option "size"')}function s(q){return u(q),l(q<0?0:0|h(q))}function c(q){for(var te=q.length<0?0:0|h(q.length),ne=l(te),le=0;le<te;le+=1)ne[le]=255&q[le];return ne}function h(q){if(q>=2147483647)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+2147483647..toString(16)+" bytes");return 0|q}function p(q,te){if(i.isBuffer(q))return q.length;if(ArrayBuffer.isView(q)||W(q,ArrayBuffer))return q.byteLength;if("string"!=typeof q)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof q);var ne=q.length,le=arguments.length>2&&!0===arguments[2];if(!le&&0===ne)return 0;for(var ue=!1;;)switch(te){case"ascii":case"latin1":case"binary":return ne;case"utf8":case"utf-8":return se(q).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*ne;case"hex":return ne>>>1;case"base64":return j(q).length;default:if(ue)return le?-1:se(q).length;te=(""+te).toLowerCase(),ue=!0}}function v(q,te,ne){var le=!1;if((void 0===te||te<0)&&(te=0),te>this.length||((void 0===ne||ne>this.length)&&(ne=this.length),ne<=0)||(ne>>>=0)<=(te>>>=0))return"";for(q||(q="utf8");;)switch(q){case"hex":return I(this,te,ne);case"utf8":case"utf-8":return F(this,te,ne);case"ascii":return R(this,te,ne);case"latin1":case"binary":return L(this,te,ne);case"base64":return D(this,te,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return B(this,te,ne);default:if(le)throw new TypeError("Unknown encoding: "+q);q=(q+"").toLowerCase(),le=!0}}function g(q,te,ne){var le=q[te];q[te]=q[ne],q[ne]=le}function f(q,te,ne,le,ue){if(0===q.length)return-1;if("string"==typeof ne?(le=ne,ne=0):ne>2147483647?ne=2147483647:ne<-2147483648&&(ne=-2147483648),ie(ne=+ne)&&(ne=ue?0:q.length-1),ne<0&&(ne=q.length+ne),ne>=q.length){if(ue)return-1;ne=q.length-1}else if(ne<0){if(!ue)return-1;ne=0}if("string"==typeof te&&(te=i.from(te,le)),i.isBuffer(te))return 0===te.length?-1:w(q,te,ne,le,ue);if("number"==typeof te)return te&=255,"function"==typeof Uint8Array.prototype.indexOf?ue?Uint8Array.prototype.indexOf.call(q,te,ne):Uint8Array.prototype.lastIndexOf.call(q,te,ne):w(q,[te],ne,le,ue);throw new TypeError("val must be string, number or Buffer")}function w(q,te,ne,le,ue){var de,he=1,be=q.length,ge=te.length;if(void 0!==le&&("ucs2"===(le=String(le).toLowerCase())||"ucs-2"===le||"utf16le"===le||"utf-16le"===le)){if(q.length<2||te.length<2)return-1;he=2,be/=2,ge/=2,ne/=2}function we(Fe,ve){return 1===he?Fe[ve]:Fe.readUInt16BE(ve*he)}if(ue){var Ce=-1;for(de=ne;de<be;de++)if(we(q,de)===we(te,-1===Ce?0:de-Ce)){if(-1===Ce&&(Ce=de),de-Ce+1===ge)return Ce*he}else-1!==Ce&&(de-=de-Ce),Ce=-1}else for(ne+ge>be&&(ne=be-ge),de=ne;de>=0;de--){for(var De=!0,Se=0;Se<ge;Se++)if(we(q,de+Se)!==we(te,Se)){De=!1;break}if(De)return de}return-1}function y(q,te,ne,le){ne=Number(ne)||0;var ue=q.length-ne;le?(le=Number(le))>ue&&(le=ue):le=ue;var de=te.length;le>de/2&&(le=de/2);for(var he=0;he<le;++he){var be=parseInt(te.substr(2*he,2),16);if(ie(be))return he;q[ne+he]=be}return he}function M(q,te,ne,le){return G(se(te,q.length-ne),q,ne,le)}function A(q,te,ne,le){return G(function(ue){for(var de=[],he=0;he<ue.length;++he)de.push(255&ue.charCodeAt(he));return de}(te),q,ne,le)}function k(q,te,ne,le){return A(q,te,ne,le)}function C(q,te,ne,le){return G(j(te),q,ne,le)}function P(q,te,ne,le){return G(function(ue,de){for(var he,be,we=[],Ce=0;Ce<ue.length&&!((de-=2)<0);++Ce)be=(he=ue.charCodeAt(Ce))>>8,we.push(he%256),we.push(be);return we}(te,q.length-ne),q,ne,le)}function D(q,te,ne){return o.fromByteArray(0===te&&ne===q.length?q:q.slice(te,ne))}function F(q,te,ne){ne=Math.min(q.length,ne);for(var le=[],ue=te;ue<ne;){var de,he,be,ge,we=q[ue],Ce=null,De=we>239?4:we>223?3:we>191?2:1;if(ue+De<=ne)switch(De){case 1:we<128&&(Ce=we);break;case 2:128==(192&(de=q[ue+1]))&&(ge=(31&we)<<6|63&de)>127&&(Ce=ge);break;case 3:he=q[ue+2],128==(192&(de=q[ue+1]))&&128==(192&he)&&(ge=(15&we)<<12|(63&de)<<6|63&he)>2047&&(ge<55296||ge>57343)&&(Ce=ge);break;case 4:he=q[ue+2],be=q[ue+3],128==(192&(de=q[ue+1]))&&128==(192&he)&&128==(192&be)&&(ge=(15&we)<<18|(63&de)<<12|(63&he)<<6|63&be)>65535&&ge<1114112&&(Ce=ge)}null===Ce?(Ce=65533,De=1):Ce>65535&&(le.push((Ce-=65536)>>>10&1023|55296),Ce=56320|1023&Ce),le.push(Ce),ue+=De}return function(Se){var Fe=Se.length;if(Fe<=4096)return String.fromCharCode.apply(String,Se);for(var ve="",Te=0;Te<Fe;)ve+=String.fromCharCode.apply(String,Se.slice(Te,Te+=4096));return ve}(le)}function R(q,te,ne){var le="";ne=Math.min(q.length,ne);for(var ue=te;ue<ne;++ue)le+=String.fromCharCode(127&q[ue]);return le}function L(q,te,ne){var le="";ne=Math.min(q.length,ne);for(var ue=te;ue<ne;++ue)le+=String.fromCharCode(q[ue]);return le}function I(q,te,ne){var le=q.length;(!te||te<0)&&(te=0),(!ne||ne<0||ne>le)&&(ne=le);for(var ue="",de=te;de<ne;++de)ue+=Q(q[de]);return ue}function B(q,te,ne){for(var le=q.slice(te,ne),ue="",de=0;de<le.length;de+=2)ue+=String.fromCharCode(le[de]+256*le[de+1]);return ue}function V(q,te,ne){if(q%1!=0||q<0)throw new RangeError("offset is not uint");if(q+te>ne)throw new RangeError("Trying to access beyond buffer length")}function Z(q,te,ne,le,ue,de){if(!i.isBuffer(q))throw new TypeError('"buffer" argument must be a Buffer instance');if(te>ue||te<de)throw new RangeError('"value" argument is out of bounds');if(ne+le>q.length)throw new RangeError("Index out of range")}function Y(q,te,ne,le,ue,de){if(ne+le>q.length)throw new RangeError("Index out of range");if(ne<0)throw new RangeError("Index out of range")}function ee(q,te,ne,le,ue){return te=+te,ne>>>=0,ue||Y(q,0,ne,4),a.write(q,te,ne,le,23,4),ne+4}function J(q,te,ne,le,ue){return te=+te,ne>>>=0,ue||Y(q,0,ne,8),a.write(q,te,ne,le,52,8),ne+8}b.Buffer=i,b.SlowBuffer=function(q){return+q!=q&&(q=0),i.alloc(+q)},b.INSPECT_MAX_BYTES=50,b.kMaxLength=2147483647,(i.TYPED_ARRAY_SUPPORT=function(){try{var q=new Uint8Array(1);return q.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===q.foo()}catch(te){return!1}}())||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(i.prototype,"parent",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.buffer}}),Object.defineProperty(i.prototype,"offset",{enumerable:!0,get:function(){if(i.isBuffer(this))return this.byteOffset}}),"undefined"!=typeof Symbol&&null!=Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(q,te,ne){return d(q,te,ne)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(q,te,ne){return ue=te,de=ne,u(le=q),le<=0?l(le):void 0!==ue?"string"==typeof de?l(le).fill(ue,de):l(le).fill(ue):l(le);var le,ue,de},i.allocUnsafe=function(q){return s(q)},i.allocUnsafeSlow=function(q){return s(q)},i.isBuffer=function(q){return null!=q&&!0===q._isBuffer&&q!==i.prototype},i.compare=function(q,te){if(W(q,Uint8Array)&&(q=i.from(q,q.offset,q.byteLength)),W(te,Uint8Array)&&(te=i.from(te,te.offset,te.byteLength)),!i.isBuffer(q)||!i.isBuffer(te))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(q===te)return 0;for(var ne=q.length,le=te.length,ue=0,de=Math.min(ne,le);ue<de;++ue)if(q[ue]!==te[ue]){ne=q[ue],le=te[ue];break}return ne<le?-1:le<ne?1:0},i.isEncoding=function(q){switch(String(q).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},i.concat=function(q,te){if(!Array.isArray(q))throw new TypeError('"list" argument must be an Array of Buffers');if(0===q.length)return i.alloc(0);var ne;if(void 0===te)for(te=0,ne=0;ne<q.length;++ne)te+=q[ne].length;var le=i.allocUnsafe(te),ue=0;for(ne=0;ne<q.length;++ne){var de=q[ne];if(W(de,Uint8Array)&&(de=i.from(de)),!i.isBuffer(de))throw new TypeError('"list" argument must be an Array of Buffers');de.copy(le,ue),ue+=de.length}return le},i.byteLength=p,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var q=this.length;if(q%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var te=0;te<q;te+=2)g(this,te,te+1);return this},i.prototype.swap32=function(){var q=this.length;if(q%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var te=0;te<q;te+=4)g(this,te,te+3),g(this,te+1,te+2);return this},i.prototype.swap64=function(){var q=this.length;if(q%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var te=0;te<q;te+=8)g(this,te,te+7),g(this,te+1,te+6),g(this,te+2,te+5),g(this,te+3,te+4);return this},i.prototype.toLocaleString=i.prototype.toString=function(){var q=this.length;return 0===q?"":0===arguments.length?F(this,0,q):v.apply(this,arguments)},i.prototype.equals=function(q){if(!i.isBuffer(q))throw new TypeError("Argument must be a Buffer");return this===q||0===i.compare(this,q)},i.prototype.inspect=function(){var q="",te=b.INSPECT_MAX_BYTES;return q=this.toString("hex",0,te).replace(/(.{2})/g,"$1 ").trim(),this.length>te&&(q+=" ... "),"<Buffer "+q+">"},i.prototype.compare=function(q,te,ne,le,ue){if(W(q,Uint8Array)&&(q=i.from(q,q.offset,q.byteLength)),!i.isBuffer(q))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof q);if(void 0===te&&(te=0),void 0===ne&&(ne=q?q.length:0),void 0===le&&(le=0),void 0===ue&&(ue=this.length),te<0||ne>q.length||le<0||ue>this.length)throw new RangeError("out of range index");if(le>=ue&&te>=ne)return 0;if(le>=ue)return-1;if(te>=ne)return 1;if(this===q)return 0;for(var de=(ue>>>=0)-(le>>>=0),he=(ne>>>=0)-(te>>>=0),be=Math.min(de,he),ge=this.slice(le,ue),we=q.slice(te,ne),Ce=0;Ce<be;++Ce)if(ge[Ce]!==we[Ce]){de=ge[Ce],he=we[Ce];break}return de<he?-1:he<de?1:0},i.prototype.includes=function(q,te,ne){return-1!==this.indexOf(q,te,ne)},i.prototype.indexOf=function(q,te,ne){return f(this,q,te,ne,!0)},i.prototype.lastIndexOf=function(q,te,ne){return f(this,q,te,ne,!1)},i.prototype.write=function(q,te,ne,le){if(void 0===te)le="utf8",ne=this.length,te=0;else if(void 0===ne&&"string"==typeof te)le=te,ne=this.length,te=0;else{if(!isFinite(te))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");te>>>=0,isFinite(ne)?(ne>>>=0,void 0===le&&(le="utf8")):(le=ne,ne=void 0)}var ue=this.length-te;if((void 0===ne||ne>ue)&&(ne=ue),q.length>0&&(ne<0||te<0)||te>this.length)throw new RangeError("Attempt to write outside buffer bounds");le||(le="utf8");for(var de=!1;;)switch(le){case"hex":return y(this,q,te,ne);case"utf8":case"utf-8":return M(this,q,te,ne);case"ascii":return A(this,q,te,ne);case"latin1":case"binary":return k(this,q,te,ne);case"base64":return C(this,q,te,ne);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,q,te,ne);default:if(de)throw new TypeError("Unknown encoding: "+le);le=(""+le).toLowerCase(),de=!0}},i.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},i.prototype.slice=function(q,te){var ne=this.length;(q=~~q)<0?(q+=ne)<0&&(q=0):q>ne&&(q=ne),(te=void 0===te?ne:~~te)<0?(te+=ne)<0&&(te=0):te>ne&&(te=ne),te<q&&(te=q);var le=this.subarray(q,te);return le.__proto__=i.prototype,le},i.prototype.readUIntLE=function(q,te,ne){q>>>=0,te>>>=0,ne||V(q,te,this.length);for(var le=this[q],ue=1,de=0;++de<te&&(ue*=256);)le+=this[q+de]*ue;return le},i.prototype.readUIntBE=function(q,te,ne){q>>>=0,te>>>=0,ne||V(q,te,this.length);for(var le=this[q+--te],ue=1;te>0&&(ue*=256);)le+=this[q+--te]*ue;return le},i.prototype.readUInt8=function(q,te){return q>>>=0,te||V(q,1,this.length),this[q]},i.prototype.readUInt16LE=function(q,te){return q>>>=0,te||V(q,2,this.length),this[q]|this[q+1]<<8},i.prototype.readUInt16BE=function(q,te){return q>>>=0,te||V(q,2,this.length),this[q]<<8|this[q+1]},i.prototype.readUInt32LE=function(q,te){return q>>>=0,te||V(q,4,this.length),(this[q]|this[q+1]<<8|this[q+2]<<16)+16777216*this[q+3]},i.prototype.readUInt32BE=function(q,te){return q>>>=0,te||V(q,4,this.length),16777216*this[q]+(this[q+1]<<16|this[q+2]<<8|this[q+3])},i.prototype.readIntLE=function(q,te,ne){q>>>=0,te>>>=0,ne||V(q,te,this.length);for(var le=this[q],ue=1,de=0;++de<te&&(ue*=256);)le+=this[q+de]*ue;return le>=(ue*=128)&&(le-=Math.pow(2,8*te)),le},i.prototype.readIntBE=function(q,te,ne){q>>>=0,te>>>=0,ne||V(q,te,this.length);for(var le=te,ue=1,de=this[q+--le];le>0&&(ue*=256);)de+=this[q+--le]*ue;return de>=(ue*=128)&&(de-=Math.pow(2,8*te)),de},i.prototype.readInt8=function(q,te){return q>>>=0,te||V(q,1,this.length),128&this[q]?-1*(255-this[q]+1):this[q]},i.prototype.readInt16LE=function(q,te){q>>>=0,te||V(q,2,this.length);var ne=this[q]|this[q+1]<<8;return 32768&ne?4294901760|ne:ne},i.prototype.readInt16BE=function(q,te){q>>>=0,te||V(q,2,this.length);var ne=this[q+1]|this[q]<<8;return 32768&ne?4294901760|ne:ne},i.prototype.readInt32LE=function(q,te){return q>>>=0,te||V(q,4,this.length),this[q]|this[q+1]<<8|this[q+2]<<16|this[q+3]<<24},i.prototype.readInt32BE=function(q,te){return q>>>=0,te||V(q,4,this.length),this[q]<<24|this[q+1]<<16|this[q+2]<<8|this[q+3]},i.prototype.readFloatLE=function(q,te){return q>>>=0,te||V(q,4,this.length),a.read(this,q,!0,23,4)},i.prototype.readFloatBE=function(q,te){return q>>>=0,te||V(q,4,this.length),a.read(this,q,!1,23,4)},i.prototype.readDoubleLE=function(q,te){return q>>>=0,te||V(q,8,this.length),a.read(this,q,!0,52,8)},i.prototype.readDoubleBE=function(q,te){return q>>>=0,te||V(q,8,this.length),a.read(this,q,!1,52,8)},i.prototype.writeUIntLE=function(q,te,ne,le){q=+q,te>>>=0,ne>>>=0,le||Z(this,q,te,ne,Math.pow(2,8*ne)-1,0);var ue=1,de=0;for(this[te]=255&q;++de<ne&&(ue*=256);)this[te+de]=q/ue&255;return te+ne},i.prototype.writeUIntBE=function(q,te,ne,le){q=+q,te>>>=0,ne>>>=0,le||Z(this,q,te,ne,Math.pow(2,8*ne)-1,0);var ue=ne-1,de=1;for(this[te+ue]=255&q;--ue>=0&&(de*=256);)this[te+ue]=q/de&255;return te+ne},i.prototype.writeUInt8=function(q,te,ne){return q=+q,te>>>=0,ne||Z(this,q,te,1,255,0),this[te]=255&q,te+1},i.prototype.writeUInt16LE=function(q,te,ne){return q=+q,te>>>=0,ne||Z(this,q,te,2,65535,0),this[te]=255&q,this[te+1]=q>>>8,te+2},i.prototype.writeUInt16BE=function(q,te,ne){return q=+q,te>>>=0,ne||Z(this,q,te,2,65535,0),this[te]=q>>>8,this[te+1]=255&q,te+2},i.prototype.writeUInt32LE=function(q,te,ne){return q=+q,te>>>=0,ne||Z(this,q,te,4,4294967295,0),this[te+3]=q>>>24,this[te+2]=q>>>16,this[te+1]=q>>>8,this[te]=255&q,te+4},i.prototype.writeUInt32BE=function(q,te,ne){return q=+q,te>>>=0,ne||Z(this,q,te,4,4294967295,0),this[te]=q>>>24,this[te+1]=q>>>16,this[te+2]=q>>>8,this[te+3]=255&q,te+4},i.prototype.writeIntLE=function(q,te,ne,le){if(q=+q,te>>>=0,!le){var ue=Math.pow(2,8*ne-1);Z(this,q,te,ne,ue-1,-ue)}var de=0,he=1,be=0;for(this[te]=255&q;++de<ne&&(he*=256);)q<0&&0===be&&0!==this[te+de-1]&&(be=1),this[te+de]=(q/he>>0)-be&255;return te+ne},i.prototype.writeIntBE=function(q,te,ne,le){if(q=+q,te>>>=0,!le){var ue=Math.pow(2,8*ne-1);Z(this,q,te,ne,ue-1,-ue)}var de=ne-1,he=1,be=0;for(this[te+de]=255&q;--de>=0&&(he*=256);)q<0&&0===be&&0!==this[te+de+1]&&(be=1),this[te+de]=(q/he>>0)-be&255;return te+ne},i.prototype.writeInt8=function(q,te,ne){return q=+q,te>>>=0,ne||Z(this,q,te,1,127,-128),q<0&&(q=255+q+1),this[te]=255&q,te+1},i.prototype.writeInt16LE=function(q,te,ne){return q=+q,te>>>=0,ne||Z(this,q,te,2,32767,-32768),this[te]=255&q,this[te+1]=q>>>8,te+2},i.prototype.writeInt16BE=function(q,te,ne){return q=+q,te>>>=0,ne||Z(this,q,te,2,32767,-32768),this[te]=q>>>8,this[te+1]=255&q,te+2},i.prototype.writeInt32LE=function(q,te,ne){return q=+q,te>>>=0,ne||Z(this,q,te,4,2147483647,-2147483648),this[te]=255&q,this[te+1]=q>>>8,this[te+2]=q>>>16,this[te+3]=q>>>24,te+4},i.prototype.writeInt32BE=function(q,te,ne){return q=+q,te>>>=0,ne||Z(this,q,te,4,2147483647,-2147483648),q<0&&(q=4294967295+q+1),this[te]=q>>>24,this[te+1]=q>>>16,this[te+2]=q>>>8,this[te+3]=255&q,te+4},i.prototype.writeFloatLE=function(q,te,ne){return ee(this,q,te,!0,ne)},i.prototype.writeFloatBE=function(q,te,ne){return ee(this,q,te,!1,ne)},i.prototype.writeDoubleLE=function(q,te,ne){return J(this,q,te,!0,ne)},i.prototype.writeDoubleBE=function(q,te,ne){return J(this,q,te,!1,ne)},i.prototype.copy=function(q,te,ne,le){if(!i.isBuffer(q))throw new TypeError("argument should be a Buffer");if(ne||(ne=0),le||0===le||(le=this.length),te>=q.length&&(te=q.length),te||(te=0),le>0&&le<ne&&(le=ne),le===ne||0===q.length||0===this.length)return 0;if(te<0)throw new RangeError("targetStart out of bounds");if(ne<0||ne>=this.length)throw new RangeError("Index out of range");if(le<0)throw new RangeError("sourceEnd out of bounds");le>this.length&&(le=this.length),q.length-te<le-ne&&(le=q.length-te+ne);var ue=le-ne;if(this===q&&"function"==typeof Uint8Array.prototype.copyWithin)this.copyWithin(te,ne,le);else if(this===q&&ne<te&&te<le)for(var de=ue-1;de>=0;--de)q[de+te]=this[de+ne];else Uint8Array.prototype.set.call(q,this.subarray(ne,le),te);return ue},i.prototype.fill=function(q,te,ne,le){if("string"==typeof q){if("string"==typeof te?(le=te,te=0,ne=this.length):"string"==typeof ne&&(le=ne,ne=this.length),void 0!==le&&"string"!=typeof le)throw new TypeError("encoding must be a string");if("string"==typeof le&&!i.isEncoding(le))throw new TypeError("Unknown encoding: "+le);if(1===q.length){var ue=q.charCodeAt(0);("utf8"===le&&ue<128||"latin1"===le)&&(q=ue)}}else"number"==typeof q&&(q&=255);if(te<0||this.length<te||this.length<ne)throw new RangeError("Out of range index");if(ne<=te)return this;var de;if(te>>>=0,ne=void 0===ne?this.length:ne>>>0,q||(q=0),"number"==typeof q)for(de=te;de<ne;++de)this[de]=q;else{var he=i.isBuffer(q)?q:i.from(q,le),be=he.length;if(0===be)throw new TypeError('The value "'+q+'" is invalid for argument "value"');for(de=0;de<ne-te;++de)this[de+te]=he[de%be]}return this};var $=/[^+/0-9A-Za-z-_]/g;function Q(q){return q<16?"0"+q.toString(16):q.toString(16)}function se(q,te){var ne;te=te||1/0;for(var le=q.length,ue=null,de=[],he=0;he<le;++he){if((ne=q.charCodeAt(he))>55295&&ne<57344){if(!ue){if(ne>56319){(te-=3)>-1&&de.push(239,191,189);continue}if(he+1===le){(te-=3)>-1&&de.push(239,191,189);continue}ue=ne;continue}if(ne<56320){(te-=3)>-1&&de.push(239,191,189),ue=ne;continue}ne=65536+(ue-55296<<10|ne-56320)}else ue&&(te-=3)>-1&&de.push(239,191,189);if(ue=null,ne<128){if((te-=1)<0)break;de.push(ne)}else if(ne<2048){if((te-=2)<0)break;de.push(ne>>6|192,63&ne|128)}else if(ne<65536){if((te-=3)<0)break;de.push(ne>>12|224,ne>>6&63|128,63&ne|128)}else{if(!(ne<1114112))throw new Error("Invalid code point");if((te-=4)<0)break;de.push(ne>>18|240,ne>>12&63|128,ne>>6&63|128,63&ne|128)}}return de}function j(q){return o.toByteArray(function(te){if((te=(te=te.split("=")[0]).trim().replace($,"")).length<2)return"";for(;te.length%4!=0;)te+="=";return te}(q))}function G(q,te,ne,le){for(var ue=0;ue<le&&!(ue+ne>=te.length||ue>=q.length);++ue)te[ue+ne]=q[ue];return ue}function W(q,te){return q instanceof te||null!=q&&null!=q.constructor&&null!=q.constructor.name&&q.constructor.name===te.name}function ie(q){return q!=q}}).call(this)}).call(this,x("buffer").Buffer)},{"base64-js":1,buffer:3,ieee754:4}],4:[function(x,T,b){b.read=function(e,o,a,l,i){var d,u,s=8*i-l-1,c=(1<<s)-1,h=c>>1,p=-7,v=a?i-1:0,g=a?-1:1,f=e[o+v];for(v+=g,d=f&(1<<-p)-1,f>>=-p,p+=s;p>0;d=256*d+e[o+v],v+=g,p-=8);for(u=d&(1<<-p)-1,d>>=-p,p+=l;p>0;u=256*u+e[o+v],v+=g,p-=8);if(0===d)d=1-h;else{if(d===c)return u?NaN:1/0*(f?-1:1);u+=Math.pow(2,l),d-=h}return(f?-1:1)*u*Math.pow(2,d-l)},b.write=function(e,o,a,l,i,d){var u,s,c,h=8*d-i-1,p=(1<<h)-1,v=p>>1,g=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,f=l?0:d-1,w=l?1:-1,y=o<0||0===o&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(s=isNaN(o)?1:0,u=p):(u=Math.floor(Math.log(o)/Math.LN2),o*(c=Math.pow(2,-u))<1&&(u--,c*=2),(o+=u+v>=1?g/c:g*Math.pow(2,1-v))*c>=2&&(u++,c/=2),u+v>=p?(s=0,u=p):u+v>=1?(s=(o*c-1)*Math.pow(2,i),u+=v):(s=o*Math.pow(2,v-1)*Math.pow(2,i),u=0));i>=8;e[a+f]=255&s,f+=w,s/=256,i-=8);for(u=u<<i|s,h+=i;h>0;e[a+f]=255&u,f+=w,u/=256,h-=8);e[a+f-w]|=128*y}},{}],5:[function(x,T,b){var e,o,a=T.exports={};function l(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function d(w){if(e===setTimeout)return setTimeout(w,0);if((e===l||!e)&&setTimeout)return e=setTimeout,setTimeout(w,0);try{return e(w,0)}catch(y){try{return e.call(null,w,0)}catch(M){return e.call(this,w,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:l}catch(w){e=l}try{o="function"==typeof clearTimeout?clearTimeout:i}catch(w){o=i}}();var u,s=[],c=!1,h=-1;function p(){c&&u&&(c=!1,u.length?s=u.concat(s):h=-1,s.length&&v())}function v(){if(!c){var w=d(p);c=!0;for(var y=s.length;y;){for(u=s,s=[];++h<y;)u&&u[h].run();h=-1,y=s.length}u=null,c=!1,function(M){if(o===clearTimeout)return clearTimeout(M);if((o===i||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(M);try{o(M)}catch(A){try{return o.call(null,M)}catch(k){return o.call(this,M)}}}(w)}}function g(w,y){this.fun=w,this.array=y}function f(){}a.nextTick=function(w){var y=new Array(arguments.length-1);if(arguments.length>1)for(var M=1;M<arguments.length;M++)y[M-1]=arguments[M];s.push(new g(w,y)),1!==s.length||c||d(v)},g.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=f,a.addListener=f,a.once=f,a.off=f,a.removeListener=f,a.removeAllListeners=f,a.emit=f,a.prependListener=f,a.prependOnceListener=f,a.listeners=function(w){return[]},a.binding=function(w){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(w){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}},{}],6:[function(x,T,b){T.exports={alpha_shape:x("alpha-shape"),convex_hull:x("convex-hull"),delaunay_triangulate:x("delaunay-triangulate"),gl_cone3d:x("gl-cone3d"),gl_error3d:x("gl-error3d"),gl_heatmap2d:x("gl-heatmap2d"),gl_line3d:x("gl-line3d"),gl_mesh3d:x("gl-mesh3d"),gl_plot2d:x("gl-plot2d"),gl_plot3d:x("gl-plot3d"),gl_pointcloud2d:x("gl-pointcloud2d"),gl_scatter3d:x("gl-scatter3d"),gl_select_box:x("gl-select-box"),gl_spikes2d:x("gl-spikes2d"),gl_streamtube3d:x("gl-streamtube3d"),gl_surface3d:x("gl-surface3d"),ndarray:x("ndarray"),ndarray_linear_interpolate:x("ndarray-linear-interpolate")}},{"alpha-shape":12,"convex-hull":58,"delaunay-triangulate":63,"gl-cone3d":79,"gl-error3d":84,"gl-heatmap2d":88,"gl-line3d":91,"gl-mesh3d":112,"gl-plot2d":118,"gl-plot3d":121,"gl-pointcloud2d":123,"gl-scatter3d":128,"gl-select-box":130,"gl-spikes2d":139,"gl-streamtube3d":143,"gl-surface3d":145,ndarray:259,"ndarray-linear-interpolate":253}],7:[function(x,T,b){"use strict";T.exports=function(d){var u=(d=d||{}).eye||[0,0,1],s=d.center||[0,0,0],c=d.up||[0,1,0],h=d.distanceLimits||[0,1/0],p=d.mode||"turntable",v=e(),g=o(),f=a();return v.setDistanceLimits(h[0],h[1]),v.lookAt(0,u,s,c),g.setDistanceLimits(h[0],h[1]),g.lookAt(0,u,s,c),f.setDistanceLimits(h[0],h[1]),f.lookAt(0,u,s,c),new l({turntable:v,orbit:g,matrix:f},p)};var e=x("turntable-camera-controller"),o=x("orbit-camera-controller"),a=x("matrix-camera-controller");function l(d,u){this._controllerNames=Object.keys(d),this._controllerList=this._controllerNames.map(function(s){return d[s]}),this._mode=u,this._active=d[u],this._active||(this._mode="turntable",this._active=d.turntable),this.modes=this._controllerNames,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}var i=l.prototype;i.flush=function(d){for(var u=this._controllerList,s=0;s<u.length;++s)u[s].flush(d)},i.idle=function(d){for(var u=this._controllerList,s=0;s<u.length;++s)u[s].idle(d)},i.lookAt=function(d,u,s,c){for(var h=this._controllerList,p=0;p<h.length;++p)h[p].lookAt(d,u,s,c)},i.rotate=function(d,u,s,c){for(var h=this._controllerList,p=0;p<h.length;++p)h[p].rotate(d,u,s,c)},i.pan=function(d,u,s,c){for(var h=this._controllerList,p=0;p<h.length;++p)h[p].pan(d,u,s,c)},i.translate=function(d,u,s,c){for(var h=this._controllerList,p=0;p<h.length;++p)h[p].translate(d,u,s,c)},i.setMatrix=function(d,u){for(var s=this._controllerList,c=0;c<s.length;++c)s[c].setMatrix(d,u)},i.setDistanceLimits=function(d,u){for(var s=this._controllerList,c=0;c<s.length;++c)s[c].setDistanceLimits(d,u)},i.setDistance=function(d,u){for(var s=this._controllerList,c=0;c<s.length;++c)s[c].setDistance(d,u)},i.recalcMatrix=function(d){this._active.recalcMatrix(d)},i.getDistance=function(d){return this._active.getDistance(d)},i.getDistanceLimits=function(d){return this._active.getDistanceLimits(d)},i.lastT=function(){return this._active.lastT()},i.setMode=function(d){if(d!==this._mode){var u=this._controllerNames.indexOf(d);if(!(u<0)){var s=this._active,c=this._controllerList[u],h=Math.max(s.lastT(),c.lastT());s.recalcMatrix(h),c.setMatrix(h,s.computedMatrix),this._active=c,this._mode=d,this.computedMatrix=this._active.computedMatrix,this.computedEye=this._active.computedEye,this.computedUp=this._active.computedUp,this.computedCenter=this._active.computedCenter,this.computedRadius=this._active.computedRadius}}},i.getMode=function(){return this._mode}},{"matrix-camera-controller":245,"orbit-camera-controller":263,"turntable-camera-controller":305}],8:[function(x,T,b){"use strict";var e="undefined"==typeof WeakMap?x("weak-map"):WeakMap,o=x("gl-buffer"),a=x("gl-vao"),l=new e;T.exports=function(i){var d=l.get(i),u=d&&(d._triangleBuffer.handle||d._triangleBuffer.buffer);if(!u||!i.isBuffer(u)){var s=o(i,new Float32Array([-1,-1,-1,4,4,-1]));(d=a(i,[{buffer:s,type:i.FLOAT,size:2}]))._triangleBuffer=s,l.set(i,d)}d.bind(),i.drawArrays(i.TRIANGLES,0,3),d.unbind()}},{"gl-buffer":78,"gl-vao":150,"weak-map":313}],9:[function(x,T,b){var e=x("pad-left");T.exports=function(o,a,l){a="number"==typeof a?a:1,l=l||": ";var i=o.split(/\r?\n/),d=String(i.length+a-1).length;return i.map(function(u,s){var c=s+a,h=String(c).length;return e(c,d-h)+l+u}).join("\n")}},{"pad-left":264}],10:[function(x,T,b){"use strict";T.exports=function(a){var l=a.length;if(0===l)return[];if(1===l)return[0];for(var i=a[0].length,d=[a[0]],u=[0],s=1;s<l;++s)if(d.push(a[s]),o(d,i)){if(u.push(s),u.length===i+1)return u}else d.pop();return u};var e=x("robust-orientation");function o(a,l){for(var i=new Array(l+1),d=0;d<a.length;++d)i[d]=a[d];for(d=0;d<=a.length;++d){for(var u=a.length;u<=l;++u){for(var s=new Array(l),c=0;c<l;++c)s[c]=Math.pow(u+1-d,c);i[u]=s}if(e.apply(void 0,i))return!0}return!1}},{"robust-orientation":284}],11:[function(x,T,b){"use strict";T.exports=function(a,l){return e(l).filter(function(i){for(var d=new Array(i.length),u=0;u<i.length;++u)d[u]=l[i[u]];return o(d)*a<1})};var e=x("delaunay-triangulate"),o=x("circumradius")},{circumradius:49,"delaunay-triangulate":63}],12:[function(x,T,b){T.exports=function(a,l){return o(e(a,l))};var e=x("alpha-complex"),o=x("simplicial-complex-boundary")},{"alpha-complex":11,"simplicial-complex-boundary":290}],13:[function(x,T,b){T.exports=function(e){return atob(e)}},{}],14:[function(x,T,b){"use strict";T.exports=function(a,l){for(var i=l.length,d=new Array(i+1),u=0;u<i;++u){for(var s=new Array(i+1),c=0;c<=i;++c)s[c]=a[c][u];d[u]=s}for(d[i]=new Array(i+1),u=0;u<=i;++u)d[i][u]=1;var h=new Array(i+1);for(u=0;u<i;++u)h[u]=l[u];h[i]=1;var p=e(d,h),v=o(p[i+1]);0===v&&(v=1);var g=new Array(i+1);for(u=0;u<=i;++u)g[u]=o(p[u])/v;return g};var e=x("robust-linear-solve");function o(a){for(var l=0,i=0;i<a.length;++i)l+=a[i];return l}},{"robust-linear-solve":283}],15:[function(x,T,b){"use strict";var e=x("./lib/rationalize");T.exports=function(o,a){return e(o[0].mul(a[1]).add(a[0].mul(o[1])),o[1].mul(a[1]))}},{"./lib/rationalize":25}],16:[function(x,T,b){"use strict";T.exports=function(e,o){return e[0].mul(o[1]).cmp(o[0].mul(e[1]))}},{}],17:[function(x,T,b){"use strict";var e=x("./lib/rationalize");T.exports=function(o,a){return e(o[0].mul(a[1]),o[1].mul(a[0]))}},{"./lib/rationalize":25}],18:[function(x,T,b){"use strict";var e=x("./is-rat"),o=x("./lib/is-bn"),a=x("./lib/num-to-bn"),l=x("./lib/str-to-bn"),i=x("./lib/rationalize"),d=x("./div");T.exports=function u(s,c){if(e(s))return c?d(s,u(c)):[s[0].clone(),s[1].clone()];var h,p,v=0;if(o(s))h=s.clone();else if("string"==typeof s)h=l(s);else{if(0===s)return[a(0),a(1)];if(s===Math.floor(s))h=a(s);else{for(;s!==Math.floor(s);)s*=Math.pow(2,256),v-=256;h=a(s)}}if(e(c))h.mul(c[1]),p=c[0].clone();else if(o(c))p=c.clone();else if("string"==typeof c)p=l(c);else if(c)if(c===Math.floor(c))p=a(c);else{for(;c!==Math.floor(c);)c*=Math.pow(2,256),v+=256;p=a(c)}else p=a(1);return v>0?h=h.ushln(v):v<0&&(p=p.ushln(-v)),i(h,p)}},{"./div":17,"./is-rat":19,"./lib/is-bn":23,"./lib/num-to-bn":24,"./lib/rationalize":25,"./lib/str-to-bn":26}],19:[function(x,T,b){"use strict";var e=x("./lib/is-bn");T.exports=function(o){return Array.isArray(o)&&2===o.length&&e(o[0])&&e(o[1])}},{"./lib/is-bn":23}],20:[function(x,T,b){"use strict";var e=x("bn.js");T.exports=function(o){return o.cmp(new e(0))}},{"bn.js":33}],21:[function(x,T,b){"use strict";var e=x("./bn-sign");T.exports=function(o){var a=o.length,l=o.words,i=0;if(1===a)i=l[0];else if(2===a)i=l[0]+67108864*l[1];else for(var d=0;d<a;d++)i+=l[d]*Math.pow(67108864,d);return e(o)*i}},{"./bn-sign":20}],22:[function(x,T,b){"use strict";var e=x("double-bits"),o=x("bit-twiddle").countTrailingZeros;T.exports=function(a){var l=o(e.lo(a));if(l<32)return l;var i=o(e.hi(a));return i>20?52:i+32}},{"bit-twiddle":32,"double-bits":64}],23:[function(x,T,b){"use strict";x("bn.js"),T.exports=function(e){return e&&"object"==typeof e&&Boolean(e.words)}},{"bn.js":33}],24:[function(x,T,b){"use strict";var e=x("bn.js"),o=x("double-bits");T.exports=function(a){var l=o.exponent(a);return l<52?new e(a):new e(a*Math.pow(2,52-l)).ushln(l-52)}},{"bn.js":33,"double-bits":64}],25:[function(x,T,b){"use strict";var e=x("./num-to-bn"),o=x("./bn-sign");T.exports=function(a,l){var i=o(a),d=o(l);if(0===i)return[e(0),e(1)];if(0===d)return[e(0),e(0)];d<0&&(a=a.neg(),l=l.neg());var u=a.gcd(l);return u.cmpn(1)?[a.div(u),l.div(u)]:[a,l]}},{"./bn-sign":20,"./num-to-bn":24}],26:[function(x,T,b){"use strict";var e=x("bn.js");T.exports=function(o){return new e(o)}},{"bn.js":33}],27:[function(x,T,b){"use strict";var e=x("./lib/rationalize");T.exports=function(o,a){return e(o[0].mul(a[0]),o[1].mul(a[1]))}},{"./lib/rationalize":25}],28:[function(x,T,b){"use strict";var e=x("./lib/bn-sign");T.exports=function(o){return e(o[0])*e(o[1])}},{"./lib/bn-sign":20}],29:[function(x,T,b){"use strict";var e=x("./lib/rationalize");T.exports=function(o,a){return e(o[0].mul(a[1]).sub(o[1].mul(a[0])),o[1].mul(a[1]))}},{"./lib/rationalize":25}],30:[function(x,T,b){"use strict";var e=x("./lib/bn-to-num"),o=x("./lib/ctz");T.exports=function(a){var l=a[0],i=a[1];if(0===l.cmpn(0))return 0;var d=l.abs().divmod(i.abs()),s=e(d.div),c=d.mod,h=l.negative!==i.negative?-1:1;if(0===c.cmpn(0))return h*s;if(s){var p=o(s)+4,v=e(c.ushln(p).divRound(i));return h*(s+v*Math.pow(2,-p))}var g=i.bitLength()-c.bitLength()+53;return v=e(c.ushln(g).divRound(i)),g<1023?h*v*Math.pow(2,-g):h*(v*=Math.pow(2,-1023))*Math.pow(2,1023-g)}},{"./lib/bn-to-num":21,"./lib/ctz":22}],31:[function(x,T,b){"use strict";function e(u,s,c,h,p){for(var v=p+1;h<=p;){var g=h+p>>>1,f=u[g];(void 0!==c?c(f,s):f-s)>=0?(v=g,p=g-1):h=g+1}return v}function o(u,s,c,h,p){for(var v=p+1;h<=p;){var g=h+p>>>1,f=u[g];(void 0!==c?c(f,s):f-s)>0?(v=g,p=g-1):h=g+1}return v}function a(u,s,c,h,p){for(var v=h-1;h<=p;){var g=h+p>>>1,f=u[g];(void 0!==c?c(f,s):f-s)<0?(v=g,h=g+1):p=g-1}return v}function l(u,s,c,h,p){for(var v=h-1;h<=p;){var g=h+p>>>1,f=u[g];(void 0!==c?c(f,s):f-s)<=0?(v=g,h=g+1):p=g-1}return v}function i(u,s,c,h,p){for(;h<=p;){var v=h+p>>>1,g=u[v],f=void 0!==c?c(g,s):g-s;if(0===f)return v;f<=0?h=v+1:p=v-1}return-1}function d(u,s,c,h,p,v){return"function"==typeof c?v(u,s,c,void 0===h?0:0|h,void 0===p?u.length-1:0|p):v(u,s,void 0,void 0===c?0:0|c,void 0===h?u.length-1:0|h)}T.exports={ge:function(u,s,c,h,p){return d(u,s,c,h,p,e)},gt:function(u,s,c,h,p){return d(u,s,c,h,p,o)},lt:function(u,s,c,h,p){return d(u,s,c,h,p,a)},le:function(u,s,c,h,p){return d(u,s,c,h,p,l)},eq:function(u,s,c,h,p){return d(u,s,c,h,p,i)}}},{}],32:[function(x,T,b){"use strict";function e(a){var l=32;return(a&=-a)&&l--,65535&a&&(l-=16),16711935&a&&(l-=8),252645135&a&&(l-=4),858993459&a&&(l-=2),1431655765&a&&(l-=1),l}b.INT_BITS=32,b.INT_MAX=2147483647,b.INT_MIN=-1<<31,b.sign=function(a){return(a>0)-(a<0)},b.abs=function(a){var l=a>>31;return(a^l)-l},b.min=function(a,l){return l^(a^l)&-(a<l)},b.max=function(a,l){return a^(a^l)&-(a<l)},b.isPow2=function(a){return!(a&a-1||!a)},b.log2=function(a){var l,i;return l=(a>65535)<<4,l|=i=((a>>>=l)>255)<<3,l|=i=((a>>>=i)>15)<<2,(l|=i=((a>>>=i)>3)<<1)|(a>>>=i)>>1},b.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},b.popCount=function(a){return 16843009*((a=(858993459&(a-=a>>>1&1431655765))+(a>>>2&858993459))+(a>>>4)&252645135)>>>24},b.countTrailingZeros=e,b.nextPow2=function(a){return a+=0===a,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,1+((a|=a>>>8)|a>>>16)},b.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,(a|=a>>>16)-(a>>>1)},b.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,27030>>>(a&=15)&1};var o=new Array(256);(function(a){for(var l=0;l<256;++l){var i=l,d=l,u=7;for(i>>>=1;i;i>>>=1)d<<=1,d|=1&i,--u;a[l]=d<<u&255}})(o),b.reverse=function(a){return o[255&a]<<24|o[a>>>8&255]<<16|o[a>>>16&255]<<8|o[a>>>24&255]},b.interleave2=function(a,l){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a&=65535)|a<<8))|a<<4))|a<<2))|a<<1))|(l=1431655765&((l=858993459&((l=252645135&((l=16711935&((l&=65535)|l<<8))|l<<4))|l<<2))|l<<1))<<1},b.deinterleave2=function(a,l){return(a=65535&((a=16711935&((a=252645135&((a=858993459&((a=a>>>l&1431655765)|a>>>1))|a>>>2))|a>>>4))|a>>>16))<<16>>16},b.interleave3=function(a,l,i){return a=1227133513&((a=3272356035&((a=251719695&((a=4278190335&((a&=1023)|a<<16))|a<<8))|a<<4))|a<<2),(a|=(l=1227133513&((l=3272356035&((l=251719695&((l=4278190335&((l&=1023)|l<<16))|l<<8))|l<<4))|l<<2))<<1)|(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<2},b.deinterleave3=function(a,l){return(a=1023&((a=4278190335&((a=251719695&((a=3272356035&((a=a>>>l&1227133513)|a>>>2))|a>>>4))|a>>>8))|a>>>16))<<22>>22},b.nextCombination=function(a){var l=a|a-1;return l+1|(~l&-~l)-1>>>e(a)+1}},{}],33:[function(x,T,b){!function(e,o){"use strict";function a(L,I){if(!L)throw new Error(I||"Assertion failed")}function l(L,I){L.super_=I;var B=function(){};B.prototype=I.prototype,L.prototype=new B,L.prototype.constructor=L}function i(L,I,B){if(i.isBN(L))return L;this.negative=0,this.words=null,this.length=0,this.red=null,null!==L&&("le"!==I&&"be"!==I||(B=I,I=10),this._init(L||0,I||10,B||"be"))}var d;"object"==typeof e?e.exports=i:o.BN=i,i.BN=i,i.wordSize=26;try{d="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:x("buffer").Buffer}catch(L){}function u(L,I){var B=L.charCodeAt(I);return B>=65&&B<=70?B-55:B>=97&&B<=102?B-87:B-48&15}function s(L,I,B){var V=u(L,B);return B-1>=I&&(V|=u(L,B-1)<<4),V}function c(L,I,B,V){for(var Z=0,Y=Math.min(L.length,B),ee=I;ee<Y;ee++){var J=L.charCodeAt(ee)-48;Z*=V,Z+=J>=49?J-49+10:J>=17?J-17+10:J}return Z}i.isBN=function(L){return L instanceof i||null!==L&&"object"==typeof L&&L.constructor.wordSize===i.wordSize&&Array.isArray(L.words)},i.max=function(L,I){return L.cmp(I)>0?L:I},i.min=function(L,I){return L.cmp(I)<0?L:I},i.prototype._init=function(L,I,B){if("number"==typeof L)return this._initNumber(L,I,B);if("object"==typeof L)return this._initArray(L,I,B);"hex"===I&&(I=16),a(I===(0|I)&&I>=2&&I<=36);var V=0;"-"===(L=L.toString().replace(/\s+/g,""))[0]&&(V++,this.negative=1),V<L.length&&(16===I?this._parseHex(L,V,B):(this._parseBase(L,I,V),"le"===B&&this._initArray(this.toArray(),I,B)))},i.prototype._initNumber=function(L,I,B){L<0&&(this.negative=1,L=-L),L<67108864?(this.words=[67108863&L],this.length=1):L<4503599627370496?(this.words=[67108863&L,L/67108864&67108863],this.length=2):(a(L<9007199254740992),this.words=[67108863&L,L/67108864&67108863,1],this.length=3),"le"===B&&this._initArray(this.toArray(),I,B)},i.prototype._initArray=function(L,I,B){if(a("number"==typeof L.length),L.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(L.length/3),this.words=new Array(this.length);for(var V=0;V<this.length;V++)this.words[V]=0;var Z,Y,ee=0;if("be"===B)for(V=L.length-1,Z=0;V>=0;V-=3)this.words[Z]|=(Y=L[V]|L[V-1]<<8|L[V-2]<<16)<<ee&67108863,this.words[Z+1]=Y>>>26-ee&67108863,(ee+=24)>=26&&(ee-=26,Z++);else if("le"===B)for(V=0,Z=0;V<L.length;V+=3)this.words[Z]|=(Y=L[V]|L[V+1]<<8|L[V+2]<<16)<<ee&67108863,this.words[Z+1]=Y>>>26-ee&67108863,(ee+=24)>=26&&(ee-=26,Z++);return this.strip()},i.prototype._parseHex=function(L,I,B){this.length=Math.ceil((L.length-I)/6),this.words=new Array(this.length);for(var V=0;V<this.length;V++)this.words[V]=0;var Z,Y=0,ee=0;if("be"===B)for(V=L.length-1;V>=I;V-=2)Z=s(L,I,V)<<Y,this.words[ee]|=67108863&Z,Y>=18?(Y-=18,this.words[ee+=1]|=Z>>>26):Y+=8;else for(V=(L.length-I)%2==0?I+1:I;V<L.length;V+=2)Z=s(L,I,V)<<Y,this.words[ee]|=67108863&Z,Y>=18?(Y-=18,this.words[ee+=1]|=Z>>>26):Y+=8;this.strip()},i.prototype._parseBase=function(L,I,B){this.words=[0],this.length=1;for(var V=0,Z=1;Z<=67108863;Z*=I)V++;V--,Z=Z/I|0;for(var Y=L.length-B,ee=Y%V,J=Math.min(Y,Y-ee)+B,$=0,Q=B;Q<J;Q+=V)$=c(L,Q,Q+V,I),this.imuln(Z),this.words[0]+$<67108864?this.words[0]+=$:this._iaddn($);if(0!==ee){var se=1;for($=c(L,Q,L.length,I),Q=0;Q<ee;Q++)se*=I;this.imuln(se),this.words[0]+$<67108864?this.words[0]+=$:this._iaddn($)}this.strip()},i.prototype.copy=function(L){L.words=new Array(this.length);for(var I=0;I<this.length;I++)L.words[I]=this.words[I];L.length=this.length,L.negative=this.negative,L.red=this.red},i.prototype.clone=function(){var L=new i(null);return this.copy(L),L},i.prototype._expand=function(L){for(;this.length<L;)this.words[this.length++]=0;return this},i.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},i.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},i.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var h=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],v=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function g(L,I,B){B.negative=I.negative^L.negative;var V=L.length+I.length|0;B.length=V,V=V-1|0;var Z=0|L.words[0],Y=0|I.words[0],ee=Z*Y,$=ee/67108864|0;B.words[0]=67108863&ee;for(var Q=1;Q<V;Q++){for(var se=$>>>26,j=67108863&$,G=Math.min(Q,I.length-1),W=Math.max(0,Q-L.length+1);W<=G;W++)se+=(ee=(Z=0|L.words[Q-W|0])*(Y=0|I.words[W])+j)/67108864|0,j=67108863&ee;B.words[Q]=0|j,$=0|se}return 0!==$?B.words[Q]=0|$:B.length--,B.strip()}i.prototype.toString=function(L,I){var B;if(I=0|I||1,16===(L=L||10)||"hex"===L){B="";for(var V=0,Z=0,Y=0;Y<this.length;Y++){var ee=this.words[Y],J=(16777215&(ee<<V|Z)).toString(16);B=0!=(Z=ee>>>24-V&16777215)||Y!==this.length-1?h[6-J.length]+J+B:J+B,(V+=2)>=26&&(V-=26,Y--)}for(0!==Z&&(B=Z.toString(16)+B);B.length%I!=0;)B="0"+B;return 0!==this.negative&&(B="-"+B),B}if(L===(0|L)&&L>=2&&L<=36){var $=p[L],Q=v[L];B="";var se=this.clone();for(se.negative=0;!se.isZero();){var j=se.modn(Q).toString(L);B=(se=se.idivn(Q)).isZero()?j+B:h[$-j.length]+j+B}for(this.isZero()&&(B="0"+B);B.length%I!=0;)B="0"+B;return 0!==this.negative&&(B="-"+B),B}a(!1,"Base should be between 2 and 36")},i.prototype.toNumber=function(){var L=this.words[0];return 2===this.length?L+=67108864*this.words[1]:3===this.length&&1===this.words[2]?L+=4503599627370496+67108864*this.words[1]:this.length>2&&a(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-L:L},i.prototype.toJSON=function(){return this.toString(16)},i.prototype.toBuffer=function(L,I){return a(void 0!==d),this.toArrayLike(d,L,I)},i.prototype.toArray=function(L,I){return this.toArrayLike(Array,L,I)},i.prototype.toArrayLike=function(L,I,B){var V=this.byteLength(),Z=B||Math.max(1,V);a(V<=Z,"byte array longer than desired length"),a(Z>0,"Requested array length <= 0"),this.strip();var Y,ee,J="le"===I,$=new L(Z),Q=this.clone();if(J){for(ee=0;!Q.isZero();ee++)Y=Q.andln(255),Q.iushrn(8),$[ee]=Y;for(;ee<Z;ee++)$[ee]=0}else{for(ee=0;ee<Z-V;ee++)$[ee]=0;for(ee=0;!Q.isZero();ee++)Y=Q.andln(255),Q.iushrn(8),$[Z-ee-1]=Y}return $},i.prototype._countBits=Math.clz32?function(L){return 32-Math.clz32(L)}:function(L){var I=L,B=0;return I>=4096&&(B+=13,I>>>=13),I>=64&&(B+=7,I>>>=7),I>=8&&(B+=4,I>>>=4),I>=2&&(B+=2,I>>>=2),B+I},i.prototype._zeroBits=function(L){if(0===L)return 26;var I=L,B=0;return 0==(8191&I)&&(B+=13,I>>>=13),0==(127&I)&&(B+=7,I>>>=7),0==(15&I)&&(B+=4,I>>>=4),0==(3&I)&&(B+=2,I>>>=2),0==(1&I)&&B++,B},i.prototype.bitLength=function(){var I=this._countBits(this.words[this.length-1]);return 26*(this.length-1)+I},i.prototype.zeroBits=function(){if(this.isZero())return 0;for(var L=0,I=0;I<this.length;I++){var B=this._zeroBits(this.words[I]);if(L+=B,26!==B)break}return L},i.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},i.prototype.toTwos=function(L){return 0!==this.negative?this.abs().inotn(L).iaddn(1):this.clone()},i.prototype.fromTwos=function(L){return this.testn(L-1)?this.notn(L).iaddn(1).ineg():this.clone()},i.prototype.isNeg=function(){return 0!==this.negative},i.prototype.neg=function(){return this.clone().ineg()},i.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},i.prototype.iuor=function(L){for(;this.length<L.length;)this.words[this.length++]=0;for(var I=0;I<L.length;I++)this.words[I]=this.words[I]|L.words[I];return this.strip()},i.prototype.ior=function(L){return a(0==(this.negative|L.negative)),this.iuor(L)},i.prototype.or=function(L){return this.length>L.length?this.clone().ior(L):L.clone().ior(this)},i.prototype.uor=function(L){return this.length>L.length?this.clone().iuor(L):L.clone().iuor(this)},i.prototype.iuand=function(L){var I;I=this.length>L.length?L:this;for(var B=0;B<I.length;B++)this.words[B]=this.words[B]&L.words[B];return this.length=I.length,this.strip()},i.prototype.iand=function(L){return a(0==(this.negative|L.negative)),this.iuand(L)},i.prototype.and=function(L){return this.length>L.length?this.clone().iand(L):L.clone().iand(this)},i.prototype.uand=function(L){return this.length>L.length?this.clone().iuand(L):L.clone().iuand(this)},i.prototype.iuxor=function(L){var I,B;this.length>L.length?(I=this,B=L):(I=L,B=this);for(var V=0;V<B.length;V++)this.words[V]=I.words[V]^B.words[V];if(this!==I)for(;V<I.length;V++)this.words[V]=I.words[V];return this.length=I.length,this.strip()},i.prototype.ixor=function(L){return a(0==(this.negative|L.negative)),this.iuxor(L)},i.prototype.xor=function(L){return this.length>L.length?this.clone().ixor(L):L.clone().ixor(this)},i.prototype.uxor=function(L){return this.length>L.length?this.clone().iuxor(L):L.clone().iuxor(this)},i.prototype.inotn=function(L){a("number"==typeof L&&L>=0);var I=0|Math.ceil(L/26),B=L%26;this._expand(I),B>0&&I--;for(var V=0;V<I;V++)this.words[V]=67108863&~this.words[V];return B>0&&(this.words[V]=~this.words[V]&67108863>>26-B),this.strip()},i.prototype.notn=function(L){return this.clone().inotn(L)},i.prototype.setn=function(L,I){a("number"==typeof L&&L>=0);var B=L/26|0,V=L%26;return this._expand(B+1),this.words[B]=I?this.words[B]|1<<V:this.words[B]&~(1<<V),this.strip()},i.prototype.iadd=function(L){var I,B,V;if(0!==this.negative&&0===L.negative)return this.negative=0,I=this.isub(L),this.negative^=1,this._normSign();if(0===this.negative&&0!==L.negative)return L.negative=0,I=this.isub(L),L.negative=1,I._normSign();this.length>L.length?(B=this,V=L):(B=L,V=this);for(var Z=0,Y=0;Y<V.length;Y++)this.words[Y]=67108863&(I=(0|B.words[Y])+(0|V.words[Y])+Z),Z=I>>>26;for(;0!==Z&&Y<B.length;Y++)this.words[Y]=67108863&(I=(0|B.words[Y])+Z),Z=I>>>26;if(this.length=B.length,0!==Z)this.words[this.length]=Z,this.length++;else if(B!==this)for(;Y<B.length;Y++)this.words[Y]=B.words[Y];return this},i.prototype.add=function(L){var I;return 0!==L.negative&&0===this.negative?(L.negative=0,I=this.sub(L),L.negative^=1,I):0===L.negative&&0!==this.negative?(this.negative=0,I=L.sub(this),this.negative=1,I):this.length>L.length?this.clone().iadd(L):L.clone().iadd(this)},i.prototype.isub=function(L){if(0!==L.negative){L.negative=0;var I=this.iadd(L);return L.negative=1,I._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(L),this.negative=1,this._normSign();var B,V,Z=this.cmp(L);if(0===Z)return this.negative=0,this.length=1,this.words[0]=0,this;Z>0?(B=this,V=L):(B=L,V=this);for(var Y=0,ee=0;ee<V.length;ee++)Y=(I=(0|B.words[ee])-(0|V.words[ee])+Y)>>26,this.words[ee]=67108863&I;for(;0!==Y&&ee<B.length;ee++)Y=(I=(0|B.words[ee])+Y)>>26,this.words[ee]=67108863&I;if(0===Y&&ee<B.length&&B!==this)for(;ee<B.length;ee++)this.words[ee]=B.words[ee];return this.length=Math.max(this.length,ee),B!==this&&(this.negative=1),this.strip()},i.prototype.sub=function(L){return this.clone().isub(L)};var f=function(L,I,B){var V,Z,Y,ee=L.words,J=I.words,$=B.words,Q=0,se=0|ee[0],j=8191&se,G=se>>>13,W=0|ee[1],ie=8191&W,q=W>>>13,te=0|ee[2],ne=8191&te,le=te>>>13,ue=0|ee[3],de=8191&ue,he=ue>>>13,be=0|ee[4],ge=8191&be,we=be>>>13,Ce=0|ee[5],De=8191&Ce,Se=Ce>>>13,Fe=0|ee[6],ve=8191&Fe,Te=Fe>>>13,Le=0|ee[7],Ee=8191&Le,Pe=Le>>>13,je=0|ee[8],Ge=8191&je,Ke=je>>>13,lt=0|ee[9],Ue=8191&lt,$e=lt>>>13,et=0|J[0],tt=8191&et,ct=et>>>13,xt=0|J[1],Ct=8191&xt,Ht=xt>>>13,zt=0|J[2],ht=8191&zt,ut=zt>>>13,Ot=0|J[3],tn=8191&Ot,un=Ot>>>13,Ze=0|J[4],Qe=8191&Ze,qe=Ze>>>13,it=0|J[5],Ie=8191&it,ze=it>>>13,Ve=0|J[6],Be=8191&Ve,at=Ve>>>13,gt=0|J[7],wt=8191&gt,_t=gt>>>13,Rt=0|J[8],yt=8191&Rt,Vt=Rt>>>13,Nt=0|J[9],rt=8191&Nt,Tt=Nt>>>13;B.negative=L.negative^I.negative,B.length=19;var Ut=(Q+(V=Math.imul(j,tt))|0)+((8191&(Z=(Z=Math.imul(j,ct))+Math.imul(G,tt)|0))<<13)|0;Q=((Y=Math.imul(G,ct))+(Z>>>13)|0)+(Ut>>>26)|0,Ut&=67108863,V=Math.imul(ie,tt),Z=(Z=Math.imul(ie,ct))+Math.imul(q,tt)|0,Y=Math.imul(q,ct);var Wt=(Q+(V=V+Math.imul(j,Ct)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,Ht)|0)+Math.imul(G,Ct)|0))<<13)|0;Q=((Y=Y+Math.imul(G,Ht)|0)+(Z>>>13)|0)+(Wt>>>26)|0,Wt&=67108863,V=Math.imul(ne,tt),Z=(Z=Math.imul(ne,ct))+Math.imul(le,tt)|0,Y=Math.imul(le,ct),V=V+Math.imul(ie,Ct)|0,Z=(Z=Z+Math.imul(ie,Ht)|0)+Math.imul(q,Ct)|0,Y=Y+Math.imul(q,Ht)|0;var sn=(Q+(V=V+Math.imul(j,ht)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,ut)|0)+Math.imul(G,ht)|0))<<13)|0;Q=((Y=Y+Math.imul(G,ut)|0)+(Z>>>13)|0)+(sn>>>26)|0,sn&=67108863,V=Math.imul(de,tt),Z=(Z=Math.imul(de,ct))+Math.imul(he,tt)|0,Y=Math.imul(he,ct),V=V+Math.imul(ne,Ct)|0,Z=(Z=Z+Math.imul(ne,Ht)|0)+Math.imul(le,Ct)|0,Y=Y+Math.imul(le,Ht)|0,V=V+Math.imul(ie,ht)|0,Z=(Z=Z+Math.imul(ie,ut)|0)+Math.imul(q,ht)|0,Y=Y+Math.imul(q,ut)|0;var He=(Q+(V=V+Math.imul(j,tn)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,un)|0)+Math.imul(G,tn)|0))<<13)|0;Q=((Y=Y+Math.imul(G,un)|0)+(Z>>>13)|0)+(He>>>26)|0,He&=67108863,V=Math.imul(ge,tt),Z=(Z=Math.imul(ge,ct))+Math.imul(we,tt)|0,Y=Math.imul(we,ct),V=V+Math.imul(de,Ct)|0,Z=(Z=Z+Math.imul(de,Ht)|0)+Math.imul(he,Ct)|0,Y=Y+Math.imul(he,Ht)|0,V=V+Math.imul(ne,ht)|0,Z=(Z=Z+Math.imul(ne,ut)|0)+Math.imul(le,ht)|0,Y=Y+Math.imul(le,ut)|0,V=V+Math.imul(ie,tn)|0,Z=(Z=Z+Math.imul(ie,un)|0)+Math.imul(q,tn)|0,Y=Y+Math.imul(q,un)|0;var vt=(Q+(V=V+Math.imul(j,Qe)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,qe)|0)+Math.imul(G,Qe)|0))<<13)|0;Q=((Y=Y+Math.imul(G,qe)|0)+(Z>>>13)|0)+(vt>>>26)|0,vt&=67108863,V=Math.imul(De,tt),Z=(Z=Math.imul(De,ct))+Math.imul(Se,tt)|0,Y=Math.imul(Se,ct),V=V+Math.imul(ge,Ct)|0,Z=(Z=Z+Math.imul(ge,Ht)|0)+Math.imul(we,Ct)|0,Y=Y+Math.imul(we,Ht)|0,V=V+Math.imul(de,ht)|0,Z=(Z=Z+Math.imul(de,ut)|0)+Math.imul(he,ht)|0,Y=Y+Math.imul(he,ut)|0,V=V+Math.imul(ne,tn)|0,Z=(Z=Z+Math.imul(ne,un)|0)+Math.imul(le,tn)|0,Y=Y+Math.imul(le,un)|0,V=V+Math.imul(ie,Qe)|0,Z=(Z=Z+Math.imul(ie,qe)|0)+Math.imul(q,Qe)|0,Y=Y+Math.imul(q,qe)|0;var Lt=(Q+(V=V+Math.imul(j,Ie)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,ze)|0)+Math.imul(G,Ie)|0))<<13)|0;Q=((Y=Y+Math.imul(G,ze)|0)+(Z>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,V=Math.imul(ve,tt),Z=(Z=Math.imul(ve,ct))+Math.imul(Te,tt)|0,Y=Math.imul(Te,ct),V=V+Math.imul(De,Ct)|0,Z=(Z=Z+Math.imul(De,Ht)|0)+Math.imul(Se,Ct)|0,Y=Y+Math.imul(Se,Ht)|0,V=V+Math.imul(ge,ht)|0,Z=(Z=Z+Math.imul(ge,ut)|0)+Math.imul(we,ht)|0,Y=Y+Math.imul(we,ut)|0,V=V+Math.imul(de,tn)|0,Z=(Z=Z+Math.imul(de,un)|0)+Math.imul(he,tn)|0,Y=Y+Math.imul(he,un)|0,V=V+Math.imul(ne,Qe)|0,Z=(Z=Z+Math.imul(ne,qe)|0)+Math.imul(le,Qe)|0,Y=Y+Math.imul(le,qe)|0,V=V+Math.imul(ie,Ie)|0,Z=(Z=Z+Math.imul(ie,ze)|0)+Math.imul(q,Ie)|0,Y=Y+Math.imul(q,ze)|0;var Gt=(Q+(V=V+Math.imul(j,Be)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,at)|0)+Math.imul(G,Be)|0))<<13)|0;Q=((Y=Y+Math.imul(G,at)|0)+(Z>>>13)|0)+(Gt>>>26)|0,Gt&=67108863,V=Math.imul(Ee,tt),Z=(Z=Math.imul(Ee,ct))+Math.imul(Pe,tt)|0,Y=Math.imul(Pe,ct),V=V+Math.imul(ve,Ct)|0,Z=(Z=Z+Math.imul(ve,Ht)|0)+Math.imul(Te,Ct)|0,Y=Y+Math.imul(Te,Ht)|0,V=V+Math.imul(De,ht)|0,Z=(Z=Z+Math.imul(De,ut)|0)+Math.imul(Se,ht)|0,Y=Y+Math.imul(Se,ut)|0,V=V+Math.imul(ge,tn)|0,Z=(Z=Z+Math.imul(ge,un)|0)+Math.imul(we,tn)|0,Y=Y+Math.imul(we,un)|0,V=V+Math.imul(de,Qe)|0,Z=(Z=Z+Math.imul(de,qe)|0)+Math.imul(he,Qe)|0,Y=Y+Math.imul(he,qe)|0,V=V+Math.imul(ne,Ie)|0,Z=(Z=Z+Math.imul(ne,ze)|0)+Math.imul(le,Ie)|0,Y=Y+Math.imul(le,ze)|0,V=V+Math.imul(ie,Be)|0,Z=(Z=Z+Math.imul(ie,at)|0)+Math.imul(q,Be)|0,Y=Y+Math.imul(q,at)|0;var Kt=(Q+(V=V+Math.imul(j,wt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,_t)|0)+Math.imul(G,wt)|0))<<13)|0;Q=((Y=Y+Math.imul(G,_t)|0)+(Z>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,V=Math.imul(Ge,tt),Z=(Z=Math.imul(Ge,ct))+Math.imul(Ke,tt)|0,Y=Math.imul(Ke,ct),V=V+Math.imul(Ee,Ct)|0,Z=(Z=Z+Math.imul(Ee,Ht)|0)+Math.imul(Pe,Ct)|0,Y=Y+Math.imul(Pe,Ht)|0,V=V+Math.imul(ve,ht)|0,Z=(Z=Z+Math.imul(ve,ut)|0)+Math.imul(Te,ht)|0,Y=Y+Math.imul(Te,ut)|0,V=V+Math.imul(De,tn)|0,Z=(Z=Z+Math.imul(De,un)|0)+Math.imul(Se,tn)|0,Y=Y+Math.imul(Se,un)|0,V=V+Math.imul(ge,Qe)|0,Z=(Z=Z+Math.imul(ge,qe)|0)+Math.imul(we,Qe)|0,Y=Y+Math.imul(we,qe)|0,V=V+Math.imul(de,Ie)|0,Z=(Z=Z+Math.imul(de,ze)|0)+Math.imul(he,Ie)|0,Y=Y+Math.imul(he,ze)|0,V=V+Math.imul(ne,Be)|0,Z=(Z=Z+Math.imul(ne,at)|0)+Math.imul(le,Be)|0,Y=Y+Math.imul(le,at)|0,V=V+Math.imul(ie,wt)|0,Z=(Z=Z+Math.imul(ie,_t)|0)+Math.imul(q,wt)|0,Y=Y+Math.imul(q,_t)|0;var _n=(Q+(V=V+Math.imul(j,yt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,Vt)|0)+Math.imul(G,yt)|0))<<13)|0;Q=((Y=Y+Math.imul(G,Vt)|0)+(Z>>>13)|0)+(_n>>>26)|0,_n&=67108863,V=Math.imul(Ue,tt),Z=(Z=Math.imul(Ue,ct))+Math.imul($e,tt)|0,Y=Math.imul($e,ct),V=V+Math.imul(Ge,Ct)|0,Z=(Z=Z+Math.imul(Ge,Ht)|0)+Math.imul(Ke,Ct)|0,Y=Y+Math.imul(Ke,Ht)|0,V=V+Math.imul(Ee,ht)|0,Z=(Z=Z+Math.imul(Ee,ut)|0)+Math.imul(Pe,ht)|0,Y=Y+Math.imul(Pe,ut)|0,V=V+Math.imul(ve,tn)|0,Z=(Z=Z+Math.imul(ve,un)|0)+Math.imul(Te,tn)|0,Y=Y+Math.imul(Te,un)|0,V=V+Math.imul(De,Qe)|0,Z=(Z=Z+Math.imul(De,qe)|0)+Math.imul(Se,Qe)|0,Y=Y+Math.imul(Se,qe)|0,V=V+Math.imul(ge,Ie)|0,Z=(Z=Z+Math.imul(ge,ze)|0)+Math.imul(we,Ie)|0,Y=Y+Math.imul(we,ze)|0,V=V+Math.imul(de,Be)|0,Z=(Z=Z+Math.imul(de,at)|0)+Math.imul(he,Be)|0,Y=Y+Math.imul(he,at)|0,V=V+Math.imul(ne,wt)|0,Z=(Z=Z+Math.imul(ne,_t)|0)+Math.imul(le,wt)|0,Y=Y+Math.imul(le,_t)|0,V=V+Math.imul(ie,yt)|0,Z=(Z=Z+Math.imul(ie,Vt)|0)+Math.imul(q,yt)|0,Y=Y+Math.imul(q,Vt)|0;var en=(Q+(V=V+Math.imul(j,rt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(j,Tt)|0)+Math.imul(G,rt)|0))<<13)|0;Q=((Y=Y+Math.imul(G,Tt)|0)+(Z>>>13)|0)+(en>>>26)|0,en&=67108863,V=Math.imul(Ue,Ct),Z=(Z=Math.imul(Ue,Ht))+Math.imul($e,Ct)|0,Y=Math.imul($e,Ht),V=V+Math.imul(Ge,ht)|0,Z=(Z=Z+Math.imul(Ge,ut)|0)+Math.imul(Ke,ht)|0,Y=Y+Math.imul(Ke,ut)|0,V=V+Math.imul(Ee,tn)|0,Z=(Z=Z+Math.imul(Ee,un)|0)+Math.imul(Pe,tn)|0,Y=Y+Math.imul(Pe,un)|0,V=V+Math.imul(ve,Qe)|0,Z=(Z=Z+Math.imul(ve,qe)|0)+Math.imul(Te,Qe)|0,Y=Y+Math.imul(Te,qe)|0,V=V+Math.imul(De,Ie)|0,Z=(Z=Z+Math.imul(De,ze)|0)+Math.imul(Se,Ie)|0,Y=Y+Math.imul(Se,ze)|0,V=V+Math.imul(ge,Be)|0,Z=(Z=Z+Math.imul(ge,at)|0)+Math.imul(we,Be)|0,Y=Y+Math.imul(we,at)|0,V=V+Math.imul(de,wt)|0,Z=(Z=Z+Math.imul(de,_t)|0)+Math.imul(he,wt)|0,Y=Y+Math.imul(he,_t)|0,V=V+Math.imul(ne,yt)|0,Z=(Z=Z+Math.imul(ne,Vt)|0)+Math.imul(le,yt)|0,Y=Y+Math.imul(le,Vt)|0;var on=(Q+(V=V+Math.imul(ie,rt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(ie,Tt)|0)+Math.imul(q,rt)|0))<<13)|0;Q=((Y=Y+Math.imul(q,Tt)|0)+(Z>>>13)|0)+(on>>>26)|0,on&=67108863,V=Math.imul(Ue,ht),Z=(Z=Math.imul(Ue,ut))+Math.imul($e,ht)|0,Y=Math.imul($e,ut),V=V+Math.imul(Ge,tn)|0,Z=(Z=Z+Math.imul(Ge,un)|0)+Math.imul(Ke,tn)|0,Y=Y+Math.imul(Ke,un)|0,V=V+Math.imul(Ee,Qe)|0,Z=(Z=Z+Math.imul(Ee,qe)|0)+Math.imul(Pe,Qe)|0,Y=Y+Math.imul(Pe,qe)|0,V=V+Math.imul(ve,Ie)|0,Z=(Z=Z+Math.imul(ve,ze)|0)+Math.imul(Te,Ie)|0,Y=Y+Math.imul(Te,ze)|0,V=V+Math.imul(De,Be)|0,Z=(Z=Z+Math.imul(De,at)|0)+Math.imul(Se,Be)|0,Y=Y+Math.imul(Se,at)|0,V=V+Math.imul(ge,wt)|0,Z=(Z=Z+Math.imul(ge,_t)|0)+Math.imul(we,wt)|0,Y=Y+Math.imul(we,_t)|0,V=V+Math.imul(de,yt)|0,Z=(Z=Z+Math.imul(de,Vt)|0)+Math.imul(he,yt)|0,Y=Y+Math.imul(he,Vt)|0;var wn=(Q+(V=V+Math.imul(ne,rt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(ne,Tt)|0)+Math.imul(le,rt)|0))<<13)|0;Q=((Y=Y+Math.imul(le,Tt)|0)+(Z>>>13)|0)+(wn>>>26)|0,wn&=67108863,V=Math.imul(Ue,tn),Z=(Z=Math.imul(Ue,un))+Math.imul($e,tn)|0,Y=Math.imul($e,un),V=V+Math.imul(Ge,Qe)|0,Z=(Z=Z+Math.imul(Ge,qe)|0)+Math.imul(Ke,Qe)|0,Y=Y+Math.imul(Ke,qe)|0,V=V+Math.imul(Ee,Ie)|0,Z=(Z=Z+Math.imul(Ee,ze)|0)+Math.imul(Pe,Ie)|0,Y=Y+Math.imul(Pe,ze)|0,V=V+Math.imul(ve,Be)|0,Z=(Z=Z+Math.imul(ve,at)|0)+Math.imul(Te,Be)|0,Y=Y+Math.imul(Te,at)|0,V=V+Math.imul(De,wt)|0,Z=(Z=Z+Math.imul(De,_t)|0)+Math.imul(Se,wt)|0,Y=Y+Math.imul(Se,_t)|0,V=V+Math.imul(ge,yt)|0,Z=(Z=Z+Math.imul(ge,Vt)|0)+Math.imul(we,yt)|0,Y=Y+Math.imul(we,Vt)|0;var On=(Q+(V=V+Math.imul(de,rt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(de,Tt)|0)+Math.imul(he,rt)|0))<<13)|0;Q=((Y=Y+Math.imul(he,Tt)|0)+(Z>>>13)|0)+(On>>>26)|0,On&=67108863,V=Math.imul(Ue,Qe),Z=(Z=Math.imul(Ue,qe))+Math.imul($e,Qe)|0,Y=Math.imul($e,qe),V=V+Math.imul(Ge,Ie)|0,Z=(Z=Z+Math.imul(Ge,ze)|0)+Math.imul(Ke,Ie)|0,Y=Y+Math.imul(Ke,ze)|0,V=V+Math.imul(Ee,Be)|0,Z=(Z=Z+Math.imul(Ee,at)|0)+Math.imul(Pe,Be)|0,Y=Y+Math.imul(Pe,at)|0,V=V+Math.imul(ve,wt)|0,Z=(Z=Z+Math.imul(ve,_t)|0)+Math.imul(Te,wt)|0,Y=Y+Math.imul(Te,_t)|0,V=V+Math.imul(De,yt)|0,Z=(Z=Z+Math.imul(De,Vt)|0)+Math.imul(Se,yt)|0,Y=Y+Math.imul(Se,Vt)|0;var Dn=(Q+(V=V+Math.imul(ge,rt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(ge,Tt)|0)+Math.imul(we,rt)|0))<<13)|0;Q=((Y=Y+Math.imul(we,Tt)|0)+(Z>>>13)|0)+(Dn>>>26)|0,Dn&=67108863,V=Math.imul(Ue,Ie),Z=(Z=Math.imul(Ue,ze))+Math.imul($e,Ie)|0,Y=Math.imul($e,ze),V=V+Math.imul(Ge,Be)|0,Z=(Z=Z+Math.imul(Ge,at)|0)+Math.imul(Ke,Be)|0,Y=Y+Math.imul(Ke,at)|0,V=V+Math.imul(Ee,wt)|0,Z=(Z=Z+Math.imul(Ee,_t)|0)+Math.imul(Pe,wt)|0,Y=Y+Math.imul(Pe,_t)|0,V=V+Math.imul(ve,yt)|0,Z=(Z=Z+Math.imul(ve,Vt)|0)+Math.imul(Te,yt)|0,Y=Y+Math.imul(Te,Vt)|0;var Tn=(Q+(V=V+Math.imul(De,rt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(De,Tt)|0)+Math.imul(Se,rt)|0))<<13)|0;Q=((Y=Y+Math.imul(Se,Tt)|0)+(Z>>>13)|0)+(Tn>>>26)|0,Tn&=67108863,V=Math.imul(Ue,Be),Z=(Z=Math.imul(Ue,at))+Math.imul($e,Be)|0,Y=Math.imul($e,at),V=V+Math.imul(Ge,wt)|0,Z=(Z=Z+Math.imul(Ge,_t)|0)+Math.imul(Ke,wt)|0,Y=Y+Math.imul(Ke,_t)|0,V=V+Math.imul(Ee,yt)|0,Z=(Z=Z+Math.imul(Ee,Vt)|0)+Math.imul(Pe,yt)|0,Y=Y+Math.imul(Pe,Vt)|0;var pn=(Q+(V=V+Math.imul(ve,rt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(ve,Tt)|0)+Math.imul(Te,rt)|0))<<13)|0;Q=((Y=Y+Math.imul(Te,Tt)|0)+(Z>>>13)|0)+(pn>>>26)|0,pn&=67108863,V=Math.imul(Ue,wt),Z=(Z=Math.imul(Ue,_t))+Math.imul($e,wt)|0,Y=Math.imul($e,_t),V=V+Math.imul(Ge,yt)|0,Z=(Z=Z+Math.imul(Ge,Vt)|0)+Math.imul(Ke,yt)|0,Y=Y+Math.imul(Ke,Vt)|0;var En=(Q+(V=V+Math.imul(Ee,rt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(Ee,Tt)|0)+Math.imul(Pe,rt)|0))<<13)|0;Q=((Y=Y+Math.imul(Pe,Tt)|0)+(Z>>>13)|0)+(En>>>26)|0,En&=67108863,V=Math.imul(Ue,yt),Z=(Z=Math.imul(Ue,Vt))+Math.imul($e,yt)|0,Y=Math.imul($e,Vt);var Un=(Q+(V=V+Math.imul(Ge,rt)|0)|0)+((8191&(Z=(Z=Z+Math.imul(Ge,Tt)|0)+Math.imul(Ke,rt)|0))<<13)|0;Q=((Y=Y+Math.imul(Ke,Tt)|0)+(Z>>>13)|0)+(Un>>>26)|0,Un&=67108863;var In=(Q+(V=Math.imul(Ue,rt))|0)+((8191&(Z=(Z=Math.imul(Ue,Tt))+Math.imul($e,rt)|0))<<13)|0;return Q=((Y=Math.imul($e,Tt))+(Z>>>13)|0)+(In>>>26)|0,In&=67108863,$[0]=Ut,$[1]=Wt,$[2]=sn,$[3]=He,$[4]=vt,$[5]=Lt,$[6]=Gt,$[7]=Kt,$[8]=_n,$[9]=en,$[10]=on,$[11]=wn,$[12]=On,$[13]=Dn,$[14]=Tn,$[15]=pn,$[16]=En,$[17]=Un,$[18]=In,0!==Q&&($[19]=Q,B.length++),B};function w(L,I,B){return(new y).mulp(L,I,B)}function y(L,I){this.x=L,this.y=I}Math.imul||(f=g),i.prototype.mulTo=function(L,I){var B=this.length+L.length;return 10===this.length&&10===L.length?f(this,L,I):B<63?g(this,L,I):B<1024?function(V,Z,Y){Y.negative=Z.negative^V.negative,Y.length=V.length+Z.length;for(var ee=0,J=0,$=0;$<Y.length-1;$++){var Q=J;J=0;for(var se=67108863&ee,j=Math.min($,Z.length-1),G=Math.max(0,$-V.length+1);G<=j;G++){var ie=(0|V.words[$-G])*(0|Z.words[G]),q=67108863&ie;se=67108863&(q=q+se|0),J+=(Q=(Q=Q+(ie/67108864|0)|0)+(q>>>26)|0)>>>26,Q&=67108863}Y.words[$]=se,ee=Q,Q=J}return 0!==ee?Y.words[$]=ee:Y.length--,Y.strip()}(this,L,I):w(this,L,I)},y.prototype.makeRBT=function(L){for(var I=new Array(L),B=i.prototype._countBits(L)-1,V=0;V<L;V++)I[V]=this.revBin(V,B,L);return I},y.prototype.revBin=function(L,I,B){if(0===L||L===B-1)return L;for(var V=0,Z=0;Z<I;Z++)V|=(1&L)<<I-Z-1,L>>=1;return V},y.prototype.permute=function(L,I,B,V,Z,Y){for(var ee=0;ee<Y;ee++)V[ee]=I[L[ee]],Z[ee]=B[L[ee]]},y.prototype.transform=function(L,I,B,V,Z,Y){this.permute(Y,L,I,B,V,Z);for(var ee=1;ee<Z;ee<<=1)for(var J=ee<<1,$=Math.cos(2*Math.PI/J),Q=Math.sin(2*Math.PI/J),se=0;se<Z;se+=J)for(var j=$,G=Q,W=0;W<ee;W++){var ie=B[se+W],q=V[se+W],te=B[se+W+ee],ne=V[se+W+ee],le=j*te-G*ne;ne=j*ne+G*te,B[se+W]=ie+(te=le),V[se+W]=q+ne,B[se+W+ee]=ie-te,V[se+W+ee]=q-ne,W!==J&&(le=$*j-Q*G,G=$*G+Q*j,j=le)}},y.prototype.guessLen13b=function(L,I){var B=1|Math.max(I,L),V=1&B,Z=0;for(B=B/2|0;B;B>>>=1)Z++;return 1<<Z+1+V},y.prototype.conjugate=function(L,I,B){if(!(B<=1))for(var V=0;V<B/2;V++){var Z=L[V];L[V]=L[B-V-1],L[B-V-1]=Z,Z=I[V],I[V]=-I[B-V-1],I[B-V-1]=-Z}},y.prototype.normalize13b=function(L,I){for(var B=0,V=0;V<I/2;V++){var Z=8192*Math.round(L[2*V+1]/I)+Math.round(L[2*V]/I)+B;L[V]=67108863&Z,B=Z<67108864?0:Z/67108864|0}return L},y.prototype.convert13b=function(L,I,B,V){for(var Z=0,Y=0;Y<I;Y++)B[2*Y]=8191&(Z+=0|L[Y]),B[2*Y+1]=8191&(Z>>>=13),Z>>>=13;for(Y=2*I;Y<V;++Y)B[Y]=0;a(0===Z),a(0==(-8192&Z))},y.prototype.stub=function(L){for(var I=new Array(L),B=0;B<L;B++)I[B]=0;return I},y.prototype.mulp=function(L,I,B){var V=2*this.guessLen13b(L.length,I.length),Z=this.makeRBT(V),Y=this.stub(V),ee=new Array(V),J=new Array(V),$=new Array(V),Q=new Array(V),se=new Array(V),j=new Array(V),G=B.words;G.length=V,this.convert13b(L.words,L.length,ee,V),this.convert13b(I.words,I.length,Q,V),this.transform(ee,Y,J,$,V,Z),this.transform(Q,Y,se,j,V,Z);for(var W=0;W<V;W++){var ie=J[W]*se[W]-$[W]*j[W];$[W]=J[W]*j[W]+$[W]*se[W],J[W]=ie}return this.conjugate(J,$,V),this.transform(J,$,G,Y,V,Z),this.conjugate(G,Y,V),this.normalize13b(G,V),B.negative=L.negative^I.negative,B.length=L.length+I.length,B.strip()},i.prototype.mul=function(L){var I=new i(null);return I.words=new Array(this.length+L.length),this.mulTo(L,I)},i.prototype.mulf=function(L){var I=new i(null);return I.words=new Array(this.length+L.length),w(this,L,I)},i.prototype.imul=function(L){return this.clone().mulTo(L,this)},i.prototype.imuln=function(L){a("number"==typeof L),a(L<67108864);for(var I=0,B=0;B<this.length;B++){var V=(0|this.words[B])*L,Z=(67108863&V)+(67108863&I);I>>=26,I+=V/67108864|0,I+=Z>>>26,this.words[B]=67108863&Z}return 0!==I&&(this.words[B]=I,this.length++),this},i.prototype.muln=function(L){return this.clone().imuln(L)},i.prototype.sqr=function(){return this.mul(this)},i.prototype.isqr=function(){return this.imul(this.clone())},i.prototype.pow=function(L){var I=function(Y){for(var ee=new Array(Y.bitLength()),J=0;J<ee.length;J++){var Q=J%26;ee[J]=(Y.words[J/26|0]&1<<Q)>>>Q}return ee}(L);if(0===I.length)return new i(1);for(var B=this,V=0;V<I.length&&0===I[V];V++,B=B.sqr());if(++V<I.length)for(var Z=B.sqr();V<I.length;V++,Z=Z.sqr())0!==I[V]&&(B=B.mul(Z));return B},i.prototype.iushln=function(L){a("number"==typeof L&&L>=0);var I,B=L%26,V=(L-B)/26,Z=67108863>>>26-B<<26-B;if(0!==B){var Y=0;for(I=0;I<this.length;I++){var ee=this.words[I]&Z;this.words[I]=(0|this.words[I])-ee<<B|Y,Y=ee>>>26-B}Y&&(this.words[I]=Y,this.length++)}if(0!==V){for(I=this.length-1;I>=0;I--)this.words[I+V]=this.words[I];for(I=0;I<V;I++)this.words[I]=0;this.length+=V}return this.strip()},i.prototype.ishln=function(L){return a(0===this.negative),this.iushln(L)},i.prototype.iushrn=function(L,I,B){var V;a("number"==typeof L&&L>=0),V=I?(I-I%26)/26:0;var Z=L%26,Y=Math.min((L-Z)/26,this.length),ee=67108863^67108863>>>Z<<Z,J=B;if(V-=Y,V=Math.max(0,V),J){for(var $=0;$<Y;$++)J.words[$]=this.words[$];J.length=Y}if(0!==Y)if(this.length>Y)for(this.length-=Y,$=0;$<this.length;$++)this.words[$]=this.words[$+Y];else this.words[0]=0,this.length=1;var Q=0;for($=this.length-1;$>=0&&(0!==Q||$>=V);$--){var se=0|this.words[$];this.words[$]=Q<<26-Z|se>>>Z,Q=se&ee}return J&&0!==Q&&(J.words[J.length++]=Q),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},i.prototype.ishrn=function(L,I,B){return a(0===this.negative),this.iushrn(L,I,B)},i.prototype.shln=function(L){return this.clone().ishln(L)},i.prototype.ushln=function(L){return this.clone().iushln(L)},i.prototype.shrn=function(L){return this.clone().ishrn(L)},i.prototype.ushrn=function(L){return this.clone().iushrn(L)},i.prototype.testn=function(L){a("number"==typeof L&&L>=0);var I=L%26,B=(L-I)/26;return!(this.length<=B||!(this.words[B]&1<<I))},i.prototype.imaskn=function(L){a("number"==typeof L&&L>=0);var I=L%26,B=(L-I)/26;return a(0===this.negative,"imaskn works only with positive numbers"),this.length<=B?this:(0!==I&&B++,this.length=Math.min(B,this.length),0!==I&&(this.words[this.length-1]&=67108863^67108863>>>I<<I),this.strip())},i.prototype.maskn=function(L){return this.clone().imaskn(L)},i.prototype.iaddn=function(L){return a("number"==typeof L),a(L<67108864),L<0?this.isubn(-L):0!==this.negative?1===this.length&&(0|this.words[0])<L?(this.words[0]=L-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(L),this.negative=1,this):this._iaddn(L)},i.prototype._iaddn=function(L){this.words[0]+=L;for(var I=0;I<this.length&&this.words[I]>=67108864;I++)this.words[I]-=67108864,I===this.length-1?this.words[I+1]=1:this.words[I+1]++;return this.length=Math.max(this.length,I+1),this},i.prototype.isubn=function(L){if(a("number"==typeof L),a(L<67108864),L<0)return this.iaddn(-L);if(0!==this.negative)return this.negative=0,this.iaddn(L),this.negative=1,this;if(this.words[0]-=L,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var I=0;I<this.length&&this.words[I]<0;I++)this.words[I]+=67108864,this.words[I+1]-=1;return this.strip()},i.prototype.addn=function(L){return this.clone().iaddn(L)},i.prototype.subn=function(L){return this.clone().isubn(L)},i.prototype.iabs=function(){return this.negative=0,this},i.prototype.abs=function(){return this.clone().iabs()},i.prototype._ishlnsubmul=function(L,I,B){var V,Z;this._expand(L.length+B);var ee=0;for(V=0;V<L.length;V++){Z=(0|this.words[V+B])+ee;var J=(0|L.words[V])*I;ee=((Z-=67108863&J)>>26)-(J/67108864|0),this.words[V+B]=67108863&Z}for(;V<this.length-B;V++)ee=(Z=(0|this.words[V+B])+ee)>>26,this.words[V+B]=67108863&Z;if(0===ee)return this.strip();for(a(-1===ee),ee=0,V=0;V<this.length;V++)ee=(Z=-(0|this.words[V])+ee)>>26,this.words[V]=67108863&Z;return this.negative=1,this.strip()},i.prototype._wordDiv=function(L,I){var B,V=this.clone(),Z=L,Y=0|Z.words[Z.length-1];0!=(B=26-this._countBits(Y))&&(Z=Z.ushln(B),V.iushln(B),Y=0|Z.words[Z.length-1]);var ee,J=V.length-Z.length;if("mod"!==I){(ee=new i(null)).length=J+1,ee.words=new Array(ee.length);for(var $=0;$<ee.length;$++)ee.words[$]=0}var Q=V.clone()._ishlnsubmul(Z,1,J);0===Q.negative&&(V=Q,ee&&(ee.words[J]=1));for(var se=J-1;se>=0;se--){var j=67108864*(0|V.words[Z.length+se])+(0|V.words[Z.length+se-1]);for(j=Math.min(j/Y|0,67108863),V._ishlnsubmul(Z,j,se);0!==V.negative;)j--,V.negative=0,V._ishlnsubmul(Z,1,se),V.isZero()||(V.negative^=1);ee&&(ee.words[se]=j)}return ee&&ee.strip(),V.strip(),"div"!==I&&0!==B&&V.iushrn(B),{div:ee||null,mod:V}},i.prototype.divmod=function(L,I,B){return a(!L.isZero()),this.isZero()?{div:new i(0),mod:new i(0)}:0!==this.negative&&0===L.negative?(Y=this.neg().divmod(L,I),"mod"!==I&&(V=Y.div.neg()),"div"!==I&&(Z=Y.mod.neg(),B&&0!==Z.negative&&Z.iadd(L)),{div:V,mod:Z}):0===this.negative&&0!==L.negative?(Y=this.divmod(L.neg(),I),"mod"!==I&&(V=Y.div.neg()),{div:V,mod:Y.mod}):0!=(this.negative&L.negative)?(Y=this.neg().divmod(L.neg(),I),"div"!==I&&(Z=Y.mod.neg(),B&&0!==Z.negative&&Z.isub(L)),{div:Y.div,mod:Z}):L.length>this.length||this.cmp(L)<0?{div:new i(0),mod:this}:1===L.length?"div"===I?{div:this.divn(L.words[0]),mod:null}:"mod"===I?{div:null,mod:new i(this.modn(L.words[0]))}:{div:this.divn(L.words[0]),mod:new i(this.modn(L.words[0]))}:this._wordDiv(L,I);var V,Z,Y},i.prototype.div=function(L){return this.divmod(L,"div",!1).div},i.prototype.mod=function(L){return this.divmod(L,"mod",!1).mod},i.prototype.umod=function(L){return this.divmod(L,"mod",!0).mod},i.prototype.divRound=function(L){var I=this.divmod(L);if(I.mod.isZero())return I.div;var B=0!==I.div.negative?I.mod.isub(L):I.mod,V=L.ushrn(1),Z=L.andln(1),Y=B.cmp(V);return Y<0||1===Z&&0===Y?I.div:0!==I.div.negative?I.div.isubn(1):I.div.iaddn(1)},i.prototype.modn=function(L){a(L<=67108863);for(var I=(1<<26)%L,B=0,V=this.length-1;V>=0;V--)B=(I*B+(0|this.words[V]))%L;return B},i.prototype.idivn=function(L){a(L<=67108863);for(var I=0,B=this.length-1;B>=0;B--){var V=(0|this.words[B])+67108864*I;this.words[B]=V/L|0,I=V%L}return this.strip()},i.prototype.divn=function(L){return this.clone().idivn(L)},i.prototype.egcd=function(L){a(0===L.negative),a(!L.isZero());var I=this,B=L.clone();I=0!==I.negative?I.umod(L):I.clone();for(var V=new i(1),Z=new i(0),Y=new i(0),ee=new i(1),J=0;I.isEven()&&B.isEven();)I.iushrn(1),B.iushrn(1),++J;for(var $=B.clone(),Q=I.clone();!I.isZero();){for(var se=0,j=1;0==(I.words[0]&j)&&se<26;++se,j<<=1);if(se>0)for(I.iushrn(se);se-- >0;)(V.isOdd()||Z.isOdd())&&(V.iadd($),Z.isub(Q)),V.iushrn(1),Z.iushrn(1);for(var G=0,W=1;0==(B.words[0]&W)&&G<26;++G,W<<=1);if(G>0)for(B.iushrn(G);G-- >0;)(Y.isOdd()||ee.isOdd())&&(Y.iadd($),ee.isub(Q)),Y.iushrn(1),ee.iushrn(1);I.cmp(B)>=0?(I.isub(B),V.isub(Y),Z.isub(ee)):(B.isub(I),Y.isub(V),ee.isub(Z))}return{a:Y,b:ee,gcd:B.iushln(J)}},i.prototype._invmp=function(L){a(0===L.negative),a(!L.isZero());var I=this,B=L.clone();I=0!==I.negative?I.umod(L):I.clone();for(var V,Z=new i(1),Y=new i(0),ee=B.clone();I.cmpn(1)>0&&B.cmpn(1)>0;){for(var J=0,$=1;0==(I.words[0]&$)&&J<26;++J,$<<=1);if(J>0)for(I.iushrn(J);J-- >0;)Z.isOdd()&&Z.iadd(ee),Z.iushrn(1);for(var Q=0,se=1;0==(B.words[0]&se)&&Q<26;++Q,se<<=1);if(Q>0)for(B.iushrn(Q);Q-- >0;)Y.isOdd()&&Y.iadd(ee),Y.iushrn(1);I.cmp(B)>=0?(I.isub(B),Z.isub(Y)):(B.isub(I),Y.isub(Z))}return(V=0===I.cmpn(1)?Z:Y).cmpn(0)<0&&V.iadd(L),V},i.prototype.gcd=function(L){if(this.isZero())return L.abs();if(L.isZero())return this.abs();var I=this.clone(),B=L.clone();I.negative=0,B.negative=0;for(var V=0;I.isEven()&&B.isEven();V++)I.iushrn(1),B.iushrn(1);for(;;){for(;I.isEven();)I.iushrn(1);for(;B.isEven();)B.iushrn(1);var Z=I.cmp(B);if(Z<0){var Y=I;I=B,B=Y}else if(0===Z||0===B.cmpn(1))break;I.isub(B)}return B.iushln(V)},i.prototype.invm=function(L){return this.egcd(L).a.umod(L)},i.prototype.isEven=function(){return 0==(1&this.words[0])},i.prototype.isOdd=function(){return 1==(1&this.words[0])},i.prototype.andln=function(L){return this.words[0]&L},i.prototype.bincn=function(L){a("number"==typeof L);var I=L%26,B=(L-I)/26,V=1<<I;if(this.length<=B)return this._expand(B+1),this.words[B]|=V,this;for(var Z=V,Y=B;0!==Z&&Y<this.length;Y++){var ee=0|this.words[Y];Z=(ee+=Z)>>>26,this.words[Y]=ee&=67108863}return 0!==Z&&(this.words[Y]=Z,this.length++),this},i.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},i.prototype.cmpn=function(L){var I,B=L<0;if(0!==this.negative&&!B)return-1;if(0===this.negative&&B)return 1;if(this.strip(),this.length>1)I=1;else{B&&(L=-L),a(L<=67108863,"Number is too big");var V=0|this.words[0];I=V===L?0:V<L?-1:1}return 0!==this.negative?0|-I:I},i.prototype.cmp=function(L){if(0!==this.negative&&0===L.negative)return-1;if(0===this.negative&&0!==L.negative)return 1;var I=this.ucmp(L);return 0!==this.negative?0|-I:I},i.prototype.ucmp=function(L){if(this.length>L.length)return 1;if(this.length<L.length)return-1;for(var I=0,B=this.length-1;B>=0;B--){var V=0|this.words[B],Z=0|L.words[B];if(V!==Z){V<Z?I=-1:V>Z&&(I=1);break}}return I},i.prototype.gtn=function(L){return 1===this.cmpn(L)},i.prototype.gt=function(L){return 1===this.cmp(L)},i.prototype.gten=function(L){return this.cmpn(L)>=0},i.prototype.gte=function(L){return this.cmp(L)>=0},i.prototype.ltn=function(L){return-1===this.cmpn(L)},i.prototype.lt=function(L){return-1===this.cmp(L)},i.prototype.lten=function(L){return this.cmpn(L)<=0},i.prototype.lte=function(L){return this.cmp(L)<=0},i.prototype.eqn=function(L){return 0===this.cmpn(L)},i.prototype.eq=function(L){return 0===this.cmp(L)},i.red=function(L){return new F(L)},i.prototype.toRed=function(L){return a(!this.red,"Already a number in reduction context"),a(0===this.negative,"red works only with positives"),L.convertTo(this)._forceRed(L)},i.prototype.fromRed=function(){return a(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},i.prototype._forceRed=function(L){return this.red=L,this},i.prototype.forceRed=function(L){return a(!this.red,"Already a number in reduction context"),this._forceRed(L)},i.prototype.redAdd=function(L){return a(this.red,"redAdd works only with red numbers"),this.red.add(this,L)},i.prototype.redIAdd=function(L){return a(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,L)},i.prototype.redSub=function(L){return a(this.red,"redSub works only with red numbers"),this.red.sub(this,L)},i.prototype.redISub=function(L){return a(this.red,"redISub works only with red numbers"),this.red.isub(this,L)},i.prototype.redShl=function(L){return a(this.red,"redShl works only with red numbers"),this.red.shl(this,L)},i.prototype.redMul=function(L){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,L),this.red.mul(this,L)},i.prototype.redIMul=function(L){return a(this.red,"redMul works only with red numbers"),this.red._verify2(this,L),this.red.imul(this,L)},i.prototype.redSqr=function(){return a(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},i.prototype.redISqr=function(){return a(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},i.prototype.redSqrt=function(){return a(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},i.prototype.redInvm=function(){return a(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},i.prototype.redNeg=function(){return a(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},i.prototype.redPow=function(L){return a(this.red&&!L.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,L)};var M={k256:null,p224:null,p192:null,p25519:null};function A(L,I){this.name=L,this.p=new i(I,16),this.n=this.p.bitLength(),this.k=new i(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function k(){A.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function C(){A.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function P(){A.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function D(){A.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function F(L){if("string"==typeof L){var I=i._prime(L);this.m=I.p,this.prime=I}else a(L.gtn(1),"modulus must be greater than 1"),this.m=L,this.prime=null}function R(L){F.call(this,L),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new i(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}A.prototype._tmp=function(){var L=new i(null);return L.words=new Array(Math.ceil(this.n/13)),L},A.prototype.ireduce=function(L){var I,B=L;do{this.split(B,this.tmp),I=(B=(B=this.imulK(B)).iadd(this.tmp)).bitLength()}while(I>this.n);var V=I<this.n?-1:B.ucmp(this.p);return 0===V?(B.words[0]=0,B.length=1):V>0?B.isub(this.p):void 0!==B.strip?B.strip():B._strip(),B},A.prototype.split=function(L,I){L.iushrn(this.n,0,I)},A.prototype.imulK=function(L){return L.imul(this.k)},l(k,A),k.prototype.split=function(L,I){for(var B=Math.min(L.length,9),V=0;V<B;V++)I.words[V]=L.words[V];if(I.length=B,L.length<=9)return L.words[0]=0,void(L.length=1);var Z=L.words[9];for(I.words[I.length++]=4194303&Z,V=10;V<L.length;V++){var Y=0|L.words[V];L.words[V-10]=(4194303&Y)<<4|Z>>>22,Z=Y}L.words[V-10]=Z>>>=22,L.length-=0===Z&&L.length>10?10:9},k.prototype.imulK=function(L){L.words[L.length]=0,L.words[L.length+1]=0,L.length+=2;for(var I=0,B=0;B<L.length;B++){var V=0|L.words[B];L.words[B]=67108863&(I+=977*V),I=64*V+(I/67108864|0)}return 0===L.words[L.length-1]&&(L.length--,0===L.words[L.length-1]&&L.length--),L},l(C,A),l(P,A),l(D,A),D.prototype.imulK=function(L){for(var I=0,B=0;B<L.length;B++){var V=19*(0|L.words[B])+I,Z=67108863&V;V>>>=26,L.words[B]=Z,I=V}return 0!==I&&(L.words[L.length++]=I),L},i._prime=function(L){if(M[L])return M[L];var I;if("k256"===L)I=new k;else if("p224"===L)I=new C;else if("p192"===L)I=new P;else{if("p25519"!==L)throw new Error("Unknown prime "+L);I=new D}return M[L]=I,I},F.prototype._verify1=function(L){a(0===L.negative,"red works only with positives"),a(L.red,"red works only with red numbers")},F.prototype._verify2=function(L,I){a(0==(L.negative|I.negative),"red works only with positives"),a(L.red&&L.red===I.red,"red works only with red numbers")},F.prototype.imod=function(L){return this.prime?this.prime.ireduce(L)._forceRed(this):L.umod(this.m)._forceRed(this)},F.prototype.neg=function(L){return L.isZero()?L.clone():this.m.sub(L)._forceRed(this)},F.prototype.add=function(L,I){this._verify2(L,I);var B=L.add(I);return B.cmp(this.m)>=0&&B.isub(this.m),B._forceRed(this)},F.prototype.iadd=function(L,I){this._verify2(L,I);var B=L.iadd(I);return B.cmp(this.m)>=0&&B.isub(this.m),B},F.prototype.sub=function(L,I){this._verify2(L,I);var B=L.sub(I);return B.cmpn(0)<0&&B.iadd(this.m),B._forceRed(this)},F.prototype.isub=function(L,I){this._verify2(L,I);var B=L.isub(I);return B.cmpn(0)<0&&B.iadd(this.m),B},F.prototype.shl=function(L,I){return this._verify1(L),this.imod(L.ushln(I))},F.prototype.imul=function(L,I){return this._verify2(L,I),this.imod(L.imul(I))},F.prototype.mul=function(L,I){return this._verify2(L,I),this.imod(L.mul(I))},F.prototype.isqr=function(L){return this.imul(L,L.clone())},F.prototype.sqr=function(L){return this.mul(L,L)},F.prototype.sqrt=function(L){if(L.isZero())return L.clone();var I=this.m.andln(3);if(a(I%2==1),3===I){var B=this.m.add(new i(1)).iushrn(2);return this.pow(L,B)}for(var V=this.m.subn(1),Z=0;!V.isZero()&&0===V.andln(1);)Z++,V.iushrn(1);a(!V.isZero());var Y=new i(1).toRed(this),ee=Y.redNeg(),J=this.m.subn(1).iushrn(1),$=this.m.bitLength();for($=new i(2*$*$).toRed(this);0!==this.pow($,J).cmp(ee);)$.redIAdd(ee);for(var Q=this.pow($,V),se=this.pow(L,V.addn(1).iushrn(1)),j=this.pow(L,V),G=Z;0!==j.cmp(Y);){for(var W=j,ie=0;0!==W.cmp(Y);ie++)W=W.redSqr();a(ie<G);var q=this.pow(Q,new i(1).iushln(G-ie-1));se=se.redMul(q),Q=q.redSqr(),j=j.redMul(Q),G=ie}return se},F.prototype.invm=function(L){var I=L._invmp(this.m);return 0!==I.negative?(I.negative=0,this.imod(I).redNeg()):this.imod(I)},F.prototype.pow=function(L,I){if(I.isZero())return new i(1).toRed(this);if(0===I.cmpn(1))return L.clone();var B=new Array(16);B[0]=new i(1).toRed(this),B[1]=L;for(var V=2;V<B.length;V++)B[V]=this.mul(B[V-1],L);var Z=B[0],Y=0,ee=0,J=I.bitLength()%26;for(0===J&&(J=26),V=I.length-1;V>=0;V--){for(var $=I.words[V],Q=J-1;Q>=0;Q--){var se=$>>Q&1;Z!==B[0]&&(Z=this.sqr(Z)),0!==se||0!==Y?(Y<<=1,Y|=se,(4==++ee||0===V&&0===Q)&&(Z=this.mul(Z,B[Y]),ee=0,Y=0)):ee=0}J=26}return Z},F.prototype.convertTo=function(L){var I=L.umod(this.m);return I===L?I.clone():I},F.prototype.convertFrom=function(L){var I=L.clone();return I.red=null,I},i.mont=function(L){return new R(L)},l(R,F),R.prototype.convertTo=function(L){return this.imod(L.ushln(this.shift))},R.prototype.convertFrom=function(L){var I=this.imod(L.mul(this.rinv));return I.red=null,I},R.prototype.imul=function(L,I){if(L.isZero()||I.isZero())return L.words[0]=0,L.length=1,L;var B=L.imul(I),V=B.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Z=B.isub(V).iushrn(this.shift),Y=Z;return Z.cmp(this.m)>=0?Y=Z.isub(this.m):Z.cmpn(0)<0&&(Y=Z.iadd(this.m)),Y._forceRed(this)},R.prototype.mul=function(L,I){if(L.isZero()||I.isZero())return new i(0)._forceRed(this);var B=L.mul(I),V=B.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),Z=B.isub(V).iushrn(this.shift),Y=Z;return Z.cmp(this.m)>=0?Y=Z.isub(this.m):Z.cmpn(0)<0&&(Y=Z.iadd(this.m)),Y._forceRed(this)},R.prototype.invm=function(L){return this.imod(L._invmp(this.m).mul(this.r2))._forceRed(this)}}(void 0===T||T,this)},{buffer:2}],34:[function(x,T,b){"use strict";T.exports=function(e){var o,a,l,i=e.length,d=0;for(o=0;o<i;++o)d+=e[o].length;var u=new Array(d),s=0;for(o=0;o<i;++o){var c=e[o],h=c.length;for(a=0;a<h;++a){var p=u[s++]=new Array(h-1),v=0;for(l=0;l<h;++l)l!==a&&(p[v++]=c[l]);if(1&a){var g=p[1];p[1]=p[0],p[0]=g}}}return u}},{}],35:[function(x,T,b){"use strict";T.exports=function(p,v,g){switch(arguments.length){case 1:return c(p);case 2:return"function"==typeof v?u(p,p,v,!0):h(p,v);case 3:return u(p,v,g,!1);default:throw new Error("box-intersect: Invalid arguments")}};var e,o=x("typedarray-pool"),a=x("./lib/sweep"),l=x("./lib/intersect");function i(p,v){for(var g=0;g<p;++g)if(!(v[g]<=v[g+p]))return!0;return!1}function d(p,v,g,f){for(var w=0,y=0,M=0,A=p.length;M<A;++M){var k=p[M];if(!i(v,k)){for(var C=0;C<2*v;++C)g[w++]=k[C];f[y++]=M}}return y}function u(p,v,g,f){var w=p.length,y=v.length;if(!(w<=0||y<=0)){var M=p[0].length>>>1;if(!(M<=0)){var A,k=o.mallocDouble(2*M*w),C=o.mallocInt32(w);if((w=d(p,M,k,C))>0){if(1===M&&f)a.init(w),A=a.sweepComplete(M,g,0,w,k,C,0,w,k,C);else{var P=o.mallocDouble(2*M*y),D=o.mallocInt32(y);(y=d(v,M,P,D))>0&&(a.init(w+y),A=1===M?a.sweepBipartite(M,g,0,w,k,C,0,y,P,D):l(M,g,f,w,k,C,y,P,D),o.free(P),o.free(D))}o.free(k),o.free(C)}return A}}}function s(p,v){e.push([p,v])}function c(p){return e=[],u(p,p,s,!0),e}function h(p,v){return e=[],u(p,v,s,!1),e}},{"./lib/intersect":37,"./lib/sweep":41,"typedarray-pool":308}],36:[function(x,T,b){"use strict";function e(o){return o?function(a,l,i,d,u,s,c,h,p,v,g){return u-d>p-h?function(f,w,y,M,A,k,C,P,D,F,R){for(var L=2*f,I=M,B=L*M;I<A;++I,B+=L){var V=k[w+B],Z=k[w+B+f],Y=C[I];e:for(var ee=P,J=L*P;ee<D;++ee,J+=L){var se=R[ee];if(!(F[w+J+f]<V||Z<F[w+J])){for(var j=w+1;j<f;++j)if(k[j+f+B]<F[j+J]||F[j+f+J]<k[j+B])continue e;var te=y(Y,se);if(void 0!==te)return te}}}}(a,l,i,d,u,s,c,h,p,v,g):function(f,w,y,M,A,k,C,P,D,F,R){for(var L=2*f,I=P,B=L*P;I<D;++I,B+=L){var V=F[w+B],Z=F[w+B+f],Y=R[I];e:for(var ee=M,J=L*M;ee<A;++ee,J+=L){var se=C[ee];if(!(Z<k[w+J]||k[w+J+f]<V)){for(var j=w+1;j<f;++j)if(k[j+f+J]<F[j+B]||F[j+f+B]<k[j+J])continue e;var te=y(se,Y);if(void 0!==te)return te}}}}(a,l,i,d,u,s,c,h,p,v,g)}:function(a,l,i,d,u,s,c,h,p,v,g,f){return s-u>v-p?d?function(w,y,M,A,k,C,P,D,F,R,L){for(var I=2*w,B=A,V=I*A;B<k;++B,V+=I){var Z=C[y+V],Y=C[y+V+w],ee=P[B];e:for(var J=D,$=I*D;J<F;++J,$+=I){var Q=R[y+$],se=L[J];if(!(Q<=Z||Y<Q)){for(var j=y+1;j<w;++j)if(C[j+w+V]<R[j+$]||R[j+w+$]<C[j+V])continue e;var te=M(se,ee);if(void 0!==te)return te}}}}(a,l,i,u,s,c,h,p,v,g,f):function(w,y,M,A,k,C,P,D,F,R,L){for(var I=2*w,B=A,V=I*A;B<k;++B,V+=I){var Z=C[y+V],Y=C[y+V+w],ee=P[B];e:for(var J=D,$=I*D;J<F;++J,$+=I){var Q=R[y+$],se=L[J];if(!(Q<Z||Y<Q)){for(var j=y+1;j<w;++j)if(C[j+w+V]<R[j+$]||R[j+w+$]<C[j+V])continue e;var te=M(ee,se);if(void 0!==te)return te}}}}(a,l,i,u,s,c,h,p,v,g,f):d?function(w,y,M,A,k,C,P,D,F,R,L){for(var I=2*w,B=D,V=I*D;B<F;++B,V+=I){var Z=R[y+V],Y=L[B];e:for(var ee=A,J=I*A;ee<k;++ee,J+=I){var se=P[ee];if(!(Z<=C[y+J]||C[y+J+w]<Z)){for(var j=y+1;j<w;++j)if(C[j+w+J]<R[j+V]||R[j+w+V]<C[j+J])continue e;var te=M(Y,se);if(void 0!==te)return te}}}}(a,l,i,u,s,c,h,p,v,g,f):function(w,y,M,A,k,C,P,D,F,R,L){for(var I=2*w,B=D,V=I*D;B<F;++B,V+=I){var Z=R[y+V],Y=L[B];e:for(var ee=A,J=I*A;ee<k;++ee,J+=I){var se=P[ee];if(!(Z<C[y+J]||C[y+J+w]<Z)){for(var j=y+1;j<w;++j)if(C[j+w+J]<R[j+V]||R[j+w+V]<C[j+J])continue e;var te=M(se,Y);if(void 0!==te)return te}}}}(a,l,i,u,s,c,h,p,v,g,f)}}b.partial=e(!1),b.full=e(!0)},{}],37:[function(x,T,b){"use strict";T.exports=function(C,P,D,F,R,L,I,B,V){!function(Le,Ee){var Pe=8*o.log2(Ee+1)*(Le+1)|0,je=o.nextPow2(6*Pe);w.length<je&&(e.free(w),w=e.mallocInt32(je));var Ge=o.nextPow2(2*Pe);y.length<Ge&&(e.free(y),y=e.mallocDouble(Ge))}(C,F+I);var Z,Y=0,ee=2*C;for(M(Y++,0,0,F,0,I,D?16:0,-1/0,1/0),D||M(Y++,0,0,I,0,F,1,-1/0,1/0);Y>0;){var J=6*(Y-=1),$=w[J],Q=w[J+1],se=w[J+2],j=w[J+3],G=w[J+4],W=w[J+5],ie=2*Y,q=y[ie],te=y[ie+1],ne=1&W,le=!!(16&W),ue=R,de=L,he=B,be=V;if(ne&&(ue=B,de=V,he=R,be=L),!(2&W&&(se=p(C,$,Q,se,ue,de,te),Q>=se)||4&W&&(Q=v(C,$,Q,se,ue,de,q))>=se)){var ge=se-Q,we=G-j;if(le){if(C*ge*(ge+we)<1<<22){if(void 0!==(Z=d.scanComplete(C,$,P,Q,se,ue,de,j,G,he,be)))return Z;continue}}else{if(C*Math.min(ge,we)<128){if(void 0!==(Z=l(C,$,P,ne,Q,se,ue,de,j,G,he,be)))return Z;continue}if(C*ge*we<1<<22){if(void 0!==(Z=d.scanBipartite(C,$,P,ne,Q,se,ue,de,j,G,he,be)))return Z;continue}}var Ce=c(C,$,Q,se,ue,de,q,te);if(Q<Ce)if(C*(Ce-Q)<128){if(void 0!==(Z=i(C,$+1,P,Q,Ce,ue,de,j,G,he,be)))return Z}else if($===C-2){if(void 0!==(Z=ne?d.sweepBipartite(C,P,j,G,he,be,Q,Ce,ue,de):d.sweepBipartite(C,P,Q,Ce,ue,de,j,G,he,be)))return Z}else M(Y++,$+1,Q,Ce,j,G,ne,-1/0,1/0),M(Y++,$+1,j,G,Q,Ce,1^ne,-1/0,1/0);if(Ce<se){var De=u(C,$,j,G,he,be),Se=he[ee*De+$],Fe=h(C,$,De,G,he,be,Se);if(Fe<G&&M(Y++,$,Ce,se,Fe,G,(4|ne)+(le?16:0),Se,te),j<De&&M(Y++,$,Ce,se,j,De,(2|ne)+(le?16:0),q,Se),De+1===Fe){if(void 0!==(Z=le?k(C,$,P,Ce,se,ue,de,De,he,be[De]):A(C,$,P,ne,Ce,se,ue,de,De,he,be[De])))return Z}else if(De<Fe){var ve;if(le){if(Ce<(ve=g(C,$,Ce,se,ue,de,Se))){var Te=h(C,$,Ce,ve,ue,de,Se);if($===C-2){if(Ce<Te&&void 0!==(Z=d.sweepComplete(C,P,Ce,Te,ue,de,De,Fe,he,be))||Te<ve&&void 0!==(Z=d.sweepBipartite(C,P,Te,ve,ue,de,De,Fe,he,be)))return Z}else Ce<Te&&M(Y++,$+1,Ce,Te,De,Fe,16,-1/0,1/0),Te<ve&&(M(Y++,$+1,Te,ve,De,Fe,0,-1/0,1/0),M(Y++,$+1,De,Fe,Te,ve,1,-1/0,1/0))}}else Ce<(ve=ne?f(C,$,Ce,se,ue,de,Se):g(C,$,Ce,se,ue,de,Se))&&($===C-2?Z=ne?d.sweepBipartite(C,P,De,Fe,he,be,Ce,ve,ue,de):d.sweepBipartite(C,P,Ce,ve,ue,de,De,Fe,he,be):(M(Y++,$+1,Ce,ve,De,Fe,ne,-1/0,1/0),M(Y++,$+1,De,Fe,Ce,ve,1^ne,-1/0,1/0)))}}}}};var e=x("typedarray-pool"),o=x("bit-twiddle"),a=x("./brute"),l=a.partial,i=a.full,d=x("./sweep"),u=x("./median"),s=x("./partition"),c=s("!(lo>=p0)&&!(p1>=hi)"),h=s("lo===p0"),p=s("lo<p0"),v=s("hi<=p0"),g=s("lo<=p0&&p0<=hi"),f=s("lo<p0&&p0<=hi"),w=e.mallocInt32(1024),y=e.mallocDouble(1024);function M(C,P,D,F,R,L,I,B,V){var Z=6*C;w[Z]=P,w[Z+1]=D,w[Z+2]=F,w[Z+3]=R,w[Z+4]=L,w[Z+5]=I;var Y=2*C;y[Y]=B,y[Y+1]=V}function A(C,P,D,F,R,L,I,B,V,Z,Y){var ee=2*C,J=V*ee,$=Z[J+P];e:for(var Q=R,se=R*ee;Q<L;++Q,se+=ee){var j=I[se+P],G=I[se+P+C];if(!($<j||G<$||F&&$===j)){for(var W,ie=B[Q],q=P+1;q<C;++q)if(j=I[se+q],(G=I[se+q+C])<Z[J+q]||Z[J+q+C]<j)continue e;if(void 0!==(W=F?D(Y,ie):D(ie,Y)))return W}}}function k(C,P,D,F,R,L,I,B,V,Z){var Y=2*C,ee=B*Y,J=V[ee+P];e:for(var $=F,Q=F*Y;$<R;++$,Q+=Y){var se=I[$];if(se!==Z){var j=L[Q+P],G=L[Q+P+C];if(!(J<j||G<J)){for(var W=P+1;W<C;++W)if(j=L[Q+W],(G=L[Q+W+C])<V[ee+W]||V[ee+W+C]<j)continue e;var te=D(se,Z);if(void 0!==te)return te}}}}},{"./brute":36,"./median":38,"./partition":39,"./sweep":41,"bit-twiddle":32,"typedarray-pool":308}],38:[function(x,T,b){"use strict";T.exports=function(a,l,i,d,u,s){if(d<=i+1)return i;for(var c=i,h=d,p=d+i>>>1,v=2*a,g=p,f=u[v*p+l];c<h;){if(h-c<8){o(a,l,c,h,u,s),f=u[v*p+l];break}var w=h-c,y=Math.random()*w+c|0,M=u[v*y+l],A=Math.random()*w+c|0,k=u[v*A+l],C=Math.random()*w+c|0,P=u[v*C+l];M<=k?P>=k?(g=A,f=k):M>=P?(g=y,f=M):(g=C,f=P):k>=P?(g=A,f=k):P>=M?(g=y,f=M):(g=C,f=P);for(var D=v*(h-1),F=v*g,R=0;R<v;++R,++D,++F){var L=u[D];u[D]=u[F],u[F]=L}var I=s[h-1];for(s[h-1]=s[g],s[g]=I,D=v*(h-1),F=v*(g=e(a,l,c,h-1,u,s,f)),R=0;R<v;++R,++D,++F)L=u[D],u[D]=u[F],u[F]=L;if(I=s[h-1],s[h-1]=s[g],s[g]=I,p<g){for(h=g-1;c<h&&u[v*(h-1)+l]===f;)h-=1;h+=1}else{if(!(g<p))break;for(c=g+1;c<h&&u[v*c+l]===f;)c+=1}}return e(a,l,i,p,u,s,u[v*p+l])};var e=x("./partition")("lo<p0");function o(a,l,i,d,u,s){for(var c=2*a,h=c*(i+1)+l,p=i+1;p<d;++p,h+=c)for(var v=u[h],g=p,f=c*(p-1);g>i&&u[f+l]>v;--g,f-=c){for(var w=f,y=f+c,M=0;M<c;++M,++w,++y){var A=u[w];u[w]=u[y],u[y]=A}var k=s[g];s[g]=s[g-1],s[g-1]=k}}},{"./partition":39}],39:[function(x,T,b){"use strict";T.exports=function(o){return e[o]};var e={"lo===p0":function(o,a,l,i,d,u,s){for(var c=2*o,h=c*l,p=h,v=l,g=a,f=l;i>f;++f,h+=c)if(d[h+g]===s)if(v===f)v+=1,p+=c;else{for(var w=0;c>w;++w){var y=d[h+w];d[h+w]=d[p],d[p++]=y}var M=u[f];u[f]=u[v],u[v++]=M}return v},"lo<p0":function(o,a,l,i,d,u,s){for(var c=2*o,h=c*l,p=h,v=l,g=a,f=l;i>f;++f,h+=c)if(d[h+g]<s)if(v===f)v+=1,p+=c;else{for(var w=0;c>w;++w){var y=d[h+w];d[h+w]=d[p],d[p++]=y}var M=u[f];u[f]=u[v],u[v++]=M}return v},"lo<=p0":function(o,a,l,i,d,u,s){for(var c=2*o,h=c*l,p=h,v=l,g=o+a,f=l;i>f;++f,h+=c)if(d[h+g]<=s)if(v===f)v+=1,p+=c;else{for(var w=0;c>w;++w){var y=d[h+w];d[h+w]=d[p],d[p++]=y}var M=u[f];u[f]=u[v],u[v++]=M}return v},"hi<=p0":function(o,a,l,i,d,u,s){for(var c=2*o,h=c*l,p=h,v=l,g=o+a,f=l;i>f;++f,h+=c)if(d[h+g]<=s)if(v===f)v+=1,p+=c;else{for(var w=0;c>w;++w){var y=d[h+w];d[h+w]=d[p],d[p++]=y}var M=u[f];u[f]=u[v],u[v++]=M}return v},"lo<p0&&p0<=hi":function(o,a,l,i,d,u,s){for(var c=2*o,h=c*l,p=h,v=l,g=a,f=o+a,w=l;i>w;++w,h+=c)if(d[h+g]<s&&s<=d[h+f])if(v===w)v+=1,p+=c;else{for(var A=0;c>A;++A){var k=d[h+A];d[h+A]=d[p],d[p++]=k}var C=u[w];u[w]=u[v],u[v++]=C}return v},"lo<=p0&&p0<=hi":function(o,a,l,i,d,u,s){for(var c=2*o,h=c*l,p=h,v=l,g=a,f=o+a,w=l;i>w;++w,h+=c)if(d[h+g]<=s&&s<=d[h+f])if(v===w)v+=1,p+=c;else{for(var A=0;c>A;++A){var k=d[h+A];d[h+A]=d[p],d[p++]=k}var C=u[w];u[w]=u[v],u[v++]=C}return v},"!(lo>=p0)&&!(p1>=hi)":function(o,a,l,i,d,u,s,c){for(var h=2*o,p=h*l,v=p,g=l,f=a,w=o+a,y=l;i>y;++y,p+=h)if(!(d[p+f]>=s||c>=d[p+w]))if(g===y)g+=1,v+=h;else{for(var k=0;h>k;++k){var C=d[p+k];d[p+k]=d[v],d[v++]=C}var P=u[y];u[y]=u[g],u[g++]=P}return g}}},{}],40:[function(x,T,b){"use strict";function e(s,c,h){for(var p=2*(s+1),v=s+1;v<=c;++v){for(var g=h[p++],f=h[p++],w=v,y=p-2;w-- >s;){var M=h[y-2],A=h[y-1];if(M<g||M===g&&A<f)break;h[y]=M,h[y+1]=A,y-=2}h[y]=g,h[y+1]=f}}function o(s,c,h){var p=h[s*=2],v=h[s+1];h[s]=h[c*=2],h[s+1]=h[c+1],h[c]=p,h[c+1]=v}function a(s,c,h){h[s*=2]=h[c*=2],h[s+1]=h[c+1]}function l(s,c,h,p){h*=2;var v=p[s*=2],g=p[s+1];p[s]=p[c*=2],p[s+1]=p[c+1],p[c]=p[h],p[c+1]=p[h+1],p[h]=v,p[h+1]=g}function i(s,c,h,p,v){v[s*=2]=v[c*=2],v[c]=h,v[s+1]=v[c+1],v[c+1]=p}function d(s,c,h){var p=h[s*=2],v=h[c*=2];return!(p<v)&&(p!==v||h[s+1]>h[c+1])}function u(s,c,h,p){var v=p[s*=2];return v<c||v===c&&p[s+1]<h}T.exports=function(s,c){c<=128?e(0,c-1,s):function h(p,v,g){var f=(v-p+1)/6|0,w=p+f,y=v-f,M=p+v>>1,A=M-f,k=M+f,C=w,P=A,D=M,F=k,R=y,L=p+1,I=v-1,B=0;d(C,P,g)&&(B=C,C=P,P=B),d(F,R,g)&&(B=F,F=R,R=B),d(C,D,g)&&(B=C,C=D,D=B),d(P,D,g)&&(B=P,P=D,D=B),d(C,F,g)&&(B=C,C=F,F=B),d(D,F,g)&&(B=D,D=F,F=B),d(P,R,g)&&(B=P,P=R,R=B),d(P,D,g)&&(B=P,P=D,D=B),d(F,R,g)&&(B=F,F=R,R=B);for(var V=g[2*P],Z=g[2*P+1],Y=g[2*F],ee=g[2*F+1],J=2*C,$=2*D,Q=2*R,se=2*w,j=2*M,G=2*y,W=0;W<2;++W){var q=g[$+W],te=g[Q+W];g[se+W]=g[J+W],g[j+W]=q,g[G+W]=te}a(A,p,g),a(k,v,g);for(var ne=L;ne<=I;++ne)if(u(ne,V,Z,g))ne!==L&&o(ne,L,g),++L;else if(!u(ne,Y,ee,g))for(;;){if(u(I,Y,ee,g)){u(I,V,Z,g)?(l(ne,L,I,g),++L,--I):(o(ne,I,g),--I);break}if(--I<ne)break}i(p,L-1,V,Z,g),i(v,I+1,Y,ee,g),L-2-p<=32?e(p,L-2,g):h(p,L-2,g),v-(I+2)<=32?e(I+2,v,g):h(I+2,v,g),I-L<=32?e(L,I,g):h(L,I,g)}(0,c-1,s)}},{}],41:[function(x,T,b){"use strict";T.exports={init:function(g){var f=o.nextPow2(g);l.length<f&&(e.free(l),l=e.mallocInt32(f)),i.length<f&&(e.free(i),i=e.mallocInt32(f)),d.length<f&&(e.free(d),d=e.mallocInt32(f)),u.length<f&&(e.free(u),u=e.mallocInt32(f)),s.length<f&&(e.free(s),s=e.mallocInt32(f)),c.length<f&&(e.free(c),c=e.mallocInt32(f));var w=8*f;h.length<w&&(e.free(h),h=e.mallocDouble(w))},sweepBipartite:function(g,f,w,y,M,A,k,C,P,D){for(var F=0,R=2*g,L=g-1,I=R-1,B=w;B<y;++B){var V=A[B],Z=R*B;h[F++]=M[Z+L],h[F++]=-(V+1),h[F++]=M[Z+I],h[F++]=V}for(B=k;B<C;++B){V=D[B]+(1<<28);var Y=R*B;h[F++]=P[Y+L],h[F++]=-V,h[F++]=P[Y+I],h[F++]=V}var ee=F>>>1;a(h,ee);var J=0,$=0;for(B=0;B<ee;++B){var Q=0|h[2*B+1];if(Q>=1<<28)p(d,u,$--,Q=Q-(1<<28)|0);else if(Q>=0)p(l,i,J--,Q);else if(Q<=-(1<<28)){Q=-Q-(1<<28)|0;for(var se=0;se<J;++se)if(void 0!==(j=f(l[se],Q)))return j;v(d,u,$++,Q)}else{for(Q=-Q-1|0,se=0;se<$;++se){var j;if(void 0!==(j=f(Q,d[se])))return j}v(l,i,J++,Q)}}},sweepComplete:function(g,f,w,y,M,A,k,C,P,D){for(var F=0,R=2*g,L=g-1,I=R-1,B=w;B<y;++B){var V=A[B]+1<<1,Z=R*B;h[F++]=M[Z+L],h[F++]=-V,h[F++]=M[Z+I],h[F++]=V}for(B=k;B<C;++B){V=D[B]+1<<1;var Y=R*B;h[F++]=P[Y+L],h[F++]=1|-V,h[F++]=P[Y+I],h[F++]=1|V}var ee=F>>>1;a(h,ee);var J=0,$=0,Q=0;for(B=0;B<ee;++B){var se=0|h[2*B+1],j=1&se;if(B<ee-1&&se>>1==h[2*B+3]>>1&&(j=2,B+=1),se<0){for(var G=-(se>>1)-1,W=0;W<Q;++W)if(void 0!==(ie=f(s[W],G)))return ie;if(0!==j)for(W=0;W<J;++W)if(void 0!==(ie=f(l[W],G)))return ie;if(1!==j)for(W=0;W<$;++W){var ie;if(void 0!==(ie=f(d[W],G)))return ie}0===j?v(l,i,J++,G):1===j?v(d,u,$++,G):2===j&&v(s,c,Q++,G)}else G=(se>>1)-1,0===j?p(l,i,J--,G):1===j?p(d,u,$--,G):2===j&&p(s,c,Q--,G)}},scanBipartite:function(g,f,w,y,M,A,k,C,P,D,F,R){var L=0,I=2*g,B=f,V=f+g,Z=1,Y=1;y?Y=1<<28:Z=1<<28;for(var ee=M;ee<A;++ee){var J=ee+Z,$=I*ee;h[L++]=k[$+B],h[L++]=-J,h[L++]=k[$+V],h[L++]=J}for(ee=P;ee<D;++ee)J=ee+Y,h[L++]=F[I*ee+B],h[L++]=-J;var se=L>>>1;a(h,se);var j=0;for(ee=0;ee<se;++ee){var G=0|h[2*ee+1];if(G<0){var W=!1;if((J=-G)>=1<<28?(W=!y,J-=1<<28):(W=!!y,J-=1),W)v(l,i,j++,J);else{var ie=R[J],q=I*J,te=F[q+f+1],ne=F[q+f+1+g];e:for(var le=0;le<j;++le){var ue=l[le],de=I*ue;if(!(ne<k[de+f+1]||k[de+f+1+g]<te)){for(var he=f+2;he<g;++he)if(F[q+he+g]<k[de+he]||k[de+he+g]<F[q+he])continue e;var be,ge=C[ue];if(void 0!==(be=y?w(ie,ge):w(ge,ie)))return be}}}}else p(l,i,j--,G-Z)}},scanComplete:function(g,f,w,y,M,A,k,C,P,D,F){for(var R=0,L=2*g,I=f,B=f+g,V=y;V<M;++V){var Z=V+(1<<28),Y=L*V;h[R++]=A[Y+I],h[R++]=-Z,h[R++]=A[Y+B],h[R++]=Z}for(V=C;V<P;++V)Z=V+1,h[R++]=D[L*V+I],h[R++]=-Z;var J=R>>>1;a(h,J);var $=0;for(V=0;V<J;++V){var Q=0|h[2*V+1];if(Q<0)if((Z=-Q)>=1<<28)l[$++]=Z-(1<<28);else{var se=F[Z-=1],j=L*Z,G=D[j+f+1],W=D[j+f+1+g];e:for(var ie=0;ie<$;++ie){var q=l[ie],te=k[q];if(te===se)break;var ne=L*q;if(!(W<A[ne+f+1]||A[ne+f+1+g]<G)){for(var le=f+2;le<g;++le)if(D[j+le+g]<A[ne+le]||A[ne+le+g]<D[j+le])continue e;var ue=w(te,se);if(void 0!==ue)return ue}}}else{for(Z=Q-(1<<28),ie=$-1;ie>=0;--ie)if(l[ie]===Z){for(le=ie+1;le<$;++le)l[le-1]=l[le];break}--$}}}};var e=x("typedarray-pool"),o=x("bit-twiddle"),a=x("./sort"),l=e.mallocInt32(1024),i=e.mallocInt32(1024),d=e.mallocInt32(1024),u=e.mallocInt32(1024),s=e.mallocInt32(1024),c=e.mallocInt32(1024),h=e.mallocDouble(8192);function p(g,f,w,y){var M=f[y],A=g[w-1];g[M]=A,f[A]=M}function v(g,f,w,y){g[w]=y,f[y]=w}},{"./sort":40,"bit-twiddle":32,"typedarray-pool":308}],42:[function(x,T,b){"use strict";var e=x("./lib/monotone"),o=x("./lib/triangulation"),a=x("./lib/delaunay"),l=x("./lib/filter");function i(s){return[Math.min(s[0],s[1]),Math.max(s[0],s[1])]}function d(s,c){return s[0]-c[0]||s[1]-c[1]}function u(s,c,h){return c in s?s[c]:h}T.exports=function(s,c,h){Array.isArray(c)?(h=h||{},c=c||[]):(h=c||{},c=[]);var p=!!u(h,"delaunay",!0),v=!!u(h,"interior",!0),g=!!u(h,"exterior",!0),f=!!u(h,"infinity",!1);if(!v&&!g||0===s.length)return[];var w=e(s,c);if(p||v!==g||f){for(var y=o(s.length,c.map(i).sort(d)),M=0;M<w.length;++M){var A=w[M];y.addTriangle(A[0],A[1],A[2])}return p&&a(s,y),g?v?f?l(y,0,f):y.cells():l(y,1,f):l(y,-1)}return w}},{"./lib/delaunay":43,"./lib/filter":44,"./lib/monotone":45,"./lib/triangulation":46}],43:[function(x,T,b){"use strict";var e=x("robust-in-sphere")[4];function o(a,l,i,d,u,s){var c=l.opposite(d,u);if(!(c<0)){if(u<d){var h=d;d=u,u=h,h=s,s=c,c=h}l.isConstraint(d,u)||e(a[d],a[u],a[s],a[c])<0&&i.push(d,u)}}x("binary-search-bounds"),T.exports=function(a,l){for(var i=[],d=a.length,u=l.stars,s=0;s<d;++s)for(var c=u[s],h=1;h<c.length;h+=2)if(!((f=c[h])<s||l.isConstraint(s,f))){for(var p=c[h-1],v=-1,g=1;g<c.length;g+=2)if(c[g-1]===f){v=c[g];break}v<0||e(a[s],a[f],a[p],a[v])<0&&i.push(s,f)}for(;i.length>0;){for(var f=i.pop(),w=(p=-1,v=-1,c=u[s=i.pop()],1);w<c.length;w+=2){var y=c[w-1],M=c[w];y===f?v=M:M===f&&(p=y)}p<0||v<0||e(a[s],a[f],a[p],a[v])>=0||(l.flip(s,f),o(a,l,i,p,s,v),o(a,l,i,s,v,p),o(a,l,i,v,f,p),o(a,l,i,f,p,v))}}},{"binary-search-bounds":31,"robust-in-sphere":282}],44:[function(x,T,b){"use strict";var e,o=x("binary-search-bounds");function a(i,d,u,s,c,h,p){this.cells=i,this.neighbor=d,this.flags=s,this.constraint=u,this.active=c,this.next=h,this.boundary=p}function l(i,d){return i[0]-d[0]||i[1]-d[1]||i[2]-d[2]}T.exports=function(i,d,u){var s=function(P,D){for(var F=P.cells(),R=F.length,L=0;L<R;++L){var I=(j=F[L])[0],B=j[1],V=j[2];B<V?B<I&&(j[0]=B,j[1]=V,j[2]=I):V<I&&(j[0]=V,j[1]=I,j[2]=B)}F.sort(l);var Z=new Array(R);for(L=0;L<Z.length;++L)Z[L]=0;var Y=[],ee=[],J=new Array(3*R),$=new Array(3*R),Q=null;D&&(Q=[]);var se=new a(F,J,$,Z,Y,ee,Q);for(L=0;L<R;++L)for(var j=F[L],G=0;G<3;++G){var W=J[3*L+G]=se.locate(B=j[(G+1)%3],I=j[G],P.opposite(B,I)),ie=$[3*L+G]=P.isConstraint(I,B);W<0&&(ie?ee.push(L):(Y.push(L),Z[L]=1),D&&Q.push([B,I,-1]))}return se}(i,u);if(0===d)return u?s.cells.concat(s.boundary):s.cells;for(var c=1,h=s.active,p=s.next,v=s.flags,g=s.cells,f=s.constraint,w=s.neighbor;h.length>0||p.length>0;){for(;h.length>0;){var y=h.pop();if(v[y]!==-c){v[y]=c;for(var M=0;M<3;++M){var A=w[3*y+M];A>=0&&0===v[A]&&(f[3*y+M]?p.push(A):(h.push(A),v[A]=c))}}}var k=p;p=h,h=k,p.length=0,c=-c}var C=function(P,D,F){for(var R=0,L=0;L<P.length;++L)D[L]===F&&(P[R++]=P[L]);return P.length=R,P}(g,v,d);return u?C.concat(s.boundary):C},a.prototype.locate=(e=[0,0,0],function(i,d,u){var s=i,c=d,h=u;return d<u?d<i&&(s=d,c=u,h=i):u<i&&(s=u,c=i,h=d),s<0?-1:(e[0]=s,e[1]=c,e[2]=h,o.eq(this.cells,e,l))})},{"binary-search-bounds":31}],45:[function(x,T,b){"use strict";var e=x("binary-search-bounds"),o=x("robust-orientation")[3];function a(p,v,g,f,w){this.a=p,this.b=v,this.idx=g,this.lowerIds=f,this.upperIds=w}function l(p,v,g,f){this.a=p,this.b=v,this.type=g,this.idx=f}function i(p,v){var g=p.a[0]-v.a[0]||p.a[1]-v.a[1]||p.type-v.type;return g||(0!==p.type&&(g=o(p.a,p.b,v.b))?g:p.idx-v.idx)}function d(p,v){return o(p.a,p.b,v)}function u(p,v,g,f,w){for(var y=e.lt(v,f,d),M=e.gt(v,f,d),A=y;A<M;++A){for(var k=v[A],C=k.lowerIds,P=C.length;P>1&&o(g[C[P-2]],g[C[P-1]],f)>0;)p.push([C[P-1],C[P-2],w]),P-=1;C.length=P,C.push(w);var D=k.upperIds;for(P=D.length;P>1&&o(g[D[P-2]],g[D[P-1]],f)<0;)p.push([D[P-2],D[P-1],w]),P-=1;D.length=P,D.push(w)}}function s(p,v){var g;return(g=p.a[0]<v.a[0]?o(p.a,p.b,v.a):o(v.b,v.a,p.a))?g:(g=v.b[0]<p.b[0]?o(p.a,p.b,v.b):o(v.b,v.a,p.b))||p.idx-v.idx}function c(p,v,g){var f=e.le(p,g,s),w=p[f],y=w.upperIds,M=y[y.length-1];w.upperIds=[M],p.splice(f+1,0,new a(g.a,g.b,g.idx,[M],y))}function h(p,v,g){var f=g.a;g.a=g.b,g.b=f;var w=e.eq(p,g,s);p[w-1].upperIds=p[w].upperIds,p.splice(w,1)}T.exports=function(p,v){for(var g=p.length,f=v.length,w=[],y=0;y<g;++y)w.push(new l(p[y],null,0,y));for(y=0;y<f;++y){var M=v[y],A=p[M[0]],k=p[M[1]];A[0]<k[0]?w.push(new l(A,k,2,y),new l(k,A,1,y)):A[0]>k[0]&&w.push(new l(k,A,2,y),new l(A,k,1,y))}w.sort(i);for(var C=w[0].a[0]-(1+Math.abs(w[0].a[0]))*Math.pow(2,-52),P=[new a([C,1],[C,0],-1,[],[],[],[])],D=[],F=(y=0,w.length);y<F;++y){var R=w[y],L=R.type;0===L?u(D,P,p,R.a,R.idx):2===L?c(P,0,R):h(P,0,R)}return D}},{"binary-search-bounds":31,"robust-orientation":284}],46:[function(x,T,b){"use strict";var e=x("binary-search-bounds");function o(i,d){this.stars=i,this.edges=d}T.exports=function(i,d){for(var u=new Array(i),s=0;s<i;++s)u[s]=[];return new o(u,d)};var a=o.prototype;function l(i,d,u){for(var s=1,c=i.length;s<c;s+=2)if(i[s-1]===d&&i[s]===u)return i[s-1]=i[c-2],i[s]=i[c-1],void(i.length=c-2)}a.isConstraint=function(){var i=[0,0];function d(u,s){return u[0]-s[0]||u[1]-s[1]}return function(u,s){return i[0]=Math.min(u,s),i[1]=Math.max(u,s),e.eq(this.edges,i,d)>=0}}(),a.removeTriangle=function(i,d,u){var s=this.stars;l(s[i],d,u),l(s[d],u,i),l(s[u],i,d)},a.addTriangle=function(i,d,u){var s=this.stars;s[i].push(d,u),s[d].push(u,i),s[u].push(i,d)},a.opposite=function(i,d){for(var u=this.stars[d],s=1,c=u.length;s<c;s+=2)if(u[s]===i)return u[s-1];return-1},a.flip=function(i,d){var u=this.opposite(i,d),s=this.opposite(d,i);this.removeTriangle(i,d,u),this.removeTriangle(d,i,s),this.addTriangle(i,s,u),this.addTriangle(d,u,s)},a.edges=function(){for(var i=this.stars,d=[],u=0,s=i.length;u<s;++u)for(var c=i[u],h=0,p=c.length;h<p;h+=2)d.push([c[h],c[h+1]]);return d},a.cells=function(){for(var i=this.stars,d=[],u=0,s=i.length;u<s;++u)for(var c=i[u],h=0,p=c.length;h<p;h+=2){var v=c[h],g=c[h+1];u<Math.min(v,g)&&d.push([u,v,g])}return d}},{"binary-search-bounds":31}],47:[function(x,T,b){"use strict";T.exports=function(e){for(var o=1,a=1;a<e.length;++a)for(var l=0;l<a;++l)if(e[a]<e[l])o=-o;else if(e[l]===e[a])return 0;return o}},{}],48:[function(x,T,b){"use strict";var e=x("dup"),o=x("robust-linear-solve");function a(d,u){for(var s=0,c=d.length,h=0;h<c;++h)s+=d[h]*u[h];return s}function l(d){var u=d.length;if(0===u)return[];var s=e([d.length+1,d.length+1],1),c=e([d.length+1],1);s[u][u]=0;for(var h=0;h<u;++h){for(var p=0;p<=h;++p)s[p][h]=s[h][p]=2*a(d[h],d[p]);c[h]=a(d[h],d[h])}var v=o(s,c),g=0,f=v[u+1];for(h=0;h<f.length;++h)g+=f[h];var w=new Array(u);for(h=0;h<u;++h){f=v[h];var y=0;for(p=0;p<f.length;++p)y+=f[p];w[h]=y/g}return w}function i(d){if(0===d.length)return[];for(var u=d[0].length,s=e([u]),c=l(d),h=0;h<d.length;++h)for(var p=0;p<u;++p)s[p]+=d[h][p]*c[h];return s}i.barycenetric=l,T.exports=i},{dup:65,"robust-linear-solve":283}],49:[function(x,T,b){T.exports=function(o){for(var a=e(o),l=0,i=0;i<o.length;++i)for(var d=o[i],u=0;u<a.length;++u)l+=Math.pow(d[u]-a[u],2);return Math.sqrt(l/o.length)};var e=x("circumcenter")},{circumcenter:48}],50:[function(x,T,b){"use strict";T.exports=function(M,A,k){var C,L,B,V;if(k){C=A;for(var P=new Array(A.length),D=0;D<A.length;++D){var F=A[D];P[D]=[F[0],F[1],k[D]]}A=P}for(var R=(B=!!k,void 0,w(A,V=v(L=M,[],p(L)),B),!!V);y(M,A,!!k);)R=!0;if(k&&R)for(C.length=0,k.length=0,D=0;D<A.length;++D)C.push([(F=A[D])[0],F[1]]),k.push(F[2]);return R};var e=x("union-find"),o=x("box-intersect"),a=x("robust-segment-intersect"),l=x("big-rat"),i=x("big-rat/cmp"),d=x("big-rat/to-float"),u=x("rat-vec"),s=x("nextafter"),c=x("./lib/rat-seg-intersect");function h(M){var A=d(M);return[s(A,-1/0),s(A,1/0)]}function p(M){for(var A=new Array(M.length),k=0;k<M.length;++k){var C=M[k];A[k]=[s(C[0],-1/0),s(C[1],-1/0),s(C[0],1/0),s(C[1],1/0)]}return A}function v(M,A,k){for(var C=A.length,P=new e(C),D=[],F=0;F<A.length;++F){var R=A[F],L=h(R[0]),I=h(R[1]);D.push([s(L[0],-1/0),s(I[0],-1/0),s(L[1],1/0),s(I[1],1/0)])}o(D,function(ee,J){P.link(ee,J)});var B=!0,V=new Array(C);for(F=0;F<C;++F)(Y=P.find(F))!==F&&(B=!1,M[Y]=[Math.min(M[F][0],M[Y][0]),Math.min(M[F][1],M[Y][1])]);if(B)return null;var Z=0;for(F=0;F<C;++F){var Y;(Y=P.find(F))===F?(V[F]=Z,M[Z++]=M[F]):V[F]=-1}for(M.length=Z,F=0;F<C;++F)V[F]<0&&(V[F]=V[P.find(F)]);return V}function g(M,A){return M[0]-A[0]||M[1]-A[1]}function f(M,A){return M[0]-A[0]||M[1]-A[1]||(M[2]<A[2]?-1:M[2]>A[2]?1:0)}function w(M,A,k){if(0!==M.length){if(A)for(var C=0;C<M.length;++C){var P=A[(F=M[C])[0]],D=A[F[1]];F[0]=Math.min(P,D),F[1]=Math.max(P,D)}else for(C=0;C<M.length;++C){var F;P=(F=M[C])[0],D=F[1],F[0]=Math.min(P,D),F[1]=Math.max(P,D)}M.sort(k?f:g);var R=1;for(C=1;C<M.length;++C){var L=M[C-1],I=M[C];(I[0]!==L[0]||I[1]!==L[1]||k&&I[2]!==L[2])&&(M[R++]=I)}M.length=R}}function y(M,A,k){var L,I,V,C=function(L,I){for(var B=new Array(I.length),V=0;V<I.length;++V){var Z=I[V],Y=L[Z[0]],ee=L[Z[1]];B[V]=[s(Math.min(Y[0],ee[0]),-1/0),s(Math.min(Y[1],ee[1]),-1/0),s(Math.max(Y[0],ee[0]),1/0),s(Math.max(Y[1],ee[1]),1/0)]}return B}(M,A),P=(L=M,I=A,V=[],o(C,function(Z,Y){var ee=I[Z],J=I[Y];ee[0]!==J[0]&&ee[0]!==J[1]&&ee[1]!==J[0]&&ee[1]!==J[1]&&a(L[ee[0]],L[ee[1]],L[J[0]],L[J[1]])&&V.push([Z,Y])}),V),F=function(L,I,B,V){var Z=[];return o(B,V,function(Y,ee){var J=I[Y];if(J[0]!==ee&&J[1]!==ee){var $=L[ee];a(L[J[0]],L[J[1]],$,$)&&Z.push([Y,ee])}}),Z}(M,A,C,p(M)),R=v(M,function(L,I,B,V,Z){var Y,ee,J=L.map(function(we){return[l(we[0]),l(we[1])]});for(Y=0;Y<B.length;++Y){var $=B[Y],Q=$[1],se=I[ee=$[0]],j=I[Q],G=c(u(L[se[0]]),u(L[se[1]]),u(L[j[0]]),u(L[j[1]]));if(G){var W=L.length;L.push([d(G[0]),d(G[1])]),J.push(G),V.push([ee,W],[Q,W])}}for(V.sort(function(we,Ce){if(we[0]!==Ce[0])return we[0]-Ce[0];var De=J[we[1]],Se=J[Ce[1]];return i(De[0],Se[0])||i(De[1],Se[1])}),Y=V.length-1;Y>=0;--Y){var ie=I[ee=(be=V[Y])[0]],q=ie[0],te=ie[1],ne=L[q],le=L[te];if((ne[0]-le[0]||ne[1]-le[1])<0){var ue=q;q=te,te=ue}ie[0]=q;var de,he=ie[1]=be[1];for(Z&&(de=ie[2]);Y>0&&V[Y-1][0]===ee;){var be,ge=(be=V[--Y])[1];I.push(Z?[he,ge,de]:[he,ge]),he=ge}I.push(Z?[he,te,de]:[he,te])}return J}(M,A,P,F,k));return w(A,R,k),!!R||P.length>0||F.length>0}},{"./lib/rat-seg-intersect":51,"big-rat":18,"big-rat/cmp":16,"big-rat/to-float":30,"box-intersect":35,nextafter:260,"rat-vec":273,"robust-segment-intersect":287,"union-find":309}],51:[function(x,T,b){"use strict";T.exports=function(c,h,p,v){var g=i(h,c),f=i(v,p),w=s(g,f);if(0===l(w))return null;var M=s(f,i(c,p)),A=o(M,w),k=u(g,A);return d(c,k)};var e=x("big-rat/mul"),o=x("big-rat/div"),a=x("big-rat/sub"),l=x("big-rat/sign"),i=x("rat-vec/sub"),d=x("rat-vec/add"),u=x("rat-vec/muls");function s(c,h){return a(e(c[0],h[1]),e(c[1],h[0]))}},{"big-rat/div":17,"big-rat/mul":27,"big-rat/sign":28,"big-rat/sub":29,"rat-vec/add":272,"rat-vec/muls":274,"rat-vec/sub":275}],52:[function(x,T,b){T.exports={jet:[{index:0,rgb:[0,0,131]},{index:.125,rgb:[0,60,170]},{index:.375,rgb:[5,255,255]},{index:.625,rgb:[255,255,0]},{index:.875,rgb:[250,0,0]},{index:1,rgb:[128,0,0]}],hsv:[{index:0,rgb:[255,0,0]},{index:.169,rgb:[253,255,2]},{index:.173,rgb:[247,255,2]},{index:.337,rgb:[0,252,4]},{index:.341,rgb:[0,252,10]},{index:.506,rgb:[1,249,255]},{index:.671,rgb:[2,0,253]},{index:.675,rgb:[8,0,253]},{index:.839,rgb:[255,0,251]},{index:.843,rgb:[255,0,245]},{index:1,rgb:[255,0,6]}],hot:[{index:0,rgb:[0,0,0]},{index:.3,rgb:[230,0,0]},{index:.6,rgb:[255,210,0]},{index:1,rgb:[255,255,255]}],spring:[{index:0,rgb:[255,0,255]},{index:1,rgb:[255,255,0]}],summer:[{index:0,rgb:[0,128,102]},{index:1,rgb:[255,255,102]}],autumn:[{index:0,rgb:[255,0,0]},{index:1,rgb:[255,255,0]}],winter:[{index:0,rgb:[0,0,255]},{index:1,rgb:[0,255,128]}],bone:[{index:0,rgb:[0,0,0]},{index:.376,rgb:[84,84,116]},{index:.753,rgb:[169,200,200]},{index:1,rgb:[255,255,255]}],copper:[{index:0,rgb:[0,0,0]},{index:.804,rgb:[255,160,102]},{index:1,rgb:[255,199,127]}],greys:[{index:0,rgb:[0,0,0]},{index:1,rgb:[255,255,255]}],yignbu:[{index:0,rgb:[8,29,88]},{index:.125,rgb:[37,52,148]},{index:.25,rgb:[34,94,168]},{index:.375,rgb:[29,145,192]},{index:.5,rgb:[65,182,196]},{index:.625,rgb:[127,205,187]},{index:.75,rgb:[199,233,180]},{index:.875,rgb:[237,248,217]},{index:1,rgb:[255,255,217]}],greens:[{index:0,rgb:[0,68,27]},{index:.125,rgb:[0,109,44]},{index:.25,rgb:[35,139,69]},{index:.375,rgb:[65,171,93]},{index:.5,rgb:[116,196,118]},{index:.625,rgb:[161,217,155]},{index:.75,rgb:[199,233,192]},{index:.875,rgb:[229,245,224]},{index:1,rgb:[247,252,245]}],yiorrd:[{index:0,rgb:[128,0,38]},{index:.125,rgb:[189,0,38]},{index:.25,rgb:[227,26,28]},{index:.375,rgb:[252,78,42]},{index:.5,rgb:[253,141,60]},{index:.625,rgb:[254,178,76]},{index:.75,rgb:[254,217,118]},{index:.875,rgb:[255,237,160]},{index:1,rgb:[255,255,204]}],bluered:[{index:0,rgb:[0,0,255]},{index:1,rgb:[255,0,0]}],rdbu:[{index:0,rgb:[5,10,172]},{index:.35,rgb:[106,137,247]},{index:.5,rgb:[190,190,190]},{index:.6,rgb:[220,170,132]},{index:.7,rgb:[230,145,90]},{index:1,rgb:[178,10,28]}],picnic:[{index:0,rgb:[0,0,255]},{index:.1,rgb:[51,153,255]},{index:.2,rgb:[102,204,255]},{index:.3,rgb:[153,204,255]},{index:.4,rgb:[204,204,255]},{index:.5,rgb:[255,255,255]},{index:.6,rgb:[255,204,255]},{index:.7,rgb:[255,153,255]},{index:.8,rgb:[255,102,204]},{index:.9,rgb:[255,102,102]},{index:1,rgb:[255,0,0]}],rainbow:[{index:0,rgb:[150,0,90]},{index:.125,rgb:[0,0,200]},{index:.25,rgb:[0,25,255]},{index:.375,rgb:[0,152,255]},{index:.5,rgb:[44,255,150]},{index:.625,rgb:[151,255,0]},{index:.75,rgb:[255,234,0]},{index:.875,rgb:[255,111,0]},{index:1,rgb:[255,0,0]}],portland:[{index:0,rgb:[12,51,131]},{index:.25,rgb:[10,136,186]},{index:.5,rgb:[242,211,56]},{index:.75,rgb:[242,143,56]},{index:1,rgb:[217,30,30]}],blackbody:[{index:0,rgb:[0,0,0]},{index:.2,rgb:[230,0,0]},{index:.4,rgb:[230,210,0]},{index:.7,rgb:[255,255,255]},{index:1,rgb:[160,200,255]}],earth:[{index:0,rgb:[0,0,130]},{index:.1,rgb:[0,180,180]},{index:.2,rgb:[40,210,40]},{index:.4,rgb:[230,230,50]},{index:.6,rgb:[120,70,20]},{index:1,rgb:[255,255,255]}],electric:[{index:0,rgb:[0,0,0]},{index:.15,rgb:[30,0,100]},{index:.4,rgb:[120,0,100]},{index:.6,rgb:[160,90,0]},{index:.8,rgb:[230,200,0]},{index:1,rgb:[255,250,220]}],alpha:[{index:0,rgb:[255,255,255,0]},{index:1,rgb:[255,255,255,1]}],viridis:[{index:0,rgb:[68,1,84]},{index:.13,rgb:[71,44,122]},{index:.25,rgb:[59,81,139]},{index:.38,rgb:[44,113,142]},{index:.5,rgb:[33,144,141]},{index:.63,rgb:[39,173,129]},{index:.75,rgb:[92,200,99]},{index:.88,rgb:[170,220,50]},{index:1,rgb:[253,231,37]}],inferno:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[31,12,72]},{index:.25,rgb:[85,15,109]},{index:.38,rgb:[136,34,106]},{index:.5,rgb:[186,54,85]},{index:.63,rgb:[227,89,51]},{index:.75,rgb:[249,140,10]},{index:.88,rgb:[249,201,50]},{index:1,rgb:[252,255,164]}],magma:[{index:0,rgb:[0,0,4]},{index:.13,rgb:[28,16,68]},{index:.25,rgb:[79,18,123]},{index:.38,rgb:[129,37,129]},{index:.5,rgb:[181,54,122]},{index:.63,rgb:[229,80,100]},{index:.75,rgb:[251,135,97]},{index:.88,rgb:[254,194,135]},{index:1,rgb:[252,253,191]}],plasma:[{index:0,rgb:[13,8,135]},{index:.13,rgb:[75,3,161]},{index:.25,rgb:[125,3,168]},{index:.38,rgb:[168,34,150]},{index:.5,rgb:[203,70,121]},{index:.63,rgb:[229,107,93]},{index:.75,rgb:[248,148,65]},{index:.88,rgb:[253,195,40]},{index:1,rgb:[240,249,33]}],warm:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[172,0,187]},{index:.25,rgb:[219,0,170]},{index:.38,rgb:[255,0,130]},{index:.5,rgb:[255,63,74]},{index:.63,rgb:[255,123,0]},{index:.75,rgb:[234,176,0]},{index:.88,rgb:[190,228,0]},{index:1,rgb:[147,255,0]}],cool:[{index:0,rgb:[125,0,179]},{index:.13,rgb:[116,0,218]},{index:.25,rgb:[98,74,237]},{index:.38,rgb:[68,146,231]},{index:.5,rgb:[0,204,197]},{index:.63,rgb:[0,247,146]},{index:.75,rgb:[0,255,88]},{index:.88,rgb:[40,255,8]},{index:1,rgb:[147,255,0]}],"rainbow-soft":[{index:0,rgb:[125,0,179]},{index:.1,rgb:[199,0,180]},{index:.2,rgb:[255,0,121]},{index:.3,rgb:[255,108,0]},{index:.4,rgb:[222,194,0]},{index:.5,rgb:[150,255,0]},{index:.6,rgb:[0,255,55]},{index:.7,rgb:[0,246,150]},{index:.8,rgb:[50,167,222]},{index:.9,rgb:[103,51,235]},{index:1,rgb:[124,0,186]}],bathymetry:[{index:0,rgb:[40,26,44]},{index:.13,rgb:[59,49,90]},{index:.25,rgb:[64,76,139]},{index:.38,rgb:[63,110,151]},{index:.5,rgb:[72,142,158]},{index:.63,rgb:[85,174,163]},{index:.75,rgb:[120,206,163]},{index:.88,rgb:[187,230,172]},{index:1,rgb:[253,254,204]}],cdom:[{index:0,rgb:[47,15,62]},{index:.13,rgb:[87,23,86]},{index:.25,rgb:[130,28,99]},{index:.38,rgb:[171,41,96]},{index:.5,rgb:[206,67,86]},{index:.63,rgb:[230,106,84]},{index:.75,rgb:[242,149,103]},{index:.88,rgb:[249,193,135]},{index:1,rgb:[254,237,176]}],chlorophyll:[{index:0,rgb:[18,36,20]},{index:.13,rgb:[25,63,41]},{index:.25,rgb:[24,91,59]},{index:.38,rgb:[13,119,72]},{index:.5,rgb:[18,148,80]},{index:.63,rgb:[80,173,89]},{index:.75,rgb:[132,196,122]},{index:.88,rgb:[175,221,162]},{index:1,rgb:[215,249,208]}],density:[{index:0,rgb:[54,14,36]},{index:.13,rgb:[89,23,80]},{index:.25,rgb:[110,45,132]},{index:.38,rgb:[120,77,178]},{index:.5,rgb:[120,113,213]},{index:.63,rgb:[115,151,228]},{index:.75,rgb:[134,185,227]},{index:.88,rgb:[177,214,227]},{index:1,rgb:[230,241,241]}],"freesurface-blue":[{index:0,rgb:[30,4,110]},{index:.13,rgb:[47,14,176]},{index:.25,rgb:[41,45,236]},{index:.38,rgb:[25,99,212]},{index:.5,rgb:[68,131,200]},{index:.63,rgb:[114,156,197]},{index:.75,rgb:[157,181,203]},{index:.88,rgb:[200,208,216]},{index:1,rgb:[241,237,236]}],"freesurface-red":[{index:0,rgb:[60,9,18]},{index:.13,rgb:[100,17,27]},{index:.25,rgb:[142,20,29]},{index:.38,rgb:[177,43,27]},{index:.5,rgb:[192,87,63]},{index:.63,rgb:[205,125,105]},{index:.75,rgb:[216,162,148]},{index:.88,rgb:[227,199,193]},{index:1,rgb:[241,237,236]}],oxygen:[{index:0,rgb:[64,5,5]},{index:.13,rgb:[106,6,15]},{index:.25,rgb:[144,26,7]},{index:.38,rgb:[168,64,3]},{index:.5,rgb:[188,100,4]},{index:.63,rgb:[206,136,11]},{index:.75,rgb:[220,174,25]},{index:.88,rgb:[231,215,44]},{index:1,rgb:[248,254,105]}],par:[{index:0,rgb:[51,20,24]},{index:.13,rgb:[90,32,35]},{index:.25,rgb:[129,44,34]},{index:.38,rgb:[159,68,25]},{index:.5,rgb:[182,99,19]},{index:.63,rgb:[199,134,22]},{index:.75,rgb:[212,171,35]},{index:.88,rgb:[221,210,54]},{index:1,rgb:[225,253,75]}],phase:[{index:0,rgb:[145,105,18]},{index:.13,rgb:[184,71,38]},{index:.25,rgb:[186,58,115]},{index:.38,rgb:[160,71,185]},{index:.5,rgb:[110,97,218]},{index:.63,rgb:[50,123,164]},{index:.75,rgb:[31,131,110]},{index:.88,rgb:[77,129,34]},{index:1,rgb:[145,105,18]}],salinity:[{index:0,rgb:[42,24,108]},{index:.13,rgb:[33,50,162]},{index:.25,rgb:[15,90,145]},{index:.38,rgb:[40,118,137]},{index:.5,rgb:[59,146,135]},{index:.63,rgb:[79,175,126]},{index:.75,rgb:[120,203,104]},{index:.88,rgb:[193,221,100]},{index:1,rgb:[253,239,154]}],temperature:[{index:0,rgb:[4,35,51]},{index:.13,rgb:[23,51,122]},{index:.25,rgb:[85,59,157]},{index:.38,rgb:[129,79,143]},{index:.5,rgb:[175,95,130]},{index:.63,rgb:[222,112,101]},{index:.75,rgb:[249,146,66]},{index:.88,rgb:[249,196,65]},{index:1,rgb:[232,250,91]}],turbidity:[{index:0,rgb:[34,31,27]},{index:.13,rgb:[65,50,41]},{index:.25,rgb:[98,69,52]},{index:.38,rgb:[131,89,57]},{index:.5,rgb:[161,112,59]},{index:.63,rgb:[185,140,66]},{index:.75,rgb:[202,174,88]},{index:.88,rgb:[216,209,126]},{index:1,rgb:[233,246,171]}],"velocity-blue":[{index:0,rgb:[17,32,64]},{index:.13,rgb:[35,52,116]},{index:.25,rgb:[29,81,156]},{index:.38,rgb:[31,113,162]},{index:.5,rgb:[50,144,169]},{index:.63,rgb:[87,173,176]},{index:.75,rgb:[149,196,189]},{index:.88,rgb:[203,221,211]},{index:1,rgb:[254,251,230]}],"velocity-green":[{index:0,rgb:[23,35,19]},{index:.13,rgb:[24,64,38]},{index:.25,rgb:[11,95,45]},{index:.38,rgb:[39,123,35]},{index:.5,rgb:[95,146,12]},{index:.63,rgb:[152,165,18]},{index:.75,rgb:[201,186,69]},{index:.88,rgb:[233,216,137]},{index:1,rgb:[255,253,205]}],cubehelix:[{index:0,rgb:[0,0,0]},{index:.07,rgb:[22,5,59]},{index:.13,rgb:[60,4,105]},{index:.2,rgb:[109,1,135]},{index:.27,rgb:[161,0,147]},{index:.33,rgb:[210,2,142]},{index:.4,rgb:[251,11,123]},{index:.47,rgb:[255,29,97]},{index:.53,rgb:[255,54,69]},{index:.6,rgb:[255,85,46]},{index:.67,rgb:[255,120,34]},{index:.73,rgb:[255,157,37]},{index:.8,rgb:[241,191,57]},{index:.87,rgb:[224,220,93]},{index:.93,rgb:[218,241,142]},{index:1,rgb:[227,253,198]}]}},{}],53:[function(x,T,b){"use strict";var e=x("./colorScale"),o=x("lerp");function a(d){return[d[0]/255,d[1]/255,d[2]/255,d[3]]}function l(d){for(var u,s="#",c=0;c<3;++c)s+=("00"+(u=(u=d[c]).toString(16))).substr(u.length);return s}function i(d){return"rgba("+d.join(",")+")"}T.exports=function(d){var u,s,c,h,p,v,g,f,w,y;if(d||(d={}),f=(d.nshades||72)-1,g=d.format||"hex",(v=d.colormap)||(v="jet"),"string"==typeof v){if(v=v.toLowerCase(),!e[v])throw Error(v+" not a supported colorscale");p=e[v]}else{if(!Array.isArray(v))throw Error("unsupported colormap option",v);p=v.slice()}if(p.length>f+1)throw new Error(v+" map requires nshades to be at least size "+p.length);w=Array.isArray(d.alpha)?2!==d.alpha.length?[1,1]:d.alpha.slice():"number"==typeof d.alpha?[d.alpha,d.alpha]:[1,1],u=p.map(function(P){return Math.round(P.index*f)}),w[0]=Math.min(Math.max(w[0],0),1),w[1]=Math.min(Math.max(w[1],0),1);var M=p.map(function(P,D){var F=p[D].index,R=p[D].rgb.slice();return 4===R.length&&R[3]>=0&&R[3]<=1||(R[3]=w[0]+(w[1]-w[0])*F),R}),A=[];for(y=0;y<u.length-1;++y){h=u[y+1]-u[y],s=M[y],c=M[y+1];for(var k=0;k<h;k++){var C=k/h;A.push([Math.round(o(s[0],c[0],C)),Math.round(o(s[1],c[1],C)),Math.round(o(s[2],c[2],C)),o(s[3],c[3],C)])}}return A.push(p[p.length-1].rgb.concat(w[1])),"hex"===g?A=A.map(l):"rgbaString"===g?A=A.map(i):"float"===g&&(A=A.map(a)),A}},{"./colorScale":52,lerp:240}],54:[function(x,T,b){"use strict";T.exports=function(u,s,c,h){var p=e(s,c,h);if(0===p){var v=o(e(u,s,c)),g=o(e(u,s,h));if(v===g){if(0===v){var f=d(u,s,c);return f===d(u,s,h)?0:f?1:-1}return 0}return 0===g?v>0||d(u,s,h)?-1:1:0===v?g>0||d(u,s,c)?1:-1:o(g-v)}var y=e(u,s,c);return y>0?p>0&&e(u,s,h)>0?1:-1:y<0?p>0||e(u,s,h)>0?1:-1:e(u,s,h)>0||d(u,s,c)?1:-1};var e=x("robust-orientation"),o=x("signum"),a=x("two-sum"),l=x("robust-product"),i=x("robust-sum");function d(u,s,c){var h=a(u[0],-s[0]),p=a(u[1],-s[1]),v=a(c[0],-s[0]),g=a(c[1],-s[1]),f=i(l(h,v),l(p,g));return f[f.length-1]>=0}},{"robust-orientation":284,"robust-product":285,"robust-sum":289,signum:55,"two-sum":307}],55:[function(x,T,b){"use strict";T.exports=function(e){return e<0?-1:e>0?1:0}},{}],56:[function(x,T,b){T.exports=function(a,l){var i=a.length,d=a.length-l.length;if(d)return d;switch(i){case 0:return 0;case 1:return a[0]-l[0];case 2:return a[0]+a[1]-l[0]-l[1]||e(a[0],a[1])-e(l[0],l[1]);case 3:var u=a[0]+a[1],s=l[0]+l[1];if(d=u+a[2]-(s+l[2]))return d;var c=e(a[0],a[1]),h=e(l[0],l[1]);return e(c,a[2])-e(h,l[2])||e(c+a[2],u)-e(h+l[2],s);case 4:var p=a[0],v=a[1],g=a[2],f=a[3],w=l[0],y=l[1],M=l[2],A=l[3];return p+v+g+f-(w+y+M+A)||e(p,v,g,f)-e(w,y,M,A,w)||e(p+v,p+g,p+f,v+g,v+f,g+f)-e(w+y,w+M,w+A,y+M,y+A,M+A)||e(p+v+g,p+v+f,p+g+f,v+g+f)-e(w+y+M,w+y+A,w+M+A,y+M+A);default:for(var k=a.slice().sort(o),C=l.slice().sort(o),P=0;P<i;++P)if(d=k[P]-C[P])return d;return 0}};var e=Math.min;function o(a,l){return a-l}},{}],57:[function(x,T,b){"use strict";var e=x("compare-cell"),o=x("cell-orientation");T.exports=function(a,l){return e(a,l)||o(a)-o(l)}},{"cell-orientation":47,"compare-cell":56}],58:[function(x,T,b){"use strict";var e=x("./lib/ch1d"),o=x("./lib/ch2d"),a=x("./lib/chnd");T.exports=function(l){var i=l.length;if(0===i)return[];if(1===i)return[[0]];var d=l[0].length;return 0===d?[]:1===d?e(l):2===d?o(l):a(l,d)}},{"./lib/ch1d":59,"./lib/ch2d":60,"./lib/chnd":61}],59:[function(x,T,b){"use strict";T.exports=function(e){for(var o=0,a=0,l=1;l<e.length;++l)e[l][0]<e[o][0]&&(o=l),e[l][0]>e[a][0]&&(a=l);return o<a?[[o],[a]]:o>a?[[a],[o]]:[[o]]}},{}],60:[function(x,T,b){"use strict";T.exports=function(o){var a=e(o),l=a.length;if(l<=2)return[];for(var i=new Array(l),d=a[l-1],u=0;u<l;++u){var s=a[u];i[u]=[d,s],d=s}return i};var e=x("monotone-convex-hull-2d")},{"monotone-convex-hull-2d":246}],61:[function(x,T,b){"use strict";T.exports=function(a,l){try{return e(a,!0)}catch(u){var i=o(a);if(i.length<=l)return[];var d=function(s,c){for(var h=s.length,p=new Array(h),v=0;v<c.length;++v)p[v]=s[c[v]];var g=c.length;for(v=0;v<h;++v)c.indexOf(v)<0&&(p[g++]=s[v]);return p}(a,i);return function(s,c){for(var h=s.length,p=c.length,v=0;v<h;++v)for(var g=s[v],f=0;f<g.length;++f){var w=g[f];if(w<p)g[f]=c[w];else{w-=p;for(var y=0;y<p;++y)w>=c[y]&&(w+=1);g[f]=w}}return s}(e(d,!0),i)}};var e=x("incremental-convex-hull"),o=x("affine-hull")},{"affine-hull":10,"incremental-convex-hull":233}],62:[function(x,T,b){"use strict";T.exports=function(e,o,a,l,i,d){var u=i-1,s=i*i,c=u*u,h=(1+2*i)*c,p=i*c,v=s*(3-2*i),g=s*u;if(e.length){d||(d=new Array(e.length));for(var f=e.length-1;f>=0;--f)d[f]=h*e[f]+p*o[f]+v*a[f]+g*l[f];return d}return h*e+p*o+v*a+g*l},T.exports.derivative=function(e,o,a,l,i,d){var u=6*i*i-6*i,s=3*i*i-4*i+1,c=-6*i*i+6*i,h=3*i*i-2*i;if(e.length){d||(d=new Array(e.length));for(var p=e.length-1;p>=0;--p)d[p]=u*e[p]+s*o[p]+c*a[p]+h*l[p];return d}return u*e+s*o+c*a[p]+h*l}},{}],63:[function(x,T,b){"use strict";var e=x("incremental-convex-hull"),o=x("uniq");function a(i,d){this.point=i,this.index=d}function l(i,d){for(var u=i.point,s=d.point,c=u.length,h=0;h<c;++h){var p=s[h]-u[h];if(p)return p}return 0}T.exports=function(i,d){var u=i.length;if(0===u)return[];var s=i[0].length;if(s<1)return[];if(1===s)return function(F,R,L){if(1===F)return L?[[-1,0]]:[];var I=R.map(function(ee,J){return[ee[0],J]});I.sort(function(ee,J){return ee[0]-J[0]});for(var B=new Array(F-1),V=1;V<F;++V)B[V-1]=[I[V-1][1],I[V][1]];return L&&B.push([-1,B[0][1]],[B[F-1][1],-1]),B}(u,i,d);for(var c=new Array(u),h=1,p=0;p<u;++p){for(var v=i[p],g=new Array(s+1),f=0,w=0;w<s;++w){var y=v[w];g[w]=y,f+=y*y}g[s]=f,c[p]=new a(g,p),h=Math.max(f,h)}o(c,l),u=c.length;var M=new Array(u+s+1),A=new Array(u+s+1),k=(s+1)*(s+1)*h,C=new Array(s+1);for(p=0;p<=s;++p)C[p]=0;for(C[s]=k,M[0]=C.slice(),A[0]=-1,p=0;p<=s;++p)(g=C.slice())[p]=1,M[p+1]=g,A[p+1]=-1;for(p=0;p<u;++p){var P=c[p];M[p+s+1]=P.point,A[p+s+1]=P.index}var D=e(M,!1);if(D=D.filter(d?function(F){for(var R=0,L=0;L<=s;++L){var I=A[F[L]];if(I<0&&++R>=2)return!1;F[L]=I}return!0}:function(F){for(var R=0;R<=s;++R){var L=A[F[R]];if(L<0)return!1;F[R]=L}return!0}),1&s)for(p=0;p<D.length;++p)g=(P=D[p])[0],P[0]=P[1],P[1]=g;return D}},{"incremental-convex-hull":233,uniq:310}],64:[function(x,T,b){(function(e){(function(){var o=!1;if("undefined"!=typeof Float64Array){var a=new Float64Array(1),l=new Uint32Array(a.buffer);a[0]=1,o=!0,1072693248===l[1]?(T.exports=function(d){return a[0]=d,[l[0],l[1]]},T.exports.pack=function(d,u){return l[0]=d,l[1]=u,a[0]},T.exports.lo=function(d){return a[0]=d,l[0]},T.exports.hi=function(d){return a[0]=d,l[1]}):1072693248===l[0]?(T.exports=function(d){return a[0]=d,[l[1],l[0]]},T.exports.pack=function(d,u){return l[1]=d,l[0]=u,a[0]},T.exports.lo=function(d){return a[0]=d,l[1]},T.exports.hi=function(d){return a[0]=d,l[0]}):o=!1}if(!o){var i=new e(8);T.exports=function(d){return i.writeDoubleLE(d,0,!0),[i.readUInt32LE(0,!0),i.readUInt32LE(4,!0)]},T.exports.pack=function(d,u){return i.writeUInt32LE(d,0,!0),i.writeUInt32LE(u,4,!0),i.readDoubleLE(0,!0)},T.exports.lo=function(d){return i.writeDoubleLE(d,0,!0),i.readUInt32LE(0,!0)},T.exports.hi=function(d){return i.writeDoubleLE(d,0,!0),i.readUInt32LE(4,!0)}}T.exports.sign=function(d){return T.exports.hi(d)>>>31},T.exports.exponent=function(d){return(T.exports.hi(d)<<1>>>21)-1023},T.exports.fraction=function(d){var u=T.exports.lo(d),s=T.exports.hi(d),c=1048575&s;return 2146435072&s&&(c+=1<<20),[u,c]},T.exports.denormalized=function(d){return!(2146435072&T.exports.hi(d))}}).call(this)}).call(this,x("buffer").Buffer)},{buffer:3}],65:[function(x,T,b){"use strict";T.exports=function(e,o){switch(void 0===o&&(o=0),typeof e){case"number":if(e>0)return function(a,l){var i,d;for(i=new Array(a),d=0;d<a;++d)i[d]=l;return i}(0|e,o);break;case"object":if("number"==typeof e.length)return function a(l,i,d){var u=0|l[d];if(u<=0)return[];var s,c=new Array(u);if(d===l.length-1)for(s=0;s<u;++s)c[s]=i;else for(s=0;s<u;++s)c[s]=a(l,i,d+1);return c}(e,o,0)}return[]}},{}],66:[function(x,T,b){"use strict";T.exports=function(o,a){var l=o.length;if("number"!=typeof a){a=0;for(var i=0;i<l;++i){var d=o[i];a=Math.max(a,d[0],d[1])}a=1+(0|a)}a|=0;var u=new Array(a);for(i=0;i<a;++i)u[i]=[];for(i=0;i<l;++i)u[(d=o[i])[0]].push(d[1]),u[d[1]].push(d[0]);for(var s=0;s<a;++s)e(u[s],function(c,h){return c-h});return u};var e=x("uniq")},{uniq:310}],67:[function(x,T,b){"use strict";T.exports=function(e,o,a){var l=o||0,i=a||1;return[[e[12]+e[0],e[13]+e[1],e[14]+e[2],e[15]+e[3]],[e[12]-e[0],e[13]-e[1],e[14]-e[2],e[15]-e[3]],[e[12]+e[4],e[13]+e[5],e[14]+e[6],e[15]+e[7]],[e[12]-e[4],e[13]-e[5],e[14]-e[6],e[15]-e[7]],[l*e[12]+e[8],l*e[13]+e[9],l*e[14]+e[10],l*e[15]+e[11]],[i*e[12]-e[8],i*e[13]-e[9],i*e[14]-e[10],i*e[15]-e[11]]]}},{}],68:[function(x,T,b){"use strict";T.exports=function(u,s,c){switch(arguments.length){case 0:return new l([0],[0],0);case 1:return"number"==typeof u?new l(h=d(u),h,0):new l(u,d(u.length),0);case 2:if("number"==typeof s){var h=d(u.length);return new l(u,h,+s)}c=0;case 3:if(u.length!==s.length)throw new Error("state and velocity lengths must match");return new l(u,s,c)}};var e=x("cubic-hermite"),o=x("binary-search-bounds");function a(u,s,c){return Math.min(s,Math.max(u,c))}function l(u,s,c){this.dimension=u.length,this.bounds=[new Array(this.dimension),new Array(this.dimension)];for(var h=0;h<this.dimension;++h)this.bounds[0][h]=-1/0,this.bounds[1][h]=1/0;this._state=u.slice().reverse(),this._velocity=s.slice().reverse(),this._time=[c],this._scratch=[u.slice(),u.slice(),u.slice(),u.slice(),u.slice()]}var i=l.prototype;function d(u){for(var s=new Array(u),c=0;c<u;++c)s[c]=0;return s}i.flush=function(u){var s=o.gt(this._time,u)-1;s<=0||(this._time.splice(0,s),this._state.splice(0,s*this.dimension),this._velocity.splice(0,s*this.dimension))},i.curve=function(u){var s=this._time,c=s.length,h=o.le(s,u),p=this._scratch[0],v=this._state,g=this._velocity,f=this.dimension,w=this.bounds;if(h<0)for(var y=f-1,M=0;M<f;++M,--y)p[M]=v[y];else if(h>=c-1){y=v.length-1;var A=u-s[c-1];for(M=0;M<f;++M,--y)p[M]=v[y]+A*g[y]}else{y=f*(h+1)-1;var k=s[h],C=s[h+1]-k||1,P=this._scratch[1],D=this._scratch[2],F=this._scratch[3],R=this._scratch[4],L=!0;for(M=0;M<f;++M,--y)P[M]=v[y],F[M]=g[y]*C,D[M]=v[y+f],R[M]=g[y+f]*C,L=L&&P[M]===D[M]&&F[M]===R[M]&&0===F[M];if(L)for(M=0;M<f;++M)p[M]=P[M];else e(P,F,D,R,(u-k)/C,p)}var I=w[0],B=w[1];for(M=0;M<f;++M)p[M]=a(I[M],B[M],p[M]);return p},i.dcurve=function(u){var s=this._time,c=s.length,h=o.le(s,u),p=this._scratch[0],v=this._state,g=this._velocity,f=this.dimension;if(h>=c-1)for(var w=v.length-1,y=0;y<f;++y,--w)p[y]=g[w];else{w=f*(h+1)-1;var M=s[h],A=s[h+1]-M||1,k=this._scratch[1],C=this._scratch[2],P=this._scratch[3],D=this._scratch[4],F=!0;for(y=0;y<f;++y,--w)k[y]=v[w],P[y]=g[w]*A,C[y]=v[w+f],D[y]=g[w+f]*A,F=F&&k[y]===C[y]&&P[y]===D[y]&&0===P[y];if(F)for(y=0;y<f;++y)p[y]=0;else for(e.derivative(k,P,C,D,(u-M)/A,p),y=0;y<f;++y)p[y]/=A}return p},i.lastT=function(){var u=this._time;return u[u.length-1]},i.stable=function(){for(var u=this._velocity,s=u.length,c=this.dimension-1;c>=0;--c)if(u[--s])return!1;return!0},i.jump=function(u){var s=this.lastT(),c=this.dimension;if(!(u<s||arguments.length!==c+1)){var h=this._state,p=this._velocity,v=h.length-this.dimension,g=this.bounds,f=g[0],w=g[1];this._time.push(s,u);for(var y=0;y<2;++y)for(var M=0;M<c;++M)h.push(h[v++]),p.push(0);for(this._time.push(u),M=c;M>0;--M)h.push(a(f[M-1],w[M-1],arguments[M])),p.push(0)}},i.push=function(u){var s=this.lastT(),c=this.dimension;if(!(u<s||arguments.length!==c+1)){var h=this._state,p=this._velocity,v=h.length-this.dimension,g=u-s,f=this.bounds,w=f[0],y=f[1],M=g>1e-6?1/g:0;this._time.push(u);for(var A=c;A>0;--A){var k=a(w[A-1],y[A-1],arguments[A]);h.push(k),p.push((k-h[v++])*M)}}},i.set=function(u){var s=this.dimension;if(!(u<this.lastT()||arguments.length!==s+1)){var c=this._state,h=this._velocity,p=this.bounds,v=p[0],g=p[1];this._time.push(u);for(var f=s;f>0;--f)c.push(a(v[f-1],g[f-1],arguments[f])),h.push(0)}},i.move=function(u){var s=this.lastT(),c=this.dimension;if(!(u<=s||arguments.length!==c+1)){var h=this._state,p=this._velocity,v=h.length-this.dimension,g=this.bounds,f=g[0],w=g[1],y=u-s,M=y>1e-6?1/y:0;this._time.push(u);for(var A=c;A>0;--A){var k=arguments[A];h.push(a(f[A-1],w[A-1],h[v++]+k)),p.push(k*M)}}},i.idle=function(u){var s=this.lastT();if(!(u<s)){var c=this.dimension,h=this._state,p=this._velocity,v=h.length-c,g=this.bounds,f=g[0],w=g[1],y=u-s;this._time.push(u);for(var M=c-1;M>=0;--M)h.push(a(f[M],w[M],h[v]+y*p[v])),p.push(0),v+=1}}},{"binary-search-bounds":31,"cubic-hermite":62}],69:[function(x,T,b){"use strict";function e(f,w,y,M,A,k){this._color=f,this.key=w,this.value=y,this.left=M,this.right=A,this._count=k}function o(f){return new e(f._color,f.key,f.value,f.left,f.right,f._count)}function a(f,w){return new e(f,w.key,w.value,w.left,w.right,w._count)}function l(f){f._count=1+(f.left?f.left._count:0)+(f.right?f.right._count:0)}function i(f,w){this._compare=f,this.root=w}T.exports=function(f){return new i(f||g,null)};var d=i.prototype;function u(f,w){var y;return w.left&&(y=u(f,w.left))?y:(y=f(w.key,w.value))||(w.right?u(f,w.right):void 0)}function s(f,w,y,M){var A;return w(f,M.key)<=0&&(M.left&&(A=s(f,w,y,M.left))||(A=y(M.key,M.value)))?A:M.right?s(f,w,y,M.right):void 0}function c(f,w,y,M,A){var k,C=y(f,A.key),P=y(w,A.key);return C<=0&&(A.left&&(k=c(f,w,y,M,A.left))||P>0&&(k=M(A.key,A.value)))?k:P>0&&A.right?c(f,w,y,M,A.right):void 0}function h(f,w){this.tree=f,this._stack=w}Object.defineProperty(d,"keys",{get:function(){var f=[];return this.forEach(function(w,y){f.push(w)}),f}}),Object.defineProperty(d,"values",{get:function(){var f=[];return this.forEach(function(w,y){f.push(y)}),f}}),Object.defineProperty(d,"length",{get:function(){return this.root?this.root._count:0}}),d.insert=function(f,w){for(var y=this._compare,M=this.root,A=[],k=[];M;){var C=y(f,M.key);A.push(M),k.push(C),M=C<=0?M.left:M.right}A.push(new e(0,f,w,null,null,1));for(var P=A.length-2;P>=0;--P)M=A[P],A[P]=k[P]<=0?new e(M._color,M.key,M.value,A[P+1],M.right,M._count+1):new e(M._color,M.key,M.value,M.left,A[P+1],M._count+1);for(P=A.length-1;P>1;--P){var D=A[P-1];if(M=A[P],1===D._color||1===M._color)break;var F=A[P-2];if(F.left===D)if(D.left===M){if(!(R=F.right)||0!==R._color){F._color=0,F.left=D.right,D._color=1,D.right=F,A[P-2]=D,A[P-1]=M,l(F),l(D),P>=3&&((L=A[P-3]).left===F?L.left=D:L.right=D);break}D._color=1,F.right=a(1,R),F._color=0,P-=1}else{if(!(R=F.right)||0!==R._color){D.right=M.left,F._color=0,F.left=M.right,M._color=1,M.left=D,M.right=F,A[P-2]=M,A[P-1]=D,l(F),l(D),l(M),P>=3&&((L=A[P-3]).left===F?L.left=M:L.right=M);break}D._color=1,F.right=a(1,R),F._color=0,P-=1}else if(D.right===M){if(!(R=F.left)||0!==R._color){F._color=0,F.right=D.left,D._color=1,D.left=F,A[P-2]=D,A[P-1]=M,l(F),l(D),P>=3&&((L=A[P-3]).right===F?L.right=D:L.left=D);break}D._color=1,F.left=a(1,R),F._color=0,P-=1}else{var R;if(!(R=F.left)||0!==R._color){var L;D.left=M.right,F._color=0,F.right=M.left,M._color=1,M.right=D,M.left=F,A[P-2]=M,A[P-1]=D,l(F),l(D),l(M),P>=3&&((L=A[P-3]).right===F?L.right=M:L.left=M);break}D._color=1,F.left=a(1,R),F._color=0,P-=1}}return A[0]._color=1,new i(y,A[0])},d.forEach=function(f,w,y){if(this.root)switch(arguments.length){case 1:return u(f,this.root);case 2:return s(w,this._compare,f,this.root);case 3:return this._compare(w,y)>=0?void 0:c(w,y,this._compare,f,this.root)}},Object.defineProperty(d,"begin",{get:function(){for(var f=[],w=this.root;w;)f.push(w),w=w.left;return new h(this,f)}}),Object.defineProperty(d,"end",{get:function(){for(var f=[],w=this.root;w;)f.push(w),w=w.right;return new h(this,f)}}),d.at=function(f){if(f<0)return new h(this,[]);for(var w=this.root,y=[];;){if(y.push(w),w.left){if(f<w.left._count){w=w.left;continue}f-=w.left._count}if(!f)return new h(this,y);if(f-=1,!w.right||f>=w.right._count)break;w=w.right}return new h(this,[])},d.ge=function(f){for(var w=this._compare,y=this.root,M=[],A=0;y;){var k=w(f,y.key);M.push(y),k<=0&&(A=M.length),y=k<=0?y.left:y.right}return M.length=A,new h(this,M)},d.gt=function(f){for(var w=this._compare,y=this.root,M=[],A=0;y;){var k=w(f,y.key);M.push(y),k<0&&(A=M.length),y=k<0?y.left:y.right}return M.length=A,new h(this,M)},d.lt=function(f){for(var w=this._compare,y=this.root,M=[],A=0;y;){var k=w(f,y.key);M.push(y),k>0&&(A=M.length),y=k<=0?y.left:y.right}return M.length=A,new h(this,M)},d.le=function(f){for(var w=this._compare,y=this.root,M=[],A=0;y;){var k=w(f,y.key);M.push(y),k>=0&&(A=M.length),y=k<0?y.left:y.right}return M.length=A,new h(this,M)},d.find=function(f){for(var w=this._compare,y=this.root,M=[];y;){var A=w(f,y.key);if(M.push(y),0===A)return new h(this,M);y=A<=0?y.left:y.right}return new h(this,[])},d.remove=function(f){var w=this.find(f);return w?w.remove():this},d.get=function(f){for(var w=this._compare,y=this.root;y;){var M=w(f,y.key);if(0===M)return y.value;y=M<=0?y.left:y.right}};var p=h.prototype;function v(f,w){f.key=w.key,f.value=w.value,f.left=w.left,f.right=w.right,f._color=w._color,f._count=w._count}function g(f,w){return f<w?-1:f>w?1:0}Object.defineProperty(p,"valid",{get:function(){return this._stack.length>0}}),Object.defineProperty(p,"node",{get:function(){return this._stack.length>0?this._stack[this._stack.length-1]:null},enumerable:!0}),p.clone=function(){return new h(this.tree,this._stack.slice())},p.remove=function(){var f=this._stack;if(0===f.length)return this.tree;var w=new Array(f.length),y=f[f.length-1];w[w.length-1]=new e(y._color,y.key,y.value,y.left,y.right,y._count);for(var M=f.length-2;M>=0;--M)w[M]=(y=f[M]).left===f[M+1]?new e(y._color,y.key,y.value,w[M+1],y.right,y._count):new e(y._color,y.key,y.value,y.left,w[M+1],y._count);if((y=w[w.length-1]).left&&y.right){var A=w.length;for(y=y.left;y.right;)w.push(y),y=y.right;var k=w[A-1];for(w.push(new e(y._color,k.key,k.value,y.left,y.right,y._count)),w[A-1].key=y.key,w[A-1].value=y.value,M=w.length-2;M>=A;--M)w[M]=new e((y=w[M])._color,y.key,y.value,y.left,w[M+1],y._count);w[A-1].left=w[A]}if(0===(y=w[w.length-1])._color){var C=w[w.length-2];for(C.left===y?C.left=null:C.right===y&&(C.right=null),w.pop(),M=0;M<w.length;++M)w[M]._count--;return new i(this.tree._compare,w[0])}if(y.left||y.right){for(y.left?v(y,y.left):y.right&&v(y,y.right),y._color=1,M=0;M<w.length-1;++M)w[M]._count--;return new i(this.tree._compare,w[0])}if(1===w.length)return new i(this.tree._compare,null);for(M=0;M<w.length;++M)w[M]._count--;var P=w[w.length-2];return function(D){for(var F,R,L,I,B=D.length-1;B>=0;--B){if(F=D[B],0===B)return void(F._color=1);if((R=D[B-1]).left===F){if((L=R.right).right&&0===L.right._color)return I=(L=R.right=o(L)).right=o(L.right),R.right=L.left,L.left=R,L.right=I,L._color=R._color,F._color=1,R._color=1,I._color=1,l(R),l(L),B>1&&((V=D[B-2]).left===R?V.left=L:V.right=L),void(D[B-1]=L);if(L.left&&0===L.left._color)return I=(L=R.right=o(L)).left=o(L.left),R.right=I.left,L.left=I.right,I.left=R,I.right=L,I._color=R._color,R._color=1,L._color=1,F._color=1,l(R),l(L),l(I),B>1&&((V=D[B-2]).left===R?V.left=I:V.right=I),void(D[B-1]=I);if(1===L._color){if(0===R._color)return R._color=1,void(R.right=a(0,L));R.right=a(0,L);continue}L=o(L),R.right=L.left,L.left=R,L._color=R._color,R._color=0,l(R),l(L),B>1&&((V=D[B-2]).left===R?V.left=L:V.right=L),D[B-1]=L,D[B]=R,B+1<D.length?D[B+1]=F:D.push(F),B+=2}else{if((L=R.left).left&&0===L.left._color)return I=(L=R.left=o(L)).left=o(L.left),R.left=L.right,L.right=R,L.left=I,L._color=R._color,F._color=1,R._color=1,I._color=1,l(R),l(L),B>1&&((V=D[B-2]).right===R?V.right=L:V.left=L),void(D[B-1]=L);if(L.right&&0===L.right._color)return I=(L=R.left=o(L)).right=o(L.right),R.left=I.right,L.right=I.left,I.right=R,I.left=L,I._color=R._color,R._color=1,L._color=1,F._color=1,l(R),l(L),l(I),B>1&&((V=D[B-2]).right===R?V.right=I:V.left=I),void(D[B-1]=I);if(1===L._color){if(0===R._color)return R._color=1,void(R.left=a(0,L));R.left=a(0,L);continue}var V;L=o(L),R.left=L.right,L.right=R,L._color=R._color,R._color=0,l(R),l(L),B>1&&((V=D[B-2]).right===R?V.right=L:V.left=L),D[B-1]=L,D[B]=R,B+1<D.length?D[B+1]=F:D.push(F),B+=2}}}(w),P.left===y?P.left=null:P.right=null,new i(this.tree._compare,w[0])},Object.defineProperty(p,"key",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(p,"value",{get:function(){if(this._stack.length>0)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(p,"index",{get:function(){var f=0,w=this._stack;if(0===w.length){var y=this.tree.root;return y?y._count:0}w[w.length-1].left&&(f=w[w.length-1].left._count);for(var M=w.length-2;M>=0;--M)w[M+1]===w[M].right&&(++f,w[M].left&&(f+=w[M].left._count));return f},enumerable:!0}),p.next=function(){var f=this._stack;if(0!==f.length){var w=f[f.length-1];if(w.right)for(w=w.right;w;)f.push(w),w=w.left;else for(f.pop();f.length>0&&f[f.length-1].right===w;)w=f[f.length-1],f.pop()}},Object.defineProperty(p,"hasNext",{get:function(){var f=this._stack;if(0===f.length)return!1;if(f[f.length-1].right)return!0;for(var w=f.length-1;w>0;--w)if(f[w-1].left===f[w])return!0;return!1}}),p.update=function(f){var w=this._stack;if(0===w.length)throw new Error("Can't update empty node!");var y=new Array(w.length),M=w[w.length-1];y[y.length-1]=new e(M._color,M.key,f,M.left,M.right,M._count);for(var A=w.length-2;A>=0;--A)y[A]=(M=w[A]).left===w[A+1]?new e(M._color,M.key,M.value,y[A+1],M.right,M._count):new e(M._color,M.key,M.value,M.left,y[A+1],M._count);return new i(this.tree._compare,y[0])},p.prev=function(){var f=this._stack;if(0!==f.length){var w=f[f.length-1];if(w.left)for(w=w.left;w;)f.push(w),w=w.right;else for(f.pop();f.length>0&&f[f.length-1].left===w;)w=f[f.length-1],f.pop()}},Object.defineProperty(p,"hasPrev",{get:function(){var f=this._stack;if(0===f.length)return!1;if(f[f.length-1].left)return!0;for(var w=f.length-1;w>0;--w)if(f[w-1].right===f[w])return!0;return!1}})},{}],70:[function(x,T,b){"use strict";T.exports=function(A,k){var C=new s(A);return C.update(k),C};var e=x("./lib/text.js"),o=x("./lib/lines.js"),a=x("./lib/background.js"),l=x("./lib/cube.js"),i=x("./lib/ticks.js"),d=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);function u(A,k){return A[0]=k[0],A[1]=k[1],A[2]=k[2],A}function s(A){this.gl=A,this.pixelRatio=1,this.bounds=[[-10,-10,-10],[10,10,10]],this.ticks=[[],[],[]],this.autoTicks=!0,this.tickSpacing=[1,1,1],this.tickEnable=[!0,!0,!0],this.tickFont=["sans-serif","sans-serif","sans-serif"],this.tickSize=[12,12,12],this.tickAngle=[0,0,0],this.tickAlign=["auto","auto","auto"],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[10,10,10],this.lastCubeProps={cubeEdges:[0,0,0],axis:[0,0,0]},this.labels=["x","y","z"],this.labelEnable=[!0,!0,!0],this.labelFont="sans-serif",this.labelSize=[20,20,20],this.labelAngle=[0,0,0],this.labelAlign=["auto","auto","auto"],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[10,10,10],this.lineEnable=[!0,!0,!0],this.lineMirror=[!1,!1,!1],this.lineWidth=[1,1,1],this.lineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.lineTickEnable=[!0,!0,!0],this.lineTickMirror=[!1,!1,!1],this.lineTickLength=[0,0,0],this.lineTickWidth=[1,1,1],this.lineTickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.gridEnable=[!0,!0,!0],this.gridWidth=[1,1,1],this.gridColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroEnable=[!0,!0,!0],this.zeroLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.zeroLineWidth=[2,2,2],this.backgroundEnable=[!1,!1,!1],this.backgroundColor=[[.8,.8,.8,.5],[.8,.8,.8,.5],[.8,.8,.8,.5]],this._firstInit=!0,this._text=null,this._lines=null,this._background=a(A)}var c=s.prototype;function h(){this.primalOffset=[0,0,0],this.primalMinor=[0,0,0],this.mirrorOffset=[0,0,0],this.mirrorMinor=[0,0,0]}c.update=function(A){function k(ee,J,$){if($ in A){var Q,se=A[$],j=this[$];this[$]=Q=(ee?Array.isArray(se)&&Array.isArray(se[0]):Array.isArray(se))?[J(se[0]),J(se[1]),J(se[2])]:[J(se),J(se),J(se)];for(var G=0;G<3;++G)if(Q[G]!==j[G])return!0}return!1}A=A||{};var C,P=k.bind(this,!1,Number),D=k.bind(this,!1,Boolean),F=k.bind(this,!1,String),R=k.bind(this,!0,function(ee){if(Array.isArray(ee)){if(3===ee.length)return[+ee[0],+ee[1],+ee[2],1];if(4===ee.length)return[+ee[0],+ee[1],+ee[2],+ee[3]]}return[0,0,0,1]}),L=!1,I=!1;if("bounds"in A)for(var B=A.bounds,V=0;V<2;++V)for(var Z=0;Z<3;++Z)B[V][Z]!==this.bounds[V][Z]&&(I=!0),this.bounds[V][Z]=B[V][Z];if("ticks"in A)for(C=A.ticks,L=!0,this.autoTicks=!1,V=0;V<3;++V)this.tickSpacing[V]=0;else P("tickSpacing")&&(this.autoTicks=!0,I=!0);if(this._firstInit&&("ticks"in A||"tickSpacing"in A||(this.autoTicks=!0),I=!0,L=!0,this._firstInit=!1),I&&this.autoTicks&&(C=i.create(this.bounds,this.tickSpacing),L=!0),L){for(V=0;V<3;++V)C[V].sort(function(ee,J){return ee.x-J.x});i.equal(C,this.ticks)?L=!1:this.ticks=C}D("tickEnable"),F("tickFont")&&(L=!0),P("tickSize"),P("tickAngle"),P("tickPad"),R("tickColor");var Y=F("labels");F("labelFont")&&(Y=!0),D("labelEnable"),P("labelSize"),P("labelPad"),R("labelColor"),D("lineEnable"),D("lineMirror"),P("lineWidth"),R("lineColor"),D("lineTickEnable"),D("lineTickMirror"),P("lineTickLength"),P("lineTickWidth"),R("lineTickColor"),D("gridEnable"),P("gridWidth"),R("gridColor"),D("zeroEnable"),R("zeroLineColor"),P("zeroLineWidth"),D("backgroundEnable"),R("backgroundColor"),this._text?this._text&&(Y||L)&&this._text.update(this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont):this._text=e(this.gl,this.bounds,this.labels,this.labelFont,this.ticks,this.tickFont),this._lines&&L&&(this._lines.dispose(),this._lines=null),this._lines||(this._lines=o(this.gl,this.bounds,this.ticks))};var p=[new h,new h,new h];function v(A,k,C,P,D){for(var F=A.primalOffset,R=A.primalMinor,L=A.mirrorOffset,I=A.mirrorMinor,B=P[k],V=0;V<3;++V)if(k!==V){var Z=F,Y=L,ee=R,J=I;B&1<<V&&(Z=L,Y=F,ee=I,J=R),Z[V]=C[0][V],Y[V]=C[1][V],D[V]>0?(ee[V]=-1,J[V]=0):(ee[V]=0,J[V]=1)}}var g=[0,0,0],f={model:d,view:d,projection:d,_ortho:!1};c.isOpaque=function(){return!0},c.isTransparent=function(){return!1},c.drawTransparent=function(A){};var w=[0,0,0],y=[0,0,0],M=[0,0,0];c.draw=function(A){for(var k=this.gl,C=(A=A||f).model||d,P=A.view||d,D=A.projection||d,F=this.bounds,R=A._ortho||!1,L=l(C,P,D,F,R),I=L.cubeEdges,B=L.axis,J=(R?2:1)*this.pixelRatio*(D[3]*P[12]+D[7]*P[13]+D[11]*P[14]+D[15]*P[15])/k.drawingBufferHeight,$=0;$<3;++$)this.lastCubeProps.cubeEdges[$]=I[$],this.lastCubeProps.axis[$]=B[$];var Q=p;for($=0;$<3;++$)v(p[$],$,this.bounds,I,B);k=this.gl;var se,de,he,Fe,ve,Te,Le,Ee,Pe,je,Ge,Ke,j=g;for($=0;$<3;++$)j[$]=this.backgroundEnable[$]?B[$]:0;for(this._background.draw(C,P,D,F,j,this.backgroundColor),this._lines.bind(C,P,D,this),$=0;$<3;++$){var G=[0,0,0];G[$]=B[$]>0?F[1][$]:F[0][$];for(var W=0;W<2;++W){var ie=($+1+W)%3,q=($+1+(1^W))%3;this.gridEnable[ie]&&this._lines.drawGrid(ie,q,this.bounds,G,this.gridColor[ie],this.gridWidth[ie]*this.pixelRatio)}for(W=0;W<2;++W)ie=($+1+W)%3,this.zeroEnable[q=($+1+(1^W))%3]&&Math.min(F[0][q],F[1][q])<=0&&Math.max(F[0][q],F[1][q])>=0&&this._lines.drawZero(ie,q,this.bounds,G,this.zeroLineColor[q],this.zeroLineWidth[q]*this.pixelRatio)}for($=0;$<3;++$){this.lineEnable[$]&&this._lines.drawAxisLine($,this.bounds,Q[$].primalOffset,this.lineColor[$],this.lineWidth[$]*this.pixelRatio),this.lineMirror[$]&&this._lines.drawAxisLine($,this.bounds,Q[$].mirrorOffset,this.lineColor[$],this.lineWidth[$]*this.pixelRatio);var te=u(w,Q[$].primalMinor),ne=u(y,Q[$].mirrorMinor),le=this.lineTickLength;for(W=0;W<3;++W){var ue=J/C[5*W];te[W]*=le[W]*ue,ne[W]*=le[W]*ue}this.lineTickEnable[$]&&this._lines.drawAxisTicks($,Q[$].primalOffset,te,this.lineTickColor[$],this.lineTickWidth[$]*this.pixelRatio),this.lineTickMirror[$]&&this._lines.drawAxisTicks($,Q[$].mirrorOffset,ne,this.lineTickColor[$],this.lineTickWidth[$]*this.pixelRatio)}function be(Fe){(he=[0,0,0])[Fe]=1}for(this._lines.unbind(),this._text.bind(C,P,D,this.pixelRatio),$=0;$<3;++$){var we=Q[$].primalMinor,Ce=Q[$].mirrorMinor,De=u(M,Q[$].primalOffset);for(W=0;W<3;++W)this.lineTickEnable[$]&&(De[W]+=J*we[W]*Math.max(this.lineTickLength[W],0)/C[5*W]);var Se=[0,0,0];if(Se[$]=1,this.tickEnable[$]){for(-3600===this.tickAngle[$]?(this.tickAngle[$]=0,this.tickAlign[$]="auto"):this.tickAlign[$]=-1,se[0]="auto"===(se=[this.tickAlign[$],.5,de=1])[0]?0:parseInt(""+se[0]),he=[0,0,0],Le=void 0,Ee=void 0,Pe=void 0,je=void 0,Ge=void 0,Ke=void 0,je=(ve=we)[Ee=((Fe=$)+2)%3],Ge=(Te=Ce)[Le=(Fe+1)%3],Ke=Te[Ee],(Pe=ve[Le])>0&&Ke>0||Pe>0&&Ke<0||Pe<0&&Ke>0||Pe<0&&Ke<0?be(Le):(je>0&&Ge>0||je>0&&Ge<0||je<0&&Ge>0||je<0&&Ge<0)&&be(Ee),W=0;W<3;++W)De[W]+=J*we[W]*this.tickPad[W]/C[5*W];this._text.drawTicks($,this.tickSize[$],this.tickAngle[$],De,this.tickColor[$],Se,he,se)}if(this.labelEnable[$]){for(de=0,he=[0,0,0],this.labels[$].length>4&&(be($),de=1),se[0]="auto"===(se=[this.labelAlign[$],.5,de])[0]?0:parseInt(""+se[0]),W=0;W<3;++W)De[W]+=J*we[W]*this.labelPad[W]/C[5*W];De[$]+=.5*(F[0][$]+F[1][$]),this._text.drawLabel($,this.labelSize[$],this.labelAngle[$],De,this.labelColor[$],[0,0,0],he,se)}}this._text.unbind()},c.dispose=function(){this._text.dispose(),this._lines.dispose(),this._background.dispose(),this._lines=null,this._text=null,this._background=null,this.gl=null}},{"./lib/background.js":71,"./lib/cube.js":72,"./lib/lines.js":73,"./lib/text.js":75,"./lib/ticks.js":76}],71:[function(x,T,b){"use strict";T.exports=function(d){for(var u=[],s=[],c=0,h=0;h<3;++h)for(var p=(h+1)%3,v=(h+2)%3,g=[0,0,0],f=[0,0,0],w=-1;w<=1;w+=2){s.push(c,c+2,c+1,c+1,c+2,c+3),g[h]=w,f[h]=w;for(var y=-1;y<=1;y+=2){g[p]=y;for(var M=-1;M<=1;M+=2)g[v]=M,u.push(g[0],g[1],g[2],f[0],f[1],f[2]),c+=1}var A=p;p=v,v=A}var k=e(d,new Float32Array(u)),C=e(d,new Uint16Array(s),d.ELEMENT_ARRAY_BUFFER),P=o(d,[{buffer:k,type:d.FLOAT,size:3,offset:0,stride:24},{buffer:k,type:d.FLOAT,size:3,offset:12,stride:24}],C),D=a(d);return D.attributes.position.location=0,D.attributes.normal.location=1,new l(d,k,P,D)};var e=x("gl-buffer"),o=x("gl-vao"),a=x("./shaders").bg;function l(d,u,s,c){this.gl=d,this.buffer=u,this.vao=s,this.shader=c}var i=l.prototype;i.draw=function(d,u,s,c,h,p){for(var v=!1,g=0;g<3;++g)v=v||h[g];if(v){var f=this.gl;f.enable(f.POLYGON_OFFSET_FILL),f.polygonOffset(1,2),this.shader.bind(),this.shader.uniforms={model:d,view:u,projection:s,bounds:c,enable:h,colors:p},this.vao.bind(),this.vao.draw(this.gl.TRIANGLES,36),this.vao.unbind(),f.disable(f.POLYGON_OFFSET_FILL)}},i.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],72:[function(x,T,b){"use strict";T.exports=function(y,M,A,k,C){o(i,M,y),o(i,A,i);for(var P=0,D=0;D<2;++D){s[2]=k[D][2];for(var F=0;F<2;++F){s[1]=k[F][1];for(var R=0;R<2;++R)s[0]=k[R][0],h(d[P],s,i),P+=1}}var L=-1;for(D=0;D<8;++D){for(var I=d[D][3],B=0;B<3;++B)u[D][B]=d[D][B]/I;C&&(u[D][2]*=-1),I<0&&(L<0||u[D][2]<u[L][2])&&(L=D)}if(L<0){L=0;for(var V=0;V<3;++V){for(var Z=(V+2)%3,Y=(V+1)%3,ee=-1,J=-1,$=0;$<2;++$){var Q=(j=$<<V)+($<<Z)+(1-$<<Y),se=j+(1-$<<Z)+($<<Y);l(u[j],u[Q],u[se],c)<0||($?ee=1:J=1)}if(ee<0||J<0)J>ee&&(L|=1<<V);else{for($=0;$<2;++$){Q=(j=$<<V)+($<<Z)+(1-$<<Y);var j,G=v([d[j],d[Q],d[se=j+(1-$<<Z)+($<<Y)],d[j+(1<<Z)+(1<<Y)]]);$?ee=G:J=G}J>ee&&(L|=1<<V)}}}var W=7^L,ie=-1;for(D=0;D<8;++D)D!==L&&D!==W&&(ie<0||u[ie][1]>u[D][1])&&(ie=D);var q=-1;for(D=0;D<3;++D)(ne=ie^1<<D)!==L&&ne!==W&&(q<0&&(q=ne),(Y=u[ne])[0]<u[q][0]&&(q=ne));var te=-1;for(D=0;D<3;++D){var ne;(ne=ie^1<<D)!==L&&ne!==W&&ne!==q&&(te<0&&(te=ne),(Y=u[ne])[0]>u[te][0]&&(te=ne))}var le=g;le[0]=le[1]=le[2]=0,le[e.log2(q^ie)]=ie&q,le[e.log2(ie^te)]=ie&te;var ue=7^te;ue===L||ue===W?le[e.log2(te^(ue=7^q))]=ue&te:le[e.log2(q^ue)]=ue&q;var de=f,he=L;for(V=0;V<3;++V)de[V]=he&1<<V?-1:1;return w};var e=x("bit-twiddle"),o=x("gl-mat4/multiply"),a=x("split-polygon"),l=x("robust-orientation"),i=new Array(16),d=new Array(8),u=new Array(8),s=new Array(3),c=[0,0,0];function h(y,M,A){for(var k=0;k<4;++k){y[k]=A[12+k];for(var C=0;C<3;++C)y[k]+=M[C]*A[4*C+k]}}!function(){for(var y=0;y<8;++y)d[y]=[1,1,1,1],u[y]=[1,1,1]}();var p=[[0,0,1,0,0],[0,0,-1,1,0],[0,-1,0,1,0],[0,1,0,1,0],[-1,0,0,1,0],[1,0,0,1,0]];function v(y){for(var M=0;M<p.length;++M)if((y=a.positive(y,p[M])).length<3)return 0;var A=y[0],k=A[0]/A[3],C=A[1]/A[3],P=0;for(M=1;M+1<y.length;++M){var D=y[M],F=y[M+1];P+=Math.abs((D[0]/D[3]-k)*(F[1]/F[3]-C)-(D[1]/D[3]-C)*(F[0]/F[3]-k))}return P}var g=[1,1,1],f=[0,0,0],w={cubeEdges:g,axis:f}},{"bit-twiddle":32,"gl-mat4/multiply":100,"robust-orientation":284,"split-polygon":300}],73:[function(x,T,b){"use strict";T.exports=function(g,f,w){var y=[],M=[0,0,0],A=[0,0,0],k=[0,0,0],C=[0,0,0];y.push(0,0,1,0,1,1,0,0,-1,0,0,-1,0,1,1,0,1,-1);for(var P=0;P<3;++P){for(var D=y.length/3|0,F=0;F<w[P].length;++F){var R=+w[P][F].x;y.push(R,0,1,R,1,1,R,0,-1,R,0,-1,R,1,1,R,1,-1)}var L=y.length/3|0;M[P]=D,A[P]=L-D,D=y.length/3|0;for(var I=0;I<w[P].length;++I)y.push(R=+w[P][I].x,0,1,R,1,1,R,0,-1,R,0,-1,R,1,1,R,1,-1);L=y.length/3|0,k[P]=D,C[P]=L-D}var B=e(g,new Float32Array(y)),V=o(g,[{buffer:B,type:g.FLOAT,size:3,stride:0,offset:0}]),Z=a(g);return Z.attributes.position.location=0,new p(g,B,V,Z,A,M,C,k)};var e=x("gl-buffer"),o=x("gl-vao"),a=x("./shaders").line,l=[0,0,0],i=[0,0,0],d=[0,0,0],u=[0,0,0],s=[1,1];function c(g){return g[0]=g[1]=g[2]=0,g}function h(g,f){return g[0]=f[0],g[1]=f[1],g[2]=f[2],g}function p(g,f,w,y,M,A,k,C){this.gl=g,this.vertBuffer=f,this.vao=w,this.shader=y,this.tickCount=M,this.tickOffset=A,this.gridCount=k,this.gridOffset=C}var v=p.prototype;v.bind=function(g,f,w){this.shader.bind(),this.shader.uniforms.model=g,this.shader.uniforms.view=f,this.shader.uniforms.projection=w,s[0]=this.gl.drawingBufferWidth,s[1]=this.gl.drawingBufferHeight,this.shader.uniforms.screenShape=s,this.vao.bind()},v.unbind=function(){this.vao.unbind()},v.drawAxisLine=function(g,f,w,y,M){var A=c(i);this.shader.uniforms.majorAxis=i,A[g]=f[1][g]-f[0][g],this.shader.uniforms.minorAxis=A;var k,C=h(u,w);C[g]+=f[0][g],this.shader.uniforms.offset=C,this.shader.uniforms.lineWidth=M,this.shader.uniforms.color=y,(k=c(d))[(g+2)%3]=1,this.shader.uniforms.screenAxis=k,this.vao.draw(this.gl.TRIANGLES,6),(k=c(d))[(g+1)%3]=1,this.shader.uniforms.screenAxis=k,this.vao.draw(this.gl.TRIANGLES,6)},v.drawAxisTicks=function(g,f,w,y,M){if(this.tickCount[g]){var A=c(l);A[g]=1,this.shader.uniforms.majorAxis=A,this.shader.uniforms.offset=f,this.shader.uniforms.minorAxis=w,this.shader.uniforms.color=y,this.shader.uniforms.lineWidth=M;var k=c(d);k[g]=1,this.shader.uniforms.screenAxis=k,this.vao.draw(this.gl.TRIANGLES,this.tickCount[g],this.tickOffset[g])}},v.drawGrid=function(g,f,w,y,M,A){if(this.gridCount[g]){var k=c(i);k[f]=w[1][f]-w[0][f],this.shader.uniforms.minorAxis=k;var C=h(u,y);C[f]+=w[0][f],this.shader.uniforms.offset=C;var P=c(l);P[g]=1,this.shader.uniforms.majorAxis=P;var D=c(d);D[g]=1,this.shader.uniforms.screenAxis=D,this.shader.uniforms.lineWidth=A,this.shader.uniforms.color=M,this.vao.draw(this.gl.TRIANGLES,this.gridCount[g],this.gridOffset[g])}},v.drawZero=function(g,f,w,y,M,A){var k=c(i);this.shader.uniforms.majorAxis=k,k[g]=w[1][g]-w[0][g],this.shader.uniforms.minorAxis=k;var C=h(u,y);C[g]+=w[0][g],this.shader.uniforms.offset=C;var P=c(d);P[f]=1,this.shader.uniforms.screenAxis=P,this.shader.uniforms.lineWidth=A,this.shader.uniforms.color=M,this.vao.draw(this.gl.TRIANGLES,6)},v.dispose=function(){this.vao.dispose(),this.vertBuffer.dispose(),this.shader.dispose()}},{"./shaders":74,"gl-buffer":78,"gl-vao":150}],74:[function(x,T,b){"use strict";var e=x("glslify"),o=x("gl-shader"),a=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, majorAxis, minorAxis, screenAxis;\nuniform float lineWidth;\nuniform vec2 screenShape;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nvoid main() {\n  vec3 major = position.x * majorAxis;\n  vec3 minor = position.y * minorAxis;\n\n  vec3 vPosition = major + minor + offset;\n  vec3 pPosition = project(vPosition);\n  vec3 offset = project(vPosition + screenAxis * position.z);\n\n  vec2 screen = normalize((offset - pPosition).xy * screenShape) / screenShape;\n\n  gl_Position = vec4(pPosition + vec3(0.5 * screen * lineWidth, 0), 1.0);\n}\n"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);b.line=function(c){return o(c,a,l,null,[{name:"position",type:"vec3"}])};var i=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\nuniform vec3 offset, axis, alignDir, alignOpt;\nuniform float scale, angle, pixelScale;\nuniform vec2 resolution;\n\nvec3 project(vec3 p) {\n  vec4 pp = projection * view * model * vec4(p, 1.0);\n  return pp.xyz / max(pp.w, 0.0001);\n}\n\nfloat computeViewAngle(vec3 a, vec3 b) {\n  vec3 A = project(a);\n  vec3 B = project(b);\n\n  return atan(\n    (B.y - A.y) * resolution.y,\n    (B.x - A.x) * resolution.x\n  );\n}\n\nconst float PI = 3.141592;\nconst float TWO_PI = 2.0 * PI;\nconst float HALF_PI = 0.5 * PI;\nconst float ONE_AND_HALF_PI = 1.5 * PI;\n\nint option = int(floor(alignOpt.x + 0.001));\nfloat hv_ratio =       alignOpt.y;\nbool enableAlign =    (alignOpt.z != 0.0);\n\nfloat mod_angle(float a) {\n  return mod(a, PI);\n}\n\nfloat positive_angle(float a) {\n  return mod_angle((a < 0.0) ?\n    a + TWO_PI :\n    a\n  );\n}\n\nfloat look_upwards(float a) {\n  float b = positive_angle(a);\n  return ((b > HALF_PI) && (b <= ONE_AND_HALF_PI)) ?\n    b - PI :\n    b;\n}\n\nfloat look_horizontal_or_vertical(float a, float ratio) {\n  // ratio controls the ratio between being horizontal to (vertical + horizontal)\n  // if ratio is set to 0.5 then it is 50%, 50%.\n  // when using a higher ratio e.g. 0.75 the result would\n  // likely be more horizontal than vertical.\n\n  float b = positive_angle(a);\n\n  return\n    (b < (      ratio) * HALF_PI) ? 0.0 :\n    (b < (2.0 - ratio) * HALF_PI) ? -HALF_PI :\n    (b < (2.0 + ratio) * HALF_PI) ? 0.0 :\n    (b < (4.0 - ratio) * HALF_PI) ? HALF_PI :\n                                    0.0;\n}\n\nfloat roundTo(float a, float b) {\n  return float(b * floor((a + 0.5 * b) / b));\n}\n\nfloat look_round_n_directions(float a, int n) {\n  float b = positive_angle(a);\n  float div = TWO_PI / float(n);\n  float c = roundTo(b, div);\n  return look_upwards(c);\n}\n\nfloat applyAlignOption(float rawAngle, float delta) {\n  return\n    (option >  2) ? look_round_n_directions(rawAngle + delta, option) :       // option 3-n: round to n directions\n    (option == 2) ? look_horizontal_or_vertical(rawAngle + delta, hv_ratio) : // horizontal or vertical\n    (option == 1) ? rawAngle + delta :       // use free angle, and flip to align with one direction of the axis\n    (option == 0) ? look_upwards(rawAngle) : // use free angle, and stay upwards\n    (option ==-1) ? 0.0 :                    // useful for backward compatibility, all texts remains horizontal\n                    rawAngle;                // otherwise return back raw input angle\n}\n\nbool isAxisTitle = (axis.x == 0.0) &&\n                   (axis.y == 0.0) &&\n                   (axis.z == 0.0);\n\nvoid main() {\n  //Compute world offset\n  float axisDistance = position.z;\n  vec3 dataPosition = axisDistance * axis + offset;\n\n  float beta = angle; // i.e. user defined attributes for each tick\n\n  float axisAngle;\n  float clipAngle;\n  float flip;\n\n  if (enableAlign) {\n    axisAngle = (isAxisTitle) ? HALF_PI :\n                      computeViewAngle(dataPosition, dataPosition + axis);\n    clipAngle = computeViewAngle(dataPosition, dataPosition + alignDir);\n\n    axisAngle += (sin(axisAngle) < 0.0) ? PI : 0.0;\n    clipAngle += (sin(clipAngle) < 0.0) ? PI : 0.0;\n\n    flip = (dot(vec2(cos(axisAngle), sin(axisAngle)),\n                vec2(sin(clipAngle),-cos(clipAngle))) > 0.0) ? 1.0 : 0.0;\n\n    beta += applyAlignOption(clipAngle, flip * PI);\n  }\n\n  //Compute plane offset\n  vec2 planeCoord = position.xy * pixelScale;\n\n  mat2 planeXform = scale * mat2(\n     cos(beta), sin(beta),\n    -sin(beta), cos(beta)\n  );\n\n  vec2 viewOffset = 2.0 * planeXform * planeCoord / resolution;\n\n  //Compute clip position\n  vec3 clipPosition = project(dataPosition);\n\n  //Apply text offset in clip coordinates\n  clipPosition += vec3(viewOffset, 0.0);\n\n  //Done\n  gl_Position = vec4(clipPosition, 1.0);\n}"]),d=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = color;\n}"]);b.text=function(c){return o(c,i,d,null,[{name:"position",type:"vec3"}])};var u=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec3 normal;\n\nuniform mat4 model, view, projection;\nuniform vec3 enable;\nuniform vec3 bounds[2];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n\n  vec3 signAxis = sign(bounds[1] - bounds[0]);\n\n  vec3 realNormal = signAxis * normal;\n\n  if(dot(realNormal, enable) > 0.0) {\n    vec3 minRange = min(bounds[0], bounds[1]);\n    vec3 maxRange = max(bounds[0], bounds[1]);\n    vec3 nPosition = mix(minRange, maxRange, 0.5 * (position + 1.0));\n    gl_Position = projection * view * model * vec4(nPosition, 1.0);\n  } else {\n    gl_Position = vec4(0,0,0,0);\n  }\n\n  colorChannel = abs(realNormal);\n}"]),s=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec4 colors[3];\n\nvarying vec3 colorChannel;\n\nvoid main() {\n  gl_FragColor = colorChannel.x * colors[0] +\n                 colorChannel.y * colors[1] +\n                 colorChannel.z * colors[2];\n}"]);b.bg=function(c){return o(c,u,s,null,[{name:"position",type:"vec3"},{name:"normal",type:"vec3"}])}},{"gl-shader":132,glslify:231}],75:[function(x,T,b){(function(e){(function(){"use strict";T.exports=function(p,v,g,f,w,y){var M=o(p),A=a(p,[{buffer:M,size:3}]),k=i(p);k.attributes.position.location=0;var C=new s(p,k,M,A);return C.update(v,g,f,w,y),C};var o=x("gl-buffer"),a=x("gl-vao"),l=x("vectorize-text"),i=x("./shaders").text,d=window||e.global||{},u=d.__TEXT_CACHE||{};function s(p,v,g,f){this.gl=p,this.shader=v,this.buffer=g,this.vao=f,this.tickOffset=this.tickCount=this.labelOffset=this.labelCount=null}d.__TEXT_CACHE={};var c=s.prototype,h=[0,0];c.bind=function(p,v,g,f){this.vao.bind(),this.shader.bind();var w=this.shader.uniforms;w.model=p,w.view=v,w.projection=g,w.pixelScale=f,h[0]=this.gl.drawingBufferWidth,h[1]=this.gl.drawingBufferHeight,this.shader.uniforms.resolution=h},c.unbind=function(){this.vao.unbind()},c.update=function(p,v,g,f,w){var y=[];function M(L,I,B,V,Z,Y){var ee=u[B];ee||(ee=u[B]={});var J=ee[I];J||(J=ee[I]=function(te,ne){try{return l(te,ne)}catch(le){return console.warn('error vectorizing text:"'+te+'" error:',le),{cells:[],positions:[]}}}(I,{triangles:!0,font:B,textAlign:"center",textBaseline:"middle",lineSpacing:Z,styletags:Y}));for(var $=(V||12)/12,Q=J.positions,se=J.cells,j=0,G=se.length;j<G;++j)for(var W=se[j],ie=2;ie>=0;--ie){var q=Q[W[ie]];y.push($*q[0],-$*q[1],L)}}for(var A=[0,0,0],k=[0,0,0],C=[0,0,0],P=[0,0,0],D={breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},F=0;F<3;++F){C[F]=y.length/3|0,M(.5*(p[0][F]+p[1][F]),v[F],g[F],12,1.25,D),P[F]=(y.length/3|0)-C[F],A[F]=y.length/3|0;for(var R=0;R<f[F].length;++R)f[F][R].text&&M(f[F][R].x,f[F][R].text,f[F][R].font||w,f[F][R].fontSize||12,1.25,D);k[F]=(y.length/3|0)-A[F]}this.buffer.update(y),this.tickOffset=A,this.tickCount=k,this.labelOffset=C,this.labelCount=P},c.drawTicks=function(p,v,g,f,w,y,M,A){this.tickCount[p]&&(this.shader.uniforms.axis=y,this.shader.uniforms.color=w,this.shader.uniforms.angle=g,this.shader.uniforms.scale=v,this.shader.uniforms.offset=f,this.shader.uniforms.alignDir=M,this.shader.uniforms.alignOpt=A,this.vao.draw(this.gl.TRIANGLES,this.tickCount[p],this.tickOffset[p]))},c.drawLabel=function(p,v,g,f,w,y,M,A){this.labelCount[p]&&(this.shader.uniforms.axis=y,this.shader.uniforms.color=w,this.shader.uniforms.angle=g,this.shader.uniforms.scale=v,this.shader.uniforms.offset=f,this.shader.uniforms.alignDir=M,this.shader.uniforms.alignOpt=A,this.vao.draw(this.gl.TRIANGLES,this.labelCount[p],this.labelOffset[p]))},c.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()}}).call(this)}).call(this,x("_process"))},{"./shaders":74,_process:5,"gl-buffer":78,"gl-vao":150,"vectorize-text":311}],76:[function(x,T,b){"use strict";function e(o,a){var l=o+"",i=l.indexOf("."),d=0;i>=0&&(d=l.length-i-1);var u=Math.pow(10,d),s=Math.round(o*a*u),c=s+"";if(c.indexOf("e")>=0)return c;var h=s/u,p=s%u;s<0?(h=0|-Math.ceil(h),p=0|-p):(h=0|Math.floor(h),p|=0);var v=""+h;if(s<0&&(v="-"+v),d){for(var g=""+p;g.length<d;)g="0"+g;return v+"."+g}return v}b.create=function(o,a){for(var l=[],i=0;i<3;++i){for(var d=[],u=0;u*a[i]<=o[1][i];++u)d.push({x:u*a[i],text:e(a[i],u)});for(u=-1;u*a[i]>=o[0][i];--u)d.push({x:u*a[i],text:e(a[i],u)});l.push(d)}return l},b.equal=function(o,a){for(var l=0;l<3;++l){if(o[l].length!==a[l].length)return!1;for(var i=0;i<o[l].length;++i){var d=o[l][i],u=a[l][i];if(d.x!==u.x||d.text!==u.text||d.font!==u.font||d.fontColor!==u.fontColor||d.fontSize!==u.fontSize||d.dx!==u.dx||d.dy!==u.dy)return!1}}return!0}},{}],77:[function(x,T,b){"use strict";T.exports=function(w,y,M,A,k){var C=y.model||u,P=y.view||u,D=y.projection||u,F=y._ortho||!1,R=w.bounds,L=(k=k||a(C,P,D,R,F)).axis;l(s,P,C),l(s,D,s);for(var I=g,B=0;B<3;++B)I[B].lo=1/0,I[B].hi=-1/0,I[B].pixelsPerDataUnit=1/0;var V=e(i(s,s));i(s,s);for(var Z=0;Z<3;++Z){var Y=(Z+1)%3,ee=(Z+2)%3,J=f;e:for(B=0;B<2;++B){var $=[];if(L[Z]<0!=!!B){J[Z]=R[B][Z];for(var Q=0;Q<2;++Q){J[Y]=R[Q^B][Y];for(var se=0;se<2;++se)J[ee]=R[se^Q^B][ee],$.push(J.slice())}var j=F?5:4;for(Q=j;Q===j;++Q){if(0===$.length)continue e;$=o.positive($,V[Q])}for(Q=0;Q<$.length;++Q){var G=v(f,s,ee=$[Q],M,A);for(se=0;se<3;++se)I[se].lo=Math.min(I[se].lo,ee[se]),I[se].hi=Math.max(I[se].hi,ee[se]),se!==Z&&(I[se].pixelsPerDataUnit=Math.min(I[se].pixelsPerDataUnit,Math.abs(G[se])))}}}}return I};var e=x("extract-frustum-planes"),o=x("split-polygon"),a=x("./lib/cube.js"),l=x("gl-mat4/multiply"),i=x("gl-mat4/transpose"),d=x("gl-vec4/transformMat4"),u=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),s=new Float32Array(16);function c(w,y,M){this.lo=w,this.hi=y,this.pixelsPerDataUnit=M}var h=[0,0,0,1],p=[0,0,0,1];function v(w,y,M,A,k){for(var C=0;C<3;++C){for(var P=h,D=p,F=0;F<3;++F)D[F]=P[F]=M[F];D[3]=P[3]=1,D[C]+=1,d(D,D,y),D[3]<0&&(w[C]=1/0),P[C]-=1,d(P,P,y),P[3]<0&&(w[C]=1/0);var R=(P[0]/P[3]-D[0]/D[3])*A,L=(P[1]/P[3]-D[1]/D[3])*k;w[C]=.25*Math.sqrt(R*R+L*L)}return w}var g=[new c(1/0,-1/0,1/0),new c(1/0,-1/0,1/0),new c(1/0,-1/0,1/0)],f=[0,0,0]},{"./lib/cube.js":72,"extract-frustum-planes":67,"gl-mat4/multiply":100,"gl-mat4/transpose":109,"gl-vec4/transformMat4":221,"split-polygon":300}],78:[function(x,T,b){"use strict";var e=x("typedarray-pool"),o=x("ndarray-ops"),a=x("ndarray"),l=["uint8","uint8_clamped","uint16","uint32","int8","int16","int32","float32"];function i(c,h,p,v,g){this.gl=c,this.type=h,this.handle=p,this.length=v,this.usage=g}var d=i.prototype;function u(c,h,p,v,g,f){var w=g.length*g.BYTES_PER_ELEMENT;if(f<0)return c.bufferData(h,g,v),w;if(w+f>p)throw new Error("gl-buffer: If resizing buffer, must not specify offset");return c.bufferSubData(h,f,g),p}d.bind=function(){this.gl.bindBuffer(this.type,this.handle)},d.unbind=function(){this.gl.bindBuffer(this.type,null)},d.dispose=function(){this.gl.deleteBuffer(this.handle)},d.update=function(c,h){if("number"!=typeof h&&(h=-1),this.bind(),"object"==typeof c&&void 0!==c.shape){var p=c.dtype;if(l.indexOf(p)<0&&(p="float32"),this.type===this.gl.ELEMENT_ARRAY_BUFFER&&(p=gl.getExtension("OES_element_index_uint")&&"uint16"!==p?"uint32":"uint16"),p===c.dtype&&function(w,y){for(var M=1,A=y.length-1;A>=0;--A){if(y[A]!==M)return!1;M*=w[A]}return!0}(c.shape,c.stride))this.length=u(this.gl,this.type,this.length,this.usage,0===c.offset&&c.data.length===c.shape[0]?c.data:c.data.subarray(c.offset,c.shape[0]),h);else{var v=e.malloc(c.size,p),g=a(v,c.shape);o.assign(g,c),this.length=u(this.gl,this.type,this.length,this.usage,h<0?v:v.subarray(0,c.size),h),e.free(v)}}else if(Array.isArray(c)){var f;f=function s(c,h){for(var p=e.malloc(c.length,h),v=c.length,g=0;g<v;++g)p[g]=c[g];return p}(c,this.type===this.gl.ELEMENT_ARRAY_BUFFER?"uint16":"float32"),this.length=u(this.gl,this.type,this.length,this.usage,h<0?f:f.subarray(0,c.length),h),e.free(f)}else if("object"==typeof c&&"number"==typeof c.length)this.length=u(this.gl,this.type,this.length,this.usage,c,h);else{if("number"!=typeof c&&void 0!==c)throw new Error("gl-buffer: Invalid data type");if(h>=0)throw new Error("gl-buffer: Cannot specify offset when resizing buffer");(c|=0)<=0&&(c=1),this.gl.bufferData(this.type,0|c,this.usage),this.length=c}},T.exports=function(c,h,p,v){if(v=v||c.DYNAMIC_DRAW,(p=p||c.ARRAY_BUFFER)!==c.ARRAY_BUFFER&&p!==c.ELEMENT_ARRAY_BUFFER)throw new Error("gl-buffer: Invalid type for webgl buffer, must be either gl.ARRAY_BUFFER or gl.ELEMENT_ARRAY_BUFFER");if(v!==c.DYNAMIC_DRAW&&v!==c.STATIC_DRAW&&v!==c.STREAM_DRAW)throw new Error("gl-buffer: Invalid usage for buffer, must be either gl.DYNAMIC_DRAW, gl.STATIC_DRAW or gl.STREAM_DRAW");var g=c.createBuffer(),f=new i(c,p,g,0,v);return f.update(h),f}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],79:[function(x,T,b){"use strict";var e=x("gl-vec3");T.exports=function(a,l){var i=a.positions,d=a.vectors,u={positions:[],vertexIntensity:[],vertexIntensityBounds:a.vertexIntensityBounds,vectors:[],cells:[],coneOffset:a.coneOffset,colormap:a.colormap};if(0===a.positions.length)return l&&(l[0]=[0,0,0],l[1]=[0,0,0]),u;for(var s=0,c=1/0,h=-1/0,p=1/0,v=-1/0,g=1/0,f=-1/0,w=null,y=null,M=[],A=1/0,k=!1,C=0;C<i.length;C++){var P=i[C];c=Math.min(P[0],c),h=Math.max(P[0],h),p=Math.min(P[1],p),v=Math.max(P[1],v),g=Math.min(P[2],g),f=Math.max(P[2],f);var D=d[C];if(e.length(D)>s&&(s=e.length(D)),C){var F=2*e.distance(w,P)/(e.length(y)+e.length(D));F?(A=Math.min(A,F),k=!1):k=!0}k||(w=P,y=D),M.push(D)}var L=[h,v,f];l&&(l[0]=[c,p,g],l[1]=L),0===s&&(s=1);var I=1/s;isFinite(A)||(A=1),u.vectorScale=A;var B=a.coneSize||.5;a.absoluteConeSize&&(B=a.absoluteConeSize*I),u.coneScale=B,C=0;for(var V=0;C<i.length;C++)for(var Z=(P=i[C])[0],Y=P[1],ee=P[2],J=M[C],$=e.length(J)*I,Q=0;Q<8;Q++){u.positions.push([Z,Y,ee,V++]),u.positions.push([Z,Y,ee,V++]),u.positions.push([Z,Y,ee,V++]),u.positions.push([Z,Y,ee,V++]),u.positions.push([Z,Y,ee,V++]),u.positions.push([Z,Y,ee,V++]),u.vectors.push(J),u.vectors.push(J),u.vectors.push(J),u.vectors.push(J),u.vectors.push(J),u.vectors.push(J),u.vertexIntensity.push($,$,$),u.vertexIntensity.push($,$,$);var se=u.positions.length;u.cells.push([se-6,se-5,se-4],[se-3,se-2,se-1])}return u};var o=x("./lib/shaders");T.exports.createMesh=x("./create_mesh"),T.exports.createConeMesh=function(a,l){return T.exports.createMesh(a,l,{shaders:o,traceType:"cone"})}},{"./create_mesh":80,"./lib/shaders":81,"gl-vec3":169}],80:[function(x,T,b){"use strict";var e=x("gl-shader"),o=x("gl-buffer"),a=x("gl-vao"),l=x("gl-texture2d"),i=x("gl-mat4/multiply"),d=x("gl-mat4/invert"),u=x("ndarray"),s=x("colormap"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function h(f,w,y,M,A,k,C,P,D,F,R){this.gl=f,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=w,this.dirty=!0,this.triShader=y,this.pickShader=M,this.trianglePositions=A,this.triangleVectors=k,this.triangleColors=P,this.triangleUVs=D,this.triangleIds=C,this.triangleVAO=F,this.triangleCount=0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.traceType=R,this.tubeScale=1,this.coneScale=2,this.vectorScale=1,this.coneOffset=.25,this._model=c,this._view=c,this._projection=c,this._resolution=[1,1]}var p=h.prototype;function v(f,w){var y=e(f,w.meshShader.vertex,w.meshShader.fragment,null,w.meshShader.attributes);return y.attributes.position.location=0,y.attributes.color.location=2,y.attributes.uv.location=3,y.attributes.vector.location=4,y}function g(f,w){var y=e(f,w.pickShader.vertex,w.pickShader.fragment,null,w.pickShader.attributes);return y.attributes.position.location=0,y.attributes.id.location=1,y.attributes.vector.location=4,y}p.isOpaque=function(){return this.opacity>=1},p.isTransparent=function(){return this.opacity<1},p.pickSlots=1,p.setPickBase=function(f){this.pickId=f},p.update=function(f){f=f||{};var w=this.gl;this.dirty=!0,"lightPosition"in f&&(this.lightPosition=f.lightPosition),"opacity"in f&&(this.opacity=f.opacity),"ambient"in f&&(this.ambientLight=f.ambient),"diffuse"in f&&(this.diffuseLight=f.diffuse),"specular"in f&&(this.specularLight=f.specular),"roughness"in f&&(this.roughness=f.roughness),"fresnel"in f&&(this.fresnel=f.fresnel),void 0!==f.tubeScale&&(this.tubeScale=f.tubeScale),void 0!==f.vectorScale&&(this.vectorScale=f.vectorScale),void 0!==f.coneScale&&(this.coneScale=f.coneScale),void 0!==f.coneOffset&&(this.coneOffset=f.coneOffset),f.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=w.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=w.LINEAR,this.texture.setPixels(function(ie){for(var q=s({colormap:ie,nshades:256,format:"rgba"}),te=new Uint8Array(1024),ne=0;ne<256;++ne){for(var le=q[ne],ue=0;ue<3;++ue)te[4*ne+ue]=le[ue];te[4*ne+3]=255*le[3]}return u(te,[256,256,4],[4,0,1])}(f.colormap)),this.texture.generateMipmap());var y=f.cells,M=f.positions,A=f.vectors;if(M&&y&&A){var k=[],C=[],P=[],D=[],F=[];this.cells=y,this.positions=M,this.vectors=A;var R=f.meshColor||[1,1,1,1],L=f.vertexIntensity,I=1/0,B=-1/0;if(L)if(f.vertexIntensityBounds)I=+f.vertexIntensityBounds[0],B=+f.vertexIntensityBounds[1];else for(var V=0;V<L.length;++V){var Z=L[V];I=Math.min(I,Z),B=Math.max(B,Z)}else for(V=0;V<M.length;++V)Z=M[V][2],I=Math.min(I,Z),B=Math.max(B,Z);for(this.intensity=L||function(ie){for(var q=ie.length,te=new Array(q),ne=0;ne<q;++ne)te[ne]=ie[ne][2];return te}(M),this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],V=0;V<M.length;++V)for(var Y=M[V],ee=0;ee<3;++ee)!isNaN(Y[ee])&&isFinite(Y[ee])&&(this.bounds[0][ee]=Math.min(this.bounds[0][ee],Y[ee]),this.bounds[1][ee]=Math.max(this.bounds[1][ee],Y[ee]));var J=0;e:for(V=0;V<y.length;++V){var $=y[V];if(3===$.length){for(ee=0;ee<3;++ee){Y=M[se=$[ee]];for(var Q=0;Q<3;++Q)if(isNaN(Y[Q])||!isFinite(Y[Q]))continue e}for(ee=0;ee<3;++ee){var se;Y=M[se=$[2-ee]],k.push(Y[0],Y[1],Y[2],Y[3]);var j=A[se];C.push(j[0],j[1],j[2],j[3]||0);var G;P.push(R[0],R[1],R[2],3===R.length?1:R[3]),D.push((G=L?[(L[se]-I)/(B-I),0]:[(Y[2]-I)/(B-I),0])[0],G[1]),F.push(V)}J+=1}}this.triangleCount=J,this.trianglePositions.update(k),this.triangleVectors.update(C),this.triangleColors.update(P),this.triangleUVs.update(D),this.triangleIds.update(new Uint32Array(F))}},p.drawTransparent=p.draw=function(f){for(var w=this.gl,y=(f=f||{}).model||c,M=f.view||c,A=f.projection||c,k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],C=0;C<3;++C)k[0][C]=Math.max(k[0][C],this.clipBounds[0][C]),k[1][C]=Math.min(k[1][C],this.clipBounds[1][C]);var P={model:y,view:M,projection:A,inverseModel:c.slice(),clipBounds:k,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],opacity:this.opacity,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,texture:0};P.inverseModel=d(P.inverseModel,P.model),w.disable(w.CULL_FACE),this.texture.bind(0);var D=new Array(16);for(i(D,P.view,P.model),i(D,P.projection,D),d(D,D),C=0;C<3;++C)P.eyePosition[C]=D[12+C]/D[15];var F=D[15];for(C=0;C<3;++C)F+=this.lightPosition[C]*D[4*C+3];for(C=0;C<3;++C){for(var R=D[12+C],L=0;L<3;++L)R+=D[4*L+C]*this.lightPosition[L];P.lightPosition[C]=R/F}if(this.triangleCount>0){var I=this.triShader;I.bind(),I.uniforms=P,this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()}},p.drawPick=function(f){for(var w=this.gl,y=(f=f||{}).model||c,M=f.view||c,A=f.projection||c,k=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],C=0;C<3;++C)k[0][C]=Math.max(k[0][C],this.clipBounds[0][C]),k[1][C]=Math.min(k[1][C],this.clipBounds[1][C]);this._model=[].slice.call(y),this._view=[].slice.call(M),this._projection=[].slice.call(A),this._resolution=[w.drawingBufferWidth,w.drawingBufferHeight];var P={model:y,view:M,projection:A,clipBounds:k,tubeScale:this.tubeScale,vectorScale:this.vectorScale,coneScale:this.coneScale,coneOffset:this.coneOffset,pickId:this.pickId/255},D=this.pickShader;D.bind(),D.uniforms=P,this.triangleCount>0&&(this.triangleVAO.bind(),w.drawArrays(w.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind())},p.pick=function(f){if(!f||f.id!==this.pickId)return null;var w=f.value[0]+256*f.value[1]+65536*f.value[2],y=this.cells[w],M=this.positions[y[1]].slice(0,3),A={position:M,dataCoordinate:M,index:Math.floor(y[1]/48)};return"cone"===this.traceType?A.index=Math.floor(y[1]/48):"streamtube"===this.traceType&&(A.intensity=this.intensity[y[1]],A.velocity=this.vectors[y[1]].slice(0,3),A.divergence=this.vectors[y[1]][3],A.index=w),A},p.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.pickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleVectors.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleIds.dispose()},T.exports=function(f,w,y){var M=y.shaders;1===arguments.length&&(f=(w=f).gl);var A=v(f,M),k=g(f,M),C=l(f,u(new Uint8Array([255,255,255,255]),[1,1,4]));C.generateMipmap(),C.minFilter=f.LINEAR_MIPMAP_LINEAR,C.magFilter=f.LINEAR;var P=o(f),D=o(f),F=o(f),R=o(f),L=o(f),B=new h(f,C,A,k,P,D,L,F,R,a(f,[{buffer:P,type:f.FLOAT,size:4},{buffer:L,type:f.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:F,type:f.FLOAT,size:4},{buffer:R,type:f.FLOAT,size:2},{buffer:D,type:f.FLOAT,size:4}]),y.traceType||"cone");return B.update(w),B}},{colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259}],81:[function(x,T,b){var e=x("glslify"),o=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec3 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, coneScale, coneOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * conePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(conePosition, 1.0);\n  vec4 t_position  = view * conePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = conePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),a=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),l=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the cone vertex and normal at the given index.\n//\n// The returned vertex is for a cone with its top at origin and height of 1.0,\n// pointing in the direction of the vector attribute.\n//\n// Each cone is made up of a top vertex, a center base vertex and base perimeter vertices.\n// These vertices are used to make up the triangles of the cone by the following:\n//   segment + 0 top vertex\n//   segment + 1 perimeter vertex a+1\n//   segment + 2 perimeter vertex a\n//   segment + 3 center base vertex\n//   segment + 4 perimeter vertex a\n//   segment + 5 perimeter vertex a+1\n// Where segment is the number of the radial segment * 6 and a is the angle at that radial segment.\n// To go from index to segment, floor(index / 6)\n// To go from segment to angle, 2*pi * (segment/segmentCount)\n// To go from index to segment index, index - (segment*6)\n//\nvec3 getConePosition(vec3 d, float rawIndex, float coneOffset, out vec3 normal) {\n\n  const float segmentCount = 8.0;\n\n  float index = rawIndex - floor(rawIndex /\n    (segmentCount * 6.0)) *\n    (segmentCount * 6.0);\n\n  float segment = floor(0.001 + index/6.0);\n  float segmentIndex = index - (segment*6.0);\n\n  normal = -normalize(d);\n\n  if (segmentIndex > 2.99 && segmentIndex < 3.01) {\n    return mix(vec3(0.0), -d, coneOffset);\n  }\n\n  float nextAngle = (\n    (segmentIndex > 0.99 &&  segmentIndex < 1.01) ||\n    (segmentIndex > 4.99 &&  segmentIndex < 5.01)\n  ) ? 1.0 : 0.0;\n  float angle = 2.0 * 3.14159 * ((segment + nextAngle) / segmentCount);\n\n  vec3 v1 = mix(d, vec3(0.0), coneOffset);\n  vec3 v2 = v1 - d;\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d)*0.25;\n  vec3 y = v * sin(angle) * length(d)*0.25;\n  vec3 v3 = v2 + x + y;\n  if (segmentIndex < 3.0) {\n    vec3 tx = u * sin(angle);\n    vec3 ty = v * -cos(angle);\n    vec3 tangent = tx + ty;\n    normal = normalize(cross(v3 - v1, tangent));\n  }\n\n  if (segmentIndex == 0.0) {\n    return mix(d, vec3(0.0), coneOffset);\n  }\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float vectorScale, coneScale, coneOffset;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getConePosition(mat3(model) * ((vectorScale * coneScale) * vector.xyz), position.w, coneOffset, normal);\n  vec4 conePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n  gl_Position = projection * view * conePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);b.meshShader={vertex:o,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec3"}]},b.pickShader={vertex:l,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec3"}]}},{glslify:231}],82:[function(x,T,b){T.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},{}],83:[function(x,T,b){var e=x("./1.0/numbers");T.exports=function(o){return e[o]}},{"./1.0/numbers":82}],84:[function(x,T,b){"use strict";T.exports=function(h){var p=h.gl,v=e(p),g=o(p,[{buffer:v,type:p.FLOAT,size:3,offset:0,stride:40},{buffer:v,type:p.FLOAT,size:4,offset:12,stride:40},{buffer:v,type:p.FLOAT,size:3,offset:28,stride:40}]),f=a(p);f.attributes.position.location=0,f.attributes.color.location=1,f.attributes.offset.location=2;var w=new i(p,v,g,f);return w.update(h),w};var e=x("gl-buffer"),o=x("gl-vao"),a=x("./shaders/index"),l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function i(h,p,v,g){this.gl=h,this.shader=g,this.buffer=p,this.vao=v,this.pixelRatio=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lineWidth=[1,1,1],this.capSize=[10,10,10],this.lineCount=[0,0,0],this.lineOffset=[0,0,0],this.opacity=1,this.hasAlpha=!1}var d=i.prototype;function u(h,p){for(var v=0;v<3;++v)h[0][v]=Math.min(h[0][v],p[v]),h[1][v]=Math.max(h[1][v],p[v])}d.isOpaque=function(){return!this.hasAlpha},d.isTransparent=function(){return this.hasAlpha},d.drawTransparent=d.draw=function(h){var p=this.gl,v=this.shader.uniforms;this.shader.bind();var g=v.view=h.view||l,f=v.projection=h.projection||l;v.model=h.model||l,v.clipBounds=this.clipBounds,v.opacity=this.opacity;var k=(h._ortho?2:1)*this.pixelRatio*(f[3]*g[12]+f[7]*g[13]+f[11]*g[14]+f[15]*g[15])/p.drawingBufferHeight;this.vao.bind();for(var C=0;C<3;++C)p.lineWidth(this.lineWidth[C]*this.pixelRatio),v.capSize=this.capSize[C]*k,this.lineCount[C]&&p.drawArrays(p.LINES,this.lineOffset[C],this.lineCount[C]);this.vao.unbind()};var s=function(){for(var h=new Array(3),p=0;p<3;++p){for(var v=[],g=1;g<=2;++g)for(var f=-1;f<=1;f+=2){var w=[0,0,0];w[(g+p)%3]=f,v.push(w)}h[p]=v}return h}();function c(h,p,v,g){for(var f=s[g],w=0;w<f.length;++w){var y=f[w];h.push(p[0],p[1],p[2],v[0],v[1],v[2],v[3],y[0],y[1],y[2])}return f.length}d.update=function(h){"lineWidth"in(h=h||{})&&(this.lineWidth=h.lineWidth,Array.isArray(this.lineWidth)||(this.lineWidth=[this.lineWidth,this.lineWidth,this.lineWidth])),"capSize"in h&&(this.capSize=h.capSize,Array.isArray(this.capSize)||(this.capSize=[this.capSize,this.capSize,this.capSize])),this.hasAlpha=!1,"opacity"in h&&(this.opacity=+h.opacity,this.opacity<1&&(this.hasAlpha=!0));var p=h.color||[[0,0,0],[0,0,0],[0,0,0]],v=h.position,g=h.error;if(Array.isArray(p[0])||(p=[p,p,p]),v&&g){var f=[],w=v.length,y=0;this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.lineCount=[0,0,0];for(var M=0;M<3;++M){this.lineOffset[M]=y;e:for(var A=0;A<w;++A){for(var k=v[A],C=0;C<3;++C)if(isNaN(k[C])||!isFinite(k[C]))continue e;var F,P=g[A],D=p[M];Array.isArray(D[0])&&(D=p[A]),3===D.length?D=[D[0],D[1],D[2],1]:4===D.length&&(D=[D[0],D[1],D[2],D[3]],!this.hasAlpha&&D[3]<1&&(this.hasAlpha=!0)),isNaN(P[0][M])||isNaN(P[1][M])||(P[0][M]<0&&((F=k.slice())[M]+=P[0][M],f.push(k[0],k[1],k[2],D[0],D[1],D[2],D[3],0,0,0,F[0],F[1],F[2],D[0],D[1],D[2],D[3],0,0,0),u(this.bounds,F),y+=2+c(f,F,D,M)),P[1][M]>0&&((F=k.slice())[M]+=P[1][M],f.push(k[0],k[1],k[2],D[0],D[1],D[2],D[3],0,0,0,F[0],F[1],F[2],D[0],D[1],D[2],D[3],0,0,0),u(this.bounds,F),y+=2+c(f,F,D,M)))}this.lineCount[M]=y-this.lineOffset[M]}this.buffer.update(f)}},d.dispose=function(){this.shader.dispose(),this.buffer.dispose(),this.vao.dispose()}},{"./shaders/index":85,"gl-buffer":78,"gl-vao":150}],85:[function(x,T,b){"use strict";var e=x("glslify"),o=x("gl-shader"),a=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, offset;\nattribute vec4 color;\nuniform mat4 model, view, projection;\nuniform float capSize;\nvarying vec4 fragColor;\nvarying vec3 fragPosition;\n\nvoid main() {\n  vec4 worldPosition  = model * vec4(position, 1.0);\n  worldPosition       = (worldPosition / worldPosition.w) + vec4(capSize * offset, 0.0);\n  gl_Position         = projection * view * worldPosition;\n  fragColor           = color;\n  fragPosition        = position;\n}"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float opacity;\nvarying vec3 fragPosition;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], fragPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  gl_FragColor = opacity * fragColor;\n}"]);T.exports=function(i){return o(i,a,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"offset",type:"vec3"}])}},{"gl-shader":132,glslify:231}],86:[function(x,T,b){"use strict";var e=x("gl-texture2d");T.exports=function(w,y,M,A){o||(o=w.FRAMEBUFFER_UNSUPPORTED,a=w.FRAMEBUFFER_INCOMPLETE_ATTACHMENT,l=w.FRAMEBUFFER_INCOMPLETE_DIMENSIONS,i=w.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT);var k=w.getExtension("WEBGL_draw_buffers");if(!d&&k&&function(I,B){var V=I.getParameter(B.MAX_COLOR_ATTACHMENTS_WEBGL);d=new Array(V+1);for(var Z=0;Z<=V;++Z){for(var Y=new Array(V),ee=0;ee<Z;++ee)Y[ee]=I.COLOR_ATTACHMENT0+ee;for(ee=Z;ee<V;++ee)Y[ee]=I.NONE;d[Z]=Y}}(w,k),Array.isArray(y)&&(A=M,M=0|y[1],y=0|y[0]),"number"!=typeof y)throw new Error("gl-fbo: Missing shape parameter");var C=w.getParameter(w.MAX_RENDERBUFFER_SIZE);if(y<0||y>C||M<0||M>C)throw new Error("gl-fbo: Parameters are too large for FBO");var P=1;if("color"in(A=A||{})){if((P=Math.max(0|A.color,0))<0)throw new Error("gl-fbo: Must specify a nonnegative number of colors");if(P>1){if(!k)throw new Error("gl-fbo: Multiple draw buffer extension not supported");if(P>w.getParameter(k.MAX_COLOR_ATTACHMENTS_WEBGL))throw new Error("gl-fbo: Context does not support "+P+" draw buffers")}}var D=w.UNSIGNED_BYTE,F=w.getExtension("OES_texture_float");if(A.float&&P>0){if(!F)throw new Error("gl-fbo: Context does not support floating point textures");D=w.FLOAT}else A.preferFloat&&P>0&&F&&(D=w.FLOAT);var R=!0;"depth"in A&&(R=!!A.depth);var L=!1;return"stencil"in A&&(L=!!A.stencil),new v(w,y,M,D,P,R,L,k)};var o,a,l,i,d=null;function u(w){return[w.getParameter(w.FRAMEBUFFER_BINDING),w.getParameter(w.RENDERBUFFER_BINDING),w.getParameter(w.TEXTURE_BINDING_2D)]}function s(w,y){w.bindFramebuffer(w.FRAMEBUFFER,y[0]),w.bindRenderbuffer(w.RENDERBUFFER,y[1]),w.bindTexture(w.TEXTURE_2D,y[2])}function c(w){switch(w){case o:throw new Error("gl-fbo: Framebuffer unsupported");case a:throw new Error("gl-fbo: Framebuffer incomplete attachment");case l:throw new Error("gl-fbo: Framebuffer incomplete dimensions");case i:throw new Error("gl-fbo: Framebuffer incomplete missing attachment");default:throw new Error("gl-fbo: Framebuffer failed for unspecified reason")}}function h(w,y,M,A,k,C){if(!A)return null;var P=e(w,y,M,k,A);return P.magFilter=w.NEAREST,P.minFilter=w.NEAREST,P.mipSamples=1,P.bind(),w.framebufferTexture2D(w.FRAMEBUFFER,C,w.TEXTURE_2D,P.handle,0),P}function p(w,y,M,A,k){var C=w.createRenderbuffer();return w.bindRenderbuffer(w.RENDERBUFFER,C),w.renderbufferStorage(w.RENDERBUFFER,A,y,M),w.framebufferRenderbuffer(w.FRAMEBUFFER,k,w.RENDERBUFFER,C),C}function v(w,y,M,A,k,C,P,D){this.gl=w,this._shape=[0|y,0|M],this._destroyed=!1,this._ext=D,this.color=new Array(k);for(var F=0;F<k;++F)this.color[F]=null;this._color_rb=null,this.depth=null,this._depth_rb=null,this._colorType=A,this._useDepth=C,this._useStencil=P;var R=this,L=[0|y,0|M];Object.defineProperties(L,{0:{get:function(){return R._shape[0]},set:function(I){return R.width=I}},1:{get:function(){return R._shape[1]},set:function(I){return R.height=I}}}),this._shapeVector=L,function(I){var B=u(I.gl),V=I.gl,Z=I.handle=V.createFramebuffer(),Y=I._shape[0],ee=I._shape[1],J=I.color.length,$=I._ext,Q=I._useStencil,se=I._useDepth,j=I._colorType;V.bindFramebuffer(V.FRAMEBUFFER,Z);for(var G=0;G<J;++G)I.color[G]=h(V,Y,ee,j,V.RGBA,V.COLOR_ATTACHMENT0+G);0===J?(I._color_rb=p(V,Y,ee,V.RGBA4,V.COLOR_ATTACHMENT0),$&&$.drawBuffersWEBGL(d[0])):J>1&&$.drawBuffersWEBGL(d[J]);var W=V.getExtension("WEBGL_depth_texture");W?Q?I.depth=h(V,Y,ee,W.UNSIGNED_INT_24_8_WEBGL,V.DEPTH_STENCIL,V.DEPTH_STENCIL_ATTACHMENT):se&&(I.depth=h(V,Y,ee,V.UNSIGNED_SHORT,V.DEPTH_COMPONENT,V.DEPTH_ATTACHMENT)):se&&Q?I._depth_rb=p(V,Y,ee,V.DEPTH_STENCIL,V.DEPTH_STENCIL_ATTACHMENT):se?I._depth_rb=p(V,Y,ee,V.DEPTH_COMPONENT16,V.DEPTH_ATTACHMENT):Q&&(I._depth_rb=p(V,Y,ee,V.STENCIL_INDEX,V.STENCIL_ATTACHMENT));var ie=V.checkFramebufferStatus(V.FRAMEBUFFER);if(ie!==V.FRAMEBUFFER_COMPLETE){for(I._destroyed=!0,V.bindFramebuffer(V.FRAMEBUFFER,null),V.deleteFramebuffer(I.handle),I.handle=null,I.depth&&(I.depth.dispose(),I.depth=null),I._depth_rb&&(V.deleteRenderbuffer(I._depth_rb),I._depth_rb=null),G=0;G<I.color.length;++G)I.color[G].dispose(),I.color[G]=null;I._color_rb&&(V.deleteRenderbuffer(I._color_rb),I._color_rb=null),s(V,B),c(ie)}s(V,B)}(this)}var g=v.prototype;function f(w,y,M){if(w._destroyed)throw new Error("gl-fbo: Can't resize destroyed FBO");if(w._shape[0]!==y||w._shape[1]!==M){var A=w.gl,k=A.getParameter(A.MAX_RENDERBUFFER_SIZE);if(y<0||y>k||M<0||M>k)throw new Error("gl-fbo: Can't resize FBO, invalid dimensions");w._shape[0]=y,w._shape[1]=M;for(var C=u(A),P=0;P<w.color.length;++P)w.color[P].shape=w._shape;w._color_rb&&(A.bindRenderbuffer(A.RENDERBUFFER,w._color_rb),A.renderbufferStorage(A.RENDERBUFFER,A.RGBA4,w._shape[0],w._shape[1])),w.depth&&(w.depth.shape=w._shape),w._depth_rb&&(A.bindRenderbuffer(A.RENDERBUFFER,w._depth_rb),w._useDepth&&w._useStencil?A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_STENCIL,w._shape[0],w._shape[1]):w._useDepth?A.renderbufferStorage(A.RENDERBUFFER,A.DEPTH_COMPONENT16,w._shape[0],w._shape[1]):w._useStencil&&A.renderbufferStorage(A.RENDERBUFFER,A.STENCIL_INDEX,w._shape[0],w._shape[1])),A.bindFramebuffer(A.FRAMEBUFFER,w.handle);var D=A.checkFramebufferStatus(A.FRAMEBUFFER);D!==A.FRAMEBUFFER_COMPLETE&&(w.dispose(),s(A,C),c(D)),s(A,C)}}Object.defineProperties(g,{shape:{get:function(){return this._destroyed?[0,0]:this._shapeVector},set:function(w){if(Array.isArray(w)||(w=[0|w,0|w]),2!==w.length)throw new Error("gl-fbo: Shape vector must be length 2");var y=0|w[0],M=0|w[1];return f(this,y,M),[y,M]},enumerable:!1},width:{get:function(){return this._destroyed?0:this._shape[0]},set:function(w){return f(this,w|=0,this._shape[1]),w},enumerable:!1},height:{get:function(){return this._destroyed?0:this._shape[1]},set:function(w){return f(this,this._shape[0],w|=0),w},enumerable:!1}}),g.bind=function(){if(!this._destroyed){var w=this.gl;w.bindFramebuffer(w.FRAMEBUFFER,this.handle),w.viewport(0,0,this._shape[0],this._shape[1])}},g.dispose=function(){if(!this._destroyed){this._destroyed=!0;var w=this.gl;w.deleteFramebuffer(this.handle),this.handle=null,this.depth&&(this.depth.dispose(),this.depth=null),this._depth_rb&&(w.deleteRenderbuffer(this._depth_rb),this._depth_rb=null);for(var y=0;y<this.color.length;++y)this.color[y].dispose(),this.color[y]=null;this._color_rb&&(w.deleteRenderbuffer(this._color_rb),this._color_rb=null)}}},{"gl-texture2d":146}],87:[function(x,T,b){var e=x("sprintf-js").sprintf,o=x("gl-constants/lookup"),a=x("glsl-shader-name"),l=x("add-line-numbers");T.exports=function(i,d,u){"use strict";var s=a(d)||"of unknown name (see npm glsl-shader-name)",c="unknown type";void 0!==u&&(c=u===o.FRAGMENT_SHADER?"fragment":"vertex");for(var h=e("Error compiling %s shader %s:\n",c,s),p=e("%s%s",h,i),v=i.split("\n"),g={},f=0;f<v.length;f++){var w=v[f];if(""!==w&&"\0"!==w){var y=parseInt(w.split(":")[2]);if(isNaN(y))throw new Error(e("Could not parse error: %s",w));g[y]=w}}var M=l(d).split("\n");for(f=0;f<M.length;f++)if((g[f+3]||g[f+2]||g[f+1])&&(h+=M[f]+"\n",g[f+1])){var k=g[f+1];k=k.substr(k.split(":",3).join(":").length+1).trim(),h+=e("^^^ %s\n\n",k)}return{long:h.trim(),short:p.trim()}}},{"add-line-numbers":9,"gl-constants/lookup":83,"glsl-shader-name":223,"sprintf-js":301}],88:[function(x,T,b){"use strict";T.exports=function(p,v){var g=p.gl,C=new u(p,l(g,d.vertex,d.fragment),l(g,d.pickVertex,d.pickFragment),i(g),i(g),i(g),i(g));return C.update(v),p.addObject(C),C};var e=x("binary-search-bounds"),o=x("iota-array"),a=x("typedarray-pool"),l=x("gl-shader"),i=x("gl-buffer"),d=x("./lib/shaders");function u(p,v,g,f,w,y,M){this.plot=p,this.shader=v,this.pickShader=g,this.positionBuffer=f,this.weightBuffer=w,this.colorBuffer=y,this.idBuffer=M,this.xData=[],this.yData=[],this.shape=[0,0],this.bounds=[1/0,1/0,-1/0,-1/0],this.pickOffset=0}var s,p,v,c=u.prototype,h=[0,0,1,0,0,1,1,0,1,1,0,1];c.draw=(s=[1,0,0,0,1,0,0,0,1],function(){var p=this.plot,v=this.shader,g=this.bounds,f=this.numVertices;if(!(f<=0)){var w=p.gl,y=p.dataBox,A=g[3]-g[1],k=y[2]-y[0],C=y[3]-y[1];s[0]=2*(g[2]-g[0])/k,s[4]=2*A/C,s[6]=2*(g[0]-y[0])/k-1,s[7]=2*(g[1]-y[1])/C-1,v.bind();var P=v.uniforms;P.viewTransform=s,P.shape=this.shape;var D=v.attributes;this.positionBuffer.bind(),D.position.pointer(),this.weightBuffer.bind(),D.weight.pointer(w.UNSIGNED_BYTE,!1),this.colorBuffer.bind(),D.color.pointer(w.UNSIGNED_BYTE,!0),w.drawArrays(w.TRIANGLES,0,f)}}),c.drawPick=(p=[1,0,0,0,1,0,0,0,1],v=[0,0,0,0],function(g){var f=this.plot,w=this.pickShader,y=this.bounds,M=this.numVertices;if(!(M<=0)){var A=f.gl,k=f.dataBox,P=y[3]-y[1],D=k[2]-k[0],F=k[3]-k[1];p[0]=2*(y[2]-y[0])/D,p[4]=2*P/F,p[6]=2*(y[0]-k[0])/D-1,p[7]=2*(y[1]-k[1])/F-1;for(var R=0;R<4;++R)v[R]=g>>8*R&255;this.pickOffset=g,w.bind();var L=w.uniforms;L.viewTransform=p,L.pickOffset=v,L.shape=this.shape;var I=w.attributes;return this.positionBuffer.bind(),I.position.pointer(),this.weightBuffer.bind(),I.weight.pointer(A.UNSIGNED_BYTE,!1),this.idBuffer.bind(),I.pickId.pointer(A.UNSIGNED_BYTE,!1),A.drawArrays(A.TRIANGLES,0,M),g+this.shape[0]*this.shape[1]}}),c.pick=function(p,v,g){var f=this.pickOffset;if(g<f||g>=f+this.shape[0]*this.shape[1])return null;var y=g-f;return{object:this,pointId:y,dataCoord:[this.xData[y%this.shape[0]],this.yData[y/this.shape[0]|0]]}},c.update=function(p){var v=(p=p||{}).shape||[0,0],g=p.x||o(v[0]),f=p.y||o(v[1]),w=p.z||new Float32Array(v[0]*v[1]),y=!1!==p.zsmooth;this.xData=g,this.yData=f;var M,A,k,C,P=p.colorLevels||[0],D=p.colorValues||[0,0,0,1],F=P.length,R=this.bounds;y?(M=R[0]=g[0],A=R[1]=f[0],k=R[2]=g[g.length-1],C=R[3]=f[f.length-1]):(M=R[0]=g[0]+(g[1]-g[0])/2,A=R[1]=f[0]+(f[1]-f[0])/2,k=R[2]=g[g.length-1]+(g[g.length-1]-g[g.length-2])/2,C=R[3]=f[f.length-1]+(f[f.length-1]-f[f.length-2])/2);var L=1/(k-M),I=1/(C-A),B=v[0],V=v[1];this.shape=[B,V];var Z=(y?(B-1)*(V-1):B*V)*(h.length>>>1);this.numVertices=Z;for(var Y=a.mallocUint8(4*Z),ee=a.mallocFloat32(2*Z),J=a.mallocUint8(2*Z),$=a.mallocUint32(Z),Q=0,se=y?B-1:B,j=y?V-1:V,G=0;G<j;++G){var W,ie;y?(W=I*(f[G]-A),ie=I*(f[G+1]-A)):(W=G<V-1?I*(f[G]-(f[G+1]-f[G])/2-A):I*(f[G]-(f[G]-f[G-1])/2-A),ie=G<V-1?I*(f[G]+(f[G+1]-f[G])/2-A):I*(f[G]+(f[G]-f[G-1])/2-A));for(var q=0;q<se;++q){var te,ne;y?(te=L*(g[q]-M),ne=L*(g[q+1]-M)):(te=q<B-1?L*(g[q]-(g[q+1]-g[q])/2-M):L*(g[q]-(g[q]-g[q-1])/2-M),ne=q<B-1?L*(g[q]+(g[q+1]-g[q])/2-M):L*(g[q]+(g[q]-g[q-1])/2-M));for(var le=0;le<h.length;le+=2){var ue,de,he,be,ge=h[le],we=h[le+1],Ce=w[y?(G+we)*B+(q+ge):G*B+q],De=e.le(P,Ce);if(De<0)ue=D[0],de=D[1],he=D[2],be=D[3];else if(De===F-1)ue=D[4*F-4],de=D[4*F-3],he=D[4*F-2],be=D[4*F-1];else{var Se=(Ce-P[De])/(P[De+1]-P[De]),Fe=1-Se,ve=4*De,Te=4*(De+1);ue=Fe*D[ve]+Se*D[Te],de=Fe*D[ve+1]+Se*D[Te+1],he=Fe*D[ve+2]+Se*D[Te+2],be=Fe*D[ve+3]+Se*D[Te+3]}Y[4*Q]=255*ue,Y[4*Q+1]=255*de,Y[4*Q+2]=255*he,Y[4*Q+3]=255*be,ee[2*Q]=.5*te+.5*ne,ee[2*Q+1]=.5*W+.5*ie,J[2*Q]=ge,J[2*Q+1]=we,$[Q]=G*B+q,Q+=1}}}this.positionBuffer.update(ee),this.weightBuffer.update(J),this.colorBuffer.update(Y),this.idBuffer.update($),a.free(ee),a.free(Y),a.free(J),a.free($)},c.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.positionBuffer.dispose(),this.weightBuffer.dispose(),this.colorBuffer.dispose(),this.idBuffer.dispose(),this.plot.removeObject(this)}},{"./lib/shaders":89,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"iota-array":235,"typedarray-pool":308}],89:[function(x,T,b){"use strict";var e=x("glslify");T.exports={fragment:e(["precision lowp float;\n#define GLSLIFY 1\nvarying vec4 fragColor;\nvoid main() {\n  gl_FragColor = vec4(fragColor.rgb * fragColor.a, fragColor.a);\n}\n"]),vertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 color;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  fragColor = color;\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"]),pickFragment:e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nuniform vec2 shape;\nuniform vec4 pickOffset;\n\nvoid main() {\n  vec2 d = step(.5, vWeight);\n  vec4 id = fragId + pickOffset;\n  id.x += d.x + d.y*shape.x;\n\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  gl_FragColor = id/255.;\n}\n"]),pickVertex:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\nattribute vec2 weight;\n\nuniform vec2 shape;\nuniform mat3 viewTransform;\n\nvarying vec4 fragId;\nvarying vec2 vWeight;\n\nvoid main() {\n  vWeight = weight;\n\n  fragId = pickId;\n\n  vec3 vPosition = viewTransform * vec3( position + (weight-.5)/(shape-1.) , 1.0);\n  gl_Position = vec4(vPosition.xy, 0, vPosition.z);\n}\n"])}},{glslify:231}],90:[function(x,T,b){var e=x("glslify"),o=x("gl-shader"),a=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, nextPosition;\nattribute float arcLength, lineWidth;\nattribute vec4 color;\n\nuniform vec2 screenShape;\nuniform float pixelRatio;\nuniform mat4 model, view, projection;\n\nvarying vec4 fragColor;\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  vec4 startPoint = project(position);\n  vec4 endPoint   = project(nextPosition);\n\n  vec2 A = startPoint.xy / startPoint.w;\n  vec2 B =   endPoint.xy /   endPoint.w;\n\n  float clipAngle = atan(\n    (B.y - A.y) * screenShape.y,\n    (B.x - A.x) * screenShape.x\n  );\n\n  vec2 offset = 0.5 * pixelRatio * lineWidth * vec2(\n    sin(clipAngle),\n    -cos(clipAngle)\n  ) / screenShape;\n\n  gl_Position = vec4(startPoint.xy + startPoint.w * offset, startPoint.zw);\n\n  worldPosition = position;\n  pixelArcLength = arcLength;\n  fragColor = color;\n}\n"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3      clipBounds[2];\nuniform sampler2D dashTexture;\nuniform float     dashScale;\nuniform float     opacity;\n\nvarying vec3    worldPosition;\nvarying float   pixelArcLength;\nvarying vec4    fragColor;\n\nvoid main() {\n  if (\n    outOfRange(clipBounds[0], clipBounds[1], worldPosition) ||\n    fragColor.a * opacity == 0.\n  ) discard;\n\n  float dashWeight = texture2D(dashTexture, vec2(dashScale * pixelArcLength, 0)).r;\n  if(dashWeight < 0.5) {\n    discard;\n  }\n  gl_FragColor = fragColor * opacity;\n}\n"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\n#define FLOAT_MAX  1.70141184e38\n#define FLOAT_MIN  1.17549435e-38\n\n// https://github.com/mikolalysenko/glsl-read-float/blob/master/index.glsl\nvec4 packFloat(float v) {\n  float av = abs(v);\n\n  //Handle special cases\n  if(av < FLOAT_MIN) {\n    return vec4(0.0, 0.0, 0.0, 0.0);\n  } else if(v > FLOAT_MAX) {\n    return vec4(127.0, 128.0, 0.0, 0.0) / 255.0;\n  } else if(v < -FLOAT_MAX) {\n    return vec4(255.0, 128.0, 0.0, 0.0) / 255.0;\n  }\n\n  vec4 c = vec4(0,0,0,0);\n\n  //Compute exponent and mantissa\n  float e = floor(log2(av));\n  float m = av * pow(2.0, -e) - 1.0;\n\n  //Unpack mantissa\n  c[1] = floor(128.0 * m);\n  m -= c[1] / 128.0;\n  c[2] = floor(32768.0 * m);\n  m -= c[2] / 32768.0;\n  c[3] = floor(8388608.0 * m);\n\n  //Unpack exponent\n  float ebias = e + 127.0;\n  c[0] = floor(ebias / 2.0);\n  ebias -= c[0] * 2.0;\n  c[1] += floor(ebias) * 128.0;\n\n  //Unpack sign bit\n  c[0] += 128.0 * step(0.0, -v);\n\n  //Scale back to range\n  return c / 255.0;\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform float pickId;\nuniform vec3 clipBounds[2];\n\nvarying vec3 worldPosition;\nvarying float pixelArcLength;\nvarying vec4 fragColor;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], worldPosition)) discard;\n\n  gl_FragColor = vec4(pickId/255.0, packFloat(pixelArcLength).xyz);\n}"]),d=[{name:"position",type:"vec3"},{name:"nextPosition",type:"vec3"},{name:"arcLength",type:"float"},{name:"lineWidth",type:"float"},{name:"color",type:"vec4"}];b.createShader=function(u){return o(u,a,l,null,d)},b.createPickShader=function(u){return o(u,a,i,null,d)}},{"gl-shader":132,glslify:231}],91:[function(x,T,b){"use strict";T.exports=function(M){var A=M.gl||M.scene&&M.scene.gl,k=c(A);k.attributes.position.location=0,k.attributes.nextPosition.location=1,k.attributes.arcLength.location=2,k.attributes.lineWidth.location=3,k.attributes.color.location=4;var C=h(A);C.attributes.position.location=0,C.attributes.nextPosition.location=1,C.attributes.arcLength.location=2,C.attributes.lineWidth.location=3,C.attributes.color.location=4;for(var P=e(A),D=o(A,[{buffer:P,size:3,offset:0,stride:48},{buffer:P,size:3,offset:12,stride:48},{buffer:P,size:1,offset:24,stride:48},{buffer:P,size:1,offset:28,stride:48},{buffer:P,size:4,offset:32,stride:48}]),F=u(new Array(1024),[256,1,4]),R=0;R<1024;++R)F.data[R]=255;var L=a(A,F);L.wrap=A.REPEAT;var I=new w(A,k,C,P,D,L);return I.update(M),I};var e=x("gl-buffer"),o=x("gl-vao"),a=x("gl-texture2d"),l=new Uint8Array(4),i=new Float32Array(l.buffer),d=x("binary-search-bounds"),u=x("ndarray"),s=x("./lib/shaders"),c=s.createShader,h=s.createPickShader,p=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function v(M,A){for(var k=0,C=0;C<3;++C){var P=M[C]-A[C];k+=P*P}return Math.sqrt(k)}function g(M){for(var A=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],k=0;k<3;++k)A[0][k]=Math.max(M[0][k],A[0][k]),A[1][k]=Math.min(M[1][k],A[1][k]);return A}function f(M,A,k,C){this.arcLength=M,this.position=A,this.index=k,this.dataCoordinate=C}function w(M,A,k,C,P,D){this.gl=M,this.shader=A,this.pickShader=k,this.buffer=C,this.vao=P,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.points=[],this.arcLength=[],this.vertexCount=0,this.bounds=[[0,0,0],[0,0,0]],this.pickId=0,this.lineWidth=1,this.texture=D,this.dashScale=1,this.opacity=1,this.hasAlpha=!1,this.dirty=!0,this.pixelRatio=1}var y=w.prototype;y.isTransparent=function(){return this.hasAlpha},y.isOpaque=function(){return!this.hasAlpha},y.pickSlots=1,y.setPickBase=function(M){this.pickId=M},y.drawTransparent=y.draw=function(M){if(this.vertexCount){var A=this.gl,k=this.shader,C=this.vao;k.bind(),k.uniforms={model:M.model||p,view:M.view||p,projection:M.projection||p,clipBounds:g(this.clipBounds),dashTexture:this.texture.bind(),dashScale:this.dashScale/this.arcLength[this.arcLength.length-1],opacity:this.opacity,screenShape:[A.drawingBufferWidth,A.drawingBufferHeight],pixelRatio:this.pixelRatio},C.bind(),C.draw(A.TRIANGLE_STRIP,this.vertexCount),C.unbind()}},y.drawPick=function(M){if(this.vertexCount){var A=this.gl,k=this.pickShader,C=this.vao;k.bind(),k.uniforms={model:M.model||p,view:M.view||p,projection:M.projection||p,pickId:this.pickId,clipBounds:g(this.clipBounds),screenShape:[A.drawingBufferWidth,A.drawingBufferHeight],pixelRatio:this.pixelRatio},C.bind(),C.draw(A.TRIANGLE_STRIP,this.vertexCount),C.unbind()}},y.update=function(M){var A,k;this.dirty=!0;var C=!!M.connectGaps;"dashScale"in M&&(this.dashScale=M.dashScale),this.hasAlpha=!1,"opacity"in M&&(this.opacity=+M.opacity,this.opacity<1&&(this.hasAlpha=!0));var P=[],D=[],F=[],R=0,L=0,I=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],B=M.position||M.positions;if(B){var V=M.color||M.colors||[0,0,0,1],Z=M.lineWidth||1,Y=!1;e:for(A=1;A<B.length;++A){var ee,J,$,Q=B[A-1],se=B[A];for(D.push(R),F.push(Q.slice()),k=0;k<3;++k){if(isNaN(Q[k])||isNaN(se[k])||!isFinite(Q[k])||!isFinite(se[k])){if(!C&&P.length>0){for(var j=0;j<24;++j)P.push(P[P.length-12]);L+=2,Y=!0}continue e}I[0][k]=Math.min(I[0][k],Q[k],se[k]),I[1][k]=Math.max(I[1][k],Q[k],se[k])}Array.isArray(V[0])?(ee=V.length>A-1?V[A-1]:V.length>0?V[V.length-1]:[0,0,0,1],J=V.length>A?V[A]:V.length>0?V[V.length-1]:[0,0,0,1]):ee=J=V,3===ee.length&&(ee=[ee[0],ee[1],ee[2],1]),3===J.length&&(J=[J[0],J[1],J[2],1]),!this.hasAlpha&&ee[3]<1&&(this.hasAlpha=!0),$=Array.isArray(Z)?Z.length>A-1?Z[A-1]:Z.length>0?Z[Z.length-1]:[0,0,0,1]:Z;var G=R;if(R+=v(Q,se),Y){for(k=0;k<2;++k)P.push(Q[0],Q[1],Q[2],se[0],se[1],se[2],G,$,ee[0],ee[1],ee[2],ee[3]);L+=2,Y=!1}P.push(Q[0],Q[1],Q[2],se[0],se[1],se[2],G,$,ee[0],ee[1],ee[2],ee[3],Q[0],Q[1],Q[2],se[0],se[1],se[2],G,-$,ee[0],ee[1],ee[2],ee[3],se[0],se[1],se[2],Q[0],Q[1],Q[2],R,-$,J[0],J[1],J[2],J[3],se[0],se[1],se[2],Q[0],Q[1],Q[2],R,$,J[0],J[1],J[2],J[3]),L+=4}}if(this.buffer.update(P),D.push(R),F.push(B[B.length-1].slice()),this.bounds=I,this.vertexCount=L,this.points=F,this.arcLength=D,"dashes"in M){var W=M.dashes.slice();for(W.unshift(0),A=1;A<W.length;++A)W[A]=W[A-1]+W[A];var ie=u(new Array(1024),[256,1,4]);for(A=0;A<256;++A){for(k=0;k<4;++k)ie.set(A,0,k,0);1&d.le(W,W[W.length-1]*A/255)?ie.set(A,0,0,0):ie.set(A,0,0,255)}this.texture.setPixels(ie)}},y.dispose=function(){this.shader.dispose(),this.vao.dispose(),this.buffer.dispose()},y.pick=function(M){if(!M||M.id!==this.pickId)return null;var B,V,Z,A=(B=M.value[0],V=M.value[1],Z=M.value[2],l[0]=0,l[1]=Z,l[2]=V,l[3]=B,i[0]),k=d.le(this.arcLength,A);if(k<0)return null;if(k===this.arcLength.length-1)return new f(this.arcLength[this.arcLength.length-1],this.points[this.points.length-1].slice(),k);for(var C=this.points[k],P=this.points[Math.min(k+1,this.points.length-1)],D=(A-this.arcLength[k])/(this.arcLength[k+1]-this.arcLength[k]),F=1-D,R=[0,0,0],L=0;L<3;++L)R[L]=F*C[L]+D*P[L];var I=Math.min(D<.5?k:k+1,this.points.length-1);return new f(A,R,I,this.points[I])}},{"./lib/shaders":90,"binary-search-bounds":31,"gl-buffer":78,"gl-texture2d":146,"gl-vao":150,ndarray:259}],92:[function(x,T,b){T.exports=function(e){var o=new Float32Array(16);return o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o[4]=e[4],o[5]=e[5],o[6]=e[6],o[7]=e[7],o[8]=e[8],o[9]=e[9],o[10]=e[10],o[11]=e[11],o[12]=e[12],o[13]=e[13],o[14]=e[14],o[15]=e[15],o}},{}],93:[function(x,T,b){T.exports=function(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],94:[function(x,T,b){T.exports=function(e){var o=e[0],a=e[1],l=e[2],i=e[3],d=e[4],u=e[5],s=e[6],c=e[7],h=e[8],p=e[9],v=e[10],g=e[11],f=e[12],w=e[13],y=e[14],M=e[15];return(o*u-a*d)*(v*M-g*y)-(o*s-l*d)*(p*M-g*w)+(o*c-i*d)*(p*y-v*w)+(a*s-l*u)*(h*M-g*f)-(a*c-i*u)*(h*y-v*f)+(l*c-i*s)*(h*w-p*f)}},{}],95:[function(x,T,b){T.exports=function(e,o){var a=o[0],l=o[1],i=o[2],d=o[3],u=a+a,s=l+l,c=i+i,h=a*u,p=l*u,v=l*s,g=i*u,f=i*s,w=i*c,y=d*u,M=d*s,A=d*c;return e[0]=1-v-w,e[1]=p+A,e[2]=g-M,e[3]=0,e[4]=p-A,e[5]=1-h-w,e[6]=f+y,e[7]=0,e[8]=g+M,e[9]=f-y,e[10]=1-h-v,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],96:[function(x,T,b){T.exports=function(e,o,a){var l=o[0],i=o[1],d=o[2],u=o[3],s=l+l,c=i+i,h=d+d,p=l*s,v=l*c,g=l*h,f=i*c,w=i*h,y=d*h,M=u*s,A=u*c,k=u*h;return e[0]=1-(f+y),e[1]=v+k,e[2]=g-A,e[3]=0,e[4]=v-k,e[5]=1-(p+y),e[6]=w+M,e[7]=0,e[8]=g+A,e[9]=w-M,e[10]=1-(p+f),e[11]=0,e[12]=a[0],e[13]=a[1],e[14]=a[2],e[15]=1,e}},{}],97:[function(x,T,b){T.exports=function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}},{}],98:[function(x,T,b){T.exports=function(e,o){var a=o[0],l=o[1],i=o[2],d=o[3],u=o[4],s=o[5],c=o[6],h=o[7],p=o[8],v=o[9],g=o[10],f=o[11],w=o[12],y=o[13],M=o[14],A=o[15],k=a*s-l*u,C=a*c-i*u,P=a*h-d*u,D=l*c-i*s,F=l*h-d*s,R=i*h-d*c,L=p*y-v*w,I=p*M-g*w,B=p*A-f*w,V=v*M-g*y,Z=v*A-f*y,Y=g*A-f*M,ee=k*Y-C*Z+P*V+D*B-F*I+R*L;return ee?(e[0]=(s*Y-c*Z+h*V)*(ee=1/ee),e[1]=(i*Z-l*Y-d*V)*ee,e[2]=(y*R-M*F+A*D)*ee,e[3]=(g*F-v*R-f*D)*ee,e[4]=(c*B-u*Y-h*I)*ee,e[5]=(a*Y-i*B+d*I)*ee,e[6]=(M*P-w*R-A*C)*ee,e[7]=(p*R-g*P+f*C)*ee,e[8]=(u*Z-s*B+h*L)*ee,e[9]=(l*B-a*Z-d*L)*ee,e[10]=(w*F-y*P+A*k)*ee,e[11]=(v*P-p*F-f*k)*ee,e[12]=(s*I-u*V-c*L)*ee,e[13]=(a*V-l*I+i*L)*ee,e[14]=(y*C-w*D-M*k)*ee,e[15]=(p*D-v*C+g*k)*ee,e):null}},{}],99:[function(x,T,b){var e=x("./identity");T.exports=function(o,a,l,i){var d,u,s,c,h,p,v,g,f,w,y=a[0],M=a[1],A=a[2],k=i[0],C=i[1],P=i[2],D=l[0],F=l[1],R=l[2];return Math.abs(y-D)<1e-6&&Math.abs(M-F)<1e-6&&Math.abs(A-R)<1e-6?e(o):(v=y-D,g=M-F,f=A-R,d=C*(f*=w=1/Math.sqrt(v*v+g*g+f*f))-P*(g*=w),u=P*(v*=w)-k*f,s=k*g-C*v,(w=Math.sqrt(d*d+u*u+s*s))?(d*=w=1/w,u*=w,s*=w):(d=0,u=0,s=0),c=g*s-f*u,h=f*d-v*s,p=v*u-g*d,(w=Math.sqrt(c*c+h*h+p*p))?(c*=w=1/w,h*=w,p*=w):(c=0,h=0,p=0),o[0]=d,o[1]=c,o[2]=v,o[3]=0,o[4]=u,o[5]=h,o[6]=g,o[7]=0,o[8]=s,o[9]=p,o[10]=f,o[11]=0,o[12]=-(d*y+u*M+s*A),o[13]=-(c*y+h*M+p*A),o[14]=-(v*y+g*M+f*A),o[15]=1,o)}},{"./identity":97}],100:[function(x,T,b){T.exports=function(e,o,a){var l=o[0],i=o[1],d=o[2],u=o[3],s=o[4],c=o[5],h=o[6],p=o[7],v=o[8],g=o[9],f=o[10],w=o[11],y=o[12],M=o[13],A=o[14],k=o[15],C=a[0],P=a[1],D=a[2],F=a[3];return e[0]=C*l+P*s+D*v+F*y,e[1]=C*i+P*c+D*g+F*M,e[2]=C*d+P*h+D*f+F*A,e[3]=C*u+P*p+D*w+F*k,e[4]=(C=a[4])*l+(P=a[5])*s+(D=a[6])*v+(F=a[7])*y,e[5]=C*i+P*c+D*g+F*M,e[6]=C*d+P*h+D*f+F*A,e[7]=C*u+P*p+D*w+F*k,e[8]=(C=a[8])*l+(P=a[9])*s+(D=a[10])*v+(F=a[11])*y,e[9]=C*i+P*c+D*g+F*M,e[10]=C*d+P*h+D*f+F*A,e[11]=C*u+P*p+D*w+F*k,e[12]=(C=a[12])*l+(P=a[13])*s+(D=a[14])*v+(F=a[15])*y,e[13]=C*i+P*c+D*g+F*M,e[14]=C*d+P*h+D*f+F*A,e[15]=C*u+P*p+D*w+F*k,e}},{}],101:[function(x,T,b){T.exports=function(e,o,a,l,i,d,u){var s=1/(o-a),c=1/(l-i),h=1/(d-u);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*c,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*h,e[11]=0,e[12]=(o+a)*s,e[13]=(i+l)*c,e[14]=(u+d)*h,e[15]=1,e}},{}],102:[function(x,T,b){T.exports=function(e,o,a,l,i){var d=1/Math.tan(o/2),u=1/(l-i);return e[0]=d/a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=d,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(i+l)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*i*l*u,e[15]=0,e}},{}],103:[function(x,T,b){T.exports=function(e,o,a,l){var i,d,u,s,c,h,p,v,g,f,w,y,M,A,k,C,P,D,F,R,L,I,B,V,Z=l[0],Y=l[1],ee=l[2],J=Math.sqrt(Z*Z+Y*Y+ee*ee);return Math.abs(J)<1e-6?null:(Z*=J=1/J,Y*=J,ee*=J,i=Math.sin(a),d=Math.cos(a),c=o[1],h=o[2],p=o[3],g=o[5],f=o[6],w=o[7],M=o[9],A=o[10],k=o[11],F=Z*Y*(u=1-d)-ee*i,R=Y*Y*u+d,L=ee*Y*u+Z*i,I=Z*ee*u+Y*i,B=Y*ee*u-Z*i,V=ee*ee*u+d,e[0]=(s=o[0])*(C=Z*Z*u+d)+(v=o[4])*(P=Y*Z*u+ee*i)+(y=o[8])*(D=ee*Z*u-Y*i),e[1]=c*C+g*P+M*D,e[2]=h*C+f*P+A*D,e[3]=p*C+w*P+k*D,e[4]=s*F+v*R+y*L,e[5]=c*F+g*R+M*L,e[6]=h*F+f*R+A*L,e[7]=p*F+w*R+k*L,e[8]=s*I+v*B+y*V,e[9]=c*I+g*B+M*V,e[10]=h*I+f*B+A*V,e[11]=p*I+w*B+k*V,o!==e&&(e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15]),e)}},{}],104:[function(x,T,b){T.exports=function(e,o,a){var l=Math.sin(a),i=Math.cos(a),d=o[4],u=o[5],s=o[6],c=o[7],h=o[8],p=o[9],v=o[10],g=o[11];return o!==e&&(e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15]),e[4]=d*i+h*l,e[5]=u*i+p*l,e[6]=s*i+v*l,e[7]=c*i+g*l,e[8]=h*i-d*l,e[9]=p*i-u*l,e[10]=v*i-s*l,e[11]=g*i-c*l,e}},{}],105:[function(x,T,b){T.exports=function(e,o,a){var l=Math.sin(a),i=Math.cos(a),d=o[0],u=o[1],s=o[2],c=o[3],h=o[8],p=o[9],v=o[10],g=o[11];return o!==e&&(e[4]=o[4],e[5]=o[5],e[6]=o[6],e[7]=o[7],e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15]),e[0]=d*i-h*l,e[1]=u*i-p*l,e[2]=s*i-v*l,e[3]=c*i-g*l,e[8]=d*l+h*i,e[9]=u*l+p*i,e[10]=s*l+v*i,e[11]=c*l+g*i,e}},{}],106:[function(x,T,b){T.exports=function(e,o,a){var l=Math.sin(a),i=Math.cos(a),d=o[0],u=o[1],s=o[2],c=o[3],h=o[4],p=o[5],v=o[6],g=o[7];return o!==e&&(e[8]=o[8],e[9]=o[9],e[10]=o[10],e[11]=o[11],e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15]),e[0]=d*i+h*l,e[1]=u*i+p*l,e[2]=s*i+v*l,e[3]=c*i+g*l,e[4]=h*i-d*l,e[5]=p*i-u*l,e[6]=v*i-s*l,e[7]=g*i-c*l,e}},{}],107:[function(x,T,b){T.exports=function(e,o,a){var l=a[0],i=a[1],d=a[2];return e[0]=o[0]*l,e[1]=o[1]*l,e[2]=o[2]*l,e[3]=o[3]*l,e[4]=o[4]*i,e[5]=o[5]*i,e[6]=o[6]*i,e[7]=o[7]*i,e[8]=o[8]*d,e[9]=o[9]*d,e[10]=o[10]*d,e[11]=o[11]*d,e[12]=o[12],e[13]=o[13],e[14]=o[14],e[15]=o[15],e}},{}],108:[function(x,T,b){T.exports=function(e,o,a){var l,i,d,u,s,c,h,p,v,g,f,w,y=a[0],M=a[1],A=a[2];return o===e?(e[12]=o[0]*y+o[4]*M+o[8]*A+o[12],e[13]=o[1]*y+o[5]*M+o[9]*A+o[13],e[14]=o[2]*y+o[6]*M+o[10]*A+o[14],e[15]=o[3]*y+o[7]*M+o[11]*A+o[15]):(i=o[1],d=o[2],u=o[3],s=o[4],c=o[5],h=o[6],p=o[7],v=o[8],g=o[9],f=o[10],w=o[11],e[0]=l=o[0],e[1]=i,e[2]=d,e[3]=u,e[4]=s,e[5]=c,e[6]=h,e[7]=p,e[8]=v,e[9]=g,e[10]=f,e[11]=w,e[12]=l*y+s*M+v*A+o[12],e[13]=i*y+c*M+g*A+o[13],e[14]=d*y+h*M+f*A+o[14],e[15]=u*y+p*M+w*A+o[15]),e}},{}],109:[function(x,T,b){T.exports=function(e,o){if(e===o){var a=o[1],l=o[2],i=o[3],d=o[6],u=o[7],s=o[11];e[1]=o[4],e[2]=o[8],e[3]=o[12],e[4]=a,e[6]=o[9],e[7]=o[13],e[8]=l,e[9]=d,e[11]=o[14],e[12]=i,e[13]=u,e[14]=s}else e[0]=o[0],e[1]=o[4],e[2]=o[8],e[3]=o[12],e[4]=o[1],e[5]=o[5],e[6]=o[9],e[7]=o[13],e[8]=o[2],e[9]=o[6],e[10]=o[10],e[11]=o[14],e[12]=o[3],e[13]=o[7],e[14]=o[11],e[15]=o[15];return e}},{}],110:[function(x,T,b){"use strict";var e=x("barycentric"),o=x("polytope-closest-point/lib/closest_point_2d.js");function a(d,u){for(var s=[0,0,0,0],c=0;c<4;++c)for(var h=0;h<4;++h)s[h]+=d[4*c+h]*u[c];return s}function l(d,u,s,c,h){for(var p=a(c,a(s,a(u,[d[0],d[1],d[2],1]))),v=0;v<3;++v)p[v]/=p[3];return[.5*h[0]*(1+p[0]),.5*h[1]*(1-p[1])]}function i(d,u){for(var s=[0,0,0],c=0;c<d.length;++c)for(var h=d[c],p=u[c],v=0;v<3;++v)s[v]+=p*h[v];return s}T.exports=function(d,u,s,c,h,p){if(1===d.length)return[0,d[0].slice()];for(var v=new Array(d.length),g=0;g<d.length;++g)v[g]=l(d[g],s,c,h,p);var f=0,w=1/0;for(g=0;g<v.length;++g){for(var y=0,M=0;M<2;++M)y+=Math.pow(v[g][M]-u[M],2);y<w&&(w=y,f=g)}var A=function(C,P){if(2===C.length){for(var D=0,F=0,R=0;R<2;++R)D+=Math.pow(P[R]-C[0][R],2),F+=Math.pow(P[R]-C[1][R],2);return(D=Math.sqrt(D))+(F=Math.sqrt(F))<1e-6?[1,0]:[F/(D+F),D/(F+D)]}if(3===C.length){var L=[0,0];return o(C[0],C[1],C[2],P,L),e(C,L)}return[]}(v,u),k=0;for(g=0;g<3;++g){if(A[g]<-.001||A[g]>1.0001)return null;k+=A[g]}return Math.abs(k-1)>.001?null:[f,i(d,A),A]}},{barycentric:14,"polytope-closest-point/lib/closest_point_2d.js":270}],111:[function(x,T,b){var e=x("glslify"),o=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position, normal;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model\n           , view\n           , projection\n           , inverseModel;\nuniform vec3 eyePosition\n           , lightPosition;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvec4 project(vec3 p) {\n  return projection * view * model * vec4(p, 1.0);\n}\n\nvoid main() {\n  gl_Position      = project(position);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * vec4(position , 1.0);\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal  = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  f_color          = color;\n  f_data           = position;\n  f_uv             = uv;\n}\n"]),a=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\n//#pragma glslify: beckmann = require(glsl-specular-beckmann) // used in gl-surface3d\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness\n            , fresnel\n            , kambient\n            , kdiffuse\n            , kspecular;\nuniform sampler2D texture;\n\nvarying vec3 f_normal\n           , f_lightDirection\n           , f_eyeDirection\n           , f_data;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (f_color.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], f_data)\n  ) discard;\n\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  //float specular = max(0.0, beckmann(L, V, N, roughness)); // used in gl-surface3d\n\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = vec4(f_color.rgb, 1.0) * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * f_color.a;\n}\n"]),l=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\n\nuniform mat4 model, view, projection;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_color = color;\n  f_data  = position;\n  f_uv    = uv;\n}"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec3 f_data;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_data)) discard;\n\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),d=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 uv;\nattribute float pointSize;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0 ,0.0 ,0.0);\n  } else {\n    gl_Position = projection * view * model * vec4(position, 1.0);\n  }\n  gl_PointSize = pointSize;\n  f_color = color;\n  f_uv = uv;\n}"]),u=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform sampler2D texture;\nuniform float opacity;\n\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  vec2 pointR = gl_PointCoord.xy - vec2(0.5, 0.5);\n  if(dot(pointR, pointR) > 0.25) {\n    discard;\n  }\n  gl_FragColor = f_color * texture2D(texture, f_uv) * opacity;\n}"]),s=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n  f_id        = id;\n  f_position  = position;\n}"]),c=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]),h=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3  position;\nattribute float pointSize;\nattribute vec4  id;\n\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0.0, 0.0, 0.0, 0.0);\n  } else {\n    gl_Position  = projection * view * model * vec4(position, 1.0);\n    gl_PointSize = pointSize;\n  }\n  f_id         = id;\n  f_position   = position;\n}"]),p=e(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec3 position;\n\nuniform mat4 model, view, projection;\n\nvoid main() {\n  gl_Position = projection * view * model * vec4(position, 1.0);\n}"]),v=e(["precision highp float;\n#define GLSLIFY 1\n\nuniform vec3 contourColor;\n\nvoid main() {\n  gl_FragColor = vec4(contourColor, 1.0);\n}\n"]);b.meshShader={vertex:o,fragment:a,attributes:[{name:"position",type:"vec3"},{name:"normal",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},b.wireShader={vertex:l,fragment:i,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"}]},b.pointShader={vertex:d,fragment:u,attributes:[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"pointSize",type:"float"}]},b.pickShader={vertex:s,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"id",type:"vec4"}]},b.pointPickShader={vertex:h,fragment:c,attributes:[{name:"position",type:"vec3"},{name:"pointSize",type:"float"},{name:"id",type:"vec4"}]},b.contourShader={vertex:p,fragment:v,attributes:[{name:"position",type:"vec3"}]}},{glslify:231}],112:[function(x,T,b){"use strict";var e=x("gl-shader"),o=x("gl-buffer"),a=x("gl-vao"),l=x("gl-texture2d"),i=x("normals"),d=x("gl-mat4/multiply"),u=x("gl-mat4/invert"),s=x("ndarray"),c=x("colormap"),h=x("simplicial-complex-contour"),p=x("typedarray-pool"),v=x("./lib/shaders"),g=x("./lib/closest-point"),f=v.meshShader,w=v.wireShader,y=v.pointShader,M=v.pickShader,A=v.pointPickShader,k=v.contourShader,C=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function P(Y,ee,J,$,Q,se,j,G,W,ie,q,te,ne,le,ue,de,he,be,ge,we,Ce,De,Se,Fe,ve,Te,Le){this.gl=Y,this.pixelRatio=1,this.cells=[],this.positions=[],this.intensity=[],this.texture=ee,this.dirty=!0,this.triShader=J,this.lineShader=$,this.pointShader=Q,this.pickShader=se,this.pointPickShader=j,this.contourShader=G,this.trianglePositions=W,this.triangleColors=q,this.triangleNormals=ne,this.triangleUVs=te,this.triangleIds=ie,this.triangleVAO=le,this.triangleCount=0,this.lineWidth=1,this.edgePositions=ue,this.edgeColors=he,this.edgeUVs=be,this.edgeIds=de,this.edgeVAO=ge,this.edgeCount=0,this.pointPositions=we,this.pointColors=De,this.pointUVs=Se,this.pointSizes=Fe,this.pointIds=Ce,this.pointVAO=ve,this.pointCount=0,this.contourLineWidth=1,this.contourPositions=Te,this.contourVAO=Le,this.contourCount=0,this.contourColor=[0,0,0],this.contourEnable=!0,this.pickVertex=!0,this.pickId=1,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.lightPosition=[1e5,1e5,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.opacity=1,this.hasAlpha=!1,this.opacityscale=!1,this._model=C,this._view=C,this._projection=C,this._resolution=[1,1]}var D=P.prototype;function F(Y,ee){if(!ee||!ee.length)return 1;for(var J=0;J<ee.length;++J){if(ee.length<2)return 1;if(ee[J][0]===Y)return ee[J][1];if(ee[J][0]>Y&&J>0){var $=(ee[J][0]-Y)/(ee[J][0]-ee[J-1][0]);return ee[J][1]*(1-$)+$*ee[J-1][1]}}return 1}function R(Y){var ee=e(Y,f.vertex,f.fragment);return ee.attributes.position.location=0,ee.attributes.color.location=2,ee.attributes.uv.location=3,ee.attributes.normal.location=4,ee}function L(Y){var ee=e(Y,w.vertex,w.fragment);return ee.attributes.position.location=0,ee.attributes.color.location=2,ee.attributes.uv.location=3,ee}function I(Y){var ee=e(Y,y.vertex,y.fragment);return ee.attributes.position.location=0,ee.attributes.color.location=2,ee.attributes.uv.location=3,ee.attributes.pointSize.location=4,ee}function B(Y){var ee=e(Y,M.vertex,M.fragment);return ee.attributes.position.location=0,ee.attributes.id.location=1,ee}function V(Y){var ee=e(Y,A.vertex,A.fragment);return ee.attributes.position.location=0,ee.attributes.id.location=1,ee.attributes.pointSize.location=4,ee}function Z(Y){var ee=e(Y,k.vertex,k.fragment);return ee.attributes.position.location=0,ee}D.isOpaque=function(){return!this.hasAlpha},D.isTransparent=function(){return this.hasAlpha},D.pickSlots=1,D.setPickBase=function(Y){this.pickId=Y},D.highlight=function(Y){if(Y&&this.contourEnable){for(var ee=h(this.cells,this.intensity,Y.intensity),J=ee.cells,$=ee.vertexIds,Q=ee.vertexWeights,se=J.length,j=p.mallocFloat32(6*se),G=0,W=0;W<se;++W)for(var ie=J[W],q=0;q<2;++q){var te=ie[0];2===ie.length&&(te=ie[q]);for(var ue=Q[te],de=1-ue,he=this.positions[$[te][0]],be=this.positions[$[te][1]],ge=0;ge<3;++ge)j[G++]=ue*he[ge]+de*be[ge]}this.contourCount=G/3|0,this.contourPositions.update(j.subarray(0,G)),p.free(j)}else this.contourCount=0},D.update=function(Y){Y=Y||{};var ee=this.gl;this.dirty=!0,"contourEnable"in Y&&(this.contourEnable=Y.contourEnable),"contourColor"in Y&&(this.contourColor=Y.contourColor),"lineWidth"in Y&&(this.lineWidth=Y.lineWidth),"lightPosition"in Y&&(this.lightPosition=Y.lightPosition),this.hasAlpha=!1,"opacity"in Y&&(this.opacity=Y.opacity,this.opacity<1&&(this.hasAlpha=!0)),"opacityscale"in Y&&(this.opacityscale=Y.opacityscale,this.hasAlpha=!0),"ambient"in Y&&(this.ambientLight=Y.ambient),"diffuse"in Y&&(this.diffuseLight=Y.diffuse),"specular"in Y&&(this.specularLight=Y.specular),"roughness"in Y&&(this.roughness=Y.roughness),"fresnel"in Y&&(this.fresnel=Y.fresnel),Y.texture?(this.texture.dispose(),this.texture=l(ee,Y.texture)):Y.colormap&&(this.texture.shape=[256,256],this.texture.minFilter=ee.LINEAR_MIPMAP_LINEAR,this.texture.magFilter=ee.LINEAR,this.texture.setPixels(function(un,Ze){for(var Qe=c({colormap:un,nshades:256,format:"rgba"}),qe=new Uint8Array(1024),it=0;it<256;++it){for(var Ie=Qe[it],ze=0;ze<3;++ze)qe[4*it+ze]=Ie[ze];qe[4*it+3]=Ze?255*F(it/255,Ze):255*Ie[3]}return s(qe,[256,256,4],[4,0,1])}(Y.colormap,this.opacityscale)),this.texture.generateMipmap());var J=Y.cells,$=Y.positions;if($&&J){var Q=[],se=[],j=[],G=[],W=[],ie=[],q=[],te=[],ne=[],le=[],ue=[],de=[],he=[],be=[];this.cells=J,this.positions=$;var ge=Y.vertexNormals,we=Y.cellNormals,Ce=void 0===Y.vertexNormalsEpsilon?1e-6:Y.vertexNormalsEpsilon;Y.useFacetNormals&&!we&&(we=i.faceNormals(J,$,void 0===Y.faceNormalsEpsilon?1e-6:Y.faceNormalsEpsilon)),we||ge||(ge=i.vertexNormals(J,$,Ce));var Se=Y.vertexColors,Fe=Y.cellColors,ve=Y.meshColor||[1,1,1,1],Te=Y.vertexUVs,Le=Y.vertexIntensity,Ee=Y.cellUVs,Pe=Y.cellIntensity,je=1/0,Ge=-1/0;if(!Te&&!Ee)if(Le)if(Y.vertexIntensityBounds)je=+Y.vertexIntensityBounds[0],Ge=+Y.vertexIntensityBounds[1];else for(var Ke=0;Ke<Le.length;++Ke){var lt=Le[Ke];je=Math.min(je,lt),Ge=Math.max(Ge,lt)}else if(Pe)if(Y.cellIntensityBounds)je=+Y.cellIntensityBounds[0],Ge=+Y.cellIntensityBounds[1];else for(Ke=0;Ke<Pe.length;++Ke)lt=Pe[Ke],je=Math.min(je,lt),Ge=Math.max(Ge,lt);else for(Ke=0;Ke<$.length;++Ke)lt=$[Ke][2],je=Math.min(je,lt),Ge=Math.max(Ge,lt);this.intensity=Le||Pe||function(un){for(var Ze=un.length,Qe=new Array(Ze),qe=0;qe<Ze;++qe)Qe[qe]=un[qe][2];return Qe}($),this.pickVertex=!(Pe||Fe);var Ue=Y.pointSizes,$e=Y.pointSize||1;for(this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],Ke=0;Ke<$.length;++Ke)for(var et=$[Ke],tt=0;tt<3;++tt)!isNaN(et[tt])&&isFinite(et[tt])&&(this.bounds[0][tt]=Math.min(this.bounds[0][tt],et[tt]),this.bounds[1][tt]=Math.max(this.bounds[1][tt],et[tt]));var ct=0,xt=0,Ct=0;e:for(Ke=0;Ke<J.length;++Ke){var Ht=J[Ke];switch(Ht.length){case 1:for(et=$[ht=Ht[0]],tt=0;tt<3;++tt)if(isNaN(et[tt])||!isFinite(et[tt]))continue e;le.push(et[0],et[1],et[2]),ut=Se?Se[ht]:Fe?Fe[Ke]:ve,this.opacityscale&&Le?se.push(ut[0],ut[1],ut[2],this.opacity*F((Le[ht]-je)/(Ge-je),this.opacityscale)):3===ut.length?ue.push(ut[0],ut[1],ut[2],this.opacity):(ue.push(ut[0],ut[1],ut[2],ut[3]*this.opacity),ut[3]<1&&(this.hasAlpha=!0)),de.push((Ot=Te?Te[ht]:Le?[(Le[ht]-je)/(Ge-je),0]:Ee?Ee[Ke]:Pe?[(Pe[Ke]-je)/(Ge-je),0]:[(et[2]-je)/(Ge-je),0])[0],Ot[1]),he.push(Ue?Ue[ht]:$e),be.push(Ke),Ct+=1;break;case 2:for(tt=0;tt<2;++tt){et=$[ht=Ht[tt]];for(var zt=0;zt<3;++zt)if(isNaN(et[zt])||!isFinite(et[zt]))continue e}for(tt=0;tt<2;++tt)et=$[ht=Ht[tt]],ie.push(et[0],et[1],et[2]),ut=Se?Se[ht]:Fe?Fe[Ke]:ve,this.opacityscale&&Le?se.push(ut[0],ut[1],ut[2],this.opacity*F((Le[ht]-je)/(Ge-je),this.opacityscale)):3===ut.length?q.push(ut[0],ut[1],ut[2],this.opacity):(q.push(ut[0],ut[1],ut[2],ut[3]*this.opacity),ut[3]<1&&(this.hasAlpha=!0)),te.push((Ot=Te?Te[ht]:Le?[(Le[ht]-je)/(Ge-je),0]:Ee?Ee[Ke]:Pe?[(Pe[Ke]-je)/(Ge-je),0]:[(et[2]-je)/(Ge-je),0])[0],Ot[1]),ne.push(Ke);xt+=1;break;case 3:for(tt=0;tt<3;++tt)for(et=$[ht=Ht[tt]],zt=0;zt<3;++zt)if(isNaN(et[zt])||!isFinite(et[zt]))continue e;for(tt=0;tt<3;++tt){var ht,ut,Ot,tn;et=$[ht=Ht[2-tt]],Q.push(et[0],et[1],et[2]),(ut=Se?Se[ht]:Fe?Fe[Ke]:ve)?this.opacityscale&&Le?se.push(ut[0],ut[1],ut[2],this.opacity*F((Le[ht]-je)/(Ge-je),this.opacityscale)):3===ut.length?se.push(ut[0],ut[1],ut[2],this.opacity):(se.push(ut[0],ut[1],ut[2],ut[3]*this.opacity),ut[3]<1&&(this.hasAlpha=!0)):se.push(.5,.5,.5,1),G.push((Ot=Te?Te[ht]:Le?[(Le[ht]-je)/(Ge-je),0]:Ee?Ee[Ke]:Pe?[(Pe[Ke]-je)/(Ge-je),0]:[(et[2]-je)/(Ge-je),0])[0],Ot[1]),j.push((tn=ge?ge[ht]:we[Ke])[0],tn[1],tn[2]),W.push(Ke)}ct+=1}}this.pointCount=Ct,this.edgeCount=xt,this.triangleCount=ct,this.pointPositions.update(le),this.pointColors.update(ue),this.pointUVs.update(de),this.pointSizes.update(he),this.pointIds.update(new Uint32Array(be)),this.edgePositions.update(ie),this.edgeColors.update(q),this.edgeUVs.update(te),this.edgeIds.update(new Uint32Array(ne)),this.trianglePositions.update(Q),this.triangleColors.update(se),this.triangleUVs.update(G),this.triangleNormals.update(j),this.triangleIds.update(new Uint32Array(W))}},D.drawTransparent=D.draw=function(Y){for(var ee=this.gl,J=(Y=Y||{}).model||C,$=Y.view||C,Q=Y.projection||C,se=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],j=0;j<3;++j)se[0][j]=Math.max(se[0][j],this.clipBounds[0][j]),se[1][j]=Math.min(se[1][j],this.clipBounds[1][j]);var G={model:J,view:$,projection:Q,inverseModel:C.slice(),clipBounds:se,kambient:this.ambientLight,kdiffuse:this.diffuseLight,kspecular:this.specularLight,roughness:this.roughness,fresnel:this.fresnel,eyePosition:[0,0,0],lightPosition:[0,0,0],contourColor:this.contourColor,texture:0};G.inverseModel=u(G.inverseModel,G.model),ee.disable(ee.CULL_FACE),this.texture.bind(0);var W=new Array(16);for(d(W,G.view,G.model),d(W,G.projection,W),u(W,W),j=0;j<3;++j)G.eyePosition[j]=W[12+j]/W[15];var ie,q=W[15];for(j=0;j<3;++j)q+=this.lightPosition[j]*W[4*j+3];for(j=0;j<3;++j){for(var te=W[12+j],ne=0;ne<3;++ne)te+=W[4*ne+j]*this.lightPosition[ne];G.lightPosition[j]=te/q}this.triangleCount>0&&((ie=this.triShader).bind(),ie.uniforms=G,this.triangleVAO.bind(),ee.drawArrays(ee.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&this.lineWidth>0&&((ie=this.lineShader).bind(),ie.uniforms=G,this.edgeVAO.bind(),ee.lineWidth(this.lineWidth*this.pixelRatio),ee.drawArrays(ee.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((ie=this.pointShader).bind(),ie.uniforms=G,this.pointVAO.bind(),ee.drawArrays(ee.POINTS,0,this.pointCount),this.pointVAO.unbind()),this.contourEnable&&this.contourCount>0&&this.contourLineWidth>0&&((ie=this.contourShader).bind(),ie.uniforms=G,this.contourVAO.bind(),ee.drawArrays(ee.LINES,0,this.contourCount),this.contourVAO.unbind())},D.drawPick=function(Y){for(var ee=this.gl,J=(Y=Y||{}).model||C,$=Y.view||C,Q=Y.projection||C,se=[[-1e6,-1e6,-1e6],[1e6,1e6,1e6]],j=0;j<3;++j)se[0][j]=Math.max(se[0][j],this.clipBounds[0][j]),se[1][j]=Math.min(se[1][j],this.clipBounds[1][j]);this._model=[].slice.call(J),this._view=[].slice.call($),this._projection=[].slice.call(Q),this._resolution=[ee.drawingBufferWidth,ee.drawingBufferHeight];var G,W={model:J,view:$,projection:Q,clipBounds:se,pickId:this.pickId/255};(G=this.pickShader).bind(),G.uniforms=W,this.triangleCount>0&&(this.triangleVAO.bind(),ee.drawArrays(ee.TRIANGLES,0,3*this.triangleCount),this.triangleVAO.unbind()),this.edgeCount>0&&(this.edgeVAO.bind(),ee.lineWidth(this.lineWidth*this.pixelRatio),ee.drawArrays(ee.LINES,0,2*this.edgeCount),this.edgeVAO.unbind()),this.pointCount>0&&((G=this.pointPickShader).bind(),G.uniforms=W,this.pointVAO.bind(),ee.drawArrays(ee.POINTS,0,this.pointCount),this.pointVAO.unbind())},D.pick=function(Y){if(!Y||Y.id!==this.pickId)return null;for(var ee=Y.value[0]+256*Y.value[1]+65536*Y.value[2],J=this.cells[ee],$=this.positions,Q=new Array(J.length),se=0;se<J.length;++se)Q[se]=$[J[se]];var j=Y.coord[0],G=Y.coord[1];if(!this.pickVertex){var W=this.positions[J[0]],ie=this.positions[J[1]],q=this.positions[J[2]];return{_cellCenter:!0,position:[j,G],index:ee,cell:J,cellId:ee,intensity:this.intensity[ee],dataCoordinate:[(W[0]+ie[0]+q[0])/3,(W[1]+ie[1]+q[1])/3,(W[2]+ie[2]+q[2])/3]}}var ne=g(Q,[j*this.pixelRatio,this._resolution[1]-G*this.pixelRatio],this._model,this._view,this._projection,this._resolution);if(!ne)return null;var le=ne[2],ue=0;for(se=0;se<J.length;++se)ue+=le[se]*this.intensity[J[se]];return{position:ne[1],index:J[ne[0]],cell:J,cellId:ee,intensity:ue,dataCoordinate:this.positions[J[ne[0]]]}},D.dispose=function(){this.texture.dispose(),this.triShader.dispose(),this.lineShader.dispose(),this.pointShader.dispose(),this.pickShader.dispose(),this.pointPickShader.dispose(),this.triangleVAO.dispose(),this.trianglePositions.dispose(),this.triangleColors.dispose(),this.triangleUVs.dispose(),this.triangleNormals.dispose(),this.triangleIds.dispose(),this.edgeVAO.dispose(),this.edgePositions.dispose(),this.edgeColors.dispose(),this.edgeUVs.dispose(),this.edgeIds.dispose(),this.pointVAO.dispose(),this.pointPositions.dispose(),this.pointColors.dispose(),this.pointUVs.dispose(),this.pointSizes.dispose(),this.pointIds.dispose(),this.contourVAO.dispose(),this.contourPositions.dispose(),this.contourShader.dispose()},T.exports=function(Y,ee){if(1===arguments.length&&(Y=(ee=Y).gl),!(Y.getExtension("OES_standard_derivatives")||Y.getExtension("MOZ_OES_standard_derivatives")||Y.getExtension("WEBKIT_OES_standard_derivatives")))throw new Error("derivatives not supported");var $=R(Y),Q=L(Y),se=I(Y),j=B(Y),G=V(Y),W=Z(Y),ie=l(Y,s(new Uint8Array([255,255,255,255]),[1,1,4]));ie.generateMipmap(),ie.minFilter=Y.LINEAR_MIPMAP_LINEAR,ie.magFilter=Y.LINEAR;var q=o(Y),te=o(Y),ne=o(Y),le=o(Y),ue=o(Y),de=a(Y,[{buffer:q,type:Y.FLOAT,size:3},{buffer:ue,type:Y.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:te,type:Y.FLOAT,size:4},{buffer:ne,type:Y.FLOAT,size:2},{buffer:le,type:Y.FLOAT,size:3}]),he=o(Y),be=o(Y),ge=o(Y),we=o(Y),Ce=a(Y,[{buffer:he,type:Y.FLOAT,size:3},{buffer:we,type:Y.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:be,type:Y.FLOAT,size:4},{buffer:ge,type:Y.FLOAT,size:2}]),De=o(Y),Se=o(Y),Fe=o(Y),ve=o(Y),Te=o(Y),Le=a(Y,[{buffer:De,type:Y.FLOAT,size:3},{buffer:Te,type:Y.UNSIGNED_BYTE,size:4,normalized:!0},{buffer:Se,type:Y.FLOAT,size:4},{buffer:Fe,type:Y.FLOAT,size:2},{buffer:ve,type:Y.FLOAT,size:1}]),Ee=o(Y),je=new P(Y,ie,$,Q,se,j,G,W,q,ue,te,ne,le,de,he,we,be,ge,Ce,De,Te,Se,Fe,ve,Le,Ee,a(Y,[{buffer:Ee,type:Y.FLOAT,size:3}]));return je.update(ee),je}},{"./lib/closest-point":110,"./lib/shaders":111,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-shader":132,"gl-texture2d":146,"gl-vao":150,ndarray:259,normals:261,"simplicial-complex-contour":291,"typedarray-pool":308}],113:[function(x,T,b){"use strict";T.exports=function(s){var c=s.gl;return new l(s,e(c,[0,0,0,1,1,0,1,1]),o(c,a.boxVert,a.lineFrag))};var e=x("gl-buffer"),o=x("gl-shader"),a=x("./shaders");function l(s,c,h){this.plot=s,this.vbo=c,this.shader=h}var i,d,u=l.prototype;u.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},u.drawBox=(i=[0,0],d=[0,0],function(s,c,h,p,v){var f=this.shader,w=this.plot.gl;i[0]=s,i[1]=c,d[0]=h,d[1]=p,f.uniforms.lo=i,f.uniforms.hi=d,f.uniforms.color=v,w.drawArrays(w.TRIANGLE_STRIP,0,4)}),u.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],114:[function(x,T,b){"use strict";T.exports=function(g){var f=g.gl;return new i(g,e(f),o(f,l.gridVert,l.gridFrag),o(f,l.tickVert,l.gridFrag))};var e=x("gl-buffer"),o=x("gl-shader"),a=x("binary-search-bounds"),l=x("./shaders");function i(g,f,w,y){this.plot=g,this.vbo=f,this.shader=w,this.tickShader=y,this.ticks=[[],[]]}function d(g,f){return g-f}var u,s,c,h,p,g,f,w,y,M,A,v=i.prototype;v.draw=(u=[0,0],s=[0,0],c=[0,0],function(){for(var g=this.plot,f=this.vbo,w=this.shader,y=this.ticks,M=g.gl,A=g._tickBounds,k=g.dataBox,C=g.viewBox,P=g.gridLineWidth,D=g.gridLineColor,F=g.gridLineEnable,R=g.pixelRatio,L=0;L<2;++L){var I=A[L],V=.5*(k[L+2]+k[L]),Z=k[L+2]-k[L];s[L]=2*(A[L+2]-I)/Z,u[L]=2*(I-V)/Z}w.bind(),f.bind(),w.attributes.dataCoord.pointer(),w.uniforms.dataShift=u,w.uniforms.dataScale=s;var Y=0;for(L=0;L<2;++L){c[0]=c[1]=0,c[L]=1,w.uniforms.dataAxis=c,w.uniforms.lineWidth=P[L]/(C[L+2]-C[L])*R,w.uniforms.color=D[L];var ee=6*y[L].length;F[L]&&ee&&M.drawArrays(M.TRIANGLES,Y,ee),Y+=ee}}),v.drawTickMarks=(g=[0,0],f=[0,0],w=[1,0],y=[0,1],M=[0,0],A=[0,0],function(){for(var k=this.plot,C=this.vbo,P=this.tickShader,D=this.ticks,F=k.gl,R=k._tickBounds,L=k.dataBox,I=k.viewBox,B=k.pixelRatio,V=k.screenBox,Z=V[2]-V[0],Y=V[3]-V[1],ee=I[2]-I[0],J=I[3]-I[1],$=0;$<2;++$){var Q=R[$],j=.5*(L[$+2]+L[$]),G=L[$+2]-L[$];f[$]=2*(R[$+2]-Q)/G,g[$]=2*(Q-j)/G}f[0]*=ee/Z,g[0]*=ee/Z,f[1]*=J/Y,g[1]*=J/Y,P.bind(),C.bind(),P.attributes.dataCoord.pointer();var W=P.uniforms;W.dataShift=g,W.dataScale=f;var ie=k.tickMarkLength,q=k.tickMarkWidth,te=k.tickMarkColor,ne=6*D[0].length,le=Math.min(a.ge(D[0],(L[0]-R[0])/(R[2]-R[0]),d),D[0].length),ue=Math.min(a.gt(D[0],(L[2]-R[0])/(R[2]-R[0]),d),D[0].length),de=0+6*le,he=6*Math.max(0,ue-le),be=Math.min(a.ge(D[1],(L[1]-R[1])/(R[3]-R[1]),d),D[1].length),ge=Math.min(a.gt(D[1],(L[3]-R[1])/(R[3]-R[1]),d),D[1].length),we=ne+6*be,Ce=6*Math.max(0,ge-be);M[0]=2*(I[0]-ie[1])/Z-1,M[1]=(I[3]+I[1])/Y-1,A[0]=ie[1]*B/Z,A[1]=q[1]*B/Y,Ce&&(W.color=te[1],W.tickScale=A,W.dataAxis=y,W.screenOffset=M,F.drawArrays(F.TRIANGLES,we,Ce)),M[0]=(I[2]+I[0])/Z-1,M[1]=2*(I[1]-ie[0])/Y-1,A[0]=q[0]*B/Z,A[1]=ie[0]*B/Y,he&&(W.color=te[0],W.tickScale=A,W.dataAxis=w,W.screenOffset=M,F.drawArrays(F.TRIANGLES,de,he)),M[0]=2*(I[2]+ie[3])/Z-1,M[1]=(I[3]+I[1])/Y-1,A[0]=ie[3]*B/Z,A[1]=q[3]*B/Y,Ce&&(W.color=te[3],W.tickScale=A,W.dataAxis=y,W.screenOffset=M,F.drawArrays(F.TRIANGLES,we,Ce)),M[0]=(I[2]+I[0])/Z-1,M[1]=2*(I[3]+ie[2])/Y-1,A[0]=q[2]*B/Z,A[1]=ie[2]*B/Y,he&&(W.color=te[2],W.tickScale=A,W.dataAxis=w,W.screenOffset=M,F.drawArrays(F.TRIANGLES,de,he))}),v.update=(h=[1,1,-1,-1,1,-1],p=[1,-1,1,1,-1,-1],function(g){for(var f=g.ticks,w=g.bounds,y=new Float32Array(18*(f[0].length+f[1].length)),M=0,A=[[],[]],k=0;k<2;++k)for(var C=A[k],P=f[k],D=w[k],F=w[k+2],R=0;R<P.length;++R){var L=(P[R].x-D)/(F-D);C.push(L);for(var I=0;I<6;++I)y[M++]=L,y[M++]=h[I],y[M++]=p[I]}this.ticks=A,this.vbo.update(y)}),v.dispose=function(){this.vbo.dispose(),this.shader.dispose(),this.tickShader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132}],115:[function(x,T,b){"use strict";T.exports=function(s){var c=s.gl;return new l(s,e(c,[-1,-1,-1,1,1,-1,1,1]),o(c,a.lineVert,a.lineFrag))};var e=x("gl-buffer"),o=x("gl-shader"),a=x("./shaders");function l(s,c,h){this.plot=s,this.vbo=c,this.shader=h}var i,d,u=l.prototype;u.bind=function(){var s=this.shader;this.vbo.bind(),this.shader.bind(),s.attributes.coord.pointer(),s.uniforms.screenBox=this.plot.screenBox},u.drawLine=(i=[0,0],d=[0,0],function(s,c,h,p,v,g){var f=this.plot,w=this.shader,y=f.gl;i[0]=s,i[1]=c,d[0]=h,d[1]=p,w.uniforms.start=i,w.uniforms.end=d,w.uniforms.width=v*f.pixelRatio,w.uniforms.color=g,y.drawArrays(y.TRIANGLE_STRIP,0,4)}),u.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"gl-buffer":78,"gl-shader":132}],116:[function(x,T,b){"use strict";var e=x("glslify"),o=e(["precision lowp float;\n#define GLSLIFY 1\nuniform vec4 color;\nvoid main() {\n  gl_FragColor = vec4(color.xyz * color.w, color.w);\n}\n"]);T.exports={lineVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 start, end;\nuniform float width;\n\nvec2 perp(vec2 v) {\n  return vec2(v.y, -v.x);\n}\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  vec2 delta = normalize(perp(start - end));\n  vec2 offset = mix(start, end, 0.5 * (coord.y+1.0));\n  gl_Position = vec4(screen(offset + 0.5 * width * delta * coord.x), 0, 1);\n}\n"]),lineFrag:o,textVert:e(["#define GLSLIFY 1\nattribute vec3 textCoordinate;\n\nuniform vec2 dataScale, dataShift, dataAxis, screenOffset, textScale;\nuniform float angle;\n\nvoid main() {\n  float dataOffset  = textCoordinate.z;\n  vec2 glyphOffset  = textCoordinate.xy;\n  mat2 glyphMatrix = mat2(cos(angle), sin(angle), -sin(angle), cos(angle));\n  vec2 screenCoordinate = dataAxis * (dataScale * dataOffset + dataShift) +\n    glyphMatrix * glyphOffset * textScale + screenOffset;\n  gl_Position = vec4(screenCoordinate, 0, 1);\n}\n"]),textFrag:o,gridVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale;\nuniform float lineWidth;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  pos += 10.0 * dataCoord.y * vec2(dataAxis.y, -dataAxis.x) + dataCoord.z * lineWidth;\n  gl_Position = vec4(pos, 0, 1);\n}\n"]),gridFrag:o,boxVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 coord;\n\nuniform vec4 screenBox;\nuniform vec2 lo, hi;\n\nvec2 screen(vec2 v) {\n  return 2.0 * (v - screenBox.xy) / (screenBox.zw - screenBox.xy) - 1.0;\n}\n\nvoid main() {\n  gl_Position = vec4(screen(mix(lo, hi, coord)), 0, 1);\n}\n"]),tickVert:e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 dataCoord;\n\nuniform vec2 dataAxis, dataShift, dataScale, screenOffset, tickScale;\n\nvoid main() {\n  vec2 pos = dataAxis * (dataScale * dataCoord.x + dataShift);\n  gl_Position = vec4(pos + tickScale*dataCoord.yz + screenOffset, 0, 1);\n}\n"])}},{glslify:231}],117:[function(x,T,b){"use strict";T.exports=function(f){var w=f.gl;return new d(f,e(w),o(w,i.textVert,i.textFrag))};var e=x("gl-buffer"),o=x("gl-shader"),a=x("text-cache"),l=x("binary-search-bounds"),i=x("./shaders");function d(f,w,y){this.plot=f,this.vbo=w,this.shader=y,this.tickOffset=[[],[]],this.tickX=[[],[]],this.labelOffset=[0,0],this.labelCount=[0,0]}var u,s,c,h,p,v,f,w,g=d.prototype;g.drawTicks=(u=[0,0],s=[0,0],c=[0,0],function(f){var w=this.plot,y=this.shader,M=this.tickX[f],A=this.tickOffset[f],k=w.gl,C=w.viewBox,P=w.dataBox,D=w.screenBox,F=w.pixelRatio,R=w.tickEnable,L=w.tickPad,I=w.tickColor,B=w.tickAngle,V=w.labelEnable,Z=w.labelPad,Y=w.labelColor,ee=w.labelAngle,J=this.labelOffset[f],$=this.labelCount[f],Q=l.lt(M,P[f]),se=l.le(M,P[f+2]);u[0]=u[1]=0,u[f]=1,s[f]=(C[2+f]+C[f])/(D[2+f]-D[f])-1;var j=2/D[2+(1^f)]-D[1^f];s[1^f]=j*C[1^f]-1,R[f]&&(s[1^f]-=j*F*L[f],Q<se&&A[se]>A[Q]&&(y.uniforms.dataAxis=u,y.uniforms.screenOffset=s,y.uniforms.color=I[f],y.uniforms.angle=B[f],k.drawArrays(k.TRIANGLES,A[Q],A[se]-A[Q]))),V[f]&&$&&(s[1^f]-=j*F*Z[f],y.uniforms.dataAxis=c,y.uniforms.screenOffset=s,y.uniforms.color=Y[f],y.uniforms.angle=ee[f],k.drawArrays(k.TRIANGLES,J,$)),s[1^f]=j*C[2+(1^f)]-1,R[f+2]&&(s[1^f]+=j*F*L[f+2],Q<se&&A[se]>A[Q]&&(y.uniforms.dataAxis=u,y.uniforms.screenOffset=s,y.uniforms.color=I[f+2],y.uniforms.angle=B[f+2],k.drawArrays(k.TRIANGLES,A[Q],A[se]-A[Q]))),V[f+2]&&$&&(s[1^f]+=j*F*Z[f+2],y.uniforms.dataAxis=c,y.uniforms.screenOffset=s,y.uniforms.color=Y[f+2],y.uniforms.angle=ee[f+2],k.drawArrays(k.TRIANGLES,J,$))}),g.drawTitle=(f=[0,0],w=[0,0],function(){var y=this.plot,M=this.shader,A=y.gl,k=y.screenBox,C=y.titleCenter,P=y.titleAngle,D=y.titleColor,F=y.pixelRatio;if(this.titleCount){for(var R=0;R<2;++R)w[R]=2*(C[R]*F-k[R])/(k[2+R]-k[R])-1;M.bind(),M.uniforms.dataAxis=f,M.uniforms.screenOffset=w,M.uniforms.angle=P,M.uniforms.color=D,A.drawArrays(A.TRIANGLES,this.titleOffset,this.titleCount)}}),g.bind=(h=[0,0],p=[0,0],v=[0,0],function(){var f=this.plot,w=this.shader,y=f._tickBounds,M=f.dataBox,A=f.screenBox,k=f.viewBox;w.bind();for(var C=0;C<2;++C){var P=y[C],F=.5*(M[C+2]+M[C]),R=M[C+2]-M[C],I=k[C+2]-k[C],V=A[C+2]-A[C];p[C]=2*(y[C+2]-P)/R*I/V,h[C]=2*(P-F)/R*I/V}v[1]=2*f.pixelRatio/(A[3]-A[1]),v[0]=v[1]*(A[3]-A[1])/(A[2]-A[0]),w.uniforms.dataScale=p,w.uniforms.dataShift=h,w.uniforms.textScale=v,this.vbo.bind(),w.attributes.textCoordinate.pointer()}),g.update=function(f){var w,y,M,A,k,C=[],P=f.ticks,D=f.bounds;for(k=0;k<2;++k){var F=[Math.floor(C.length/3)],R=[-1/0],L=P[k];for(w=0;w<L.length;++w){var I=L[w],B=I.x,Z=I.font||"sans-serif";A=I.fontSize||12;for(var Y=1/(D[k+2]-D[k]),ee=D[k],J=I.text.split("\n"),$=0;$<J.length;$++)for(M=a(Z,J[$]).data,y=0;y<M.length;y+=2)C.push(M[y]*A,-M[y+1]*A-$*A*1.2,(B-ee)*Y);F.push(Math.floor(C.length/3)),R.push(B)}this.tickOffset[k]=F,this.tickX[k]=R}for(k=0;k<2;++k){for(this.labelOffset[k]=Math.floor(C.length/3),M=a(f.labelFont[k],f.labels[k],{textAlign:"center"}).data,A=f.labelSize[k],w=0;w<M.length;w+=2)C.push(M[w]*A,-M[w+1]*A,0);this.labelCount[k]=Math.floor(C.length/3)-this.labelOffset[k]}for(this.titleOffset=Math.floor(C.length/3),M=a(f.titleFont,f.title).data,A=f.titleSize,w=0;w<M.length;w+=2)C.push(M[w]*A,-M[w+1]*A,0);this.titleCount=Math.floor(C.length/3)-this.titleOffset,this.vbo.update(C)},g.dispose=function(){this.vbo.dispose(),this.shader.dispose()}},{"./shaders":116,"binary-search-bounds":31,"gl-buffer":78,"gl-shader":132,"text-cache":303}],118:[function(x,T,b){"use strict";T.exports=function(h){var p=h.gl,g=new d(p,e(p,[p.drawingBufferWidth,p.drawingBufferHeight]));return g.grid=o(g),g.text=a(g),g.line=l(g),g.box=i(g),g.update(h),g};var e=x("gl-select-static"),o=x("./lib/grid"),a=x("./lib/text"),l=x("./lib/line"),i=x("./lib/box");function d(h,p){this.gl=h,this.pickBuffer=p,this.screenBox=[0,0,h.drawingBufferWidth,h.drawingBufferHeight],this.viewBox=[0,0,0,0],this.dataBox=[-10,-10,10,10],this.gridLineEnable=[!0,!0],this.gridLineWidth=[1,1],this.gridLineColor=[[0,0,0,1],[0,0,0,1]],this.pixelRatio=1,this.tickMarkLength=[0,0,0,0],this.tickMarkWidth=[0,0,0,0],this.tickMarkColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.tickPad=[15,15,15,15],this.tickAngle=[0,0,0,0],this.tickEnable=[!0,!0,!0,!0],this.tickColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.labelPad=[15,15,15,15],this.labelAngle=[0,Math.PI/2,0,3*Math.PI/2],this.labelEnable=[!0,!0,!0,!0],this.labelColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.titleCenter=[0,0],this.titleEnable=!0,this.titleAngle=0,this.titleColor=[0,0,0,1],this.borderColor=[0,0,0,0],this.backgroundColor=[0,0,0,0],this.zeroLineEnable=[!0,!0],this.zeroLineWidth=[4,4],this.zeroLineColor=[[0,0,0,1],[0,0,0,1]],this.borderLineEnable=[!0,!0,!0,!0],this.borderLineWidth=[2,2,2,2],this.borderLineColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.grid=null,this.text=null,this.line=null,this.box=null,this.objects=[],this.overlays=[],this._tickBounds=[1/0,1/0,-1/0,-1/0],this.static=!1,this.dirty=!1,this.pickDirty=!1,this.pickDelay=120,this.pickRadius=10,this._pickTimeout=null,this._drawPick=this.drawPick.bind(this),this._depthCounter=0}var u=d.prototype;function s(h){for(var p=h.slice(),v=0;v<p.length;++v)p[v]=p[v].slice();return p}function c(h,p){return h.x-p.x}u.setDirty=function(){this.dirty=this.pickDirty=!0},u.setOverlayDirty=function(){this.dirty=!0},u.nextDepthValue=function(){return this._depthCounter++/65536},u.draw=function(){var h=this.gl,p=this.screenBox,v=this.viewBox,g=this.dataBox,f=this.pixelRatio,w=this.grid,y=this.line,M=this.text,A=this.objects;if(this._depthCounter=0,this.pickDirty&&(this._pickTimeout&&clearTimeout(this._pickTimeout),this.pickDirty=!1,this._pickTimeout=setTimeout(this._drawPick,this.pickDelay)),this.dirty){if(this.dirty=!1,h.bindFramebuffer(h.FRAMEBUFFER,null),h.enable(h.SCISSOR_TEST),h.disable(h.DEPTH_TEST),h.depthFunc(h.LESS),h.depthMask(!1),h.enable(h.BLEND),h.blendEquation(h.FUNC_ADD,h.FUNC_ADD),h.blendFunc(h.ONE,h.ONE_MINUS_SRC_ALPHA),this.borderColor){h.scissor(p[0],p[1],p[2]-p[0],p[3]-p[1]);var k=this.borderColor;h.clearColor(k[0]*k[3],k[1]*k[3],k[2]*k[3],k[3]),h.clear(h.COLOR_BUFFER_BIT|h.DEPTH_BUFFER_BIT)}h.scissor(v[0],v[1],v[2]-v[0],v[3]-v[1]),h.viewport(v[0],v[1],v[2]-v[0],v[3]-v[1]);var C=this.backgroundColor;h.clearColor(C[0]*C[3],C[1]*C[3],C[2]*C[3],C[3]),h.clear(h.COLOR_BUFFER_BIT),w.draw();var P=this.zeroLineEnable,D=this.zeroLineColor,F=this.zeroLineWidth;if(P[0]||P[1]){y.bind();for(var R=0;R<2;++R)if(P[R]&&g[R]<=0&&g[R+2]>=0){var L=p[R]-g[R]*(p[R+2]-p[R])/(g[R+2]-g[R]);0===R?y.drawLine(L,p[1],L,p[3],F[R],D[R]):y.drawLine(p[0],L,p[2],L,F[R],D[R])}}for(R=0;R<A.length;++R)A[R].draw();h.viewport(p[0],p[1],p[2]-p[0],p[3]-p[1]),h.scissor(p[0],p[1],p[2]-p[0],p[3]-p[1]),this.grid.drawTickMarks(),y.bind();var I=this.borderLineEnable,B=this.borderLineWidth,V=this.borderLineColor;for(I[1]&&y.drawLine(v[0],v[1]-.5*B[1]*f,v[0],v[3]+.5*B[3]*f,B[1],V[1]),I[0]&&y.drawLine(v[0]-.5*B[0]*f,v[1],v[2]+.5*B[2]*f,v[1],B[0],V[0]),I[3]&&y.drawLine(v[2],v[1]-.5*B[1]*f,v[2],v[3]+.5*B[3]*f,B[3],V[3]),I[2]&&y.drawLine(v[0]-.5*B[0]*f,v[3],v[2]+.5*B[2]*f,v[3],B[2],V[2]),M.bind(),R=0;R<2;++R)M.drawTicks(R);this.titleEnable&&M.drawTitle();var Z=this.overlays;for(R=0;R<Z.length;++R)Z[R].draw();h.disable(h.SCISSOR_TEST),h.disable(h.BLEND),h.depthMask(!0)}},u.drawPick=function(){if(!this.static){var h=this.pickBuffer;this._pickTimeout=null,h.begin();for(var p=1,v=this.objects,g=0;g<v.length;++g)p=v[g].drawPick(p);h.end()}},u.pick=function(h,p){if(!this.static){var v=this.pixelRatio,g=this.pickPixelRatio,f=this.viewBox,w=0|Math.round((h-f[0]/v)*g),y=0|Math.round((p-f[1]/v)*g),M=this.pickBuffer.query(w,y,this.pickRadius);if(!M)return null;for(var A=M.id+(M.value[0]<<8)+(M.value[1]<<16)+(M.value[2]<<24),k=this.objects,C=0;C<k.length;++C){var P=k[C].pick(w,y,A);if(P)return P}return null}},u.setScreenBox=function(h){var p=this.screenBox,v=this.pixelRatio;p[0]=0|Math.round(h[0]*v),p[1]=0|Math.round(h[1]*v),p[2]=0|Math.round(h[2]*v),p[3]=0|Math.round(h[3]*v),this.setDirty()},u.setDataBox=function(h){var p=this.dataBox;(p[0]!==h[0]||p[1]!==h[1]||p[2]!==h[2]||p[3]!==h[3])&&(p[0]=h[0],p[1]=h[1],p[2]=h[2],p[3]=h[3],this.setDirty())},u.setViewBox=function(h){var p=this.pixelRatio,v=this.viewBox;v[0]=0|Math.round(h[0]*p),v[1]=0|Math.round(h[1]*p),v[2]=0|Math.round(h[2]*p),v[3]=0|Math.round(h[3]*p);var g=this.pickPixelRatio;this.pickBuffer.shape=[0|Math.round((h[2]-h[0])*g),0|Math.round((h[3]-h[1])*g)],this.setDirty()},u.update=function(h){var p=this.gl;this.pixelRatio=(h=h||{}).pixelRatio||1;var v=this.pixelRatio;this.pickPixelRatio=Math.max(v,1),this.setScreenBox(h.screenBox||[0,0,p.drawingBufferWidth/v,p.drawingBufferHeight/v]),this.setViewBox(h.viewBox||[.125*(this.screenBox[2]-this.screenBox[0])/v,.125*(this.screenBox[3]-this.screenBox[1])/v,.875*(this.screenBox[2]-this.screenBox[0])/v,.875*(this.screenBox[3]-this.screenBox[1])/v]);var g=this.viewBox,f=(g[2]-g[0])/(g[3]-g[1]);this.setDataBox(h.dataBox||[-10,-10/f,10,10/f]),this.borderColor=!1!==h.borderColor&&(h.borderColor||[0,0,0,0]).slice(),this.backgroundColor=(h.backgroundColor||[0,0,0,0]).slice(),this.gridLineEnable=(h.gridLineEnable||[!0,!0]).slice(),this.gridLineWidth=(h.gridLineWidth||[1,1]).slice(),this.gridLineColor=s(h.gridLineColor||[[.5,.5,.5,1],[.5,.5,.5,1]]),this.zeroLineEnable=(h.zeroLineEnable||[!0,!0]).slice(),this.zeroLineWidth=(h.zeroLineWidth||[4,4]).slice(),this.zeroLineColor=s(h.zeroLineColor||[[0,0,0,1],[0,0,0,1]]),this.tickMarkLength=(h.tickMarkLength||[0,0,0,0]).slice(),this.tickMarkWidth=(h.tickMarkWidth||[0,0,0,0]).slice(),this.tickMarkColor=s(h.tickMarkColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.titleCenter=(h.titleCenter||[.5*(g[0]+g[2])/v,(g[3]+120)/v]).slice(),this.titleEnable=!("titleEnable"in h)||!!h.titleEnable,this.titleAngle=h.titleAngle||0,this.titleColor=(h.titleColor||[0,0,0,1]).slice(),this.labelPad=(h.labelPad||[15,15,15,15]).slice(),this.labelAngle=(h.labelAngle||[0,Math.PI/2,0,3*Math.PI/2]).slice(),this.labelEnable=(h.labelEnable||[!0,!0,!0,!0]).slice(),this.labelColor=s(h.labelColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.tickPad=(h.tickPad||[15,15,15,15]).slice(),this.tickAngle=(h.tickAngle||[0,0,0,0]).slice(),this.tickEnable=(h.tickEnable||[!0,!0,!0,!0]).slice(),this.tickColor=s(h.tickColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]),this.borderLineEnable=(h.borderLineEnable||[!0,!0,!0,!0]).slice(),this.borderLineWidth=(h.borderLineWidth||[2,2,2,2]).slice(),this.borderLineColor=s(h.borderLineColor||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]);var w=h.ticks||[[],[]],y=this._tickBounds;y[0]=y[1]=1/0,y[2]=y[3]=-1/0;for(var M=0;M<2;++M){var A=w[M].slice(0);0!==A.length&&(A.sort(c),y[M]=Math.min(y[M],A[0].x),y[M+2]=Math.max(y[M+2],A[A.length-1].x))}this.grid.update({bounds:y,ticks:w}),this.text.update({bounds:y,ticks:w,labels:h.labels||["x","y"],labelSize:h.labelSize||[12,12],labelFont:h.labelFont||["sans-serif","sans-serif"],title:h.title||"",titleSize:h.titleSize||18,titleFont:h.titleFont||"sans-serif"}),this.static=!!h.static,this.setDirty()},u.dispose=function(){this.box.dispose(),this.grid.dispose(),this.text.dispose(),this.line.dispose();for(var h=this.objects.length-1;h>=0;--h)this.objects[h].dispose();for(this.objects.length=0,h=this.overlays.length-1;h>=0;--h)this.overlays[h].dispose();this.overlays.length=0,this.gl=null},u.addObject=function(h){this.objects.indexOf(h)<0&&(this.objects.push(h),this.setDirty())},u.removeObject=function(h){for(var p=this.objects,v=0;v<p.length;++v)if(p[v]===h){p.splice(v,1),this.setDirty();break}},u.addOverlay=function(h){this.overlays.indexOf(h)<0&&(this.overlays.push(h),this.setOverlayDirty())},u.removeOverlay=function(h){for(var p=this.overlays,v=0;v<p.length;++v)if(p[v]===h){p.splice(v,1),this.setOverlayDirty();break}}},{"./lib/box":113,"./lib/grid":114,"./lib/line":115,"./lib/text":117,"gl-select-static":131}],119:[function(x,T,b){"use strict";T.exports=function(u,s){u=u||document.body;var c=[.01,1/0];"distanceLimits"in(s=s||{})&&(c[0]=s.distanceLimits[0],c[1]=s.distanceLimits[1]),"zoomMin"in s&&(c[0]=s.zoomMin),"zoomMax"in s&&(c[1]=s.zoomMax);var h=o({center:s.center||[0,0,0],up:s.up||[0,1,0],eye:s.eye||[0,0,10],mode:s.mode||"orbit",distanceLimits:c}),p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v=0,g=u.clientWidth,f=u.clientHeight,w={keyBindingMode:"rotate",enableWheel:!0,view:h,element:u,delay:s.delay||16,rotateSpeed:s.rotateSpeed||1,zoomSpeed:s.zoomSpeed||1,translateSpeed:s.translateSpeed||1,flipX:!!s.flipX,flipY:!!s.flipY,modes:h.modes,_ortho:s._ortho||s.projection&&"orthographic"===s.projection.type||!1,tick:function(){var y=e(),M=this.delay,A=y-2*M;h.idle(y-M),h.recalcMatrix(A),h.flush(y-(100+2*M));for(var k=!0,C=h.computedMatrix,P=0;P<16;++P)k=k&&p[P]===C[P],p[P]=C[P];var D=u.clientWidth===g&&u.clientHeight===f;return g=u.clientWidth,f=u.clientHeight,k?!D:(v=Math.exp(h.computedRadius[0]),!0)},lookAt:function(y,M,A){h.lookAt(h.lastT(),y,M,A)},rotate:function(y,M,A){h.rotate(h.lastT(),y,M,A)},pan:function(y,M,A){h.pan(h.lastT(),y,M,A)},translate:function(y,M,A){h.translate(h.lastT(),y,M,A)}};return Object.defineProperties(w,{matrix:{get:function(){return h.computedMatrix},set:function(y){return h.setMatrix(h.lastT(),y),h.computedMatrix},enumerable:!0},mode:{get:function(){return h.getMode()},set:function(y){var M=h.computedUp.slice(),A=h.computedEye.slice(),k=h.computedCenter.slice();if(h.setMode(y),"turntable"===y){var C=e();h._active.lookAt(C,A,k,M),h._active.lookAt(C+500,A,k,[0,0,1]),h._active.flush(C)}return h.getMode()},enumerable:!0},center:{get:function(){return h.computedCenter},set:function(y){return h.lookAt(h.lastT(),null,y),h.computedCenter},enumerable:!0},eye:{get:function(){return h.computedEye},set:function(y){return h.lookAt(h.lastT(),y),h.computedEye},enumerable:!0},up:{get:function(){return h.computedUp},set:function(y){return h.lookAt(h.lastT(),null,null,y),h.computedUp},enumerable:!0},distance:{get:function(){return v},set:function(y){return h.setDistance(h.lastT(),y),y},enumerable:!0},distanceLimits:{get:function(){return h.getDistanceLimits(c)},set:function(y){return h.setDistanceLimits(y),y},enumerable:!0}}),u.addEventListener("contextmenu",function(y){return y.preventDefault(),!1}),w._lastX=-1,w._lastY=-1,w._lastMods={shift:!1,control:!1,alt:!1,meta:!1},w.enableMouseListeners=function(){function y(M,A,k,C){var P=w.keyBindingMode;if(!1!==P){var D="rotate"===P,F="pan"===P,R="zoom"===P,L=!!C.control,I=!!C.alt,B=!!C.shift,V=!!(1&M),Z=!!(2&M),Y=!!(4&M),ee=1/u.clientHeight,J=ee*(A-w._lastX),$=ee*(k-w._lastY),Q=w.flipX?1:-1,se=w.flipY?1:-1,j=Math.PI*w.rotateSpeed,G=e();if(-1!==w._lastX&&-1!==w._lastY&&((D&&V&&!L&&!I&&!B||V&&!L&&!I&&B)&&h.rotate(G,Q*j*J,-se*j*$,0),(F&&V&&!L&&!I&&!B||Z||V&&L&&!I&&!B)&&h.pan(G,-w.translateSpeed*J*v,w.translateSpeed*$*v,0),R&&V&&!L&&!I&&!B||Y||V&&!L&&I&&!B)){var W=-w.zoomSpeed*$/window.innerHeight*(G-h.lastT())*100;h.pan(G,0,0,v*(Math.exp(W)-1))}return w._lastX=A,w._lastY=k,w._lastMods=C,!0}}w.mouseListener=a(u,y),u.addEventListener("touchstart",function(M){var A=i(M.changedTouches[0],u);y(0,A[0],A[1],w._lastMods),y(1,A[0],A[1],w._lastMods)},!!d&&{passive:!0}),u.addEventListener("touchmove",function(M){var A=i(M.changedTouches[0],u);y(1,A[0],A[1],w._lastMods),M.preventDefault()},!!d&&{passive:!1}),u.addEventListener("touchend",function(M){y(0,w._lastX,w._lastY,w._lastMods)},!!d&&{passive:!0}),w.wheelListener=l(u,function(M,A){if(!1!==w.keyBindingMode&&w.enableWheel){var k=w.flipX?1:-1,C=w.flipY?1:-1,P=e();if(Math.abs(M)>Math.abs(A))h.rotate(P,0,0,-M*k*Math.PI*w.rotateSpeed/window.innerWidth);else if(!w._ortho){var D=-w.zoomSpeed*C*A/window.innerHeight*(P-h.lastT())/20;h.pan(P,0,0,v*(Math.exp(D)-1))}}},!0)},w.enableMouseListeners(),w};var e=x("right-now"),o=x("3d-view"),a=x("mouse-change"),l=x("mouse-wheel"),i=x("mouse-event-offset"),d=x("has-passive-events")},{"3d-view":7,"has-passive-events":232,"mouse-change":247,"mouse-event-offset":248,"mouse-wheel":250,"right-now":278}],120:[function(x,T,b){var e=x("glslify"),o=x("gl-shader"),a=e(["precision mediump float;\n#define GLSLIFY 1\nattribute vec2 position;\nvarying vec2 uv;\nvoid main() {\n  uv = position;\n  gl_Position = vec4(position, 0, 1);\n}"]),l=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform sampler2D accumBuffer;\nvarying vec2 uv;\n\nvoid main() {\n  vec4 accum = texture2D(accumBuffer, 0.5 * (uv + 1.0));\n  gl_FragColor = min(vec4(1,1,1,1), accum);\n}"]);T.exports=function(i){return o(i,a,l,null,[{name:"position",type:"vec2"}])}},{"gl-shader":132,glslify:231}],121:[function(x,T,b){"use strict";var e=x("./camera.js"),o=x("gl-axes3d"),a=x("gl-axes3d/properties"),l=x("gl-spikes3d"),i=x("gl-select-static"),d=x("gl-fbo"),u=x("a-big-triangle"),s=x("mouse-change"),c=x("gl-mat4/perspective"),h=x("gl-mat4/ortho"),p=x("./lib/shader"),v=x("is-mobile")({tablet:!0,featureDetect:!0});function g(){this.mouse=[-1,-1],this.screen=null,this.distance=1/0,this.index=null,this.dataCoordinate=null,this.dataPosition=null,this.object=null,this.data=null}function f(y){var M=Math.round(Math.log(Math.abs(y))/Math.log(10));if(M<0){var A=Math.round(Math.pow(10,-M));return Math.ceil(y*A)/A}return M>0?(A=Math.round(Math.pow(10,M)),Math.ceil(y/A)*A):Math.ceil(y)}function w(y){return"boolean"!=typeof y||y}T.exports={createScene:function(y){(y=y||{}).camera=y.camera||{};var M=y.canvas;M||(M=document.createElement("canvas"),y.container?y.container.appendChild(M):document.body.appendChild(M));var A=y.gl;if(A||(y.glOptions&&(v=!!y.glOptions.preserveDrawingBuffer),A=function(ge,we){var Ce=null;try{(Ce=ge.getContext("webgl",we))||(Ce=ge.getContext("experimental-webgl",we))}catch(De){return null}return Ce}(M,y.glOptions||{premultipliedAlpha:!0,antialias:!0,preserveDrawingBuffer:v})),!A)throw new Error("webgl not supported");var k=y.bounds||[[-10,-10,-10],[10,10,10]],C=new g,P=d(A,A.drawingBufferWidth,A.drawingBufferHeight,{preferFloat:!v}),D=p(A),F=y.cameraObject&&!0===y.cameraObject._ortho||y.camera.projection&&"orthographic"===y.camera.projection.type||!1,R={eye:y.camera.eye||[2,0,0],center:y.camera.center||[0,0,0],up:y.camera.up||[0,1,0],zoomMin:y.camera.zoomMax||.1,zoomMax:y.camera.zoomMin||100,mode:y.camera.mode||"turntable",_ortho:F},L=y.axes||{},I=o(A,L);I.enable=!L.disable;var V=l(A,y.spikes||{}),Z=[],Y=[],ee=[],J=[],$=!0,Q=!0,G={view:null,projection:new Array(16),model:new Array(16),_ortho:!1},W=(Q=!0,[A.drawingBufferWidth,A.drawingBufferHeight]),ie=y.cameraObject||e(M,R),q={gl:A,contextLost:!1,pixelRatio:y.pixelRatio||1,canvas:M,selection:C,camera:ie,axes:I,axesPixels:null,spikes:V,bounds:k,objects:Z,shape:W,aspect:y.aspectRatio||[1,1,1],pickRadius:y.pickRadius||10,zNear:y.zNear||.01,zFar:y.zFar||1e3,fovy:y.fovy||Math.PI/4,clearColor:y.clearColor||[0,0,0,0],autoResize:w(y.autoResize),autoBounds:w(y.autoBounds),autoScale:!!y.autoScale,autoCenter:w(y.autoCenter),clipToBounds:w(y.clipToBounds),snapToData:!!y.snapToData,onselect:y.onselect||null,onrender:y.onrender||null,onclick:y.onclick||null,cameraParams:G,oncontextloss:null,mouseListener:null,_stopped:!1,getAspectratio:function(){return{x:this.aspect[0],y:this.aspect[1],z:this.aspect[2]}},setAspectratio:function(ge){this.aspect[0]=ge.x,this.aspect[1]=ge.y,this.aspect[2]=ge.z,Q=!0},setBounds:function(ge,we){this.bounds[0][ge]=we.min,this.bounds[1][ge]=we.max},setClearColor:function(ge){this.clearColor=ge},clearRGBA:function(){this.gl.clearColor(this.clearColor[0],this.clearColor[1],this.clearColor[2],this.clearColor[3]),this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT)}},te=[A.drawingBufferWidth/q.pixelRatio|0,A.drawingBufferHeight/q.pixelRatio|0];function ne(){if(!q._stopped&&q.autoResize){var ge=M.parentNode,we=1,Ce=1;ge&&ge!==document.body?(we=ge.clientWidth,Ce=ge.clientHeight):(we=window.innerWidth,Ce=window.innerHeight);var De=0|Math.ceil(we*q.pixelRatio),Se=0|Math.ceil(Ce*q.pixelRatio);if(De!==M.width||Se!==M.height){M.width=De,M.height=Se;var Fe=M.style;Fe.position=Fe.position||"absolute",Fe.left="0px",Fe.top="0px",Fe.width=we+"px",Fe.height=Ce+"px",$=!0}}}function le(){for(var ge=Z.length,we=J.length,Ce=0;Ce<we;++Ce)ee[Ce]=0;e:for(Ce=0;Ce<ge;++Ce){var De=Z[Ce],Se=De.pickSlots;if(Se){for(var Fe=0;Fe<we;++Fe)if(ee[Fe]+Se<255){Y[Ce]=Fe,De.setPickBase(ee[Fe]+1),ee[Fe]+=Se;continue e}var ve=i(A,W);Y[Ce]=we,J.push(ve),ee.push(Se),De.setPickBase(1),we+=1}else Y[Ce]=-1}for(;we>0&&0===ee[we-1];)ee.pop(),J.pop().dispose()}function ue(){if(q.contextLost)return!0;A.isContextLost()&&(q.contextLost=!0,q.mouseListener.enabled=!1,q.selection.object=null,q.oncontextloss&&q.oncontextloss())}q.autoResize&&ne(),window.addEventListener("resize",ne),q.update=function(ge){q._stopped||(ge=ge||{},$=!0,Q=!0)},q.add=function(ge){q._stopped||(ge.axes=I,Z.push(ge),Y.push(-1),$=!0,Q=!0,le())},q.remove=function(ge){if(!q._stopped){var we=Z.indexOf(ge);we<0||(Z.splice(we,1),Y.pop(),$=!0,Q=!0,le())}},q.dispose=function(){if(!q._stopped&&(q._stopped=!0,window.removeEventListener("resize",ne),M.removeEventListener("webglcontextlost",ue),q.mouseListener.enabled=!1,!q.contextLost)){I.dispose(),V.dispose();for(var ge=0;ge<Z.length;++ge)Z[ge].dispose();for(P.dispose(),ge=0;ge<J.length;++ge)J[ge].dispose();D.dispose(),A=null,I=null,V=null,Z=[]}},q._mouseRotating=!1,q._prevButtons=0,q.enableMouseListeners=function(){q.mouseListener=s(M,function(ge,we,Ce){if(!q._stopped){var De=J.length,Se=Z.length,Fe=C.object;C.distance=1/0,C.mouse[0]=we,C.mouse[1]=Ce,C.object=null,C.screen=null,C.dataCoordinate=C.dataPosition=null;var ve=!1;if(ge&&q._prevButtons)q._mouseRotating=!0;else{q._mouseRotating&&(Q=!0),q._mouseRotating=!1;for(var Te=0;Te<De;++Te){var Le=J[Te].query(we,te[1]-Ce-1,q.pickRadius);if(Le){if(Le.distance>C.distance)continue;for(var Ee=0;Ee<Se;++Ee){var Pe=Z[Ee];if(Y[Ee]===Te){var je=Pe.pick(Le);je&&(C.buttons=ge,C.screen=Le.coord,C.distance=Le.distance,C.object=Pe,C.index=je.distance,C.dataPosition=je.position,C.dataCoordinate=je.dataCoordinate,C.data=je,ve=!0)}}}}}Fe&&Fe!==C.object&&(Fe.highlight&&Fe.highlight(null),$=!0),C.object&&(C.object.highlight&&C.object.highlight(C.data),$=!0),(ve=ve||C.object!==Fe)&&q.onselect&&q.onselect(C),1&ge&&!(1&q._prevButtons)&&q.onclick&&q.onclick(C),q._prevButtons=ge}})},M.addEventListener("webglcontextlost",ue);var de=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],he=[de[0].slice(),de[1].slice()];function be(){if(!ue()){ne();var ge=q.camera.tick();G.view=q.camera.matrix,$=$||ge,Q=Q||ge,I.pixelRatio=q.pixelRatio,V.pixelRatio=q.pixelRatio;var we=Z.length,Ce=de[0],De=de[1];Ce[0]=Ce[1]=Ce[2]=1/0,De[0]=De[1]=De[2]=-1/0;for(var Se=0;Se<we;++Se){($e=Z[Se]).pixelRatio=q.pixelRatio,$e.axes=q.axes,$=$||!!$e.dirty,Q=Q||!!$e.dirty;var Fe=$e.bounds;if(Fe)for(var ve=Fe[0],Te=Fe[1],Le=0;Le<3;++Le)Ce[Le]=Math.min(Ce[Le],ve[Le]),De[Le]=Math.max(De[Le],Te[Le])}var Ee=q.bounds;if(q.autoBounds)for(Le=0;Le<3;++Le){if(De[Le]<Ce[Le])Ce[Le]=-1,De[Le]=1;else{Ce[Le]===De[Le]&&(Ce[Le]-=1,De[Le]+=1);var Pe=.05*(De[Le]-Ce[Le]);Ce[Le]=Ce[Le]-Pe,De[Le]=De[Le]+Pe}Ee[0][Le]=Ce[Le],Ee[1][Le]=De[Le]}var je=!1;for(Le=0;Le<3;++Le)je=je||he[0][Le]!==Ee[0][Le]||he[1][Le]!==Ee[1][Le],he[0][Le]=Ee[0][Le],he[1][Le]=Ee[1][Le];if(Q=Q||je,$=$||je){if(je){var Ge=[0,0,0];for(Se=0;Se<3;++Se)Ge[Se]=f((Ee[1][Se]-Ee[0][Se])/10);I.update(I.autoTicks?{bounds:Ee,tickSpacing:Ge}:{bounds:Ee})}var Ke=A.drawingBufferWidth,lt=A.drawingBufferHeight;for(W[0]=Ke,W[1]=lt,te[0]=0|Math.max(Ke/q.pixelRatio,1),te[1]=0|Math.max(lt/q.pixelRatio,1),function(et,tt){var ct=et.bounds,xt=et.cameraParams,Ct=xt.projection,Ht=xt.model,ut=et.zNear,Ot=et.zFar,tn=et.fovy,un=et.gl.drawingBufferWidth/et.gl.drawingBufferHeight;tt?(h(Ct,-un,un,-1,1,ut,Ot),xt._ortho=!0):(c(Ct,tn,un,ut,Ot),xt._ortho=!1);for(var Ze=0;Ze<16;++Ze)Ht[Ze]=0;Ht[15]=1;var Qe=0;for(Ze=0;Ze<3;++Ze)Qe=Math.max(Qe,ct[1][Ze]-ct[0][Ze]);for(Ze=0;Ze<3;++Ze)Ht[5*Ze]=et.autoScale?et.aspect[Ze]/(ct[1][Ze]-ct[0][Ze]):1/Qe,et.autoCenter&&(Ht[12+Ze]=.5*-Ht[5*Ze]*(ct[0][Ze]+ct[1][Ze]))}(q,F),Se=0;Se<we;++Se)($e=Z[Se]).axesBounds=Ee,q.clipToBounds&&($e.clipBounds=Ee);C.object&&(V.position=q.snapToData?C.dataCoordinate:C.dataPosition,V.bounds=Ee),Q&&(Q=!1,function(){if(!ue()){A.colorMask(!0,!0,!0,!0),A.depthMask(!0),A.disable(A.BLEND),A.enable(A.DEPTH_TEST),A.depthFunc(A.LEQUAL);for(var et=Z.length,tt=J.length,ct=0;ct<tt;++ct){var xt=J[ct];xt.shape=te,xt.begin();for(var Ct=0;Ct<et;++Ct)if(Y[Ct]===ct){var Ht=Z[Ct];Ht.drawPick&&(Ht.pixelRatio=1,Ht.drawPick(G))}xt.end()}}}()),q.axesPixels=a(q.axes,G,Ke,lt),q.onrender&&q.onrender(),A.bindFramebuffer(A.FRAMEBUFFER,null),A.viewport(0,0,Ke,lt),q.clearRGBA(),A.depthMask(!0),A.colorMask(!0,!0,!0,!0),A.enable(A.DEPTH_TEST),A.depthFunc(A.LEQUAL),A.disable(A.BLEND),A.disable(A.CULL_FACE);var Ue=!1;for(I.enable&&(Ue=Ue||I.isTransparent(),I.draw(G)),V.axes=I,C.object&&V.draw(G),A.disable(A.CULL_FACE),Se=0;Se<we;++Se)($e=Z[Se]).axes=I,$e.pixelRatio=q.pixelRatio,$e.isOpaque&&$e.isOpaque()&&$e.draw(G),$e.isTransparent&&$e.isTransparent()&&(Ue=!0);if(Ue){for(P.shape=W,P.bind(),A.clear(A.DEPTH_BUFFER_BIT),A.colorMask(!1,!1,!1,!1),A.depthMask(!0),A.depthFunc(A.LESS),I.enable&&I.isTransparent()&&I.drawTransparent(G),Se=0;Se<we;++Se)($e=Z[Se]).isOpaque&&$e.isOpaque()&&$e.draw(G);for(A.enable(A.BLEND),A.blendEquation(A.FUNC_ADD),A.blendFunc(A.ONE,A.ONE_MINUS_SRC_ALPHA),A.colorMask(!0,!0,!0,!0),A.depthMask(!1),A.clearColor(0,0,0,0),A.clear(A.COLOR_BUFFER_BIT),I.isTransparent()&&I.drawTransparent(G),Se=0;Se<we;++Se){var $e;($e=Z[Se]).isTransparent&&$e.isTransparent()&&$e.drawTransparent(G)}A.bindFramebuffer(A.FRAMEBUFFER,null),A.blendFunc(A.ONE,A.ONE_MINUS_SRC_ALPHA),A.disable(A.DEPTH_TEST),D.bind(),P.color[0].bind(0),D.uniforms.accumBuffer=0,u(A),A.disable(A.BLEND)}for($=!1,Se=0;Se<we;++Se)Z[Se].dirty=!1}}}return q.enableMouseListeners(),function ge(){q._stopped||q.contextLost||(be(),requestAnimationFrame(ge))}(),q.redraw=function(){q._stopped||($=!0,be())},q},createCamera:e}},{"./camera.js":119,"./lib/shader":120,"a-big-triangle":8,"gl-axes3d":70,"gl-axes3d/properties":77,"gl-fbo":86,"gl-mat4/ortho":101,"gl-mat4/perspective":102,"gl-select-static":131,"gl-spikes3d":141,"is-mobile":238,"mouse-change":247}],122:[function(x,T,b){var e=x("glslify");b.pointVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform float pointCloud;\n\nhighp float rand(vec2 co) {\n  highp float a = 12.9898;\n  highp float b = 78.233;\n  highp float c = 43758.5453;\n  highp float d = dot(co.xy, vec2(a, b));\n  highp float e = mod(d, 3.14);\n  return fract(sin(e) * c);\n}\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n    // if we don't jitter the point size a bit, overall point cloud\n    // saturation 'jumps' on zooming, which is disturbing and confusing\n  gl_PointSize = pointSize * ((19.5 + rand(position)) / 20.0);\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    // get the same square surface as circle would be\n    gl_PointSize *= 0.886;\n  }\n}"]),b.pointFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color, borderColor;\nuniform float centerFraction;\nuniform float pointCloud;\n\nvoid main() {\n  float radius;\n  vec4 baseColor;\n  if(pointCloud != 0.0) { // pointCloud is truthy\n    if(centerFraction == 1.0) {\n      gl_FragColor = color;\n    } else {\n      gl_FragColor = mix(borderColor, color, centerFraction);\n    }\n  } else {\n    radius = length(2.0 * gl_PointCoord.xy - 1.0);\n    if(radius > 1.0) {\n      discard;\n    }\n    baseColor = mix(borderColor, color, step(radius, centerFraction));\n    gl_FragColor = vec4(baseColor.rgb * baseColor.a, baseColor.a);\n  }\n}\n"]),b.pickVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 position;\nattribute vec4 pickId;\n\nuniform mat3 matrix;\nuniform float pointSize;\nuniform vec4 pickOffset;\n\nvarying vec4 fragId;\n\nvoid main() {\n  vec3 hgPosition = matrix * vec3(position, 1);\n  gl_Position  = vec4(hgPosition.xy, 0, hgPosition.z);\n  gl_PointSize = pointSize;\n\n  vec4 id = pickId + pickOffset;\n  id.y += floor(id.x / 256.0);\n  id.x -= floor(id.x / 256.0) * 256.0;\n\n  id.z += floor(id.y / 256.0);\n  id.y -= floor(id.y / 256.0) * 256.0;\n\n  id.w += floor(id.z / 256.0);\n  id.z -= floor(id.z / 256.0) * 256.0;\n\n  fragId = id;\n}\n"]),b.pickFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragId;\n\nvoid main() {\n  float radius = length(2.0 * gl_PointCoord.xy - 1.0);\n  if(radius > 1.0) {\n    discard;\n  }\n  gl_FragColor = fragId / 255.0;\n}\n"])},{glslify:231}],123:[function(x,T,b){"use strict";var e=x("gl-shader"),o=x("gl-buffer"),a=x("typedarray-pool"),l=x("./lib/shader");function i(c,h,p,v,g){this.plot=c,this.offsetBuffer=h,this.pickBuffer=p,this.shader=v,this.pickShader=g,this.sizeMin=.5,this.sizeMinCap=2,this.sizeMax=20,this.areaRatio=1,this.pointCount=0,this.color=[1,0,0,1],this.borderColor=[0,0,0,1],this.blend=!1,this.pickOffset=0,this.points=null}T.exports=function(c,h){var p=c.gl,y=new i(c,o(p),o(p),e(p,l.pointVertex,l.pointFragment),e(p,l.pickVertex,l.pickFragment));return y.update(h),c.addObject(y),y};var d,u,s=i.prototype;s.dispose=function(){this.shader.dispose(),this.pickShader.dispose(),this.offsetBuffer.dispose(),this.pickBuffer.dispose(),this.plot.removeObject(this)},s.update=function(c){var h;function p(A,k){return A in c?c[A]:k}c=c||{},this.sizeMin=p("sizeMin",.5),this.sizeMax=p("sizeMax",20),this.color=p("color",[1,0,0,1]).slice(),this.areaRatio=p("areaRatio",1),this.borderColor=p("borderColor",[0,0,0,1]).slice(),this.blend=p("blend",!1);var v=c.positions.length>>>1,g=c.positions instanceof Float32Array,f=c.idToIndex instanceof Int32Array&&c.idToIndex.length>=v,w=c.positions,y=g?w:a.mallocFloat32(w.length),M=f?c.idToIndex:a.mallocInt32(v);if(g||y.set(w),!f)for(y.set(w),h=0;h<v;h++)M[h]=h;this.points=w,this.offsetBuffer.update(y),this.pickBuffer.update(M),g||a.free(y),f||a.free(M),this.pointCount=v,this.pickOffset=0},s.unifiedDraw=(d=[1,0,0,0,1,0,0,0,1],u=[0,0,0,0],function(c){var h=void 0!==c,p=h?this.pickShader:this.shader,v=this.plot.gl,g=this.plot.dataBox;if(0===this.pointCount)return c;var f=g[2]-g[0],w=g[3]-g[1],y=function(C,P){var D,F=0,R=C.length>>>1;for(D=0;D<R;D++){var L=C[2*D],I=C[2*D+1];L>=P[0]&&L<=P[2]&&I>=P[1]&&I<=P[3]&&F++}return F}(this.points,g),M=this.plot.pickPixelRatio*Math.max(Math.min(this.sizeMinCap,this.sizeMin),Math.min(this.sizeMax,this.sizeMax/Math.pow(y,.33333)));d[0]=2/f,d[4]=2/w,d[6]=-2*g[0]/f-1,d[7]=-2*g[1]/w-1,this.offsetBuffer.bind(),p.bind(),p.attributes.position.pointer(),p.uniforms.matrix=d,p.uniforms.color=this.color,p.uniforms.borderColor=this.borderColor,p.uniforms.pointCloud=M<5,p.uniforms.pointSize=M,p.uniforms.centerFraction=Math.min(1,Math.max(0,Math.sqrt(1-this.areaRatio))),h&&(u[0]=255&c,u[1]=c>>8&255,u[2]=c>>16&255,u[3]=c>>24&255,this.pickBuffer.bind(),p.attributes.pickId.pointer(v.UNSIGNED_BYTE),p.uniforms.pickOffset=u,this.pickOffset=c);var A=v.getParameter(v.BLEND),k=v.getParameter(v.DITHER);return A&&!this.blend&&v.disable(v.BLEND),k&&v.disable(v.DITHER),v.drawArrays(v.POINTS,0,this.pointCount),A&&!this.blend&&v.enable(v.BLEND),k&&v.enable(v.DITHER),c+this.pointCount}),s.draw=s.unifiedDraw,s.drawPick=s.unifiedDraw,s.pick=function(c,h,p){var v=this.pickOffset;if(p<v||p>=v+this.pointCount)return null;var f=p-v,w=this.points;return{object:this,pointId:f,dataCoord:[w[2*f],w[2*f+1]]}}},{"./lib/shader":122,"gl-buffer":78,"gl-shader":132,"typedarray-pool":308}],124:[function(x,T,b){T.exports=function(e,o,a,l){var i,d,u,s,c,h=o[0],p=o[1],v=o[2],g=o[3],f=a[0],w=a[1],y=a[2],M=a[3];return(d=h*f+p*w+v*y+g*M)<0&&(d=-d,f=-f,w=-w,y=-y,M=-M),1-d>1e-6?(i=Math.acos(d),u=Math.sin(i),s=Math.sin((1-l)*i)/u,c=Math.sin(l*i)/u):(s=1-l,c=l),e[0]=s*h+c*f,e[1]=s*p+c*w,e[2]=s*v+c*y,e[3]=s*g+c*M,e}},{}],125:[function(x,T,b){"use strict";T.exports=function(e){return e||0===e?e.toString():""}},{}],126:[function(x,T,b){"use strict";var e=x("vectorize-text");T.exports=function(a,l,i){var d=o[l];if(d||(d=o[l]={}),a in d)return d[a];var u={textAlign:"center",textBaseline:"middle",lineHeight:1,font:l,lineSpacing:1.25,styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0},triangles:!0},s=e(a,u);u.triangles=!1;var c,h,p=e(a,u);if(i&&1!==i){for(c=0;c<s.positions.length;++c)for(h=0;h<s.positions[c].length;++h)s.positions[c][h]/=i;for(c=0;c<p.positions.length;++c)for(h=0;h<p.positions[c].length;++h)p.positions[c][h]/=i}var v=[[1/0,1/0],[-1/0,-1/0]],g=p.positions.length;for(c=0;c<g;++c){var f=p.positions[c];for(h=0;h<2;++h)v[0][h]=Math.min(v[0][h],f[h]),v[1][h]=Math.max(v[1][h],f[h])}return d[a]=[s,p,v]};var o={}},{"vectorize-text":311}],127:[function(x,T,b){var e=x("gl-shader"),o=x("glslify"),a=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform vec4 highlightId;\nuniform float highlightScale;\nuniform mat4 model, view, projection;\nuniform vec3 clipBounds[2];\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = 1.0;\n    if(distance(highlightId, id) < 0.0001) {\n      scale = highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1);\n    vec4 viewPosition = view * worldPosition;\n    viewPosition = viewPosition / viewPosition.w;\n    vec4 clipPosition = projection * (viewPosition + scale * vec4(glyph.x, -glyph.y, 0, 0));\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),l=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float highlightScale, pixelRatio;\nuniform vec4 highlightId;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float scale = pixelRatio;\n    if(distance(highlightId.bgr, id.bgr) < 0.001) {\n      scale *= highlightScale;\n    }\n\n    vec4 worldPosition = model * vec4(position, 1.0);\n    vec4 viewPosition = view * worldPosition;\n    vec4 clipPosition = projection * viewPosition;\n    clipPosition /= clipPosition.w;\n\n    gl_Position = clipPosition + vec4(screenSize * scale * vec2(glyph.x, -glyph.y), 0.0, 0.0);\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = position;\n  }\n}"]),i=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nattribute vec3 position;\nattribute vec4 color;\nattribute vec2 glyph;\nattribute vec4 id;\n\nuniform float highlightScale;\nuniform vec4 highlightId;\nuniform vec3 axes[2];\nuniform mat4 model, view, projection;\nuniform vec2 screenSize;\nuniform vec3 clipBounds[2];\nuniform float scale, pixelRatio;\n\nvarying vec4 interpColor;\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], position)) {\n\n    gl_Position = vec4(0,0,0,0);\n  } else {\n    float lscale = pixelRatio * scale;\n    if(distance(highlightId, id) < 0.0001) {\n      lscale *= highlightScale;\n    }\n\n    vec4 clipCenter   = projection * view * model * vec4(position, 1);\n    vec3 dataPosition = position + 0.5*lscale*(axes[0] * glyph.x + axes[1] * glyph.y) * clipCenter.w * screenSize.y;\n    vec4 clipPosition = projection * view * model * vec4(dataPosition, 1);\n\n    gl_Position = clipPosition;\n    interpColor = color;\n    pickId = id;\n    dataCoordinate = dataPosition;\n  }\n}\n"]),d=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float opacity;\n\nvarying vec4 interpColor;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (\n    outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate) ||\n    interpColor.a * opacity == 0.\n  ) discard;\n  gl_FragColor = interpColor * opacity;\n}\n"]),u=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 fragClipBounds[2];\nuniform float pickGroup;\n\nvarying vec4 pickId;\nvarying vec3 dataCoordinate;\n\nvoid main() {\n  if (outOfRange(fragClipBounds[0], fragClipBounds[1], dataCoordinate)) discard;\n\n  gl_FragColor = vec4(pickGroup, pickId.bgr);\n}"]),s=[{name:"position",type:"vec3"},{name:"color",type:"vec4"},{name:"glyph",type:"vec2"},{name:"id",type:"vec4"}],c={vertex:a,fragment:d,attributes:s},h={vertex:l,fragment:d,attributes:s},p={vertex:i,fragment:d,attributes:s},v={vertex:a,fragment:u,attributes:s},g={vertex:l,fragment:u,attributes:s},f={vertex:i,fragment:u,attributes:s};function w(y,M){var A=e(y,M),k=A.attributes;return k.position.location=0,k.color.location=1,k.glyph.location=2,k.id.location=3,A}b.createPerspective=function(y){return w(y,c)},b.createOrtho=function(y){return w(y,h)},b.createProject=function(y){return w(y,p)},b.createPickPerspective=function(y){return w(y,v)},b.createPickOrtho=function(y){return w(y,g)},b.createPickProject=function(y){return w(y,f)}},{"gl-shader":132,glslify:231}],128:[function(x,T,b){"use strict";var e=x("is-string-blank"),o=x("gl-buffer"),a=x("gl-vao"),l=x("typedarray-pool"),i=x("gl-mat4/multiply"),d=x("./lib/shaders"),u=x("./lib/glyphs"),s=x("./lib/get-simple-string"),c=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function h(ee,J){var $=ee[0],Q=ee[1],se=ee[2],j=ee[3];return ee[0]=J[0]*$+J[4]*Q+J[8]*se+J[12]*j,ee[1]=J[1]*$+J[5]*Q+J[9]*se+J[13]*j,ee[2]=J[2]*$+J[6]*Q+J[10]*se+J[14]*j,ee[3]=J[3]*$+J[7]*Q+J[11]*se+J[15]*j,ee}function p(ee,J,$,Q){return h(Q,Q),h(Q,Q),h(Q,Q)}function v(ee,J){this.index=ee,this.dataCoordinate=this.position=J}function g(ee){return!0===ee||ee>1?1:ee}function f(ee,J,$,Q,se,j,G,W,ie,q,te,ne){this.gl=ee,this.pixelRatio=1,this.shader=J,this.orthoShader=$,this.projectShader=Q,this.pointBuffer=se,this.colorBuffer=j,this.glyphBuffer=G,this.idBuffer=W,this.vao=ie,this.vertexCount=0,this.lineVertexCount=0,this.opacity=1,this.hasAlpha=!1,this.lineWidth=0,this.projectScale=[2/3,2/3,2/3],this.projectOpacity=[1,1,1],this.projectHasAlpha=!1,this.pickId=0,this.pickPerspectiveShader=q,this.pickOrthoShader=te,this.pickProjectShader=ne,this.points=[],this._selectResult=new v(0,[0,0,0]),this.useOrtho=!0,this.bounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.axesProject=[!0,!0,!0],this.axesBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.highlightId=[1,1,1,1],this.highlightScale=2,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.dirty=!0}T.exports=function(ee){var J=ee.gl,$=d.createPerspective(J),Q=d.createOrtho(J),se=d.createProject(J),j=d.createPickPerspective(J),G=d.createPickOrtho(J),W=d.createPickProject(J),ie=o(J),q=o(J),te=o(J),ne=o(J),ue=new f(J,$,Q,se,ie,q,te,ne,a(J,[{buffer:ie,size:3,type:J.FLOAT},{buffer:q,size:4,type:J.FLOAT},{buffer:te,size:2,type:J.FLOAT},{buffer:ne,size:4,type:J.UNSIGNED_BYTE,normalized:!0}]),j,G,W);return ue.update(ee),ue};var w=f.prototype;w.pickSlots=1,w.setPickBase=function(ee){this.pickId=ee},w.isTransparent=function(){if(this.hasAlpha)return!0;for(var ee=0;ee<3;++ee)if(this.axesProject[ee]&&this.projectHasAlpha)return!0;return!1},w.isOpaque=function(){if(!this.hasAlpha)return!0;for(var ee=0;ee<3;++ee)if(this.axesProject[ee]&&!this.projectHasAlpha)return!0;return!1};var y=[0,0],M=[0,0,0],A=[0,0,0],k=[0,0,0,1],C=[0,0,0,1],P=c.slice(),D=[0,0,0],F=[[0,0,0],[0,0,0]];function R(ee){return ee[0]=ee[1]=ee[2]=0,ee}function L(ee,J){return ee[0]=J[0],ee[1]=J[1],ee[2]=J[2],ee[3]=1,ee}function I(ee,J,$,Q){return ee[0]=J[0],ee[1]=J[1],ee[2]=J[2],ee[$]=Q,ee}var V=[[-1e8,-1e8,-1e8],[1e8,1e8,1e8]];function Z(ee,J,$,Q,se,j,G){var W=$.gl;if((j===$.projectHasAlpha||G)&&function B(ee,J,$,Q){var se,j=J.axesProject,G=J.gl,W=ee.uniforms,ie=$.model||c,q=$.view||c,te=$.projection||c,ne=J.axesBounds,le=function(Ee){for(var Pe=F,je=0;je<2;++je)for(var Ge=0;Ge<3;++Ge)Pe[je][Ge]=Math.max(Math.min(Ee[je][Ge],1e8),-1e8);return Pe}(J.clipBounds);se=J.axes&&J.axes.lastCubeProps?J.axes.lastCubeProps.axis:[1,1,1],y[0]=2/G.drawingBufferWidth,y[1]=2/G.drawingBufferHeight,ee.bind(),W.view=q,W.projection=te,W.screenSize=y,W.highlightId=J.highlightId,W.highlightScale=J.highlightScale,W.clipBounds=le,W.pickGroup=J.pickId/255,W.pixelRatio=Q;for(var ue=0;ue<3;++ue)if(j[ue]){W.scale=J.projectScale[ue],W.opacity=J.projectOpacity[ue];for(var de=P,he=0;he<16;++he)de[he]=0;for(he=0;he<4;++he)de[5*he]=1;de[5*ue]=0,de[12+ue]=se[ue]<0?ne[0][ue]:ne[1][ue],i(de,ie,de),W.model=de;var be=(ue+1)%3,ge=(ue+2)%3,we=R(M),Ce=R(A);we[be]=1,Ce[ge]=1;var De=p(0,0,0,L(k,we)),Se=p(0,0,0,L(C,Ce));if(Math.abs(De[1])>Math.abs(Se[1])){var Fe=De;De=Se,Se=Fe,Fe=we,we=Ce,Ce=Fe;var ve=be;be=ge,ge=ve}De[0]<0&&(we[be]=-1),Se[1]>0&&(Ce[ge]=-1);var Te=0,Le=0;for(he=0;he<4;++he)Te+=Math.pow(ie[4*be+he],2),Le+=Math.pow(ie[4*ge+he],2);we[be]/=Math.sqrt(Te),Ce[ge]/=Math.sqrt(Le),W.axes[0]=we,W.axes[1]=Ce,W.fragClipBounds[0]=I(D,le[0],ue,-1e8),W.fragClipBounds[1]=I(D,le[1],ue,1e8),J.vao.bind(),J.vao.draw(G.TRIANGLES,J.vertexCount),J.lineWidth>0&&(G.lineWidth(J.lineWidth*Q),J.vao.draw(G.LINES,J.lineVertexCount,J.vertexCount)),J.vao.unbind()}}(J,$,Q,se),j===$.hasAlpha||G){ee.bind();var ie=ee.uniforms;ie.model=Q.model||c,ie.view=Q.view||c,ie.projection=Q.projection||c,y[0]=2/W.drawingBufferWidth,y[1]=2/W.drawingBufferHeight,ie.screenSize=y,ie.highlightId=$.highlightId,ie.highlightScale=$.highlightScale,ie.fragClipBounds=V,ie.clipBounds=$.axes.bounds,ie.opacity=$.opacity,ie.pickGroup=$.pickId/255,ie.pixelRatio=se,$.vao.bind(),$.vao.draw(W.TRIANGLES,$.vertexCount),$.lineWidth>0&&(W.lineWidth($.lineWidth*se),$.vao.draw(W.LINES,$.lineVertexCount,$.vertexCount)),$.vao.unbind()}}function Y(ee,J,$,Q){var se;se=Array.isArray(ee)?J<ee.length?ee[J]:void 0:ee,se=s(se);var j=!0;e(se)&&(se="\u25bc",j=!1);var G=u(se,$,Q);return{mesh:G[0],lines:G[1],bounds:G[2],visible:j}}w.draw=function(ee){Z(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,ee,this.pixelRatio,!1,!1)},w.drawTransparent=function(ee){Z(this.useOrtho?this.orthoShader:this.shader,this.projectShader,this,ee,this.pixelRatio,!0,!1)},w.drawPick=function(ee){Z(this.useOrtho?this.pickOrthoShader:this.pickPerspectiveShader,this.pickProjectShader,this,ee,1,!0,!0)},w.pick=function(ee){if(!ee||ee.id!==this.pickId)return null;var J=ee.value[2]+(ee.value[1]<<8)+(ee.value[0]<<16);if(J>=this.pointCount||J<0)return null;var $=this.points[J],Q=this._selectResult;Q.index=J;for(var se=0;se<3;++se)Q.position[se]=Q.dataCoordinate[se]=$[se];return Q},w.highlight=function(ee){if(ee){var J=ee.index;this.highlightId=[(255&J)/255,(J>>8&255)/255,(J>>16&255)/255,0]}else this.highlightId=[1,1,1,1]},w.update=function(ee){if("perspective"in(ee=ee||{})&&(this.useOrtho=!ee.perspective),"orthographic"in ee&&(this.useOrtho=!!ee.orthographic),"lineWidth"in ee&&(this.lineWidth=ee.lineWidth),"project"in ee)if(Array.isArray(ee.project))this.axesProject=ee.project;else{var J=!!ee.project;this.axesProject=[J,J,J]}if("projectScale"in ee)if(Array.isArray(ee.projectScale))this.projectScale=ee.projectScale.slice();else{var $=+ee.projectScale;this.projectScale=[$,$,$]}if(this.projectHasAlpha=!1,"projectOpacity"in ee){this.projectOpacity=Array.isArray(ee.projectOpacity)?ee.projectOpacity.slice():[$=+ee.projectOpacity,$,$];for(var Q=0;Q<3;++Q)this.projectOpacity[Q]=g(this.projectOpacity[Q]),this.projectOpacity[Q]<1&&(this.projectHasAlpha=!0)}this.hasAlpha=!1,"opacity"in ee&&(this.opacity=g(ee.opacity),this.opacity<1&&(this.hasAlpha=!0)),this.dirty=!0;var se,j,G=ee.position,W=ee.font||"normal",ie=ee.alignment||[0,0];if(2===ie.length)se=ie[0],j=ie[1];else for(se=[],j=[],Q=0;Q<ie.length;++Q)se[Q]=ie[Q][0],j[Q]=ie[Q][1];var q=[1/0,1/0,1/0],te=[-1/0,-1/0,-1/0],ne=ee.glyph,le=ee.color,ue=ee.size,de=ee.angle,he=ee.lineColor,be=-1,ge=0,we=0,Ce=0;if(G.length){Ce=G.length;e:for(Q=0;Q<Ce;++Q){for(var De=G[Q],Se=0;Se<3;++Se)if(isNaN(De[Se])||!isFinite(De[Se]))continue e;var Fe=(ct=Y(ne,Q,W,this.pixelRatio)).mesh,ve=ct.lines,Te=ct.bounds;ge+=3*Fe.cells.length,we+=2*ve.edges.length}}var Le=ge+we,Ee=l.mallocFloat(3*Le),Pe=l.mallocFloat(4*Le),je=l.mallocFloat(2*Le),Ge=l.mallocUint32(Le);if(Le>0){var Ke=0,lt=ge,Ue=[0,0,0,1],$e=[0,0,0,1],et=Array.isArray(le)&&Array.isArray(le[0]),tt=Array.isArray(he)&&Array.isArray(he[0]);e:for(Q=0;Q<Ce;++Q){for(be+=1,De=G[Q],Se=0;Se<3;++Se){if(isNaN(De[Se])||!isFinite(De[Se]))continue e;te[Se]=Math.max(te[Se],De[Se]),q[Se]=Math.min(q[Se],De[Se])}Fe=(ct=Y(ne,Q,W,this.pixelRatio)).mesh,ve=ct.lines,Te=ct.bounds;var ct,xt=ct.visible;if(xt)if(Array.isArray(le)){if(3===(Ct=et?Q<le.length?le[Q]:[0,0,0,0]:le).length){for(Se=0;Se<3;++Se)Ue[Se]=Ct[Se];Ue[3]=1}else if(4===Ct.length){for(Se=0;Se<4;++Se)Ue[Se]=Ct[Se];!this.hasAlpha&&Ct[3]<1&&(this.hasAlpha=!0)}}else Ue[0]=Ue[1]=Ue[2]=0,Ue[3]=1;else Ue=[1,1,1,0];if(xt)if(Array.isArray(he)){var Ct;if(3===(Ct=tt?Q<he.length?he[Q]:[0,0,0,0]:he).length){for(Se=0;Se<3;++Se)$e[Se]=Ct[Se];$e[Se]=1}else if(4===Ct.length){for(Se=0;Se<4;++Se)$e[Se]=Ct[Se];!this.hasAlpha&&Ct[3]<1&&(this.hasAlpha=!0)}}else $e[0]=$e[1]=$e[2]=0,$e[3]=1;else $e=[1,1,1,0];var Ht=.5;xt?Array.isArray(ue)?Ht=Q<ue.length?+ue[Q]:12:ue?Ht=+ue:this.useOrtho&&(Ht=12):Ht=0;var zt=0;Array.isArray(de)?zt=Q<de.length?+de[Q]:0:de&&(zt=+de);var ht=Math.cos(zt),ut=Math.sin(zt);for(De=G[Q],Se=0;Se<3;++Se)te[Se]=Math.max(te[Se],De[Se]),q[Se]=Math.min(q[Se],De[Se]);var Ot=se,tn=j;Ot=0,Array.isArray(se)?Ot=Q<se.length?se[Q]:0:se&&(Ot=se),tn=0,Array.isArray(j)?tn=Q<j.length?j[Q]:0:j&&(tn=j);var un=[Ot*=Ot>0?1-Te[0][0]:Ot<0?1+Te[1][0]:1,tn*=tn>0?1-Te[0][1]:tn<0?1+Te[1][1]:1],Ze=Fe.cells||[],Qe=Fe.positions||[];for(Se=0;Se<Ze.length;++Se)for(var qe=Ze[Se],it=0;it<3;++it){for(var Ie=0;Ie<3;++Ie)Ee[3*Ke+Ie]=De[Ie];for(Ie=0;Ie<4;++Ie)Pe[4*Ke+Ie]=Ue[Ie];Ge[Ke]=be;var ze=Qe[qe[it]];je[2*Ke]=Ht*(ht*ze[0]-ut*ze[1]+un[0]),je[2*Ke+1]=Ht*(ut*ze[0]+ht*ze[1]+un[1]),Ke+=1}for(Ze=ve.edges,Qe=ve.positions,Se=0;Se<Ze.length;++Se)for(qe=Ze[Se],it=0;it<2;++it){for(Ie=0;Ie<3;++Ie)Ee[3*lt+Ie]=De[Ie];for(Ie=0;Ie<4;++Ie)Pe[4*lt+Ie]=$e[Ie];Ge[lt]=be,je[2*lt]=Ht*(ht*(ze=Qe[qe[it]])[0]-ut*ze[1]+un[0]),je[2*lt+1]=Ht*(ut*ze[0]+ht*ze[1]+un[1]),lt+=1}}}this.bounds=[q,te],this.points=G,this.pointCount=G.length,this.vertexCount=ge,this.lineVertexCount=we,this.pointBuffer.update(Ee),this.colorBuffer.update(Pe),this.glyphBuffer.update(je),this.idBuffer.update(Ge),l.free(Ee),l.free(Pe),l.free(je),l.free(Ge)},w.dispose=function(){this.shader.dispose(),this.orthoShader.dispose(),this.pickPerspectiveShader.dispose(),this.pickOrthoShader.dispose(),this.vao.dispose(),this.pointBuffer.dispose(),this.colorBuffer.dispose(),this.glyphBuffer.dispose(),this.idBuffer.dispose()}},{"./lib/get-simple-string":125,"./lib/glyphs":126,"./lib/shaders":127,"gl-buffer":78,"gl-mat4/multiply":100,"gl-vao":150,"is-string-blank":239,"typedarray-pool":308}],129:[function(x,T,b){"use strict";var e=x("glslify");b.boxVertex=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec2 vertex;\n\nuniform vec2 cornerA, cornerB;\n\nvoid main() {\n  gl_Position = vec4(mix(cornerA, cornerB, vertex), 0, 1);\n}\n"]),b.boxFragment=e(["precision mediump float;\n#define GLSLIFY 1\n\nuniform vec4 color;\n\nvoid main() {\n  gl_FragColor = color;\n}\n"])},{glslify:231}],130:[function(x,T,b){"use strict";var e=x("gl-shader"),o=x("gl-buffer"),a=x("./lib/shaders");function l(d,u,s){this.plot=d,this.boxBuffer=u,this.boxShader=s,this.enabled=!0,this.selectBox=[1/0,1/0,-1/0,-1/0],this.borderColor=[0,0,0,1],this.innerFill=!1,this.innerColor=[0,0,0,.25],this.outerFill=!0,this.outerColor=[0,0,0,.5],this.borderWidth=10}T.exports=function(d,u){var s=d.gl,p=new l(d,o(s,[0,0,0,1,1,0,1,1]),e(s,a.boxVertex,a.boxFragment));return p.update(u),d.addOverlay(p),p};var i=l.prototype;i.draw=function(){if(this.enabled){var d=this.plot,u=this.selectBox,s=this.borderWidth,c=this.innerColor,h=this.outerColor,p=this.borderColor,v=d.box,g=d.screenBox,f=d.dataBox,w=d.viewBox,y=d.pixelRatio,M=(u[0]-f[0])*(w[2]-w[0])/(f[2]-f[0])+w[0],A=(u[1]-f[1])*(w[3]-w[1])/(f[3]-f[1])+w[1],k=(u[2]-f[0])*(w[2]-w[0])/(f[2]-f[0])+w[0],C=(u[3]-f[1])*(w[3]-w[1])/(f[3]-f[1])+w[1];if(M=Math.max(M,w[0]),A=Math.max(A,w[1]),k=Math.min(k,w[2]),C=Math.min(C,w[3]),!(k<M||C<A)){v.bind();var P=g[2]-g[0],D=g[3]-g[1];if(this.outerFill&&(v.drawBox(0,0,P,A,h),v.drawBox(0,A,M,C,h),v.drawBox(0,C,P,D,h),v.drawBox(k,A,P,C,h)),this.innerFill&&v.drawBox(M,A,k,C,c),s>0){var F=s*y;v.drawBox(M-F,A-F,k+F,A+F,p),v.drawBox(M-F,C-F,k+F,C+F,p),v.drawBox(M-F,A-F,M+F,C+F,p),v.drawBox(k-F,A-F,k+F,C+F,p)}}}},i.update=function(d){this.innerFill=!!(d=d||{}).innerFill,this.outerFill=!!d.outerFill,this.innerColor=(d.innerColor||[0,0,0,.5]).slice(),this.outerColor=(d.outerColor||[0,0,0,.5]).slice(),this.borderColor=(d.borderColor||[0,0,0,1]).slice(),this.borderWidth=d.borderWidth||0,this.selectBox=(d.selectBox||this.selectBox).slice()},i.dispose=function(){this.boxBuffer.dispose(),this.boxShader.dispose(),this.plot.removeOverlay(this)}},{"./lib/shaders":129,"gl-buffer":78,"gl-shader":132}],131:[function(x,T,b){"use strict";T.exports=function(s,c){var h=c[0],p=c[1];return new d(s,e(s,h,p,{}),o.mallocUint8(h*p*4))};var e=x("gl-fbo"),o=x("typedarray-pool"),a=x("ndarray"),l=x("bit-twiddle").nextPow2;function i(s,c,h,p,v){this.coord=[s,c],this.id=h,this.value=p,this.distance=v}function d(s,c,h){this.gl=s,this.fbo=c,this.buffer=h,this._readTimeout=null;var p=this;this._readCallback=function(){p.gl&&(c.bind(),s.readPixels(0,0,c.shape[0],c.shape[1],s.RGBA,s.UNSIGNED_BYTE,p.buffer),p._readTimeout=null)}}var u=d.prototype;Object.defineProperty(u,"shape",{get:function(){return this.gl?this.fbo.shape.slice():[0,0]},set:function(s){if(this.gl){this.fbo.shape=s;var c=this.fbo.shape[0],h=this.fbo.shape[1];if(h*c*4>this.buffer.length){o.free(this.buffer);for(var p=this.buffer=o.mallocUint8(l(h*c*4)),v=0;v<h*c*4;++v)p[v]=255}return s}}}),u.begin=function(){var s=this.gl;s&&(this.fbo.bind(),s.clearColor(1,1,1,1),s.clear(s.COLOR_BUFFER_BIT|s.DEPTH_BUFFER_BIT))},u.end=function(){var s=this.gl;s&&(s.bindFramebuffer(s.FRAMEBUFFER,null),this._readTimeout||clearTimeout(this._readTimeout),this._readTimeout=setTimeout(this._readCallback,1))},u.query=function(s,c,h){if(!this.gl)return null;var p=this.fbo.shape.slice();s|=0,c|=0,"number"!=typeof h&&(h=1);var v=0|Math.min(Math.max(s-h,0),p[0]),g=0|Math.min(Math.max(s+h,0),p[0]),f=0|Math.min(Math.max(c-h,0),p[1]),w=0|Math.min(Math.max(c+h,0),p[1]);if(g<=v||w<=f)return null;var y=[g-v,w-f],M=a(this.buffer,[y[0],y[1],4],[4,4*p[0],1],4*(v+p[0]*f)),A=function(P,D,F){for(var R=1e8,L=-1,I=-1,B=P.shape[0],V=P.shape[1],Z=0;Z<B;Z++)for(var Y=0;Y<V;Y++){var ee=P.get(Z,Y,0),J=P.get(Z,Y,1),$=P.get(Z,Y,2),Q=P.get(Z,Y,3);if(ee<255||J<255||$<255||Q<255){var se=D-Z,j=F-Y,G=se*se+j*j;G<R&&(R=G,L=Z,I=Y)}}return[L,I,R]}(M.hi(y[0],y[1],1),h,h),k=A[0],C=A[1];return k<0||Math.pow(this.radius,2)<A[2]?null:new i(k+v|0,C+f|0,M.get(k,C,0),[M.get(k,C,1),M.get(k,C,2),M.get(k,C,3)],Math.sqrt(A[2]))},u.dispose=function(){this.gl&&(this.fbo.dispose(),o.free(this.buffer),this.gl=null,this._readTimeout&&clearTimeout(this._readTimeout))}},{"bit-twiddle":32,"gl-fbo":86,ndarray:259,"typedarray-pool":308}],132:[function(x,T,b){"use strict";var e=x("./lib/create-uniforms"),o=x("./lib/create-attributes"),a=x("./lib/reflect"),l=x("./lib/shader-cache"),i=x("./lib/runtime-reflect"),d=x("./lib/GLError");function u(h){this.gl=h,this.gl.lastAttribCount=0,this._vref=this._fref=this._relink=this.vertShader=this.fragShader=this.program=this.attributes=this.uniforms=this.types=null}var s=u.prototype;function c(h,p){return h.name<p.name?-1:1}s.bind=function(){var h;this.program||this._relink();var p=this.gl.getProgramParameter(this.program,this.gl.ACTIVE_ATTRIBUTES),v=this.gl.lastAttribCount;if(p>v)for(h=v;h<p;h++)this.gl.enableVertexAttribArray(h);else if(v>p)for(h=p;h<v;h++)this.gl.disableVertexAttribArray(h);this.gl.lastAttribCount=p,this.gl.useProgram(this.program)},s.dispose=function(){for(var h=this.gl.lastAttribCount,p=0;p<h;p++)this.gl.disableVertexAttribArray(p);this.gl.lastAttribCount=0,this._fref&&this._fref.dispose(),this._vref&&this._vref.dispose(),this.attributes=this.types=this.vertShader=this.fragShader=this.program=this._relink=this._fref=this._vref=null},s.update=function(h,p,v,g){if(!p||1===arguments.length){var f=h;h=f.vertex,p=f.fragment,v=f.uniforms,g=f.attributes}var w=this,y=w.gl,M=w._vref;w._vref=l.shader(y,y.VERTEX_SHADER,h),M&&M.dispose(),w.vertShader=w._vref.shader;var A=this._fref;if(w._fref=l.shader(y,y.FRAGMENT_SHADER,p),A&&A.dispose(),w.fragShader=w._fref.shader,!v||!g){var k=y.createProgram();if(y.attachShader(k,w.fragShader),y.attachShader(k,w.vertShader),y.linkProgram(k),!y.getProgramParameter(k,y.LINK_STATUS)){var C=y.getProgramInfoLog(k);throw new d(C,"Error linking program:"+C)}v=v||i.uniforms(y,k),g=g||i.attributes(y,k),y.deleteProgram(k)}(g=g.slice()).sort(c);var P,D=[],F=[],R=[];for(P=0;P<g.length;++P){var L=g[P];if(L.type.indexOf("mat")>=0){for(var I=0|L.type.charAt(L.type.length-1),B=new Array(I),V=0;V<I;++V)B[V]=R.length,F.push(L.name+"["+V+"]"),"number"==typeof L.location?R.push(L.location+V):Array.isArray(L.location)&&L.location.length===I&&"number"==typeof L.location[V]?R.push(0|L.location[V]):R.push(-1);D.push({name:L.name,type:L.type,locations:B})}else D.push({name:L.name,type:L.type,locations:[R.length]}),F.push(L.name),R.push("number"==typeof L.location?0|L.location:-1)}var Z=0;for(P=0;P<R.length;++P)if(R[P]<0){for(;R.indexOf(Z)>=0;)Z+=1;R[P]=Z}var Y=new Array(v.length);function ee(){w.program=l.program(y,w._vref,w._fref,F,R);for(var J=0;J<v.length;++J)Y[J]=y.getUniformLocation(w.program,v[J].name)}ee(),w._relink=ee,w.types={uniforms:a(v),attributes:a(g)},w.attributes=o(y,w,D,R),Object.defineProperty(w,"uniforms",e(y,w,v,Y))},T.exports=function(h,p,v,g,f){var w=new u(h);return w.update(p,v,g,f),w}},{"./lib/GLError":133,"./lib/create-attributes":134,"./lib/create-uniforms":135,"./lib/reflect":136,"./lib/runtime-reflect":137,"./lib/shader-cache":138}],133:[function(x,T,b){function e(o,a,l){this.shortMessage=a||"",this.longMessage=l||"",this.rawError=o||"",this.message="gl-shader: "+(a||o||"")+(l?"\n"+l:""),this.stack=(new Error).stack}(e.prototype=new Error).name="GLError",e.prototype.constructor=e,T.exports=e},{}],134:[function(x,T,b){"use strict";T.exports=function(u,s,c,h){for(var p={},v=0,g=c.length;v<g;++v){var f=c[v],w=f.name,y=f.type,M=f.locations;switch(y){case"bool":case"int":case"float":i(u,s,M[0],h,1,p,w);break;default:if(y.indexOf("vec")>=0){if((A=y.charCodeAt(y.length-1)-48)<2||A>4)throw new e("","Invalid data type for attribute "+w+": "+y);i(u,s,M[0],h,A,p,w)}else{if(!(y.indexOf("mat")>=0))throw new e("","Unknown data type for attribute "+w+": "+y);var A;if((A=y.charCodeAt(y.length-1)-48)<2||A>4)throw new e("","Invalid data type for attribute "+w+": "+y);d(u,s,M,h,A,p,w)}}}return p};var e=x("./GLError");function o(u,s,c,h,p,v){this._gl=u,this._wrapper=s,this._index=c,this._locations=h,this._dimension=p,this._constFunc=v}var a=o.prototype;a.pointer=function(u,s,c,h){var p=this._gl,v=this._locations[this._index];p.vertexAttribPointer(v,this._dimension,u||p.FLOAT,!!s,c||0,h||0),p.enableVertexAttribArray(v)},a.set=function(u,s,c,h){return this._constFunc(this._locations[this._index],u,s,c,h)},Object.defineProperty(a,"location",{get:function(){return this._locations[this._index]},set:function(u){return u!==this._locations[this._index]&&(this._locations[this._index]=0|u,this._wrapper.program=null),0|u}});var l=[function(u,s,c){return void 0===c.length?u.vertexAttrib1f(s,c):u.vertexAttrib1fv(s,c)},function(u,s,c,h){return void 0===c.length?u.vertexAttrib2f(s,c,h):u.vertexAttrib2fv(s,c)},function(u,s,c,h,p){return void 0===c.length?u.vertexAttrib3f(s,c,h,p):u.vertexAttrib3fv(s,c)},function(u,s,c,h,p,v){return void 0===c.length?u.vertexAttrib4f(s,c,h,p,v):u.vertexAttrib4fv(s,c)}];function i(u,s,c,h,p,v,g){var f=l[p],w=new o(u,s,c,h,p,f);Object.defineProperty(v,g,{set:function(y){return u.disableVertexAttribArray(h[c]),f(u,h[c],y),y},get:function(){return w},enumerable:!0})}function d(u,s,c,h,p,v,g){for(var f=new Array(p),w=new Array(p),y=0;y<p;++y)i(u,s,c[y],h,p,f,y),w[y]=f[y];Object.defineProperty(f,"location",{set:function(k){if(Array.isArray(k))for(var C=0;C<p;++C)w[C].location=k[C];else for(C=0;C<p;++C)w[C].location=k+C;return k},get:function(){for(var k=new Array(p),C=0;C<p;++C)k[C]=h[c[C]];return k},enumerable:!0}),f.pointer=function(k,C,P,D){k=k||u.FLOAT,C=!!C,P=P||p*p,D=D||0;for(var F=0;F<p;++F){var R=h[c[F]];u.vertexAttribPointer(R,p,k,C,P,D+F*p),u.enableVertexAttribArray(R)}};var M=new Array(p),A=u["vertexAttrib"+p+"fv"];Object.defineProperty(v,g,{set:function(k){for(var C=0;C<p;++C){var P=h[c[C]];if(u.disableVertexAttribArray(P),Array.isArray(k[0]))A.call(u,P,k[C]);else{for(var D=0;D<p;++D)M[D]=k[p*C+D];A.call(u,P,M)}}return k},get:function(){return f},enumerable:!0})}},{"./GLError":133}],135:[function(x,T,b){"use strict";var e=x("./reflect"),o=x("./GLError");function a(i){return function(){return i}}function l(i,d){for(var u=new Array(i),s=0;s<i;++s)u[s]=d;return u}T.exports=function(i,d,u,s){function c(g){return function(f){for(var w=function V(Z,Y){if("object"!=typeof Y)return[[Z,Y]];var ee=[];for(var J in Y){var $=Y[J],Q=Z;parseInt(J)+""===J?Q+="["+J+"]":Q+="."+J,"object"==typeof $?ee.push.apply(ee,V(Q,$)):ee.push([Q,$])}return ee}("",g),y=0;y<w.length;++y){var M=w[y],A=M[0],k=M[1];if(s[k]){var C=f;if("string"==typeof A&&(0===A.indexOf(".")||0===A.indexOf("["))){var P=A;if(0===A.indexOf(".")&&(P=A.slice(1)),P.indexOf("]")===P.length-1){var D=P.indexOf("["),F=P.slice(0,D),R=P.slice(D+1,P.length-1);C=F?f[F][R]:f[R]}else C=f[P]}var L,I=u[k].type;switch(I){case"bool":case"int":case"sampler2D":case"samplerCube":i.uniform1i(s[k],C);break;case"float":i.uniform1f(s[k],C);break;default:var B=I.indexOf("vec");if(!(0<=B&&B<=1&&I.length===4+B)){if(0===I.indexOf("mat")&&4===I.length){if((L=I.charCodeAt(I.length-1)-48)<2||L>4)throw new o("","Invalid uniform dimension type for matrix "+name+": "+I);i["uniformMatrix"+L+"fv"](s[k],!1,C);break}throw new o("","Unknown uniform data type for "+name+": "+I)}if((L=I.charCodeAt(I.length-1)-48)<2||L>4)throw new o("","Invalid data type");switch(I.charAt(0)){case"b":case"i":i["uniform"+L+"iv"](s[k],C);break;case"v":i["uniform"+L+"fv"](s[k],C);break;default:throw new o("","Unrecognized data type for vector "+name+": "+I)}}}}}}function h(g,f,w){if("object"==typeof w){var y=p(w);Object.defineProperty(g,f,{get:a(y),set:c(w),enumerable:!0,configurable:!1})}else s[w]?Object.defineProperty(g,f,{get:(M=w,function(A,k,C){return A.getUniform(k.program,C[M])}),set:c(w),enumerable:!0,configurable:!1}):g[f]=function(A){switch(A){case"bool":return!1;case"int":case"sampler2D":case"samplerCube":case"float":return 0;default:var k=A.indexOf("vec");if(0<=k&&k<=1&&A.length===4+k){if((C=A.charCodeAt(A.length-1)-48)<2||C>4)throw new o("","Invalid data type");return"b"===A.charAt(0)?l(C,!1):l(C,0)}if(0===A.indexOf("mat")&&4===A.length){var C;if((C=A.charCodeAt(A.length-1)-48)<2||C>4)throw new o("","Invalid uniform dimension type for matrix "+name+": "+A);return l(C*C,0)}throw new o("","Unknown uniform data type for "+name+": "+A)}}(u[w].type);var M}function p(g){var f;if(Array.isArray(g)){f=new Array(g.length);for(var w=0;w<g.length;++w)h(f,w,g[w])}else for(var y in f={},g)h(f,y,g[y]);return f}var v=e(u,!0);return{get:a(p(v)),set:c(v),enumerable:!0,configurable:!0}}},{"./GLError":133,"./reflect":136}],136:[function(x,T,b){"use strict";T.exports=function(e,o){for(var a={},l=0;l<e.length;++l)for(var i=e[l].name.split("."),d=a,u=0;u<i.length;++u){var s=i[u].split("[");if(s.length>1){s[0]in d||(d[s[0]]=[]),d=d[s[0]];for(var c=1;c<s.length;++c){var h=parseInt(s[c]);c<s.length-1||u<i.length-1?(h in d||(d[h]=c<s.length-1?[]:{}),d=d[h]):d[h]=o?l:e[l].type}}else u<i.length-1?(s[0]in d||(d[s[0]]={}),d=d[s[0]]):d[s[0]]=o?l:e[l].type}return a}},{}],137:[function(x,T,b){"use strict";b.uniforms=function(l,i){for(var d=l.getProgramParameter(i,l.ACTIVE_UNIFORMS),u=[],s=0;s<d;++s){var c=l.getActiveUniform(i,s);if(c){var h=a(l,c.type);if(c.size>1)for(var p=0;p<c.size;++p)u.push({name:c.name.replace("[0]","["+p+"]"),type:h});else u.push({name:c.name,type:h})}}return u},b.attributes=function(l,i){for(var d=l.getProgramParameter(i,l.ACTIVE_ATTRIBUTES),u=[],s=0;s<d;++s){var c=l.getActiveAttrib(i,s);c&&u.push({name:c.name,type:a(l,c.type)})}return u};var e={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube"},o=null;function a(l,i){if(!o){var d=Object.keys(e);o={};for(var u=0;u<d.length;++u){var s=d[u];o[l[s]]=e[s]}}return o[i]}},{}],138:[function(x,T,b){"use strict";b.shader=function(c,h,p){return s(c).getShaderReference(h,p)},b.program=function(c,h,p,v,g){return s(c).getProgram(h,p,v,g)};var e=x("./GLError"),o=x("gl-format-compiler-error"),a=new("undefined"==typeof WeakMap?x("weakmap-shim"):WeakMap),l=0;function i(c,h,p,v,g,f,w){this.id=c,this.src=h,this.type=p,this.shader=v,this.count=f,this.programs=[],this.cache=w}function d(c){this.gl=c,this.shaders=[{},{}],this.programs={}}i.prototype.dispose=function(){if(0==--this.count){for(var c=this.cache,h=c.gl,p=this.programs,v=0,g=p.length;v<g;++v){var f=c.programs[p[v]];f&&(delete c.programs[v],h.deleteProgram(f))}h.deleteShader(this.shader),delete c.shaders[this.type===h.FRAGMENT_SHADER|0][this.src]}};var u=d.prototype;function s(c){var h=a.get(c);return h||(h=new d(c),a.set(c,h)),h}u.getShaderReference=function(c,h){var p=this.gl,v=this.shaders[c===p.FRAGMENT_SHADER|0],g=v[h];if(g&&p.isShader(g.shader))g.count+=1;else{var f=function(w,y,M){var A=w.createShader(y);if(w.shaderSource(A,M),w.compileShader(A),!w.getShaderParameter(A,w.COMPILE_STATUS)){var k=w.getShaderInfoLog(A);try{var C=o(k,M,y)}catch(P){throw console.warn("Failed to format compiler error: "+P),new e(k,"Error compiling shader:\n"+k)}throw new e(k,C.short,C.long)}return A}(p,c,h);g=v[h]=new i(l++,h,c,f,[],1,this)}return g},u.getProgram=function(c,h,p,v){var g=[c.id,h.id,p.join(":"),v.join(":")].join("@"),f=this.programs[g];return f&&this.gl.isProgram(f)||(this.programs[g]=f=function(w,y,M,A,k){var C=w.createProgram();w.attachShader(C,y),w.attachShader(C,M);for(var P=0;P<A.length;++P)w.bindAttribLocation(C,k[P],A[P]);if(w.linkProgram(C),!w.getProgramParameter(C,w.LINK_STATUS)){var D=w.getProgramInfoLog(C);throw new e(D,"Error linking program: "+D)}return C}(this.gl,c.shader,h.shader,p,v),c.programs.push(g),h.programs.push(g)),f}},{"./GLError":133,"gl-format-compiler-error":87,"weakmap-shim":316}],139:[function(x,T,b){"use strict";function e(a){this.plot=a,this.enable=[!0,!0,!1,!1],this.width=[1,1,1,1],this.color=[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.center=[1/0,1/0]}T.exports=function(a,l){var i=new e(a);return i.update(l),a.addOverlay(i),i};var o=e.prototype;o.update=function(a){this.enable=((a=a||{}).enable||[!0,!0,!1,!1]).slice(),this.width=(a.width||[1,1,1,1]).slice(),this.color=(a.color||[[0,0,0,1],[0,0,0,1],[0,0,0,1],[0,0,0,1]]).map(function(l){return l.slice()}),this.center=(a.center||[1/0,1/0]).slice(),this.plot.setOverlayDirty()},o.draw=function(){var a=this.enable,l=this.width,i=this.color,d=this.center,u=this.plot,s=u.line,c=u.dataBox,h=u.viewBox;if(s.bind(),c[0]<=d[0]&&d[0]<=c[2]&&c[1]<=d[1]&&d[1]<=c[3]){var p=h[0]+(d[0]-c[0])/(c[2]-c[0])*(h[2]-h[0]),v=h[1]+(d[1]-c[1])/(c[3]-c[1])*(h[3]-h[1]);a[0]&&s.drawLine(p,v,h[0],v,l[0],i[0]),a[1]&&s.drawLine(p,v,p,h[1],l[1],i[1]),a[2]&&s.drawLine(p,v,h[2],v,l[2],i[2]),a[3]&&s.drawLine(p,v,p,h[3],l[3],i[3])}},o.dispose=function(){this.plot.removeOverlay(this)}},{}],140:[function(x,T,b){"use strict";var e=x("glslify"),o=x("gl-shader"),a=e(["precision mediump float;\n#define GLSLIFY 1\n\nattribute vec3 position, color;\nattribute float weight;\n\nuniform mat4 model, view, projection;\nuniform vec3 coordinates[3];\nuniform vec4 colors[3];\nuniform vec2 screenShape;\nuniform float lineWidth;\n\nvarying vec4 fragColor;\n\nvoid main() {\n  vec3 vertexPosition = mix(coordinates[0],\n    mix(coordinates[2], coordinates[1], 0.5 * (position + 1.0)), abs(position));\n\n  vec4 clipPos = projection * view * model * vec4(vertexPosition, 1.0);\n  vec2 clipOffset = (projection * view * model * vec4(color, 0.0)).xy;\n  vec2 delta = weight * clipOffset * screenShape;\n  vec2 lineOffset = normalize(vec2(delta.y, -delta.x)) / screenShape;\n\n  gl_Position   = vec4(clipPos.xy + clipPos.w * 0.5 * lineWidth * lineOffset, clipPos.z, clipPos.w);\n  fragColor     = color.x * colors[0] + color.y * colors[1] + color.z * colors[2];\n}\n"]),l=e(["precision mediump float;\n#define GLSLIFY 1\n\nvarying vec4 fragColor;\n\nvoid main() {\n  gl_FragColor = fragColor;\n}"]);T.exports=function(i){return o(i,a,l,null,[{name:"position",type:"vec3"},{name:"color",type:"vec3"},{name:"weight",type:"float"}])}},{"gl-shader":132,glslify:231}],141:[function(x,T,b){"use strict";var e=x("gl-buffer"),o=x("gl-vao"),a=x("./shaders/index");T.exports=function(h,p){var v=[];function g(A,k,C,P,D,F){var R=[A,k,C,0,0,0,1];R[P+3]=1,R[P]=D,v.push.apply(v,R),R[6]=-1,v.push.apply(v,R),R[P]=F,v.push.apply(v,R),v.push.apply(v,R),R[6]=1,v.push.apply(v,R),R[P]=D,v.push.apply(v,R)}g(0,0,0,0,0,1),g(0,0,0,1,0,1),g(0,0,0,2,0,1),g(1,0,0,1,-1,1),g(1,0,0,2,-1,1),g(0,1,0,0,-1,1),g(0,1,0,2,-1,1),g(0,0,1,0,-1,1),g(0,0,1,1,-1,1);var f=e(h,v),w=o(h,[{type:h.FLOAT,buffer:f,size:3,offset:0,stride:28},{type:h.FLOAT,buffer:f,size:3,offset:12,stride:28},{type:h.FLOAT,buffer:f,size:1,offset:24,stride:28}]),y=a(h);y.attributes.position.location=0,y.attributes.color.location=1,y.attributes.weight.location=2;var M=new i(h,f,w,y);return M.update(p),M};var l=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];function i(h,p,v,g){this.gl=h,this.buffer=p,this.vao=v,this.shader=g,this.pixelRatio=1,this.bounds=[[-1e3,-1e3,-1e3],[1e3,1e3,1e3]],this.position=[0,0,0],this.lineWidth=[2,2,2],this.colors=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.enabled=[!0,!0,!0],this.drawSides=[!0,!0,!0],this.axes=null}var d=i.prototype,u=[0,0,0],s=[0,0,0],c=[0,0];d.isTransparent=function(){return!1},d.drawTransparent=function(h){},d.draw=function(h){var p=this.gl,v=this.vao,g=this.shader;v.bind(),g.bind();var f,w=h.model||l,y=h.view||l,M=h.projection||l;this.axes&&(f=this.axes.lastCubeProps.axis);for(var A=u,k=s,C=0;C<3;++C)f&&f[C]<0?(A[C]=this.bounds[0][C],k[C]=this.bounds[1][C]):(A[C]=this.bounds[1][C],k[C]=this.bounds[0][C]);for(c[0]=p.drawingBufferWidth,c[1]=p.drawingBufferHeight,g.uniforms.model=w,g.uniforms.view=y,g.uniforms.projection=M,g.uniforms.coordinates=[this.position,A,k],g.uniforms.colors=this.colors,g.uniforms.screenShape=c,C=0;C<3;++C)g.uniforms.lineWidth=this.lineWidth[C]*this.pixelRatio,this.enabled[C]&&(v.draw(p.TRIANGLES,6,6*C),this.drawSides[C]&&v.draw(p.TRIANGLES,12,18+12*C));v.unbind()},d.update=function(h){h&&("bounds"in h&&(this.bounds=h.bounds),"position"in h&&(this.position=h.position),"lineWidth"in h&&(this.lineWidth=h.lineWidth),"colors"in h&&(this.colors=h.colors),"enabled"in h&&(this.enabled=h.enabled),"drawSides"in h&&(this.drawSides=h.drawSides))},d.dispose=function(){this.vao.dispose(),this.buffer.dispose(),this.shader.dispose()}},{"./shaders/index":140,"gl-buffer":78,"gl-vao":150}],142:[function(x,T,b){var e=x("glslify"),o=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 color, position;\nattribute vec2 uv;\n\nuniform float vectorScale, tubeScale;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 eyePosition, lightPosition;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  // Scale the vector magnitude to stay constant with\n  // model & view changes.\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * tubePosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  f_lightDirection = lightPosition - cameraCoordinate.xyz;\n  f_eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  f_normal = normalize((vec4(normal, 0.0) * inverseModel).xyz);\n\n  // vec4 m_position  = model * vec4(tubePosition, 1.0);\n  vec4 t_position  = view * tubePosition;\n  gl_Position      = projection * t_position;\n\n  f_color          = color;\n  f_data           = tubePosition.xyz;\n  f_position       = position.xyz;\n  f_uv             = uv;\n}\n"]),a=e(["#extension GL_OES_standard_derivatives : enable\n\nprecision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat cookTorranceSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness,\n  float fresnel) {\n\n  float VdotN = max(dot(viewDirection, surfaceNormal), 0.0);\n  float LdotN = max(dot(lightDirection, surfaceNormal), 0.0);\n\n  //Half angle vector\n  vec3 H = normalize(lightDirection + viewDirection);\n\n  //Geometric term\n  float NdotH = max(dot(surfaceNormal, H), 0.0);\n  float VdotH = max(dot(viewDirection, H), 0.000001);\n  float LdotH = max(dot(lightDirection, H), 0.000001);\n  float G1 = (2.0 * NdotH * VdotN) / VdotH;\n  float G2 = (2.0 * NdotH * LdotN) / LdotH;\n  float G = min(1.0, min(G1, G2));\n  \n  //Distribution term\n  float D = beckmannDistribution(NdotH, roughness);\n\n  //Fresnel term\n  float F = pow(1.0 - VdotN, fresnel);\n\n  //Multiply terms and done\n  return  G * F * D / max(3.14159265 * VdotN, 0.000001);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform sampler2D texture;\n\nvarying vec3 f_normal, f_lightDirection, f_eyeDirection, f_data, f_position;\nvarying vec4 f_color;\nvarying vec2 f_uv;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n  vec3 N = normalize(f_normal);\n  vec3 L = normalize(f_lightDirection);\n  vec3 V = normalize(f_eyeDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = min(1.0, max(0.0, cookTorranceSpecular(L, V, N, roughness, fresnel)));\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  vec4 surfaceColor = f_color * texture2D(texture, f_uv);\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = litColor * opacity;\n}\n"]),l=e(["precision highp float;\n\nprecision highp float;\n#define GLSLIFY 1\n\nvec3 getOrthogonalVector(vec3 v) {\n  // Return up-vector for only-z vector.\n  // Return ax + by + cz = 0, a point that lies on the plane that has v as a normal and that isn't (0,0,0).\n  // From the above if-statement we have ||a|| > 0  U  ||b|| > 0.\n  // Assign z = 0, x = -b, y = a:\n  // a*-b + b*a + c*0 = -ba + ba + 0 = 0\n  if (v.x*v.x > v.z*v.z || v.y*v.y > v.z*v.z) {\n    return normalize(vec3(-v.y, v.x, 0.0));\n  } else {\n    return normalize(vec3(0.0, v.z, -v.y));\n  }\n}\n\n// Calculate the tube vertex and normal at the given index.\n//\n// The returned vertex is for a tube ring with its center at origin, radius of length(d), pointing in the direction of d.\n//\n// Each tube segment is made up of a ring of vertices.\n// These vertices are used to make up the triangles of the tube by connecting them together in the vertex array.\n// The indexes of tube segments run from 0 to 8.\n//\nvec3 getTubePosition(vec3 d, float index, out vec3 normal) {\n  float segmentCount = 8.0;\n\n  float angle = 2.0 * 3.14159 * (index / segmentCount);\n\n  vec3 u = getOrthogonalVector(d);\n  vec3 v = normalize(cross(u, d));\n\n  vec3 x = u * cos(angle) * length(d);\n  vec3 y = v * sin(angle) * length(d);\n  vec3 v3 = x + y;\n\n  normal = normalize(v3);\n\n  return v3;\n}\n\nattribute vec4 vector;\nattribute vec4 position;\nattribute vec4 id;\n\nuniform mat4 model, view, projection;\nuniform float tubeScale;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  vec3 normal;\n  vec3 XYZ = getTubePosition(mat3(model) * (tubeScale * vector.w * normalize(vector.xyz)), position.w, normal);\n  vec4 tubePosition = model * vec4(position.xyz, 1.0) + vec4(XYZ, 0.0);\n\n  gl_Position = projection * view * tubePosition;\n  f_id        = id;\n  f_position  = position.xyz;\n}\n"]),i=e(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3  clipBounds[2];\nuniform float pickId;\n\nvarying vec3 f_position;\nvarying vec4 f_id;\n\nvoid main() {\n  if (outOfRange(clipBounds[0], clipBounds[1], f_position)) discard;\n\n  gl_FragColor = vec4(pickId, f_id.xyz);\n}"]);b.meshShader={vertex:o,fragment:a,attributes:[{name:"position",type:"vec4"},{name:"color",type:"vec4"},{name:"uv",type:"vec2"},{name:"vector",type:"vec4"}]},b.pickShader={vertex:l,fragment:i,attributes:[{name:"position",type:"vec4"},{name:"id",type:"vec4"},{name:"vector",type:"vec4"}]}},{glslify:231}],143:[function(x,T,b){"use strict";var e=x("gl-vec3"),o=x("gl-vec4"),a=["xyz","xzy","yxz","yzx","zxy","zyx"],i=function(h,p){var v,g=h.length;for(v=0;v<g;v++){var f=h[v];if(f===p)return v;if(f>p)return v-1}return v},d=function(h,p,v){return h<p?p:h>v?v:h},u=function(h){var p=1/0;h.sort(function(w,y){return w-y});for(var v=h.length,g=1;g<v;g++){var f=Math.abs(h[g]-h[g-1]);f<p&&(p=f)}return p};T.exports=function(h,p){var v=h.startingPositions,g=h.maxLength||1e3,f=h.tubeSize||1,w=h.absoluteTubeSize,y=h.gridFill||"+x+y+z",M={};-1!==y.indexOf("-x")&&(M.reversedX=!0),-1!==y.indexOf("-y")&&(M.reversedY=!0),-1!==y.indexOf("-z")&&(M.reversedZ=!0),M.filled=a.indexOf(y.replace(/-/g,"").replace(/\+/g,""));var he,be,ge,we,A=h.getVelocity||function(he){return function(be,ge,we){var Ce=ge.vectors,De=ge.meshgrid,Se=be[0],Fe=be[1],ve=be[2],Te=De[0].length,Le=De[1].length,Ee=De[2].length,Pe=i(De[0],Se),je=i(De[1],Fe),Ge=i(De[2],ve),Ke=Pe+1,lt=je+1,Ue=Ge+1;if(Pe=d(Pe,0,Te-1),Ke=d(Ke,0,Te-1),je=d(je,0,Le-1),lt=d(lt,0,Le-1),Ge=d(Ge,0,Ee-1),Ue=d(Ue,0,Ee-1),Pe<0||je<0||Ge<0||Ke>Te-1||lt>Le-1||Ue>Ee-1)return e.create();var $e,et,tt,ct,xt,Ct,Ht=De[0][Pe],ht=De[1][je],Ot=De[2][Ge],tn=(Se-Ht)/(De[0][Ke]-Ht),un=(Fe-ht)/(De[1][lt]-ht),Ze=(ve-Ot)/(De[2][Ue]-Ot);switch(isFinite(tn)||(tn=.5),isFinite(un)||(un=.5),isFinite(Ze)||(Ze=.5),we.reversedX&&(Pe=Te-1-Pe,Ke=Te-1-Ke),we.reversedY&&(je=Le-1-je,lt=Le-1-lt),we.reversedZ&&(Ge=Ee-1-Ge,Ue=Ee-1-Ue),we.filled){case 5:xt=Ge,Ct=Ue,tt=je*Ee,ct=lt*Ee,$e=Pe*Ee*Le,et=Ke*Ee*Le;break;case 4:xt=Ge,Ct=Ue,$e=Pe*Ee,et=Ke*Ee,tt=je*Ee*Te,ct=lt*Ee*Te;break;case 3:tt=je,ct=lt,xt=Ge*Le,Ct=Ue*Le,$e=Pe*Le*Ee,et=Ke*Le*Ee;break;case 2:tt=je,ct=lt,$e=Pe*Le,et=Ke*Le,xt=Ge*Le*Te,Ct=Ue*Le*Te;break;case 1:$e=Pe,et=Ke,xt=Ge*Te,Ct=Ue*Te,tt=je*Te*Ee,ct=lt*Te*Ee;break;default:$e=Pe,et=Ke,tt=je*Te,ct=lt*Te,xt=Ge*Te*Le,Ct=Ue*Te*Le}var Qe=Ce[$e+tt+xt],qe=Ce[$e+tt+Ct],it=Ce[$e+ct+xt],Ie=Ce[$e+ct+Ct],ze=Ce[et+tt+xt],Ve=Ce[et+tt+Ct],Be=Ce[et+ct+xt],at=Ce[et+ct+Ct],gt=e.create(),wt=e.create(),_t=e.create(),Rt=e.create();e.lerp(gt,Qe,ze,tn),e.lerp(wt,qe,Ve,tn),e.lerp(_t,it,Be,tn),e.lerp(Rt,Ie,at,tn);var yt=e.create(),Vt=e.create();e.lerp(yt,gt,_t,un),e.lerp(Vt,wt,Rt,un);var Nt=e.create();return e.lerp(Nt,yt,Vt,Ze),Nt}(he,h,M)},k=h.getDivergence||function(he,be){var ge=e.create(),we=1e-4;e.add(ge,he,[we,0,0]);var Ce=A(ge);e.subtract(Ce,Ce,be),e.scale(Ce,Ce,1/we),e.add(ge,he,[0,we,0]);var De=A(ge);e.subtract(De,De,be),e.scale(De,De,1/we),e.add(ge,he,[0,0,we]);var Se=A(ge);return e.subtract(Se,Se,be),e.scale(Se,Se,1/we),e.add(ge,Ce,De),e.add(ge,ge,Se),ge},C=[],P=p[0][0],D=p[0][1],F=p[0][2],R=p[1][0],L=p[1][1],I=p[1][2],V=10*e.distance(p[0],p[1])/g,Z=V*V,Y=1,ee=0,J=v.length;J>1&&(Y=function(he){for(var be=[],ge=[],we=[],Ce={},De={},Se={},Fe=he.length,ve=0;ve<Fe;ve++){var Te=he[ve],Le=Te[0],Ee=Te[1],Pe=Te[2];Ce[Le]||(be.push(Le),Ce[Le]=!0),De[Ee]||(ge.push(Ee),De[Ee]=!0),Se[Pe]||(we.push(Pe),Se[Pe]=!0)}var je=u(be),Ge=u(ge),Ke=u(we),lt=Math.min(je,Ge,Ke);return isFinite(lt)?lt:1}(v));for(var $=0;$<J;$++){var Q=e.create();e.copy(Q,v[$]);var se=[Q],j=[],G=A(Q),W=Q;j.push(G);var ie=[],q=k(Q,G),te=e.length(q);isFinite(te)&&te>ee&&(ee=te),ie.push(te),C.push({points:se,velocities:j,divergences:ie});for(var ne=0;ne<100*g&&se.length<g&&(be=void 0,ge=void 0,we=void 0,ge=(he=Q)[1],we=he[2],!((be=he[0])<P||be>R||ge<D||ge>L||we<F||we>I));){ne++;var le=e.clone(G),ue=e.squaredLength(le);if(0===ue)break;ue>Z&&e.scale(le,le,V/Math.sqrt(ue)),e.add(le,le,Q),G=A(le),e.squaredDistance(W,le)-Z>-1e-4*Z&&(se.push(le),W=le,j.push(G),q=k(le,G),te=e.length(q),isFinite(te)&&te>ee&&(ee=te),ie.push(te)),Q=le}}var de=function(h,p,v,g){for(var f=0,w=0;w<h.length;w++)for(var y=h[w].velocities,M=0;M<y.length;M++)f=Math.max(f,e.length(y[M]));var A=h.map(function(V){return function(Z,Y,ee,J){for(var $=Z.points,Q=Z.velocities,se=Z.divergences,j=[],G=[],W=[],ie=[],q=[],te=[],ne=0,le=0,ue=o.create(),de=o.create(),he=0;he<$.length;he++){var be=$[he],ge=Q[he],we=se[he];0===Y&&(we=.05*ee),le=e.length(ge)/J,ue=o.create(),e.copy(ue,ge),ue[3]=we;for(var Ce=0;Ce<8;Ce++)q[Ce]=[be[0],be[1],be[2],Ce];if(ie.length>0)for(Ce=0;Ce<8;Ce++){var De=(Ce+1)%8;j.push(ie[Ce],q[Ce],q[De],q[De],ie[De],ie[Ce]),W.push(de,ue,ue,ue,de,de),te.push(ne,le,le,le,ne,ne);var Se=j.length;G.push([Se-6,Se-5,Se-4],[Se-3,Se-2,Se-1])}var Fe=ie;ie=q,q=Fe;var ve=de;de=ue,ue=ve;var Te=ne;ne=le,le=Te}return{positions:j,cells:G,vectors:W,vertexIntensity:te}}(V,v,g,f)}),k=[],C=[],P=[],D=[];for(w=0;w<A.length;w++){var F=A[w],R=k.length;for(k=k.concat(F.positions),P=P.concat(F.vectors),D=D.concat(F.vertexIntensity),M=0;M<F.cells.length;M++){var L=F.cells[M],I=[];C.push(I);for(var B=0;B<L.length;B++)I.push(L[B]+R)}}return{positions:k,cells:C,vectors:P,vertexIntensity:D,colormap:p}}(C,h.colormap,ee,Y);return w?de.tubeScale=w:(0===ee&&(ee=1),de.tubeScale=.5*f*Y/ee),de};var s=x("./lib/shaders"),c=x("gl-cone3d").createMesh;T.exports.createTubeMesh=function(h,p){return c(h,p,{shaders:s,traceType:"streamtube"})}},{"./lib/shaders":142,"gl-cone3d":79,"gl-vec3":169,"gl-vec4":205}],144:[function(x,T,b){var e=x("gl-shader"),o=x("glslify"),a=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute vec3 f;\nattribute vec3 normal;\n\nuniform vec3 objectOffset;\nuniform mat4 model, view, projection, inverseModel;\nuniform vec3 lightPosition, eyePosition;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 localCoordinate = vec3(uv.zw, f.x);\n  worldCoordinate = objectOffset + localCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n  vec4 clipPosition = projection * view * worldPosition;\n  gl_Position = clipPosition;\n  kill = f.y;\n  value = f.z;\n  planeCoordinate = uv.xy;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Lighting geometry parameters\n  vec4 cameraCoordinate = view * worldPosition;\n  cameraCoordinate.xyz /= cameraCoordinate.w;\n  lightDirection = lightPosition - cameraCoordinate.xyz;\n  eyeDirection   = eyePosition - cameraCoordinate.xyz;\n  surfaceNormal  = normalize((vec4(normal,0) * inverseModel).xyz);\n}\n"]),l=o(["precision highp float;\n#define GLSLIFY 1\n\nfloat beckmannDistribution(float x, float roughness) {\n  float NdotH = max(x, 0.0001);\n  float cos2Alpha = NdotH * NdotH;\n  float tan2Alpha = (cos2Alpha - 1.0) / cos2Alpha;\n  float roughness2 = roughness * roughness;\n  float denom = 3.141592653589793 * roughness2 * cos2Alpha * cos2Alpha;\n  return exp(tan2Alpha / roughness2) / denom;\n}\n\nfloat beckmannSpecular(\n  vec3 lightDirection,\n  vec3 viewDirection,\n  vec3 surfaceNormal,\n  float roughness) {\n  return beckmannDistribution(dot(surfaceNormal, normalize(lightDirection + viewDirection)), roughness);\n}\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec3 lowerBound, upperBound;\nuniform float contourTint;\nuniform vec4 contourColor;\nuniform sampler2D colormap;\nuniform vec3 clipBounds[2];\nuniform float roughness, fresnel, kambient, kdiffuse, kspecular, opacity;\nuniform float vertexColor;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  if (\n    kill > 0.0 ||\n    vColor.a == 0.0 ||\n    outOfRange(clipBounds[0], clipBounds[1], worldCoordinate)\n  ) discard;\n\n  vec3 N = normalize(surfaceNormal);\n  vec3 V = normalize(eyeDirection);\n  vec3 L = normalize(lightDirection);\n\n  if(gl_FrontFacing) {\n    N = -N;\n  }\n\n  float specular = max(beckmannSpecular(L, V, N, roughness), 0.);\n  float diffuse  = min(kambient + kdiffuse * max(dot(N, L), 0.0), 1.0);\n\n  //decide how to interpolate color \u2014 in vertex or in fragment\n  vec4 surfaceColor =\n    step(vertexColor, .5) * texture2D(colormap, vec2(value, value)) +\n    step(.5, vertexColor) * vColor;\n\n  vec4 litColor = surfaceColor.a * vec4(diffuse * surfaceColor.rgb + kspecular * vec3(1,1,1) * specular,  1.0);\n\n  gl_FragColor = mix(litColor, contourColor, contourTint) * opacity;\n}\n"]),i=o(["precision highp float;\n#define GLSLIFY 1\n\nattribute vec4 uv;\nattribute float f;\n\nuniform vec3 objectOffset;\nuniform mat3 permutation;\nuniform mat4 model, view, projection;\nuniform float height, zOffset;\nuniform sampler2D colormap;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 lightDirection, eyeDirection, surfaceNormal;\nvarying vec4 vColor;\n\nvoid main() {\n  vec3 dataCoordinate = permutation * vec3(uv.xy, height);\n  worldCoordinate = objectOffset + dataCoordinate;\n  vec4 worldPosition = model * vec4(worldCoordinate, 1.0);\n\n  vec4 clipPosition = projection * view * worldPosition;\n  clipPosition.z += zOffset;\n\n  gl_Position = clipPosition;\n  value = f + objectOffset.z;\n  kill = -1.0;\n  planeCoordinate = uv.zw;\n\n  vColor = texture2D(colormap, vec2(value, value));\n\n  //Don't do lighting for contours\n  surfaceNormal   = vec3(1,0,0);\n  eyeDirection    = vec3(0,1,0);\n  lightDirection  = vec3(0,0,1);\n}\n"]),d=o(["precision highp float;\n#define GLSLIFY 1\n\nbool outOfRange(float a, float b, float p) {\n  return ((p > max(a, b)) || \n          (p < min(a, b)));\n}\n\nbool outOfRange(vec2 a, vec2 b, vec2 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y));\n}\n\nbool outOfRange(vec3 a, vec3 b, vec3 p) {\n  return (outOfRange(a.x, b.x, p.x) ||\n          outOfRange(a.y, b.y, p.y) ||\n          outOfRange(a.z, b.z, p.z));\n}\n\nbool outOfRange(vec4 a, vec4 b, vec4 p) {\n  return outOfRange(a.xyz, b.xyz, p.xyz);\n}\n\nuniform vec2 shape;\nuniform vec3 clipBounds[2];\nuniform float pickId;\n\nvarying float value, kill;\nvarying vec3 worldCoordinate;\nvarying vec2 planeCoordinate;\nvarying vec3 surfaceNormal;\n\nvec2 splitFloat(float v) {\n  float vh = 255.0 * v;\n  float upper = floor(vh);\n  float lower = fract(vh);\n  return vec2(upper / 255.0, floor(lower * 16.0) / 16.0);\n}\n\nvoid main() {\n  if ((kill > 0.0) ||\n      (outOfRange(clipBounds[0], clipBounds[1], worldCoordinate))) discard;\n\n  vec2 ux = splitFloat(planeCoordinate.x / shape.x);\n  vec2 uy = splitFloat(planeCoordinate.y / shape.y);\n  gl_FragColor = vec4(pickId, ux.x, uy.x, ux.y + (uy.y/16.0));\n}\n"]);b.createShader=function(u){var s=e(u,a,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s.attributes.normal.location=2,s},b.createPickShader=function(u){var s=e(u,a,d,null,[{name:"uv",type:"vec4"},{name:"f",type:"vec3"},{name:"normal",type:"vec3"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s.attributes.normal.location=2,s},b.createContourShader=function(u){var s=e(u,i,l,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s},b.createPickContourShader=function(u){var s=e(u,i,d,null,[{name:"uv",type:"vec4"},{name:"f",type:"float"}]);return s.attributes.uv.location=0,s.attributes.f.location=1,s}},{"gl-shader":132,glslify:231}],145:[function(x,T,b){"use strict";T.exports=function(G){var W=G.gl,ie=y(W),q=A(W),te=M(W),ne=k(W),le=o(W),ue=a(W,[{buffer:le,size:4,stride:40,offset:0},{buffer:le,size:3,stride:40,offset:16},{buffer:le,size:3,stride:40,offset:28}]),de=o(W),he=a(W,[{buffer:de,size:4,stride:20,offset:0},{buffer:de,size:1,stride:20,offset:16}]),be=o(W),ge=a(W,[{buffer:be,size:2,type:W.FLOAT}]),we=l(W,1,256,W.RGBA,W.UNSIGNED_BYTE);we.minFilter=W.LINEAR,we.magFilter=W.LINEAR;var Ce=new R(W,[0,0],[[0,0,0],[0,0,0]],ie,q,le,ue,we,te,ne,de,he,be,ge,[0,0,0]),De={levels:[[],[],[]]};for(var Se in G)De[Se]=G[Se];return De.colormap=De.colormap||"jet",Ce.update(De),Ce};var e=x("bit-twiddle"),o=x("gl-buffer"),a=x("gl-vao"),l=x("gl-texture2d"),i=x("typedarray-pool"),d=x("colormap"),u=x("ndarray-ops"),s=x("ndarray-pack"),c=x("ndarray"),h=x("surface-nets"),p=x("gl-mat4/multiply"),v=x("gl-mat4/invert"),g=x("binary-search-bounds"),f=x("ndarray-gradient"),w=x("./lib/shaders"),y=w.createShader,M=w.createContourShader,A=w.createPickShader,k=w.createPickContourShader,C=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],P=[[0,0],[0,1],[1,0],[1,1],[1,0],[0,1]],D=[[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0]];function F(G,W,ie,q,te){this.position=G,this.index=W,this.uv=ie,this.level=q,this.dataCoordinate=te}function R(G,W,ie,q,te,ne,le,ue,de,he,be,ge,we,Ce,De){this.gl=G,this.shape=W,this.bounds=ie,this.objectOffset=De,this.intensityBounds=[],this._shader=q,this._pickShader=te,this._coordinateBuffer=ne,this._vao=le,this._colorMap=ue,this._contourShader=de,this._contourPickShader=he,this._contourBuffer=be,this._contourVAO=ge,this._contourOffsets=[[],[],[]],this._contourCounts=[[],[],[]],this._vertexCount=0,this._pickResult=new F([0,0,0],[0,0],[0,0],[0,0,0],[0,0,0]),this._dynamicBuffer=we,this._dynamicVAO=Ce,this._dynamicOffsets=[0,0,0],this._dynamicCounts=[0,0,0],this.contourWidth=[1,1,1],this.contourLevels=[[1],[1],[1]],this.contourTint=[0,0,0],this.contourColor=[[.5,.5,.5,1],[.5,.5,.5,1],[.5,.5,.5,1]],this.showContour=!0,this.showSurface=!0,this.enableHighlight=[!0,!0,!0],this.highlightColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.highlightTint=[1,1,1],this.highlightLevel=[-1,-1,-1],this.enableDynamic=[!0,!0,!0],this.dynamicLevel=[NaN,NaN,NaN],this.dynamicColor=[[0,0,0,1],[0,0,0,1],[0,0,0,1]],this.dynamicTint=[1,1,1],this.dynamicWidth=[1,1,1],this.axesBounds=[[1/0,1/0,1/0],[-1/0,-1/0,-1/0]],this.surfaceProject=[!1,!1,!1],this.contourProject=[[!1,!1,!1],[!1,!1,!1],[!1,!1,!1]],this.colorBounds=[!1,!1],this._field=[c(i.mallocFloat(1024),[0,0]),c(i.mallocFloat(1024),[0,0]),c(i.mallocFloat(1024),[0,0])],this.pickId=1,this.clipBounds=[[-1/0,-1/0,-1/0],[1/0,1/0,1/0]],this.snapToData=!1,this.pixelRatio=1,this.opacity=1,this.lightPosition=[10,1e4,0],this.ambientLight=.8,this.diffuseLight=.8,this.specularLight=2,this.roughness=.5,this.fresnel=1.5,this.vertexColor=0,this.dirty=!0}!function(){for(var G=0;G<3;++G){var W=D[G],ie=(G+2)%3;W[(G+1)%3+0]=1,W[ie+3]=1,W[G+6]=1}}();var L=R.prototype;L.genColormap=function(G,W){var ie=!1,q=s([d({colormap:G,nshades:256,format:"rgba"}).map(function(te,ne){var le=W?function(ue,de){if(!de||!de.length)return 1;for(var he=0;he<de.length;++he){if(de.length<2)return 1;if(de[he][0]===ue)return de[he][1];if(de[he][0]>ue&&he>0){var be=(de[he][0]-ue)/(de[he][0]-de[he-1][0]);return de[he][1]*(1-be)+be*de[he-1][1]}}return 1}(ne/255,W):te[3];return le<1&&(ie=!0),[te[0],te[1],te[2],255*le]})]);return u.divseq(q,255),this.hasAlphaScale=ie,q},L.isTransparent=function(){return this.opacity<1||this.hasAlphaScale},L.isOpaque=function(){return!this.isTransparent()},L.pickSlots=1,L.setPickBase=function(G){this.pickId=G};var I=[0,0,0],B={showSurface:!1,showContour:!1,projections:[C.slice(),C.slice(),C.slice()],clipBounds:[[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]],[[0,0,0],[0,0,0]]]};function V(G,W){var ie,q,te,ne=W.axes&&W.axes.lastCubeProps.axis||I,le=W.showSurface,ue=W.showContour;for(ie=0;ie<3;++ie)for(le=le||W.surfaceProject[ie],q=0;q<3;++q)ue=ue||W.contourProject[ie][q];for(ie=0;ie<3;++ie){var de=B.projections[ie];for(q=0;q<16;++q)de[q]=0;for(q=0;q<4;++q)de[5*q]=1;de[5*ie]=0,de[12+ie]=W.axesBounds[+(ne[ie]>0)][ie],p(de,G.model,de);var he=B.clipBounds[ie];for(te=0;te<2;++te)for(q=0;q<3;++q)he[te][q]=G.clipBounds[te][q];he[0][ie]=-1e8,he[1][ie]=1e8}return B.showSurface=le,B.showContour=ue,B}var Z={model:C,view:C,projection:C,inverseModel:C.slice(),lowerBound:[0,0,0],upperBound:[0,0,0],colorMap:0,clipBounds:[[0,0,0],[0,0,0]],height:0,contourTint:0,contourColor:[0,0,0,1],permutation:[1,0,0,0,1,0,0,0,1],zOffset:-1e-4,objectOffset:[0,0,0],kambient:1,kdiffuse:1,kspecular:1,lightPosition:[1e3,1e3,1e3],eyePosition:[0,0,0],roughness:1,fresnel:1,opacity:1,vertexColor:0},Y=C.slice(),ee=[1,0,0,0,1,0,0,0,1];function J(G,W){G=G||{};var ie=this.gl;ie.disable(ie.CULL_FACE),this._colorMap.bind(0);var q=Z;q.model=G.model||C,q.view=G.view||C,q.projection=G.projection||C,q.lowerBound=[this.bounds[0][0],this.bounds[0][1],this.colorBounds[0]||this.bounds[0][2]],q.upperBound=[this.bounds[1][0],this.bounds[1][1],this.colorBounds[1]||this.bounds[1][2]],q.objectOffset=this.objectOffset,q.contourColor=this.contourColor[0],q.inverseModel=v(q.inverseModel,q.model);for(var te=0;te<2;++te)for(var ne=q.clipBounds[te],le=0;le<3;++le)ne[le]=Math.min(Math.max(this.clipBounds[te][le],-1e8),1e8);q.kambient=this.ambientLight,q.kdiffuse=this.diffuseLight,q.kspecular=this.specularLight,q.roughness=this.roughness,q.fresnel=this.fresnel,q.opacity=this.opacity,q.height=0,q.permutation=ee,q.vertexColor=this.vertexColor;var ue=Y;for(p(ue,q.view,q.model),p(ue,q.projection,ue),v(ue,ue),te=0;te<3;++te)q.eyePosition[te]=ue[12+te]/ue[15];var de=ue[15];for(te=0;te<3;++te)de+=this.lightPosition[te]*ue[4*te+3];for(te=0;te<3;++te){var he=ue[12+te];for(le=0;le<3;++le)he+=ue[4*le+te]*this.lightPosition[le];q.lightPosition[te]=he/de}var be=V(q,this);if(be.showSurface){for(this._shader.bind(),this._shader.uniforms=q,this._vao.bind(),this.showSurface&&this._vertexCount&&this._vao.draw(ie.TRIANGLES,this._vertexCount),te=0;te<3;++te)this.surfaceProject[te]&&this.vertexCount&&(this._shader.uniforms.model=be.projections[te],this._shader.uniforms.clipBounds=be.clipBounds[te],this._vao.draw(ie.TRIANGLES,this._vertexCount));this._vao.unbind()}if(be.showContour){var ge=this._contourShader;q.kambient=1,q.kdiffuse=0,q.kspecular=0,q.opacity=1,ge.bind(),ge.uniforms=q;var we=this._contourVAO;for(we.bind(),te=0;te<3;++te)for(ge.uniforms.permutation=D[te],ie.lineWidth(this.contourWidth[te]*this.pixelRatio),le=0;le<this.contourLevels[te].length;++le)le===this.highlightLevel[te]?(ge.uniforms.contourColor=this.highlightColor[te],ge.uniforms.contourTint=this.highlightTint[te]):0!==le&&le-1!==this.highlightLevel[te]||(ge.uniforms.contourColor=this.contourColor[te],ge.uniforms.contourTint=this.contourTint[te]),this._contourCounts[te][le]&&(ge.uniforms.height=this.contourLevels[te][le],we.draw(ie.LINES,this._contourCounts[te][le],this._contourOffsets[te][le]));for(te=0;te<3;++te)for(ge.uniforms.model=be.projections[te],ge.uniforms.clipBounds=be.clipBounds[te],le=0;le<3;++le)if(this.contourProject[te][le]){ge.uniforms.permutation=D[le],ie.lineWidth(this.contourWidth[le]*this.pixelRatio);for(var Ce=0;Ce<this.contourLevels[le].length;++Ce)Ce===this.highlightLevel[le]?(ge.uniforms.contourColor=this.highlightColor[le],ge.uniforms.contourTint=this.highlightTint[le]):0!==Ce&&Ce-1!==this.highlightLevel[le]||(ge.uniforms.contourColor=this.contourColor[le],ge.uniforms.contourTint=this.contourTint[le]),this._contourCounts[le][Ce]&&(ge.uniforms.height=this.contourLevels[le][Ce],we.draw(ie.LINES,this._contourCounts[le][Ce],this._contourOffsets[le][Ce]))}for(we.unbind(),(we=this._dynamicVAO).bind(),te=0;te<3;++te)if(0!==this._dynamicCounts[te])for(ge.uniforms.model=q.model,ge.uniforms.clipBounds=q.clipBounds,ge.uniforms.permutation=D[te],ie.lineWidth(this.dynamicWidth[te]*this.pixelRatio),ge.uniforms.contourColor=this.dynamicColor[te],ge.uniforms.contourTint=this.dynamicTint[te],ge.uniforms.height=this.dynamicLevel[te],we.draw(ie.LINES,this._dynamicCounts[te],this._dynamicOffsets[te]),le=0;le<3;++le)this.contourProject[le][te]&&(ge.uniforms.model=be.projections[le],ge.uniforms.clipBounds=be.clipBounds[le],we.draw(ie.LINES,this._dynamicCounts[te],this._dynamicOffsets[te]));we.unbind()}}L.draw=function(G){return J.call(this,G,!1)},L.drawTransparent=function(G){return J.call(this,G,!0)};var $={model:C,view:C,projection:C,inverseModel:C,clipBounds:[[0,0,0],[0,0,0]],height:0,shape:[0,0],pickId:0,lowerBound:[0,0,0],upperBound:[0,0,0],zOffset:0,objectOffset:[0,0,0],permutation:[1,0,0,0,1,0,0,0,1],lightPosition:[0,0,0],eyePosition:[0,0,0]};function Q(G,W){return Array.isArray(G)?[W(G[0]),W(G[1]),W(G[2])]:[W(G),W(G),W(G)]}function se(G){return Array.isArray(G)?3===G.length?[G[0],G[1],G[2],1]:[G[0],G[1],G[2],G[3]]:[0,0,0,1]}function j(G){if(Array.isArray(G)){if(Array.isArray(G))return[se(G[0]),se(G[1]),se(G[2])];var W=se(G);return[W.slice(),W.slice(),W.slice()]}}L.drawPick=function(G){G=G||{};var W=this.gl;W.disable(W.CULL_FACE);var ie=$;ie.model=G.model||C,ie.view=G.view||C,ie.projection=G.projection||C,ie.shape=this._field[2].shape,ie.pickId=this.pickId/255,ie.lowerBound=this.bounds[0],ie.upperBound=this.bounds[1],ie.objectOffset=this.objectOffset,ie.permutation=ee;for(var q=0;q<2;++q)for(var te=ie.clipBounds[q],ne=0;ne<3;++ne)te[ne]=Math.min(Math.max(this.clipBounds[q][ne],-1e8),1e8);var le=V(ie,this);if(le.showSurface){for(this._pickShader.bind(),this._pickShader.uniforms=ie,this._vao.bind(),this._vao.draw(W.TRIANGLES,this._vertexCount),q=0;q<3;++q)this.surfaceProject[q]&&(this._pickShader.uniforms.model=le.projections[q],this._pickShader.uniforms.clipBounds=le.clipBounds[q],this._vao.draw(W.TRIANGLES,this._vertexCount));this._vao.unbind()}if(le.showContour){var ue=this._contourPickShader;ue.bind(),ue.uniforms=ie;var de=this._contourVAO;for(de.bind(),ne=0;ne<3;++ne)for(W.lineWidth(this.contourWidth[ne]*this.pixelRatio),ue.uniforms.permutation=D[ne],q=0;q<this.contourLevels[ne].length;++q)this._contourCounts[ne][q]&&(ue.uniforms.height=this.contourLevels[ne][q],de.draw(W.LINES,this._contourCounts[ne][q],this._contourOffsets[ne][q]));for(q=0;q<3;++q)for(ue.uniforms.model=le.projections[q],ue.uniforms.clipBounds=le.clipBounds[q],ne=0;ne<3;++ne)if(this.contourProject[q][ne]){ue.uniforms.permutation=D[ne],W.lineWidth(this.contourWidth[ne]*this.pixelRatio);for(var he=0;he<this.contourLevels[ne].length;++he)this._contourCounts[ne][he]&&(ue.uniforms.height=this.contourLevels[ne][he],de.draw(W.LINES,this._contourCounts[ne][he],this._contourOffsets[ne][he]))}de.unbind()}},L.pick=function(G){if(!G||G.id!==this.pickId)return null;var W=this._field[2].shape,ie=this._pickResult,q=W[0]*(G.value[0]+(G.value[2]>>4)/16)/255,te=Math.floor(q),ne=q-te,le=W[1]*(G.value[1]+(15&G.value[2])/16)/255,ue=Math.floor(le),de=le-ue;te+=1,ue+=1;var he=ie.position;he[0]=he[1]=he[2]=0;for(var be=0;be<2;++be)for(var ge=be?ne:1-ne,we=0;we<2;++we)for(var Ce=te+be,De=ue+we,Se=ge*(we?de:1-de),Fe=0;Fe<3;++Fe)he[Fe]+=this._field[Fe].get(Ce,De)*Se;for(var ve=this._pickResult.level,Te=0;Te<3;++Te)if(ve[Te]=g.le(this.contourLevels[Te],he[Te]),ve[Te]<0)this.contourLevels[Te].length>0&&(ve[Te]=0);else if(ve[Te]<this.contourLevels[Te].length-1){var Ee=this.contourLevels[Te][ve[Te]+1];Math.abs(this.contourLevels[Te][ve[Te]]-he[Te])>Math.abs(Ee-he[Te])&&(ve[Te]+=1)}for(ie.index[0]=ne<.5?te:te+1,ie.index[1]=de<.5?ue:ue+1,ie.uv[0]=q/W[0],ie.uv[1]=le/W[1],Fe=0;Fe<3;++Fe)ie.dataCoordinate[Fe]=this._field[Fe].get(ie.index[0],ie.index[1]);return ie},L.padField=function(G,W){var ie=W.shape.slice(),q=G.shape.slice();u.assign(G.lo(1,1).hi(ie[0],ie[1]),W),u.assign(G.lo(1).hi(ie[0],1),W.hi(ie[0],1)),u.assign(G.lo(1,q[1]-1).hi(ie[0],1),W.lo(0,ie[1]-1).hi(ie[0],1)),u.assign(G.lo(0,1).hi(1,ie[1]),W.hi(1)),u.assign(G.lo(q[0]-1,1).hi(1,ie[1]),W.lo(ie[0]-1)),G.set(0,0,W.get(0,0)),G.set(0,q[1]-1,W.get(0,ie[1]-1)),G.set(q[0]-1,0,W.get(ie[0]-1,0)),G.set(q[0]-1,q[1]-1,W.get(ie[0]-1,ie[1]-1))},L.update=function(G){this.objectOffset=(G=G||{}).objectOffset||this.objectOffset,this.dirty=!0,"contourWidth"in G&&(this.contourWidth=Q(G.contourWidth,Number)),"showContour"in G&&(this.showContour=Q(G.showContour,Boolean)),"showSurface"in G&&(this.showSurface=!!G.showSurface),"contourTint"in G&&(this.contourTint=Q(G.contourTint,Boolean)),"contourColor"in G&&(this.contourColor=j(G.contourColor)),"contourProject"in G&&(this.contourProject=Q(G.contourProject,function(en){return Q(en,Boolean)})),"surfaceProject"in G&&(this.surfaceProject=G.surfaceProject),"dynamicColor"in G&&(this.dynamicColor=j(G.dynamicColor)),"dynamicTint"in G&&(this.dynamicTint=Q(G.dynamicTint,Number)),"dynamicWidth"in G&&(this.dynamicWidth=Q(G.dynamicWidth,Number)),"opacity"in G&&(this.opacity=G.opacity),"opacityscale"in G&&(this.opacityscale=G.opacityscale),"colorBounds"in G&&(this.colorBounds=G.colorBounds),"vertexColor"in G&&(this.vertexColor=G.vertexColor?1:0),"colormap"in G&&this._colorMap.setPixels(this.genColormap(G.colormap,this.opacityscale));var W=G.field||G.coords&&G.coords[2]||null,ie=!1;if(W||(W=this._field[2].shape[0]||this._field[2].shape[2]?this._field[2].lo(1,1).hi(this._field[2].shape[0]-2,this._field[2].shape[1]-2):this._field[2].hi(0,0)),"field"in G||"coords"in G){var q=(W.shape[0]+2)*(W.shape[1]+2);q>this._field[2].data.length&&(i.freeFloat(this._field[2].data),this._field[2].data=i.mallocFloat(e.nextPow2(q))),this._field[2]=c(this._field[2].data,[W.shape[0]+2,W.shape[1]+2]),this.padField(this._field[2],W),this.shape=W.shape.slice();for(var te=this.shape,ne=0;ne<2;++ne)this._field[2].size>this._field[ne].data.length&&(i.freeFloat(this._field[ne].data),this._field[ne].data=i.mallocFloat(this._field[2].size)),this._field[ne]=c(this._field[ne].data,[te[0]+2,te[1]+2]);if(G.coords){var le=G.coords;if(!Array.isArray(le)||3!==le.length)throw new Error("gl-surface: invalid coordinates for x/y");for(ne=0;ne<2;++ne){var ue=le[ne];for(we=0;we<2;++we)if(ue.shape[we]!==te[we])throw new Error("gl-surface: coords have incorrect shape");this.padField(this._field[ne],ue)}}else if(G.ticks){var de=G.ticks;if(!Array.isArray(de)||2!==de.length)throw new Error("gl-surface: invalid ticks");for(ne=0;ne<2;++ne){var he=de[ne];if((Array.isArray(he)||he.length)&&(he=c(he)),he.shape[0]!==te[ne])throw new Error("gl-surface: invalid tick length");var be=c(he.data,te);be.stride[ne]=he.stride[0],be.stride[1^ne]=0,this.padField(this._field[ne],be)}}else{for(ne=0;ne<2;++ne){var ge=[0,0];ge[ne]=1,this._field[ne]=c(this._field[ne].data,[te[0]+2,te[1]+2],ge,0)}this._field[0].set(0,0,0);for(var we=0;we<te[0];++we)this._field[0].set(we+1,0,we);for(this._field[0].set(te[0]+1,0,te[0]-1),this._field[1].set(0,0,0),we=0;we<te[1];++we)this._field[1].set(0,we+1,we);this._field[1].set(0,te[1]+1,te[1]-1)}var Ce=this._field,De=c(i.mallocFloat(3*Ce[2].size*2),[3,te[0]+2,te[1]+2,2]);for(ne=0;ne<3;++ne)f(De.pick(ne),Ce[ne],"mirror");var Se=c(i.mallocFloat(3*Ce[2].size),[te[0]+2,te[1]+2,3]);for(ne=0;ne<te[0]+2;++ne)for(we=0;we<te[1]+2;++we){var Fe=De.get(0,ne,we,0),ve=De.get(0,ne,we,1),Te=De.get(1,ne,we,0),Le=De.get(1,ne,we,1),Ee=De.get(2,ne,we,0),Pe=De.get(2,ne,we,1),je=Te*Pe-Le*Ee,Ge=Ee*ve-Pe*Fe,Ke=Fe*Le-ve*Te,lt=Math.sqrt(je*je+Ge*Ge+Ke*Ke);lt<1e-8?(lt=Math.max(Math.abs(je),Math.abs(Ge),Math.abs(Ke)))<1e-8?(Ke=1,Ge=je=0,lt=1):lt=1/lt:lt=1/Math.sqrt(lt),Se.set(ne,we,0,je*lt),Se.set(ne,we,1,Ge*lt),Se.set(ne,we,2,Ke*lt)}i.free(De.data);var Ue=[1/0,1/0,1/0],$e=[-1/0,-1/0,-1/0],et=1/0,tt=-1/0,xt=i.mallocFloat(e.nextPow2((te[0]-1)*(te[1]-1)*6*10)),Ct=0,Ht=0;for(ne=0;ne<te[0]-1;++ne)e:for(we=0;we<te[1]-1;++we){for(var zt=0;zt<2;++zt)for(var ht=0;ht<2;++ht)for(var ut=0;ut<3;++ut){var Ot=this._field[ut].get(1+ne+zt,1+we+ht);if(isNaN(Ot)||!isFinite(Ot))continue e}for(ut=0;ut<6;++ut){var tn=ne+P[ut][0],un=we+P[ut][1],Ze=this._field[0].get(tn+1,un+1),Qe=this._field[1].get(tn+1,un+1);Ot=this._field[2].get(tn+1,un+1),je=Se.get(tn+1,un+1,0),Ge=Se.get(tn+1,un+1,1),Ke=Se.get(tn+1,un+1,2),G.intensity&&(qe=G.intensity.get(tn,un));var qe=G.intensity?G.intensity.get(tn,un):Ot+this.objectOffset[2];xt[Ct++]=tn,xt[Ct++]=un,xt[Ct++]=Ze,xt[Ct++]=Qe,xt[Ct++]=Ot,xt[Ct++]=0,xt[Ct++]=qe,xt[Ct++]=je,xt[Ct++]=Ge,xt[Ct++]=Ke,Ue[0]=Math.min(Ue[0],Ze+this.objectOffset[0]),Ue[1]=Math.min(Ue[1],Qe+this.objectOffset[1]),Ue[2]=Math.min(Ue[2],Ot+this.objectOffset[2]),et=Math.min(et,qe),$e[0]=Math.max($e[0],Ze+this.objectOffset[0]),$e[1]=Math.max($e[1],Qe+this.objectOffset[1]),$e[2]=Math.max($e[2],Ot+this.objectOffset[2]),tt=Math.max(tt,qe),Ht+=1}}for(G.intensityBounds&&(et=+G.intensityBounds[0],tt=+G.intensityBounds[1]),ne=6;ne<Ct;ne+=10)xt[ne]=(xt[ne]-et)/(tt-et);this._vertexCount=Ht,this._coordinateBuffer.update(xt.subarray(0,Ct)),i.freeFloat(xt),i.free(Se.data),this.bounds=[Ue,$e],this.intensity=G.intensity||this._field[2],this.intensityBounds[0]===et&&this.intensityBounds[1]===tt||(ie=!0),this.intensityBounds=[et,tt]}if("levels"in G){var it=G.levels;for(it=Array.isArray(it[0])?it.slice():[[],[],it],ne=0;ne<3;++ne)it[ne]=it[ne].slice(),it[ne].sort(function(en,on){return en-on});for(ne=0;ne<3;++ne)for(we=0;we<it[ne].length;++we)it[ne][we]-=this.objectOffset[ne];e:for(ne=0;ne<3;++ne){if(it[ne].length!==this.contourLevels[ne].length){ie=!0;break}for(we=0;we<it[ne].length;++we)if(it[ne][we]!==this.contourLevels[ne][we]){ie=!0;break e}}this.contourLevels=it}if(ie){Ce=this._field,te=this.shape;for(var Ie=[],ze=0;ze<3;++ze){var Ve=this.contourLevels[ze],Be=[],at=[],gt=[0,0,0];for(ne=0;ne<Ve.length;++ne){var wt=h(this._field[ze],Ve[ne]);Be.push(Ie.length/5|0),Ht=0;e:for(we=0;we<wt.cells.length;++we){var _t=wt.cells[we];for(ut=0;ut<2;++ut){var Rt=wt.positions[_t[ut]],yt=Rt[0],Vt=0|Math.floor(yt),Nt=yt-Vt,rt=Rt[1],Tt=0|Math.floor(rt),Ut=rt-Tt,Wt=!1;t:for(var sn=0;sn<3;++sn){gt[sn]=0;var He=(ze+sn+1)%3;for(zt=0;zt<2;++zt){var vt=zt?Nt:1-Nt;for(tn=0|Math.min(Math.max(Vt+zt,0),te[0]),ht=0;ht<2;++ht){var Lt=ht?Ut:1-Ut;if(un=0|Math.min(Math.max(Tt+ht,0),te[1]),Ot=sn<2?this._field[He].get(tn,un):(this.intensity.get(tn,un)-this.intensityBounds[0])/(this.intensityBounds[1]-this.intensityBounds[0]),!isFinite(Ot)||isNaN(Ot)){Wt=!0;break t}gt[sn]+=vt*Lt*Ot}}}if(Wt){if(ut>0){for(var Kt=0;Kt<5;++Kt)Ie.pop();Ht-=1}continue e}Ie.push(gt[0],gt[1],Rt[0],Rt[1],gt[2]),Ht+=1}}at.push(Ht)}this._contourOffsets[ze]=Be,this._contourCounts[ze]=at}var _n=i.mallocFloat(Ie.length);for(ne=0;ne<Ie.length;++ne)_n[ne]=Ie[ne];this._contourBuffer.update(_n),i.freeFloat(_n)}},L.dispose=function(){this._shader.dispose(),this._vao.dispose(),this._coordinateBuffer.dispose(),this._colorMap.dispose(),this._contourBuffer.dispose(),this._contourVAO.dispose(),this._contourShader.dispose(),this._contourPickShader.dispose(),this._dynamicBuffer.dispose(),this._dynamicVAO.dispose();for(var G=0;G<3;++G)i.freeFloat(this._field[G].data)},L.highlight=function(G){var W,ie;if(!G)return this._dynamicCounts=[0,0,0],this.dyanamicLevel=[NaN,NaN,NaN],void(this.highlightLevel=[-1,-1,-1]);for(W=0;W<3;++W)this.highlightLevel[W]=this.enableHighlight[W]?G.level[W]:-1;for(ie=this.snapToData?G.dataCoordinate:G.position,W=0;W<3;++W)ie[W]-=this.objectOffset[W];if(this.enableDynamic[0]&&ie[0]!==this.dynamicLevel[0]||this.enableDynamic[1]&&ie[1]!==this.dynamicLevel[1]||this.enableDynamic[2]&&ie[2]!==this.dynamicLevel[2]){for(var q=0,te=this.shape,ne=i.mallocFloat(12*te[0]*te[1]),le=0;le<3;++le)if(this.enableDynamic[le]){this.dynamicLevel[le]=ie[le];var be=this._field[(le+1)%3],ge=this._field[(le+2)%3],we=h(this._field[le],ie[le]),Ce=we.cells,De=we.positions;for(this._dynamicOffsets[le]=q,W=0;W<Ce.length;++W)for(var Se=Ce[W],Fe=0;Fe<2;++Fe){var ve=De[Se[Fe]],Te=+ve[0],Le=0|Te,Ee=0|Math.min(Le+1,te[0]),Pe=Te-Le,je=1-Pe,Ge=+ve[1],Ke=0|Ge,lt=0|Math.min(Ke+1,te[1]),Ue=Ge-Ke,$e=1-Ue,et=je*$e,tt=je*Ue,ct=Pe*$e,xt=Pe*Ue,Ct=et*be.get(Le,Ke)+tt*be.get(Le,lt)+ct*be.get(Ee,Ke)+xt*be.get(Ee,lt),Ht=et*ge.get(Le,Ke)+tt*ge.get(Le,lt)+ct*ge.get(Ee,Ke)+xt*ge.get(Ee,lt);if(isNaN(Ct)||isNaN(Ht)){Fe&&(q-=1);break}ne[2*q+0]=Ct,ne[2*q+1]=Ht,q+=1}this._dynamicCounts[le]=q-this._dynamicOffsets[le]}else this.dynamicLevel[le]=NaN,this._dynamicCounts[le]=0;this._dynamicBuffer.update(ne.subarray(0,2*q)),i.freeFloat(ne)}}},{"./lib/shaders":144,"binary-search-bounds":31,"bit-twiddle":32,colormap:53,"gl-buffer":78,"gl-mat4/invert":98,"gl-mat4/multiply":100,"gl-texture2d":146,"gl-vao":150,ndarray:259,"ndarray-gradient":252,"ndarray-ops":254,"ndarray-pack":255,"surface-nets":302,"typedarray-pool":308}],146:[function(x,T,b){"use strict";var e=x("ndarray"),o=x("ndarray-ops"),a=x("typedarray-pool");T.exports=function(A){if(arguments.length<=1)throw new Error("gl-texture2d: Missing arguments for texture2d constructor");if(l||u(A),"number"==typeof arguments[1])return w(A,arguments[1],arguments[2],arguments[3]||A.RGBA,arguments[4]||A.UNSIGNED_BYTE);if(Array.isArray(arguments[1]))return w(A,0|arguments[1][0],0|arguments[1][1],arguments[2]||A.RGBA,arguments[3]||A.UNSIGNED_BYTE);if("object"==typeof arguments[1]){var k=arguments[1],C=s(k)?k:k.raw;if(C)return y(A,C,0|k.width,0|k.height,arguments[2]||A.RGBA,arguments[3]||A.UNSIGNED_BYTE);if(k.shape&&k.data&&k.stride)return M(A,k)}throw new Error("gl-texture2d: Invalid arguments for texture2d constructor")};var l=null,i=null,d=null;function u(A){l=[A.LINEAR,A.NEAREST_MIPMAP_LINEAR,A.LINEAR_MIPMAP_NEAREST,A.LINEAR_MIPMAP_NEAREST],i=[A.NEAREST,A.LINEAR,A.NEAREST_MIPMAP_NEAREST,A.NEAREST_MIPMAP_LINEAR,A.LINEAR_MIPMAP_NEAREST,A.LINEAR_MIPMAP_LINEAR],d=[A.REPEAT,A.CLAMP_TO_EDGE,A.MIRRORED_REPEAT]}function s(A){return"undefined"!=typeof HTMLCanvasElement&&A instanceof HTMLCanvasElement||"undefined"!=typeof HTMLImageElement&&A instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&A instanceof HTMLVideoElement||"undefined"!=typeof ImageData&&A instanceof ImageData}var c=function(A,k){o.muls(A,k,255)};function h(A,k,C){var P=A.gl,D=P.getParameter(P.MAX_TEXTURE_SIZE);if(k<0||k>D||C<0||C>D)throw new Error("gl-texture2d: Invalid texture size");return A._shape=[k,C],A.bind(),P.texImage2D(P.TEXTURE_2D,0,A.format,k,C,0,A.format,A.type,null),A._mipLevels=[0],A}function p(A,k,C,P,D,F){this.gl=A,this.handle=k,this.format=D,this.type=F,this._shape=[C,P],this._mipLevels=[0],this._magFilter=A.NEAREST,this._minFilter=A.NEAREST,this._wrapS=A.CLAMP_TO_EDGE,this._wrapT=A.CLAMP_TO_EDGE,this._anisoSamples=1;var R=this,L=[this._wrapS,this._wrapT];Object.defineProperties(L,[{get:function(){return R._wrapS},set:function(B){return R.wrapS=B}},{get:function(){return R._wrapT},set:function(B){return R.wrapT=B}}]),this._wrapVector=L;var I=[this._shape[0],this._shape[1]];Object.defineProperties(I,[{get:function(){return R._shape[0]},set:function(B){return R.width=B}},{get:function(){return R._shape[1]},set:function(B){return R.height=B}}]),this._shapeVector=I}var v=p.prototype;function g(A,k){return 3===A.length?1===k[2]&&k[1]===A[0]*A[2]&&k[0]===A[2]:1===k[0]&&k[1]===A[0]}function f(A){var k=A.createTexture();return A.bindTexture(A.TEXTURE_2D,k),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MIN_FILTER,A.NEAREST),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_MAG_FILTER,A.NEAREST),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_S,A.CLAMP_TO_EDGE),A.texParameteri(A.TEXTURE_2D,A.TEXTURE_WRAP_T,A.CLAMP_TO_EDGE),k}function w(A,k,C,P,D){var F=A.getParameter(A.MAX_TEXTURE_SIZE);if(k<0||k>F||C<0||C>F)throw new Error("gl-texture2d: Invalid texture shape");if(D===A.FLOAT&&!A.getExtension("OES_texture_float"))throw new Error("gl-texture2d: Floating point textures not supported on this platform");var R=f(A);return A.texImage2D(A.TEXTURE_2D,0,P,k,C,0,P,D,null),new p(A,R,k,C,P,D)}function y(A,k,C,P,D,F){var R=f(A);return A.texImage2D(A.TEXTURE_2D,0,D,D,F,k),new p(A,R,C,P,D,F)}function M(A,k){var C=k.dtype,P=k.shape.slice(),D=A.getParameter(A.MAX_TEXTURE_SIZE);if(P[0]<0||P[0]>D||P[1]<0||P[1]>D)throw new Error("gl-texture2d: Invalid texture size");var F=g(P,k.stride.slice()),R=0;"float32"===C?R=A.FLOAT:"float64"===C?(R=A.FLOAT,F=!1,C="float32"):"uint8"===C?R=A.UNSIGNED_BYTE:(R=A.UNSIGNED_BYTE,F=!1,C="uint8");var L,I,B=0;if(2===P.length)B=A.LUMINANCE,k=e(k.data,P=[P[0],P[1],1],[k.stride[0],k.stride[1],1],k.offset);else{if(3!==P.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===P[2])B=A.ALPHA;else if(2===P[2])B=A.LUMINANCE_ALPHA;else if(3===P[2])B=A.RGB;else{if(4!==P[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");B=A.RGBA}}R!==A.FLOAT||A.getExtension("OES_texture_float")||(R=A.UNSIGNED_BYTE,F=!1);var V=k.size;if(F)L=0===k.offset&&k.data.length===V?k.data:k.data.subarray(k.offset,k.offset+V);else{var Z=[P[2],P[2]*P[0],1];I=a.malloc(V,C);var Y=e(I,P,Z,0);"float32"!==C&&"float64"!==C||R!==A.UNSIGNED_BYTE?o.assign(Y,k):c(Y,k),L=I.subarray(0,V)}var ee=f(A);return A.texImage2D(A.TEXTURE_2D,0,B,P[0],P[1],0,B,R,L),F||a.free(I),new p(A,ee,P[0],P[1],B,R)}Object.defineProperties(v,{minFilter:{get:function(){return this._minFilter},set:function(A){this.bind();var k=this.gl;if(this.type===k.FLOAT&&l.indexOf(A)>=0&&(k.getExtension("OES_texture_float_linear")||(A=k.NEAREST)),i.indexOf(A)<0)throw new Error("gl-texture2d: Unknown filter mode "+A);return k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MIN_FILTER,A),this._minFilter=A}},magFilter:{get:function(){return this._magFilter},set:function(A){this.bind();var k=this.gl;if(this.type===k.FLOAT&&l.indexOf(A)>=0&&(k.getExtension("OES_texture_float_linear")||(A=k.NEAREST)),i.indexOf(A)<0)throw new Error("gl-texture2d: Unknown filter mode "+A);return k.texParameteri(k.TEXTURE_2D,k.TEXTURE_MAG_FILTER,A),this._magFilter=A}},mipSamples:{get:function(){return this._anisoSamples},set:function(A){var k=this._anisoSamples;if(this._anisoSamples=0|Math.max(A,1),k!==this._anisoSamples){var C=this.gl.getExtension("EXT_texture_filter_anisotropic");C&&this.gl.texParameterf(this.gl.TEXTURE_2D,C.TEXTURE_MAX_ANISOTROPY_EXT,this._anisoSamples)}return this._anisoSamples}},wrapS:{get:function(){return this._wrapS},set:function(A){if(this.bind(),d.indexOf(A)<0)throw new Error("gl-texture2d: Unknown wrap mode "+A);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_S,A),this._wrapS=A}},wrapT:{get:function(){return this._wrapT},set:function(A){if(this.bind(),d.indexOf(A)<0)throw new Error("gl-texture2d: Unknown wrap mode "+A);return this.gl.texParameteri(this.gl.TEXTURE_2D,this.gl.TEXTURE_WRAP_T,A),this._wrapT=A}},wrap:{get:function(){return this._wrapVector},set:function(A){if(Array.isArray(A)||(A=[A,A]),2!==A.length)throw new Error("gl-texture2d: Must specify wrap mode for rows and columns");for(var k=0;k<2;++k)if(d.indexOf(A[k])<0)throw new Error("gl-texture2d: Unknown wrap mode "+A);this._wrapS=A[0],this._wrapT=A[1];var C=this.gl;return this.bind(),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,this._wrapS),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,this._wrapT),A}},shape:{get:function(){return this._shapeVector},set:function(A){if(Array.isArray(A)){if(2!==A.length)throw new Error("gl-texture2d: Invalid texture shape")}else A=[0|A,0|A];return h(this,0|A[0],0|A[1]),[0|A[0],0|A[1]]}},width:{get:function(){return this._shape[0]},set:function(A){return h(this,A|=0,this._shape[1]),A}},height:{get:function(){return this._shape[1]},set:function(A){return h(this,this._shape[0],A|=0),A}}}),v.bind=function(A){var k=this.gl;return void 0!==A&&k.activeTexture(k.TEXTURE0+(0|A)),k.bindTexture(k.TEXTURE_2D,this.handle),void 0!==A?0|A:k.getParameter(k.ACTIVE_TEXTURE)-k.TEXTURE0},v.dispose=function(){this.gl.deleteTexture(this.handle)},v.generateMipmap=function(){this.bind(),this.gl.generateMipmap(this.gl.TEXTURE_2D);for(var A=Math.min(this._shape[0],this._shape[1]),k=0;A>0;++k,A>>>=1)this._mipLevels.indexOf(k)<0&&this._mipLevels.push(k)},v.setPixels=function(A,k,C,P){var D=this.gl;this.bind(),Array.isArray(k)?(P=C,C=0|k[1],k=0|k[0]):(k=k||0,C=C||0),P=P||0;var F=s(A)?A:A.raw;if(F)this._mipLevels.indexOf(P)<0?(D.texImage2D(D.TEXTURE_2D,0,this.format,this.format,this.type,F),this._mipLevels.push(P)):D.texSubImage2D(D.TEXTURE_2D,P,k,C,this.format,this.type,F);else{if(!(A.shape&&A.stride&&A.data))throw new Error("gl-texture2d: Unsupported data type");if(A.shape.length<2||k+A.shape[1]>this._shape[1]>>>P||C+A.shape[0]>this._shape[0]>>>P||k<0||C<0)throw new Error("gl-texture2d: Texture dimensions are out of bounds");!function(R,L,I,B,V,Z,Y,ee){var J=ee.dtype,$=ee.shape.slice();if($.length<2||$.length>3)throw new Error("gl-texture2d: Invalid ndarray, must be 2d or 3d");var Q=0,se=0,j=g($,ee.stride.slice());if("float32"===J?Q=R.FLOAT:"float64"===J?(Q=R.FLOAT,j=!1,J="float32"):"uint8"===J?Q=R.UNSIGNED_BYTE:(Q=R.UNSIGNED_BYTE,j=!1,J="uint8"),2===$.length)se=R.LUMINANCE,ee=e(ee.data,$=[$[0],$[1],1],[ee.stride[0],ee.stride[1],1],ee.offset);else{if(3!==$.length)throw new Error("gl-texture2d: Invalid shape for texture");if(1===$[2])se=R.ALPHA;else if(2===$[2])se=R.LUMINANCE_ALPHA;else if(3===$[2])se=R.RGB;else{if(4!==$[2])throw new Error("gl-texture2d: Invalid shape for pixel coords");se=R.RGBA}}if(se!==R.LUMINANCE&&se!==R.ALPHA||V!==R.LUMINANCE&&V!==R.ALPHA||(se=V),se!==V)throw new Error("gl-texture2d: Incompatible texture format for setPixels");var G=ee.size,W=Y.indexOf(B)<0;if(W&&Y.push(B),Q===Z&&j)0===ee.offset&&ee.data.length===G?W?R.texImage2D(R.TEXTURE_2D,B,V,$[0],$[1],0,V,Z,ee.data):R.texSubImage2D(R.TEXTURE_2D,B,L,I,$[0],$[1],V,Z,ee.data):W?R.texImage2D(R.TEXTURE_2D,B,V,$[0],$[1],0,V,Z,ee.data.subarray(ee.offset,ee.offset+G)):R.texSubImage2D(R.TEXTURE_2D,B,L,I,$[0],$[1],V,Z,ee.data.subarray(ee.offset,ee.offset+G));else{var ie;ie=Z===R.FLOAT?a.mallocFloat32(G):a.mallocUint8(G);var q=e(ie,$,[$[2],$[2]*$[0],1]);Q===R.FLOAT&&Z===R.UNSIGNED_BYTE?c(q,ee):o.assign(q,ee),W?R.texImage2D(R.TEXTURE_2D,B,V,$[0],$[1],0,V,Z,ie.subarray(0,G)):R.texSubImage2D(R.TEXTURE_2D,B,L,I,$[0],$[1],V,Z,ie.subarray(0,G)),Z===R.FLOAT?a.freeFloat32(ie):a.freeUint8(ie)}}(D,k,C,P,this.format,this.type,this._mipLevels,A)}}},{ndarray:259,"ndarray-ops":254,"typedarray-pool":308}],147:[function(x,T,b){"use strict";T.exports=function(e,o,a){o?o.bind():e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);var l=0|e.getParameter(e.MAX_VERTEX_ATTRIBS);if(a){if(a.length>l)throw new Error("gl-vao: Too many vertex attributes");for(var i=0;i<a.length;++i){var d=a[i];if(d.buffer){var s=d.size||4,c=d.type||e.FLOAT,h=!!d.normalized,p=d.stride||0,v=d.offset||0;d.buffer.bind(),e.enableVertexAttribArray(i),e.vertexAttribPointer(i,s,c,h,p,v)}else{if("number"==typeof d)e.vertexAttrib1f(i,d);else if(1===d.length)e.vertexAttrib1f(i,d[0]);else if(2===d.length)e.vertexAttrib2f(i,d[0],d[1]);else if(3===d.length)e.vertexAttrib3f(i,d[0],d[1],d[2]);else{if(4!==d.length)throw new Error("gl-vao: Invalid vertex attribute");e.vertexAttrib4f(i,d[0],d[1],d[2],d[3])}e.disableVertexAttribArray(i)}}for(;i<l;++i)e.disableVertexAttribArray(i)}else for(e.bindBuffer(e.ARRAY_BUFFER,null),i=0;i<l;++i)e.disableVertexAttribArray(i)}},{}],148:[function(x,T,b){"use strict";var e=x("./do-bind.js");function o(a){this.gl=a,this._elements=null,this._attributes=null,this._elementsType=a.UNSIGNED_SHORT}o.prototype.bind=function(){e(this.gl,this._elements,this._attributes)},o.prototype.update=function(a,l,i){this._elements=l,this._attributes=a,this._elementsType=i||this.gl.UNSIGNED_SHORT},o.prototype.dispose=function(){},o.prototype.unbind=function(){},o.prototype.draw=function(a,l,i){i=i||0;var d=this.gl;this._elements?d.drawElements(a,l,this._elementsType,i):d.drawArrays(a,i,l)},T.exports=function(a){return new o(a)}},{"./do-bind.js":147}],149:[function(x,T,b){"use strict";var e=x("./do-bind.js");function o(l,i,d,u,s,c){this.location=l,this.dimension=i,this.a=d,this.b=u,this.c=s,this.d=c}function a(l,i,d){this.gl=l,this._ext=i,this.handle=d,this._attribs=[],this._useElements=!1,this._elementsType=l.UNSIGNED_SHORT}o.prototype.bind=function(l){switch(this.dimension){case 1:l.vertexAttrib1f(this.location,this.a);break;case 2:l.vertexAttrib2f(this.location,this.a,this.b);break;case 3:l.vertexAttrib3f(this.location,this.a,this.b,this.c);break;case 4:l.vertexAttrib4f(this.location,this.a,this.b,this.c,this.d)}},a.prototype.bind=function(){this._ext.bindVertexArrayOES(this.handle);for(var l=0;l<this._attribs.length;++l)this._attribs[l].bind(this.gl)},a.prototype.unbind=function(){this._ext.bindVertexArrayOES(null)},a.prototype.dispose=function(){this._ext.deleteVertexArrayOES(this.handle)},a.prototype.update=function(l,i,d){if(this.bind(),e(this.gl,i,l),this.unbind(),this._attribs.length=0,l)for(var u=0;u<l.length;++u){var s=l[u];"number"==typeof s?this._attribs.push(new o(u,1,s)):Array.isArray(s)&&this._attribs.push(new o(u,s.length,s[0],s[1],s[2],s[3]))}this._useElements=!!i,this._elementsType=d||this.gl.UNSIGNED_SHORT},a.prototype.draw=function(l,i,d){d=d||0;var u=this.gl;this._useElements?u.drawElements(l,i,this._elementsType,d):u.drawArrays(l,d,i)},T.exports=function(l,i){return new a(l,i,i.createVertexArrayOES())}},{"./do-bind.js":147}],150:[function(x,T,b){"use strict";var e=x("./lib/vao-native.js"),o=x("./lib/vao-emulated.js");function a(l){this.bindVertexArrayOES=l.bindVertexArray.bind(l),this.createVertexArrayOES=l.createVertexArray.bind(l),this.deleteVertexArrayOES=l.deleteVertexArray.bind(l)}T.exports=function(l,i,d,u){var s,c=l.createVertexArray?new a(l):l.getExtension("OES_vertex_array_object");return(s=c?e(l,c):o(l)).update(i,d,u),s}},{"./lib/vao-emulated.js":148,"./lib/vao-native.js":149}],151:[function(x,T,b){T.exports=function(e,o,a){return e[0]=o[0]+a[0],e[1]=o[1]+a[1],e[2]=o[2]+a[2],e}},{}],152:[function(x,T,b){T.exports=function(l,i){var d=e(l[0],l[1],l[2]),u=e(i[0],i[1],i[2]);o(d,d),o(u,u);var s=a(d,u);return s>1?0:Math.acos(s)};var e=x("./fromValues"),o=x("./normalize"),a=x("./dot")},{"./dot":162,"./fromValues":168,"./normalize":179}],153:[function(x,T,b){T.exports=function(e,o){return e[0]=Math.ceil(o[0]),e[1]=Math.ceil(o[1]),e[2]=Math.ceil(o[2]),e}},{}],154:[function(x,T,b){T.exports=function(e){var o=new Float32Array(3);return o[0]=e[0],o[1]=e[1],o[2]=e[2],o}},{}],155:[function(x,T,b){T.exports=function(e,o){return e[0]=o[0],e[1]=o[1],e[2]=o[2],e}},{}],156:[function(x,T,b){T.exports=function(){var e=new Float32Array(3);return e[0]=0,e[1]=0,e[2]=0,e}},{}],157:[function(x,T,b){T.exports=function(e,o,a){var l=o[0],i=o[1],d=o[2],u=a[0],s=a[1],c=a[2];return e[0]=i*c-d*s,e[1]=d*u-l*c,e[2]=l*s-i*u,e}},{}],158:[function(x,T,b){T.exports=x("./distance")},{"./distance":159}],159:[function(x,T,b){T.exports=function(e,o){var a=o[0]-e[0],l=o[1]-e[1],i=o[2]-e[2];return Math.sqrt(a*a+l*l+i*i)}},{}],160:[function(x,T,b){T.exports=x("./divide")},{"./divide":161}],161:[function(x,T,b){T.exports=function(e,o,a){return e[0]=o[0]/a[0],e[1]=o[1]/a[1],e[2]=o[2]/a[2],e}},{}],162:[function(x,T,b){T.exports=function(e,o){return e[0]*o[0]+e[1]*o[1]+e[2]*o[2]}},{}],163:[function(x,T,b){T.exports=1e-6},{}],164:[function(x,T,b){T.exports=function(o,a){var l=o[0],i=o[1],d=o[2],u=a[0],s=a[1],c=a[2];return Math.abs(l-u)<=e*Math.max(1,Math.abs(l),Math.abs(u))&&Math.abs(i-s)<=e*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(d-c)<=e*Math.max(1,Math.abs(d),Math.abs(c))};var e=x("./epsilon")},{"./epsilon":163}],165:[function(x,T,b){T.exports=function(e,o){return e[0]===o[0]&&e[1]===o[1]&&e[2]===o[2]}},{}],166:[function(x,T,b){T.exports=function(e,o){return e[0]=Math.floor(o[0]),e[1]=Math.floor(o[1]),e[2]=Math.floor(o[2]),e}},{}],167:[function(x,T,b){T.exports=function(o,a,l,i,d,u){var s,c;for(a||(a=3),l||(l=0),c=i?Math.min(i*a+l,o.length):o.length,s=l;s<c;s+=a)e[0]=o[s],e[1]=o[s+1],e[2]=o[s+2],d(e,e,u),o[s]=e[0],o[s+1]=e[1],o[s+2]=e[2];return o};var e=x("./create")()},{"./create":156}],168:[function(x,T,b){T.exports=function(e,o,a){var l=new Float32Array(3);return l[0]=e,l[1]=o,l[2]=a,l}},{}],169:[function(x,T,b){T.exports={EPSILON:x("./epsilon"),create:x("./create"),clone:x("./clone"),angle:x("./angle"),fromValues:x("./fromValues"),copy:x("./copy"),set:x("./set"),equals:x("./equals"),exactEquals:x("./exactEquals"),add:x("./add"),subtract:x("./subtract"),sub:x("./sub"),multiply:x("./multiply"),mul:x("./mul"),divide:x("./divide"),div:x("./div"),min:x("./min"),max:x("./max"),floor:x("./floor"),ceil:x("./ceil"),round:x("./round"),scale:x("./scale"),scaleAndAdd:x("./scaleAndAdd"),distance:x("./distance"),dist:x("./dist"),squaredDistance:x("./squaredDistance"),sqrDist:x("./sqrDist"),length:x("./length"),len:x("./len"),squaredLength:x("./squaredLength"),sqrLen:x("./sqrLen"),negate:x("./negate"),inverse:x("./inverse"),normalize:x("./normalize"),dot:x("./dot"),cross:x("./cross"),lerp:x("./lerp"),random:x("./random"),transformMat4:x("./transformMat4"),transformMat3:x("./transformMat3"),transformQuat:x("./transformQuat"),rotateX:x("./rotateX"),rotateY:x("./rotateY"),rotateZ:x("./rotateZ"),forEach:x("./forEach")}},{"./add":151,"./angle":152,"./ceil":153,"./clone":154,"./copy":155,"./create":156,"./cross":157,"./dist":158,"./distance":159,"./div":160,"./divide":161,"./dot":162,"./epsilon":163,"./equals":164,"./exactEquals":165,"./floor":166,"./forEach":167,"./fromValues":168,"./inverse":170,"./len":171,"./length":172,"./lerp":173,"./max":174,"./min":175,"./mul":176,"./multiply":177,"./negate":178,"./normalize":179,"./random":180,"./rotateX":181,"./rotateY":182,"./rotateZ":183,"./round":184,"./scale":185,"./scaleAndAdd":186,"./set":187,"./sqrDist":188,"./sqrLen":189,"./squaredDistance":190,"./squaredLength":191,"./sub":192,"./subtract":193,"./transformMat3":194,"./transformMat4":195,"./transformQuat":196}],170:[function(x,T,b){T.exports=function(e,o){return e[0]=1/o[0],e[1]=1/o[1],e[2]=1/o[2],e}},{}],171:[function(x,T,b){T.exports=x("./length")},{"./length":172}],172:[function(x,T,b){T.exports=function(e){var o=e[0],a=e[1],l=e[2];return Math.sqrt(o*o+a*a+l*l)}},{}],173:[function(x,T,b){T.exports=function(e,o,a,l){var i=o[0],d=o[1],u=o[2];return e[0]=i+l*(a[0]-i),e[1]=d+l*(a[1]-d),e[2]=u+l*(a[2]-u),e}},{}],174:[function(x,T,b){T.exports=function(e,o,a){return e[0]=Math.max(o[0],a[0]),e[1]=Math.max(o[1],a[1]),e[2]=Math.max(o[2],a[2]),e}},{}],175:[function(x,T,b){T.exports=function(e,o,a){return e[0]=Math.min(o[0],a[0]),e[1]=Math.min(o[1],a[1]),e[2]=Math.min(o[2],a[2]),e}},{}],176:[function(x,T,b){T.exports=x("./multiply")},{"./multiply":177}],177:[function(x,T,b){T.exports=function(e,o,a){return e[0]=o[0]*a[0],e[1]=o[1]*a[1],e[2]=o[2]*a[2],e}},{}],178:[function(x,T,b){T.exports=function(e,o){return e[0]=-o[0],e[1]=-o[1],e[2]=-o[2],e}},{}],179:[function(x,T,b){T.exports=function(e,o){var a=o[0],l=o[1],i=o[2],d=a*a+l*l+i*i;return d>0&&(d=1/Math.sqrt(d),e[0]=o[0]*d,e[1]=o[1]*d,e[2]=o[2]*d),e}},{}],180:[function(x,T,b){T.exports=function(e,o){o=o||1;var a=2*Math.random()*Math.PI,l=2*Math.random()-1,i=Math.sqrt(1-l*l)*o;return e[0]=Math.cos(a)*i,e[1]=Math.sin(a)*i,e[2]=l*o,e}},{}],181:[function(x,T,b){T.exports=function(e,o,a,l){var i=a[1],d=a[2],u=o[1]-i,s=o[2]-d,c=Math.sin(l),h=Math.cos(l);return e[0]=o[0],e[1]=i+u*h-s*c,e[2]=d+u*c+s*h,e}},{}],182:[function(x,T,b){T.exports=function(e,o,a,l){var i=a[0],d=a[2],u=o[0]-i,s=o[2]-d,c=Math.sin(l),h=Math.cos(l);return e[0]=i+s*c+u*h,e[1]=o[1],e[2]=d+s*h-u*c,e}},{}],183:[function(x,T,b){T.exports=function(e,o,a,l){var i=a[0],d=a[1],u=o[0]-i,s=o[1]-d,c=Math.sin(l),h=Math.cos(l);return e[0]=i+u*h-s*c,e[1]=d+u*c+s*h,e[2]=o[2],e}},{}],184:[function(x,T,b){T.exports=function(e,o){return e[0]=Math.round(o[0]),e[1]=Math.round(o[1]),e[2]=Math.round(o[2]),e}},{}],185:[function(x,T,b){T.exports=function(e,o,a){return e[0]=o[0]*a,e[1]=o[1]*a,e[2]=o[2]*a,e}},{}],186:[function(x,T,b){T.exports=function(e,o,a,l){return e[0]=o[0]+a[0]*l,e[1]=o[1]+a[1]*l,e[2]=o[2]+a[2]*l,e}},{}],187:[function(x,T,b){T.exports=function(e,o,a,l){return e[0]=o,e[1]=a,e[2]=l,e}},{}],188:[function(x,T,b){T.exports=x("./squaredDistance")},{"./squaredDistance":190}],189:[function(x,T,b){T.exports=x("./squaredLength")},{"./squaredLength":191}],190:[function(x,T,b){T.exports=function(e,o){var a=o[0]-e[0],l=o[1]-e[1],i=o[2]-e[2];return a*a+l*l+i*i}},{}],191:[function(x,T,b){T.exports=function(e){var o=e[0],a=e[1],l=e[2];return o*o+a*a+l*l}},{}],192:[function(x,T,b){T.exports=x("./subtract")},{"./subtract":193}],193:[function(x,T,b){T.exports=function(e,o,a){return e[0]=o[0]-a[0],e[1]=o[1]-a[1],e[2]=o[2]-a[2],e}},{}],194:[function(x,T,b){T.exports=function(e,o,a){var l=o[0],i=o[1],d=o[2];return e[0]=l*a[0]+i*a[3]+d*a[6],e[1]=l*a[1]+i*a[4]+d*a[7],e[2]=l*a[2]+i*a[5]+d*a[8],e}},{}],195:[function(x,T,b){T.exports=function(e,o,a){var l=o[0],i=o[1],d=o[2],u=a[3]*l+a[7]*i+a[11]*d+a[15];return e[0]=(a[0]*l+a[4]*i+a[8]*d+a[12])/(u=u||1),e[1]=(a[1]*l+a[5]*i+a[9]*d+a[13])/u,e[2]=(a[2]*l+a[6]*i+a[10]*d+a[14])/u,e}},{}],196:[function(x,T,b){T.exports=function(e,o,a){var l=o[0],i=o[1],d=o[2],u=a[0],s=a[1],c=a[2],h=a[3],p=h*l+s*d-c*i,v=h*i+c*l-u*d,g=h*d+u*i-s*l,f=-u*l-s*i-c*d;return e[0]=p*h+f*-u+v*-c-g*-s,e[1]=v*h+f*-s+g*-u-p*-c,e[2]=g*h+f*-c+p*-s-v*-u,e}},{}],197:[function(x,T,b){T.exports=function(e,o,a){return e[0]=o[0]+a[0],e[1]=o[1]+a[1],e[2]=o[2]+a[2],e[3]=o[3]+a[3],e}},{}],198:[function(x,T,b){T.exports=function(e){var o=new Float32Array(4);return o[0]=e[0],o[1]=e[1],o[2]=e[2],o[3]=e[3],o}},{}],199:[function(x,T,b){T.exports=function(e,o){return e[0]=o[0],e[1]=o[1],e[2]=o[2],e[3]=o[3],e}},{}],200:[function(x,T,b){T.exports=function(){var e=new Float32Array(4);return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e}},{}],201:[function(x,T,b){T.exports=function(e,o){var a=o[0]-e[0],l=o[1]-e[1],i=o[2]-e[2],d=o[3]-e[3];return Math.sqrt(a*a+l*l+i*i+d*d)}},{}],202:[function(x,T,b){T.exports=function(e,o,a){return e[0]=o[0]/a[0],e[1]=o[1]/a[1],e[2]=o[2]/a[2],e[3]=o[3]/a[3],e}},{}],203:[function(x,T,b){T.exports=function(e,o){return e[0]*o[0]+e[1]*o[1]+e[2]*o[2]+e[3]*o[3]}},{}],204:[function(x,T,b){T.exports=function(e,o,a,l){var i=new Float32Array(4);return i[0]=e,i[1]=o,i[2]=a,i[3]=l,i}},{}],205:[function(x,T,b){T.exports={create:x("./create"),clone:x("./clone"),fromValues:x("./fromValues"),copy:x("./copy"),set:x("./set"),add:x("./add"),subtract:x("./subtract"),multiply:x("./multiply"),divide:x("./divide"),min:x("./min"),max:x("./max"),scale:x("./scale"),scaleAndAdd:x("./scaleAndAdd"),distance:x("./distance"),squaredDistance:x("./squaredDistance"),length:x("./length"),squaredLength:x("./squaredLength"),negate:x("./negate"),inverse:x("./inverse"),normalize:x("./normalize"),dot:x("./dot"),lerp:x("./lerp"),random:x("./random"),transformMat4:x("./transformMat4"),transformQuat:x("./transformQuat")}},{"./add":197,"./clone":198,"./copy":199,"./create":200,"./distance":201,"./divide":202,"./dot":203,"./fromValues":204,"./inverse":206,"./length":207,"./lerp":208,"./max":209,"./min":210,"./multiply":211,"./negate":212,"./normalize":213,"./random":214,"./scale":215,"./scaleAndAdd":216,"./set":217,"./squaredDistance":218,"./squaredLength":219,"./subtract":220,"./transformMat4":221,"./transformQuat":222}],206:[function(x,T,b){T.exports=function(e,o){return e[0]=1/o[0],e[1]=1/o[1],e[2]=1/o[2],e[3]=1/o[3],e}},{}],207:[function(x,T,b){T.exports=function(e){var o=e[0],a=e[1],l=e[2],i=e[3];return Math.sqrt(o*o+a*a+l*l+i*i)}},{}],208:[function(x,T,b){T.exports=function(e,o,a,l){var i=o[0],d=o[1],u=o[2],s=o[3];return e[0]=i+l*(a[0]-i),e[1]=d+l*(a[1]-d),e[2]=u+l*(a[2]-u),e[3]=s+l*(a[3]-s),e}},{}],209:[function(x,T,b){T.exports=function(e,o,a){return e[0]=Math.max(o[0],a[0]),e[1]=Math.max(o[1],a[1]),e[2]=Math.max(o[2],a[2]),e[3]=Math.max(o[3],a[3]),e}},{}],210:[function(x,T,b){T.exports=function(e,o,a){return e[0]=Math.min(o[0],a[0]),e[1]=Math.min(o[1],a[1]),e[2]=Math.min(o[2],a[2]),e[3]=Math.min(o[3],a[3]),e}},{}],211:[function(x,T,b){T.exports=function(e,o,a){return e[0]=o[0]*a[0],e[1]=o[1]*a[1],e[2]=o[2]*a[2],e[3]=o[3]*a[3],e}},{}],212:[function(x,T,b){T.exports=function(e,o){return e[0]=-o[0],e[1]=-o[1],e[2]=-o[2],e[3]=-o[3],e}},{}],213:[function(x,T,b){T.exports=function(e,o){var a=o[0],l=o[1],i=o[2],d=o[3],u=a*a+l*l+i*i+d*d;return u>0&&(u=1/Math.sqrt(u),e[0]=a*u,e[1]=l*u,e[2]=i*u,e[3]=d*u),e}},{}],214:[function(x,T,b){var e=x("./normalize"),o=x("./scale");T.exports=function(a,l){return l=l||1,a[0]=Math.random(),a[1]=Math.random(),a[2]=Math.random(),a[3]=Math.random(),e(a,a),o(a,a,l),a}},{"./normalize":213,"./scale":215}],215:[function(x,T,b){T.exports=function(e,o,a){return e[0]=o[0]*a,e[1]=o[1]*a,e[2]=o[2]*a,e[3]=o[3]*a,e}},{}],216:[function(x,T,b){T.exports=function(e,o,a,l){return e[0]=o[0]+a[0]*l,e[1]=o[1]+a[1]*l,e[2]=o[2]+a[2]*l,e[3]=o[3]+a[3]*l,e}},{}],217:[function(x,T,b){T.exports=function(e,o,a,l,i){return e[0]=o,e[1]=a,e[2]=l,e[3]=i,e}},{}],218:[function(x,T,b){T.exports=function(e,o){var a=o[0]-e[0],l=o[1]-e[1],i=o[2]-e[2],d=o[3]-e[3];return a*a+l*l+i*i+d*d}},{}],219:[function(x,T,b){T.exports=function(e){var o=e[0],a=e[1],l=e[2],i=e[3];return o*o+a*a+l*l+i*i}},{}],220:[function(x,T,b){T.exports=function(e,o,a){return e[0]=o[0]-a[0],e[1]=o[1]-a[1],e[2]=o[2]-a[2],e[3]=o[3]-a[3],e}},{}],221:[function(x,T,b){T.exports=function(e,o,a){var l=o[0],i=o[1],d=o[2],u=o[3];return e[0]=a[0]*l+a[4]*i+a[8]*d+a[12]*u,e[1]=a[1]*l+a[5]*i+a[9]*d+a[13]*u,e[2]=a[2]*l+a[6]*i+a[10]*d+a[14]*u,e[3]=a[3]*l+a[7]*i+a[11]*d+a[15]*u,e}},{}],222:[function(x,T,b){T.exports=function(e,o,a){var l=o[0],i=o[1],d=o[2],u=a[0],s=a[1],c=a[2],h=a[3],p=h*l+s*d-c*i,v=h*i+c*l-u*d,g=h*d+u*i-s*l,f=-u*l-s*i-c*d;return e[0]=p*h+f*-u+v*-c-g*-s,e[1]=v*h+f*-s+g*-u-p*-c,e[2]=g*h+f*-c+p*-s-v*-u,e[3]=o[3],e}},{}],223:[function(x,T,b){var e=x("glsl-tokenizer"),o=x("atob-lite");T.exports=function(a){for(var l=Array.isArray(a)?a:e(a),i=0;i<l.length;i++){var d=l[i];if("preprocessor"===d.type){var u=d.data.match(/\#define\s+SHADER_NAME(_B64)?\s+(.+)$/);if(u&&u[2]){var c=u[2];return(u[1]?o(c):c).trim()}}}}},{"atob-lite":13,"glsl-tokenizer":230}],224:[function(x,T,b){T.exports=function(u){var s,c,h,p=0,v=0,g=999,f=[],w=[],y=1,M=0,A=0,k=!1,C=!1,P="",D=a,F=e;"300 es"===(u=u||{}).version&&(D=i,F=l);var R={},L={};for(p=0;p<D.length;p++)R[D[p]]=!0;for(p=0;p<F.length;p++)L[F[p]]=!0;return function(G){return w=[],null!==G?function(W){var ie;for(p=0,W.toString&&(W=W.toString()),P+=W.replace(/\r\n/g,"\n"),h=P.length;s=P[p],p<h;){switch(ie=p,g){case 0:p="/"===s&&"*"===c?(f.push(s),I(f.join("")),g=999,p+1):(f.push(s),c=s,p+1);break;case 1:case 2:p="\r"!==s&&"\n"!==s||"\\"===c?(f.push(s),c=s,p+1):(I(f.join("")),g=999,p);break;case 3:p=ee();break;case 4:p="."===s||/[eE]/.test(s)?(f.push(s),g=5,c=s,p+1):"x"===s&&1===f.length&&"0"===f[0]?(g=11,f.push(s),c=s,p+1):/[^\d]/.test(s)?(I(f.join("")),g=999,p):(f.push(s),c=s,p+1);break;case 11:p=/[^a-fA-F0-9]/.test(s)?(I(f.join("")),g=999,p):(f.push(s),c=s,p+1);break;case 5:"f"===s&&(f.push(s),c=s,p+=1),p=/[eE]/.test(s)?(f.push(s),c=s,p+1):("-"!==s&&"+"!==s||!/[eE]/.test(c))&&/[^\d]/.test(s)?(I(f.join("")),g=999,p):(f.push(s),c=s,p+1);break;case 9999:p=j();break;case 9:p=/[^\s]/g.test(s)?(I(f.join("")),g=999,p):(f.push(s),c=s,p+1);break;case 999:f=f.length?[]:f,p="/"===c&&"*"===s?(A=v+p-1,g=0,c=s,p+1):"/"===c&&"/"===s?(A=v+p-1,g=1,c=s,p+1):"#"===s?(g=2,A=v+p,p):/\s/.test(s)?(g=9,A=v+p,p):(k=/\d/.test(s),C=/[^\w_]/.test(s),A=v+p,g=k?4:C?3:9999,p)}ie!==p&&("\n"===P[ie]?(M=0,++y):++M)}return v+=p,P=P.slice(p),w}(G):(f.length&&I(f.join("")),g=10,I("(eof)"),w)};function I(G){G.length&&w.push({type:d[g],data:G,position:A,line:y,column:M})}function ee(){if("."===c&&/\d/.test(s))return g=5,p;if("/"===c&&"*"===s)return g=0,p;if("/"===c&&"/"===s)return g=1,p;if("."===s&&f.length){for(;J(f););return g=5,p}if(";"===s||")"===s||"("===s){if(f.length)for(;J(f););return I(s),g=999,p+1}var G=2===f.length&&"="!==s;if(/[\w_\d\s]/.test(s)||G){for(;J(f););return g=999,p}return f.push(s),c=s,p+1}function J(G){for(var W,ie,q=0;;){if(W=o.indexOf(G.slice(0,G.length+q).join("")),ie=o[W],-1===W){if(q--+G.length>0)continue;ie=G.slice(0,1).join("")}return I(ie),A+=ie.length,(f=f.slice(ie.length)).length}}function j(){if(/[^\d\w_]/.test(s)){var G=f.join("");return g=L[G]?8:R[G]?7:6,I(f.join("")),g=999,p}return f.push(s),c=s,p+1}};var e=x("./lib/literals"),o=x("./lib/operators"),a=x("./lib/builtins"),l=x("./lib/literals-300es"),i=x("./lib/builtins-300es"),d=["block-comment","line-comment","preprocessor","operator","integer","float","ident","builtin","keyword","whitespace","eof","integer"]},{"./lib/builtins":226,"./lib/builtins-300es":225,"./lib/literals":228,"./lib/literals-300es":227,"./lib/operators":229}],225:[function(x,T,b){var e=x("./builtins");e=e.slice().filter(function(o){return!/^(gl\_|texture)/.test(o)}),T.exports=e.concat(["gl_VertexID","gl_InstanceID","gl_Position","gl_PointSize","gl_FragCoord","gl_FrontFacing","gl_FragDepth","gl_PointCoord","gl_MaxVertexAttribs","gl_MaxVertexUniformVectors","gl_MaxVertexOutputVectors","gl_MaxFragmentInputVectors","gl_MaxVertexTextureImageUnits","gl_MaxCombinedTextureImageUnits","gl_MaxTextureImageUnits","gl_MaxFragmentUniformVectors","gl_MaxDrawBuffers","gl_MinProgramTexelOffset","gl_MaxProgramTexelOffset","gl_DepthRangeParameters","gl_DepthRange","trunc","round","roundEven","isnan","isinf","floatBitsToInt","floatBitsToUint","intBitsToFloat","uintBitsToFloat","packSnorm2x16","unpackSnorm2x16","packUnorm2x16","unpackUnorm2x16","packHalf2x16","unpackHalf2x16","outerProduct","transpose","determinant","inverse","texture","textureSize","textureProj","textureLod","textureOffset","texelFetch","texelFetchOffset","textureProjOffset","textureLodOffset","textureProjLod","textureProjLodOffset","textureGrad","textureGradOffset","textureProjGrad","textureProjGradOffset"])},{"./builtins":226}],226:[function(x,T,b){T.exports=["abs","acos","all","any","asin","atan","ceil","clamp","cos","cross","dFdx","dFdy","degrees","distance","dot","equal","exp","exp2","faceforward","floor","fract","gl_BackColor","gl_BackLightModelProduct","gl_BackLightProduct","gl_BackMaterial","gl_BackSecondaryColor","gl_ClipPlane","gl_ClipVertex","gl_Color","gl_DepthRange","gl_DepthRangeParameters","gl_EyePlaneQ","gl_EyePlaneR","gl_EyePlaneS","gl_EyePlaneT","gl_Fog","gl_FogCoord","gl_FogFragCoord","gl_FogParameters","gl_FragColor","gl_FragCoord","gl_FragData","gl_FragDepth","gl_FragDepthEXT","gl_FrontColor","gl_FrontFacing","gl_FrontLightModelProduct","gl_FrontLightProduct","gl_FrontMaterial","gl_FrontSecondaryColor","gl_LightModel","gl_LightModelParameters","gl_LightModelProducts","gl_LightProducts","gl_LightSource","gl_LightSourceParameters","gl_MaterialParameters","gl_MaxClipPlanes","gl_MaxCombinedTextureImageUnits","gl_MaxDrawBuffers","gl_MaxFragmentUniformComponents","gl_MaxLights","gl_MaxTextureCoords","gl_MaxTextureImageUnits","gl_MaxTextureUnits","gl_MaxVaryingFloats","gl_MaxVertexAttribs","gl_MaxVertexTextureImageUnits","gl_MaxVertexUniformComponents","gl_ModelViewMatrix","gl_ModelViewMatrixInverse","gl_ModelViewMatrixInverseTranspose","gl_ModelViewMatrixTranspose","gl_ModelViewProjectionMatrix","gl_ModelViewProjectionMatrixInverse","gl_ModelViewProjectionMatrixInverseTranspose","gl_ModelViewProjectionMatrixTranspose","gl_MultiTexCoord0","gl_MultiTexCoord1","gl_MultiTexCoord2","gl_MultiTexCoord3","gl_MultiTexCoord4","gl_MultiTexCoord5","gl_MultiTexCoord6","gl_MultiTexCoord7","gl_Normal","gl_NormalMatrix","gl_NormalScale","gl_ObjectPlaneQ","gl_ObjectPlaneR","gl_ObjectPlaneS","gl_ObjectPlaneT","gl_Point","gl_PointCoord","gl_PointParameters","gl_PointSize","gl_Position","gl_ProjectionMatrix","gl_ProjectionMatrixInverse","gl_ProjectionMatrixInverseTranspose","gl_ProjectionMatrixTranspose","gl_SecondaryColor","gl_TexCoord","gl_TextureEnvColor","gl_TextureMatrix","gl_TextureMatrixInverse","gl_TextureMatrixInverseTranspose","gl_TextureMatrixTranspose","gl_Vertex","greaterThan","greaterThanEqual","inversesqrt","length","lessThan","lessThanEqual","log","log2","matrixCompMult","max","min","mix","mod","normalize","not","notEqual","pow","radians","reflect","refract","sign","sin","smoothstep","sqrt","step","tan","texture2D","texture2DLod","texture2DProj","texture2DProjLod","textureCube","textureCubeLod","texture2DLodEXT","texture2DProjLodEXT","textureCubeLodEXT","texture2DGradEXT","texture2DProjGradEXT","textureCubeGradEXT"]},{}],227:[function(x,T,b){var e=x("./literals");T.exports=e.slice().concat(["layout","centroid","smooth","case","mat2x2","mat2x3","mat2x4","mat3x2","mat3x3","mat3x4","mat4x2","mat4x3","mat4x4","uvec2","uvec3","uvec4","samplerCubeShadow","sampler2DArray","sampler2DArrayShadow","isampler2D","isampler3D","isamplerCube","isampler2DArray","usampler2D","usampler3D","usamplerCube","usampler2DArray","coherent","restrict","readonly","writeonly","resource","atomic_uint","noperspective","patch","sample","subroutine","common","partition","active","filter","image1D","image2D","image3D","imageCube","iimage1D","iimage2D","iimage3D","iimageCube","uimage1D","uimage2D","uimage3D","uimageCube","image1DArray","image2DArray","iimage1DArray","iimage2DArray","uimage1DArray","uimage2DArray","image1DShadow","image2DShadow","image1DArrayShadow","image2DArrayShadow","imageBuffer","iimageBuffer","uimageBuffer","sampler1DArray","sampler1DArrayShadow","isampler1D","isampler1DArray","usampler1D","usampler1DArray","isampler2DRect","usampler2DRect","samplerBuffer","isamplerBuffer","usamplerBuffer","sampler2DMS","isampler2DMS","usampler2DMS","sampler2DMSArray","isampler2DMSArray","usampler2DMSArray"])},{"./literals":228}],228:[function(x,T,b){T.exports=["precision","highp","mediump","lowp","attribute","const","uniform","varying","break","continue","do","for","while","if","else","in","out","inout","float","int","uint","void","bool","true","false","discard","return","mat2","mat3","mat4","vec2","vec3","vec4","ivec2","ivec3","ivec4","bvec2","bvec3","bvec4","sampler1D","sampler2D","sampler3D","samplerCube","sampler1DShadow","sampler2DShadow","struct","asm","class","union","enum","typedef","template","this","packed","goto","switch","default","inline","noinline","volatile","public","static","extern","external","interface","long","short","double","half","fixed","unsigned","input","output","hvec2","hvec3","hvec4","dvec2","dvec3","dvec4","fvec2","fvec3","fvec4","sampler2DRect","sampler3DRect","sampler2DRectShadow","sizeof","cast","namespace","using"]},{}],229:[function(x,T,b){T.exports=["<<=",">>=","++","--","<<",">>","<=",">=","==","!=","&&","||","+=","-=","*=","/=","%=","&=","^^","^=","|=","(",")","[","]",".","!","~","*","/","%","+","-","<",">","&","^","|","?",":","=",",",";","{","}"]},{}],230:[function(x,T,b){var e=x("./index");T.exports=function(o,a){var l=e(a),i=[];return(i=i.concat(l(o))).concat(l(null))}},{"./index":224}],231:[function(x,T,b){T.exports=function(e){"string"==typeof e&&(e=[e]);for(var o=[].slice.call(arguments,1),a=[],l=0;l<e.length-1;l++)a.push(e[l],o[l]||"");return a.push(e[l]),a.join("")}},{}],232:[function(x,T,b){"use strict";var e=x("is-browser");T.exports=e&&function(){var o=!1;try{var a=Object.defineProperty({},"passive",{get:function(){o=!0}});window.addEventListener("test",null,a),window.removeEventListener("test",null,a)}catch(l){o=!1}return o}()},{"is-browser":236}],233:[function(x,T,b){"use strict";T.exports=function(c,h){var p=c.length;if(0===p)throw new Error("Must have at least d+1 points");var v=c[0].length;if(p<=v)throw new Error("Must input at least d+1 points");var g=c.slice(0,v+1),f=e.apply(void 0,g);if(0===f)throw new Error("Input not in general position");for(var w=new Array(v+1),y=0;y<=v;++y)w[y]=y;f<0&&(w[0]=1,w[1]=0);var M=new a(w,new Array(v+1),!1),A=M.adjacent,k=new Array(v+2);for(y=0;y<=v;++y){for(var C=w.slice(),P=0;P<=v;++P)P===y&&(C[P]=-1);var D=C[0];C[0]=C[1],C[1]=D;var F=new a(C,new Array(v+1),!0);A[y]=F,k[y]=F}for(k[v+1]=M,y=0;y<=v;++y){C=A[y].vertices;var R=A[y].adjacent;for(P=0;P<=v;++P){var L=C[P];if(L<0)R[P]=M;else for(var I=0;I<=v;++I)A[I].vertices.indexOf(L)<0&&(R[P]=A[I])}}var B=new u(v,g,k),V=!!h;for(y=v+1;y<p;++y)B.insert(c[y],V);return B.boundary()};var e=x("robust-orientation"),o=x("simplicial-complex").compareCells;function a(c,h,p){this.vertices=c,this.adjacent=h,this.boundary=p,this.lastVisited=-1}function l(c,h,p){this.vertices=c,this.cell=h,this.index=p}function i(c,h){return o(c.vertices,h.vertices)}a.prototype.flip=function(){var c=this.vertices[0];this.vertices[0]=this.vertices[1],this.vertices[1]=c;var h=this.adjacent[0];this.adjacent[0]=this.adjacent[1],this.adjacent[1]=h};var d=[];function u(c,h,p){this.dimension=c,this.vertices=h,this.simplices=p,this.interior=p.filter(function(w){return!w.boundary}),this.tuple=new Array(c+1);for(var v=0;v<=c;++v)this.tuple[v]=this.vertices[v];var g,w,f=d[c];f||(f=d[c]=((g=e[c+1])||(g=e),w=g,function(){return w.apply(this,this.tuple)})),this.orient=f}var s=u.prototype;s.handleBoundaryDegeneracy=function(c,h){var p=this.dimension,v=this.vertices.length-1,g=this.tuple,f=this.vertices,w=[c];for(c.lastVisited=-v;w.length>0;)for(var y=(c=w.pop()).adjacent,M=0;M<=p;++M){var A=y[M];if(A.boundary&&!(A.lastVisited<=-v)){for(var k=A.vertices,C=0;C<=p;++C){var P=k[C];g[C]=P<0?h:f[P]}var D=this.orient();if(D>0)return A;A.lastVisited=-v,0===D&&w.push(A)}}return null},s.walk=function(c,h){var p=this.vertices.length-1,v=this.dimension,g=this.vertices,f=this.tuple,w=h?this.interior.length*Math.random()|0:this.interior.length-1,y=this.interior[w];e:for(;!y.boundary;){for(var M=y.vertices,A=y.adjacent,k=0;k<=v;++k)f[k]=g[M[k]];for(y.lastVisited=p,k=0;k<=v;++k){var C=A[k];if(!(C.lastVisited>=p)){var P=f[k];f[k]=c;var D=this.orient();if(f[k]=P,D<0){y=C;continue e}C.lastVisited=C.boundary?-p:p}}return}return y},s.addPeaks=function(c,h){var p=this.vertices.length-1,v=this.dimension,g=this.vertices,f=this.tuple,w=this.interior,y=this.simplices,M=[h];h.lastVisited=p,h.vertices[h.vertices.indexOf(-1)]=p,h.boundary=!1,w.push(h);for(var A=[];M.length>0;){var k=(h=M.pop()).vertices,C=h.adjacent,P=k.indexOf(p);if(!(P<0))for(var D=0;D<=v;++D)if(D!==P){var F=C[D];if(F.boundary&&!(F.lastVisited>=p)){var R=F.vertices;if(F.lastVisited!==-p){for(var L=0,I=0;I<=v;++I)R[I]<0?(L=I,f[I]=c):f[I]=g[R[I]];if(this.orient()>0){R[L]=p,F.boundary=!1,w.push(F),M.push(F),F.lastVisited=p;continue}F.lastVisited=-p}var B=F.adjacent,V=k.slice(),Z=C.slice(),Y=new a(V,Z,!0);y.push(Y);var ee=B.indexOf(h);if(!(ee<0))for(B[ee]=Y,Z[P]=F,V[D]=-1,Z[D]=h,C[D]=Y,Y.flip(),I=0;I<=v;++I){var J=V[I];if(!(J<0||J===p)){for(var $=new Array(v-1),Q=0,se=0;se<=v;++se){var j=V[se];j<0||se===I||($[Q++]=j)}A.push(new l($,Y,I))}}}}}for(A.sort(i),D=0;D+1<A.length;D+=2){var G=A[D],W=A[D+1];G.index<0||W.index<0||(G.cell.adjacent[G.index]=W.cell,W.cell.adjacent[W.index]=G.cell)}},s.insert=function(c,h){var p=this.vertices;p.push(c);var v=this.walk(c,h);if(v){for(var g=this.dimension,f=this.tuple,w=0;w<=g;++w){var y=v.vertices[w];f[w]=y<0?c:p[y]}var M=this.orient(f);M<0||(0!==M||(v=this.handleBoundaryDegeneracy(v,c)))&&this.addPeaks(c,v)}},s.boundary=function(){for(var c=this.dimension,h=[],p=this.simplices,v=p.length,g=0;g<v;++g){var f=p[g];if(f.boundary){for(var w=new Array(c),y=f.vertices,M=0,A=0,k=0;k<=c;++k)y[k]>=0?w[M++]=y[k]:A=1&k;if(A===(1&c)){var C=w[0];w[0]=w[1],w[1]=C}h.push(w)}}return h}},{"robust-orientation":284,"simplicial-complex":293}],234:[function(x,T,b){"use strict";var e=x("binary-search-bounds");function o(M,A,k,C,P){this.mid=M,this.left=A,this.right=k,this.leftPoints=C,this.rightPoints=P,this.count=(A?A.count:0)+(k?k.count:0)+C.length}T.exports=function(M){return new w(M&&0!==M.length?f(M):null)};var a=o.prototype;function l(M,A){M.mid=A.mid,M.left=A.left,M.right=A.right,M.leftPoints=A.leftPoints,M.rightPoints=A.rightPoints,M.count=A.count}function i(M,A){var k=f(A);M.mid=k.mid,M.left=k.left,M.right=k.right,M.leftPoints=k.leftPoints,M.rightPoints=k.rightPoints,M.count=k.count}function d(M,A){var k=M.intervals([]);k.push(A),i(M,k)}function u(M,A){var k=M.intervals([]),C=k.indexOf(A);return C<0?0:(k.splice(C,1),i(M,k),1)}function s(M,A,k){for(var C=0;C<M.length&&M[C][0]<=A;++C){var P=k(M[C]);if(P)return P}}function c(M,A,k){for(var C=M.length-1;C>=0&&M[C][1]>=A;--C){var P=k(M[C]);if(P)return P}}function h(M,A){for(var k=0;k<M.length;++k){var C=A(M[k]);if(C)return C}}function p(M,A){return M-A}function v(M,A){return M[0]-A[0]||M[1]-A[1]}function g(M,A){return M[1]-A[1]||M[0]-A[0]}function f(M){if(0===M.length)return null;for(var A=[],k=0;k<M.length;++k)A.push(M[k][0],M[k][1]);A.sort(p);var C=A[A.length>>1],P=[],D=[],F=[];for(k=0;k<M.length;++k){var R=M[k];R[1]<C?P.push(R):C<R[0]?D.push(R):F.push(R)}var L=F,I=F.slice();return L.sort(v),I.sort(g),new o(C,f(P),f(D),L,I)}function w(M){this.root=M}a.intervals=function(M){return M.push.apply(M,this.leftPoints),this.left&&this.left.intervals(M),this.right&&this.right.intervals(M),M},a.insert=function(M){var A=this.count-this.leftPoints.length;if(this.count+=1,M[1]<this.mid)this.left?4*(this.left.count+1)>3*(A+1)?d(this,M):this.left.insert(M):this.left=f([M]);else if(M[0]>this.mid)this.right?4*(this.right.count+1)>3*(A+1)?d(this,M):this.right.insert(M):this.right=f([M]);else{var k=e.ge(this.leftPoints,M,v),C=e.ge(this.rightPoints,M,g);this.leftPoints.splice(k,0,M),this.rightPoints.splice(C,0,M)}},a.remove=function(M){var A=this.count-this.leftPoints;if(M[1]<this.mid)return this.left?4*(this.right?this.right.count:0)>3*(A-1)?u(this,M):2===(D=this.left.remove(M))?(this.left=null,this.count-=1,1):(1===D&&(this.count-=1),D):0;if(M[0]>this.mid)return this.right?4*(this.left?this.left.count:0)>3*(A-1)?u(this,M):2===(D=this.right.remove(M))?(this.right=null,this.count-=1,1):(1===D&&(this.count-=1),D):0;if(1===this.count)return this.leftPoints[0]===M?2:0;if(1===this.leftPoints.length&&this.leftPoints[0]===M){if(this.left&&this.right){for(var k=this,C=this.left;C.right;)k=C,C=C.right;if(k===this)C.right=this.right;else{var P=this.left,D=this.right;k.count-=C.count,k.right=C.left,C.left=P,C.right=D}l(this,C),this.count=(this.left?this.left.count:0)+(this.right?this.right.count:0)+this.leftPoints.length}else l(this,this.left?this.left:this.right);return 1}for(P=e.ge(this.leftPoints,M,v);P<this.leftPoints.length&&this.leftPoints[P][0]===M[0];++P)if(this.leftPoints[P]===M)for(this.count-=1,this.leftPoints.splice(P,1),D=e.ge(this.rightPoints,M,g);D<this.rightPoints.length&&this.rightPoints[D][1]===M[1];++D)if(this.rightPoints[D]===M)return this.rightPoints.splice(D,1),1;return 0},a.queryPoint=function(M,A){return M<this.mid?this.left&&(k=this.left.queryPoint(M,A))?k:s(this.leftPoints,M,A):M>this.mid?this.right&&(k=this.right.queryPoint(M,A))?k:c(this.rightPoints,M,A):h(this.leftPoints,A);var k},a.queryInterval=function(M,A,k){var C;return M<this.mid&&this.left&&(C=this.left.queryInterval(M,A,k))||A>this.mid&&this.right&&(C=this.right.queryInterval(M,A,k))?C:A<this.mid?s(this.leftPoints,A,k):M>this.mid?c(this.rightPoints,M,k):h(this.leftPoints,k)};var y=w.prototype;y.insert=function(M){this.root?this.root.insert(M):this.root=new o(M[0],null,null,[M],[M])},y.remove=function(M){if(this.root){var A=this.root.remove(M);return 2===A&&(this.root=null),0!==A}return!1},y.queryPoint=function(M,A){if(this.root)return this.root.queryPoint(M,A)},y.queryInterval=function(M,A,k){if(M<=A&&this.root)return this.root.queryInterval(M,A,k)},Object.defineProperty(y,"count",{get:function(){return this.root?this.root.count:0}}),Object.defineProperty(y,"intervals",{get:function(){return this.root?this.root.intervals([]):[]}})},{"binary-search-bounds":31}],235:[function(x,T,b){"use strict";T.exports=function(e){for(var o=new Array(e),a=0;a<e;++a)o[a]=a;return o}},{}],236:[function(x,T,b){T.exports=!0},{}],237:[function(x,T,b){function e(o){return!!o.constructor&&"function"==typeof o.constructor.isBuffer&&o.constructor.isBuffer(o)}T.exports=function(o){return null!=o&&(e(o)||"function"==typeof(a=o).readFloatLE&&"function"==typeof a.slice&&e(a.slice(0,0))||!!o._isBuffer);var a}},{}],238:[function(x,T,b){"use strict";T.exports=a,T.exports.isMobile=a,T.exports.default=a;var e=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i,o=/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series[46]0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino|android|ipad|playbook|silk/i;function a(l){l||(l={});var i=l.ua;if(i||"undefined"==typeof navigator||(i=navigator.userAgent),i&&i.headers&&"string"==typeof i.headers["user-agent"]&&(i=i.headers["user-agent"]),"string"!=typeof i)return!1;var d=l.tablet?o.test(i):e.test(i);return!d&&l.tablet&&l.featureDetect&&navigator&&navigator.maxTouchPoints>1&&-1!==i.indexOf("Macintosh")&&-1!==i.indexOf("Safari")&&(d=!0),d}},{}],239:[function(x,T,b){"use strict";T.exports=function(e){for(var o,a=e.length,l=0;l<a;l++)if(((o=e.charCodeAt(l))<9||o>13)&&32!==o&&133!==o&&160!==o&&5760!==o&&6158!==o&&(o<8192||o>8205)&&8232!==o&&8233!==o&&8239!==o&&8287!==o&&8288!==o&&12288!==o&&65279!==o)return!1;return!0}},{}],240:[function(x,T,b){T.exports=function(e,o,a){return e*(1-a)+o*a}},{}],241:[function(x,T,b){var e=x("./normalize"),o=x("gl-mat4/create"),a=x("gl-mat4/clone"),l=x("gl-mat4/determinant"),i=x("gl-mat4/invert"),d=x("gl-mat4/transpose"),u={length:x("gl-vec3/length"),normalize:x("gl-vec3/normalize"),dot:x("gl-vec3/dot"),cross:x("gl-vec3/cross")},s=o(),c=o(),h=[0,0,0,0],p=[[0,0,0],[0,0,0],[0,0,0]],v=[0,0,0];function g(f,w,y,M,A){f[0]=w[0]*M+y[0]*A,f[1]=w[1]*M+y[1]*A,f[2]=w[2]*M+y[2]*A}T.exports=function(f,w,y,M,A,k){if(w||(w=[0,0,0]),y||(y=[0,0,0]),M||(M=[0,0,0]),A||(A=[0,0,0,1]),k||(k=[0,0,0,1]),!e(s,f)||(a(c,s),c[3]=0,c[7]=0,c[11]=0,c[15]=1,Math.abs(l(c)<1e-8)))return!1;var C,P,D,F,R,L,I,se,j,B=s[3],V=s[7],Z=s[11],Y=s[12],ee=s[13],J=s[14],$=s[15];if(0!==B||0!==V||0!==Z){if(h[0]=B,h[1]=V,h[2]=Z,h[3]=$,!i(c,c))return!1;d(c,c),F=(P=h)[0],(C=A)[0]=(D=c)[0]*F+D[4]*(R=P[1])+D[8]*(L=P[2])+D[12]*(I=P[3]),C[1]=D[1]*F+D[5]*R+D[9]*L+D[13]*I,C[2]=D[2]*F+D[6]*R+D[10]*L+D[14]*I,C[3]=D[3]*F+D[7]*R+D[11]*L+D[15]*I}else A[0]=A[1]=A[2]=0,A[3]=1;if(w[0]=Y,w[1]=ee,w[2]=J,(se=p)[0][0]=(j=s)[0],se[0][1]=j[1],se[0][2]=j[2],se[1][0]=j[4],se[1][1]=j[5],se[1][2]=j[6],se[2][0]=j[8],se[2][1]=j[9],se[2][2]=j[10],y[0]=u.length(p[0]),u.normalize(p[0],p[0]),M[0]=u.dot(p[0],p[1]),g(p[1],p[1],p[0],1,-M[0]),y[1]=u.length(p[1]),u.normalize(p[1],p[1]),M[0]/=y[1],M[1]=u.dot(p[0],p[2]),g(p[2],p[2],p[0],1,-M[1]),M[2]=u.dot(p[1],p[2]),g(p[2],p[2],p[1],1,-M[2]),y[2]=u.length(p[2]),u.normalize(p[2],p[2]),M[1]/=y[2],M[2]/=y[2],u.cross(v,p[1],p[2]),u.dot(p[0],v)<0)for(var Q=0;Q<3;Q++)y[Q]*=-1,p[Q][0]*=-1,p[Q][1]*=-1,p[Q][2]*=-1;return k[0]=.5*Math.sqrt(Math.max(1+p[0][0]-p[1][1]-p[2][2],0)),k[1]=.5*Math.sqrt(Math.max(1-p[0][0]+p[1][1]-p[2][2],0)),k[2]=.5*Math.sqrt(Math.max(1-p[0][0]-p[1][1]+p[2][2],0)),k[3]=.5*Math.sqrt(Math.max(1+p[0][0]+p[1][1]+p[2][2],0)),p[2][1]>p[1][2]&&(k[0]=-k[0]),p[0][2]>p[2][0]&&(k[1]=-k[1]),p[1][0]>p[0][1]&&(k[2]=-k[2]),!0}},{"./normalize":242,"gl-mat4/clone":92,"gl-mat4/create":93,"gl-mat4/determinant":94,"gl-mat4/invert":98,"gl-mat4/transpose":109,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/length":172,"gl-vec3/normalize":179}],242:[function(x,T,b){T.exports=function(e,o){var a=o[15];if(0===a)return!1;for(var l=1/a,i=0;i<16;i++)e[i]=o[i]*l;return!0}},{}],243:[function(x,T,b){var e=x("gl-vec3/lerp"),o=x("mat4-recompose"),a=x("mat4-decompose"),l=x("gl-mat4/determinant"),i=x("quat-slerp"),d=c(),u=c(),s=c();function c(){return{translate:h(),scale:h(1),skew:h(),perspective:[0,0,0,1],quaternion:[0,0,0,1]}}function h(p){return[p||0,p||0,p||0]}T.exports=function(p,v,g,f){if(0===l(v)||0===l(g))return!1;var w=a(v,d.translate,d.scale,d.skew,d.perspective,d.quaternion),y=a(g,u.translate,u.scale,u.skew,u.perspective,u.quaternion);return!(!w||!y||(e(s.translate,d.translate,u.translate,f),e(s.skew,d.skew,u.skew,f),e(s.scale,d.scale,u.scale,f),e(s.perspective,d.perspective,u.perspective,f),i(s.quaternion,d.quaternion,u.quaternion,f),o(p,s.translate,s.scale,s.skew,s.perspective,s.quaternion),0))}},{"gl-mat4/determinant":94,"gl-vec3/lerp":173,"mat4-decompose":241,"mat4-recompose":244,"quat-slerp":271}],244:[function(x,T,b){var e={identity:x("gl-mat4/identity"),translate:x("gl-mat4/translate"),multiply:x("gl-mat4/multiply"),create:x("gl-mat4/create"),scale:x("gl-mat4/scale"),fromRotationTranslation:x("gl-mat4/fromRotationTranslation")},o=(e.create(),e.create());T.exports=function(a,l,i,d,u,s){return e.identity(a),e.fromRotationTranslation(a,s,l),a[3]=u[0],a[7]=u[1],a[11]=u[2],a[15]=u[3],e.identity(o),0!==d[2]&&(o[9]=d[2],e.multiply(a,a,o)),0!==d[1]&&(o[9]=0,o[8]=d[1],e.multiply(a,a,o)),0!==d[0]&&(o[8]=0,o[4]=d[0],e.multiply(a,a,o)),e.scale(a,a,i),a}},{"gl-mat4/create":93,"gl-mat4/fromRotationTranslation":96,"gl-mat4/identity":97,"gl-mat4/multiply":100,"gl-mat4/scale":107,"gl-mat4/translate":108}],245:[function(x,T,b){"use strict";var e=x("binary-search-bounds"),o=x("mat4-interpolate"),a=x("gl-mat4/invert"),l=x("gl-mat4/rotateX"),i=x("gl-mat4/rotateY"),d=x("gl-mat4/rotateZ"),u=x("gl-mat4/lookAt"),s=x("gl-mat4/translate"),c=(x("gl-mat4/scale"),x("gl-vec3/normalize")),h=[0,0,0];function p(f){this._components=f.slice(),this._time=[0],this.prevMatrix=f.slice(),this.nextMatrix=f.slice(),this.computedMatrix=f.slice(),this.computedInverse=f.slice(),this.computedEye=[0,0,0],this.computedUp=[0,0,0],this.computedCenter=[0,0,0],this.computedRadius=[0],this._limits=[-1/0,1/0]}T.exports=function(f){return new p((f=f||{}).matrix||[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};var v=p.prototype;v.recalcMatrix=function(f){var w=this._time,y=e.le(w,f),M=this.computedMatrix;if(!(y<0)){var A=this._components;if(y===w.length-1)for(var k=16*y,C=0;C<16;++C)M[C]=A[k++];else{var P=w[y+1]-w[y],D=(k=16*y,this.prevMatrix),F=!0;for(C=0;C<16;++C)D[C]=A[k++];var R=this.nextMatrix;for(C=0;C<16;++C)R[C]=A[k++],F=F&&D[C]===R[C];if(P<1e-6||F)for(C=0;C<16;++C)M[C]=D[C];else o(M,D,R,(f-w[y])/P)}var L=this.computedUp;L[0]=M[1],L[1]=M[5],L[2]=M[9],c(L,L);var I=this.computedInverse;a(I,M);var B=this.computedEye,V=I[15];B[0]=I[12]/V,B[1]=I[13]/V,B[2]=I[14]/V;var Z=this.computedCenter,Y=Math.exp(this.computedRadius[0]);for(C=0;C<3;++C)Z[C]=B[C]-M[2+4*C]*Y}},v.idle=function(f){if(!(f<this.lastT())){for(var w=this._components,y=w.length-16,M=0;M<16;++M)w.push(w[y++]);this._time.push(f)}},v.flush=function(f){var w=e.gt(this._time,f)-2;w<0||(this._time.splice(0,w),this._components.splice(0,16*w))},v.lastT=function(){return this._time[this._time.length-1]},v.lookAt=function(f,w,y,M){this.recalcMatrix(f),this.setMatrix(f,u(this.computedMatrix,w=w||this.computedEye,y=y||h,M=M||this.computedUp));for(var A=0,k=0;k<3;++k)A+=Math.pow(y[k]-w[k],2);A=Math.log(Math.sqrt(A)),this.computedRadius[0]=A},v.rotate=function(f,w,y,M){this.recalcMatrix(f);var A=this.computedInverse;w&&i(A,A,w),y&&l(A,A,y),M&&d(A,A,M),this.setMatrix(f,a(this.computedMatrix,A))};var g=[0,0,0];v.pan=function(f,w,y,M){g[0]=-(w||0),g[1]=-(y||0),g[2]=-(M||0),this.recalcMatrix(f);var A=this.computedInverse;s(A,A,g),this.setMatrix(f,a(A,A))},v.translate=function(f,w,y,M){g[0]=w||0,g[1]=y||0,g[2]=M||0,this.recalcMatrix(f);var A=this.computedMatrix;s(A,A,g),this.setMatrix(f,A)},v.setMatrix=function(f,w){if(!(f<this.lastT())){this._time.push(f);for(var y=0;y<16;++y)this._components.push(w[y])}},v.setDistance=function(f,w){this.computedRadius[0]=w},v.setDistanceLimits=function(f,w){var y=this._limits;y[0]=f,y[1]=w},v.getDistanceLimits=function(f){var w=this._limits;return f?(f[0]=w[0],f[1]=w[1],f):w}},{"binary-search-bounds":31,"gl-mat4/invert":98,"gl-mat4/lookAt":99,"gl-mat4/rotateX":104,"gl-mat4/rotateY":105,"gl-mat4/rotateZ":106,"gl-mat4/scale":107,"gl-mat4/translate":108,"gl-vec3/normalize":179,"mat4-interpolate":243}],246:[function(x,T,b){"use strict";T.exports=function(o){var a=o.length;if(a<3){for(var l=new Array(a),i=0;i<a;++i)l[i]=i;return 2===a&&o[0][0]===o[1][0]&&o[0][1]===o[1][1]?[0]:l}var d=new Array(a);for(i=0;i<a;++i)d[i]=i;d.sort(function(w,y){return o[w][0]-o[y][0]||o[w][1]-o[y][1]});var u=[d[0],d[1]],s=[d[0],d[1]];for(i=2;i<a;++i){for(var c=d[i],h=o[c],p=u.length;p>1&&e(o[u[p-2]],o[u[p-1]],h)<=0;)p-=1,u.pop();for(u.push(c),p=s.length;p>1&&e(o[s[p-2]],o[s[p-1]],h)>=0;)p-=1,s.pop();s.push(c)}l=new Array(s.length+u.length-2);for(var v=0,g=(i=0,u.length);i<g;++i)l[v++]=u[i];for(var f=s.length-2;f>0;--f)l[v++]=s[f];return l};var e=x("robust-orientation")[3]},{"robust-orientation":284}],247:[function(x,T,b){"use strict";T.exports=function(o,a){a||(a=o,o=window);var l=0,i=0,d=0,u={shift:!1,alt:!1,control:!1,meta:!1},s=!1;function c(k){var C=!1;return"altKey"in k&&(C=C||k.altKey!==u.alt,u.alt=!!k.altKey),"shiftKey"in k&&(C=C||k.shiftKey!==u.shift,u.shift=!!k.shiftKey),"ctrlKey"in k&&(C=C||k.ctrlKey!==u.control,u.control=!!k.ctrlKey),"metaKey"in k&&(C=C||k.metaKey!==u.meta,u.meta=!!k.metaKey),C}function h(k,C){var P=e.x(C),D=e.y(C);"buttons"in C&&(k=0|C.buttons),(k!==l||P!==i||D!==d||c(C))&&(l=0|k,i=P||0,d=D||0,a&&a(l,i,d,u))}function p(k){h(0,k)}function v(){(l||i||d||u.shift||u.alt||u.meta||u.control)&&(i=d=0,l=0,u.shift=u.alt=u.control=u.meta=!1,a&&a(0,0,0,u))}function g(k){c(k)&&a&&a(l,i,d,u)}function f(k){0===e.buttons(k)?h(0,k):h(l,k)}function w(k){h(l|e.buttons(k),k)}function y(k){h(l&~e.buttons(k),k)}function M(){s||(s=!0,o.addEventListener("mousemove",f),o.addEventListener("mousedown",w),o.addEventListener("mouseup",y),o.addEventListener("mouseleave",p),o.addEventListener("mouseenter",p),o.addEventListener("mouseout",p),o.addEventListener("mouseover",p),o.addEventListener("blur",v),o.addEventListener("keyup",g),o.addEventListener("keydown",g),o.addEventListener("keypress",g),o!==window&&(window.addEventListener("blur",v),window.addEventListener("keyup",g),window.addEventListener("keydown",g),window.addEventListener("keypress",g)))}M();var A={element:o};return Object.defineProperties(A,{enabled:{get:function(){return s},set:function(k){k?M():!s||(s=!1,o.removeEventListener("mousemove",f),o.removeEventListener("mousedown",w),o.removeEventListener("mouseup",y),o.removeEventListener("mouseleave",p),o.removeEventListener("mouseenter",p),o.removeEventListener("mouseout",p),o.removeEventListener("mouseover",p),o.removeEventListener("blur",v),o.removeEventListener("keyup",g),o.removeEventListener("keydown",g),o.removeEventListener("keypress",g),o!==window&&(window.removeEventListener("blur",v),window.removeEventListener("keyup",g),window.removeEventListener("keydown",g),window.removeEventListener("keypress",g)))},enumerable:!0},buttons:{get:function(){return l},enumerable:!0},x:{get:function(){return i},enumerable:!0},y:{get:function(){return d},enumerable:!0},mods:{get:function(){return u},enumerable:!0}}),A};var e=x("mouse-event")},{"mouse-event":249}],248:[function(x,T,b){var e={left:0,top:0};T.exports=function(o,a,l){a=a||o.currentTarget||o.srcElement,Array.isArray(l)||(l=[0,0]);var s,i=o.clientX||0,d=o.clientY||0,u=(s=a)===window||s===document||s===document.body?e:s.getBoundingClientRect();return l[0]=i-u.left,l[1]=d-u.top,l}},{}],249:[function(x,T,b){"use strict";function e(o){return o.target||o.srcElement||window}b.buttons=function(o){if("object"==typeof o){if("buttons"in o)return o.buttons;if("which"in o){if(2===(a=o.which))return 4;if(3===a)return 2;if(a>0)return 1<<a-1}else if("button"in o){var a;if(1===(a=o.button))return 4;if(2===a)return 2;if(a>=0)return 1<<a}}return 0},b.element=e,b.x=function(o){if("object"==typeof o){if("offsetX"in o)return o.offsetX;var a=e(o).getBoundingClientRect();return o.clientX-a.left}return 0},b.y=function(o){if("object"==typeof o){if("offsetY"in o)return o.offsetY;var a=e(o).getBoundingClientRect();return o.clientY-a.top}return 0}},{}],250:[function(x,T,b){"use strict";var e=x("to-px");T.exports=function(o,a,l){"function"==typeof o&&(l=!!a,a=o,o=window);var i=e("ex",o),d=function(u){l&&u.preventDefault();var s=u.deltaX||0,c=u.deltaY||0,h=u.deltaZ||0,p=1;switch(u.deltaMode){case 1:p=i;break;case 2:p=window.innerHeight}if(c*=p,h*=p,(s*=p)||c||h)return a(s,c,h,u)};return o.addEventListener("wheel",d),d}},{"to-px":304}],251:[function(x,T,b){"use strict";var e=x("typedarray-pool");T.exports=function(a){function l(p){throw new Error("ndarray-extract-contour: "+p)}"object"!=typeof a&&l("Must specify arguments");var i=a.order;Array.isArray(i)||l("Must specify order");var p,v,g,M,d=a.arrayArguments||1;d<1&&l("Must have at least one array argument"),(a.scalarArguments||0)<0&&l("Scalar arg count must be > 0"),"function"!=typeof a.vertex&&l("Must specify vertex creation function"),"function"!=typeof a.cell&&l("Must specify cell creation function"),"function"!=typeof a.phase&&l("Must specify phase function");for(var s=a.getters||[],c=new Array(d),h=0;h<d;++h)c[h]=s.indexOf(h)>=0;return p=a.vertex,v=a.cell,g=a.phase,M=[c,i].join(","),(0,o[M])(p,v,g,e.mallocUint32,e.freeUint32)};var o={"false,0,1":function(a,l,i,d,u){return function(s,c,h,p){var v,g=0|s.shape[0],f=0|s.shape[1],w=s.data,M=0|s.stride[0],A=0|s.stride[1],k=0|s.offset,C=0|-M,P=0,D=0|-A,F=0,R=-M-A|0,L=0,I=0|M,B=A-M*g|0,V=0,Z=0,Y=0,ee=2*g|0,J=d(ee),$=d(ee),Q=0,se=0,j=-1,G=-1,W=0,ie=0|-g,q=0|g,te=0,ne=-g-1|0,le=g-1|0,ue=0,de=0,he=0;for(V=0;V<g;++V)J[Q++]=i(w[k],c,h,p),k+=I;if(k+=B,f>0){if(Z=1,J[Q++]=i(w[k],c,h,p),k+=I,g>0)for(V=1,se=J[Q]=i(v=w[k],c,h,p),te=J[Q+ie],ue=J[Q+ne],se===(W=J[Q+j])&&se===te&&se===ue||(a(V,Z,v,P=w[k+C],F=w[k+D],L=w[k+R],se,W,te,ue,c,h,p),de=$[Q]=Y++),Q+=1,k+=I,V=2;V<g;++V)se=J[Q]=i(v=w[k],c,h,p),te=J[Q+ie],ue=J[Q+ne],se===(W=J[Q+j])&&se===te&&se===ue||(a(V,Z,v,P=w[k+C],F=w[k+D],L=w[k+R],se,W,te,ue,c,h,p),de=$[Q]=Y++,ue!==W&&l($[Q+j],de,L,P,ue,W,c,h,p)),Q+=1,k+=I;for(k+=B,Q=0,he=j,j=G,G=he,he=ie,ie=q,q=he,he=ne,ne=le,le=he,Z=2;Z<f;++Z){if(J[Q++]=i(w[k],c,h,p),k+=I,g>0)for(V=1,se=J[Q]=i(v=w[k],c,h,p),te=J[Q+ie],ue=J[Q+ne],se===(W=J[Q+j])&&se===te&&se===ue||(a(V,Z,v,P=w[k+C],F=w[k+D],L=w[k+R],se,W,te,ue,c,h,p),de=$[Q]=Y++,ue!==te&&l($[Q+ie],de,F,L,te,ue,c,h,p)),Q+=1,k+=I,V=2;V<g;++V)se=J[Q]=i(v=w[k],c,h,p),te=J[Q+ie],ue=J[Q+ne],se===(W=J[Q+j])&&se===te&&se===ue||(a(V,Z,v,P=w[k+C],F=w[k+D],L=w[k+R],se,W,te,ue,c,h,p),de=$[Q]=Y++,ue!==te&&l($[Q+ie],de,F,L,te,ue,c,h,p),ue!==W&&l($[Q+j],de,L,P,ue,W,c,h,p)),Q+=1,k+=I;1&Z&&(Q=0),he=j,j=G,G=he,he=ie,ie=q,q=he,he=ne,ne=le,le=he,k+=B}}u($),u(J)}},"false,1,0":function(a,l,i,d,u){return function(s,c,h,p){var v,g=0|s.shape[0],f=0|s.shape[1],w=s.data,M=0|s.stride[0],A=0|s.stride[1],k=0|s.offset,C=0|-M,P=0,D=0|-A,F=0,R=-M-A|0,L=0,I=0|A,B=M-A*f|0,V=0,Z=0,Y=0,ee=2*f|0,J=d(ee),$=d(ee),Q=0,se=0,j=-1,G=-1,W=0,ie=0|-f,q=0|f,te=0,ne=-f-1|0,le=f-1|0,ue=0,de=0,he=0;for(Z=0;Z<f;++Z)J[Q++]=i(w[k],c,h,p),k+=I;if(k+=B,g>0){if(V=1,J[Q++]=i(w[k],c,h,p),k+=I,f>0)for(Z=1,se=J[Q]=i(v=w[k],c,h,p),W=J[Q+j],ue=J[Q+ne],se===(te=J[Q+ie])&&se===W&&se===ue||(a(V,Z,v,P=w[k+C],F=w[k+D],L=w[k+R],se,te,W,ue,c,h,p),de=$[Q]=Y++),Q+=1,k+=I,Z=2;Z<f;++Z)se=J[Q]=i(v=w[k],c,h,p),W=J[Q+j],ue=J[Q+ne],se===(te=J[Q+ie])&&se===W&&se===ue||(a(V,Z,v,P=w[k+C],F=w[k+D],L=w[k+R],se,te,W,ue,c,h,p),de=$[Q]=Y++,ue!==W&&l($[Q+j],de,F,L,W,ue,c,h,p)),Q+=1,k+=I;for(k+=B,Q=0,he=ie,ie=q,q=he,he=j,j=G,G=he,he=ne,ne=le,le=he,V=2;V<g;++V){if(J[Q++]=i(w[k],c,h,p),k+=I,f>0)for(Z=1,se=J[Q]=i(v=w[k],c,h,p),W=J[Q+j],ue=J[Q+ne],se===(te=J[Q+ie])&&se===W&&se===ue||(a(V,Z,v,P=w[k+C],F=w[k+D],L=w[k+R],se,te,W,ue,c,h,p),de=$[Q]=Y++,ue!==te&&l($[Q+ie],de,L,P,ue,te,c,h,p)),Q+=1,k+=I,Z=2;Z<f;++Z)se=J[Q]=i(v=w[k],c,h,p),W=J[Q+j],ue=J[Q+ne],se===(te=J[Q+ie])&&se===W&&se===ue||(a(V,Z,v,P=w[k+C],F=w[k+D],L=w[k+R],se,te,W,ue,c,h,p),de=$[Q]=Y++,ue!==W&&l($[Q+j],de,F,L,W,ue,c,h,p),ue!==te&&l($[Q+ie],de,L,P,ue,te,c,h,p)),Q+=1,k+=I;1&V&&(Q=0),he=ie,ie=q,q=he,he=j,j=G,G=he,he=ne,ne=le,le=he,k+=B}}u($),u(J)}}}},{"typedarray-pool":308}],252:[function(x,T,b){"use strict";var e=x("dup"),o={zero:function(g,f,w,y){var M=g[0];y|=0;var A=0,k=w[0];for(A=0;A<M;++A)f[y]=0,y+=k},fdTemplate1:function(g,f,w,y,M,A,k){var C=g[0],P=w[0],D=-1*P,F=P;y|=0,k|=0;var R=0,L=P,I=A[0];for(R=0;R<C;++R)M[k]=.5*(f[y+D]-f[y+F]),y+=L,k+=I},fdTemplate2:function(g,f,w,y,M,A,k,C,P,D){var F=g[0],R=g[1],L=w[0],I=w[1],V=A[1],Y=P[1],ee=-1*L,J=L,$=-1*I,Q=I;y|=0,k|=0,D|=0;var se=0,j=0,G=I,W=L-R*I,ie=V,q=A[0]-R*V,te=Y,ne=P[0]-R*Y;for(j=0;j<F;++j){for(se=0;se<R;++se)M[k]=.5*(f[y+ee]-f[y+J]),C[D]=.5*(f[y+$]-f[y+Q]),y+=G,k+=ie,D+=te;y+=W,k+=q,D+=ne}}},a={cdiff:function(g){var f={};return function(w,y,M){var A=w.dtype,k=w.order,C=y.dtype,P=y.order,D=M.dtype,F=M.order,R=[A,k.join(),C,P.join(),D,F.join()].join(),L=f[R];return L||(f[R]=L=g([A,k,C,P,D,F])),L(w.shape.slice(0),w.data,w.stride,0|w.offset,y.data,y.stride,0|y.offset,M.data,M.stride,0|M.offset)}},zero:function(g){var f={};return function(w){var y=w.dtype,M=w.order,A=[y,M.join()].join(),k=f[A];return k||(f[A]=k=g([y,M])),k(w.shape.slice(0),w.data,w.stride,0|w.offset)}},fdTemplate1:function(g){var f={};return function(w,y){var M=w.dtype,A=w.order,k=y.dtype,C=y.order,P=[M,A.join(),k,C.join()].join(),D=f[P];return D||(f[P]=D=g([M,A,k,C])),D(w.shape.slice(0),w.data,w.stride,0|w.offset,y.data,y.stride,0|y.offset)}},fdTemplate2:function(g){var f={};return function(w,y,M){var A=w.dtype,k=w.order,C=y.dtype,P=y.order,D=M.dtype,F=M.order,R=[A,k.join(),C,P.join(),D,F.join()].join(),L=f[R];return L||(f[R]=L=g([A,k,C,P,D,F])),L(w.shape.slice(0),w.data,w.stride,0|w.offset,y.data,y.stride,0|y.offset,M.data,M.stride,0|M.offset)}}};function l(g){return(0,a[g.funcName])(i.bind(void 0,g))}function i(g){return o[g.funcName]}function d(g){return l({funcName:g.funcName})}var u={},s={},c=d({funcName:"cdiff"}),h=d({funcName:"zero"});function p(g){return g in u?u[g]:u[g]=d({funcName:"fdTemplate"+g})}function v(g,f,w,y){return function(M,A){var k=A.shape.slice();return k[0]>2&&k[1]>2&&y(A.pick(-1,-1).lo(1,1).hi(k[0]-2,k[1]-2),M.pick(-1,-1,0).lo(1,1).hi(k[0]-2,k[1]-2),M.pick(-1,-1,1).lo(1,1).hi(k[0]-2,k[1]-2)),k[1]>2&&(w(A.pick(0,-1).lo(1).hi(k[1]-2),M.pick(0,-1,1).lo(1).hi(k[1]-2)),f(M.pick(0,-1,0).lo(1).hi(k[1]-2))),k[1]>2&&(w(A.pick(k[0]-1,-1).lo(1).hi(k[1]-2),M.pick(k[0]-1,-1,1).lo(1).hi(k[1]-2)),f(M.pick(k[0]-1,-1,0).lo(1).hi(k[1]-2))),k[0]>2&&(w(A.pick(-1,0).lo(1).hi(k[0]-2),M.pick(-1,0,0).lo(1).hi(k[0]-2)),f(M.pick(-1,0,1).lo(1).hi(k[0]-2))),k[0]>2&&(w(A.pick(-1,k[1]-1).lo(1).hi(k[0]-2),M.pick(-1,k[1]-1,0).lo(1).hi(k[0]-2)),f(M.pick(-1,k[1]-1,1).lo(1).hi(k[0]-2))),M.set(0,0,0,0),M.set(0,0,1,0),M.set(k[0]-1,0,0,0),M.set(k[0]-1,0,1,0),M.set(0,k[1]-1,0,0),M.set(0,k[1]-1,1,0),M.set(k[0]-1,k[1]-1,0,0),M.set(k[0]-1,k[1]-1,1,0),M}}T.exports=function(g,f,w){return Array.isArray(w)||(w=e(f.dimension,"string"==typeof w?w:"clamp")),0===f.size?g:0===f.dimension?(g.set(0),g):function(y){var M=y.join();if(P=s[M])return P;for(var A=y.length,k=[c,h],C=1;C<=A;++C)k.push(p(C));var P=v.apply(void 0,k);return s[M]=P,P}(w)(g,f)}},{dup:65}],253:[function(x,T,b){"use strict";function e(i,d){var u=Math.floor(d),s=d-u,h=0<=u+1&&u+1<i.shape[0];return(1-s)*(0<=u&&u<i.shape[0]?+i.get(u):0)+s*(h?+i.get(u+1):0)}function o(i,d,u){var s=Math.floor(d),c=d-s,h=0<=s&&s<i.shape[0],p=0<=s+1&&s+1<i.shape[0],v=Math.floor(u),g=u-v,f=0<=v&&v<i.shape[1],w=0<=v+1&&v+1<i.shape[1],y=h&&f?i.get(s,v):0,M=h&&w?i.get(s,v+1):0;return(1-g)*((1-c)*y+c*(p&&f?i.get(s+1,v):0))+g*((1-c)*M+c*(p&&w?i.get(s+1,v+1):0))}function a(i,d,u,s){var c=Math.floor(d),h=d-c,p=0<=c&&c<i.shape[0],v=0<=c+1&&c+1<i.shape[0],g=Math.floor(u),f=u-g,w=0<=g&&g<i.shape[1],y=0<=g+1&&g+1<i.shape[1],M=Math.floor(s),A=s-M,k=0<=M&&M<i.shape[2],C=0<=M+1&&M+1<i.shape[2],P=p&&w&&k?i.get(c,g,M):0,D=p&&y&&k?i.get(c,g+1,M):0,F=v&&w&&k?i.get(c+1,g,M):0,R=v&&y&&k?i.get(c+1,g+1,M):0,L=p&&w&&C?i.get(c,g,M+1):0,I=p&&y&&C?i.get(c,g+1,M+1):0;return(1-A)*((1-f)*((1-h)*P+h*F)+f*((1-h)*D+h*R))+A*((1-f)*((1-h)*L+h*(v&&w&&C?i.get(c+1,g,M+1):0))+f*((1-h)*I+h*(v&&y&&C?i.get(c+1,g+1,M+1):0)))}function l(i){var d,u,s=0|i.shape.length,c=new Array(s),h=new Array(s),p=new Array(s),v=new Array(s);for(d=0;d<s;++d)u=+arguments[d+1],c[d]=Math.floor(u),h[d]=u-c[d],p[d]=0<=c[d]&&c[d]<i.shape[d],v[d]=0<=c[d]+1&&c[d]+1<i.shape[d];var g,f,w,y=0;e:for(d=0;d<1<<s;++d){for(f=1,w=i.offset,g=0;g<s;++g)if(d&1<<g){if(!v[g])continue e;f*=h[g],w+=i.stride[g]*(c[g]+1)}else{if(!p[g])continue e;f*=1-h[g],w+=i.stride[g]*c[g]}y+=f*i.data[w]}return y}T.exports=function(i,d,u,s){switch(i.shape.length){case 0:return 0;case 1:return e(i,d);case 2:return o(i,d,u);case 3:return a(i,d,u,s);default:return l.apply(void 0,arguments)}},T.exports.d1=e,T.exports.d2=o,T.exports.d3=a},{}],254:[function(x,T,b){"use strict";var e={"float64,2,1,0":function(){return function(d,u,s,c,h){var p=d[0],v=d[1],g=d[2],w=s[1],y=s[2];c|=0;var M=0,A=0,k=0,C=y,P=w-g*y,D=s[0]-v*w;for(k=0;k<p;++k){for(A=0;A<v;++A){for(M=0;M<g;++M)u[c]/=h,c+=C;c+=P}c+=D}}},"uint8,2,0,1,float64,2,1,0":function(){return function(d,u,s,c,h,p,v,g){for(var f=d[0],w=d[1],y=d[2],M=s[0],A=s[1],k=s[2],C=p[0],P=p[1],D=p[2],F=c|=0,R=v|=0,L=0|d[0];L>0;){L<64?(f=L,L=0):(f=64,L-=64);for(var I=0|d[1];I>0;){I<64?(w=I,I=0):(w=64,I-=64),c=F+L*M+I*A,v=R+L*C+I*P;var B=0,V=0,Z=0,Y=k,ee=M-y*k,J=A-f*M,$=D,Q=C-y*D,se=P-f*C;for(Z=0;Z<w;++Z){for(V=0;V<f;++V){for(B=0;B<y;++B)u[c]=h[v]*g,c+=Y,v+=$;c+=ee,v+=Q}c+=J,v+=se}}}}},"float32,1,0,float32,1,0":function(){return function(d,u,s,c,h,p,v){var g=d[0],f=d[1],y=s[1],A=p[1];c|=0,v|=0;var k=0,C=0,P=y,D=s[0]-f*y,F=A,R=p[0]-f*A;for(C=0;C<g;++C){for(k=0;k<f;++k)u[c]=h[v],c+=P,v+=F;c+=D,v+=R}}},"float32,1,0,float32,0,1":function(){return function(d,u,s,c,h,p,v){for(var g=d[0],f=d[1],w=s[0],y=s[1],M=p[0],A=p[1],k=c|=0,C=v|=0,P=0|d[1];P>0;){P<64?(f=P,P=0):(f=64,P-=64);for(var D=0|d[0];D>0;){D<64?(g=D,D=0):(g=64,D-=64),c=k+P*y+D*w,v=C+P*A+D*M;var F=0,R=0,L=y,I=w-f*y,B=A,V=M-f*A;for(R=0;R<g;++R){for(F=0;F<f;++F)u[c]=h[v],c+=L,v+=B;c+=I,v+=V}}}}},"uint8,2,0,1,uint8,1,2,0":function(){return function(d,u,s,c,h,p,v){for(var g=d[0],f=d[1],w=d[2],y=s[0],M=s[1],A=s[2],k=p[0],C=p[1],P=p[2],D=c|=0,F=v|=0,R=0|d[2];R>0;){R<64?(w=R,R=0):(w=64,R-=64);for(var L=0|d[0];L>0;){L<64?(g=L,L=0):(g=64,L-=64);for(var I=0|d[1];I>0;){I<64?(f=I,I=0):(f=64,I-=64),c=D+R*A+L*y+I*M,v=F+R*P+L*k+I*C;var B=0,V=0,Z=0,Y=A,ee=y-w*A,J=M-g*y,$=P,Q=k-w*P,se=C-g*k;for(Z=0;Z<f;++Z){for(V=0;V<g;++V){for(B=0;B<w;++B)u[c]=h[v],c+=Y,v+=$;c+=ee,v+=Q}c+=J,v+=se}}}}}},"uint8,2,0,1,array,2,0,1":function(){return function(d,u,s,c,h,p,v){var g=d[0],f=d[1],w=d[2],y=s[0],A=s[2],k=p[0],P=p[2];c|=0,v|=0;var D=0,F=0,R=0,L=A,I=y-w*A,B=s[1]-g*y,V=P,Z=k-w*P,Y=p[1]-g*k;for(R=0;R<f;++R){for(F=0;F<g;++F){for(D=0;D<w;++D)u[c]=h[v],c+=L,v+=V;c+=I,v+=Z}c+=B,v+=Y}}}},o=function(d,u){var s=u.join(",");return(0,e[s])()},a={mul:function(d){var u={};return function(s,c,h){var p=s.dtype,v=s.order,g=c.dtype,f=c.order,w=h.dtype,y=h.order,M=[p,v.join(),g,f.join(),w,y.join()].join(),A=u[M];return A||(u[M]=A=d([p,v,g,f,w,y])),A(s.shape.slice(0),s.data,s.stride,0|s.offset,c.data,c.stride,0|c.offset,h.data,h.stride,0|h.offset)}},muls:function(d){var u={};return function(s,c,h){var p=s.dtype,v=s.order,g=c.dtype,f=c.order,w=[p,v.join(),g,f.join()].join(),y=u[w];return y||(u[w]=y=d([p,v,g,f])),y(s.shape.slice(0),s.data,s.stride,0|s.offset,c.data,c.stride,0|c.offset,h)}},mulseq:function(d){var u={};return function(s,c){var h=s.dtype,p=s.order,v=[h,p.join()].join(),g=u[v];return g||(u[v]=g=d([h,p])),g(s.shape.slice(0),s.data,s.stride,0|s.offset,c)}},div:function(d){var u={};return function(s,c,h){var p=s.dtype,v=s.order,g=c.dtype,f=c.order,w=h.dtype,y=h.order,M=[p,v.join(),g,f.join(),w,y.join()].join(),A=u[M];return A||(u[M]=A=d([p,v,g,f,w,y])),A(s.shape.slice(0),s.data,s.stride,0|s.offset,c.data,c.stride,0|c.offset,h.data,h.stride,0|h.offset)}},divs:function(d){var u={};return function(s,c,h){var p=s.dtype,v=s.order,g=c.dtype,f=c.order,w=[p,v.join(),g,f.join()].join(),y=u[w];return y||(u[w]=y=d([p,v,g,f])),y(s.shape.slice(0),s.data,s.stride,0|s.offset,c.data,c.stride,0|c.offset,h)}},divseq:function(d){var u={};return function(s,c){var h=s.dtype,p=s.order,v=[h,p.join()].join(),g=u[v];return g||(u[v]=g=d([h,p])),g(s.shape.slice(0),s.data,s.stride,0|s.offset,c)}},assign:function(d){var u={};return function(s,c){var h=s.dtype,p=s.order,v=c.dtype,g=c.order,f=[h,p.join(),v,g.join()].join(),w=u[f];return w||(u[f]=w=d([h,p,v,g])),w(s.shape.slice(0),s.data,s.stride,0|s.offset,c.data,c.stride,0|c.offset)}}};function l(d){return(0,a[(u={funcName:d.funcName}).funcName])(o.bind(void 0,u));var u}var i={mul:"*",div:"/"};(function(){for(var d in i)b[d]=l({funcName:d}),b[d+"s"]=l({funcName:d+"s"}),b[d+"seq"]=l({funcName:d+"seq"})})(),b.assign=l({funcName:"assign"})},{}],255:[function(x,T,b){"use strict";var e=x("ndarray"),o=x("./doConvert.js");T.exports=function(a,l){for(var i=[],d=a,u=1;Array.isArray(d);)i.push(d.length),u*=d.length,d=d[0];return 0===i.length?e():(l||(l=e(new Float64Array(u),i)),o(l,a),l)}},{"./doConvert.js":256,ndarray:259}],256:[function(x,T,b){"use strict";var a,l;T.exports=(a=function(){return function(a,l,i,d,u){var s=a[0],c=a[1],h=a[2],v=i[1],g=i[2],f=[0,0,0];d|=0;var w=0,y=0,M=0,A=g,k=v-h*g,C=i[0]-c*v;for(M=0;M<s;++M){for(y=0;y<c;++y){for(w=0;w<h;++w){var P,D=u;for(P=0;P<f.length-1;++P)D=D[f[P]];l[d]=D[f[f.length-1]],d+=A,++f[2]}d+=k,f[2]-=h,++f[1]}d+=C,f[1]-=c,++f[0]}}}.bind(void 0,{funcName:"convert"}),l={},function(i,d){var u=i.dtype,s=i.order,c=[u,s.join()].join(),h=l[c];return h||(l[c]=h=a([u,s])),h(i.shape.slice(0),i.data,i.stride,0|i.offset,d)})},{}],257:[function(x,T,b){"use strict";var e=x("typedarray-pool");function o(d){return"uint32"===d?[e.mallocUint32,e.freeUint32]:null}var a={"uint32,1,0":function(d,u){return function(s,c,h,p,v,g,f,w,y,M,A){var k,C,P,D,F,R,L,I,B=s*v+p,V=d(w);for(k=s+1;k<=c;++k){for(C=k,P=B+=v,F=0,R=B,D=0;D<w;++D)V[F++]=h[R],R+=y;e:for(;C-- >s;){F=0,R=P-v;t:for(D=0;D<w;++D){if((L=h[R])<(I=V[F]))break e;if(L>I)break t;R+=M,F+=A}for(F=P,R=P-v,D=0;D<w;++D)h[F]=h[R],F+=y,R+=y;P-=v}for(F=P,R=0,D=0;D<w;++D)h[F]=V[R++],F+=y}u(V)}}},l={"uint32,1,0":function(d,u,s){return function c(h,p,v,g,f,w,y,M,A,k,C){var P,D,R,L,I,B,V,Z,Y,ee,J,$,Q,se,j,G,W,ie,q,te,ne,le,ue,de,he=(p-h+1)/6|0,be=h+he,ge=p-he,we=h+p>>1,Ce=we-he,De=we+he,Se=be,Fe=Ce,ve=we,Te=De,Le=ge,Ee=h+1,Pe=p-1,je=!0,Ge=0,Ke=0,lt=0,Ue=M,$e=u(Ue),et=u(Ue);ee=f*Se,J=f*Fe,de=g;e:for(Y=0;Y<M;++Y){if((lt=v[B=ee+de]-v[V=J+de])>0){D=Se,Se=Fe,Fe=D;break e}if(lt<0)break e;de+=k}ee=f*Te,J=f*Le,de=g;e:for(Y=0;Y<M;++Y){if((lt=v[B=ee+de]-v[V=J+de])>0){D=Te,Te=Le,Le=D;break e}if(lt<0)break e;de+=k}ee=f*Se,J=f*ve,de=g;e:for(Y=0;Y<M;++Y){if((lt=v[B=ee+de]-v[V=J+de])>0){D=Se,Se=ve,ve=D;break e}if(lt<0)break e;de+=k}ee=f*Fe,J=f*ve,de=g;e:for(Y=0;Y<M;++Y){if((lt=v[B=ee+de]-v[V=J+de])>0){D=Fe,Fe=ve,ve=D;break e}if(lt<0)break e;de+=k}ee=f*Se,J=f*Te,de=g;e:for(Y=0;Y<M;++Y){if((lt=v[B=ee+de]-v[V=J+de])>0){D=Se,Se=Te,Te=D;break e}if(lt<0)break e;de+=k}ee=f*ve,J=f*Te,de=g;e:for(Y=0;Y<M;++Y){if((lt=v[B=ee+de]-v[V=J+de])>0){D=ve,ve=Te,Te=D;break e}if(lt<0)break e;de+=k}ee=f*Fe,J=f*Le,de=g;e:for(Y=0;Y<M;++Y){if((lt=v[B=ee+de]-v[V=J+de])>0){D=Fe,Fe=Le,Le=D;break e}if(lt<0)break e;de+=k}ee=f*Fe,J=f*ve,de=g;e:for(Y=0;Y<M;++Y){if((lt=v[B=ee+de]-v[V=J+de])>0){D=Fe,Fe=ve,ve=D;break e}if(lt<0)break e;de+=k}ee=f*Te,J=f*Le,de=g;e:for(Y=0;Y<M;++Y){if((lt=v[B=ee+de]-v[V=J+de])>0){D=Te,Te=Le,Le=D;break e}if(lt<0)break e;de+=k}for(ee=f*Se,J=f*Fe,$=f*ve,Q=f*Te,se=f*Le,j=f*be,G=f*we,W=f*ge,ue=0,de=g,Y=0;Y<M;++Y)B=ee+de,Z=$+de,ie=Q+de,q=se+de,te=j+de,ne=G+de,le=W+de,$e[ue]=v[V=J+de],et[ue]=v[ie],je=je&&$e[ue]===et[ue],R=v[Z],L=v[q],v[te]=v[B],v[ne]=R,v[le]=L,++ue,de+=A;for(ee=f*Ce,J=f*h,de=g,Y=0;Y<M;++Y)v[B=ee+de]=v[V=J+de],de+=A;for(ee=f*De,J=f*p,de=g,Y=0;Y<M;++Y)v[B=ee+de]=v[V=J+de],de+=A;if(je)for(I=Ee;I<=Pe;++I){for(B=g+I*f,ue=0,Y=0;Y<M&&0==(lt=v[B]-$e[ue]);++Y)ue+=C,B+=k;if(0!==lt)if(lt<0){if(I!==Ee)for(ee=f*I,J=f*Ee,de=g,Y=0;Y<M;++Y)P=v[B=ee+de],v[B]=v[V=J+de],v[V]=P,de+=A;++Ee}else for(;;){for(B=g+Pe*f,ue=0,Y=0;Y<M&&0==(lt=v[B]-$e[ue]);++Y)ue+=C,B+=k;if(!(lt>0)){if(lt<0){for(ee=f*I,J=f*Ee,$=f*Pe,de=g,Y=0;Y<M;++Y)Z=$+de,P=v[B=ee+de],v[B]=v[V=J+de],v[V]=v[Z],v[Z]=P,de+=A;++Ee,--Pe;break}for(ee=f*I,J=f*Pe,de=g,Y=0;Y<M;++Y)P=v[B=ee+de],v[B]=v[V=J+de],v[V]=P,de+=A;--Pe;break}Pe--}}else for(I=Ee;I<=Pe;++I){for(B=g+I*f,ue=0,Y=0;Y<M&&0==(Ge=v[B]-$e[ue]);++Y)ue+=C,B+=k;if(Ge<0){if(I!==Ee)for(ee=f*I,J=f*Ee,de=g,Y=0;Y<M;++Y)P=v[B=ee+de],v[B]=v[V=J+de],v[V]=P,de+=A;++Ee}else{for(B=g+I*f,ue=0,Y=0;Y<M&&0==(Ke=v[B]-et[ue]);++Y)ue+=C,B+=k;if(Ke>0)for(;;){for(B=g+Pe*f,ue=0,Y=0;Y<M&&0==(lt=v[B]-et[ue]);++Y)ue+=C,B+=k;if(!(lt>0)){for(B=g+Pe*f,ue=0,Y=0;Y<M&&0==(lt=v[B]-$e[ue]);++Y)ue+=C,B+=k;if(lt<0){for(ee=f*I,J=f*Ee,$=f*Pe,de=g,Y=0;Y<M;++Y)Z=$+de,P=v[B=ee+de],v[B]=v[V=J+de],v[V]=v[Z],v[Z]=P,de+=A;++Ee,--Pe}else{for(ee=f*I,J=f*Pe,de=g,Y=0;Y<M;++Y)P=v[B=ee+de],v[B]=v[V=J+de],v[V]=P,de+=A;--Pe}break}if(--Pe<I)break}}}for(ee=f*h,J=f*(Ee-1),ue=0,de=g,Y=0;Y<M;++Y)v[B=ee+de]=v[V=J+de],v[V]=$e[ue],++ue,de+=A;for(ee=f*p,J=f*(Pe+1),ue=0,de=g,Y=0;Y<M;++Y)v[B=ee+de]=v[V=J+de],v[V]=et[ue],++ue,de+=A;if(Ee-2-h<=32?d(h,Ee-2,v,g,f,w,y,M,A,k,C):c(h,Ee-2,v,g,f,w,y,M,A,k,C),p-(Pe+2)<=32?d(Pe+2,p,v,g,f,w,y,M,A,k,C):c(Pe+2,p,v,g,f,w,y,M,A,k,C),je)return s($e),void s(et);if(Ee<be&&Pe>ge){e:for(;;){for(B=g+Ee*f,ue=0,de=g,Y=0;Y<M;++Y){if(v[B]!==$e[ue])break e;++ue,B+=A}++Ee}e:for(;;){for(B=g+Pe*f,ue=0,de=g,Y=0;Y<M;++Y){if(v[B]!==et[ue])break e;++ue,B+=A}--Pe}for(I=Ee;I<=Pe;++I){for(B=g+I*f,ue=0,Y=0;Y<M&&0==(Ge=v[B]-$e[ue]);++Y)ue+=C,B+=k;if(0===Ge){if(I!==Ee)for(ee=f*I,J=f*Ee,de=g,Y=0;Y<M;++Y)P=v[B=ee+de],v[B]=v[V=J+de],v[V]=P,de+=A;++Ee}else{for(B=g+I*f,ue=0,Y=0;Y<M&&0==(Ke=v[B]-et[ue]);++Y)ue+=C,B+=k;if(0===Ke)for(;;){for(B=g+Pe*f,ue=0,Y=0;Y<M&&0==(lt=v[B]-et[ue]);++Y)ue+=C,B+=k;if(0!==lt){for(B=g+Pe*f,ue=0,Y=0;Y<M&&0==(lt=v[B]-$e[ue]);++Y)ue+=C,B+=k;if(lt<0){for(ee=f*I,J=f*Ee,$=f*Pe,de=g,Y=0;Y<M;++Y)Z=$+de,P=v[B=ee+de],v[B]=v[V=J+de],v[V]=v[Z],v[Z]=P,de+=A;++Ee,--Pe}else{for(ee=f*I,J=f*Pe,de=g,Y=0;Y<M;++Y)P=v[B=ee+de],v[B]=v[V=J+de],v[V]=P,de+=A;--Pe}break}if(--Pe<I)break}}}}s($e),s(et),Pe-Ee<=32?d(Ee,Pe,v,g,f,w,y,M,A,k,C):c(Ee,Pe,v,g,f,w,y,M,A,k,C)}}},i={"uint32,1,0":function(d,u){return function(s){var c=s.data,h=0|s.offset,p=s.shape,v=s.stride,g=0|v[0],f=0|p[0],w=0|v[1],y=0|p[1],M=w,A=w;f<=32?d(0,f-1,c,h,g,w,f,y,M,A,1):u(0,f-1,c,h,g,w,f,y,M,A,1)}}};T.exports=function(d,u){var v,g,f,w,y,s=[u,d].join(","),c=i[s],h=(v=d,f=o(g=u),w=[g,v].join(","),y=a[w],f?y(f[0],f[1]):y()),p=function(v,g,f){var w=o(g),y=[g,v].join(","),M=l[y];return v.length>1&&w?M(f,w[0],w[1]):M(f)}(d,u,h);return c(h,p)}},{"typedarray-pool":308}],258:[function(x,T,b){"use strict";var e=x("./lib/compile_sort.js"),o={};T.exports=function(a){var l=a.order,i=a.dtype,d=[l,i].join(":"),u=o[d];return u||(o[d]=u=e(l,i)),u(a),a}},{"./lib/compile_sort.js":257}],259:[function(x,T,b){var e=x("is-buffer"),o="undefined"!=typeof Float64Array;function a(s,c){return s[0]-c[0]}function l(){var s,c=this.stride,h=new Array(c.length);for(s=0;s<h.length;++s)h[s]=[Math.abs(c[s]),s];h.sort(a);var p=new Array(h.length);for(s=0;s<p.length;++s)p[s]=h[s][1];return p}var i={T:function(s){function c(p){this.data=p}var h=c.prototype;return h.dtype=s,h.index=function(){return-1},h.size=0,h.dimension=-1,h.shape=h.stride=h.order=[],h.lo=h.hi=h.transpose=h.step=function(){return new c(this.data)},h.get=h.set=function(){},h.pick=function(){return null},function(p){return new c(p)}},0:function(s,c){function h(v,g){this.data=v,this.offset=g}var p=h.prototype;return p.dtype=s,p.index=function(){return this.offset},p.dimension=0,p.size=1,p.shape=p.stride=p.order=[],p.lo=p.hi=p.transpose=p.step=function(){return new h(this.data,this.offset)},p.pick=function(){return c(this.data)},p.valueOf=p.get=function(){return"generic"===s?this.data.get(this.offset):this.data[this.offset]},p.set=function(v){return"generic"===s?this.data.set(this.offset,v):this.data[this.offset]=v},function(v,g,f,w){return new h(v,w)}},1:function(s,c,h){function p(g,f,w,y){this.data=g,this.shape=[f],this.stride=[w],this.offset=0|y}var v=p.prototype;return v.dtype=s,v.dimension=1,Object.defineProperty(v,"size",{get:function(){return this.shape[0]}}),v.order=[0],v.set=function(g,f){return"generic"===s?this.data.set(this.offset+this.stride[0]*g,f):this.data[this.offset+this.stride[0]*g]=f},v.get=function(g){return"generic"===s?this.data.get(this.offset+this.stride[0]*g):this.data[this.offset+this.stride[0]*g]},v.index=function(g){return this.offset+this.stride[0]*g},v.hi=function(g){return new p(this.data,"number"!=typeof g||g<0?this.shape[0]:0|g,this.stride[0],this.offset)},v.lo=function(g){var f=this.offset,w=0,y=this.shape[0],M=this.stride[0];return"number"==typeof g&&g>=0&&(f+=M*(w=0|g),y-=w),new p(this.data,y,M,f)},v.step=function(g){var f=this.shape[0],w=this.stride[0],y=this.offset,M=0,A=Math.ceil;return"number"==typeof g&&((M=0|g)<0?(y+=w*(f-1),f=A(-f/M)):f=A(f/M),w*=M),new p(this.data,f,w,y)},v.transpose=function(g){return new p(this.data,this.shape[g=void 0===g?0:0|g],this.stride[g],this.offset)},v.pick=function(g){var f=[],w=[],y=this.offset;return"number"==typeof g&&g>=0?y=y+this.stride[0]*g|0:(f.push(this.shape[0]),w.push(this.stride[0])),(0,c[f.length+1])(this.data,f,w,y)},function(g,f,w,y){return new p(g,f[0],w[0],y)}},2:function(s,c,h){function p(g,f,w,y,M,A){this.data=g,this.shape=[f,w],this.stride=[y,M],this.offset=0|A}var v=p.prototype;return v.dtype=s,v.dimension=2,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]}}),Object.defineProperty(v,"order",{get:function(){return Math.abs(this.stride[0])>Math.abs(this.stride[1])?[1,0]:[0,1]}}),v.set=function(g,f,w){return"generic"===s?this.data.set(this.offset+this.stride[0]*g+this.stride[1]*f,w):this.data[this.offset+this.stride[0]*g+this.stride[1]*f]=w},v.get=function(g,f){return"generic"===s?this.data.get(this.offset+this.stride[0]*g+this.stride[1]*f):this.data[this.offset+this.stride[0]*g+this.stride[1]*f]},v.index=function(g,f){return this.offset+this.stride[0]*g+this.stride[1]*f},v.hi=function(g,f){return new p(this.data,"number"!=typeof g||g<0?this.shape[0]:0|g,"number"!=typeof f||f<0?this.shape[1]:0|f,this.stride[0],this.stride[1],this.offset)},v.lo=function(g,f){var w=this.offset,y=0,M=this.shape[0],A=this.shape[1],k=this.stride[0],C=this.stride[1];return"number"==typeof g&&g>=0&&(w+=k*(y=0|g),M-=y),"number"==typeof f&&f>=0&&(w+=C*(y=0|f),A-=y),new p(this.data,M,A,k,C,w)},v.step=function(g,f){var w=this.shape[0],y=this.shape[1],M=this.stride[0],A=this.stride[1],k=this.offset,C=0,P=Math.ceil;return"number"==typeof g&&((C=0|g)<0?(k+=M*(w-1),w=P(-w/C)):w=P(w/C),M*=C),"number"==typeof f&&((C=0|f)<0?(k+=A*(y-1),y=P(-y/C)):y=P(y/C),A*=C),new p(this.data,w,y,M,A,k)},v.transpose=function(g,f){var w=this.shape,y=this.stride;return new p(this.data,w[g=void 0===g?0:0|g],w[f=void 0===f?1:0|f],y[g],y[f],this.offset)},v.pick=function(g,f){var w=[],y=[],M=this.offset;return"number"==typeof g&&g>=0?M=M+this.stride[0]*g|0:(w.push(this.shape[0]),y.push(this.stride[0])),"number"==typeof f&&f>=0?M=M+this.stride[1]*f|0:(w.push(this.shape[1]),y.push(this.stride[1])),(0,c[w.length+1])(this.data,w,y,M)},function(g,f,w,y){return new p(g,f[0],f[1],w[0],w[1],y)}},3:function(s,c,h){function p(g,f,w,y,M,A,k,C){this.data=g,this.shape=[f,w,y],this.stride=[M,A,k],this.offset=0|C}var v=p.prototype;return v.dtype=s,v.dimension=3,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]}}),Object.defineProperty(v,"order",{get:function(){var g=Math.abs(this.stride[0]),f=Math.abs(this.stride[1]),w=Math.abs(this.stride[2]);return g>f?f>w?[2,1,0]:g>w?[1,2,0]:[1,0,2]:g>w?[2,0,1]:w>f?[0,1,2]:[0,2,1]}}),v.set=function(g,f,w,y){return"generic"===s?this.data.set(this.offset+this.stride[0]*g+this.stride[1]*f+this.stride[2]*w,y):this.data[this.offset+this.stride[0]*g+this.stride[1]*f+this.stride[2]*w]=y},v.get=function(g,f,w){return"generic"===s?this.data.get(this.offset+this.stride[0]*g+this.stride[1]*f+this.stride[2]*w):this.data[this.offset+this.stride[0]*g+this.stride[1]*f+this.stride[2]*w]},v.index=function(g,f,w){return this.offset+this.stride[0]*g+this.stride[1]*f+this.stride[2]*w},v.hi=function(g,f,w){return new p(this.data,"number"!=typeof g||g<0?this.shape[0]:0|g,"number"!=typeof f||f<0?this.shape[1]:0|f,"number"!=typeof w||w<0?this.shape[2]:0|w,this.stride[0],this.stride[1],this.stride[2],this.offset)},v.lo=function(g,f,w){var y=this.offset,M=0,A=this.shape[0],k=this.shape[1],C=this.shape[2],P=this.stride[0],D=this.stride[1],F=this.stride[2];return"number"==typeof g&&g>=0&&(y+=P*(M=0|g),A-=M),"number"==typeof f&&f>=0&&(y+=D*(M=0|f),k-=M),"number"==typeof w&&w>=0&&(y+=F*(M=0|w),C-=M),new p(this.data,A,k,C,P,D,F,y)},v.step=function(g,f,w){var y=this.shape[0],M=this.shape[1],A=this.shape[2],k=this.stride[0],C=this.stride[1],P=this.stride[2],D=this.offset,F=0,R=Math.ceil;return"number"==typeof g&&((F=0|g)<0?(D+=k*(y-1),y=R(-y/F)):y=R(y/F),k*=F),"number"==typeof f&&((F=0|f)<0?(D+=C*(M-1),M=R(-M/F)):M=R(M/F),C*=F),"number"==typeof w&&((F=0|w)<0?(D+=P*(A-1),A=R(-A/F)):A=R(A/F),P*=F),new p(this.data,y,M,A,k,C,P,D)},v.transpose=function(g,f,w){var y=this.shape,M=this.stride;return new p(this.data,y[g=void 0===g?0:0|g],y[f=void 0===f?1:0|f],y[w=void 0===w?2:0|w],M[g],M[f],M[w],this.offset)},v.pick=function(g,f,w){var y=[],M=[],A=this.offset;return"number"==typeof g&&g>=0?A=A+this.stride[0]*g|0:(y.push(this.shape[0]),M.push(this.stride[0])),"number"==typeof f&&f>=0?A=A+this.stride[1]*f|0:(y.push(this.shape[1]),M.push(this.stride[1])),"number"==typeof w&&w>=0?A=A+this.stride[2]*w|0:(y.push(this.shape[2]),M.push(this.stride[2])),(0,c[y.length+1])(this.data,y,M,A)},function(g,f,w,y){return new p(g,f[0],f[1],f[2],w[0],w[1],w[2],y)}},4:function(s,c,h){function p(g,f,w,y,M,A,k,C,P,D){this.data=g,this.shape=[f,w,y,M],this.stride=[A,k,C,P],this.offset=0|D}var v=p.prototype;return v.dtype=s,v.dimension=4,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]}}),Object.defineProperty(v,"order",{get:h}),v.set=function(g,f,w,y,M){return"generic"===s?this.data.set(this.offset+this.stride[0]*g+this.stride[1]*f+this.stride[2]*w+this.stride[3]*y,M):this.data[this.offset+this.stride[0]*g+this.stride[1]*f+this.stride[2]*w+this.stride[3]*y]=M},v.get=function(g,f,w,y){return"generic"===s?this.data.get(this.offset+this.stride[0]*g+this.stride[1]*f+this.stride[2]*w+this.stride[3]*y):this.data[this.offset+this.stride[0]*g+this.stride[1]*f+this.stride[2]*w+this.stride[3]*y]},v.index=function(g,f,w,y){return this.offset+this.stride[0]*g+this.stride[1]*f+this.stride[2]*w+this.stride[3]*y},v.hi=function(g,f,w,y){return new p(this.data,"number"!=typeof g||g<0?this.shape[0]:0|g,"number"!=typeof f||f<0?this.shape[1]:0|f,"number"!=typeof w||w<0?this.shape[2]:0|w,"number"!=typeof y||y<0?this.shape[3]:0|y,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.offset)},v.lo=function(g,f,w,y){var M=this.offset,A=0,k=this.shape[0],C=this.shape[1],P=this.shape[2],D=this.shape[3],F=this.stride[0],R=this.stride[1],L=this.stride[2],I=this.stride[3];return"number"==typeof g&&g>=0&&(M+=F*(A=0|g),k-=A),"number"==typeof f&&f>=0&&(M+=R*(A=0|f),C-=A),"number"==typeof w&&w>=0&&(M+=L*(A=0|w),P-=A),"number"==typeof y&&y>=0&&(M+=I*(A=0|y),D-=A),new p(this.data,k,C,P,D,F,R,L,I,M)},v.step=function(g,f,w,y){var M=this.shape[0],A=this.shape[1],k=this.shape[2],C=this.shape[3],P=this.stride[0],D=this.stride[1],F=this.stride[2],R=this.stride[3],L=this.offset,I=0,B=Math.ceil;return"number"==typeof g&&((I=0|g)<0?(L+=P*(M-1),M=B(-M/I)):M=B(M/I),P*=I),"number"==typeof f&&((I=0|f)<0?(L+=D*(A-1),A=B(-A/I)):A=B(A/I),D*=I),"number"==typeof w&&((I=0|w)<0?(L+=F*(k-1),k=B(-k/I)):k=B(k/I),F*=I),"number"==typeof y&&((I=0|y)<0?(L+=R*(C-1),C=B(-C/I)):C=B(C/I),R*=I),new p(this.data,M,A,k,C,P,D,F,R,L)},v.transpose=function(g,f,w,y){var M=this.shape,A=this.stride;return new p(this.data,M[g=void 0===g?0:0|g],M[f=void 0===f?1:0|f],M[w=void 0===w?2:0|w],M[y=void 0===y?3:0|y],A[g],A[f],A[w],A[y],this.offset)},v.pick=function(g,f,w,y){var M=[],A=[],k=this.offset;return"number"==typeof g&&g>=0?k=k+this.stride[0]*g|0:(M.push(this.shape[0]),A.push(this.stride[0])),"number"==typeof f&&f>=0?k=k+this.stride[1]*f|0:(M.push(this.shape[1]),A.push(this.stride[1])),"number"==typeof w&&w>=0?k=k+this.stride[2]*w|0:(M.push(this.shape[2]),A.push(this.stride[2])),"number"==typeof y&&y>=0?k=k+this.stride[3]*y|0:(M.push(this.shape[3]),A.push(this.stride[3])),(0,c[M.length+1])(this.data,M,A,k)},function(g,f,w,y){return new p(g,f[0],f[1],f[2],f[3],w[0],w[1],w[2],w[3],y)}},5:function(s,c,h){function p(g,f,w,y,M,A,k,C,P,D,F,R){this.data=g,this.shape=[f,w,y,M,A],this.stride=[k,C,P,D,F],this.offset=0|R}var v=p.prototype;return v.dtype=s,v.dimension=5,Object.defineProperty(v,"size",{get:function(){return this.shape[0]*this.shape[1]*this.shape[2]*this.shape[3]*this.shape[4]}}),Object.defineProperty(v,"order",{get:h}),v.set=function(g,f,w,y,M,A){return"generic"===s?this.data.set(this.offset+this.stride[0]*g+this.stride[1]*f+this.stride[2]*w+this.stride[3]*y+this.stride[4]*M,A):this.data[this.offset+this.stride[0]*g+this.stride[1]*f+this.stride[2]*w+this.stride[3]*y+this.stride[4]*M]=A},v.get=function(g,f,w,y,M){return"generic"===s?this.data.get(this.offset+this.stride[0]*g+this.stride[1]*f+this.stride[2]*w+this.stride[3]*y+this.stride[4]*M):this.data[this.offset+this.stride[0]*g+this.stride[1]*f+this.stride[2]*w+this.stride[3]*y+this.stride[4]*M]},v.index=function(g,f,w,y,M){return this.offset+this.stride[0]*g+this.stride[1]*f+this.stride[2]*w+this.stride[3]*y+this.stride[4]*M},v.hi=function(g,f,w,y,M){return new p(this.data,"number"!=typeof g||g<0?this.shape[0]:0|g,"number"!=typeof f||f<0?this.shape[1]:0|f,"number"!=typeof w||w<0?this.shape[2]:0|w,"number"!=typeof y||y<0?this.shape[3]:0|y,"number"!=typeof M||M<0?this.shape[4]:0|M,this.stride[0],this.stride[1],this.stride[2],this.stride[3],this.stride[4],this.offset)},v.lo=function(g,f,w,y,M){var A=this.offset,k=0,C=this.shape[0],P=this.shape[1],D=this.shape[2],F=this.shape[3],R=this.shape[4],L=this.stride[0],I=this.stride[1],B=this.stride[2],V=this.stride[3],Z=this.stride[4];return"number"==typeof g&&g>=0&&(A+=L*(k=0|g),C-=k),"number"==typeof f&&f>=0&&(A+=I*(k=0|f),P-=k),"number"==typeof w&&w>=0&&(A+=B*(k=0|w),D-=k),"number"==typeof y&&y>=0&&(A+=V*(k=0|y),F-=k),"number"==typeof M&&M>=0&&(A+=Z*(k=0|M),R-=k),new p(this.data,C,P,D,F,R,L,I,B,V,Z,A)},v.step=function(g,f,w,y,M){var A=this.shape[0],k=this.shape[1],C=this.shape[2],P=this.shape[3],D=this.shape[4],F=this.stride[0],R=this.stride[1],L=this.stride[2],I=this.stride[3],B=this.stride[4],V=this.offset,Z=0,Y=Math.ceil;return"number"==typeof g&&((Z=0|g)<0?(V+=F*(A-1),A=Y(-A/Z)):A=Y(A/Z),F*=Z),"number"==typeof f&&((Z=0|f)<0?(V+=R*(k-1),k=Y(-k/Z)):k=Y(k/Z),R*=Z),"number"==typeof w&&((Z=0|w)<0?(V+=L*(C-1),C=Y(-C/Z)):C=Y(C/Z),L*=Z),"number"==typeof y&&((Z=0|y)<0?(V+=I*(P-1),P=Y(-P/Z)):P=Y(P/Z),I*=Z),"number"==typeof M&&((Z=0|M)<0?(V+=B*(D-1),D=Y(-D/Z)):D=Y(D/Z),B*=Z),new p(this.data,A,k,C,P,D,F,R,L,I,B,V)},v.transpose=function(g,f,w,y,M){var A=this.shape,k=this.stride;return new p(this.data,A[g=void 0===g?0:0|g],A[f=void 0===f?1:0|f],A[w=void 0===w?2:0|w],A[y=void 0===y?3:0|y],A[M=void 0===M?4:0|M],k[g],k[f],k[w],k[y],k[M],this.offset)},v.pick=function(g,f,w,y,M){var A=[],k=[],C=this.offset;return"number"==typeof g&&g>=0?C=C+this.stride[0]*g|0:(A.push(this.shape[0]),k.push(this.stride[0])),"number"==typeof f&&f>=0?C=C+this.stride[1]*f|0:(A.push(this.shape[1]),k.push(this.stride[1])),"number"==typeof w&&w>=0?C=C+this.stride[2]*w|0:(A.push(this.shape[2]),k.push(this.stride[2])),"number"==typeof y&&y>=0?C=C+this.stride[3]*y|0:(A.push(this.shape[3]),k.push(this.stride[3])),"number"==typeof M&&M>=0?C=C+this.stride[4]*M|0:(A.push(this.shape[4]),k.push(this.stride[4])),(0,c[A.length+1])(this.data,A,k,C)},function(g,f,w,y){return new p(g,f[0],f[1],f[2],f[3],f[4],w[0],w[1],w[2],w[3],w[4],y)}}};function d(s,c){var h=-1===c?"T":String(c),p=i[h];return-1===c?p(s):0===c?p(s,u[s][0]):p(s,u[s],l)}var u={generic:[],buffer:[],array:[],float32:[],float64:[],int8:[],int16:[],int32:[],uint8_clamped:[],uint8:[],uint16:[],uint32:[],bigint64:[],biguint64:[]};T.exports=function(s,c,h,p){if(void 0===s)return(0,u.array[0])([]);"number"==typeof s&&(s=[s]),void 0===c&&(c=[s.length]);var v=c.length;if(void 0===h){h=new Array(v);for(var g=v-1,f=1;g>=0;--g)h[g]=f,f*=c[g]}if(void 0===p)for(p=0,g=0;g<v;++g)h[g]<0&&(p-=(c[g]-1)*h[g]);for(var w=function(M){if(e(M))return"buffer";if(o)switch(Object.prototype.toString.call(M)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(M)?"array":"generic"}(s),y=u[w];y.length<=v+1;)y.push(d(w,y.length-1));return(0,y[v+1])(s,c,h,p)}},{"is-buffer":237}],260:[function(x,T,b){"use strict";var e=x("double-bits"),o=Math.pow(2,-1074);T.exports=function(a,l){if(isNaN(a)||isNaN(l))return NaN;if(a===l)return a;if(0===a)return l<0?-o:o;var i=e.hi(a),d=e.lo(a);return l>a==a>0?d===-1>>>0?(i+=1,d=0):d+=1:0===d?(d=-1>>>0,i-=1):d-=1,e.pack(d,i)}},{"double-bits":64}],261:[function(x,T,b){b.vertexNormals=function(e,o,a){for(var l=o.length,i=new Array(l),d=void 0===a?1e-6:a,u=0;u<l;++u)i[u]=[0,0,0];for(u=0;u<e.length;++u)for(var s=e[u],h=s[s.length-1],p=s[0],v=0;v<s.length;++v){for(var g=o[h],f=o[h=p],w=o[p=s[(v+1)%s.length]],y=new Array(3),M=0,A=new Array(3),k=0,C=0;C<3;++C)y[C]=g[C]-f[C],M+=y[C]*y[C],A[C]=w[C]-f[C],k+=A[C]*A[C];if(M*k>d){var P=i[h],D=1/Math.sqrt(M*k);for(C=0;C<3;++C){var F=(C+1)%3,R=(C+2)%3;P[C]+=D*(A[F]*y[R]-A[R]*y[F])}}}for(u=0;u<l;++u){P=i[u];var L=0;for(C=0;C<3;++C)L+=P[C]*P[C];if(L>d)for(D=1/Math.sqrt(L),C=0;C<3;++C)P[C]*=D;else for(C=0;C<3;++C)P[C]=0}return i},b.faceNormals=function(e,o,a){for(var l=e.length,i=new Array(l),d=void 0===a?1e-6:a,u=0;u<l;++u){for(var s=e[u],c=new Array(3),h=0;h<3;++h)c[h]=o[s[h]];var p=new Array(3),v=new Array(3);for(h=0;h<3;++h)p[h]=c[1][h]-c[0][h],v[h]=c[2][h]-c[0][h];var g=new Array(3),f=0;for(h=0;h<3;++h){var w=(h+1)%3,y=(h+2)%3;g[h]=p[w]*v[y]-p[y]*v[w],f+=g[h]*g[h]}for(f=f>d?1/Math.sqrt(f):0,h=0;h<3;++h)g[h]*=f;i[u]=g}return i}},{}],262:[function(x,T,b){"use strict";T.exports=function(e,o,a,l,i,d,u,s,c,h){var p=o+d+h;if(v>0){var v=Math.sqrt(p+1);e[0]=.5*(u-c)/v,e[1]=.5*(s-l)/v,e[2]=.5*(a-d)/v,e[3]=.5*v}else{var g=Math.max(o,d,h);v=Math.sqrt(2*g-p+1),o>=g?(e[0]=.5*v,e[1]=.5*(i+a)/v,e[2]=.5*(s+l)/v,e[3]=.5*(u-c)/v):d>=g?(e[0]=.5*(a+i)/v,e[1]=.5*v,e[2]=.5*(c+u)/v,e[3]=.5*(s-l)/v):(e[0]=.5*(l+s)/v,e[1]=.5*(u+c)/v,e[2]=.5*v,e[3]=.5*(a-i)/v)}return e}},{}],263:[function(x,T,b){"use strict";T.exports=function(p){var v=(p=p||{}).center||[0,0,0],g=p.rotation||[0,0,0,1],f=p.radius||1;v=[].slice.call(v,0,3),s(g=[].slice.call(g,0,4),g);var w=new c(g,v,Math.log(f));return w.setDistanceLimits(p.zoomMin,p.zoomMax),("eye"in p||"up"in p)&&w.lookAt(0,p.eye,p.center,p.up),w};var e=x("filtered-vector"),o=x("gl-mat4/lookAt"),a=x("gl-mat4/fromQuat"),l=x("gl-mat4/invert"),i=x("./lib/quatFromFrame");function d(p,v,g){return Math.sqrt(Math.pow(p,2)+Math.pow(v,2)+Math.pow(g,2))}function u(p,v,g,f){return Math.sqrt(Math.pow(p,2)+Math.pow(v,2)+Math.pow(g,2)+Math.pow(f,2))}function s(p,v){var g=v[0],f=v[1],w=v[2],y=v[3],M=u(g,f,w,y);M>1e-6?(p[0]=g/M,p[1]=f/M,p[2]=w/M,p[3]=y/M):(p[0]=p[1]=p[2]=0,p[3]=1)}function c(p,v,g){this.radius=e([g]),this.center=e(v),this.rotation=e(p),this.computedRadius=this.radius.curve(0),this.computedCenter=this.center.curve(0),this.computedRotation=this.rotation.curve(0),this.computedUp=[.1,0,0],this.computedEye=[.1,0,0],this.computedMatrix=[.1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.recalcMatrix(0)}var h=c.prototype;h.lastT=function(){return Math.max(this.radius.lastT(),this.center.lastT(),this.rotation.lastT())},h.recalcMatrix=function(p){this.radius.curve(p),this.center.curve(p),this.rotation.curve(p);var v=this.computedRotation;s(v,v);var g=this.computedMatrix;a(g,v);var f=this.computedCenter,w=this.computedEye,y=this.computedUp,M=Math.exp(this.computedRadius[0]);w[0]=f[0]+M*g[2],w[1]=f[1]+M*g[6],w[2]=f[2]+M*g[10],y[0]=g[1],y[1]=g[5],y[2]=g[9];for(var A=0;A<3;++A){for(var k=0,C=0;C<3;++C)k+=g[A+4*C]*w[C];g[12+A]=-k}},h.getMatrix=function(p,v){this.recalcMatrix(p);var g=this.computedMatrix;if(v){for(var f=0;f<16;++f)v[f]=g[f];return v}return g},h.idle=function(p){this.center.idle(p),this.radius.idle(p),this.rotation.idle(p)},h.flush=function(p){this.center.flush(p),this.radius.flush(p),this.rotation.flush(p)},h.pan=function(p,v,g,f){v=v||0,g=g||0,f=f||0,this.recalcMatrix(p);var w=this.computedMatrix,y=w[1],M=w[5],A=w[9],k=d(y,M,A),C=w[0],P=w[4],D=w[8],F=C*(y/=k)+P*(M/=k)+D*(A/=k),R=d(C-=y*F,P-=M*F,D-=A*F),L=w[2],I=w[6],B=w[10],V=L*y+I*M+B*A,Z=L*(C/=R)+I*(P/=R)+B*(D/=R),Y=d(L-=V*y+Z*C,I-=V*M+Z*P,B-=V*A+Z*D);L/=Y,I/=Y,B/=Y,this.center.move(p,C*v+y*g,P*v+M*g,D*v+A*g);var Q=Math.exp(this.computedRadius[0]);Q=Math.max(1e-4,Q+f),this.radius.set(p,Math.log(Q))},h.rotate=function(p,v,g,f){this.recalcMatrix(p);var w=this.computedMatrix,D=w[2],F=w[6],R=w[10],L=(v=v||0)*w[0]+(g=g||0)*w[1],I=v*w[4]+g*w[5],B=v*w[8]+g*w[9],V=-(F*B-R*I),Z=-(R*L-D*B),Y=-(D*I-F*L),ee=Math.sqrt(Math.max(0,1-Math.pow(V,2)-Math.pow(Z,2)-Math.pow(Y,2))),J=u(V,Z,Y,ee);J>1e-6?(V/=J,Z/=J,Y/=J,ee/=J):(V=Z=Y=0,ee=1);var $=this.computedRotation,Q=$[0],se=$[1],j=$[2],G=$[3],W=Q*ee+G*V+se*Y-j*Z,ie=se*ee+G*Z+j*V-Q*Y,q=j*ee+G*Y+Q*Z-se*V,te=G*ee-Q*V-se*Z-j*Y;if(f){V=D,Z=F,Y=R;var ne=Math.sin(f)/d(V,Z,Y);V*=ne,Z*=ne,Y*=ne,te=te*(ee=Math.cos(v))-(W=W*ee+te*V+ie*Y-q*Z)*V-(ie=ie*ee+te*Z+q*V-W*Y)*Z-(q=q*ee+te*Y+W*Z-ie*V)*Y}var le=u(W,ie,q,te);le>1e-6?(W/=le,ie/=le,q/=le,te/=le):(W=ie=q=0,te=1),this.rotation.set(p,W,ie,q,te)},h.lookAt=function(p,v,g,f){this.recalcMatrix(p);var w=this.computedMatrix;o(w,v=v||this.computedEye,g=g||this.computedCenter,f=f||this.computedUp);var y=this.computedRotation;i(y,w[0],w[1],w[2],w[4],w[5],w[6],w[8],w[9],w[10]),s(y,y),this.rotation.set(p,y[0],y[1],y[2],y[3]);for(var M=0,A=0;A<3;++A)M+=Math.pow(g[A]-v[A],2);this.radius.set(p,.5*Math.log(Math.max(M,1e-6))),this.center.set(p,g[0],g[1],g[2])},h.translate=function(p,v,g,f){this.center.move(p,v||0,g||0,f||0)},h.setMatrix=function(p,v){var g=this.computedRotation;i(g,v[0],v[1],v[2],v[4],v[5],v[6],v[8],v[9],v[10]),s(g,g),this.rotation.set(p,g[0],g[1],g[2],g[3]);var f=this.computedMatrix;l(f,v);var w=f[15];if(Math.abs(w)>1e-6){var y=f[12]/w,M=f[13]/w,A=f[14]/w;this.recalcMatrix(p);var k=Math.exp(this.computedRadius[0]);this.center.set(p,y-f[2]*k,M-f[6]*k,A-f[10]*k),this.radius.idle(p)}else this.center.idle(p),this.radius.idle(p)},h.setDistance=function(p,v){v>0&&this.radius.set(p,Math.log(v))},h.setDistanceLimits=function(p,v){p=p>0?Math.log(p):-1/0,v=v>0?Math.log(v):1/0,v=Math.max(v,p),this.radius.bounds[0][0]=p,this.radius.bounds[1][0]=v},h.getDistanceLimits=function(p){var v=this.radius.bounds;return p?(p[0]=Math.exp(v[0][0]),p[1]=Math.exp(v[1][0]),p):[Math.exp(v[0][0]),Math.exp(v[1][0])]},h.toJSON=function(){return this.recalcMatrix(this.lastT()),{center:this.computedCenter.slice(),rotation:this.computedRotation.slice(),distance:Math.log(this.computedRadius[0]),zoomMin:this.radius.bounds[0][0],zoomMax:this.radius.bounds[1][0]}},h.fromJSON=function(p){var v=this.lastT(),g=p.center;g&&this.center.set(v,g[0],g[1],g[2]);var f=p.rotation;f&&this.rotation.set(v,f[0],f[1],f[2],f[3]);var w=p.distance;w&&w>0&&this.radius.set(v,Math.log(w)),this.setDistanceLimits(p.zoomMin,p.zoomMax)}},{"./lib/quatFromFrame":262,"filtered-vector":68,"gl-mat4/fromQuat":95,"gl-mat4/invert":98,"gl-mat4/lookAt":99}],264:[function(x,T,b){"use strict";var e=x("repeat-string");T.exports=function(o,a,l){return e(l=void 0!==l?l+"":" ",a)+o}},{"repeat-string":277}],265:[function(x,T,b){T.exports=function(e,o){o||(o=[0,""]),e=String(e);var a=parseFloat(e,10);return o[0]=a,o[1]=e.match(/[\d.\-\+]*\s*(.*)/)[1]||"",o}},{}],266:[function(x,T,b){"use strict";T.exports=function(o,a){for(var l=0|a.length,i=o.length,d=[new Array(l),new Array(l)],u=0;u<l;++u)d[0][u]=[],d[1][u]=[];for(u=0;u<i;++u){var s=o[u];d[0][s[0]].push(s),d[1][s[1]].push(s)}var A,c=[];for(u=0;u<l;++u)d[0][u].length+d[1][u].length===0&&c.push([u]);function h(M,A){var k=d[A][M[A]];k.splice(k.indexOf(M),1)}function p(M,A,k){for(var C,P,D,F=0;F<2;++F)if(d[F][A].length>0){C=d[F][A][0],D=F;break}P=C[1^D];for(var R=0;R<2;++R)for(var L=d[R][A],I=0;I<L.length;++I){var B=L[I],V=B[1^R];e(a[M],a[A],a[P],a[V])>0&&(C=B,P=V,D=R)}return k||C&&h(C,D),P}function v(M,A){var k=d[A][M][0],C=[M];h(k,A);for(var P=k[1^A];;){for(;P!==M;)C.push(P),P=p(C[C.length-2],P,!1);if(d[0][M].length+d[1][M].length===0)break;var D=C[C.length-1],F=M,R=C[1],L=p(D,F,!0);if(e(a[D],a[F],a[R],a[L])<0)break;C.push(M),P=p(D,F)}return C}for(u=0;u<l;++u)for(var f=0;f<2;++f){for(var w=[];d[f][u].length>0;){var y=v(u,f);(A=y)[1]===A[A.length-1]?w.push.apply(w,y):(w.length>0&&c.push(w),w=y)}w.length>0&&c.push(w)}return c};var e=x("compare-angle")},{"compare-angle":54}],267:[function(x,T,b){"use strict";T.exports=function(o,a){for(var l=e(o,a.length),i=new Array(a.length),d=new Array(a.length),u=[],s=0;s<a.length;++s){var c=l[s].length;d[s]=c,i[s]=!0,c<=1&&u.push(s)}for(;u.length>0;){var h=u.pop();i[h]=!1;var p=l[h];for(s=0;s<p.length;++s){var v=p[s];0==--d[v]&&u.push(v)}}var g=new Array(a.length),f=[];for(s=0;s<a.length;++s)i[s]?(g[s]=h=f.length,f.push(a[s])):g[s]=-1;var w=[];for(s=0;s<o.length;++s){var y=o[s];i[y[0]]&&i[y[1]]&&w.push([g[y[0]],g[y[1]]])}return[w,f]};var e=x("edges-to-adjacency-list")},{"edges-to-adjacency-list":66}],268:[function(x,T,b){"use strict";T.exports=function(c,h){for(var p=u(c,h),v=(h=p[1]).length,g=e(c=p[0],h.length),f=0;f<v;++f)if(g[f].length%2==1)throw new Error("planar-graph-to-polyline: graph must be manifold");var w=o(c,h),y=(w=w.filter(function(he){for(var be=he.length,ge=[0],we=0;we<be;++we){var Ce=h[he[we]],De=h[he[(we+1)%be]],Se=l(-Ce[0],Ce[1]),Fe=l(-Ce[0],De[1]),ve=l(De[0],Ce[1]),Te=l(De[0],De[1]);ge=i(ge,i(i(Se,Fe),i(ve,Te)))}return ge[ge.length-1]>0})).length,M=new Array(y),A=new Array(y);for(f=0;f<y;++f){M[f]=f;var k=new Array(y),C=w[f].map(function(he){return h[he]}),P=a([C]),D=0;e:for(var F=0;F<y;++F)if(k[F]=0,f!==F){for(var R=(ue=w[F]).length,L=0;L<R;++L){var I=P(h[ue[L]]);if(0!==I){I<0&&(k[F]=1,D+=1);continue e}}k[F]=1,D+=1}A[f]=[D,f,k]}for(A.sort(function(he,be){return be[0]-he[0]}),f=0;f<y;++f){var B=(k=A[f])[1],V=k[2];for(F=0;F<y;++F)V[F]&&(M[F]=B)}var Z=function(he){for(var be=new Array(he),ge=0;ge<he;++ge)be[ge]=[];return be}(y);for(f=0;f<y;++f)Z[f].push(M[f]),Z[M[f]].push(f);var Y={},ee=s(v,!1);for(f=0;f<y;++f)for(R=(ue=w[f]).length,F=0;F<R;++F){var J=ue[F],$=ue[(F+1)%R],Q=Math.min(J,$)+":"+Math.max(J,$);if(Q in Y){var se=Y[Q];Z[se].push(f),Z[f].push(se),ee[J]=ee[$]=!0}else Y[Q]=f}function j(he){for(var be=he.length,ge=0;ge<be;++ge)if(!ee[he[ge]])return!1;return!0}var G=[],W=s(y,-1);for(f=0;f<y;++f)M[f]!==f||j(w[f])?W[f]=-1:(G.push(f),W[f]=0);for(p=[];G.length>0;){var ie=G.pop(),q=Z[ie];d(q,function(he,be){return he-be});var te,ne=q.length,le=W[ie];if(0===le){var ue=w[ie];te=[ue]}for(f=0;f<ne;++f){var de=q[f];W[de]>=0||(W[de]=1^le,G.push(de),0===le&&(j(ue=w[de])||(ue.reverse(),te.push(ue))))}0===le&&p.push(te)}return p};var e=x("edges-to-adjacency-list"),o=x("planar-dual"),a=x("point-in-big-polygon"),l=x("two-product"),i=x("robust-sum"),d=x("uniq"),u=x("./lib/trim-leaves");function s(c,h){for(var p=new Array(c),v=0;v<c;++v)p[v]=h;return p}},{"./lib/trim-leaves":267,"edges-to-adjacency-list":66,"planar-dual":266,"point-in-big-polygon":269,"robust-sum":289,"two-product":306,uniq:310}],269:[function(x,T,b){T.exports=function(s){for(var c=s.length,h=[],p=[],v=0;v<c;++v)for(var g=s[v],f=g.length,w=f-1,y=0;y<f;w=y++){var M=g[w],A=g[y];M[0]===A[0]?p.push([M,A]):h.push([M,A])}if(0===h.length)return 0===p.length?u:(k=d(p),function(D){return k(D[0],D[1])?0:1});var k,D,F,C=o(h),P=(D=C.slabs,F=C.coordinates,function(R){var L=l.le(F,R[0]);if(L<0)return 1;var I=D[L];if(!I){if(!(L>0&&F[L]===R[0]))return 1;I=D[L-1]}for(var B=1;I;){var V=I.key,Z=e(R,V[0],V[1]);if(V[0][0]<V[1][0])if(Z<0)I=I.left;else{if(!(Z>0))return 0;B=-1,I=I.right}else if(Z>0)I=I.left;else{if(!(Z<0))return 0;B=1,I=I.right}}return B});return 0===p.length?P:function(D,F){return function(R){return D(R[0],R[1])?0:F(R)}}(d(p),P)};var e=x("robust-orientation")[3],o=x("slab-decomposition"),a=x("interval-tree-1d"),l=x("binary-search-bounds");function i(){return!0}function d(s){for(var c={},h=0;h<s.length;++h){var p=s[h],v=p[0][0],g=p[0][1],f=p[1][1],w=[Math.min(g,f),Math.max(g,f)];v in c?c[v].push(w):c[v]=[w]}var k,y={},M=Object.keys(c);for(h=0;h<M.length;++h)y[M[h]]=a(c[M[h]]);return k=y,function(C,P){var D=k[C];return!!D&&!!D.queryPoint(P,i)}}function u(s){return 1}},{"binary-search-bounds":31,"interval-tree-1d":234,"robust-orientation":284,"slab-decomposition":299}],270:[function(x,T,b){"use strict";var e=new Float64Array(4),o=new Float64Array(4),a=new Float64Array(4);T.exports=function(l,i,d,u,s){e.length<u.length&&(e=new Float64Array(u.length),o=new Float64Array(u.length),a=new Float64Array(u.length));for(var c=0;c<u.length;++c)e[c]=l[c]-u[c],o[c]=i[c]-l[c],a[c]=d[c]-l[c];var h=0,p=0,v=0,g=0,f=0,w=0;for(c=0;c<u.length;++c){var y=o[c],M=a[c],A=e[c];h+=y*y,p+=y*M,v+=M*M,g+=A*y,f+=A*M,w+=A*A}var k,C,P,D,F,R=Math.abs(h*v-p*p),L=p*f-v*g,I=p*g-h*f;if(L+I<=R)if(L<0)I<0&&g<0?(I=0,-g>=h?(L=1,k=h+2*g+w):k=g*(L=-g/h)+w):(L=0,f>=0?(I=0,k=w):-f>=v?(I=1,k=v+2*f+w):k=f*(I=-f/v)+w);else if(I<0)I=0,g>=0?(L=0,k=w):-g>=h?(L=1,k=h+2*g+w):k=g*(L=-g/h)+w;else{var B=1/R;k=(L*=B)*(h*L+p*(I*=B)+2*g)+I*(p*L+v*I+2*f)+w}else L<0?(P=v+f)>(C=p+g)?(D=P-C)>=(F=h-2*p+v)?(L=1,I=0,k=h+2*g+w):k=(L=D/F)*(h*L+p*(I=1-L)+2*g)+I*(p*L+v*I+2*f)+w:(L=0,P<=0?(I=1,k=v+2*f+w):f>=0?(I=0,k=w):k=f*(I=-f/v)+w):I<0?(P=h+g)>(C=p+f)?(D=P-C)>=(F=h-2*p+v)?(I=1,L=0,k=v+2*f+w):k=(L=1-(I=D/F))*(h*L+p*I+2*g)+I*(p*L+v*I+2*f)+w:(I=0,P<=0?(L=1,k=h+2*g+w):g>=0?(L=0,k=w):k=g*(L=-g/h)+w):(D=v+f-p-g)<=0?(L=0,I=1,k=v+2*f+w):D>=(F=h-2*p+v)?(L=1,I=0,k=h+2*g+w):k=(L=D/F)*(h*L+p*(I=1-L)+2*g)+I*(p*L+v*I+2*f)+w;var V=1-L-I;for(c=0;c<u.length;++c)s[c]=V*l[c]+L*i[c]+I*d[c];return k<0?0:k}},{}],271:[function(x,T,b){T.exports=x("gl-quat/slerp")},{"gl-quat/slerp":124}],272:[function(x,T,b){"use strict";var e=x("big-rat/add");T.exports=function(o,a){for(var l=o.length,i=new Array(l),d=0;d<l;++d)i[d]=e(o[d],a[d]);return i}},{"big-rat/add":15}],273:[function(x,T,b){"use strict";T.exports=function(o){for(var a=new Array(o.length),l=0;l<o.length;++l)a[l]=e(o[l]);return a};var e=x("big-rat")},{"big-rat":18}],274:[function(x,T,b){"use strict";var e=x("big-rat"),o=x("big-rat/mul");T.exports=function(a,l){for(var i=e(l),d=a.length,u=new Array(d),s=0;s<d;++s)u[s]=o(a[s],i);return u}},{"big-rat":18,"big-rat/mul":27}],275:[function(x,T,b){"use strict";var e=x("big-rat/sub");T.exports=function(o,a){for(var l=o.length,i=new Array(l),d=0;d<l;++d)i[d]=e(o[d],a[d]);return i}},{"big-rat/sub":29}],276:[function(x,T,b){"use strict";var e=x("compare-cell"),o=x("compare-oriented-cell"),a=x("cell-orientation");T.exports=function(l){l.sort(o);for(var i=l.length,d=0,u=0;u<i;++u){var s=l[u],c=a(s);if(0!==c){if(d>0){var h=l[d-1];if(0===e(s,h)&&a(h)!==c){d-=1;continue}}l[d++]=s}}return l.length=d,l}},{"cell-orientation":47,"compare-cell":56,"compare-oriented-cell":57}],277:[function(x,T,b){"use strict";var e,o="";T.exports=function(a,l){if("string"!=typeof a)throw new TypeError("expected a string");if(1===l)return a;if(2===l)return a+a;var i=a.length*l;if(e!==a||void 0===e)e=a,o="";else if(o.length>=i)return o.substr(0,i);for(;i>o.length&&l>1;)1&l&&(o+=a),l>>=1,a+=a;return o=(o+=a).substr(0,i)}},{}],278:[function(x,T,b){(function(e){(function(){T.exports=e.performance&&e.performance.now?function(){return performance.now()}:Date.now||function(){return+new Date}}).call(this)}).call(this,void 0!==m?m:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],279:[function(x,T,b){"use strict";T.exports=function(e){for(var o=e.length,a=e[e.length-1],l=o,i=o-2;i>=0;--i){var d=a,u=e[i];(c=u-((a=d+u)-d))&&(e[--l]=a,a=c)}var s=0;for(i=l;i<o;++i){var c;(c=(u=a)-((a=(d=e[i])+u)-d))&&(e[s++]=c)}return e[s++]=a,e.length=s,e}},{}],280:[function(x,T,b){"use strict";var e=x("two-product"),o=x("robust-sum"),a=x("robust-scale"),l=x("robust-compress");function i(h,p,v,g){return function(f){return g(h(v(f[0][0],f[1][1]),v(-f[0][1],f[1][0])))}}function d(h,p,v,g){return function(f){return g(h(p(h(v(f[1][1],f[2][2]),v(-f[1][2],f[2][1])),f[0][0]),h(p(h(v(f[1][0],f[2][2]),v(-f[1][2],f[2][0])),-f[0][1]),p(h(v(f[1][0],f[2][1]),v(-f[1][1],f[2][0])),f[0][2]))))}}function u(h){return(2===h?i:3===h?d:void 0)(o,a,e,l)}var s=[function(){return[0]},function(h){return[h[0][0]]}];function c(h,p,v,g,f,w){return function(y){switch(y.length){case 0:return h(y);case 1:return p(y);case 2:return v(y);case 3:return g(y)}var M=f[y.length];return M||(M=f[y.length]=w(y.length)),M(y)}}!function(){for(;s.length<4;)s.push(u(s.length));T.exports=c.apply(void 0,s.concat([s,u]));for(var h=0;h<s.length;++h)T.exports[h]=s[h]}()},{"robust-compress":279,"robust-scale":286,"robust-sum":289,"two-product":306}],281:[function(x,T,b){"use strict";var e=x("two-product"),o=x("robust-sum");T.exports=function(a,l){for(var i=e(a[0],l[0]),d=1;d<a.length;++d)i=o(i,e(a[d],l[d]));return i}},{"robust-sum":289,"two-product":306}],282:[function(x,T,b){"use strict";var e=x("two-product"),o=x("robust-sum"),a=x("robust-subtract"),l=x("robust-scale");function i(g){return(3===g?d:4===g?u:5===g?s:c)(o,a,e,l)}function d(g,f,w,y){return function(M,A,k){var C=w(M[0],M[0]),P=y(C,A[0]),D=y(C,k[0]),F=w(A[0],A[0]),R=y(F,M[0]),L=y(F,k[0]),I=w(k[0],k[0]),B=y(I,M[0]),V=y(I,A[0]),Z=g(f(V,L),f(R,P)),Y=f(B,D),ee=f(Z,Y);return ee[ee.length-1]}}function u(g,f,w,y){return function(M,A,k,C){var P=g(w(M[0],M[0]),w(M[1],M[1])),D=y(P,A[0]),F=y(P,k[0]),R=y(P,C[0]),L=g(w(A[0],A[0]),w(A[1],A[1])),I=y(L,M[0]),B=y(L,k[0]),V=y(L,C[0]),Z=g(w(k[0],k[0]),w(k[1],k[1])),Y=y(Z,M[0]),ee=y(Z,A[0]),J=y(Z,C[0]),$=g(w(C[0],C[0]),w(C[1],C[1])),Q=y($,M[0]),se=y($,A[0]),j=y($,k[0]),G=g(g(y(f(j,J),A[1]),g(y(f(se,V),-k[1]),y(f(ee,B),C[1]))),g(y(f(se,V),M[1]),g(y(f(Q,R),-A[1]),y(f(I,D),C[1])))),W=g(g(y(f(j,J),M[1]),g(y(f(Q,R),-k[1]),y(f(Y,F),C[1]))),g(y(f(ee,B),M[1]),g(y(f(Y,F),-A[1]),y(f(I,D),k[1])))),ie=f(G,W);return ie[ie.length-1]}}function s(g,f,w,y){return function(M,A,k,C,P){var D=g(w(M[0],M[0]),g(w(M[1],M[1]),w(M[2],M[2]))),F=y(D,A[0]),R=y(D,k[0]),L=y(D,C[0]),I=y(D,P[0]),B=g(w(A[0],A[0]),g(w(A[1],A[1]),w(A[2],A[2]))),V=y(B,M[0]),Z=y(B,k[0]),Y=y(B,C[0]),ee=y(B,P[0]),J=g(w(k[0],k[0]),g(w(k[1],k[1]),w(k[2],k[2]))),$=y(J,M[0]),Q=y(J,A[0]),se=y(J,C[0]),j=y(J,P[0]),G=g(w(C[0],C[0]),g(w(C[1],C[1]),w(C[2],C[2]))),W=y(G,M[0]),ie=y(G,A[0]),q=y(G,k[0]),te=y(G,P[0]),ne=g(w(P[0],P[0]),g(w(P[1],P[1]),w(P[2],P[2]))),le=y(ne,M[0]),ue=y(ne,A[0]),de=y(ne,k[0]),he=y(ne,C[0]),be=g(g(g(y(g(y(f(he,te),k[1]),g(y(f(de,j),-C[1]),y(f(q,se),P[1]))),A[2]),g(y(g(y(f(he,te),A[1]),g(y(f(ue,ee),-C[1]),y(f(ie,Y),P[1]))),-k[2]),y(g(y(f(de,j),A[1]),g(y(f(ue,ee),-k[1]),y(f(Q,Z),P[1]))),C[2]))),g(y(g(y(f(q,se),A[1]),g(y(f(ie,Y),-k[1]),y(f(Q,Z),C[1]))),-P[2]),g(y(g(y(f(he,te),A[1]),g(y(f(ue,ee),-C[1]),y(f(ie,Y),P[1]))),M[2]),y(g(y(f(he,te),M[1]),g(y(f(le,I),-C[1]),y(f(W,L),P[1]))),-A[2])))),g(g(y(g(y(f(ue,ee),M[1]),g(y(f(le,I),-A[1]),y(f(V,F),P[1]))),C[2]),g(y(g(y(f(ie,Y),M[1]),g(y(f(W,L),-A[1]),y(f(V,F),C[1]))),-P[2]),y(g(y(f(q,se),A[1]),g(y(f(ie,Y),-k[1]),y(f(Q,Z),C[1]))),M[2]))),g(y(g(y(f(q,se),M[1]),g(y(f(W,L),-k[1]),y(f($,R),C[1]))),-A[2]),g(y(g(y(f(ie,Y),M[1]),g(y(f(W,L),-A[1]),y(f(V,F),C[1]))),k[2]),y(g(y(f(Q,Z),M[1]),g(y(f($,R),-A[1]),y(f(V,F),k[1]))),-C[2]))))),ge=g(g(g(y(g(y(f(he,te),k[1]),g(y(f(de,j),-C[1]),y(f(q,se),P[1]))),M[2]),y(g(y(f(he,te),M[1]),g(y(f(le,I),-C[1]),y(f(W,L),P[1]))),-k[2])),g(y(g(y(f(de,j),M[1]),g(y(f(le,I),-k[1]),y(f($,R),P[1]))),C[2]),y(g(y(f(q,se),M[1]),g(y(f(W,L),-k[1]),y(f($,R),C[1]))),-P[2]))),g(g(y(g(y(f(de,j),A[1]),g(y(f(ue,ee),-k[1]),y(f(Q,Z),P[1]))),M[2]),y(g(y(f(de,j),M[1]),g(y(f(le,I),-k[1]),y(f($,R),P[1]))),-A[2])),g(y(g(y(f(ue,ee),M[1]),g(y(f(le,I),-A[1]),y(f(V,F),P[1]))),k[2]),y(g(y(f(Q,Z),M[1]),g(y(f($,R),-A[1]),y(f(V,F),k[1]))),-P[2])))),we=f(be,ge);return we[we.length-1]}}function c(g,f,w,y){return function(M,A,k,C,P,D){var F=g(g(w(M[0],M[0]),w(M[1],M[1])),g(w(M[2],M[2]),w(M[3],M[3]))),R=y(F,A[0]),L=y(F,k[0]),I=y(F,C[0]),B=y(F,P[0]),V=y(F,D[0]),Z=g(g(w(A[0],A[0]),w(A[1],A[1])),g(w(A[2],A[2]),w(A[3],A[3]))),Y=y(Z,M[0]),ee=y(Z,k[0]),J=y(Z,C[0]),$=y(Z,P[0]),Q=y(Z,D[0]),se=g(g(w(k[0],k[0]),w(k[1],k[1])),g(w(k[2],k[2]),w(k[3],k[3]))),j=y(se,M[0]),G=y(se,A[0]),W=y(se,C[0]),ie=y(se,P[0]),q=y(se,D[0]),te=g(g(w(C[0],C[0]),w(C[1],C[1])),g(w(C[2],C[2]),w(C[3],C[3]))),ne=y(te,M[0]),le=y(te,A[0]),ue=y(te,k[0]),de=y(te,P[0]),he=y(te,D[0]),be=g(g(w(P[0],P[0]),w(P[1],P[1])),g(w(P[2],P[2]),w(P[3],P[3]))),ge=y(be,M[0]),we=y(be,A[0]),Ce=y(be,k[0]),De=y(be,C[0]),Se=y(be,D[0]),Fe=g(g(w(D[0],D[0]),w(D[1],D[1])),g(w(D[2],D[2]),w(D[3],D[3]))),ve=y(Fe,M[0]),Te=y(Fe,A[0]),Le=y(Fe,k[0]),Ee=y(Fe,C[0]),Pe=y(Fe,P[0]),je=g(g(g(y(g(g(y(g(y(f(Pe,Se),C[1]),g(y(f(Ee,he),-P[1]),y(f(De,de),D[1]))),k[2]),y(g(y(f(Pe,Se),k[1]),g(y(f(Le,q),-P[1]),y(f(Ce,ie),D[1]))),-C[2])),g(y(g(y(f(Ee,he),k[1]),g(y(f(Le,q),-C[1]),y(f(ue,W),D[1]))),P[2]),y(g(y(f(De,de),k[1]),g(y(f(Ce,ie),-C[1]),y(f(ue,W),P[1]))),-D[2]))),A[3]),g(y(g(g(y(g(y(f(Pe,Se),C[1]),g(y(f(Ee,he),-P[1]),y(f(De,de),D[1]))),A[2]),y(g(y(f(Pe,Se),A[1]),g(y(f(Te,Q),-P[1]),y(f(we,$),D[1]))),-C[2])),g(y(g(y(f(Ee,he),A[1]),g(y(f(Te,Q),-C[1]),y(f(le,J),D[1]))),P[2]),y(g(y(f(De,de),A[1]),g(y(f(we,$),-C[1]),y(f(le,J),P[1]))),-D[2]))),-k[3]),y(g(g(y(g(y(f(Pe,Se),k[1]),g(y(f(Le,q),-P[1]),y(f(Ce,ie),D[1]))),A[2]),y(g(y(f(Pe,Se),A[1]),g(y(f(Te,Q),-P[1]),y(f(we,$),D[1]))),-k[2])),g(y(g(y(f(Le,q),A[1]),g(y(f(Te,Q),-k[1]),y(f(G,ee),D[1]))),P[2]),y(g(y(f(Ce,ie),A[1]),g(y(f(we,$),-k[1]),y(f(G,ee),P[1]))),-D[2]))),C[3]))),g(g(y(g(g(y(g(y(f(Ee,he),k[1]),g(y(f(Le,q),-C[1]),y(f(ue,W),D[1]))),A[2]),y(g(y(f(Ee,he),A[1]),g(y(f(Te,Q),-C[1]),y(f(le,J),D[1]))),-k[2])),g(y(g(y(f(Le,q),A[1]),g(y(f(Te,Q),-k[1]),y(f(G,ee),D[1]))),C[2]),y(g(y(f(ue,W),A[1]),g(y(f(le,J),-k[1]),y(f(G,ee),C[1]))),-D[2]))),-P[3]),y(g(g(y(g(y(f(De,de),k[1]),g(y(f(Ce,ie),-C[1]),y(f(ue,W),P[1]))),A[2]),y(g(y(f(De,de),A[1]),g(y(f(we,$),-C[1]),y(f(le,J),P[1]))),-k[2])),g(y(g(y(f(Ce,ie),A[1]),g(y(f(we,$),-k[1]),y(f(G,ee),P[1]))),C[2]),y(g(y(f(ue,W),A[1]),g(y(f(le,J),-k[1]),y(f(G,ee),C[1]))),-P[2]))),D[3])),g(y(g(g(y(g(y(f(Pe,Se),C[1]),g(y(f(Ee,he),-P[1]),y(f(De,de),D[1]))),A[2]),y(g(y(f(Pe,Se),A[1]),g(y(f(Te,Q),-P[1]),y(f(we,$),D[1]))),-C[2])),g(y(g(y(f(Ee,he),A[1]),g(y(f(Te,Q),-C[1]),y(f(le,J),D[1]))),P[2]),y(g(y(f(De,de),A[1]),g(y(f(we,$),-C[1]),y(f(le,J),P[1]))),-D[2]))),M[3]),y(g(g(y(g(y(f(Pe,Se),C[1]),g(y(f(Ee,he),-P[1]),y(f(De,de),D[1]))),M[2]),y(g(y(f(Pe,Se),M[1]),g(y(f(ve,V),-P[1]),y(f(ge,B),D[1]))),-C[2])),g(y(g(y(f(Ee,he),M[1]),g(y(f(ve,V),-C[1]),y(f(ne,I),D[1]))),P[2]),y(g(y(f(De,de),M[1]),g(y(f(ge,B),-C[1]),y(f(ne,I),P[1]))),-D[2]))),-A[3])))),g(g(g(y(g(g(y(g(y(f(Pe,Se),A[1]),g(y(f(Te,Q),-P[1]),y(f(we,$),D[1]))),M[2]),y(g(y(f(Pe,Se),M[1]),g(y(f(ve,V),-P[1]),y(f(ge,B),D[1]))),-A[2])),g(y(g(y(f(Te,Q),M[1]),g(y(f(ve,V),-A[1]),y(f(Y,R),D[1]))),P[2]),y(g(y(f(we,$),M[1]),g(y(f(ge,B),-A[1]),y(f(Y,R),P[1]))),-D[2]))),C[3]),y(g(g(y(g(y(f(Ee,he),A[1]),g(y(f(Te,Q),-C[1]),y(f(le,J),D[1]))),M[2]),y(g(y(f(Ee,he),M[1]),g(y(f(ve,V),-C[1]),y(f(ne,I),D[1]))),-A[2])),g(y(g(y(f(Te,Q),M[1]),g(y(f(ve,V),-A[1]),y(f(Y,R),D[1]))),C[2]),y(g(y(f(le,J),M[1]),g(y(f(ne,I),-A[1]),y(f(Y,R),C[1]))),-D[2]))),-P[3])),g(y(g(g(y(g(y(f(De,de),A[1]),g(y(f(we,$),-C[1]),y(f(le,J),P[1]))),M[2]),y(g(y(f(De,de),M[1]),g(y(f(ge,B),-C[1]),y(f(ne,I),P[1]))),-A[2])),g(y(g(y(f(we,$),M[1]),g(y(f(ge,B),-A[1]),y(f(Y,R),P[1]))),C[2]),y(g(y(f(le,J),M[1]),g(y(f(ne,I),-A[1]),y(f(Y,R),C[1]))),-P[2]))),D[3]),y(g(g(y(g(y(f(Ee,he),k[1]),g(y(f(Le,q),-C[1]),y(f(ue,W),D[1]))),A[2]),y(g(y(f(Ee,he),A[1]),g(y(f(Te,Q),-C[1]),y(f(le,J),D[1]))),-k[2])),g(y(g(y(f(Le,q),A[1]),g(y(f(Te,Q),-k[1]),y(f(G,ee),D[1]))),C[2]),y(g(y(f(ue,W),A[1]),g(y(f(le,J),-k[1]),y(f(G,ee),C[1]))),-D[2]))),M[3]))),g(g(y(g(g(y(g(y(f(Ee,he),k[1]),g(y(f(Le,q),-C[1]),y(f(ue,W),D[1]))),M[2]),y(g(y(f(Ee,he),M[1]),g(y(f(ve,V),-C[1]),y(f(ne,I),D[1]))),-k[2])),g(y(g(y(f(Le,q),M[1]),g(y(f(ve,V),-k[1]),y(f(j,L),D[1]))),C[2]),y(g(y(f(ue,W),M[1]),g(y(f(ne,I),-k[1]),y(f(j,L),C[1]))),-D[2]))),-A[3]),y(g(g(y(g(y(f(Ee,he),A[1]),g(y(f(Te,Q),-C[1]),y(f(le,J),D[1]))),M[2]),y(g(y(f(Ee,he),M[1]),g(y(f(ve,V),-C[1]),y(f(ne,I),D[1]))),-A[2])),g(y(g(y(f(Te,Q),M[1]),g(y(f(ve,V),-A[1]),y(f(Y,R),D[1]))),C[2]),y(g(y(f(le,J),M[1]),g(y(f(ne,I),-A[1]),y(f(Y,R),C[1]))),-D[2]))),k[3])),g(y(g(g(y(g(y(f(Le,q),A[1]),g(y(f(Te,Q),-k[1]),y(f(G,ee),D[1]))),M[2]),y(g(y(f(Le,q),M[1]),g(y(f(ve,V),-k[1]),y(f(j,L),D[1]))),-A[2])),g(y(g(y(f(Te,Q),M[1]),g(y(f(ve,V),-A[1]),y(f(Y,R),D[1]))),k[2]),y(g(y(f(G,ee),M[1]),g(y(f(j,L),-A[1]),y(f(Y,R),k[1]))),-D[2]))),-C[3]),y(g(g(y(g(y(f(ue,W),A[1]),g(y(f(le,J),-k[1]),y(f(G,ee),C[1]))),M[2]),y(g(y(f(ue,W),M[1]),g(y(f(ne,I),-k[1]),y(f(j,L),C[1]))),-A[2])),g(y(g(y(f(le,J),M[1]),g(y(f(ne,I),-A[1]),y(f(Y,R),C[1]))),k[2]),y(g(y(f(G,ee),M[1]),g(y(f(j,L),-A[1]),y(f(Y,R),k[1]))),-C[2]))),D[3]))))),Ge=g(g(g(y(g(g(y(g(y(f(Pe,Se),C[1]),g(y(f(Ee,he),-P[1]),y(f(De,de),D[1]))),k[2]),y(g(y(f(Pe,Se),k[1]),g(y(f(Le,q),-P[1]),y(f(Ce,ie),D[1]))),-C[2])),g(y(g(y(f(Ee,he),k[1]),g(y(f(Le,q),-C[1]),y(f(ue,W),D[1]))),P[2]),y(g(y(f(De,de),k[1]),g(y(f(Ce,ie),-C[1]),y(f(ue,W),P[1]))),-D[2]))),M[3]),g(y(g(g(y(g(y(f(Pe,Se),C[1]),g(y(f(Ee,he),-P[1]),y(f(De,de),D[1]))),M[2]),y(g(y(f(Pe,Se),M[1]),g(y(f(ve,V),-P[1]),y(f(ge,B),D[1]))),-C[2])),g(y(g(y(f(Ee,he),M[1]),g(y(f(ve,V),-C[1]),y(f(ne,I),D[1]))),P[2]),y(g(y(f(De,de),M[1]),g(y(f(ge,B),-C[1]),y(f(ne,I),P[1]))),-D[2]))),-k[3]),y(g(g(y(g(y(f(Pe,Se),k[1]),g(y(f(Le,q),-P[1]),y(f(Ce,ie),D[1]))),M[2]),y(g(y(f(Pe,Se),M[1]),g(y(f(ve,V),-P[1]),y(f(ge,B),D[1]))),-k[2])),g(y(g(y(f(Le,q),M[1]),g(y(f(ve,V),-k[1]),y(f(j,L),D[1]))),P[2]),y(g(y(f(Ce,ie),M[1]),g(y(f(ge,B),-k[1]),y(f(j,L),P[1]))),-D[2]))),C[3]))),g(g(y(g(g(y(g(y(f(Ee,he),k[1]),g(y(f(Le,q),-C[1]),y(f(ue,W),D[1]))),M[2]),y(g(y(f(Ee,he),M[1]),g(y(f(ve,V),-C[1]),y(f(ne,I),D[1]))),-k[2])),g(y(g(y(f(Le,q),M[1]),g(y(f(ve,V),-k[1]),y(f(j,L),D[1]))),C[2]),y(g(y(f(ue,W),M[1]),g(y(f(ne,I),-k[1]),y(f(j,L),C[1]))),-D[2]))),-P[3]),y(g(g(y(g(y(f(De,de),k[1]),g(y(f(Ce,ie),-C[1]),y(f(ue,W),P[1]))),M[2]),y(g(y(f(De,de),M[1]),g(y(f(ge,B),-C[1]),y(f(ne,I),P[1]))),-k[2])),g(y(g(y(f(Ce,ie),M[1]),g(y(f(ge,B),-k[1]),y(f(j,L),P[1]))),C[2]),y(g(y(f(ue,W),M[1]),g(y(f(ne,I),-k[1]),y(f(j,L),C[1]))),-P[2]))),D[3])),g(y(g(g(y(g(y(f(Pe,Se),k[1]),g(y(f(Le,q),-P[1]),y(f(Ce,ie),D[1]))),A[2]),y(g(y(f(Pe,Se),A[1]),g(y(f(Te,Q),-P[1]),y(f(we,$),D[1]))),-k[2])),g(y(g(y(f(Le,q),A[1]),g(y(f(Te,Q),-k[1]),y(f(G,ee),D[1]))),P[2]),y(g(y(f(Ce,ie),A[1]),g(y(f(we,$),-k[1]),y(f(G,ee),P[1]))),-D[2]))),M[3]),y(g(g(y(g(y(f(Pe,Se),k[1]),g(y(f(Le,q),-P[1]),y(f(Ce,ie),D[1]))),M[2]),y(g(y(f(Pe,Se),M[1]),g(y(f(ve,V),-P[1]),y(f(ge,B),D[1]))),-k[2])),g(y(g(y(f(Le,q),M[1]),g(y(f(ve,V),-k[1]),y(f(j,L),D[1]))),P[2]),y(g(y(f(Ce,ie),M[1]),g(y(f(ge,B),-k[1]),y(f(j,L),P[1]))),-D[2]))),-A[3])))),g(g(g(y(g(g(y(g(y(f(Pe,Se),A[1]),g(y(f(Te,Q),-P[1]),y(f(we,$),D[1]))),M[2]),y(g(y(f(Pe,Se),M[1]),g(y(f(ve,V),-P[1]),y(f(ge,B),D[1]))),-A[2])),g(y(g(y(f(Te,Q),M[1]),g(y(f(ve,V),-A[1]),y(f(Y,R),D[1]))),P[2]),y(g(y(f(we,$),M[1]),g(y(f(ge,B),-A[1]),y(f(Y,R),P[1]))),-D[2]))),k[3]),y(g(g(y(g(y(f(Le,q),A[1]),g(y(f(Te,Q),-k[1]),y(f(G,ee),D[1]))),M[2]),y(g(y(f(Le,q),M[1]),g(y(f(ve,V),-k[1]),y(f(j,L),D[1]))),-A[2])),g(y(g(y(f(Te,Q),M[1]),g(y(f(ve,V),-A[1]),y(f(Y,R),D[1]))),k[2]),y(g(y(f(G,ee),M[1]),g(y(f(j,L),-A[1]),y(f(Y,R),k[1]))),-D[2]))),-P[3])),g(y(g(g(y(g(y(f(Ce,ie),A[1]),g(y(f(we,$),-k[1]),y(f(G,ee),P[1]))),M[2]),y(g(y(f(Ce,ie),M[1]),g(y(f(ge,B),-k[1]),y(f(j,L),P[1]))),-A[2])),g(y(g(y(f(we,$),M[1]),g(y(f(ge,B),-A[1]),y(f(Y,R),P[1]))),k[2]),y(g(y(f(G,ee),M[1]),g(y(f(j,L),-A[1]),y(f(Y,R),k[1]))),-P[2]))),D[3]),y(g(g(y(g(y(f(De,de),k[1]),g(y(f(Ce,ie),-C[1]),y(f(ue,W),P[1]))),A[2]),y(g(y(f(De,de),A[1]),g(y(f(we,$),-C[1]),y(f(le,J),P[1]))),-k[2])),g(y(g(y(f(Ce,ie),A[1]),g(y(f(we,$),-k[1]),y(f(G,ee),P[1]))),C[2]),y(g(y(f(ue,W),A[1]),g(y(f(le,J),-k[1]),y(f(G,ee),C[1]))),-P[2]))),M[3]))),g(g(y(g(g(y(g(y(f(De,de),k[1]),g(y(f(Ce,ie),-C[1]),y(f(ue,W),P[1]))),M[2]),y(g(y(f(De,de),M[1]),g(y(f(ge,B),-C[1]),y(f(ne,I),P[1]))),-k[2])),g(y(g(y(f(Ce,ie),M[1]),g(y(f(ge,B),-k[1]),y(f(j,L),P[1]))),C[2]),y(g(y(f(ue,W),M[1]),g(y(f(ne,I),-k[1]),y(f(j,L),C[1]))),-P[2]))),-A[3]),y(g(g(y(g(y(f(De,de),A[1]),g(y(f(we,$),-C[1]),y(f(le,J),P[1]))),M[2]),y(g(y(f(De,de),M[1]),g(y(f(ge,B),-C[1]),y(f(ne,I),P[1]))),-A[2])),g(y(g(y(f(we,$),M[1]),g(y(f(ge,B),-A[1]),y(f(Y,R),P[1]))),C[2]),y(g(y(f(le,J),M[1]),g(y(f(ne,I),-A[1]),y(f(Y,R),C[1]))),-P[2]))),k[3])),g(y(g(g(y(g(y(f(Ce,ie),A[1]),g(y(f(we,$),-k[1]),y(f(G,ee),P[1]))),M[2]),y(g(y(f(Ce,ie),M[1]),g(y(f(ge,B),-k[1]),y(f(j,L),P[1]))),-A[2])),g(y(g(y(f(we,$),M[1]),g(y(f(ge,B),-A[1]),y(f(Y,R),P[1]))),k[2]),y(g(y(f(G,ee),M[1]),g(y(f(j,L),-A[1]),y(f(Y,R),k[1]))),-P[2]))),-C[3]),y(g(g(y(g(y(f(ue,W),A[1]),g(y(f(le,J),-k[1]),y(f(G,ee),C[1]))),M[2]),y(g(y(f(ue,W),M[1]),g(y(f(ne,I),-k[1]),y(f(j,L),C[1]))),-A[2])),g(y(g(y(f(le,J),M[1]),g(y(f(ne,I),-A[1]),y(f(Y,R),C[1]))),k[2]),y(g(y(f(G,ee),M[1]),g(y(f(j,L),-A[1]),y(f(Y,R),k[1]))),-C[2]))),P[3]))))),Ke=f(je,Ge);return Ke[Ke.length-1]}}var h=[function(){return 0},function(){return 0},function(){return 0}];function p(g){var f=h[g.length];return f||(f=h[g.length]=i(g.length)),f.apply(void 0,g)}function v(g,f,w,y,M,A,k,C){return function(P,D,F,R,L,I){switch(arguments.length){case 0:case 1:return 0;case 2:return y(P,D);case 3:return M(P,D,F);case 4:return A(P,D,F,R);case 5:return k(P,D,F,R,L);case 6:return C(P,D,F,R,L,I)}for(var B=new Array(arguments.length),V=0;V<arguments.length;++V)B[V]=arguments[V];return g(B)}}!function(){for(;h.length<=6;)h.push(i(h.length));T.exports=v.apply(void 0,[p].concat(h));for(var g=0;g<=6;++g)T.exports[g]=h[g]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],283:[function(x,T,b){"use strict";var e=x("robust-determinant");function o(u){return(2===u?a:l)(u<3?e[u]:e)}function a(u){return function(s,c){return[u([[+c[0],+s[0][1]],[+c[1],+s[1][1]]]),u([[+s[0][0],+c[0]],[+s[1][0],+c[1]]]),u(s)]}}function l(u){return function(s,c){return[u([[+c[0],+s[0][1],+s[0][2]],[+c[1],+s[1][1],+s[1][2]],[+c[2],+s[2][1],+s[2][2]]]),u([[+s[0][0],+c[0],+s[0][2]],[+s[1][0],+c[1],+s[1][2]],[+s[2][0],+c[2],+s[2][2]]]),u([[+s[0][0],+s[0][1],+c[0]],[+s[1][0],+s[1][1],+c[1]],[+s[2][0],+s[2][1],+c[2]]]),u(s)]}}var i=[function(){return[[0]]},function(u,s){return[[s[0]],[u[0][0]]]}];function d(u,s,c,h,p,v){return function(g,f){switch(g.length){case 0:return u(g,f);case 1:return s(g,f);case 2:return c(g,f);case 3:return h(g,f)}var w=p[g.length];return w||(w=p[g.length]=v(g.length)),w(g,f)}}!function(){for(;i.length<=3;)i.push(o(i.length));T.exports=d.apply(void 0,i.concat([i,o]));for(var u=0;u<3;++u)T.exports[u]=i[u]}()},{"robust-determinant":280}],284:[function(x,T,b){"use strict";var e=x("two-product"),o=x("robust-sum"),a=x("robust-scale"),l=x("robust-subtract");function i(f,w,y,M){return function(A,k,C){var P=f(f(w(k[1],C[0]),w(-C[1],k[0])),f(w(A[1],k[0]),w(-k[1],A[0]))),D=f(w(A[1],C[0]),w(-C[1],A[0])),F=M(P,D);return F[F.length-1]}}function d(f,w,y,M){return function(A,k,C,P){var D=f(f(y(f(w(C[1],P[0]),w(-P[1],C[0])),k[2]),f(y(f(w(k[1],P[0]),w(-P[1],k[0])),-C[2]),y(f(w(k[1],C[0]),w(-C[1],k[0])),P[2]))),f(y(f(w(k[1],P[0]),w(-P[1],k[0])),A[2]),f(y(f(w(A[1],P[0]),w(-P[1],A[0])),-k[2]),y(f(w(A[1],k[0]),w(-k[1],A[0])),P[2])))),F=f(f(y(f(w(C[1],P[0]),w(-P[1],C[0])),A[2]),f(y(f(w(A[1],P[0]),w(-P[1],A[0])),-C[2]),y(f(w(A[1],C[0]),w(-C[1],A[0])),P[2]))),f(y(f(w(k[1],C[0]),w(-C[1],k[0])),A[2]),f(y(f(w(A[1],C[0]),w(-C[1],A[0])),-k[2]),y(f(w(A[1],k[0]),w(-k[1],A[0])),C[2])))),R=M(D,F);return R[R.length-1]}}function u(f,w,y,M){return function(A,k,C,P,D){var F=f(f(f(y(f(y(f(w(P[1],D[0]),w(-D[1],P[0])),C[2]),f(y(f(w(C[1],D[0]),w(-D[1],C[0])),-P[2]),y(f(w(C[1],P[0]),w(-P[1],C[0])),D[2]))),k[3]),f(y(f(y(f(w(P[1],D[0]),w(-D[1],P[0])),k[2]),f(y(f(w(k[1],D[0]),w(-D[1],k[0])),-P[2]),y(f(w(k[1],P[0]),w(-P[1],k[0])),D[2]))),-C[3]),y(f(y(f(w(C[1],D[0]),w(-D[1],C[0])),k[2]),f(y(f(w(k[1],D[0]),w(-D[1],k[0])),-C[2]),y(f(w(k[1],C[0]),w(-C[1],k[0])),D[2]))),P[3]))),f(y(f(y(f(w(C[1],P[0]),w(-P[1],C[0])),k[2]),f(y(f(w(k[1],P[0]),w(-P[1],k[0])),-C[2]),y(f(w(k[1],C[0]),w(-C[1],k[0])),P[2]))),-D[3]),f(y(f(y(f(w(P[1],D[0]),w(-D[1],P[0])),k[2]),f(y(f(w(k[1],D[0]),w(-D[1],k[0])),-P[2]),y(f(w(k[1],P[0]),w(-P[1],k[0])),D[2]))),A[3]),y(f(y(f(w(P[1],D[0]),w(-D[1],P[0])),A[2]),f(y(f(w(A[1],D[0]),w(-D[1],A[0])),-P[2]),y(f(w(A[1],P[0]),w(-P[1],A[0])),D[2]))),-k[3])))),f(f(y(f(y(f(w(k[1],D[0]),w(-D[1],k[0])),A[2]),f(y(f(w(A[1],D[0]),w(-D[1],A[0])),-k[2]),y(f(w(A[1],k[0]),w(-k[1],A[0])),D[2]))),P[3]),f(y(f(y(f(w(k[1],P[0]),w(-P[1],k[0])),A[2]),f(y(f(w(A[1],P[0]),w(-P[1],A[0])),-k[2]),y(f(w(A[1],k[0]),w(-k[1],A[0])),P[2]))),-D[3]),y(f(y(f(w(C[1],P[0]),w(-P[1],C[0])),k[2]),f(y(f(w(k[1],P[0]),w(-P[1],k[0])),-C[2]),y(f(w(k[1],C[0]),w(-C[1],k[0])),P[2]))),A[3]))),f(y(f(y(f(w(C[1],P[0]),w(-P[1],C[0])),A[2]),f(y(f(w(A[1],P[0]),w(-P[1],A[0])),-C[2]),y(f(w(A[1],C[0]),w(-C[1],A[0])),P[2]))),-k[3]),f(y(f(y(f(w(k[1],P[0]),w(-P[1],k[0])),A[2]),f(y(f(w(A[1],P[0]),w(-P[1],A[0])),-k[2]),y(f(w(A[1],k[0]),w(-k[1],A[0])),P[2]))),C[3]),y(f(y(f(w(k[1],C[0]),w(-C[1],k[0])),A[2]),f(y(f(w(A[1],C[0]),w(-C[1],A[0])),-k[2]),y(f(w(A[1],k[0]),w(-k[1],A[0])),C[2]))),-P[3]))))),R=f(f(f(y(f(y(f(w(P[1],D[0]),w(-D[1],P[0])),C[2]),f(y(f(w(C[1],D[0]),w(-D[1],C[0])),-P[2]),y(f(w(C[1],P[0]),w(-P[1],C[0])),D[2]))),A[3]),y(f(y(f(w(P[1],D[0]),w(-D[1],P[0])),A[2]),f(y(f(w(A[1],D[0]),w(-D[1],A[0])),-P[2]),y(f(w(A[1],P[0]),w(-P[1],A[0])),D[2]))),-C[3])),f(y(f(y(f(w(C[1],D[0]),w(-D[1],C[0])),A[2]),f(y(f(w(A[1],D[0]),w(-D[1],A[0])),-C[2]),y(f(w(A[1],C[0]),w(-C[1],A[0])),D[2]))),P[3]),y(f(y(f(w(C[1],P[0]),w(-P[1],C[0])),A[2]),f(y(f(w(A[1],P[0]),w(-P[1],A[0])),-C[2]),y(f(w(A[1],C[0]),w(-C[1],A[0])),P[2]))),-D[3]))),f(f(y(f(y(f(w(C[1],D[0]),w(-D[1],C[0])),k[2]),f(y(f(w(k[1],D[0]),w(-D[1],k[0])),-C[2]),y(f(w(k[1],C[0]),w(-C[1],k[0])),D[2]))),A[3]),y(f(y(f(w(C[1],D[0]),w(-D[1],C[0])),A[2]),f(y(f(w(A[1],D[0]),w(-D[1],A[0])),-C[2]),y(f(w(A[1],C[0]),w(-C[1],A[0])),D[2]))),-k[3])),f(y(f(y(f(w(k[1],D[0]),w(-D[1],k[0])),A[2]),f(y(f(w(A[1],D[0]),w(-D[1],A[0])),-k[2]),y(f(w(A[1],k[0]),w(-k[1],A[0])),D[2]))),C[3]),y(f(y(f(w(k[1],C[0]),w(-C[1],k[0])),A[2]),f(y(f(w(A[1],C[0]),w(-C[1],A[0])),-k[2]),y(f(w(A[1],k[0]),w(-k[1],A[0])),C[2]))),-D[3])))),L=M(F,R);return L[L.length-1]}}function s(f){return(3===f?i:4===f?d:u)(o,e,a,l)}var c=s(3),h=s(4),p=[function(){return 0},function(){return 0},function(f,w){return w[0]-f[0]},function(f,w,y){var M,A=(f[1]-y[1])*(w[0]-y[0]),k=(f[0]-y[0])*(w[1]-y[1]),C=A-k;if(A>0){if(k<=0)return C;M=A+k}else{if(!(A<0)||k>=0)return C;M=-(A+k)}var P=33306690738754716e-32*M;return C>=P||C<=-P?C:c(f,w,y)},function(f,w,y,M){var A=f[0]-M[0],k=w[0]-M[0],C=y[0]-M[0],P=f[1]-M[1],D=w[1]-M[1],F=y[1]-M[1],R=f[2]-M[2],L=w[2]-M[2],I=y[2]-M[2],B=k*F,V=C*D,Z=C*P,Y=A*F,ee=A*D,J=k*P,$=R*(B-V)+L*(Z-Y)+I*(ee-J),Q=7771561172376103e-31*((Math.abs(B)+Math.abs(V))*Math.abs(R)+(Math.abs(Z)+Math.abs(Y))*Math.abs(L)+(Math.abs(ee)+Math.abs(J))*Math.abs(I));return $>Q||-$>Q?$:h(f,w,y,M)}];function v(f){var w=p[f.length];return w||(w=p[f.length]=s(f.length)),w.apply(void 0,f)}function g(f,w,y,M,A,k,C){return function(P,D,F,R,L){switch(arguments.length){case 0:case 1:return 0;case 2:return M(P,D);case 3:return A(P,D,F);case 4:return k(P,D,F,R);case 5:return C(P,D,F,R,L)}for(var I=new Array(arguments.length),B=0;B<arguments.length;++B)I[B]=arguments[B];return f(I)}}!function(){for(;p.length<=5;)p.push(s(p.length));T.exports=g.apply(void 0,[v].concat(p));for(var f=0;f<=5;++f)T.exports[f]=p[f]}()},{"robust-scale":286,"robust-subtract":288,"robust-sum":289,"two-product":306}],285:[function(x,T,b){"use strict";var e=x("robust-sum"),o=x("robust-scale");T.exports=function(a,l){if(1===a.length)return o(l,a[0]);if(1===l.length)return o(a,l[0]);if(0===a.length||0===l.length)return[0];var i=[0];if(a.length<l.length)for(var d=0;d<a.length;++d)i=e(i,o(l,a[d]));else for(d=0;d<l.length;++d)i=e(i,o(a,l[d]));return i}},{"robust-scale":286,"robust-sum":289}],286:[function(x,T,b){"use strict";var e=x("two-product"),o=x("two-sum");T.exports=function(a,l){var i=a.length;if(1===i){var d=e(a[0],l);return d[0]?d:[d[1]]}var u=new Array(2*i),s=[.1,.1],c=[.1,.1],h=0;e(a[0],l,s),s[0]&&(u[h++]=s[0]);for(var p=1;p<i;++p){e(a[p],l,c),o(s[1],c[0],s),s[0]&&(u[h++]=s[0]);var g=c[1],f=s[1],w=g+f,y=f-(w-g);s[1]=w,y&&(u[h++]=y)}return s[1]&&(u[h++]=s[1]),0===h&&(u[h++]=0),u.length=h,u}},{"two-product":306,"two-sum":307}],287:[function(x,T,b){"use strict";T.exports=function(o,a,l,i){var d=e(o,l,i),u=e(a,l,i);if(d>0&&u>0||d<0&&u<0)return!1;var s=e(l,o,a),c=e(i,o,a);return!(s>0&&c>0||s<0&&c<0)&&(0!==d||0!==u||0!==s||0!==c||function(h,p,v,g){for(var f=0;f<2;++f){var w=h[f],y=p[f],M=Math.min(w,y),A=Math.max(w,y),k=v[f],C=g[f],P=Math.min(k,C);if(Math.max(k,C)<M||A<P)return!1}return!0}(o,a,l,i))};var e=x("robust-orientation")[3]},{"robust-orientation":284}],288:[function(x,T,b){"use strict";T.exports=function(e,o){var F,R,L,I,B,a=0|e.length,l=0|o.length;if(1===a&&1===l)return(B=(F=e[0])-((L=F+(R=-o[0]))-(I=L-F))+(R-I))?[B,L]:[L];var i,d,u=new Array(a+l),s=0,c=0,h=0,p=Math.abs,v=e[c],g=p(v),f=-o[h],w=p(f);g<w?(d=v,(c+=1)<a&&(g=p(v=e[c]))):(d=f,(h+=1)<l&&(w=p(f=-o[h]))),c<a&&g<w||h>=l?(i=v,(c+=1)<a&&(g=p(v=e[c]))):(i=f,(h+=1)<l&&(w=p(f=-o[h])));for(var y,M,A=i+d,k=A-i,C=d-k,P=C,D=A;c<a&&h<l;)g<w?(i=v,(c+=1)<a&&(g=p(v=e[c]))):(i=f,(h+=1)<l&&(w=p(f=-o[h]))),(C=(d=P)-(k=(A=i+d)-i))&&(u[s++]=C),P=D-((y=D+A)-(M=y-D))+(A-M),D=y;for(;c<a;)(C=(d=P)-(k=(A=(i=v)+d)-i))&&(u[s++]=C),P=D-((y=D+A)-(M=y-D))+(A-M),D=y,(c+=1)<a&&(v=e[c]);for(;h<l;)(C=(d=P)-(k=(A=(i=f)+d)-i))&&(u[s++]=C),P=D-((y=D+A)-(M=y-D))+(A-M),D=y,(h+=1)<l&&(f=-o[h]);return P&&(u[s++]=P),D&&(u[s++]=D),s||(u[s++]=0),u.length=s,u}},{}],289:[function(x,T,b){"use strict";T.exports=function(e,o){var F,R,L,I,B,a=0|e.length,l=0|o.length;if(1===a&&1===l)return(B=(F=e[0])-((L=F+(R=o[0]))-(I=L-F))+(R-I))?[B,L]:[L];var i,d,u=new Array(a+l),s=0,c=0,h=0,p=Math.abs,v=e[c],g=p(v),f=o[h],w=p(f);g<w?(d=v,(c+=1)<a&&(g=p(v=e[c]))):(d=f,(h+=1)<l&&(w=p(f=o[h]))),c<a&&g<w||h>=l?(i=v,(c+=1)<a&&(g=p(v=e[c]))):(i=f,(h+=1)<l&&(w=p(f=o[h])));for(var y,M,A=i+d,k=A-i,C=d-k,P=C,D=A;c<a&&h<l;)g<w?(i=v,(c+=1)<a&&(g=p(v=e[c]))):(i=f,(h+=1)<l&&(w=p(f=o[h]))),(C=(d=P)-(k=(A=i+d)-i))&&(u[s++]=C),P=D-((y=D+A)-(M=y-D))+(A-M),D=y;for(;c<a;)(C=(d=P)-(k=(A=(i=v)+d)-i))&&(u[s++]=C),P=D-((y=D+A)-(M=y-D))+(A-M),D=y,(c+=1)<a&&(v=e[c]);for(;h<l;)(C=(d=P)-(k=(A=(i=f)+d)-i))&&(u[s++]=C),P=D-((y=D+A)-(M=y-D))+(A-M),D=y,(h+=1)<l&&(f=o[h]);return P&&(u[s++]=P),D&&(u[s++]=D),s||(u[s++]=0),u.length=s,u}},{}],290:[function(x,T,b){"use strict";T.exports=function(a){return o(e(a))};var e=x("boundary-cells"),o=x("reduce-simplicial-complex")},{"boundary-cells":34,"reduce-simplicial-complex":276}],291:[function(x,T,b){"use strict";T.exports=function(i,d,u,s){if(u=u||0,void 0===s&&(s=function(y){for(var M=y.length,A=0,k=0;k<M;++k)A=0|Math.max(A,y[k].length);return A-1}(i)),0===i.length||s<1)return{cells:[],vertexIds:[],vertexWeights:[]};var c=function(y,M){for(var A=y.length,k=o.mallocUint8(A),C=0;C<A;++C)k[C]=y[C]<M|0;return k}(d,+u),h=function(y,M){for(var A=y.length,C=o.mallocUint32(2*(M*(M+1)/2*A|0)),P=0,D=0;D<A;++D)for(var F=y[D],R=(M=F.length,0);R<M;++R)for(var L=0;L<R;++L){var I=F[L],B=F[R];C[P++]=0|Math.min(I,B),C[P++]=0|Math.max(I,B)}a(e(C,[P/2|0,2]));var V=2;for(D=2;D<P;D+=2)C[D-2]===C[D]&&C[D-1]===C[D+1]||(C[V++]=C[D],C[V++]=C[D+1]);return e(C,[V/2|0,2])}(i,s),p=function(y,M,A,k){for(var C=y.data,P=y.shape[0],D=o.mallocDouble(P),F=0,R=0;R<P;++R){var L=C[2*R],I=C[2*R+1];if(A[L]!==A[I]){var B=M[L],V=M[I];C[2*F]=L,C[2*F+1]=I,D[F++]=(V-k)/(V-B)}}return y.shape[0]=F,e(D,[F])}(h,d,c,+u),v=function(y,M){var A=o.mallocInt32(2*M),k=y.shape[0],C=y.data;A[0]=0;for(var P=0,D=0;D<k;++D){var F=C[2*D];if(F!==P){for(A[2*P+1]=D;++P<F;)A[2*P]=D,A[2*P+1]=D;A[2*P]=D}}for(A[2*P+1]=k;++P<M;)A[2*P]=A[2*P+1]=k;return A}(h,0|d.length),g=l(s)(i,h.data,v,c),f=function(y){for(var M=0|y.shape[0],A=y.data,k=new Array(M),C=0;C<M;++C)k[C]=[A[2*C],A[2*C+1]];return k}(h),w=[].slice.call(p.data,0,p.shape[0]);return o.free(c),o.free(h.data),o.free(p.data),o.free(v),{cells:g,vertexIds:f,vertexWeights:w}};var e=x("ndarray"),o=x("typedarray-pool"),a=x("ndarray-sort"),l=x("./lib/codegen")},{"./lib/codegen":292,ndarray:259,"ndarray-sort":258,"typedarray-pool":308}],292:[function(x,T,b){"use strict";T.exports=function(o){return e[o]()};var e=[function(){return function(o,a,l,i){for(var d=o.length,u=0;u<d;++u);return[]}},function(){function o(a,l,i,d){for(var u=0|Math.min(i,d),s=0|Math.max(i,d),c=a[2*u],h=a[2*u+1];c<h;){var p=c+h>>1,v=l[2*p+1];if(v===s)return p;s<v?h=p:c=p+1}return c}return function(a,l,i,d){for(var u=a.length,s=[],c=0;c<u;++c){var h=a[c];if(2===h.length){var p=(d[h[0]]<<0)+(d[h[1]]<<1);if(0===p||3===p)continue;switch(p){case 0:break;case 1:s.push([o(i,l,h[0],h[1])]);break;case 2:s.push([o(i,l,h[1],h[0])])}}}return s}},function(){function o(a,l,i,d){for(var u=0|Math.min(i,d),s=0|Math.max(i,d),c=a[2*u],h=a[2*u+1];c<h;){var p=c+h>>1,v=l[2*p+1];if(v===s)return p;s<v?h=p:c=p+1}return c}return function(a,l,i,d){for(var u=a.length,s=[],c=0;c<u;++c){var h=a[c],p=h.length;if(3===p){if(0==(v=(d[h[0]]<<0)+(d[h[1]]<<1)+(d[h[2]]<<2))||7===v)continue;switch(v){case 0:break;case 1:s.push([o(i,l,h[0],h[2]),o(i,l,h[0],h[1])]);break;case 2:s.push([o(i,l,h[1],h[0]),o(i,l,h[1],h[2])]);break;case 3:s.push([o(i,l,h[0],h[2]),o(i,l,h[1],h[2])]);break;case 4:s.push([o(i,l,h[2],h[1]),o(i,l,h[2],h[0])]);break;case 5:s.push([o(i,l,h[2],h[1]),o(i,l,h[0],h[1])]);break;case 6:s.push([o(i,l,h[1],h[0]),o(i,l,h[2],h[0])])}}else if(2===p){var v;if(0==(v=(d[h[0]]<<0)+(d[h[1]]<<1))||3===v)continue;switch(v){case 0:break;case 1:s.push([o(i,l,h[0],h[1])]);break;case 2:s.push([o(i,l,h[1],h[0])])}}}return s}},function(){function o(a,l,i,d){for(var u=0|Math.min(i,d),s=0|Math.max(i,d),c=a[2*u],h=a[2*u+1];c<h;){var p=c+h>>1,v=l[2*p+1];if(v===s)return p;s<v?h=p:c=p+1}return c}return function(a,l,i,d){for(var u=a.length,s=[],c=0;c<u;++c){var h=a[c],p=h.length;if(4===p){if(0==(v=(d[h[0]]<<0)+(d[h[1]]<<1)+(d[h[2]]<<2)+(d[h[3]]<<3))||15===v)continue;switch(v){case 0:break;case 1:s.push([o(i,l,h[0],h[1]),o(i,l,h[0],h[2]),o(i,l,h[0],h[3])]);break;case 2:s.push([o(i,l,h[1],h[2]),o(i,l,h[1],h[0]),o(i,l,h[1],h[3])]);break;case 3:s.push([o(i,l,h[1],h[2]),o(i,l,h[0],h[2]),o(i,l,h[0],h[3])],[o(i,l,h[1],h[3]),o(i,l,h[1],h[2]),o(i,l,h[0],h[3])]);break;case 4:s.push([o(i,l,h[2],h[0]),o(i,l,h[2],h[1]),o(i,l,h[2],h[3])]);break;case 5:s.push([o(i,l,h[0],h[1]),o(i,l,h[2],h[1]),o(i,l,h[0],h[3])],[o(i,l,h[2],h[1]),o(i,l,h[2],h[3]),o(i,l,h[0],h[3])]);break;case 6:s.push([o(i,l,h[2],h[0]),o(i,l,h[1],h[0]),o(i,l,h[1],h[3])],[o(i,l,h[2],h[3]),o(i,l,h[2],h[0]),o(i,l,h[1],h[3])]);break;case 7:s.push([o(i,l,h[0],h[3]),o(i,l,h[1],h[3]),o(i,l,h[2],h[3])]);break;case 8:s.push([o(i,l,h[3],h[1]),o(i,l,h[3],h[0]),o(i,l,h[3],h[2])]);break;case 9:s.push([o(i,l,h[3],h[1]),o(i,l,h[0],h[1]),o(i,l,h[0],h[2])],[o(i,l,h[3],h[2]),o(i,l,h[3],h[1]),o(i,l,h[0],h[2])]);break;case 10:s.push([o(i,l,h[1],h[0]),o(i,l,h[3],h[0]),o(i,l,h[1],h[2])],[o(i,l,h[3],h[0]),o(i,l,h[3],h[2]),o(i,l,h[1],h[2])]);break;case 11:s.push([o(i,l,h[1],h[2]),o(i,l,h[0],h[2]),o(i,l,h[3],h[2])]);break;case 12:s.push([o(i,l,h[3],h[0]),o(i,l,h[2],h[0]),o(i,l,h[2],h[1])],[o(i,l,h[3],h[1]),o(i,l,h[3],h[0]),o(i,l,h[2],h[1])]);break;case 13:s.push([o(i,l,h[0],h[1]),o(i,l,h[2],h[1]),o(i,l,h[3],h[1])]);break;case 14:s.push([o(i,l,h[2],h[0]),o(i,l,h[1],h[0]),o(i,l,h[3],h[0])])}}else if(3===p){if(0==(v=(d[h[0]]<<0)+(d[h[1]]<<1)+(d[h[2]]<<2))||7===v)continue;switch(v){case 0:break;case 1:s.push([o(i,l,h[0],h[2]),o(i,l,h[0],h[1])]);break;case 2:s.push([o(i,l,h[1],h[0]),o(i,l,h[1],h[2])]);break;case 3:s.push([o(i,l,h[0],h[2]),o(i,l,h[1],h[2])]);break;case 4:s.push([o(i,l,h[2],h[1]),o(i,l,h[2],h[0])]);break;case 5:s.push([o(i,l,h[2],h[1]),o(i,l,h[0],h[1])]);break;case 6:s.push([o(i,l,h[1],h[0]),o(i,l,h[2],h[0])])}}else if(2===p){var v;if(0==(v=(d[h[0]]<<0)+(d[h[1]]<<1))||3===v)continue;switch(v){case 0:break;case 1:s.push([o(i,l,h[0],h[1])]);break;case 2:s.push([o(i,l,h[1],h[0])])}}}return s}}]},{}],293:[function(x,T,b){"use strict";var e=x("bit-twiddle"),o=x("union-find");function a(h,p){var v=h.length,g=h.length-p.length,f=Math.min;if(g)return g;switch(v){case 0:return 0;case 1:return h[0]-p[0];case 2:return(M=h[0]+h[1]-p[0]-p[1])||f(h[0],h[1])-f(p[0],p[1]);case 3:var w=h[0]+h[1],y=p[0]+p[1];if(M=w+h[2]-(y+p[2]))return M;var M,A=f(h[0],h[1]),k=f(p[0],p[1]);return(M=f(A,h[2])-f(k,p[2]))||f(A+h[2],w)-f(k+p[2],y);default:var C=h.slice(0);C.sort();var P=p.slice(0);P.sort();for(var D=0;D<v;++D)if(g=C[D]-P[D])return g;return 0}}function l(h,p){return a(h[0],p[0])}function i(h,p){if(p){for(var v=h.length,g=new Array(v),f=0;f<v;++f)g[f]=[h[f],p[f]];for(g.sort(l),f=0;f<v;++f)h[f]=g[f][0],p[f]=g[f][1];return h}return h.sort(a),h}function d(h){if(0===h.length)return[];for(var p=1,v=h.length,g=1;g<v;++g){var f=h[g];if(a(f,h[g-1])){if(g===p){p++;continue}h[p++]=f}}return h.length=p,h}function u(h,p){for(var v=0,g=h.length-1,f=-1;v<=g;){var w=v+g>>1,y=a(h[w],p);y<=0?(0===y&&(f=w),v=w+1):y>0&&(g=w-1)}return f}function s(h,p){for(var v=new Array(h.length),g=0,f=v.length;g<f;++g)v[g]=[];for(var w=[],y=(g=0,p.length);g<y;++g)for(var M=p[g],A=M.length,k=1,C=1<<A;k<C;++k){w.length=e.popCount(k);for(var P=0,D=0;D<A;++D)k&1<<D&&(w[P++]=M[D]);var F=u(h,w);if(!(F<0))for(;v[F++].push(g),!(F>=h.length||0!==a(h[F],w)););}return v}function c(h,p){if(p<0)return[];for(var v=[],g=(1<<p+1)-1,f=0;f<h.length;++f)for(var w=h[f],y=g;y<1<<w.length;y=e.nextCombination(y)){for(var M=new Array(p+1),A=0,k=0;k<w.length;++k)y&1<<k&&(M[A++]=w[k]);v.push(M)}return i(v)}b.dimension=function(h){for(var p=0,v=Math.max,g=0,f=h.length;g<f;++g)p=v(p,h[g].length);return p-1},b.countVertices=function(h){for(var p=-1,v=Math.max,g=0,f=h.length;g<f;++g)for(var w=h[g],y=0,M=w.length;y<M;++y)p=v(p,w[y]);return p+1},b.cloneCells=function(h){for(var p=new Array(h.length),v=0,g=h.length;v<g;++v)p[v]=h[v].slice(0);return p},b.compareCells=a,b.normalize=i,b.unique=d,b.findCell=u,b.incidence=s,b.dual=function(h,p){if(!p)return s(d(c(h,0)),h);for(var v=new Array(p),g=0;g<p;++g)v[g]=[];g=0;for(var f=h.length;g<f;++g)for(var w=h[g],y=0,M=w.length;y<M;++y)v[w[y]].push(g);return v},b.explode=function(h){for(var p=[],v=0,g=h.length;v<g;++v)for(var f=h[v],w=0|f.length,y=1,M=1<<w;y<M;++y){for(var A=[],k=0;k<w;++k)y>>>k&1&&A.push(f[k]);p.push(A)}return i(p)},b.skeleton=c,b.boundary=function(h){for(var p=[],v=0,g=h.length;v<g;++v)for(var f=h[v],w=0,y=f.length;w<y;++w){for(var M=new Array(f.length-1),A=0,k=0;A<y;++A)A!==w&&(M[k++]=f[A]);p.push(M)}return i(p)},b.connectedComponents=function(h,p){return p?function(v,g){for(var f=new o(g),w=0;w<v.length;++w)for(var y=v[w],M=0;M<y.length;++M)for(var A=M+1;A<y.length;++A)f.link(y[M],y[A]);var k=[],C=f.ranks;for(w=0;w<C.length;++w)C[w]=-1;for(w=0;w<v.length;++w){var P=f.find(v[w][0]);C[P]<0?(C[P]=k.length,k.push([v[w].slice(0)])):k[C[P]].push(v[w].slice(0))}return k}(h,p):function(v){for(var g=d(i(c(v,0))),f=new o(g.length),w=0;w<v.length;++w)for(var y=v[w],M=0;M<y.length;++M)for(var A=u(g,[y[M]]),k=M+1;k<y.length;++k)f.link(A,u(g,[y[k]]));var C=[],P=f.ranks;for(w=0;w<P.length;++w)P[w]=-1;for(w=0;w<v.length;++w){var D=f.find(u(g,[v[w][0]]));P[D]<0?(P[D]=C.length,C.push([v[w].slice(0)])):C[P[D]].push(v[w].slice(0))}return C}(h)}},{"bit-twiddle":32,"union-find":309}],294:[function(x,T,b){arguments[4][32][0].apply(b,arguments)},{dup:32}],295:[function(x,T,b){arguments[4][293][0].apply(b,arguments)},{"bit-twiddle":294,dup:293,"union-find":296}],296:[function(x,T,b){"use strict";function e(o){this.roots=new Array(o),this.ranks=new Array(o);for(var a=0;a<o;++a)this.roots[a]=a,this.ranks[a]=0}T.exports=e,e.prototype.length=function(){return this.roots.length},e.prototype.makeSet=function(){var o=this.roots.length;return this.roots.push(o),this.ranks.push(0),o},e.prototype.find=function(o){for(var a=this.roots;a[o]!==o;){var l=a[o];a[o]=a[l],o=l}return o},e.prototype.link=function(o,a){var l=this.find(o),i=this.find(a);if(l!==i){var d=this.ranks,u=this.roots,s=d[l],c=d[i];s<c?u[l]=i:c<s?u[i]=l:(u[i]=l,++d[l])}}},{}],297:[function(x,T,b){"use strict";T.exports=function(a,l,i){for(var d=l.length,u=a.length,s=new Array(d),c=new Array(d),h=new Array(d),p=new Array(d),v=0;v<d;++v)s[v]=c[v]=-1,h[v]=1/0,p[v]=!1;for(v=0;v<u;++v){var g=a[v];if(2!==g.length)throw new Error("Input must be a graph");var f=g[1],w=g[0];c[w]=-1!==c[w]?-2:f,s[f]=-1!==s[f]?-2:w}function y(J){if(p[J])return 1/0;var Q,se,W=s[J],ie=c[J];return W<0||ie<0?1/0:(Q=l[W],se=l[ie],Math.abs(e(l[J],Q,se))/Math.sqrt(Math.pow(Q[0]-se[0],2)+Math.pow(Q[1]-se[1],2)))}function M(J,$){var Q=L[J],se=L[$];L[J]=se,L[$]=Q,I[Q]=$,I[se]=J}function A(J){return h[L[J]]}function k(J){return 1&J?J-1>>1:(J>>1)-1}function C(J){for(var $=A(J);;){var Q=$,se=2*J+1,j=2*(J+1),G=J;if(se<B){var W=A(se);W<Q&&(G=se,Q=W)}if(j<B&&A(j)<Q&&(G=j),G===J)return J;M(J,G),J=G}}function P(J){for(var $=A(J);J>0;){var Q=k(J);if(!(Q>=0&&$<A(Q)))return J;M(J,Q),J=Q}}function D(){if(B>0){var J=L[0];return M(0,B-1),B-=1,C(0),J}return-1}function F(J,$){var Q=L[J];return h[Q]===$?J:(h[Q]=-1/0,P(J),D(),h[Q]=$,P((B+=1)-1))}function R(J){if(!p[J]){p[J]=!0;var $=s[J],Q=c[J];s[Q]>=0&&(s[Q]=$),c[$]>=0&&(c[$]=Q),I[$]>=0&&F(I[$],y($)),I[Q]>=0&&F(I[Q],y(Q))}}var L=[],I=new Array(d);for(v=0;v<d;++v)(h[v]=y(v))<1/0?(I[v]=L.length,L.push(v)):I[v]=-1;var B=L.length;for(v=B>>1;v>=0;--v)C(v);for(;;){var V=D();if(V<0||h[V]>i)break;R(V)}var Z=[];for(v=0;v<d;++v)p[v]||(I[v]=Z.length,Z.push(l[v].slice()));function Y(J,$){if(J[$]<0)return $;var Q=$,se=$;do{var j=J[se];if(!p[se]||j<0||j===se||(j=J[se=j],!p[se]||j<0||j===se))break;se=j,Q=J[Q]}while(Q!==se);for(var G=$;G!==se;G=J[G])J[G]=se;return se}var ee=[];return a.forEach(function(J){var $=Y(s,J[0]),Q=Y(c,J[1]);if($>=0&&Q>=0&&$!==Q){var se=I[$],j=I[Q];se!==j&&ee.push([se,j])}}),o.unique(o.normalize(ee)),{positions:Z,edges:ee}};var e=x("robust-orientation"),o=x("simplicial-complex")},{"robust-orientation":284,"simplicial-complex":295}],298:[function(x,T,b){"use strict";T.exports=function(a,l){var i,d,u,s;if(l[0][0]<l[1][0])i=l[0],d=l[1];else{if(!(l[0][0]>l[1][0]))return o(l,a);i=l[1],d=l[0]}if(a[0][0]<a[1][0])u=a[0],s=a[1];else{if(!(a[0][0]>a[1][0]))return-o(a,l);u=a[1],s=a[0]}var c=e(i,d,s),h=e(i,d,u);if(c<0){if(h<=0)return c}else if(c>0){if(h>=0)return c}else if(h)return h;if(c=e(s,u,d),h=e(s,u,i),c<0){if(h<=0)return c}else if(c>0){if(h>=0)return c}else if(h)return h;return d[0]-s[0]};var e=x("robust-orientation");function o(a,l){var i,d,u,s;if(l[0][0]<l[1][0])i=l[0],d=l[1];else{if(!(l[0][0]>l[1][0])){var c=Math.min(a[0][1],a[1][1]),h=Math.max(a[0][1],a[1][1]),p=Math.min(l[0][1],l[1][1]),v=Math.max(l[0][1],l[1][1]);return h<p?h-p:c>v?c-v:h-v}i=l[1],d=l[0]}a[0][1]<a[1][1]?(u=a[0],s=a[1]):(u=a[1],s=a[0]);var g=e(d,i,u);return g||(g=e(d,i,s))||s-d}},{"robust-orientation":284}],299:[function(x,T,b){"use strict";T.exports=function(h){for(var p=h.length,v=2*p,g=new Array(v),f=0;f<p;++f){var w=h[f],y=w[0][0]<w[1][0];g[2*f]=new c(w[0][0],w,y,f),g[2*f+1]=new c(w[1][0],w,!y,f)}g.sort(function(R,L){var I=R.x-L.x;return I||(I=R.create-L.create)||Math.min(R.segment[0][1],R.segment[1][1])-Math.min(L.segment[0][1],L.segment[1][1])});var M=o(l),A=[],k=[],C=[];for(f=0;f<v;){for(var P=g[f].x,D=[];f<v;){var F=g[f];if(F.x!==P)break;f+=1,F.segment[0][0]===F.x&&F.segment[1][0]===F.x?F.create&&(F.segment[0][1]<F.segment[1][1]?(D.push(new s(F.segment[0][1],F.index,!0,!0)),D.push(new s(F.segment[1][1],F.index,!1,!1))):(D.push(new s(F.segment[1][1],F.index,!0,!1)),D.push(new s(F.segment[0][1],F.index,!1,!0)))):M=F.create?M.insert(F.segment,F.index):M.remove(F.segment)}A.push(M.root),k.push(P),C.push(D)}return new i(A,k,C)};var e=x("binary-search-bounds"),o=x("functional-red-black-tree"),a=x("robust-orientation"),l=x("./lib/order-segments");function i(h,p,v){this.slabs=h,this.coordinates=p,this.horizontal=v}function d(h,p){return h.y-p}function u(h,p){for(var v=null;h;){var g,f,w=h.key;w[0][0]<w[1][0]?(g=w[0],f=w[1]):(g=w[1],f=w[0]);var y=a(g,f,p);if(y<0)h=h.left;else if(y>0)if(p[0]!==w[1][0])v=h,h=h.right;else{if(M=u(h.right,p))return M;h=h.left}else{if(p[0]!==w[1][0])return h;var M;if(M=u(h.right,p))return M;h=h.left}}return v}function s(h,p,v,g){this.y=h,this.index=p,this.start=v,this.closed=g}function c(h,p,v,g){this.x=h,this.segment=p,this.create=v,this.index=g}i.prototype.castUp=function(h){var p=e.le(this.coordinates,h[0]);if(p<0)return-1;var v=u(this.slabs[p],h),g=-1;if(v&&(g=v.value),this.coordinates[p]===h[0]){var f=null;if(v&&(f=v.key),p>0){var w=u(this.slabs[p-1],h);w&&(f?l(w.key,f)>0&&(f=w.key,g=w.value):(g=w.value,f=w.key))}var y=this.horizontal[p];if(y.length>0){var M=e.ge(y,h[1],d);if(M<y.length){var A=y[M];if(h[1]===A.y){if(A.closed)return A.index;for(;M<y.length-1&&y[M+1].y===h[1];)if((A=y[M+=1]).closed)return A.index;if(A.y===h[1]&&!A.start){if((M+=1)>=y.length)return g;A=y[M]}}if(A.start)if(f){var k=a(f[0],f[1],[h[0],A.y]);f[0][0]>f[1][0]&&(k=-k),k>0&&(g=A.index)}else g=A.index;else A.y!==h[1]&&(g=A.index)}}}return g}},{"./lib/order-segments":298,"binary-search-bounds":31,"functional-red-black-tree":69,"robust-orientation":284}],300:[function(x,T,b){"use strict";var e=x("robust-dot-product"),o=x("robust-sum");function a(i,d){var u=o(e(i,d),[d[d.length-1]]);return u[u.length-1]}function l(i,d,u,s){var c=-d/(s-d);c<0?c=0:c>1&&(c=1);for(var h=1-c,p=i.length,v=new Array(p),g=0;g<p;++g)v[g]=c*i[g]+h*u[g];return v}T.exports=function(i,d){for(var u=[],s=[],c=a(i[i.length-1],d),h=i[i.length-1],p=i[0],v=0;v<i.length;++v,h=p){var g=a(p=i[v],d);if(c<0&&g>0||c>0&&g<0){var f=l(h,g,p,c);u.push(f),s.push(f.slice())}g<0?s.push(p.slice()):g>0?u.push(p.slice()):(u.push(p.slice()),s.push(p.slice())),c=g}return{positive:u,negative:s}},T.exports.positive=function(i,d){for(var u=[],s=a(i[i.length-1],d),c=i[i.length-1],h=i[0],p=0;p<i.length;++p,c=h){var v=a(h=i[p],d);(s<0&&v>0||s>0&&v<0)&&u.push(l(c,v,h,s)),v>=0&&u.push(h.slice()),s=v}return u},T.exports.negative=function(i,d){for(var u=[],s=a(i[i.length-1],d),c=i[i.length-1],h=i[0],p=0;p<i.length;++p,c=h){var v=a(h=i[p],d);(s<0&&v>0||s>0&&v<0)&&u.push(l(c,v,h,s)),v<=0&&u.push(h.slice()),s=v}return u}},{"robust-dot-product":281,"robust-sum":289}],301:[function(x,T,b){!function(){"use strict";var e={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(u){return l(d(u),arguments)}function a(u,s){return o.apply(null,[u].concat(s||[]))}function l(u,s){var c,h,p,v,g,f,w,y,M,A=1,k=u.length,C="";for(h=0;h<k;h++)if("string"==typeof u[h])C+=u[h];else if("object"==typeof u[h]){if((v=u[h]).keys)for(c=s[A],p=0;p<v.keys.length;p++){if(null==c)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',v.keys[p],v.keys[p-1]));c=c[v.keys[p]]}else c=v.param_no?s[v.param_no]:s[A++];if(e.not_type.test(v.type)&&e.not_primitive.test(v.type)&&c instanceof Function&&(c=c()),e.numeric_arg.test(v.type)&&"number"!=typeof c&&isNaN(c))throw new TypeError(o("[sprintf] expecting number but found %T",c));switch(e.number.test(v.type)&&(y=c>=0),v.type){case"b":c=parseInt(c,10).toString(2);break;case"c":c=String.fromCharCode(parseInt(c,10));break;case"d":case"i":c=parseInt(c,10);break;case"j":c=JSON.stringify(c,null,v.width?parseInt(v.width):0);break;case"e":c=v.precision?parseFloat(c).toExponential(v.precision):parseFloat(c).toExponential();break;case"f":c=v.precision?parseFloat(c).toFixed(v.precision):parseFloat(c);break;case"g":c=v.precision?String(Number(c.toPrecision(v.precision))):parseFloat(c);break;case"o":c=(parseInt(c,10)>>>0).toString(8);break;case"s":c=String(c),c=v.precision?c.substring(0,v.precision):c;break;case"t":c=String(!!c),c=v.precision?c.substring(0,v.precision):c;break;case"T":c=Object.prototype.toString.call(c).slice(8,-1).toLowerCase(),c=v.precision?c.substring(0,v.precision):c;break;case"u":c=parseInt(c,10)>>>0;break;case"v":c=c.valueOf(),c=v.precision?c.substring(0,v.precision):c;break;case"x":c=(parseInt(c,10)>>>0).toString(16);break;case"X":c=(parseInt(c,10)>>>0).toString(16).toUpperCase()}e.json.test(v.type)?C+=c:(!e.number.test(v.type)||y&&!v.sign?M="":(M=y?"+":"-",c=c.toString().replace(e.sign,"")),f=v.pad_char?"0"===v.pad_char?"0":v.pad_char.charAt(1):" ",w=v.width-(M+c).length,g=v.width&&w>0?f.repeat(w):"",C+=v.align?M+c+g:"0"===f?M+g+c:g+M+c)}return C}var i=Object.create(null);function d(u){if(i[u])return i[u];for(var s,c=u,h=[],p=0;c;){if(null!==(s=e.text.exec(c)))h.push(s[0]);else if(null!==(s=e.modulo.exec(c)))h.push("%");else{if(null===(s=e.placeholder.exec(c)))throw new SyntaxError("[sprintf] unexpected placeholder");if(s[2]){p|=1;var v=[],g=s[2],f=[];if(null===(f=e.key.exec(g)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(v.push(f[1]);""!==(g=g.substring(f[0].length));)if(null!==(f=e.key_access.exec(g)))v.push(f[1]);else{if(null===(f=e.index_access.exec(g)))throw new SyntaxError("[sprintf] failed to parse named argument key");v.push(f[1])}s[2]=v}else p|=2;if(3===p)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");h.push({placeholder:s[0],param_no:s[1],keys:s[2],sign:s[3],pad_char:s[4],align:s[5],width:s[6],precision:s[7],type:s[8]})}c=c.substring(s[0].length)}return i[u]=h}void 0!==b&&(b.sprintf=o,b.vsprintf=a),"undefined"!=typeof window&&(window.sprintf=o,window.vsprintf=a)}()},{}],302:[function(x,T,b){"use strict";T.exports=function(i,d){if(i.dimension<=0)return{positions:[],cells:[]};if(1===i.dimension)return function(c,h){for(var p=o(c,h),v=p.length,g=new Array(v),f=new Array(v),w=0;w<v;++w)g[w]=[p[w]],f[w]=[w];return{positions:g,cells:f}}(i,d);var u=i.order.join()+"-"+i.dtype,s=l[u];return d=+d||0,s||(s=l[u]=function(c,h){var v=a[c.length+"d"];if(v)return v(e,c,h)}(i.order,i.dtype)),s(i,d)};var e=x("ndarray-extract-contour"),o=x("zero-crossings"),a={"2d":function(i,d,u){var s=i({order:d,scalarArguments:3,getters:"generic"===u?[0]:void 0,phase:function(c,h,p,v){return c>v|0},vertex:function(c,h,p,v,g,f,w,y,M,A,k,C,P){var D=(w<<0)+(y<<1)+(M<<2)+(A<<3)|0;if(0!==D&&15!==D)switch(D){case 0:case 15:k.push([c-.5,h-.5]);break;case 1:k.push([c-.25-.25*(v+p-2*P)/(p-v),h-.25-.25*(g+p-2*P)/(p-g)]);break;case 2:k.push([c-.75-.25*(-v-p+2*P)/(v-p),h-.25-.25*(f+v-2*P)/(v-f)]);break;case 3:k.push([c-.5,h-.5-.5*(g+p+f+v-4*P)/(p-g+v-f)]);break;case 4:k.push([c-.25-.25*(f+g-2*P)/(g-f),h-.75-.25*(-g-p+2*P)/(g-p)]);break;case 5:k.push([c-.5-.5*(v+p+f+g-4*P)/(p-v+g-f),h-.5]);break;case 6:k.push([c-.5-.25*(-v-p+f+g)/(v-p+g-f),h-.5-.25*(-g-p+f+v)/(g-p+v-f)]);break;case 7:k.push([c-.75-.25*(f+g-2*P)/(g-f),h-.75-.25*(f+v-2*P)/(v-f)]);break;case 8:k.push([c-.75-.25*(-f-g+2*P)/(f-g),h-.75-.25*(-f-v+2*P)/(f-v)]);break;case 9:k.push([c-.5-.25*(v+p+-f-g)/(p-v+f-g),h-.5-.25*(g+p+-f-v)/(p-g+f-v)]);break;case 10:k.push([c-.5-.5*(-v-p-f-g+4*P)/(v-p+f-g),h-.5]);break;case 11:k.push([c-.25-.25*(-f-g+2*P)/(f-g),h-.75-.25*(g+p-2*P)/(p-g)]);break;case 12:k.push([c-.5,h-.5-.5*(-g-p-f-v+4*P)/(g-p+f-v)]);break;case 13:k.push([c-.75-.25*(v+p-2*P)/(p-v),h-.25-.25*(-f-v+2*P)/(f-v)]);break;case 14:k.push([c-.25-.25*(-v-p+2*P)/(v-p),h-.25-.25*(-g-p+2*P)/(g-p)])}},cell:function(c,h,p,v,g,f,w,y,M){y.push(g?[c,h]:[h,c])}});return function(c,h){var p=[],v=[];return s(c,p,v,h),{positions:p,cells:v}}}},l={}},{"ndarray-extract-contour":251,"zero-crossings":318}],303:[function(x,T,b){(function(e){(function(){"use strict";T.exports=function i(d,u,s){s=s||{};var c=l[d];c||(c=l[d]={" ":{data:new Float32Array(0),shape:.2}});var h=c[u];if(!h)if(u.length<=1||!/\d/.test(u))h=c[u]=function(P){for(var D=P.cells,F=P.positions,R=new Float32Array(6*D.length),L=0,I=0,B=0;B<D.length;++B)for(var V=D[B],Z=0;Z<3;++Z){var Y=F[V[Z]];R[L++]=Y[0],R[L++]=Y[1]+1.4,I=Math.max(Y[0],I)}return{data:R,shape:I}}(o(u,{triangles:!0,font:d,textAlign:s.textAlign||"left",textBaseline:"alphabetic",styletags:{breaklines:!0,bolds:!0,italics:!0,subscripts:!0,superscripts:!0}}));else{for(var p=u.split(/(\d|\s)/),v=new Array(p.length),g=0,f=0,w=0;w<p.length;++w)v[w]=i(d,p[w]),g+=v[w].data.length,f+=v[w].shape,w>0&&(f+=.02);var y=new Float32Array(g),M=0,A=-.5*f;for(w=0;w<v.length;++w){for(var k=v[w].data,C=0;C<k.length;C+=2)y[M++]=k[C]+A,y[M++]=k[C+1];A+=v[w].shape+.02}h=c[u]={data:y,shape:f}}return h};var o=x("vectorize-text"),a=window||e.global||{},l=a.__TEXT_CACHE||{};a.__TEXT_CACHE={}}).call(this)}).call(this,x("_process"))},{_process:5,"vectorize-text":311}],304:[function(x,T,b){"use strict";var e=x("parse-unit");function o(l,i){var d=e(getComputedStyle(l).getPropertyValue(i));return d[0]*a(d[1],l)}function a(l,i){switch(i=i||document.body,l=(l||"px").trim().toLowerCase(),i!==window&&i!==document||(i=document.body),l){case"%":return i.clientHeight/100;case"ch":case"ex":return function(d,u){var s=document.createElement("div");s.style["font-size"]="128"+d,u.appendChild(s);var c=o(s,"font-size")/128;return u.removeChild(s),c}(l,i);case"em":return o(i,"font-size");case"rem":return o(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return 96;case"cm":return 96/2.54;case"mm":return 96/25.4;case"pt":return 96/72;case"pc":return 16}return 1}T.exports=a},{"parse-unit":265}],305:[function(x,T,b){"use strict";T.exports=function(g){var f=(g=g||{}).center||[0,0,0],w=g.up||[0,1,0],y=g.right||c(w),M=g.radius||1,A=g.theta||0,k=g.phi||0;if(f=[].slice.call(f,0,3),w=[].slice.call(w,0,3),i(w,w),y=[].slice.call(y,0,3),i(y,y),"eye"in g){var C=g.eye,P=[C[0]-f[0],C[1]-f[1],C[2]-f[2]];l(y,P,w),u(y[0],y[1],y[2])<1e-6?y=c(w):i(y,y),M=u(P[0],P[1],P[2]);var D=d(w,P)/M,F=d(y,P)/M;k=Math.acos(D),A=Math.acos(F)}return M=Math.log(M),new h(g.zoomMin,g.zoomMax,f,w,y,M,A,k)};var e=x("filtered-vector"),o=x("gl-mat4/invert"),a=x("gl-mat4/rotate"),l=x("gl-vec3/cross"),i=x("gl-vec3/normalize"),d=x("gl-vec3/dot");function u(g,f,w){return Math.sqrt(Math.pow(g,2)+Math.pow(f,2)+Math.pow(w,2))}function s(g){return Math.min(1,Math.max(-1,g))}function c(g){var f=Math.abs(g[0]),w=Math.abs(g[1]),y=Math.abs(g[2]),M=[0,0,0];f>Math.max(w,y)?M[2]=1:w>Math.max(f,y)?M[0]=1:M[1]=1;for(var A=0,k=0,C=0;C<3;++C)A+=g[C]*g[C],k+=M[C]*g[C];for(C=0;C<3;++C)M[C]-=k/A*g[C];return i(M,M),M}function h(g,f,w,y,M,A,k,C){this.center=e(w),this.up=e(y),this.right=e(M),this.radius=e([A]),this.angle=e([k,C]),this.angle.bounds=[[-1/0,-Math.PI/2],[1/0,Math.PI/2]],this.setDistanceLimits(g,f),this.computedCenter=this.center.curve(0),this.computedUp=this.up.curve(0),this.computedRight=this.right.curve(0),this.computedRadius=this.radius.curve(0),this.computedAngle=this.angle.curve(0),this.computedToward=[0,0,0],this.computedEye=[0,0,0],this.computedMatrix=new Array(16);for(var P=0;P<16;++P)this.computedMatrix[P]=.5;this.recalcMatrix(0)}var p=h.prototype;p.setDistanceLimits=function(g,f){g=g>0?Math.log(g):-1/0,f=f>0?Math.log(f):1/0,f=Math.max(f,g),this.radius.bounds[0][0]=g,this.radius.bounds[1][0]=f},p.getDistanceLimits=function(g){var f=this.radius.bounds[0];return g?(g[0]=Math.exp(f[0][0]),g[1]=Math.exp(f[1][0]),g):[Math.exp(f[0][0]),Math.exp(f[1][0])]},p.recalcMatrix=function(g){this.center.curve(g),this.up.curve(g),this.right.curve(g),this.radius.curve(g),this.angle.curve(g);for(var f=this.computedUp,w=this.computedRight,y=0,M=0,A=0;A<3;++A)M+=f[A]*w[A],y+=f[A]*f[A];var k=Math.sqrt(y),C=0;for(A=0;A<3;++A)w[A]-=f[A]*M/y,C+=w[A]*w[A],f[A]/=k;var P=Math.sqrt(C);for(A=0;A<3;++A)w[A]/=P;var D=this.computedToward;l(D,f,w),i(D,D);var F=Math.exp(this.computedRadius[0]),R=this.computedAngle[0],L=this.computedAngle[1],I=Math.cos(R),B=Math.sin(R),V=Math.cos(L),Z=Math.sin(L),Y=this.computedCenter,ee=I*V,J=B*V,$=Z,Q=-I*Z,se=-B*Z,j=V,G=this.computedEye,W=this.computedMatrix;for(A=0;A<3;++A){var ie=ee*w[A]+J*D[A]+$*f[A];W[4*A+1]=Q*w[A]+se*D[A]+j*f[A],W[4*A+2]=ie,W[4*A+3]=0}var q=W[1],te=W[5],ne=W[9],le=W[2],ue=W[6],de=W[10],he=te*de-ne*ue,be=ne*le-q*de,ge=q*ue-te*le,we=u(he,be,ge);for(be/=we,ge/=we,W[0]=he/=we,W[4]=be,W[8]=ge,A=0;A<3;++A)G[A]=Y[A]+W[2+4*A]*F;for(A=0;A<3;++A){C=0;for(var Ce=0;Ce<3;++Ce)C+=W[A+4*Ce]*G[Ce];W[12+A]=-C}W[15]=1},p.getMatrix=function(g,f){this.recalcMatrix(g);var w=this.computedMatrix;if(f){for(var y=0;y<16;++y)f[y]=w[y];return f}return w};var v=[0,0,0];p.rotate=function(g,f,w,y){if(this.angle.move(g,f,w),y){this.recalcMatrix(g);var M=this.computedMatrix;v[0]=M[2],v[1]=M[6],v[2]=M[10];for(var A=this.computedUp,k=this.computedRight,C=this.computedToward,P=0;P<3;++P)M[4*P]=A[P],M[4*P+1]=k[P],M[4*P+2]=C[P];for(a(M,M,y,v),P=0;P<3;++P)A[P]=M[4*P],k[P]=M[4*P+1];this.up.set(g,A[0],A[1],A[2]),this.right.set(g,k[0],k[1],k[2])}},p.pan=function(g,f,w,y){f=f||0,w=w||0,y=y||0,this.recalcMatrix(g);var M=this.computedMatrix,A=(Math.exp(this.computedRadius[0]),M[1]),k=M[5],C=M[9],P=u(A,k,C),D=M[0],F=M[4],R=M[8],L=D*(A/=P)+F*(k/=P)+R*(C/=P),I=u(D-=A*L,F-=k*L,R-=C*L),B=(D/=I)*f+A*w,V=(F/=I)*f+k*w,Z=(R/=I)*f+C*w;this.center.move(g,B,V,Z);var Y=Math.exp(this.computedRadius[0]);Y=Math.max(1e-4,Y+y),this.radius.set(g,Math.log(Y))},p.translate=function(g,f,w,y){this.center.move(g,f||0,w||0,y||0)},p.setMatrix=function(g,f,w,y){var M=1;"number"==typeof w&&(M=0|w),(M<0||M>3)&&(M=1);var A=(M+2)%3;f||(this.recalcMatrix(g),f=this.computedMatrix);var k=f[M],C=f[M+4],P=f[M+8];if(y){var D=Math.abs(k),F=Math.abs(C),R=Math.abs(P),L=Math.max(D,F,R);D===L?(k=k<0?-1:1,C=P=0):R===L?(P=P<0?-1:1,k=C=0):(C=C<0?-1:1,k=P=0)}else{var I=u(k,C,P);k/=I,C/=I,P/=I}var B,V,Z=f[A],Y=f[A+4],ee=f[A+8],J=Z*k+Y*C+ee*P,$=u(Z-=k*J,Y-=C*J,ee-=P*J),Q=C*(ee/=$)-P*(Y/=$),se=P*(Z/=$)-k*ee,j=k*Y-C*Z,G=u(Q,se,j);if(Q/=G,se/=G,j/=G,this.center.jump(g,ve,Te,Le),this.radius.idle(g),this.up.jump(g,k,C,P),this.right.jump(g,Z,Y,ee),2===M){var W=f[1],ie=f[5],q=f[9];B=he<0?-Math.PI/2:Math.PI/2,V=Math.atan2(W*Q+ie*se+q*j,W*Z+ie*Y+q*ee)}else{var le=f[2],ue=f[6],de=f[10],he=le*k+ue*C+de*P,be=le*Z+ue*Y+de*ee,ge=le*Q+ue*se+de*j;B=Math.asin(s(he)),V=Math.atan2(ge,be)}this.angle.jump(g,V,B),this.recalcMatrix(g);var we=f[2],Ce=f[6],De=f[10],Se=this.computedMatrix;o(Se,f);var Fe=Se[15],ve=Se[12]/Fe,Te=Se[13]/Fe,Le=Se[14]/Fe,Ee=Math.exp(this.computedRadius[0]);this.center.jump(g,ve-we*Ee,Te-Ce*Ee,Le-De*Ee)},p.lastT=function(){return Math.max(this.center.lastT(),this.up.lastT(),this.right.lastT(),this.radius.lastT(),this.angle.lastT())},p.idle=function(g){this.center.idle(g),this.up.idle(g),this.right.idle(g),this.radius.idle(g),this.angle.idle(g)},p.flush=function(g){this.center.flush(g),this.up.flush(g),this.right.flush(g),this.radius.flush(g),this.angle.flush(g)},p.setDistance=function(g,f){f>0&&this.radius.set(g,Math.log(f))},p.lookAt=function(g,f,w,y){this.recalcMatrix(g),f=f||this.computedEye,w=w||this.computedCenter;var M=(y=y||this.computedUp)[0],A=y[1],k=y[2],C=u(M,A,k);if(!(C<1e-6)){M/=C,A/=C,k/=C;var P=f[0]-w[0],D=f[1]-w[1],F=f[2]-w[2],R=u(P,D,F);if(!(R<1e-6)){P/=R,D/=R,F/=R;var L=this.computedRight,I=L[0],B=L[1],V=L[2],Z=M*I+A*B+k*V,Y=u(I-=Z*M,B-=Z*A,V-=Z*k);if(!(Y<.01&&(Y=u(I=A*F-k*D,B=k*P-M*F,V=M*D-A*P))<1e-6)){I/=Y,B/=Y,V/=Y,this.up.set(g,M,A,k),this.right.set(g,I,B,V),this.center.set(g,w[0],w[1],w[2]),this.radius.set(g,Math.log(R));var ee=A*V-k*B,J=k*I-M*V,$=M*B-A*I,Q=u(ee,J,$),j=I*P+B*D+V*F,G=(ee/=Q)*P+(J/=Q)*D+($/=Q)*F,W=Math.asin(s(M*P+A*D+k*F)),ie=Math.atan2(G,j),q=this.angle._state,te=q[q.length-1],ne=q[q.length-2];te%=2*Math.PI;var le=Math.abs(te+2*Math.PI-ie),ue=Math.abs(te-ie),de=Math.abs(te-2*Math.PI-ie);le<ue&&(te+=2*Math.PI),de<ue&&(te-=2*Math.PI),this.angle.jump(this.angle.lastT(),te,ne),this.angle.set(g,ie,W)}}}}},{"filtered-vector":68,"gl-mat4/invert":98,"gl-mat4/rotate":103,"gl-vec3/cross":157,"gl-vec3/dot":162,"gl-vec3/normalize":179}],306:[function(x,T,b){"use strict";T.exports=function(o,a,l){var i=o*a,d=e*o,u=d-(d-o),s=o-u,c=e*a,h=c-(c-a),p=a-h,v=s*p-(i-u*h-s*h-u*p);return l?(l[0]=v,l[1]=i,l):[v,i]};var e=+(Math.pow(2,27)+1)},{}],307:[function(x,T,b){"use strict";T.exports=function(e,o,a){var l=e+o,i=l-e,d=o-i,u=e-(l-i);return a?(a[0]=u+d,a[1]=l,a):[u+d,l]}},{}],308:[function(x,T,b){(function(e){(function(){"use strict";var o=x("bit-twiddle"),a=x("dup"),l=x("buffer").Buffer;e.__TYPEDARRAY_POOL||(e.__TYPEDARRAY_POOL={UINT8:a([32,0]),UINT16:a([32,0]),UINT32:a([32,0]),BIGUINT64:a([32,0]),INT8:a([32,0]),INT16:a([32,0]),INT32:a([32,0]),BIGINT64:a([32,0]),FLOAT:a([32,0]),DOUBLE:a([32,0]),DATA:a([32,0]),UINT8C:a([32,0]),BUFFER:a([32,0])});var i="undefined"!=typeof Uint8ClampedArray,d="undefined"!=typeof BigUint64Array,u="undefined"!=typeof BigInt64Array,s=e.__TYPEDARRAY_POOL;s.UINT8C||(s.UINT8C=a([32,0])),s.BIGUINT64||(s.BIGUINT64=a([32,0])),s.BIGINT64||(s.BIGINT64=a([32,0])),s.BUFFER||(s.BUFFER=a([32,0]));var c=s.DATA,h=s.BUFFER;function p(I){if(I){var V=o.log2(I.length||I.byteLength);c[V].push(I)}}function v(I){I=o.nextPow2(I);var B=o.log2(I),V=c[B];return V.length>0?V.pop():new ArrayBuffer(I)}function g(I){return new Uint8Array(v(I),0,I)}function f(I){return new Uint16Array(v(2*I),0,I)}function w(I){return new Uint32Array(v(4*I),0,I)}function y(I){return new Int8Array(v(I),0,I)}function M(I){return new Int16Array(v(2*I),0,I)}function A(I){return new Int32Array(v(4*I),0,I)}function k(I){return new Float32Array(v(4*I),0,I)}function C(I){return new Float64Array(v(8*I),0,I)}function P(I){return i?new Uint8ClampedArray(v(I),0,I):g(I)}function D(I){return d?new BigUint64Array(v(8*I),0,I):null}function F(I){return u?new BigInt64Array(v(8*I),0,I):null}function R(I){return new DataView(v(I),0,I)}function L(I){I=o.nextPow2(I);var B=o.log2(I),V=h[B];return V.length>0?V.pop():new l(I)}b.free=function(I){if(l.isBuffer(I))h[o.log2(I.length)].push(I);else{if("[object ArrayBuffer]"!==Object.prototype.toString.call(I)&&(I=I.buffer),!I)return;var V=0|o.log2(I.length||I.byteLength);c[V].push(I)}},b.freeUint8=b.freeUint16=b.freeUint32=b.freeBigUint64=b.freeInt8=b.freeInt16=b.freeInt32=b.freeBigInt64=b.freeFloat32=b.freeFloat=b.freeFloat64=b.freeDouble=b.freeUint8Clamped=b.freeDataView=function(I){p(I.buffer)},b.freeArrayBuffer=p,b.freeBuffer=function(I){h[o.log2(I.length)].push(I)},b.malloc=function(I,B){if(void 0===B||"arraybuffer"===B)return v(I);switch(B){case"uint8":return g(I);case"uint16":return f(I);case"uint32":return w(I);case"int8":return y(I);case"int16":return M(I);case"int32":return A(I);case"float":case"float32":return k(I);case"double":case"float64":return C(I);case"uint8_clamped":return P(I);case"bigint64":return F(I);case"biguint64":return D(I);case"buffer":return L(I);case"data":case"dataview":return R(I);default:return null}return null},b.mallocArrayBuffer=v,b.mallocUint8=g,b.mallocUint16=f,b.mallocUint32=w,b.mallocInt8=y,b.mallocInt16=M,b.mallocInt32=A,b.mallocFloat32=b.mallocFloat=k,b.mallocFloat64=b.mallocDouble=C,b.mallocUint8Clamped=P,b.mallocBigUint64=D,b.mallocBigInt64=F,b.mallocDataView=R,b.mallocBuffer=L,b.clearCache=function(){for(var I=0;I<32;++I)s.UINT8[I].length=0,s.UINT16[I].length=0,s.UINT32[I].length=0,s.INT8[I].length=0,s.INT16[I].length=0,s.INT32[I].length=0,s.FLOAT[I].length=0,s.DOUBLE[I].length=0,s.BIGUINT64[I].length=0,s.BIGINT64[I].length=0,s.UINT8C[I].length=0,c[I].length=0,h[I].length=0}}).call(this)}).call(this,void 0!==m?m:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"bit-twiddle":32,buffer:3,dup:65}],309:[function(x,T,b){"use strict";function e(a){this.roots=new Array(a),this.ranks=new Array(a);for(var l=0;l<a;++l)this.roots[l]=l,this.ranks[l]=0}T.exports=e;var o=e.prototype;Object.defineProperty(o,"length",{get:function(){return this.roots.length}}),o.makeSet=function(){var a=this.roots.length;return this.roots.push(a),this.ranks.push(0),a},o.find=function(a){for(var l=a,i=this.roots;i[a]!==a;)a=i[a];for(;i[l]!==a;){var d=i[l];i[l]=a,l=d}return a},o.link=function(a,l){var i=this.find(a),d=this.find(l);if(i!==d){var u=this.ranks,s=this.roots,c=u[i],h=u[d];c<h?s[i]=d:h<c?s[d]=i:(s[d]=i,++u[i])}}},{}],310:[function(x,T,b){"use strict";T.exports=function(e,o,a){return 0===e.length?e:o?(a||e.sort(o),function(l,i){for(var d=1,u=l.length,s=l[0],c=l[0],h=1;h<u;++h)if(c=s,i(s=l[h],c)){if(h===d){d++;continue}l[d++]=s}return l.length=d,l}(e,o)):(a||e.sort(),function(l){for(var i=1,d=l.length,u=l[0],s=l[0],c=1;c<d;++c,s=u)if(s=u,(u=l[c])!==s){if(c===i){i++;continue}l[i++]=u}return l.length=i,l}(e))}},{}],311:[function(x,T,b){"use strict";T.exports=function(l,i){return"object"==typeof i&&null!==i||(i={}),e(l,i.canvas||o,i.context||a,i)};var e=x("./lib/vtext"),o=null,a=null;"undefined"!=typeof document&&((o=document.createElement("canvas")).width=8192,o.height=1024,a=o.getContext("2d"))},{"./lib/vtext":312}],312:[function(x,T,b){T.exports=function(p,v,g,f){var w=64,y=1.25,M={breaklines:!1,bolds:!1,italics:!1,subscripts:!1,superscripts:!1};return f&&(f.size&&f.size>0&&(w=f.size),f.lineSpacing&&f.lineSpacing>0&&(y=f.lineSpacing),f.styletags&&f.styletags.breaklines&&(M.breaklines=!!f.styletags.breaklines),f.styletags&&f.styletags.bolds&&(M.bolds=!!f.styletags.bolds),f.styletags&&f.styletags.italics&&(M.italics=!!f.styletags.italics),f.styletags&&f.styletags.subscripts&&(M.subscripts=!!f.styletags.subscripts),f.styletags&&f.styletags.superscripts&&(M.superscripts=!!f.styletags.superscripts)),g.font=[f.fontStyle,f.fontVariant,f.fontWeight,w+"px",f.font].filter(function(A){return A}).join(" "),g.textAlign="start",g.textBaseline="alphabetic",g.direction="ltr",h(function(A,k,C,P,D,F){C=(C=C.replace(/\n/g,"")).replace(/\<br\>/g,!0===F.breaklines?"\n":" ");var R="",L=[];for(Z=0;Z<C.length;++Z)L[Z]=R;!0===F.bolds&&(L=u("b","b|",C,L)),!0===F.italics&&(L=u("i","i|",C,L)),!0===F.superscripts&&(L=u("sup","+1",C,L)),!0===F.subscripts&&(L=u("sub","-1",C,L));var I=[],B="";for(Z=0;Z<C.length;++Z)null!==L[Z]&&(B+=C[Z],I.push(L[Z]));var V,Z,Y,ee,J,$=B.split("\n"),Q=$.length,se=Math.round(D*P),j=P,G=2*P,W=0,ie=Q*se+G;A.height<ie&&(A.height=ie),k.fillStyle="#000",k.fillRect(0,0,A.width,A.height),k.fillStyle="#fff";var q=0,te="";function ne(){if(""!==te){var Ce=k.measureText(te).width;k.fillText(te,j+Y,G+ee),Y+=Ce}}function le(){return Math.round(J)+"px "}function ue(Ce,De){var Se=""+k.font;if(!0===F.subscripts){var Fe=Ce.indexOf("-"),ve=De.indexOf("-"),Te=Fe>-1?parseInt(Ce[1+Fe]):0,Le=ve>-1?parseInt(De[1+ve]):0;Te!==Le&&(Se=Se.replace(le(),"?px "),J*=Math.pow(.75,Le-Te),Se=Se.replace("?px ",le())),ee+=.25*se*(Le-Te)}if(!0===F.superscripts){var Ee=Ce.indexOf("+"),Pe=De.indexOf("+"),je=Ee>-1?parseInt(Ce[1+Ee]):0,Ge=Pe>-1?parseInt(De[1+Pe]):0;je!==Ge&&(Se=Se.replace(le(),"?px "),J*=Math.pow(.75,Ge-je),Se=Se.replace("?px ",le())),ee-=.25*se*(Ge-je)}if(!0===F.bolds){var Ke=Ce.indexOf("b|")>-1,lt=De.indexOf("b|")>-1;!Ke&&lt&&(Se=Ue?Se.replace("italic ","italic bold "):"bold "+Se),Ke&&!lt&&(Se=Se.replace("bold ",""))}if(!0===F.italics){var Ue=Ce.indexOf("i|")>-1,$e=De.indexOf("i|")>-1;!Ue&&$e&&(Se="italic "+Se),Ue&&!$e&&(Se=Se.replace("italic ",""))}k.font=Se}for(V=0;V<Q;++V){var de=$[V]+"\n";for(Y=0,ee=V*se,J=P,te="",Z=0;Z<de.length;++Z){var he=Z+q<I.length?I[Z+q]:I[I.length-1];R===he?te+=de[Z]:(ne(),te=de[Z],void 0!==he&&(ue(R,he),R=he))}ne(),q+=de.length;var be=0|Math.round(Y+2*j);W<be&&(W=be)}var ge=W,we=G+se*Q;return o(k.getImageData(0,0,ge,we).data,[we,ge,4]).pick(-1,-1,0).transpose(1,0)}(v,g,p,w,y,M),f,w)},T.exports.processPixels=h;var e=x("surface-nets"),o=x("ndarray"),a=x("simplify-planar-graph"),l=x("clean-pslg"),i=x("cdt2d"),d=x("planar-graph-to-polyline");function u(p,v,g,f){for(var w="<"+p+">",y="</"+p+">",M=w.length,A=y.length,k="+"===v[0]||"-"===v[0],C=0,P=-A;C>-1&&-1!==(C=g.indexOf(w,C))&&-1!==(P=g.indexOf(y,C+M))&&!(P<=C);){for(var D=C;D<P+A;++D)if(D<C+M||D>=P)f[D]=null,g=g.substr(0,D)+" "+g.substr(D+1);else if(null!==f[D]){var F=f[D].indexOf(v[0]);-1===F?f[D]+=v:k&&(f[D]=f[D].substr(0,F+1)+(1+parseInt(f[D][F+1]))+f[D].substr(F+2))}var R=C+M,L=g.substr(R,P-R).indexOf(w);C=-1!==L?L:P+A}return f}function c(p,v,g,f){var w=function s(p,v){var g=e(p,128);return v?a(g.cells,g.positions,.25):{edges:g.cells,positions:g.positions}}(p,f),y=function(V,Z,Y){for(var ee=Z.textAlign||"start",J=Z.textBaseline||"alphabetic",$=[1<<30,1<<30],Q=[0,0],se=V.length,j=0;j<se;++j)for(var G=V[j],W=0;W<2;++W)$[W]=0|Math.min($[W],G[W]),Q[W]=0|Math.max(Q[W],G[W]);var ie=0;switch(ee){case"center":ie=-.5*($[0]+Q[0]);break;case"right":case"end":ie=-Q[0];break;case"left":case"start":ie=-$[0];break;default:throw new Error("vectorize-text: Unrecognized textAlign: '"+ee+"'")}var q=0;switch(J){case"hanging":case"top":q=-$[1];break;case"middle":q=-.5*($[1]+Q[1]);break;case"alphabetic":case"ideographic":q=-3*Y;break;case"bottom":q=-Q[1];break;default:throw new Error("vectorize-text: Unrecoginized textBaseline: '"+J+"'")}var te=1/Y;return"lineHeight"in Z?te*=+Z.lineHeight:"width"in Z?te=Z.width/(Q[0]-$[0]):"height"in Z&&(te=Z.height/(Q[1]-$[1])),V.map(function(ne){return[te*(ne[0]+ie),te*(ne[1]+q)]})}(w.positions,v,g),M=w.edges,A="ccw"===v.orientation;if(l(y,M),v.polygons||v.polygon||v.polyline){for(var k=d(M,y),C=new Array(k.length),P=0;P<k.length;++P){for(var D=k[P],F=new Array(D.length),R=0;R<D.length;++R){for(var L=D[R],I=new Array(L.length),B=0;B<L.length;++B)I[B]=y[L[B]].slice();A&&I.reverse(),F[R]=I}C[P]=F}return C}return v.triangles||v.triangulate||v.triangle?{cells:i(y,M,{delaunay:!1,exterior:!1,interior:!0}),positions:y}:{edges:M,positions:y}}function h(p,v,g){try{return c(p,v,g,!0)}catch(f){}try{return c(p,v,g,!1)}catch(f){}return v.polygons||v.polyline||v.polygon?[]:v.triangles||v.triangulate||v.triangle?{cells:[],positions:[]}:{edges:[],positions:[]}}},{cdt2d:42,"clean-pslg":50,ndarray:259,"planar-graph-to-polyline":268,"simplify-planar-graph":297,"surface-nets":302}],313:[function(x,T,b){!function(){"use strict";if("undefined"==typeof ses||!ses.ok||ses.ok()){"undefined"!=typeof ses&&(ses.weakMapPermitHostObjects=w);var e=!1;if("function"==typeof WeakMap){var o=WeakMap;if("undefined"==typeof navigator||!/Firefox/.test(navigator.userAgent)){var a=new o,l=Object.freeze({});if(a.set(l,1),1===a.get(l))return void(T.exports=WeakMap);e=!0}}var i=Object.getOwnPropertyNames,d=Object.defineProperty,u=Object.isExtensible,s="weakmap:ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var c=new ArrayBuffer(25),h=new Uint8Array(c);crypto.getRandomValues(h),s="weakmap:rand:"+Array.prototype.map.call(h,function(C){return(C%36).toString(36)}).join("")+"___"}if(d(Object,"getOwnPropertyNames",{value:function(C){return i(C).filter(y)}}),"getPropertyNames"in Object){var p=Object.getPropertyNames;d(Object,"getPropertyNames",{value:function(C){return p(C).filter(y)}})}!function(){var C=Object.freeze;d(Object,"freeze",{value:function(F){return M(F),C(F)}});var P=Object.seal;d(Object,"seal",{value:function(F){return M(F),P(F)}});var D=Object.preventExtensions;d(Object,"preventExtensions",{value:function(F){return M(F),D(F)}})}();var v=!1,g=0,f=function(){this instanceof f||k();var C=[],P=[],D=g++;return Object.create(f.prototype,{get___:{value:A(function(F,R){var L,I=M(F);return I?D in I?I[D]:R:(L=C.indexOf(F))>=0?P[L]:R})},has___:{value:A(function(F){var R=M(F);return R?D in R:C.indexOf(F)>=0})},set___:{value:A(function(F,R){var L,I=M(F);return I?I[D]=R:(L=C.indexOf(F))>=0?P[L]=R:(P[L=C.length]=R,C[L]=F),this})},delete___:{value:A(function(F){var R,L,I=M(F);return I?D in I&&delete I[D]:!((R=C.indexOf(F))<0||(L=C.length-1,C[R]=void 0,P[R]=P[L],C[R]=C[L],C.length=L,P.length=L,0))})}})};f.prototype=Object.create(Object.prototype,{get:{value:function(C,P){return this.get___(C,P)},writable:!0,configurable:!0},has:{value:function(C){return this.has___(C)},writable:!0,configurable:!0},set:{value:function(C,P){return this.set___(C,P)},writable:!0,configurable:!0},delete:{value:function(C){return this.delete___(C)},writable:!0,configurable:!0}}),"function"==typeof o?function(){function C(){this instanceof f||k();var P,D=new o,F=void 0,R=!1;return P=e?function(L,I){return D.set(L,I),D.has(L)||(F||(F=new f),F.set(L,I)),this}:function(L,I){if(R)try{D.set(L,I)}catch(B){F||(F=new f),F.set___(L,I)}else D.set(L,I);return this},Object.create(f.prototype,{get___:{value:A(function(L,I){return F?D.has(L)?D.get(L):F.get___(L,I):D.get(L,I)})},has___:{value:A(function(L){return D.has(L)||!!F&&F.has___(L)})},set___:{value:A(P)},delete___:{value:A(function(L){var I=!!D.delete(L);return F&&F.delete___(L)||I})},permitHostObjects___:{value:A(function(L){if(L!==w)throw new Error("bogus call to permitHostObjects___");R=!0})}})}e&&"undefined"!=typeof Proxy&&(Proxy=void 0),C.prototype=f.prototype,T.exports=C,Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),T.exports=f)}function w(C){C.permitHostObjects___&&C.permitHostObjects___(w)}function y(C){return!("weakmap:"==C.substr(0,"weakmap:".length)&&"___"===C.substr(C.length-3))}function M(C){if(C!==Object(C))throw new TypeError("Not an object: "+C);var P=C[s];if(P&&P.key===C)return P;if(u(C)){P={key:C};try{return d(C,s,{value:P,writable:!1,enumerable:!1,configurable:!1}),P}catch(D){return}}}function A(C){return C.prototype=null,Object.freeze(C)}function k(){v||"undefined"==typeof console||(v=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}}()},{}],314:[function(x,T,b){var e=x("./hidden-store.js");T.exports=function(){var o={};return function(a){if(("object"!=typeof a||null===a)&&"function"!=typeof a)throw new Error("Weakmap-shim: Key must be object");var l=a.valueOf(o);return l&&l.identity===o?l:e(a,o)}}},{"./hidden-store.js":315}],315:[function(x,T,b){T.exports=function(e,o){var a={identity:o},l=e.valueOf;return Object.defineProperty(e,"valueOf",{value:function(i){return i!==o?l.apply(this,arguments):a},writable:!0}),a}},{}],316:[function(x,T,b){var e=x("./create-store.js");T.exports=function(){var o=e();return{get:function(a,l){var i=o(a);return i.hasOwnProperty("value")?i.value:l},set:function(a,l){return o(a).value=l,this},has:function(a){return"value"in o(a)},delete:function(a){return delete o(a).value}}}},{"./create-store.js":314}],317:[function(x,T,b){"use strict";var a,l;T.exports=(a=function(){return function(a,l,i,d,u,s){var c=a[0],h=i[0],p=[0],v=h;d|=0;var g=0,f=h;for(g=0;g<c;++g){var w=l[d]-s,y=l[d+v]-s;w>=0!=y>=0&&u.push(p[0]+.5+.5*(w+y)/(w-y)),d+=f,++p[0]}}}.bind(void 0,{funcName:"zeroCrossings"}),l={},function(i,d,u){var s=i.dtype,c=i.order,h=[s,c.join()].join(),p=l[h];return p||(l[h]=p=a([s,c])),p(i.shape.slice(0),i.data,i.stride,0|i.offset,d,u)})},{}],318:[function(x,T,b){"use strict";T.exports=function(o,a){var l=[];return a=+a||0,e(o.hi(o.shape[0]-1),l,a),l};var e=x("./lib/zc-core")},{"./lib/zc-core":317}]},{},[6])(6)})}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[27])(27)}},hp=>{hp(hp.s=261)}]);